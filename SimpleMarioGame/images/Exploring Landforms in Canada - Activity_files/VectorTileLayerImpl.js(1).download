// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.35/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(m,q,a,b,g,h,k,d,c,f,e,l){function n(){}b={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var r=m(d,{declaredClass:"esri.geometry.Extent",type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(t,w,v,y,x){h.isObject(t)?(h.mixin(this,t),this.spatialReference&&(this.spatialReference=
l.createSpatialReference(this.spatialReference))):this.update(t,w,v,y,x);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new c((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new c(this.xmin,this.ymax,this.spatialReference)},getTopRight:function(){return new c(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new c(this.xmin,
this.ymin,this.spatialReference)},getBottomRight:function(){return new c(this.xmax,this.ymin,this.spatialReference)},centerAt:function(t){var w=this.getCenter(),v=t.x-w.x;t=t.y-w.y;return new r(this.xmin+v,this.ymin+t,this.xmax+v,this.ymax+t,this.spatialReference)},update:function(t,w,v,y,x){this.xmin=t;this.ymin=w;this.xmax=v;this.ymax=y;this.spatialReference=x;this.clearCache();return this},offset:function(t,w){return new r(this.xmin+t,this.ymin+w,this.xmax+t,this.ymax+w,this.spatialReference)},
expand:function(t){var w=(1-t)/2;t=this.getWidth()*w;w*=this.getHeight();return new r(this.xmin+t,this.ymin+w,this.xmax-t,this.ymax-w,this.spatialReference)},intersects:function(t){if(!t)return!1;var w=t.type,v=this.spatialReference,y=t.spatialReference;v&&y&&!v.equals(y)&&v._canProject(y)&&(t=v.isWebMercator()?f.geographicToWebMercator(t):f.webMercatorToGeographic(t,!0));switch(w){case "point":return this.contains(t);case "multipoint":return this._intersectsMultipoint(t);case "extent":return this._intersectsExtent(t);
case "polygon":return this._intersectsPolygon(t);case "polyline":return this._intersectsPolyline(t)}},normalize:function(){var t=this._normalize(!1,!0);a.isArray(t)||(t=[t]);return t},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var t=this.spatialReference,w=t&&t._getInfo(),v=[],y=0;if(w&&this._isOutOfBounds(w)){var x=this;y=x.xmin;var B=x.ymin,p=x.ymax,z=w.valid[0],u=w.valid[1];x.getWidth()>2*u&&(x=x.getCenter(),x=new r(x.x-u,B,x.x+u,p,new k(t.toJson())));y=x.xmin-
y;var D=this._normalizeX(x.xmin,w);w=this._normalizeX(x.xmax,w);D.frameId===w.frameId?v.push(new r(D.x,B,w.x,p,new k(t.toJson()))):v.push(new r(D.x,B,u,p,new k(t.toJson())),new r(z,B,w.x,p,new k(t.toJson())))}else v.push(this.getExtent());return{extents:v,marginLeft:y}},_intersectsMultipoint:function(t){var w=t.points.length,v;for(v=0;v<w;v++)if(this.contains(t.getPoint(v)))return!0;return!1},_intersectsExtent:function(t){var w,v,y=!1;if(this.xmin<=t.xmin){var x=t.xmin;this.xmax<x?y=!0:w=Math.min(this.xmax,
t.xmax)-x}else x=this.xmin,t.xmax<x?y=!0:w=Math.min(this.xmax,t.xmax)-x;if(this.ymin<=t.ymin){var B=t.ymin;this.ymax<B?y=!0:v=Math.min(this.ymax,t.ymax)-B}else B=this.ymin,t.ymax<B?y=!0:v=Math.min(this.ymax,t.ymax)-B;return y?null:new r(x,B,x+w,B+v,this.spatialReference)},_intersectsPolygon:function(t){var w=[this.xmin,this.ymax],v=[this.xmax,this.ymax],y=[this.xmin,this.ymin],x=[this.xmax,this.ymin],B=[w,v,y,x];w=[[y,w],[w,v],[v,x],[x,y]];y=t.rings;x=y.length;var p=new c(0,0,this.spatialReference);
var z=B.length;for(v=0;v<z;v++)if(p.update(B[v][0],B[v][1]),t.contains(p))return!0;p.setSpatialReference(t.spatialReference);for(v=0;v<x;v++)if(B=y[v],z=B.length){var u=B[0];p.update(u[0],u[1]);if(this.contains(p))return!0;for(t=1;t<z;t++){var D=B[t];p.update(D[0],D[1]);if(this.contains(p)||this._intersectsLine([u,D],w))return!0;u=D}}return!1},_intersectsPolyline:function(t){var w=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,
this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],v,y=t.paths,x=y.length,B,p=new c(0,0,t.spatialReference);for(t=0;t<x;t++){var z=y[t];if(B=z.length){var u=z[0];p.update(u[0],u[1]);if(this.contains(p))return!0;for(v=1;v<B;v++){var D=z[v];p.update(D[0],D[1]);if(this.contains(p)||this._intersectsLine([u,D],w))return!0;u=D}}}return!1},_intersectsLine:function(t,w){var v=e._getLineIntersection2,y,x=w.length;for(y=0;y<x;y++)if(v(t,w[y]))return!0;return!1},contains:function(t){if(!t)return!1;var w=
t.type;if("point"===w){var v=this.spatialReference,y=t.spatialReference;w=t.x;t=t.y;v&&y&&!v.equals(y)&&v._canProject(y)&&(t=v.isWebMercator()?c.lngLatToXY(w,t):c.xyToLngLat(w,t,!0),w=t[0],t=t[1]);return w>=this.xmin&&w<=this.xmax&&t>=this.ymin&&t<=this.ymax}return"extent"===w?this._containsExtent(t):!1},_containsExtent:function(t){var w=t.xmin,v=t.ymin,y=t.xmax,x=t.ymax,B=t.spatialReference;t=new c(w,v,B);w=new c(w,x,B);x=new c(y,x,B);v=new c(y,v,B);return this.contains(t)&&this.contains(w)&&this.contains(x)&&
this.contains(v)?!0:!1},union:function(t){return new r(Math.min(this.xmin,t.xmin),Math.min(this.ymin,t.ymin),Math.max(this.xmax,t.xmax),Math.max(this.ymax,t.ymax),this.spatialReference)},getExtent:function(){var t=this.spatialReference;return new r(this.xmin,this.ymin,this.xmax,this.ymax,t&&new k(t.toJson()))},_shiftCM:function(t){var w=this.getCacheValue("_shifted");if(!w){w=new r(this.toJson());var v=w.spatialReference;if(t=t||v._getInfo()){var y=this._getCM(t);if(y){var x=v._isWebMercator()?f.webMercatorToGeographic(y):
y;w.xmin-=y.x;w.xmax-=y.x;v._isWebMercator()||(x.x=this._normalizeX(x.x,t).x);w.setSpatialReference(new k(h.substitute({Central_Meridian:x.x},4326===v.wkid?t.altTemplate:t.wkTemplate)))}}this.setCacheValue("_shifted",w)}return w},_getCM:function(t){var w;this._isOutOfBounds(t)&&(w=this.getCenter());return w},_isOutOfBounds:function(t){var w=t.valid[0];t=t.valid[1];var v=this.xmin,y=this.xmax;return!(v>=w&&v<=t&&y>=w&&y<=t)},_normalize:function(t,w,v){var y=new r(this.toJson()),x=y.spatialReference;
if(x&&(v=v||x._getInfo())){var B=q.map(this._getParts(v),function(p){return p.extent});return 2<B.length?t?this._shiftCM(v):y.update(v.valid[0],y.ymin,v.valid[1],y.ymax,x):2===B.length?t?this._shiftCM(v):w?B:{rings:q.map(B,function(p){return[[p.xmin,p.ymin],[p.xmin,p.ymax],[p.xmax,p.ymax],[p.xmax,p.ymin],[p.xmin,p.ymin]]}),spatialReference:x}:B[0]||y}return y},_getParts:function(t){var w=this.getCacheValue("_parts");if(!w){w=[];var v=this.xmin,y=this.xmax,x=this.ymin,B=this.ymax,p=this.spatialReference,
z=this.getWidth(),u=v,D=y,I=0,C=0;t=t||p._getInfo();var E=t.valid[0];var G=t.valid[1];C=this._normalizeX(v,t);v=C.x;I=C.frameId;C=this._normalizeX(y,t);y=C.x;C=C.frameId;t=v===y&&0<z;if(z>2*G){z=new r(u<D?v:y,x,G,B,p);v=new r(E,x,u<D?y:v,B,p);G=new r(0,x,G,B,p);x=new r(E,x,0,B,p);p=[];E=[];z.contains(G)&&p.push(I);z.contains(x)&&E.push(I);v.contains(G)&&p.push(C);v.contains(x)&&E.push(C);for(B=I+1;B<C;B++)p.push(B),E.push(B);w.push({extent:z,frameIds:[I]},{extent:v,frameIds:[C]},{extent:G,frameIds:p},
{extent:x,frameIds:E})}else v>y||t?w.push({extent:new r(v,x,G,B,p),frameIds:[I]},{extent:new r(E,x,y,B,p),frameIds:[C]}):w.push({extent:new r(v,x,y,B,p),frameIds:[I]});this.setCacheValue("_parts",w)}return w},_normalizeX:function(t,w){var v=0,y=w.valid[0],x=w.valid[1];w=2*x;t>x?(v=Math.ceil(Math.abs(t-x)/w),t-=v*w):t<y&&(v=Math.ceil(Math.abs(t-y)/w),t+=v*w,v=-v);return{x:t,frameId:v}},toJson:function(){var t={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},w=this.spatialReference;w&&
(t.spatialReference=w.toJson());return t}});n.prototype=r.prototype;r.simpleConstructor=n;r.defaultProps=b;a.setObject("geometry.Extent",r,g);g.geometry.defaultExtent=b;return r})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(m,q,a){m=function(){return this}();var b=m.location,g=b.pathname;a=b.protocol;b={version:"3.35",_appBaseUrl:a+"//"+b.host+g.substring(0,g.lastIndexOf(g.split("/")[g.split("/").length-1]))};q.noGlobals||(m.esri=b);(b.dijit=b.dijit||
{})._arcgisUrl=("http:"===a||"https:"===a?a:"http:")+"//www.arcgis.com/sharing/rest";return b})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(m,q,a,b,g,h,k,d,c){function f(y,x,B,p){(x=x&&x[y])?x={formatType:x.formatType,options:x}:p&&-1!==m.indexOf(p.properties||"",y)?x={formatType:p.formatter||"DateString",options:null}:B&&-1!==m.indexOf(B.properties||"",y)&&(x={formatType:B.formatter||
"NumberFormat",options:null});return x}function e(y,x,B){return[b.isString(y)?y.split(""):y,x||a.global,b.isString(B)?new Function("item","index","array",B):B]}function l(y){return void 0!==y&&null!==y}function n(y){return l(y)?y:""}function r(y,x,B,p){var z=B.match(/([^\(]+)(\([^\)]+\))?/i);B=b.trim(z[1]);var u=z[2]?b.trim(z[2]):null;z=x[y];p=p||(u?q.fromJson(u.replace(/^\(/,"({").replace(/\)$/,"})")):{});u=p.utcOffset;if(-1===m.indexOf(w,B))B=b.getObject(B),b.isFunction(B)&&(z=B(z,y,x,p));else if("number"===
typeof z||"string"===typeof z&&z&&!isNaN(Number(z)))switch(z=Number(z),B){case "NumberFormat":return k.format(z,p);case "DateString":y=new Date(z);if(p.local||p.systemLocale)return p.systemLocale?y.toLocaleDateString()+(p.hideTime?"":" "+y.toLocaleTimeString()):y.toDateString()+(p.hideTime?"":" "+y.toTimeString());y=y.toUTCString();p.hideTime&&(y=y.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return y;case "DateFormat":return y=new Date(z),l(u)&&(y=g.add(y,"minute",y.getTimezoneOffset()-u)),d.format(y,
p)}return n(z)}function t(y,x){var B;if(x)for(B in y)y.hasOwnProperty(B)&&(void 0===y[B]?delete y[B]:y[B]instanceof Object&&t(y[B],!0));else for(B in y)y.hasOwnProperty(B)&&void 0===y[B]&&delete y[B];return y}var w=["NumberFormat","DateString","DateFormat"],v=/<\/?[^>]+>/g;h={valueOf:function(y,x){for(var B in y)if(y[B]==x)return B;return null},stripTags:function(y){if(y){var x=typeof y;if("string"===x)y=y.replace(v,"");else if("object"===x)for(var B in y)(x=y[B])&&"string"===typeof x&&(x=x.replace(v,
"")),y[B]=x}return y},substitute:function(y,x,B){if(l(B))if(b.isObject(B)){var p=B.first;var z=B.dateFormat;var u=B.numberFormat;var D=B.format}else p=B;if(x&&"${*}"!==x)return b.replace(x,b.hitch({obj:y},function(C,E){var G=E.split(":");return 1<G.length?(E=G[0],G.shift(),(C=D&&D[G[0]])?G=C.formatType:(G=G.join(":"),C=null),r(E,this.obj,G,C)):(C=f(E,D,u,z))?r(E,this.obj,C.formatType,C.options):n(this.obj[E])}),/\$\{([^\}]+)\}/g);x=[];for(var I in y)if(B=(B=f(I,D,u,z))?r(I,y,B.formatType,B.options):
y[I],x.push(I+" \x3d "+n(B)+"\x3cbr/\x3e"),p)break;return x.join("")},filter:function(y,x,B){x=e(y,B,x);B={};var p;y=x[0];for(p in y)x[2].call(x[p],y[p],p,y)&&(B[p]=y[p]);return B},startsWith:function(y,x,B){B=B||0;return y.indexOf(x,B)===B},endsWith:function(y,x,B){if("number"!==typeof B||!isFinite(B)||Math.floor(B)!==B||B>y.length)B=y.length;B-=x.length;y=y.indexOf(x,B);return-1!==y&&y===B},isDefined:l,fixJson:t,isObject:function(y){return y&&"object"===typeof y},isString:function(y){return"string"===
typeof y},mixin:function(y,x){for(var B in x)x.hasOwnProperty(B)&&(y[B]=x[B]);return y},clone2DArray:function(y){if(y=y?y.slice(0):null){var x,B=y.length;for(x=0;x<B;x++)y[x]=y[x]?y[x].slice(0):null}return y},clone3DArray:function(y){if(y=y?y.slice(0):null){var x,B=y.length;for(x=0;x<B;x++){y[x]=y[x]?y[x].slice(0):null;var p=y[x];if(p){var z,u=p.length;for(z=0;z<u;z++)p[z]=p[z]?p[z].slice(0):null}}}return y}};b.mixin(c,h);c._isDefined=l;c._getParts=e;c._sanitize=t;return h})},"esri/SpatialReference":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/has","./kernel","./lang"],function(m,q,a,b,g){function h(){}a=[-2.0037508342788905E7,2.0037508342788905E7];var k=[-2.0037508342787E7,2.0037508342787E7];m=m(null,{declaredClass:"esri.SpatialReference",constructor:function(d){d&&(g.isObject(d)?g.mixin(this,d):g.isString(d)?this.wkt=d:this.wkid=d)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:k,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:k,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:k,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:k,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==q.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==q.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(d){var c=!1;d&&(c=this.isWebMercator()&&4326===d.wkid||d.isWebMercator()&&4326===this.wkid);return c},isWebMercator:function(){return this._isWebMercator()},equals:function(d){var c=!1;d&&(this===d&&
(c=!0),this.wkid||d.wkid?c=this.wkid===d.wkid||this.isWebMercator()&&d.isWebMercator()||this.wkid===d.latestWkid||d.wkid===this.latestWkid:this.wkt&&d.wkt&&(c=this.wkt.toUpperCase()===d.wkt.toUpperCase()));return c},toJson:function(){var d=null;null!=this.wkid?d={wkid:this.wkid}:null!=this.wkt&&(d={wkt:this.wkt});d&&null!=this.latestWkid&&(d.latestWkid=this.latestWkid);return d}});h.prototype=m.prototype;m.simpleConstructor=h;return b.SpatialReference=m})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(m,q,a,b,g){m=m(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(h){this.spatialReference=h;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new g(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(h){return this.cache&&this.cache[h]},setCacheValue:function(h,k){this.cache||
(this.cache={});this.cache[h]=k}});q.setObject("geometry.Geometry",m,b);return m})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(m,q,a,b,g,h,k,d){function c(r,t){89.99999<t?t=89.99999:-89.99999>t&&(t=-89.99999);t*=.017453292519943;return[111319.49079327169*r,3189068.5*Math.log((1+Math.sin(t))/(1-Math.sin(t)))]}function f(r,t,w){r=r/6378137*57.29577951308232;return w?[r,57.29577951308232*
(1.5707963267948966-2*Math.atan(Math.exp(-1*t/6378137)))]:[r-360*Math.floor((r+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*t/6378137)))]}function e(){}function l(){}function n(r){var t=r._json;r._unquantizeFn?(t=r._unquantizeFn({x:t.x,y:t.y}),r._xVal=t.x,r._yVal=t.y,r._unquantizeFn=null):(r._xVal=t.x,r._yVal=t.y);r._json=null}a={type:"point",x:0,y:0};m=m(k,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(r,t,w){q.isArray(r)?(this.x=r[0],this.y=
r[1],this.spatialReference=t):g.isObject(r)?(g.mixin(this,r),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference))):(this.x=r,this.y=t,this.spatialReference=w);this.verifySR()},offset:function(r,t){return new this.constructor(this.x+r,this.y+t,this.spatialReference)},setX:function(r){this.x=r;this.clearCache();return this},setY:function(r){this.y=r;this.clearCache();return this},
setLongitude:function(r){var t=this.spatialReference;t&&(t._isWebMercator()?this.setX(c(r,this.y)[0]):4326===t.wkid&&this.setX(r));return this},setLatitude:function(r){var t=this.spatialReference;t&&(t._isWebMercator()?this.setY(c(this.x,r)[1]):4326===t.wkid&&this.setY(r));return this},getLongitude:function(){var r=this.spatialReference;if(r)if(r._isWebMercator())var t=f(this.x,this.y)[0];else 4326===r.wkid&&(t=this.x);return t},getLatitude:function(){var r=this.spatialReference;if(r)if(r._isWebMercator())var t=
f(this.x,this.y)[1];else 4326===r.wkid&&(t=this.y);return t},update:function(r,t){this.x=r;this.y=t;this.clearCache();return this},normalize:function(){var r=this.x,t=this.spatialReference;if(t){var w=t._getInfo();w&&(r=this._normalizeX(r,w))}return new this.constructor(r,this.y,t)},_normalizeX:function(r,t){var w=t.valid[0],v=t.valid[1];t=2*v;r>v?(w=Math.ceil(Math.abs(r-v)/t),r-=w*t):r<w&&(w=Math.ceil(Math.abs(r-w)/t),r+=w*t);return r},toJson:function(){var r={x:this.x,y:this.y},t=this.spatialReference;
t&&(r.spatialReference=t.toJson());return r}});e.prototype=m.prototype;l.prototype=new e;Object.defineProperty(l.prototype,"x",{get:function(){this._json&&n(this);return this._xVal},set:function(r){this._xVal=r}});Object.defineProperty(l.prototype,"y",{get:function(){this._json&&n(this);return this._yVal},set:function(r){this._yVal=r}});l.prototype.setupLazyUnquantization=function(r,t){this._unquantizeFn=r;this._json=t};m.simpleConstructor=e;m.accessorConstructor=l;m.lngLatToXY=c;m.xyToLngLat=f;m.defaultProps=
a;m.metersPerDegree=6378137*Math.PI/180;q.setObject("geometry.Point",m,b);b.geometry.defaultPoint=a;return m})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(m,q,a,b,g){function h(k){var d=!1;k&&(k.ics||k.icsid)&&(d=!0);return d}b={isICS:h,createSpatialReference:function(k){var d=null;k&&(d=h(k)?new q(k):new m(k));return d}};g.mixin(a,b);return b})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(m,q,a,b,g,h){m=m(h,{declaredClass:"esri.ImageSpatialReference",constructor:function(k){k&&q.isObject(k)&&q.mixin(this,k)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(k){var d=!1;if(k)if(this.icsid&&k.icsid){if(d=this.icsid===k.icsid,this.icsns||k.icsns)d=d&&this.icsns===k.icsns}else this.ics&&k.ics&&(d=this.ics===k.ics);return d},toJson:function(k){var d=null,c=g.isDefined;k=c(k)?k:!0;c(this.icsid)?(d={icsid:this.icsid},
c(this.icsns)&&(d.icsns=this.icsns)):c(this.ics)&&(d={ics:this.ics});c(this.url)&&c(d)&&k&&(d.url=this.url);return d}});return b.ImageSpatialReference=m})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(m,q,a){var b=m("ff"),g=m("ie"),h=void 0===g&&7<=m("trident"),k=m("edge"),d=m("webkit"),c=m("opera"),f=m("chrome"),e=m("safari"),l=navigator.userAgent,n;(n=l.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&m.add("esri-iphone",parseFloat(n[2].replace("_",".")));
(n=l.match(/Android\s+(\d+(\.\d+)*)/i))&&m.add("esri-android",parseFloat(n[1]));(n=l.match(/Fennec\/(\d+\.\d+)/i))&&m.add("esri-fennec",parseFloat(n[1]));0<=l.indexOf("BlackBerry")&&0<=l.indexOf("WebKit")&&m.add("esri-blackberry",1);m.add("esri-touch",m("esri-iphone")||m("esri-android")||m("esri-blackberry")||6<=m("esri-fennec")||(b||d)&&(document.createTouch||"ontouchstart"in q||q.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(n=l.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&
m.add("esri-mobile",!!n);m.add("esri-pointer",!b&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!q.PointerEvent));a._getDOMAccessor=function(t){var w="";b?w="Moz":d?w="Webkit":g?w="ms":c&&(w="O");return w+t.charAt(0).toUpperCase()+t.substr(1)};m.add("esri-phonegap",!!q.cordova);m.add("esri-cors",m("esri-phonegap")||q.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);m.add("esri-file-upload",q.FormData&&q.FileList?!0:!1);m.add("esri-script-sandbox",function(){return"MessageChannel"in
q&&"HTMLIFrameElement"in q&&"sandbox"in HTMLIFrameElement.prototype});m.add("esri-secure-context",function(){if("isSecureContext"in q)return q.isSecureContext;if(q.location&&q.location.origin)return 0===q.location.origin.indexOf("https:")});m.add("esri-wasm","WebAssembly"in q);m.add("esri-workers",q.Worker?!0:!1);m.add("esri-featurelayer-webgl",!1);if(l=m("esri-featurelayer-webgl")){var r=m("esri-mobile");n=r?1:2;r=r?1:3;"object"===typeof l?(l.maxDrillLevel=null==l.maxDrillLevel?n:l.maxDrillLevel,
l.maxRecordCountFactor=null==l.maxRecordCountFactor?r:l.maxRecordCountFactor,l.enablePBFQuery=null==l.enablePBFQuery?!0:l.enablePBFQuery):m.add("esri-featurelayer-webgl",{maxDrillLevel:n,maxRecordCountFactor:r,enablePBFQuery:!0},null,!0)}m.add("esri-featurelayer-webgl-labeling",!1);m.add("esri-pbf",!g||10<=g);m.add("esri-featurelayer-pbf",!0);m.add("esri-transforms",h||k||9<=g||3.5<=b||4<=f||3.1<=e||10.5<=c||3.2<=m("esri-iphone")||2.1<=m("esri-android"));m.add("esri-transitions",h||k||10<=g||4<=b||
4<=f||3.1<=e||10.5<=c||3.2<=m("esri-iphone")||2.1<=m("esri-android"));m.add("esri-transforms3d",h||k||10<=b||12<=f||4<=e||3.2<=m("esri-iphone")||3<=m("esri-android"));m.add("esri-url-encodes-apostrophe",function(){if(!q.document)return!1;var t=q.document.createElement("a");t.href="?'";return-1<t.href.indexOf("?%27")});3>m("esri-android")&&(m.add("esri-transforms",!1,!1,!0),m.add("esri-transitions",!1,!1,!0),m.add("esri-transforms3d",!1,!1,!0));m.add("esri-will-change",m("esri-transforms")&&(52<=f||
11.1<=e));a._css=function(t){var w=m("esri-transforms3d");void 0!==t&&null!==t?w=t:w&&(f||e&&!m("esri-iphone"))&&(w=!1);var v=w?"translate3d(":"translate(",y=w?f?",-1px)":",0px)":")",x=w?"scale3d(":"scale(",B=w?",1)":")",p=w?"rotate3d(0,0,1,":"rotate(",z=w?"matrix3d(":"matrix(",u=w?",0,0,":",",D=w?",0,0,0,0,1,0,":",",I=w?",0,1)":")";return{names:{transition:d&&"-webkit-transition"||b&&"MozTransition"||c&&"OTransition"||g&&"msTransition"||"transition",transform:d&&"-webkit-transform"||b&&"MozTransform"||
c&&"OTransform"||g&&"msTransform"||"transform",transformName:d&&"-webkit-transform"||b&&"-moz-transform"||c&&"-o-transform"||g&&"-ms-transform"||"transform",origin:d&&"-webkit-transform-origin"||b&&"MozTransformOrigin"||c&&"OTransformOrigin"||g&&"msTransformOrigin"||"transformOrigin",endEvent:d&&"webkitTransitionEnd"||b&&"transitionend"||c&&"oTransitionEnd"||g&&"MSTransitionEnd"||"transitionend"},translate:function(C,E){return v+C+"px,"+E+"px"+y},scale:function(C){return x+C+","+C+B},rotate:function(C){return p+
C+"deg)"},matrix:function(C){return z+C.xx+","+C.xy+u+C.yx+","+C.yy+D+C.dx.toFixed(10)+(b&&59>=b?"px,":",")+C.dy.toFixed(10)+(b&&59>=b?"px":"")+I},getScaleFromMatrix:function(C){if(!C)return 1;C=C.toLowerCase();var E=-1<C.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(C.substring(E.length,C.indexOf(",")))}}};a.isiPhone=m("esri-iphone");a.isAndroid=m("esri-android");a.isFennec=m("esri-fennec");a.isBlackBerry=m("esri-blackberry");a.isTouchEnabled=m("esri-touch");a.isPointerEnabled=m("esri-pointer");
a._hasCors=m("esri-cors");a._hasFileUpload=m("esri-file-upload");a._hasTransforms=m("esri-transforms");a._hasTransitions=m("esri-transitions");a._has3DTransforms=m("esri-transforms3d");return m})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(m,q,a,b,g,h){function k(c,f,e,l){if("point"===c.type){var n=f(c.x,c.y,l);return new c.constructor(n[0],n[1],new g(e))}if("extent"===c.type){n=f(c.xmin,
c.ymin,l);var r=f(c.xmax,c.ymax,l);return new c.constructor(n[0],n[1],r[0],r[1],new g(e))}if("polyline"===c.type||"polygon"===c.type){n="polyline"===c.type;var t=[],w;m.forEach(n?c.paths:c.rings,function(y){t.push(w=[]);m.forEach(y,function(x){w.push(f(x[0],x[1],l))})});return n?new c.constructor({paths:t,spatialReference:new g(e)}):new c.constructor({rings:t,spatialReference:new g(e)})}if("multipoint"===c.type){var v=[];m.forEach(c.points,function(y){v.push(f(y[0],y[1],l))});return new c.constructor({points:v,
spatialReference:new g(e)})}}function d(c,f){c=c&&(null!=c.wkid?c:c.spatialReference);f=f&&(null!=f.wkid?f:f.spatialReference);return c&&f?f.equals(c)?!0:f._canProject(c):!1}a={canProject:d,project:function(c,f){var e=c&&c.spatialReference;f=f&&(null!=f.wkid?f:f.spatialReference);e&&f?e.equals(f)?c=new c.constructor(c.toJson()):d(e,f)?f.isWebMercator()?c=k(c,h.lngLatToXY,{wkid:102100}):4326===f.wkid&&(c=k(c,h.xyToLngLat,{wkid:4326})):c=null:c=null;return c},lngLatToXY:h.lngLatToXY,xyToLngLat:h.xyToLngLat,
metersPerDegree:h.metersPerDegree,geographicToWebMercator:function(c){return k(c,h.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(c,f){return k(c,h.xyToLngLat,{wkid:4326},f)}};q.mixin(q.getObject("geometry",!0,b),a);return a})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(m,q,a,b){function g(d,c,f){return d instanceof b?new b(d.x+f*(c.x-d.x),d.y+f*(c.y-d.y)):[d[0]+f*(c[0]-d[0]),d[1]+f*(c[1]-d[1])]}function h(d,c){return 1E-8>
Math.abs(d-c)}function k(d,c,f,e){var l=h(d[0],c[0])?1E10:(d[1]-c[1])/(d[0]-c[0]),n=h(f[0],e[0])?1E10:(f[1]-e[1])/(f[0]-e[0]),r=d[1]-l*d[0],t=f[1]-n*f[0];if(h(l,n)){if(h(r,t)){if(h(d[0],c[0]))if(Math.min(d[1],c[1])<Math.max(f[1],e[1])||Math.max(d[1],c[1])>Math.min(f[1],e[1])){d=(d[1]+c[1]+f[1]+e[1]-Math.min(d[1],c[1],f[1],e[1])-Math.max(d[1],c[1],f[1],e[1]))/2;var w=(d-r)/l}else return null;else if(Math.min(d[0],c[0])<Math.max(f[0],e[0])||Math.max(d[0],c[0])>Math.min(f[0],e[0]))w=(d[0]+c[0]+f[0]+
e[0]-Math.min(d[0],c[0],f[0],e[0])-Math.max(d[0],c[0],f[0],e[0]))/2,d=l*w+r;else return null;return[w,d]}return null}h(l,1E10)?(w=d[0],d=n*w+t):h(n,1E10)?(w=f[0],d=l*w+r):(w=-(r-t)/(l-n),d=d[1]===c[1]?d[1]:f[1]===e[1]?f[1]:l*w+r);return[w,d]}q={getLength:function(d,c){var f=c.x-d.x;d=c.y-d.y;return Math.sqrt(f*f+d*d)},_getLength:function(d,c){var f=c[0]-d[0];d=c[1]-d[1];return Math.sqrt(f*f+d*d)},getPointOnLine:g,getMidpoint:function(d,c){return g(d,c,.5)},_equals:h,_getLineIntersection:k,getLineIntersection:function(d,
c,f,e,l){(d=k([d.x,d.y],[c.x,c.y],[f.x,f.y],[e.x,e.y]))&&(d=new b(d[0],d[1],l));return d},_getLineIntersection2:function(d,c){var f=d[0],e=d[1],l=c[0],n=c[1];c=f[0];f=f[1];d=e[0];e=e[1];var r=l[0],t=l[1];l=n[0]-r;r=c-r;var w=d-c;n=n[1]-t;t=f-t;var v=e-f,y=n*w-l*v;if(0===y)return!1;l=(l*t-n*r)/y;r=(w*t-v*r)/y;return 0<=l&&1>=l&&0<=r&&1>=r?[c+l*(d-c),f+l*(e-f)]:!1},_pointLineDistance:function(d,c){var f=c[0],e=c[1];c=f[0];var l=f[1];f=d[0];d=d[1];var n=e[0]-c,r=e[1]-l,t=f-c,w=d-l;e=Math.sqrt;var v=
Math.pow,y=e(v(n,2)+v(r,2));t=(t*n+w*r)/(y*y);l+=t*r;return e(v(f-(c+t*n),2)+v(d-l,2))}};m.mixin(m.getObject("geometry",!0,a),q);return q})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(m,q,a,b,g,h,k,d,c,f){var e=function(){return 9>a("ie")?function(n,r,t,w,v,y,x,B,p){var z=[],u=Math.round,D,I=x.length,C;for(D=0;D<I;D++){var E=x[D];var G=B?B(E[0][0],E[0][1],
p):E[0];if(1<(C=E.length)){var H=u((G[0]-n)*t+v);var L=u((r-G[1])*w+y);G=B?B(E[1][0],E[1][1],p):E[1];var O=u((G[0]-n)*t+v);G=u((r-G[1])*w+y);z.push("M",H+","+L,"L",O+","+G);for(O=2;O<C;O++)G=B?B(E[O][0],E[O][1],p):E[O],H=u((G[0]-n)*t+v),L=u((r-G[1])*w+y),z.push(H+","+L)}else H=u((G[0]-n)*t+v),L=u((r-G[1])*w+y),z.push("M",H+","+L)}return z}:function(n,r,t,w,v,y,x,B,p,z){var u=[],D,I,C=Math.round;var E=0;for(D=x?x.length:0;E<D;E++){var G=x[E];u.push("M");var H=0;for(I=G?G.length:0;H<I;H++){var L=B?
B(G[H][0],G[H][1],p):G[H];u.push(C((L[0]-n)*t+v)+","+C((r-L[1])*w+y))}z||u.push("Z")}return u}}(),l={toScreenPoint:function(n,r,t,w,v){var y=n.spatialReference,x=w.spatialReference,B=w.x;w=w.y;y&&x&&!y.equals(x)&&y._canProject(x)&&(y=y.isWebMercator()?g.lngLatToXY(B,w):g.xyToLngLat(B,w,!0),B=y[0],w=y[1]);B=(B-n.xmin)*(r/n.getWidth());w=(n.ymax-w)*(t/n.getHeight());v||(B=Math.round(B),w=Math.round(w));return new h(B,w)},toScreenGeometry:function(n,r,t,w){var v=n.xmin,y=n.ymax,x=r/n.getWidth(),B=t/
n.getHeight(),p=m.forEach,z=Math.round;if(w instanceof g)return new g(z((w.x-v)*x),z((y-w.y)*B));if(w instanceof c){n=new c;var u=n.points;p(w.points,function(G,H){u[H]=[z((G[0]-v)*x),z((y-G[1])*B)]});return n}if(w instanceof f)return new f(z((w.xmin-v)*x),z((y-w.ymin)*B),z((w.xmax-v)*x),z((y-w.ymax)*x));if(w instanceof k){n=new k;var D=n.paths,I;p(w.paths,function(G,H){I=D[H]=[];p(G,function(L,O){I[O]=[z((L[0]-v)*x),z((y-L[1])*B)]})});return n}if(w instanceof d){n=new d;var C=n.rings,E;p(w.rings,
function(G,H){E=C[H]=[];p(G,function(L,O){E[O]=[z((L[0]-v)*x),z((y-L[1])*B)]})});return n}},_toScreenPath:function(n,r,t,w,v,y){var x=w instanceof k,B=n.spatialReference,p=w.spatialReference;if(B&&p&&!B.equals(p)&&B._canProject(p))if(B.isWebMercator())var z=g.lngLatToXY;else{z=g.xyToLngLat;var u=!0}return e(n.xmin,n.ymax,r/n.getWidth(),t/n.getHeight(),v,y,x?w.paths:w.rings,z,u,x)},toMapPoint:function(n,r,t,w){return new g(n.xmin+w.x/(r/n.getWidth()),n.ymax-w.y/(t/n.getHeight()),n.spatialReference)},
toMapGeometry:function(n,r,t,w){var v=n.xmin,y=n.ymax,x=n.spatialReference,B=r/n.getWidth(),p=t/n.getHeight(),z=m.forEach;if(w instanceof g)return new g(v+w.x/B,y-w.y/p,x);if(w instanceof c){n=new c(x);var u=n.points;z(w.points,function(G,H){u[H]=[v+G[0]/B,y-G[1]/p]});return n}if(w instanceof f)return new f(v+w.xmin/B,y-w.ymin/p,v+w.xmax/B,y-w.ymax/p,x);if(w instanceof k){n=new k(x);var D=n.paths,I;z(w.paths,function(G,H){I=D[H]=[];z(G,function(L,O){I[O]=[v+L[0]/B,y-L[1]/p]})});return n}if(w instanceof
d){n=new d(x);var C=n.rings,E;z(w.rings,function(G,H){E=C[H]=[];z(G,function(L,O){E[O]=[v+L[0]/B,y-L[1]/p]})});return n}}};q.mixin(q.getObject("geometry",!0,b),l);return l})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(m,q,a,b,g){m=m(g,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});q.setObject("geometry.ScreenPoint",m,b);return m})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e){function l(){}function n(){}b={type:"polyline",paths:null};m=m(d,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(r){this.paths=[];this._path=0;r&&(a.isArray(r)?this.paths=a.isArray(r[0][0])?r:[r]:r.paths?h.mixin(this,r):this.spatialReference=r,this.spatialReference&&(this.spatialReference=e.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(r){this.clearCache();this._path=this.paths.length;this.paths[this._path]=
[];a.isArray(r[0])?q.forEach(r,this._addPointArr,this):q.forEach(r,this._addPoint,this);return this},_addPointArr:function(r){this.paths[this._path].push(r)},_addPoint:function(r){this.paths[this._path].push([r.x,r.y])},_insertPoints:function(r,t){this.clearCache();this._path=t;this.paths[this._path]||(this.paths[this._path]=[]);q.forEach(r,this._addPoint,this)},_validateInputs:function(r,t){return null!==r&&void 0!==r&&(0>r||r>=this.paths.length)||null!==t&&void 0!==r&&(0>t||t>=this.paths[r].length)?
!1:!0},getPoint:function(r,t){if(this._validateInputs(r,t))return new c(this.paths[r][t],this.spatialReference)},setPoint:function(r,t,w){if(this._validateInputs(r,t))return this.clearCache(),this.paths[r][t]=[w.x,w.y],this},insertPoint:function(r,t,w){if(this._validateInputs(r)&&null!=t&&0<=t&&t<=this.paths[r].length)return this.clearCache(),this.paths[r].splice(t,0,[w.x,w.y]),this},removePath:function(r){if(this._validateInputs(r,null)){this.clearCache();r=this.paths.splice(r,1)[0];var t,w=r.length,
v=this.spatialReference;for(t=0;t<w;t++)r[t]=new c(r[t],v);return r}},removePoint:function(r,t){if(this._validateInputs(r,t))return this.clearCache(),new c(this.paths[r].splice(t,1)[0],this.spatialReference)},getExtent:function(){var r=this.getCacheValue("_extent");var t=this.getCacheValue("_partwise");if(r)return r=new f(r),r._partwise=t,r;r=this.paths;var w=r.length;if(w&&r[0].length){var v,y,x,B,p=v=r[0][0][0],z=y=r[0][0][1],u=Math.min,D=Math.max,I=this.spatialReference;t=[];var C,E;for(x=0;x<
w;x++){var G=r[x];var H=C=G[0]&&G[0][0];var L=E=G[0]&&G[0][1];var O=G.length;for(B=0;B<O;B++){var W=G[B];var Z=W[0];W=W[1];p=u(p,Z);z=u(z,W);v=D(v,Z);y=D(y,W);H=u(H,Z);L=u(L,W);C=D(C,Z);E=D(E,W)}t.push(new f({xmin:H,ymin:L,xmax:C,ymax:E,spatialReference:I?I.toJson():null}))}r={xmin:p,ymin:z,xmax:v,ymax:y,spatialReference:I?I.toJson():null};t=1<t.length?t:null;this.setCacheValue("_extent",r);this.setCacheValue("_partwise",t);r=new f(r);r._partwise=t;return r}},toJson:function(){var r={paths:h.clone3DArray(this.paths)},
t=this.spatialReference;t&&(r.spatialReference=t.toJson());return r}});l.prototype=m.prototype;n.prototype=new l;Object.defineProperty(n.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:h.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(r){this._pathsVal=r}});n.prototype.setupLazyUnquantization=function(r,t){this._unquantizeFn=r;this._pathsVal=t.paths};m.simpleConstructor=l;m.accessorConstructor=n;m.defaultProps=
b;a.setObject("geometry.Polyline",m,g);g.geometry.defaultPolyline=b;return m})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(m,q,a,b,g,h,k,d,c,f,e,l){function n(){}function r(){}b={type:"polygon",rings:null};var t=m(d,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(w){this.rings=[];this._ring=
0;w&&(a.isArray(w)?this.rings=a.isArray(w[0][0])?w:[w]:w.rings?h.mixin(this,w):this.spatialReference=w,this.spatialReference&&(this.spatialReference=l.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(w){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];a.isArray(w[0])?q.forEach(w,this._addPointArr,this):q.forEach(w,this._addPoint,this);return this},_addPointArr:function(w){this.rings[this._ring].push(w)},_addPoint:function(w){this.rings[this._ring].push([w.x,
w.y])},_insertPoints:function(w,v){this.clearCache();this._ring=v;this.rings[this._ring]||(this.rings[this._ring]=[]);q.forEach(w,this._addPoint,this)},_validateInputs:function(w,v){return null!==w&&void 0!==w&&(0>w||w>=this.rings.length)||null!==v&&void 0!==w&&(0>v||v>=this.rings[w].length)?!1:!0},getPoint:function(w,v){if(this._validateInputs(w,v))return new c(this.rings[w][v],this.spatialReference)},setPoint:function(w,v,y){if(this._validateInputs(w,v))return this.clearCache(),this.rings[w][v]=
[y.x,y.y],this},insertPoint:function(w,v,y){if(this._validateInputs(w)&&null!=v&&0<=v&&v<=this.rings[w].length)return this.clearCache(),this.rings[w].splice(v,0,[y.x,y.y]),this},removeRing:function(w){if(this._validateInputs(w,null)){this.clearCache();w=this.rings.splice(w,1)[0];var v,y=w.length,x=this.spatialReference;for(v=0;v<y;v++)w[v]=new c(w[v],x);return w}},removePoint:function(w,v){if(this._validateInputs(w,v))return this.clearCache(),new c(this.rings[w].splice(v,1)[0],this.spatialReference)},
getExtent:function(){var w=this.getCacheValue("_extent");var v=this.getCacheValue("_partwise");if(w)return w=new f(w),w._partwise=v,w;w=this.rings;var y=w.length;if(y&&w[0].length){var x,B,p,z,u=x=w[0][0][0],D=B=w[0][0][1],I=Math.min,C=Math.max,E=this.spatialReference;v=[];var G,H;for(p=0;p<y;p++){var L=w[p];var O=G=L[0]&&L[0][0];var W=H=L[0]&&L[0][1];var Z=L.length;for(z=0;z<Z;z++){var ba=L[z];var P=ba[0];ba=ba[1];u=I(u,P);D=I(D,ba);x=C(x,P);B=C(B,ba);O=I(O,P);W=I(W,ba);G=C(G,P);H=C(H,ba)}v.push(new f({xmin:O,
ymin:W,xmax:G,ymax:H,spatialReference:E?E.toJson():null}))}w={xmin:u,ymin:D,xmax:x,ymax:B,spatialReference:E?E.toJson():null};v=1<v.length?v:null;this.setCacheValue("_extent",w);this.setCacheValue("_partwise",v);w=new f(w);w._partwise=v;return w}},contains:function(w){var v=this.rings,y=!1,x,B,p,z=v.length;var u=this.spatialReference;var D=w.spatialReference;var I=w.x;w=w.y;u&&D&&!u.equals(D)&&u._canProject(D)&&(w=u.isWebMercator()?c.lngLatToXY(I,w):c.xyToLngLat(I,w,!0),I=w[0],w=w[1]);for(p=0;p<z;p++){u=
v[p];var C=u.length;for(B=x=0;B<C;B++){x++;x===C&&(x=0);D=u[B];var E=u[x];(D[1]<w&&E[1]>=w||E[1]<w&&D[1]>=w)&&D[0]+(w-D[1])/(E[1]-D[1])*(E[0]-D[0])<I&&(y=!y)}}return y},getCentroid:function(){var w=this.getCacheValue("_centroid");if(void 0!==w)return w;w=this.rings;var v,y,x=[],B,p,z=Infinity,u=-Infinity,D=Infinity,I=-Infinity;q.forEach(w,function(G){C=v=y=0;q.forEach(G,function(H,L){L<G.length-1&&(B=G[L+1],p=H[0]*B[1]-B[0]*H[1],C+=(H[0]+B[0])*p,v+=(H[1]+B[1])*p,y+=p,H[0]<z&&(z=H[0]),H[0]>u&&(u=H[0]),
H[1]<D&&(D=H[1]),H[1]>I&&(I=H[1]))});0<y&&(y*=-1);y&&x.push([C,v,y/2])});x.sort(function(G,H){return G[2]-H[2]});var C=v=void 0;if(x[0]){var E=6*x[0][2];C=x[0][0]/E;v=x[0][1]/E;if(C<z||C>u||v<D||v>I)C=v=void 0}if(void 0===C||void 0===v)if(w=w[0]&&w[0].length?this._getLineCentroid(w[0]):null)C=w.x,v=w.y;w=isNaN(C)||isNaN(v)?null:new c(C,v,this.spatialReference);this.setCacheValue("_centroid",w);return w},_getLineCentroid:function(w){var v=0,y=0,x=0,B={x:0,y:0},p={x:0,y:0},z,u=w.length,D;for(z=0;z<
u-1;z++){var I=w[z];var C=w[z+1];if(I&&C){B.x=I[0];B.y=I[1];p.x=C[0];p.y=C[1];var E=e.getLength(B,p);0<E&&(v+=E,I=e.getMidpoint(I,C),y+=E*I[0],x+=E*I[1])}}0<v?D={x:y/v,y:x/v}:w[0]&&(D={x:w[0][0],y:w[0][1]});return D},isClockwise:function(w){var v=0,y,x=w.length,B=a.isArray(w[0])?function(p,z){return p[0]*z[1]-z[0]*p[1]}:function(p,z){return p.x*z.y-z.x*p.y};for(y=0;y<x;y++)v+=B(w[y],w[(y+1)%x]);return 0>=v/2},isSelfIntersecting:function(w){w=w||this;var v,y,x,B,p,z=w.rings.length;for(x=0;x<z;x++){for(v=
0;v<w.rings[x].length-1;v++){var u=[[w.rings[x][v][0],w.rings[x][v][1]],[w.rings[x][v+1][0],w.rings[x][v+1][1]]];for(y=x+1;y<z;y++)for(B=0;B<w.rings[y].length-1;B++){var D=[[w.rings[y][B][0],w.rings[y][B][1]],[w.rings[y][B+1][0],w.rings[y][B+1][1]]];if((p=e._getLineIntersection2(u,D))&&!(p[0]===u[0][0]&&p[1]===u[0][1]||p[0]===D[0][0]&&p[1]===D[0][1]||p[0]===u[1][0]&&p[1]===u[1][1]||p[0]===D[1][0]&&p[1]===D[1][1]))return!0}}B=w.rings[x].length;if(!(4>=B))for(v=0;v<B-3;v++){var I=B-1;0===v&&(I=B-2);
u=[[w.rings[x][v][0],w.rings[x][v][1]],[w.rings[x][v+1][0],w.rings[x][v+1][1]]];for(y=v+2;y<I;y++)if(D=[[w.rings[x][y][0],w.rings[x][y][1]],[w.rings[x][y+1][0],w.rings[x][y+1][1]]],(p=e._getLineIntersection2(u,D))&&!(p[0]===u[0][0]&&p[1]===u[0][1]||p[0]===D[0][0]&&p[1]===D[0][1]||p[0]===u[1][0]&&p[1]===u[1][1]||p[0]===D[1][0]&&p[1]===D[1][1]))return!0}}return!1},toJson:function(){var w={rings:h.clone3DArray(this.rings)},v=this.spatialReference;v&&(w.spatialReference=v.toJson());return w}});n.prototype=
t.prototype;r.prototype=new n;Object.defineProperty(r.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:h.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(w){this._ringsVal=w}});r.prototype.setupLazyUnquantization=function(w,v){this._unquantizeFn=w;this._ringsVal=v.rings};t.simpleConstructor=n;t.accessorConstructor=r;t.defaultProps=b;t.createEllipse=function(w){var v=w.center.x,y=w.center.y,x=w.longAxis,
B=w.shortAxis,p=w.numberOfPoints,z=w.map,u;w=[];var D=2*Math.PI/p;for(u=0;u<p;u++){var I=Math.cos(u*D);var C=Math.sin(u*D);I=z.toMap({x:x*I+v,y:B*C+y});w.push(I)}w.push(w[0]);v=new t(z.spatialReference);v.addRing(w);return v};t.createCircle=function(w){return t.createEllipse({center:w.center,longAxis:w.r,shortAxis:w.r,numberOfPoints:w.numberOfPoints,map:w.map})};t.fromExtent=function(w){var v=w.normalize();w=w.spatialReference;return new t({rings:q.map(v,function(y){return[[y.xmin,y.ymin],[y.xmin,
y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]]}),spatialReference:w?w.toJson():null})};a.setObject("geometry.Polygon",t,g);g.geometry.defaultPolygon=b;g.geometry.createEllipse=t.createEllipse;g.geometry.createCircle=t.createCircle;g.geometry.isClockwise=t.prototype.isClockwise;g.geometry.polygonSelfIntersecting=t.prototype.isSelfIntersecting;return t})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(m,q,a,b,g,h,k,d,c,f){function e(){}function l(){}a={type:"multipoint",points:null};m=m(k,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(n){this.points=[];n&&(n.points?g.mixin(this,n):this.spatialReference=n,this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(n){this.clearCache();q.isArray(n)?this.points.push(n):this.points.push([n.x,n.y]);return this},removePoint:function(n){if(this._validateInputs(n))return this.clearCache(),
new d(this.points.splice(n,1)[0],this.spatialReference)},getExtent:function(){var n=this.getCacheValue("_extent");if(n)return new c(n);n=this.points;var r=n.length;if(r){var t=n[0],w,v,y=w=t[0],x=v=t[1],B=Math.min,p=Math.max,z=this.spatialReference,u;for(u=0;u<r;u++){t=n[u];var D=t[0];t=t[1];y=B(y,D);x=B(x,t);w=p(w,D);v=p(v,t)}n={xmin:y,ymin:x,xmax:w,ymax:v,spatialReference:z?z.toJson():null};this.setCacheValue("_extent",n);return new c(n)}},_validateInputs:function(n){return null===n||0>n||n>=this.points.length?
!1:!0},getPoint:function(n){if(this._validateInputs(n))return n=this.points[n],new d(n[0],n[1],this.spatialReference)},setPoint:function(n,r){if(this._validateInputs(n))return this.clearCache(),this.points[n]=[r.x,r.y],this},toJson:function(){var n={points:g.clone2DArray(this.points)},r=this.spatialReference;r&&(n.spatialReference=r.toJson());return n}});e.prototype=m.prototype;l.prototype=new e;Object.defineProperty(l.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:g.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(n){this._pointsVal=n}});l.prototype.setupLazyUnquantization=function(n,r){this._unquantizeFn=n;this._pointsVal=r.points};m.simpleConstructor=e;m.accessorConstructor=l;m.defaultProps=a;q.setObject("geometry.Multipoint",m,b);b.geometry.defaultMultipoint=a;return m})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(m,q,a,b,g){function h(l,n,r){return l&&n?
l.getWidth()/n*(r||d)*39.37*c.screenDPI:0}function k(l,n,r,t,w){return l.expand(t*n/(39.37*((w?r:f.values[f[r]])||d)*c.screenDPI)/l.getWidth())}var d=6370997*Math.PI/180,c=b.defaults,f=g,e={getUnitValueForSR:function(l){return this.getUnitValue(l)||d},getUnitValue:function(l){if(l)if("object"===typeof l){var n=l.wkid;var r=l.wkt}else"number"===typeof l?n=l:"string"===typeof l&&(r=l);if(n)var t=f.values[f[n]];else r&&-1!==r.search(/^PROJCS/i)&&(l=/UNIT\[([^\]]+)\]\]$/i.exec(r))&&l[1]&&(t=parseFloat(l[1].split(",")[1]));
return t},getScale:function(l,n,r){if(1<arguments.length&&null!=n&&!n.declaredClass){var t=l;var w=n;n=null;var v=e.getUnitValue(r)}else t=n||l.extent,w=l.width,v=e.getUnitValue(t&&t.spatialReference);return h(t,w,v)},getExtentForScale:function(l,n,r){return k(r||l.extent,l.width,e.getUnitValue(l.spatialReference),n,!0)}};m.mixin(m.getObject("geometry",!0,a),e);a.geometry._getScale=h;a.geometry._getExtentForScale=k;return e})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has",
"./kernel"],function(m,q,a,b){a=function(){return this}();var g={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,
zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:a.Worker&&!1,io:{errorHandler:function(h,k){q.publish("esri.Error",[h])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com",
"tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com",
"qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com",
"basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:a.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};b.config=g;
m.noGlobals||(a.esriConfig=g);return g})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(m,q){var a={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9367:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,
24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,
31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,
102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,
103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,
103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,
103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(m=2E3;2045>=m;m++)a[m]=0;for(m=2056;2065>=m;m++)a[m]=0;for(m=2067;2135>=m;m++)a[m]=0;for(m=2137;2154>=
m;m++)a[m]=0;for(m=2161;2170>=m;m++)a[m]=0;for(m=2172;2193>=m;m++)a[m]=0;for(m=2195;2198>=m;m++)a[m]=0;for(m=2200;2203>=m;m++)a[m]=0;for(m=2205;2217>=m;m++)a[m]=0;for(m=2222;2224>=m;m++)a[m]=1;for(m=2225;2250>=m;m++)a[m]=2;for(m=2251;2253>=m;m++)a[m]=1;for(m=2257;2264>=m;m++)a[m]=2;for(m=2274;2279>=m;m++)a[m]=2;for(m=2280;2282>=m;m++)a[m]=1;for(m=2283;2289>=m;m++)a[m]=2;for(m=2290;2292>=m;m++)a[m]=0;for(m=2308;2313>=m;m++)a[m]=0;for(m=2315;2491>=m;m++)a[m]=0;for(m=2494;2866>=m;m++)a[m]=0;for(m=2867;2869>=
m;m++)a[m]=1;for(m=2870;2888>=m;m++)a[m]=2;for(m=2891;2895>=m;m++)a[m]=2;for(m=2896;2898>=m;m++)a[m]=1;for(m=2902;2908>=m;m++)a[m]=2;for(m=2915;2920>=m;m++)a[m]=2;for(m=2921;2923>=m;m++)a[m]=1;for(m=2924;2930>=m;m++)a[m]=2;for(m=2931;2962>=m;m++)a[m]=0;for(m=2964;2968>=m;m++)a[m]=2;for(m=2969;2973>=m;m++)a[m]=0;for(m=2975;2991>=m;m++)a[m]=0;for(m=2995;3051>=m;m++)a[m]=0;for(m=3054;3079>=m;m++)a[m]=0;for(m=3081;3088>=m;m++)a[m]=0;for(m=3092;3101>=m;m++)a[m]=0;for(m=3106;3138>=m;m++)a[m]=0;for(m=3146;3151>=
m;m++)a[m]=0;for(m=3153;3166>=m;m++)a[m]=0;for(m=3168;3172>=m;m++)a[m]=0;for(m=3174;3203>=m;m++)a[m]=0;for(m=3294;3358>=m;m++)a[m]=0;for(m=3367;3403>=m;m++)a[m]=0;for(m=3408;3416>=m;m++)a[m]=0;for(m=3417;3438>=m;m++)a[m]=2;for(m=3441;3446>=m;m++)a[m]=2;for(m=3447;3450>=m;m++)a[m]=0;for(m=3451;3459>=m;m++)a[m]=2;for(m=3460;3478>=m;m++)a[m]=0;for(m=3554;3559>=m;m++)a[m]=0;for(m=3560;3570>=m;m++)a[m]=2;for(m=3571;3581>=m;m++)a[m]=0;for(m=3594;3597>=m;m++)a[m]=0;for(m=3601;3604>=m;m++)a[m]=0;for(m=3637;3639>=
m;m++)a[m]=0;for(m=3665;3667>=m;m++)a[m]=0;for(m=3693;3695>=m;m++)a[m]=0;for(m=3701;3727>=m;m++)a[m]=0;for(m=3728;3739>=m;m++)a[m]=2;for(m=3740;3751>=m;m++)a[m]=0;for(m=3753;3760>=m;m++)a[m]=2;for(m=3761;3773>=m;m++)a[m]=0;for(m=3775;3777>=m;m++)a[m]=0;for(m=3779;3781>=m;m++)a[m]=0;for(m=3783;3785>=m;m++)a[m]=0;for(m=3788;3791>=m;m++)a[m]=0;for(m=3797;3802>=m;m++)a[m]=0;for(m=3814;3816>=m;m++)a[m]=0;for(m=3825;3829>=m;m++)a[m]=0;for(m=3832;3841>=m;m++)a[m]=0;for(m=3844;3852>=m;m++)a[m]=0;for(m=3873;3885>=
m;m++)a[m]=0;for(m=3890;3893>=m;m++)a[m]=0;for(m=3907;3912>=m;m++)a[m]=0;for(m=3942;3950>=m;m++)a[m]=0;for(m=3968;3970>=m;m++)a[m]=0;for(m=3973;3976>=m;m++)a[m]=0;for(m=3986;3989>=m;m++)a[m]=0;for(m=3994;3997>=m;m++)a[m]=0;for(m=4048;4051>=m;m++)a[m]=0;for(m=4056;4063>=m;m++)a[m]=0;for(m=4093;4096>=m;m++)a[m]=0;for(m=4390;4398>=m;m++)a[m]=0;for(m=4399;4413>=m;m++)a[m]=2;for(m=4418;4433>=m;m++)a[m]=2;for(m=4455;4457>=m;m++)a[m]=2;for(m=4484;4489>=m;m++)a[m]=0;for(m=4491;4554>=m;m++)a[m]=0;for(m=4568;4589>=
m;m++)a[m]=0;for(m=4652;4656>=m;m++)a[m]=0;for(m=4766;4800>=m;m++)a[m]=0;for(m=5014;5016>=m;m++)a[m]=0;for(m=5069;5072>=m;m++)a[m]=0;for(m=5105;5130>=m;m++)a[m]=0;for(m=5173;5188>=m;m++)a[m]=0;for(m=5253;5259>=m;m++)a[m]=0;for(m=5269;5275>=m;m++)a[m]=0;for(m=5292;5311>=m;m++)a[m]=0;for(m=5329;5331>=m;m++)a[m]=0;for(m=5343;5349>=m;m++)a[m]=0;for(m=5355;5357>=m;m++)a[m]=0;for(m=5387;5389>=m;m++)a[m]=0;for(m=5459;5463>=m;m++)a[m]=0;for(m=5479;5482>=m;m++)a[m]=0;for(m=5518;5520>=m;m++)a[m]=0;for(m=5530;5539>=
m;m++)a[m]=0;for(m=5550;5552>=m;m++)a[m]=0;for(m=5562;5583>=m;m++)a[m]=0;for(m=5623;5625>=m;m++)a[m]=2;for(m=5631;5639>=m;m++)a[m]=0;for(m=5649;5653>=m;m++)a[m]=0;for(m=5663;5680>=m;m++)a[m]=0;for(m=5682;5685>=m;m++)a[m]=0;for(m=5875;5877>=m;m++)a[m]=0;for(m=5896;5899>=m;m++)a[m]=0;for(m=5921;5940>=m;m++)a[m]=0;for(m=6050;6125>=m;m++)a[m]=0;for(m=6244;6275>=m;m++)a[m]=0;for(m=6328;6348>=m;m++)a[m]=0;for(m=6350;6356>=m;m++)a[m]=0;for(m=6366;6372>=m;m++)a[m]=0;for(m=6381;6387>=m;m++)a[m]=0;for(m=6393;6404>=
m;m++)a[m]=0;for(m=6480;6483>=m;m++)a[m]=0;for(m=6511;6514>=m;m++)a[m]=0;for(m=6579;6581>=m;m++)a[m]=0;for(m=6619;6624>=m;m++)a[m]=0;for(m=6625;6627>=m;m++)a[m]=2;for(m=6628;6632>=m;m++)a[m]=0;for(m=6634;6637>=m;m++)a[m]=0;for(m=6669;6692>=m;m++)a[m]=0;for(m=6707;6709>=m;m++)a[m]=0;for(m=6720;6723>=m;m++)a[m]=0;for(m=6732;6738>=m;m++)a[m]=0;for(m=6931;6933>=m;m++)a[m]=0;for(m=6956;6959>=m;m++)a[m]=0;for(m=7005;7007>=m;m++)a[m]=0;for(m=7057;7070>=m;m++)a[m]=2;for(m=7074;7082>=m;m++)a[m]=0;for(m=7109;7118>=
m;m++)a[m]=0;for(m=7119;7127>=m;m++)a[m]=1;for(m=7374;7376>=m;m++)a[m]=0;for(m=7528;7586>=m;m++)a[m]=0;for(m=7587;7645>=m;m++)a[m]=2;for(m=7692;7696>=m;m++)a[m]=0;for(m=7755;7787>=m;m++)a[m]=0;for(m=7791;7795>=m;m++)a[m]=0;for(m=7799;7801>=m;m++)a[m]=0;for(m=7803;7805>=m;m++)a[m]=0;for(m=7825;7831>=m;m++)a[m]=0;for(m=7845;7859>=m;m++)a[m]=0;for(m=8013;8032>=m;m++)a[m]=0;for(m=8065;8068>=m;m++)a[m]=1;for(m=8518;8529>=m;m++)a[m]=2;for(m=8533;8536>=m;m++)a[m]=2;for(m=8538;8540>=m;m++)a[m]=2;for(m=8677;8679>=
m;m++)a[m]=0;for(m=8836;8840>=m;m++)a[m]=0;for(m=8857;8859>=m;m++)a[m]=0;for(m=8908;8910>=m;m++)a[m]=0;for(m=9154;9159>=m;m++)a[m]=0;for(m=9205;9218>=m;m++)a[m]=0;for(m=9271;9273>=m;m++)a[m]=0;for(m=9295;9297>=m;m++)a[m]=0;for(m=20002;20032>=m;m++)a[m]=0;for(m=20062;20092>=m;m++)a[m]=0;for(m=20135;20138>=m;m++)a[m]=0;for(m=20248;20258>=m;m++)a[m]=0;for(m=20348;20358>=m;m++)a[m]=0;for(m=20436;20440>=m;m++)a[m]=0;for(m=20822;20824>=m;m++)a[m]=0;for(m=20934;20936>=m;m++)a[m]=0;for(m=21035;21037>=m;m++)a[m]=
0;for(m=21095;21097>=m;m++)a[m]=0;for(m=21148;21150>=m;m++)a[m]=0;for(m=21413;21423>=m;m++)a[m]=0;for(m=21453;21463>=m;m++)a[m]=0;for(m=21473;21483>=m;m++)a[m]=0;for(m=21780;21782>=m;m++)a[m]=0;for(m=21891;21894>=m;m++)a[m]=0;for(m=21896;21899>=m;m++)a[m]=0;for(m=22171;22177>=m;m++)a[m]=0;for(m=22181;22187>=m;m++)a[m]=0;for(m=22191;22197>=m;m++)a[m]=0;for(m=22234;22236>=m;m++)a[m]=0;for(m=22521;22525>=m;m++)a[m]=0;for(m=22991;22994>=m;m++)a[m]=0;for(m=23028;23038>=m;m++)a[m]=0;for(m=23830;23853>=
m;m++)a[m]=0;for(m=23866;23872>=m;m++)a[m]=0;for(m=23877;23884>=m;m++)a[m]=0;for(m=23886;23894>=m;m++)a[m]=0;for(m=23946;23948>=m;m++)a[m]=0;for(m=24311;24313>=m;m++)a[m]=0;for(m=24342;24347>=m;m++)a[m]=0;for(m=24370;24374>=m;m++)a[m]=10;for(m=24375;24381>=m;m++)a[m]=0;for(m=24718;24721>=m;m++)a[m]=0;for(m=24817;24821>=m;m++)a[m]=0;for(m=24877;24882>=m;m++)a[m]=0;for(m=24891;24893>=m;m++)a[m]=0;for(m=25391;25395>=m;m++)a[m]=0;for(m=25828;25838>=m;m++)a[m]=0;for(m=26191;26195>=m;m++)a[m]=0;for(m=26391;26393>=
m;m++)a[m]=0;for(m=26701;26722>=m;m++)a[m]=0;for(m=26729;26799>=m;m++)a[m]=2;for(m=26801;26803>=m;m++)a[m]=2;for(m=26811;26813>=m;m++)a[m]=2;for(m=26847;26870>=m;m++)a[m]=2;for(m=26891;26899>=m;m++)a[m]=0;for(m=26901;26923>=m;m++)a[m]=0;for(m=26929;26946>=m;m++)a[m]=0;for(m=26948;26998>=m;m++)a[m]=0;for(m=27037;27040>=m;m++)a[m]=0;for(m=27205;27232>=m;m++)a[m]=0;for(m=27258;27260>=m;m++)a[m]=0;for(m=27391;27398>=m;m++)a[m]=0;for(m=27561;27564>=m;m++)a[m]=0;for(m=27571;27574>=m;m++)a[m]=0;for(m=27581;27584>=
m;m++)a[m]=0;for(m=27591;27594>=m;m++)a[m]=0;for(m=28191;28193>=m;m++)a[m]=0;for(m=28348;28358>=m;m++)a[m]=0;for(m=28402;28432>=m;m++)a[m]=0;for(m=28462;28492>=m;m++)a[m]=0;for(m=29118;29122>=m;m++)a[m]=0;for(m=29168;29172>=m;m++)a[m]=0;for(m=29177;29185>=m;m++)a[m]=0;for(m=29187;29195>=m;m++)a[m]=0;for(m=29900;29903>=m;m++)a[m]=0;for(m=30161;30179>=m;m++)a[m]=0;for(m=30491;30494>=m;m++)a[m]=0;for(m=30729;30732>=m;m++)a[m]=0;for(m=31251;31259>=m;m++)a[m]=0;for(m=31265;31268>=m;m++)a[m]=0;for(m=31275;31279>=
m;m++)a[m]=0;for(m=31281;31297>=m;m++)a[m]=0;for(m=31461;31469>=m;m++)a[m]=0;for(m=31491;31495>=m;m++)a[m]=0;for(m=31917;31922>=m;m++)a[m]=0;for(m=31965;32E3>=m;m++)a[m]=0;for(m=32001;32003>=m;m++)a[m]=2;for(m=32005;32031>=m;m++)a[m]=2;for(m=32033;32060>=m;m++)a[m]=2;for(m=32064;32067>=m;m++)a[m]=2;for(m=32074;32077>=m;m++)a[m]=2;for(m=32081;32086>=m;m++)a[m]=0;for(m=32107;32130>=m;m++)a[m]=0;for(m=32133;32158>=m;m++)a[m]=0;for(m=32164;32167>=m;m++)a[m]=2;for(m=32180;32199>=m;m++)a[m]=0;for(m=32201;32260>=
m;m++)a[m]=0;for(m=32301;32360>=m;m++)a[m]=0;for(m=32601;32662>=m;m++)a[m]=0;for(m=32664;32667>=m;m++)a[m]=2;for(m=32701;32761>=m;m++)a[m]=0;for(m=53001;53004>=m;m++)a[m]=0;for(m=53008;53019>=m;m++)a[m]=0;for(m=53021;53032>=m;m++)a[m]=0;for(m=53034;53037>=m;m++)a[m]=0;for(m=53042;53046>=m;m++)a[m]=0;for(m=53074;53080>=m;m++)a[m]=0;for(m=54001;54004>=m;m++)a[m]=0;for(m=54008;54019>=m;m++)a[m]=0;for(m=54021;54032>=m;m++)a[m]=0;for(m=54034;54037>=m;m++)a[m]=0;for(m=54042;54046>=m;m++)a[m]=0;for(m=54048;54053>=
m;m++)a[m]=0;for(m=54074;54080>=m;m++)a[m]=0;for(m=54098;54101>=m;m++)a[m]=0;for(m=102001;102040>=m;m++)a[m]=0;for(m=102042;102063>=m;m++)a[m]=0;for(m=102065;102067>=m;m++)a[m]=0;for(m=102070;102117>=m;m++)a[m]=0;for(m=102122;102216>=m;m++)a[m]=0;for(m=102221;102377>=m;m++)a[m]=0;for(m=102382;102388>=m;m++)a[m]=0;for(m=102389;102398>=m;m++)a[m]=2;for(m=102399;102444>=m;m++)a[m]=0;for(m=102445;102447>=m;m++)a[m]=2;for(m=102448;102458>=m;m++)a[m]=0;for(m=102459;102468>=m;m++)a[m]=2;for(m=102469;102499>=
m;m++)a[m]=0;for(m=102500;102519>=m;m++)a[m]=1;for(m=102520;102524>=m;m++)a[m]=0;for(m=102525;102529>=m;m++)a[m]=2;for(m=102530;102588>=m;m++)a[m]=0;for(m=102590;102598>=m;m++)a[m]=0;for(m=102601;102603>=m;m++)a[m]=0;for(m=102605;102628>=m;m++)a[m]=0;for(m=102629;102646>=m;m++)a[m]=2;for(m=102648;102700>=m;m++)a[m]=2;for(m=102701;102703>=m;m++)a[m]=0;for(m=102707;102730>=m;m++)a[m]=2;for(m=102733;102758>=m;m++)a[m]=2;for(m=102767;102900>=m;m++)a[m]=0;for(m=102965;102969>=m;m++)a[m]=0;for(m=102971;102973>=
m;m++)a[m]=0;for(m=102975;102989>=m;m++)a[m]=0;for(m=102990;102992>=m;m++)a[m]=1;for(m=102997;103002>=m;m++)a[m]=0;for(m=103003;103008>=m;m++)a[m]=2;for(m=103009;103011>=m;m++)a[m]=0;for(m=103012;103014>=m;m++)a[m]=2;for(m=103019;103021>=m;m++)a[m]=0;for(m=103022;103024>=m;m++)a[m]=2;for(m=103029;103031>=m;m++)a[m]=0;for(m=103032;103034>=m;m++)a[m]=2;for(m=103065;103068>=m;m++)a[m]=0;for(m=103074;103076>=m;m++)a[m]=0;for(m=103077;103079>=m;m++)a[m]=1;for(m=103080;103082>=m;m++)a[m]=0;for(m=103083;103085>=
m;m++)a[m]=2;for(m=103090;103093>=m;m++)a[m]=0;for(m=103097;103099>=m;m++)a[m]=0;for(m=103100;103102>=m;m++)a[m]=2;for(m=103107;103109>=m;m++)a[m]=0;for(m=103110;103112>=m;m++)a[m]=2;for(m=103113;103116>=m;m++)a[m]=0;for(m=103117;103120>=m;m++)a[m]=2;for(m=103153;103157>=m;m++)a[m]=0;for(m=103158;103162>=m;m++)a[m]=2;for(m=103163;103165>=m;m++)a[m]=0;for(m=103166;103168>=m;m++)a[m]=1;for(m=103169;103171>=m;m++)a[m]=2;for(m=103186;103188>=m;m++)a[m]=0;for(m=103189;103191>=m;m++)a[m]=2;for(m=103192;103195>=
m;m++)a[m]=0;for(m=103196;103199>=m;m++)a[m]=2;for(m=103200;103224>=m;m++)a[m]=0;for(m=103225;103227>=m;m++)a[m]=1;for(m=103232;103237>=m;m++)a[m]=0;for(m=103238;103243>=m;m++)a[m]=2;for(m=103244;103246>=m;m++)a[m]=0;for(m=103247;103249>=m;m++)a[m]=2;for(m=103254;103256>=m;m++)a[m]=0;for(m=103257;103259>=m;m++)a[m]=2;for(m=103264;103266>=m;m++)a[m]=0;for(m=103267;103269>=m;m++)a[m]=2;for(m=103300;103375>=m;m++)a[m]=0;for(m=103381;103383>=m;m++)a[m]=0;for(m=103384;103386>=m;m++)a[m]=1;for(m=103387;103389>=
m;m++)a[m]=0;for(m=103390;103392>=m;m++)a[m]=2;for(m=103397;103399>=m;m++)a[m]=0;for(m=103400;103471>=m;m++)a[m]=2;for(m=103476;103478>=m;m++)a[m]=0;for(m=103479;103481>=m;m++)a[m]=2;for(m=103486;103488>=m;m++)a[m]=0;for(m=103489;103491>=m;m++)a[m]=2;for(m=103492;103495>=m;m++)a[m]=0;for(m=103496;103499>=m;m++)a[m]=2;for(m=103528;103543>=m;m++)a[m]=0;for(m=103544;103548>=m;m++)a[m]=2;for(m=103549;103551>=m;m++)a[m]=0;for(m=103552;103554>=m;m++)a[m]=1;for(m=103555;103557>=m;m++)a[m]=2;for(m=103558;103560>=
m;m++)a[m]=0;for(m=103571;103573>=m;m++)a[m]=0;for(m=103574;103576>=m;m++)a[m]=2;for(m=103577;103580>=m;m++)a[m]=0;for(m=103581;103583>=m;m++)a[m]=2;for(m=103595;103694>=m;m++)a[m]=0;for(m=103696;103699>=m;m++)a[m]=0;for(m=103700;103793>=m;m++)a[m]=2;for(m=103794;103872>=m;m++)a[m]=0;for(m=103900;103971>=m;m++)a[m]=2;return q.WKIDUnitConversion=a})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(m,q,a,b,g){var h={show:function(k){if(k=
h.getNode(k))k.style.display="block"},getNode:function(k){return k&&k.domNode||k},hide:function(k){if(k=h.getNode(k))k.style.display="none"},toggle:function(k){if(k=h.getNode(k))k.style.display="none"===k.style.display?"block":"none"},documentBox:8>=g("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(k){if(k=this.getNode(k)){var d=0,c=0,f=0,e=0,l=0,n=0;return[q.connect(k,"ontouchstart",function(r){d=
r.touches[0].screenX;c=r.touches[0].screenY;f=k.scrollWidth;e=k.scrollHeight;l=k.clientWidth;n=k.clientHeight}),q.connect(k,"ontouchmove",function(r){r.preventDefault();var t=k.firstChild;t instanceof Text&&(t=k.childNodes[1]);var w=t._currentX||0,v=t._currentY||0;w+=r.touches[0].screenX-d;0<w?w=0:0>w&&Math.abs(w)+l>f&&(w=-1*(f-l));t._currentX=w;v+=r.touches[0].screenY-c;0<v?v=0:0>v&&Math.abs(v)+n>e&&(v=-1*(e-n));t._currentY=v;b.set(t,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+
w+"px, "+v+"px)"});d=r.touches[0].screenX;c=r.touches[0].screenY})]}}};a.mixin(m,h);return h})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(m,q,a,b,g,h,k,d,c,f){var e={},l=d.defaults.io,n=/^[a-z][a-z0-9\+\-\.]*:/i,r=/^\s*http:/i,t=/^\s*https:/i,w=/:\d+$/,v=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;e.isHTTP=function(x){var B=b.location.protocol;return null==
x?"http:"===B||"https:"===B:x?"https:"===B:"http:"===B};e.getProtocolForWebResource=function(x){return e.isHTTP()?b.location.protocol:x?"https:":"http:"};e.urlToObject=function(x){var B={},p=new a(x),z=x.indexOf("?");null===p.query?B={path:x,query:null}:(B.path=x.substring(0,z),B.query=g.queryToObject(p.query));p.fragment&&(B.hash=p.fragment,null===p.query&&(B.path=B.path.substring(0,B.path.length-(p.fragment.length+1))));return B};e.getProxyUrl=function(x,B){var p=m.isString(x)?0===m.trim(x).toLowerCase().indexOf("https:"):
x,z=l.proxyUrl,u=f.io.proxyNotSet;m.isString(x)&&(x=e.getProxyRule(x))&&(z=x.proxyUrl);if(!z)throw Error(u);if(p&&!1!==B&&0!==b.location.href.toLowerCase().indexOf("https:")&&(B=z,0!==B.toLowerCase().indexOf("http")&&(B=e.getAbsoluteUrl(B)),B=B.replace(/^http:/i,"https:"),e.canUseXhr(B))){z=B;var D=1}z=e.urlToObject(z);z._xo=D;return z};e.addProxy=function(x){var B=e.getProxyRule(x),p;B?p=e.urlToObject(B.proxyUrl):l.alwaysUseProxy&&(p=e.getProxyUrl());p&&(B=e.urlToObject(x),x=p.path+"?"+B.path,(p=
g.objectToQuery(m.mixin(p.query||{},B.query)))&&(x+="?"+p));return x};e.addProxyRule=function(x){var B=x.urlPrefix=e.urlToObject(x.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),p=l.proxyRules,z,u=p.length,D=u;for(z=0;z<u;z++){var I=p[z].urlPrefix;if(0===B.indexOf(I)){if(B.length===I)return-1;D=z;break}else 0===I.indexOf(B)&&(D=z+1)}p.splice(D,0,x);return D};e.getProxyRule=function(x){var B=l.proxyRules,p=B.length,z=e.urlToObject(x).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,
"").toLowerCase();for(x=0;x<p;x++)if(0===z.indexOf(B[x].urlPrefix)){var u=B[x];break}return u};e.hasSameOrigin=function(x,B,p){x=x.toLowerCase();B=B.toLowerCase();var z=b.location.href.toLowerCase();x=0===x.indexOf("http")?new a(x):z=new a(z);B=0===B.indexOf("http")?new a(B):m.isString(z)?new a(z):z;return(p||x.scheme===B.scheme)&&x.host===B.host&&x.port===B.port};e.canUseXhr=function(x,B){var p=c("esri-phonegap")?!0:!1,z=e.hasSameOrigin,u=l.corsEnabledServers,D,I=-1;!p&&c("esri-cors")&&u&&u.length&&
(p=q.some(u,function(C,E){C=!C||"object"!==typeof C||C instanceof RegExp?C:C.host;if(C instanceof RegExp){if(C.test(x))return I=E,!0}else if(C&&(D=0!==C.trim().toLowerCase().indexOf("http"),z(x,D?"http://"+C:C)||D&&z(x,"https://"+C)))return I=E,!0;return!1}));return B?I:p};e.getAbsoluteUrl=function(x){var B=e.getProtocolForWebResource();return m.isString(x)&&!n.test(x)?0===x.indexOf("//")?B+x:0===x.indexOf("/")?B+"//"+b.location.host+x:h._appBaseUrl+x:x};e.fixUrl=function(x){x=m.trim(x);x=e.getAbsoluteUrl(x);
x=e.normalizeSlashes(x);x=x.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");x=e.downgradeToHTTP(x);return x=e.upgradeToHTTPS(x)};e.normalize=function(x){return e.fixUrl(x)};e.normalizeSlashes=function(x){if(/^https?:\/\//i.test(x)){var B=x.indexOf("?");if(-1<B){var p=x.slice(0,B);var z=x.slice(B+1)}else p=x;x=p.replace(/\/{2,}/g,"/");x=x.replace("/","//");z&&(x+="?"+z)}return x};e.downgradeToHTTP=function(x){return e.isHTTP(!1)&&t.test(x)&&e.hasSameOrigin(b.location.href,x,!0)&&!e.canUseXhr(x)?
x.replace(t,"http:"):x};e.upgradeToHTTPS=function(x){var B=l.httpsDomains,p=e.isHTTP(!1),z=e.isHTTP(!0);if(!r.test(x))return x;x=m.trim(x);var u=x.indexOf("/",7);u=-1===u?x:x.slice(0,u);u=u.toLowerCase().slice(7);if(w.test(u))if(k.endsWith(u,":80"))u=u.slice(0,-3),x=x.replace(":80","");else return x;if(p&&u===b.location.host&&(!v.test(x)||!e.canUseXhr(x)))return x;p=!1;if(z&&u===b.location.host)p=!0;else if(B)for(var D=0;D<B.length;D++){var I=B[D];if(u===I||k.endsWith(u,"."+I)){p=!0;break}}p||!z||
l.alwaysUseProxy||e.getProxyRule(x)||(p=!0);p&&(x=x.replace(r,"https:"));return x};d=f.widgets.popup;var y=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:d.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,
appName:"Explorer",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:d.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",
label:d.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:d.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:d.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,appName:"Microsoft Power BI",label:d.NLS_openLinkInApp}];e.getURIInfo=function(x){var B;q.some(y,function(p){p.pattern.test(x)&&(B=p);return!!B});return B};e.isKnownURI=function(x){return!!e.getURIInfo(x)};m.mixin(h,e);h._getProxyUrl=e.getProxyUrl;h._getProxiedUrl=
e.addProxy;h._hasSameOrigin=e.hasSameOrigin;h._canDoXOXHR=e.canUseXhr;h._getAbsoluteUrl=e.getAbsoluteUrl;h.fixUrl=e.fixUrl;return e})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t){var w=m([d],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],
load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(v,y){this._attrs={};v&&b.isString(v)?this._url=n.urlToObject(this.url=n.normalize(v)):(this.url=this._url=null,(y=y||v)&&(y.layerDefinition||y.query)&&(y=null));this.spatialReference=new r(4326);this.initialExtent=new t(-180,-90,180,90,new r(4326));this._map=this._div=null;this.normalization=!0;y&&(y.id&&(this.id=y.id),this.arcgisProps=y.arcgisProps,this.parentLayer=y.parentLayer,
!1===y.visible&&(this.visible=!1),f.isDefined(y.opacity)&&(this.opacity=y.opacity),f.isDefined(y.minScale)&&this.setMinScale(y.minScale),f.isDefined(y.maxScale)&&this.setMaxScale(y.maxScale),this.attributionDataUrl=y.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,f.isDefined(y.showAttribution)&&(this.showAttribution=y.showAttribution),this.className=y.className,this.refreshInterval=y.refreshInterval||0);this._errorHandler=b.hitch(this,this._errorHandler);this._scheduledRefresh=
b.hitch(this,this._scheduledRefresh);this.refresh=b.hitch(this,this.refresh);if(this.managedSuspension){var x=this._setMap;this._setMap=function(B){var p=x.apply(this,arguments);this._fireAttach(B);this.evaluateSuspension();if(this.suspended&&!B.loaded)var z=a.connect(B,"onLoad",this,function(){a.disconnect(z);z=null;this.evaluateSuspension()});return p}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,
attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(v){this.loaded||(this.loadError=v);this.onError(v)},_setMap:function(v,y,x,B){this._map=v;this._lyrZEHandle=a.connect(v,"onZoomEnd",this,this._processMapScale);if(v.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var p=a.connect(v,"onLoad",this,function(){a.disconnect(p);p=null;this._processMapScale()})},_unsetMap:function(v,y){a.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=
null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(v)},_fireAttach:function(v){this.attached=!0;this.onAttach({map:v})},_fireDetach:function(v){this.attached=!1;this.onDetach({map:v})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(v,y){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(v,
y),this._map&&this._map._decr())},_getToken:function(){var v=this._url,y=this.credential;return v&&v.query&&v.query.token||y&&y.token||void 0},_findCredential:function(){this.credential=c.id&&this._url&&c.id.findCredential(this._url.path)},_useSSL:function(){var v=this._url,y=/^http:/i;this.url&&(this.url=this.url.replace(y,"https:"));v&&v.path&&(v.path=v.path.replace(y,"https:"))},refresh:function(){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(v){this.setScaleRange(v)},
setMaxScale:function(v){this.setScaleRange(null,v)},setScaleRange:function(v,y){var x=f.isDefined(v),B=f.isDefined(y);this.loaded||(this._hasMin=this._hasMin||x,this._hasMax=this._hasMax||B);var p=this.minScale,z=this.maxScale;this.minScale=(x?v:this.minScale)||0;this.maxScale=(B?y:this.maxScale)||0;if(p!==this.minScale||z!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},
canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var v=void 0===this._resumedOnce,y=this.className,x=this._attrs,B=this.getNode(),
p;if(v){this._resumedOnce=!0;if(y&&B){var z=B.getAttribute("class")||"";(new RegExp("(^|\\s)"+y+"(\\s|$)","i")).test(z)||B.setAttribute("class",z+((z?" ":"")+y))}if(x&&B)for(p in x)x.hasOwnProperty(p)&&B.setAttribute(p,x[p])}this._refreshRT();this.onResume({firstOccurrence:v});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var v=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();v!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},
isVisibleAtScale:function(v){return v?w.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(v,y){if(!(v||this._map&&this._map.loaded))return!1;var x=this._map;v=v||x.getScale();var B=this.minScale,p=this.maxScale,z=!B,u=!p,D;y&&(D=x.width>x.height?x.width:x.height);z||(v<=B?z=!0:y&&(z=Math.abs(B-v)/B<1/D));u||(v>=p?u=!0:y&&(u=Math.abs(p-v)/p<1/D));return z&&u},getAttributionData:function(){var v=this.attributionDataUrl,y=new g(l._dfdCanceller);this.hasAttributionData&&
v?(y._pendingDfd=e({url:v,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),y._pendingDfd.then(function(x){y.callback(x)},function(x){y.errback(x)})):(v=Error("Layer does not have attribution data"),v.log=!!q.isDebug,y.errback(v));return y},getResourceInfo:function(){var v=this.resourceInfo;return b.isString(v)?h.fromJson(v):b.clone(v)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(v,y){var x=this.getNode();if("data-reference"===v&&11>k("ie"))return this;
x&&(null==y?x.removeAttribute(v):x.setAttribute(v,y));this._attrs&&(null==y?delete this._attrs[v]:this._attrs[v]=y);return this},setRefreshInterval:function(v){var y=this.refreshInterval;this.refreshInterval=v;this._toggleRT(!1);v&&this._toggleRT(!0);if(y!==v)this.onRefreshIntervalChange();return this},_toggleRT:function(v){v&&this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),
this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(v){var y=this._refreshTS;y&&(v=this._reCheckTS.test(v)?v.replace(this._reReplaceTS,"$$$1"+y):v+((-1===v.indexOf("?")?"?":"\x26")+"_ts\x3d"+y));return v},setNormalization:function(v){this.normalization=
v},setVisibility:function(v){this.visible!==v&&(this.visible=v,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",v?null:"")},onLoad:function(){},onAttach:function(v){},onDetach:function(v){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},
onError:function(){}});b.setObject("layers.Layer",w,c);return w})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(m,q,a,b,g,h){m=m([b],{declaredClass:"esri.Evented",registerConnectEvents:function(){var k=this.constructor,d=this.constructor._meta.parents,c=[{}],f={},e,l=function(r,t){q.isArray(r)||(r=[r]);for(var w=0;w<r.length;w++){var v=r[w];v._meta&&v._meta.parents&&l(v._meta.parents,t);v.prototype._eventMap&&
t.push(q.mixin({},v.prototype._eventMap))}return t};if(!k._onMap){l(d,c);c.push(this._eventMap);d=q.mixin.apply(this,c);for(n in this)/^on\w/.test(n)&&q.isFunction(this[n])&&(c=this._hyphenLower(n).toLowerCase(),d[c]||(f[c]={method:n}));for(e in d){var n=this._onCamelCase(e);f[e]={method:n,argKeys:d[e]}}k._onMap=f;return k._onMap}},on:function(k,d){if(-1<k.indexOf(",")){for(var c=k.split(/\s*,\s*/),f=c.length,e=[];f--;)e.push(this.on(c[f],d));e.remove=function(){for(var r=0;r<e.length;r++)e[r].remove()};
return e}c=this.constructor._onMap||this.registerConnectEvents();f="string"==typeof k&&k.toLowerCase();var l=this._onCamelCase(f),n=c&&c[f];return(l=n&&n.method||this[l]&&q.isFunction(this[l])&&l)?n&&q.isArray(n.argKeys)?(c=this._onArr2Obj(d,c[f].argKeys),a.after(this,l,c,!0)):a.after(this,l,function(r){r=r||{};r.target||(r.target=this);d.call(this,r)},!0):this.inherited(arguments)},emit:function(k,d){var c,f,e=k.toLowerCase();var l=this._onCamelCase(k);var n=this.constructor._onMap||this.registerConnectEvents();
l=(f=n&&n[e]&&n[e].method||q.isFunction(this[l])&&l)&&this[f];f&&n&&n[e]&&this._onObj2Arr(function(){c=Array.prototype.slice.call(arguments)},n[e].argKeys)(d);d=d||{};d.target||(d.target=this);if(l){var r=c&&c.length?c:[d];r=l.apply(this,r)}this.inherited(arguments,[k,d]);return r},_onObj2Arr:function(k,d){if(d){var c=this;return function(f){var e,l=[],n=d.length;for(e=0;e<n;e++)l[e]=f[d[e]];k.apply(c,l)}}return k},_onArr2Obj:function(k,d){if(d){var c=this;return function(){var f,e={},l=arguments.length;
for(f=0;f<l;f++)e[d[f]]=arguments[f];e.target||(e.target=c);k.call(c,e)}}return k},_hyphenLower:function(k){return k.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(d,c){return(c?"-":"")+d.toLowerCase()})},_onCamelCase:function(k){return"on"+k.substr(0,1).toUpperCase()+k.substr(1).replace(/\-([a-z])/g,function(d,c){return c.toUpperCase()})}});return h.Evented=m})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t,w,v,y){function x(P){P=new h(P);return(P.host+(P.port?":"+P.port:"")).toLowerCase()}function B(P){return this._xhr?this._xhr.getResponseHeader(P):null}function p(P,ha){var X=l.objectToQuery(P.content);X&&(P.url+=(-1===P.url.indexOf("?")?"?":"\x26")+X);if(2E3<P.url.length){if("data:"!==P.url.toLowerCase().slice(0,5))return P=new b,P.reject(g.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),P;if(3E6<P.url.length)return P=
new b,P.reject(g.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),P}var R=new Image;ha.allowImageDataAccess&&(R.crossOrigin=P.withCredentials?"use-credentials":"anonymous");var V=!1,J=new b(function(S){V=!0;R.onload=R.onerror=R.onabort=null;R.src=""});ha=function(S){R.onload=R.onerror=R.onabort=null;V||J.reject(Error("Unable to load the resource"))};R.onload=function(){R.onload=R.onerror=R.onabort=null;V||J.resolve(this)};R.onerror=ha;
R.onabort=ha;R.alt="";R.src=P.url;return J}function z(P,ha,X,R){var V=!1,J=!1,S=!1;if(w.isDefined(ha))if(g.isObject(ha)){V=!!ha.useProxy;J=!!ha.usePost;S=!!ha.returnProgress;var aa=ha.crossOrigin}else V=!!ha;P=g.mixin({},P);delete P._credential;P._ssl&&(P.url=P.url.replace(/^http:/i,"https:"));10>t("ie")&&!Z.test(P.url)&&(P.url=encodeURI(P.url));var ja=P.content,la=P.url,ra=X&&P.form,ta=L;aa=w.isDefined(aa)?aa:ta.useCors;P.load=function(na){if(na){if(na.error){var Ia=g.mixin(Error(),na.error);Ia.log=
!!a.isDebug}else"error"===na.status&&(Ia=g.mixin(Error(),na),Ia.log=!!a.isDebug);Ia&&(P.failOk=!Ia.log,w.isDefined(Ia.httpCode)||(Ia.httpCode=Ia.code))}return Ia||na};P.error=function(na,Ia){Ia&&Ia.xhr&&Ia.xhr.abort();na instanceof Error||(na=g.mixin(Error(),na));na.log=!!a.isDebug;P.failOk=!na.log;ta.errorHandler(na,Ia);return na};P._token&&(P.content=P.content||{},P.content.token=P._token);var va=0;if(ja&&la){var Da=l.objectToQuery(ja);va=Da.length+la.length+1;t("esri-url-encodes-apostrophe")&&
(va=Da.replace(/'/g,"%27").length+la.length+1)}P.timeout=w.isDefined(P.timeout)?P.timeout:ta.timeout;P.handleAs=P.handleAs||"json";try{var ua=aa&&v.canUseXhr(P.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(P.url),U=v.hasSameOrigin(P.url,window.location.href)||ua,T=J||X||va>ta.postLength?!0:!1,ca=U||-1===P.handleAs.indexOf("json")||!P.callbackParamName||X?!1:!0,ia=v.getProxyRule(P.url)||ta.alwaysUseProxy||V||!("image"===P.handleAs&&!ha.allowImageDataAccess||ca&&!T||U)?!0:!1;X&&!t("esri-file-upload")&&
!ia&&ua&&(ia=!0);if(ia){var ea=v.getProxyUrl(la,aa);var sa=ea.path;ea._xo&&(ua=!0);!T&&sa.length+1+va>ta.postLength&&(T=!0);P.url=sa+"?"+la;if(T)P.content=g.mixin(ea.query||{},ja);else{var M=l.objectToQuery(g.mixin(ea.query||{},ja));M&&(P.url+="?"+M);P.content=null}}if(!ca||T||ia){var N=P.headers;!ua||N&&N.hasOwnProperty("X-Requested-With")||(N=P.headers=N||{},N["X-Requested-With"]=null);if(X){var Y=P.callbackParamName||"callback.html",da=P.callbackElementName||"textarea",ka,Ba,Aa=ra.elements?ra.elements.length:
0;if(ja=P.content)for(ka in ja.token&&-1<la.toLowerCase().indexOf("/sharing/servers/")&&(la+=(-1===la.indexOf("?")?"?":"\x26")+"token\x3d"+ja.token,P.url=ia?sa+"?"+la:la,delete ja.token),ja){var Ca=ja[ka];if(w.isDefined(Ca)){var ya=null;for(Ba=0;Ba<Aa;Ba++){var qa=ra.elements[Ba];if(qa.name===ka){ya=qa;break}}ya?ya.value=Ca:R?ra.append(ka,Ca):ra.appendChild(e.create("input",{type:"hidden",name:ka,value:Ca}))}}if(t("esri-file-upload")){q.forEach(ra.elements,function(na){na.name===Y&&ra.removeChild(na)});
var xa=R?ra:new FormData(ra);if(11<=t("safari")&&"entries"in xa&&"delete"in xa){R=[];for(var wa=xa.entries(),Wa=wa.next();!Wa.done;){var Za=Wa.value;Za[1]instanceof File&&""===Za[1].name&&R.push(Za[0]);Wa=wa.next()}R.forEach(function(na){xa.delete(na)})}P.contentType=!1;P.postData=xa;delete P.form}else{ra.enctype="multipart/form-data";9>t("ie")&&(ra.encoding="multipart/form-data");ra.method="post";q.some(ra.elements,function(na){return na.name===Y})||ra.appendChild(e.create("input",{type:"hidden",
name:Y,value:da}));if(-1!==la.toLowerCase().indexOf("addattachment")||-1!==la.toLowerCase().indexOf("updateattachment"))la+=(-1===la.indexOf("?")?"?":"\x26")+Y+"\x3d"+da,P.url=ia?sa+"?"+la:la;delete P.content}}if(ua&&!P.hasOwnProperty("withCredentials")&&"with-credentials"===L.useCors){la=ia?sa:la;var Ma=v.canUseXhr(la,!0),Ka=-1<Ma?L.corsEnabledServers[Ma]:null;if(Ka&&Ka.hasOwnProperty("withCredentials"))Ka.withCredentials&&(P.withCredentials=!0);else if(n.id){var Xa=n.id.findServerInfo(la);Xa&&Xa.webTierAuth&&
(P.withCredentials=!0)}}P=H?H(P):P;if("image"===P.handleAs)return p(P,ha);if(T){if(X&&!t("esri-file-upload")){var Ga=new b(function(){Oa.cancel()});var Oa=f.post(P.url,P).then(function(na){Ga.resolve(na)}).otherwise(function(na){Ga.reject(na)});Ga.addCallback(function(na){return P.load(na)});Ga.addErrback(function(na){return P.error(na)});return Ga}!ia&&t("safari")&&(P.url+=(-1===P.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+W++);if(S){P.uploadProgress=!0;P.data=P.postData;P.query=
P.content;Ga=new b(function(){Ta.cancel()});var Ta=d.post(P.url,P).then(function(na){Ga.resolve(na)},function(na){Ga.reject(na)},function(na){Ga.progress({transferType:na.transferType,loaded:na.loaded,total:na.total})});Ga.addCallback(function(na){return P.load(na)});Ga.addErrback(function(na){return P.error(na)});return Ga}return k.post(P)}return k.get(P)}P=H?H(P):P;P.jsonp=P.callbackParamName;P.query=P.content;Ga=new b(function(){Pa.cancel()});var Pa=c.get(P.url,P).then(function(na){Ga.resolve(na)}).otherwise(function(na){Ga.reject(na)});
Ga.addCallback(function(na){return P.load(na)});Ga.addErrback(function(na){return P.error(na)});return Ga}catch(na){return Ga=new b,Ga.errback(P.error(na)),Ga}}function u(P){var ha=L.corsStatus,X=v.canUseXhr(P,!0);-1<X&&L.corsEnabledServers.splice(X,1);var R=new b;R.reject({log:!!a.isDebug});ha[x(P)]=R.promise;return X}function D(P){var ha=L.corsStatus;try{var X=x(P);if(L.corsDetection&&L.useCors&&t("esri-cors")&&P&&-1!==P.toLowerCase().indexOf("/rest/services")&&!v.hasSameOrigin(P,window.location.href)&&
!v.canUseXhr(P)){if(ha[X]&&!ha[X].isCanceled())return ha[X];var R=new b(y._dfdCanceller);ha[X]=R.promise;var V=k.get({url:P.substring(0,P.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*L.corsDetectionTimeout});R._pendingDfd=V;V.then(function(J){J?(v.canUseXhr(P)||L.corsEnabledServers.push(X),R.resolve()):R.reject()},function(J){R.reject(J)});return R.promise}}catch(J){}return ba}function I(P){H=P}function C(P,ha,
X,R){function V(U){U._pendingDfd=z(X,R,ta,ra);if(!U._pendingDfd){U.ioArgs=U._pendingDfd&&U._pendingDfd.ioArgs;var T=Error("Deferred object is missing");T.log=!!a.isDebug;U.errback(T);U._pendingDfd=null;return U}U._pendingDfd.addCallback(function(ca){if(!ca)return ca;var ia=U._pendingDfd&&U._pendingDfd.ioArgs&&U._pendingDfd.ioArgs.xhr;if(!ia)return ca;if(ia=ia.getResponseHeader("Content-Type"))if(ia=ia.toLowerCase(),-1===ia.indexOf("text/plain")&&-1===ia.indexOf("application/json"))return ca;if(ca instanceof
ArrayBuffer&&750>=ca.byteLength)ia=new Blob([ca]);else if(ca instanceof Blob&&750>=ca.size)ia=ca;else return ca;var ea=new b,sa=new FileReader;sa.readAsText(ia);sa.onloadend=function(){if(!sa.error)try{var M=JSON.parse(sa.result);if(M.error)var N=M.error}catch(Y){}N?(N=g.mixin(Error(),N),N.log=!!a.isDebug,null==N.httpCode&&(N.httpCode=N.code),ea.reject(N)):ea.resolve(ca)};return ea.promise}).addCallback(function(ca){U.ioArgs=U._pendingDfd&&U._pendingDfd.ioArgs;R.returnFullResponse&&(ca={data:ca,_xhr:U.ioArgs&&
U.ioArgs.xhr,getHeader:B});U.callback(ca);U._pendingDfd=null}).addErrback(function(ca){if(ca){var ia=ca.code;var ea=ca.subcode;var sa=(sa=ca.messageCode)&&sa.toUpperCase()}if(ca&&403==ia&&(4==ea||ca.message&&-1<ca.message.toLowerCase().indexOf("ssl")&&-1===ca.message.toLowerCase().indexOf("permission"))){if(!X._ssl){X._ssl=X._sslFromServer=!0;C(U,!0,X,R);return}}else if(ca&&415==ca.status){if(u(X.url),!X._err415){X._err415=1;C(U,!0,X,R);return}}else if(n.id&&-1!==q.indexOf(n.id._errorCodes,ia)&&!n.id._isPublic(X.url)&&
!S&&(403!=ia||-1===q.indexOf(O,sa)&&(!w.isDefined(ea)||2==ea&&X._token))){U._pendingDfd=n.id.getCredential(X.url,{token:X._token,error:ca});U._pendingDfd.addCallback(function(M){X._token=M.token;X._credential=M;X._ssl=X._sslFromServer||M.ssl;C(U,!0,X,R)}).addErrback(function(M){U.errback(M);U._pendingDfd=null});return}U.ioArgs=U._pendingDfd&&U._pendingDfd.ioArgs;U.isFulfilled()||U.errback(ca);U._pendingDfd=null}).then(null,null,function(ca){U.progress(ca)})}var J=X.form,S=R.disableIdentityLookup,
aa=R._preLookup,ja=!1;if(t("esri-workers")&&!1!==L.useWorkers)if(!0===R.useWorkers||!0===L.useWorkers)ja=!0;else if(R.workerOptions){var la=R.workerOptions;if(la.callback||la.worker&&la.worker.worker instanceof Worker)ja=!0}var ra=J&&t("esri-file-upload")&&J instanceof FormData,ta=J&&(J.elements?q.some(J.elements,function(U){return"file"===U.type}):ra),va=-1!==X.url.toLowerCase().indexOf("token\x3d")||X.content&&X.content.token||ta&&q.some(J.elements,function(U){return"token"===U.name})?1:0;if(!ha){P.addCallback(function(U){if((/\/sharing\/rest\/accounts\/self/i.test(X.url)||
/\/sharing\/rest\/portals\/self/i.test(X.url))&&!va&&!X._token&&U.user&&U.user.username){L.webTierAuthServers.push(x(X.url));U=L.corsEnabledServers;var T=v.canUseXhr(X.url,!0),ca={host:x(X.url),withCredentials:!0};if(-1===T)U.push(ca);else{var ia=U[T];ia instanceof RegExp?(ca.host=ia,U.splice(T,1,ca)):"object"===typeof ia?ia.withCredentials=!0:U.splice(T,1,ca)}}if(U=X._credential)if(T=(T=n.id.findServerInfo(U.server))&&T.owningSystemUrl)T=T.replace(/\/?$/,"/sharing"),(U=n.id.findCredential(T,U.userId))&&
-1===n.id._getIdenticalSvcIdx(T,U)&&U.resources.splice(0,0,T)});P.addBoth(function(U){delete X._credential;!U||t("ie")&&U.nodeType||(U._ssl=X._ssl)});var Da=X.load,ua=X.error;Da&&P.addCallback(function(U){var T=P._pendingDfd;T=T&&T.ioArgs;return Da.call(T&&T.args,U,T)});ua&&P.addErrback(function(U){var T=P._pendingDfd;T=T&&T.ioArgs;return ua.call(T&&T.args,U,T)})}!n.id||va||X._token||n.id._isPublic(X.url)||S&&!aa||!(ha=n.id.findCredential(X.url))||(X._token=ha.token,X._ssl=ha.ssl);ja?R.workerOptions&&
R.workerOptions.worker?(G||(G=k),k=R.workerOptions.worker,V(P)):m(["./workers/RequestClient"],function(U){G||(G=k);if(R.workerOptions){var T=R.workerOptions;k=U.getClient(T.callback,T.cbFunction)}else k=U.getClient();V(P)}):(G&&(k=G,G=null),V(P));return P}function E(P,ha){P.url=v.fixUrl(P.url);ha=ha||{};var X=new b(y._dfdCanceller),R=D(P.url);X._pendingDfd=R;R.always(function(V){V&&"cancel"===V.dojoType?X.reject(V):C(X,!1,P,ha)});return X}var G=null,H,L=r.defaults.io,O=["COM_0056","COM_0057","SB_0008"],
W=0,Z=/%[0-9A-F]{2}/i,ba=function(){var P=new b;P.resolve();return P.promise}();E._makeRequest=z;E._processRequest=C;E._disableCors=u;E._detectCors=D;E.setRequestPreCallback=I;n.request=E;n._makeRequest=z;n._processRequest=C;n._disableCors=u;n._detectCors=D;n.setRequestPreCallback=I;return E})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(m,q,a,b,g,h){function k(){var v=document.createElement("iframe");
v.name="esri_core_jsonp_iframe";v.style.display="none";v.setAttribute("sandbox","allow-scripts");if(!h("ff")&&"srcdoc"in v){var y=m.toUrl("dojo/dojo.js"),x=g.replace("../../../dojo/dojo.js",y);y=y.slice(0,-7);x=x.replace("../../../dojo/",y);v.srcdoc=x}else x=m.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===x.indexOf("https:")&&(x=x.replace("https:","http:")),v.src=x;document.body.appendChild(v);return v}function d(){var v=new MessageChannel;v.port1.addEventListener("message",c);v.port1.start();
return v}function c(v){var y=v.data;if("ready"===y){y=0;for(var x=t;y<x.length;y++)v=x[y],e(v,n);t=null}else if(v=w[y.id])delete w[y.id],y.isError?v.dfd.reject(Error(y.message)):v.dfd.resolve(y.response)}function f(v,y){v.addEventListener("load",function(){v.contentWindow.postMessage("init","*",[y.port2])})}function e(v,y){w[v.message.id]=v;y.port1.postMessage(v.message)}Object.defineProperty(q,"__esModule",{value:!0});var l,n,r=0,t=[],w={};q.get=function(v,y){if(!h("esri-script-sandbox"))return b.get(v,
y);var x=null;y&&(x={jsonp:y.jsonp,preventCache:y.preventCache,query:y.query,timeout:y.timeout});y=new a(function(){if(t){var p=t.indexOf(B);-1<p&&t.splice(p,1)}else B.message.id in w&&delete w[B.message.id]});var B={dfd:y,message:{id:"id"+(++r+Math.random()),url:v,options:x}};l||(l=k(),n=d(),f(l,n));t?t.push(B):e(B,n);return y.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e){function l(D,I){D.canDelete&&v._remove(D.id,I.options.frameDoc,!0)}function n(D){u&&u.length&&(g.forEach(u,function(I){v._remove(I.id,I.frameDoc);I.frameDoc=null}),u=[]);return D.options.jsonp?!D.data:!0}function r(D){return!!this.scriptLoaded}function t(D){return(D=D.options.checkString)&&eval("typeof("+D+') !\x3d\x3d "undefined"')}function w(D,I){if(this.canDelete){var C=this.response.options;u.push({id:this.id,frameDoc:C.ioArgs?C.ioArgs.frameDoc:C.frameDoc});C.ioArgs&&
(C.ioArgs.frameDoc=null);C.frameDoc=null}I?this.reject(I):this.resolve(D)}function v(D,I,C){var E=a.parseArgs(D,a.deepCopy({},I));D=E.url;I=E.options;var G=a.deferred(E,l,n,I.jsonp?null:I.checkString?t:r,w);h.mixin(G,{id:y+x++,canDelete:!1});I.jsonp&&((new RegExp("[?\x26]"+I.jsonp+"\x3d")).test(D)||(D+=(~D.indexOf("?")?"\x26":"?")+I.jsonp+"\x3d"+(I.frameDoc?"parent.":"")+y+"_callbacks."+G.id),G.canDelete=!0,z[G.id]=function(O){E.data=O;G.handleResponse(E)});a.notify&&a.notify.emit("send",E,G.promise.cancel);
if(!I.canAttach||I.canAttach(G)){var H=v._attach(G.id,D,I.frameDoc,function(O){if(!(O instanceof Error)){var W=Error("Error loading "+(O.target?O.target.src:"script"));W.source=O;O=W}G.reject(O);v._remove(G.id,I.frameDoc,!0)});if(!I.jsonp&&!I.checkString)var L=k(H,B,function(O){if("load"===O.type||p.test(H.readyState))L.remove(),G.scriptLoaded=O})}q(G);return C?G:G.promise}f.add("script-readystatechange",function(D,I){return"undefined"!==typeof I.createElement("script").onreadystatechange&&("undefined"===
typeof D.opera||"[object Opera]"!==D.opera.toString())});var y=m.id.replace(/[\/\.\-]/g,"_"),x=0,B=f("script-readystatechange")?"readystatechange":"load",p=/complete|loaded/,z=b.global[y+"_callbacks"]={},u=[];v.get=v;v._attach=function(D,I,C,E){C=C||e.doc;var G=C.createElement("script");if(E)k.once(G,"error",E);G.type="text/javascript";try{G.src=I}catch(H){E&&E(G)}G.id=D;G.async=!0;G.charset="utf-8";return C.getElementsByTagName("head")[0].appendChild(G)};v._remove=function(D,I,C){c.destroy(d.byId(D,
I));z[D]&&(C?z[D]=function(){delete z[D]}:delete z[D])};v._callbacksProperty=y+"_callbacks";return v})},"esri/core/sniff":function(){define(["../sniff"],function(m){return m})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),function(m,q,a,b,g,h,k,d,c,f,e,l){function n(p){return!this.isFulfilled()}function r(p){return!!this._finished}
function t(p,z){if(!z)try{var u=p.options,D=v.doc(v._frame),I=u.handleAs;if("html"!==I){if("xml"===I)if("html"===D.documentElement.tagName.toLowerCase()){d("a",D.documentElement).orphan();var C=D.documentElement.innerText||D.documentElement.textContent;C=C.replace(/>\s+</g,"\x3e\x3c");p.text=h.trim(C)}else p.data=D;else p.text=D.getElementsByTagName("textarea")[0].value;g(p)}else p.data=D}catch(E){z=E}z?this.reject(z):this._finished?this.resolve(p):this.reject(Error("Invalid dojo/request/iframe request state"))}
function w(p){this._callNext()}function v(p,z,u){var D=b.parseArgs(p,b.deepCreate(B,z),!0);p=D.url;z=D.options;if("GET"!==z.method&&"POST"!==z.method)throw Error(z.method+" not supported by dojo/request/iframe");v._frame||(v._frame=v.create(v._iframeName,x+"();"));p=b.deferred(D,null,n,r,t,w);p._callNext=function(){this._calledNext||(this._calledNext=!0,v._currentDfd=null,v._fireNextRequest())};p._legacy=u;v._dfdQueue.push(p);v._fireNextRequest();a(p);return u?p:p.promise}var y=m.id.replace(/[\/\.\-]/g,
"_"),x=y+"_onload";l.global[x]||(l.global[x]=function(){var p=v._currentDfd;if(p){var z=f.byId(p.response.options.form)||p._tmpForm;if(z){for(var u=p._contentToClean,D=0;D<u.length;D++)for(var I=u[D],C=0;C<z.childNodes.length;C++){var E=z.childNodes[C];if(E.name===I){e.destroy(E);break}}p._originalAction&&z.setAttribute("action",p._originalAction);p._originalMethod&&(z.setAttribute("method",p._originalMethod),z.method=p._originalMethod);p._originalTarget&&(z.setAttribute("target",p._originalTarget),
z.target=p._originalTarget)}p._tmpForm&&(e.destroy(p._tmpForm),delete p._tmpForm);p._finished=!0}else v._fireNextRequest()});var B={method:"POST"};v.create=function(p,z,u){if(l.global[p])return l.global[p];if(l.global.frames[p])return l.global.frames[p];u||(c("config-useXDomain")&&c("config-dojoBlankHtmlUrl"),u=c("config-dojoBlankHtmlUrl")||q.toUrl("dojo/resources/blank.html"));z=e.place('\x3ciframe id\x3d"'+p+'" name\x3d"'+p+'" src\x3d"'+u+'" onload\x3d"'+z+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',
l.body());return l.global[p]=z};v.doc=function(p){if(p.contentDocument)return p.contentDocument;var z=p.name;if(z){var u=l.doc.getElementsByTagName("iframe");if(p.document&&u[z].contentWindow&&u[z].contentWindow.document)return u[z].contentWindow.document;if(l.doc.frames[z]&&l.doc.frames[z].document)return l.doc.frames[z].document}return null};v.setSrc=function(p,z,u){p=l.global.frames[p.name];p.contentWindow&&(p=p.contentWindow);try{u?p.location.replace(z):p.location=z}catch(D){}};v._iframeName=
y+"_IoIframe";v._notifyStart=function(){};v._dfdQueue=[];v._currentDfd=null;v._fireNextRequest=function(){try{if(!v._currentDfd&&v._dfdQueue.length){do var p=v._currentDfd=v._dfdQueue.shift();while(p&&(p.canceled||p.isCanceled&&p.isCanceled())&&v._dfdQueue.length);if(!p||p.canceled||p.isCanceled&&p.isCanceled())v._currentDfd=null;else{var z=p.response,u=z.options,D=p._contentToClean=[],I=f.byId(u.form),C=b.notify,E=u.data||null;if(!p._legacy&&"POST"===u.method&&!I)I=p._tmpForm=e.create("form",{name:y+
"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},l.body());else if("GET"===u.method&&I&&-1<z.url.indexOf("?")){var G=z.url.slice(z.url.indexOf("?")+1);E=h.mixin(k.queryToObject(G),E)}if(I){if(!p._legacy){var H=I;do H=H.parentNode;while(H&&H!==l.doc.documentElement);H||(I.style.position="absolute",I.style.left="-1000px",I.style.top="-1000px",l.body().appendChild(I));I.name||(I.name=y+"_form")}if(E){H=function(ha,X){e.create("input",{type:"hidden",name:ha,value:X},I);D.push(ha)};for(var L in E){var O=
E[L];if(h.isArray(O)&&1<O.length)for(G=0;G<O.length;G++)H(L,O[G]);else{var W=d("input[name\x3d'"+L+"']",I);-1==W.indexOf()?H(L,O):W.val(O)}}}var Z=I.getAttributeNode("action"),ba=I.getAttributeNode("method"),P=I.getAttributeNode("target");z.url&&(p._originalAction=Z?Z.value:null,Z?Z.value=z.url:I.setAttribute("action",z.url));p._legacy?ba&&ba.value||(ba?ba.value=u.method:I.setAttribute("method",u.method)):(p._originalMethod=ba?ba.value:null,ba?ba.value=u.method:I.setAttribute("method",u.method));
p._originalTarget=P?P.value:null;P?P.value=v._iframeName:I.setAttribute("target",v._iframeName);I.target=v._iframeName;C&&C.emit("send",z,p.promise.cancel);v._notifyStart(z);I.submit()}else u="",z.options.data&&(u=z.options.data,"string"!==typeof u&&(u=k.objectToQuery(u))),H=z.url+(-1<z.url.indexOf("?")?"\x26":"?")+u,C&&C.emit("send",z,p.promise.cancel),v._notifyStart(z),v.setSrc(v._frame,H,!0)}}}catch(ha){p.reject(ha)}};b.addCommonMethods(v,["GET","POST"]);return v})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),
function(m,q,a,b,g){function h(c){for(;c.childNodes[0]&&1==c.childNodes[0].nodeType;)c=c.childNodes[0];return c}function k(c,f){"string"==typeof c?(c=b.toDom(c,f&&f.ownerDocument),11==c.nodeType&&(c=c.childNodes[0])):1==c.nodeType&&c.parentNode&&(c=c.cloneNode(!1));return c}var d=m.NodeList;q.extend(d,{_placeMultiple:function(c,f){c="string"==typeof c||c.nodeType?m(c):c;for(var e=[],l=0;l<c.length;l++)for(var n=c[l],r=this.length,t=r-1,w;w=this[t];t--)0<l&&(w=this._cloneNode(w),e.unshift(w)),t==r-
1?b.place(w,n,f):n.parentNode.insertBefore(w,n),n=w;e.length&&(e.unshift(0),e.unshift(this.length-1),Array.prototype.splice.apply(this,e));return this},innerHTML:function(c){return arguments.length?this.addContent(c,"only"):this[0].innerHTML},text:function(c){if(arguments.length){for(var f=0,e;e=this[f];f++)1==e.nodeType&&g.set(e,"textContent",c);return this}var l="";for(f=0;e=this[f];f++)l+=g.get(e,"textContent");return l},val:function(c){if(arguments.length){for(var f=q.isArray(c),e=0,l;l=this[e];e++){var n=
l.nodeName.toUpperCase(),r=l.type,t=f?c[e]:c;if("SELECT"==n)for(n=l.options,r=0;r<n.length;r++){var w=n[r];w.selected=l.multiple?-1!=a.indexOf(c,w.value):w.value==t}else"checkbox"==r||"radio"==r?l.checked=l.value==t:l.value=t}return this}if((l=this[0])&&1==l.nodeType){c=l.value||"";if("SELECT"==l.nodeName.toUpperCase()&&l.multiple){c=[];n=l.options;for(r=0;r<n.length;r++)w=n[r],w.selected&&c.push(w.value);c.length||(c=null)}return c}},append:function(c){return this.addContent(c,"last")},appendTo:function(c){return this._placeMultiple(c,
"last")},prepend:function(c){return this.addContent(c,"first")},prependTo:function(c){return this._placeMultiple(c,"first")},after:function(c){return this.addContent(c,"after")},insertAfter:function(c){return this._placeMultiple(c,"after")},before:function(c){return this.addContent(c,"before")},insertBefore:function(c){return this._placeMultiple(c,"before")},remove:d.prototype.orphan,wrap:function(c){if(this[0]){c=k(c,this[0]);for(var f=0,e;e=this[f];f++){var l=this._cloneNode(c);e.parentNode&&e.parentNode.replaceChild(l,
e);h(l).appendChild(e)}}return this},wrapAll:function(c){if(this[0]){c=k(c,this[0]);this[0].parentNode.replaceChild(c,this[0]);c=h(c);for(var f=0,e;e=this[f];f++)c.appendChild(e)}return this},wrapInner:function(c){if(this[0]){c=k(c,this[0]);for(var f=0;f<this.length;f++){var e=this._cloneNode(c);this._wrap(q._toArray(this[f].childNodes),null,this._NodeListCtor).wrapAll(e)}}return this},replaceWith:function(c){c=this._normalize(c,this[0]);for(var f=0,e;e=this[f];f++)this._place(c,e,"before",0<f),e.parentNode.removeChild(e);
return this},replaceAll:function(c){c=m(c);for(var f=this._normalize(this,this[0]),e=0,l;l=c[e];e++)this._place(f,l,"before",0<e),l.parentNode.removeChild(l);return this},clone:function(){for(var c=[],f=0;f<this.length;f++)c.push(this._cloneNode(this[f]));return this._wrap(c,this,this._NodeListCtor)}});d.prototype.html||(d.prototype.html=d.prototype.innerHTML);return d})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(m,q,a){q={_dfdCanceller:function(b){b.canceled=
!0;var g=b._pendingDfd;if(!b.isFulfilled()&&g&&!g.isFulfilled()){g.cancel();var h=g.results&&g.results[1]}b._pendingDfd=null;return h},_fixDfd:function(b){var g=b.then;b.then=function(h,k,d){if(h){var c=h;h=function(f){return f&&f._argsArray?c.apply(null,f):c(f)}}return g.call(this,h,k,d)};return b},_resDfd:function(b,g,h){var k=g.length;1===k?h?b.errback(g[0]):b.callback(g[0]):1<k?(g._argsArray=!0,b.callback(g)):b.callback()}};m.mixin(a,q);return q})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),
function(m,q,a,b,g,h,k,d,c){m=m(null,{declaredClass:"esri.layers.TileInfo",constructor:function(f){q.mixin(this,f);this.width=this.cols;this.height=this.rows;this._levelToLOD={};f=this.spatialReference;var e=this.origin;f&&(f=this.spatialReference=new k(f.toJson?f.toJson():f));e&&(this.origin=new d(e.toJson?e.toJson():e),!e.spatialReference&&f&&this.origin.setSpatialReference(new k(f.toJson())));this.lods=a.map(this.lods,function(r){return new c(r)});a.forEach(this.lods,function(r){this._levelToLOD[r.level]=
r},this);f=!1;e=this.spatialReference;var l=this.origin;if(e&&l){var n=e._getInfo();n&&(f=e._isWrappable()&&Math.abs(n.origin[0]-l.x)<=n.dx)}this.isWrappable=f;this._initializeUpsampleLevels()},toJson:function(){return h.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&a.map(this.lods,function(f){return f.toJson()})})},
lodAt:function(f){return this._levelToLOD&&this._levelToLOD[f]||null},updateTileInfo:function(f){var e=this.lodAt(f.level),l=e.resolution*this.width;e=e.resolution*this.height;f.id=f.level+"/"+f.row+"/"+f.col;f.extent||(f.extent=[0,0,0,0]);f.extent[0]=this.origin.x+f.col*l;f.extent[1]=this.origin.y-(f.row+1)*e;f.extent[2]=f.extent[0]+l;f.extent[3]=f.extent[1]+e},upsampleTile:function(f){var e=this._upsampleLevels[f.level];if(!e||-1===e.parentLevel)return!1;f.level=e.parentLevel;f.row=Math.floor(f.row/
e.factor+.001);f.col=Math.floor(f.col/e.factor+.001);this.updateTileInfo(f);return!0},_initializeUpsampleLevels:function(){var f=this.lods;this._upsampleLevels=[];for(var e=null,l=0;l<f.length;l++){var n=f[l];this._upsampleLevels[n.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/n.resolution:0};e=n}}});q.setObject("layers.TileInfo",m,g);return m})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(m,q,a,b,g){m=m(null,{declaredClass:"esri.layers.LOD",
constructor:function(h){q.mixin(this,h)},toJson:function(){return g.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});q.setObject("layers.LOD",m,b);return m})},"esri/layers/unitBezier":function(){define([],function(){var m=function(a,b,g,h){function k(r,t){var w;t=null==t?1E-6:t;var v=r;for(w=0;8>w;w++){var y=((f*v+c)*v+d)*v-r;if(Math.abs(y)<t)return v;var x=(3*f*v+2*c)*v+d;if(1E-6>Math.abs(x))break;v-=y/x}x=0;w=1;v=r;if(v<x)return x;if(v>w)return w;
for(;x<w;){y=((f*v+c)*v+d)*v;if(Math.abs(y-r)<t)break;r>y?x=v:w=v;v=.5*(w-x)+x}return v}var d=3*a,c=3*(g-a)-d,f=1-d-c,e=3*b,l=3*(h-b)-e,n=1-e-l;return function(r,t){r=k(r,t);return((n*r+l)*r+e)*r}},q=/^cubic-bezier\((.*)\)/;m.parse=function(a){var b=m[a]||null;!b&&(a=q.exec(a))&&(a=a[1].split(",").map(function(g){return parseFloat(g.trim())}),4!==a.length||a.some(function(g){return isNaN(g)})||(b=m.apply(m,a)));return b};m.ease=m(.25,.1,.25,1);m.linear=m(0,0,1,1);m.easeIn=m["ease-in"]=m(.42,0,1,1);
m.easeOut=m["ease-out"]=m(0,0,.58,1);m.easeInOut=m["ease-in-out"]=m(.42,0,.58,1);return m})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(m,q,a,b,g){return function(h,k){h=b.mixin({},{url:h,failOk:!0},k);"array-buffer"===k.responseType?(h.handleAs="arraybuffer",delete h.responseType):k.responseType&&(h.handleAs=k.responseType,delete h.responseType);null!==k.query&&(h.content=h.query,delete h.query);if(k.hasOwnProperty("allowImageDataAccess")){var d=
{allowImageDataAccess:k.allowImageDataAccess};delete h.allowImageDataAccess}var c=new g(function(){f.isFulfilled()||f.cancel()});var f=a(h,d).then(function(e){c.resolve({data:e})}).catch(function(e){e&&null!=e.httpCode&&(e.details=e.details||{},e.details.httpStatus=e.httpCode);c.reject(e)});return c.promise}})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(m,q,a,b,g,h){function k(d){if(d){if("function"!==
typeof d.forEach){var c=Object.keys(d),f=c.map(function(r){return d[r]});return k(f).then(function(r){var t={};c.forEach(function(w,v){return t[w]=r[v]});return t})}var e=new a,l=[],n=d.length;0===n&&e.resolve(l);d.forEach(function(r){var t={promise:r};l.push(t);r.then(function(w){t.value=w}).catch(function(w){t.error=w}).then(function(){--n;0===n&&e.resolve(l)})});return e.promise}}Object.defineProperty(q,"__esModule",{value:!0});q.all=function(d){return g(d)};q.filter=function(d,c){var f=d.slice();
return g(d.map(function(e,l){return c(e,l)})).then(function(e){return f.filter(function(l,n){return e[n]})})};q.eachAlways=k;q.create=function(d,c){var f=new a(c);d(function(e){void 0===e&&(e=null);return b(e).then(f.resolve)},f.reject);return f.promise};q.reject=function(d){var c=new a;c.reject(d);return c.promise};q.resolve=function(d){void 0===d&&(d=null);var c=new a;c.resolve(d);return c.promise};q.after=function(d,c){void 0===c&&(c=null);var f=0,e=new a(function(){f&&(clearTimeout(f),f=0)});
f=setTimeout(function(){e.resolve(c)},d);return e.promise};q.timeout=function(d,c,f){var e=0,l=new a(d.cancel);d.then(function(n){l.isFulfilled()||(l.resolve(n),e&&(clearTimeout(e),e=0))});d.catch(function(n){l.isFulfilled()||(l.reject(n),e&&(clearTimeout(e),e=0))});e=setTimeout(function(){var n=f||new h("promiseUtils:timeout","The wrapped promise did not resolve within "+c+" ms");l.reject(n)},c);return l.promise};q.wrapCallback=function(d){var c=!1,f=new a(function(){return c=!0});d(function(e){c||
f.resolve(e)});return f.promise};q.isThenable=function(d){return d&&"function"===typeof d.then};q.when=function(d){return b(d)}})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(m,q,a,b){var g=m.some;return function(h){var k,d;q.isArray(h)?d=h:h&&"object"===typeof h&&(k=h);var c=[];if(k){d=[];for(var f in k)Object.hasOwnProperty.call(k,f)&&(c.push(f),d.push(k[f]));var e={}}else d&&(e=[]);if(!d||!d.length)return(new a).resolve(e);var l=new a;
l.promise.always(function(){e=c=null});var n=d.length;g(d,function(r,t){k||c.push(t);b(r,function(w){l.isFulfilled()||(e[c[t]]=w,0===--n&&l.resolve(e))},l.reject);return l.isFulfilled()});return l.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(m,q,a,b,g){m=function(h){function k(d,c,f){var e=h.call(this,d,c,f)||this;return e instanceof k?e:new k(d,c,f)}a(k,h);k.prototype.toJSON=function(){return{name:this.name,
message:this.message,details:b.clone(this.details),dojoType:this.dojoType}};k.fromJSON=function(d){var c=new k(d.name,d.message,d.details);null!=d.dojoType&&(c.dojoType=d.dojoType);return c};return k}(g);m.prototype.type="error";return m})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,a){q.__proto__=a}||function(q,a){for(var b in a)a.hasOwnProperty(b)&&(q[b]=a[b])};return function(q,
a){function b(){this.constructor=q}m(q,a);q.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(m,q,a,b,g,h){function k(r){return void 0!==r&&null!==r}function d(r){return k(r)?r:""}function c(r,t,w){var v=w.match(/([^\(]+)(\([^\)]+\))?/i),y=q.trim(v[1]);w=t[r];v=JSON.parse((v[2]?q.trim(v[2]):"{}").replace(/^\(/,
"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,'$1"$2":').replace(/"\s*:\s*'/gi,'":"').replace(/'\s*(,|\})/gi,'"$1'));var x=v.utcOffset;if(-1===l.indexOf(y))y=q.getObject(y),q.isFunction(y)&&(w=y(w,r,t,v));else if("number"===typeof w||"string"===typeof w&&w&&!isNaN(Number(w)))switch(w=Number(w),y){case "NumberFormat":r=q.mixin({},v);t=parseFloat(r.places);if(isNaN(t)||0>t)r.places=Infinity;return b.format(w,r);case "DateString":w=new Date(w);if(v.local||v.systemLocale)return v.systemLocale?
w.toLocaleDateString()+(v.hideTime?"":" "+w.toLocaleTimeString()):w.toDateString()+(v.hideTime?"":" "+w.toTimeString());w=w.toUTCString();v.hideTime&&(w=w.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return w;case "DateFormat":return w=new Date(w),k(x)&&(w=a.add(w,"minute",w.getTimezoneOffset()-x)),g.format(w,v)}return d(w)}function f(r,t){var w;if(t)for(w in r)r.hasOwnProperty(w)&&(void 0===r[w]?delete r[w]:r[w]instanceof Object&&f(r[w],!0));else for(w in r)r.hasOwnProperty(w)&&void 0===r[w]&&delete r[w];
return r}function e(r){if(!r||"object"!=typeof r||q.isFunction(r))return r;if(r instanceof Int8Array||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Int32Array||r instanceof Uint16Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array||r instanceof Date)return new r.constructor(r);if(r instanceof ArrayBuffer)return r.slice(0,r.byteLength);if("function"===typeof r.clone)r=r.clone();else if("function"===typeof r.map&&"function"===
typeof r.forEach)r=r.map(e);else if("function"===typeof r.notifyChange&&"function"===typeof r.watch)r=r.clone();else{var t={},w,v={};for(w in r){var y=r[w];var x=!(w in v)||v[w]!==y;if(!(w in t)||t[w]!==y&&x)t[w]=e?e(y):y}r=t}return r}var l=["NumberFormat","DateString","DateFormat"],n=/<\/?[^>]+>/g;return{equals:function(r,t){return r===t||"number"===typeof r&&isNaN(r)&&"number"===typeof t&&isNaN(t)||q.isFunction((r||{}).getTime)&&q.isFunction((t||{}).getTime)&&r.getTime()==t.getTime()||q.isFunction((r||
{}).equals)&&r.equals(t)||q.isFunction((t||{}).equals)&&t.equals(r)||!1},mixin:q.mixin,valueOf:function(r,t){for(var w in r)if(r[w]==t)return w;return null},stripTags:function(r){if(r){var t=typeof r;if("string"===t)r=r.replace(n,"");else if("object"===t)for(var w in r)(t=r[w])&&"string"===typeof t&&(t=t.replace(n,"")),r[w]=t}return r},substitute:function(r,t,w){if(k(w))if(q.isObject(w)){var v=w.first;var y=w.dateFormat;var x=w.numberFormat}else v=w;if(t&&"{*}"!==t)return q.replace(t,q.hitch({obj:r},
function(p,z){p=z.split(":");return 1<p.length?(z=p[0],p.shift(),c(z,this.obj,p.join(":"))):y&&-1!==(y.properties||[]).indexOf(z)?c(z,this.obj,y.formatter||"DateString"):x&&-1!==(x.properties||[]).indexOf(z)?c(z,this.obj,x.formatter||"NumberFormat"):d(this.obj[z])}));t=[];var B;t.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+h.fieldsSummary+'"\x3e\x3ctbody\x3e');for(B in r)if(w=r[B],y&&-1!==(y.properties||[]).indexOf(B)?w=c(B,r,y.formatter||"DateString"):x&&-1!==(x.properties||[]).indexOf(B)&&
(w=c(B,r,x.formatter||"NumberFormat")),t.push("\x3ctr\x3e\x3cth\x3e"+B+"\x3c/th\x3e\x3ctd\x3e"+d(w)+"\x3c/td\x3e\x3c/tr\x3e"),v)break;t.push("\x3c/tbody\x3e\x3c/table\x3e");return t.join("")},filter:function(r,t,w){t=[q.isString(r)?r.split(""):r,w||m.global,q.isString(t)?new Function("item","index","array",t):t];w={};var v;r=t[0];for(v in r)t[2].call(t[v],r[v],v,r)&&(w[v]=r[v]);return w},startsWith:function(r,t,w){w=w||0;return r.indexOf(t,w)===w},endsWith:function(r,t,w){if("number"!==typeof w||
!isFinite(w)||Math.floor(w)!==w||w>r.length)w=r.length;w-=t.length;r=r.indexOf(t,w);return-1!==r&&r===w},isDefined:k,fixJson:f,clone:e}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(m,q,a){return function(){function b(g,h,k){this instanceof b&&(this.name=g,this.message=h&&a.substitute(h,k,function(d){return null==d?"":d})||"",this.details=k)}b.prototype.toString=function(){return"["+this.name+"]: "+this.message};return b}()})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require",
"exports","esri/urlUtils","dojo/_base/url"],function(m,q,a,b){function g(B){return a.normalize(B)}function h(B){return"data:"===B.slice(0,5)}function k(B){return d(B)||y.test(B)}function d(B){return B&&"/"===B[0]&&"/"===B[1]}function c(B){return a.urlToObject(B)}function f(B){if("string"===typeof B)return new b(l(B));B.scheme||(B.scheme=q.appUrl.scheme);return B}function e(B){if(h(B))return null;var p=B.indexOf("://");if(-1===p&&d(B))p=2;else if(-1!==p)p+=3;else return null;p=B.indexOf("/",p);return-1===
p?B:B.slice(0,p)}function l(B,p,z){void 0===p&&(p=q.appBaseUrl);if(d(B))return z&&z.preserveProtocolRelative?B:"http"===q.appUrl.scheme&&q.appUrl.authority===e(B).slice(2)?"http:"+B:"https:"+B;if(y.test(B))return B;"/"===B[0]&&(z=p.indexOf("//"),z=p.indexOf("/",z+2),p=-1===z?p:p.slice(0,z));return r(p,B)}function n(B,p,z){void 0===z&&(z=!1);B=f(B);p=f(p);return z||B.scheme===p.scheme?B.host.toLowerCase()===p.host.toLowerCase()&&B.port===p.port:!1}function r(){for(var B=[],p=0;p<arguments.length;p++)B[p]=
arguments[p];if(B&&B.length){p=[];if(k(B[0])){var z=B[0],u=z.indexOf("//");p.push(z.slice(0,u+1));v.test(B[0])&&(p[0]+="/");B[0]=z.slice(u+2)}else"/"===B[0][0]&&p.push("");B=B.reduce(function(D,I){return I?D.concat(I.split("/")):D},[]);for(z=0;z<B.length;z++)u=B[z],".."===u&&0<p.length?p.pop():!u||"."===u&&0!==p.length||p.push(u);return p.join("/")}}function t(B,p,z){if(!(p&&z&&B&&k(B)))return B;var u=B.indexOf("//"),D=B.indexOf("/",u+2),I=B.indexOf(":",u+2);D=Math.min(0>D?B.length:D,0>I?B.length:
I);if(B.slice(u+2,D).toLowerCase()!==p.toLowerCase())return B;p=B.slice(0,u+2);B=B.slice(D);return""+p+z+B}function w(B,p,z){void 0===p&&(p=q.appBaseUrl);if(!k(B))return B;var u=g(B),D=u.toLowerCase();p=g(p).toLowerCase().replace(/\/+$/,"");if((z=z?g(z).toLowerCase().replace(/\/+$/,""):null)&&0!==p.indexOf(z))return B;for(var I=function(G,H,L){L=G.indexOf(H,L);return-1===L?G.length:L},C=I(D,"/",D.indexOf("//")+2),E=-1;D.slice(0,C+1)===p.slice(0,C)+"/";){E=C+1;if(C===D.length)break;C=I(D,"/",C+1)}if(-1===
E||z&&E<z.length)return B;B=u.slice(E);u=p.slice(E-1).replace(/[^/]+/g,"").length;if(0<u)for(D=0;D<u;D++)B="../"+B;else B="./"+B;return B}Object.defineProperty(q,"__esModule",{value:!0});q.normalize=g;q.canUseXhr=function(B){return a.canUseXhr(B)};q.removeTrailingSlash=function(B){return B.replace(/\/+$/,"")};m=Function("return this")();q.appUrl=new b(m.location);q.appBaseUrl=function(){var B=q.appUrl.path;B=B.substring(0,B.lastIndexOf(B.split("/")[B.split("/").length-1]));return q.appUrl.scheme+
"://"+q.appUrl.host+(null!=q.appUrl.port?":"+q.appUrl.port:"")+B}();var v=/^\s*file:/i,y=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;q.isDataProtocol=h;q.isAbsolute=k;q.isProtocolRelative=d;q.urlToObject=c;q.getOrigin=e;q.makeAbsolute=l;q.hasSameOrigin=n;q.join=r;q.removeFile=function(B){var p=0;if(k(B)){var z=B.indexOf("//");-1!==z&&(p=z+2)}z=B.lastIndexOf("/");return z<p?B:B.slice(0,z+1)};q.addProxy=function(B){return a.addProxy(B)};q.makeData=function(B){return B.isBase64?"data:"+B.mediaType+";base64,"+B.data:
"data:"+B.mediaType+","+B.data};var x=/^data:(.*?)(;base64)?,(.*)$/;q.dataComponents=function(B){return(B=B.match(x))?{mediaType:B[1],isBase64:!!B[2],data:B[3]}:null};q.changeDomain=t;q.read=function(B,p){var z=p&&p.url&&p.url.path;B&&z&&(B=l(B,z,{preserveProtocolRelative:!0}));(p=p&&p.portal)&&!p.isPortal&&p.urlKey&&p.customBaseUrl?(z=p.urlKey+"."+p.customBaseUrl,p=n(q.appUrl,q.appUrl.scheme+"://"+z)?t(B,p.portalHostname,z):t(B,z,p.portalHostname)):p=B;return p};q.write=function(B,p){if(!B)return B;
!k(B)&&p&&p.blockedRelativeUrls&&p.blockedRelativeUrls.push(B);var z=l(B);if(p){var u=p.verifyItemRelativeUrls&&p.verifyItemRelativeUrls.rootPath||p.url&&p.url.path;u&&(z=w(z,u,u),z!==B&&p.verifyItemRelativeUrls&&p.verifyItemRelativeUrls.writtenUrls.push(z))}B=z;z=(p=p&&p.portal)&&!p.isPortal&&p.urlKey&&p.customBaseUrl?t(B,p.urlKey+"."+p.customBaseUrl,p.portalHostname):B;return z};q.makeRelative=w;q.removeQueryParameters=function(B){B=c(B);Object.keys(B.query||{});return B.path}})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require",
"exports","./WKIDUnitConversion"],function(m,q,a){function b(c){return c.wkid&&!0===g[c.wkid]}Object.defineProperty(q,"__esModule",{value:!0});var g={102113:!0,102100:!0,3857:!0,3785:!0},h={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};m=[-2.0037508342788905E7,2.0037508342788905E7];var k=[-2.0037508342787E7,2.0037508342787E7],d={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:m,origin:k,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:m,origin:k,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:m,origin:k,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:m,origin:k,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};q.equals=function(c,f){if(f){if(c===f)return!0;if(null!=c.wkid||null!=f.wkid)return c.wkid===f.wkid||b(c)&&b(f)||null!=f.latestWkid&&c.wkid===f.latestWkid||null!=c.latestWkid&&f.wkid===c.latestWkid;if(c.wkt&&f.wkt)return c.wkt.toUpperCase()===f.wkt.toUpperCase()}return!1};q.getInfo=function(c){return c.wkid?d[c.wkid]:null};q.isGeographic=function(c){return c.wkid?null==a[c.wkid]:c.wkt?!!/^\s*GEOGCS/i.test(c.wkt):!1};q.isWGS84=function(c){return 4326===
c.wkid};q.isWebMercator=b;q.isWrappable=function(c){return c.wkid&&!0===h[c.wkid]}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define(["esri/WKIDUnitConversion"],function(m){return m})},"esri/layers/vectorTiles/layers/support/vectorTileLayerLoader":function(){define("require exports ../../core/tsSupport/assignHelper ../../config ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),function(m,q,a,b,g,h,k){function d(l){l&&(l=k.getOrigin(l),k.canUseXhr(l)||
-1!==e.indexOf(l)||e.push(l))}function c(){for(var l=[],n=0;n<arguments.length;n++)l[n]=arguments[n];n=void 0;for(var r=0;r<l.length;++r)k.isProtocolRelative(l[r])?n&&(n=n.split("://")[0]+":"+l[r].trim()):n=k.isAbsolute(l[r])?l[r]:k.join(n,l[r]);return n}function f(l,n,r){var t;if("string"===typeof n){n=k.normalize(n);d(n);var w=k.urlToObject(n);w=g(w.path,{query:{f:"json"},responseType:"json"});var v=t=n}else w=h.resolve({data:n}),t=n.jsonUrl||null,v=r;return w.then(function(y){var x=y.data;y.ssl&&
(t&&(t=t.replace(/^http:/i,"https:")),v&&(v=v.replace(/^http:/i,"https:")));if(x.sources){l.styleUrl=t||null;y=v?k.removeFile(v):k.appBaseUrl;l.styleBase=y;l.style=x;l.styleUrl&&d(l.styleUrl);if(l.source)x=h.resolve();else{b:if(x=x.sources,x.esri)x=x.esri;else{for(var B=0,p=Object.keys(x);B<p.length;B++){var z=p[B];if("vector"===x[z].type){x=x[z];break b}}x=null}x=x.url?f(l,c(y,x.url)):f(l,x,y)}return x}if(x.sources)return h.reject("You must specify the URL or the JSON for a service or for a style.");
l.sourceUrl=t||null;y=v?k.removeTrailingSlash(v)+"/":k.appBaseUrl;l.sourceBase=y;l.source=x;if(x.hasOwnProperty("tileInfo"))B=x;else{B={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}};z=(B.xmax-B.xmin)/512;p=[];for(var u=x.hasOwnProperty("minzoom")?parseFloat(x.minzoom):0,D=x.hasOwnProperty("maxzoom")?parseFloat(x.maxzoom):16;u<D;u++){var I=z/Math.pow(2,u);p.push({level:u,scale:Math.floor(3779.527559055118*I),
resolution:I})}z=0;for(D=x.tiles;z<D.length;z++)d(c(y,D[z]));B={capabilities:"TilesOnly",initialExtent:B,fullExtent:B,minScale:p[0].scale,maxScale:p[p.length-1].scale,tiles:x.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:p,spatialReference:{wkid:102100}}}}l.validatedSource=B;l.sourceUrl&&d(l.sourceUrl);x=l.style?h.resolve():null==x.defaultStyles?h.reject():"string"===typeof x.defaultStyles?f(l,c(y,x.defaultStyles,"root.json")):f(l,x.defaultStyles,
c(y,"root.json"));return x})}Object.defineProperty(q,"__esModule",{value:!0});var e=b.defaults&&b.defaults.io.corsEnabledServers||b.request.corsEnabledServers;q.loadMetadata=function(l){var n={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null},r="string"===typeof l?[l,null]:[null,l.jsonUrl],t=r[0];r=r[1];var w=t?k.urlToObject(t):null;return f(n,l,r).then(function(){var v={layerDefinition:n.validatedSource,url:t,parsedUrl:w,serviceUrl:n.sourceUrl,
style:n.style,styleUrl:n.styleUrl,spriteUrl:n.style.sprite&&c(n.styleBase,n.style.sprite),glyphsUrl:n.style.glyphs&&c(n.styleBase,n.style.glyphs)};d(v.spriteUrl);d(v.glyphsUrl);return v})}})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(m){for(var q,a=1,b=arguments.length;a<b;a++){q=arguments[a];for(var g in q)Object.prototype.hasOwnProperty.call(q,g)&&(m[g]=q[g])}return m}})},"esri/layers/vectorTiles/config":function(){define(["require",
"exports","esri/config"],function(m,q,a){Object.defineProperty(a,"workers",{get:function(){return a.defaults.workers},set:function(b){return a.defaults.workers=b}});return a})},"esri/layers/vectorTiles/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/io-query ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUMap ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t,w){var v=e.getLogger("esri.layers.support.TilemapCache");return function(y){function x(B){B=y.call(this)||this;B._handles=new f;B._pendingTilemapRequests={};B._availableLevels={};B.levels=5;B.cacheByteSize=2097152;B.request=k;return B}b(x,y);x.prototype.initialize=function(){var B=this;this._tilemapCache=new l(this.cacheByteSize,{sizeOfFunction:function(p){return p.byteSize}});this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers"],function(){return B._initializeTilemapDefinition()}),
r.init(this,"layer.tileInfo.lods",function(p){return B._initializeAvailableLevels(p)},!0)]);this._initializeTilemapDefinition()};x.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};x.prototype.castLevels=function(B){return 2>=B?(v.error("Minimum levels for Tilemap is 3, but got ",B),3):B};Object.defineProperty(x.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0});x.prototype.getTilemap=function(B,p,z){return this._tilemapFromCache(B,
p,z,this._tmpTilemapDefinition)};x.prototype.fetchTilemap=function(B,p,z,u){var D=this;if(!this._availableLevels[B])return n.reject(new c("tilemap-cache:level-unavailable","Level "+B+" is unavailable in the service"));var I=this._tmpTilemapDefinition;if(B=this._tilemapFromCache(B,p,z,I))return n.resolve(B);var C=w.tilemapDefinitionId(I),E=this._pendingTilemapRequests[C];E||(E=w.Tilemap.fromDefinition(I,u).then(function(G){D._tilemapCache.set(C,G);delete D._pendingTilemapRequests[C];return G}).catch(function(G){delete D._pendingTilemapRequests[C];
return n.reject(G)}),this._pendingTilemapRequests[C]=E);return n.create(function(G,H){E.then(G,H)})};x.prototype.getAvailability=function(B,p,z){return this._availableLevels[B]?(B=this.getTilemap(B,p,z))?B.getAvailability(p,z):"unknown":"unavailable"};x.prototype.getAvailabilityUpsample=function(B,p,z,u){u.level=B;u.row=p;u.col=z;B=this.layer.tileInfo;for(B.updateTileInfo(u);;)if(p=this.getAvailability(u.level,u.row,u.col),"unavailable"===p){if(!B.upsampleTile(u))return"unavailable"}else return p};
x.prototype.fetchAvailability=function(B,p,z,u){return this._availableLevels[B]?this.fetchTilemap(B,p,z,u).always(function(D){return D instanceof w.Tilemap?(D=D.getAvailability(p,z),"unavailable"===D?n.reject(new c("tile-map:tile-unavailable","Tile is not available",{level:B,row:p,col:z})):D):D&&"cancel"===D.dojoType?n.reject(D):"unknown"}):n.reject(new c("tilemap-cache:level-unavailable","Level "+B+" is unavailable in the service"))};x.prototype.fetchAvailabilityUpsample=function(B,p,z,u,D){var I=
this;u.level=B;u.row=p;u.col=z;var C=this.layer.tileInfo;C.updateTileInfo(u);return this.fetchAvailability(B,p,z,D).catch(function(E){return E&&"cancel"===E.dojoType?n.reject(E):C.upsampleTile(u)?I.fetchAvailabilityUpsample(u.level,u.row,u.col,u):n.reject(E)})};x.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var B=this.layer.parsedUrl,p=B.query;p&&p.token||!this.layer.token||(p=a({},p,{token:this.layer.token}));this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:B.path,
query:p?h.objectToQuery(p):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};x.prototype._tilemapFromCache=function(B,p,z,u){B=this._getTilemapDefinition(B,p,z,u);B=w.tilemapDefinitionId(B);return this._tilemapCache.get(B)};x.prototype._getTilemapDefinition=function(B,p,z,u){u.level=B;u.row=p-p%this.size;u.col=z-z%this.size;return u};x.prototype._initializeAvailableLevels=function(B){var p=this;this._availableLevels=
{};B&&B.forEach(function(z){return p._availableLevels[z.level]=!0})};g([t.property({constructOnly:!0,type:Number})],x.prototype,"levels",void 0);g([t.cast("levels")],x.prototype,"castLevels",null);g([t.property({readOnly:!0,dependsOn:["levels"],type:Number})],x.prototype,"size",null);g([t.property({constructOnly:!0,type:Number})],x.prototype,"cacheByteSize",void 0);g([t.property({constructOnly:!0})],x.prototype,"layer",void 0);g([t.property({constructOnly:!0})],x.prototype,"request",void 0);return x=
g([t.subclass("esri.layers.support.TilemapCache")],x)}(t.declared(d))})},"esri/layers/vectorTiles/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(m,q){return function(a,b){a.__bases__=b.__bases__}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(m,q,a,b){var g=arguments.length,h=3>g?q:null===b?b=Object.getOwnPropertyDescriptor(q,a):b,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=
Reflect.decorate(m,q,a,b);else for(var d=m.length-1;0<=d;d--)if(k=m[d])h=(3>g?k(h):3<g?k(q,a,h):k(q,a))||h;return 3<g&&h&&Object.defineProperty(q,a,h),h}})},"esri/layers/vectorTiles/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(m,q,a,b,g,h){q=q.default;m.before(function(d,c){m.hasMixin(d,k)&&b.processPrototype(c)});m.after(function(d){m.hasMixin(d,k)&&
(b.processClass(d),Object.defineProperties(d.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var k=m(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===k)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");
Object.defineProperty(this,"__accessor__",{value:new q(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var d=[],c=0;c<arguments.length;c++)d.push(arguments[c]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,d)}},__accessor__:null,postscript:function(d){var c=this.__accessor__;d=c.ctorArgs||d;if(null!=this.getDefaults){var f=this.getDefaults(d||{});this.set(f)}c.initialize();d&&(this.set(d),c.ctorArgs=null);c.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(d){}else h.removeTarget(this),this.__accessor__.destroy()},get:function(d){return a.get(this,d)},hasOwnProperty:function(d){return this.__accessor__?this.__accessor__.has(d):Object.prototype.hasOwnProperty.call(this,d)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(d,c){g.set(this,d,c);return this},watch:function(d,c,f){return h.watch(this,d,c,f)},_clearOverride:function(d){return this.__accessor__.clearOverride(d)},_override:function(d,c){return this.__accessor__.override(d,
c)},_isOverridden:function(d){return this.__accessor__.isOverridden(d)},notifyChange:function(d){this.__accessor__.propertyInvalidated(d)},_get:function(d){return this.__accessor__.internalGet(d)},_set:function(d,c){return this.__accessor__.internalSet(d,c)}});return k})},"esri/layers/vectorTiles/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(m,q,a){function b(d,c){d&&!Array.isArray(d)&&"function"!==typeof d&&(c=d,d=null);d=d||[];c=c||{};return g([this].concat(d),
c)}function g(d,c){d&&!Array.isArray(d)&&"function"!==typeof d&&(c=d,d=null);"function"===typeof d?d=[d]:d||(d=[]);c=c||{};var f;var e=0;for(f=h.length;e<f;e++)h[e](d,c);d=a(d,c);d.createSubclass=b;e=0;for(f=k.length;e<f;e++)k[e](d);return d}var h=[],k=[];(function(d){d.hasMixin=function(c,f){c=Array.isArray(c)?c.reduce(function(l,n){return n._meta?l.concat(n._meta.bases):l},[]):c._meta?c._meta.bases:c;if(!c)return!1;if("string"===typeof f)for(var e=c.length-1;0<=e;e--)if(c[e].prototype.declaredClass===
f)return!0;return-1!==c.indexOf(f)};d.safeMixin=function(c,f){return a.safeMixin(c,f)};d.before=function(c){h.push(c)};d.after=function(c){k.push(c)}})(g||(g={}));return g})},"esri/layers/vectorTiles/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(m,q,a,b,g,h,k){Object.defineProperty(q,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.Properties");m=function(){function d(c){this.host=c;
this._origin=h.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new k.default;c=this.host.constructor.__accessorMetadata__;this.metadatas=c.properties;this.autoDestroy=c.autoDestroy}d.prototype.initialize=function(){this.lifecycle=1;g.instanceCreated(this.host,this.metadatas)};d.prototype.constructed=function(){this.lifecycle=2};d.prototype.destroy=function(){this.destroyed=!0;var c=this.cursors;if(this.cursors)for(var f=
0,e=Object.getOwnPropertyNames(c);f<e.length;f++){var l=e[f],n=c[l];if(n){for(;0<n.length;)n.pop().propertyDestroyed(this,l);c[l]=null}}if(this.autoDestroy)for(l in this.metadatas)(c=this.internalGet(l))&&c&&"function"===typeof c.destroy&&(c.destroy(),this.metadatas[l].nonNullable||this.internalSet(l,null))};Object.defineProperty(d.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});d.prototype.clearOverride=function(c){this.isOverridden(c)&&(this.overridden[c]=
!1,this.propertyInvalidated(c))};d.prototype.get=function(c){var f=this.metadatas[c];if(this.store.has(c)&&!this.dirties[c])return this.store.get(c);var e=f.get;return e?(f=e.call(this.host),this.store.set(c,f,h.OriginId.COMPUTED),this.propertyCommitted(c),f):f.value};d.prototype.originOf=function(c){var f=this.store.originOf(c);return void 0===f&&(c=this.metadatas[c])&&c.hasOwnProperty("value")?"defaults":h.idToName(f)};d.prototype.has=function(c){return this.metadatas[c]?this.store.has(c):!1};d.prototype.internalGet=
function(c){if(this.metadatas[c]){var f=this.store;return f.has(c)?f.get(c):this.metadatas[c].value}};d.prototype.internalSet=function(c,f){this.metadatas[c]&&(this.propertyInvalidated(c),this.initialized?this.store.set(c,f,this._origin):this.store.set(c,f,h.OriginId.DEFAULTS),this.propertyCommitted(c))};d.prototype.isOverridden=function(c){return null!=this.overridden&&!0===this.overridden[c]};d.prototype.keys=function(){return this.store.keys()};d.prototype.override=function(c,f){if(this.metadatas[c]){this.overridden||
(this.overridden={});var e=this.metadatas[c];e.nonNullable&&null==f||((e=e.cast)&&(f=e.call(this.host,f)),this.overridden[c]=!0,this.internalSet(c,f))}};d.prototype.set=function(c,f){if(this.metadatas[c]){var e=this.metadatas[c];if(!e.nonNullable||null!=f){var l=e.set;(e=e.cast)&&(f=e.call(this.host,f));l?l.call(this.host,f):this.internalSet(c,f)}}};d.prototype.setDefaultOrigin=function(c){this._origin=h.nameToId(c)};d.prototype.propertyInvalidated=function(c){var f=this.dirties,e=this.isOverridden(c),
l=this.cursors&&this.cursors[c],n=this.metadatas[c].computes;if(l)for(var r=0;r<l.length;r++)l[r].propertyInvalidated(this,c);e||(f[c]=!0);if(n)for(c=0;c<n.length;c++)this.propertyInvalidated(n[c])};d.prototype.propertyCommitted=function(c){var f=this.cursors&&this.cursors[c];this.dirties[c]=!1;if(f)for(var e=0;e<f.length;e++)f[e].propertyCommitted(this,c)};d.prototype.addCursor=function(c,f){this.cursors||(this.cursors={});var e=this.cursors[c];e||(this.cursors[c]=e=[]);e.push(f)};d.prototype.removeCursor=
function(c,f){var e=this.cursors[c];this.cursors[c]&&(e.splice(e.indexOf(f),1),0===e.length&&(this.cursors[c]=null))};return d}();q.default=m})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(m,q,a){var b={info:0,warn:1,error:2};m=function(){function g(h){void 0===h&&(h={});this.module=h.module||"";this.writer=h.writer||null;this.level=h.level||null;null!=h.enabled&&(this.enabled=!!h.enabled);g._loggers[this.module]=this;h=this.module.lastIndexOf(".");
-1!==h&&(this.parent=g.getLogger(this.module.slice(0,h)))}g.prototype.log=function(h){for(var k=[],d=1;d<arguments.length;d++)k[d-1]=arguments[d];this._isEnabled()&&this._matchLevel(h)&&(d=this._inheritedWriter())&&d.apply(void 0,[h,this.module].concat(k))};g.prototype.error=function(){for(var h=[],k=0;k<arguments.length;k++)h[k]=arguments[k];this.log.apply(this,["error"].concat(h))};g.prototype.warn=function(){for(var h=[],k=0;k<arguments.length;k++)h[k]=arguments[k];this.log.apply(this,["warn"].concat(h))};
g.prototype.info=function(){for(var h=[],k=0;k<arguments.length;k++)h[k]=arguments[k];this.log.apply(this,["info"].concat(h))};g.prototype.getLogger=function(h){return g.getLogger(this.module+"."+h)};g.getLogger=function(h){var k=g._loggers[h];k||(k=new g({module:h}));return k};g.prototype._parentWithMember=function(h,k){for(var d=this;d&&null==d[h];)d=d.parent;return d?d[h]:k};g.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};g.prototype._consoleWriter=
function(h,k){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];console[h].apply(console,["["+k+"]"].concat(d))};g.prototype._matchLevel=function(h){return b[this._parentWithMember("level","error")]<=b[h]};g.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};g._loggers={};return g}();m.getLogger("esri").level="warn";return m})},"esri/layers/vectorTiles/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty",
"./extensions/serializableProperty"],function(m,q,a,b,g){Object.defineProperty(q,"__esModule",{value:!0});var h=[a.default,b.default,g.default];q.processPrototypeMetadatas=function(k,d){for(var c=Object.getOwnPropertyNames(k),f=0;f<h.length;f++){var e=h[f];if(e.processPrototypePropertyMetadata)for(var l=0,n=c;l<n.length;l++){var r=n[l];e.processPrototypePropertyMetadata(r,k[r],k,d)}}};q.processClassMetadatas=function(k,d){for(var c=Object.getOwnPropertyNames(k),f=0;f<h.length;f++){var e=h[f];if(e.processClassPropertyMetadata)for(var l=
0,n=c;l<n.length;l++){var r=n[l];e.processClassPropertyMetadata(r,k[r],k,d)}}};q.instanceCreated=function(k,d){for(var c=Object.getOwnPropertyNames(d),f=0;f<h.length;f++){var e=h[f];e.instanceCreated&&e.instanceCreated(k,d,c)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(m,q,a,b,g,h,k){function d(c,f,e){var l=h.getProperties(c);return k.wire(c,e.aliasOf,function(){l.propertyInvalidated(f)})}
Object.defineProperty(q,"__esModule",{value:!0});q.AliasedPropertyExtension={processClassPropertyMetadata:function(c,f,e,l){var n=f.aliasOf;if(n&&(c=n.split(".")[0],null!=e[c]&&!f.set&&!f.get)){var r;f.get=function(){var t=b.default(this,n);if("function"===typeof t){r||(r=n.split(".").slice(0,-1).join("."));var w=b.default(this,r);w&&(t=t.bind(w))}return t};f.readOnly||(f.set=function(t){return g.default(this,n,t)})}},instanceCreated:function(c,f,e){for(var l=0;l<e.length;l++){var n=e[l],r=f[n];r.aliasOf&&
d(c,n,r)}}};q.default=q.AliasedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(m,q,a){function b(d,c,f){if(null!=f.getItemAt||Array.isArray(f)){var e=parseInt(d,10);if(!isNaN(e))return Array.isArray(f)?f[e]:f.getItemAt(e)}e=a.getProperties(f);return c?a.isPropertyDeclared(e,d)?e.get(d):f[d]:a.isPropertyDeclared(e,d)?e.internalGet(d):f[d]}function g(d,c,f,e){if(null==d)return d;if((d=b(c[e],f,d))||!(e<c.length-1))return e===
c.length-1?d:g(d,c,f,e+1)}function h(d,c,f,e){void 0===f&&(f=!1);void 0===e&&(e=0);return"string"===typeof c&&-1===c.indexOf(".")?b(c,f,d):g(d,a.pathToArray(c),f,e)}function k(d,c){return h(d,c,!0)}Object.defineProperty(q,"__esModule",{value:!0});q.valueOf=h;q.get=k;q.exists=function(d,c){return void 0!==h(c,d,!0)};q.default=k})},"esri/layers/vectorTiles/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(m,q,a){function b(d,c){return c?Object.keys(c).reduce(function(f,
e){if("value"===e)return f[e]=c[e],f;if(void 0===f[e])return f[e]=a.clone(c[e]),f;var l=f[e],n=c[e];if(l===n)return f;if(Array.isArray(n)||Array.isArray(f))l=l?Array.isArray(l)?f[e]=l.concat():f[e]=[l]:f[e]=[],n&&(Array.isArray(n)||(n=[n]),n.forEach(function(r){-1===l.indexOf(r)&&l.push(r)}));else if(n&&"object"===typeof n)f[e]=b(l,n);else if(!f.hasOwnProperty(e)||c.hasOwnProperty(e))f[e]=n;return f},d||{}):d}function g(d){return Array.isArray(d)?d:d.split(".")}function h(d){if(Array.isArray(d)||
-1<d.indexOf(",")){d=Array.isArray(d)?d:d.split(",");for(var c=0;c<d.length;c++)d[c]=d[c].trim();return 1===d.length?d[0]:d}return d.trim()}function k(d){var c=!1;return function(){c||(c=!0,d())}}Object.defineProperty(q,"__esModule",{value:!0});q.getProperties=function(d){return d?d.__accessor__?d.__accessor__:d.propertyInvalidated?d:null:null};q.isPropertyDeclared=function(d,c){return d&&d.metadatas&&null!=d.metadatas[c]};q.merge=b;q.pathToStringOrArray=function(d){return d?"string"===typeof d&&
-1===d.indexOf(".")?d:g(d):d};q.pathToArray=g;q.splitPath=h;q.parse=function(d,c,f,e){c=h(c);if(Array.isArray(c)){var l=c.map(function(n){return e(d,n.trim(),f)});return{remove:k(function(){return l.forEach(function(n){return n.remove()})})}}return e(d,c.trim(),f)};q.once=k})},"esri/layers/vectorTiles/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(m,q,a,b,g){function h(k,d,c){if(k&&d)if("object"===typeof d){c=0;for(var f=Object.getOwnPropertyNames(d);c<
f.length;c++){var e=f[c];h(k,e,d[e])}}else"_"!==d[0]&&(-1!==d.indexOf(".")?(d=d.split("."),e=d.splice(d.length-1,1)[0],h(g.default(k,d),e,c)):k[d]=c)}Object.defineProperty(q,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.set");q.set=h;q.default=h})},"esri/layers/vectorTiles/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(m,q,a){function b(f,e,l){e=a.splitPath(e);if(Array.isArray(e)){for(var n=[],r=0;r<e.length;r++)n.push((new g(e[r],l)).install(f));
return new d(n)}f=(new g(e,l)).install(f);return new c(f)}Object.defineProperty(q,"__esModule",{value:!0});var g=function(){function f(e,l){this.path=e;this.callback=l;this.chain=null;this.path=e;-1<e.indexOf(".")&&(this.chain=a.pathToArray(e));this.callback=l;return this}f.prototype.install=function(e){e=this.chain?new k(this,e):new h(this,e);return e};f.prototype.notify=function(e){this.callback(e,this.path)};return f}(),h=function(){function f(e,l){this.binding=e;this.target=l;a.getProperties(l).addCursor(this.binding.path,
this)}f.prototype.destroy=function(){this.target&&(a.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};f.prototype.propertyDestroyed=function(e,l){a.getProperties(this.target).removeCursor(l,this)};f.prototype.propertyInvalidated=function(e,l){this.binding&&this.binding.notify(this.target)};f.prototype.propertyCommitted=function(e,l){this.binding&&this.binding.notify(this.target)};return f}(),k=function(){function f(e,l){this.binding=e;this.target=l;this.stack=
[];this.properties=a.getProperties(l);this.stack.push({properties:this.properties,propertyName:e.chain[0]});this.properties.addCursor(e.chain[0],this);this.moveForward();return this}f.prototype.destroy=function(){for(;;){var e=this.stack.pop();if(null==e)break;e.properties.removeCursor(e.propertyName,this)}this.target=this.binding=null};f.prototype.propertyDestroyed=function(e,l){this.moveBackward(e,l)};f.prototype.propertyInvalidated=function(e,l){this.binding&&this.binding.notify(this.target)};
f.prototype.propertyCommitted=function(e,l){this.binding&&(this.moveBackward(e,l),this.moveForward(),this.binding.notify(this.target))};f.prototype.moveBackward=function(e,l){for(var n=this.stack,r=n[n.length-1];r.properties!==e&&r.propertyName!==l;)r.properties.removeCursor(r.propertyName,this),n.pop(),r=n[n.length-1]};f.prototype.moveForward=function(){var e=this.stack,l=e[e.length-1];l=l.properties.internalGet(l.propertyName);(l=a.getProperties(l))&&e.length<this.binding.chain.length&&(e=this.binding.chain[e.length],
this.stack.push({properties:l,propertyName:e}),l.addCursor(e,this),this.moveForward())};return f}(),d=function(){function f(e){this.cursors=e}f.prototype.remove=function(){for(var e=this.cursors;0<e.length;)e.pop().destroy();this.cursors=null};return f}(),c=function(){function f(e){this.cursor=e}f.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return f}();q.create=function(f,e){f=a.splitPath(f);if(Array.isArray(f)){for(var l=[],n=0;n<f.length;n++)l.push(new g(f[n],e));return function(t){for(var w=
[],v=0;v<l.length;v++)w[v]=l[v].install(t);return new d(w)}}var r=new g(f,e);return function(t){return new c(r.install(t))}};q.wire=b;q.default=b})},"esri/layers/vectorTiles/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(m,q,a,b,g,h){Object.defineProperty(q,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.extensions.computedProperty");q.ComputedPropertyExtension={processClassPropertyMetadata:function(k,
d,c,f){d.dependsOn&&(c=void 0,c=d.dependsOn.slice())&&(d.wire=h.create(c,function(e){return g.getProperties(e).propertyInvalidated(k)}))},instanceCreated:function(k,d,c){for(var f=0;f<c.length;f++){var e=d[c[f]];e.wire&&e.wire(k)}}};q.default=q.ComputedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(m,q,a,b,g,h){function k(d,c,f){var e=d&&d.json;d&&d.json&&d.json.origins&&f&&(d=d.json.origins[f.origin])&&c in d&&(e=d);return e}Object.defineProperty(q,"__esModule",{value:!0});q.originSpecificReadPropertyDefinition=function(d,c){return k(d,"read",c)};q.originSpecificWritePropertyDefinition=function(d,c){return k(d,"write",c)};q.SerializablePropertyExtension={processPrototypePropertyMetadata:function(d,c,f,e){if(g.process(c)){a.process(c);f=c.type;for(e=0;Array.isArray(f);)f=f[0],e++;if(c.json.origins)for(var l in c.json.origins){var n=
c.json.origins[l];b.create(f,e,d,n);h.create(f,e,d,n)}b.create(f,e,d,c.json);h.create(f,e,d,c.json)}}};q.default=q.SerializablePropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.process=function(a){if(a.json&&a.json.origins){var b=a.json.origins,g={"web-document":["web-scene","web-map"]};a=function(k){if(b[k]){var d=b[k];g[k].forEach(function(c){b[c]=
d});delete b[k]}};for(var h in g)a(h)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(m,q,a,b){function g(l,n,r,t){if(1<n)return d(l,n);if(1===n)return c(l);if(f(l)){var w=c(l.prototype.itemType.Type);return function(v,y,x){return(v=w(v,y,x))?new l(v):v}}return h(l)}function h(l){return l.prototype.read?function(n,r,t){return null==n?n:(new l).read(n,t)}:l.fromJSON}function k(l,n,
r,t){return 0!==t&&Array.isArray(n)?n.map(function(w){return k(l,w,r,t-1)}):l(n,null,r)}function d(l,n){l=h(l);var r=k.bind(null,l);return function(t,w,v){if(null==t)return t;t=r(t,v,n);w=n;for(v=t;0<w&&Array.isArray(v);)w--,v=v[0];if(void 0!==v)for(v=0;v<w;v++)t=[t];return t}}function c(l){var n=h(l);return function(r,t,w){return null==r?r:Array.isArray(r)?r.map(function(v){return n(v,null,w)}):[n(r,null,w)]}}function f(l){return b.isCollection(l)?(l=l.prototype.itemType)&&l.Type&&"function"===typeof l.Type?
e(l.Type):!1:!1}function e(l){return!!l&&(!!l.prototype.read||!!l.fromJSON||f(l))}Object.defineProperty(q,"__esModule",{value:!0});q.create=function(l,n,r,t){(!t.read||!t.read.reader&&!1!==t.read.enabled)&&e(l)&&a.setDeepValue("read.reader",g(l,n,r,t),t)}})},"esri/layers/vectorTiles/core/object":function(){define(["require","exports"],function(m,q){function a(b,g,h){for(var k=0;k<b.length;k++){var d=b[k];if(!(d in h))if(g)h[d]={};else return;h=h[d]}return h}Object.defineProperty(q,"__esModule",{value:!0});
q.getDeepValue=function(b,g){return a(b.split("."),!1,g)};q.setDeepValue=function(b,g,h){var k=b.split(".");b=k.pop();(h=a(k,!0,h))&&b&&(h[b]=g)}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require",
"exports"],function(m,q){function a(g){"boolean"===typeof g.read?g.read={enabled:g.read}:"function"===typeof g.read?g.read={enabled:!0,reader:g.read}:g.read&&"object"===typeof g.read&&void 0===g.read.enabled&&(g.read.enabled=!0)}function b(g){"boolean"===typeof g.write?g.write={enabled:g.write}:"function"===typeof g.write?g.write={enabled:!0,writer:g.write}:g.write&&"object"===typeof g.write&&void 0===g.write.enabled&&(g.write.enabled=!0)}Object.defineProperty(q,"__esModule",{value:!0});q.process=
function(g){g.json||(g.json={});a(g.json);b(g.json);if(g.json.origins)for(var h in g.json.origins)a(g.json.origins[h]),b(g.json.origins[h]);return!0}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(m,q,a,b){function g(f,e,l,n){a.setDeepValue(l,h(f,n),e)}function h(f,e){return f=f&&"function"===typeof f.write?f.write({},e):f&&"function"===typeof f.toJSON?f.toJSON():"number"===typeof f?
-Infinity===f?-Number.MAX_VALUE:Infinity===f?Number.MAX_VALUE:isNaN(f)?null:f:f}function k(f,e,l,n){null===f?f=null:f&&"function"===typeof f.map?(f=f.map(function(r){return h(r,n)}),"function"===typeof f.toArray&&(f=f.toArray())):f=[h(f,n)];a.setDeepValue(l,f,e)}function d(f,e,l){return 0!==l&&Array.isArray(f)?f.map(function(n){return d(n,e,l-1)}):h(f,e)}function c(f){return function(e,l,n,r){if(null===e)e=null;else{e=d(e,r,f);r=f;for(var t=e;0<r&&Array.isArray(t);)r--,t=t[0];if(void 0!==t)for(t=
0;t<r;t++)e=[e]}a.setDeepValue(n,e,l)}}Object.defineProperty(q,"__esModule",{value:!0});q.create=function(f,e,l,n){n.write&&!n.write.writer&&!1!==n.write.enabled&&(1===e||b.isCollection(f)?n.write.writer=k:n.write.writer=1<e?c(e):g)}})},"esri/layers/vectorTiles/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(m,q){function a(h){switch(h){case "defaults":return g.DEFAULTS;case "service":return g.SERVICE;case "portal-item":return g.PORTAL_ITEM;case "web-scene":return g.WEB_SCENE;
case "web-map":return g.WEB_MAP;case "user":return g.USER}}function b(h){switch(h){case g.DEFAULTS:return"defaults";case g.SERVICE:return"service";case g.PORTAL_ITEM:return"portal-item";case g.WEB_SCENE:return"web-scene";case g.WEB_MAP:return"web-map";case g.USER:return"user"}}Object.defineProperty(q,"__esModule",{value:!0});var g;(function(h){h[h.DEFAULTS=0]="DEFAULTS";h[h.COMPUTED=1]="COMPUTED";h[h.SERVICE=2]="SERVICE";h[h.PORTAL_ITEM=3]="PORTAL_ITEM";h[h.WEB_SCENE=4]="WEB_SCENE";h[h.WEB_MAP=5]=
"WEB_MAP";h[h.USER=6]="USER";h[h.NUM=7]="NUM"})(g=q.OriginId||(q.OriginId={}));q.nameToId=a;q.idToName=b;q.readableNameToId=function(h){return a(h)};q.idToReadableName=function(h){return b(h)};q.writableNameToId=function(h){return a(h)};q.idToWritableName=function(h){return b(h)}})},"esri/layers/vectorTiles/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(m,q,a){Object.defineProperty(q,"__esModule",{value:!0});m=function(){function b(){this._values={}}
b.prototype.get=function(g){return this._values[g]};b.prototype.originOf=function(g){return a.OriginId.USER};b.prototype.keys=function(){return Object.keys(this._values)};b.prototype.set=function(g,h){this._values[g]=h};b.prototype.clear=function(g){delete this._values[g]};b.prototype.has=function(g){return g in this._values};return b}();q.default=m})},"esri/layers/vectorTiles/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(m,q,a,b,g,h,k,d){Object.defineProperty(q,"__esModule",{value:!0});var c=Object.prototype.hasOwnProperty,f=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,e={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},l=/^_(set|get)([a-zA-Z0-9]+)Attr$/;q.processPrototype=function(n){for(var r=n.declaredClass,t=n.properties||{},w=0,v=Object.getOwnPropertyNames(t);w<v.length;w++){var y=v[w],x=t[y],B=typeof x;null==x?h.setPropertyMetadata(n,y,{value:x}):
Array.isArray(x)?h.setPropertyMetadata(n,y,{type:[x[0]],value:null}):"object"===B?k.getProperties(x)||x instanceof Date?h.setPropertyMetadata(n,y,{type:x.constructor,value:x}):h.setPropertyMetadata(n,y,x):"boolean"===B?h.setPropertyMetadata(n,y,{type:Boolean,value:x}):"string"===B?h.setPropertyMetadata(n,y,{type:String,value:x}):"number"===B?h.setPropertyMetadata(n,y,{type:Number,value:x}):"function"===B&&h.setPropertyMetadata(n,y,{type:x,value:null})}w=0;for(v=Object.getOwnPropertyNames(n);w<v.length;w++){B=
v[w];x=n[B];t=y=void 0;var p=f.exec(B);if(p)y=p[1],t=e[p[2]];else if(p=l.exec(B))y=p[2][0].toLowerCase()+p[2].substr(1),t=p[1].toLowerCase();y&&t&&(y=h.getPropertyMetadata(n,y),a.setDeepValue(t,x,y))}w=0;for(v=Object.getOwnPropertyNames(h.getPropertiesMetadata(n));w<v.length;w++)if(y=v[w],x=h.getPropertyMetadata(n,y),t=x.type,B=x.types,void 0===x.value&&c.call(n,y)&&(x.value=n[y]),!x.cast&&t){y=x;x=0;for(B=t;Array.isArray(B);)B=B[0],x++;t=1===x?b.ensureArray(B):1<x?b.ensureNArray(B,x):b.ensureType(t);
y.cast=t}else!x.cast&&B&&(Array.isArray(B)?x.cast=b.ensureArrayTyped(b.ensureOneOfType(B[0])):x.cast=b.ensureOneOfType(B));g.processPrototypeMetadatas(h.getPropertiesMetadata(n),r);return h.getPropertiesMetadata(n)};q.processClass=function(n){for(var r=n.prototype,t=r.declaredClass,w=n._meta.bases,v={},y=w.length-1;0<=y;y--)k.merge(v,h.getMetadata(w[y].prototype));var x=v.properties;g.processClassMetadatas(x,t);Object.defineProperty(n,"__accessorMetadata__",{value:{properties:x,autoDestroy:!!v.autoDestroy}});
var B={};t=function(p){var z=x[p];B[p]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(p):z.value},set:function(u){var D=this.__accessor__;if(!D)Object.defineProperty(this,p,{enumerable:!0,configurable:!0,writable:!0,value:u});else if(!Object.isFrozen(this)){if(D.initialized&&z.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+p+"' of "+this.declaredClass);if(2===D.lifecycle&&z.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
p+"' of "+this.declaredClass);D.set(p,u)}}}};w=0;for(y=Object.getOwnPropertyNames(x);w<y.length;w++)t(y[w]);Object.defineProperties(n.prototype,B);if(v.parameters)for(n=0,t=Object.getOwnPropertyNames(v.parameters);n<t.length;n++)w=t[n],y=Object.getOwnPropertyDescriptor(r,w)||{value:r[w]},(y=d.autocastMethod(r,w,y))&&Object.defineProperty(r,w,y);return v}})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(m,q,a){function b(p,z){return z.isInstanceOf?
z.isInstanceOf(p):z instanceof p}function g(p){return null==p?p:new Date(p)}function h(p){return null==p?p:!!p}function k(p){return null==p?p:p.toString()}function d(p){return null==p?p:parseFloat(p)}function c(p){return null==p?p:Math.round(parseFloat(p))}function f(p){return p&&p.constructor&&void 0!==p.constructor._meta}function e(p,z){return null!=z&&p&&!b(p,z)}function l(p,z){e(p,z)&&(f(z)?x.error("Accessor#set","Assigning an instance of '"+(z.declaredClass||"unknown")+"' which is not a subclass of '"+
(p&&p.prototype&&p.prototype.declaredClass||"unknown")+"'"):z=new p(z));return z}function n(p){switch(p){case Number:return d;case B:return c;case Boolean:return h;case String:return k;case Date:return g;default:return l.bind(null,p)}}function r(p,z){var u=n(p);return 1===arguments.length?u:u(z)}function t(p,z){return 1===arguments.length?t.bind(null,p):z?Array.isArray(z)?z.map(p):[p(z)]:z}function w(p,z,u){return 0!==z&&Array.isArray(u)?u.map(function(D){return w(p,z-1,D)}):p(u)}function v(p,z,u){if(2===
arguments.length)return v.bind(null,p,z);if(!u)return u;u=w(p,z,u);for(var D=z,I=u;0<D&&Array.isArray(I);)D--,I=I[0];if(void 0!==I)for(I=0;I<D;I++)u=[u];return u}function y(p,z){if(2===arguments.length)return y(p).call(null,z);var u={},D=[],I=[],C;for(C in p.typeMap){var E=p.typeMap[C];u[C]=r(E);D.push(E&&E.prototype&&E.prototype.declaredClass||"unknown");I.push(C)}var G="string"===typeof p.key?function(H){return H[p.key]}:p.key;return function(H){if(p.base&&!e(p.base,H))return H;var L=G(H)||p.defaultKeyValue,
O=u[L];if(!O)return x.error("Accessor#set","Invalid property value, value needs to be one of '"+(D.join("', '")+"', or a plain object that can auto-cast (having .type \x3d '")+(I.join("', '")+"')")),null;if(!e(p.typeMap[L],H))return H;if("string"!==typeof p.key||f(H))return O(H);L={};for(var W in H)W!==p.key&&(L[W]=H[W]);return O(L)}}Object.defineProperty(q,"__esModule",{value:!0});var x=a.getLogger("esri.core.Accessor");q.isInstanceOf=b;q.ensureDate=g;q.ensureBoolean=h;q.ensureString=k;q.ensureNumber=
d;q.ensureInteger=c;q.isClassedType=f;q.requiresType=e;q.ensureClass=l;q.ensureType=r;q.ensureArrayTyped=t;q.ensureArray=function(p,z){return 1===arguments.length?t(r.bind(null,p)):t(r.bind(null,p),z)};q.ensureNArrayTyped=v;q.ensureNArray=function(p,z,u){return 2===arguments.length?v(r.bind(null,p),z):v(r.bind(null,p),z,u)};q.ensureOneOfType=y;var B=function(){return function(){}}();q.Integer=B;q.default=r})},"esri/layers/vectorTiles/core/accessorSupport/metadata":function(){define(["require","exports"],
function(m,q){function a(d){return null!=d.__accessorMetadata__}function b(d){return a(d)&&null!=g(d).properties}function g(d){d.__accessorMetadata__||Object.defineProperty(d,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return d.__accessorMetadata__}function h(d){d=g(d);var c=d.properties;c||(c=d.properties={});return c}function k(d,c){var f=g(d);d=f.parameters;d||(d=f.parameters={});f=d[c];f||(f=[],d[c]=f);return f}Object.defineProperty(q,"__esModule",{value:!0});
q.hasMetadata=a;q.hasPropertiesMetadata=b;q.hasPropertyMetadata=function(d,c){return b(d)&&null!=h(d)[c]};q.hasParametersMetadata=function(d,c){return a(d)&&null!=g(d).parameters&&null!=g(d).parameters[c]};q.getMetadata=g;q.getPropertiesMetadata=h;q.getPropertyMetadata=function(d,c){d=h(d);var f=d[c];f||(f=d[c]={});return f};q.setPropertyMetadata=function(d,c,f){h(d)[c]=f};q.getParametersMetadata=k;q.getParameterMetadata=function(d,c,f){var e=k(d,c)[f];e||(k(d,c)[f]=e={index:f});return e}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/cast":function(){define(["require",
"exports","../ensureType","../metadata"],function(m,q,a,b){function g(f){var e="_meta"in f?a.ensureType(f):f;return function(){for(var l=[],n=0;n<arguments.length;n++)l[n]=arguments[n];l.push(e);return"number"===typeof l[2]?k.apply(this,l):h.apply(this,l)}}function h(f,e,l,n){b.getPropertyMetadata(f,e).cast=n}function k(f,e,l,n){b.getParameterMetadata(f,e,l).cast=n}function d(f){return function(e,l,n){b.getPropertyMetadata(e,f).cast=e[l]}}Object.defineProperty(q,"__esModule",{value:!0});var c=Object.prototype.toString;
q.autocastMethod=function(f,e,l){if(b.hasParametersMetadata(f,e)){var n=b.getParametersMetadata(f,e).filter(function(t){return null!=t.cast});if(n.length){var r=l.value;l.value=function(){for(var t=[],w=0;w<arguments.length;w++)t[w]=arguments[w];for(w=0;w<n.length;w++){var v=n[w];t[v.index]=v.cast(t[v.index])}return r.apply(this,t)};return l}}};q.cast=function(){for(var f=[],e=0;e<arguments.length;e++)f[e]=arguments[e];if(3!==f.length||"string"!==typeof f[1]){if(1===f.length&&"[object Function]"===
c.call(f[0]))return g(f[0]);if(1===f.length&&"string"===typeof f[0])return d(f[0])}}})},"esri/layers/vectorTiles/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),function(m,q,a,b,g,h,k,d,c){function f(z){y.has(z)?x.splice(x.indexOf(z),1):y.add(z);x.push(z);B||(B=h.schedule(l))}function e(z){if(!z.removed){var u=z.callback,D=z.path,I=z.oldValue,C=z.target,E=k.valueOf(C,z.propertyPath,!0);b.equals(I,E)||
(z.oldValue=E,u.call(C,E,I,D,C))}}function l(){if(B){B=null;var z=x;x=v.acquire();y.clear();for(var u=v.acquire(),D=0;D<z.length;D++){var I=z[D];e(I);I.removed&&u.push(I)}for(D=0;D<x.length;D++)I=x[D],I.removed&&(u.push(I),y.delete(I),x.splice(D,1),--D);for(D=0;D<u.length;D++)w.pool.release(u[D]);v.release(z);v.release(u);p.forEach(function(C){return C()})}}function n(z,u,D){var I=d.parse(z,u,D,function(C,E,G){var H=k.valueOf(C,E,!0),L,O=c.wire(C,E,function(W,Z){W.__accessor__.destroyed?I.remove():
(L||(L=w.pool.acquire(W,Z,H,G),H=null),f(L))});return{remove:d.once(function(){O.remove();L&&(L.removed=!0,f(L),L=null);I=O=H=null})}});return I}function r(z,u,D){var I=d.parse(z,u,D,function(C,E,G){var H=k.valueOf(C,E,!0),L=!1;return c.wire(C,E,function(O,W){if(O.__accessor__.destroyed)I.remove();else if(!L){L=!0;var Z=k.valueOf(O,W,!0);b.equals(H,Z)||G.call(O,Z,H,W,O);H=k.valueOf(O,W,!0);L=!1}})});return I}function t(z,u,D,I){void 0===I&&(I=!1);return!z.__accessor__||z.__accessor__.destroyed?{remove:function(){}}:
I?r(z,u,D):n(z,u,D)}Object.defineProperty(q,"__esModule",{value:!0});var w=function(){function z(u,D,I,C){this.target=u;this.path=D;this.oldValue=I;this.callback=C;this.removed=!1;this.propertyPath=d.pathToStringOrArray(D)}z.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.removed=!0};z.pool=new g(z,!0);return z}(),v=new a,y=new Set,x=v.acquire(),B;q.dispatchTarget=function(z){for(var u=v.copy(x),D=0;D<u.length;D++){var I=u[D];I.target===z&&
(e(I),y.delete(I),x.splice(x.indexOf(I),1))}};q.removeTarget=function(z){for(var u=0;u<x.length;u++){var D=x[u];D.target===z&&(D.removed=!0)}};q.dispatch=l;var p=new Set;q.afterDispatch=function(z){p.add(z);return{remove:function(){p.delete(z)}}};q.watch=t;q.isValueInUse=function(z){return x.some(function(u){return u.oldValue===z})};q.default=t})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(m,q,a){function b(k){k.length=0}var g=Array.prototype.splice;
m=function(){function k(d,c){void 0===d&&(d=50);void 0===c&&(c=50);this._pool=new a(Array,!1,b,c,d)}k.prototype.acquire=function(){return this._pool.acquire()};k.prototype.copy=function(d){var c=this.acquire();d.unshift(0,0);g.apply(c,d);d.splice(0,2);return c};k.prototype.release=function(d){this._pool.release(d)};k.acquire=function(){return h.acquire()};k.copy=function(d){return h.copy(d)};k.release=function(d){return h.release(d)};return k}();var h=new m(100);return m})},"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require",
"exports"],function(m,q){var a=function(){return function(){}}();return function(){function b(g,h,k,d,c){void 0===d&&(d=1);void 0===c&&(c=0);this.classConstructor=g;this.acquireFunctionOrWithConstructor=h;this.releaseFunction=k;this.growthSize=d;!0===h?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof h&&(this.acquireFunction=h);this._pool=Array(c);this._set=new Set;this._initialSize=c;for(g=0;g<c;g++)this._pool[g]=new this.classConstructor;this.growthSize=Math.max(d,1)}b.prototype.acquire=
function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];h=this.classConstructor||a;if(0===this._pool.length)for(var k=this.growthSize,d=0;d<k;d++)this._pool[d]=new h;h=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[h].concat(g)):h&&h.acquire&&"function"===typeof h.acquire&&h.acquire.apply(h,g);this._set.delete(h);return h};b.prototype.release=function(g){g&&!this._set.has(g)&&(this.releaseFunction?this.releaseFunction(g):g&&g.release&&"function"===typeof g.release&&
g.release(),this._pool.push(g),this._set.add(g))};b.prototype.prune=function(g){void 0===g&&(g=this._initialSize);if(!(this._pool.length<=g))for(var h;g>this._pool.length;)h=this._pool.shift(),this._set.delete(h),h.dispose&&"function"===typeof h.dispose&&h.dispose()};b.prototype._constructorAcquireFunction=function(g){for(var h=[],k=1;k<arguments.length;k++)h[k-1]=arguments[k];(d=this.classConstructor).call.apply(d,[g].concat(h));var d};return b}()})},"esri/layers/vectorTiles/core/scheduling":function(){define(["require",
"exports","./nextTick","./now","./requestAnimationFrame"],function(m,q,a,b,g){function h(u){void 0===u&&(u=q.now());q.debug.rafId=null;0<B.length&&(q.debug.rafId=k());if(0<n){var D=u-n;w=Math.min(D,w);if(D<r)return}q.debug.executeFrameTasks(u)}function k(){return q.debug.requestNextFrame?q.debug.requestNextFrame(f):f()}function d(){for(var u=0;u<B.length;){var D=B[u];u++;if(D.removed){B.splice(u-1,1);for(var I=0;I<y.length;I++){var C=y[I];if(D.phases[C]){C=p[C];var E=C.indexOf(D);-1!==E&&C.splice(E,
1)}}}}}function c(){for(;x.length;){var u=x.shift();u.isActive&&(u.isActive=!1,u.callback())}q.debug.willDispatch=!1}function f(){return g(h)}Object.defineProperty(q,"__esModule",{value:!0});q.now=b;var e=function(){return function(u){this.phases=u;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),l=function(){function u(D){this.callback=D;this.isActive=!0}u.prototype.remove=function(){this.isActive=!1};return u}(),n=-1,r=0,t=0,w=Number.POSITIVE_INFINITY,v={time:0,
deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},y=["prepare","preRender","render","postRender","update"],x=[],B=[],p={prepare:[],preRender:[],render:[],postRender:[],update:[]},z=function(){function u(D){this._task=D}u.prototype.remove=function(){this._task.removed=!0};u.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=q.now())};u.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=q.now()-
this._task.pausedAt))};return u}();q.FrameTaskHandle=z;q.debug={frameTasks:B,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(u){void 0===u&&(u=!1);for(var D=0;D<B.length;D++)B[D].removed=!0;u&&d()},dispatch:c,executeFrameTasks:function(u){void 0===u&&(u=q.now());0>n&&(n=u);var D=u-n;n=u;for(var I=0;I<B.length;I++){var C=B[I];-1!==C.epoch&&(C.dt=D)}for(I=0;I<y.length;I++){D=y[I];for(var E=p[D],G=0;G<E.length;G++)C=E[G],C.paused||C.removed||(0===I&&C.ticks++,-1===C.epoch&&
(C.epoch=u),v.time=u,v.deltaTime=C.dt,v.elapsedFrameTime=q.now()-u,v.frameDuration=0<t?t:w,v.spendInTask=u-C.epoch,C.phases[D].call(C,v))}d()}};q.schedule=function(u){u=new l(u);x.push(u);q.debug.willDispatch||(q.debug.willDispatch=!0,a(c));return u};q.addFrameTask=function(u){var D=new e(u);B.push(D);for(var I=0,C=y;I<C.length;I++){var E=C[I];u[E]&&p[E].push(D)}q.debug.rafId||(n=-1,q.debug.rafId=k());return new z(D)};q.setFrameRate=function(u){if(0>=u)t=r=0;else{var D=1.05*w;u=Math.ceil(1E3/u/D);
r=(u-1)*D;t=u*w}};q.requestNextFrame=k})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require","exports","./global"],function(m,q,a){function b(){if(a.postMessage&&!a.importScripts){var h=a.onmessage,k=!0;a.onmessage=function(){k=!1};a.postMessage("","*");a.onmessage=h;return k}return!1}var g=a.MutationObserver||a.WebKitMutationObserver;return function(){if(a.process&&a.process.nextTick)var h=function(f){a.process.nextTick(f)};else if(a.Promise)h=function(f){a.Promise.resolve().then(f)};
else if(g){var k=[],d=document.createElement("div");(new g(function(){for(;0<k.length;)k.shift()()})).observe(d,{attributes:!0});h=function(f){k.push(f);d.setAttribute("queueStatus","1")}}else if(b()){var c=[];a.addEventListener("message",function(f){if(f.source===a&&"esri-nexttick-message"===f.data)for(f.stopPropagation();c.length;)c.shift()()},!0);h=function(f){c.push(f);a.postMessage("esri-nexttick-message","*")}}else h=a.setImmediate?function(f){return a.setImmediate(f)}:function(f){return a.setTimeout(f,
0)};return h}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(m,q){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(m,q,a){return function(){var b=a.performance||{};if(b.now)return function(){return b.now()};if(b.webkitNow)return function(){return b.webkitNow()};
if(b.mozNow)return function(){return b.mozNow()};if(b.msNow)return function(){return b.msNow()};if(b.oNow)return function(){return b.oNow()};var g=b.timing&&b.timing.navigationStart?b.timing.navigationStart:Date.now();return function(){return Date.now()-g}}()})},"esri/layers/vectorTiles/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(m,q,a,b){var g=b();m=a.requestAnimationFrame;if(!m){q=["ms","moz","webkit","o"];for(var h=0;h<q.length&&!m;++h)m=a[q[h]+
"RequestAnimationFrame"];m||(m=function(k){var d=b(),c=Math.max(0,16-(d-g)),f=a.setTimeout(function(){k(b())},c);g=d+c;return f})}return m})},"esri/layers/vectorTiles/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),function(m,q,a,b,g,h,k){return function(d){function c(f){f=d.call(this)||this;f._groups=new Map;return f}a(c,d);c.prototype.destroy=function(){this.removeAll()};
Object.defineProperty(c.prototype,"size",{get:function(){var f=0;this._groups.forEach(function(e){f+=e.length});return f},enumerable:!0,configurable:!0});c.prototype.add=function(f,e){if(!this._isHandle(f)&&!Array.isArray(f)&&!h.isCollection(f))return this;var l=this._getOrCreateGroup(e);Array.isArray(f)||h.isCollection(f)?f.forEach(function(n){return l.push(n)}):l.push(f);this.notifyChange("size");return this};c.prototype.has=function(f){return this._groups.has(this._ensureGroupKey(f))};c.prototype.remove=
function(f){if(Array.isArray(f)||h.isCollection(f))return f.forEach(this.remove,this),this;if(!this.has(f))return this;for(var e=this._getGroup(f),l=0;l<e.length;l++)e[l].remove();this._deleteGroup(f);this.notifyChange("size");return this};c.prototype.removeAll=function(){this._groups.forEach(function(f){for(var e=0;e<f.length;e++)f[e].remove()});this._groups.clear();this.notifyChange("size");return this};c.prototype._isHandle=function(f){return f&&!!f.remove};c.prototype._getOrCreateGroup=function(f){if(this.has(f))return this._getGroup(f);
var e=[];this._groups.set(this._ensureGroupKey(f),e);return e};c.prototype._getGroup=function(f){return this._groups.get(this._ensureGroupKey(f))};c.prototype._deleteGroup=function(f){return this._groups.delete(this._ensureGroupKey(f))};c.prototype._ensureGroupKey=function(f){return f||"_default_"};b([k.property({readOnly:!0})],c.prototype,"size",null);return c=b([k.subclass("esri.core.Handles")],c)}(k.declared(g))})},"esri/layers/vectorTiles/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n){function r(C){return C?C.isInstanceOf&&C.isInstanceOf(I):!1}function t(C){return C?r(C)?C.toArray():C.length?Array.prototype.slice.apply(C):[]:[]}function w(C){if(C&&C.length)return C[0]}function v(C,E,G,H){E&&E.forEach(function(L,O,W){C.push(L);v(C,G.call(H,L,O,W),G,H)})}m=function(){function C(){this.target=null;this.defaultPrevented=this.cancellable=!1}C.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};C.prototype.reset=function(E){this.defaultPrevented=
!1;this.item=E};return C}();var y=function(){},x=new f(m,!0,function(C){C.item=null;C.target=null}),B=new Set,p=new Set,z=new Set,u=new Map,D=0,I=function(C){function E(H){H=C.call(this,H)||this;H._boundDispatch=H._dispatchColChange.bind(H);H._chgListeners=[];H._notifications=null;H._timer=null;H.length=0;H._items=[];Object.defineProperty(H,"uid",{value:D++});return H}a(E,C);var G=E;E.ofType=function(H){if(!H)return G;if(u.has(H))return u.get(H);if("function"===typeof H)var L=H.prototype.declaredClass;
else if(H.base)L=H.base.prototype.declaredClass;else for(var O in H.typeMap){var W=H.typeMap[O].prototype.declaredClass;L=L?L+(" | "+W):W}L=G.createSubclass({declaredClass:"esri.core.Collection\x3c"+L+"\x3e"});O={Type:H,ensureType:"function"===typeof H?n.ensureType(H):n.ensureOneOfType(H)};Object.defineProperty(L.prototype,"itemType",{value:O});u.set(H,L);return L};E.prototype.normalizeCtorArgs=function(H){return H?Array.isArray(H)||r(H)?{items:H}:H:{}};Object.defineProperty(E.prototype,"items",{get:function(){return this._items},
set:function(H){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(t(H))),this._emitAfterChanges())},enumerable:!0,configurable:!0});E.prototype.on=function(H,L){var O;Array.isArray(H)?O=H:-1<H.indexOf(",")&&(O=H.split(/\s*,\s*/));if(O){var W=[];for(H=0;H<O.length;H++)W.push(this.on(O[H],L));W.remove=function(){for(var P=0;P<W.length;P++)W[P].remove()};return W}if("change"===H){var Z=this._chgListeners,ba={removed:!1,callback:L};Z.push(ba);this._notifications&&this._notifications.push({listeners:Z.slice(),
items:this._items.slice(),changes:[]});return{remove:function(){this.remove=y;ba.removed=!0;Z.splice(Z.indexOf(ba),1)}}}return g.after(this,"on"+H,L,!0)};E.prototype.hasEventListener=function(H){return"change"===H?0<this._chgListeners.length:this.inherited(arguments)};E.prototype.add=function(H,L){if(this._emitBeforeChanges())return this;L=this.getNextIndex(L);this._splice(L,0,H);this._emitAfterChanges();return this};E.prototype.addMany=function(H,L){void 0===L&&(L=this._items.length);if(!H||!H.length||
this._emitBeforeChanges())return this;L=this.getNextIndex(L);this._splice.apply(this,[L,0].concat(t(H)));this._emitAfterChanges();return this};E.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var H=this._splice(0,this.length)||[];this._emitAfterChanges();return H};E.prototype.clone=function(){return this._createNewInstance({items:this._items.map(c.clone)})};E.prototype.concat=function(){for(var H=[],L=0;L<arguments.length;L++)H[L]=arguments[L];H=H.map(t);return this._createNewInstance({items:(O=
this._items).concat.apply(O,H)});var O};E.prototype.drain=function(H,L){if(this.length&&!this._emitBeforeChanges()){for(var O=this._splice(0,this.length),W=O.length,Z=0;Z<W;Z++)H.call(L,O[Z],Z,O);this._emitAfterChanges()}};E.prototype.every=function(H,L){return this._items.every(H,L)};E.prototype.filter=function(H,L){var O=2===arguments.length?this._items.filter(H,L):this._items.filter(H);return this._createNewInstance({items:O})};E.prototype.find=function(H,L){if("function"!==typeof H)throw new TypeError(H+
" is not a function");for(var O=this._items,W=O.length,Z=0;Z<W;Z++){var ba=O[Z];if(H.call(L,ba,Z,O))return ba}};E.prototype.findIndex=function(H,L){if("function"!==typeof H)throw new TypeError(H+" is not a function");for(var O=this._items,W=O.length,Z=0;Z<W;Z++)if(H.call(L,O[Z],Z,O))return Z;return-1};E.prototype.flatten=function(H,L){var O=[];v(O,this,H,L);return new G(O)};E.prototype.forEach=function(H,L){for(var O=this._items,W=O.length,Z=0;Z<W;Z++)H.call(L,O[Z],Z,O)};E.prototype.getItemAt=function(H){return this._items[H]};
E.prototype.getNextIndex=function(H){var L=this.length;H=null==H?L:H;0>H?H=0:H>L&&(H=L);return H};E.prototype.includes=function(H,L){void 0===L&&(L=0);return arguments.length?-1!==this._items.indexOf(H,L):!1};E.prototype.indexOf=function(H,L){void 0===L&&(L=0);return this._items.indexOf(H,L)};E.prototype.join=function(H){void 0===H&&(H=",");return this._items.join(H)};E.prototype.lastIndexOf=function(H,L){void 0===L&&(L=this.length-1);return this._items.lastIndexOf(H,L)};E.prototype.map=function(H,
L){H=this._items.map(H,L);return new G({items:H})};E.prototype.reorder=function(H,L){void 0===L&&(L=this.length-1);var O=this.indexOf(H);if(-1!==O){0>L?L=0:L>=this.length&&(L=this.length-1);if(O!==L){if(this._emitBeforeChanges())return H;this._splice(O,1);this._splice(L,0,H);this._emitAfterChanges()}return H}};E.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var H=w(this._splice(this.length-1,1));this._emitAfterChanges();return H}};E.prototype.push=function(){for(var H=[],L=
0;L<arguments.length;L++)H[L]=arguments[L];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(H));this._emitAfterChanges();return this.length};E.prototype.reduce=function(H,L){var O=this._items;return 2===arguments.length?O.reduce(H,L):O.reduce(H)};E.prototype.reduceRight=function(H,L){var O=this._items;return 2===arguments.length?O.reduceRight(H,L):O.reduceRight(H)};E.prototype.remove=function(H){return this.removeAt(this.indexOf(H))};E.prototype.removeAt=
function(H){if(!(0>H||H>=this.length||this._emitBeforeChanges()))return H=w(this._splice(H,1)),this._emitAfterChanges(),H};E.prototype.removeMany=function(H){if(!H||!H.length||this._emitBeforeChanges())return[];H=r(H)?H.toArray():H;for(var L=this._items,O=[],W=H.length,Z=0;Z<W;Z++){var ba=L.indexOf(H[Z]);if(-1<ba){for(var P=Z+1,ha=ba+1,X=Math.min(H.length-P,L.length-ha),R=0;R<X&&H[P+R]===L[ha+R];)R++;P=1+R;(ba=this._splice(ba,P))&&0<ba.length&&O.push.apply(O,ba);Z+=P-1}}this._emitAfterChanges();return O};
E.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var H=this._splice(0,this.length);H&&(H.reverse(),this._splice.apply(this,[0,0].concat(H)));this._emitAfterChanges();return this};E.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var H=w(this._splice(0,1));this._emitAfterChanges();return H}};E.prototype.slice=function(H,L){void 0===H&&(H=0);void 0===L&&(L=this.length);return this._createNewInstance({items:this._items.slice(H,L)})};E.prototype.some=function(H,
L){return this._items.some(H,L)};E.prototype.sort=function(H){if(!this.length||this._emitBeforeChanges())return this;var L=this._splice(0,this.length);arguments.length?L.sort(H):L.sort();this._splice.apply(this,[0,0].concat(L));return this};E.prototype.splice=function(H,L){for(var O=[],W=2;W<arguments.length;W++)O[W-2]=arguments[W];if(this._emitBeforeChanges())return[];O=this._splice.apply(this,[H,L].concat(O))||[];this._emitAfterChanges();return O};E.prototype.toArray=function(){return this._items.slice()};
E.prototype.toJSON=function(){return this.toArray()};E.prototype.toLocaleString=function(){return this._items.toLocaleString()};E.prototype.toString=function(){return this._items.toString()};E.prototype.unshift=function(){for(var H=[],L=0;L<arguments.length;L++)H[L]=arguments[L];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(H));this._emitAfterChanges();return this.length};E.prototype._createNewInstance=function(H){return new this.constructor(H)};E.prototype._splice=
function(H,L){for(var O=[],W=2;W<arguments.length;W++)O[W-2]=arguments[W];W=this._items;var Z=this.constructor.prototype.itemType;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=e.schedule(this._boundDispatch));if(L){var ba=W.splice(H,L);if(this.hasEventListener("before-remove")){var P=x.acquire();P.target=this;P.cancellable=!0;for(var ha=0,X=ba.length;ha<
X;ha++){var R=ba[ha];P.reset(R);this.emit("before-remove",P);P.defaultPrevented&&(ba.splice(ha,1),W.splice(H,0,R),H+=1,--ha,--X)}x.release(P)}this.length=this._items.length;if(this.hasEventListener("after-remove")){R=x.acquire();R.target=this;R.cancellable=!1;X=ba.length;for(ha=0;ha<X;ha++)R.reset(ba[ha]),this.emit("after-remove",R);x.release(R)}}if(O&&O.length){if(Z){ha=[];for(X=0;X<O.length;X++)R=O[X],P=Z.ensureType(R),null==P&&null!=R||ha.push(P);O=ha}Z=this.hasEventListener("before-add");ha=this.hasEventListener("after-add");
X=H===this.length;if(Z||ha){R=x.acquire();R.target=this;R.cancellable=!0;P=x.acquire();P.target=this;P.cancellable=!1;for(var V=0,J=O;V<J.length;V++){var S=J[V];Z?(R.reset(S),this.emit("before-add",R),R.defaultPrevented||(X?W.push(S):W.splice(H++,0,S),this._set("length",W.length),ha&&(P.reset(S),this.emit("after-add",P)))):(X?W.push(S):W.splice(H++,0,S),this._set("length",W.length),P.reset(S),this.emit("after-add",P))}x.release(R)}else X?W.push.apply(W,O):W.splice.apply(W,[H,0].concat(O)),this._set("length",
W.length)}(O&&O.length||ba&&ba.length)&&this._notifyChangeEvent(O,ba);return ba};E.prototype._emitBeforeChanges=function(){var H=!1;if(this.hasEventListener("before-changes")){var L=x.acquire();L.target=this;L.cancellable=!0;this.emit("before-changes",L);H=L.defaultPrevented;x.release(L)}return H};E.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var H=x.acquire();H.target=this;H.cancellable=!1;this.emit("after-changes",H);x.release(H)}};E.prototype._notifyChangeEvent=
function(H,L){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:H,removed:L})};E.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var H=this._notifications;this._notifications=null;for(var L=function(Z){var ba=Z.changes;B.clear();p.clear();z.clear();for(var P=0;P<ba.length;P++){var ha=ba[P],X=ha.added;ha=ha.removed;if(X)if(0===z.size&&0===p.size)for(var R=0,V=X;R<V.length;R++)X=
V[R],B.add(X);else for(R=0,V=X;R<V.length;R++)X=V[R],p.has(X)?(z.add(X),p.delete(X)):z.has(X)||B.add(X);if(ha)if(0===z.size&&0===B.size)for(R=0;R<ha.length;R++)X=ha[R],p.add(X);else for(R=0;R<ha.length;R++)X=ha[R],B.has(X)?B.delete(X):(z.delete(X),p.add(X))}var J=k.acquire();B.forEach(function(ra){J.push(ra)});var S=k.acquire();p.forEach(function(ra){S.push(ra)});var aa=O._items,ja=Z.items,la=k.acquire();z.forEach(function(ra){ja.indexOf(ra)!==aa.indexOf(ra)&&la.push(ra)});if(Z.listeners&&(J.length||
S.length||la.length))for(ba={target:O,added:J,removed:S,moved:la},P=Z.listeners.length,X=0;X<P;X++)ha=Z.listeners[X],ha.removed||ha.callback.call(O,ba);k.release(J);k.release(S);k.release(la)},O=this,W=0;W<H.length;W++)L(H[W]);B.clear();p.clear();z.clear()}};E.isCollection=r;b([l.property()],E.prototype,"length",void 0);b([l.property()],E.prototype,"items",null);return E=G=b([l.subclass("esri.core.Collection")],E)}(l.declared(h,d));return I})},"esri/layers/vectorTiles/core/Evented":function(){define(["require",
"exports","dojo/aspect","dojo/on"],function(m,q,a,b){function g(h,k,d,c){var f;Array.isArray(k)?f=k:-1<k.indexOf(",")&&(f=k.split(/\s*,\s*/));if(f){var e=[];for(k=0;k<f.length;k++)e.push(g(h,f[k],d,c));e.remove=function(){for(var l=0;l<e.length;l++)e[l].remove()};return e}return c(h,k)}return function(){function h(){}h.prototype.emit=function(k,d){if(this.hasEventListener(k))return d=d||{},d.target||(d.target=this),b.emit(this,k,d)};h.prototype.on=function(k,d){return g(this,k,d,function(c,f){return a.after(c,
"on"+f,d,!0)})};h.prototype.hasEventListener=function(k){k="on"+k;return!(!this[k]||!this[k].after)};return h}()})},"esri/layers/vectorTiles/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),function(m,q,a,b,g,h,k,d,c,f,e){function l(n){for(var r in n)q.hasOwnProperty(r)||(q[r]=n[r])}
Object.defineProperty(q,"__esModule",{value:!0});l(a);l(b);l(g);l(h);l(k);l(d);l(c);l(f);l(e)})},"esri/layers/vectorTiles/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(m,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.aliasOf=function(b){return function(g,h){a.getPropertyMetadata(g,h).aliasOf=b}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/autoDestroy":function(){define(["require","exports","../metadata"],function(m,
q,a){Object.defineProperty(q,"__esModule",{value:!0});q.autoDestroy=function(){return function(b,g,h){a.getMetadata(b).autoDestroy=!0;return b[g]}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.declared=function(a){for(var b=[],g=1;g<arguments.length;g++)b[g-1]=arguments[g];g=function(){return this||{}};g.__bases__=[a].concat(b);return g}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),
function(m,q,a,b,g,h){Object.defineProperty(q,"__esModule",{value:!0});g.getLogger("esri.core.accessorSupport.decorators.property");q.property=function(k){void 0===k&&(k={});return function(d,c){var f=d.constructor.prototype;if(f!==Function.prototype){(d=Object.getOwnPropertyDescriptor(d,c))&&(d.get||d.set)?(k=b.clone(k),d.set&&(k.set=d.set),d.get&&(k.get=d.get)):d&&d.hasOwnProperty("value")&&(k=b.clone(k),k.value=d.value);c=h.getPropertyMetadata(f,c);for(var e in k)f=k[e],Array.isArray(f)?c[e]=(c[e]||
[]).concat(f):c[e]=f}}};q.propertyJSONMeta=function(k,d,c){k=h.getPropertyMetadata(k.constructor.prototype,c);k.json||(k.json={});k=k.json;void 0!==d&&(k.origins||(k.origins={}),k.origins[d]||(k.origins[d]={}),k=k.origins[d]);return k}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(m,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.reader=function(g,h,k){if(void 0===h||Array.isArray(h)){var d=
g;k=h;var c=[void 0]}else d=h,c=Array.isArray(g)?g:[g];return function(f,e,l){var n=f.constructor.prototype;c.forEach(function(r){r=b.propertyJSONMeta(f,r,d);r.read&&"object"!==typeof r.read&&(r.read={});a.setDeepValue("read.reader",n[e],r);k&&(r.read.source=(r.read.source||[]).concat(k))})}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.shared=function(a){return function(b,
g){b[g]=a}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(m,q,a,b){function g(e,l){e.read&&("function"===typeof e.read?l.push(e.read):"object"===typeof e.read&&e.read.reader&&l.push(e.read.reader))}function h(e,l){e.write&&("function"===typeof e.write?l.push(e.write):"object"===typeof e.write&&e.write.writer&&l.push(e.write.writer))}function k(e){var l=[];e=b.getPropertiesMetadata(e.prototype);if(!e)return l;
for(var n in e){var r=e[n];r.cast&&l.push(r.cast);r.copy&&l.push(r.copy);if(r=r.json)if(g(r,l),h(r,l),r=r.origins)for(var t in r){var w=r[t];g(w,l);h(w,l)}}return l}function d(e){var l={values:{},descriptors:{}},n=["__bases__"],r=b.getPropertiesMetadata(e.prototype),t=k(e);Object.getOwnPropertyNames(e.prototype).filter(function(w){return-1!==n.indexOf(w)||r&&r.hasOwnProperty(w)||!f(Object.getOwnPropertyDescriptor(e.prototype,w))&&-1!==t.indexOf(e.prototype[w])?!1:!0}).forEach(function(w){var v=Object.getOwnPropertyDescriptor(e.prototype,
w);f(v)?l.descriptors[w]=v:l.values[w]=e.prototype[w]});return l}function c(e){var l=Object.getOwnPropertyNames(e),n=Object.getPrototypeOf(e.prototype).constructor,r=Object.getOwnPropertyNames(Function);r.push("__bases__");var t=Object.getOwnPropertyNames(n),w={values:{},descriptors:{}};l.filter(function(v){return-1!==r.indexOf(v)?!1:-1===t.indexOf(v)||n[v]!==e[v]?!0:!1}).forEach(function(v){var y=Object.getOwnPropertyDescriptor(e,v);f(y)?w.descriptors[v]=y:w.values[v]=e[v]});return w}function f(e){return e&&
!(!e.get&&!e.set)}Object.defineProperty(q,"__esModule",{value:!0});q.subclass=function(e){return function(l){var n=d(l),r=c(l);null!=e&&(n.values.declaredClass=e);l=a(l.__bases__,n.values);Object.defineProperties(l.prototype,n.descriptors);for(var t in r.values)l[t]=r.values[t];Object.defineProperties(l,r.descriptors);return l}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(m,q,a,b){Object.defineProperty(q,
"__esModule",{value:!0});q.writer=function(g,h,k){if(void 0===h){var d=g;var c=[void 0]}else"string"!==typeof h?(d=g,c=[void 0],k=h):(d=h,c=Array.isArray(g)?g:[g]);return function(f,e,l){var n=f.constructor.prototype;c.forEach(function(r){r=b.propertyJSONMeta(f,r,d);r.write&&"object"!==typeof r.write&&(r.write={});k&&a.setDeepValue("write.target",k,r);a.setDeepValue("write.writer",n[e],r)})}}})},"esri/layers/vectorTiles/core/LRUMap":function(){define(["require","exports"],function(m,q){return function(){function a(b,
g){void 0===b&&(b=0);this.sizeOfFunction=function(){return 1};this._sizeOf=0;this._cache=new Map;this._queue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=b;g&&(g.disposeFunction&&(this.disposeFunction=g.disposeFunction),g.sizeOfFunction&&(this.sizeOfFunction=g.sizeOfFunction))}Object.defineProperty(a.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._sizeOf},
enumerable:!0,configurable:!0});a.prototype.clear=function(){var b=this;this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(g,h){b.disposeFunction(h,g)});this._cache.clear();this._sizeOf=0};a.prototype.delete=function(b){var g=this._cache.get(b);return this._cache.delete(b)?(this._sizeOf-=this.sizeOfFunction(g),this._queue.splice(this._queue.indexOf(b),1),this.disposeFunction&&this.disposeFunction(b,g),!0):!1};a.prototype.forEach=function(b,g){this._cache.forEach(b,g)};a.prototype.get=
function(b){var g=this._cache.get(b);if(void 0!==g)return this._queue.splice(this._queue.indexOf(b),1),this._queue.unshift(b),g};a.prototype.has=function(b){return this._cache.has(b)};a.prototype.set=function(b,g){var h=this.get(b);void 0!==h?this._sizeOf-=this.sizeOfFunction(h):this._queue.unshift(b);this._sizeOf+=this.sizeOfFunction(g);this._cache.set(b,g);this._collect();return this};a.prototype._collect=function(){for(;this._queue.length&&this._sizeOf>this._maxSize;){var b=this._queue.pop(),g=
this._cache.get(b);this._cache.delete(b)&&(this._sizeOf-=this.sizeOfFunction(g),this.disposeFunction&&this.disposeFunction(b,g))}};return a}()})},"esri/layers/vectorTiles/core/watchUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(m,q,a,b){function g(t,w){Array.isArray(t)?t.forEach(w):w(t)}function h(t,w,v,y,x){x=t.watch(w,function(B,p,z,u){y&&!y(B)||v.call(t,B,p,z,u)},x);g(w,function(B){var p=t.get(B);y&&y(p)&&v.call(t,p,p,B,t)});return x}function k(t,
w,v,y,x){function B(){D&&(D.remove(),D=null)}var p=!1,z=new a(B),u=new b;u.cancel=z.cancel;u.isCanceled=z.isCanceled;u.isFulfilled=z.isFulfilled;u.isRejected=z.isRejected;u.isResolved=z.isResolved;u.then=z.then;u.remove=B;Object.freeze(u);var D=h(t,w,function(I,C,E,G){p=!0;B();v&&v.call(t,I,C,E,G);z.resolve({value:I,oldValue:C,propertyName:E,target:G})},y,x);p&&D.remove();return u}function d(t){return!!t}function c(t){return!t}function f(t){return!0===t}function e(t){return!1===t}function l(t){return void 0!==
t}function n(t){return void 0===t}function r(t,w,v,y){var x=Array.isArray(w)?w:-1<w.indexOf(",")?w.split(","):[w];w=t.watch(w,v,y);x.forEach(function(B){B=B.trim();var p=t.get(B);v.call(t,p,p,B,t)});return w}Object.defineProperty(q,"__esModule",{value:!0});q.init=r;q.watch=function(t,w,v,y){return t.watch(w,v,y)};q.once=function(t,w,v,y){return k(t,w,v,null,y)};q.when=function(t,w,v,y){return h(t,w,v,d,y)};q.whenOnce=function(t,w,v,y){return k(t,w,v,d,y)};q.whenNot=function(t,w,v,y){return h(t,w,
v,c,y)};q.whenNotOnce=function(t,w,v,y){return k(t,w,v,c,y)};q.whenTrue=function(t,w,v,y){return h(t,w,v,f,y)};q.whenTrueOnce=function(t,w,v,y){return k(t,w,v,f,y)};q.whenFalse=function(t,w,v,y){return h(t,w,v,e,y)};q.whenFalseOnce=function(t,w,v,y){return k(t,w,v,e,y)};q.whenDefined=function(t,w,v,y){return h(t,w,v,l,y)};q.whenDefinedOnce=function(t,w,v,y){return k(t,w,v,l,y)};q.whenUndefined=function(t,w,v,y){return h(t,w,v,n,y)};q.whenUndefinedOnce=function(t,w,v,y){return k(t,w,v,n,y)};q.pausable=
function(t,w,v,y){var x=!1,B=t.watch(w,function(p,z,u,D){x||v.call(t,p,z,u,D)},y);return{remove:function(){B.remove()},pause:function(){x=!0},resume:function(){x=!1}}};q.on=function(t,w,v,y,x,B,p){function z(I){var C=u[I];C&&(B&&B(C.target,I,t,v),C.handle.remove(),delete u[I])}var u={},D=r(t,w,function(I,C,E){z(E);I&&"function"===typeof I.on&&(u[E]={handle:I.on(v,y),target:I},x&&x(I,E,t,v))},p);return{remove:function(){D.remove();for(var I in u)z(I)}}}})},"esri/layers/vectorTiles/layers/support/Tilemap":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Error ../../core/lang ../../core/promiseUtils".split(" "),
function(m,q,a,b,g,h,k){function d(c){if("vector-tile"===c.service.type)var f=c.service.url+"/tilemap/"+c.level+"/"+c.row+"/"+c.col+"/"+c.width+"/"+c.height;else f=c.service.tileServers,f=(f&&f.length?f[c.row%f.length]:c.service.url)+"/tilemap/"+c.level+"/"+c.row+"/"+c.col+"/"+c.width+"/"+c.height;(c=c.service.query)&&(f=f+"?"+c);return f}Object.defineProperty(q,"__esModule",{value:!0});m=function(){function c(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}c.prototype.getAvailability=
function(f,e){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";f=(f-this.location.top)*this.location.width+(e-this.location.left);e=f>>3;var l=this._tileAvailabilityBitSet;return 0>e||e>l.length?"unknown":l[e]&1<<f%8?"available":"unavailable"};c.prototype._updateFromData=function(f){for(var e=!0,l=!0,n=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),r=0,t=0;t<f.length;t++){var w=t%8;f[t]?(l=!1,n[r]|=1<<w):e=!1;7===w&&++r}this._isAllUnvailable=
l;this._isAllAvailable=e;this._isAllAvailable||this._isAllUnvailable||(this._tileAvailabilityBitSet=n,this.byteSize+=n.length)};c.fromDefinition=function(f,e){var l=f.service.request||b,n=f.row,r=f.col,t=f.width,w=f.height,v={query:{f:"json"},callbackParamName:"callback"};e=e?a({},v,e):v;return l(d(f),e).then(function(y){return y.data}).catch(function(y){if(y&&y.details&&422===y.details.httpStatus){y=[];for(var x=0,B=t*w;x<B;x++)y[x]=0;return{location:{top:n,left:r,width:t,height:w},valid:!0,data:y}}return k.reject(y)}).then(function(y){if(y.location&&
(y.location.top!==n||y.location.left!==r||y.location.width!==t||y.location.height!==w))throw new g("tilemap:location-mismatch","Tilemap response for different location than requested",{response:y,definition:{top:n,left:r,width:t,height:w}});return c.fromJSON(y)})};c.fromJSON=function(f){c.validateJSON(f);var e=new c;e.location=Object.freeze(h.clone(f.location));e._updateFromData(f.data);return Object.freeze(e)};c.validateJSON=function(f){if(!f||!f.location)throw new g("tilemap:missing-location","Location missing from tilemap response");
if(!1===f.valid)throw new g("tilemap:invalid","Tilemap response was marked as invalid");if(!f.data)throw new g("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(f.data))throw new g("tilemap:data-mismatch","Data must be an array of numbers");if(f.data.length!==f.location.width*f.location.height)throw new g("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return c}();q.Tilemap=m;q.tilemapDefinitionId=function(c){return c.level+"/"+
c.row+"/"+c.col+"/"+c.width+"/"+c.height};q.tilemapDefinitionUrl=d;q.default=m})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","dojo/has","./StyleLayer"],function(m,q,a,b){return function(){function g(h,k){this.styleJSON=h;this.version=parseFloat(h.version);this.sprite=k?k.spriteUrl:h.sprite;this.glyphs=k?k.glyphsUrl:h.glyphs;if(a("stable-symbol-rendering")){var d=(h.layers||[]).filter(function(c){return c.layout&&c.layout["text-font"]})[0];
d&&(h.layers||[]).forEach(function(c){c.layout&&c.layout["text-font"]&&(c.layout["text-font"]=d.layout["text-font"])})}this.layers=(h.layers||[]).map(g._create);this._identifyRefLayers()}g.prototype._identifyRefLayers=function(){for(var h=[],k=[],d=0,c=0,f=this.layers;c<f.length;c++){var e=f[c];if(1===e.type){var l=e,n=e.sourceLayer;n+="|"+JSON.stringify(e.minzoom);n+="|"+JSON.stringify(e.maxzoom);n+="|"+JSON.stringify(e.filter);if(l.hasDataDrivenFill||l.hasDataDrivenOutline)n+="|"+JSON.stringify(d);
h.push({key:n,layer:e})}2===e.type&&(l=e,n=e.sourceLayer,n+="|"+JSON.stringify(e.minzoom),n+="|"+JSON.stringify(e.maxzoom),n+="|"+JSON.stringify(e.filter),n+="|"+JSON.stringify(e.layout&&e.layout["line-cap"]),n+="|"+JSON.stringify(e.layout&&e.layout["line-join"]),l.hasDataDrivenLine&&(n+="|"+JSON.stringify(d)),k.push({key:n,layer:e}));++d}this._assignRefLayers(h);this._assignRefLayers(k)};g.prototype._assignRefLayers=function(h){h.sort(function(r,t){return r.key<t.key?-1:r.key>t.key?1:0});for(var k,
d,c=h.length,f=0;f<c;f++){var e=h[f];if(e.key===k)e.layer.refLayerId=d;else if(k=e.key,d=e.layer.id,1===e.layer.type&&!e.layer.getPaintProperty("fill-outline-color"))for(var l=f+1;l<c;l++){var n=h[l];if(n.key===k){if(n.layer.getPaintProperty("fill-outline-color")){h[f]=n;h[l]=e;d=n.layer.id;break}}else break}}};g._create=function(h,k,d){k=1-1/(d.length+1)*(1+k);switch(h.type){case "background":return new b.BackgroundStyleLayer(0,h,k);case "fill":return new b.FillStyleLayer(1,h,k);case "line":return new b.LineStyleLayer(2,
h,k);case "symbol":return new b.SymbolStyleLayer(3,h,k);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new b.CircleStyleLayer(4,h,k)}throw Error("Unknown vector tile layer");};return g}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),function(m,q,a,b,g,h,k){Object.defineProperty(q,
"__esModule",{value:!0});m=function(){function d(c,f,e){this.type=c;this.id=f.id;this.source=f.source;this.sourceLayer=f["source-layer"];this.minzoom=f.minzoom;this.maxzoom=f.maxzoom;this.filter=f.filter;this.layout=f.layout;this.paint=f.paint;this.z=e;switch(c){case 0:this._layoutDefinition=h.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=h.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=h.StyleDefinition.fillLayoutDefinition;this._paintDefinition=
h.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=h.StyleDefinition.lineLayoutDefinition;this._paintDefinition=h.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=h.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=h.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=h.StyleDefinition.circleLayoutDefinition,this._paintDefinition=h.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);
this._paintProperties=this._parsePaint(this.paint)}d.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=g.createFilter(this.filter)};d.prototype.getLayoutProperty=function(c){var f=this._layoutProperties;if(f)return f[c]};d.prototype.getPaintProperty=function(c){var f=this._paintProperties;if(f)return f[c]};d.prototype.getLayoutValue=function(c,f,e){var l,n=this._layoutProperties;n&&(n=n[c])&&(l=n.getValue(f,e));c=this._layoutDefinition[c];
void 0===l&&(l=c["default"]);"enum"===c.type&&(l=c.values.indexOf(l));return l};d.prototype.getPaintValue=function(c,f,e){var l,n=this._paintProperties;n&&(n=n[c])&&(l=n.getValue(f,e));c=this._paintDefinition[c];void 0===l&&(l=c["default"]);"enum"===c.type&&(l=c.values.indexOf(l));return l};d.prototype._parseLayout=function(c){var f={},e;for(e in c){var l=this._layoutDefinition[e];l&&(f[e]=new k(e,l,c[e]))}return f};d.prototype._parsePaint=function(c){var f={},e;for(e in c){var l=this._paintDefinition[e];
l&&(f[e]=new k(e,l,c[e]))}return f};return d}();q.StyleLayer=m;b=function(d){function c(f,e,l){return d.call(this,f,e,l)||this}a(c,d);return c}(m);q.BackgroundStyleLayer=b;b=function(d){function c(f,e,l){f=d.call(this,f,e,l)||this;e=f.getPaintProperty("fill-color");f.hasDataDrivenColor=e?e.isDataDriven:!1;e=f.getPaintProperty("fill-opacity");f.hasDataDrivenOpacity=e?e.isDataDriven:!1;f.hasDataDrivenFill=f.hasDataDrivenColor||f.hasDataDrivenOpacity;e=f.getPaintProperty("fill-outline-color");f.outlineUsesFillColor=
!e;f.hasDataDrivenOutlineColor=e?e.isDataDriven:!1;f.hasDataDrivenOutline=(e?f.hasDataDrivenOutlineColor:f.hasDataDrivenColor)||f.hasDataDrivenOpacity;return f}a(c,d);return c}(m);q.FillStyleLayer=b;b=function(d){function c(f,e,l){f=d.call(this,f,e,l)||this;e=f.getPaintProperty("line-color");f.hasDataDrivenColor=e?e.isDataDriven:!1;e=f.getPaintProperty("line-opacity");f.hasDataDrivenOpacity=e?e.isDataDriven:!1;e=f.getPaintProperty("line-width");f.hasDataDrivenWidth=e?e.isDataDriven:!1;f.hasDataDrivenLine=
f.hasDataDrivenColor||f.hasDataDrivenOpacity||f.hasDataDrivenWidth;return f}a(c,d);return c}(m);q.LineStyleLayer=b;b=function(d){function c(f,e,l){f=d.call(this,f,e,l)||this;e=f.getPaintProperty("icon-color");f.hasDataDrivenIconColor=e?e.isDataDriven:!1;e=f.getPaintProperty("icon-opacity");f.hasDataDrivenIconOpacity=e?e.isDataDriven:!1;e=f.getLayoutProperty("icon-size");f.hasDataDrivenIconSize=e?e.isDataDriven:!1;f.hasDataDrivenIcon=f.hasDataDrivenIconColor||f.hasDataDrivenIconOpacity||f.hasDataDrivenIconSize;
e=f.getPaintProperty("text-color");f.hasDataDrivenTextColor=e?e.isDataDriven:!1;e=f.getPaintProperty("text-opacity");f.hasDataDrivenTextOpacity=e?e.isDataDriven:!1;e=f.getLayoutProperty("text-size");f.hasDataDrivenTextSize=e?e.isDataDriven:!1;f.hasDataDrivenText=f.hasDataDrivenTextColor||f.hasDataDrivenTextOpacity||f.hasDataDrivenTextSize;return f}a(c,d);return c}(m);q.SymbolStyleLayer=b;m=function(d){function c(f,e,l){f=d.call(this,f,e,l)||this;e=f.getPaintProperty("circle-radius");f.hasDataDrivenRadius=
e?e.isDataDriven:!1;e=f.getPaintProperty("circle-color");f.hasDataDrivenColor=e?e.isDataDriven:!1;e=f.getPaintProperty("circle-opacity");f.hasDataDrivenOpacity=e?e.isDataDriven:!1;e=f.getPaintProperty("circle-stroke-width");f.hasDataDrivenStrokeWidth=e?e.isDataDriven:!1;e=f.getPaintProperty("circle-stroke-color");f.hasDataDrivenStrokeColor=e?e.isDataDriven:!1;e=f.getPaintProperty("circle-stroke-opacity");f.hasDataDrivenStrokeOpacity=e?e.isDataDriven:!1;e=f.getPaintProperty("circle-blur");f.hasDataDrivenBlur=
e?e.isDataDriven:!1;return f}a(c,d);return c}(m);q.CircleStyleLayer=m;m=function(){return function(d,c,f){this.cap=d.getLayoutValue("line-cap",c,f);this.join=d.getLayoutValue("line-join",c,f);this.miterLimit=d.getLayoutValue("line-miter-limit",c,f);this.roundLimit=d.getLayoutValue("line-round-limit",c,f)}}();q.LineLayout=m;m=function(){return function(d,c,f,e){this.allowOverlap=d.getLayoutValue("icon-allow-overlap",c,e);this.ignorePlacement=d.getLayoutValue("icon-ignore-placement",c,e);this.optional=
d.getLayoutValue("icon-optional",c,e);this.rotationAlignment=d.getLayoutValue("icon-rotation-alignment",c,e);this.size=d.getLayoutValue("icon-size",c,e);this.rotate=d.getLayoutValue("icon-rotate",c,e);this.padding=d.getLayoutValue("icon-padding",c,e);this.keepUpright=d.getLayoutValue("icon-keep-upright",c,e);this.offset=d.getLayoutValue("icon-offset",c,e);2===this.rotationAlignment&&(this.rotationAlignment=f?0:1)}}();q.IconLayout=m;m=function(){return function(d,c,f,e){this.allowOverlap=d.getLayoutValue("text-allow-overlap",
c,e);this.ignorePlacement=d.getLayoutValue("text-ignore-placement",c,e);this.optional=d.getLayoutValue("text-optional",c,e);this.rotationAlignment=d.getLayoutValue("text-rotation-alignment",c,e);this.fontArray=d.getLayoutValue("text-font",c,e);this.maxWidth=d.getLayoutValue("text-max-width",c,e);this.lineHeight=d.getLayoutValue("text-line-height",c,e);this.letterSpacing=d.getLayoutValue("text-letter-spacing",c,e);this.justify=d.getLayoutValue("text-justify",c,e);this.anchor=d.getLayoutValue("text-anchor",
c,e);this.maxAngle=d.getLayoutValue("text-max-angle",c,e);this.size=d.getLayoutValue("text-size",c,e);this.rotate=d.getLayoutValue("text-rotate",c,e);this.padding=d.getLayoutValue("text-padding",c,e);this.keepUpright=d.getLayoutValue("text-keep-upright",c,e);this.transform=d.getLayoutValue("text-transform",c,e);this.offset=d.getLayoutValue("text-offset",c,e);2===this.rotationAlignment&&(this.rotationAlignment=f?0:1)}}();q.TextLayout=m})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require",
"exports"],function(m,q){return function(){function a(b,g,h){this._op=b;"$type"===g?(this._val=h instanceof Array?h.map(function(k){return a._types.indexOf(k)}):a._types.indexOf(h),this._op+=11):(this._key=g,this._val=h)}a.prototype.filter=function(b){switch(this._op){case 0:return this._val;case 1:return b.values[this._key]===this._val;case 2:return b.values[this._key]!==this._val;case 3:return b.values[this._key]<this._val;case 4:return b.values[this._key]>this._val;case 5:return b.values[this._key]<=
this._val;case 6:return b.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(b.values[this._key]);case 8:return-1===this._val.indexOf(b.values[this._key]);case 9:for(var g=0,h=this._val;g<h.length;g++){var k=h[g];if(k.filter(b))return!0}return!1;case 10:g=0;for(h=this._val;g<h.length;g++)if(k=h[g],!k.filter(b))return!1;return!0;case 11:g=0;for(h=this._val;g<h.length;g++)if(k=h[g],k.filter(b))return!1;return!0;case 12:return b.type===this._val;case 13:return b.type!==this._val;case 14:return b.type<
this._val;case 15:return b.type>this._val;case 16:return b.type>=this._val;case 17:return b.type<=this._val;case 18:return-1!==this._val.indexOf(b.type);case 19:return-1===this._val.indexOf(b.type);case 20:return void 0!==b.values[this._key];case 21:return void 0===b.values[this._key]}};a.createFilter=function(b){if(!b)return new a(0,void 0,!0);var g=b[0];if(1>=b.length)return new a(0,void 0,"any"!==g);switch(g){case "\x3d\x3d":return new a(1,b[1],b[2]);case "!\x3d":return new a(2,b[1],b[2]);case "\x3e":return new a(4,
b[1],b[2]);case "\x3c":return new a(3,b[1],b[2]);case "\x3e\x3d":return new a(6,b[1],b[2]);case "\x3c\x3d":return new a(5,b[1],b[2]);case "in":return new a(7,b[1],b.slice(2));case "!in":return new a(8,b[1],b.slice(2));case "any":return new a(9,void 0,b.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,b.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,b.slice(1).map(a.createFilter.bind(this)));case "has":return new a(20,b[1],void 0);case "!has":return new a(21,
b[1],void 0);default:throw Error("invalid operator: "+g);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});m=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};
a.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",values:["point","line"],default:"point"},
"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",minimum:0,default:2},
"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},"text-letter-spacing":{type:"number",
default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:"none"},
"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}};a.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};a.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}};a.fillPaintDefinition=
{"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}};a.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",default:[0,
0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}};a.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,
maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",
default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",
minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};a.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",
length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}};return a}();q.StyleDefinition=m})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(m,q,a,b){return function(){function g(h,
k,d){this.isDataDriven=!1;switch(k.type){case "number":h=!0;break;case "color":h=!0;d=g._parseColor(d);break;case "array":h="number"===k.value;break;default:h=!1}null==d&&(d=k.default);h&&"interval"===d.type&&(h=!1);var c=d&&d.stops&&0<d.stops.length;if(c)for(var f=0,e=d.stops;f<e.length;f++){var l=e[f];l[1]=this._validate(l[1],k)}if(this.isDataDriven=d?!!d.property:!1)if(void 0!==d.default&&(d.default=this._validate(d.default,k)),c)switch(d.type){case "identity":this.getValue=this._buildIdentity(d,
k);break;case "categorical":this.getValue=this._buildCategorical(d,k);break;default:this.getValue=h?this._buildInterpolate(d,k):this._buildInterval(d,k)}else this.getValue=this._buildIdentity(d,k);else c?this.getValue=h?this._buildZoomInterpolate(d):this._buildZoomInterval(d):(d=this._validate(d,k),this.getValue=this._buildSimple(d))}g.prototype._validate=function(h,k){if("number"===k.type){if(h<k.minimum)return k.minimum;if(h>k.maximum)return k.maximum}return h};g.prototype._buildSimple=function(h){return function(){return h}};
g.prototype._buildIdentity=function(h,k){var d=this;return function(c,f){if(f){var e=f.values[h.property];"color"===k.type&&(e=g._parseColor(e))}void 0===e&&(e=h.default);return void 0!==e?d._validate(e,k):k.default}};g.prototype._buildCategorical=function(h,k){var d=this;return function(c,f){var e;f&&(e=f.values[h.property]);e=d._categorical(e,h.stops);return void 0!==e?e:void 0!==h.default?h.default:k.default}};g.prototype._buildInterval=function(h,k){var d=this;return function(c,f){var e;f&&(e=
f.values[h.property]);return"number"===typeof e?d._interval(e,h.stops):void 0!==h.default?h.default:k.default}};g.prototype._buildInterpolate=function(h,k){var d=this;return function(c,f){var e;f&&(e=f.values[h.property]);return"number"===typeof e?d._interpolate(e,h.stops,h.base||1):void 0!==h.default?h.default:k.default}};g.prototype._buildZoomInterpolate=function(h){var k=this;return function(d){return k._interpolate(d,h.stops,h.base||1)}};g.prototype._buildZoomInterval=function(h){var k=this;return function(d){return k._interval(d,
h.stops)}};g.prototype._categorical=function(h,k){for(var d=k.length,c=0;c<d;c++)if(k[c][0]===h)return k[c][1]};g.prototype._interval=function(h,k){for(var d=k.length,c=0,f=0;f<d;f++)if(k[f][0]<=h)c=f;else break;return k[c][1]};g.prototype._interpolate=function(h,k,d){for(var c,f,e=k.length,l=0;l<e;l++){var n=k[l];if(n[0]<=h)c=n;else{f=n;break}}if(c&&f){l=f[0]-c[0];h-=c[0];d=1===d?h/l:(Math.pow(d,h)-1)/(Math.pow(d,l)-1);if(Array.isArray(c[1])){c=c[1];f=f[1];h=[];for(l=0;l<c.length;l++)h.push(b.interpolate(c[l],
f[l],d));return h}return b.interpolate(c[1],f[1],d)}if(c)return c[1];if(f)return f[1]};g._isEmpty=function(h){for(var k in h)if(h.hasOwnProperty(k))return!1;return!0};g._parseColor=function(h){if(Array.isArray(h))return h;if("string"===typeof h){if(h=new a(h),!this._isEmpty(h))return a.toUnitRGBA(h)}else return h&&h.default&&(h.default=g._parseColor(h.default)),h&&h.stops&&(h.stops=h.stops.map(function(k){return[k[0],g._parseColor(k[1])]})),h};return g}()})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare",
"./core/accessorSupport/ensureType","dojo/colors"],function(m,q,a){function b(k){return Math.max(0,Math.min(q.ensureInteger(k),255))}var g=m([a],{declaredClass:"esri.Color",toJSON:function(){return[b(this.r),b(this.g),b(this.b),1<this.a?this.a:b(255*this.a)]},clone:function(){return new g(this.toRgba())}});g.toJSON=function(k){return k&&[b(k.r),b(k.g),b(k.b),1<k.a?k.a:b(255*k.a)]};g.fromJSON=function(k){return k&&new g([k[0],k[1],k[2],k[3]/255])};g.toUnitRGB=function(k){return[k.r/255,k.g/255,k.b/
255]};g.toUnitRGBA=function(k){return[k.r/255,k.g/255,k.b/255,null!=k.a?k.a:1]};var h="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(m=0;m<h.length;m++)g[h[m]]=a[h[m]];g.named.rebeccapurple=[102,51,153];return g})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(m,q,a,b){var g={};q.setObject("dojo.colors",g);var h=function(d,c,f){0>f&&++f;1<f&&--f;var e=6*f;return 1>e?d+(c-d)*e:1>2*f?c:2>3*f?d+(c-d)*(2/3-f)*6:d};m.colorFromRgb=
a.fromRgb=function(d,c){var f=d.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(f){d=f[2].split(/\s*,\s*/);var e=d.length;f=f[1];if("rgb"==f&&3==e||"rgba"==f&&4==e)return f=d[0],"%"==f.charAt(f.length-1)?(f=b.map(d,function(r){return 2.56*parseFloat(r)}),4==e&&(f[3]=d[3]),a.fromArray(f,c)):a.fromArray(d,c);if("hsl"==f&&3==e||"hsla"==f&&4==e){f=(parseFloat(d[0])%360+360)%360/360;var l=parseFloat(d[1])/100,n=parseFloat(d[2])/100;l=.5>=n?n*(l+1):n+l-n*l;n=2*n-l;f=[256*h(n,l,f+1/3),256*h(n,
l,f),256*h(n,l,f-1/3),1];4==e&&(f[3]=d[3]);return a.fromArray(f,c)}}return null};var k=function(d,c,f){d=Number(d);return isNaN(d)?f:d<c?c:d>f?f:d};a.prototype.sanitize=function(){this.r=Math.round(k(this.r,0,255));this.g=Math.round(k(this.g,0,255));this.b=Math.round(k(this.b,0,255));this.a=k(this.a,0,1);return this};g.makeGrey=a.makeGrey=function(d,c){return a.fromArray([d,d,d,c])};q.mixin(a.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,
245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,
107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],
goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,
25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,
69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return a})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require",
"exports"],function(m,q){function a(g,h){g%=h;return 0<=g?g:g+h}Object.defineProperty(q,"__esModule",{value:!0});q.C_INFINITY=Number.POSITIVE_INFINITY;q.C_PI=Math.PI;q.C_2PI=2*q.C_PI;q.C_PI_BY_2=q.C_PI/2;q.C_RAD_TO_256=128/q.C_PI;q.C_256_TO_RAD=q.C_PI/128;q.C_DEG_TO_256=256/360;q.C_DEG_TO_RAD=q.C_PI/180;q.C_SQRT2=1.414213562;q.C_SQRT2_INV=1/q.C_SQRT2;var b=1/Math.LN2;q.positiveMod=a;q.radToByte=function(g){return a(g*q.C_RAD_TO_256,256)};q.degToByte=function(g){return a(g*q.C_DEG_TO_256,256)};q.log2=
function(g){return Math.log(g)*b};q.sqr=function(g){return g*g};q.clamp=function(g,h,k){return Math.min(Math.max(g,h),k)};q.interpolate=function(g,h,k){return g*(1-k)+h*k};q.between=function(g,h,k){return g>=h&&g<=k||g>=k&&g<=h}})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileContainer":function(){define("require exports ../../core/tsSupport/extendsHelper dojo/has ../../core/promiseUtils ../../core/libs/gl-matrix/mat4 ../../core/libs/gl-matrix/vec3 ../2d/engine/Container ../2d/engine/webgl/enums ../2d/engine/webgl/WGLPainter ./GeometryUtils ./renderers/Renderer".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l){return function(n){function r(){var t=n.call(this)||this;t.isInitialized=!1;t._displayWidth=0;t._displayHeight=0;t._pointToCallbacks=new Map;t._tileCoordinateScale=k.create();t._orientationVec=k.create();t._displayScale=k.create();t._orientationVec.set([0,0,1]);t._defaultTransform=h.create();return t}a(r,n);r.prototype.initialize=function(t,w,v,y){this._renderer=new l;this._renderer.initialize(t,w);this._tileInfoView=y;this._tileInfo=v;this.isInitialized=!0};r.prototype.destroy=
function(){this._renderer&&(this._renderer.dispose(),this._renderer=null)};r.prototype.hittest=function(t,w){var v=this,y=[t,w];return g.create(function(x,B){v._pointToCallbacks.set(y,{resolve:x,reject:B});v.requestRender()},function(){v._pointToCallbacks.has(y)&&v._pointToCallbacks.delete(y)})};r.prototype.prepareChildrenRenderParameters=function(t){var w=t.state;if(!w||!this._tileInfo||!this.isInitialized)return t;t.displayLevel=this._tileInfo.scaleToZoom(w.scale);t.requiredLevel=this._tileInfoView.getSmallestInfoForScale(w.scale).level;
t.renderer=this._renderer;return t};r.prototype.renderChildren=function(t){var w=this;if(0!==this.children.length&&this.isInitialized&&t&&t.state){var v=f.default.toWGLDrawPhases(t.drawPhase);if(!(0<v.length&&v[0]===c.WGLDrawPhase.LABEL)){this.sortChildren(function(p,z){return p.key.level-z.key.level});v=this.children.length;for(var y=1;y<=v;y++){var x=this.children[y-1];x.attached&&(x.stencilData.reference=y,x.stencilData.mask=255)}this._updateTilesTransform(t.state,this._tileInfoView.getSmallestInfoForScale(t.state.scale).level,
this.children);v=t.context;v.setDepthWriteEnabled(!0);this._renderer.setStateParams(t.state,t.pixelRatio,t.displayLevel);this._renderer.drawClippingMasks(v,this.children);v.setStencilWriteMask(0);v.setBlendFunctionSeparate(1,771,1,771);v.setStencilOp(7680,7680,7681);v.setDepthFunction(515);v.setBlendingEnabled(!1);v.setStencilTestEnabled(!0);v.setDepthTestEnabled(!0);v.setDepthWriteEnabled(!0);t.drawphase=0;n.prototype.renderChildren.call(this,t);v.setDepthWriteEnabled(!1);v.setBlendingEnabled(!0);
t.drawphase=1;n.prototype.renderChildren.call(this,t);t.drawphase=2;n.prototype.renderChildren.call(this,t);v.setStencilTestEnabled(!1);v.setDepthTestEnabled(!1);if(b("esri-vector-tiles-debug"))for(y=0,x=this.children;y<x.length;y++){var B=x[y];B.attached&&B.visible&&this._renderer.renderTileInfo(v,B)}0<this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(p,z){p.resolve(w._hitTest(t,z[0],z[1]))}),this._pointToCallbacks.clear());this._renderer.needsRedraw()&&this.requestRender()}}};
r.prototype.removeAllChildren=function(){for(var t=0;t<this.children.length;t++)this.children[t].dispose();n.prototype.removeAllChildren.call(this)};r.prototype._hitTest=function(t,w,v){var y=this._tileInfoView.getClosestInfoForScale(t.state.scale).level,x=[0,0];t.state.toMap(x,[w,v]);var B=t.state.clone(),p=B.viewpoint.clone(),z=p.targetGeometry;z.x=x[0];z.y=x[1];p.targetGeometry=z;B.viewpoint=p;B.size=[3,3];this._renderer.setStateParams(B,t.pixelRatio,t.displayLevel);return(t=this._renderer.hitTest({drawPhase:0,
pixelRatio:t.pixelRatio,stationary:t.stationary,opacity:t.opacity,context:t.context,displayLevel:t.displayLevel,requiredLevel:t.requiredLevel,renderer:t.renderer,layerOpacity:t.layerOpacity,state:B,drawphase:3,painter:null},w,v,this.children,y,3,this._updateTilesTransform.bind(this)))&&0!==t.length?t[0]:null};r.prototype._updateTilesTransform=function(t,w,v){var y=1/t.width,x=1/t.height,B=[0,0];this._calculateRelativeViewProjMat(this._tileInfo.lodAt(w).resolution,t.resolution,t.rotation,this._tileInfo.size[1],
4096,t.width,t.height,this._defaultTransform);for(var p=0;p<v.length;p++){var z=v[p];t.toScreen(B,z.coords);B[1]=t.height-B[1];z.tileTransform.displayCoord[0]=2*B[0]*y-1;z.tileTransform.displayCoord[1]=2*B[1]*x-1;z.key.level===w&&4096===z.coordRange?z.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this._tileInfo.lodAt(z.key.level).resolution,t.resolution,t.rotation,this._tileInfo.size[1],z.coordRange,t.width,t.height,z.tileTransform.transform)}};r.prototype._calculateRelativeViewProjMat=
function(t,w,v,y,x,B,p,z){var u=.125;512!==y&&4096!==x&&(u=y/x);t=t/w*u;this._tileCoordinateScale.set([t,t,1]);if(B!==this._displayWidth||p!==this._displayHeight)this._displayScale.set([2/B,-2/p,1]),this._displayWidth=B,this._displayHeight=p;h.identity(z);h.scale(z,z,this._tileCoordinateScale);h.rotate(z,z,-v*e.C_DEG_TO_RAD,this._orientationVec);h.scale(z,z,this._displayScale);h.transpose(z,z)};return r}(d)})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(m){var q=
{scalar:{},SIMD:{},create:function(){var a=new m.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new m.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=
b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},fromValues:function(a,b,g,h,k,d,c,f,e,l,n,r,t,w,v,y){var x=new m.ARRAY_TYPE(16);x[0]=a;x[1]=b;x[2]=g;x[3]=h;x[4]=k;x[5]=d;x[6]=c;x[7]=f;x[8]=e;x[9]=l;x[10]=n;x[11]=r;x[12]=t;x[13]=w;x[14]=v;x[15]=y;return x},set:function(a,b,g,h,k,d,c,f,e,l,n,r,t,w,v,y,x){a[0]=b;a[1]=g;a[2]=h;a[3]=k;a[4]=d;a[5]=c;a[6]=f;a[7]=e;a[8]=l;a[9]=n;a[10]=r;a[11]=t;a[12]=w;a[13]=v;a[14]=y;a[15]=x;return a},
identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};q.scalar.transpose=function(a,b){if(a===b){var g=b[1],h=b[2],k=b[3],d=b[6],c=b[7],f=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=g;a[6]=b[9];a[7]=b[13];a[8]=h;a[9]=d;a[11]=b[14];a[12]=k;a[13]=c;a[14]=f}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],
a[14]=b[11],a[15]=b[15];return a};q.SIMD.transpose=function(a,b){var g=SIMD.Float32x4.load(b,0);var h=SIMD.Float32x4.load(b,4);var k=SIMD.Float32x4.load(b,8);b=SIMD.Float32x4.load(b,12);var d=SIMD.Float32x4.shuffle(g,h,0,1,4,5);var c=SIMD.Float32x4.shuffle(k,b,0,1,4,5);var f=SIMD.Float32x4.shuffle(d,c,0,2,4,6);d=SIMD.Float32x4.shuffle(d,c,1,3,5,7);SIMD.Float32x4.store(a,0,f);SIMD.Float32x4.store(a,4,d);d=SIMD.Float32x4.shuffle(g,h,2,3,6,7);c=SIMD.Float32x4.shuffle(k,b,2,3,6,7);g=SIMD.Float32x4.shuffle(d,
c,0,2,4,6);h=SIMD.Float32x4.shuffle(d,c,1,3,5,7);SIMD.Float32x4.store(a,8,g);SIMD.Float32x4.store(a,12,h);return a};q.transpose=m.USE_SIMD?q.SIMD.transpose:q.scalar.transpose;q.scalar.invert=function(a,b){var g=b[0],h=b[1],k=b[2],d=b[3],c=b[4],f=b[5],e=b[6],l=b[7],n=b[8],r=b[9],t=b[10],w=b[11],v=b[12],y=b[13],x=b[14];b=b[15];var B=g*f-h*c,p=g*e-k*c,z=g*l-d*c,u=h*e-k*f,D=h*l-d*f,I=k*l-d*e,C=n*y-r*v,E=n*x-t*v,G=n*b-w*v,H=r*x-t*y,L=r*b-w*y,O=t*b-w*x,W=B*O-p*L+z*H+u*G-D*E+I*C;if(!W)return null;W=1/W;
a[0]=(f*O-e*L+l*H)*W;a[1]=(k*L-h*O-d*H)*W;a[2]=(y*I-x*D+b*u)*W;a[3]=(t*D-r*I-w*u)*W;a[4]=(e*G-c*O-l*E)*W;a[5]=(g*O-k*G+d*E)*W;a[6]=(x*z-v*I-b*p)*W;a[7]=(n*I-t*z+w*p)*W;a[8]=(c*L-f*G+l*C)*W;a[9]=(h*G-g*L-d*C)*W;a[10]=(v*D-y*z+b*B)*W;a[11]=(r*z-n*D-w*B)*W;a[12]=(f*E-c*H-e*C)*W;a[13]=(g*H-h*E+k*C)*W;a[14]=(y*p-v*u-x*B)*W;a[15]=(n*u-r*p+t*B)*W;return a};q.SIMD.invert=function(a,b){var g=SIMD.Float32x4.load(b,0);var h=SIMD.Float32x4.load(b,4);var k=SIMD.Float32x4.load(b,8);var d=SIMD.Float32x4.load(b,
12);b=SIMD.Float32x4.shuffle(g,h,0,1,4,5);var c=SIMD.Float32x4.shuffle(k,d,0,1,4,5);var f=SIMD.Float32x4.shuffle(b,c,0,2,4,6);c=SIMD.Float32x4.shuffle(c,b,1,3,5,7);b=SIMD.Float32x4.shuffle(g,h,2,3,6,7);var e=SIMD.Float32x4.shuffle(k,d,2,3,6,7);var l=SIMD.Float32x4.shuffle(b,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,b,1,3,5,7);b=SIMD.Float32x4.mul(l,e);b=SIMD.Float32x4.swizzle(b,1,0,3,2);g=SIMD.Float32x4.mul(c,b);h=SIMD.Float32x4.mul(f,b);b=SIMD.Float32x4.swizzle(b,2,3,0,1);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,
b),g);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,b),h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);b=SIMD.Float32x4.mul(c,l);b=SIMD.Float32x4.swizzle(b,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,b),g);d=SIMD.Float32x4.mul(f,b);b=SIMD.Float32x4.swizzle(b,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(e,b));d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,b),d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);b=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,3,0,1),e);b=SIMD.Float32x4.swizzle(b,1,0,3,2);l=SIMD.Float32x4.swizzle(l,
2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,b),g);k=SIMD.Float32x4.mul(f,b);b=SIMD.Float32x4.swizzle(b,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(l,b));k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,b),k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);b=SIMD.Float32x4.mul(f,c);b=SIMD.Float32x4.swizzle(b,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,b),k);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,b),d);b=SIMD.Float32x4.swizzle(b,2,3,0,1);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,b),k);d=SIMD.Float32x4.sub(d,
SIMD.Float32x4.mul(l,b));b=SIMD.Float32x4.mul(f,e);b=SIMD.Float32x4.swizzle(b,1,0,3,2);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,b));k=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,b),k);b=SIMD.Float32x4.swizzle(b,2,3,0,1);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,b),h);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(c,b));b=SIMD.Float32x4.mul(f,l);b=SIMD.Float32x4.swizzle(b,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,b),h);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(c,b));b=SIMD.Float32x4.swizzle(b,2,
3,0,1);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(e,b));d=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,b),d);f=SIMD.Float32x4.mul(f,g);f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f);f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f);b=SIMD.Float32x4.reciprocalApproximation(f);f=SIMD.Float32x4.sub(SIMD.Float32x4.add(b,b),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(b,b)));f=SIMD.Float32x4.swizzle(f,0,0,0,0);if(!f)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(f,g));SIMD.Float32x4.store(a,
4,SIMD.Float32x4.mul(f,h));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(f,k));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(f,d));return a};q.invert=m.USE_SIMD?q.SIMD.invert:q.scalar.invert;q.scalar.adjoint=function(a,b){var g=b[0],h=b[1],k=b[2],d=b[3],c=b[4],f=b[5],e=b[6],l=b[7],n=b[8],r=b[9],t=b[10],w=b[11],v=b[12],y=b[13],x=b[14];b=b[15];a[0]=f*(t*b-w*x)-r*(e*b-l*x)+y*(e*w-l*t);a[1]=-(h*(t*b-w*x)-r*(k*b-d*x)+y*(k*w-d*t));a[2]=h*(e*b-l*x)-f*(k*b-d*x)+y*(k*l-d*e);a[3]=-(h*(e*w-l*t)-f*(k*w-d*t)+r*(k*
l-d*e));a[4]=-(c*(t*b-w*x)-n*(e*b-l*x)+v*(e*w-l*t));a[5]=g*(t*b-w*x)-n*(k*b-d*x)+v*(k*w-d*t);a[6]=-(g*(e*b-l*x)-c*(k*b-d*x)+v*(k*l-d*e));a[7]=g*(e*w-l*t)-c*(k*w-d*t)+n*(k*l-d*e);a[8]=c*(r*b-w*y)-n*(f*b-l*y)+v*(f*w-l*r);a[9]=-(g*(r*b-w*y)-n*(h*b-d*y)+v*(h*w-d*r));a[10]=g*(f*b-l*y)-c*(h*b-d*y)+v*(h*l-d*f);a[11]=-(g*(f*w-l*r)-c*(h*w-d*r)+n*(h*l-d*f));a[12]=-(c*(r*x-t*y)-n*(f*x-e*y)+v*(f*t-e*r));a[13]=g*(r*x-t*y)-n*(h*x-k*y)+v*(h*t-k*r);a[14]=-(g*(f*x-e*y)-c*(h*x-k*y)+v*(h*e-k*f));a[15]=g*(f*t-e*r)-c*
(h*t-k*r)+n*(h*e-k*f);return a};q.SIMD.adjoint=function(a,b){var g=SIMD.Float32x4.load(b,0);var h=SIMD.Float32x4.load(b,4);var k=SIMD.Float32x4.load(b,8);var d=SIMD.Float32x4.load(b,12);var c=SIMD.Float32x4.shuffle(g,h,0,1,4,5);var f=SIMD.Float32x4.shuffle(k,d,0,1,4,5);b=SIMD.Float32x4.shuffle(c,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,c,1,3,5,7);c=SIMD.Float32x4.shuffle(g,h,2,3,6,7);h=SIMD.Float32x4.shuffle(k,d,2,3,6,7);g=SIMD.Float32x4.shuffle(c,h,0,2,4,6);h=SIMD.Float32x4.shuffle(h,c,1,3,5,7);c=SIMD.Float32x4.mul(g,
h);c=SIMD.Float32x4.swizzle(c,1,0,3,2);k=SIMD.Float32x4.mul(f,c);d=SIMD.Float32x4.mul(b,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,c),k);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,c),d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);c=SIMD.Float32x4.mul(f,g);c=SIMD.Float32x4.swizzle(c,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,c),k);var e=SIMD.Float32x4.mul(b,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(h,c));e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,
c),e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,3,0,1),h);c=SIMD.Float32x4.swizzle(c,1,0,3,2);g=SIMD.Float32x4.swizzle(g,2,3,0,1);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,c),k);var l=SIMD.Float32x4.mul(b,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(g,c));l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,c),l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);c=SIMD.Float32x4.mul(b,f);c=SIMD.Float32x4.swizzle(c,1,0,3,2);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,
c),l);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,c),e);c=SIMD.Float32x4.swizzle(c,2,3,0,1);l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,c),l);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(g,c));c=SIMD.Float32x4.mul(b,h);c=SIMD.Float32x4.swizzle(c,1,0,3,2);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(g,c));l=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,c),l);c=SIMD.Float32x4.swizzle(c,2,3,0,1);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,c),d);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(f,c));c=SIMD.Float32x4.mul(b,g);
c=SIMD.Float32x4.swizzle(c,1,0,3,2);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,c),d);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(f,c));c=SIMD.Float32x4.swizzle(c,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(h,c));e=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,c),e);SIMD.Float32x4.store(a,0,k);SIMD.Float32x4.store(a,4,d);SIMD.Float32x4.store(a,8,l);SIMD.Float32x4.store(a,12,e);return a};q.adjoint=m.USE_SIMD?q.SIMD.adjoint:q.scalar.adjoint;q.determinant=function(a){var b=a[0],g=a[1],h=a[2],k=a[3],d=a[4],
c=a[5],f=a[6],e=a[7],l=a[8],n=a[9],r=a[10],t=a[11],w=a[12],v=a[13],y=a[14];a=a[15];return(b*c-g*d)*(r*a-t*y)-(b*f-h*d)*(n*a-t*v)+(b*e-k*d)*(n*y-r*v)+(g*f-h*c)*(l*a-t*w)-(g*e-k*c)*(l*y-r*w)+(h*e-k*f)*(l*v-n*w)};q.SIMD.multiply=function(a,b,g){var h=SIMD.Float32x4.load(b,0),k=SIMD.Float32x4.load(b,4),d=SIMD.Float32x4.load(b,8);b=SIMD.Float32x4.load(b,12);var c=SIMD.Float32x4.load(g,0);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,
1,1,1,1),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),b))));SIMD.Float32x4.store(a,0,c);c=SIMD.Float32x4.load(g,4);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),b))));SIMD.Float32x4.store(a,
4,c);c=SIMD.Float32x4.load(g,8);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),b))));SIMD.Float32x4.store(a,8,c);g=SIMD.Float32x4.load(g,12);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,0,0,0,0),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,
1,1,1,1),k),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,3,3,3,3),b))));SIMD.Float32x4.store(a,12,h);return a};q.scalar.multiply=function(a,b,g){var h=b[0],k=b[1],d=b[2],c=b[3],f=b[4],e=b[5],l=b[6],n=b[7],r=b[8],t=b[9],w=b[10],v=b[11],y=b[12],x=b[13],B=b[14];b=b[15];var p=g[0],z=g[1],u=g[2],D=g[3];a[0]=p*h+z*f+u*r+D*y;a[1]=p*k+z*e+u*t+D*x;a[2]=p*d+z*l+u*w+D*B;a[3]=p*c+z*n+u*v+D*b;p=g[4];z=g[5];u=g[6];D=g[7];a[4]=p*h+z*f+u*r+
D*y;a[5]=p*k+z*e+u*t+D*x;a[6]=p*d+z*l+u*w+D*B;a[7]=p*c+z*n+u*v+D*b;p=g[8];z=g[9];u=g[10];D=g[11];a[8]=p*h+z*f+u*r+D*y;a[9]=p*k+z*e+u*t+D*x;a[10]=p*d+z*l+u*w+D*B;a[11]=p*c+z*n+u*v+D*b;p=g[12];z=g[13];u=g[14];D=g[15];a[12]=p*h+z*f+u*r+D*y;a[13]=p*k+z*e+u*t+D*x;a[14]=p*d+z*l+u*w+D*B;a[15]=p*c+z*n+u*v+D*b;return a};q.multiply=m.USE_SIMD?q.SIMD.multiply:q.scalar.multiply;q.mul=q.multiply;q.scalar.translate=function(a,b,g){var h=g[0],k=g[1];g=g[2];if(b===a)a[12]=b[0]*h+b[4]*k+b[8]*g+b[12],a[13]=b[1]*h+
b[5]*k+b[9]*g+b[13],a[14]=b[2]*h+b[6]*k+b[10]*g+b[14],a[15]=b[3]*h+b[7]*k+b[11]*g+b[15];else{var d=b[0];var c=b[1];var f=b[2];var e=b[3];var l=b[4];var n=b[5];var r=b[6];var t=b[7];var w=b[8];var v=b[9];var y=b[10];var x=b[11];a[0]=d;a[1]=c;a[2]=f;a[3]=e;a[4]=l;a[5]=n;a[6]=r;a[7]=t;a[8]=w;a[9]=v;a[10]=y;a[11]=x;a[12]=d*h+l*k+w*g+b[12];a[13]=c*h+n*k+v*g+b[13];a[14]=f*h+r*k+y*g+b[14];a[15]=e*h+t*k+x*g+b[15]}return a};q.SIMD.translate=function(a,b,g){var h=SIMD.Float32x4.load(b,0),k=SIMD.Float32x4.load(b,
4),d=SIMD.Float32x4.load(b,8),c=SIMD.Float32x4.load(b,12);g=SIMD.Float32x4(g[0],g[1],g[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]);h=SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(g,0,0,0,0));k=SIMD.Float32x4.mul(k,SIMD.Float32x4.swizzle(g,1,1,1,1));d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(g,2,2,2,2));b=SIMD.Float32x4.add(h,SIMD.Float32x4.add(k,SIMD.Float32x4.add(d,c)));SIMD.Float32x4.store(a,12,b);return a};
q.translate=m.USE_SIMD?q.SIMD.translate:q.scalar.translate;q.scalar.scale=function(a,b,g){var h=g[0],k=g[1];g=g[2];a[0]=b[0]*h;a[1]=b[1]*h;a[2]=b[2]*h;a[3]=b[3]*h;a[4]=b[4]*k;a[5]=b[5]*k;a[6]=b[6]*k;a[7]=b[7]*k;a[8]=b[8]*g;a[9]=b[9]*g;a[10]=b[10]*g;a[11]=b[11]*g;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};q.SIMD.scale=function(a,b,g){g=SIMD.Float32x4(g[0],g[1],g[2],0);var h=SIMD.Float32x4.load(b,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(g,0,0,0,0)));h=SIMD.Float32x4.load(b,
4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(g,1,1,1,1)));h=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(g,2,2,2,2)));a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};q.scale=m.USE_SIMD?q.SIMD.scale:q.scalar.scale;q.rotate=function(a,b,g,h){var k=h[0],d=h[1];h=h[2];var c=Math.sqrt(k*k+d*d+h*h);if(Math.abs(c)<m.EPSILON)return null;c=1/c;k*=c;d*=c;h*=c;var f=Math.sin(g);var e=Math.cos(g);var l=1-e;g=b[0];c=b[1];var n=
b[2];var r=b[3];var t=b[4];var w=b[5];var v=b[6];var y=b[7];var x=b[8];var B=b[9];var p=b[10];var z=b[11];var u=k*k*l+e;var D=d*k*l+h*f;var I=h*k*l-d*f;var C=k*d*l-h*f;var E=d*d*l+e;var G=h*d*l+k*f;var H=k*h*l+d*f;k=d*h*l-k*f;d=h*h*l+e;a[0]=g*u+t*D+x*I;a[1]=c*u+w*D+B*I;a[2]=n*u+v*D+p*I;a[3]=r*u+y*D+z*I;a[4]=g*C+t*E+x*G;a[5]=c*C+w*E+B*G;a[6]=n*C+v*E+p*G;a[7]=r*C+y*E+z*G;a[8]=g*H+t*k+x*d;a[9]=c*H+w*k+B*d;a[10]=n*H+v*k+p*d;a[11]=r*H+y*k+z*d;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};
q.scalar.rotateX=function(a,b,g){var h=Math.sin(g);g=Math.cos(g);var k=b[4],d=b[5],c=b[6],f=b[7],e=b[8],l=b[9],n=b[10],r=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=k*g+e*h;a[5]=d*g+l*h;a[6]=c*g+n*h;a[7]=f*g+r*h;a[8]=e*g-k*h;a[9]=l*g-d*h;a[10]=n*g-c*h;a[11]=r*g-f*h;return a};q.SIMD.rotateX=function(a,b,g){var h=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=
b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var k=SIMD.Float32x4.load(b,4);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(k,g),SIMD.Float32x4.mul(b,h)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,g),SIMD.Float32x4.mul(k,h)));return a};q.rotateX=m.USE_SIMD?q.SIMD.rotateX:q.scalar.rotateX;q.scalar.rotateY=function(a,b,g){var h=Math.sin(g);g=Math.cos(g);var k=b[0],d=b[1],c=b[2],f=b[3],e=b[8],l=b[9],n=b[10],r=b[11];b!==a&&(a[4]=b[4],a[5]=
b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=k*g-e*h;a[1]=d*g-l*h;a[2]=c*g-n*h;a[3]=f*g-r*h;a[8]=k*h+e*g;a[9]=d*h+l*g;a[10]=c*h+n*g;a[11]=f*h+r*g;return a};q.SIMD.rotateY=function(a,b,g){var h=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var k=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,
g),SIMD.Float32x4.mul(b,h)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(k,h),SIMD.Float32x4.mul(b,g)));return a};q.rotateY=m.USE_SIMD?q.SIMD.rotateY:q.scalar.rotateY;q.scalar.rotateZ=function(a,b,g){var h=Math.sin(g);g=Math.cos(g);var k=b[0],d=b[1],c=b[2],f=b[3],e=b[4],l=b[5],n=b[6],r=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=k*g+e*h;a[1]=d*g+l*h;a[2]=c*g+n*h;a[3]=f*g+r*h;a[4]=e*g-k*h;a[5]=l*g-d*h;a[6]=n*g-c*
h;a[7]=r*g-f*h;return a};q.SIMD.rotateZ=function(a,b,g){var h=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var k=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(k,g),SIMD.Float32x4.mul(b,h)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,g),SIMD.Float32x4.mul(k,h)));return a};q.rotateZ=m.USE_SIMD?
q.SIMD.rotateZ:q.scalar.rotateZ;q.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};q.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromRotation=function(a,b,g){var h=g[0],k=g[1];g=g[2];var d=Math.sqrt(h*h+k*k+g*g);if(Math.abs(d)<m.EPSILON)return null;d=1/d;h*=d;k*=
d;g*=d;d=Math.sin(b);b=Math.cos(b);var c=1-b;a[0]=h*h*c+b;a[1]=k*h*c+g*d;a[2]=g*h*c-k*d;a[3]=0;a[4]=h*k*c-g*d;a[5]=k*k*c+b;a[6]=g*k*c+h*d;a[7]=0;a[8]=h*g*c+k*d;a[9]=k*g*c-h*d;a[10]=g*g*c+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromXRotation=function(a,b){var g=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=g;a[7]=0;a[8]=0;a[9]=-g;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromYRotation=function(a,b){var g=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=
0;a[2]=-g;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=g;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromZRotation=function(a,b){var g=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=g;a[2]=0;a[3]=0;a[4]=-g;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromRotationTranslation=function(a,b,g){var h=b[0],k=b[1],d=b[2],c=b[3],f=h+h,e=k+k,l=d+d;b=h*f;var n=h*e;h*=l;var r=k*e;k*=l;d*=l;f*=c;e*=c;c*=l;a[0]=1-(r+d);a[1]=n+c;a[2]=h-e;a[3]=0;a[4]=n-
c;a[5]=1-(b+d);a[6]=k+f;a[7]=0;a[8]=h+e;a[9]=k-f;a[10]=1-(b+r);a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a};q.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};q.getRotation=function(a,b){var g=b[0]+b[5]+b[10],h=0;0<g?(h=2*Math.sqrt(g+1),a[3]=.25*h,a[0]=(b[6]-b[9])/h,a[1]=(b[8]-b[2])/h,a[2]=(b[1]-b[4])/h):b[0]>b[5]&b[0]>b[10]?(h=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/h,a[0]=.25*h,a[1]=(b[1]+b[4])/h,a[2]=(b[8]+b[2])/h):b[5]>b[10]?(h=2*Math.sqrt(1+b[5]-b[0]-
b[10]),a[3]=(b[8]-b[2])/h,a[0]=(b[1]+b[4])/h,a[1]=.25*h,a[2]=(b[6]+b[9])/h):(h=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/h,a[0]=(b[8]+b[2])/h,a[1]=(b[6]+b[9])/h,a[2]=.25*h);return a};q.fromRotationTranslationScale=function(a,b,g,h){var k=b[0],d=b[1],c=b[2],f=b[3],e=k+k,l=d+d,n=c+c;b=k*e;var r=k*l;k*=n;var t=d*l;d*=n;c*=n;e*=f;l*=f;f*=n;n=h[0];var w=h[1];h=h[2];a[0]=(1-(t+c))*n;a[1]=(r+f)*n;a[2]=(k-l)*n;a[3]=0;a[4]=(r-f)*w;a[5]=(1-(b+c))*w;a[6]=(d+e)*w;a[7]=0;a[8]=(k+l)*h;a[9]=(d-e)*h;a[10]=
(1-(b+t))*h;a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a};q.fromRotationTranslationScaleOrigin=function(a,b,g,h,k){var d=b[0],c=b[1],f=b[2],e=b[3],l=d+d,n=c+c,r=f+f;b=d*l;var t=d*n;d*=r;var w=c*n;c*=r;f*=r;l*=e;n*=e;e*=r;r=h[0];var v=h[1];h=h[2];var y=k[0],x=k[1];k=k[2];a[0]=(1-(w+f))*r;a[1]=(t+e)*r;a[2]=(d-n)*r;a[3]=0;a[4]=(t-e)*v;a[5]=(1-(b+f))*v;a[6]=(c+l)*v;a[7]=0;a[8]=(d+n)*h;a[9]=(c-l)*h;a[10]=(1-(b+w))*h;a[11]=0;a[12]=g[0]+y-(a[0]*y+a[4]*x+a[8]*k);a[13]=g[1]+x-(a[1]*y+a[5]*x+a[9]*
k);a[14]=g[2]+k-(a[2]*y+a[6]*x+a[10]*k);a[15]=1;return a};q.fromQuat=function(a,b){var g=b[0],h=b[1],k=b[2];b=b[3];var d=g+g,c=h+h,f=k+k;g*=d;var e=h*d;h*=c;var l=k*d,n=k*c;k*=f;d*=b;c*=b;b*=f;a[0]=1-h-k;a[1]=e+b;a[2]=l-c;a[3]=0;a[4]=e-b;a[5]=1-g-k;a[6]=n+d;a[7]=0;a[8]=l+c;a[9]=n-d;a[10]=1-g-h;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.frustum=function(a,b,g,h,k,d,c){var f=1/(g-b),e=1/(k-h),l=1/(d-c);a[0]=2*d*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*d*e;a[6]=0;a[7]=0;a[8]=(g+b)*f;a[9]=(k+h)*
e;a[10]=(c+d)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=c*d*2*l;a[15]=0;return a};q.perspective=function(a,b,g,h,k){b=1/Math.tan(b/2);var d=1/(h-k);a[0]=b/g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(k+h)*d;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*k*h*d;a[15]=0;return a};q.perspectiveFromFieldOfView=function(a,b,g,h){var k=Math.tan(b.upDegrees*Math.PI/180),d=Math.tan(b.downDegrees*Math.PI/180),c=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var f=2/(c+b),e=2/
(k+d);a[0]=f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=e;a[6]=0;a[7]=0;a[8]=-((c-b)*f*.5);a[9]=(k-d)*e*.5;a[10]=h/(g-h);a[11]=-1;a[12]=0;a[13]=0;a[14]=h*g/(g-h);a[15]=0;return a};q.ortho=function(a,b,g,h,k,d,c){var f=1/(b-g),e=1/(h-k),l=1/(d-c);a[0]=-2*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+g)*f;a[13]=(k+h)*e;a[14]=(c+d)*l;a[15]=1;return a};q.lookAt=function(a,b,g,h){var k=b[0],d=b[1];b=b[2];var c=h[0];var f=h[1];var e=h[2];var l=g[0];h=g[1];var n=g[2];
if(Math.abs(k-l)<m.EPSILON&&Math.abs(d-h)<m.EPSILON&&Math.abs(b-n)<m.EPSILON)return q.identity(a);g=k-l;h=d-h;l=b-n;var r=1/Math.sqrt(g*g+h*h+l*l);g*=r;h*=r;l*=r;n=f*l-e*h;e=e*g-c*l;c=c*h-f*g;(r=Math.sqrt(n*n+e*e+c*c))?(r=1/r,n*=r,e*=r,c*=r):c=e=n=0;f=h*c-l*e;var t=l*n-g*c;var w=g*e-h*n;(r=Math.sqrt(f*f+t*t+w*w))?(r=1/r,f*=r,t*=r,w*=r):w=t=f=0;a[0]=n;a[1]=f;a[2]=g;a[3]=0;a[4]=e;a[5]=t;a[6]=h;a[7]=0;a[8]=c;a[9]=w;a[10]=l;a[11]=0;a[12]=-(n*k+e*d+c*b);a[13]=-(f*k+t*d+w*b);a[14]=-(g*k+h*d+l*b);a[15]=
1;return a};q.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};q.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],
2)+Math.pow(a[15],2))};q.add=function(a,b,g){a[0]=b[0]+g[0];a[1]=b[1]+g[1];a[2]=b[2]+g[2];a[3]=b[3]+g[3];a[4]=b[4]+g[4];a[5]=b[5]+g[5];a[6]=b[6]+g[6];a[7]=b[7]+g[7];a[8]=b[8]+g[8];a[9]=b[9]+g[9];a[10]=b[10]+g[10];a[11]=b[11]+g[11];a[12]=b[12]+g[12];a[13]=b[13]+g[13];a[14]=b[14]+g[14];a[15]=b[15]+g[15];return a};q.subtract=function(a,b,g){a[0]=b[0]-g[0];a[1]=b[1]-g[1];a[2]=b[2]-g[2];a[3]=b[3]-g[3];a[4]=b[4]-g[4];a[5]=b[5]-g[5];a[6]=b[6]-g[6];a[7]=b[7]-g[7];a[8]=b[8]-g[8];a[9]=b[9]-g[9];a[10]=b[10]-
g[10];a[11]=b[11]-g[11];a[12]=b[12]-g[12];a[13]=b[13]-g[13];a[14]=b[14]-g[14];a[15]=b[15]-g[15];return a};q.sub=q.subtract;q.multiplyScalar=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;a[3]=b[3]*g;a[4]=b[4]*g;a[5]=b[5]*g;a[6]=b[6]*g;a[7]=b[7]*g;a[8]=b[8]*g;a[9]=b[9]*g;a[10]=b[10]*g;a[11]=b[11]*g;a[12]=b[12]*g;a[13]=b[13]*g;a[14]=b[14]*g;a[15]=b[15]*g;return a};q.multiplyScalarAndAdd=function(a,b,g,h){a[0]=b[0]+g[0]*h;a[1]=b[1]+g[1]*h;a[2]=b[2]+g[2]*h;a[3]=b[3]+g[3]*h;a[4]=b[4]+g[4]*h;a[5]=
b[5]+g[5]*h;a[6]=b[6]+g[6]*h;a[7]=b[7]+g[7]*h;a[8]=b[8]+g[8]*h;a[9]=b[9]+g[9]*h;a[10]=b[10]+g[10]*h;a[11]=b[11]+g[11]*h;a[12]=b[12]+g[12]*h;a[13]=b[13]+g[13]*h;a[14]=b[14]+g[14]*h;a[15]=b[15]+g[15]*h;return a};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};q.equals=function(a,b){var g=a[0],h=
a[1],k=a[2],d=a[3],c=a[4],f=a[5],e=a[6],l=a[7],n=a[8],r=a[9],t=a[10],w=a[11],v=a[12],y=a[13],x=a[14];a=a[15];var B=b[0],p=b[1],z=b[2],u=b[3],D=b[4],I=b[5],C=b[6],E=b[7],G=b[8],H=b[9],L=b[10],O=b[11],W=b[12],Z=b[13],ba=b[14];b=b[15];return Math.abs(g-B)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(B))&&Math.abs(h-p)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(k-z)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(z))&&Math.abs(d-u)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(u))&&Math.abs(c-D)<=
m.EPSILON*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(f-I)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(e-C)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(C))&&Math.abs(l-E)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(n-G)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(G))&&Math.abs(r-H)<=m.EPSILON*Math.max(1,Math.abs(r),Math.abs(H))&&Math.abs(t-L)<=m.EPSILON*Math.max(1,Math.abs(t),Math.abs(L))&&Math.abs(w-O)<=m.EPSILON*Math.max(1,Math.abs(w),Math.abs(O))&&Math.abs(v-W)<=m.EPSILON*
Math.max(1,Math.abs(v),Math.abs(W))&&Math.abs(y-Z)<=m.EPSILON*Math.max(1,Math.abs(y),Math.abs(Z))&&Math.abs(x-ba)<=m.EPSILON*Math.max(1,Math.abs(x),Math.abs(ba))&&Math.abs(a-b)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return q})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var m={EPSILON:1E-6};m.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;m.RANDOM=Math.random;m.ENABLE_SIMD=!1;m.SIMD_AVAILABLE=m.ARRAY_TYPE===Float32Array&&"SIMD"in
this;m.USE_SIMD=m.ENABLE_SIMD&&m.SIMD_AVAILABLE;m.setMatrixArrayType=function(a){m.ARRAY_TYPE=a};var q=Math.PI/180;m.toRadian=function(a){return a*q};m.equals=function(a,b){return Math.abs(a-b)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return m})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],function(m){var q={create:function(){var a=new m.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new m.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];
return b},fromValues:function(a,b,g){var h=new m.ARRAY_TYPE(3);h[0]=a;h[1]=b;h[2]=g;return h},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,g,h){a[0]=b;a[1]=g;a[2]=h;return a},add:function(a,b,g){a[0]=b[0]+g[0];a[1]=b[1]+g[1];a[2]=b[2]+g[2];return a},subtract:function(a,b,g){a[0]=b[0]-g[0];a[1]=b[1]-g[1];a[2]=b[2]-g[2];return a}};q.sub=q.subtract;q.multiply=function(a,b,g){a[0]=b[0]*g[0];a[1]=b[1]*g[1];a[2]=b[2]*g[2];return a};q.mul=q.multiply;q.divide=function(a,b,g){a[0]=
b[0]/g[0];a[1]=b[1]/g[1];a[2]=b[2]/g[2];return a};q.div=q.divide;q.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};q.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};q.min=function(a,b,g){a[0]=Math.min(b[0],g[0]);a[1]=Math.min(b[1],g[1]);a[2]=Math.min(b[2],g[2]);return a};q.max=function(a,b,g){a[0]=Math.max(b[0],g[0]);a[1]=Math.max(b[1],g[1]);a[2]=Math.max(b[2],g[2]);return a};q.round=function(a,b){a[0]=Math.round(b[0]);
a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};q.scale=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;return a};q.scaleAndAdd=function(a,b,g,h){a[0]=b[0]+g[0]*h;a[1]=b[1]+g[1]*h;a[2]=b[2]+g[2]*h;return a};q.distance=function(a,b){var g=b[0]-a[0],h=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(g*g+h*h+a*a)};q.dist=q.distance;q.squaredDistance=function(a,b){var g=b[0]-a[0],h=b[1]-a[1];a=b[2]-a[2];return g*g+h*h+a*a};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],g=a[1];a=a[2];return Math.sqrt(b*
b+g*g+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0],g=a[1];a=a[2];return b*b+g*g+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};q.normalize=function(a,b){var g=b[0],h=b[1],k=b[2];g=g*g+h*h+k*k;0<g&&(g=1/Math.sqrt(g),a[0]=b[0]*g,a[1]=b[1]*g,a[2]=b[2]*g);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};q.cross=function(a,b,g){var h=b[0],k=b[1];b=b[2];
var d=g[0],c=g[1];g=g[2];a[0]=k*g-b*c;a[1]=b*d-h*g;a[2]=h*c-k*d;return a};q.lerp=function(a,b,g,h){var k=b[0],d=b[1];b=b[2];a[0]=k+h*(g[0]-k);a[1]=d+h*(g[1]-d);a[2]=b+h*(g[2]-b);return a};q.hermite=function(a,b,g,h,k,d){var c=d*d,f=c*(2*d-3)+1,e=c*(d-2)+d,l=c*(d-1);d=c*(3-2*d);a[0]=b[0]*f+g[0]*e+h[0]*l+k[0]*d;a[1]=b[1]*f+g[1]*e+h[1]*l+k[1]*d;a[2]=b[2]*f+g[2]*e+h[2]*l+k[2]*d;return a};q.bezier=function(a,b,g,h,k,d){var c=1-d,f=c*c,e=d*d,l=f*c;f*=3*d;c*=3*e;d*=e;a[0]=b[0]*l+g[0]*f+h[0]*c+k[0]*d;a[1]=
b[1]*l+g[1]*f+h[1]*c+k[1]*d;a[2]=b[2]*l+g[2]*f+h[2]*c+k[2]*d;return a};q.random=function(a,b){b=b||1;var g=2*m.RANDOM()*Math.PI,h=2*m.RANDOM()-1,k=Math.sqrt(1-h*h)*b;a[0]=Math.cos(g)*k;a[1]=Math.sin(g)*k;a[2]=h*b;return a};q.transformMat4=function(a,b,g){var h=b[0],k=b[1];b=b[2];var d=g[3]*h+g[7]*k+g[11]*b+g[15];d=d||1;a[0]=(g[0]*h+g[4]*k+g[8]*b+g[12])/d;a[1]=(g[1]*h+g[5]*k+g[9]*b+g[13])/d;a[2]=(g[2]*h+g[6]*k+g[10]*b+g[14])/d;return a};q.transformMat3=function(a,b,g){var h=b[0],k=b[1];b=b[2];a[0]=
h*g[0]+k*g[3]+b*g[6];a[1]=h*g[1]+k*g[4]+b*g[7];a[2]=h*g[2]+k*g[5]+b*g[8];return a};q.transformQuat=function(a,b,g){var h=b[0],k=b[1],d=b[2];b=g[0];var c=g[1],f=g[2];g=g[3];var e=g*h+c*d-f*k,l=g*k+f*h-b*d,n=g*d+b*k-c*h;h=-b*h-c*k-f*d;a[0]=e*g+h*-b+l*-f-n*-c;a[1]=l*g+h*-c+n*-b-e*-f;a[2]=n*g+h*-f+e*-c-l*-b;return a};q.rotateX=function(a,b,g,h){var k=[],d=[];k[0]=b[0]-g[0];k[1]=b[1]-g[1];k[2]=b[2]-g[2];d[0]=k[0];d[1]=k[1]*Math.cos(h)-k[2]*Math.sin(h);d[2]=k[1]*Math.sin(h)+k[2]*Math.cos(h);a[0]=d[0]+g[0];
a[1]=d[1]+g[1];a[2]=d[2]+g[2];return a};q.rotateY=function(a,b,g,h){var k=[],d=[];k[0]=b[0]-g[0];k[1]=b[1]-g[1];k[2]=b[2]-g[2];d[0]=k[2]*Math.sin(h)+k[0]*Math.cos(h);d[1]=k[1];d[2]=k[2]*Math.cos(h)-k[0]*Math.sin(h);a[0]=d[0]+g[0];a[1]=d[1]+g[1];a[2]=d[2]+g[2];return a};q.rotateZ=function(a,b,g,h){var k=[],d=[];k[0]=b[0]-g[0];k[1]=b[1]-g[1];k[2]=b[2]-g[2];d[0]=k[0]*Math.cos(h)-k[1]*Math.sin(h);d[1]=k[0]*Math.sin(h)+k[1]*Math.cos(h);d[2]=k[2];a[0]=d[0]+g[0];a[1]=d[1]+g[1];a[2]=d[2]+g[2];return a};q.forEach=
function(){var a=q.create();return function(b,g,h,k,d,c){g||(g=3);h||(h=0);for(k=k?Math.min(k*g+h,b.length):b.length;h<k;h+=g)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],d(a,a,c),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2];return b}}();q.angle=function(a,b){a=q.fromValues(a[0],a[1],a[2]);b=q.fromValues(b[0],b[1],b[2]);q.normalize(a,a);q.normalize(b,b);b=q.dot(a,b);return 1<b?0:Math.acos(b)};q.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===
b[2]};q.equals=function(a,b){var g=a[0],h=a[1];a=a[2];var k=b[0],d=b[1];b=b[2];return Math.abs(g-k)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(h-d)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(a-b)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return q})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(m,q,a,b){var g;(function(h){h[h.BEFORE=0]="BEFORE";h[h.ATTACHING=
1]="ATTACHING";h[h.DETACHING=2]="DETACHING";h[h.RENDERING=3]="RENDERING";h[h.AFTER=4]="AFTER";h[h.DONE=5]="DONE"})(g||(g={}));return function(h){function k(){var d=null!==h&&h.apply(this,arguments)||this;d._childrenSet=new Set;d._childrenToAttach=[];d._childrenToDetach=[];d._renderPhase=g.DONE;d.children=[];return d}a(k,h);Object.defineProperty(k.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});k.prototype.detach=function(d){var c=this.children.concat(this._childrenToDetach);
d=this.prepareChildrenRenderParameters(d);for(var f=0;f<c.length;f++){var e=c[f];e.attached&&(this.detachChild(e,d),e.attached=!1,e.parent=null)}};k.prototype.doRender=function(d){var c=this.prepareChildrenRenderParameters(d);this._renderPhase=g.BEFORE;this.beforeRenderChildren(d,c);this._renderPhase=g.ATTACHING;this.attachChildren(c);this._renderPhase=g.DETACHING;for(var f=this._childrenToDetach;0<f.length;){var e=f.shift();this.detachChild(e,c);e.attached=!1;e.parent=null}this._renderPhase=g.RENDERING;
this.renderChildren(c);this._renderPhase=g.AFTER;this.afterRenderChildren(d,c);this._renderPhase=g.DONE};k.prototype.addChild=function(d){return this.addChildAt(d,this.children.length)};k.prototype.addChildAt=function(d,c){void 0===c&&(c=this.numChildren);if(!d||this.contains(d))return d;var f=d.parent;f&&f!==this&&f.removeChild(d);c>=this.numChildren?this.children.push(d):this.children.splice(c,0,d);this._childrenSet.add(d);c=this._childrenToDetach.indexOf(d);-1<c&&this._childrenToDetach.splice(c,
1);this._childrenToAttach.push(d);this._renderPhase>=g.RENDERING&&this.requestRender();return d};k.prototype.contains=function(d){return this._childrenSet.has(d)};k.prototype.getChildIndex=function(d){return this.children.indexOf(d)};k.prototype.getChildAt=function(d){return 0>d||d>this.children.length?null:this.children[d]};k.prototype.removeAllChildren=function(){for(var d=this.numChildren;d--;)this.removeChildAt(0)};k.prototype.removeChild=function(d){return this.contains(d)?this.removeChildAt(this.getChildIndex(d)):
d};k.prototype.removeChildAt=function(d){if(0>d||d>=this.children.length)return null;d=this.children.splice(d,1)[0];this._childrenSet["delete"](d);if(d.attached)this._childrenToDetach.push(d),this._renderPhase>=g.RENDERING&&this.requestRender();else{var c=this._childrenToAttach.indexOf(d);-1<c&&this._childrenToAttach.splice(c,1)}return d};k.prototype.requestChildRender=function(d){d&&d.parent===this&&this._renderPhase>=g.RENDERING&&this.requestRender()};k.prototype.setChildIndex=function(d,c){var f=
this.getChildIndex(d);-1<f&&(this.children.splice(f,1),this.children.splice(c,0,d),this._renderPhase>=g.RENDERING&&this.requestRender())};k.prototype.sortChildren=function(d){this._renderPhase>g.RENDERING&&this.requestRender();return this.children.sort(d)};k.prototype.attachChildren=function(d){var c=this._childrenToAttach;if(0!==c.length)for(var f=0,e=!1;!e;)e=c[f],this.attachChild(e,d)?(e.attached=!0,e.parent=this,c.splice(f,1)):++f,e=c.length===f};k.prototype.renderChildren=function(d){for(var c=
this.children,f=c.length,e=0;e<f;e++){var l=c[e];l.attached&&this.renderChild(l,d)}};k.prototype.beforeRenderChildren=function(d,c){};k.prototype.attachChild=function(d,c){return d.attach(c)};k.prototype.detachChild=function(d,c){d.detach(c)};k.prototype.renderChild=function(d,c){d.processRender(c)};k.prototype.afterRenderChildren=function(d,c){};return k}(b)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./Evented"],
function(m,q,a,b){return function(g){function h(){var k=null!==g&&g.apply(this,arguments)||this;k._renderRequestedCalled=!1;k._attached=!1;k._opacity=1;k.renderRequested=!1;k._visible=!0;return k}a(h,g);Object.defineProperty(h.prototype,"attached",{get:function(){return this._attached},set:function(k){this._attached!==k&&((this._attached=k)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,
"opacity",{get:function(){return this._opacity},set:function(k){this._opacity!==k&&(this._opacity=k,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"visible",{get:function(){return this._visible},set:function(k){this._visible!==k&&(this._visible=k,this.requestRender())},enumerable:!0,configurable:!0});h.prototype.attach=function(k){return!0};h.prototype.detach=function(k){};h.prototype.processRender=function(k){this._renderRequestedCalled=!1;this.doRender(k);
this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};h.prototype.requestRender=function(){var k=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);k!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};h.prototype.dispose=function(){};return h}(b.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(m,q,a,b,g){Object.defineProperty(q,"__esModule",{value:!0});m=function(){function h(){}h.prototype.on=function(k,d){return b.after(this,"on"+k,d,!0)};h.prototype.once=function(k,d){return g.once(this,k,d)};h.prototype.emit=function(k){g.emit(this,k,this)};h.prototype.hasEventListener=function(k){k="on"+k;return!(!this[k]||!this[k].after)};return h}();q.Evented=m;q.EventedMixin=function(h){return function(k){function d(){return null!==
k&&k.apply(this,arguments)||this}a(d,k);d.prototype.on=function(c,f){return b.after(this,"on"+c,f,!0)};d.prototype.once=function(c,f){return g.once(this,c,f)};d.prototype.emit=function(c,f){g.emit(this,c,f)};d.prototype.hasEventListener=function(c){c="on"+c;return!(!this[c]||!this[c].after)};return d}(h)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=
1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL";a[a.NONE=5]="NONE";a[a.UNKNOWN=6]="UNKNOWN";a[a.COUNT=7]="COUNT"})(q.WGLGeometryType||(q.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(q.WGLGeometryTransactionStatus||(q.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.MARKER=4]="MARKER";a[a.TEXT=8]="TEXT";a[a.LABEL=16]="LABEL";a[a.LABEL_ALPHA=32]=
"LABEL_ALPHA";a[a.HITTEST=64]="HITTEST";a[a.HIGHLIGHT=128]="HIGHLIGHT";a[a.CLIP=256]="CLIP";a[a.DEBUG=512]="DEBUG";a[a.NUM_DRAW_PHASES=12]="NUM_DRAW_PHASES"})(q.WGLDrawPhase||(q.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(q.VVType||(q.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]=
"SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(q.WGLVVFlag||(q.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(q.WGLVVTarget||(q.WGLVVTarget={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]=
"SQUARE"})(q.CapType||(q.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=3]="ROUND"})(q.JoinType||(q.JoinType={}));(function(a){a.SIMPLE_MARKER="esriSMS";a.SIMPLE_LINE="esriSLS";a.SIMPLE_FILL="esriSFS";a.PICTURE_MARKER="esriPMS";a.PICTURE_FILL="esriPFS";a.TEXT="esriTS"})(q.EsriSymbolType||(q.EsriSymbolType={}));(function(a){a.SIMPLE_MARKER="simple-marker";a.SIMPLE_LINE="simple-line";a.SIMPLE_FILL="simple-fill";a.PICTURE_MARKER="picture-marker";
a.PICTURE_FILL="picture-fill";a.TEXT="text"})(q.EsriSymbolTypeKebab||(q.EsriSymbolTypeKebab={}))})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLabel ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t,w,v,y){Object.defineProperty(q,"__esModule",{value:!0});m=function(){function p(){this._initialized=!1}p.prototype.registerPass=function(z,u){this._initialize();for(var D=0;D<u.length;D++)this._passMap.set(u[D],z);return this};p.prototype.getPaintPassTs=function(z){this._initialize();return this._passMap.has(z)?[this._passMap.get(z)]:[]};p.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return p}();q.WGLPainterOptions=
m;var x=new Uint8Array(4*c.C_HITTEST_SEARCH_SIZE*c.C_HITTEST_SEARCH_SIZE),B=new Uint32Array(x.buffer);m=function(){function p(){this._hlPainter=new v;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new d}p.allGeometryPhases=function(){return[h.WGLDrawPhase.FILL,
h.WGLDrawPhase.LINE,h.WGLDrawPhase.MARKER,h.WGLDrawPhase.TEXT]};p.toWGLDrawPhases=function(z){for(var u=[],D,I=0;I<h.WGLDrawPhase.NUM_DRAW_PHASES;I++)D=1<<I,D&z&&u.push(D);return u};Object.defineProperty(p.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});p.prototype.dispose=function(){this.materialManager.dispose();
this.textureManager=null;this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null);this._passes&&(this._passes.forEach(function(z){return z.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(z){return z.forEach(function(u){return u.dispose()})}),this._brushes.clear())};p.prototype.initialize=function(z){this.materialManager.initialize(z)};p.prototype.update=function(z,u){this._state=z;if(this._state.width!==
this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/z.width,this._extrudeScaleVector[1]=-2/z.height,g.identity(this._extrudeMatrix),g.rotate(this._extrudeMatrix,this._extrudeMatrix,-z.rotation*k.C_DEG_TO_RAD,this._extrudeRotateVector),g.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),g.transpose(this._extrudeMatrix,this._extrudeMatrix),g.identity(this._extrudeNoRotationMatrix),g.scale(this._extrudeNoRotationMatrix,
this._extrudeNoRotationMatrix,this._extrudeScaleVector),g.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};p.prototype.getBrushes=function(z){if(!this._brushes){var u=new l.default,D=new t.default,I=new r.default,C=new w.default,E=new n.default,G=new f.default,H=new e.default;this._brushes=new Map;this._brushes.set(h.WGLDrawPhase.FILL,[u]);this._brushes.set(h.WGLDrawPhase.MARKER,
[D]);this._brushes.set(h.WGLDrawPhase.LINE,[I]);this._brushes.set(h.WGLDrawPhase.TEXT,[C]);this._brushes.set(h.WGLDrawPhase.LABEL,[E]);this._brushes.set(h.WGLDrawPhase.LABEL_ALPHA,[E]);this._brushes.set(h.WGLDrawPhase.HITTEST,[u,D,I,C]);this._brushes.set(h.WGLDrawPhase.HIGHLIGHT,[u,D,I,C]);this._brushes.set(h.WGLDrawPhase.CLIP,[H]);this._brushes.set(h.WGLDrawPhase.DEBUG,[G])}if(!this._brushes.has(z))throw Error("WGLPainter: Tried to get brush for unknown phase: "+z);return this._brushes.get(z)};p.prototype.bindTextureManager=
function(z){this.textureManager=z};p.prototype.draw=function(z,u,D,I){D[0]===h.WGLDrawPhase.LABEL_ALPHA&&D[0]===h.WGLDrawPhase.LABEL||this._drawClippingRects(z,u);var C=z.context;C.setBlendingEnabled(!0);C.setStencilWriteMask(0);C.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(z,u,D,I);this._debugTiles(z,u)};p.prototype.setHighlightOptions=function(z){this._hlPainter.setHighlightOptions(z)};p.prototype.highlight=function(z,u){var D=z.context,I=D.getViewport();this._hlPainter.setup(D,I.width,
I.height);this._hlPainter.startMaskDraw(D);this._drawClippingRects(z,u);D.setBlendingEnabled(!0);D.setStencilWriteMask(0);D.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(z,u,[h.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(D)};p.prototype.hitTest=function(z,u){var D=c.C_HITTEST_SEARCH_SIZE,I=[0,0],C=[0,0],E=z.state;E.toMap(I,[0,0]);E.toMap(C,[D,D]);if(0===u.filter(function(W){return!(I[0]>W.bounds[2]||C[0]<W.bounds[0]||I[1]<W.bounds[1]||C[1]>W.bounds[3])}).length)return[];E=z.context;this._hittestFBO||
(this._hittestFBO=y.create(E,{colorTarget:0,depthStencilTarget:3,width:D,height:D}));var G=E.getViewport(),H=E.getBoundFramebufferObject();E.bindFramebuffer(this._hittestFBO);E.setViewport(0,0,D,D);this._drawClippingRects(z,u);var L=E.gl;E.setClearColor(1,1,1,1);E.clear(L.COLOR_BUFFER_BIT);E.setBlendingEnabled(!1);E.setStencilWriteMask(0);this._drawPhases(z,u,[h.WGLDrawPhase.HITTEST]);E.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,0,D,D,6408,5121,x);z=D*D;u=new Set;for(D=0;D<z;D++)L=B[D],
4294967295!==L&&u.add(L);E.bindFramebuffer(H);E.setViewport(G.x,G.y,G.width,G.height);var O=[];u.forEach(function(W){O.push(W)});return O};p.prototype._getPaintPass=function(z){this._passes||(this._passes=new Map);if(!this._passes.has(z))try{this._passes.set(z,new z)}catch(u){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+z+",\n"+u);}return this._passes.get(z)};p.prototype._getPaintPasses=function(z,u){var D=this;return u.getPaintPassTs(z).map(function(I){return D._getPaintPass(I)})};
p.prototype._drawPhases=function(z,u,D,I){z.context.setStencilTestEnabled(!0);for(var C=0;C<D.length;C++){var E=D[C],G=I?this._getPaintPasses(E,I):[];E=a({},z,{drawPhase:E});G.forEach(function(O){return O.preRender(z,z.rendererInfo)});for(var H=0,L=u;H<L.length;H++)L[H].doRender(E);G.reverse().forEach(function(O){return O.postRender(z,z.rendererInfo)})}z.context.setStencilTestEnabled(!1)};p.prototype._debugTiles=function(z,u){b("esri-feature-tiles-debug")&&this._drawPhases(z,u,[h.WGLDrawPhase.DEBUG])};
p.prototype._drawClippingRects=function(z,u){if(0!==u.length){var D=z.context;D.setDepthWriteEnabled(!1);D.setDepthTestEnabled(!1);D.setStencilTestEnabled(!0);D.setBlendingEnabled(!1);D.setColorMask(!1,!1,!1,!1);D.setStencilOp(7680,7680,7681);D.setClearStencil(0);D.clear(D.gl.STENCIL_BUFFER_BIT);D.setStencilWriteMask(255);D=0;for(var I=u.length;D<u.length;D++,I--){var C=u[D];C.attached&&(C.stencilRef=I)}this._drawPhases(z,u,[h.WGLDrawPhase.CLIP]);z.context.setColorMask(!0,!0,!0,!0)}};return p}();
q.default=m})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(m,q){function a(g,h){g%=h;return 0<=g?g:g+h}Object.defineProperty(q,"__esModule",{value:!0});q.C_INFINITY=Number.POSITIVE_INFINITY;q.C_PI=Math.PI;q.C_2PI=2*q.C_PI;q.C_PI_BY_2=q.C_PI/2;q.C_RAD_TO_256=128/q.C_PI;q.C_256_TO_RAD=q.C_PI/128;q.C_DEG_TO_256=256/360;q.C_DEG_TO_RAD=q.C_PI/180;q.C_SQRT2=1.414213562;q.C_SQRT2_INV=1/q.C_SQRT2;var b=1/Math.LN2;q.positiveMod=a;q.radToByte=
function(g){return a(g*q.C_RAD_TO_256,256)};q.degToByte=function(g){return a(g*q.C_DEG_TO_256,256)};q.log2=function(g){return Math.log(g)*b};q.sqr=function(g){return g*g};q.clamp=function(g,h,k){return Math.min(Math.max(g,h),k)};q.interpolate=function(g,h,k){return g*(1-k)+h*k};q.between=function(g,h,k){return g>=h&&g<=k||g>=k&&g<=h}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/labelShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),
function(m,q,a,b,g,h,k,d,c,f){return function(){function e(){this._programRep=new Map;this.isInitialize=!1}e.prototype.dispose=function(){this._fillShaderVariations&&(this._fillShaderVariations.dispose(),this._fillShaderVariations=null);this._lineShaderVariations&&(this._lineShaderVariations.dispose(),this._lineShaderVariations=null);this._iconShaderVariations&&(this._iconShaderVariations.dispose(),this._iconShaderVariations=null);this._textShaderVariations&&(this._textShaderVariations.dispose(),
this._textShaderVariations=null);0!==this._programRep.size&&(this._programRep.forEach(function(l){return l.dispose()}),this._programRep.clear())};e.prototype.initialize=function(l){if(!this.isInitialize){var n=new f("label",["labelVS","labelFS"],[],k,l);n.addDefine("ID","ID",[!0,!0],"ID");n.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");n.addDefine("SDF","SDF",[!1,!1],"SDF");n.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");n.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");n.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");n.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");n.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");n.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");n.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");n.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");n.addDefine("PATTERN",
"PATTERN",[!1,!1],"PATTERN");n.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var r=new f("text",["textVS","textFS"],[],c,l);r.addDefine("ID","ID",[!0,!0],"ID");r.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");r.addDefine("SDF","SDF",[!1,!1],"SDF");r.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");r.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");r.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],
"VV_SIZE_FIELD_STOPS");r.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");r.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");r.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");r.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");r.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");r.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");r.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var t=new f("icon",["iconVS","iconFS"],
[],h,l);t.addDefine("ID","ID",[!0,!0],"ID");t.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");t.addDefine("SDF","SDF",[!0,!0],"SDF");t.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");t.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");t.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");t.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");t.addDefine("VV_COLOR",
"VV_COLOR",[!0,!1],"VV_COLOR");t.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");t.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");t.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");t.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");t.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var w=new f("fill",["fillVS","fillFS"],[],g,l);w.addDefine("ID","ID",[!0,!0],"ID");w.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");w.addDefine("SDF","SDF",
[!1,!1],"SDF");w.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");w.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");w.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");w.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");w.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");w.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");w.addDefine("VV_OPACITY",
"VV_OPACITY",[!0,!1],"VV_OPACITY");w.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");w.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");w.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");l=new f("line",["lineVS","lineFS"],[],d,l);l.addDefine("ID","ID",[!0,!0],"ID");l.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");l.addDefine("SDF","SDF",[!0,!0],"SDF");l.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");l.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");l.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");l.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");l.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");l.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");l.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");l.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");l.addDefine("PATTERN",
"PATTERN",[!0,!0],"PATTERN");l.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._labelShaderVariations=n;this._textShaderVariations=r;this._fillShaderVariations=w;this._iconShaderVariations=t;this._lineShaderVariations=l;this.isInitialize=!0}};e.prototype.getProgram=function(l,n,r){l|=n===a.WGLDrawPhase.HITTEST?8:0;l|=n===a.WGLDrawPhase.HIGHLIGHT?16:0;if(this._programRep[l])return this._programRep[l];if(!(this._iconShaderVariations&&this._fillShaderVariations&&this._lineShaderVariations&&this._labelShaderVariations))return null;
n=b.getMaterialVariations(l);switch(n.geometryType){case a.WGLGeometryType.MARKER:var t=this._iconShaderVariations.getProgram(n.variations,null,null,r);break;case a.WGLGeometryType.TEXT:t=this._textShaderVariations.getProgram(n.variations,null,null,r);break;case a.WGLGeometryType.LABEL:t=this._labelShaderVariations.getProgram(n.variations,null,null,r);break;case a.WGLGeometryType.FILL:t=this._fillShaderVariations.getProgram(n.variations,null,null,r);break;case a.WGLGeometryType.LINE:t=this._lineShaderVariations.getProgram(n.variations,
null,null,r)}t&&(this._programRep[l]=t);return t};return e}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(m,q,a,b,g){function h(d){var c=[];c[0]=d.sdf?!0:!1;c[1]=d.vvSizeMinMaxValue?!0:!1;c[2]=d.vvSizeScaleStops?!0:!1;c[3]=d.vvSizeFieldStops?!0:!1;c[4]=d.vvSizeUnitValue?!0:!1;c[5]=d.vvColor?!0:!1;c[6]=d.vvRotation?!0:!1;c[7]=d.vvOpacity?!0:!1;c[8]=d.visibility?!0:!1;c[9]=d.pattern?
!0:!1;c[10]=d.heatmap?!0:!1;return c.reduce(function(f,e,l){e&&(f|=1<<l+2);return f},0)}function k(d){if(d.geometryType===a.WGLGeometryType.UNKNOWN)return-1;var c=h(d)<<3;return d.geometryType+c}Object.defineProperty(q,"__esModule",{value:!0});q.createTextMaterialInfo=function(d,c,f){var e=new b.default,l=new g;l.geometryType=f;l.sdf=!0;l.pattern=!1;l.visibility=!1;l.heatmap=!1;e.texBindingInfo.push(new b.TexBindingInfo(2,d.page,"u_texture"));0===c?l.vvOpacity=l.vvSizeMinMaxValue=l.vvSizeScaleStops=
l.vvSizeFieldStops=l.vvSizeUnitValue=l.vvColor=l.vvRotation=!1:(l.vvOpacity=0!==(c&a.WGLVVFlag.OPACITY),l.vvSizeMinMaxValue=0!==(c&a.WGLVVFlag.SIZE_MINMAX_VALUE),l.vvSizeScaleStops=0!==(c&a.WGLVVFlag.SIZE_SCALE_STOPS),l.vvSizeFieldStops=0!==(c&a.WGLVVFlag.SIZE_FIELD_STOPS),l.vvSizeUnitValue=0!==(c&a.WGLVVFlag.SIZE_UNIT_VALUE),l.vvColor=0!==(c&a.WGLVVFlag.COLOR),l.vvRotation=0!==(c&a.WGLVVFlag.ROTATION));e.materialKey=k(l);e.materialKeyInfo=l;return e};q.createMaterialInfo=function(d,c,f){var e=new b.default,
l=new g;l.geometryType=c;d?(d=d.spriteMosaicItem,l.sdf=d.sdf,l.pattern=!0,e.texBindingInfo.push(new b.TexBindingInfo(1,d.page,"u_texture"))):(l.sdf=!1,l.pattern=!1);0===f?l.vvOpacity=l.vvSizeMinMaxValue=l.vvSizeScaleStops=l.vvSizeFieldStops=l.vvSizeUnitValue=l.vvColor=l.vvRotation=!1:(l.vvOpacity=0!==(f&a.WGLVVFlag.OPACITY),l.vvSizeMinMaxValue=0!==(f&a.WGLVVFlag.SIZE_MINMAX_VALUE),l.vvSizeScaleStops=0!==(f&a.WGLVVFlag.SIZE_SCALE_STOPS),l.vvSizeFieldStops=0!==(f&a.WGLVVFlag.SIZE_FIELD_STOPS),l.vvSizeUnitValue=
0!==(f&a.WGLVVFlag.SIZE_UNIT_VALUE),l.vvColor=0!==(f&a.WGLVVFlag.COLOR),l.vvRotation=0!==(f&a.WGLVVFlag.ROTATION));l.visibility=!1;e.materialKey=k(l);e.materialKeyInfo=l;return e};q.getMaterialKey=k;q.getMaterialVariations=function(d){var c=d&7;d>>=3;return{geometryType:c,variations:[0!==(d&1),0!==(d&2),0!==(d&4),0!==(d&8),0!==(d&16),0!==(d&32),0!==(d&64),0!==(d&128),0!==(d&256),0!==(d&512),0!==(d&1024),0!==(d&2048),0!==(d&4096)]}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(m,q,a,b,g,h,k){Object.defineProperty(q,"__esModule",{value:!0});var d=function(){function f(e,l,n){this.unit=e;this.pageId=l;this.semantic=n}f.prototype.clone=function(){return new f(this.unit,this.pageId,this.semantic)};f.prototype.serialize=function(e){e.writeInt32(this.unit);e.writeInt32(this.pageId);return e};f.deserialize=function(e){var l=e.readInt32();e=e.readInt32();return new f(l,e,"u_texture")};return f}();q.TexBindingInfo=d;var c=function(){function f(e,l){this.name=e;this.value=
l}f.prototype.clone=function(){return new f(this.name,this.value)};f.prototype.serialize=function(e){e.writeInt32(this.value);return e};f.deserialize=function(e){e=e.readInt32();return new f("u_my_param",e)};return f}();q.MaterialParam=c;m=function(){function f(){this.texBindingInfo=[];this.materialParams=[]}f.fromSprite=function(e,l,n){var r=new f,t=new h;t.geometryType=l;e?(t.sdf=e.sdf,t.pattern=!0,r.texBindingInfo.push(new d(1,e.page,"u_texture"))):(t.sdf=!1,t.pattern=!1);0===n?t.vvOpacity=t.vvSizeMinMaxValue=
t.vvSizeScaleStops=t.vvSizeFieldStops=t.vvSizeUnitValue=t.vvColor=t.vvRotation=!1:(t.vvOpacity=0!==(n&a.WGLVVFlag.OPACITY),t.vvSizeMinMaxValue=0!==(n&a.WGLVVFlag.SIZE_MINMAX_VALUE),t.vvSizeScaleStops=0!==(n&a.WGLVVFlag.SIZE_SCALE_STOPS),t.vvSizeFieldStops=0!==(n&a.WGLVVFlag.SIZE_FIELD_STOPS),t.vvSizeUnitValue=0!==(n&a.WGLVVFlag.SIZE_UNIT_VALUE),t.vvColor=0!==(n&a.WGLVVFlag.COLOR),t.vvRotation=0!==(n&a.WGLVVFlag.ROTATION));t.visibility=!1;r.materialKey=b.getMaterialKey(t);r.materialKeyInfo=t;return r};
f.fromGlyph=function(e,l,n){var r=new f,t=new h;t.geometryType=l;t.sdf=!0;t.pattern=!1;t.visibility=!1;t.heatmap=!1;r.texBindingInfo.push(new d(2,e.page,"u_texture"));0===n?t.vvOpacity=t.vvSizeMinMaxValue=t.vvSizeScaleStops=t.vvSizeFieldStops=t.vvSizeUnitValue=t.vvColor=t.vvRotation=!1:(t.vvOpacity=0!==(n&a.WGLVVFlag.OPACITY),t.vvSizeMinMaxValue=0!==(n&a.WGLVVFlag.SIZE_MINMAX_VALUE),t.vvSizeScaleStops=0!==(n&a.WGLVVFlag.SIZE_SCALE_STOPS),t.vvSizeFieldStops=0!==(n&a.WGLVVFlag.SIZE_FIELD_STOPS),t.vvSizeUnitValue=
0!==(n&a.WGLVVFlag.SIZE_UNIT_VALUE),t.vvColor=0!==(n&a.WGLVVFlag.COLOR),t.vvRotation=0!==(n&a.WGLVVFlag.ROTATION));r.materialKey=b.getMaterialKey(t);r.materialKeyInfo=t;return r};f.prototype.copy=function(e){this.materialParams=e.materialParams.map(function(l){return l.clone()});this.texBindingInfo=e.texBindingInfo.map(function(l){return l.clone()});e.materialKeyInfo&&(this.materialKeyInfo=new h,this.materialKeyInfo.copy(e.materialKeyInfo));this.materialKey=e.materialKey};f.prototype.serialize=function(e){e.writeInt32(this.materialKey);
k.serializeList(e,this.texBindingInfo);k.serializeList(e,this.materialParams);return e};f.deserialize=function(e){var l=new f;l.materialKey=e.readInt32();l.texBindingInfo=k.deserializeList(e,d);l.materialParams=k.deserializeList(e,c);l.materialKeyInfo=new h;g(l.materialKeyInfo,l.materialKey);return l};return f}();q.default=m})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(m,q){return function(a,b){a.geometryType=
b&7;b>>=3;a.sdf=0!==(b&4);a.vvSizeMinMaxValue=0!==(b&8);a.vvSizeScaleStops=0!==(b&16);a.vvSizeFieldStops=0!==(b&32);a.vvSizeUnitValue=0!==(b&64);a.vvColor=0!==(b&128);a.vvRotation=0!==(b&256);a.vvOpacity=0!==(b&512);a.visibility=0!==(b&1024);a.pattern=0!==(b&2048);a.heatmap=0!==(b&4096);return a}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(m,q){return function(){function a(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=
this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(b){this.geometryType=b.geometryType;this.sdf=b.sdf;this.vvSizeMinMaxValue=b.vvSizeMinMaxValue;this.vvSizeScaleStops=b.vvSizeScaleStops;this.vvSizeFieldStops=b.vvSizeFieldStops;this.vvSizeUnitValue=b.vvSizeUnitValue;this.vvColor=b.vvColor;this.vvRotation=b.vvRotation;this.vvOpacity=b.vvOpacity;this.visibility=b.visibility;this.pattern=b.pattern;
this.heatmap=b.heatmap};a.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};a.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};a.prototype.hasVVColor=function(){return this.vvColor};a.prototype.hasVVRotation=function(){return this.vvRotation};a.prototype.hasVVOpacity=
function(){return this.vvOpacity};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.serializeList=function(a,b){if(null===b)a.writeInt32(0);else{a.writeInt32(b.length);for(var g=0;g<b.length;g++)b[g].serialize(a);return a}};q.deserializeList=function(a,b,g){var h=a.readInt32();h=Array(h);for(var k=0;k<h.length;k++)h[k]=b.deserialize(a,g);return h}})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require",
"exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(m,q,a,b){m=new b;b.parse(a,m);return m})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(m,q,a){return function(){function b(g){if(g)for(var h in g)this[h]=g[h]}b.parse=function(g,h){g=a.parse(g).getElementsByTagName("snippet");for(var k=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,d=/[\$\s]+/g,c=/\(([^\(\)]*)\)/,f=0;f<g.length;f++){for(var e=
g[f].getAttribute("name"),l=g[f].textContent;;){var n=l.match(k);if(null==n)break;var r=n[0].replace(d,""),t=r.match(c),w=void 0;t&&(w=t[1].split(",").map(function(v){return v.trim()}));r=r.replace(c,"");w=h._instantiate(r,w);l=l.replace(n[0],w)}h[e]=l}};b.prototype._instantiate=function(g,h){g=this[g];for(h||(h=[]);;){var k=g.match(/\$(\d+)/);if(null==k)break;var d=parseInt(k[1],10);g=g.replace(k[0],h[d])}return g};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require",
"exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(m,q,a,b){m=new b;b.parse(a,m);return m})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaderSnippets":function(){define(["require","exports","dojo/text!./labelShaders.xml","../../../../webgl/ShaderSnippets"],function(m,q,a,b){m=new b;b.parse(a,m);return m})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml",
"../../../../webgl/ShaderSnippets"],function(m,q,a,b){m=new b;b.parse(a,m);return m})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml","../../../../webgl/ShaderSnippets"],function(m,q,a,b){m=new b;b.parse(a,m);return m})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(m,q,a,b,g){function h(k){return k.reduce(function(d,
c,f){c&&(d|=1<<f);return d},0)}return function(){function k(d,c,f,e,l,n){"string"===typeof d?this._initParams(d,c,f,e,l,n):this._initObject({programNamePrefix:d.programNamePrefix,shaderSnippetPrefixes:d.shaderSnippetPrefixes,baseDefines:d.baseDefines,snippets:d.snippets,rctx:d.rctx,vertexAttribLocs:d.vertexAttribLocs})}k.prototype.dispose=function(){this._programCache&&(this._programCache.forEach(function(d){return d.dispose()}),this._programCache.clear())};k.prototype._initObject=function(d){this._initParams(d.programNamePrefix,
d.shaderSnippetPrefixes,d.baseDefines,d.snippets,d.rctx,d.vertexAttribLocs)};k.prototype._initParams=function(d,c,f,e,l,n){this._defaultSnippets=e;this._defaultRctx=l;this._defaultVertexAttribLocs=n;this._programCache=new Map;this._variationInfo=new Map;this._shaderSourceVariator=new b(d,c,f)};k.prototype.addDefine=function(d,c,f,e){this._shaderSourceVariator.addDefine(d,c,f,e)};k.prototype.addBinaryShaderSnippetSuffix=function(d,c,f){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(d,c,f)};
k.prototype.addNaryShaderSnippetSuffix=function(d,c){this._shaderSourceVariator.addNaryShaderSnippetSuffix(d,c)};k.prototype.getProgram=function(d,c,f,e){c=c||this._defaultSnippets;f=f||this._defaultRctx;e=e||this._defaultVertexAttribLocs;if(!c)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");if(!f)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!e)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");
var l=h(d);if(this._programCache.has(l))return this._programCache.get(l);d=this._shaderSourceVariator.getShaderVariation(d);var n=d.shaderSnippetNames[0];var r=c[n];g.assert(null!=r,"shader snippet '"+n+"' does not exist");n=d.shaderSnippetNames[1];c=c[n];g.assert(null!=c,"shader snippet '"+n+"' does not exist");f=new a(f,r,c,e,d.defines);this._programCache.set(l,f);return f};k.prototype.getProgramByKey=function(d){if(this._programCache.has(d))return this._programCache.get(d);if(!this._variationInfo[d])return null;
var c=this._variationInfo[d],f=this._defaultSnippets,e=this._defaultRctx,l=this._defaultVertexAttribLocs;var n=c.shaderSnippetNames[0];var r=f[n];g.assert(null!=r,"shader snippet '"+n+"' does not exist");n=c.shaderSnippetNames[1];f=f[n];g.assert(null!=f,"shader snippet '"+n+"' does not exist");c=new a(e,r,f,l,c.defines);this._programCache.set(d,c);return c};k.prototype.getProgramInfo=function(d){var c=this._shaderSourceVariator.getShaderVariation(d);d=h(d);this._variationInfo[d]||(this._variationInfo[d]=
c);return{name:c.programName,key:d}};return k}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports","dojo/has","./ShaderTranspiler"],function(m,q,a,b){return function(){function g(h,k,d,c,f){void 0===f&&(f={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3=
{};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};this._context=h;this._vertexShaderSource=k;this._fragmentShaderSource=d;if(Array.isArray(f))for(k=0;k<f.length;k++)this._defines[f[k]]="1";else this._defines=f;this._id=g._nextId++;this._locations=c;a("esri-webgl-debug")&&h.instanceCounter.incrementCount(3)}Object.defineProperty(g.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glName",{get:function(){return this._glName},
enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});g.prototype.getDefine=function(h){return this._defines[h]};g.prototype.dispose=function(){if(this._context){var h=this._context.gl;this._vShader&&(h.deleteShader(this._vShader),this._vShader=null);this._fShader&&(h.deleteShader(this._fShader),this._fShader=null);this._glName&&(h.deleteProgram(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3);
this._context=null}};g.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);var h=this._context.gl,k=h.createProgram();h.attachShader(k,this._vShader);h.attachShader(k,this._fShader);for(var d in this._locations)h.bindAttribLocation(k,this._locations[d],d);h.linkProgram(k);h.getProgramParameter(k,h.LINK_STATUS);this._glName=k;this._initialized=!0}};g.prototype.getUniformLocation=function(h){this.initialize();void 0===this._nameToUniformLocation[h]&&
(this._nameToUniformLocation[h]=this._context.gl.getUniformLocation(this._glName,h));return this._nameToUniformLocation[h]};g.prototype.hasUniform=function(h){return null!==this.getUniformLocation(h)};g.prototype.getAttribLocation=function(h){this.initialize();void 0===this._nameToAttribLocation[h]&&(this._nameToAttribLocation[h]=this._context.gl.getAttribLocation(this._glName,h));return this._nameToAttribLocation[h]};g.prototype.setUniform1i=function(h,k){var d=this._nameToUniform1[h];if(void 0===
d||k!==d)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(h),k),this._nameToUniform1[h]=k};g.prototype.setUniform1f=function(h,k){var d=this._nameToUniform1[h];if(void 0===d||k!==d)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(h),k),this._nameToUniform1[h]=k};g.prototype.setUniform1fv=function(h,k){var d=this._nameToUniform2[h];void 0!==d&&g._arraysEqual(k,d)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(h),
k),void 0===d?this._nameToUniform2[h]=new Float32Array(k):d.set(k))};g.prototype.setUniform2f=function(h,k,d){var c=this._nameToUniform2[h];if(void 0===c||k!==c[0]||d!==c[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(h),k,d),void 0===c?this._nameToUniform2[h]=new Float32Array([k,d]):(c[0]=k,c[1]=d)};g.prototype.setUniform2fv=function(h,k){var d=this._nameToUniform2[h];void 0!==d&&g._arraysEqual(k,d)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(h),
k),void 0===d?this._nameToUniform2[h]=new Float32Array(k):d.set(k))};g.prototype.setUniform3f=function(h,k,d,c){var f=this._nameToUniform3[h];if(void 0===f||k!==f[0]||d!==f[1]||c!==f[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(h),k,d,c),void 0===f?this._nameToUniform3[h]=new Float32Array([k,d,c]):(f[0]=k,f[1]=d,f[2]=c)};g.prototype.setUniform3fv=function(h,k){var d=this._nameToUniform3[h];void 0!==d&&g._arraysEqual(k,d)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(h),
k),void 0===d?this._nameToUniform3[h]=new Float32Array(k):d.set(k))};g.prototype.setUniform4f=function(h,k,d,c,f){var e=this._nameToUniform4[h];if(void 0===e||k!==e[0]||d!==e[1]||c!==e[2]||f!==e[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(h),k,d,c,f),void 0===e?this._nameToUniform4[h]=new Float32Array([k,d,c,f]):(e[0]=k,e[1]=d,e[2]=c,e[3]=f)};g.prototype.setUniform4fv=function(h,k){var d=this._nameToUniform4[h];void 0!==d&&g._arraysEqual(k,d)||(this._context.bindProgram(this),
this._context.gl.uniform4fv(this.getUniformLocation(h),k),void 0===d?this._nameToUniform4[h]=new Float32Array(k):d.set(k))};g.prototype.setUniformMatrix3fv=function(h,k,d){void 0===d&&(d=!1);var c=this._nameToUniformMatrix3[h];void 0!==c&&(9===c.length?g._matrix3Equal(c,k):g._arraysEqual(k,c))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(h),d,k),void 0===c?this._nameToUniformMatrix3[h]=new Float32Array(k):c.set(k))};g.prototype.setUniformMatrix4fv=function(h,
k,d){void 0===d&&(d=!1);var c=this._nameToUniformMatrix4[h];void 0!==c&&(16===c.length?g._matrix4Equal(c,k):g._arraysEqual(k,c))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(h),d,k),void 0===c?this._nameToUniformMatrix4[h]=new Float32Array(k):c.set(k))};g._padToThree=function(h){var k=h.toString();1E3>h&&(k=("  "+h).slice(-3));return k};g.prototype._addLineNumbers=function(h){var k=2;return h.replace(/\n/g,function(){return"\n"+g._padToThree(k++)+":"})};
g.prototype._loadShader=function(h){var k=35633===h,d=k?this._vertexShaderSource:this._fragmentShaderSource,c="",f;for(f in this._defines)c+="#define "+f+" "+this._defines[f]+"\n";d=c+d;"webgl2"===this._context.contextVersion&&(d=b.transpileShader(d,k?"vertex":"fragment"));k=this._context.gl;h=k.createShader(h);k.shaderSource(h,d);k.compileShader(h);k.getShaderParameter(h,k.COMPILE_STATUS);return h};g._matrix4Equal=function(h,k){return h[0]===k[0]&&h[1]===k[1]&&h[2]===k[2]&&h[3]===k[3]&&h[4]===k[4]&&
h[5]===k[5]&&h[6]===k[6]&&h[7]===k[7]&&h[8]===k[8]&&h[9]===k[9]&&h[10]===k[10]&&h[11]===k[11]&&h[12]===k[12]&&h[13]===k[13]&&h[14]===k[14]&&h[15]===k[15]};g._matrix3Equal=function(h,k){return h[0]===k[0]&&h[1]===k[1]&&h[2]===k[2]&&h[3]===k[3]&&h[4]===k[4]&&h[5]===k[5]&&h[6]===k[6]&&h[7]===k[7]&&h[8]===k[8]};g._arraysEqual=function(h,k){if(h.length!==k.length)return!1;for(var d=0;d<h.length;++d)if(h[d]!==k[d])return!1;return!0};g._nextId=0;return g}()})},"esri/layers/vectorTiles/views/webgl/ShaderTranspiler":function(){define(["require",
"exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(m,q,a,b){function g(c){return c.map(function(f){return"eof"!==f.type?f.data:""}).join("")}function h(c,f,e,l){l=l||e;for(var n=0;n<c.length;n++){var r=c[n];if("ident"===r.type&&r.data===e)return l in f?f[l]++:f[l]=0,h(c,f,l+"_"+f[l],l)}return e}function k(c,f,e){void 0===e&&(e="afterVersion");var l={data:"\n",type:"whitespace"},n=function(v){return v<c.length?/[^\r\n]$/.test(c[v].data):!1},r=function(v){for(var y=-1,x=0,B=-1,
p=0;p<v.length;p++){var z=v[p];"preprocessor"===z.type&&(z.data.match(/#(if|ifdef|ifndef)\s+.+/)?++x:z.data.match(/#endif\s*.*/)&&--x);("afterVersion"===e||"afterPrecision"===e)&&"preprocessor"===z.type&&/^#version/.test(z.data)&&(B=Math.max(B,p));if("afterPrecision"===e&&"keyword"===z.type&&"precision"===z.data){a:{for(z=p;z<v.length;z++){var u=v[z];if("operator"===u.type&&";"===u.data)break a}z=null}if(null===z)throw Error("precision statement not followed by any semicolons!");B=Math.max(B,z)}y<
B&&0===x&&(y=p)}return y+1}(c);n(r-1)&&c.splice(r++,0,l);for(var t=0;t<f.length;t++){var w=f[t];c.splice(r++,0,w)}n(r-1)&&n(r)&&c.splice(r,0,l)}Object.defineProperty(q,"__esModule",{value:!0});var d=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];q.transpileShader=function(c,f){c=b(c);a:{var e="100";var l="300 es";void 0===e&&(e="100");void 0===l&&(l="300 es");for(var n=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,r=0;r<c.length;r++){var t=c[r];
if("preprocessor"===t.type){var w=n.exec(t.data);if(w)if(n=w[1].replace(/\s\s+/g," "),n===l){e=n;break a}else if(n===e){t.data="#version "+l;break a}else throw Error("unknown glsl version: "+n);}}c.splice(0,0,{type:"preprocessor",data:"#version "+l},{type:"whitespace",data:"\n"});e=null}if("300 es"===e)throw Error("shader is already glsl 300 es");n=t=null;r={};w={};for(e=0;e<c.length;++e)switch(l=c[e],l.type){case "keyword":"vertex"===f&&"attribute"===l.data?l.data="in":"varying"===l.data&&(l.data=
"vertex"===f?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(l.data.trim())&&(l.data=l.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===f&&"gl_FragColor"===l.data){if(!t){t=h(c,r,"fragColor");var v=void 0;void 0===v&&(v="lowp");k(c,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:v},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}l.data=
t}else"fragment"===f&&"gl_FragDepthEXT"===l.data&&(n||(n=h(c,r,"gl_FragDepth")),l.data=n);break;case "ident":if(0<=a.indexOf(l.data)){if(v="vertex"===f)a:{for(v=e-1;0<=v;v--){var y=c[v];if("whitespace"!==y.type&&"block-comment"!==y.type)if("keyword"===y.type){if("attribute"===y.data||"in"===y.data){v=!0;break a}}else break}v=!1}if(v)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");l.data in w||(w[l.data]=h(c,r,l.data));l.data=w[l.data]}}for(e=c.length-1;0<=
e;--e)l=c[e],"preprocessor"===l.type&&((f=l.data.match(/#extension\s+(.*):/))&&f[1]&&0<=d.indexOf(f[1].trim())&&(f=c[e+1],c.splice(e,f&&"whitespace"===f.type?2:1)),(f=l.data.match(/#ifdef\s+(.*)/))&&f[1]&&0<=d.indexOf(f[1].trim())&&(l.data="#if 1"),(f=l.data.match(/#ifndef\s+(.*)/))&&f[1]&&0<=d.indexOf(f[1].trim())&&(l.data="#if 0"));return g(c)}})},"esri/layers/vectorTiles/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(m,q){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(m){"use strict;";return function(q){var a=m(),b=[];b=b.concat(a(q));return b=b.concat(a(null))}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(m,q,a){"use strict;";var b="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function g(C){C.length&&
y.push({type:b[r],data:C,position:p,line:x,column:B})}function h(){v=v.length?[]:v;if("/"===w&&"*"===t)return p=n+l-1,r=0,w=t,l+1;if("/"===w&&"/"===t)return p=n+l-1,r=1,w=t,l+1;if("#"===t)return r=2,p=n+l,l;if(/\s/.test(t))return r=9,p=n+l,l;z=/\d/.test(t);u=/[^\w_]/.test(t);p=n+l;r=z?4:u?3:9999;return l}function k(){if(("\r"===t||"\n"===t)&&"\\"!==w)return g(v.join("")),r=999,l;v.push(t);w=t;return l+1}function d(){if("."===w&&/\d/.test(t))return r=5,l;if("/"===w&&"*"===t)return r=0,l;if("/"===w&&
"/"===t)return r=1,l;if("."===t&&v.length){for(;c(v););r=5;return l}if(";"===t||")"===t||"("===t){if(v.length)for(;c(v););g(t);r=999;return l+1}var C=2===v.length&&"\x3d"!==t;if(/[\w_\d\s]/.test(t)||C){for(;c(v););r=999;return l}v.push(t);w=t;return l+1}function c(C){var E=0;do{var G=q.indexOf(C.slice(0,C.length+E).join(""));var H=q[G];if(-1===G){if(0<E--+C.length)continue;H=C.slice(0,1).join("")}g(H);p+=H.length;v=v.slice(H.length);return v.length}while(1)}function f(){if("."===t||/[eE]/.test(t))return v.push(t),
r=5,w=t,l+1;if("x"===t&&1===v.length&&"0"===v[0])return r=11,v.push(t),w=t,l+1;if(/[^\d]/.test(t))return g(v.join("")),r=999,l;v.push(t);w=t;return l+1}function e(){"f"===t&&(v.push(t),w=t,l+=1);if(/[eE]/.test(t)||"-"===t&&/[eE]/.test(w))return v.push(t),w=t,l+1;if(/[^\d]/.test(t))return g(v.join("")),r=999,l;v.push(t);w=t;return l+1}var l=0,n=0,r=999,t,w,v=[],y=[],x=1,B=0,p=0,z=!1,u=!1,D="",I;return function(C){y=[];if(null!==C){C=C.replace?C.replace(/\r\n/g,"\n"):C;l=0;D+=C;for(I=D.length;t=D[l],
l<I;){C=l;switch(r){case 0:"/"===t&&"*"===w?(v.push(t),g(v.join("")),r=999):(v.push(t),w=t);l+=1;break;case 1:l=k();break;case 2:l=k();break;case 3:l=d();break;case 4:l=f();break;case 11:/[^a-fA-F0-9]/.test(t)?(g(v.join("")),r=999):(v.push(t),w=t,l+=1);break;case 5:l=e();break;case 9999:if(/[^\d\w_]/.test(t)){var E=v.join("");r=-1<m.indexOf(E)?8:-1<a.indexOf(E)?7:6;g(v.join(""));r=999}else v.push(t),w=t,l+=1;break;case 9:/[^\s]/g.test(t)?(g(v.join("")),r=999):(v.push(t),w=t,l+=1);break;case 999:l=
h()}if(C!==l)switch(D[C]){case "\n":B=0;++x;break;default:++B}}n+=l;D=D.slice(l);return y}v.length&&g(v.join(""));r=10;g("(eof)");return y}}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","../../core/lang","./Util"],function(m,q,a,b){return function(){function g(h,k,d){if("string"===typeof h)var c=h;else c=h.programNamePrefix,k=h.shaderSnippetPrefixes,d=h.baseDefines;b.assert(k,"you must specify shader snippet prefixes");b.assert(2===k.length,"you must specify shader snippet prefixes for vertex and fragment shaders");d&&0!==d.length||(d=[]);this.programNamePrefix=c;this.shaderSnippetPrefixes=
k;this.baseDefines=d;this.variables=[];this.sealed=!1}g.prototype.addDefine=function(h,k,d,c){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");b.assert(h,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",h],shaderNameSuffixes:c||h,defineStr:k,affectsShaderTypes:d||[!0,!0]})};g.prototype.addBinaryShaderSnippetSuffix=function(h,k,d){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");
b.assert(h,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",h],shaderSnippetSuffixes:["",k],affectsShaderTypes:d||[!0,!0]})};g.prototype.addNaryShaderSnippetSuffix=function(h,k){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");var d=h.map(function(c){b.assert(null!=c.value,"value must always be specified");return c.value});this.variables.push({values:d,programNameSuffixes:h.map(function(c,f){return null!=c.programNameSuffix?
c.programNameSuffix:d[f]}),shaderSnippetSuffixes:h.map(function(c,f){return null!=c.shaderSnippetSuffix?c.shaderSnippetSuffix:d[f]}),affectsShaderTypes:k||[!0,!0]})};g.prototype.getShaderVariation=function(h){b.assert(h.length===this.variables.length,"you must specify a value for each variable");for(var k=this.programNamePrefix,d=a.clone(this.shaderSnippetPrefixes),c=a.clone(this.shaderSnippetPrefixes),f=a.clone(this.baseDefines),e=0;e<this.variables.length;e++){var l=this.variables[e],n=h[e],r=void 0;
l.values?(r=l.values.indexOf(n),b.assert(0<=r,"invalid value "+n+" for variable "+e)):r=n?1:0;k+=l.programNameSuffixes[r];for(n=0;2>n;n++)l.affectsShaderTypes[n]&&(l.shaderSnippetSuffixes&&(d[n]+=l.shaderSnippetSuffixes[r],c[n]+=l.shaderSnippetSuffixes[r]),l.defineStr&&r&&(f.push(l.defineStr),c[n]+=l.shaderNameSuffixes))}return{programName:k,shaderSnippetNames:d,shaderNames:c,defines:f}};return g}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper",
"../../core/Error"],function(m,q,a,b){return function(){function g(){}g.vertexCount=function(h,k){return h.vertexBuffers[k].size/g.getStride(h.layout[k])};g.getStride=function(h){return h[0].stride};g.getBytesPerElement=function(h){switch(h){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};g.addDescriptor=function(h,k,d,c,f,e){var l=g.getBytesPerElement(c);if(0<h.length){var n=
h[0].stride,r=n+l*d;h.forEach(function(t){return t.stride=r});h.push({name:k,count:d,type:c,offset:n,stride:r,normalized:f,divisor:e})}else h.push({name:k,count:d,type:c,offset:0,stride:l*d,normalized:f,divisor:e})};g.assertCompatibleVertexAttributeLocations=function(h,k){return h.locations===k.locations};g.hasAttribute=function(h,k){for(var d=0;d<h.length;d++)if(h[d].name===k)return!0;return!1};g.findAttribute=function(h,k){for(var d=0;d<h.length;d++)if(h[d].name===k)return h[d];return null};g.copyFramebufferToTexture=
function(h,k,d,c,f){void 0===f&&(f=0);var e=h.getBoundFramebufferObject(),l=h.getBoundTexture(0);h.bindFramebuffer(k);h.bindTexture(d,0);h.gl.copyTexImage2D(h.gl.TEXTURE_2D,f,d.descriptor.pixelFormat,c[0],c[1],c[2],c[3],0);h.gl.flush();h.bindFramebuffer(e);h.bindTexture(l,0)};g.assert=function(h,k){if(!h)throw new b(k);};g.setBaseInstanceOffset=function(h,k){var d={},c;for(c in h)d[c]=h[c].map(function(f){return f.divisor?a({},f,{baseInstance:k}):f});return d};g.bindVertexBufferLayout=function(h,
k,d,c,f){var e=h.gl,l=h.capabilities.instancing;h.bindBuffer(d);c.forEach(function(n){var r=k[n.name],t=(f?f:0+n.baseInstance?n.baseInstance:0)*n.stride;if(4>=n.count)e.vertexAttribPointer(r,n.count,n.type,n.normalized,n.stride,n.offset+t),e.enableVertexAttribArray(r),n.divisor&&0<n.divisor&&l&&l.vertexAttribDivisor(r,n.divisor);else if(9===n.count)for(var w=0;3>w;w++)e.vertexAttribPointer(r+w,3,n.type,n.normalized,n.stride,n.offset+12*w+t),e.enableVertexAttribArray(r+w),n.divisor&&0<n.divisor&&l&&
l.vertexAttribDivisor(r+w,n.divisor);else if(16===n.count)for(w=0;4>w;w++)e.vertexAttribPointer(r+w,4,n.type,n.normalized,n.stride,n.offset+16*w+t),e.enableVertexAttribArray(r+w),n.divisor&&0<n.divisor&&l&&l.vertexAttribDivisor(r+w,n.divisor)})};g.unbindVertexBufferLayout=function(h,k,d,c){var f=h.gl;h.bindBuffer(d);c.forEach(function(e){var l=k[e.name];if(4>=e.count)f.disableVertexAttribArray(l);else if(9===e.count)for(e=0;3>e;e++)f.disableVertexAttribArray(l+e);else if(16===e.count)for(e=0;4>e;e++)f.disableVertexAttribArray(l+
e)});h.unbindBuffer(34962)};return g}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),function(m,q,a,b,g,h,k,d,c,f){function e(u){return u.map(function(D){return D.name})}function l(u){for(var D={},I=0;I<u.length;I++){var C=u[I];D[C.name]=C.strideInBytes}return D}function n(u,
D){switch(u){case c.WGLGeometryType.MARKER:return D?q.C_ICON_VERTEX_NAMES_VV:q.C_ICON_VERTEX_NAMES;case c.WGLGeometryType.FILL:return D?q.C_FILL_VERTEX_NAMES_VV:q.C_FILL_VERTEX_NAMES;case c.WGLGeometryType.LINE:return D?q.C_LINE_VERTEX_NAMES_VV:q.C_LINE_VERTEX_NAMES;case c.WGLGeometryType.TEXT:return D?q.C_TEXT_VERTEX_NAMES_VV:q.C_TEXT_VERTEX_NAMES;case c.WGLGeometryType.LABEL:return q.C_LABEL_VERTEX_NAMES}return null}function r(u){switch(u){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";
case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return u}function t(u){if(u=r(u.type)){switch(u){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function w(u){if(u=r(u.type)){switch(u){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}function v(u){if(u=r(u.type)){switch(u){case "simple-line":case "picture-line":return!0;
case "CIMLineSymbol":return!0}return!1}}function y(u){if(u=r(u.type)){switch(u){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function x(u){return u&&u.length||0}function B(u){return"string"===typeof u}Object.defineProperty(q,"__esModule",{value:!0});var p=g.getLogger("esri.views.2d.engine.webgl.Utils");q.C_HITTEST_SEARCH_SIZE=4;q.C_VBO_GEOMETRY="geometry";q.C_VBO_PERINSTANCE="per_instance";q.C_VBO_PERINSTANCE_VV="per_instance_vv";q.C_VBO_VISIBILITY="visibility";q.C_VBO_VISIBILITY_RANGE=
"visibilityRange";q.C_ICON_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];q.C_ICON_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];q.C_ICON_HEATMAP=[{name:q.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];q.C_FILL_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];q.C_FILL_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];q.C_LINE_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];q.C_LINE_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,
strideInBytes:44,divisor:0}];q.C_TEXT_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:q.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];q.C_TEXT_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:q.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];q.C_LABEL_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:q.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:q.C_VBO_VISIBILITY_RANGE,strideInBytes:2,divisor:0}];q.C_ICON_VERTEX_NAMES=e(q.C_ICON_VERTEX_DEF);
q.C_ICON_VERTEX_NAMES_VV=e(q.C_ICON_VERTEX_DEF_VV);q.C_FILL_VERTEX_NAMES=e(q.C_FILL_VERTEX_DEF);q.C_FILL_VERTEX_NAMES_VV=e(q.C_FILL_VERTEX_DEF_VV);q.C_LINE_VERTEX_NAMES=e(q.C_LINE_VERTEX_DEF);q.C_LINE_VERTEX_NAMES_VV=e(q.C_LINE_VERTEX_DEF_VV);q.C_TEXT_VERTEX_NAMES=e(q.C_TEXT_VERTEX_DEF);q.C_TEXT_VERTEX_NAMES_VV=e(q.C_TEXT_VERTEX_DEF_VV);q.C_LABEL_VERTEX_NAMES=e(q.C_LABEL_VERTEX_DEF);q.C_ICON_STRIDE_SPEC=l(q.C_ICON_VERTEX_DEF);q.C_ICON_STRIDE_SPEC_VV=l(q.C_ICON_VERTEX_DEF_VV);q.C_ICON_STRIDE_SPEC_HEATMAP=
l(q.C_ICON_HEATMAP);q.C_FILL_STRIDE_SPEC=l(q.C_FILL_VERTEX_DEF);q.C_FILL_STRIDE_SPEC_VV=l(q.C_FILL_VERTEX_DEF_VV);q.C_LINE_STRIDE_SPEC=l(q.C_LINE_VERTEX_DEF);q.C_LINE_STRIDE_SPEC_VV=l(q.C_LINE_VERTEX_DEF_VV);q.C_TEXT_STRIDE_SPEC=l(q.C_TEXT_VERTEX_DEF);q.C_TEXT_STRIDE_SPEC_VV=l(q.C_TEXT_VERTEX_DEF_VV);q.C_LABEL_STRIDE_SPEC=l(q.C_LABEL_VERTEX_DEF);q.getStrides=function(u,D,I){void 0===I&&(I=!1);switch(u){case c.WGLGeometryType.MARKER:return D?q.C_ICON_STRIDE_SPEC_VV:I?q.C_ICON_STRIDE_SPEC_HEATMAP:q.C_ICON_STRIDE_SPEC;
case c.WGLGeometryType.FILL:return D?q.C_FILL_STRIDE_SPEC_VV:q.C_FILL_STRIDE_SPEC;case c.WGLGeometryType.LINE:return D?q.C_LINE_STRIDE_SPEC_VV:q.C_LINE_STRIDE_SPEC;case c.WGLGeometryType.TEXT:return D?q.C_TEXT_STRIDE_SPEC_VV:q.C_TEXT_STRIDE_SPEC;case c.WGLGeometryType.LABEL:return q.C_LABEL_STRIDE_SPEC}return null};q.getNamedBuffers=n;q.getSymbolGeometryType=function(u){return t(u)?c.WGLGeometryType.MARKER:v(u)?c.WGLGeometryType.LINE:w(u)?c.WGLGeometryType.FILL:y(u)?c.WGLGeometryType.TEXT:c.WGLGeometryType.UNKNOWN};
q.normalizeSymbolType=r;q.isMarkerSymbol=t;q.isFillSymbol=w;q.isLineSymbol=v;q.isPictureSymbol=function(u){if(u=r(u.type))switch(u){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};q.isTextSymbol=y;q.getTextProperties=function(u){return f.TextProperties.pool.acquire(u.color?d.copyAndPremultiply(u.color):[255,255,255,255],u.haloColor?d.copyAndPremultiply(u.haloColor):[255,255,255,255],h.pt2px(u.haloSize),h.pt2px(u.font.size),u.angle*Math.PI/180,u.xoffset/u.font.size,
u.yoffset/u.font.size,"left"===u.horizontalAlignment?0:"right"===u.horizontalAlignment?1:.5,"top"===u.verticalAlignment?0:"bottom"===u.verticalAlignment?1:.5)};q.isSameUniformValue=function(u,D){return!1};q.isSameMaterialInfo=function(u,D){if(u.materialKey!==D.materialKey||x(u.texBindingInfo)!==x(D.texBindingInfo)||x(u.materialParams)!==x(D.materialParams))return!1;for(var I=u.texBindingInfo.length,C=0;C<I;++C){var E=u.texBindingInfo[C],G=D.texBindingInfo[C];if(E.unit!==G.unit||E.pageId!==G.pageId||
E.semantic!==G.semantic)return!1}u=u.materialParams.length;for(C=0;C<u;)return!1;return!0};q.serializeString=function(u,D,I){for(var C=0,E=u.length,G=0;G<E;++G)D&&(D[I+C]=u.charCodeAt(G)),++C;D&&(D[I+C]=0);++C;return C};q.deserializeString=function(u,D,I){var C=0;u.s="";for(var E=!0;E;){var G=D[I+C];++C;0!==G?u.s+=String.fromCharCode(G):E=!1}return C};q.isDefined=function(u){return null!==u&&void 0!==u};q.isNumber=function(u){return"number"===typeof u};q.isString=B;q.isStringOrNull=function(u){return null==
u||B(u)};q.lerp=function(u,D,I){return u+(D-u)*I};m=function(){function u(){this._arr=[];this._push=this._push.bind(this)}u.prototype._push=function(D,I){this._arr.push(I)};u.prototype.getKeys=function(D){this._arr.length=0;D&&D.forEach(this._push);return this._arr};return u}();q.KeysGetter=m;m=function(){function u(){this._arr=[];this._push=this._push.bind(this)}u.prototype._push=function(D,I){this._arr.push(D)};u.prototype.getValues=function(D){this._arr.length=0;D&&D.forEach(this._push);return this._arr};
return u}();q.ValuesGetter=m;q.getCapType=function(u){switch(u){case "butt":return c.CapType.BUTT;case "round":return c.CapType.ROUND;case "square":return c.CapType.SQUARE;default:return p.error("Cannot interpret unknown cap: "+u),c.CapType.UNKNOWN}};q.getJoinType=function(u){switch(u){case "miter":return c.JoinType.MITER;case "bevel":return c.JoinType.BEVEL;case "round":return c.JoinType.ROUND;default:return p.error("Cannot interpret unknown join: "+u),c.JoinType.UNKNOWN}};q.getVVType=function(u){switch(u){case "opacity":return c.VVType.OPACITY;
case "color":return c.VVType.COLOR;case "rotation":return c.VVType.ROTATION;case "size":return c.VVType.SIZE;default:return p.error("Cannot interpret unknown vv: "+u),null}};q.createArcadeFunction=function(u,D){var I=u.spatialReference,C=u.layer,E=k.createFunction(u.valueExpression),G=new b;return function(H,L){G.repurposeFromGraphicLikeObject(H.geometry,H.attributes,C);H=L&&new a({viewingMode:L.viewingMode,scale:L.scale});H=k.executeFunction(E,{vars:{$feature:G,$view:H||{}},spatialReference:I});
return D?D(H):H}};q.copyMeshData=function(u,D,I,C,E,G,H){for(var L in G){var O=G[L].stride,W=G[L].data,Z=I[L].data,ba=O*E.vertexCount/4,P=O*u/4,ha=O*E.vertexFrom/4;for(O=0;O<ba;++O)Z[O+P]=W[O+ha]}I=E.indexCount;for(O=0;O<I;++O)C[O+D]=H[O+E.indexFrom]-E.vertexFrom+u};q.C_VBO_INFO=(z={},z[q.C_VBO_GEOMETRY]=35044,z[q.C_VBO_VISIBILITY]=35044,z[q.C_VBO_VISIBILITY_RANGE]=35048,z);q.createGeometryData=function(u,D,I){for(var C=[],E=0;5>E;++E){for(var G={},H=0,L=n(E,u);H<L.length;H++){var O=L[H];G[O]={data:I(E,
O)}}C.push({data:D(E),buffers:G})}return C};var z})},"esri/layers/vectorTiles/arcade/Dictionary":function(){define(["require","exports","esri/arcade/Dictionary"],function(m,q,a){return a})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(m,q,a,b,g){function h(d){var c=null;if(null!==d)if(b.isNumber(d))c=b.toNumber(d);else if(b.isBoolean(d))c=b.toBoolean(d);else if(b.isString(d))c=b.toString(d);else if(b.isDate(d))c=
b.toDate(d);else if(b.isArray(d)){c=[];for(var f=0;f<d.length;f++)c.push(h(d[f]))}else{if(0===Object.keys(d).length)return null;c=new k;c.immutable=!1;f=0;for(var e=Object.keys(d);f<e.length;f++){var l=e[f],n=d[l];void 0!==n&&c.setField(l,h(n))}c.immutable=!0}return c}var k=function(){function d(c){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=c instanceof d?c.attributes:void 0===c?{}:null===c?{}:c}d.prototype.field=function(c){var f=
c.toLowerCase(),e=this.attributes[c];if(void 0!==e)return e;for(var l in this.attributes)if(l.toLowerCase()===f)return this.attributes[l];throw Error("Field not Found : "+c);};d.prototype.setField=function(c,f){if(this.immutable)throw Error("Dictionary is Immutable");var e=c.toLowerCase();if(void 0===this.attributes[c])for(var l in this.attributes)if(l.toLowerCase()===e){this.attributes[l]=f;return}this.attributes[c]=f};d.prototype.hasField=function(c){var f=c.toLowerCase();if(void 0!==this.attributes[c])return!0;
for(var e in this.attributes)if(e.toLowerCase()===f)return!0;return!1};d.prototype.keys=function(){var c=[],f;for(f in this.attributes)c.push(f);return c=c.sort()};d.prototype.castToText=function(){var c="",f;for(f in this.attributes){""!==c&&(c+=",");var e=this.attributes[f];null==e?c+=JSON.stringify(f)+":null":b.isBoolean(e)||b.isNumber(e)||b.isString(e)?c+=JSON.stringify(f)+":"+JSON.stringify(e):e instanceof g?c+=JSON.stringify(f)+":"+b.toStringExplicit(e):e instanceof a?c+=JSON.stringify(f)+":"+
b.toStringExplicit(e):e instanceof Array?c+=JSON.stringify(f)+":"+b.toStringExplicit(e):e instanceof Date?c+=JSON.stringify(f)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(c+=JSON.stringify(f)+":"+e.castToText())}return"{"+c+"}"};d.convertObjectToArcadeDictionary=function(c){var f=new d;f.immutable=!1;for(var e in c){var l=c[e];void 0!==l&&f.setField(e.toString(),h(l))}f.immutable=!0;return f};return d}();return k})},"esri/arcade/ImmutableArray":function(){define(["require",
"exports"],function(m,q){return function(){function a(b){void 0===b&&(b=[]);this._elements=b}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(b){return this._elements[b]};a.prototype.toArray=function(){for(var b=[],g=0;g<this.length();g++)b.push(this.get(g));return b};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline dojo/number".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n,r){function t(J,S,aa){return""===S||null===S||void 0===S||S===aa||S===aa?J:J=J.split(S).join(aa)}function w(J){return J instanceof X||J instanceof a||J instanceof R}function v(J){return y(J)||B(J)||u(J)||x(J)||null===J||J===q.voidOperation||"number"===typeof J?!0:!1}function y(J){return"string"===typeof J||J instanceof String}function x(J){return"boolean"===typeof J}function B(J){return"number"===typeof J}function p(J){return J instanceof Array}function z(J){return J instanceof
b}function u(J){return J instanceof Date}function D(J,S){if(!1===isNaN(J)){if(void 0===S||null===S||""===S)return J.toString();S=t(S,"\u2030","");S=t(S,"\u00a4","");return r.format(J,{pattern:S})}return J.toString()}function I(J,S){J=q.MomentLibrary.Moment(J);return void 0===S||null===S||""===S?J.format():J.format(C(S))}function C(J){return J.replace(/(LTS)|L|l/g,function(S){return"["+S+"]"})}function E(J,S,aa){switch(aa){case "\x3e":return J>S;case "\x3c":return J<S;case "\x3e\x3d":return J>=S;case "\x3c\x3d":return J<=
S}return!1}function G(J,S){if(J===S||null===J&&S===q.voidOperation||null===S&&J===q.voidOperation)return!0;if(u(J)&&u(S))return J.getTime()===S.getTime();if(J instanceof g||J instanceof h)return J.equalityTest(S);if(J instanceof e&&S instanceof e){var aa=void 0,ja=void 0;aa=J.getCacheValue("_arcadeCacheId");ja=S.getCacheValue("_arcadeCacheId");if(void 0!==aa&&null!==aa)return aa===ja}return void 0!==J&&void 0!==S&&null!==J&&null!==S&&"object"===typeof J&&"object"===typeof S&&(J._arcadeCacheId===S._arcadeCacheId&&
void 0!==J._arcadeCacheId&&null!==J._arcadeCacheId||J._underlyingGraphic===S._underlyingGraphic&&void 0!==J._underlyingGraphic&&null!==J._underlyingGraphic)?!0:!1}function H(J,S){if(y(J))return J;if(null===J)return"";if(B(J))return D(J,S);if(x(J))return J.toString();if(u(J))return I(J,S);if(J instanceof c)return JSON.stringify(J.toJson());if(p(J)){S=[];for(var aa=0;aa<J.length;aa++)S[aa]=O(J[aa]);return"["+S.join(",")+"]"}if(J instanceof b){S=[];for(aa=0;aa<J.length();aa++)S[aa]=O(J.get(aa));return"["+
S.join(",")+"]"}return null!==J&&"object"===typeof J&&void 0!==J.castToText?J.castToText():w(J)?"object, Function":""}function L(J,S){if(y(J))return J;if(null===J)return"";if(B(J))return D(J,S);if(x(J))return J.toString();if(u(J))return I(J,S);if(J instanceof c)return J instanceof d?'{"xmin":'+J.xmin.toString()+',"ymin":'+J.ymin.toString()+","+(J.hasZ?'"zmin":'+J.zmin.toString()+",":"")+(J.hasM?'"mmin":'+J.mmin.toString()+",":"")+'"xmax":'+J.xmax.toString()+',"ymax":'+J.ymax.toString()+","+(J.hasZ?
'"zmax":'+J.zmax.toString()+",":"")+(J.hasM?'"mmax":'+J.mmax.toString()+",":"")+'"spatialReference":'+ba(J.spatialReference)+"}":ba(J.toJson(),function(ja,la){return ja.key===la.key?0:"spatialReference"===ja.key?1:"spatialReference"===la.key||ja.key<la.key?-1:ja.key>la.key?1:0});if(p(J)){S=[];for(var aa=0;aa<J.length;aa++)S[aa]=O(J[aa]);return"["+S.join(",")+"]"}if(J instanceof b){S=[];for(aa=0;aa<J.length();aa++)S[aa]=O(J.get(aa));return"["+S.join(",")+"]"}return null!==J&&"object"===typeof J&&void 0!==
J.castToText?J.castToText():w(J)?"object, Function":""}function O(J){return null===J?"null":x(J)||B(J)||y(J)?JSON.stringify(J):J instanceof c||J instanceof b||J instanceof Array?L(J):J instanceof Date?JSON.stringify(I(J,"")):null!==J&&"object"===typeof J&&void 0!==J.castToText?J.castToText():"null"}function W(J,S){return B(J)?J:null===J||""===J?0:u(J)?NaN:x(J)?J?1:0:p(J)||""===J||void 0===J?NaN:void 0!==S&&y(J)?(S=t(S,"\u2030",""),S=t(S,"\u00a4",""),r.parse(J,{pattern:S})):J===q.voidOperation?0:Number(J)}
function Z(J,S){var aa;S.fields.some(function(ja){ja.name===J&&(aa=ja.domain);return!!aa});return aa}function ba(J,S){S||(S={});"function"===typeof S&&(S={cmp:S});var aa="boolean"===typeof S.cycles?S.cycles:!1,ja=S.cmp&&function(ra){return function(ta){return function(va,Da){return ra({key:va,value:ta[va]},{key:Da,value:ta[Da]})}}}(S.cmp),la=[];return function va(ta){ta&&ta.toJson&&"function"===typeof ta.toJson&&(ta=ta.toJson());if(void 0!==ta){if("number"===typeof ta)return isFinite(ta)?""+ta:"null";
if("object"!==typeof ta)return JSON.stringify(ta);var Da;if(Array.isArray(ta)){var ua="[";for(Da=0;Da<ta.length;Da++)Da&&(ua+=","),ua+=va(ta[Da])||"null";return ua+"]"}if(null===ta)return"null";if(-1!==la.indexOf(ta)){if(aa)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var U=la.push(ta)-1,T=Object.keys(ta).sort(ja&&ja(ta));ua="";for(Da=0;Da<T.length;Da++){var ca=T[Da],ia=va(ta[ca]);ia&&(ua&&(ua+=","),ua+=JSON.stringify(ca)+":"+ia)}la.splice(U,1);
return"{"+ua+"}"}}(J)}function P(J,S){if(S instanceof e)J.push([S.x,S.y]);else throw Error("Invalid Argument");}Object.defineProperty(q,"__esModule",{value:!0});q.binaryOperator=q.MomentLibrary=q.tick=q.toStringArray=q.autoCastArrayOfPointsToMultiPoint=q.autoCastArrayOfPointsToPolyline=q.autoCastArrayOfPointsToPolygon=q.autoCastFeatureToGeometry=q.stableStringify=q.getDomain=q.getDomainCode=q.getDomainValue=q.fixNullGeometry=q.fixSpatialReference=q.toBoolean=q.toDateM=q.toDate=q.toNumber=q.toStringExplicit=
q.toNumberArray=q.toString=q.equalityTest=q.greaterThanLessThan=q.standardiseDateFormat=q.formatDate=q.formatNumber=q.generateUUID=q.pcCheck=q.isDate=q.isImmutableArray=q.isFeatureSetCollection=q.isFeatureSet=q.isArray=q.isInteger=q.isNumber=q.isBoolean=q.isString=q.defaultUndefined=q.isSimpleType=q.isFunctionParameter=q.multiReplace=q.continueResult=q.breakResult=q.voidOperation=q.SizzleFunction=q.ReturnResult=q.ImplicitResult=q.NativeFunction=q.SizzleFunctionE=q.NativeFunctionE=q.ImplicitResultE=
q.ReturnResultE=void 0;m=function(){return function(J){this.value=J}}();q.ReturnResultE=m;var ha=function(){return function(J){this.value=J}}();q.ImplicitResultE=ha;var X=function(){return function(J){this.fn=J}}();q.NativeFunctionE=X;var R=function(){return function(J){this.fn=J}}();q.SizzleFunctionE=R;q.NativeFunction=X;q.ImplicitResult=ha;q.ReturnResult=m;q.SizzleFunction=R;q.voidOperation={type:"VOID"};q.breakResult={type:"BREAK"};q.continueResult={type:"CONTINUE"};q.multiReplace=t;q.isFunctionParameter=
w;q.isSimpleType=v;q.defaultUndefined=function(J,S){return void 0===J?S:J};q.isString=y;q.isBoolean=x;q.isNumber=B;q.isInteger=function(J){return"number"===typeof J&&isFinite(J)&&Math.floor(J)===J};q.isArray=p;q.isFeatureSet=function(J){return!0===(J&&J.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===J.declaredRootClass)};q.isFeatureSetCollection=function(J){return!0===(J&&J.declaredRootClass&&"esri.arcade.featureSetCollection"===J.declaredRootClass)};q.isImmutableArray=z;q.isDate=
u;q.pcCheck=function(J,S,aa){if(J.length<S||J.length>aa)throw Error("Function called with wrong number of Parameters");};q.generateUUID=function(){var J=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(S){var aa=(J+16*Math.random())%16|0;J=Math.floor(J/16);return("x"===S?aa:aa&3|8).toString(16)})};q.formatNumber=D;q.formatDate=I;q.standardiseDateFormat=C;q.greaterThanLessThan=function(J,S,aa){if(null===J){if(null===S||S===q.voidOperation)return E(null,null,
aa);if(B(S))return E(0,S,aa);if(y(S)||x(S))return E(0,W(S),aa);if(u(S))return E(0,S.getTime(),aa)}if(J===q.voidOperation){if(null===S||S===q.voidOperation)return E(null,null,aa);if(B(S))return E(0,S,aa);if(y(S)||x(S))return E(0,W(S),aa);if(u(S))return E(0,S.getTime(),aa)}else if(B(J)){if(B(S))return E(J,S,aa);if(x(S))return E(J,W(S),aa);if(null===S||S===q.voidOperation)return E(J,0,aa);if(y(S))return E(J,W(S),aa);if(u(S))return E(J,S.getTime(),aa)}else if(y(J)){if(y(S))return E(H(J),H(S),aa);if(u(S))return E(W(J),
S.getTime(),aa);if(B(S))return E(W(J),S,aa);if(null===S||S===q.voidOperation)return E(W(J),0,aa);if(x(S))return E(W(J),W(S),aa)}else if(u(J)){if(u(S))return E(J,S,aa);if(null===S||S===q.voidOperation)return E(J.getTime(),0,aa);if(B(S))return E(J.getTime(),S,aa);if(x(S)||y(S))return E(J.getTime(),W(S),aa)}else if(x(J)){if(x(S))return E(J,S,aa);if(B(S))return E(W(J),W(S),aa);if(u(S))return E(W(J),S.getTime(),aa);if(null===S||S===q.voidOperation)return E(W(J),0,aa);if(y(S))return E(W(J),W(S),aa)}return!G(J,
S)||"\x3c\x3d"!==aa&&"\x3e\x3d"!==aa?!1:!0};q.equalityTest=G;q.toString=H;q.toNumberArray=function(J){var S=[];if(!1===p(J))return null;if(J instanceof b){for(var aa=0;aa<J.length();aa++)S[aa]=W(J.get(aa));return S}for(aa=0;aa<J.length;aa++)S[aa]=W(J[aa]);return S};q.toStringExplicit=L;q.toNumber=W;q.toDate=function(J,S){return u(J)?J:y(J)&&(J=q.MomentLibrary.Moment(J,[void 0===S||null===S||""===S?q.MomentLibrary.Moment.ISO_8601:S]),J.isValid())?J.toDate():null};q.toDateM=function(J,S){return u(J)?
q.MomentLibrary.Moment(J):y(J)&&(J=q.MomentLibrary.Moment(J,[void 0===S||null===S||""===S?q.MomentLibrary.Moment.ISO_8601:S]),J.isValid())?J:null};q.toBoolean=function(J){return x(J)?J:y(J)?(J=J.toLowerCase(),"true"===J?!0:!1):B(J)?0===J||isNaN(J)?!1:!0:!1};q.fixSpatialReference=function(J,S){if(null===J||void 0===J)return null;if(null===J.spatialReference||void 0===J.spatialReference)J.spatialReference=S;return J};q.fixNullGeometry=function(J){if(null===J)return null;if(J instanceof e)return"NaN"===
J.x||null===J.x||isNaN(J.x)?null:J;if(J instanceof l){if(0===J.rings.length)return null;for(var S=0,aa=J.rings;S<aa.length;S++){var ja=aa[S];if(0<ja.length)return J}return null}if(J instanceof n){if(0===J.paths.length)return null;S=0;for(aa=J.paths;S<aa.length;S++)if(ja=aa[S],0<ja.length)return J;return null}return J instanceof f?0===J.points.length?null:J:J instanceof d?"NaN"===J.xmin||null===J.xmin||isNaN(J.xmin)?null:J:null};q.getDomainValue=function(J,S){if(!J||!J.domain)return S;var aa=null;
if("string"===J.field.type||"esriFieldTypeString"===J.field.type)S=H(S);else{if(null===S||void 0===S)return null;if(""===S)return S;S=W(S)}for(var ja=0;ja<J.domain.codedValues.length;ja++){var la=J.domain.codedValues[ja];la.code===S&&(aa=la)}return null===aa?S:aa.name};q.getDomainCode=function(J,S){if(!J||!J.domain)return S;var aa=null;S=H(S);for(var ja=0;ja<J.domain.codedValues.length;ja++){var la=J.domain.codedValues[ja];la.name===S&&(aa=la)}return null===aa?S:aa.code};q.getDomain=function(J,S,
aa,ja){void 0===aa&&(aa=null);if(!S||!S.fields)return null;for(var la=null,ra=0;ra<S.fields.length;ra++){var ta=S.fields[ra];ta.name.toLowerCase()===J.toString().toLowerCase()&&(la=ta)}if(null===la)throw Error("Field not found");var va,Da;ja||(ja=aa&&S.typeIdField&&aa._field(S.typeIdField));null!=ja&&S.types.some(function(ua){return ua.id===ja?((va=ua.domains&&ua.domains[la.name])&&"inherited"===va.type&&(va=Z(la.name,S),Da=!0),!0):!1});Da||va||(va=Z(J,S));return{field:la,domain:va}};q.stableStringify=
ba;q.autoCastFeatureToGeometry=function(J){if(null===J)return null;for(var S=[],aa=0;aa<J.length;aa++){var ja=J[aa];ja&&(ja.declaredClass&&"esri.arcade.Feature"===ja.declaredClass||"FeatureSetReader"===ja.type)?S.push(ja.geometry()):S.push(ja)}return S};q.autoCastArrayOfPointsToPolygon=function(J,S){if(p(J)||z(J)){var aa=!1,ja=!1,la=[];if(p(J)){for(var ra=0;ra<J.length;ra++){var ta=J[ra];P(la,ta)}0<la.length&&(S=J[0].spatialReference,aa=J[0].hasZ,ja=J[0].hasM)}else if(J instanceof h)la=J._elements,
0<la.length&&(aa=J._hasZ,ja=J._hasM,S=J.get(0).spatialReference);else if(z(J)){ra=0;for(var va=J.toArray();ra<va.length;ra++)ta=va[ra],P(la,ta);0<la.length&&(S=J.get(0).spatialReference,aa=!0===J.get(0).hasZ,ja=!0===J.get(0).hasM)}else throw Error("Invalid Argument");if(0===la.length)return null;!1===(new l({rings:[],spatialReference:{wkid:4326}})).isClockwise(la)&&(la=la.slice(0).reverse());return new l({rings:[la],spatialReference:S,hasZ:aa,hasM:ja})}return J};q.autoCastArrayOfPointsToPolyline=
function(J,S){if(p(J)||z(J)){var aa=!1,ja=!1,la=[];if(p(J)){for(var ra=0;ra<J.length;ra++){var ta=J[ra];P(la,ta)}0<la.length&&(S=J[0].spatialReference,aa=!0===J[0].hasZ,ja=!0===J[0].hasM)}else if(J instanceof h)la=J._elements,0<la.length&&(aa=J._hasZ,ja=J._hasM,S=J.get(0).spatialReference);else if(z(J)){ra=0;for(var va=J.toArray();ra<va.length;ra++)ta=va[ra],P(la,ta);0<la.length&&(S=J.get(0).spatialReference,aa=!0===J.get(0).hasZ,ja=!0===J.get(0).hasM)}return 0===la.length?null:new n({paths:[la],
spatialReference:S,hasZ:aa,hasM:ja})}return J};q.autoCastArrayOfPointsToMultiPoint=function(J,S){if(p(J)||z(J)){var aa=!1,ja=!1,la=[];if(p(J)){for(var ra=0;ra<J.length;ra++){var ta=J[ra];P(la,ta)}0<la.length&&(S=J[0].spatialReference,aa=!0===J[0].hasZ,ja=!0===J[0].hasM)}else if(J instanceof h)la=J._elements,0<la.length&&(aa=J._hasZ,ja=J._hasM,S=J.get(0).spatialReference);else if(z(J)){ra=0;for(var va=J.toArray();ra<va.length;ra++)ta=va[ra],P(la,ta);0<la.length&&(S=J.get(0).spatialReference,aa=!0===
J.get(0).hasZ,ja=!0===J.get(0).hasM)}return 0===la.length?null:new f({points:la,spatialReference:S,hasZ:aa,hasM:ja})}return J};q.toStringArray=function(J,S){void 0===S&&(S=!1);var aa=[];if(null===J)return aa;if(!0===p(J)){for(var ja=0;ja<J.length;ja++){var la=H(J[ja]);""===la&&!0!==S||aa.push(la)}return aa}if(J instanceof b){for(ja=0;ja<J.length();ja++)la=H(J.get(ja)),""===la&&!0!==S||aa.push(la);return aa}return v(J)?(la=H(J),""===la&&!0!==S||aa.push(la),aa):[]};var V=0;q.tick=function(J){V++;return 0===
V%100?(V=0,k.create(function(S){setTimeout(function(){S(J)},0)})):J};q.MomentLibrary={Moment:null};q.binaryOperator=function(J,S,aa){switch(aa){case "\x26":return J&S;case "|":return J|S;case "^":return J^S;case "\x3c\x3c":return J<<S;case "\x3e\x3e":return J>>S;case "\x3e\x3e\x3e":return J>>>S}}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(m,q){return function(){return function(a,b){this.context=this.definition=null;this.definition=a;this.context=b}}()})},"esri/arcade/ImmutablePathArray":function(){var m=
this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var k in h)h.hasOwnProperty(k)&&(g[k]=h[k])};return q(a,b)};return function(a,b){function g(){this.constructor=a}q(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require","exports","./ImmutableArray","./ImmutablePointArray"],function(q,a,b,g){return function(h){function k(d,c,f,e,l){d=h.call(this,d)||
this;d._lazyPath=[];d._hasZ=!1;d._hasM=!1;d._hasZ=f;d._hasM=e;d._spRef=c;d._cacheId=l;return d}m(k,h);k.prototype.get=function(d){if(void 0===this._lazyPath[d]){var c=this._elements[d];if(void 0===c)return;this._lazyPath[d]=new g(c,this._spRef,this._hasZ,this._hasM,this._cacheId,d)}return this._lazyPath[d]};k.prototype.equalityTest=function(d){return d===this?!0:null===d||!1===d instanceof k?!1:d.getUniqueHash()===this.getUniqueHash()};k.prototype.getUniqueHash=function(){return this._cacheId.toString()};
return k}(b)})},"esri/arcade/ImmutablePointArray":function(){var m=this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var k in h)h.hasOwnProperty(k)&&(g[k]=h[k])};return q(a,b)};return function(a,b){function g(){this.constructor=a}q(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require","exports","./ImmutableArray","../geometry/Point"],function(q,a,b,
g){return function(h){function k(d,c,f,e,l,n){d=h.call(this,d)||this;d._lazyPt=[];d._hasZ=!1;d._hasM=!1;d._spRef=c;d._hasZ=f;d._hasM=e;d._cacheId=l;d._partId=n;return d}m(k,h);k.prototype.get=function(d){if(void 0===this._lazyPt[d]){var c=this._elements[d];if(void 0===c)return;var f=this._hasZ,e=this._hasM,l=null;l=f&&!e?new g(c[0],c[1],c[2],void 0,this._spRef):e&&!f?new g(c[0],c[1],void 0,c[2],this._spRef):f&&e?new g(c[0],c[1],c[2],c[3],this._spRef):new g(c[0],c[1],this._spRef);l.setCacheValue("_arcadeCacheId",
this._cacheId.toString()+"-"+this._partId.toString()+"-"+d.toString());this._lazyPt[d]=l}return this._lazyPt[d]};k.prototype.equalityTest=function(d){return d===this?!0:null===d||!1===d instanceof k?!1:d.getUniqueHash()===this.getUniqueHash()};k.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return k}(b)})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(m,q,a,b){function g(c,f){var e=
new a(f);c(function(l){return d(l).then(e.resolve)},e.reject);return e.promise}function h(c){if(c){if("function"!==typeof c.forEach){var f=Object.keys(c),e=f.map(function(n){return c[n]});return h(e).then(function(n){var r={};f.forEach(function(t,w){return r[t]=n[w]});return r})}var l=null;return g(function(n,r){var t=[],w=c.length;0===w&&n(t);c.forEach(function(v){var y={promise:v};t.push(y);v.then(function(x){y.value=x}).catch(function(x){y.error=x}).then(function(){--w;0===w&&(l?r(Error("AbortError")):
n(t))})})},function(n){l=n||"Invocation cancellation";c.forEach(function(r){return r.cancel(n)})})}}function k(c){void 0===c&&(c=void 0);var f=new a;f.resolve(c);return f.promise}function d(c){return c&&"function"===typeof c.then?c:k(c)}Object.defineProperty(q,"__esModule",{value:!0});q.createResolver=q.when=q.isPromiseLike=q.wrapCallback=q.timeout=q.after=q.resolve=q.reject=q.first=q.eachAlwaysValues=q.eachAlways=q.createDeferred=q.create=q.filter=q.all=void 0;q.all=function(c){return b(c)};q.filter=
function(c,f){var e=c.slice();return b(c.map(function(l,n){return f(l,n)})).then(function(l){return e.filter(function(n,r){return l[r]})})};q.create=g;q.createDeferred=function(c){var f=null;c=g(function(e,l){f={resolve:e,reject:l}},c);f.promise=c;f.cancel=function(){f.reject(Error("AbortError"))};return f};q.eachAlways=h;q.eachAlwaysValues=function(c){return h(c).then(function(f){return f.filter(function(e){return!!e.value}).map(function(e){return e.value})})};q.first=function(c){return c&&c.length?
g(function(f,e){for(var l=0;l<c.length;l++)c[l].then(f,e)}):k()};q.reject=function(c){var f=new a;f.reject(c);return f.promise};q.resolve=k;q.after=function(c,f){void 0===f&&(f=void 0);var e=0;return g(function(l){e=setTimeout(function(){l(f)},c)},function(){e&&(clearTimeout(e),e=0)})};q.timeout=function(c,f,e){var l=0,n=new a(c.cancel);c.then(function(r){n.isFulfilled()||(n.resolve(r),l&&(clearTimeout(l),l=0))});c.catch(function(r){n.isFulfilled()||(n.reject(r),l&&(clearTimeout(l),l=0))});l=setTimeout(function(){n.reject(e||
Error("promiseUtils:timeout"))},f);return n.promise};q.wrapCallback=function(c){var f=!1;return g(function(){c(function(e){f||k(e)})},function(){return f=!0})};q.isPromiseLike=function(c){return c&&"function"===typeof c.then};q.when=d;q.createResolver=function(c){var f,e;c=g(function(n,r){f=n;e=r},c);var l=function(n){f(n)};l.resolve=function(n){return f(n)};l.reject=function(n){return e(n)};l.promise=c;return l}})},"esri/layers/vectorTiles/arcade/Feature":function(){define(["require","exports","esri/arcade/Feature"],
function(m,q,a){a.prototype.repurposeFromGraphicLikeObject=function(b,g,h){void 0===h&&(h=null);null===g&&(g={});this.attributes=g;this.geometry=b;this._datesfixed=(this._layer=h)?!1:!0};return a})},"esri/arcade/Feature":function(){var m=this&&this.__assign||function(){m=Object.assign||function(q){for(var a,b=1,g=arguments.length;b<g;b++){a=arguments[b];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(q[h]=a[h])}return q};return m.apply(this,arguments)};define("require exports ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "),
function(q,a,b,g,h,k,d,c,f){return function(){function e(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._adapter=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}e.createFromGraphic=function(l){var n=new e;n._geometry=l.geometry?l.geometry:null;n.attributes=void 0===l.attributes?{}:null===l.attributes?{}:l.attributes;l._sourceLayer?(n._layer=l._sourceLayer,n._datesfixed=!1):l._layer?(n._layer=l._layer,n._datesfixed=!1):l.layer?
(n._layer=l.layer,n._datesfixed=!1):l.sourceLayer&&(n._layer=l.sourceLayer,n._datesfixed=!1);return n};e.createFromArcadeFeature=function(l){var n=new e;n._datesfixed=l._datesfixed;n.attributes=l.attributes;n._geometry=l._geometry;l._layer&&(n._layer=l._layer);return n};e.createFromArcadeDictionary=function(l){var n=new e;n.attributes=l.field("attributes");null!==n.attributes?n.attributes instanceof b?(n.attributes=n.attributes.attributes,null===n.attributes&&(n.attributes={})):n.attributes={}:n.attributes=
{};n._geometry=l.field("geometry");null!==n._geometry&&(n._geometry instanceof b?n._geometry=e.parseGeometryFromDictionary(n._geometry):n._geometry instanceof k||(n._geometry=null));return n};e.createFromGraphicLikeObject=function(l,n,r){void 0===r&&(r=null);var t=new e;null===n&&(n={});t.attributes=n;t._geometry=l?l:null;t._layer=r;t._layer&&(t._datesfixed=!1);t._adapter=null;return t};e.prototype.repurposeFromGraphicLikeObject=function(l,n,r){void 0===r&&(r=null);null===n&&(n={});this.attributes=
n;this._geometry=l?l:null;this._datesfixed=(this._layer=r)?!1:!0};e.prototype.castToText=function(){if(this._adapter)return this._adapter.castToText();var l="";!1===this._datesfixed&&this._fixDates();for(var n in this.attributes){""!==l&&(l+=",");var r=this.attributes[n];null==r?l+=JSON.stringify(n)+":null":h.isBoolean(r)||h.isNumber(r)||h.isString(r)?l+=JSON.stringify(n)+":"+JSON.stringify(r):r instanceof k?l+=JSON.stringify(n)+":"+h.toStringExplicit(r):r instanceof g?l+=JSON.stringify(n)+":"+h.toStringExplicit(r):
r instanceof Array?l+=JSON.stringify(n)+":"+h.toStringExplicit(r):r instanceof Date?l+=JSON.stringify(n)+":"+JSON.stringify(r):null!==r&&"object"===typeof r&&void 0!==r.castToText&&(l+=JSON.stringify(n)+":"+r.castToText())}return'{"geometry":'+(null===this.geometry()?"null":h.toStringExplicit(this.geometry()))+',"attributes":{'+l+"}}"};e.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var l=[],n=0;n<this._layer.fields.length;n++){var r=
this._layer.fields[n];"date"!==r.type&&"esriFieldTypeDate"!==r.type||l.push(r.name)}this._datefields=l;0<l.length&&this._fixDateFields(l)}this._datesfixed=!0};e.prototype._fixDateFields=function(l){this.attributes=m({},this.attributes);for(var n=0;n<l.length;n++){var r=this.attributes[l[n]];if(null!==r)if(void 0===r)for(var t in this.attributes){if(t.toLowerCase()===l[n].toLowerCase()){r=this.attributes[t];null===r||r instanceof Date||(this.attributes[t]=new Date(r));break}}else r instanceof Date||
(this.attributes[l[n]]=new Date(r))}};e.prototype.geometry=function(){if(this._adapter)return this._adapter.geometry();if(null===this._geometry)return this._geometry;this._geometry instanceof k||(this._geometry=c.fromJson(this._geometry));return this._geometry};e.prototype.field=function(l){if(this._adapter)return this._adapter.field(l);!1===this._datesfixed&&this._fixDates();var n=this.attributes[l];if(void 0!==n)return n;n=l.toLowerCase();for(var r in this.attributes)if(r.toLowerCase()===n)return this.attributes[r];
if(this._hasFieldDefinition(n))return null;throw Error("Field not Found : "+l);};e.prototype._hasFieldDefinition=function(l){if(null===this._layer)return!1;for(var n=0;n<this._layer.fields.length;n++)if(this._layer.fields[n].name.toLowerCase()===l)return!0;return!1};e.prototype._field=function(l){var n;if(this._adapter)return null!==(n=this._adapter.field(l))&&void 0!==n?n:null;!1===this._datesfixed&&this._fixDates();n=l.toLowerCase();l=this.attributes[l];if(void 0!==l)return l;for(var r in this.attributes)if(r.toLowerCase()===
n)return this.attributes[r];return null};e.prototype.setField=function(l,n){if(this.immutable)throw Error("Feature is Immutable");if(!1===h.isSimpleType(n))throw Error("Illegal Value Assignment to Feature");if(this._adapter)this._adapter.setField(l,n);else{var r=l.toLowerCase();if(void 0===this.attributes[l])for(var t in this.attributes)if(t.toLowerCase()===r){this.attributes[t]=n;return}this.attributes[l]=n}};e.prototype.hasField=function(l){if(this._adapter)return this._adapter.hasField(l);var n=
l.toLowerCase();if(void 0!==this.attributes[l])return!0;for(var r in this.attributes)if(r.toLowerCase()===n)return!0;return this._hasFieldDefinition(n)?!0:!1};e.prototype.keys=function(){if(this._adapter)return this._adapter.keys();var l=[],n={},r;for(r in this.attributes)l.push(r),n[r.toLowerCase()]=1;if(null!==this._layer)for(r=0;r<this._layer.fields.length;r++){var t=this._layer.fields[r];1!==n[t.name.toLowerCase()]&&l.push(t.name)}return l=l.sort()};e.parseGeometryFromDictionary=function(l){l=
e.convertDictionaryToJson(l,!0);void 0!==l.hasm&&(l.hasM=l.hasm,delete l.hasm);void 0!==l.hasz&&(l.hasZ=l.hasz,delete l.hasz);void 0!==l.spatialreference&&(l.spatialReference=l.spatialreference,delete l.spatialreference);void 0!==l.rings&&(l.rings=this.fixPathArrays(l.rings,!0===l.hasZ,!0===l.hasZ));void 0!==l.paths&&(l.paths=this.fixPathArrays(l.paths,!0===l.hasZ,!0===l.hasM));void 0!==l.points&&(l.points=this.fixPointArrays(l.points,!0===l.hasZ,!0===l.hasM));return c.fromJson(l)};e.fixPathArrays=
function(l,n,r){var t=[];if(l instanceof Array)for(var w=0;w<l.length;w++)t.push(this.fixPointArrays(l[w],n,r));else if(l instanceof g)for(w=0;w<l.length();w++)t.push(this.fixPointArrays(l.get(w),n,r));return t};e.fixPointArrays=function(l,n,r){var t=[];if(l instanceof Array)for(var w=0;w<l.length;w++){var v=l[w];v instanceof d?n&&r?t.push([v.x,v.y,v.z,v.m]):n?t.push([v.x,v.y,v.z]):r?t.push([v.x,v.y,v.m]):t.push([v.x,v.y]):v instanceof g?t.push(v.toArray()):t.push(v)}else if(l instanceof g)for(w=
0;w<l.length();w++)v=l.get(w),v instanceof d?n&&r?t.push([v.x,v.y,v.z,v.m]):n?t.push([v.x,v.y,v.z]):r?t.push([v.x,v.y,v.m]):t.push([v.x,v.y]):v instanceof g?t.push(v.toArray()):t.push(v);return t};e.convertDictionaryToJson=function(l,n){void 0===n&&(n=!1);var r={},t;for(t in l.attributes){var w=l.attributes[t];w instanceof b&&(w=e.convertDictionaryToJson(w));n?r[t.toLowerCase()]=w:r[t]=w}return r};e.parseAttributesFromDictionary=function(l){var n={},r;for(r in l.attributes){var t=l.attributes[r];
if(h.isSimpleType(t))n[r]=t;else throw Error("Illegal Argument");}return n};e.fromJson=function(l){var n=null;null!==l.geometry&&void 0!==l.geometry&&(n=c.fromJson(l.geometry));var r={};if(null!==l.attributes&&void 0!==l.attributes)for(var t in l.attributes){var w=l.attributes[t];if(null===w)r[t]=w;else if(h.isString(w)||h.isNumber(w)||h.isBoolean(w)||h.isDate(w))r[t]=w;else throw Error("Illegal Argument");}return e.createFromGraphicLikeObject(n,r,null)};e.prototype.fullDomain=function(l,n){return null!==
this._layer&&this._layer.fields?h.getDomain(l,this._layer,this,n):null};e.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(function(l){return{name:l.name,code:l.id}}):[]}:null:null};e.prototype.domainValueLookup=function(l,n,r){if(null===this._layer||!this._layer.fields)return null;r=h.getDomain(l,this._layer,this,r);if(void 0===n)try{n=this.field(l)}catch(t){return null}return h.getDomainValue(r,
n)};e.prototype.gdbVersion=function(){if(null===this._layer)return"";var l=this._layer.gdbVersion;return void 0===l?"":""===l&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":l};e.prototype.domainCodeLookup=function(l,n,r){if(null===this._layer||!this._layer.fields)return null;if(void 0===n){try{n=this.field(l)}catch(t){return null}return n}l=h.getDomain(l,this._layer,this,r);return h.getDomainCode(l,n)};e.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;
for(var l=[],n=0,r=this._layer.fields;n<r.length;n++)l.push(f.esriFieldToJson(r[n]));return{objectIdField:this._layer.objectIdField,globalIdField:this._layer.globalIdField,geometryType:void 0===f.layerGeometryEsriRestConstants[this._layer.geometryType]?"":f.layerGeometryEsriRestConstants[this._layer.geometryType],fields:l}};return e}()})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(m,
q,a,b,g,h,k,d,c){function f(r,t,w){var v=r.rings||r.paths,y,x;var B=0;for(y=v.length;B<y;B++){var p=v[B];var z=0;for(x=p.length;z<x;z++){var u=p[z];if(0<z)D+=u[0],I+=u[1];else{var D=u[0];var I=u[1]}u[0]=t(D);u[1]=w(I)}}return r}var e={esriGeometryPoint:function(r,t,w){r.x=t(r.x);r.y=w(r.y);return r},esriGeometryPolyline:f,esriGeometryPolygon:f,esriGeometryEnvelope:function(r,t,w){r.xmin=t(r.xmin);r.ymin=w(r.ymin);r.xmax=t(r.xmax);r.ymax=w(r.ymax);return r},esriGeometryMultipoint:function(r,t,w){var v=
r.points,y;var x=0;for(y=v.length;x<y;x++){var B=v[x];if(0<x)p+=B[0],z+=B[1];else{var p=B[0];var z=B[1]}B[0]=t(p);B[1]=w(z)}return r}},l={esriGeometryPoint:function(r,t,w){r.x=t(r.x);r.y=w(r.y);return r}},n={createInstance:function(r,t){r=new r;t&&b.mixin(r,t);return r},fromJson:function(r){if(void 0!==r.x&&void 0!==r.y)return new g(r);if(void 0!==r.paths)return new h(r);if(void 0!==r.rings)return new k(r);if(void 0!==r.points)return new d(r);if(void 0!==r.xmin&&void 0!==r.ymin&&void 0!==r.xmax&&
void 0!==r.ymax)return new c(r)},getJsonType:function(r){return r instanceof g?"esriGeometryPoint":r instanceof h?"esriGeometryPolyline":r instanceof k?"esriGeometryPolygon":r instanceof c?"esriGeometryEnvelope":r instanceof d?"esriGeometryMultipoint":null},getGeometryType:function(r){return"esriGeometryPoint"===r?g:"esriGeometryPolyline"===r?h:"esriGeometryPolygon"===r?k:"esriGeometryEnvelope"===r?c:"esriGeometryMultipoint"===r?d:null},supportsLazyUnquantization:function(r){return"esriGeometryPoint"===
r||"esriGeometryPolyline"===r||"esriGeometryPolygon"===r||"esriGeometryMultipoint"===r},unquantizeFunction:function(r,t){if(r&&t){var w=t.translate[0],v=t.translate[1],y=t.scale[0],x=t.scale[1],B=function(u){return u*y+w},p=function(u){return v-u*x},z=e[r];return function(u){return u?z(u,B,p):null}}},unquantize:function(r,t,w){if(t=n.unquantizeFunction(t,w)){var v=r.length;for(w=0;w<v;w++)t(r[w].geometry)}},quantizeFunction:function(r,t){if(r&&"esriGeometryPoint"===r&&t){var w=t.translate[0],v=t.translate[1],
y=t.scale[0],x=t.scale[1],B=function(u){return Math.round((u-w)/y)},p=function(u){return Math.round((v-u)/x)},z=l[r];return function(u){return u?z(u,B,p):null}}},quantize:function(r,t,w){if(t=n.quantizeFunction(t,w)){var v=r.length;for(w=0;w<v;w++)t(r[w].geometry)}}};m.mixin(m.getObject("geometry",!0,a),n);return n})},"esri/arcade/featureset/support/shared":function(){var m=this&&this.__assign||function(){m=Object.assign||function(q){for(var a,b=1,g=arguments.length;b<g;b++){a=arguments[b];for(var h in a)Object.prototype.hasOwnProperty.call(a,
h)&&(q[h]=a[h])}return q};return m.apply(this,arguments)};define(["require","exports","../../polyfill/promiseUtils","../../../geometry/Extent","../../../layers/Field"],function(q,a,b,g,h){function k(c){var f=null;c.domain&&(f="range"===c.domain.type?{type:"range",range:[c.domain.minValue,c.domain.maxValue]}:{type:"codedValue",codedValues:c.domain.toJson().codedValues});return m(m({name:c.name,type:c.type,alias:c.alias},void 0!==c.length?{length:c.length}:{}),{editable:!0===c.editable,nullable:!0===
c.nullable,domain:f})}function d(c){return c instanceof Date}Object.defineProperty(a,"__esModule",{value:!0});a.stableStringify=a.extractServiceUrl=a.reduceArrayWithPromises=a.toEsriGeometryType=a.layerFieldEsriConstants=a.layerGeometryEsriRestConstants=a.layerGeometryEsriConstants=a.callback=a.errback=a.defaultMaxRecords=a.sameGeomType=a.convertLinearUnitsToCode=a.shapeExtent=a.convertSquareUnitsToCode=a.cloneAttributes=a.equalityTest=a.isDate=a.isArray=a.isNumber=a.isBoolean=a.isString=a.IdState=
a.esriFieldToJson=a.cloneField=a.FeatureServiceDatabaseType=void 0;(function(c){c[c.Standardised=0]="Standardised";c[c.StandardisedNoInterval=1]="StandardisedNoInterval";c[c.SqlServer=2]="SqlServer";c[c.Oracle=3]="Oracle";c[c.Postgres=4]="Postgres";c[c.PGDB=5]="PGDB";c[c.FILEGDB=6]="FILEGDB";c[c.NotEvaluated=7]="NotEvaluated"})(a.FeatureServiceDatabaseType||(a.FeatureServiceDatabaseType={}));a.cloneField=function(c){return new h(k(c))};a.esriFieldToJson=k;(function(c){c[c.InFeatureSet=0]="InFeatureSet";
c[c.NotInFeatureSet=1]="NotInFeatureSet";c[c.Unknown=2]="Unknown"})(a.IdState||(a.IdState={}));a.isString=function(c){return"string"===typeof c||c instanceof String};a.isBoolean=function(c){return"boolean"===typeof c};a.isNumber=function(c){return"number"===typeof c};a.isArray=function(c){return c instanceof Array};a.isDate=d;a.equalityTest=function(c,f){return c===f?!0:d(c)&&d(f)?c.getTime()===f.getTime():!1};a.cloneAttributes=function(c){var f={},e;for(e in c)f[e]=c[e];return f};a.convertSquareUnitsToCode=
function(c){if(void 0===c)return null;if("number"===typeof c)return c;switch(c.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};a.shapeExtent=function(c){if(null===c)return null;switch(c.type){case "polygon":case "multipoint":case "polyline":return c.getExtent();case "point":return new g({xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference});case "extent":return c}return null};
a.convertLinearUnitsToCode=function(c){if(void 0===c)return null;if("number"===typeof c||"number"===typeof c)return c;switch(c.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};a.sameGeomType=function(c,f){return c===f||"point"===c&&"esriGeometryPoint"===f||"polyline"===c&&"esriGeometryPolyline"===f||"polygon"===c&&"esriGeometryPolygon"===f||"extent"===c&&"esriGeometryEnvelope"===f||"multipoint"===
c&&"esriGeometryMultipoint"===f||"point"===f&&"esriGeometryPoint"===c||"polyline"===f&&"esriGeometryPolyline"===c||"polygon"===f&&"esriGeometryPolygon"===c||"extent"===f&&"esriGeometryEnvelope"===c||"multipoint"===f&&"esriGeometryMultipoint"===c?!0:!1};a.defaultMaxRecords=1E3;a.errback=function(c){return function(f){c.reject(f)}};a.callback=function(c,f){return function(){try{c.apply(null,arguments)}catch(e){f.reject(e)}}};a.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",
multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};a.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",
esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};a.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID",
"global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",
esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};a.toEsriGeometryType=function(c){switch(c){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};a.reduceArrayWithPromises=function(c,f){return b.create(function(e,l){var n=b.resolve(!0);c.reduce(function(r,t,w,v){return r.then(function(y){try{return f(y,
t,w,v)}catch(x){return b.reject(x)}},function(y){return b.reject(y)})},n).then(e,l)})};a.extractServiceUrl=function(c){if(void 0===c)return"";c=c.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");c=c.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return c=c.split("?")[0]};a.stableStringify=function(c,f){f||(f={});"function"===typeof f&&(f={cmp:f});var e="boolean"===typeof f.cycles?f.cycles:!1,l=f.cmp&&function(r){return function(t){return function(w,v){return r({key:w,value:t[w]},{key:v,value:t[v]})}}}(f.cmp),
n=[];return function w(t){t&&t.toJson&&"function"===typeof t.toJson&&(t=t.toJson());if(void 0!==t){if("number"===typeof t)return isFinite(t)?""+t:"null";if("object"!==typeof t)return JSON.stringify(t);var v;if(Array.isArray(t)){var y="[";for(v=0;v<t.length;v++)v&&(y+=","),y+=w(t[v])||"null";return y+"]"}if(null===t)return"null";if(-1!==n.indexOf(t)){if(e)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var x=n.push(t)-1,B=Object.keys(t).sort(l&&l(t));
y="";for(v=0;v<B.length;v++){var p=B[v],z=w(t[p]);z&&(y&&(y+=","),y+=JSON.stringify(p)+":"+z)}n.splice(x,1);return"{"+y+"}"}}(c)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(m,q,a,b,g,h,k){m=m(null,{declaredClass:"esri.layers.Field",constructor:function(d){if(d&&q.isObject(d)&&(this.name=d.name,this.type=d.type,this.alias=d.alias,this.length=d.length,this.editable=d.editable,this.nullable=
d.nullable,this.defaultValue=d.defaultValue,this.description=d.description?JSON.parse(d.description):null,this.isViewOverride=!!d.isViewOverride,(d=d.domain)&&q.isObject(d)))switch(d.type){case "range":this.domain=new h(d);break;case "codedValue":this.domain=new k(d)}},toJson:function(){return g.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):
null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});q.setObject("layers.Field",m,b);return m})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(m,q,a,b,g,h){m=m([h],{declaredClass:"esri.layers.RangeDomain",constructor:function(k){k&&q.isObject(k)&&(this.minValue=k.range[0],this.maxValue=k.range[1])},toJson:function(){var k=this.inherited(arguments);
k.range=[this.minValue,this.maxValue];return g.fixJson(k)}});q.setObject("layers.RangeDomain",m,b);return m})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(m,q,a,b,g){m=m(null,{declaredClass:"esri.layers.Domain",constructor:function(h){h&&q.isObject(h)&&(this.name=h.name,this.type=h.type)},toJson:function(){return g.fixJson({name:this.name,type:this.type})}});q.setObject("layers.Domain",m,b);return m})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(m,q,a,b,g,h,k){m=m([k],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(d){d&&q.isObject(d)&&(this.codedValues=d.codedValues)},getName:function(d){var c;a.some(this.codedValues,function(f){f.code==d&&(c=f.name);return!!c});return c},toJson:function(){var d=this.inherited(arguments);d.codedValues=q.clone(this.codedValues);return h.fixJson(d)}});q.setObject("layers.CodedValueDomain",m,g);return m})},"esri/layers/vectorTiles/core/screenUtils":function(){define(["require","exports"],
function(m,q){function a(g){return g?72*g/q.DPI:0}Object.defineProperty(q,"__esModule",{value:!0});var b=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;q.DPI=96;q.pt2px=function(g){return g?g/72*q.DPI:0};q.px2pt=a;q.toPt=function(g){if("string"===typeof g){if(b.test(g)){var h=g.match(b),k=Number(h[1]);h=h[3]&&h[3].toLowerCase();g="-"===g.charAt(0);k="px"===h?a(k):k;return g?-k:k}return null}return g}})},"esri/layers/vectorTiles/support/arcadeUtils":function(){define(["require","exports","esri/renderers/arcadeUtils",
"esri/arcade/Dictionary"],function(m,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.createSyntaxTree=function(g){return a.createSyntaxTree(g)};q.createFunction=function(g,h){return a.createFunction(g,h)};q.createExecContext=function(g,h){return a.createExecContext(g,h)};q.executeFunction=function(g,h){return a.executeFunction(g,h)};q.extractFieldNames=function(g){return a.extractFieldNames(g)};q.getViewInfo=function(g){if(g&&g.viewingMode&&null!=g.scale&&g.spatialReference)return{view:new b({viewingMode:g.viewingMode,
scale:g.scale}),sr:g.spatialReference}}})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(m,q,a,b){m.setObject("renderer.arcadeUtils",b,a);return b})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(m,q,a,b,g,h,k){var d={vars:{$feature:"any",$view:"any"}},c=/^\$feature\./i,f={_getSyntaxTree:function(e){return"string"===
typeof e?f.createSyntaxTree(e):e},createSyntaxTree:function(e){try{var l=e?h.parseScript(e):null}catch(n){l=null}return l},createFunction:function(e,l){l=l||m.clone(d);e=f._getSyntaxTree(e);try{var n=e?h.compileScript(e,l):null}catch(r){n=null}return n},createExecContext:function(e,l){return{vars:{$feature:e?k.createFromGraphic(e):new k,$view:l&&l.view},spatialReference:l&&l.sr}},evalSyntaxTree:function(e,l){try{var n=h.executeScript(e,l)}catch(r){n=null}return n},executeFunction:function(e,l){try{var n=
e?e(l):null}catch(r){n=null}return n},executeAsyncFunction:function(e,l){try{var n=e?e(l):(new b).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(r){n=(new b).reject(r)}return n},extractFieldNames:function(e){e=f._getSyntaxTree(e);e=h.extractFieldLiterals(e);var l=[];q.forEach(e,function(n){c.test(n)&&(n=n.replace(c,""),l.push(n))});l.sort();return q.filter(l,function(n,r){return 0===r||l[r-1]!==n})},dependsOnView:function(e){return f.hasVariable(e,
"$view")},hasGeometryOperations:function(e){return(e=f._getSyntaxTree(e))?h.scriptUsesGeometryEngine(e):!1},enableGeometryOperations:function(){return h.enableGeometrySupport()},hasVariable:function(e,l){return(e=f._getSyntaxTree(e))?h.referencesMember(e,l):!1},hasFunction:function(e,l){return(e=f._getSyntaxTree(e))?h.referencesFunction(e,l):!1},createFeatureSetFromLayer:function(e,l){l=l||{};var n=h.featureSetUtils();return n?n.constructFeatureSet(e,l.spatialReference,l.outFields,l.returnGeometry,
l.cache):null},createFeatureSetFromLayerUrl:function(e,l){l=l||{};var n=h.featureSetUtils();return n?n.constructFeatureSetFromUrlRaw(e,l.spatialReference,l.outFields,l.returnGeometry,l.cache):null},createFeatureSetCollectionFromMap:function(e,l){var n=h.featureSetUtils();return n?n.createFeatureSetCollectionFromMap(e,e.spatialReference,l&&l.cache):null},createFeatureSetCollectionFromServiceUrl:function(e,l){l=l||{};var n=h.featureSetUtils();return n?n.createFeatureSetCollectionFromService(e,l.spatialReference,
l.cache):null},hasFeatureSetOperations:function(e){return(e=f._getSyntaxTree(e))?h.scriptUsesFeatureSet(e):!1},enableFeatureSetOperations:function(){return h.enableFeatureSetSupport().then(function(){var e=h.featureSetUtils();e&&e.initialiseMetaDataCache()})},enableAsyncOperations:function(){return h.enableAsyncSupport()}};m.setObject("support.expressionUtils",f,g);return f})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils ../moment".split(" "),
function(m,q,a,b,g,h,k,d,c,f){function e(O,W){if(null===I)throw Error("Async Arcade must be enabled for this script");return d("csp-restrictions")||!1===z?function(Z){return I.executeScript(O,Z)}:a.compileScript(O,W,!0)}function l(O,W){void 0===W&&(W=[]);return h.parseScript(O,W)}function n(O,W){if(!0===W.useAsync||!0===O.isAsync){if(null===I)throw Error("Async Arcade must be enabled for this script");return I.executeScript(O,W)}return b.executeScript(O,W)}function r(O,W){return b.referencesMember(O,
W)}function t(O,W){void 0===W&&(W=[]);void 0===O.usesGeometry&&k.findScriptDependencies(O,W);return!0===O.usesGeometry}function w(){return E?E:E=c.create(function(O,W){m(["../geometry/geometryEngine","./functions/geomsync"],function(Z,ba){D=!0;ba.setGeometryEngine(Z);O(!0)},function(Z){W(Z)})})}function v(){return null!==G?G:G=a.enableAsyncSupport().then(function(){return c.create(function(O,W){m(["./arcadeAsyncRuntime"],function(Z){try{I=Z;Z=0;for(var ba=C;Z<ba.length;Z++){var P=ba[Z];I.extend(P);
a.extend(P,"async")}C=null;O(!0)}catch(ha){W(ha)}},W)})})}function y(){return I?!0:!1}function x(){return H?H:H=v().then(function(){return c.create(function(O,W){m(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(Z,ba,P,ha,X){try{L=Z,I.extend([ba,P,ha,X]),a.extend([ba,P,ha,X],"async"),u=!0,O(!0)}catch(R){W(R)}},W)})})}function B(O,W){void 0===W&&(W=[]);void 0===O.usesFeatureSet&&k.findScriptDependencies(O,
W);return!0===O.usesFeatureSet}function p(O,W){if(W)for(var Z=0;Z<W.length;Z++)if(r(O,W[Z]))return!0;return!1}Object.defineProperty(q,"__esModule",{value:!0});q.featureSetUtils=q.scriptTouchesGeometry=q.loadScriptDependencies=q.scriptIsAsync=q.scriptUsesFeatureSet=q.enableFeatureSetSupport=q.isGeometryEnabled=q.isAsyncEnabled=q.isFeatureSetSupportEnabled=q.enableAsyncSupport=q.enableGeometrySupport=q.scriptUsesGeometryEngine=q.extractFieldLiterals=q.referencesFunction=q.referencesMember=q.executeScript=
q.parseAndExecuteScript=q.scriptCheck=q.validateScript=q.parseScript=q.extend=q.compileScript=void 0;var z=function(){if(d("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(O){return!1}}(),u=!1,D=!1,I=null,C=[];q.compileScript=function(O,W){return!0===W.useAsync||!0===O.isAsync?e(O,W):d("csp-restrictions")?function(Z){return b.executeScript(O,Z)}:a.compileScript(O,W)};q.extend=function(O){b.extend(O);a.extend(O,"sync");null===I?C.push(O):(a.extend(O,
"async"),I.extend(O))};q.parseScript=l;q.validateScript=function(O,W,Z){void 0===Z&&(Z="");return h.validateScript(O,W,Z)};q.scriptCheck=function(O,W,Z,ba){void 0===ba&&(ba="");return h.scriptCheck(O,W,Z,ba)};q.parseAndExecuteScript=function(O,W,Z){void 0===Z&&(Z=[]);O=h.parseScript(O,Z);return n(O,W)};q.executeScript=n;q.referencesMember=r;q.referencesFunction=function(O,W){return b.referencesFunction(O,W)};q.extractFieldLiterals=function(O,W){void 0===W&&(W=!1);return h.extractFieldLiterals(O,W)};
q.scriptUsesGeometryEngine=t;var E=null;q.enableGeometrySupport=w;var G=null;q.enableAsyncSupport=v;q.isFeatureSetSupportEnabled=function(){return u};q.isAsyncEnabled=y;q.isGeometryEnabled=function(){return D};var H=null;q.enableFeatureSetSupport=x;q.scriptUsesFeatureSet=B;q.scriptIsAsync=function(O,W){void 0===W&&(W=[]);void 0===O.isAsync&&k.findScriptDependencies(O,W);return!0===O.isAsync};q.loadScriptDependencies=function(O,W,Z,ba){void 0===Z&&(Z=[]);void 0===ba&&(ba=!1);return c.create(function(P,
ha){var X="string"===typeof O?l(O):O,R=[];X&&(!1===D&&(t(X)||ba)&&R.push(w()),!1===y()&&(!0===X.isAsync||W)&&R.push(v()),!1===u&&(B(X)||p(X,Z))&&R.push(x()));R?c.all(R).then(function(){P(!0)},ha):P(!0)})};q.scriptTouchesGeometry=function(O){if(t(O))return!0;O=k.findFunctionCalls(O);return-1<O.indexOf("geometry")||-1<O.indexOf("feature")?!0:!1};var L=null;q.featureSetUtils=function(){return L};g.MomentLibrary.Moment=f})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t,w,v,y,x,B,p,z,u,D,I){function C(M,N,Y){try{return Y(M,null,N)}catch(da){throw da;}}function E(M){return M instanceof Error?y.reject(M):y.reject(Error(M))}function G(M,N){try{switch(N.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return Z(M,N);case "VariableDeclaration":for(var Y=[],da=0;da<N.declarations.length;da++)Y.push(G(M,N.declarations[da]));return Y.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return W(M,
N);case "FunctionDeclaration":var ka=N.id.name.toLowerCase(),Ba={isAsync:M.isAsync,spatialReference:M.spatialReference,console:M.console,lrucache:M.lrucache,services:M.services,symbols:M.symbols,mangleMap:M.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:M.depthCounter+1,globalScope:M.globalScope};if(64<Ba.depthCounter)throw Error("Exceeded maximum function depth");Y="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(da=0;da<N.params.length;da++){var Aa=N.params[da].name.toLowerCase(),Ca=aa(M);Ba.localScope._SymbolsMap[Aa]=Ca;Ba.mangleMap[Aa]=Ca;Y+="lscope['"+Ca+"']\x3darguments["+da.toString()+"];\n"}!0===M.isAsync?(Y=Y+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(W(Ba,N.body)+"\n return lastStatement; "),Y+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(Y+=W(Ba,N.body)+"\n return lastStatement; }, runtimeCtx))",Y+="\n lastStatement \x3d lc.voidOperation; \n");if(void 0!==
M.globalScope[ka])var ya="gscope['"+ka+"']\x3d"+Y;else void 0!==M.globalScope._SymbolsMap[ka]?ya="gscope['"+M.globalScope._SymbolsMap[ka]+"']\x3d"+Y:(Ca=aa(M),M.globalScope._SymbolsMap[ka]=Ca,M.mangleMap[ka]=Ca,ya="gscope['"+Ca+"']\x3d"+Y);return ya;case "ReturnStatement":var qa=null===N.argument?"return lc.voidOperation":"return "+G(M,N.argument);return qa;case "IfStatement":if("AssignmentExpression"===N.test.type||"UpdateExpression"===N.test.type)throw Error(f.nodeErrorMessage(N.test,"RUNTIME",
"CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var xa=G(M,N.test),wa=ja(M),Wa="var "+wa+" \x3d "+xa+";\n if ("+wa+" \x3d\x3d\x3d true) {\n"+O(M,N.consequent)+"\n }\n";Wa=null!==N.alternate?Wa+("else if ("+wa+"\x3d\x3d\x3dfalse)   { \n"+O(M,N.alternate)+"}\n"):Wa+("else if ("+wa+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return Wa+="else { lang.error({type: '"+N.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var Za="AssignmentExpression"===
N.expression.type?"lastStatement \x3d lc.voidOperation; "+G(M,N.expression)+"; \n ":"lastStatement \x3d "+G(M,N.expression)+"; ";return Za;case "AssignmentExpression":return L(M,N);case "UpdateExpression":return H(M,N);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var Ma=[];ka=ya=0;for(da=N.quasis;ka<da.length;ka++){var Ka=da[ka];Ma.push(Ka.value?JSON.stringify(Ka.value.cooked):JSON.stringify(""));!1===Ka.tail&&(Ma.push(N.expressions[ya]?
"lang.castString(lang.aCheck("+G(M,N.expressions[ya])+", 'TemplateLiteral'))":""),ya++)}Y="(["+Ma.join(",")+"]).join('')"}catch(Ua){throw Ua;}return Y;case "TemplateElement":return JSON.stringify(N.value?N.value.cooked:"");case "ForStatement":Y="lastStatement \x3d lc.voidOperation; \n";null!==N.init&&(Y+=G(M,N.init)+"; ");var Xa=ja(M),Ga=ja(M);Y+="var "+Xa+" \x3d true; \n do { ";null!==N.update&&(Y+=" if ("+Xa+"\x3d\x3d\x3dfalse) {\n "+G(M,N.update)+"  \n}\n "+Xa+"\x3dfalse; \n");null!==N.test&&(Y+=
"var "+Ga+" \x3d "+G(M,N.test)+"; ",Y+="if ("+Ga+"\x3d\x3d\x3dfalse) { break; } else if ("+Ga+"!\x3d\x3dtrue) { lang.error({type: '"+N.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");Y+=G(M,N.body);null!==N.update&&(Y+="\n "+G(M,N.update));return Y+("\n"+Xa+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Oa=ja(M),Ta=ja(M),Pa=ja(M),na="var "+Oa+" \x3d "+G(M,N.right)+";\n";"VariableDeclaration"===N.left.type&&(na+=G(M,N.left));var Ia=
"VariableDeclaration"===N.left.type?N.left.declarations[0].id.name:N.left.name;Ia=Ia.toLowerCase();Y="";null!==M.localScope&&(void 0!==M.localScope[Ia]?Y="lscope['"+Ia+"']":void 0!==M.localScope._SymbolsMap[Ia]&&(Y="lscope['"+M.localScope._SymbolsMap[Ia]+"']"));""===Y&&(void 0!==M.globalScope[Ia]?Y="gscope['"+Ia+"']":void 0!==M.globalScope._SymbolsMap[Ia]&&(Y="gscope['"+M.globalScope._SymbolsMap[Ia]+"']"));na=na+("if ("+Oa+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Oa+") || lc.isString("+Oa+")) {var ")+(Ta+"\x3d"+Oa+".length; \nfor(var ")+(Pa+"\x3d0; "+Pa+"\x3c"+Ta+"; "+Pa+"++) {\n");na+=Y+"\x3d"+Pa+";\n";na+=G(M,N.body);na+="\n}\n";na+=" lastStatement \x3d lc.voidOperation; \n";na+=" \n}\n";na+="else if (lc.isImmutableArray("+Oa+")) {";na=na+("var "+Ta+"\x3d"+Oa+".length(); \nfor(var ")+(Pa+"\x3d0; "+Pa+"\x3c"+Ta+"; "+Pa+"++) {\n");na+=Y+"\x3d"+Pa+";\n";na+=G(M,N.body);na+="\n}\n";na+=" lastStatement \x3d lc.voidOperation; \n";na+=" \n}\n";na+="else if (( "+
Oa+" instanceof lang.Dictionary) || ( "+Oa+" instanceof lang.Feature)) {";na=na+("var "+Ta+"\x3d"+Oa+".keys(); \nfor(var ")+(Pa+"\x3d0; "+Pa+"\x3c"+Ta+".length; "+Pa+"++) {\n");na+=Y+"\x3d"+Ta+"["+Pa+"];\n";na+=G(M,N.body);na+="\n}\n";na+=" lastStatement \x3d lc.voidOperation; \n";na+=" \n}\n";M.isAsync&&(na+="else if (lc.isFeatureSet("+Oa+")) {",na=na+("var "+Ta+"\x3d"+Oa+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Pa+"\x3dlang. graphicToFeature( yield "+Ta+".next(),"+Oa+"); "+Pa+"!\x3dnull; "+
Pa+"\x3dlang. graphicToFeature( yield "+Ta+".next(),"+Oa+")) {\n")+(Y+"\x3d"+Pa+";\n"),na+=G(M,N.body),na+="\n}\n",na+=" lastStatement \x3d lc.voidOperation; \n",na+=" \n}\n");return na+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return P(M,N);case "MemberExpression":try{Y=void 0;Y=!0===N.computed?G(M,N.property):"'"+N.property.name+"'";var ob="lang.member("+G(M,N.object)+","+Y+")"}catch(Ua){throw Ua;}return ob;case "Literal":return null===N.value||void 0===N.value?"null":
JSON.stringify(N.value);case "ThisExpression":throw Error(f.nodeErrorMessage(N,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==N.callee.type)throw Error(f.nodeErrorMessage(N,"RUNTIME","ONLYNODESSUPPORTED"));var $a=N.callee.name.toLowerCase();Y="";null!==M.localScope&&(void 0!==M.localScope[$a]?Y="lscope['"+$a+"']":void 0!==M.localScope._SymbolsMap[$a]&&(Y="lscope['"+M.localScope._SymbolsMap[$a]+"']"));""===Y&&(void 0!==M.globalScope[$a]?Y="gscope['"+$a+"']":void 0!==M.globalScope._SymbolsMap[$a]&&
(Y="gscope['"+M.globalScope._SymbolsMap[$a]+"']"));if(""!==Y){da="[";for(Ka=0;Ka<N.arguments.length;Ka++)0<Ka&&(da+=", "),da+=G(M,N.arguments[Ka]);da+="]";Ma=M.isAsync?"(yield lang.callfunc("+Y+","+da+",runtimeCtx) )":"lang.callfunc("+Y+","+da+",runtimeCtx)"}else throw Error(f.nodeErrorMessage(N,"RUNTIME","NOTFOUND"));}catch(Ua){throw Ua;}return Ma;case "UnaryExpression":try{var ub="lang.unary("+G(M,N.argument)+",'"+N.operator+"')"}catch(Ua){throw Ua;}return ub;case "BinaryExpression":try{var Cb=
"lang.binary("+G(M,N.left)+","+G(M,N.right)+",'"+N.operator+"')"}catch(Ua){throw Ua;}return Cb;case "LogicalExpression":try{if("AssignmentExpression"===N.left.type||"UpdateExpression"===N.left.type)throw Error(f.nodeErrorMessage(N.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===N.right.type||"UpdateExpression"===N.right.type)throw Error(f.nodeErrorMessage(N.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===N.operator||"||"===N.operator)var vb=
"(lang.logicalCheck("+G(M,N.left)+") "+N.operator+" lang.logicalCheck("+G(M,N.right)+"))";else throw Error(f.nodeErrorMessage(N,"RUNTIME","ONLYORORAND"));}catch(Ua){throw Ua;}return vb;case "ConditionalExpression":throw Error(f.nodeErrorMessage(N,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{Y=[];for(da=0;da<N.elements.length;da++)"Literal"===N.elements[da].type?Y.push(G(M,N.elements[da])):Y.push("lang.aCheck("+G(M,N.elements[da])+",'ArrayExpression')");var wb="["+Y.join(",")+"]"}catch(Ua){throw Ua;
}return wb;case "ObjectExpression":Y="lang.dictionary([";for(da=0;da<N.properties.length;da++){var lb=N.properties[da],ab="Identifier"===lb.key.type?"'"+lb.key.name+"'":G(M,lb.key),eb=G(M,lb.value);0<da&&(Y+=",");Y+="lang.strCheck("+ab+",'ObjectExpression'),lang.aCheck("+eb+", 'ObjectExpression')"}return Y+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(f.nodeErrorMessage(N,"RUNTIME","NOTSUPPORTED"));default:throw Error(f.nodeErrorMessage(N,"RUNTIME","UNREOGNISED"));
}}catch(Ua){throw Ua;}}function H(M,N){var Y=null,da="";if("MemberExpression"===N.argument.type)return Y=G(M,N.argument.object),da=!0===N.argument.computed?G(M,N.argument.property):"'"+N.argument.property.name+"'","lang.memberupdate("+Y+","+da+",'"+N.operator+"',"+N.prefix+")";Y=N.argument.name.toLowerCase();if(null!==M.localScope){if(void 0!==M.localScope[Y])return"lang.update(lscope, '"+Y+"','"+N.operator+"',"+N.prefix+")";if(void 0!==M.localScope._SymbolsMap[Y])return"lang.update(lscope, '"+M.localScope._SymbolsMap[Y]+
"','"+N.operator+"',"+N.prefix+")"}if(void 0!==M.globalScope[Y])return"lang.update(gscope, '"+Y+"','"+N.operator+"',"+N.prefix+")";if(void 0!==M.globalScope._SymbolsMap[Y])return"lang.update(gscope, '"+M.globalScope._SymbolsMap[Y]+"','"+N.operator+"',"+N.prefix+")";throw Error("Variable not recognised");}function L(M,N){var Y=G(M,N.right),da=null,ka="";if("MemberExpression"===N.left.type)return da=G(M,N.left.object),ka=!0===N.left.computed?G(M,N.left.property):"'"+N.left.property.name+"'","lang.assignmember("+
da+","+ka+",'"+N.operator+"',"+Y+")";da=N.left.name.toLowerCase();if(null!==M.localScope){if(void 0!==M.localScope[da])return"lscope['"+da+"']\x3dlang.assign("+Y+",'"+N.operator+"', lscope['"+da+"'])";if(void 0!==M.localScope._SymbolsMap[da])return"lscope['"+M.localScope._SymbolsMap[da]+"']\x3dlang.assign("+Y+",'"+N.operator+"', lscope['"+M.localScope._SymbolsMap[da]+"'])"}if(void 0!==M.globalScope[da])return"gscope['"+da+"']\x3dlang.assign("+Y+",'"+N.operator+"', gscope['"+da+"'])";if(void 0!==M.globalScope._SymbolsMap[da])return"gscope['"+
M.globalScope._SymbolsMap[da]+"']\x3dlang.assign("+Y+",'"+N.operator+"', gscope['"+M.globalScope._SymbolsMap[da]+"'])";throw Error("Variable not recognised");}function O(M,N){return"BlockStatement"===N.type?G(M,N):"ReturnStatement"===N.type||"BreakStatement"===N.type||"ContinueStatement"===N.type?G(M,N)+"; ":"UpdateExpression"===N.type?"lastStatement \x3d "+G(M,N)+"; ":"ExpressionStatement"===N.type?G(M,N):"ObjectExpression"===N.type?"lastStatement \x3d "+G(M,N)+"; ":G(M,N)+"; "}function W(M,N){for(var Y=
"",da=0;da<N.body.length;da++)Y="ReturnStatement"===N.body[da].type?Y+(G(M,N.body[da])+"; \n"):"BreakStatement"===N.body[da].type?Y+(G(M,N.body[da])+"; \n"):"ContinueStatement"===N.body[da].type?Y+(G(M,N.body[da])+"; \n"):"UpdateExpression"===N.body[da].type?Y+("lastStatement \x3d "+G(M,N.body[da])+"; \n"):"ObjectExpression"===N.body[da].type?Y+("lastStatement \x3d "+G(M,N.body[da])+"; \n"):Y+(G(M,N.body[da])+" \n");return Y}function Z(M,N){var Y=null===N.init?null:G(M,N.init);Y===c.voidOperation&&
(Y=null);N=N.id.name.toLowerCase();if(null!==M.localScope){if(void 0!==M.localScope[N])return"lscope['"+N+"']\x3d"+Y+"; ";if(void 0!==M.localScope._SymbolsMap[N])return"lscope['"+M.localScope._SymbolsMap[N]+"']\x3d"+Y+"; ";var da=aa(M);M.localScope._SymbolsMap[N]=da;M.mangleMap[N]=da;return"lscope['"+da+"']\x3d"+Y+"; "}if(void 0!==M.globalScope[N])return"gscope['"+N+"']\x3d"+Y+"; ";if(void 0!==M.globalScope._SymbolsMap[N])return"gscope['"+M.globalScope._SymbolsMap[N]+"']\x3d"+Y+"; ";da=aa(M);M.globalScope._SymbolsMap[N]=
da;M.mangleMap[N]=da;return"gscope['"+da+"']\x3d"+Y+"; "}function ba(M,N,Y){N=N.toLowerCase();switch(N){case "hasz":return M=M.hasZ,void 0===M?!1:M;case "hasm":return M=M.hasM,void 0===M?!1:M;case "spatialreference":return N=M.spatialReference._arcadeCacheId,void 0===N&&(Y=!0,Object.freeze&&Object.isFrozen(M.spatialReference)&&(Y=!1),Y&&(Da++,N=M.spatialReference._arcadeCacheId=Da)),M=new g({wkt:M.spatialReference.wkt,wkid:M.spatialReference.wkid}),void 0!==N&&(M._arcadeCacheId="SPREF"+N.toString()),
M}switch(M.type){case "extent":switch(N){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return M=M[N],void 0!==M?M:null;case "type":return"Extent"}break;case "polygon":switch(N){case "rings":return N=M.getCacheValue("_arcadeCacheId"),void 0===N&&(Da++,N=Da,M.setCacheValue("_arcadeCacheId",N)),M=new k(M.rings,M.spatialReference,!0===M.hasZ,!0===M.hasM,N);case "type":return"Polygon"}break;case "point":switch(N){case "x":case "y":case "z":case "m":return void 0!==
M[N]?M[N]:null;case "type":return"Point"}break;case "polyline":switch(N){case "paths":return N=M.getCacheValue("_arcadeCacheId"),void 0===N&&(Da++,N=Da,M.setCacheValue("_arcadeCacheId",N)),M=new k(M.paths,M.spatialReference,!0===M.hasZ,!0===M.hasM,N);case "type":return"Polyline"}break;case "multipoint":switch(N){case "points":return N=M.getCacheValue("_arcadeCacheId"),void 0===N&&(Da++,N=Da,M.setCacheValue("_arcadeCacheId",N)),M=new d(M.points,M.spatialReference,!0===M.hasZ,!0===M.hasM,N,1);case "type":return"Multipoint"}}throw Error(f.nodeErrorMessage(Y,
"RUNTIME","PROPERTYNOTFOUND"));}function P(M,N){try{var Y=N.name.toLowerCase();if(null!==M.localScope){if(void 0!==M.localScope[Y])return"lscope['"+Y+"']";if(void 0!==M.localScope._SymbolsMap[Y])return"lscope['"+M.localScope._SymbolsMap[Y]+"']"}if(void 0!==M.globalScope[Y])return"gscope['"+Y+"']";if(void 0!==M.globalScope._SymbolsMap[Y])return"gscope['"+M.globalScope._SymbolsMap[Y]+"']";throw Error(f.nodeErrorMessage(N,"RUNTIME","VARIABLENOTFOUND"));}catch(da){throw da;}}function ha(M){return null===
M?"":c.isArray(M)||c.isImmutableArray(M)?"Array":c.isDate(M)?"Date":c.isString(M)?"String":c.isBoolean(M)?"Boolean":c.isNumber(M)?"Number":M instanceof b?"Attachment":M instanceof a?"Portal":M instanceof g?"Dictionary":M instanceof h?"Feature":M instanceof z?"Point":M instanceof u?"Polygon":M instanceof D?"Polyline":M instanceof p?"Multipoint":M instanceof x?"Extent":c.isFunctionParameter(M)?"Function":c.isFeatureSet(M)?"FeatureSet":c.isFeatureSetCollection(M)?"FeatureSetCollection":M===c.voidOperation?
"":"number"===typeof M&&isNaN(M)?"Number":"Unrecognised Type"}function X(M,N,Y,da){try{if(c.equalityTest(N[Y],da))return N[Y+1];var ka=N.length-Y;return 1===ka?N[Y]:2===ka?null:3===ka?N[Y+2]:X(M,N,Y+2,da)}catch(Ba){throw Ba;}}function R(M,N,Y,da){try{if(!0===da)return N[Y+1];if(3===N.length-Y)return N[Y+2];var ka=N[Y+2];if(!1===c.isBoolean(ka))throw Error("WHEN needs boolean test conditions");return R(M,N,Y+2,ka)}catch(Ba){throw Ba;}}function V(M,N){var Y=M.length,da=Math.floor(Y/2);if(0===Y)return[];
if(1===Y)return[M[0]];var ka=V(M.slice(0,da),N);M=V(M.slice(da,Y),N);for(Y=[];0<ka.length||0<M.length;)0<ka.length&&0<M.length?(da=N(ka[0],M[0]),isNaN(da)&&(da=0),0>=da?(Y.push(ka[0]),ka=ka.slice(1)):(Y.push(M[0]),M=M.slice(1))):0<ka.length?(Y.push(ka[0]),ka=ka.slice(1)):0<M.length&&(Y.push(M[0]),M=M.slice(1));return Y}function J(M,N){try{var Y=M.length,da=Math.floor(Y/2);if(0===Y)return y.resolve([]);if(1===Y)return y.resolve([M[0]]);var ka=[J(M.slice(0,da),N),J(M.slice(da,Y),N)];return y.all(ka).then(function(Ba){return S(Ba[0],
Ba[1],N,[])})}catch(Ba){return y.reject(Ba)}}function S(M,N,Y,da){return y.create(function(ka,Ba){0<M.length||0<N.length?0<M.length&&0<N.length?Y(M[0],N[0]).then(function(Aa){try{isNaN(Aa)&&(Aa=1),0>=Aa?(da.push(M[0]),M=M.slice(1)):(da.push(N[0]),N=N.slice(1)),S(M,N,Y,da).then(function(Ca){ka(Ca)},Ba)}catch(Ca){Ba(Ca)}},Ba):0<M.length?(da.push(M[0]),M=M.slice(1),S(M,N,Y,da).then(function(Aa){ka(Aa)},Ba)):0<N.length&&(da.push(N[0]),N=N.slice(1),S(M,N,Y,da).then(function(Aa){ka(Aa)},Ba)):ka(da)})}function aa(M){M.symbols.symbolCounter++;
return"_T"+M.symbols.symbolCounter.toString()}function ja(M){M.symbols.symbolCounter++;return"_Tvar"+M.symbols.symbolCounter.toString()}function la(M,N,Y){var da={};M||(M={});Y||(Y={});da._SymbolsMap={};da.textformatting=1;da.infinity=1;da.pi=1;for(var ka in N)da[ka]=1;for(ka in Y)da[ka]=1;for(ka in M)da[ka]=1;return da}function ra(M,N){for(var Y={mode:N,compiled:!0,functions:{},signatures:[],failDefferred:E,standardFunction:C,standardFunctionAsync:C,evaluateIdentifier:ta},da=0;da<M.length;da++)M[da].registerFunctions(Y);
if("sync"===N){for(var ka in Y.functions)ua[ka]=new c.NativeFunction(Y.functions[ka]),ca.prototype[ka]=ua[ka];for(da=0;da<Y.signatures.length;da++)f.addFunctionDeclaration(Y.signatures[da],"sync")}else{for(ka in Y.functions)U[ka]=new c.NativeFunction(Y.functions[ka]),ia.prototype[ka]=U[ka];for(da=0;da<Y.signatures.length;da++)f.addFunctionDeclaration(Y.signatures[da],"async")}}function ta(M,N){N=N.name;if("_SymbolsMap"===N)throw"Illegal";if(0<M.localStack.length){if("_t"!==N.substr(0,2).toLowerCase()&&
void 0!==M.localStack[M.localStack.length-1][N])return M.localStack[M.localStack.length-1][N];var Y=M.mangleMap[N];if(void 0!==Y&&void 0!==M.localStack[M.localStack.length-1][Y])return M.localStack[M.localStack.length-1][Y]}if("_t"!==N.substr(0,2).toLowerCase()&&void 0!==M.globalScope[N]||1===M.globalScope._SymbolsMap[N])return M.globalScope[N];N=M.mangleMap[N];if(void 0!==N)return M.globalScope[N]}function va(M){}Object.defineProperty(q,"__esModule",{value:!0});q.enableAsyncSupport=q.compileScript=
q.referencesFunction=q.referencesMember=q.validateScript=q.extractFieldLiterals=q.executeScript=q.extend=q.functionHelper=void 0;var Da=0,ua={};e.registerFunctions(ua,C);l.registerFunctions(ua,C);v.registerFunctions(ua,C);t.registerFunctions(ua,C);n.registerFunctions(ua,C);w.registerFunctions(ua,C);ua["typeof"]=function(M,N){return C(M,N,function(Y,da,ka){c.pcCheck(ka,1,1);Y=ha(ka[0]);if("Unrecognised Type"===Y)throw Error("Unrecognised Type");return Y})};ua.iif=function(M,N){try{return C(M,N,function(Y,
da,ka){c.pcCheck(ka,3,3);if(!1===c.isBoolean(ka[0]))throw Error("IF Function must have a boolean test condition");return ka[0]?ka[1]:ka[2]})}catch(Y){throw Y;}};ua.decode=function(M,N){try{return C(M,N,function(Y,da,ka){if(2>ka.length)throw Error("Missing Parameters");if(2===ka.length)return ka[1];if(0===(ka.length-1)%2)throw Error("Must have a default value result.");return X(M,ka,1,ka[0])})}catch(Y){throw Y;}};ua.when=function(M,N){try{return C(M,N,function(Y,da,ka){if(3>ka.length)throw Error("Missing Parameters");
if(0===ka.length%2)throw Error("Must have a default value result.");Y=ka[0];if(!1===c.isBoolean(Y))throw Error("WHEN needs boolean test conditions");return R(M,ka,0,Y)})}catch(Y){throw Y;}};ua.top=function(M,N){return C(M,N,function(Y,da,ka){c.pcCheck(ka,2,2);if(c.isArray(ka[0]))return c.toNumber(ka[1])>=ka[0].length?ka[0].slice(0):ka[0].slice(0,c.toNumber(ka[1]));if(c.isImmutableArray(ka[0]))return c.toNumber(ka[1])>=ka[0].length()?ka[0].slice(0):ka[0].slice(0,c.toNumber(ka[1]));throw Error("Top cannot accept this parameter type");
})};ua.first=function(M,N){return C(M,N,function(Y,da,ka){c.pcCheck(ka,1,1);return c.isArray(ka[0])?0===ka[0].length?null:ka[0][0]:c.isImmutableArray(ka[0])?0===ka[0].length()?null:ka[0].get(0):null})};ua.sort=function(M,N){return C(M,N,function(Y,da,ka){c.pcCheck(ka,1,2);da=ka[0];c.isImmutableArray(da)&&(da=da.toArray());if(!1===c.isArray(da))throw Error("Illegal Argument");if(1<ka.length){if(!1===c.isFunctionParameter(ka[1]))throw Error("Illegal Argument");var Ba=function(xa,wa){return sa.callfunc(ka[1],
[xa,wa],Y)};return M.isAsync?J(da,Ba):da=V(da,function(xa,wa){return Ba(xa,wa)})}if(0===da.length)return[];for(var Aa={},Ca=0;Ca<da.length;Ca++){var ya=ha(da[Ca]);""!==ya&&(Aa[ya]=!0)}if(!0===Aa.Array||!0===Aa.Dictionary||!0===Aa.Feature||!0===Aa.Point||!0===Aa.Polygon||!0===Aa.Polyline||!0===Aa.Multipoint||!0===Aa.Extent||!0===Aa.Function)return da.slice(0);Ca=0;ya="";for(var qa in Aa)Ca++,ya=qa;return da=1<Ca||"String"===ya?V(da,function(xa,wa){if(null===xa||void 0===xa||xa===c.voidOperation)return null===
wa||void 0===wa||wa===c.voidOperation?0:1;if(null===wa||void 0===wa||wa===c.voidOperation)return-1;xa=c.toString(xa);wa=c.toString(wa);return xa<wa?-1:xa===wa?0:1}):"Number"===ya?V(da,function(xa,wa){return xa-wa}):"Boolean"===ya?V(da,function(xa,wa){return xa===wa?0:wa?-1:1}):"Date"===ya?V(da,function(xa,wa){return wa-xa}):da.slice(0)})};var U={},T;for(T in ua)U[T]=new c.NativeFunction(ua[T]);r.registerFunctions(ua,C);for(T in ua)ua[T]=new c.NativeFunction(ua[T]);var ca=function(){};ca.prototype=
ua;var ia=function(){};ia.prototype=U;q.functionHelper={fixSpatialReference:c.fixSpatialReference,parseArguments:function(M,N){for(var Y=[],da=0;da<N.arguments.length;da++)Y.push(G(M,N.arguments[da]));return Y},standardFunction:C};q.extend=ra;q.executeScript=function(M,N){return M(N)};q.extractFieldLiterals=function(M,N){void 0===N&&(N=!1);return f.findFieldLiterals(M)};q.validateScript=function(M,N){return f.validateScript(M,N,"sync")};q.referencesMember=function(M,N){return f.referencesMember(M,
N)};q.referencesFunction=function(M,N){return f.referencesFunction(M,N)};var ea=0,sa={error:function(M,N,Y){throw Error(f.nodeErrorMessage(M,N,Y));},__awaiter:function(M,N,Y,da){return y.create(function(ka,Ba){function Aa(qa){try{ya(da.next(qa))}catch(xa){Ba(xa)}}function Ca(qa){try{ya(da["throw"](qa))}catch(xa){Ba(xa)}}function ya(qa){qa.done?ka(qa.value):qa.value&&qa.value.then?qa.value.then(Aa,Ca):(ea++,0===ea%100?setTimeout(function(){ea=0;Aa(qa.value)},0):Aa(qa.value))}ya((da=da.apply(M,N||[])).next())})},
functionDepthchecker:function(M,N){return function(){N.depthCounter++;N.localStack.push([]);if(64<N.depthCounter)throw Error("Exceeded maximum function depth");var Y=M.apply(this,arguments);if(y.isPromiseLike(Y))return Y.then(function(da){N.depthCounter--;--N.localStack.length;return da});N.depthCounter--;--N.localStack.length;return Y}},castString:function(M){return c.toString(M)},aCheck:function(M,N){if(c.isFunctionParameter(M))throw Error(f.nodeErrorMessage({type:N},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));
return M===c.voidOperation?null:M},Dictionary:g,Feature:h,dictionary:function(M){for(var N={},Y=0;Y<M.length;Y+=2){if(c.isFunctionParameter(M[Y+1]))throw Error("Illegal Argument");if(!1===c.isString(M[Y]))throw Error("Illegal Argument");N[M[Y].toString()]=M[Y+1]===c.voidOperation?null:M[Y+1]}M=new g(N);M.immutable=!1;return M},strCheck:function(M){if(!1===c.isString(M))throw Error("Illegal Argument");return M},unary:function(M,N){if(c.isBoolean(M)){if("!"===N)return!M;if("-"===N)return-1*c.toNumber(M);
if("+"===N)return 1*c.toNumber(M);if("~"===N)return~c.toNumber(M);throw Error(f.nodeErrorMessage({type:"UnaryExpression",operator:N,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===N)return-1*c.toNumber(M);if("+"===N)return 1*c.toNumber(M);if("~"===N)return~c.toNumber(M);throw Error(f.nodeErrorMessage({type:"UnaryExpression",operator:N,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(M){if(!1===c.isBoolean(M))throw Error(f.nodeErrorMessage({type:"LogicalExpression",
operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return M},logical:function(M,N,Y){if(c.isBoolean(M)&&c.isBoolean(N))switch(Y){case "||":return M||N;case "\x26\x26":return M&&N}throw Error(f.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(M,N,Y){switch(Y){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return c.binaryOperator(c.toNumber(M),c.toNumber(N),Y);case "\x3d\x3d":return c.equalityTest(M,
N);case "\x3d":return c.equalityTest(M,N);case "!\x3d":return!c.equalityTest(M,N);case "\x3c":return c.greaterThanLessThan(M,N,Y);case "\x3e":return c.greaterThanLessThan(M,N,Y);case "\x3c\x3d":return c.greaterThanLessThan(M,N,Y);case "\x3e\x3d":return c.greaterThanLessThan(M,N,Y);case "+":return c.isString(M)||c.isString(N)?c.toString(M)+c.toString(N):c.toNumber(M)+c.toNumber(N);case "-":return c.toNumber(M)-c.toNumber(N);case "*":return c.toNumber(M)*c.toNumber(N);case "/":return c.toNumber(M)/
c.toNumber(N);case "%":return c.toNumber(M)%c.toNumber(N);default:throw Error(f.nodeErrorMessage({type:"BinaryExpression",operator:Y,left:M,right:N},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(M,N,Y){switch(N){case "\x3d":return M===c.voidOperation?null:M;case "/\x3d":return c.toNumber(Y)/c.toNumber(M);case "*\x3d":return c.toNumber(Y)*c.toNumber(M);case "-\x3d":return c.toNumber(Y)-c.toNumber(M);case "+\x3d":return c.isString(Y)||c.isString(M)?c.toString(Y)+c.toString(M):c.toNumber(Y)+
c.toNumber(M);case "%\x3d":return c.toNumber(Y)%c.toNumber(M);default:throw Error(f.nodeErrorMessage({type:"AssignmentExpression",operator:N,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(M,N,Y,da){var ka=c.toNumber(M[N]);M[N]="++"===Y?ka+1:ka-1;return!1===da?ka:"++"===Y?ka+1:ka-1},graphicToFeature:function(M,N){return null===M?null:h.createFromGraphicLikeObject(M.geometry,M.attributes,N)},memberupdate:function(M,N,Y,da){if(c.isArray(M))if(c.isNumber(N)){0>N&&(N=M.length+
N);if(0>N||N>=M.length)throw Error("Assignment outside of array bounds");var ka=c.toNumber(M[N]);M[N]="++"===Y?ka+1:ka-1}else throw Error("Invalid Parameter");else if(M instanceof g){if(!1===c.isString(N))throw Error("Dictionary accessor must be a string");if(!0===M.hasField(N))ka=c.toNumber(M.field(N)),M.setField(N,"++"===Y?ka+1:ka-1);else throw Error("Invalid Parameter");}else if(M instanceof h){if(!1===c.isString(N))throw Error("Feature accessor must be a string");if(!0===M.hasField(N))ka=c.toNumber(M.field(N)),
M.setField(N,"++"===Y?ka+1:ka-1);else throw Error("Invalid Parameter");}else{if(c.isImmutableArray(M))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===da?ka:"++"===Y?ka+1:ka-1},assignmember:function(M,N,Y,da){if(c.isArray(M))if(c.isNumber(N)){0>N&&(N=M.length+N);if(0>N||N>M.length)throw Error("Assignment outside of array bounds");if(N===M.length&&"\x3d"!==Y)throw Error("Invalid Parameter");M[N]=this.assign(da,Y,M[N])}else throw Error("Invalid Parameter");else if(M instanceof
g){if(!1===c.isString(N))throw Error("Dictionary accessor must be a string");if(!0===M.hasField(N))M.setField(N,this.assign(da,Y,M.field(N)));else{if("\x3d"!==Y)throw Error("Invalid Parameter");M.setField(N,this.assign(da,Y,null))}}else if(M instanceof h){if(!1===c.isString(N))throw Error("Feature accessor must be a string");if(!0===M.hasField(N))M.setField(N,this.assign(da,Y,M.field(N)));else{if("\x3d"!==Y)throw Error("Invalid Parameter");M.setField(N,this.assign(da,Y,null))}}else{if(c.isImmutableArray(M))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}},member:function(M,N){if(null===M)throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(M instanceof g||M instanceof h){if(c.isString(N))return M.field(N);throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(M instanceof B){if(c.isString(N))return ba(M,N,"MemberExpression");throw Error(f.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(c.isArray(M)){if(c.isNumber(N)&&isFinite(N)&&Math.floor(N)===N){0>N&&(N=M.length+N);if(N>=M.length||0>N)throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return M[N]}throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(c.isString(M)){if(c.isNumber(N)&&isFinite(N)&&Math.floor(N)===N){0>
N&&(N=M.length+N);if(N>=M.length||0>N)throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return M[N]}throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(c.isImmutableArray(M)&&c.isNumber(N)&&isFinite(N)&&Math.floor(N)===N){0>N&&(N=M.length()+N);if(N>=M.length()||0>N)throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},
"RUNTIME","OUTOFBOUNDS"));return M.get(N)}throw Error(f.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(M,N,Y){return M instanceof c.NativeFunction?M.fn(Y,N):M instanceof c.SizzleFunction?M.fn.apply(this,N):M.apply(this,N)}};q.compileScript=function(M,N,Y){void 0===N&&(N=null);void 0===Y&&(Y=!1);null===N&&(N={vars:{},customfunctions:{}});N={isAsync:Y,globalScope:la(N.vars,Y?U:ua,N.customfunctions),localScope:null,mangleMap:{},
console:va,lrucache:N.lrucache,services:N.services,symbols:{symbolCounter:0}};M=G(N,M.body[0].body);""===M&&(M="lc.voidOperation; ");N={lc:c,lang:sa,mangles:N.mangleMap,postProcess:function(da){da instanceof c.ReturnResult&&(da=da.value);da instanceof c.ImplicitResult&&(da=da.value);da===c.voidOperation&&(da=null);if(da===c.breakResult)throw Error("Cannot return BREAK");if(da===c.continueResult)throw Error("Cannot return CONTINUE");if(c.isFunctionParameter(da))throw Error("Cannot return FUNCTION");
return da},prepare:function(da,ka){var Ba=da.spatialReference;if(null===Ba||void 0===Ba)Ba=new I({wkid:102100});var Aa=da.vars,Ca=da.customfunctions,ya=ka?new ia:new ca;Aa||(Aa={});Ca||(Ca={});var qa=new g({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});qa.immutable=!1;ya._SymbolsMap={textformatting:1,infinity:1,pi:1};ya.textformatting=qa;ya.infinity=Number.POSITIVE_INFINITY;ya.pi=Math.PI;for(var xa in Ca)ya[xa]=Ca[xa],ya._SymbolsMap[xa]=1;for(xa in Aa)ya._SymbolsMap[xa]=
1,ya[xa]=Aa[xa]&&"esri.Graphic"===Aa[xa].declaredClass?h.createFromGraphic(Aa[xa]):Aa[xa];return{localStack:[],isAsync:ka,mangleMap:this.mangles,spatialReference:Ba,globalScope:ya,abortSignal:void 0===da.abortSignal||null===da.abortSignal?{aborted:!1}:da.abortSignal,localScope:null,services:da.services,console:da.console?da.console:va,lrucache:da.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",Y?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
M+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+M+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(N)};q.enableAsyncSupport=function(){return y.create(function(M,N){m(["./functions/geomasync"],function(Y){ra([Y],"async");M(!0)},function(Y){N(Y)})})}})},
"esri/arcade/ArcadePortal":function(){var m=this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var k in h)h.hasOwnProperty(k)&&(g[k]=h[k])};return q(a,b)};return function(a,b){function g(){this.constructor=a}q(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require","exports","./Dictionary"],function(q,a,b){return function(g){function h(k){var d=g.call(this)||
this;d.immutable=!1;d.setField("url",k);d.immutable=!0;return d}m(h,g);return h}(b)})},"esri/arcade/Attachment":function(){var m=this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var k in h)h.hasOwnProperty(k)&&(g[k]=h[k])};return q(a,b)};return function(a,b){function g(){this.constructor=a}q(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require","exports",
"./Dictionary"],function(q,a,b){return function(g){function h(k,d,c,f,e){var l=g.call(this)||this;l.attachmentUrl=e;l.immutable=!1;l.setField("id",k);l.setField("name",d);l.setField("contenttype",c);l.setField("size",f);l.immutable=!0;return l}m(h,g);return h}(b)})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(m,q){function a(p,z){return"0"!==p.min&&z.length<Number(p.min)||"*"!==p.max&&z.length>Number(p.max)?-2:1}function b(p,z,u){if(null!==u.localScope&&void 0!==u.localScope[p.toLowerCase()]){var D=
u.localScope[p.toLowerCase()];if("FormulaFunction"===D.type||"any"===D.type)return void 0===D.signature&&(D.signature={min:"0",max:"*"}),a(D.signature,z)}return void 0!==u.globalScope[p.toLowerCase()]&&(D=u.globalScope[p.toLowerCase()],"FormulaFunction"===D.type||"any"===D.type)?(void 0===D.signature&&(D.signature={min:"0",max:"*"}),a(D.signature,z)):-1}function g(p,z){if(p)for(var u=0;u<p.length;u++)h(p[u],z)}function h(p,z){if(p&&!1!==z(p))switch(p.type){case "ArrayExpression":g(p.elements,z);break;
case "AssignmentExpression":case "BinaryExpression":h(p.left,z);h(p.right,z);break;case "BlockStatement":g(p.body,z);break;case "CallExpression":h(p.callee,z);g(p.arguments,z);break;case "ConditionalExpression":h(p.test,z);h(p.alternate,z);h(p.consequent,z);break;case "ExpressionStatement":h(p.expression,z);break;case "ForInStatement":h(p.left,z);h(p.right,z);h(p.body,z);break;case "ForStatement":h(p.init,z);h(p.test,z);h(p.update,z);h(p.body,z);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":h(p.id,
z);g(p.params,z);h(p.body,z);break;case "IfStatement":h(p.test,z);h(p.consequent,z);h(p.alternate,z);break;case "LogicalExpression":h(p.left,z);h(p.right,z);break;case "MemberExpression":h(p.object,z);h(p.property,z);break;case "ObjectExpression":g(p.properties,z);break;case "Program":g(p.body,z);break;case "Property":h(p.key,z);h(p.value,z);break;case "ReturnStatement":h(p.argument,z);break;case "UnaryExpression":h(p.argument,z);break;case "UpdateExpression":h(p.argument,z);break;case "VariableDeclaration":g(p.declarations,
z);break;case "VariableDeclarator":h(p.id,z);h(p.init,z);break;case "TemplateLiteral":g(p.expressions,z),g(p.quasis,z)}}function k(p,z){void 0===z&&(z=!0);var u=n(p,"SYNTAX","UNREOGNISED");try{switch(p.type){case "VariableDeclarator":return null!==p.init&&"FunctionExpression"===p.init.type?n(p,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==p.id.type?n(p,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==p.init?k(p.init,!1):"";case "VariableDeclaration":for(var D=0;D<p.declarations.length;D++)if(u=
k(p.declarations[D],z),""!==u)return u;return"";case "ForInStatement":u=k(p.left,z);if(""!==u)break;if("VariableDeclaration"===p.left.type){if(1<p.left.declarations.length)return n(p,"SYNTAX","ONLY1VAR");if(null!==p.left.declarations[0].init)return n(p,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==p.left.type)return n(p,"SYNTAX","LEFTNOTVAR");u=k(p.right,z);if(""!==u)break;u=k(p.body,z);if(""!==u)break;return"";case "ForStatement":if(null!==p.test&&(u=k(p.test,z),""!==u))break;if(null!==p.init&&
(u=k(p.init,z),""!==u))break;if(null!==p.update&&(u=k(p.update,z),""!==u))break;if(null!==p.body&&(u=k(p.body,z),""!==u))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":u=k(p.test,z);if(""!==u)break;if(null!==p.consequent&&(u=k(p.consequent,!1),""!==u))break;if(null!==p.alternate&&(u=k(p.alternate,!1),""!==u))break;return"";case "BlockStatement":var I=[];for(D=0;D<p.body.length;D++)"EmptyStatement"!==p.body[D].type&&
I.push(p.body[D]);p.body=I;for(D=0;D<p.body.length;D++)if(u=k(p.body[D],z),""!==u)return u;return"";case "FunctionDeclaration":return!1===z?n(p,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==p.id.type?n(p,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):k(p.body,!1);case "ReturnStatement":return null!==p.argument?k(p.argument,z):"";case "UpdateExpression":return"Identifier"!==p.argument.type&&"MemberExpression"!==p.argument.type?n(p,"SYNTAX","ASSIGNMENTTOVARSONLY"):k(p.argument,z);case "AssignmentExpression":if("Identifier"!==
p.left.type&&"MemberExpression"!==p.left.type)return n(p,"SYNTAX","ASSIGNMENTTOVARSONLY");u=k(p.left,z);if(""!==u)break;switch(p.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return n(p,"SYNTAX","OPERATORNOTRECOGNISED")}return k(p.right,!1);case "ExpressionStatement":return k(p.expression,!1);case "Identifier":u="";break;case "MemberExpression":u=k(p.object,z);if(""!==u)break;return!0===p.computed?k(p.property,z):"";case "Literal":return"";case "TemplateElement":return"";
case "CallExpression":if("Identifier"!==p.callee.type)return n(p,"SYNTAX","ONLYNODESSUPPORTED");u="";for(D=0;D<p.arguments.length;D++)if(u=k(p.arguments[D],z),""!==u)return u;return"";case "UnaryExpression":u=k(p.argument,z);break;case "BinaryExpression":u=k(p.left,z);if(""!==u)break;u=k(p.right,z);if(""!==u)break;switch(p.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return n(p,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":u=k(p.left,z);if(""!==u)break;u=k(p.right);if(""!==u)break;switch(p.operator){case "\x26\x26":case "||":break;default:return n(p,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return n(p,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":u="";for(D=0;D<p.elements.length&&(u=k(p.elements[D],z),""===u);D++);break;case "TemplateLiteral":u="";for(D=0;D<p.quasis.length;D++)if(u=k(p.quasis[D],z),
""!==u)return u;for(D=0;D<p.expressions.length&&(u=k(p.expressions[D],z),""===u);D++);break;case "ObjectExpression":u="";for(D=0;D<p.properties.length;D++){u="";if(null!==p.properties[D].key&&("Literal"!==p.properties[D].key.type&&"Identifier"!==p.properties[D].key.type&&(u=n(p,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===p.properties[D].key.type)){I=p.properties[D].key;var C="value"in I?I.value:null;"string"===typeof C||C instanceof String||(u=n(p,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===
u&&(u=k(p.properties[D],z));if(""!==u)break}break;case "Property":if("Literal"!==p.key.type&&"Identifier"!==p.key.type)return n(p,"SYNTAX","ONLYLITERAL");if("Identifier"!==p.key.type&&(u=k(p.key,z),""!==u))break;u=k(p.value,z)}return u}catch(E){throw E;}}function d(p,z){var u=n(p,"SYNTAX","UNREOGNISED"),D=null,I="";try{switch(p.type){case "VariableDeclarator":if(null!==p.init&&"FunctionExpression"===p.init.type)return n(p,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var C=null===p.init?"":d(p.init,z);if(""!==
C)return C;"Identifier"===p.id.type&&(null===z.localScope?z.globalScope[p.id.name.toLowerCase()]={type:"any"}:z.localScope[p.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":D=f(p.id.name.toLowerCase(),p);I=e(p,z);if(""!==I)return I;if(null!==z.localScope)return n(p,"SYNTAX","GLOBALFUNCTIONSONLY");D.isnative=!1;z.globalScope[p.id.name.toLowerCase()]={type:"FormulaFunction",signature:[D]};return"";case "VariableDeclaration":u="";for(var E=0;E<p.declarations.length&&(u=d(p.declarations[E],
z),""===u);E++);break;case "IfStatement":u=d(p.test,z);if(""!==u)break;if("AssignmentExpression"===p.test.type||"UpdateExpression"===p.test.type)return n(p.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==p.consequent&&(u=d(p.consequent,z),""!==u))break;if(null!==p.alternate&&(u=d(p.alternate,z),""!==u))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(E=0;E<p.body.length;E++)if(u=d(p.body[E],z),""!==u)return u;return"";case "ReturnStatement":return null!==p.argument?
d(p.argument,z):"";case "ForInStatement":if("VariableDeclaration"===p.left.type){if(1<p.left.declarations.length)return n(p,"SYNTAX","ONLY1VAR");if(null!==p.left.declarations[0].init)return n(p,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==p.left.type)return n(p,"SYNTAX","LEFTNOTVAR");u=d(p.left,z);if(""!==u)break;u=d(p.right,z);if(""!==u)break;u=d(p.body,z);if(""!==u)break;return"";case "ForStatement":if(null!==p.init&&(u=d(p.init,z),""!==u))break;if(null!==p.test&&(u=d(p.test,z),""!==u))break;
if(null!==p.body&&(u=d(p.body,z),""!==u))break;if(null!==p.update&&(u=d(p.update,z),""!==u))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==p.argument.type&&"MemberExpression"!==p.argument.type)return n(p,"SYNTAX","ASSIGNMENTTOVARSONLY");var G=!1;if("MemberExpression"===p.argument.type)return d(p.argument,z);null!==z.localScope&&void 0!==z.localScope[p.argument.name.toLowerCase()]&&(G=!0);void 0!==z.globalScope[p.argument.name.toLowerCase()]&&
(G=!0);return!1===G?"Identifier "+p.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==p.left.type&&"MemberExpression"!==p.left.type)return n(p,"SYNTAX","ASSIGNMENTTOVARSONLY");var H=d(p.right,z);if(""!==H)return H;G=!1;if("MemberExpression"===p.left.type)return H=d(p.left,z),""!==H?H:"";null!==z.localScope&&void 0!==z.localScope[p.left.name.toLowerCase()]&&(G=!0);void 0!==z.globalScope[p.left.name.toLowerCase()]&&(G=!0);return!1===G?"Identifier "+p.left.name+
" has not been declared.":"";case "ExpressionStatement":return d(p.expression,z);case "Identifier":var L=p.name.toLowerCase();if(null!==z.localScope&&void 0!==z.localScope[L])return"";u=void 0!==z.globalScope[L]?"":n(p,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":u=d(p.object,z);if(""!==u)break;return!0===p.computed?d(p.property,z):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==p.callee.type)return n(p,"SYNTAX","ONLYNODESSUPPORTED");
u="";for(E=0;E<p.arguments.length;E++)if(u=d(p.arguments[E],z),""!==u)return u;var O=b(p.callee.name,p.arguments,z);-1===O&&(u=n(p,"SYNTAX","NOTFOUND"));-2===O&&(u=n(p,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":u=d(p.argument,z);break;case "BinaryExpression":u=d(p.left,z);if(""!==u)break;u=d(p.right,z);if(""!==u)break;return"";case "LogicalExpression":u=d(p.left,z);if(""!==u)break;if("AssignmentExpression"===p.left.type||"UpdateExpression"===p.left.type)return n(p.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
u=d(p.right,z);if(""!==u)break;return"AssignmentExpression"===p.right.type||"UpdateExpression"===p.right.type?n(p.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return n(p,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":u="";for(E=0;E<p.elements.length&&(u=d(p.elements[E],z),""===u);E++);break;case "TemplateLiteral":u="";for(E=0;E<p.quasis.length;E++)if(u=d(p.quasis[E],z),""!==u)return u;for(E=0;E<p.expressions.length&&(u=d(p.expressions[E],z),""===u);E++);break;
case "ObjectExpression":u="";for(E=0;E<p.properties.length;E++){u="";if(null!==p.properties[E].key&&("Literal"!==p.properties[E].key.type&&"Identifier"!==p.properties[E].key.type&&(u=n(p,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===p.properties[E].key.type)){var W=p.properties[E].key,Z="value"in W?W.value:null;"string"===typeof Z||Z instanceof String||(u=n(p,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===u&&(u=d(p.properties[E],z));if(""!==u)break}break;case "Property":if("Literal"!==p.key.type&&
"Identifier"!==p.key.type)return n(p,"SYNTAX","ONLYLITERAL");if("Identifier"!==p.key.type&&(u=d(p.key,z),""!==u))break;u=d(p.value,z)}return u}catch(ba){throw ba;}}function c(p,z){var u=!1,D=z.toLowerCase();h(p,function(I){if(u)return!1;"Identifier"===I.type&&I.name&&I.name.toLowerCase()===D&&(u=!0);return!0});return u}function f(p,z){var u=[];if(void 0!==z.params&&null!==z.params)for(var D=0;D<z.params.length;D++)u.push("any");return{name:p,return:"any",params:u}}function e(p,z){z={globalScope:z.globalScope,
localScope:{}};for(var u=0;u<p.params.length;u++)z.localScope[p.params[u].name.toLowerCase()]={type:"any"};return d(p.body,z)}function l(p,z,u,D){var I={};if(void 0===p||null===p)p={};if(void 0===u||null===u)u={};I.infinity={type:"any"};I.textformatting={type:"any"};I.pi={type:"any"};for(var C in z)"sync"===D&&void 0!==z[C].min?I[C]={type:"FormulaFunction",signature:{min:z[C].min,max:z[C].max}}:"sync"!==D&&void 0!==z[C].fmin&&(I[C]={type:"FormulaFunction",signature:{min:z[C].fmin,max:z[C].fmax}});
for(z=0;z<u.length;z++)C=u[z],I[C.name]={type:"FormulaFunction",signature:C};for(C in p)I[C]=p[C],I[C].type="any";return I}function n(p,z,u){var D="";switch(z){case "SYNTAX":D="Syntax Error: ";break;case "RUNTIME":D="Runtime Error: ";break;default:D="Syntax Error: "}try{switch(p.type){case "IfStatement":switch(u){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":D+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":D+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(u){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":D+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":D+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":D+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(u){case "GLOBALFUNCTIONSONLY":D+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":D+=" Function Definition must have an identifier"}break;case "VariableDeclaration":D+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(u){case "FUNCTIONVARIABLEDECLARATOR":D+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":D+=" Variable Definition must have an identifier"}break;case "Identifier":D+=" Identifier Not Found. ";D+=p.name;break;case "ObjectExpression":switch(u){case "OBJECTPROPERTYMUSTBESTRING":D+=" Property name must be a string"}break;case "ForStatement":switch(u){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":D+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(u){case "ONLY1VAR":D+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":D+=" Can only declare value for use with IN";break;case "LEFTNOVAR":D+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":D+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":D+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(u){case "PROPERTYNOTFOUND":D+="Cannot find member property. ";D+=
!1===p.computed?"Identifier"===p.property.type?p.property.name:"":"";break;case "OUTOFBOUNDS":D+="Out of Bounds. ";D+=!1===p.computed?"Identifier"===p.property.type?p.property.name:"":"";break;case "NOTFOUND":D+="Cannot call member method on null. ";D+=!1===p.computed?"Identifier"===p.property.type?p.property.name:"":"";break;case "INVALIDTYPE":D+="Cannot call member property on object of this type. ",D+=!1===p.computed?"Identifier"===p.property.type?p.property.name:"":""}break;case "Property":switch(u){case "ONLYLITERAL":D+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(u){case "WRONGSIGNATURE":D+="Function signature does not match: ";D+="Identifier"===p.callee.type?p.callee.name:"";break;case "ONLYNODESUPPORTED":D+="Functions must be declared.";D+="Identifier"===p.callee.type?p.callee.name:"";break;case "NOTAFUNCTION":D+="Not a Function: ";D+="Identifier"===p.callee.type?p.callee.name:"";break;case "NOTFOUND":D+="Function Not Found: "+("Identifier"===p.callee.type?
p.callee.name:"")}break;case "UnaryExpression":switch(u){case "NOTSUPPORTEDUNARYOPERATOR":D+="Operator "+p.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":D+="Unary operator "+p.operator+" cannot be used with this argument."}case "BinaryExpression":switch(u){case "OPERATORNOTRECOGNISED":D+="Binary Operator not recognised "+p.operator}break;case "LogicalExpression":switch(u){case "ONLYBOOLEAN":D+="Operator "+p.operator+" cannot be used. Only || or \x26\x26 are allowed values";
break;case "ONLYORORAND":D+="Logical Expression "+p.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":D+="Conditional statements not supported.";break;case "ArrayExpression":switch(u){case "FUNCTIONCONTEXTILLEGAL":D+=" Cannot Put Function inside Array."}break;default:D+="Expression contains unrecognised code structures."}}catch(I){throw I;}return D}function r(p,z,u){return{line:p.loc.start.line,character:p.loc.start.column,reason:n(p,z,u)}}function t(p,
z,u,D){z={globalScope:z.globalScope,localScope:{}};for(var I=0;I<p.params.length;I++)z.localScope[p.params[I].name.toLowerCase()]={type:"any"};w(p.body,z,u,D,!1)}function w(p,z,u,D,I){void 0===I&&(I=!0);if(null===p)throw Error("Unnexpexted Expression Syntax");var C=null;try{switch(p.type){case "VariableDeclarator":if(null!==p.init&&"FunctionExpression"===p.init.type){D.push(r(p,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==p.id.type?D.push(r(p,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):
(p.id.name.toLowerCase(),null===z.localScope?z.globalScope[p.id.name.toLowerCase()]={type:"any"}:z.localScope[p.id.name.toLowerCase()]={type:"any"});null!==p.init&&w(p.init,z,u,D,I);break;case "FunctionDeclaration":!1===I&&D.push(r(p,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==p.id.type&&D.push(r(p,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));C=f("",p);t(p,z,u,D);null!==z.localScope&&D.push(r(p,"SYNTAX","GLOBALFUNCTIONSONLY"));C.isnative=!1;"Identifier"===p.id.type&&(z.globalScope[p.id.name.toLowerCase()]=
{type:"FormulaFunction",signature:[C]});break;case "VariableDeclaration":for(var E=0;E<p.declarations.length;E++)w(p.declarations[E],z,u,D,I);break;case "IfStatement":null!==p.test&&(w(p.test,z,u,D,I),"AssignmentExpression"!==p.test.type&&"UpdateExpression"!==p.test.type||D.push(r(p.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==p.consequent&&w(p.consequent,z,u,D,I);null!==p.alternate&&w(p.alternate,z,u,D,I);break;case "EmptyStatement":break;case "BlockStatement":if(null!==p.body)for(E=
0;E<p.body.length;E++)w(p.body[E],z,u,D,I);break;case "ReturnStatement":null!==p.argument&&w(p.argument,z,u,D,I);break;case "ForInStatement":"VariableDeclaration"===p.left.type?(1<p.left.declarations.length&&D.push(r(p,"SYNTAX","ONLY1VAR")),null!==p.left.declarations[0].init&&D.push(r(p,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==p.left.type&&D.push(r(p,"SYNTAX","LEFTNOTVAR"));w(p.left,z,u,D,I);w(p.right,z,u,D,I);w(p.body,z,u,D,I);break;case "ForStatement":null!==p.init&&w(p.init,z,u,D,I);null!==
p.test&&w(p.test,z,u,D,I);null!==p.body&&w(p.body,z,u,D,I);null!==p.update&&w(p.update,z,u,D,I);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==p.argument.type&&"MemberExpression"!==p.argument.type)D.push(r(p,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===p.argument.type){var G=!1;!1===u&&(null!==z.localScope&&void 0!==z.localScope[p.argument.name.toLowerCase()]&&(G=!0),void 0!==z.globalScope[p.argument.name.toLowerCase()]&&(G=!0),
!1===G&&D.push({line:null===p?0:p.loc.start.line,character:null===p?0:p.loc.start.column,reason:"Identifier "+p.argument.name+" has not been declared."}))}"MemberExpression"===p.argument.type&&w(p.argument,z,u,D,I)}break;case "AssignmentExpression":"Identifier"!==p.left.type&&"MemberExpression"!==p.left.type&&D.push(r(p,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(p.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:D.push(r(p,"SYNTAX","OPERATORNOTRECOGNISED"))}w(p.right,
z,u,D,I);G=!1;"Identifier"===p.left.type&&(null!==z.localScope&&void 0!==z.localScope[p.left.name.toLowerCase()]&&(G=!0),void 0!==z.globalScope[p.left.name.toLowerCase()]&&(G=!0),!1===u&&!1===G&&D.push({line:null===p?0:p.loc.start.line,character:null===p?0:p.loc.start.column,reason:"Identifier "+p.left.name+" has not been declared."}));"MemberExpression"===p.left.type&&w(p.left,z,u,D,I);break;case "ExpressionStatement":w(p.expression,z,u,D,I);break;case "Identifier":var H=p.name.toLowerCase();if(null!==
z.localScope&&void 0!==z.localScope[H]||void 0!==z.globalScope[H])break;!1===u&&D.push(r(p,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":w(p.object,z,u,D,I);!0===p.computed&&w(p.property,z,u,D,I);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==p.callee.type&&D.push(r(p,"SYNTAX","ONLYNODESSUPPORTED"));for(E=0;E<p.arguments.length;E++)w(p.arguments[E],z,u,D,I);if("Identifier"===p.callee.type){var L=b(p.callee.name,p.arguments,z);!1===u&&-1===
L&&D.push(r(p,"SYNTAX","NOTFOUND"));-2===L&&D.push(r(p,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":w(p.argument,z,u,D,I);break;case "BinaryExpression":w(p.left,z,u,D,I);w(p.right,z,u,D,I);switch(p.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:D.push(r(p,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(p.operator){case "\x26\x26":case "||":break;
default:D.push(r(p,"SYNTAX","OPERATORNOTRECOGNISED"))}w(p.left,z,u,D,I);"AssignmentExpression"!==p.left.type&&"UpdateExpression"!==p.left.type||D.push(r(p,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));w(p.right,z,u,D,I);"AssignmentExpression"!==p.right.type&&"UpdateExpression"!==p.right.type||D.push(r(p,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":D.push(r(p,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(E=0;E<p.elements.length;E++)w(p.elements[E],
z,u,D,I);break;case "TemplateLiteral":for(E=0;E<p.quasis.length;E++)w(p.quasis[E],z,u,D,I);for(E=0;E<p.expressions.length;E++)w(p.expressions[E],z,u,D,I);break;case "ObjectExpression":for(E=0;E<p.properties.length;E++)w(p.properties[E],z,u,D,I);break;case "Property":"Literal"!==p.key.type&&"Identifier"!==p.key.type&&D.push(r(p,"SYNTAX","ONLYLITERAL"));"Literal"===p.key.type&&w(p.key,z,u,D,I);w(p.value,z,u,D,I);break;default:D.push(r(p,"SYNTAX","UNRECOGNISED"))}}catch(O){D.push({line:null===p?0:p.loc.start.line,
character:null===p?0:p.loc.start.column,reason:"Unnexpected Syntax"})}}function v(p){var z=[];h(p,function(u){"CallExpression"===u.type&&"Identifier"===u.callee.type&&z.push(u.callee.name.toLowerCase());return!0});return z}Object.defineProperty(q,"__esModule",{value:!0});q.scriptUsesFeatureSet=q.findScriptDependencies=q.findFunctionCalls=q.checkScript=q.extractAllIssues=q.extractAllIssuesInFunction=q.makeError=q.nodeErrorMessage=q.validateLanguage=q.validateScript=q.constructGlobalScope=q.validateFunction=
q.extractFunctionDeclaration=q.findFieldLiterals=q.referencesFunction=q.referencesMember=q.testValidityOfExpression=q.validateLanguageNode=q.walk=q.findFunction=q.checkFunctionSignature=q.addFunctionDeclaration=q.functionDecls=void 0;q.functionDecls={concatenate:{min:"0",max:"*"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",
max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",
max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",
max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",
max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},
boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",
max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",
max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},schema:{min:"1",max:"1"}};for(var y in q.functionDecls)q.functionDecls[y].fmin=q.functionDecls[y].min,q.functionDecls[y].fmax=q.functionDecls[y].max;var x="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl attachments featuresetbyportalitem".split(" "),
B="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");q.addFunctionDeclaration=function(p,z){var u=q.functionDecls[p.name.toLowerCase()];void 0===u?"sync"===z?q.functionDecls[p.name.toLowerCase()]={min:p.min,max:p.max}:q.functionDecls[p.name.toLowerCase()]=
{fmin:p.min,fmax:p.max}:"sync"===z?(u.min=p.min,u.max=p.max):(u.fmin=p.min,u.fmax=p.max)};q.checkFunctionSignature=a;q.findFunction=b;q.walk=h;q.validateLanguageNode=k;q.testValidityOfExpression=d;q.referencesMember=c;q.referencesFunction=function(p,z){var u=!1,D=z.toLowerCase();h(p,function(I){return u?!1:"CallExpression"===I.type&&"Identifier"===I.callee.type&&I.callee.name&&I.callee.name.toLowerCase()===D?(u=!0,!1):!0});return u};q.findFieldLiterals=function(p){var z=[];h(p,function(u){if("MemberExpression"!==
u.type||"Identifier"!==u.object.type)return!0;!1===u.computed&&u.object&&u.object.name&&u.property&&"Identifier"===u.property.type&&u.property.name?z.push(u.object.name.toLowerCase()+"."+u.property.name.toLowerCase()):u.object&&u.object.name&&u.property&&"Literal"===u.property.type&&"string"===typeof u.property.value&&z.push(u.object.name.toLowerCase()+"."+u.property.value.toString().toLowerCase());return!1});return z};q.extractFunctionDeclaration=f;q.validateFunction=e;q.constructGlobalScope=l;q.validateScript=
function(p,z,u,D){void 0===u&&(u="async");void 0===D&&(D=q.functionDecls);z={globalScope:l(z.vars,D,z.customFunctions,u),localScope:null};return d(p.body[0].body,z)};q.validateLanguage=function(p){return"BlockStatement"!==p.body[0].body.type?"Invalid formula content.":k(p.body[0].body)};q.nodeErrorMessage=n;q.makeError=r;q.extractAllIssuesInFunction=t;q.extractAllIssues=w;q.checkScript=function(p,z,u,D,I){void 0===D&&(D="async");void 0===I&&(I=q.functionDecls);var C=[];if("BlockStatement"!==p.body[0].body.type)return[{line:0,
character:0,reason:"Invalid Body"}];if(null===z||void 0===z)z={vars:{},customFunctions:[]};z={globalScope:l(z.vars,I,z.customFunctions,D),localScope:null};try{w(p.body[0].body,z,u,C)}catch(E){}return C};q.findFunctionCalls=v;q.findScriptDependencies=function(p,z){void 0===z&&(z=[]);var u=null;if(void 0===p.usesFeatureSet){null===u&&(u=v(p));p.usesFeatureSet=!1;for(var D=0;D<u.length;D++)-1<x.indexOf(u[D])&&(p.usesFeatureSet=!0,p.isAsync=!0);if(!1===p.usesFeatureSet&&z&&0<z.length)for(D=0;D<z.length;D++)if(c(p,
z[D])){p.usesFeatureSet=!0;p.isAsync=!0;break}}if(void 0===p.usesGeometry)for(p.usesGeometry=!1,null===u&&(u=v(p)),D=0;D<u.length;D++)-1<B.indexOf(u[D])&&(p.usesGeometry=!0)};q.scriptUsesFeatureSet=function(p){p=v(p);for(var z=0;z<p.length;z++)if(-1<x.indexOf(p[z]))return!0;return!1}})},"esri/arcade/functions/array":function(){define(["require","exports","../languageUtils"],function(m,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(b,g){b.array=
function(h,k){return g(h,k,function(d,c,f){a.pcCheck(f,1,2);d=a.toNumber(f[0]);if(isNaN(d)||!1===a.isInteger(d))throw Error("Invalid Parameter");f=a.defaultUndefined(f[1],null);d=Array(d);d.fill(f);return d})};b.front=function(h,k){return g(h,k,function(d,c,f){a.pcCheck(f,1,1);if(a.isImmutableArray(f[0])){if(0>=f[0].length())throw Error("Array is empty");return f[0].get(0)}if(a.isArray(f[0])){if(0>=f[0].length)throw Error("Array is empty");return f[0][0]}throw Error("Invalid Parameter");})};b.back=
function(h,k){return g(h,k,function(d,c,f){a.pcCheck(f,1,1);if(a.isImmutableArray(f[0])){if(0>=f[0].length())throw Error("Array is empty");return f[0].get(f[0].length()-1)}if(a.isArray(f[0])){if(0>=f[0].length)throw Error("Array is empty");return f[0][f[0].length-1]}throw Error("Invalid Parameter");})};b.push=function(h,k){return g(h,k,function(d,c,f){a.pcCheck(f,1,2);if(a.isArray(f[0]))return f[0][f[0].length]=f[1],f[0].length;throw Error("Invalid Parameter");})};b.pop=function(h,k){return g(h,k,
function(d,c,f){a.pcCheck(f,1,1);if(a.isArray(f[0])){if(0>=f[0].length)throw Error("Array is empty");d=f[0][f[0].length-1];--f[0].length;return d}throw Error("Invalid Parameter");})};b.erase=function(h,k){return g(h,k,function(d,c,f){a.pcCheck(f,2,2);if(a.isArray(f[0])){d=a.toNumber(f[1]);if(isNaN(d)||!1===a.isInteger(d))throw Error("Invalid Parameter");f=f[0];if(0>=f.length)throw Error("Array is empty");0>d&&(d=f.length+d);if(0>d)throw Error("Element not found");if(d>=f.length)throw Error("Index is greater than array");
f.splice(d,1);return a.voidOperation}throw Error("Invalid Parameter");})};b.insert=function(h,k){return g(h,k,function(d,c,f){a.pcCheck(f,3,3);if(a.isArray(f[0])){d=a.toNumber(f[1]);if(isNaN(d)||!1===a.isInteger(d))throw Error("Invalid Parameter");c=f[2];f=f[0];if(d>f.length)throw Error("Index is greater than array");if(0>d&&d<-1*f.length)throw Error("Index is greater than array");if(d===f.length)return f[d]=c,a.voidOperation;f.splice(d,0,c);return a.voidOperation}throw Error("Invalid Parameter");
})};b.resize=function(h,k){return g(h,k,function(d,c,f){a.pcCheck(f,2,3);if(a.isArray(f[0])){c=a.toNumber(f[1]);if(isNaN(c)||!1===a.isInteger(c))throw Error("Invalid Parameter");if(0>c)throw Error("Size cannot be negative");d=a.defaultUndefined(f[2],null);f=f[0];if(f.length>=c)return f.length=c,a.voidOperation;var e=f.length;f.length=c;for(c=e;c<f.length;c++)f[c]=d;return a.voidOperation}throw Error("Invalid Parameter");})};b.includes=function(h,k){return g(h,k,function(d,c,f){a.pcCheck(f,2,2);if(a.isArray(f[0])){var e=
f[1];d=f[0];return-1<d.findIndex(function(n){return a.equalityTest(n,e)})?!0:!1}if(a.isImmutableArray(f[0])){var l=f[1];d=f[0].toArray();return-1<d.findIndex(function(n){return a.equalityTest(n,l)})?!0:!1}throw Error("Invalid Parameter");})};b.slice=function(h,k){return g(h,k,function(d,c,f){a.pcCheck(f,1,3);if(a.isArray(f[0])){d=a.toNumber(a.defaultUndefined(f[1],0));c=a.toNumber(a.defaultUndefined(f[2],f[0].length));if(isNaN(d)||!1===a.isInteger(d))throw Error("Invalid Parameter");if(isNaN(c)||
!1===a.isInteger(c))throw Error("Invalid Parameter");var e=f[0];return e.slice(d,c)}if(a.isImmutableArray(f[0])){e=f[0];d=a.toNumber(a.defaultUndefined(f[1],0));c=a.toNumber(a.defaultUndefined(f[2],e.length()));if(isNaN(d)||!1===a.isInteger(d))throw Error("Invalid Parameter");if(isNaN(c)||!1===a.isInteger(c))throw Error("Invalid Parameter");return e.toArray().slice(d,c)}throw Error("Invalid Parameter");})};b.splice=function(h,k){return g(h,k,function(d,c,f){d=[];for(c=0;c<f.length;c++)a.isArray(f[c])?
d.push.apply(d,f[c]):a.isImmutableArray(f[c])?d.push.apply(d,f[c].toArray()):d.push(f[c]);return d})}}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils"],function(m,q,a){function b(k){k=new Date(k.getTime());var d=k.getFullYear(),c=new Date(0);c.setFullYear(d+1,0,4);c.setHours(0,0,0,0);c=g(c);var f=new Date(0);f.setFullYear(d,0,4);f.setHours(0,0,0,0);f=g(f);return k.getTime()>=c.getTime()?d+1:k.getTime()>=f.getTime()?d:d-1}function g(k){k=new Date(k.getTime());
var d=k.getDay();d=(1>d?7:0)+d-1;k.setDate(k.getDate()-d);k.setHours(0,0,0,0);return k}function h(k){return null===k?k:isNaN(k.getTime())?null:k}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(k,d){k.today=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,0,0);e=new Date;e.setHours(0,0,0,0);return e})};k.now=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,0,0);return new Date})};k.timestamp=function(c,f){return d(c,f,function(e,
l,n){a.pcCheck(n,0,0);e=new Date;return e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())})};k.toutc=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);return null===e?null:new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())})};k.tolocal=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);
return null===e?null:a.MomentLibrary.Moment.utc([e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]).toDate()})};k.day=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);return null===e?NaN:e.getDate()})};k.month=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);return null===e?NaN:e.getMonth()})};k.year=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);return null===
e?NaN:e.getFullYear()})};k.hour=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);return null===e?NaN:e.getHours()})};k.second=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);return null===e?NaN:e.getSeconds()})};k.millisecond=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);return null===e?NaN:e.getMilliseconds()})};k.minute=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);return null===
e?NaN:e.getMinutes()})};k.weekday=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);return null===e?NaN:e.getDay()})};k.isoweekday=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);if(null===e)return NaN;e=e.getDay();0===e&&(e=7);return e})};k.isomonth=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);return null===e?NaN:e.getMonth()+1})};k.isoweek=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);l=a.toDate(n[0]);
if(null===l)return NaN;e=g(l).getTime();l=b(l);n=new Date(0);n.setFullYear(l,0,4);n.setHours(0,0,0,0);l=g(n);e-=l.getTime();return Math.round(e/6048E5)+1})};k.isoyear=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,1,1);e=a.toDate(n[0]);return null===e?NaN:b(e)})};k.date=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,0,7);if(3===n.length)return h(new Date(a.toNumber(n[0]),a.toNumber(n[1]),a.toNumber(n[2]),0,0,0,0));if(4===n.length)return h(new Date(a.toNumber(n[0]),a.toNumber(n[1]),
a.toNumber(n[2]),a.toNumber(n[3]),0,0,0));if(5===n.length)return h(new Date(a.toNumber(n[0]),a.toNumber(n[1]),a.toNumber(n[2]),a.toNumber(n[3]),a.toNumber(n[4]),0,0));if(6===n.length)return h(new Date(a.toNumber(n[0]),a.toNumber(n[1]),a.toNumber(n[2]),a.toNumber(n[3]),a.toNumber(n[4]),a.toNumber(n[5]),0));if(7===n.length)return h(new Date(a.toNumber(n[0]),a.toNumber(n[1]),a.toNumber(n[2]),a.toNumber(n[3]),a.toNumber(n[4]),a.toNumber(n[5]),a.toNumber(n[6])));if(2===n.length){e=a.toString(n[1]);if(""===
e)return null;e=a.standardiseDateFormat(e);n=a.MomentLibrary.Moment(a.toString(n[0]),e,!0);return!0===n.isValid()?n.toDate():null}if(1===n.length){if(a.isString(n[0])){if(""===n[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(n[0]))return a.toDate(n[0]+"-01-01")}e=a.toNumber(n[0]);return!1===isNaN(e)?h(new Date(e)):a.toDate(n[0])}if(0===n.length)return new Date})};k.datediff=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,2,3);e=a.toDateM(n[0]);
l=a.toDateM(n[1]);if(null===e||null===l)return NaN;switch(a.toString(n[2]).toLowerCase()){case "days":case "day":case "d":return e.diff(l,"days",!0);case "months":case "month":return e.diff(l,"months",!0);case "minutes":case "minute":case "m":return"M"===n[2]?e.diff(l,"months",!0):e.diff(l,"minutes",!0);case "seconds":case "second":case "s":return e.diff(l,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return e.diff(l);case "hours":case "hour":case "h":return e.diff(l,"hours",!0);
case "years":case "year":case "y":return e.diff(l,"years",!0);default:return e.diff(l)}})};k.dateadd=function(c,f){return d(c,f,function(e,l,n){a.pcCheck(n,2,3);e=a.toDateM(n[0]);if(null===e)return null;l="milliseconds";switch(a.toString(n[2]).toLowerCase()){case "days":case "day":case "d":l="days";break;case "months":case "month":l="months";break;case "minutes":case "minute":case "m":l="M"===n[2]?"months":"minutes";break;case "seconds":case "second":case "s":l="seconds";break;case "milliseconds":case "millisecond":case "ms":l=
"milliseconds";break;case "hours":case "hour":case "h":l="hours";break;case "years":case "year":case "y":l="years"}e.add(a.toNumber(n[1]),l);return e.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(m,q,a,
b,g,h,k,d,c,f,e,l,n,r){Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(t,w){t.ringisclockwise=function(v,y){return w(v,y,function(x,B,p){h.pcCheck(p,1,1);x=[];if(null===p[0])return!1;if(h.isArray(p[0])){var z=0;for(p=p[0];z<p.length;z++)if(B=p[z],B instanceof f)x.push([B.x,B.y]);else throw Error("Invalid Argument");}else if(p[0]instanceof g)x=p[0]._elements;else if(h.isImmutableArray(p[0])){z=0;for(var u=p[0].toArray();z<u.length;z++)if(B=u[z],
B instanceof f)x.push([B.x,B.y]);else throw Error("Invalid Argument");0<x.length&&(p[0].get(0),p[0].get(0))}else throw Error("Invalid Argument");return 3>x.length?!1:(new e({rings:[],spatialReference:{wkid:4326}})).isClockwise(x)})};t.polygon=function(v,y){return w(v,y,function(x,B,p){h.pcCheck(p,1,1);x=null;if(p[0]instanceof a){if(x=h.fixSpatialReference(b.parseGeometryFromDictionary(p[0]),v.spatialReference),!1===x instanceof e)throw Error("Illegal Parameter");}else x=p[0]instanceof e?r.fromJson(p[0].toJson()):
h.fixSpatialReference(new e(JSON.parse(p[0])),v.spatialReference);if(null!==x&&!1===x.spatialReference.equals(v.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(x)})};t.polyline=function(v,y){return w(v,y,function(x,B,p){h.pcCheck(p,1,1);x=null;if(p[0]instanceof a){if(x=h.fixSpatialReference(b.parseGeometryFromDictionary(p[0]),v.spatialReference),!1===x instanceof l)throw Error("Illegal Parameter");
}else x=p[0]instanceof l?r.fromJson(p[0].toJson()):h.fixSpatialReference(new l(JSON.parse(p[0])),v.spatialReference);if(null!==x&&!1===x.spatialReference.equals(v.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(x)})};t.point=function(v,y){return w(v,y,function(x,B,p){h.pcCheck(p,1,1);x=null;if(p[0]instanceof a){if(x=h.fixSpatialReference(b.parseGeometryFromDictionary(p[0]),v.spatialReference),
!1===x instanceof f)throw Error("Illegal Parameter");}else x=p[0]instanceof f?r.fromJson(p[0].toJson()):h.fixSpatialReference(new f(JSON.parse(p[0])),v.spatialReference);if(null!==x&&!1===x.spatialReference.equals(v.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(x)})};t.multipoint=function(v,y){return w(v,y,function(x,B,p){h.pcCheck(p,1,1);x=null;if(p[0]instanceof a){if(x=h.fixSpatialReference(b.parseGeometryFromDictionary(p[0]),
v.spatialReference),!1===x instanceof c)throw Error("Illegal Parameter");}else x=p[0]instanceof c?r.fromJson(p[0].toJson()):h.fixSpatialReference(new c(JSON.parse(p[0])),v.spatialReference);if(null!==x&&!1===x.spatialReference.equals(v.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(x)})};t.extent=function(v,y){return w(v,y,function(x,B,p){p=h.autoCastFeatureToGeometry(p);h.pcCheck(p,1,1);x=null;
p[0]instanceof a?x=h.fixSpatialReference(b.parseGeometryFromDictionary(p[0]),v.spatialReference):p[0]instanceof f?(x={xmin:p[0].x,ymin:p[0].y,xmax:p[0].x,ymax:p[0].y,spatialReference:p[0].spatialReference.toJson()},p=p[0],p.hasZ?(x.zmin=p.z,x.zmax=p.z):p.hasM&&(x.mmin=p.m,x.mmax=p.m),x=r.fromJson(x)):x=p[0]instanceof e?r.fromJson(p[0].getExtent().toJson()):p[0]instanceof l?r.fromJson(p[0].getExtent().toJson()):p[0]instanceof c?r.fromJson(p[0].getExtent().toJson()):p[0]instanceof k?r.fromJson(p[0].toJson()):
h.fixSpatialReference(new k(JSON.parse(p[0])),v.spatialReference);if(null!==x&&!1===x.spatialReference.equals(v.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(x)})};t.geometry=function(v,y){return w(v,y,function(x,B,p){h.pcCheck(p,1,1);x=null;x=p[0]instanceof b?h.fixSpatialReference(p[0].geometry(),v.spatialReference):p[0]instanceof a?h.fixSpatialReference(b.parseGeometryFromDictionary(p[0]),
v.spatialReference):h.fixSpatialReference(r.fromJson(JSON.parse(p[0])),v.spatialReference);if(null!==x&&!1===x.spatialReference.equals(v.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return h.fixNullGeometry(x)})};t.setgeometry=function(v,y){return w(v,y,function(x,B,p){h.pcCheck(p,2,2);if(p[0]instanceof b){if(!0===p[0].immutable)throw Error("Feature is Immutable");if(p[1]instanceof d||null===p[1])p[0]._geometry=p[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return h.voidOperation})};t.feature=function(v,y){return w(v,y,function(x,B,p){if(0===p.length)throw Error("Missing Parameters");x=null;if(1===p.length)if(h.isString(p[0]))x=b.fromJson(JSON.parse(p[0]));else if(p[0]instanceof b)x=b.createFromArcadeFeature(p[0]);else if(p[0]instanceof d)x=b.createFromGraphicLikeObject(p[0],null,null);else if(p[0]instanceof a)x=p[0].hasField("geometry")?p[0].field("geometry"):null,B=p[0].hasField("attributes")?
p[0].field("attributes"):null,null!==x&&x instanceof a&&(x=b.parseGeometryFromDictionary(x)),null!==B&&(B=b.parseAttributesFromDictionary(B)),x=b.createFromGraphicLikeObject(x,B,null);else throw Error("Illegal Argument");else{if(2===p.length){B=x=null;if(null!==p[0])if(p[0]instanceof d)x=p[0];else if(x instanceof a)x=b.parseGeometryFromDictionary(p[0]);else throw Error("Illegal Argument");if(null!==p[1])if(p[1]instanceof a)B=b.parseAttributesFromDictionary(p[1]);else throw Error("Illegal Argument");
}else{x=null;B={};if(null!==p[0])if(p[0]instanceof d)x=p[0];else if(x instanceof a)x=b.parseGeometryFromDictionary(p[0]);else throw Error("Illegal Argument");for(var z=1;z<p.length;z+=2){var u=h.toString(p[z]),D=p[z+1];if(null===D||void 0===D||h.isString(D)||isNaN(D)||h.isDate(D)||h.isNumber(D)||h.isBoolean(D)){if(h.isFunctionParameter(D)||!1===h.isSimpleType(D))throw Error("Illegal Argument");B[u]=D===h.voidOperation?null:D}else throw Error("Illegal Argument");}}x=b.createFromGraphicLikeObject(x,
B,null)}x._geometry=h.fixSpatialReference(x.geometry(),v.spatialReference);x.immutable=!1;return x})};t.dictionary=function(v,y){return w(v,y,function(x,B,p){if(0===p.length)return p=new a,p.immutable=!1,p;if(1===p.length&&h.isString(p[0]))try{var z=JSON.parse(p[0]),u=a.convertObjectToArcadeDictionary(z);u.immutable=!1;return u}catch(D){throw Error("Missing Parameters or Illegal Json");}if(0!==p.length%2)throw Error("Missing Parameters");x={};for(B=0;B<p.length;B+=2)if(z=h.toString(p[B]),u=p[B+1],
null===u||void 0===u||h.isString(u)||isNaN(u)||h.isDate(u)||h.isNumber(u)||h.isBoolean(u)||h.isArray(u)||h.isImmutableArray(u)){if(h.isFunctionParameter(u))throw Error("Illegal Argument");x[z]=u===h.voidOperation?null:u}else throw Error("Illegal Argument");p=new a(x);p.immutable=!1;return p})};t.haskey=function(v,y){return w(v,y,function(x,B,p){h.pcCheck(p,2,2);x=h.toString(p[1]);if(p[0]instanceof b||p[0]instanceof a)return p[0].hasField(x);throw Error("Illegal Argument");})};t.indexof=function(v,
y){return w(v,y,function(x,B,p){h.pcCheck(p,2,2);x=p[1];if(h.isArray(p[0])){for(B=0;B<p[0].length;B++)if(h.equalityTest(x,p[0][B]))return B;return-1}if(h.isImmutableArray(p[0])){var z=p[0].length();for(B=0;B<z;B++)if(h.equalityTest(x,p[0].get(B)))return B;return-1}throw Error("Illegal Argument");})};t.angle=function(v,y){return w(v,y,function(x,B,p){p=h.autoCastFeatureToGeometry(p);h.pcCheck(p,2,3);if(!(p[0]instanceof f))throw Error("Illegal Argument");if(!(p[1]instanceof f))throw Error("Illegal Argument");
if(2<p.length&&!(p[2]instanceof f))throw Error("Illegal Argument");return 2===p.length?n.angle2D(p[0],p[1]):n.angleBetween2D(p[0],p[1],p[2])})};t.bearing=function(v,y){return w(v,y,function(x,B,p){p=h.autoCastFeatureToGeometry(p);h.pcCheck(p,2,3);if(!(p[0]instanceof f))throw Error("Illegal Argument");if(!(p[1]instanceof f))throw Error("Illegal Argument");if(2<p.length&&!(p[2]instanceof f))throw Error("Illegal Argument");return 2===p.length?n.bearing2D(p[0],p[1]):n.bearingBetween2D(p[0],p[1],p[2])})};
t.isselfintersecting=function(v,y){return w(v,y,function(x,B,p){p=h.autoCastFeatureToGeometry(p);h.pcCheck(p,1,1);x=p[0];if(x instanceof e)return x.isSelfIntersecting(x);if(x instanceof l)return x=x.paths,n.pathsSelfIntersecting(x);if(x instanceof c)for(B=x.points,p=0;p<B.length;p++)for(var z=0;z<B.length;z++)if(z!==p){for(var u=!0,D=0;D<B[p].length;D++)if(B[p][D]!==B[z][D]){u=!1;break}if(!0===u)return!0}return h.isArray(x)||h.isImmutableArray(x)?(x=h.autoCastArrayOfPointsToPolyline(x,v.spatialReference),
null!==x&&(x=x.paths),n.pathsSelfIntersecting(x)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(m,q,a){function b(e,l,n){var r={x:0,y:0};l&&(r.z=0);n&&(r.m=0);for(var t=0,w=e[0],v=0;v<e.length;v++){var y=e[v];a:if(y.length!==w.length)var x=!1;else{for(x=0;x<y.length;x++)if(y[x]!==w[x]){x=!1;break a}x=!0}if(!1===x){x=g(w,y,l);var B=y,p=l,z=n,u={x:(w[0]+B[0])/2,y:(w[1]+B[1])/2};p&&(u.z=(w[2]+B[2])/2);p&&z?u.m=(w[3]+B[3])/2:z&&(u.m=
(w[2]+B[2])/2);w=u;w.x*=x;w.y*=x;r.x+=w.x;r.y+=w.y;l&&(w.z*=x,r.z+=w.z);n&&(w.m*=x,r.m+=w.m);t+=x;w=y}}0<t?(r.x/=t,r.y/=t,l&&(r.z/=t),n&&(r.m/=t)):(r.x=e[0][0],r.y=e[0][1],l&&(r.z=e[0][2]),n&&l?r.m=e[0][3]:n&&(r.m=e[0][2]));return r}function g(e,l,n){var r=l[0]-e[0];e=l[1]-e[1];return n?(l=l[2]-l[2],Math.sqrt(r*r+e*e+l*l)):Math.sqrt(r*r+e*e)}function h(e,l,n){for(void 0===n&&(n=0);e<n;)e+=l;for(n+=l;e>=n;)e-=l;return e}function k(e,l){return Math.atan2(l.y-e.y,l.x-e.x)}function d(e,l,n){var r=e.x-
l.x;e=e.y-l.y;var t=n.x-l.x;l=n.y-l.y;return Math.atan2(r*l-t*e,r*t+e*l)}function c(e,l,n,r,t){var w=e[0];e=e[1];var v=l[0];l=l[1];var y=n[0],x=n[1];n=r[0]-y;y=w-y;var B=v-w;r=r[1]-x;x=e-x;var p=l-e,z=r*B-n*p;if(0===z)return!1;n=(n*x-r*y)/z;y=(B*x-p*y)/z;return 0<=n&&1>=n&&0<=y&&1>=y?(t&&(t[0]=w+n*(v-w),t[1]=e+n*(l-e)),!0):!1}Object.defineProperty(q,"__esModule",{value:!0});q.pathsSelfIntersecting=q.bearingBetween2D=q.angleBetween2D=q.angleBetweenRad=q.bearing2D=q.angle2D=q.angleRad=q.centroidMultiPoint=
q.centroidPolyline=void 0;q.centroidPolyline=function(e){for(var l={x:0,y:0,spatialReference:e.spatialReference.toJson()},n={x:0,y:0,spatialReference:e.spatialReference.toJson()},r=0,t=0,w=0;w<e.paths.length;w++)if(0!==e.paths[w].length){var v=e.paths[w];var y=!0===e.hasZ;if(1>=v.length)v=0;else{for(var x=0,B=1;B<v.length;B++)x+=g(v[B-1],v[B],y);v=x}0===v?(y=b(e.paths[w],!0===e.hasZ,!0===e.hasM),l.x+=y.x,l.y+=y.y,!0===e.hasZ&&(l.z+=y.z),!0===e.hasM&&(l.m+=y.m),++r):(y=b(e.paths[w],!0===e.hasZ,!0===
e.hasM),n.x+=y.x*v,n.y+=y.y*v,!0===e.hasZ&&(n.z+=y.z*v),!0===e.hasM&&(n.m+=y.m*v),t+=v)}return 0<t?(n.x/=t,n.y/=t,!0===e.hasZ&&(n.z/=t),!0===e.hasM&&(n.m/=t),new a(n)):0<r?(l.x/=r,l.y/=r,!0===e.hasZ&&(n.z/=r),!0===e.hasM&&(l.m/=r),new a(l)):null};q.centroidMultiPoint=function(e){if(0===e.points.length)return null;for(var l=0,n=0,r=0,t=0,w=0;w<e.points.length;w++){var v=e.getPoint(w);!0===v.hasZ&&(r+=v.z);!0===v.hasM&&(t+=v.m);l+=v.x;n+=v.y;t+=v.m}l={x:l/e.points.length,y:n/e.points.length,spatialReference:null};
l.spatialReference=e.spatialReference.toJson();!0===e.hasZ&&(l.z=r/e.points.length);!0===e.hasM&&(l.m=t/e.points.length);return new a(l)};q.angleRad=k;q.angle2D=function(e,l){return h(k(e,l),2*Math.PI)*(180/Math.PI)};q.bearing2D=function(e,l){return h(Math.PI/2-k(e,l),2*Math.PI)*(180/Math.PI)};q.angleBetweenRad=d;q.angleBetween2D=function(e,l,n){return h(d(e,l,n),2*Math.PI)*(180/Math.PI)};q.bearingBetween2D=function(e,l,n){return h(-1*d(e,l,n),2*Math.PI)*(180/Math.PI)};var f=[0,0];q.pathsSelfIntersecting=
function(e){for(var l=0;l<e.length;l++){for(var n=e[l],r=0;r<n.length-1;r++)for(var t=n[r],w=n[r+1],v=l+1;v<e.length;v++)for(var y=0;y<e[v].length-1;y++){var x=e[v][y],B=e[v][y+1],p=c(t,w,x,B,f);if(p&&!(f[0]===t[0]&&f[1]===t[1]||f[0]===x[0]&&f[1]===x[1]||f[0]===w[0]&&f[1]===w[1]||f[0]===B[0]&&f[1]===B[1]))return!0}y=n.length;if(!(3>y))for(r=0;r<=y-2;r++)for(t=n[r],w=n[r+1],v=r+2;v<=y-2;v++)if(x=n[v],B=n[v+1],(p=c(t,w,x,B,f))&&!(f[0]===t[0]&&f[1]===t[1]||f[0]===x[0]&&f[1]===x[1]||f[0]===w[0]&&f[1]===
w[1]||f[0]===B[0]&&f[1]===B[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),function(m,q,a,b,g,h,k,d,c,f,e,l,n){function r(w){return 0===a.version.indexOf("4.")?e.fromExtent(w):new e({spatialReference:w.spatialReference,rings:[[[w.xmin,
w.ymin],[w.xmin,w.ymax],[w.xmax,w.ymax],[w.xmax,w.ymin],[w.xmin,w.ymin]]]})}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=q.setGeometryEngine=void 0;var t=null;q.setGeometryEngine=function(w){t=w};q.registerFunctions=function(w,v){function y(x){g.pcCheck(x,2,2);if(!(x[0]instanceof d&&x[1]instanceof d||x[0]instanceof d&&null===x[1]||x[1]instanceof d&&null===x[0]||null===x[0]&&null===x[1]))throw Error("Illegal Argument");}w.disjoint=function(x,B){return v(x,B,function(p,z,u){u=
g.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?!0:t.disjoint(u[0],u[1])})};w.intersects=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?!1:t.intersects(u[0],u[1])})};w.touches=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?!1:t.touches(u[0],u[1])})};w.crosses=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);y(u);return null===
u[0]||null===u[1]?!1:t.crosses(u[0],u[1])})};w.within=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?!1:t.within(u[0],u[1])})};w.contains=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?!1:t.contains(u[0],u[1])})};w.overlaps=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?!1:t.overlaps(u[0],u[1])})};w.equals=
function(x,B){return v(x,B,function(p,z,u){g.pcCheck(u,2,2);return u[0]===u[1]?!0:u[0]instanceof d&&u[1]instanceof d?t.equals(u[0],u[1]):g.isDate(u[0])&&g.isDate(u[1])?u[0].getTime()===u[1].getTime():!1})};w.relate=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,3,3);if(u[0]instanceof d&&u[1]instanceof d)return t.relate(u[0],u[1],g.toString(u[2]));if(u[0]instanceof d&&null===u[1]||u[1]instanceof d&&null===u[0]||null===u[0]&&null===u[1])return!1;throw Error("Illegal Argument");
})};w.intersection=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);y(u);return null===u[0]||null===u[1]?null:t.intersect(u[0],u[1])})};w.union=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);p=[];if(0===u.length)throw Error("Function called with wrong number of Parameters");if(1===u.length)if(g.isArray(u[0]))for(u=g.autoCastFeatureToGeometry(u[0]),z=0;z<u.length;z++){if(null!==u[z]){if(!(u[z]instanceof d))throw Error("Illegal Argument");p.push(u[z])}}else if(g.isImmutableArray(u[0]))for(u=
g.autoCastFeatureToGeometry(u[0].toArray()),z=0;z<u.length;z++){if(null!==u[z]){if(!(u[z]instanceof d))throw Error("Illegal Argument");p.push(u[z])}}else{if(u[0]instanceof d)return g.fixSpatialReference(b.cloneGeometry(u[0]),x.spatialReference);if(null===u[0])return null;throw Error("Illegal Argument");}else for(z=0;z<u.length;z++)if(null!==u[z]){if(!(u[z]instanceof d))throw Error("Illegal Argument");p.push(u[z])}return 0===p.length?null:t.union(p)})};w.difference=function(x,B){return v(x,B,function(p,
z,u){u=g.autoCastFeatureToGeometry(u);y(u);return null!==u[0]&&null===u[1]?b.cloneGeometry(u[0]):null===u[0]?null:t.difference(u[0],u[1])})};w.symmetricdifference=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);y(u);return null===u[0]&&null===u[1]?null:null===u[0]?b.cloneGeometry(u[1]):null===u[1]?b.cloneGeometry(u[0]):t.symmetricDifference(u[0],u[1])})};w.clip=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,2);if(!(u[1]instanceof
k)&&null!==u[1])throw Error("Illegal Argument");if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");return null===u[1]?null:t.clip(u[0],u[1])})};w.cut=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,2);if(!(u[1]instanceof l)&&null!==u[1])throw Error("Illegal Argument");if(null===u[0])return[];if(!(u[0]instanceof d))throw Error("Illegal Argument");return null===u[1]?[b.cloneGeometry(u[0])]:t.cut(u[0],u[1])})};w.area=function(x,
B){return v(x,B,function(p,z,u){g.pcCheck(u,1,2);u=g.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(g.isArray(u[0])||g.isImmutableArray(u[0]))return p=g.autoCastArrayOfPointsToPolygon(u[0],x.spatialReference),null===p?0:t.planarArea(p,b.convertSquareUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof d))throw Error("Illegal Argument");return t.planarArea(u[0],b.convertSquareUnitsToCode(g.defaultUndefined(u[1],-1)))})};w.areageodetic=function(x,B){return v(x,B,function(p,z,u){g.pcCheck(u,
1,2);u=g.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(g.isArray(u[0])||g.isImmutableArray(u[0]))return p=g.autoCastArrayOfPointsToPolygon(u[0],x.spatialReference),null===p?0:t.geodesicArea(p,b.convertSquareUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof d))throw Error("Illegal Argument");return t.geodesicArea(u[0],b.convertSquareUnitsToCode(g.defaultUndefined(u[1],-1)))})};w.length=function(x,B){return v(x,B,function(p,z,u){g.pcCheck(u,1,2);u=g.autoCastFeatureToGeometry(u);
if(null===u[0])return 0;if(g.isArray(u[0])||g.isImmutableArray(u[0]))return p=g.autoCastArrayOfPointsToPolyline(u[0],x.spatialReference),null===p?0:t.planarLength(p,b.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof d))throw Error("Illegal Argument");return t.planarLength(u[0],b.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)))})};w.lengthgeodetic=function(x,B){return v(x,B,function(p,z,u){g.pcCheck(u,1,2);u=g.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(g.isArray(u[0])||
g.isImmutableArray(u[0]))return p=g.autoCastArrayOfPointsToPolyline(u[0],x.spatialReference),null===p?0:t.geodesicLength(p,b.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof d))throw Error("Illegal Argument");return t.geodesicLength(u[0],b.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)))})};w.distance=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);p=u[0];if(g.isArray(u[0])||g.isImmutableArray(u[0]))p=g.autoCastArrayOfPointsToMultiPoint(u[0],
x.spatialReference);z=u[1];if(g.isArray(u[1])||g.isImmutableArray(u[1]))z=g.autoCastArrayOfPointsToMultiPoint(u[1],x.spatialReference);if(!(p instanceof d))throw Error("Illegal Argument");if(!(z instanceof d))throw Error("Illegal Argument");return t.distance(p,z,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)))})};w.distancegeodetic=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);p=u[0];z=u[1];if(!(p instanceof f))throw Error("Illegal Argument");
if(!(z instanceof f))throw Error("Illegal Argument");var D=new l({paths:[],spatialReference:p.spatialReference});D.addPath([p,z]);return t.geodesicLength(D,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)))})};w.densify=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");p=g.toNumber(u[1]);if(isNaN(p))throw Error("Illegal Argument");if(0>=p)throw Error("Illegal Argument");
return u[0]instanceof e||u[0]instanceof l?t.densify(u[0],p,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1))):u[0]instanceof k?t.densify(r(u[0]),p,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1))):u[0]})};w.densifygeodetic=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");p=g.toNumber(u[1]);if(isNaN(p))throw Error("Illegal Argument");if(0>=p)throw Error("Illegal Argument");
return u[0]instanceof e||u[0]instanceof l?t.geodesicDensify(u[0],p,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1))):u[0]instanceof k?t.geodesicDensify(r(u[0]),p,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1))):u[0]})};w.generalize=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,4);if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");p=g.toNumber(u[1]);if(isNaN(p))throw Error("Illegal Argument");return t.generalize(u[0],
p,g.toBoolean(g.defaultUndefined(u[2],!0)),b.convertLinearUnitsToCode(g.defaultUndefined(u[3],-1)))})};w.buffer=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");p=g.toNumber(u[1]);if(isNaN(p))throw Error("Illegal Argument");return 0===p?b.cloneGeometry(u[0]):t.buffer(u[0],p,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)))})};w.buffergeodetic=function(x,B){return v(x,
B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");p=g.toNumber(u[1]);if(isNaN(p))throw Error("Illegal Argument");return 0===p?b.cloneGeometry(u[0]):t.geodesicBuffer(u[0],p,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)))})};w.offset=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,6);if(null===u[0])return null;if(!(u[0]instanceof e||u[0]instanceof l))throw Error("Illegal Argument");
p=g.toNumber(u[1]);if(isNaN(p))throw Error("Illegal Argument");z=g.toNumber(g.defaultUndefined(u[4],10));if(isNaN(z))throw Error("Illegal Argument");var D=g.toNumber(g.defaultUndefined(u[5],0));if(isNaN(D))throw Error("Illegal Argument");return t.offset(u[0],p,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)),g.toString(g.defaultUndefined(u[3],"round")).toLowerCase(),z,D)})};w.rotate=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);p=u[0];if(null===
p)return null;if(!(p instanceof d))throw Error("Illegal Argument");p instanceof k&&(p=e.fromExtent(p));z=g.toNumber(u[1]);if(isNaN(z))throw Error("Illegal Argument");u=g.defaultUndefined(u[2],null);if(null===u)return t.rotate(p,z);if(u instanceof f)return t.rotate(p,z,u);throw Error("Illegal Argument");})};w.centroid=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,1,1);if(null===u[0])return null;p=u[0];if(g.isArray(u[0])||g.isImmutableArray(u[0]))p=g.autoCastArrayOfPointsToMultiPoint(u[0],
x.spatialReference);if(null===p)return null;if(!(p instanceof d))throw Error("Illegal Argument");return p instanceof f?g.fixSpatialReference(b.cloneGeometry(u[0]),x.spatialReference):p instanceof e?p.getCentroid():p instanceof l?h.centroidPolyline(p):p instanceof c?h.centroidMultiPoint(p):p instanceof k?p.getCenter():null})};w.multiparttosinglepart=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,1,1);z=[];if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");
if(u[0]instanceof f||u[0]instanceof k)return[g.fixSpatialReference(b.cloneGeometry(u[0]),x.spatialReference)];p=t.simplify(u[0]);if(p instanceof e){z=[];var D=[];for(u=0;u<p.rings.length;u++)if(p.isClockwise(p.rings[u])){var I=n.fromJson({rings:[p.rings[u]],hasZ:!0===p.hasZ,hasM:!0===p.hasM,spatialReference:p.spatialReference.toJson()});z.push(I)}else D.push({ring:p.rings[u],pt:p.getPoint(u,0)});for(p=0;p<D.length;p++)for(u=0;u<z.length;u++)if(z[u].contains(D[p].pt)){z[u].addRing(D[p].ring);break}return z}if(p instanceof
l){z=[];for(u=0;u<p.paths.length;u++)D=n.fromJson({paths:[p.paths[u]],hasZ:!0===p.hasZ,hasM:!0===p.hasM,spatialReference:p.spatialReference.toJson()}),z.push(D);return z}if(u[0]instanceof c){p=g.fixSpatialReference(b.cloneGeometry(u[0]),x.spatialReference);for(u=0;u<p.points.length;u++)z.push(p.getPoint(u));return z}return null})};w.issimple=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,1,1);if(null===u[0])return!0;if(!(u[0]instanceof d))throw Error("Illegal Argument");
return t.isSimple(u[0])})};w.simplify=function(x,B){return v(x,B,function(p,z,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,1,1);if(null===u[0])return null;if(!(u[0]instanceof d))throw Error("Illegal Argument");return t.simplify(u[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(m,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.cloneGeometry=q.sameGeomType=q.convertLinearUnitsToCode=q.shapeExtent=q.convertSquareUnitsToCode=
void 0;q.convertSquareUnitsToCode=function(g){if(void 0===g)return null;if("number"===typeof g)return g;switch(g.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};q.shapeExtent=function(g){if(null===g)return null;switch(g.type){case "polygon":case "multipoint":case "polyline":return g.extent;case "point":return new a({xmin:g.x,
ymin:g.y,xmax:g.x,ymax:g.y,spatialReference:g.spatialReference});case "extent":return g}return null};q.convertLinearUnitsToCode=function(g){if(void 0===g)return null;if("number"===typeof g||"number"===typeof g)return g;switch(g.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};q.sameGeomType=function(g,h){return g===h||"point"===g&&"esriGeometryPoint"===h||"polyline"===g&&"esriGeometryPolyline"===h||"polygon"===g&&"esriGeometryPolygon"===h||"extent"===g&&"esriGeometryEnvelope"===h||"multipoint"===g&&"esriGeometryMultipoint"===
h||"point"===h&&"esriGeometryPoint"===g||"polyline"===h&&"esriGeometryPolyline"===g||"polygon"===h&&"esriGeometryPolygon"===g||"extent"===h&&"esriGeometryEnvelope"===g||"multipoint"===h&&"esriGeometryMultipoint"===g?!0:!1};q.cloneGeometry=function(g){if(null===g)return null;var h=b.fromJson(g.toJson());g.getCacheValue("_geVersion")&&h.setCacheValue("_geVersion",g.getCacheValue("_geVersion"));return h}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","dojo/number"],
function(m,q,a,b){function g(h,k,d){if("undefined"===typeof d||0===+d)return Math[h](k);k=+k;d=+d;if(isNaN(k)||"number"!==typeof d||0!==d%1)return NaN;k=k.toString().split("e");k=Math[h](+(k[0]+"e"+(k[1]?+k[1]-d:-d)));k=k.toString().split("e");return+(k[0]+"e"+(k[1]?+k[1]+d:d))}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(h,k){function d(c,f,e){c=a.toNumber(c);return isNaN(c)?c:isNaN(f)||isNaN(e)||f>e?NaN:c<f?f:c>e?e:c}h.number=function(c,
f){return k(c,f,function(e,l,n){a.pcCheck(n,1,2);e=n[0];return a.isNumber(e)?e:null===e?0:a.isDate(e)||a.isBoolean(e)?Number(e):a.isArray(e)?NaN:""===e||void 0===e?Number(e):a.isString(e)?void 0!==n[1]?(n=a.multiReplace(n[1],"\u2030",""),n=a.multiReplace(n,"\u00a4",""),b.parse(e,{pattern:n})):Number(e.trim()):Number(e)})};h.abs=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,1);return Math.abs(a.toNumber(n[0]))})};h.acos=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,1);return Math.acos(a.toNumber(n[0]))})};
h.asin=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,1);return Math.asin(a.toNumber(n[0]))})};h.atan=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,1);return Math.atan(a.toNumber(n[0]))})};h.atan2=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,2,2);return Math.atan2(a.toNumber(n[0]),a.toNumber(n[1]))})};h.ceil=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,2);return 2===n.length?(e=a.toNumber(n[1]),isNaN(e)&&(e=0),g("ceil",a.toNumber(n[0]),-1*e)):Math.ceil(a.toNumber(n[0]))})};
h.round=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,2);return 2===n.length?(e=a.toNumber(n[1]),isNaN(e)&&(e=0),g("round",a.toNumber(n[0]),-1*e)):Math.round(a.toNumber(n[0]))})};h.floor=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,2);return 2===n.length?(e=a.toNumber(n[1]),isNaN(e)&&(e=0),g("floor",a.toNumber(n[0]),-1*e)):Math.floor(a.toNumber(n[0]))})};h.cos=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,1);return Math.cos(a.toNumber(n[0]))})};h.isnan=function(c,
f){return k(c,f,function(e,l,n){a.pcCheck(n,1,1);return"number"===typeof n[0]&&isNaN(n[0])})};h.exp=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,1);return Math.exp(a.toNumber(n[0]))})};h.log=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,1);return Math.log(a.toNumber(n[0]))})};h.pow=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,2,2);return Math.pow(a.toNumber(n[0]),a.toNumber(n[1]))})};h.random=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,0,0);return Math.random()})};
h.sin=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,1);return Math.sin(a.toNumber(n[0]))})};h.sqrt=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,1);return Math.sqrt(a.toNumber(n[0]))})};h.tan=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,1);return Math.tan(a.toNumber(n[0]))})};h.defaultvalue=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,2,2);return null===n[0]||""===n[0]||void 0===n[0]?n[1]:n[0]})};h.isempty=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,
1,1);return null===n[0]||""===n[0]||void 0===n[0]?!0:!1})};h["boolean"]=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,1,1);return a.toBoolean(n[0])})};h.constrain=function(c,f){return k(c,f,function(e,l,n){a.pcCheck(n,3,3);e=a.toNumber(n[1]);l=a.toNumber(n[2]);if(a.isArray(n[0])){var r=[],t=0;for(n=n[0];t<n.length;t++)r.push(d(n[t],e,l));return r}if(a.isImmutableArray(n[0])){r=[];for(t=0;t<n[0].length();t++)r.push(d(n[0].get(t),e,l));return r}return d(n[0],e,l)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(m,q,a,b){function g(h,k,d,c){if(1===c.length){if(a.isArray(c[0]))return b.calculateStat(h,c[0],-1);if(a.isImmutableArray(c[0]))return b.calculateStat(h,c[0].toArray(),-1)}return b.calculateStat(h,c,-1)}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(h,k){h.stdev=function(d,c){return k(d,c,function(f,e,l){return g("stdev",f,e,l)})};h.variance=function(d,c){return k(d,c,function(f,e,l){return g("variance",
f,e,l)})};h.average=function(d,c){return k(d,c,function(f,e,l){return g("mean",f,e,l)})};h.mean=function(d,c){return k(d,c,function(f,e,l){return g("mean",f,e,l)})};h.sum=function(d,c){return k(d,c,function(f,e,l){return g("sum",f,e,l)})};h.min=function(d,c){return k(d,c,function(f,e,l){return g("min",f,e,l)})};h.max=function(d,c){return k(d,c,function(f,e,l){return g("max",f,e,l)})};h.distinct=function(d,c){return k(d,c,function(f,e,l){return g("distinct",f,e,l)})};h.count=function(d,c){return k(d,
c,function(f,e,l){a.pcCheck(l,1,1);if(a.isArray(l[0])||a.isString(l[0]))return l[0].length;if(a.isImmutableArray(l[0]))return l[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(m,q,a){function b(h){for(var k=0,d=0;d<h.length;d++)k+=h[d];return k/h.length}function g(h){for(var k=b(h),d=0,c=0;c<h.length;c++)d+=Math.pow(k-h[c],2);return d/h.length}Object.defineProperty(q,"__esModule",
{value:!0});q.calculateStat=q.decodeStatType=void 0;q.decodeStatType=function(h){switch(h.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};q.calculateStat=function(h,k,d){void 0===d&&(d=1E3);switch(h.toLowerCase()){case "distinct":a:{h=d;d=[];for(var c={},f=[],e=0;e<k.length;e++){if(void 0!==
k[e]&&null!==k[e]&&k[e]!==a.voidOperation){var l=k[e];if(a.isNumber(l)||a.isString(l))void 0===c[l]&&(d.push(l),c[l]=1);else{for(var n=!1,r=0;r<f.length;r++)!0===a.equalityTest(f[r],l)&&(n=!0);!1===n&&(f.push(l),d.push(l))}}if(d.length>=h&&-1!==h){k=d;break a}}k=d}return k;case "avg":case "mean":return b(a.toNumberArray(k));case "min":return Math.min.apply(Math,a.toNumberArray(k));case "sum":k=a.toNumberArray(k);for(d=h=0;d<k.length;d++)h+=k[d];return h;case "max":return Math.max.apply(Math,a.toNumberArray(k));
case "stdev":case "stddev":return Math.sqrt(g(a.toNumberArray(k)));case "var":case "variance":return g(a.toNumberArray(k));case "count":return k.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Attachment ../Dictionary ../Feature ../languageUtils ../featureset/support/shared ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),function(m,
q,a,b,g,h,k,d,c,f,e,l,n,r,t){function w(v,y,x){if(null===v)y.updateUint8Array([0,139]);else if(k.isArray(v)){y.updateUint8Array([61]);if(x.map.has(v))v=x.map.get(v),y.updateIntArray([v^61237541]);else{x.map.set(v,x.currentLength++);for(var B=0;B<v.length;B++){var p=v[B];w(p,y,x)}x.map.delete(v);x.currentLength--}y.updateUint8Array([199])}else if(k.isImmutableArray(v)){y.updateUint8Array([61]);if(x.map.has(v))v=x.map.get(v),y.updateIntArray([v^61237541]);else{x.map.set(v,x.currentLength++);B=0;for(var z=
v.toArray();B<z.length;B++)p=z[B],w(p,y,x);x.map.delete(v);x.currentLength--}y.updateUint8Array([199])}else if(k.isDate(v))y.updateIntArray([v.getTime()]),y.updateUint8Array([241]);else if(k.isString(v))y.updateIntArray([v.length]),y.updateWithString(v),y.updateUint8Array([41]);else if(k.isBoolean(v))y.updateUint8Array([!0===v?1:0,113]);else if(k.isNumber(v))y.updateFloatArray([v]),y.updateUint8Array([173]);else{if(v instanceof b)throw Error("Type not supported in Hash");if(v instanceof a)throw Error("Type not supported in Hash");
if(v instanceof g){y.updateUint8Array([223]);if(x.map.has(v))v=x.map.get(v),y.updateIntArray([v^61237541]);else{x.map.set(v,x.currentLength++);B=0;for(z=v.keys();B<z.length;B++)p=z[B],y.updateIntArray([p.length]),y.updateWithString(p),y.updateUint8Array([251]),p=v.field(p),w(p,y,x),y.updateUint8Array([239]);x.map.delete(v);x.currentLength--}y.updateUint8Array([73])}else{if(v instanceof h)throw Error("Type not supported in Hash");if(v instanceof l)y.updateIntArray([3833836621]),y.updateIntArray([0]),
y.updateFloatArray([v.x]),y.updateIntArray([1]),y.updateFloatArray([v.y]),y.updateIntArray([3765347959]),w(v.spatialReference.wkid,y,x);else if(v instanceof n){y.updateIntArray([1266616829]);for(B=0;B<v.rings.length;B++){z=v.rings[B];var u=[],D=null,I=null;for(p=0;p<z.length;p++){var C=v.getPoint(B,p);if(0===p)D=C;else if(I.x===C.x&&I.y===C.y)continue;I=C;p===z.length-1&&D.x===C.x&&D.y===C.y||u.push(C)}y.updateIntArray([1397116793,u.length]);for(p=0;p<u.length;p++)C=u[p],y.updateIntArray([3962308117,
p]),w(C,y,x),y.updateIntArray([2716288009]);y.updateIntArray([2278822459])}y.updateIntArray([3878477243]);w(v.spatialReference.wkid,y,x)}else if(v instanceof r){y.updateIntArray([4106883559]);for(B=0;B<v.paths.length;B++){z=v.paths[B];y.updateIntArray([1397116793,z.length]);for(p=0;p<z.length;p++)y.updateIntArray([3962308117,p]),w(v.getPoint(B,p),y,x),y.updateIntArray([2716288009]);y.updateIntArray([2278822459])}y.updateIntArray([2568784753]);w(v.spatialReference.wkid,y,x)}else if(v instanceof e){y.updateIntArray([588535921,
v.points.length]);for(p=0;p<v.points.length;p++)B=v.getPoint(p),y.updateIntArray([p]),w(B,y,x);y.updateIntArray([1700171621]);w(v.spatialReference.wkid,y,x)}else if(v instanceof f)y.updateIntArray([3483648373]),y.updateIntArray([0]),y.updateFloatArray([v.xmax]),y.updateIntArray([1]),y.updateFloatArray([v.xmin]),y.updateIntArray([2]),y.updateFloatArray([v.ymax]),y.updateIntArray([3]),y.updateFloatArray([v.ymin]),y.updateIntArray([3622027469]),w(v.spatialReference.wkid,y,x);else if(v instanceof t)y.updateIntArray([14]),
void 0!==v.wkid&&null!==v.wkid&&y.updateIntArray([v.wkid]),v.wkt&&y.updateWithString(v.wkt);else{if(k.isFunctionParameter(v))throw Error("Type not supported in Hash");if(k.isFeatureSet(v))throw Error("Type not supported in Hash");k.isFeatureSetCollection(v);throw Error("Type not supported in Hash");}}}}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(v,y){v.portal=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,1);return new a(k.toString(u[0]))})};
v.trim=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,1);return k.toString(u[0]).trim()})};v.tohex=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,1);p=k.toNumber(u[0]);return isNaN(p)?p:p.toString(16)})};v.upper=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,1);return k.toString(u[0]).toUpperCase()})};v.proper=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,2);p=1;2===u.length&&"firstword"===k.toString(u[1]).toLowerCase()&&(p=2);z=/\s/;u=k.toString(u[0]);for(var D=
"",I=!0,C=0;C<u.length;C++){var E=u[C];z.test(E)?1===p&&(I=!0):E.toUpperCase()!==E.toLowerCase()&&(I?(E=E.toUpperCase(),I=!1):E=E.toLowerCase());D+=E}return D})};v.lower=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,1);return k.toString(u[0]).toLowerCase()})};v.guid=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,0,1);if(0<u.length)switch(k.toString(u[0]).toLowerCase()){case "digits":return k.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return k.generateUUID();
case "digits-hyphen-parentheses":return"("+k.generateUUID()+")"}return"{"+k.generateUUID()+"}"})};v.console=function(x,B){return y(x,B,function(p,z,u){0!==u.length&&(1===u.length?x.console(k.toString(u[0])):x.console(k.toString(u)));return k.voidOperation})};v.mid=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,2,3);p=k.toNumber(u[1]);if(isNaN(p))return"";0>p&&(p=0);if(2===u.length)return k.toString(u[0]).substr(p);z=k.toNumber(u[2]);if(isNaN(z))return"";0>z&&(z=0);return k.toString(u[0]).substr(p,
z)})};v.find=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,2,3);p=0;if(2<u.length){p=k.toNumber(k.defaultUndefined(u[2],0));if(isNaN(p))return-1;0>p&&(p=0)}return k.toString(u[1]).indexOf(k.toString(u[0]),p)})};v.left=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,2,2);p=k.toNumber(u[1]);if(isNaN(p))return"";0>p&&(p=0);return k.toString(u[0]).substr(0,p)})};v.right=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,2,2);p=k.toNumber(u[1]);if(isNaN(p))return"";0>p&&(p=0);return k.toString(u[0]).substr(-1*
p,p)})};v.split=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,2,4);p=k.toNumber(k.defaultUndefined(u[2],-1));z=k.toBoolean(k.defaultUndefined(u[3],!1));-1===p||null===p||!0===z?u=k.toString(u[0]).split(k.toString(u[1])):(isNaN(p)&&(p=-1),-1>p&&(p=-1),u=k.toString(u[0]).split(k.toString(u[1]),p));if(!1===z)return u;z=[];for(var D=0;D<u.length&&!(-1!==p&&z.length>=p);D++)""!==u[D]&&void 0!==u[D]&&z.push(u[D]);return z})};v.text=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,2);return k.toStringExplicit(u[0],
u[1])})};v.concatenate=function(x,B){return y(x,B,function(p,z,u){p=[];if(1>u.length)return"";if(k.isArray(u[0])){z=k.defaultUndefined(u[2],"");for(var D=0;D<u[0].length;D++)p[D]=k.toStringExplicit(u[0][D],z);return 1<u.length?p.join(u[1]):p.join("")}if(k.isImmutableArray(u[0])){z=k.defaultUndefined(u[2],"");for(D=0;D<u[0].length();D++)p[D]=k.toStringExplicit(u[0].get(D),z);return 1<u.length?p.join(u[1]):p.join("")}for(D=0;D<u.length;D++)p[D]=k.toStringExplicit(u[D]);return p.join("")})};v.reverse=
function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,1);if(k.isArray(u[0]))return p=u[0].slice(0),p.reverse(),p;if(k.isImmutableArray(u[0]))return p=u[0].toArray().slice(0),p.reverse(),p;throw Error("Invalid Parameter");})};v.replace=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,3,4);p=k.toString(u[0]);z=k.toString(u[1]);var D=k.toString(u[2]);return(4===u.length?k.toBoolean(u[3]):1)?k.multiReplace(p,z,D):p.replace(z,D)})};v.schema=function(x,B){return y(x,B,function(p,z,u){if(u[0]instanceof
h)return(p=u[0].schema())?g.convertObjectToArcadeDictionary(p):null;throw Error("Invalid Parameter");})};v.subtypes=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,1);if(u[0]instanceof h)return(p=u[0].subtypes())?g.convertObjectToArcadeDictionary(p):null;throw Error("Invalid Parameter");})};v.subtypecode=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,1);if(u[0]instanceof h){z=u[0].subtypes();if(!z)return null;if(z.subtypeField&&u[0].hasField(z.subtypeField))for(u=u[0].field(z.subtypeField),
p=0,z=z.subtypes;p<z.length;p++){var D=z[p];if(D.code===u)return D.code}return null}throw Error("Invalid Parameter");})};v.subtypename=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,1);if(u[0]instanceof h){z=u[0].subtypes();if(!z)return"";if(z.subtypeField&&u[0].hasField(z.subtypeField))for(u=u[0].field(z.subtypeField),p=0,z=z.subtypes;p<z.length;p++){var D=z[p];if(D.code===u)return D.name}return""}throw Error("Invalid Parameter");})};v.gdbversion=function(x,B){return y(x,B,function(p,z,
u){k.pcCheck(u,1,1);if(u[0]instanceof h)return u[0].gdbVersion();throw Error("Invalid Parameter");})};v.domain=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,2,3);if(u[0]instanceof h)return(p=u[0].fullDomain(k.toString(u[1]),void 0===u[2]?void 0:k.toNumber(u[2])))&&p.domain?"coded-value"===p.domain.type||"codedValue"===p.domain.type?g.convertObjectToArcadeDictionary({type:"codedValue",name:p.domain.name,dataType:d.layerFieldEsriConstants[p.field.type],codedValues:p.domain.codedValues.map(function(D){return{name:D.name,
code:D.code}})}):g.convertObjectToArcadeDictionary({type:"range",name:p.domain.name,dataType:d.layerFieldEsriConstants[p.field.type],min:p.domain.min,max:p.domain.max}):null;throw Error("Invalid Parameter");})};v.domainname=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,2,4);if(u[0]instanceof h)return u[0].domainValueLookup(k.toString(u[1]),u[2],void 0===u[3]?void 0:k.toNumber(u[3]));throw Error("Invalid Parameter");})};v.domaincode=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,2,
4);if(u[0]instanceof h)return u[0].domainCodeLookup(k.toString(u[1]),u[2],void 0===u[3]?void 0:k.toNumber(u[3]));throw Error("Invalid Parameter");})};v.urlencode=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,1);if(null===u[0])return"";if(u[0]instanceof g){p="";z=0;for(var D=u[0].keys();z<D.length;z++){var I=D[z],C=u[0].field(I);""!==p&&(p+="\x26");p=null===C?p+(encodeURIComponent(I)+"\x3d"):p+(encodeURIComponent(I)+"\x3d"+encodeURIComponent(C))}return p}return encodeURIComponent(k.toString(u[0]))})};
v.hash=function(x,B){return y(x,B,function(p,z,u){k.pcCheck(u,1,1);p=new c.XXH(0);w(u[0],p,{map:new Map,currentLength:0});return p.digest()})}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(m,q){function a(b){for(var g=[],h=0,k=b.length;h<k;h++){var d=b.charCodeAt(h);128>d?g.push(d):2048>d?g.push(192|d>>6,128|d&63):55296>d||57344<=d?g.push(224|d>>12,128|d>>6&63,128|d&63):(h++,d=65536+((d&1023)<<10|b.charCodeAt(h)&1023),g.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|
d&63))}return new Uint8Array(g)}Object.defineProperty(q,"__esModule",{value:!0});q.XXH=void 0;m=function(){function b(g){this.seed=g;this.totallen=0;this.bufs=[];this.init()}b.prototype.init=function(){this.bufs=[];this.totallen=0;return this};b.prototype.updateFloatArray=function(g){for(var h=[],k=0;k<g.length;k++){var d=g[k];isNaN(d)?h.push("NaN"):Infinity===d?h.push("Infinity"):-Infinity===d?h.push("-Infinity"):0===d?h.push("0"):h.push(d.toString(16))}this.update(a(h.join("")))};b.prototype.updateIntArray=
function(g){g=Int32Array.from(g);this.update(new Uint8Array(g.buffer))};b.prototype.updateUint8Array=function(g){this.update(Uint8Array.from(g))};b.prototype.updateWithString=function(g){return this.update(a(g))};b.prototype.update=function(g){this.bufs.push(g);this.totallen+=g.length;return this};b.prototype.digest=function(){for(var g=new Uint8Array(this.totallen),h=0,k=0,d=this.bufs;k<d.length;k++){var c=d[k];g.set(c,h);h+=c.length}this.init();return this.xxHash32(g,this.seed)};b.prototype.xxHash32=
function(g,h){void 0===h&&(h=0);var k=h+374761393&4294967295,d=0;if(16<=g.length){k=[h+2654435761+2246822519&4294967295,h+2246822519&4294967295,h+0&4294967295,h-2654435761&4294967295];var c=g.length-16;for(d=h=0;(d&4294967280)<=c;d+=4){var f=d,e=g[f+0]+(g[f+1]<<8);f=g[f+2]+(g[f+3]<<8);e=k[h]+(2246822519*e+(2246822519*f<<16))&4294967295;e=e<<13|e>>>19;k[h]=2654435761*(e&65535)+(2654435761*(e>>>16)<<16)&4294967295;h=h+1&3}k=(k[0]<<1|k[0]>>>31)+(k[1]<<7|k[1]>>>25)+(k[2]<<12|k[2]>>>20)+(k[3]<<18|k[3]>>>
14)&4294967295}k=k+g.length&4294967295;for(h=g.length-4;d<=h;d+=4)f=d,e=g[f+0]+(g[f+1]<<8),f=g[f+2]+(g[f+3]<<8),k=k+(3266489917*e+(3266489917*f<<16))&4294967295,k=k<<17|k>>>15,k=668265263*(k&65535)+(668265263*(k>>>16)<<16)&4294967295;for(;d<g.length;++d)h=g[d],k+=374761393*h,k=k<<11|k>>>21,k=2654435761*(k&65535)+(2654435761*(k>>>16)<<16)&4294967295;k^=k>>>15;k=(2246822519*(k&65535)&4294967295)+(2246822519*(k>>>16)<<16);k^=k>>>13;k=(3266489917*(k&65535)&4294967295)+(3266489917*(k>>>16)<<16);k^=k>>>
16;return 0>k?k+4294967296:k};return b}();q.XXH=m})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t,w,v,y,x,B,p,z,u,D,I){function C(U,T){for(var ca=[],ia=0;ia<T.arguments.length;ia++)ca.push(G(U,T.arguments[ia]));return ca}function E(U,T,ca){try{return ca(U,T,C(U,T))}catch(ia){throw ia;}}function G(U,T){try{switch(T.type){case "EmptyStatement":return f.voidOperation;case "VariableDeclarator":var ca=null===T.init?null:G(U,T.init);ca===f.voidOperation&&(ca=null);if("Identifier"!==T.id.type)throw Error("Can only assign a regular variable");var ia=T.id.name.toLowerCase();
null!==U.localScope?U.localScope[ia]={value:ca,valueset:!0,node:T.init}:U.globalScope[ia]={value:ca,valueset:!0,node:T.init};return f.voidOperation;case "VariableDeclaration":for(var ea=0;ea<T.declarations.length;ea++)G(U,T.declarations[ea]);return f.voidOperation;case "BlockStatement":a:{var sa=f.voidOperation;for(ea=0;ea<T.body.length;ea++)if(sa=G(U,T.body[ea]),sa instanceof f.ReturnResult||sa===f.breakResult||sa===f.continueResult){var M=sa;break a}M=sa}return M;case "FunctionDeclaration":var N=
T.id.name.toLowerCase();U.globalScope[N]={valueset:!0,node:null,value:new k(T,U)};return f.voidOperation;case "ReturnStatement":if(null===T.argument)var Y=new f.ReturnResult(f.voidOperation);else{var da=G(U,T.argument);Y=new f.ReturnResult(da)}return Y;case "IfStatement":if("AssignmentExpression"===T.test.type||"UpdateExpression"===T.test.type)throw Error(e.nodeErrorMessage(T.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ka=G(U,T.test);if(!0===ka)var Ba=G(U,T.consequent);else if(!1===
ka)Ba=null!==T.alternate?G(U,T.alternate):f.voidOperation;else throw Error(e.nodeErrorMessage(T,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return Ba;case "ExpressionStatement":if("AssignmentExpression"===T.expression.type||"UpdateExpression"===T.expression.type)var Aa=G(U,T.expression);else{var Ca=G(U,T.expression);Aa=Ca===f.voidOperation?f.voidOperation:new f.ImplicitResult(Ca)}return Aa;case "AssignmentExpression":var ya=G(U,T.right);ea=null;var qa="";if("MemberExpression"===T.left.type){ea=
G(U,T.left.object);!0===T.left.computed?qa=G(U,T.left.property):"Identifier"===T.left.property.type&&(qa=T.left.property.name);if(f.isArray(ea))if(f.isNumber(qa)){0>qa&&(qa=ea.length+qa);if(0>qa||qa>ea.length)throw Error("Assignment outside of array bounds");if(qa===ea.length&&"\x3d"!==T.operator)throw Error("Invalid Parameter");ea[qa]=L(ya,T.operator,ea[qa],T)}else throw Error("Invalid Parameter");else if(ea instanceof g){if(!1===f.isString(qa))throw Error("Dictionary accessor must be a string");
if(!0===ea.hasField(qa))ea.setField(qa,L(ya,T.operator,ea.field(qa),T));else{if("\x3d"!==T.operator)throw Error("Invalid Parameter");ea.setField(qa,L(ya,T.operator,null,T))}}else if(ea instanceof h){if(!1===f.isString(qa))throw Error("Feature accessor must be a string");if(!0===ea.hasField(qa))ea.setField(qa,L(ya,T.operator,ea.field(qa),T));else{if("\x3d"!==T.operator)throw Error("Invalid Parameter");ea.setField(qa,L(ya,T.operator,null,T))}}else{if(f.isImmutableArray(ea))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var xa=f.voidOperation}else if(ea=T.left.name.toLowerCase(),null!==U.localScope&&void 0!==U.localScope[ea])U.localScope[ea]={value:L(ya,T.operator,U.localScope[ea].value,T),valueset:!0,node:T.right},xa=f.voidOperation;else if(void 0!==U.globalScope[ea])U.globalScope[ea]={value:L(ya,T.operator,U.globalScope[ea].value,T),valueset:!0,node:T.right},xa=f.voidOperation;else throw Error("Variable not recognised");return xa;case "UpdateExpression":ea=null;qa="";if("MemberExpression"===
T.argument.type){ea=G(U,T.argument.object);!0===T.argument.computed?qa=G(U,T.argument.property):"Identifier"===T.argument.property.type&&(qa=T.argument.property.name);if(f.isArray(ea))if(f.isNumber(qa)){0>qa&&(qa=ea.length+qa);if(0>qa||qa>=ea.length)throw Error("Assignment outside of array bounds");var wa=f.toNumber(ea[qa]);ea[qa]="++"===T.operator?wa+1:wa-1}else throw Error("Invalid Parameter");else if(ea instanceof g){if(!1===f.isString(qa))throw Error("Dictionary accessor must be a string");if(!0===
ea.hasField(qa))wa=f.toNumber(ea.field(qa)),ea.setField(qa,"++"===T.operator?wa+1:wa-1);else throw Error("Invalid Parameter");}else if(ea instanceof h){if(!1===f.isString(qa))throw Error("Feature accessor must be a string");if(!0===ea.hasField(qa))wa=f.toNumber(ea.field(qa)),ea.setField(qa,"++"===T.operator?wa+1:wa-1);else throw Error("Invalid Parameter");}else{if(f.isImmutableArray(ea))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var Wa=!1===T.prefix?wa:"++"===T.operator?wa+
1:wa-1}else{ea="Identifier"===T.argument.type?T.argument.name.toLowerCase():"";if(!ea)throw Error("Invalid identifier");if(null!==U.localScope&&void 0!==U.localScope[ea])wa=f.toNumber(U.localScope[ea].value),U.localScope[ea]={value:"++"===T.operator?wa+1:wa-1,valueset:!0,node:T},Wa=!1===T.prefix?wa:"++"===T.operator?wa+1:wa-1;else if(void 0!==U.globalScope[ea])wa=f.toNumber(U.globalScope[ea].value),U.globalScope[ea]={value:"++"===T.operator?wa+1:wa-1,valueset:!0,node:T},Wa=!1===T.prefix?wa:"++"===
T.operator?wa+1:wa-1;else throw Error("Variable not recognised");}return Wa;case "BreakStatement":return f.breakResult;case "ContinueStatement":return f.continueResult;case "TemplateElement":return T.value?T.value.cooked:"";case "TemplateLiteral":var Za="",Ma=0;xa=0;for(ea=T.quasis;xa<ea.length;xa++)if(qa=ea[xa],Za+=qa.value?qa.value.cooked:"",!1===qa.tail){var Ka=T.expressions[Ma]?f.toString(G(U,T.expressions[Ma])):"";Za+=Ka;Ma++}return Za;case "ForStatement":null!==T.init&&G(U,T.init);Ma={testResult:!0,
lastAction:f.voidOperation};do b:{ea=U;qa=T;Ka=Ma;if(null!==qa.test){Ka.testResult=G(ea,qa.test);if(!1===Ka.testResult)break b;if(!0!==Ka.testResult)throw Error(e.nodeErrorMessage(qa,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}Ka.lastAction=G(ea,qa.body);Ka.lastAction===f.breakResult?Ka.testResult=!1:Ka.lastAction instanceof f.ReturnResult?Ka.testResult=!1:null!==qa.update&&G(ea,qa.update)}while(!0===Ma.testResult);Za=Ma.lastAction instanceof f.ReturnResult?Ma.lastAction:f.voidOperation;return Za;
case "ForInStatement":return H(U,T);case "Identifier":return ha(U,T);case "MemberExpression":return W(U,T);case "Literal":return T.value;case "CallExpression":return X(U,T);case "UnaryExpression":return Z(U,T);case "BinaryExpression":return ba(U,T);case "LogicalExpression":return P(U,T);case "ConditionalExpression":throw Error(e.nodeErrorMessage(T,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(ea=[],qa=0;qa<T.elements.length;qa++){var Xa=G(U,T.elements[qa]);if(f.isFunctionParameter(Xa))throw Error(e.nodeErrorMessage(T,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));Xa===f.voidOperation?ea.push(null):ea.push(Xa)}}catch(Ta){throw Ta;}return ea;case "ObjectExpression":ea={};for(qa=0;qa<T.properties.length;qa++){var Ga=G(U,T.properties[qa]);if(f.isFunctionParameter(Ga.value))throw Error("Illegal Argument");if(!1===f.isString(Ga.key))throw Error("Illegal Argument");ea[Ga.key.toString()]=Ga.value===f.voidOperation?null:Ga.value}var Oa=new g(ea);Oa.immutable=!1;return Oa;case "Property":return{key:"Identifier"===T.key.type?T.key.name:
G(U,T.key),value:G(U,T.value)};default:throw Error(e.nodeErrorMessage(T,"RUNTIME","UNREOGNISED"));}}catch(Ta){throw Ta;}}function H(U,T){var ca=G(U,T.right);"VariableDeclaration"===T.left.type&&G(U,T.left);var ia=null,ea="";if("VariableDeclaration"===T.left.type){var sa=T.left.declarations[0].id;"Identifier"===sa.type&&(ea=sa.name)}else"Identifier"===T.left.type&&(ea=T.left.name);if(!ea)throw Error(e.nodeErrorMessage(T,"RUNTIME","INVALIDVARIABLE"));ea=ea.toLowerCase();null!==U.localScope&&void 0!==
U.localScope[ea]&&(ia=U.localScope[ea]);null===ia&&void 0!==U.globalScope[ea]&&(ia=U.globalScope[ea]);if(null===ia)throw Error(e.nodeErrorMessage(T,"RUNTIME","VARIABLENOTDECLARED"));if(f.isArray(ca)||f.isString(ca)){ca=ca.length;for(sa=0;sa<ca;sa++){ia.value=sa;ea=G(U,T.body);if(ea===f.breakResult)break;if(ea instanceof f.ReturnResult)return ea}return f.voidOperation}if(f.isImmutableArray(ca)){for(sa=0;sa<ca.length();sa++){ia.value=sa;ea=G(U,T.body);if(ea===f.breakResult)break;if(ea instanceof f.ReturnResult)return ea}return f.voidOperation}if(ca instanceof
g||ca instanceof h)for(ca=ca.keys(),sa=0;sa<ca.length;sa++){ia.value=ca[sa];ea=G(U,T.body);if(ea===f.breakResult)break;if(ea instanceof f.ReturnResult)return ea}else return f.voidOperation}function L(U,T,ca,ia){switch(T){case "\x3d":return U===f.voidOperation?null:U;case "/\x3d":return f.toNumber(ca)/f.toNumber(U);case "*\x3d":return f.toNumber(ca)*f.toNumber(U);case "-\x3d":return f.toNumber(ca)-f.toNumber(U);case "+\x3d":return f.isString(ca)||f.isString(U)?f.toString(ca)+f.toString(U):f.toNumber(ca)+
f.toNumber(U);case "%\x3d":return f.toNumber(ca)%f.toNumber(U);default:throw Error(e.nodeErrorMessage(ia,"RUNTIME","OPERATORNOTRECOGNISED"));}}function O(U,T,ca){T=T.toLowerCase();switch(T){case "hasz":return U=U.hasZ,void 0===U?!1:U;case "hasm":return U=U.hasM,void 0===U?!1:U;case "spatialreference":return T=U.spatialReference._arcadeCacheId,void 0===T&&(ca=!0,Object.freeze&&Object.isFrozen(U.spatialReference)&&(ca=!1),ca&&(ta++,T=U.spatialReference._arcadeCacheId=ta)),U=new g({wkt:U.spatialReference.wkt,
wkid:U.spatialReference.wkid}),void 0!==T&&(U._arcadeCacheId="SPREF"+T.toString()),U}switch(U.type){case "extent":switch(T){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return U=U[T],void 0!==U?U:null;case "type":return"Extent"}break;case "polygon":switch(T){case "rings":return T=U.getCacheValue("_arcadeCacheId"),void 0===T&&(ta++,T=ta,U.setCacheValue("_arcadeCacheId",T)),U=new d(U.rings,U.spatialReference,!0===U.hasZ,!0===U.hasM,T);case "type":return"Polygon"}break;
case "point":switch(T){case "x":case "y":case "z":case "m":return void 0!==U[T]?U[T]:null;case "type":return"Point"}break;case "polyline":switch(T){case "paths":return T=U.getCacheValue("_arcadeCacheId"),void 0===T&&(ta++,T=ta,U.setCacheValue("_arcadeCacheId",T)),U=new d(U.paths,U.spatialReference,!0===U.hasZ,!0===U.hasM,T);case "type":return"Polyline"}break;case "multipoint":switch(T){case "points":return T=U.getCacheValue("_arcadeCacheId"),void 0===T&&(ta++,T=ta,U.setCacheValue("_arcadeCacheId",
T)),U=new c(U.points,U.spatialReference,!0===U.hasZ,!0===U.hasM,T,1);case "type":return"Multipoint"}}throw Error(e.nodeErrorMessage(ca,"RUNTIME","PROPERTYNOTFOUND"));}function W(U,T){try{var ca=G(U,T.object);if(null===ca)throw Error(e.nodeErrorMessage(T,"RUNTIME","NOTFOUND"));if(!1===T.computed){if("Identifier"===T.property.type){if(ca instanceof g||ca instanceof h)return ca.field(T.property.name);if(ca instanceof B)return O(ca,T.property.name,T)}throw Error(e.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));
}var ia=G(U,T.property);if(ca instanceof g||ca instanceof h){if(f.isString(ia))return ca.field(ia);throw Error(e.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}if(ca instanceof B){if(f.isString(ia))return O(ca,ia,T);throw Error(e.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}if(f.isArray(ca)){if(f.isNumber(ia)&&isFinite(ia)&&Math.floor(ia)===ia){0>ia&&(ia=ca.length+ia);if(ia>=ca.length||0>ia)throw Error(e.nodeErrorMessage(T,"RUNTIME","OUTOFBOUNDS"));return ca[ia]}throw Error(e.nodeErrorMessage(T,"RUNTIME",
"INVALIDTYPE"));}if(f.isString(ca)){if(f.isNumber(ia)&&isFinite(ia)&&Math.floor(ia)===ia){0>ia&&(ia=ca.length+ia);if(ia>=ca.length||0>ia)throw Error(e.nodeErrorMessage(T,"RUNTIME","OUTOFBOUNDS"));return ca[ia]}throw Error(e.nodeErrorMessage(T,"RUNTIME","INVALIDTYPE"));}if(f.isImmutableArray(ca)&&f.isNumber(ia)&&isFinite(ia)&&Math.floor(ia)===ia){0>ia&&(ia=ca.length()+ia);if(ia>=ca.length()||0>ia)throw Error(e.nodeErrorMessage(T,"RUNTIME","OUTOFBOUNDS"));return ca.get(ia)}throw Error(e.nodeErrorMessage(T,
"RUNTIME","INVALIDTYPE"));}catch(ea){throw ea;}}function Z(U,T){try{var ca=G(U,T.argument);if(f.isBoolean(ca)){if("!"===T.operator)return!ca;if("-"===T.operator)return-1*f.toNumber(ca);if("+"===T.operator)return 1*f.toNumber(ca);if("~"===T.operator)return~f.toNumber(ca);throw Error(e.nodeErrorMessage(T,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===T.operator)return~f.toNumber(ca);if("-"===T.operator)return-1*f.toNumber(ca);if("+"===T.operator)return 1*f.toNumber(ca);throw Error(e.nodeErrorMessage(T,
"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(ia){throw ia;}}function ba(U,T){try{var ca=[G(U,T.left),G(U,T.right)],ia=ca[0],ea=ca[1];switch(T.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return f.binaryOperator(f.toNumber(ia),f.toNumber(ea),T.operator);case "\x3d\x3d":return f.equalityTest(ia,ea);case "!\x3d":return!f.equalityTest(ia,ea);case "\x3c":return f.greaterThanLessThan(ia,ea,T.operator);case "\x3e":return f.greaterThanLessThan(ia,ea,T.operator);
case "\x3c\x3d":return f.greaterThanLessThan(ia,ea,T.operator);case "\x3e\x3d":return f.greaterThanLessThan(ia,ea,T.operator);case "+":return f.isString(ia)||f.isString(ea)?f.toString(ia)+f.toString(ea):f.toNumber(ia)+f.toNumber(ea);case "-":return f.toNumber(ia)-f.toNumber(ea);case "*":return f.toNumber(ia)*f.toNumber(ea);case "/":return f.toNumber(ia)/f.toNumber(ea);case "%":return f.toNumber(ia)%f.toNumber(ea);default:throw Error(e.nodeErrorMessage(T,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(sa){throw sa;
}}function P(U,T){try{if("AssignmentExpression"===T.left.type||"UpdateExpression"===T.left.type)throw Error(e.nodeErrorMessage(T.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===T.right.type||"UpdateExpression"===T.right.type)throw Error(e.nodeErrorMessage(T.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ca=G(U,T.left);if(f.isBoolean(ca))switch(T.operator){case "||":if(!0===ca)return ca;var ia=G(U,T.right);if(f.isBoolean(ia))return ia;throw Error(e.nodeErrorMessage(T,
"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===ca)return ca;ia=G(U,T.right);if(f.isBoolean(ia))return ia;throw Error(e.nodeErrorMessage(T,"RUNTIME","ONLYORORAND"));default:throw Error(e.nodeErrorMessage(T,"RUNTIME","ONLYORORAND"));}throw Error(e.nodeErrorMessage(T,"RUNTIME","ONLYBOOLEAN"));}catch(ea){throw ea;}}function ha(U,T){try{var ca=T.name.toLowerCase();if(null!==U.localScope&&void 0!==U.localScope[ca]){var ia=U.localScope[ca];if(!0===ia.valueset)return ia.value;ia.value=G(U,ia.node);ia.valueset=
!0;return ia.value}if(void 0!==U.globalScope[ca]){ia=U.globalScope[ca];if(!0===ia.valueset)return ia.value;ia.value=G(U,ia.node);ia.valueset=!0;return ia.value}throw Error(e.nodeErrorMessage(T,"RUNTIME","VARIABLENOTFOUND"));}catch(ea){throw ea;}}function X(U,T){try{if("Identifier"!==T.callee.type)throw Error(e.nodeErrorMessage(T,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==U.localScope&&void 0!==U.localScope[T.callee.name.toLowerCase()]){var ca=U.localScope[T.callee.name.toLowerCase()];if(ca.value instanceof
f.NativeFunction)return ca.value.fn(U,T);if(ca.value instanceof k)return ja(U,T,ca.value.definition);throw Error(e.nodeErrorMessage(T,"RUNTIME","NOTAFUNCTION"));}if(void 0!==U.globalScope[T.callee.name.toLowerCase()]){ca=U.globalScope[T.callee.name.toLowerCase()];if(ca.value instanceof f.NativeFunction)return ca.value.fn(U,T);if(ca.value instanceof k)return ja(U,T,ca.value.definition);throw Error(e.nodeErrorMessage(T,"RUNTIME","NOTAFUNCTION"));}throw Error(e.nodeErrorMessage(T,"RUNTIME","NOTFOUND"));
}catch(ia){throw ia;}}function R(U){return null==U?"":f.isArray(U)||f.isImmutableArray(U)?"Array":f.isDate(U)?"Date":f.isString(U)?"String":f.isBoolean(U)?"Boolean":f.isNumber(U)?"Number":U instanceof b?"Attachment":U instanceof a?"Portal":U instanceof g?"Dictionary":U instanceof h?"Feature":U instanceof z?"Point":U instanceof u?"Polygon":U instanceof D?"Polyline":U instanceof p?"Multipoint":U instanceof x?"Extent":f.isFunctionParameter(U)?"Function":f.isFeatureSet(U)?"FeatureSet":f.isFeatureSetCollection(U)?
"FeatureSetCollection":U===f.voidOperation?"":"number"===typeof U&&isNaN(U)?"Number":"Unrecognised Type"}function V(U,T,ca,ia){try{var ea=G(U,T.arguments[ca]);if(f.equalityTest(ea,ia))return G(U,T.arguments[ca+1]);var sa=T.arguments.length-ca;return 1===sa?G(U,T.arguments[ca]):2===sa?null:3===sa?G(U,T.arguments[ca+2]):V(U,T,ca+2,ia)}catch(M){throw M;}}function J(U,T,ca,ia){try{if(!0===ia)return G(U,T.arguments[ca+1]);if(3===T.arguments.length-ca)return G(U,T.arguments[ca+2]);var ea=G(U,T.arguments[ca+
2]);if(!1===f.isBoolean(ea))throw Error("WHEN needs boolean test conditions");return J(U,T,ca+2,ea)}catch(sa){throw sa;}}function S(U,T){var ca=U.length,ia=Math.floor(ca/2);if(0===ca)return[];if(1===ca)return[U[0]];var ea=S(U.slice(0,ia),T);U=S(U.slice(ia,ca),T);for(ca=[];0<ea.length||0<U.length;)0<ea.length&&0<U.length?(ia=T(ea[0],U[0]),isNaN(ia)&&(ia=0),0>=ia?(ca.push(ea[0]),ea=ea.slice(1)):(ca.push(U[0]),U=U.slice(1))):0<ea.length?(ca.push(ea[0]),ea=ea.slice(1)):0<U.length&&(ca.push(U[0]),U=U.slice(1));
return ca}function aa(U,T,ca){try{var ia=U.body;if(ca.length!==U.params.length)throw Error("Invalid Parameter calls to function.");for(var ea=0;ea<ca.length;ea++)T.localScope[U.params[ea].name.toLowerCase()]={value:ca[ea],valueset:!0,node:null};var sa=G(T,ia);if(sa instanceof f.ReturnResult)return sa.value;if(sa===f.breakResult)throw Error("Cannot Break from a Function");if(sa===f.continueResult)throw Error("Cannot Continue from a Function");return sa instanceof f.ImplicitResult?sa.value:sa}catch(M){throw M;
}}function ja(U,T,ca){return E(U,T,function(ia,ea,sa){ia={spatialReference:U.spatialReference,globalScope:U.globalScope,depthCounter:U.depthCounter+1,console:U.console,lrucache:U.lrucache,localScope:{}};if(64<ia.depthCounter)throw Error("Exceeded maximum function depth");return aa(ca,ia,sa)})}function la(U){return function(){var T={spatialReference:U.context.spatialReference,console:U.context.console,lrucache:U.context.lrucache,localScope:{},depthCounter:U.context.depthCounter+1,globalScope:U.context.globalScope};
if(64<T.depthCounter)throw Error("Exceeded maximum function depth");return aa(U.definition,T,arguments)}}function ra(U){}Object.defineProperty(q,"__esModule",{value:!0});q.findFunctionCalls=q.referencesFunction=q.referencesMember=q.validateScript=q.extractFieldLiterals=q.executeScript=q.extend=q.functionHelper=void 0;var ta=0,va={};l.registerFunctions(va,E);n.registerFunctions(va,E);y.registerFunctions(va,E);w.registerFunctions(va,E);r.registerFunctions(va,E);v.registerFunctions(va,E);t.registerFunctions(va,
E);va["typeof"]=function(U,T){return E(U,T,function(ca,ia,ea){f.pcCheck(ea,1,1);ca=R(ea[0]);if("Unrecognised Type"===ca)throw Error("Unrecognised Type");return ca})};va.iif=function(U,T){try{f.pcCheck(null===T.arguments?[]:T.arguments,3,3);var ca=G(U,T.arguments[0]);if(!1===f.isBoolean(ca))throw Error("IF Function must have a boolean test condition");var ia=G(U,T.arguments[1]),ea=G(U,T.arguments[2]);return!0===ca?ia:ea}catch(sa){throw sa;}};va.decode=function(U,T){try{if(2>T.arguments.length)throw Error("Missing Parameters");
if(2===T.arguments.length)return G(U,T.arguments[1]);if(0===(T.arguments.length-1)%2)throw Error("Must have a default value result.");var ca=G(U,T.arguments[0]);return V(U,T,1,ca)}catch(ia){throw ia;}};va.when=function(U,T){try{if(3>T.arguments.length)throw Error("Missing Parameters");if(0===T.arguments.length%2)throw Error("Must have a default value result.");var ca=G(U,T.arguments[0]);if(!1===f.isBoolean(ca))throw Error("WHEN needs boolean test conditions");return J(U,T,0,ca)}catch(ia){throw ia;
}};va.top=function(U,T){return E(U,T,function(ca,ia,ea){f.pcCheck(ea,2,2);if(f.isArray(ea[0]))return f.toNumber(ea[1])>=ea[0].length?ea[0].slice(0):ea[0].slice(0,f.toNumber(ea[1]));if(f.isImmutableArray(ea[0]))return f.toNumber(ea[1])>=ea[0].length()?ea[0].slice(0):ea[0].slice(0,f.toNumber(ea[1]));throw Error("Top cannot accept this parameter type");})};va.first=function(U,T){return E(U,T,function(ca,ia,ea){f.pcCheck(ea,1,1);return f.isArray(ea[0])?0===ea[0].length?null:ea[0][0]:f.isImmutableArray(ea[0])?
0===ea[0].length()?null:ea[0].get(0):null})};va.sort=function(U,T){return E(U,T,function(ca,ia,ea){f.pcCheck(ea,1,2);ca=ea[0];f.isImmutableArray(ca)&&(ca=ca.toArray());if(!1===f.isArray(ca))throw Error("Illegal Argument");if(1<ea.length){if(!1===f.isFunctionParameter(ea[1]))throw Error("Illegal Argument");var sa=la(ea[1]);return ca=S(ca,function(Y,da){return sa(Y,da)})}if(0===ca.length)return[];ea={};for(ia=0;ia<ca.length;ia++){var M=R(ca[ia]);""!==M&&(ea[M]=!0)}if(!0===ea.Array||!0===ea.Dictionary||
!0===ea.Feature||!0===ea.Point||!0===ea.Polygon||!0===ea.Polyline||!0===ea.Multipoint||!0===ea.Extent||!0===ea.Function)return ca.slice(0);ia=0;M="";for(var N in ea)ia++,M=N;return ca=1<ia||"String"===M?S(ca,function(Y,da){if(null===Y||void 0===Y||Y===f.voidOperation)return null===da||void 0===da||da===f.voidOperation?0:1;if(null===da||void 0===da||da===f.voidOperation)return-1;Y=f.toString(Y);da=f.toString(da);return Y<da?-1:Y===da?0:1}):"Number"===M?S(ca,function(Y,da){return Y-da}):"Boolean"===
M?S(ca,function(Y,da){return Y===da?0:da?-1:1}):"Date"===M?S(ca,function(Y,da){return da-Y}):ca.slice(0)})};for(var Da in va)va[Da]={value:new f.NativeFunction(va[Da]),valueset:!0,node:null};var ua=function(){};ua.prototype=va;ua.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ua.prototype.pi={value:Math.PI,valueset:!0,node:null};q.functionHelper={fixSpatialReference:f.fixSpatialReference,parseArguments:C,standardFunction:E};q.extend=function(U){for(var T={mode:"sync",compiled:!1,
functions:{},signatures:[],standardFunction:E,evaluateIdentifier:ha,arcadeCustomFunctionHandler:la},ca=0;ca<U.length;ca++)U[ca].registerFunctions(T);for(var ia in T.functions)va[ia]={value:new f.NativeFunction(T.functions[ia]),valueset:!0,node:null},ua.prototype[ia]=va[ia];for(ca=0;ca<T.signatures.length;ca++)e.addFunctionDeclaration(T.signatures[ca],"async")};q.executeScript=function(U,T){var ca=T.spatialReference;if(null===ca||void 0===ca)ca=new I({wkid:102100});var ia=T.vars,ea=T.customfunctions,
sa=new ua;ia||(ia={});ea||(ea={});var M=new g({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});M.immutable=!1;sa.textformatting={value:M,valueset:!0,node:null};for(var N in ea)sa[N]={value:new f.NativeFunction(ea[N]),native:!0,valueset:!0,node:null};for(N in ia)sa[N]=ia[N]&&"esri.Graphic"===ia[N].declaredClass?{value:h.createFromGraphic(ia[N]),valueset:!0,node:null}:{value:ia[N],valueset:!0,node:null};U=G({spatialReference:ca,globalScope:sa,localScope:null,
console:T.console?T.console:ra,lrucache:T.lrucache,depthCounter:1},U.body[0].body);U instanceof f.ReturnResult&&(U=U.value);U instanceof f.ImplicitResult&&(U=U.value);U===f.voidOperation&&(U=null);if(U===f.breakResult)throw Error("Cannot return BREAK");if(U===f.continueResult)throw Error("Cannot return CONTINUE");if(U instanceof k)throw Error("Cannot return FUNCTION");if(U instanceof f.NativeFunction)throw Error("Cannot return FUNCTION");return U};q.extractFieldLiterals=function(U,T){void 0===T&&
(T=!1);return e.findFieldLiterals(U)};q.validateScript=function(U,T){return e.validateScript(U,T,"simple")};q.referencesMember=function(U,T){return e.referencesMember(U,T)};q.referencesFunction=function(U,T){return e.referencesFunction(U,T)};q.findFunctionCalls=function(U){return e.findFunctionCalls(U)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(m,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.referencesFunction=q.referencesMember=
q.validateScript=q.extractFieldLiterals=q.scriptCheck=q.parseScript=void 0;q.parseScript=function(g,h){void 0===h&&(h=[]);g=b.parse("function _() { "+g+"\n}");if(null===g.body||void 0===g.body)throw Error("No formula provided.");if(0===g.body.length)throw Error("No formula provided.");if(0===g.body.length)throw Error("No formula provided.");if("BlockStatement"!==g.body[0].body.type)throw Error("Invalid formula content.");var k=a.validateLanguage(g);if(""!==k)throw Error(k);a.findScriptDependencies(g,
h);return g};q.scriptCheck=function(g,h,k,d,c){var f=[];g="function _() { \n"+g+"\n}";try{var e=b.parse(g,{tolerant:!0,loc:!0,range:!0}),l=e.errors;if(0<l.length)for(var n=0;n<l.length;n++)f.push({line:l[n].lineNumber-2,character:l[n].column,reason:l[n].description});var r=a.checkScript(e,h,k,d,c);for(h=0;h<r.length;h++)r[h].line-=2,r[h].range&&(r[h].range=[r[h][0]-15,r[h][1]-15]),r[h].loc&&(r[h].loc.start.line-=2,r[h].loc.end.line-=2),f.push(r[h])}catch(w){try{if("Unexpected token }"===w.description){var t=
g.split("\n").length;w.lineNumber===t?(w.index=g.length-1,f.push({line:w.lineNumber-4,character:w.column,reason:"Unexpected end of script"})):(w.index=g.length-1,f.push({line:w.lineNumber-2,character:w.column,reason:"Unexpected end of script"}))}else f.push({line:w.lineNumber-2,character:w.column,reason:w.description})}catch(v){}}return f};q.extractFieldLiterals=function(g,h){void 0===h&&(h=!1);return a.findFieldLiterals(g)};q.validateScript=function(g,h,k){return a.validateScript(g,h,k)};q.referencesMember=
function(g,h){return a.referencesMember(g,h)};q.referencesFunction=function(g,h){return a.referencesFunction(g,h)}})},"esri/arcade/lib/esprima":function(){define("require exports ./comment-handler ./parser ./tokenizer ./syntax".split(" "),function(m,q,a,b,g,h){function k(d,c,f){var e=null,l=function(w,v){f&&f(w,v);e&&e.visit(w,v)},n="function"===typeof f?l:null,r=!1;if(c){r="boolean"===typeof c.comment&&c.comment;var t="boolean"===typeof c.attachComment&&c.attachComment;if(r||t)e=new a.CommentHandler,
e.attach=t,c.comment=!0,n=l}d=new b.Parser(d,c,n);c=d.parseScript();r&&e&&(c.comments=e.comments);d.config.tokens&&(c.tokens=d.tokens);d.config.tolerant&&(c.errors=d.errorHandler.errors);return c}Object.defineProperty(q,"__esModule",{value:!0});q.version=q.tokenize=q.parseScript=q.parse=void 0;q.parse=k;q.parseScript=function(d,c,f){c=c||{};c.sourceType="script";return k(d,c,f)};q.tokenize=function(d,c,f){d=new g.Tokenizer(d,c);c=[];try{for(;;){var e=d.getNextToken();if(!e)break;f&&(e=f(e));c.push(e)}}catch(l){d.errorHandler.tolerate(l)}d.errorHandler.tolerant&&
(c.errors=d.errors());return c};Object.defineProperty(q,"Syntax",{enumerable:!0,get:function(){return h.Syntax}});q.version="4.0.0-dev"})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(m,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.CommentHandler=void 0;m=function(){function b(){this.attach=!1;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}b.prototype.insertInnerComments=function(g,h){if(g.type===a.Syntax.BlockStatement&&
0===g.body.length){for(var k=[],d=this.leading.length-1;0<=d;--d){var c=this.leading[d];h.end.offset>=c.start&&(k.unshift(c.comment),this.leading.splice(d,1),this.trailing.splice(d,1))}k.length&&(g.innerComments=k)}};b.prototype.findTrailingComments=function(g){var h=[];if(0<this.trailing.length){for(var k=this.trailing.length-1;0<=k;--k){var d=this.trailing[k];d.start>=g.end.offset&&h.unshift(d.comment)}this.trailing.length=0;return h}(k=this.stack[this.stack.length-1])&&k.node.trailingComments&&
(d=k.node.trailingComments[0])&&d.range[0]>=g.end.offset&&(h=k.node.trailingComments,delete k.node.trailingComments);return h};b.prototype.findLeadingComments=function(g){for(var h=[],k;0<this.stack.length;){var d=this.stack[this.stack.length-1];if(d&&d.start>=g.start.offset)k=d.node,this.stack.pop();else break}if(k){for(var c=(k.leadingComments?k.leadingComments.length:0)-1;0<=c;--c)d=k.leadingComments[c],d.range[1]<=g.start.offset&&(h.unshift(d),k.leadingComments.splice(c,1));k.leadingComments&&
0===k.leadingComments.length&&delete k.leadingComments;return h}for(c=this.leading.length-1;0<=c;--c)d=this.leading[c],d.start<=g.start.offset&&(h.unshift(d.comment),this.leading.splice(c,1));return h};b.prototype.visitNode=function(g,h){if(!(g.type===a.Syntax.Program&&0<g.body.length)){this.insertInnerComments(g,h);var k=this.findTrailingComments(h),d=this.findLeadingComments(h);0<d.length&&(g.leadingComments=d);0<k.length&&(g.trailingComments=k);this.stack.push({node:g,start:h.start.offset})}};
b.prototype.visitComment=function(g,h){var k="L"===g.type[0]?"Line":"Block",d={type:k,value:g.value};g.range&&(d.range=g.range);g.loc&&(d.loc=g.loc);this.comments.push(d);this.attach&&(h={comment:{type:k,value:g.value,range:[h.start.offset,h.end.offset]},start:h.start.offset},g.loc&&(h.comment.loc=g.loc),g.type=k,this.leading.push(h),this.trailing.push(h))};b.prototype.visit=function(g,h){"LineComment"===g.type?this.visitComment(g,h):"BlockComment"===g.type?this.visitComment(g,h):this.attach&&this.visitNode(g,
h)};return b}();q.CommentHandler=m})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.Syntax=void 0;q.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",
ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",
Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement"}})},"esri/arcade/lib/parser":function(){define("require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(m,
q,a,b,g,h,k,d,c){Object.defineProperty(q,"__esModule",{value:!0});q.Parser=void 0;m=function(){function f(e,l,n){void 0===l&&(l={});this.config={range:"boolean"===typeof l.range&&l.range,loc:"boolean"===typeof l.loc&&l.loc,source:null,tokens:"boolean"===typeof l.tokens&&l.tokens,comment:"boolean"===typeof l.comment&&l.comment,tolerant:"boolean"===typeof l.tolerant&&l.tolerant};this.config.loc&&l.source&&null!==l.source&&(this.config.source=String(l.source));this.delegate=n;this.errorHandler=new b.ErrorHandler;
this.errorHandler.tolerant=this.config.tolerant;this.scanner=new k.Scanner(e,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,
end:0};this.hasLineTerminator=!1;this.context={isModule:!1,allowIn:!0,allowStrictDirective:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}
f.prototype.throwError=function(e){for(var l=[],n=1;n<arguments.length;n++)l[n-1]=arguments[n];var r=l.slice();l=e.replace(/%(\d)/g,function(t,w){a.assert(w<r.length,"Message reference must be in range");return r[w]});throw this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,l);};f.prototype.tolerateError=function(e){for(var l=[],n=1;n<arguments.length;n++)l[n-1]=arguments[n];var r=l.slice();l=e.replace(/%(\d)/g,function(t,w){a.assert(w<r.length,"Message reference must be in range");
return r[w]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,l)};f.prototype.unexpectedTokenError=function(e,l){var n=l||g.Messages.UnexpectedToken;e?(l||(n=2===e.type?g.Messages.UnexpectedEOS:3===e.type?g.Messages.UnexpectedIdentifier:6===e.type?g.Messages.UnexpectedNumber:8===e.type?g.Messages.UnexpectedString:10===e.type?g.Messages.UnexpectedTemplate:g.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?n=g.Messages.UnexpectedReserved:
this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(n=g.Messages.StrictReservedWord))),l=e.value):l="ILLEGAL";n=n.replace("%0",l);if(e&&"number"===typeof e.lineNumber){l=e.start;var r=e.lineNumber;e=e.start-(this.lastMarker.index-this.lastMarker.column)+1;return this.errorHandler.createError(l,r,e,n)}l=this.lastMarker.index;r=this.lastMarker.line;e=this.lastMarker.column+1;return this.errorHandler.createError(l,r,e,n)};f.prototype.throwUnexpectedToken=function(e,l){throw this.unexpectedTokenError(e,
l);};f.prototype.tolerateUnexpectedToken=function(e,l){this.errorHandler.tolerate(this.unexpectedTokenError(e,l))};f.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(0<e.length&&this.delegate)for(var l=0;l<e.length;++l){var n=e[l],r={type:n.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(n.slice[0],n.slice[1])};this.config.range&&(r.range=n.range);this.config.loc&&(r.loc=n.loc);this.delegate(r,{start:{line:n.loc.start.line,column:n.loc.start.column,
offset:n.range[0]},end:{line:n.loc.end.line,column:n.loc.end.column,offset:n.range[1]}})}}else this.scanner.scanComments()};f.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)};f.prototype.convertToken=function(e){var l={type:c.TokenName[e.type],value:this.getTokenRaw(e)};this.config.range&&(l.range=[e.start,e.end]);this.config.loc&&(l.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-
this.scanner.lineStart}});9===e.type&&(l.regex={pattern:e.pattern,flags:e.flags});return l};f.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);
var l=this.scanner.lex();this.hasLineTerminator=e.lineNumber!==l.lineNumber;l&&this.context.strict&&3===l.type&&this.scanner.isStrictModeReservedWord(l.value)&&(l.type=4);this.lookahead=l;this.config.tokens&&2!==l.type&&this.tokens.push(this.convertToken(l));return e};f.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e)));this.lookahead=e;this.nextToken();return e};f.prototype.createNode=
function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};f.prototype.startNode=function(e,l){void 0===l&&(l=0);var n=e.start-e.lineStart,r=e.lineNumber;0>n&&(n+=l,r--);return{index:e.start,line:r,column:n}};f.prototype.finalize=function(e,l){this.config.range&&(l.range=[e.index,this.lastMarker.index]);this.config.loc&&(l.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(l.loc.source=
this.config.source));this.delegate&&this.delegate(l,{start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});return l};f.prototype.expect=function(e){var l=this.nextToken();7===l.type&&l.value===e||this.throwUnexpectedToken(l)};f.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;7===e.type&&","===e.value?this.nextToken():7===e.type&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):
this.tolerateUnexpectedToken(e,g.Messages.UnexpectedToken)}else this.expect(",")};f.prototype.expectKeyword=function(e){var l=this.nextToken();4===l.type&&l.value.toLowerCase()===e.toLowerCase()||this.throwUnexpectedToken(l)};f.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e};f.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===e.toLowerCase()};f.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&
this.lookahead.value===e};f.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var e=this.lookahead.value;return"\x3d"===e||"*\x3d"===e||"**\x3d"===e||"/\x3d"===e||"%\x3d"===e||"+\x3d"===e||"-\x3d"===e||"\x3c\x3c\x3d"===e||"\x3e\x3e\x3d"===e||"\x3e\x3e\x3e\x3d"===e||"\x26\x3d"===e||"^\x3d"===e||"|\x3d"===e};f.prototype.isolateCoverGrammar=function(e){var l=this.context.isBindingElement,n=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=
!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;e=e.call(this);null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=l;this.context.isAssignmentTarget=n;this.context.firstCoverInitializedNameError=r;return e};f.prototype.inheritCoverGrammar=function(e){var l=this.context.isBindingElement,n=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;
this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;e=e.call(this);this.context.isBindingElement=this.context.isBindingElement&&l;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&n;this.context.firstCoverInitializedNameError=r||this.context.firstCoverInitializedNameError;return e};f.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||
this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)};f.prototype.parsePrimaryExpression=function(){var e=this.createNode();switch(this.lookahead.type){case 3:e=this.finalize(e,new h.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,g.Messages.StrictOctalLiteral);this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;var l=this.nextToken();var n=this.getTokenRaw(l);e=this.finalize(e,new h.Literal(l.value,n));break;case 1:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;l=this.nextToken();n=this.getTokenRaw(l);e=this.finalize(e,new h.Literal("true"===l.value.toLowerCase(),n));break;case 5:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;l=this.nextToken();n=this.getTokenRaw(l);e=this.finalize(e,new h.Literal(null,n));break;case 10:e=this.parseTemplateLiteral();
break;case 7:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;e=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;e=this.matchKeyword("function")?this.parseFunctionExpression():this.throwUnexpectedToken(this.nextToken());
break;default:e=this.throwUnexpectedToken(this.nextToken())}return e};f.prototype.parseArrayInitializer=function(){var e=this.createNode(),l=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),l.push(null)):(l.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(e,new h.ArrayExpression(l))};f.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1;this.context.isBindingElement=
!1;var l=this.context.strict,n=this.context.allowStrictDirective;this.context.allowStrictDirective=e.simple;var r=this.isolateCoverGrammar(this.parseFunctionSourceElements);this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message);this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message);this.context.strict=l;this.context.allowStrictDirective=n;return r};f.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),l=this.parseFormalParameters(),
n=this.parsePropertyMethod(l);return this.finalize(e,new h.FunctionExpression(null,l.params,n,!1))};f.prototype.parseObjectPropertyKey=function(){var e=this.createNode(),l=this.nextToken();switch(l.type){case 8:case 6:this.context.strict&&l.octal&&this.tolerateUnexpectedToken(l,g.Messages.StrictOctalLiteral);var n=this.getTokenRaw(l);e=this.finalize(e,new h.Literal(l.value,n));break;case 3:case 1:case 5:case 4:e=this.finalize(e,new h.Identifier(l.value));break;case 7:"["===l.value?(e=this.isolateCoverGrammar(this.parseAssignmentExpression),
this.expect("]")):e=this.throwUnexpectedToken(l);break;default:e=this.throwUnexpectedToken(l)}return e};f.prototype.isPropertyKey=function(e,l){return e.type===d.Syntax.Identifier&&e.name===l||e.type===d.Syntax.Literal&&e.value===l};f.prototype.parseObjectProperty=function(e){var l=this.createNode(),n=this.lookahead,r=null,t=null,w=!1,v=!1,y=!1,x=!1;if(3===n.type){var B=n.value;this.nextToken();w=this.match("[");r=(x=!this.hasLineTerminator&&"async"===B&&!this.match(":")&&!this.match("(")&&!this.match("*")&&
!this.match(","))?this.parseObjectPropertyKey():this.finalize(l,new h.Identifier(B))}else this.match("*")?this.nextToken():(w=this.match("["),r=this.parseObjectPropertyKey());r||this.throwUnexpectedToken(this.lookahead);this.match(":")&&!x?(!w&&this.isPropertyKey(r,"__proto__")&&(e.value&&this.tolerateError(g.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),t=this.inheritCoverGrammar(this.parseAssignmentExpression)):this.match("(")?(t=this.parsePropertyMethodFunction(),v=!0):3===n.type?
(B=this.finalize(l,new h.Identifier(n.value)),this.match("\x3d")?(this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),y=!0,e=this.isolateCoverGrammar(this.parseAssignmentExpression),t=this.finalize(l,new h.AssignmentPattern(B,e))):(y=!0,t=B)):this.throwUnexpectedToken(this.nextToken());return this.finalize(l,new h.Property("init",r,w,t,v,y))};f.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var l=[],n={value:!1};!this.match("}");)l.push(this.parseObjectProperty(n)),
this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(e,new h.ObjectExpression(l))};f.prototype.parseTemplateHead=function(){a.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),l=this.nextToken();return this.finalize(e,new h.TemplateElement({raw:l.value,cooked:l.cooked},l.tail))};f.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),l=this.nextToken();
return this.finalize(e,new h.TemplateElement({raw:l.value,cooked:l.cooked},l.tail))};f.prototype.parseTemplateLiteral=function(){var e=this.createNode(),l=[],n=[],r=this.parseTemplateHead();for(n.push(r);!r.tail;)l.push(this.parseExpression()),r=this.parseTemplateElement(),n.push(r);return this.finalize(e,new h.TemplateLiteral(n,l))};f.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case d.Syntax.ArrayExpression:e.type=d.Syntax.ArrayPattern;for(var l=0;l<e.elements.length;l++)null!==
e.elements[l]&&this.reinterpretExpressionAsPattern(e.elements[l]);break;case d.Syntax.ObjectExpression:e.type=d.Syntax.ObjectPattern;for(l=0;l<e.properties.length;l++)this.reinterpretExpressionAsPattern(e.properties[l].value);break;case d.Syntax.AssignmentExpression:e.type=d.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}};f.prototype.parseGroupExpression=function(){this.expect("(");if(this.match(")")){this.nextToken();this.match("\x3d\x3e")||this.expect("\x3d\x3e");
var e={type:"ArrowParameterPlaceHolder",params:[],async:!1}}else{var l=this.lookahead,n=!1;this.context.isBindingElement=!0;e=this.inheritCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var r=[];this.context.isAssignmentTarget=!1;for(r.push(e);2!==this.lookahead.type&&this.match(",");){this.nextToken();if(this.match(")")){this.nextToken();for(n=0;n<r.length;n++)this.reinterpretExpressionAsPattern(r[n]);n=!0;e={type:"ArrowParameterPlaceHolder",params:r,async:!1}}else r.push(this.inheritCoverGrammar(this.parseAssignmentExpression));
if(n)break}n||(e=this.finalize(this.startNode(l),new h.SequenceExpression(r)))}if(!n){this.expect(")");if(this.match("\x3d\x3e")&&(e.type===d.Syntax.Identifier&&"yield"===e.name&&(n=!0,e={type:"ArrowParameterPlaceHolder",params:[e],async:!1}),!n)){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead);if(e.type===d.Syntax.SequenceExpression)for(n=0;n<e.expressions.length;n++)this.reinterpretExpressionAsPattern(e.expressions[n]);else this.reinterpretExpressionAsPattern(e);e={type:"ArrowParameterPlaceHolder",
params:e.type===d.Syntax.SequenceExpression?e.expressions:[e],async:!1}}this.context.isBindingElement=!1}}return e};f.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var l=this.isolateCoverGrammar(this.parseAssignmentExpression);e.push(l);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return e};f.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type};f.prototype.parseIdentifierName=
function(){var e=this.createNode(),l=this.nextToken();this.isIdentifierName(l)||this.throwUnexpectedToken(l);return this.finalize(e,new h.Identifier(l.value))};f.prototype.parseLeftHandSideExpressionAllowCall=function(){var e=this.lookahead,l=this.context.allowIn;this.context.allowIn=!0;var n;for(n=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect(".");var r=this.parseIdentifierName();n=this.finalize(this.startNode(e),
new h.StaticMemberExpression(n,r))}else if(this.match("("))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1,r=this.parseArguments(),n=this.finalize(this.startNode(e),new h.CallExpression(n,r));else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),r=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),n=this.finalize(this.startNode(e),new h.ComputedMemberExpression(n,r));else break;this.context.allowIn=l;return n};
f.prototype.parseLeftHandSideExpression=function(){a.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),l=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var n=this.isolateCoverGrammar(this.parseExpression);this.expect("]");l=this.finalize(e,new h.ComputedMemberExpression(l,n))}else if(this.match("."))this.context.isBindingElement=
!1,this.context.isAssignmentTarget=!0,this.expect("."),n=this.parseIdentifierName(),l=this.finalize(e,new h.StaticMemberExpression(l,n));else break;return l};f.prototype.parseUpdateExpression=function(){var e=this.lookahead;if(this.match("++")||this.match("--")){e=this.startNode(e);var l=this.nextToken();var n=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.strict&&n.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(g.Messages.StrictLHSPrefix);
this.context.isAssignmentTarget||this.tolerateError(g.Messages.InvalidLHSInAssignment);n=this.finalize(e,new h.UpdateExpression(l.value,n,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else n=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||7!==this.lookahead.type||!this.match("++")&&!this.match("--")||(this.context.strict&&n.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(g.Messages.StrictLHSPostfix),
this.context.isAssignmentTarget||this.tolerateError(g.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,l=this.nextToken().value,n=this.finalize(this.startNode(e),new h.UpdateExpression(l,n,!1)));return n};f.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var e=this.startNode(this.lookahead),l=this.nextToken();
var n=this.inheritCoverGrammar(this.parseUnaryExpression);n=this.finalize(e,new h.UnaryExpression(l.value,n));this.context.strict&&"delete"===n.operator&&n.argument.type===d.Syntax.Identifier&&this.tolerateError(g.Messages.StrictDelete);this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else n=this.parseUpdateExpression();return n};f.prototype.parseExponentiationExpression=function(){var e=this.lookahead,l=this.inheritCoverGrammar(this.parseUnaryExpression);if(l.type!==d.Syntax.UnaryExpression&&
this.match("**")){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var n=this.isolateCoverGrammar(this.parseExponentiationExpression);l=this.finalize(this.startNode(e),new h.BinaryExpression("**",l,n))}return l};f.prototype.binaryPrecedence=function(e){var l=e.value;return 7===e.type?this.operatorPrecedence[l]||0:4===e.type?"instanceof"===l||this.context.allowIn&&"in"===l?7:0:0};f.prototype.parseBinaryExpression=function(){var e=this.lookahead,l=this.inheritCoverGrammar(this.parseExponentiationExpression),
n=this.lookahead,r=this.binaryPrecedence(n);if(0<r){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;e=[e,this.lookahead];var t=this.isolateCoverGrammar(this.parseExponentiationExpression);n=[l,n.value,t];for(var w=[r];;){r=this.binaryPrecedence(this.lookahead);if(0>=r)break;for(;2<n.length&&r<=w[w.length-1];){t=n.pop();var v=n.pop();w.pop();l=n.pop();e.pop();var y=e[e.length-1],x=this.startNode(y,y.lineStart);n.push(this.finalize(x,new h.BinaryExpression(v,l,t)))}n.push(this.nextToken().value);
w.push(r);e.push(this.lookahead);n.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}r=n.length-1;l=n[r];for(v=e.pop();1<r;)y=e.pop(),x=this.startNode(y,v&&v.lineStart),v=n[r-1],l=this.finalize(x,new h.BinaryExpression(v,n[r-2],l)),r-=2,v=y}return l};f.prototype.parseConditionalExpression=function(){var e=this.lookahead,l=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var n=this.context.allowIn;this.context.allowIn=!0;var r=this.isolateCoverGrammar(this.parseAssignmentExpression);
this.context.allowIn=n;this.expect(":");n=this.isolateCoverGrammar(this.parseAssignmentExpression);l=this.finalize(this.startNode(e),new h.ConditionalExpression(l,r,n));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}return l};f.prototype.checkPatternParam=function(e,l){switch(l.type){case d.Syntax.Identifier:this.validateParam(e,l,l.name);break;case d.Syntax.AssignmentPattern:this.checkPatternParam(e,l.left);break;case d.Syntax.ArrayPattern:for(var n=0;n<l.elements.length;n++)null!==
l.elements[n]&&this.checkPatternParam(e,l.elements[n]);break;case d.Syntax.ObjectPattern:for(n=0;n<l.properties.length;n++)this.checkPatternParam(e,l.properties[n].value)}e.simple=e.simple&&l instanceof h.Identifier};f.prototype.reinterpretAsCoverFormalsList=function(e){var l=[e],n={simple:!0,paramSet:{}};switch(e.type){case d.Syntax.Identifier:break;default:return null}for(e=0;e<l.length;++e){var r=l[e];this.checkPatternParam(n,r);l[e]=r}n.message===g.Messages.StrictParamDupe&&this.throwUnexpectedToken(this.context.strict?
n.stricted:n.firstRestricted,n.message);return{simple:n.simple,params:l,stricted:n.stricted,firstRestricted:n.firstRestricted,message:n.message}};f.prototype.parseAssignmentExpression=function(){var e=this.lookahead,l=e;var n=this.parseConditionalExpression();if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(g.Messages.InvalidLHSInAssignment);if(this.context.strict&&n.type===d.Syntax.Identifier){var r=n;this.scanner.isRestrictedWord(r.name)&&this.tolerateUnexpectedToken(l,
g.Messages.StrictLHSAssignment);this.scanner.isStrictModeReservedWord(r.name)&&this.tolerateUnexpectedToken(l,g.Messages.StrictReservedWord)}this.match("\x3d")?this.reinterpretExpressionAsPattern(n):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);l=this.nextToken();l=l.value;r=this.isolateCoverGrammar(this.parseAssignmentExpression);n=this.finalize(this.startNode(e),new h.AssignmentExpression(l,n,r));this.context.firstCoverInitializedNameError=null}return n};f.prototype.parseExpression=
function(){var e=this.lookahead,l=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var n=[];for(n.push(l);2!==this.lookahead.type&&this.match(",");)this.nextToken(),n.push(this.isolateCoverGrammar(this.parseAssignmentExpression));l=this.finalize(this.startNode(e),new h.SequenceExpression(n))}return l};f.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(4===this.lookahead.type)switch(this.lookahead.value){case "function":var e=
this.parseFunctionDeclaration();break;default:e=this.parseStatement()}else e=this.parseStatement();return e};f.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var l=[];!this.match("}");)l.push(this.parseStatementListItem());this.expect("}");return this.finalize(e,new h.BlockStatement(l))};f.prototype.parseBlockOrObjectInitialiser=function(){var e=this.createNode();this.expect("{");if(3===this.lookahead.type||8===this.lookahead.type){var l=this.scanner.saveState();this.scanner.scanComments();
var n=this.scanner.lex();this.scanner.restoreState(l);if(7===n.type&&":"===n.value){l=[];for(n={value:!1};!this.match("}");)l.push(this.parseObjectProperty(n)),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(e,new h.ObjectExpression(l))}}for(l=[];!this.match("}");)l.push(this.parseStatementListItem());this.expect("}");return this.finalize(e,new h.BlockStatement(l))};f.prototype.parseLexicalBinding=function(e,l){var n=this.createNode();e=this.parsePattern([],e);this.context.strict&&
e.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(g.Messages.StrictVarName);var r=null;if(!l.inFor&&e.type!==d.Syntax.Identifier||this.match("\x3d"))this.expect("\x3d"),r=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize(n,new h.VariableDeclarator(e,r))};f.prototype.parseBindingList=function(e,l){for(var n=[this.parseLexicalBinding(e,l)];this.match(",");)this.nextToken(),n.push(this.parseLexicalBinding(e,l));return n};f.prototype.parseArrayPattern=
function(e,l){var n=this.createNode();this.expect("[");for(var r=[];!this.match("]");)this.match(",")?(this.nextToken(),r.push(null)):(r.push(this.parsePatternWithDefault(e,l)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(n,new h.ArrayPattern(r))};f.prototype.parsePropertyPattern=function(e,l){var n=this.createNode(),r=!1,t=!1;if(3===this.lookahead.type){var w=this.lookahead;var v=this.parseVariableIdentifier();var y=this.finalize(n,new h.Identifier(w.value));this.match("\x3d")?
(e.push(w),t=!0,this.nextToken(),e=this.parseAssignmentExpression(),w=this.finalize(this.startNode(w),new h.AssignmentPattern(y,e))):this.match(":")?(this.expect(":"),w=this.parsePatternWithDefault(e,l)):(e.push(w),t=!0,w=y)}else r=this.match("["),v=this.parseObjectPropertyKey(),this.expect(":"),w=this.parsePatternWithDefault(e,l);return this.finalize(n,new h.Property("init",v,r,w,!1,t))};f.prototype.parseObjectPattern=function(e,l){var n=this.createNode(),r=[];for(this.expect("{");!this.match("}");)r.push(this.parsePropertyPattern(e,
l)),this.match("}")||this.expect(",");this.expect("}");return this.finalize(n,new h.ObjectPattern(r))};f.prototype.parsePattern=function(e,l){this.match("[")?e=this.parseArrayPattern(e,l):this.match("{")?e=this.parseObjectPattern(e,l):(!this.matchKeyword("let")||"const"!==l&&"let"!==l||this.tolerateUnexpectedToken(this.lookahead,g.Messages.LetInLexicalBinding),e.push(this.lookahead),e=this.parseVariableIdentifier(l));return e};f.prototype.parsePatternWithDefault=function(e,l){var n=this.lookahead;
e=this.parsePattern(e,l);this.match("\x3d")&&(this.nextToken(),l=this.isolateCoverGrammar(this.parseAssignmentExpression),e=this.finalize(this.startNode(n),new h.AssignmentPattern(e,l)));return e};f.prototype.parseVariableIdentifier=function(e){var l=this.createNode(),n=this.nextToken();3!==n.type&&(this.context.strict&&4===n.type&&this.scanner.isStrictModeReservedWord(n.value)?this.tolerateUnexpectedToken(n,g.Messages.StrictReservedWord):(this.context.strict||"let"!==n.value||"var"!==e)&&this.throwUnexpectedToken(n));
return this.finalize(l,new h.Identifier(n.value))};f.prototype.parseVariableDeclaration=function(e){var l=this.createNode(),n=this.parsePattern([],"var");this.context.strict&&n.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(g.Messages.StrictVarName);var r=null;this.match("\x3d")?(this.nextToken(),r=this.isolateCoverGrammar(this.parseAssignmentExpression)):n.type===d.Syntax.Identifier||e.inFor||this.expect("\x3d");return this.finalize(l,new h.VariableDeclarator(n,
r))};f.prototype.parseVariableDeclarationList=function(e){e={inFor:e.inFor};var l=[];for(l.push(this.parseVariableDeclaration(e));this.match(",");)this.nextToken(),l.push(this.parseVariableDeclaration(e));return l};f.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var l=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(e,new h.VariableDeclaration(l,"var"))};f.prototype.parseEmptyStatement=function(){var e=this.createNode();
this.expect(";");return this.finalize(e,new h.EmptyStatement)};f.prototype.parseExpressionStatement=function(){var e=this.createNode(),l=this.parseExpression();this.consumeSemicolon();return this.finalize(e,new h.ExpressionStatement(l))};f.prototype.parseIfClause=function(){this.context.strict&&this.matchKeyword("function")&&this.tolerateError(g.Messages.StrictFunction);return this.parseStatement(!0)};f.prototype.parseIfStatement=function(){var e=this.createNode(),l=null;this.expectKeyword("if");
this.expect("(");var n=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var r=this.finalize(this.createNode(),new h.EmptyStatement)}else this.expect(")"),r=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),l=this.parseIfClause());return this.finalize(e,new h.IfStatement(n,r,l))};f.prototype.parseForStatement=function(){var e=null,l=null,n=null,r=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();
else if(this.matchKeyword("var")){e=this.createNode();this.nextToken();var t=this.context.allowIn;this.context.allowIn=!1;var w=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=t;if(1===w.length&&this.matchKeyword("in")){var v=w[0];v.init&&(v.id.type===d.Syntax.ArrayPattern||v.id.type===d.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(g.Messages.ForInOfLoopInitializer,"for-in");e=this.finalize(e,new h.VariableDeclaration(w,"var"));this.nextToken();v=e;var y=this.parseExpression();
e=null}else 1===w.length&&null===w[0].init&&this.matchContextualKeyword("of")?(e=this.finalize(e,new h.VariableDeclaration(w,"var")),this.nextToken(),v=e,y=this.parseAssignmentExpression(),e=null):(e=this.finalize(e,new h.VariableDeclaration(w,"var")),this.expect(";"))}else{w=this.lookahead;var x=this.context.isBindingElement,B=this.context.isAssignmentTarget,p=this.context.firstCoverInitializedNameError;t=this.context.allowIn;this.context.allowIn=!1;e=this.inheritCoverGrammar(this.parseAssignmentExpression);
this.context.allowIn=t;if(this.matchKeyword("in"))this.context.isAssignmentTarget&&e.type!==d.Syntax.AssignmentExpression||this.tolerateError(g.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(e),v=e,y=this.parseExpression(),e=null;else{this.context.isBindingElement=x;this.context.isAssignmentTarget=B;this.context.firstCoverInitializedNameError=p;if(this.match(",")){for(e=[e];this.match(",");)this.nextToken(),e.push(this.isolateCoverGrammar(this.parseAssignmentExpression));
e=this.finalize(this.startNode(w),new h.SequenceExpression(e))}this.expect(";")}}"undefined"===typeof v&&(this.match(";")||(l=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(n=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),t=this.finalize(this.createNode(),new h.EmptyStatement)):(this.expect(")"),w=this.context.inIteration,this.context.inIteration=!0,t=this.isolateCoverGrammar(this.parseStatementBlockAllowed),
this.context.inIteration=w);return"undefined"===typeof v?this.finalize(r,new h.ForStatement(e,l,n,t)):this.finalize(r,new h.ForInStatement(v,y,t))};f.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var l=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var n=this.parseVariableIdentifier();l=n;Object.prototype.hasOwnProperty.call(this.context.labelSet,"$"+n.name)||this.throwError(g.Messages.UnknownLabel,n.name)}this.consumeSemicolon();null!==
l||this.context.inIteration||this.throwError(g.Messages.IllegalContinue);return this.finalize(e,new h.ContinueStatement(l))};f.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var l=null;3!==this.lookahead.type||this.hasLineTerminator||(l=this.parseVariableIdentifier(),Object.prototype.hasOwnProperty.call(this.context.labelSet,"$"+l.name)||this.throwError(g.Messages.UnknownLabel,l.name));this.consumeSemicolon();null!==l||this.context.inIteration||this.context.inSwitch||
this.throwError(g.Messages.IllegalBreak);return this.finalize(e,new h.BreakStatement(l))};f.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(g.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var l=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();this.consumeSemicolon();return this.finalize(e,new h.ReturnStatement(l))};
f.prototype.parseLabelledStatement=function(){var e=this.createNode(),l=this.parseExpression();this.consumeSemicolon();l=new h.ExpressionStatement(l);return this.finalize(e,l)};f.prototype.parseStatementBlockAllowed=function(){return this.parseStatement(!0)};f.prototype.parseStatement=function(e){void 0===e&&(e=!1);switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:e=this.parseExpressionStatement();break;case 7:var l=this.lookahead.value;e="{"===l?e?this.parseBlockOrObjectInitialiser():
this.parseObjectInitializer():"("===l?this.parseExpressionStatement():";"===l?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:e=this.parseLabelledStatement();break;case 4:switch(this.lookahead.value.toLowerCase()){case "break":e=this.parseBreakStatement();break;case "continue":e=this.parseContinueStatement();break;case "for":e=this.parseForStatement();break;case "function":e=this.parseFunctionDeclaration();break;case "if":e=this.parseIfStatement();break;case "return":e=this.parseReturnStatement();
break;case "var":e=this.parseVariableStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e};f.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var l=[],n=this.context.labelSet,r=this.context.inIteration,t=this.context.inSwitch,w=this.context.inFunctionBody;this.context.labelSet={};this.context.inIteration=!1;this.context.inSwitch=!1;for(this.context.inFunctionBody=!0;2!==this.lookahead.type&&
!this.match("}");)l.push(this.parseStatementListItem());this.expect("}");this.context.labelSet=n;this.context.inIteration=r;this.context.inSwitch=t;this.context.inFunctionBody=w;return this.finalize(e,new h.BlockStatement(l))};f.prototype.validateParam=function(e,l,n){var r="$"+n;this.context.strict?(this.scanner.isRestrictedWord(n)&&(e.stricted=l,e.message=g.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=l,e.message=g.Messages.StrictParamDupe)):e.firstRestricted||
(this.scanner.isRestrictedWord(n)?(e.firstRestricted=l,e.message=g.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(n)?(e.firstRestricted=l,e.message=g.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=l,e.message=g.Messages.StrictParamDupe));"function"===typeof Object.defineProperty?Object.defineProperty(e.paramSet,r,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[r]=!0};f.prototype.parseFormalParameter=function(e){for(var l=
[],n=this.parsePatternWithDefault(l),r=0;r<l.length;r++)this.validateParam(e,l[r],l[r].value);e.simple=e.simple&&n instanceof h.Identifier;e.params.push(n)};f.prototype.parseFormalParameters=function(e){e={simple:!0,params:[],firstRestricted:e};this.expect("(");if(!this.match(")"))for(e.paramSet={};2!==this.lookahead.type;){this.parseFormalParameter(e);if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return{simple:e.simple,params:e.params,stricted:e.stricted,firstRestricted:e.firstRestricted,
message:e.message}};f.prototype.parseFunctionDeclaration=function(e){var l=this.createNode();this.expectKeyword("function");var n=null,r=null;if(!e||!this.match("("))if(e=this.lookahead,n=this.parseVariableIdentifier(),this.context.strict)this.scanner.isRestrictedWord(e.value)&&this.tolerateUnexpectedToken(e,g.Messages.StrictFunctionName);else if(this.scanner.isRestrictedWord(e.value)){r=e;var t=g.Messages.StrictFunctionName}else this.scanner.isStrictModeReservedWord(e.value)&&(r=e,t=g.Messages.StrictReservedWord);
var w=this.parseFormalParameters(r);e=w.params;var v=w.stricted;r=w.firstRestricted;w.message&&(t=w.message);var y=this.context.strict,x=this.context.allowStrictDirective;this.context.allowStrictDirective=w.simple;w=this.parseFunctionSourceElements();this.context.strict&&r&&this.throwUnexpectedToken(r,t);this.context.strict&&v&&this.tolerateUnexpectedToken(v,t);this.context.strict=y;this.context.allowStrictDirective=x;return this.finalize(l,new h.FunctionDeclaration(n,e,w,!1))};f.prototype.parseFunctionExpression=
function(){var e=this.createNode();this.expectKeyword("function");var l=null;if(!this.match("(")){var n=this.lookahead;l=this.parseVariableIdentifier();if(this.context.strict)this.scanner.isRestrictedWord(n.value)&&this.tolerateUnexpectedToken(n,g.Messages.StrictFunctionName);else if(this.scanner.isRestrictedWord(n.value)){var r=n;var t=g.Messages.StrictFunctionName}else this.scanner.isStrictModeReservedWord(n.value)&&(r=n,t=g.Messages.StrictReservedWord)}var w=this.parseFormalParameters(r);n=w.params;
var v=w.stricted;r=w.firstRestricted;w.message&&(t=w.message);var y=this.context.strict,x=this.context.allowStrictDirective;this.context.allowStrictDirective=w.simple;w=this.parseFunctionSourceElements();this.context.strict&&r&&this.throwUnexpectedToken(r,t);this.context.strict&&v&&this.tolerateUnexpectedToken(v,t);this.context.strict=y;this.context.allowStrictDirective=x;return this.finalize(e,new h.FunctionExpression(l,n,w,!1))};f.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;
case 7:return"["===e.value}return!1};f.prototype.isStartOfExpression=function(){var e=!0,l=this.lookahead.value;switch(this.lookahead.type){case 7:e="["===l||"("===l||"{"===l||"+"===l||"-"===l||"!"===l||"~"===l||"++"===l||"--"===l||"/"===l||"/\x3d"===l;break;case 4:e="class"===l||"delete"===l||"function"===l||"let"===l||"new"===l||"super"===l||"this"===l||"typeof"===l||"void"===l||"yield"===l}return e};f.prototype.parseScript=function(){for(var e=this.createNode(),l=[];2!==this.lookahead.type;)l.push(this.parseStatementListItem());
return this.finalize(e,new h.Script(l))};return f}();q.Parser=m})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.assert=void 0;q.assert=function(a,b){if(!a)throw Error("ASSERT: "+b);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.ErrorHandler=void 0;m=function(){function a(){this.errors=[];this.tolerant=!1}a.prototype.recordError=
function(b){this.errors.push(b)};a.prototype.tolerate=function(b){if(this.tolerant)this.recordError(b);else throw b;};a.prototype.constructError=function(b,g){b=Error(b);try{throw b;}catch(h){Object.create&&Object.defineProperty&&(b=Object.create(h),Object.defineProperty(b,"column",{value:g}))}return b};a.prototype.createError=function(b,g,h,k){h=this.constructError("Line "+g+": "+k,h);h.index=b;h.lineNumber=g;h.description=k;return h};a.prototype.throwError=function(b,g,h,k){throw this.createError(b,
g,h,k);};a.prototype.tolerateError=function(b,g,h,k){b=this.createError(b,g,h,k);if(this.tolerant)this.recordError(b);else throw b;};return a}();q.ErrorHandler=m})},"esri/arcade/lib/messages":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.Messages=void 0;q.Messages={BadImportCallArity:"Unexpected token",BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",
ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token \x3d",DefaultRestProperty:"Unexpected token \x3d",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",
GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",
InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",
NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",PropertyAfterRestProperty:"Unexpected token",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",
StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",
UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}})},"esri/arcade/lib/nodes":function(){define(["require","exports","./syntax"],function(m,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.VariableDeclarator=q.VariableDeclaration=q.UpdateExpression=q.UnaryExpression=q.TemplateLiteral=q.TemplateElement=q.StaticMemberExpression=q.SequenceExpression=q.Script=q.ReturnStatement=
q.Property=q.ObjectPattern=q.ObjectExpression=q.Module=q.MethodDefinition=q.Literal=q.IfStatement=q.Identifier=q.FunctionExpression=q.FunctionDeclaration=q.ForStatement=q.ForInStatement=q.ExpressionStatement=q.EmptyStatement=q.ContinueStatement=q.ConditionalExpression=q.ComputedMemberExpression=q.CallExpression=q.BreakStatement=q.BlockStatement=q.BinaryExpression=q.AssignmentPattern=q.AssignmentExpression=q.ArrayPattern=q.ArrayExpression=void 0;m=function(){return function(b){this.type=a.Syntax.ArrayExpression;
this.elements=b}}();q.ArrayExpression=m;m=function(){return function(b){this.type=a.Syntax.ArrayPattern;this.elements=b}}();q.ArrayPattern=m;m=function(){return function(b,g,h){this.type=a.Syntax.AssignmentExpression;this.operator=b;this.left=g;this.right=h}}();q.AssignmentExpression=m;m=function(){return function(b,g){this.type=a.Syntax.AssignmentPattern;this.left=b;this.right=g}}();q.AssignmentPattern=m;m=function(){return function(b,g,h){this.type="||"===b||"\x26\x26"===b?a.Syntax.LogicalExpression:
a.Syntax.BinaryExpression;this.operator=b;this.left=g;this.right=h}}();q.BinaryExpression=m;m=function(){return function(b){this.type=a.Syntax.BlockStatement;this.body=b}}();q.BlockStatement=m;m=function(){return function(b){this.type=a.Syntax.BreakStatement;this.label=b}}();q.BreakStatement=m;m=function(){return function(b,g){this.type=a.Syntax.CallExpression;this.callee=b;this.arguments=g}}();q.CallExpression=m;m=function(){return function(b,g){this.type=a.Syntax.MemberExpression;this.computed=
!0;this.object=b;this.property=g}}();q.ComputedMemberExpression=m;m=function(){return function(b,g,h){this.type=a.Syntax.ConditionalExpression;this.test=b;this.consequent=g;this.alternate=h}}();q.ConditionalExpression=m;m=function(){return function(b){this.type=a.Syntax.ContinueStatement;this.label=b}}();q.ContinueStatement=m;m=function(){return function(){this.type=a.Syntax.EmptyStatement}}();q.EmptyStatement=m;m=function(){return function(b){this.type=a.Syntax.ExpressionStatement;this.expression=
b}}();q.ExpressionStatement=m;m=function(){return function(b,g,h){this.type=a.Syntax.ForInStatement;this.left=b;this.right=g;this.body=h;this.each=!1}}();q.ForInStatement=m;m=function(){return function(b,g,h,k){this.type=a.Syntax.ForStatement;this.init=b;this.test=g;this.update=h;this.body=k}}();q.ForStatement=m;m=function(){return function(b,g,h,k){this.type=a.Syntax.FunctionDeclaration;this.id=b;this.params=g;this.body=h;this.generator=k;this.async=this.expression=!1}}();q.FunctionDeclaration=m;
m=function(){return function(b,g,h,k){this.type=a.Syntax.FunctionExpression;this.id=b;this.params=g;this.body=h;this.generator=k;this.async=this.expression=!1}}();q.FunctionExpression=m;m=function(){return function(b){this.type=a.Syntax.Identifier;this.name=b}}();q.Identifier=m;m=function(){return function(b,g,h){this.type=a.Syntax.IfStatement;this.test=b;this.consequent=g;this.alternate=h}}();q.IfStatement=m;m=function(){return function(b,g){this.type=a.Syntax.Literal;this.value=b;this.raw=g}}();
q.Literal=m;m=function(){return function(b,g,h,k,d){this.type=a.Syntax.MethodDefinition;this.key=b;this.computed=g;this.value=h;this.kind=k;this.static=d}}();q.MethodDefinition=m;m=function(){return function(b){this.type=a.Syntax.Program;this.body=b;this.sourceType="module"}}();q.Module=m;m=function(){return function(b){this.type=a.Syntax.ObjectExpression;this.properties=b}}();q.ObjectExpression=m;m=function(){return function(b){this.type=a.Syntax.ObjectPattern;this.properties=b}}();q.ObjectPattern=
m;m=function(){return function(b,g,h,k,d,c){this.type=a.Syntax.Property;this.key=g;this.computed=h;this.value=k;this.kind=b;this.method=d;this.shorthand=c}}();q.Property=m;m=function(){return function(b){this.type=a.Syntax.ReturnStatement;this.argument=b}}();q.ReturnStatement=m;m=function(){return function(b){this.type=a.Syntax.Program;this.body=b;this.sourceType="script"}}();q.Script=m;m=function(){return function(b){this.type=a.Syntax.SequenceExpression;this.expressions=b}}();q.SequenceExpression=
m;m=function(){return function(b,g){this.type=a.Syntax.MemberExpression;this.computed=!1;this.object=b;this.property=g}}();q.StaticMemberExpression=m;m=function(){return function(b,g){this.type=a.Syntax.TemplateElement;this.value=b;this.tail=g}}();q.TemplateElement=m;m=function(){return function(b,g){this.type=a.Syntax.TemplateLiteral;this.quasis=b;this.expressions=g}}();q.TemplateLiteral=m;m=function(){return function(b,g){this.type=a.Syntax.UnaryExpression;this.operator=b;this.argument=g;this.prefix=
!0}}();q.UnaryExpression=m;m=function(){return function(b,g,h){this.type=a.Syntax.UpdateExpression;this.operator=b;this.argument=g;this.prefix=h}}();q.UpdateExpression=m;m=function(){return function(b,g){this.type=a.Syntax.VariableDeclaration;this.declarations=b;this.kind=g}}();q.VariableDeclaration=m;m=function(){return function(b,g){this.type=a.Syntax.VariableDeclarator;this.id=b;this.init=g}}();q.VariableDeclarator=m})},"esri/arcade/lib/scanner":function(){define(["require","exports","./assert",
"./character","./messages"],function(m,q,a,b,g){Object.defineProperty(q,"__esModule",{value:!0});q.Scanner=void 0;m=function(){function h(k,d){this.source=k;this.errorHandler=d;this.isModule=this.trackComment=!1;this.length=k.length;this.index=0;this.lineNumber=0<k.length?1:0;this.lineStart=0;this.curlyStack=[]}h.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};h.prototype.restoreState=function(k){this.index=
k.index;this.lineNumber=k.lineNumber;this.lineStart=k.lineStart;this.curlyStack=k.curlyStack};h.prototype.eof=function(){return this.index>=this.length};h.prototype.throwUnexpectedToken=function(k){void 0===k&&(k=g.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,k)};h.prototype.tolerateUnexpectedToken=function(k){void 0===k&&(k=g.Messages.UnexpectedTokenIllegal);this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-
this.lineStart+1,k)};h.prototype.skipSingleLineComment=function(k){var d=[];if(this.trackComment){d=[];var c=this.index-k;var f={start:{line:this.lineNumber,column:this.index-this.lineStart-k},end:{}}}for(;!this.eof();){var e=this.source.charCodeAt(this.index);++this.index;if(b.Character.isLineTerminator(e))return this.trackComment&&(f.end={line:this.lineNumber,column:this.index-this.lineStart-1},k={multiLine:!1,slice:[c+k,this.index-1],range:[c,this.index-1],loc:f},d.push(k)),13===e&&10===this.source.charCodeAt(this.index)&&
++this.index,++this.lineNumber,this.lineStart=this.index,d}this.trackComment&&(f.end={line:this.lineNumber,column:this.index-this.lineStart},k={multiLine:!1,slice:[c+k,this.index],range:[c,this.index],loc:f},d.push(k));return d};h.prototype.skipMultiLineComment=function(){var k=[];if(this.trackComment){k=[];var d=this.index-2;var c={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}}}for(;!this.eof();){var f=this.source.charCodeAt(this.index);if(b.Character.isLineTerminator(f))13===
f&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===f&&47===this.source.charCodeAt(this.index+1))return this.index+=2,this.trackComment&&(c.end={line:this.lineNumber,column:this.index-this.lineStart},d={multiLine:!0,slice:[d+2,this.index-2],range:[d,this.index],loc:c},k.push(d)),k;++this.index}}this.trackComment&&(c.end={line:this.lineNumber,column:this.index-this.lineStart},d={multiLine:!0,slice:[d+2,this.index],range:[d,
this.index],loc:c},k.push(d));this.tolerateUnexpectedToken();return k};h.prototype.scanComments=function(){var k;this.trackComment&&(k=[]);for(var d=0===this.index;!this.eof();){var c=this.source.charCodeAt(this.index);if(b.Character.isWhiteSpace(c))++this.index;else if(b.Character.isLineTerminator(c))++this.index,13===c&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,d=!0;else if(47===c)if(c=this.source.charCodeAt(this.index+1),47===c)this.index+=
2,c=this.skipSingleLineComment(2),this.trackComment&&(k=k.concat(c)),d=!0;else if(42===c)this.index+=2,c=this.skipMultiLineComment(),this.trackComment&&(k=k.concat(c));else break;else if(d&&45===c)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,c=this.skipSingleLineComment(3),this.trackComment&&(k=k.concat(c));else break;else if(60!==c||this.isModule)break;else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,c=this.skipSingleLineComment(4),
this.trackComment&&(k=k.concat(c));else break}return k};h.prototype.isFutureReservedWord=function(k){return!1};h.prototype.isStrictModeReservedWord=function(k){return!1};h.prototype.isRestrictedWord=function(k){return!1};h.prototype.isKeyword=function(k){k=k.toLowerCase();switch(k.length){case 2:return"if"===k||"in"===k;case 3:return"var"===k||"for"===k;case 4:return"else"===k;case 5:return"break"===k;case 6:return"return"===k;case 8:return"function"===k||"continue"===k;default:return!1}};h.prototype.codePointAt=
function(k){var d=this.source.charCodeAt(k);55296<=d&&56319>=d&&(k=this.source.charCodeAt(k+1),56320<=k&&57343>=k&&(d=1024*(d-55296)+k-56320+65536));return d};h.prototype.scanHexEscape=function(k){k="u"===k?4:2;for(var d=0,c=0;c<k;++c)if(!this.eof()&&b.Character.isHexDigit(this.source.charCodeAt(this.index)))d=16*d+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(d)};h.prototype.scanUnicodeCodePointEscape=function(){var k=this.source[this.index],
d=0;for("}"===k&&this.throwUnexpectedToken();!this.eof();){k=this.source[this.index++];if(!b.Character.isHexDigit(k.charCodeAt(0)))break;d=16*d+"0123456789abcdef".indexOf(k.toLowerCase())}(1114111<d||"}"!==k)&&this.throwUnexpectedToken();return b.Character.fromCodePoint(d)};h.prototype.getIdentifier=function(){for(var k=this.index++;!this.eof();){var d=this.source.charCodeAt(this.index);if(92===d||55296<=d&&57343>d)return this.index=k,this.getComplexIdentifier();if(b.Character.isIdentifierPart(d))++this.index;
else break}return this.source.slice(k,this.index)};h.prototype.getComplexIdentifier=function(){var k=this.codePointAt(this.index),d=b.Character.fromCodePoint(k);this.index+=d.length;if(92===k){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var c=this.scanUnicodeCodePointEscape()}else c=this.scanHexEscape("u"),null!==c&&"\\"!==c&&b.Character.isIdentifierStart(c.charCodeAt(0))||this.throwUnexpectedToken();d=c}for(;!this.eof();){k=
this.codePointAt(this.index);if(!b.Character.isIdentifierPart(k))break;c=b.Character.fromCodePoint(k);d+=c;this.index+=c.length;92===k&&(d=d.substr(0,d.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,c=this.scanUnicodeCodePointEscape()):(c=this.scanHexEscape("u"),null!==c&&"\\"!==c&&b.Character.isIdentifierPart(c.charCodeAt(0))||this.throwUnexpectedToken()),d+=c)}return d};h.prototype.octalToDecimal=function(k){var d=
"0"!==k,c="01234567".indexOf(k);!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(d=!0,c=8*c+"01234567".indexOf(this.source[this.index++]),0<="0123".indexOf(k)&&!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(c=8*c+"01234567".indexOf(this.source[this.index++])));return{code:c,octal:d}};h.prototype.scanIdentifier=function(){var k=this.index,d=92===this.source.charCodeAt(k)?this.getComplexIdentifier():this.getIdentifier();var c=1===d.length?3:this.isKeyword(d)?
4:"null"===d.toLowerCase()?5:"true"===d.toLowerCase()||"false"===d.toLowerCase()?1:3;if(3!==c&&k+d.length!==this.index){var f=this.index;this.index=k;this.tolerateUnexpectedToken(g.Messages.InvalidEscapedReservedWord);this.index=f}return{type:c,value:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};h.prototype.scanPunctuator=function(){var k=this.index,d=this.source[this.index];switch(d){case "(":case "{":"{"===d&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;
"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,d="...");break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:d=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===d?this.index+=4:(d=d.substr(0,3),"\x3d\x3d\x3d"===d||"!\x3d\x3d"===d||"\x3e\x3e\x3e"===d||"\x3c\x3c\x3d"===d||"\x3e\x3e\x3d"===d||"**\x3d"===d?this.index+=3:(d=d.substr(0,2),"\x26\x26"===d||"||"===d||"\x3d\x3d"===
d||"!\x3d"===d||"+\x3d"===d||"-\x3d"===d||"*\x3d"===d||"/\x3d"===d||"++"===d||"--"===d||"\x3c\x3c"===d||"\x3e\x3e"===d||"\x26\x3d"===d||"|\x3d"===d||"^\x3d"===d||"%\x3d"===d||"\x3c\x3d"===d||"\x3e\x3d"===d||"\x3d\x3e"===d||"**"===d?this.index+=2:(d=this.source[this.index],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d)&&++this.index)))}this.index===k&&this.throwUnexpectedToken();return{type:7,value:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};h.prototype.scanHexLiteral=
function(k){for(var d="";!this.eof()&&b.Character.isHexDigit(this.source.charCodeAt(this.index));)d+=this.source[this.index++];0===d.length&&this.throwUnexpectedToken();b.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseInt("0x"+d,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};h.prototype.scanBinaryLiteral=function(k){for(var d="",c;!this.eof();){c=this.source[this.index];if("0"!==c&&"1"!==c)break;
d+=this.source[this.index++]}0===d.length&&this.throwUnexpectedToken();this.eof()||(c=this.source.charCodeAt(this.index),(b.Character.isIdentifierStart(c)||b.Character.isDecimalDigit(c))&&this.throwUnexpectedToken());return{type:6,value:parseInt(d,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};h.prototype.scanOctalLiteral=function(k,d){var c="",f=!1;b.Character.isOctalDigit(k.charCodeAt(0))?(f=!0,c="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index));)c+=
this.source[this.index++];f||0!==c.length||this.throwUnexpectedToken();(b.Character.isIdentifierStart(this.source.charCodeAt(this.index))||b.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:6,value:parseInt(c,8),octal:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}};h.prototype.scanNumericLiteral=function(){var k=this.index,d=this.source[k];a.assert(b.Character.isDecimalDigit(d.charCodeAt(0))||"."===d,"Numeric literal must start with a decimal digit or a decimal point");
var c="";if("."!==d){c=this.source[this.index++];d=this.source[this.index];if("0"===c){if("x"===d||"X"===d)return++this.index,this.scanHexLiteral(k);if("b"===d||"B"===d)return++this.index,this.scanBinaryLiteral(k);if("o"===d||"O"===d)return this.scanOctalLiteral(d,k)}for(;b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];d=this.source[this.index]}if("."===d){for(c+=this.source[this.index++];b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)c+=
this.source[this.index++];d=this.source[this.index]}if("e"===d||"E"===d){c+=this.source[this.index++];d=this.source[this.index];if("+"===d||"-"===d)c+=this.source[this.index++];if(b.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];else this.throwUnexpectedToken()}b.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(c),
lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};h.prototype.scanStringLiteral=function(){var k=this.index,d=this.source[k];a.assert("'"===d||'"'===d,"String literal must starts with a quote");++this.index;for(var c=!1,f="";!this.eof();){var e=this.source[this.index++];if(e===d){d="";break}if("\\"===e)if((e=this.source[this.index++])&&b.Character.isLineTerminator(e.charCodeAt(0)))++this.lineNumber,"\r"===e&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;
else switch(e){case "u":"{"===this.source[this.index]?(++this.index,f+=this.scanUnicodeCodePointEscape()):(e=this.scanHexEscape(e),null===e&&this.throwUnexpectedToken(),f+=e);break;case "x":e=this.scanHexEscape(e);null===e&&this.throwUnexpectedToken(g.Messages.InvalidHexEscapeSequence);f+=e;break;case "n":f+="\n";break;case "r":f+="\r";break;case "t":f+="\t";break;case "b":f+="\b";break;case "f":f+="\f";break;case "v":f+="\x0B";break;case "8":case "9":f+=e;this.tolerateUnexpectedToken();break;default:e&&
b.Character.isOctalDigit(e.charCodeAt(0))?(e=this.octalToDecimal(e),c=e.octal||c,f+=String.fromCharCode(e.code)):f+=e}else if(b.Character.isLineTerminator(e.charCodeAt(0)))break;else f+=e}""!==d&&(this.index=k,this.throwUnexpectedToken());return{type:8,value:f,octal:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};h.prototype.scanTemplate=function(){var k="",d=!1,c=this.index,f="`"===this.source[c],e=!1,l=2;for(++this.index;!this.eof();){var n=this.source[this.index++];
if("`"===n){l=1;d=e=!0;break}if("$"===n){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;d=!0;break}k+=n}else if("\\"===n)if(n=this.source[this.index++],b.Character.isLineTerminator(n.charCodeAt(0)))++this.lineNumber,"\r"===n&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(n){case "n":k+="\n";break;case "r":k+="\r";break;case "t":k+="\t";break;case "u":if("{"===this.source[this.index])++this.index,k+=this.scanUnicodeCodePointEscape();else{var r=
this.index,t=this.scanHexEscape(n);null!==t?k+=t:(this.index=r,k+=n)}break;case "x":n=this.scanHexEscape(n);null===n&&this.throwUnexpectedToken(g.Messages.InvalidHexEscapeSequence);k+=n;break;case "b":k+="\b";break;case "f":k+="\f";break;case "v":k+="\v";break;default:"0"===n?(b.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(g.Messages.TemplateOctalLiteral),k+="\x00"):b.Character.isOctalDigit(n.charCodeAt(0))?this.throwUnexpectedToken(g.Messages.TemplateOctalLiteral):
k+=n}else b.Character.isLineTerminator(n.charCodeAt(0))?(++this.lineNumber,"\r"===n&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,k+="\n"):k+=n}d||this.throwUnexpectedToken();f||this.curlyStack.pop();return{type:10,value:this.source.slice(c+1,this.index-l),cooked:k,head:f,tail:e,lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}};h.prototype.testRegExp=function(k,d){var c=this,f=k;0<=d.indexOf("u")&&(f=f.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,
function(e,l,n){e=parseInt(l||n,16);1114111<e&&c.throwUnexpectedToken(g.Messages.InvalidRegExp);return 65535>=e?String.fromCharCode(e):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(f)}catch(e){this.throwUnexpectedToken(g.Messages.InvalidRegExp)}try{return new RegExp(k,d)}catch(e){return null}};h.prototype.scanRegExpBody=function(){var k=this.source[this.index];a.assert("/"===k,"Regular expression literal must start with a slash");for(var d=this.source[this.index++],c=
!1,f=!1;!this.eof();)if(k=this.source[this.index++],d+=k,"\\"===k)k=this.source[this.index++],b.Character.isLineTerminator(k.charCodeAt(0))&&this.throwUnexpectedToken(g.Messages.UnterminatedRegExp),d+=k;else if(b.Character.isLineTerminator(k.charCodeAt(0)))this.throwUnexpectedToken(g.Messages.UnterminatedRegExp);else if(c)"]"===k&&(c=!1);else{if("/"===k){f=!0;break}"["===k&&(c=!0)}f||this.throwUnexpectedToken(g.Messages.UnterminatedRegExp);return d.substr(1,d.length-2)};h.prototype.scanRegExpFlags=
function(){for(var k="";!this.eof();){var d=this.source[this.index];if(!b.Character.isIdentifierPart(d.charCodeAt(0)))break;++this.index;if("\\"!==d||this.eof())k+=d;else{d=this.source[this.index];if("u"===d){++this.index;d=this.index;var c=this.scanHexEscape("u");if(null!==c)for(k+=c;d<this.index;++d);else this.index=d,k+="u"}this.tolerateUnexpectedToken()}}return k};h.prototype.scanRegExp=function(){var k=this.index,d=this.scanRegExpBody(),c=this.scanRegExpFlags(),f=this.testRegExp(d,c);return{type:9,
value:"",pattern:d,flags:c,regex:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}};h.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var k=this.source.charCodeAt(this.index);return b.Character.isIdentifierStart(k)?this.scanIdentifier():40===k||41===k||59===k?this.scanPunctuator():39===k||34===k?this.scanStringLiteral():46===k?b.Character.isDecimalDigit(this.source.charCodeAt(this.index+
1))?this.scanNumericLiteral():this.scanPunctuator():b.Character.isDecimalDigit(k)?this.scanNumericLiteral():96===k||125===k&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=k&&57343>k&&b.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return h}();q.Scanner=m})},"esri/arcade/lib/character":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.Character=void 0;var a=
/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
q.Character={fromCodePoint:function(g){return 65536>g?String.fromCharCode(g):String.fromCharCode(55296+(g-65536>>10))+String.fromCharCode(56320+(g-65536&1023))},isWhiteSpace:function(g){return 32===g||9===g||11===g||12===g||160===g||5760<=g&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(g)},isLineTerminator:function(g){return 10===g||13===g||8232===g||8233===g},isIdentifierStart:function(g){return 36===g||95===g||65<=g&&90>=g||97<=g&&122>=g||92===g||
128<=g&&a.test(q.Character.fromCodePoint(g))},isIdentifierPart:function(g){return 36===g||95===g||65<=g&&90>=g||97<=g&&122>=g||48<=g&&57>=g||92===g||128<=g&&b.test(q.Character.fromCodePoint(g))},isDecimalDigit:function(g){return 48<=g&&57>=g},isHexDigit:function(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g},isOctalDigit:function(g){return 48<=g&&55>=g}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.TokenName=
q.Token=void 0;m=q.Token||(q.Token={});m[m.BooleanLiteral=1]="BooleanLiteral";m[m.EOF=2]="EOF";m[m.Identifier=3]="Identifier";m[m.Keyword=4]="Keyword";m[m.NullLiteral=5]="NullLiteral";m[m.NumericLiteral=6]="NumericLiteral";m[m.Punctuator=7]="Punctuator";m[m.StringLiteral=8]="StringLiteral";m[m.RegularExpression=9]="RegularExpression";m[m.Template=10]="Template";q.TokenName={};q.TokenName[1]="Boolean";q.TokenName[2]="\x3cend\x3e";q.TokenName[3]="Identifier";q.TokenName[4]="Keyword";q.TokenName[5]=
"Null";q.TokenName[6]="Numeric";q.TokenName[7]="Punctuator";q.TokenName[8]="String";q.TokenName[9]="RegularExpression";q.TokenName[10]="Template"})},"esri/arcade/lib/tokenizer":function(){define(["require","exports","./error-handler","./scanner","./token"],function(m,q,a,b,g){Object.defineProperty(q,"__esModule",{value:!0});q.Tokenizer=void 0;var h=function(){function k(){this.values=[];this.curly=this.paren=-1}k.prototype.beforeFunctionExpression=function(d){return 0<="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d **\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * ** / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ").indexOf(d)};
k.prototype.isRegexStart=function(){var d=this.values[this.values.length-1],c=null!==d;switch(d){case "this":case "]":c=!1;break;case ")":d=this.values[this.paren-1];c="if"===d||"while"===d||"for"===d||"with"===d;break;case "}":c=!0,"function"===this.values[this.curly-3]?c=(d=this.values[this.curly-4])?!this.beforeFunctionExpression(d):!1:"function"===this.values[this.curly-4]&&(c=(d=this.values[this.curly-5])?!this.beforeFunctionExpression(d):!0)}return c};k.prototype.push=function(d){7===d.type||
4===d.type?("{"===d.value?this.curly=this.values.length:"("===d.value&&(this.paren=this.values.length),this.values.push(d.value)):this.values.push(null)};return k}();m=function(){function k(d,c){this.errorHandler=new a.ErrorHandler;this.errorHandler.tolerant=c?"boolean"===typeof c.tolerant&&c.tolerant:!1;this.scanner=new b.Scanner(d,this.errorHandler);this.scanner.trackComment=c?"boolean"===typeof c.comment&&c.comment:!1;this.trackRange=c?"boolean"===typeof c.range&&c.range:!1;this.trackLoc=c?"boolean"===
typeof c.loc&&c.loc:!1;this.buffer=[];this.reader=new h}k.prototype.errors=function(){return this.errorHandler.errors};k.prototype.getNextToken=function(){if(0===this.buffer.length){var d=this.scanner.scanComments();if(this.scanner.trackComment)for(var c=0;c<d.length;++c){var f=d[c],e=this.scanner.source.slice(f.slice[0],f.slice[1]);e={type:f.multiLine?"BlockComment":"LineComment",value:e};this.trackRange&&(e.range=f.range);this.trackLoc&&(e.loc=f.loc);this.buffer.push(e)}if(!this.scanner.eof()){d=
void 0;this.trackLoc&&(d={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});c=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){f=this.scanner.saveState();try{c=this.scanner.scanRegExp()}catch(l){this.scanner.restoreState(f),c=this.scanner.lex()}}else c=this.scanner.lex();this.reader.push(c);f={type:g.TokenName[c.type],value:this.scanner.source.slice(c.start,c.end)};this.trackRange&&(f.range=[c.start,c.end]);this.trackLoc&&
(d.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},f.loc=d);9===c.type&&(f.regex={pattern:c.pattern,flags:c.flags});this.buffer.push(f)}}return this.buffer.shift()};return k}();q.Tokenizer=m})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(m,q,a){return a})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(m,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});var g=
{ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-in":1,"en-nz":1,"en-sg":1,es:1,"es-do":1,"es-mx":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,hu:1,id:1,it:1,"it-ch":1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-mo":1,"zh-tw":1};q.load=function(h,k,d){h=a.locale;var c=
h in g;if(!c){var f=h.split("-");1<f.length&&f[0]in g&&(h=f[0],c=!0)}c?k(["moment/locale/"+h],function(){d(b)}):d(b)}})},"moment/moment":function(){(function(m,q){"object"===typeof exports&&"undefined"!==typeof module?module.exports=q():"function"===typeof define&&define.amd?define(q):m.moment=q()})(this,function(){function m(){return Ac.apply(null,arguments)}function q(A){return A instanceof Array||"[object Array]"===Object.prototype.toString.call(A)}function a(A){return null!=A&&"[object Object]"===
Object.prototype.toString.call(A)}function b(A,F){return Object.prototype.hasOwnProperty.call(A,F)}function g(A){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(A).length;for(var F in A)if(b(A,F))return!1;return!0}function h(A){return void 0===A}function k(A){return"number"===typeof A||"[object Number]"===Object.prototype.toString.call(A)}function d(A){return A instanceof Date||"[object Date]"===Object.prototype.toString.call(A)}function c(A,F){var K=[],Q;for(Q=0;Q<A.length;++Q)K.push(F(A[Q],
Q));return K}function f(A,F){for(var K in F)b(F,K)&&(A[K]=F[K]);b(F,"toString")&&(A.toString=F.toString);b(F,"valueOf")&&(A.valueOf=F.valueOf);return A}function e(A,F,K,Q){return Pa(A,F,K,Q,!0).utc()}function l(A){null==A._pf&&(A._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return A._pf}function n(A){if(null==
A._isValid){var F=l(A),K=Bc.call(F.parsedDateParts,function(Q){return null!=Q});K=!isNaN(A._d.getTime())&&0>F.overflow&&!F.empty&&!F.invalidEra&&!F.invalidMonth&&!F.invalidWeekday&&!F.weekdayMismatch&&!F.nullInput&&!F.invalidFormat&&!F.userInvalidated&&(!F.meridiem||F.meridiem&&K);A._strict&&(K=K&&0===F.charsLeftOver&&0===F.unusedTokens.length&&void 0===F.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(A))return K;A._isValid=K}return A._isValid}function r(A){var F=e(NaN);null!=A?f(l(F),A):l(F).userInvalidated=
!0;return F}function t(A,F){var K;h(F._isAMomentObject)||(A._isAMomentObject=F._isAMomentObject);h(F._i)||(A._i=F._i);h(F._f)||(A._f=F._f);h(F._l)||(A._l=F._l);h(F._strict)||(A._strict=F._strict);h(F._tzm)||(A._tzm=F._tzm);h(F._isUTC)||(A._isUTC=F._isUTC);h(F._offset)||(A._offset=F._offset);h(F._pf)||(A._pf=l(F));h(F._locale)||(A._locale=F._locale);if(0<Ob.length)for(K=0;K<Ob.length;K++){var Q=Ob[K];var fa=F[Q];h(fa)||(A[Q]=fa)}return A}function w(A){t(this,A);this._d=new Date(null!=A._d?A._d.getTime():
NaN);this.isValid()||(this._d=new Date(NaN));!1===Pb&&(Pb=!0,m.updateOffset(this),Pb=!1)}function v(A){return A instanceof w||null!=A&&null!=A._isAMomentObject}function y(A,F){var K=!0;return f(function(){null!=m.deprecationHandler&&m.deprecationHandler(null,A);if(K){var Q=[],fa,ma;for(fa=0;fa<arguments.length;fa++){var oa="";if("object"===typeof arguments[fa]){oa+="\n["+fa+"] ";for(ma in arguments[0])b(arguments[0],ma)&&(oa+=ma+": "+arguments[0][ma]+", ");oa=oa.slice(0,-2)}else oa=arguments[fa];
Q.push(oa)}Array.prototype.slice.call(Q).join("");K=!1}return F.apply(this,arguments)},F)}function x(A,F){null!=m.deprecationHandler&&m.deprecationHandler(A,F);ac[A]||(ac[A]=!0)}function B(A){return"undefined"!==typeof Function&&A instanceof Function||"[object Function]"===Object.prototype.toString.call(A)}function p(A,F){var K=f({},A),Q;for(Q in F)b(F,Q)&&(a(A[Q])&&a(F[Q])?(K[Q]={},f(K[Q],A[Q]),f(K[Q],F[Q])):null!=F[Q]?K[Q]=F[Q]:delete K[Q]);for(Q in A)b(A,Q)&&!b(F,Q)&&a(A[Q])&&(K[Q]=f({},K[Q]));
return K}function z(A){null!=A&&this.set(A)}function u(A,F,K){var Q=""+Math.abs(A);return(0<=A?K?"+":"":"-")+Math.pow(10,Math.max(0,F-Q.length)).toString().substr(1)+Q}function D(A,F,K,Q){var fa=Q;"string"===typeof Q&&(fa=function(){return this[Q]()});A&&(pb[A]=fa);F&&(pb[F[0]]=function(){return u(fa.apply(this,arguments),F[1],F[2])});K&&(pb[K]=function(){return this.localeData().ordinal(fa.apply(this,arguments),A)})}function I(A){return A.match(/\[[\s\S]/)?A.replace(/^\[|\]$/g,""):A.replace(/\\/g,
"")}function C(A){var F=A.match(Qb),K;var Q=0;for(K=F.length;Q<K;Q++)F[Q]=pb[F[Q]]?pb[F[Q]]:I(F[Q]);return function(fa){var ma="",oa;for(oa=0;oa<K;oa++)ma+=B(F[oa])?F[oa].call(fa,A):F[oa];return ma}}function E(A,F){if(!A.isValid())return A.localeData().invalidDate();F=G(F,A.localeData());Rb[F]=Rb[F]||C(F);return Rb[F](A)}function G(A,F){function K(fa){return F.longDateFormat(fa)||fa}var Q=5;for(Db.lastIndex=0;0<=Q&&Db.test(A);)A=A.replace(Db,K),Db.lastIndex=0,--Q;return A}function H(A,F){var K=A.toLowerCase();
xb[K]=xb[K+"s"]=xb[F]=A}function L(A){return"string"===typeof A?xb[A]||xb[A.toLowerCase()]:void 0}function O(A){var F={},K,Q;for(Q in A)b(A,Q)&&(K=L(Q))&&(F[K]=A[Q]);return F}function W(A){var F=[],K;for(K in A)b(A,K)&&F.push({unit:K,priority:Va[K]});F.sort(function(Q,fa){return Q.priority-fa.priority});return F}function Z(A){return 0===A%4&&0!==A%100||0===A%400}function ba(A){return 0>A?Math.ceil(A)||0:Math.floor(A)}function P(A){A=+A;var F=0;0!==A&&isFinite(A)&&(F=ba(A));return F}function ha(A,
F){return function(K){return null!=K?(R(this,A,K),m.updateOffset(this,F),this):X(this,A)}}function X(A,F){return A.isValid()?A._d["get"+(A._isUTC?"UTC":"")+F]():NaN}function R(A,F,K){if(A.isValid()&&!isNaN(K))if("FullYear"===F&&Z(A.year())&&1===A.month()&&29===A.date())K=P(K),A._d["set"+(A._isUTC?"UTC":"")+F](K,A.month(),ra(K,A.month()));else A._d["set"+(A._isUTC?"UTC":"")+F](K)}function V(A,F,K){Sb[A]=B(F)?F:function(Q,fa){return Q&&K?K:F}}function J(A,F){return b(Sb,A)?Sb[A](F._strict,F._locale):
new RegExp(S(A))}function S(A){return aa(A.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(F,K,Q,fa,ma){return K||Q||fa||ma}))}function aa(A){return A.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function ja(A,F){var K,Q=F;"string"===typeof A&&(A=[A]);k(F)&&(Q=function(fa,ma){ma[F]=P(fa)});for(K=0;K<A.length;K++)Tb[A[K]]=Q}function la(A,F){ja(A,function(K,Q,fa,ma){fa._w=fa._w||{};F(K,fa._w,fa,ma)})}function ra(A,F){if(isNaN(A)||isNaN(F))return NaN;var K=(F%12+12)%12;return 1===
K?Z(A+(F-K)/12)?29:28:31-K%7%2}function ta(A,F){if(!A.isValid())return A;if("string"===typeof F)if(/^\d+$/.test(F))F=P(F);else if(F=A.localeData().monthsParse(F),!k(F))return A;var K=Math.min(A.date(),ra(A.year(),F));A._d["set"+(A._isUTC?"UTC":"")+"Month"](F,K);return A}function va(A){return null!=A?(ta(this,A),m.updateOffset(this,!0),this):X(this,"Month")}function Da(){function A(oa,za){return za.length-oa.length}var F=[],K=[],Q=[],fa;for(fa=0;12>fa;fa++){var ma=e([2E3,fa]);F.push(this.monthsShort(ma,
""));K.push(this.months(ma,""));Q.push(this.months(ma,""));Q.push(this.monthsShort(ma,""))}F.sort(A);K.sort(A);Q.sort(A);for(fa=0;12>fa;fa++)F[fa]=aa(F[fa]),K[fa]=aa(K[fa]);for(fa=0;24>fa;fa++)Q[fa]=aa(Q[fa]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+Q.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+K.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+F.join("|")+")","i")}function ua(A,F,K,Q,fa,ma,oa){100>A&&0<=A?(F=new Date(A+400,F,K,Q,fa,ma,oa),isFinite(F.getFullYear())&&
F.setFullYear(A)):F=new Date(A,F,K,Q,fa,ma,oa);return F}function U(A){if(100>A&&0<=A){var F=Array.prototype.slice.call(arguments);F[0]=A+400;F=new Date(Date.UTC.apply(null,F));isFinite(F.getUTCFullYear())&&F.setUTCFullYear(A)}else F=new Date(Date.UTC.apply(null,arguments));return F}function T(A,F,K){K=7+F-K;return-((7+U(A,0,K).getUTCDay()-F)%7)+K-1}function ca(A,F,K,Q,fa){K=(7+K-Q)%7;Q=T(A,Q,fa);Q=1+7*(F-1)+K+Q;0>=Q?(F=A-1,A=(Z(F)?366:365)+Q):Q>(Z(A)?366:365)?(F=A+1,A=Q-(Z(A)?366:365)):(F=A,A=Q);
return{year:F,dayOfYear:A}}function ia(A,F,K){var Q=T(A.year(),F,K);Q=Math.floor((A.dayOfYear()-Q-1)/7)+1;1>Q?(A=A.year()-1,F=Q+ea(A,F,K)):Q>ea(A.year(),F,K)?(F=Q-ea(A.year(),F,K),A=A.year()+1):(A=A.year(),F=Q);return{week:F,year:A}}function ea(A,F,K){var Q=T(A,F,K);F=T(A+1,F,K);return((Z(A)?366:365)-Q+F)/7}function sa(A,F){return A.slice(F,7).concat(A.slice(0,F))}function M(A,F,K){var Q;A=A.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=
[],Q=0;7>Q;++Q){var fa=e([2E3,1]).day(Q);this._minWeekdaysParse[Q]=this.weekdaysMin(fa,"").toLocaleLowerCase();this._shortWeekdaysParse[Q]=this.weekdaysShort(fa,"").toLocaleLowerCase();this._weekdaysParse[Q]=this.weekdays(fa,"").toLocaleLowerCase()}if(K)F="dddd"===F?Qa.call(this._weekdaysParse,A):"ddd"===F?Qa.call(this._shortWeekdaysParse,A):Qa.call(this._minWeekdaysParse,A);else if("dddd"===F){F=Qa.call(this._weekdaysParse,A);if(-1!==F)return F;F=Qa.call(this._shortWeekdaysParse,A);if(-1!==F)return F;
F=Qa.call(this._minWeekdaysParse,A)}else if("ddd"===F){F=Qa.call(this._shortWeekdaysParse,A);if(-1!==F)return F;F=Qa.call(this._weekdaysParse,A);if(-1!==F)return F;F=Qa.call(this._minWeekdaysParse,A)}else{F=Qa.call(this._minWeekdaysParse,A);if(-1!==F)return F;F=Qa.call(this._weekdaysParse,A);if(-1!==F)return F;F=Qa.call(this._shortWeekdaysParse,A)}return-1!==F?F:null}function N(){function A(Ea,Ra){return Ra.length-Ea.length}var F=[],K=[],Q=[],fa=[],ma;for(ma=0;7>ma;ma++){var oa=e([2E3,1]).day(ma);
var za=aa(this.weekdaysMin(oa,""));var Ja=aa(this.weekdaysShort(oa,""));oa=aa(this.weekdays(oa,""));F.push(za);K.push(Ja);Q.push(oa);fa.push(za);fa.push(Ja);fa.push(oa)}F.sort(A);K.sort(A);Q.sort(A);fa.sort(A);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+fa.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+Q.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+K.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+F.join("|")+
")","i")}function Y(){return this.hours()%12||12}function da(A,F){D(A,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),F)})}function ka(A,F){return F._meridiemParse}function Ba(A){return A?A.toLowerCase().replace("_","-"):A}function Aa(A){var F=null;if(void 0===Na[A]&&"undefined"!==typeof module&&module&&module.exports)try{F=yb._abbr;var K=require;K("./locale/"+A);Ca(F)}catch(Q){Na[A]=null}return Na[A]}function Ca(A,F){A&&(A=h(F)?qa(A):ya(A,F))&&(yb=A);return yb._abbr}
function ya(A,F){if(null!==F){var K=bc;F.abbr=A;if(null!=Na[A])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),K=Na[A]._config;else if(null!=F.parentLocale)if(null!=Na[F.parentLocale])K=Na[F.parentLocale]._config;else if(K=Aa(F.parentLocale),null!=K)K=K._config;else return zb[F.parentLocale]||
(zb[F.parentLocale]=[]),zb[F.parentLocale].push({name:A,config:F}),null;Na[A]=new z(p(K,F));zb[A]&&zb[A].forEach(function(Q){ya(Q.name,Q.config)});Ca(A);return Na[A]}delete Na[A];return null}function qa(A){var F;A&&A._locale&&A._locale._abbr&&(A=A._locale._abbr);if(!A)return yb;if(!q(A)){if(F=Aa(A))return F;A=[A]}a:{F=0;for(var K,Q,fa,ma;F<A.length;){ma=Ba(A[F]).split("-");K=ma.length;for(Q=(Q=Ba(A[F+1]))?Q.split("-"):null;0<K;){if(fa=Aa(ma.slice(0,K).join("-"))){A=fa;break a}if(fa=Q&&Q.length>=K){b:{fa=
void 0;var oa=Math.min(ma.length,Q.length);for(fa=0;fa<oa;fa+=1)if(ma[fa]!==Q[fa])break b;fa=oa}fa=fa>=K-1}if(fa)break;K--}F++}A=yb}return A}function xa(A){var F;(F=A._a)&&-2===l(A).overflow&&(F=0>F[fb]||11<F[fb]?fb:1>F[db]||F[db]>ra(F[Ya],F[fb])?db:0>F[Sa]||24<F[Sa]||24===F[Sa]&&(0!==F[cb]||0!==F[gb]||0!==F[mb])?Sa:0>F[cb]||59<F[cb]?cb:0>F[gb]||59<F[gb]?gb:0>F[mb]||999<F[mb]?mb:-1,l(A)._overflowDayOfYear&&(F<Ya||F>db)&&(F=db),l(A)._overflowWeeks&&-1===F&&(F=Cc),l(A)._overflowWeekday&&-1===F&&(F=
Dc),l(A).overflow=F);return A}function wa(A){var F;var K=A._i;var Q=Ec.exec(K)||Fc.exec(K);if(Q){l(A).iso=!0;K=0;for(F=Eb.length;K<F;K++)if(Eb[K][1].exec(Q[1])){var fa=Eb[K][0];var ma=!1!==Eb[K][2];break}if(null==fa)A._isValid=!1;else{if(Q[3]){K=0;for(F=Ub.length;K<F;K++)if(Ub[K][1].exec(Q[3])){var oa=(Q[2]||" ")+Ub[K][0];break}if(null==oa){A._isValid=!1;return}}if(ma||null==oa){if(Q[4])if(Gc.exec(Q[4]))var za="Z";else{A._isValid=!1;return}A._f=fa+(oa||"")+(za||"");Xa(A)}else A._isValid=!1}}else A._isValid=
!1}function Wa(A){var F=Hc.exec(A._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(F){var K=F[3],Q=F[2],fa=F[5],ma=F[6],oa=F[7],za=parseInt(F[4],10);K=[49>=za?2E3+za:999>=za?1900+za:za,cc.indexOf(K),parseInt(Q,10),parseInt(fa,10),parseInt(ma,10)];oa&&K.push(parseInt(oa,10));a:{if(oa=F[1])if(oa=dc.indexOf(oa),Q=(new Date(K[0],K[1],K[2])).getDay(),oa!==Q){l(A).weekdayMismatch=!0;oa=A._isValid=!1;break a}oa=!0}oa&&(A._a=K,(oa=F[8])?F=Ic[oa]:F[9]?
F=0:(F=parseInt(F[10],10),oa=F%100,F=(F-oa)/100*60+oa),A._tzm=F,A._d=U.apply(null,A._a),A._d.setUTCMinutes(A._d.getUTCMinutes()-A._tzm),l(A).rfc2822=!0)}else A._isValid=!1}function Za(A){var F=Jc.exec(A._i);null!==F?A._d=new Date(+F[1]):(wa(A),!1===A._isValid&&(delete A._isValid,Wa(A),!1===A._isValid&&(delete A._isValid,A._strict?A._isValid=!1:m.createFromInputFallback(A))))}function Ma(A,F,K){return null!=A?A:null!=F?F:K}function Ka(A){var F=[];if(!A._d){var K=new Date(m.now());K=A._useUTC?[K.getUTCFullYear(),
K.getUTCMonth(),K.getUTCDate()]:[K.getFullYear(),K.getMonth(),K.getDate()];if(A._w&&null==A._a[db]&&null==A._a[fb]){var Q=A._w;if(null!=Q.GG||null!=Q.W||null!=Q.E){var fa=1;var ma=4;var oa=Ma(Q.GG,A._a[Ya],ia(na(),1,4).year);var za=Ma(Q.W,1);var Ja=Ma(Q.E,1);if(1>Ja||7<Ja)var Ea=!0}else if(fa=A._locale._week.dow,ma=A._locale._week.doy,za=ia(na(),fa,ma),oa=Ma(Q.gg,A._a[Ya],za.year),za=Ma(Q.w,za.week),null!=Q.d){if(Ja=Q.d,0>Ja||6<Ja)Ea=!0}else if(null!=Q.e){if(Ja=Q.e+fa,0>Q.e||6<Q.e)Ea=!0}else Ja=fa;
1>za||za>ea(oa,fa,ma)?l(A)._overflowWeeks=!0:null!=Ea?l(A)._overflowWeekday=!0:(Ea=ca(oa,za,Ja,fa,ma),A._a[Ya]=Ea.year,A._dayOfYear=Ea.dayOfYear)}if(null!=A._dayOfYear){Ea=Ma(A._a[Ya],K[Ya]);if(A._dayOfYear>(Z(Ea)?366:365)||0===A._dayOfYear)l(A)._overflowDayOfYear=!0;Ea=U(Ea,0,A._dayOfYear);A._a[fb]=Ea.getUTCMonth();A._a[db]=Ea.getUTCDate()}for(Ea=0;3>Ea&&null==A._a[Ea];++Ea)A._a[Ea]=F[Ea]=K[Ea];for(;7>Ea;Ea++)A._a[Ea]=F[Ea]=null==A._a[Ea]?2===Ea?1:0:A._a[Ea];24===A._a[Sa]&&0===A._a[cb]&&0===A._a[gb]&&
0===A._a[mb]&&(A._nextDay=!0,A._a[Sa]=0);A._d=(A._useUTC?U:ua).apply(null,F);F=A._useUTC?A._d.getUTCDay():A._d.getDay();null!=A._tzm&&A._d.setUTCMinutes(A._d.getUTCMinutes()-A._tzm);A._nextDay&&(A._a[Sa]=24);A._w&&"undefined"!==typeof A._w.d&&A._w.d!==F&&(l(A).weekdayMismatch=!0)}}function Xa(A){if(A._f===m.ISO_8601)wa(A);else if(A._f===m.RFC_2822)Wa(A);else{A._a=[];l(A).empty=!0;var F=""+A._i,K,Q,fa=F.length,ma=0;var oa=G(A._f,A._locale).match(Qb)||[];for(K=0;K<oa.length;K++){var za=oa[K];if(Q=(F.match(J(za,
A))||[])[0]){var Ja=F.substr(0,F.indexOf(Q));0<Ja.length&&l(A).unusedInput.push(Ja);F=F.slice(F.indexOf(Q)+Q.length);ma+=Q.length}if(pb[za]){if(Q?l(A).empty=!1:l(A).unusedTokens.push(za),Ja=A,null!=Q&&b(Tb,za))Tb[za](Q,Ja._a,Ja,za)}else A._strict&&!Q&&l(A).unusedTokens.push(za)}l(A).charsLeftOver=fa-ma;0<F.length&&l(A).unusedInput.push(F);12>=A._a[Sa]&&!0===l(A).bigHour&&0<A._a[Sa]&&(l(A).bigHour=void 0);l(A).parsedDateParts=A._a.slice(0);l(A).meridiem=A._meridiem;F=A._a;K=Sa;fa=A._locale;oa=A._a[Sa];
ma=A._meridiem;null!=ma&&(null!=fa.meridiemHour?oa=fa.meridiemHour(oa,ma):null!=fa.isPM&&((fa=fa.isPM(ma))&&12>oa&&(oa+=12),fa||12!==oa||(oa=0)));F[K]=oa;F=l(A).era;null!==F&&(A._a[Ya]=A._locale.erasConvertYear(F,A._a[Ya]));Ka(A);xa(A)}}function Ga(A){if(!A._d){var F=O(A._i);A._a=c([F.year,F.month,void 0===F.day?F.date:F.day,F.hour,F.minute,F.second,F.millisecond],function(K){return K&&parseInt(K,10)});Ka(A)}}function Oa(A){var F=A._i,K=A._f;A._locale=A._locale||qa(A._l);if(null===F||void 0===K&&
""===F)return r({nullInput:!0});"string"===typeof F&&(A._i=F=A._locale.preparse(F));if(v(F))return new w(xa(F));if(d(F))A._d=F;else if(q(K)){var Q=!1;if(0===A._f.length)l(A).invalidFormat=!0,A._d=new Date(NaN);else{for(F=0;F<A._f.length;F++){K=0;var fa=!1;var ma=t({},A);null!=A._useUTC&&(ma._useUTC=A._useUTC);ma._f=A._f[F];Xa(ma);n(ma)&&(fa=!0);K+=l(ma).charsLeftOver;K+=10*l(ma).unusedTokens.length;l(ma).score=K;if(Q)K<oa&&(oa=K,za=ma);else if(null==oa||K<oa||fa){var oa=K;var za=ma;fa&&(Q=!0)}}f(A,
za||ma)}}else K?Xa(A):Ta(A);n(A)||(A._d=null);return A}function Ta(A){var F=A._i;h(F)?A._d=new Date(m.now()):d(F)?A._d=new Date(F.valueOf()):"string"===typeof F?Za(A):q(F)?(A._a=c(F.slice(0),function(K){return parseInt(K,10)}),Ka(A)):a(F)?Ga(A):k(F)?A._d=new Date(F):m.createFromInputFallback(A)}function Pa(A,F,K,Q,fa){var ma={};if(!0===F||!1===F)Q=F,F=void 0;if(!0===K||!1===K)Q=K,K=void 0;if(a(A)&&g(A)||q(A)&&0===A.length)A=void 0;ma._isAMomentObject=!0;ma._useUTC=ma._isUTC=fa;ma._l=K;ma._i=A;ma._f=
F;ma._strict=Q;A=new w(xa(Oa(ma)));A._nextDay&&(A.add(1,"d"),A._nextDay=void 0);return A}function na(A,F,K,Q){return Pa(A,F,K,Q,!1)}function Ia(A,F){var K;1===F.length&&q(F[0])&&(F=F[0]);if(!F.length)return na();var Q=F[0];for(K=1;K<F.length;++K)if(!F[K].isValid()||F[K][A](Q))Q=F[K];return Q}function ob(A){var F=O(A);A=F.year||0;var K=F.quarter||0,Q=F.month||0,fa=F.week||F.isoWeek||0,ma=F.day||0,oa=F.hour||0,za=F.minute||0,Ja=F.second||0,Ea=F.millisecond||0;a:{var Ra,ec=!1;for(Ra in F)if(b(F,Ra)&&
(-1===Qa.call(Ab,Ra)||null!=F[Ra]&&isNaN(F[Ra]))){F=!1;break a}for(Ra=0;Ra<Ab.length;++Ra)if(F[Ab[Ra]]){if(ec){F=!1;break a}parseFloat(F[Ab[Ra]])!==P(F[Ab[Ra]])&&(ec=!0)}F=!0}this._isValid=F;this._milliseconds=+Ea+1E3*Ja+6E4*za+36E5*oa;this._days=+ma+7*fa;this._months=+Q+3*K+12*A;this._data={};this._locale=qa();this._bubble()}function $a(A){return A instanceof ob}function ub(A){return 0>A?-1*Math.round(-1*A):Math.round(A)}function Cb(A,F){D(A,0,0,function(){var K=this.utcOffset(),Q="+";0>K&&(K=-K,
Q="-");return Q+u(~~(K/60),2)+F+u(~~K%60,2)})}function vb(A,F){A=(F||"").match(A);if(null===A)return null;A=((A[A.length-1]||[])+"").match(Kc)||["-",0,0];F=+(60*A[1])+P(A[2]);return 0===F?0:"+"===A[0]?F:-F}function wb(A,F){return F._isUTC?(F=F.clone(),A=(v(A)||d(A)?A.valueOf():na(A).valueOf())-F.valueOf(),F._d.setTime(F._d.valueOf()+A),m.updateOffset(F,!1),F):na(A).local()}function lb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function ab(A,F){var K=A,Q=null;$a(A)?K={ms:A._milliseconds,
d:A._days,M:A._months}:k(A)||!isNaN(+A)?(K={},F?K[F]=+A:K.milliseconds=+A):(Q=Lc.exec(A))?(K="-"===Q[1]?-1:1,K={y:0,d:P(Q[db])*K,h:P(Q[Sa])*K,m:P(Q[cb])*K,s:P(Q[gb])*K,ms:P(ub(1E3*Q[mb]))*K}):(Q=Mc.exec(A))?(K="-"===Q[1]?-1:1,K={y:eb(Q[2],K),M:eb(Q[3],K),w:eb(Q[4],K),d:eb(Q[5],K),h:eb(Q[6],K),m:eb(Q[7],K),s:eb(Q[8],K)}):null==K?K={}:"object"===typeof K&&("from"in K||"to"in K)&&(Q=na(K.from),K=na(K.to),Q.isValid()&&K.isValid()?(K=wb(K,Q),Q.isBefore(K)?K=Ua(Q,K):(K=Ua(K,Q),K.milliseconds=-K.milliseconds,
K.months=-K.months),Q=K):Q={milliseconds:0,months:0},K={},K.ms=Q.milliseconds,K.M=Q.months);K=new ob(K);$a(A)&&b(A,"_locale")&&(K._locale=A._locale);$a(A)&&b(A,"_isValid")&&(K._isValid=A._isValid);return K}function eb(A,F){A=A&&parseFloat(A.replace(",","."));return(isNaN(A)?0:A)*F}function Ua(A,F){var K={};K.months=F.month()-A.month()+12*(F.year()-A.year());A.clone().add(K.months,"M").isAfter(F)&&--K.months;K.milliseconds=+F-+A.clone().add(K.months,"M");return K}function fc(A,F){return function(K,
Q){if(null!==Q&&!isNaN(+Q)){x(F,"moment()."+F+"(period, number) is deprecated. Please use moment()."+F+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var fa=K;K=Q;Q=fa}K=ab(K,Q);gc(this,K,A);return this}}function gc(A,F,K,Q){var fa=F._milliseconds,ma=ub(F._days);F=ub(F._months);A.isValid()&&(Q=null==Q?!0:Q,F&&ta(A,X(A,"Month")+F*K),ma&&R(A,"Date",X(A,"Date")+ma*K),fa&&A._d.setTime(A._d.valueOf()+fa*K),Q&&m.updateOffset(A,ma||F))}function hc(A){return"string"===
typeof A||A instanceof String}function Nc(A){var F=q(A),K=!1;F&&(K=0===A.filter(function(Q){return!k(Q)&&hc(A)}).length);return F&&K}function Fb(A,F){if(A.date()<F.date())return-Fb(F,A);var K=12*(F.year()-A.year())+(F.month()-A.month()),Q=A.clone().add(K,"months");0>F-Q?(A=A.clone().add(K-1,"months"),F=(F-Q)/(Q-A)):(A=A.clone().add(K+1,"months"),F=(F-Q)/(A-Q));return-(K+F)||0}function ic(A){if(void 0===A)return this._locale._abbr;A=qa(A);null!=A&&(this._locale=A);return this}function jc(){return this._locale}
function qb(A,F){return(A%F+F)%F}function kc(A,F,K){return 100>A&&0<=A?new Date(A+400,F,K)-lc:(new Date(A,F,K)).valueOf()}function mc(A,F,K){return 100>A&&0<=A?Date.UTC(A+400,F,K)-lc:Date.UTC(A,F,K)}function Vb(A,F){return F.erasAbbrRegex(A)}function Wb(){var A=[],F=[],K=[],Q=[],fa,ma=this.eras();var oa=0;for(fa=ma.length;oa<fa;++oa)F.push(aa(ma[oa].name)),A.push(aa(ma[oa].abbr)),K.push(aa(ma[oa].narrow)),Q.push(aa(ma[oa].name)),Q.push(aa(ma[oa].abbr)),Q.push(aa(ma[oa].narrow));this._erasRegex=new RegExp("^("+
Q.join("|")+")","i");this._erasNameRegex=new RegExp("^("+F.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+A.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+K.join("|")+")","i")}function Gb(A,F){D(0,[A,A.length],0,F)}function nc(A,F,K,Q,fa){if(null==A)return ia(this,Q,fa).year;var ma=ea(A,Q,fa);F>ma&&(F=ma);A=ca(A,F,K,Q,fa);A=U(A.year,0,A.dayOfYear);this.year(A.getUTCFullYear());this.month(A.getUTCMonth());this.date(A.getUTCDate());return this}function Oc(A,F){F[mb]=P(1E3*("0."+A))}
function oc(A){return A}function Hb(A,F,K,Q){var fa=qa();F=e().set(Q,F);return fa[K](F,A)}function pc(A,F,K){k(A)&&(F=A,A=void 0);A=A||"";if(null!=F)return Hb(A,F,K,"month");var Q=[];for(F=0;12>F;F++)Q[F]=Hb(A,F,K,"month");return Q}function Xb(A,F,K,Q){"boolean"!==typeof A&&(K=F=A,A=!1);k(F)&&(K=F,F=void 0);F=F||"";var fa=qa();A=A?fa._week.dow:0;fa=[];if(null!=K)return Hb(F,(K+A)%7,Q,"day");for(K=0;7>K;K++)fa[K]=Hb(F,(K+A)%7,Q,"day");return fa}function qc(A,F,K,Q){F=ab(F,K);A._milliseconds+=Q*F._milliseconds;
A._days+=Q*F._days;A._months+=Q*F._months;return A._bubble()}function rc(A){return 0>A?Math.floor(A):Math.ceil(A)}function hb(A){return function(){return this.as(A)}}function nb(A){return function(){return this.isValid()?this._data[A]:NaN}}function Pc(A,F,K,Q,fa){return fa.relativeTime(F||1,!!K,A,Q)}function rb(A){return(0<A)-(0>A)||+A}function Ib(){if(!this.isValid())return this.localeData().invalidDate();var A=Yb(this._milliseconds)/1E3,F=Yb(this._days),K=Yb(this._months),Q=this.asSeconds();if(!Q)return"P0D";
var fa=ba(A/60);var ma=ba(fa/60);A%=60;fa%=60;var oa=ba(K/12);K%=12;var za=A?A.toFixed(3).replace(/\.?0+$/,""):"";var Ja=0>Q?"-":"";var Ea=rb(this._months)!==rb(Q)?"-":"";var Ra=rb(this._days)!==rb(Q)?"-":"";Q=rb(this._milliseconds)!==rb(Q)?"-":"";return Ja+"P"+(oa?Ea+oa+"Y":"")+(K?Ea+K+"M":"")+(F?Ra+F+"D":"")+(ma||fa||A?"T":"")+(ma?Q+ma+"H":"")+(fa?Q+fa+"M":"")+(A?Q+za+"S":"")}var Bc=Array.prototype.some?Array.prototype.some:function(A){var F=Object(this),K=F.length>>>0,Q;for(Q=0;Q<K;Q++)if(Q in
F&&A.call(this,F[Q],Q,F))return!0;return!1};var Ob=m.momentProperties=[],Pb=!1,ac={};m.suppressDeprecationWarnings=!1;m.deprecationHandler=null;var Qc=Object.keys?Object.keys:function(A){var F,K=[];for(F in A)b(A,F)&&K.push(F);return K};var Qb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Db=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rb={},pb=
{},xb={},Va={},sc=/\d/,bb=/\d\d/,tc=/\d{3}/,Zb=/\d{4}/,Jb=/[+-]?\d{6}/,La=/\d\d?/,uc=/\d\d\d\d?/,vc=/\d\d\d\d\d\d?/,Kb=/\d{1,3}/,$b=/\d{1,4}/,Lb=/[+-]?\d{1,6}/,sb=/\d+/,Mb=/[+-]?\d+/,Rc=/Z|[+-]\d\d:?\d\d/gi,Nb=/Z|[+-]\d\d(?::?\d\d)?/gi,Bb=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var Sb={};var Tb={},Ya=0,fb=1,db=2,Sa=3,cb=4,gb=5,mb=6,Cc=7,Dc=8;var Qa=Array.prototype.indexOf?Array.prototype.indexOf:
function(A){var F;for(F=0;F<this.length;++F)if(this[F]===A)return F;return-1};D("M",["MM",2],"Mo",function(){return this.month()+1});D("MMM",0,0,function(A){return this.localeData().monthsShort(this,A)});D("MMMM",0,0,function(A){return this.localeData().months(this,A)});H("month","M");Va.month=8;V("M",La);V("MM",La,bb);V("MMM",function(A,F){return F.monthsShortRegex(A)});V("MMMM",function(A,F){return F.monthsRegex(A)});ja(["M","MM"],function(A,F){F[fb]=P(A)-1});ja(["MMM","MMMM"],function(A,F,K,Q){Q=
K._locale.monthsParse(A,Q,K._strict);null!=Q?F[fb]=Q:l(K).invalidMonth=A});var cc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),wc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;D("Y",0,0,function(){var A=this.year();return 9999>=A?u(A,4):"+"+A});D(0,["YY",2],0,function(){return this.year()%100});D(0,["YYYY",4],0,"year");D(0,["YYYYY",5],0,"year");D(0,["YYYYYY",6,!0],0,"year");H("year","y");Va.year=1;V("Y",Mb);V("YY",La,bb);V("YYYY",$b,Zb);V("YYYYY",Lb,Jb);V("YYYYYY",Lb,Jb);ja(["YYYYY","YYYYYY"],Ya);
ja("YYYY",function(A,F){F[Ya]=2===A.length?m.parseTwoDigitYear(A):P(A)});ja("YY",function(A,F){F[Ya]=m.parseTwoDigitYear(A)});ja("Y",function(A,F){F[Ya]=parseInt(A,10)});m.parseTwoDigitYear=function(A){return P(A)+(68<P(A)?1900:2E3)};var xc=ha("FullYear",!0);D("w",["ww",2],"wo","week");D("W",["WW",2],"Wo","isoWeek");H("week","w");H("isoWeek","W");Va.week=5;Va.isoWeek=5;V("w",La);V("ww",La,bb);V("W",La);V("WW",La,bb);la(["w","ww","W","WW"],function(A,F,K,Q){F[Q.substr(0,1)]=P(A)});D("d",0,"do","day");
D("dd",0,0,function(A){return this.localeData().weekdaysMin(this,A)});D("ddd",0,0,function(A){return this.localeData().weekdaysShort(this,A)});D("dddd",0,0,function(A){return this.localeData().weekdays(this,A)});D("e",0,0,"weekday");D("E",0,0,"isoWeekday");H("day","d");H("weekday","e");H("isoWeekday","E");Va.day=11;Va.weekday=11;Va.isoWeekday=11;V("d",La);V("e",La);V("E",La);V("dd",function(A,F){return F.weekdaysMinRegex(A)});V("ddd",function(A,F){return F.weekdaysShortRegex(A)});V("dddd",function(A,
F){return F.weekdaysRegex(A)});la(["dd","ddd","dddd"],function(A,F,K,Q){Q=K._locale.weekdaysParse(A,Q,K._strict);null!=Q?F.d=Q:l(K).invalidWeekday=A});la(["d","e","E"],function(A,F,K,Q){F[Q]=P(A)});var dc="Sun Mon Tue Wed Thu Fri Sat".split(" ");D("H",["HH",2],0,"hour");D("h",["hh",2],0,Y);D("k",["kk",2],0,function(){return this.hours()||24});D("hmm",0,0,function(){return""+Y.apply(this)+u(this.minutes(),2)});D("hmmss",0,0,function(){return""+Y.apply(this)+u(this.minutes(),2)+u(this.seconds(),2)});
D("Hmm",0,0,function(){return""+this.hours()+u(this.minutes(),2)});D("Hmmss",0,0,function(){return""+this.hours()+u(this.minutes(),2)+u(this.seconds(),2)});da("a",!0);da("A",!1);H("hour","h");Va.hour=13;V("a",ka);V("A",ka);V("H",La);V("h",La);V("k",La);V("HH",La,bb);V("hh",La,bb);V("kk",La,bb);V("hmm",uc);V("hmmss",vc);V("Hmm",uc);V("Hmmss",vc);ja(["H","HH"],Sa);ja(["k","kk"],function(A,F,K){A=P(A);F[Sa]=24===A?0:A});ja(["a","A"],function(A,F,K){K._isPm=K._locale.isPM(A);K._meridiem=A});ja(["h","hh"],
function(A,F,K){F[Sa]=P(A);l(K).bigHour=!0});ja("hmm",function(A,F,K){var Q=A.length-2;F[Sa]=P(A.substr(0,Q));F[cb]=P(A.substr(Q));l(K).bigHour=!0});ja("hmmss",function(A,F,K){var Q=A.length-4,fa=A.length-2;F[Sa]=P(A.substr(0,Q));F[cb]=P(A.substr(Q,2));F[gb]=P(A.substr(fa));l(K).bigHour=!0});ja("Hmm",function(A,F,K){K=A.length-2;F[Sa]=P(A.substr(0,K));F[cb]=P(A.substr(K))});ja("Hmmss",function(A,F,K){K=A.length-4;var Q=A.length-2;F[Sa]=P(A.substr(0,K));F[cb]=P(A.substr(K,2));F[gb]=P(A.substr(Q))});
var Sc=ha("Hours",!0),bc={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",
hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:cc,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:dc,meridiemParse:/[ap]\.?m?\.?/i},Na={},zb={},yb,Ec=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
Fc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Gc=/Z|[+-]\d\d(?::?\d\d)?/,Eb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",
/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ub=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Jc=/^\/?Date\((-?\d+)/i,Hc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,
Ic={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};m.createFromInputFallback=y("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(A){A._d=new Date(A._i+(A._useUTC?" UTC":""))});m.ISO_8601=function(){};m.RFC_2822=function(){};
var Tc=y("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var A=na.apply(null,arguments);return this.isValid()&&A.isValid()?A<this?this:A:r()}),Uc=y("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var A=na.apply(null,arguments);return this.isValid()&&A.isValid()?A>this?this:A:r()}),Ab="year quarter month week day hour minute second millisecond".split(" ");Cb("Z",":");Cb("ZZ",
"");V("Z",Nb);V("ZZ",Nb);ja(["Z","ZZ"],function(A,F,K){K._useUTC=!0;K._tzm=vb(Nb,A)});var Kc=/([\+\-]|\d\d)/gi;m.updateOffset=function(){};var Lc=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Mc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;ab.fn=ob.prototype;ab.invalid=function(){return ab(NaN)};var Vc=fc(1,"add"),Wc=fc(-1,"subtract");m.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";
m.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var yc=y("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(A){return void 0===A?this.localeData():this.locale(A)}),lc=126227808E5;D("N",0,0,"eraAbbr");D("NN",0,0,"eraAbbr");D("NNN",0,0,"eraAbbr");D("NNNN",0,0,"eraName");D("NNNNN",0,0,"eraNarrow");D("y",["y",1],"yo","eraYear");D("y",["yy",2],0,"eraYear");D("y",["yyy",3],0,"eraYear");D("y",["yyyy",4],0,
"eraYear");V("N",Vb);V("NN",Vb);V("NNN",Vb);V("NNNN",function(A,F){return F.erasNameRegex(A)});V("NNNNN",function(A,F){return F.erasNarrowRegex(A)});ja(["N","NN","NNN","NNNN","NNNNN"],function(A,F,K,Q){(F=K._locale.erasParse(A,Q,K._strict))?l(K).era=F:l(K).invalidEra=A});V("y",sb);V("yy",sb);V("yyy",sb);V("yyyy",sb);V("yo",function(A,F){return F._eraYearOrdinalRegex||sb});ja(["y","yy","yyy","yyyy"],Ya);ja(["yo"],function(A,F,K,Q){var fa;K._locale._eraYearOrdinalRegex&&(fa=A.match(K._locale._eraYearOrdinalRegex));
F[Ya]=K._locale.eraYearOrdinalParse?K._locale.eraYearOrdinalParse(A,fa):parseInt(A,10)});D(0,["gg",2],0,function(){return this.weekYear()%100});D(0,["GG",2],0,function(){return this.isoWeekYear()%100});Gb("gggg","weekYear");Gb("ggggg","weekYear");Gb("GGGG","isoWeekYear");Gb("GGGGG","isoWeekYear");H("weekYear","gg");H("isoWeekYear","GG");Va.weekYear=1;Va.isoWeekYear=1;V("G",Mb);V("g",Mb);V("GG",La,bb);V("gg",La,bb);V("GGGG",$b,Zb);V("gggg",$b,Zb);V("GGGGG",Lb,Jb);V("ggggg",Lb,Jb);la(["gggg","ggggg",
"GGGG","GGGGG"],function(A,F,K,Q){F[Q.substr(0,2)]=P(A)});la(["gg","GG"],function(A,F,K,Q){F[Q]=m.parseTwoDigitYear(A)});D("Q",0,"Qo","quarter");H("quarter","Q");Va.quarter=7;V("Q",sc);ja("Q",function(A,F){F[fb]=3*(P(A)-1)});D("D",["DD",2],"Do","date");H("date","D");Va.date=9;V("D",La);V("DD",La,bb);V("Do",function(A,F){return A?F._dayOfMonthOrdinalParse||F._ordinalParse:F._dayOfMonthOrdinalParseLenient});ja(["D","DD"],db);ja("Do",function(A,F){F[db]=P(A.match(La)[0])});var zc=ha("Date",!0);D("DDD",
["DDDD",3],"DDDo","dayOfYear");H("dayOfYear","DDD");Va.dayOfYear=4;V("DDD",Kb);V("DDDD",tc);ja(["DDD","DDDD"],function(A,F,K){K._dayOfYear=P(A)});D("m",["mm",2],0,"minute");H("minute","m");Va.minute=14;V("m",La);V("mm",La,bb);ja(["m","mm"],cb);var Xc=ha("Minutes",!1);D("s",["ss",2],0,"second");H("second","s");Va.second=15;V("s",La);V("ss",La,bb);ja(["s","ss"],gb);var Yc=ha("Seconds",!1);D("S",0,0,function(){return~~(this.millisecond()/100)});D(0,["SS",2],0,function(){return~~(this.millisecond()/10)});
D(0,["SSS",3],0,"millisecond");D(0,["SSSS",4],0,function(){return 10*this.millisecond()});D(0,["SSSSS",5],0,function(){return 100*this.millisecond()});D(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});D(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});D(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});D(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});H("millisecond","ms");Va.millisecond=16;V("S",Kb,sc);V("SS",Kb,bb);V("SSS",Kb,tc);var kb;for(kb=
"SSSS";9>=kb.length;kb+="S")V(kb,sb);for(kb="S";9>=kb.length;kb+="S")ja(kb,Oc);var Zc=ha("Milliseconds",!1);D("z",0,0,"zoneAbbr");D("zz",0,0,"zoneName");var pa=w.prototype;pa.add=Vc;pa.calendar=function(A,F){if(1===arguments.length)if(arguments[0]){var K=arguments[0],Q;if(!(Q=v(K)||d(K)||hc(K)||k(K)||Nc(K))){Q=a(K)&&!g(K);var fa=!1,ma="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),oa;for(oa=0;oa<ma.length;oa+=
1){var za=ma[oa];fa=fa||b(K,za)}Q=Q&&fa}if(Q||null===K||void 0===K)A=arguments[0],F=void 0;else{K=arguments[0];Q=a(K)&&!g(K);fa=!1;ma="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(oa=0;oa<ma.length;oa+=1)za=ma[oa],fa=fa||b(K,za);Q&&fa&&(F=arguments[0],A=void 0)}}else F=A=void 0;K=A||na();Q=wb(K,this).startOf("day");Q=m.calendarFormat(this,Q)||"sameElse";fa=F&&(B(F[Q])?F[Q].call(this,K):F[Q]);return this.format(fa||this.localeData().calendar(Q,this,na(K)))};pa.clone=function(){return new w(this)};
pa.diff=function(A,F,K){if(!this.isValid())return NaN;A=wb(A,this);if(!A.isValid())return NaN;var Q=6E4*(A.utcOffset()-this.utcOffset());F=L(F);switch(F){case "year":F=Fb(this,A)/12;break;case "month":F=Fb(this,A);break;case "quarter":F=Fb(this,A)/3;break;case "second":F=(this-A)/1E3;break;case "minute":F=(this-A)/6E4;break;case "hour":F=(this-A)/36E5;break;case "day":F=(this-A-Q)/864E5;break;case "week":F=(this-A-Q)/6048E5;break;default:F=this-A}return K?F:ba(F)};pa.endOf=function(A){A=L(A);if(void 0===
A||"millisecond"===A||!this.isValid())return this;var F=this._isUTC?mc:kc;switch(A){case "year":var K=F(this.year()+1,0,1)-1;break;case "quarter":K=F(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":K=F(this.year(),this.month()+1,1)-1;break;case "week":K=F(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":K=F(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":K=F(this.year(),this.month(),this.date()+1)-1;break;
case "hour":K=this._d.valueOf();K+=36E5-qb(K+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":K=this._d.valueOf();K+=6E4-qb(K,6E4)-1;break;case "second":K=this._d.valueOf(),K+=1E3-qb(K,1E3)-1}this._d.setTime(K);m.updateOffset(this,!0);return this};pa.format=function(A){A||(A=this.isUtc()?m.defaultFormatUtc:m.defaultFormat);A=E(this,A);return this.localeData().postformat(A)};pa.from=function(A,F){return this.isValid()&&(v(A)&&A.isValid()||na(A).isValid())?ab({to:this,from:A}).locale(this.locale()).humanize(!F):
this.localeData().invalidDate()};pa.fromNow=function(A){return this.from(na(),A)};pa.to=function(A,F){return this.isValid()&&(v(A)&&A.isValid()||na(A).isValid())?ab({from:this,to:A}).locale(this.locale()).humanize(!F):this.localeData().invalidDate()};pa.toNow=function(A){return this.to(na(),A)};pa.get=function(A){A=L(A);return B(this[A])?this[A]():this};pa.invalidAt=function(){return l(this).overflow};pa.isAfter=function(A,F){A=v(A)?A:na(A);if(!this.isValid()||!A.isValid())return!1;F=L(F)||"millisecond";
return"millisecond"===F?this.valueOf()>A.valueOf():A.valueOf()<this.clone().startOf(F).valueOf()};pa.isBefore=function(A,F){A=v(A)?A:na(A);if(!this.isValid()||!A.isValid())return!1;F=L(F)||"millisecond";return"millisecond"===F?this.valueOf()<A.valueOf():this.clone().endOf(F).valueOf()<A.valueOf()};pa.isBetween=function(A,F,K,Q){A=v(A)?A:na(A);F=v(F)?F:na(F);if(!(this.isValid()&&A.isValid()&&F.isValid()))return!1;Q=Q||"()";return("("===Q[0]?this.isAfter(A,K):!this.isBefore(A,K))&&(")"===Q[1]?this.isBefore(F,
K):!this.isAfter(F,K))};pa.isSame=function(A,F){A=v(A)?A:na(A);if(!this.isValid()||!A.isValid())return!1;F=L(F)||"millisecond";if("millisecond"===F)return this.valueOf()===A.valueOf();A=A.valueOf();return this.clone().startOf(F).valueOf()<=A&&A<=this.clone().endOf(F).valueOf()};pa.isSameOrAfter=function(A,F){return this.isSame(A,F)||this.isAfter(A,F)};pa.isSameOrBefore=function(A,F){return this.isSame(A,F)||this.isBefore(A,F)};pa.isValid=function(){return n(this)};pa.lang=yc;pa.locale=ic;pa.localeData=
jc;pa.max=Uc;pa.min=Tc;pa.parsingFlags=function(){return f({},l(this))};pa.set=function(A,F){if("object"===typeof A){A=O(A);F=W(A);var K;for(K=0;K<F.length;K++)this[F[K].unit](A[F[K].unit])}else if(A=L(A),B(this[A]))return this[A](F);return this};pa.startOf=function(A){A=L(A);if(void 0===A||"millisecond"===A||!this.isValid())return this;var F=this._isUTC?mc:kc;switch(A){case "year":var K=F(this.year(),0,1);break;case "quarter":K=F(this.year(),this.month()-this.month()%3,1);break;case "month":K=F(this.year(),
this.month(),1);break;case "week":K=F(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":K=F(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":K=F(this.year(),this.month(),this.date());break;case "hour":K=this._d.valueOf();K-=qb(K+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":K=this._d.valueOf();K-=qb(K,6E4);break;case "second":K=this._d.valueOf(),K-=qb(K,1E3)}this._d.setTime(K);m.updateOffset(this,!0);return this};pa.subtract=
Wc;pa.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};pa.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};pa.toDate=function(){return new Date(this.valueOf())};pa.toISOString=function(A){if(!this.isValid())return null;var F=(A=!0!==A)?this.clone().utc():this;return 0>F.year()||9999<F.year()?
E(F,A?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):B(Date.prototype.toISOString)?A?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",E(F,"Z")):E(F,A?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};pa.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var A="moment",F="";this.isLocal()||(A=0===this.utcOffset()?"moment.utc":"moment.parseZone",F="Z");A="["+A+'("]';var K=0<=this.year()&&
9999>=this.year()?"YYYY":"YYYYYY";return this.format(A+K+"-MM-DD[T]HH:mm:ss.SSS"+(F+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol.for&&(pa[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});pa.toJSON=function(){return this.isValid()?this.toISOString():null};pa.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};pa.unix=function(){return Math.floor(this.valueOf()/1E3)};pa.valueOf=function(){return this._d.valueOf()-
6E4*(this._offset||0)};pa.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};pa.eraName=function(){var A,F=this.localeData().eras();var K=0;for(A=F.length;K<A;++K){var Q=this.clone().startOf("day").valueOf();if(F[K].since<=Q&&Q<=F[K].until||F[K].until<=Q&&Q<=F[K].since)return F[K].name}return""};pa.eraNarrow=function(){var A,F=this.localeData().eras();var K=0;for(A=F.length;K<A;++K){var Q=this.clone().startOf("day").valueOf();if(F[K].since<=
Q&&Q<=F[K].until||F[K].until<=Q&&Q<=F[K].since)return F[K].narrow}return""};pa.eraAbbr=function(){var A,F=this.localeData().eras();var K=0;for(A=F.length;K<A;++K){var Q=this.clone().startOf("day").valueOf();if(F[K].since<=Q&&Q<=F[K].until||F[K].until<=Q&&Q<=F[K].since)return F[K].abbr}return""};pa.eraYear=function(){var A,F=this.localeData().eras();var K=0;for(A=F.length;K<A;++K){var Q=F[K].since<=F[K].until?1:-1;var fa=this.clone().startOf("day").valueOf();if(F[K].since<=fa&&fa<=F[K].until||F[K].until<=
fa&&fa<=F[K].since)return(this.year()-m(F[K].since).year())*Q+F[K].offset}return this.year()};pa.year=xc;pa.isLeapYear=function(){return Z(this.year())};pa.weekYear=function(A){return nc.call(this,A,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};pa.isoWeekYear=function(A){return nc.call(this,A,this.isoWeek(),this.isoWeekday(),1,4)};pa.quarter=pa.quarters=function(A){return null==A?Math.ceil((this.month()+1)/3):this.month(3*(A-1)+this.month()%3)};pa.month=va;pa.daysInMonth=
function(){return ra(this.year(),this.month())};pa.week=pa.weeks=function(A){var F=this.localeData().week(this);return null==A?F:this.add(7*(A-F),"d")};pa.isoWeek=pa.isoWeeks=function(A){var F=ia(this,1,4).week;return null==A?F:this.add(7*(A-F),"d")};pa.weeksInYear=function(){var A=this.localeData()._week;return ea(this.year(),A.dow,A.doy)};pa.weeksInWeekYear=function(){var A=this.localeData()._week;return ea(this.weekYear(),A.dow,A.doy)};pa.isoWeeksInYear=function(){return ea(this.year(),1,4)};pa.isoWeeksInISOWeekYear=
function(){return ea(this.isoWeekYear(),1,4)};pa.date=zc;pa.day=pa.days=function(A){if(!this.isValid())return null!=A?this:NaN;var F=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=A){var K=this.localeData();"string"===typeof A&&(isNaN(A)?(A=K.weekdaysParse(A),A="number"===typeof A?A:null):A=parseInt(A,10));return this.add(A-F,"d")}return F};pa.weekday=function(A){if(!this.isValid())return null!=A?this:NaN;var F=(this.day()+7-this.localeData()._week.dow)%7;return null==A?F:this.add(A-F,
"d")};pa.isoWeekday=function(A){if(!this.isValid())return null!=A?this:NaN;if(null!=A){var F=this.localeData();A="string"===typeof A?F.weekdaysParse(A)%7||7:isNaN(A)?null:A;return this.day(this.day()%7?A:A-7)}return this.day()||7};pa.dayOfYear=function(A){var F=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==A?F:this.add(A-F,"d")};pa.hour=pa.hours=Sc;pa.minute=pa.minutes=Xc;pa.second=pa.seconds=Yc;pa.millisecond=pa.milliseconds=Zc;pa.utcOffset=function(A,
F,K){var Q=this._offset||0,fa;if(!this.isValid())return null!=A?this:NaN;if(null!=A){if("string"===typeof A){if(A=vb(Nb,A),null===A)return this}else 16>Math.abs(A)&&!K&&(A*=60);!this._isUTC&&F&&(fa=-Math.round(this._d.getTimezoneOffset()));this._offset=A;this._isUTC=!0;null!=fa&&this.add(fa,"m");Q!==A&&(!F||this._changeInProgress?gc(this,ab(A-Q,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,m.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?Q:-Math.round(this._d.getTimezoneOffset())};
pa.utc=function(A){return this.utcOffset(0,A)};pa.local=function(A){this._isUTC&&(this.utcOffset(0,A),this._isUTC=!1,A&&this.subtract(-Math.round(this._d.getTimezoneOffset()),"m"));return this};pa.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var A=vb(Rc,this._i);null!=A?this.utcOffset(A):this.utcOffset(0,!0)}return this};pa.hasAlignedHourOffset=function(A){if(!this.isValid())return!1;A=A?na(A).utcOffset():0;return 0===(this.utcOffset()-
A)%60};pa.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};pa.isLocal=function(){return this.isValid()?!this._isUTC:!1};pa.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};pa.isUtc=lb;pa.isUTC=lb;pa.zoneAbbr=function(){return this._isUTC?"UTC":""};pa.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};pa.dates=y("dates accessor is deprecated. Use date instead.",zc);pa.months=y("months accessor is deprecated. Use month instead",
va);pa.years=y("years accessor is deprecated. Use year instead",xc);pa.zone=y("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(A,F){return null!=A?("string"!==typeof A&&(A=-A),this.utcOffset(A,F),this):-this.utcOffset()});pa.isDSTShifted=y("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!h(this._isDSTShifted))return this._isDSTShifted;var A={};t(A,this);A=Oa(A);
if(A._a){var F=A._isUTC?e(A._a):na(A._a);var K;if(K=this.isValid()){A=A._a;F=F.toArray();K=Math.min(A.length,F.length);var Q=Math.abs(A.length-F.length),fa=0,ma;for(ma=0;ma<K;ma++)P(A[ma])!==P(F[ma])&&fa++;K=0<fa+Q}this._isDSTShifted=K}else this._isDSTShifted=!1;return this._isDSTShifted});var Ha=z.prototype;Ha.calendar=function(A,F,K){A=this._calendar[A]||this._calendar.sameElse;return B(A)?A.call(F,K):A};Ha.longDateFormat=function(A){var F=this._longDateFormat[A],K=this._longDateFormat[A.toUpperCase()];
if(F||!K)return F;this._longDateFormat[A]=K.match(Qb).map(function(Q){return"MMMM"===Q||"MM"===Q||"DD"===Q||"dddd"===Q?Q.slice(1):Q}).join("");return this._longDateFormat[A]};Ha.invalidDate=function(){return this._invalidDate};Ha.ordinal=function(A){return this._ordinal.replace("%d",A)};Ha.preparse=oc;Ha.postformat=oc;Ha.relativeTime=function(A,F,K,Q){var fa=this._relativeTime[K];return B(fa)?fa(A,F,K,Q):fa.replace(/%d/i,A)};Ha.pastFuture=function(A,F){A=this._relativeTime[0<A?"future":"past"];return B(A)?
A(F):A.replace(/%s/i,F)};Ha.set=function(A){var F;for(F in A)if(b(A,F)){var K=A[F];B(K)?this[F]=K:this["_"+F]=K}this._config=A;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};Ha.eras=function(A,F){var K=this._eras||qa("en")._eras;A=0;for(F=K.length;A<F;++A){switch(typeof K[A].since){case "string":var Q=m(K[A].since).startOf("day");K[A].since=Q.valueOf()}switch(typeof K[A].until){case "undefined":K[A].until=Infinity;
break;case "string":Q=m(K[A].until).startOf("day").valueOf(),K[A].until=Q.valueOf()}}return K};Ha.erasParse=function(A,F,K){var Q,fa=this.eras();A=A.toUpperCase();var ma=0;for(Q=fa.length;ma<Q;++ma){var oa=fa[ma].name.toUpperCase();var za=fa[ma].abbr.toUpperCase();var Ja=fa[ma].narrow.toUpperCase();if(K)switch(F){case "N":case "NN":case "NNN":if(za===A)return fa[ma];break;case "NNNN":if(oa===A)return fa[ma];break;case "NNNNN":if(Ja===A)return fa[ma]}else if(0<=[oa,za,Ja].indexOf(A))return fa[ma]}};
Ha.erasConvertYear=function(A,F){var K=A.since<=A.until?1:-1;return void 0===F?m(A.since).year():m(A.since).year()+(F-A.offset)*K};Ha.erasAbbrRegex=function(A){b(this,"_erasAbbrRegex")||Wb.call(this);return A?this._erasAbbrRegex:this._erasRegex};Ha.erasNameRegex=function(A){b(this,"_erasNameRegex")||Wb.call(this);return A?this._erasNameRegex:this._erasRegex};Ha.erasNarrowRegex=function(A){b(this,"_erasNarrowRegex")||Wb.call(this);return A?this._erasNarrowRegex:this._erasRegex};Ha.months=function(A,
F){return A?q(this._months)?this._months[A.month()]:this._months[(this._months.isFormat||wc).test(F)?"format":"standalone"][A.month()]:q(this._months)?this._months:this._months.standalone};Ha.monthsShort=function(A,F){return A?q(this._monthsShort)?this._monthsShort[A.month()]:this._monthsShort[wc.test(F)?"format":"standalone"][A.month()]:q(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};Ha.monthsParse=function(A,F,K){var Q;if(this._monthsParseExact){a:{A=A.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=
[],this._longMonthsParse=[],this._shortMonthsParse=[],Q=0;12>Q;++Q){var fa=e([2E3,Q]);this._shortMonthsParse[Q]=this.monthsShort(fa,"").toLocaleLowerCase();this._longMonthsParse[Q]=this.months(fa,"").toLocaleLowerCase()}if(K)F="MMM"===F?Qa.call(this._shortMonthsParse,A):Qa.call(this._longMonthsParse,A);else if("MMM"===F){F=Qa.call(this._shortMonthsParse,A);if(-1!==F)break a;F=Qa.call(this._longMonthsParse,A)}else{F=Qa.call(this._longMonthsParse,A);if(-1!==F)break a;F=Qa.call(this._shortMonthsParse,
A)}F=-1!==F?F:null}return F}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(Q=0;12>Q;Q++)if(fa=e([2E3,Q]),K&&!this._longMonthsParse[Q]&&(this._longMonthsParse[Q]=new RegExp("^"+this.months(fa,"").replace(".","")+"$","i"),this._shortMonthsParse[Q]=new RegExp("^"+this.monthsShort(fa,"").replace(".","")+"$","i")),K||this._monthsParse[Q]||(fa="^"+this.months(fa,"")+"|^"+this.monthsShort(fa,""),this._monthsParse[Q]=new RegExp(fa.replace(".",""),"i")),K&&
"MMMM"===F&&this._longMonthsParse[Q].test(A)||K&&"MMM"===F&&this._shortMonthsParse[Q].test(A)||!K&&this._monthsParse[Q].test(A))return Q};Ha.monthsRegex=function(A){if(this._monthsParseExact)return b(this,"_monthsRegex")||Da.call(this),A?this._monthsStrictRegex:this._monthsRegex;b(this,"_monthsRegex")||(this._monthsRegex=Bb);return this._monthsStrictRegex&&A?this._monthsStrictRegex:this._monthsRegex};Ha.monthsShortRegex=function(A){if(this._monthsParseExact)return b(this,"_monthsRegex")||Da.call(this),
A?this._monthsShortStrictRegex:this._monthsShortRegex;b(this,"_monthsShortRegex")||(this._monthsShortRegex=Bb);return this._monthsShortStrictRegex&&A?this._monthsShortStrictRegex:this._monthsShortRegex};Ha.week=function(A){return ia(A,this._week.dow,this._week.doy).week};Ha.firstDayOfYear=function(){return this._week.doy};Ha.firstDayOfWeek=function(){return this._week.dow};Ha.weekdays=function(A,F){F=q(this._weekdays)?this._weekdays:this._weekdays[A&&!0!==A&&this._weekdays.isFormat.test(F)?"format":
"standalone"];return!0===A?sa(F,this._week.dow):A?F[A.day()]:F};Ha.weekdaysMin=function(A){return!0===A?sa(this._weekdaysMin,this._week.dow):A?this._weekdaysMin[A.day()]:this._weekdaysMin};Ha.weekdaysShort=function(A){return!0===A?sa(this._weekdaysShort,this._week.dow):A?this._weekdaysShort[A.day()]:this._weekdaysShort};Ha.weekdaysParse=function(A,F,K){var Q;if(this._weekdaysParseExact)return M.call(this,A,F,K);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=
[],this._fullWeekdaysParse=[]);for(Q=0;7>Q;Q++){var fa=e([2E3,1]).day(Q);K&&!this._fullWeekdaysParse[Q]&&(this._fullWeekdaysParse[Q]=new RegExp("^"+this.weekdays(fa,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[Q]=new RegExp("^"+this.weekdaysShort(fa,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[Q]=new RegExp("^"+this.weekdaysMin(fa,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[Q]||(fa="^"+this.weekdays(fa,"")+"|^"+this.weekdaysShort(fa,"")+"|^"+this.weekdaysMin(fa,""),
this._weekdaysParse[Q]=new RegExp(fa.replace(".",""),"i"));if(K&&"dddd"===F&&this._fullWeekdaysParse[Q].test(A)||K&&"ddd"===F&&this._shortWeekdaysParse[Q].test(A)||K&&"dd"===F&&this._minWeekdaysParse[Q].test(A)||!K&&this._weekdaysParse[Q].test(A))return Q}};Ha.weekdaysRegex=function(A){if(this._weekdaysParseExact)return b(this,"_weekdaysRegex")||N.call(this),A?this._weekdaysStrictRegex:this._weekdaysRegex;b(this,"_weekdaysRegex")||(this._weekdaysRegex=Bb);return this._weekdaysStrictRegex&&A?this._weekdaysStrictRegex:
this._weekdaysRegex};Ha.weekdaysShortRegex=function(A){if(this._weekdaysParseExact)return b(this,"_weekdaysRegex")||N.call(this),A?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;b(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Bb);return this._weekdaysShortStrictRegex&&A?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};Ha.weekdaysMinRegex=function(A){if(this._weekdaysParseExact)return b(this,"_weekdaysRegex")||N.call(this),A?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;
b(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Bb);return this._weekdaysMinStrictRegex&&A?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};Ha.isPM=function(A){return"p"===(A+"").toLowerCase().charAt(0)};Ha.meridiem=function(A,F,K){return 11<A?K?"pm":"PM":K?"am":"AM"};Ca("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,
ordinal:function(A){var F=A%10;F=1===P(A%100/10)?"th":1===F?"st":2===F?"nd":3===F?"rd":"th";return A+F}});m.lang=y("moment.lang is deprecated. Use moment.locale instead.",Ca);m.langData=y("moment.langData is deprecated. Use moment.localeData instead.",qa);var ib=Math.abs,$c=hb("ms"),ad=hb("s"),bd=hb("m"),cd=hb("h"),dd=hb("d"),ed=hb("w"),fd=hb("M"),gd=hb("Q"),hd=hb("y"),id=nb("milliseconds"),jd=nb("seconds"),kd=nb("minutes"),ld=nb("hours"),md=nb("days"),nd=nb("months"),od=nb("years"),jb=Math.round,
tb={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},Yb=Math.abs,Fa=ob.prototype;Fa.isValid=function(){return this._isValid};Fa.abs=function(){var A=this._data;this._milliseconds=ib(this._milliseconds);this._days=ib(this._days);this._months=ib(this._months);A.milliseconds=ib(A.milliseconds);A.seconds=ib(A.seconds);A.minutes=ib(A.minutes);A.hours=ib(A.hours);A.months=ib(A.months);A.years=ib(A.years);return this};Fa.add=function(A,F){return qc(this,A,F,1)};Fa.subtract=function(A,F){return qc(this,A,F,-1)};Fa.as=
function(A){if(!this.isValid())return NaN;var F=this._milliseconds;A=L(A);if("month"===A||"quarter"===A||"year"===A){var K=this._days+F/864E5;K=this._months+4800*K/146097;switch(A){case "month":return K;case "quarter":return K/3;case "year":return K/12}}else switch(K=this._days+Math.round(146097*this._months/4800),A){case "week":return K/7+F/6048E5;case "day":return K+F/864E5;case "hour":return 24*K+F/36E5;case "minute":return 1440*K+F/6E4;case "second":return 86400*K+F/1E3;case "millisecond":return Math.floor(864E5*
K)+F;default:throw Error("Unknown unit "+A);}};Fa.asMilliseconds=$c;Fa.asSeconds=ad;Fa.asMinutes=bd;Fa.asHours=cd;Fa.asDays=dd;Fa.asWeeks=ed;Fa.asMonths=fd;Fa.asQuarters=gd;Fa.asYears=hd;Fa.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*P(this._months/12):NaN};Fa._bubble=function(){var A=this._milliseconds,F=this._days,K=this._months,Q=this._data;0<=A&&0<=F&&0<=K||0>=A&&0>=F&&0>=K||(A+=864E5*rc(146097*K/4800+F),K=F=0);Q.milliseconds=A%1E3;
A=ba(A/1E3);Q.seconds=A%60;A=ba(A/60);Q.minutes=A%60;A=ba(A/60);Q.hours=A%24;F+=ba(A/24);A=ba(4800*F/146097);K+=A;F-=rc(146097*A/4800);A=ba(K/12);Q.days=F;Q.months=K%12;Q.years=A;return this};Fa.clone=function(){return ab(this)};Fa.get=function(A){A=L(A);return this.isValid()?this[A+"s"]():NaN};Fa.milliseconds=id;Fa.seconds=jd;Fa.minutes=kd;Fa.hours=ld;Fa.days=md;Fa.weeks=function(){return ba(this.days()/7)};Fa.months=nd;Fa.years=od;Fa.humanize=function(A,F){if(!this.isValid())return this.localeData().invalidDate();
var K=!1,Q=tb;"object"===typeof A&&(F=A,A=!1);"boolean"===typeof A&&(K=A);"object"===typeof F&&(Q=Object.assign({},tb,F),null!=F.s&&null==F.ss&&(Q.ss=F.s-1));A=this.localeData();F=!K;var fa=ab(this).abs(),ma=jb(fa.as("s")),oa=jb(fa.as("m")),za=jb(fa.as("h")),Ja=jb(fa.as("d")),Ea=jb(fa.as("M")),Ra=jb(fa.as("w"));fa=jb(fa.as("y"));ma=ma<=Q.ss&&["s",ma]||ma<Q.s&&["ss",ma]||1>=oa&&["m"]||oa<Q.m&&["mm",oa]||1>=za&&["h"]||za<Q.h&&["hh",za]||1>=Ja&&["d"]||Ja<Q.d&&["dd",Ja];null!=Q.w&&(ma=ma||1>=Ra&&["w"]||
Ra<Q.w&&["ww",Ra]);ma=ma||1>=Ea&&["M"]||Ea<Q.M&&["MM",Ea]||1>=fa&&["y"]||["yy",fa];ma[2]=F;ma[3]=0<+this;ma[4]=A;F=Pc.apply(null,ma);K&&(F=A.pastFuture(+this,F));return A.postformat(F)};Fa.toISOString=Ib;Fa.toString=Ib;Fa.toJSON=Ib;Fa.locale=ic;Fa.localeData=jc;Fa.toIsoString=y("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ib);Fa.lang=yc;D("X",0,0,"unix");D("x",0,0,"valueOf");V("x",Mb);V("X",/[+-]?\d+(\.\d{1,3})?/);ja("X",function(A,F,K){K._d=new Date(1E3*parseFloat(A))});
ja("x",function(A,F,K){K._d=new Date(P(A))});m.version="2.29.1";var Ac=na;m.fn=pa;m.min=function(){var A=[].slice.call(arguments,0);return Ia("isBefore",A)};m.max=function(){var A=[].slice.call(arguments,0);return Ia("isAfter",A)};m.now=function(){return Date.now?Date.now():+new Date};m.utc=e;m.unix=function(A){return na(1E3*A)};m.months=function(A,F){return pc(A,F,"months")};m.isDate=d;m.locale=Ca;m.invalid=r;m.duration=ab;m.isMoment=v;m.weekdays=function(A,F,K){return Xb(A,F,K,"weekdays")};m.parseZone=
function(){return na.apply(null,arguments).parseZone()};m.localeData=qa;m.isDuration=$a;m.monthsShort=function(A,F){return pc(A,F,"monthsShort")};m.weekdaysMin=function(A,F,K){return Xb(A,F,K,"weekdaysMin")};m.defineLocale=ya;m.updateLocale=function(A,F){if(null!=F){var K=bc;if(null!=Na[A]&&null!=Na[A].parentLocale)Na[A].set(p(Na[A]._config,F));else{var Q=Aa(A);null!=Q&&(K=Q._config);F=p(K,F);null==Q&&(F.abbr=A);F=new z(F);F.parentLocale=Na[A];Na[A]=F}Ca(A)}else null!=Na[A]&&(null!=Na[A].parentLocale?
(Na[A]=Na[A].parentLocale,A===Ca()&&Ca(A)):null!=Na[A]&&delete Na[A]);return Na[A]};m.locales=function(){return Qc(Na)};m.weekdaysShort=function(A,F,K){return Xb(A,F,K,"weekdaysShort")};m.normalizeUnits=L;m.relativeTimeRounding=function(A){return void 0===A?jb:"function"===typeof A?(jb=A,!0):!1};m.relativeTimeThreshold=function(A,F){if(void 0===tb[A])return!1;if(void 0===F)return tb[A];tb[A]=F;"s"===A&&(tb.ss=F-1);return!0};m.calendarFormat=function(A,F){A=A.diff(F,"days",!0);return-6>A?"sameElse":
-1>A?"lastWeek":0>A?"lastDay":1>A?"sameDay":2>A?"nextDay":7>A?"nextWeek":"sameElse"};m.prototype=pa;m.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return m})},"esri/layers/vectorTiles/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(m,q,a){function b(k,d){Array.isArray(d)?
(k[0]=d[0],k[1]=d[1],k[2]=d[2],k[3]=d[3]):(k[0]=d.r,k[1]=d.g,k[2]=d.b,k[3]=d.a);return k}function g(k,d,c){void 0===d&&(d=0);void 0===c&&(c=!1);var f=k[d+3];k[d+0]*=f;k[d+1]*=f;k[d+2]*=f;c||(k[d+3]*=255);return k}Object.defineProperty(q,"__esModule",{value:!0});q.white=[255,255,255,1];var h=[0,0,0,0];q.premultiplyAlpha=g;q.copyAndPremultiply=function(k){return g(b([],k))};q.premultiplyAlphaUint32=function(k){g(b(h,k));return a.i8888to32(h[0],h[1],h[2],h[3])};q.premultiplyAlphaRGBA=function(k){var d=
k.a;return a.i8888to32(k.r*d,k.g*d,k.b*d,255*d)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/number":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});var a=new Float32Array(1),b=new Uint32Array(a.buffer);q.nextHighestPowerOfTwo=function(g){g--;g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;g|=g>>16;g++;return g};q.toUint32=function(g){a[0]=g;return b[0]};q.i1616to32=function(g,h){return 65535&g|h<<16};q.i8888to32=function(g,h,k,d){return g&255|(h&255)<<
8|(k&255)<<16|d<<24};q.i8816to32=function(g,h,k){return g&255|(h&255)<<8|k<<16};q.numTo32=function(g){return g|0}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(m,q,a){Object.defineProperty(q,"__esModule",{value:!0});m=function(){function b(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}b.prototype.acquire=
function(g,h,k,d,c,f,e,l,n){this.color=g;this.haloColor=h;this.haloSize=k;this.size=d;this.angle=c;this.offsetX=f;this.offsetY=e;this.hAnchor=l;this.vAnchor=n};b.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};b.pool=new a(b);return b}();q.TextProperties=m})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../tiling/enums ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e){Object.defineProperty(q,"__esModule",{value:!0});m=function(l){function n(){var r=l.call(this)||this;r._initialized=!1;r._maxWidth=0;r._color=new Float32Array([1,0,0,1]);return r}a(n,l);n.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=
null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=null};n.prototype.draw=function(r,t){r=r.context;if(t.status!==k.TileStatus.INITIALIZED){this._initialized||this._initialize(r);r.bindVAO(this._outlineVertexArrayObject);r.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",t.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",t.tileTransform.displayCoord);
this._outlineProgram.setUniform1f("u_coord_range",512);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);r.setLineWidth(2);r.drawArrays(3,0,4);r.bindVAO();var w=this._getTexture(r,t);w&&(r.bindVAO(this._tileInfoVertexArrayObject),r.bindProgram(this._tileInfoProgram),r.bindTexture(w,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",t.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",t.tileTransform.displayCoord),
this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",w.descriptor.width,w.descriptor.height),r.drawArrays(5,0,4),r.bindVAO())}};n.prototype._initialize=function(r){if(this._initialized)return!0;var t={a_pos:0},w=new c(r,h.backgroundVS,h.backgroundFS,t),v=new c(r,h.tileInfoVS,h.tileInfoFS,t),y={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,
normalized:!1,divisor:0}]},x=new Int8Array([0,0,1,0,1,1,0,1]);x=d.createVertex(r,35044,x);x=new e(r,t,y,{geometry:x});var B=new Int8Array([0,0,1,0,0,1,1,1]);B=d.createVertex(r,35044,B);r=new e(r,t,y,{geometry:B});this._outlineProgram=w;this._tileInfoProgram=v;this._outlineVertexArrayObject=x;this._tileInfoVertexArrayObject=r;return this._initialized=!0};n.prototype._getTexture=function(r,t){if(t.texture)return t.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id",
"canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var w=t.key.id,v=this._canvas.getContext("2d");v.font="24px sans-serif";v.textAlign="left";v.textBaseline="middle";var y=v.measureText(w);y=Math.pow(2,Math.ceil(b.log2(y.width+2)));y>this._maxWidth&&(this._maxWidth=y);v.clearRect(0,0,this._maxWidth,32);v.fillStyle="blue";v.fillText(w,0,16);t.texture=new f(r,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},
this._canvas);return t.texture};return n}(g.default);q.default=m})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});m=function(){return function(){}}();q.default=m})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),
function(m,q,a,b,g,h,k){m=new k;k.parse(a,m);k.parse(b,m);k.parse(g,m);k.parse(h,m);return m})},"esri/layers/vectorTiles/views/2d/tiling/enums":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});m=q.TileStatus||(q.TileStatus={});m[m.INITIALIZED=0]="INITIALIZED";m[m.NO_DATA=1]="NO_DATA";m[m.READY=2]="READY";m[m.MODIFIED=3]="MODIFIED";m[m.INVALID=4]="INVALID"})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports",
"dojo/has"],function(m,q,a){return function(){function b(g,h,k,d,c){this._glName=this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=g;this._bufferType=h;this._usage=k;this._id=b._nextId++;this._glName=this._context.gl.createBuffer();a("esri-webgl-debug")&&g.instanceCounter.incrementCount(1);d&&this.setData(d,c)}b.createIndex=function(g,h,k,d){return new b(g,34963,h,k,d)};b.createVertex=function(g,h,k){return new b(g,34962,h,k)};Object.defineProperty(b.prototype,
"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"indexType",{get:function(){return this._indexType},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),
this._context=null)};b.prototype.setData=function(g,h){if(g){if("number"===typeof g){if(34963===this._bufferType&&h)switch(this._indexType=h,this._size=g,h){case 5123:g*=2;break;case 5125:g*=4}}else h=g.byteLength,g instanceof Uint16Array&&(h/=2,this._indexType=5123),g instanceof Uint32Array&&(h/=4,this._indexType=5125),this._size=h,ArrayBuffer.isView(g)&&(g=g.buffer);h=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,
g,this._usage);this._context.bindVAO(h)}};b.prototype.setSubData=function(g,h,k,d){void 0===h&&(h=0);void 0===k&&(k=0);if(g){var c=d,f=g.byteLength;g instanceof Uint16Array&&(f/=2,h*=2,k*=2,c*=2);g instanceof Uint32Array&&(f/=4,h*=4,k*=4,c*=4);void 0===d&&(d=f-1);d=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);f=this._context.gl;g=ArrayBuffer.isView(g)?g.buffer:g;f.bufferSubData(this._bufferType,h,g.slice(k,c));this._context.bindVAO(d)}};b._nextId=0;return b}()})},
"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports","dojo/has"],function(m,q,a){return function(){function b(g,h,k){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=g;this._desc={pixelFormat:h.pixelFormat,internalFormat:h.internalFormat,dataType:h.dataType,target:h.target?h.target:3553,samplingMode:h.samplingMode?h.samplingMode:9729,wrapMode:h.wrapMode?h.wrapMode:10497,
maxAnisotropy:h.maxAnisotropy,flipped:void 0!==h.flipped?h.flipped:!1,hasMipmap:void 0!==h.hasMipmap?h.hasMipmap:!1,level:void 0!==h.level?h.level:0,unpackAlignment:h.unpackAlignment?h.unpackAlignment:4,width:h.width,height:h.height,preMultiplyAlpha:void 0!==h.preMultiplyAlpha?h.preMultiplyAlpha:!1};this._id=++b._nextId;a("esri-webgl-debug")&&g.instanceCounter.incrementCount(0);this.setData(k)}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});b.prototype.dispose=function(){var g=this;if(this._context){if(this._glName){var h=this._context.gl;this._boundToUnits.forEach(function(k){g._context.bindTexture(null,k)});h.deleteTexture(this._glName);this._glName=null}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0);
this._context=null}};b.prototype.resize=function(g,h){var k=this._desc;if(k.width!==g||k.height!==h)k.width=g,k.height=h,this.setData(null)};b.prototype.setData=function(g){var h=this._context.gl;this._glName||(this._glName=h.createTexture());void 0===g&&(g=null);null===g&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var k=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var d=this._desc;b._validateTexture(d);h.pixelStorei(h.UNPACK_ALIGNMENT,d.unpackAlignment);
h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,d.flipped?1:0);h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.preMultiplyAlpha);if(g instanceof ImageData||g instanceof HTMLImageElement||g instanceof HTMLCanvasElement||g instanceof HTMLVideoElement)h.texImage2D(h.TEXTURE_2D,d.level,d.internalFormat?d.internalFormat:d.pixelFormat,d.pixelFormat,d.dataType,g),void 0===this._desc.width&&(this._desc.width=g.width),void 0===this._desc.height&&(this._desc.height=g.height);else{var c=d.internalFormat?d.internalFormat:
d.pixelFormat,f=d.pixelFormat;h.DEPTH24_STENCIL8&&c===h.DEPTH_STENCIL&&(c=h.DEPTH24_STENCIL8);h.texImage2D(h.TEXTURE_2D,d.level,c,d.width,d.height,0,f,d.dataType,g)}d.hasMipmap&&this.generateMipmap();b._applySamplingMode(h,this._desc);b._applyWrapMode(h,this._desc);b._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(k,0)};b.prototype.updateData=function(g,h,k,d,c,f){var e=this._context.gl,l=this._desc,n=this._context.getBoundTexture(0);this._context.bindTexture(this,
0);f instanceof ImageData||f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement?e.texSubImage2D(e.TEXTURE_2D,g,h,k,l.pixelFormat,l.dataType,f):e.texSubImage2D(e.TEXTURE_2D,g,h,k,d,c,l.pixelFormat,l.dataType,f);this._context.bindTexture(n,0)};b.prototype.generateMipmap=function(){var g=this._desc;g.hasMipmap||(g.hasMipmap=!0,b._validateTexture(g));9729===g.samplingMode?(this._samplingModeDirty=!0,g.samplingMode=9985):9728===g.samplingMode&&(this._samplingModeDirty=
!0,g.samplingMode=9984);g=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var h=this._context.gl;h.generateMipmap(h.TEXTURE_2D);this._context.bindTexture(g,0)};b.prototype.setSamplingMode=function(g){g!==this._desc.samplingMode&&(this._desc.samplingMode=g,b._validateTexture(this._desc),this._samplingModeDirty=!0)};b.prototype.setWrapMode=function(g){g!==this._desc.wrapMode&&(this._desc.wrapMode=g,b._validateTexture(this._desc),this._wrapModeDirty=!0)};b.prototype.applyChanges=function(){var g=
this._context.gl,h=this._desc;this._samplingModeDirty&&(b._applySamplingMode(g,h),this._samplingModeDirty=!1);this._wrapModeDirty&&(b._applyWrapMode(g,h),this._wrapModeDirty=!1)};b.prototype.setBoundToUnit=function(g,h){h?this._boundToUnits.add(g):this._boundToUnits.delete(g)};b._isPowerOfTwo=function(g){return 0===(g&g-1)};b._validateTexture=function(g){b._isPowerOfTwo(g.width)&&b._isPowerOfTwo(g.height)};b._applySamplingMode=function(g,h){var k=h.samplingMode;if(9985===k||9987===k)k=9729;else if(9984===
k||9986===k)k=9728;g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,k);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,h.samplingMode)};b._applyWrapMode=function(g,h){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,h.wrapMode);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,h.wrapMode)};b._applyAnisotropicFilteringParameters=function(g,h){if(null!=h.maxAnisotropy){var k=g.capabilities.textureFilterAnisotropic;k&&(g=g.gl,g.texParameterf(g.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY,h.maxAnisotropy))}};b._nextId=
0;return b}()})},"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports","dojo/has","./Util"],function(m,q,a,b){return function(){function g(h,k,d,c,f){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=h;this._layout=d;this._buffers=c;this._locations=k;f&&(this._indexBuffer=f);this._id=g._nextId++;a("esri-webgl-debug")&&h.instanceCounter.incrementCount(2)}Object.defineProperty(g.prototype,
"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"size",{get:function(){var h=this;return Object.keys(this._buffers).reduce(function(k,
d){return k+h._buffers[d].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});g.prototype.dispose=function(h){void 0===h&&(h=!0);if(this._context){var k=this._context.capabilities.vao;k&&this._glName&&(k.deleteVertexArray(this._glName),this._glName=
null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(h){for(var d in this._buffers)this._buffers[d].dispose(),delete this._buffers[d];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2);this._context=null}};g.prototype.initialize=function(){if(!this._initialized){var h=this._context.capabilities.vao;if(h){var k=h.createVertexArray();h.bindVertexArray(k);this._bindLayout();h.bindVertexArray(null);
this._glName=k}this._initialized=!0}};g.prototype.bind=function(){this.initialize();var h=this._context.capabilities.vao;h?h.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};g.prototype._bindLayout=function(){var h=this._buffers,k=!!this._context.capabilities.vao,d=this._layout,c=this._indexBuffer,f=this._context.gl,e;for(e in h)b.bindVertexBufferLayout(this._context,this._locations,h[e],d[e]);c&&(k?f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c.glName):this._context.bindBuffer(c))};
g.prototype.unbind=function(){this.initialize();var h=this._context.capabilities.vao;h?h.bindVertexArray(null):this._unbindLayout()};g.prototype._unbindLayout=function(){var h=this._buffers,k=this._layout,d;for(d in h)b.unbindVertexBufferLayout(this._context,this._locations,h[d],k[d]);(h=this._indexBuffer)&&this._context.unbindBuffer(h.bufferType)};g._nextId=0;return g}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),
function(m,q,a,b,g,h,k,d,c){Object.defineProperty(q,"__esModule",{value:!0});m=function(f){function e(){var l=f.call(this)||this;l._color=b.create();l._initialized=!1;l._color.set([1,0,0,1]);return l}a(e,f);e.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};e.prototype.draw=function(l,n){l=l.context;this._initialized||this._initialize(l);
l.setStencilFunctionSeparate(1032,519,n.stencilRef,255);l.bindVAO(this._solidVertexArrayObject);l.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",n.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",n.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);l.drawArrays(5,0,4);l.bindVAO()};e.prototype._initialize=
function(l){if(this._initialized)return!0;var n={a_pos:0},r=new d(l,h.backgroundVS,h.backgroundFS,n);if(!r)return!1;var t=new Int8Array([0,0,1,0,0,1,1,1]);t=k.createVertex(l,35044,t);l=new c(l,n,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:t});this._solidProgram=r;this._solidVertexArrayObject=l;return this._initialized=!0};return e}(g.default);q.default=m})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],function(m){var q=
{create:function(){var a=new m.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new m.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,g,h){var k=new m.ARRAY_TYPE(4);k[0]=a;k[1]=b;k[2]=g;k[3]=h;return k},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,g,h,k){a[0]=b;a[1]=g;a[2]=h;a[3]=k;return a},add:function(a,b,g){a[0]=b[0]+g[0];a[1]=b[1]+g[1];a[2]=b[2]+g[2];a[3]=b[3]+g[3];return a},subtract:function(a,
b,g){a[0]=b[0]-g[0];a[1]=b[1]-g[1];a[2]=b[2]-g[2];a[3]=b[3]-g[3];return a}};q.sub=q.subtract;q.multiply=function(a,b,g){a[0]=b[0]*g[0];a[1]=b[1]*g[1];a[2]=b[2]*g[2];a[3]=b[3]*g[3];return a};q.mul=q.multiply;q.divide=function(a,b,g){a[0]=b[0]/g[0];a[1]=b[1]/g[1];a[2]=b[2]/g[2];a[3]=b[3]/g[3];return a};q.div=q.divide;q.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};q.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=
Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};q.min=function(a,b,g){a[0]=Math.min(b[0],g[0]);a[1]=Math.min(b[1],g[1]);a[2]=Math.min(b[2],g[2]);a[3]=Math.min(b[3],g[3]);return a};q.max=function(a,b,g){a[0]=Math.max(b[0],g[0]);a[1]=Math.max(b[1],g[1]);a[2]=Math.max(b[2],g[2]);a[3]=Math.max(b[3],g[3]);return a};q.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};q.scale=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;a[3]=b[3]*
g;return a};q.scaleAndAdd=function(a,b,g,h){a[0]=b[0]+g[0]*h;a[1]=b[1]+g[1]*h;a[2]=b[2]+g[2]*h;a[3]=b[3]+g[3]*h;return a};q.distance=function(a,b){var g=b[0]-a[0],h=b[1]-a[1],k=b[2]-a[2];a=b[3]-a[3];return Math.sqrt(g*g+h*h+k*k+a*a)};q.dist=q.distance;q.squaredDistance=function(a,b){var g=b[0]-a[0],h=b[1]-a[1],k=b[2]-a[2];a=b[3]-a[3];return g*g+h*h+k*k+a*a};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],g=a[1],h=a[2];a=a[3];return Math.sqrt(b*b+g*g+h*h+a*a)};q.len=q.length;q.squaredLength=
function(a){var b=a[0],g=a[1],h=a[2];a=a[3];return b*b+g*g+h*h+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};q.normalize=function(a,b){var g=b[0],h=b[1],k=b[2];b=b[3];var d=g*g+h*h+k*k+b*b;0<d&&(d=1/Math.sqrt(d),a[0]=g*d,a[1]=h*d,a[2]=k*d,a[3]=b*d);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};q.lerp=function(a,b,g,h){var k=
b[0],d=b[1],c=b[2];b=b[3];a[0]=k+h*(g[0]-k);a[1]=d+h*(g[1]-d);a[2]=c+h*(g[2]-c);a[3]=b+h*(g[3]-b);return a};q.random=function(a,b){b=b||1;a[0]=m.RANDOM();a[1]=m.RANDOM();a[2]=m.RANDOM();a[3]=m.RANDOM();q.normalize(a,a);q.scale(a,a,b);return a};q.transformMat4=function(a,b,g){var h=b[0],k=b[1],d=b[2];b=b[3];a[0]=g[0]*h+g[4]*k+g[8]*d+g[12]*b;a[1]=g[1]*h+g[5]*k+g[9]*d+g[13]*b;a[2]=g[2]*h+g[6]*k+g[10]*d+g[14]*b;a[3]=g[3]*h+g[7]*k+g[11]*d+g[15]*b;return a};q.transformQuat=function(a,b,g){var h=b[0],k=
b[1],d=b[2],c=g[0],f=g[1],e=g[2];g=g[3];var l=g*h+f*d-e*k,n=g*k+e*h-c*d,r=g*d+c*k-f*h;h=-c*h-f*k-e*d;a[0]=l*g+h*-c+n*-e-r*-f;a[1]=n*g+h*-f+r*-c-l*-e;a[2]=r*g+h*-e+l*-f-n*-c;a[3]=b[3];return a};q.forEach=function(){var a=q.create();return function(b,g,h,k,d,c){g||(g=4);h||(h=0);for(k=k?Math.min(k*g+h,b.length):b.length;h<k;h+=g)a[0]=b[h],a[1]=b[h+1],a[2]=b[h+2],a[3]=b[h+3],d(a,a,c),b[h]=a[0],b[h+1]=a[1],b[h+2]=a[2],b[h+3]=a[3];return b}}();q.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+
a[3]+")"};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};q.equals=function(a,b){var g=a[0],h=a[1],k=a[2];a=a[3];var d=b[0],c=b[1],f=b[2];b=b[3];return Math.abs(g-d)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(d))&&Math.abs(h-c)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(k-f)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(f))&&Math.abs(a-b)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return q})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(m,q,a,b,g,h,k){Object.defineProperty(q,"__esModule",{value:!0});m=function(d){function c(){var f=null!==d&&d.apply(this,arguments)||this;f._isInitialized=!1;f._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};f._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};f._spritesTextureSize=new Float32Array(2);return f}a(c,d);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return b.WGLGeometryType.FILL};c.prototype.drawGeometry=
function(f,e,l,n){n=f.context;var r=f.painter,t=f.rendererInfo,w=f.requiredLevel,v=f.stationary,y=l.indexCount,x=l.indexFrom;this._initialize();var B=l.materialInfo.materialKeyInfo,p=B.hasVV()?this._fillAttributeLocationsVV:this._fillAttributeLocations;if(p=f.painter.materialManager.getProgram(l.materialInfo.materialKey,f.drawPhase,p)){n.bindProgram(p);var z=this._getVAO(n,e,B.hasVV());n.bindVAO(z);if(0<l.materialInfo.texBindingInfo.length){l=l.materialInfo.texBindingInfo[0];z=l.pageId;var u=f.painter.textureManager.sprites;
this._spritesTextureSize[0]=u.getWidth(z);this._spritesTextureSize[1]=u.getHeight(z);p.setUniform1f("u_zoomFactor",1/Math.pow(2,w-e.key.level)/f.pixelRatio);r.textureManager.bindSpritePage(n,z,l.unit,v?9728:9729);p.setUniform1i(l.semantic,l.unit);p.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}p.setUniformMatrix4fv("u_transformMatrix",e.tileTransform.transform);p.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord);p.setUniform1f("u_opacity",1);B.vvColor&&(p.setUniform1fv("u_vvColorValues",
t.vvColorValues),p.setUniform4fv("u_vvColors",t.vvColors));B.vvOpacity&&(p.setUniform1fv("u_vvOpacityValues",t.vvOpacityValues),p.setUniform1fv("u_vvOpacities",t.vvOpacities));n.drawElements(4,y,5125,4*x);n.bindVAO(null)}};c.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,
type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};c.prototype._getVAO=function(f,e,l){if(e.fillGeometry.vao)return e.fillGeometry.vao;var n=e.fillGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],r=e.fillGeometry.indexBuffer;if(!n||!r)return null;e.fillGeometry.vao=l?new k(f,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:n},r):new k(f,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:n},r);return e.fillGeometry.vao};return c}(h.default);q.default=m})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(m,q,a,b,g){Object.defineProperty(q,"__esModule",{value:!0});m=function(h){function k(){return null!==h&&h.apply(this,arguments)||this}a(k,
h);k.prototype.draw=function(d,c){var f=this;if(c.canDisplay){var e=this.getGeometryType(),l=c.getDisplayList(d.drawPhase),n=c.getGeometry(e);n&&g.forEachIter(l.ofType(e),function(r){return f.drawGeometry(d,c,r,n)})}};return k}(b.default);q.default=m})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.forEachIter=function(a,b){for(;;){var g=a.next();if(g.done)break;b(g.value)}}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(m,q,a,b,g,h,k){Object.defineProperty(q,"__esModule",{value:!0});m=function(d){function c(){var f=null!==d&&d.apply(this,arguments)||this;f._attributeLocations={a_pos:0,a_color:1,a_vertexOffset:2,a_texAndSize:3,a_refSymbolAndPlacementOffset:4,a_visible:5,
a_visibilityRange:6};f._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_texAndSize",count:4,type:5120,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_refSymbolAndPlacementOffset",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",
count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}],visibilityRange:[{name:"a_visibilityRange",count:2,type:5121,offset:0,stride:2,normalized:!1,divisor:0}]};f._glyphsTextureSize=new Float32Array(2);return f}a(c,d);c.prototype.dispose=function(){};c.prototype.drawGeometry=function(f,e,l,n){if(f.requiredLevel===e.key.level){n=f.context;var r=f.painter,t=f.drawPhase,w=l.materialInfo,v=l.indexCount;l=l.indexFrom;var y=this._attributeLocations,x=f.drawPhase===b.WGLDrawPhase.LABEL_ALPHA,B=w.materialKey;
x&&(B|=8);if(t=r.materialManager.getProgram(B,t,y))n.setStencilTestEnabled(!1),n.bindProgram(t),y=this._getVAO(n,e),n.bindVAO(y),x?(n.setBlendingEnabled(!1),t.setUniform1f("u_fadeStep",f.labelStep)):(w=w.texBindingInfo[0],r.textureManager.bindGlyphsPage(n,w.pageId,w.unit),t.setUniform1i(w.semantic,w.unit)),w=r.textureManager.glyphs,this._glyphsTextureSize[0]=w.width/4,this._glyphsTextureSize[1]=w.height/4,r=r.extrudeNoRotationMatrix,n.bindTexture(f.labelFBO.colorTexture,3),t.setUniform1i("u_referenceTex",
3),t.setUniformMatrix4fv("u_transformMatrix",e.tileTransform.transform),t.setUniformMatrix4fv("u_extrudeMatrix",r),t.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord),t.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),t.setUniform1f("u_pixelRatio",f.pixelRatio),t.setUniform1f("u_opacity",1),t.setUniform1f("u_zoomLevel",10*f.displayLevel),t.setUniform1f("u_mapRotation",f.state.rotation),t.setUniform1f("u_mapAligned",0),t.setUniform2fv("u_screenSize",f.state.size),n.drawElements(4,
v,5125,4*l),n.bindVAO(null),n.setStencilTestEnabled(!0),n.setBlendingEnabled(!0)}};c.prototype.getGeometryType=function(){return b.WGLGeometryType.LABEL};c.prototype._getVAO=function(f,e){if((e=e.labelGeometry)&&e.vao)return e.vao;var l=e.vertexBufferMap[g.C_VBO_GEOMETRY],n=e.vertexBufferMap[g.C_VBO_VISIBILITY_RANGE],r=e.indexBuffer;if(!l||!r||!n)return null;e.vao=new k(f,this._attributeLocations,this._vertexAttributeLayout,{geometry:l,visibility:e.vertexBufferMap[g.C_VBO_VISIBILITY],visibilityRange:n},
r);return e.vao};return c}(h.default);q.default=m})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(m,q,a,b,g,h,k){Object.defineProperty(q,"__esModule",{value:!0});m=function(d){function c(){var f=null!==d&&d.apply(this,arguments)||this;f._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,
a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};f._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};f._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",
count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};f._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,
stride:44,normalized:!1,divisor:0}]};f._spritesTextureSize=new Float32Array(2);return f}a(c,d);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return b.WGLGeometryType.LINE};c.prototype.drawGeometry=function(f,e,l,n){n=f.context;var r=f.painter,t=f.rendererInfo,w=f.requiredLevel,v=f.drawPhase,y=l.indexFrom,x=l.indexCount,B=l.materialInfo;l=B.materialKeyInfo;var p=l.hasVV()?this._lineAttributeLocationsVV:this._lineAttributeLocations;if(v=r.materialManager.getProgram(B.materialKey,
v,p)){n.bindProgram(v);p=this._getVAO(n,e,l.hasVV());n.bindVAO(p);p=1/f.pixelRatio;if(0<B.texBindingInfo.length){B=B.texBindingInfo[0];var z=B.pageId,u=r.textureManager.sprites;this._spritesTextureSize[0]=u.getWidth(z);this._spritesTextureSize[1]=u.getHeight(z);r.textureManager.bindSpritePage(n,z,B.unit);v.setUniform1i(B.semantic,B.unit);v.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}f=Math.pow(2,w-e.key.level)/f.pixelRatio;v.setUniform1f("u_zoomFactor",f);v.setUniformMatrix4fv("u_transformMatrix",
e.tileTransform.transform);v.setUniformMatrix4fv("u_extrudeMatrix",r.extrudeMatrix);v.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord);v.setUniform1f("u_opacity",1);v.setUniform1f("u_blur",0+p);v.setUniform1f("u_antialiasing",p);v.setUniform1f("u_zoomFactor",f);l.vvSizeMinMaxValue&&v.setUniform4fv("u_vvSizeMinMaxValue",t.vvSizeMinMaxValue);l.vvSizeScaleStops&&v.setUniform1f("u_vvSizeScaleStopsValue",t.vvSizeScaleStopsValue);l.vvSizeFieldStops&&(v.setUniform1fv("u_vvSizeFieldStopsValues",
t.vvSizeFieldStopsValues),v.setUniform1fv("u_vvSizeFieldStopsSizes",t.vvSizeFieldStopsSizes));l.vvSizeUnitValue&&v.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",t.vvSizeUnitValueToPixelsRatio);l.vvColor&&(v.setUniform1fv("u_vvColorValues",t.vvColorValues),v.setUniform4fv("u_vvColors",t.vvColors));l.vvOpacity&&(v.setUniform1fv("u_vvOpacityValues",t.vvOpacityValues),v.setUniform1fv("u_vvOpacities",t.vvOpacities));n.setFaceCullingEnabled(!0);n.setFrontFace(2305);n.setCullFace(1029);n.drawElements(4,
x,5125,4*y);n.setFaceCullingEnabled(!1);n.bindVAO(null)}};c.prototype._getVAO=function(f,e,l){if(e.lineGeometry.vao)return e.lineGeometry.vao;var n=e.lineGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],r=e.lineGeometry.indexBuffer;if(!n||!r)return null;e.lineGeometry.vao=l?new k(f,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:n},r):new k(f,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:n},r);return e.lineGeometry.vao};return c}(h.default);q.default=
m})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(m,q,a,b,g,h,k,d){Object.defineProperty(q,"__esModule",{value:!0});m=function(c){function f(){var e=null!==c&&c.apply(this,arguments)||this;e._iconAttributeLocations={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,
a_outlineColor:5,a_sizeAndOutlineWidth:6};e._iconAttributeLocationsVV={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_vv:7};e._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_weight:7};e._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:28,normalized:!1,
divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:28,normalized:!1,divisor:0}]};e._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:44,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:44,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:44,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:44,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:44,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,
stride:44,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:28,stride:44,normalized:!1,divisor:0}]};e._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:32,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:16,stride:32,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:32,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:32,normalized:!1,divisor:0},{name:"a_weight",count:1,type:5126,offset:28,stride:32,normalized:!1,divisor:0}]};e._spritesTextureSize=new Float32Array(2);return e}a(f,c);f.prototype.dispose=function(){};f.prototype.getGeometryType=function(){return b.WGLGeometryType.MARKER};f.prototype.drawGeometry=
function(e,l,n,r){r=e.context;var t=e.painter,w=e.rendererInfo,v=e.drawPhase;e=n.indexCount;var y=n.indexFrom,x=n.materialInfo;n=x.materialKeyInfo;var B=n.heatmap,p=n.hasVV()?this._iconAttributeLocationsVV:this._iconAttributeLocations;if(v=t.materialManager.getProgram(x.materialKey,v,p))r.bindProgram(v),p=this._getVAO(r,l,n.hasVV(),B),r.bindVAO(p),B?(x=this._getIntensityTexture(r,w.heatmapParameters),r.bindTexture(x,1),v.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(w.heatmapParameters.radius),
this._spritesTextureSize[1]=Math.round(w.heatmapParameters.radius)):(B=x.texBindingInfo[0],x=B.pageId,t.textureManager.bindSpritePage(r,x,B.unit),v.setUniform1i(B.semantic,B.unit),B=t.textureManager.sprites,this._spritesTextureSize[0]=B.getWidth(x)/4,this._spritesTextureSize[1]=B.getHeight(x)/4),t=w.vvMaterialParameters.vvRotationEnabled&&"geographic"===w.vvMaterialParameters.vvRotationType?t.extrudeMatrix:t.extrudeNoRotationMatrix,v.setUniformMatrix4fv("u_transformMatrix",l.tileTransform.transform),
v.setUniformMatrix4fv("u_extrudeMatrix",t),v.setUniform2fv("u_normalized_origin",l.tileTransform.displayCoord),v.setUniform2fv("u_mosaicSize",this._spritesTextureSize),v.setUniform1f("u_opacity",1),n.vvSizeMinMaxValue&&v.setUniform4fv("u_vvSizeMinMaxValue",w.vvSizeMinMaxValue),n.vvSizeScaleStops&&v.setUniform1f("u_vvSizeScaleStopsValue",w.vvSizeScaleStopsValue),n.vvSizeFieldStops&&(v.setUniform1fv("u_vvSizeFieldStopsValues",w.vvSizeFieldStopsValues),v.setUniform1fv("u_vvSizeFieldStopsSizes",w.vvSizeFieldStopsSizes)),
n.vvSizeUnitValue&&v.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",w.vvSizeUnitValueToPixelsRatio),n.vvColor&&(v.setUniform1fv("u_vvColorValues",w.vvColorValues),v.setUniform4fv("u_vvColors",w.vvColors)),n.vvOpacity&&(v.setUniform1fv("u_vvOpacityValues",w.vvOpacityValues),v.setUniform1fv("u_vvOpacities",w.vvOpacities)),n.vvRotation&&v.setUniform1f("u_vvRotationType","geographic"===w.vvMaterialParameters.vvRotationType?0:1),r.drawElements(4,e,5125,4*y),r.bindVAO(null)};f.prototype._getVAO=function(e,
l,n,r){if(l.iconGeometry.vao)return l.iconGeometry.vao;var t=l.iconGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],w=l.iconGeometry.indexBuffer;if(!t||!w)return null;l.iconGeometry.vao=n?new d(e,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,{geometry:t},w):r?new d(e,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:t},w):new d(e,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:t},w);return l.iconGeometry.vao};f.prototype._getIntensityTexture=
function(e,l){if(l.intensityKernel&&!l.refreshIntensityKernel)return l.intensityKernel;l.intensityKernel&&(l.intensityKernel.dispose(),l.intensityKernel=null);for(var n=l.radius,r=l.kernelSize,t=l.blurRadius,w=n*n,v=[],y=-1;++y<r;)v[y]=Math.exp(-Math.pow(y-t,2)/(2*w))/(n/2*Math.sqrt(2*Math.PI));n=[];for(var x,B=0;B<r;B++)for(w=v[B],y=0;y<r;y++)x=B*r+y,t=v[y],n[4*x]=w*t,n[4*x+1]=0,n[4*x+2]=0,n[4*x+3]=1;e=new k(e,{target:3553,pixelFormat:6408,internalFormat:e.capabilities.colorBufferFloat.RGBA32F,dataType:5126,
samplingMode:e.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:r,height:r},new Float32Array(n));l.intensityKernel=e;l.refreshIntensityKernel=!1;return e};return f}(h.default);q.default=m})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(m,q,a,b,g,h,k){Object.defineProperty(q,"__esModule",
{value:!0});m=function(d){function c(){var f=null!==d&&d.apply(this,arguments)||this;f._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};f._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};f._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,
offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};f._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",
count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};f._glyphsTextureSize=new Float32Array(2);return f}a(c,d);c.prototype.dispose=function(){};c.prototype.getGeometryType=
function(){return b.WGLGeometryType.TEXT};c.prototype.drawGeometry=function(f,e,l,n){n=f.context;var r=f.painter,t=f.rendererInfo,w=l.materialInfo,v=l.indexCount;l=l.indexFrom;var y=w.materialKeyInfo,x=y.vvSizeMinMaxValue||y.vvSizeScaleStops||y.vvSizeFieldStops||y.vvSizeUnitValue||y.vvColor||y.vvRotation||y.vvOpacity;if(f=r.materialManager.getProgram(w.materialKey,f.drawPhase,x?this._attributeLocationsVV:this._attributeLocations))n.bindProgram(f),x=this._getVAO(n,e,x,this.getGeometryType()),n.bindVAO(x),
w=w.texBindingInfo[0],r.textureManager.bindGlyphsPage(n,w.pageId,w.unit),f.setUniform1i(w.semantic,w.unit),w=r.textureManager.glyphs,this._glyphsTextureSize[0]=w.width/4,this._glyphsTextureSize[1]=w.height/4,r=t.vvMaterialParameters.vvRotationEnabled&&"geographic"===t.vvMaterialParameters.vvRotationType?r.extrudeMatrix:r.extrudeNoRotationMatrix,f.setUniformMatrix4fv("u_transformMatrix",e.tileTransform.transform),f.setUniformMatrix4fv("u_extrudeMatrix",r),f.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord),
f.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),f.setUniform1f("u_pixelRatio",1),f.setUniform1f("u_opacity",1),y.vvSizeMinMaxValue&&f.setUniform4fv("u_vvSizeMinMaxValue",t.vvSizeMinMaxValue),y.vvSizeScaleStops&&f.setUniform1f("u_vvSizeScaleStopsValue",t.vvSizeScaleStopsValue),y.vvSizeFieldStops&&(f.setUniform1fv("u_vvSizeFieldStopsValues",t.vvSizeFieldStopsValues),f.setUniform1fv("u_vvSizeFieldStopsSizes",t.vvSizeFieldStopsSizes)),y.vvSizeUnitValue&&f.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",
t.vvSizeUnitValueToPixelsRatio),y.vvColor&&(f.setUniform1fv("u_vvColorValues",t.vvColorValues),f.setUniform4fv("u_vvColors",t.vvColors)),y.vvOpacity&&(f.setUniform1fv("u_vvOpacityValues",t.vvOpacityValues),f.setUniform1fv("u_vvOpacities",t.vvOpacities)),y.vvRotation&&f.setUniform1f("u_vvRotationType","geographic"===t.vvMaterialParameters.vvRotationType?0:1),n.drawElements(4,v,5125,4*l),n.bindVAO(null)};c.prototype._getVAO=function(f,e,l,n){if((e=e.getGeometry(n))&&e.vao)return e.vao;n=e.vertexBufferMap[g.C_VBO_GEOMETRY];
var r=e.vertexBufferMap[g.C_VBO_VISIBILITY],t=e.indexBuffer;if(!n||!t)return null;e.vao=l?new k(f,this._attributeLocationsVV,this._vertexAttributeLayoutVV,{geometry:n,visibility:r},t):new k(f,this._attributeLocations,this._vertexAttributeLayout,{geometry:n,visibility:r},t);return e.vao};return c}(h.default);q.default=m})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require","exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],
function(m,q,a,b,g){return function(){function h(){this._hlRenderer=new b;this._hlSurfaces=new g;this._height=this._width=void 0}h.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._boundFBO=null};h.prototype.setup=function(k,d,c){var f=d%4,e=c%4;d+=2>f?-f:4-f;c+=2>e?-e:4-e;this._width=d;this._height=c;this._boundFBO=k.getBoundFramebufferObject();d=Math.round(.75*d);c=Math.round(.75*c);this._hlRenderer.setup(k,d,c);this._hlSurfaces.setup(k,
d,c)};h.prototype.setHighlightOptions=function(k){this._hlRenderer.setHighlightOptions({fillColor:k.fillColor,outlineColor:k.outlineColor,outlineWidth:.75*k.outlineWidth,outerHaloWidth:.75*k.outerHaloWidth,innerHaloWidth:.75*k.innerHaloWidth,outlinePosition:.75*k.outlinePosition})};h.prototype.startMaskDraw=function(k){k.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);k.setClearColor(0,0,0,0);k.setClearStencil(0);k.clear(k.gl.COLOR_BUFFER_BIT|k.gl.STENCIL_BUFFER_BIT);k.setViewport(0,0,.75*this._width,
.75*this._height)};h.prototype.draw=function(k){k.setStencilTestEnabled(!1);k.setBlendingEnabled(!1);k.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);k.setClearColor(0,0,0,0);k.clear(k.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(k,this._hlSurfaces.sharedBlur1Tex);a("esri-feature-highlight-debug")?(k.bindFramebuffer(null),k.clear(k.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(k,this._hlSurfaces.sharedBlur2Tex)):(k.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),k.setClearColor(0,0,0,0),k.clear(k.gl.COLOR_BUFFER_BIT),
this._hlRenderer.finalBlur(k,this._hlSurfaces.sharedBlur2Tex),k.bindFramebuffer(this._boundFBO),k.setBlendingEnabled(!0),k.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(k,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return h}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),
function(m,q,a,b,g,h,k){var d=[void 0,void 0,void 0,1],c=[3,4],f=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function l(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}l.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),
this._resources.blurProgram.dispose(),this._resources.shadeTex.dispose(),this._resources=null)};l.prototype.preBlur=function(n,r){n.bindTexture(r,c[0]);n.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",f);n.bindVAO(this._resources.quadVAO);n.drawArrays(5,0,4);n.bindVAO()};l.prototype.finalBlur=function(n,r){n.bindTexture(r,c[0]);n.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",e);n.bindVAO(this._resources.quadVAO);n.drawArrays(5,0,4);n.bindVAO()};l.prototype.renderHighlight=function(n,r){n.bindTexture(r,c[0]);n.bindTexture(this._resources.shadeTex,c[1]);n.bindProgram(this._resources.highlightProgram);n.bindVAO(this._resources.quadVAO);n.drawArrays(5,0,4);n.bindVAO()};l.prototype._initialize=function(n,r,t){this._width=r;this._height=
t;r=new b(n,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,0,-128,127,0,255,127,127,255,255])).buffer);t=new k(n,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:r});var w=(new g("hl",["texturedVS","highlightFS"],[],a,n,{a_position:0,a_texcoord:1})).getProgram([]),v=(new g("hl",["texturedVS","blurFS"],[],a,n,{a_position:0,a_texcoord:1})).getProgram([]);
w.setUniform1i("u_texture",c[0]);w.setUniform1i("u_shade",c[1]);w.setUniform4fv("u_sigmas",d);v.setUniform1i("u_texture",c[0]);v.setUniform4fv("u_sigmas",d);n=new h(n,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:r,quadVAO:t,highlightProgram:w,blurProgram:v,shadeTex:n}};l.prototype.setHighlightOptions=function(n){function r(u,D,I){p[0]=(1-I)*u[0]+I*D[0];p[1]=(1-I)*u[1]+I*D[1];p[2]=(1-I)*u[2]+I*D[2];p[3]=(1-I)*u[3]+I*
D[3]}this._highlightOptions=n;if(this._resources){for(var t=n.outlinePosition-n.outlineWidth/2-n.outerHaloWidth,w=n.outlinePosition-n.outlineWidth/2,v=n.outlinePosition+n.outlineWidth/2,y=n.outlinePosition+n.outlineWidth/2+n.innerHaloWidth,x=new Uint8Array(1024),B,p=[void 0,void 0,void 0,void 0],z=0;256>z;++z)B=t+z/255*(y-t),B<t?(x[4*z]=0,x[4*z+1]=0,x[4*z+2]=0,x[4*z+3]=0):B<w?r([0,0,0,0],n.outlineColor,(B-t)/(w-t)):B<v?(p[0]=n.outlineColor[0],p[1]=n.outlineColor[1],p[2]=n.outlineColor[2],p[3]=n.outlineColor[3]):
B<y?r(n.outlineColor,n.fillColor,(B-v)/(y-v)):(x[4*z]=n.fillColor[0],x[4*z+1]=n.fillColor[1],x[4*z+2]=n.fillColor[2],x[4*z+3]=n.fillColor[3]),x[4*z]=255*p[0]*p[3],x[4*z+1]=255*p[1]*p[3],x[4*z+2]=255*p[2]*p[3],x[4*z+3]=255*p[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[t,y]);this._resources.shadeTex.updateData(0,0,0,256,1,x)}};l.prototype.setup=function(n,r,t){this._resources?(this._width=r,this._height=t):(this._initialize(n,r,t),this.setHighlightOptions(this._highlightOptions))};
return l}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(m,q,a,b){m=new b;b.parse(a,m);return m})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],function(m,q,a,b){function g(h,k,d){k=new b(h,{target:3553,pixelFormat:6408,
dataType:5121,wrapMode:33071,width:k,height:d,samplingMode:9729});h=a.createWithAttachments(h,k,{colorTarget:0,depthStencilTarget:2});return[k,h]}return function(){function h(){this._height=this._width=void 0;this._resources=null}h.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};h.prototype._initialize=function(k,
d,c){this._width=d;this._height=c;var f=g(k,d,c),e=f[0];f=f[1];k=g(k,d,c);this._resources={sharedBlur1Tex:e,sharedBlur1Fbo:f,sharedBlur2Tex:k[0],sharedBlur2Fbo:k[1]}};h.prototype.setup=function(k,d,c){!this._resources||this._width===d&&this._height===c||this.dispose();this._resources||this._initialize(k,d,c)};Object.defineProperty(h.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},
enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return h}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require","exports","dojo/has","./Renderbuffer","./Texture"],function(m,q,a,b,g){return function(){function h(k,
d,c,f){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=k;this._desc={colorTarget:d.colorTarget,depthStencilTarget:d.depthStencilTarget,width:d.width,height:d.height,multisampled:d.multisampled};this._id=h._nextId++;a("esri-webgl-debug")&&k.instanceCounter.incrementCount(4);c&&(k=void 0,c instanceof g?(this._colorAttachment=c,k=c.descriptor):(k=c,this._colorAttachment=new g(this._context,k)),h._validateTextureDimensions(k,
this._desc));if(f instanceof b){if(2===d.depthStencilTarget)this._stencilAttachment=f;else if(1===d.depthStencilTarget||3===d.depthStencilTarget)this._depthAttachment=f;h._validateBufferDimensions(f.descriptor,this._desc)}else f&&(d=void 0,f instanceof g?(this._depthStencilTexture=f,d=this._depthStencilTexture.descriptor):(d=f,this._depthStencilTexture=new g(this._context,d)),h._validateTextureDimensions(d,this._desc))}h.create=function(k,d){return new h(k,d)};h.createWithAttachments=function(k,d,
c,f){return new h(k,c,d,f)};Object.defineProperty(h.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof g?this._colorAttachment:null},enumerable:!0,
configurable:!0});Object.defineProperty(h.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});h.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),
this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)};h.prototype.attachColorTexture=function(k){if(k){h._validateTextureDimensions(k.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,k.glName,0)}this._colorAttachment=k}};h.prototype.detachColorTexture=
function(){var k=void 0;if(this._colorAttachment instanceof g){k=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;this._context.gl.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,null,0)}this._colorAttachment=null}return k};h.prototype.attachDepthStencilTexture=function(k){if(k){h._validateTextureDimensions(k.descriptor,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();
if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,k.glName,0)}this._depthStencilTexture=k}};h.prototype.detachDepthStencilTexture=function(){var k=this._depthStencilTexture;if(k&&this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;this._context.gl.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return k};
h.prototype.attachDepthStencilBuffer=function(k){if(k){var d=k.descriptor;h._validateBufferDimensions(d,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===d.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),d=this._context.gl,d.framebufferRenderbuffer(d.FRAMEBUFFER,1===this._desc.depthStencilTarget?d.DEPTH_ATTACHMENT:d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,k.glName));this._depthAttachment=k}};h.prototype.detachDepthStencilBuffer=function(){var k=
this._context.gl,d=this._depthAttachment;d&&this._initialized&&(this._context.bindFramebuffer(this),k.framebufferRenderbuffer(k.FRAMEBUFFER,1===this._desc.depthStencilTarget?k.DEPTH_ATTACHMENT:k.DEPTH_STENCIL_ATTACHMENT,k.RENDERBUFFER,null));this._depthAttachment=null;return d};h.prototype.copyToTexture=function(k,d,c,f,e,l,n){var r=this._context;r.bindTexture(n);r.bindFramebuffer(this);r.gl.copyTexSubImage2D(3553,0,e,l,k,d,c,f)};h.prototype.readPixels=function(k,d,c,f,e,l,n){this._context.bindFramebuffer(this);
this._context.gl.readPixels(k,d,c,f,e,l,n)};h.prototype.resize=function(k,d){var c=this._desc;if(c.width!==k||c.height!==d)if(this._initialized)c.width=k,c.height=d,this._colorAttachment instanceof g?(f=this._colorAttachment,c=f.descriptor,c.width=k,c.height=d,this._colorAttachment.dispose(),this._colorAttachment=new g(this._context,c),h._validateTextureDimensions(f.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(c=this._depthStencilTexture.descriptor,
c.width=k,c.height=d,this._depthStencilTexture.dispose(),this._depthStencilTexture=new g(this._context,c)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{c.width=k;c.height=d;if(this._colorAttachment instanceof g){var f=this._colorAttachment;f.resize(k,d)}this._depthStencilTexture&&this._depthStencilTexture.resize(k,d)}};h.prototype.initialize=function(){if(this._initialized)return!1;
var k=this._context.gl;this._glName&&k.deleteFramebuffer(this._glName);var d=k.createFramebuffer(),c=this._desc;k.bindFramebuffer(k.FRAMEBUFFER,d);if(!this._colorAttachment)if(0===c.colorTarget)this._colorAttachment=new g(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:c.width,height:c.height});else{var f=new b(this._context,{internalFormat:32854,width:c.width,height:c.height});k.framebufferRenderbuffer(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.RENDERBUFFER,
f.glName);this._colorAttachment=f}this._colorAttachment instanceof g&&k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,this._colorAttachment.glName,0);switch(c.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new b(this._context,{internalFormat:1===c.depthStencilTarget?33189:34041,width:c.width,height:c.height}));k.framebufferRenderbuffer(k.FRAMEBUFFER,1===c.depthStencilTarget?k.DEPTH_ATTACHMENT:k.DEPTH_STENCIL_ATTACHMENT,k.RENDERBUFFER,this._depthAttachment.glName);
break;case 2:this._stencilAttachment||(this._stencilAttachment=new b(this._context,{internalFormat:36168,width:c.width,height:c.height}));k.framebufferRenderbuffer(k.FRAMEBUFFER,k.STENCIL_ATTACHMENT,k.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._depthStencilTexture=new g(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:c.width,height:c.height})),k.framebufferTexture2D(k.FRAMEBUFFER,k.DEPTH_STENCIL_ATTACHMENT,
k.TEXTURE_2D,this._depthStencilTexture.glName,0)}k.checkFramebufferStatus(k.FRAMEBUFFER);this._glName=d;return this._initialized=!0};h.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof g){var k=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,null,0)}k.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(k=this._colorAttachment,d=
this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(k));this._colorAttachment=null};h.prototype._disposeDepthStencilAttachments=function(){var k=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),k.framebufferRenderbuffer(k.FRAMEBUFFER,1===this._desc.depthStencilTarget?k.DEPTH_ATTACHMENT:k.DEPTH_STENCIL_ATTACHMENT,
k.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.STENCIL_ATTACHMENT,k.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),k.framebufferTexture2D(k.FRAMEBUFFER,k.DEPTH_STENCIL_ATTACHMENT,k.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),
this._depthStencilTexture=null)};h._validateBufferDimensions=function(k,d){void 0!==d.width&&0<=d.width&&void 0!==d.height&&0<=d.height||(d.width=k.width,d.height=k.height)};h._validateTextureDimensions=function(k,d){void 0!==d.width&&0<=d.width&&void 0!==d.height&&0<=d.height||(d.width=k.width,d.height=k.height)};h._nextId=0;return h}()})},"esri/layers/vectorTiles/views/webgl/Renderbuffer":function(){define(["require","exports","dojo/has"],function(m,q,a){return function(){function b(g,h){this._context=
g;this._desc=h;this._glName=null;this._id=-1;g=this._context.gl;a("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5);this._id=++b._nextId;this._glName=g.createRenderbuffer();this._context.bindRenderbuffer(this);g.renderbufferStorage(g.RENDERBUFFER,h.internalFormat,h.width,h.height)}Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});b.prototype.resize=function(g,h){var k=this._context.gl,d=this._desc;if(d.width!==g||d.height!==h)d.width=g,d.height=h,this._context.bindRenderbuffer(this),k.renderbufferStorage(k.RENDERBUFFER,d.internalFormat,d.width,d.height)};b.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5);
this._context=null};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/Renderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../GeometryUtils ./BackgroundRenderer ./CircleRenderer ./FadeRecorder ./FillRenderer ./LineRenderer ./SymbolRenderer ./TileInfoRenderer ../../webgl/FramebufferObject".split(" "),function(m,q,a,b,g,h,k,d,c,f,e,l){return function(){function n(){this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,
1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0}n.prototype.initialize=function(r,t,w){void 0===w&&(w=!0);this._SpriteMosaic=r;this._glyphMosaic=t;this._ignoreSpeed=!w;this._backgroundRenderer=new g;this._lineRenderer=new c;this._fillRenderer=new d;this._symbolRenderer=new f;this._circleRenderer=new h;this._tileInfoRenderer=new e;this._fadeRecorder=new k.FadeRecorder(300);this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=
new Float32Array(16);this._backgroundColor=new Float32Array([1,0,0,1])};n.prototype.dispose=function(){this._backgroundRenderer&&(this._backgroundRenderer.dispose(),this._backgroundRenderer=null);this._lineRenderer&&(this._lineRenderer.dispose(),this._lineRenderer=null);this._fillRenderer&&(this._fillRenderer.dispose(),this._fillRenderer=null);this._symbolRenderer&&(this._symbolRenderer.dispose(),this._symbolRenderer=null);this._circleRenderer&&(this._circleRenderer.dispose(),this._circleRenderer=
null);this._tileInfoRenderer&&(this._tileInfoRenderer.dispose(),this._tileInfoRenderer=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null)};n.prototype.setStateParams=function(r,t,w){this._fadeRecorder.recordLevel(w);this._state=r;if(this._state.width!==this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/r.width,this._extrudeScaleVector[1]=-2/r.height,a.identity(this._extrudeMatrix),a.rotate(this._extrudeMatrix,
this._extrudeMatrix,-r.rotation*b.C_DEG_TO_RAD,this._extrudeRotateVector),a.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),a.transpose(this._extrudeMatrix,this._extrudeMatrix),a.identity(this._extrudeNoRotationMatrix),a.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),a.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=
this._state.rotation};n.prototype.drawClippingMasks=function(r,t){if(0!==t.length){r.setDepthWriteEnabled(!1);r.setDepthTestEnabled(!1);r.setStencilTestEnabled(!0);r.setBlendingEnabled(!1);r.setColorMask(!1,!1,!1,!1);r.setStencilOp(7680,7680,7681);r.setStencilWriteMask(255);r.setClearStencil(0);r.clear(r.gl.STENCIL_BUFFER_BIT);for(var w=0;w<t.length;w++){var v=t[w];v.attached&&v.visible&&(r.setStencilFunctionSeparate(1032,519,v.stencilData.reference,v.stencilData.mask),this._backgroundRenderer.renderSolidColor(r,
{u_matrix:v.tileTransform.transform,u_normalized_origin:v.tileTransform.displayCoord,u_coord_range:v.coordRange,u_depth:0,u_color:this._backgroundColor}))}r.setColorMask(!0,!0,!0,!0);r.setBlendingEnabled(!0)}};n.prototype.renderDebug=function(r,t){var w=t.key;this._backgroundColor.set([w.col%2,w.row%2,0===w.col%2&&0===w.row%2?1:0,.5]);this._backgroundRenderer.renderSolidColor(r,{u_matrix:t.tileTransform.transform,u_normalized_origin:t.tileTransform.displayCoord,u_coord_range:t.coordRange,u_depth:0,
u_color:this._backgroundColor})};n.prototype.renderBucket=function(r,t,w,v,y,x,B,p){if(!(void 0!==B.minzoom&&B.minzoom>=w+1E-6||void 0!==B.maxzoom&&B.maxzoom<w-1E-6))switch(t.type){case 0:2!==y&&this._renderBackground(r,t,w,y,x,B,p);break;case 1:2!==y&&this._renderFill(r,t,w,y,x,B,p);break;case 2:1!==y&&3!==y||this._renderLine(r,t,w,y,x,B,p);break;case 3:2!==y&&3!==y||this._renderSymbol(r,t,w,y,v,x,B,p);break;case 4:2!==y&&3!==y||this._renderCircle(r,t,w,y,v,x,B,p)}};n.prototype.renderTileInfo=function(r,
t){this._tileInfoRenderer.render(r,t)};n.prototype.needsRedraw=function(){return this._fadeRecorder.needsRedraw()};n.prototype.hitTest=function(r,t,w,v,y,x,B){var p=[0,0],z=[0,0],u=r.state;u.toMap(p,[0,0]);u.toMap(z,[x,x]);t=v.filter(function(C){return!(p[0]>C.bounds[2]||z[0]<C.bounds[0]||p[1]<C.bounds[3]||z[1]>C.bounds[1])});if(0===t.length)return[];t.sort(function(C,E){return C.key.level-E.key.level});w=t.length;for(v=1;v<=w;v++){var D=t[v-1];D.attached&&(D.stencilData.reference=v,D.stencilData.mask=
255)}B(u,y,t);y=r.context;this._hittestFBO||(this._hittestFBO=l.create(y,{colorTarget:0,depthStencilTarget:3,width:x,height:x}));B=y.getViewport();u=y.getBoundFramebufferObject();y.bindFramebuffer(this._hittestFBO);y.setViewport(0,0,x,x);v=y.gl;y.setDepthWriteEnabled(!0);y.setStencilWriteMask(255);y.setClearColor(1,1,1,1);y.setClearDepth(1);y.setClearStencil(0);y.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT|v.STENCIL_BUFFER_BIT);y.setDepthWriteEnabled(!1);this.drawClippingMasks(y,t);y.setBlendingEnabled(!1);
y.setStencilWriteMask(0);y.setStencilOp(7680,7680,7681);y.setDepthFunction(515);y.setDepthTestEnabled(!0);y.setDepthWriteEnabled(!0);y.setStencilTestEnabled(!0);for(v=0;v<w;v++)D=t[v],D.attached&&D.doRender(r);y.setStencilTestEnabled(!1);y.setDepthTestEnabled(!1);this._readbackBuffer||(this._readbackBuffer=new Uint8Array(4*x*x),this._readbackBuffer32=new Uint32Array(this._readbackBuffer.buffer));this._hittestFBO.readPixels(0,0,x,x,6408,5121,this._readbackBuffer);r=new Set;x*=x;t=this._readbackBuffer32[Math.round(x/
2)];4294967295!==t&&r.add(t);for(v=0;v<x;v++)t=this._readbackBuffer32[v],4294967295!==t&&r.add(t);y.bindFramebuffer(u);y.setViewport(B.x,B.y,B.width,B.height);var I=[];r.forEach(function(C){I.push(C)});return I};n.prototype._renderBackground=function(r,t,w,v,y,x,B){this._backgroundRenderer.render(r,t,w,v,y,x,this._SpriteMosaic,this._SpriteMosaic.pixelRatio,B)};n.prototype._renderLine=function(r,t,w,v,y,x,B){this._lineRenderer.render(r,t,w,v,this._state,y,x,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,
B)};n.prototype._renderFill=function(r,t,w,v,y,x,B){this._fillRenderer.render(r,t,w,this._state.rotation,v,y,x,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,B)};n.prototype._renderCircle=function(r,t,w,v,y,x,B,p){var z=!0;y===x.key.level&&(z=!1);r.setStencilTestEnabled(z);this._circleRenderer.render(r,t,w,v,this._state.rotation,x,B,this._extrudeMatrix,p)};n.prototype._renderSymbol=function(r,t,w,v,y,x,B,p){var z=!0;y===x.key.level&&(z=!1);r.setStencilTestEnabled(z);this._symbolRenderer.render(r,
t,w,v,this._state.rotation,this._fadeRecorder.getFadeValues(this._ignoreSpeed),x,B,this._SpriteMosaic,this._glyphMosaic,this._extrudeMatrix,this._extrudeNoRotationMatrix,this._SpriteMosaic.pixelRatio,p)};return n}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/BackgroundRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../MemoryBuffer ./rendererUtils ./vtShaderSnippets ../../webgl/BufferObject ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(m,q,a,b,g,h,k,d,c,f){return function(){function e(){this._solidAttributeLocations={a_pos:0};this._attributeLocations={a_pos:0,a_id:1};this._patternMatrix=a.create();this._color=b.create();this._rendererInitialized=this._solidrendererInitialized=!1;this._color.set([1,0,0,1])}e.prototype.dispose=function(){this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=
null)};e.prototype.renderSolidColor=function(l,n){this._solidrendererInitialized||this._initializeSolidRenderer(l);l.bindVAO(this._solidVertexArrayObject);var r=this._shaderVariations.getProgram([!1,!1],void 0,void 0,this._solidAttributeLocations);l.bindProgram(r);r.setUniformMatrix4fv("u_transformMatrix",n.u_matrix);r.setUniform2fv("u_normalized_origin",n.u_normalized_origin);r.setUniform1f("u_coord_range",n.u_coord_range||4096);r.setUniform1f("u_depth",n.u_depth||0);r.setUniform4fv("u_color",n.u_color||
this._color);l.drawArrays(5,0,4);l.bindVAO()};e.prototype.render=function(l,n,r,t,w,v,y,x,B){this._rendererInitialized||this._initialize(l);var p=v.getPaintValue("background-color",r);B*=v.getPaintValue("background-opacity",r);var z=v.getPaintValue("background-pattern",r),u=void 0!==z,D=p[3]*B,I=u||1>D;if(!I||0!==t)if(I||1!==t){I=3===t;t=this._shaderVariations.getProgram([u,I],void 0,void 0,this._attributeLocations);l.bindVAO(this._vertexArrayObject);l.bindProgram(t);t.setUniform1f("u_coord_range",
w.coordRange);t.setUniform1f("u_depth",v.z||0);t.setUniformMatrix4fv("u_transformMatrix",w.tileTransform.transform);t.setUniform2fv("u_normalized_origin",w.tileTransform.displayCoord);if(u){v=y.getMosaicItemPosition(z,!0);if(!v)return;r=512*Math.pow(2,Math.floor(r)-w.key.level)*x;a.identity(this._patternMatrix);w=r/v.size[1];this._patternMatrix[0]=r/v.size[0];this._patternMatrix[4]=w;y.bind(l,9729,v.page||0);t.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix);t.setUniform1f("u_opacity",
B);t.setUniform2f("u_pattern_tl",v.tl[0],v.tl[1]);t.setUniform2f("u_pattern_br",v.br[0],v.br[1]);t.setUniform1i("u_texture",0)}else this._color[0]=D*p[0],this._color[1]=D*p[1],this._color[2]=D*p[2],this._color[3]=D,t.setUniform4fv("u_color",this._color);I&&(n=h.int32To4Bytes(n.layerID),t.setUniform4f("u_id",n[0],n[1],n[2],n[3]));l.drawArrays(5,0,4);l.bindVAO()}};e.prototype._initializeSolidRenderer=function(l){if(this._solidrendererInitialized)return!0;if(!this._shaderVariations){var n=new c("background",
["backgroundVS","backgroundFS"],[],k,l);n.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");n.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=n}n=new Int8Array([0,0,1,0,0,1,1,1]);n=d.createVertex(l,35044,n);this._solidVertexArrayObject=new f(l,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:n});return this._solidrendererInitialized=!0};e.prototype._initialize=function(l){if(this._rendererInitialized)return!0;if(!this._shaderVariations){var n=
new c("background",["backgroundVS","backgroundFS"],[],k,l);n.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");n.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=n}n=[];n.push(g.i1616to32(0,0));n.push(g.i1616to32(1,0));n.push(g.i1616to32(0,1));n.push(g.i1616to32(1,1));n=new Uint32Array(n);n=d.createVertex(l,35044,n);this._vertexArrayObject=new f(l,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:n});return this._rendererInitialized=
!0};return e}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat3":function(){define(["./common"],function(m){var q={create:function(){var a=new m.ARRAY_TYPE(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=new m.ARRAY_TYPE(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},
copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},fromValues:function(a,b,g,h,k,d,c,f,e){var l=new m.ARRAY_TYPE(9);l[0]=a;l[1]=b;l[2]=g;l[3]=h;l[4]=k;l[5]=d;l[6]=c;l[7]=f;l[8]=e;return l},set:function(a,b,g,h,k,d,c,f,e,l){a[0]=b;a[1]=g;a[2]=h;a[3]=k;a[4]=d;a[5]=c;a[6]=f;a[7]=e;a[8]=l;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var g=b[1],
h=b[2],k=b[5];a[1]=b[3];a[2]=b[6];a[3]=g;a[5]=b[7];a[6]=h;a[7]=k}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var g=b[0],h=b[1],k=b[2],d=b[3],c=b[4],f=b[5],e=b[6],l=b[7];b=b[8];var n=b*c-f*l,r=-b*d+f*e,t=l*d-c*e,w=g*n+h*r+k*t;if(!w)return null;w=1/w;a[0]=n*w;a[1]=(-b*h+k*l)*w;a[2]=(f*h-k*c)*w;a[3]=r*w;a[4]=(b*g-k*e)*w;a[5]=(-f*g+k*d)*w;a[6]=t*w;a[7]=(-l*g+h*e)*w;a[8]=(c*g-h*d)*w;return a},adjoint:function(a,b){var g=
b[0],h=b[1],k=b[2],d=b[3],c=b[4],f=b[5],e=b[6],l=b[7];b=b[8];a[0]=c*b-f*l;a[1]=k*l-h*b;a[2]=h*f-k*c;a[3]=f*e-d*b;a[4]=g*b-k*e;a[5]=k*d-g*f;a[6]=d*l-c*e;a[7]=h*e-g*l;a[8]=g*c-h*d;return a},determinant:function(a){var b=a[3],g=a[4],h=a[5],k=a[6],d=a[7],c=a[8];return a[0]*(c*g-h*d)+a[1]*(-c*b+h*k)+a[2]*(d*b-g*k)},multiply:function(a,b,g){var h=b[0],k=b[1],d=b[2],c=b[3],f=b[4],e=b[5],l=b[6],n=b[7];b=b[8];var r=g[0],t=g[1],w=g[2],v=g[3],y=g[4],x=g[5],B=g[6],p=g[7];g=g[8];a[0]=r*h+t*c+w*l;a[1]=r*k+t*f+
w*n;a[2]=r*d+t*e+w*b;a[3]=v*h+y*c+x*l;a[4]=v*k+y*f+x*n;a[5]=v*d+y*e+x*b;a[6]=B*h+p*c+g*l;a[7]=B*k+p*f+g*n;a[8]=B*d+p*e+g*b;return a}};q.mul=q.multiply;q.translate=function(a,b,g){var h=b[0],k=b[1],d=b[2],c=b[3],f=b[4],e=b[5],l=b[6],n=b[7];b=b[8];var r=g[0];g=g[1];a[0]=h;a[1]=k;a[2]=d;a[3]=c;a[4]=f;a[5]=e;a[6]=r*h+g*c+l;a[7]=r*k+g*f+n;a[8]=r*d+g*e+b;return a};q.rotate=function(a,b,g){var h=b[0],k=b[1],d=b[2],c=b[3],f=b[4],e=b[5],l=b[6],n=b[7];b=b[8];var r=Math.sin(g);g=Math.cos(g);a[0]=g*h+r*c;a[1]=
g*k+r*f;a[2]=g*d+r*e;a[3]=g*c-r*h;a[4]=g*f-r*k;a[5]=g*e-r*d;a[6]=l;a[7]=n;a[8]=b;return a};q.scale=function(a,b,g){var h=g[0];g=g[1];a[0]=h*b[0];a[1]=h*b[1];a[2]=h*b[2];a[3]=g*b[3];a[4]=g*b[4];a[5]=g*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};q.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a};q.fromRotation=function(a,b){var g=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=g;a[2]=0;a[3]=-g;a[4]=b;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};q.fromScaling=
function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};q.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};q.fromQuat=function(a,b){var g=b[0],h=b[1],k=b[2];b=b[3];var d=g+g,c=h+h,f=k+k;g*=d;var e=h*d;h*=c;var l=k*d,n=k*c;k*=f;d*=b;c*=b;b*=f;a[0]=1-h-k;a[3]=e-b;a[6]=l+c;a[1]=e+b;a[4]=1-g-k;a[7]=n-d;a[2]=l-c;a[5]=n+d;a[8]=1-g-h;return a};q.normalFromMat4=function(a,b){var g=b[0],h=b[1],k=b[2],d=b[3],
c=b[4],f=b[5],e=b[6],l=b[7],n=b[8],r=b[9],t=b[10],w=b[11],v=b[12],y=b[13],x=b[14];b=b[15];var B=g*f-h*c,p=g*e-k*c,z=g*l-d*c,u=h*e-k*f,D=h*l-d*f,I=k*l-d*e,C=n*y-r*v,E=n*x-t*v;n=n*b-w*v;var G=r*x-t*y;r=r*b-w*y;t=t*b-w*x;w=B*t-p*r+z*G+u*n-D*E+I*C;if(!w)return null;w=1/w;a[0]=(f*t-e*r+l*G)*w;a[1]=(e*n-c*t-l*E)*w;a[2]=(c*r-f*n+l*C)*w;a[3]=(k*r-h*t-d*G)*w;a[4]=(g*t-k*n+d*E)*w;a[5]=(h*n-g*r-d*C)*w;a[6]=(y*I-x*D+b*u)*w;a[7]=(x*z-v*I-b*p)*w;a[8]=(v*D-y*z+b*B)*w;return a};q.str=function(a){return"mat3("+a[0]+
", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};q.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};q.add=function(a,b,g){a[0]=b[0]+g[0];a[1]=b[1]+g[1];a[2]=b[2]+g[2];a[3]=b[3]+g[3];a[4]=b[4]+g[4];a[5]=b[5]+g[5];a[6]=b[6]+g[6];a[7]=b[7]+g[7];a[8]=b[8]+g[8];return a};q.subtract=function(a,b,g){a[0]=b[0]-g[0];a[1]=b[1]-g[1];a[2]=
b[2]-g[2];a[3]=b[3]-g[3];a[4]=b[4]-g[4];a[5]=b[5]-g[5];a[6]=b[6]-g[6];a[7]=b[7]-g[7];a[8]=b[8]-g[8];return a};q.sub=q.subtract;q.multiplyScalar=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;a[3]=b[3]*g;a[4]=b[4]*g;a[5]=b[5]*g;a[6]=b[6]*g;a[7]=b[7]*g;a[8]=b[8]*g;return a};q.multiplyScalarAndAdd=function(a,b,g,h){a[0]=b[0]+g[0]*h;a[1]=b[1]+g[1]*h;a[2]=b[2]+g[2]*h;a[3]=b[3]+g[3]*h;a[4]=b[4]+g[4]*h;a[5]=b[5]+g[5]*h;a[6]=b[6]+g[6]*h;a[7]=b[7]+g[7]*h;a[8]=b[8]+g[8]*h;return a};q.exactEquals=function(a,
b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};q.equals=function(a,b){var g=a[0],h=a[1],k=a[2],d=a[3],c=a[4],f=a[5],e=a[6],l=a[7],n=a[8],r=b[0],t=b[1],w=b[2],v=b[3],y=b[4],x=b[5];a=a[6];var B=b[7];b=b[8];return Math.abs(g-r)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(r))&&Math.abs(h-t)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(t))&&Math.abs(k-w)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(w))&&Math.abs(d-v)<=m.EPSILON*
Math.max(1,Math.abs(d),Math.abs(v))&&Math.abs(c-y)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(f-x)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))&&Math.abs(e-a)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(l-B)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(B))&&Math.abs(n-b)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))};return q})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(m,q){return function(){function a(b){this._array=
[];this._stride=b}Object.defineProperty(a.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.reset=
function(){this.array.length=0};a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(b,g){return 65535&b|g<<16};a.i8888to32=function(b,g,h,k){return b&255|(g&255)<<8|(h&255)<<16|k<<24};a.i8816to32=function(b,g,h){return b&255|(g&255)<<8|h<<16};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/rendererUtils":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});var a=new Uint32Array(1),b=
new Uint8Array(a.buffer);q.int32To4Bytes=function(g){a[0]=g|0;return[b[0],b[1],b[2],b[3]]}})},"esri/layers/vectorTiles/views/vectorTiles/renderers/vtShaderSnippets":function(){define("require exports dojo/text!../../2d/engine/webgl/shaders/tileInfo.xml dojo/text!./shaders/backgroundShaders.xml dojo/text!./shaders/circleShaders.xml dojo/text!./shaders/fillShaders.xml dojo/text!./shaders/iconShaders.xml dojo/text!./shaders/lineShaders.xml dojo/text!./shaders/outlineShaders.xml dojo/text!./shaders/textShaders.xml ../../webgl/ShaderSnippets".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e){m=new e;e.parse(b,m);e.parse(a,m);e.parse(h,m);e.parse(c,m);e.parse(d,m);e.parse(k,m);e.parse(f,m);e.parse(g,m);return m})},"esri/layers/vectorTiles/views/vectorTiles/renderers/CircleRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),function(m,q,a,b,
g,h,k,d,c,f){return function(){function e(){this._attributeLocations={a_pos:0,a_color:1,a_stroke_color:2,a_data:3};this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=b.create();this._color=g.create();this._strokeColor=g.create()}e.prototype.dispose=function(){};e.prototype.render=function(l,n,r,t,w,v,y,x,B){if(0!==n.triangleElementCount){this._initialized||this._initialize(l);var p=y.hasDataDrivenRadius?1:y.getPaintValue("circle-radius",r),z=y.hasDataDrivenColor?[1,1,1,1]:y.getPaintValue("circle-color",
r),u=y.hasDataDrivenOpacity?1:y.getPaintValue("circle-opacity",r),D=y.hasDataDrivenStrokeWidth?1:y.getPaintValue("circle-stroke-width",r),I=y.hasDataDrivenStrokeColor?[1,1,1,1]:y.getPaintValue("circle-stroke-color",r),C=y.hasDataDrivenStrokeOpacity?1:y.getPaintValue("circle-stroke-opacity",r),E=y.hasDataDrivenBlur?0:y.getPaintValue("circle-blur",r);u=u*z[3]*B;this._color[0]=u*z[0];this._color[1]=u*z[1];this._color[2]=u*z[2];this._color[3]=u;u=C*I[3]*B;this._strokeColor[0]=u*I[0];this._strokeColor[1]=
u*I[1];this._strokeColor[2]=u*I[2];this._strokeColor[3]=u;B=v.tileTransform.transform;z=y.getPaintValue("circle-translate",r);if(0!==z[0]||0!==z[1])a.copy(this._viewProjMat,v.tileTransform.transform),B=z[0],z=z[1],C=I=0,C=(1<<v.key.level)/Math.pow(2,r)*(v.coordRange/512),1===y.getPaintValue("circle-translate-anchor",r)?(w*=-h.C_DEG_TO_RAD,r=Math.sin(w),w=Math.cos(w),I=C*(B*w-z*r),C*=B*r+z*w):(I=C*B,C*=z),this._offsetVector[0]=I,this._offsetVector[1]=C,this._offsetVector[2]=0,a.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector),B=this._viewProjMat;if(r=this._getCircleVAO(l,v))l.bindVAO(r),r=3===t,t=this._shaderVariations.getProgram([r],void 0,void 0,this._attributeLocations),l.bindProgram(t),t.setUniformMatrix4fv("u_transformMatrix",B),t.setUniformMatrix4fv("u_extrudeMatrix",x),t.setUniform2fv("u_normalized_origin",v.tileTransform.displayCoord),t.setUniform1f("u_depth",y.z),t.setUniform1f("u_radius",p),t.setUniform4fv("u_color",this._color),t.setUniform1f("u_blur",E),t.setUniform1f("u_stroke_width",
D),t.setUniform4fv("u_stroke_color",this._strokeColor),t.setUniform1f("u_antialiasingWidth",1.2),r&&(v=k.int32To4Bytes(n.layerID),t.setUniform4f("u_id",v[0],v[1],v[2],v[3])),l.drawElements(4,n.triangleElementCount,5125,12*n.triangleElementStart),l.bindVAO()}};e.prototype._initialize=function(l){if(this._initialized)return!0;l=new c("circle",["circleVS","circleFS"],[],d,l);l.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=l;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:16,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:16,normalized:!0,divisor:0},{name:"a_stroke_color",count:4,type:5121,offset:8,stride:16,normalized:!0,divisor:0},{name:"a_data",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};return this._initialized=!0};e.prototype._getCircleVAO=function(l,n){if(n.circleVertexArrayObject)return n.circleVertexArrayObject;var r=n.circleVertexBuffer,t=n.circleIndexBuffer;if(!r||!t)return null;n.circleVertexArrayObject=
new f(l,this._attributeLocations,this._vertexAttributes,{geometry:r},t);return n.circleVertexArrayObject};return e}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FadeRecorder":function(){define(["require","exports","../../../core/now"],function(m,q,a){Object.defineProperty(q,"__esModule",{value:!0});(function(){return function(b,g){this.level=b;this.now=g}})();m=function(){return function(b,g,h,k){this.fadeSpeed=b;this.minfadeLevel=g;this.maxfadeLevel=h;this.fadeChange=k}}();q.FadeProperties=
m;m=function(){function b(g){void 0===g&&(g=300);this._levelSnapshots=[];this._duration=g}b.prototype.recordLevel=function(g){var h=a(),k=this._levelSnapshots;0===k.length&&(k.push({level:g,now:0}),k.push({level:g,now:0}));2!==k.length&&k[0].level===g||k.push({level:g,now:h})};b.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var g=this._duration,h=this._levelSnapshots,k=h.length,d=h[k-1],c=-1;k>c+1&&h[c+1].now+g<d.now;)c++;for(0>c&&(c=0);c<k;c++)if(h[c].level!==d.level)return!0;
return!1};b.prototype.getFadeValues=function(g){void 0===g&&(g=!1);for(var h=this._duration,k=a(),d=this._levelSnapshots;3<d.length&&d[1].now+h<k;)d.shift();d[1].now+h<k&&(d[0].level=d[1].level);var c=d[0].level,f=d[d.length-1],e=f.level,l=Math.min(c,e);c=Math.max(c,e);d=(f.level-d[1].level)/((f.now-d[1].now)/h);return g?{fadeSpeed:0,minfadeLevel:l,maxfadeLevel:c,fadeChange:0}:{fadeSpeed:d,minfadeLevel:l,maxfadeLevel:c,fadeChange:(k-f.now)/h*d}};return b}();q.FadeRecorder=m})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FillRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e){var l=1/65536;return function(){function n(){this._fillAttributeLocations={a_pos:0};this._fillAttributeLocationsDD={a_pos:0,a_color:1};this._outlineAttributeLocations={a_pos:0,a_offset:1,a_xnormal:2};this._outlineAttributeLocationsDD={a_pos:0,a_offset:1,a_xnormal:2,a_color:3};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=g.create();this._patternMatrix=a.create();this._color=h.create();this._outlineColor=h.create()}n.prototype.dispose=function(){};
n.prototype.render=function(r,t,w,v,y,x,B,p,z,u,D){if(0!==t.triangleElementCount){this._initialized||this._initialize(r);var I=void 0!==B.getPaintValue("fill-pattern",w),C=B.hasDataDrivenColor?[1,1,1,1]:B.getPaintValue("fill-color",w),E=B.hasDataDrivenOpacity?1:B.getPaintValue("fill-opacity",w),G=E*C[3]*D;this._color[0]=G*C[0];this._color[1]=G*C[1];this._color[2]=G*C[2];this._color[3]=G;C=3===y;var H;C&&(H=d.int32To4Bytes(t.layerID));G=x.tileTransform.transform;var L=x.coordRange/512,O=B.getPaintValue("fill-translate",
w);if(0!==O[0]||0!==O[1]){b.copy(this._viewProjMat,x.tileTransform.transform);G=O[0];O=O[1];var W=0,Z=0;L*=(1<<x.key.level)/Math.pow(2,w);1===B.getPaintValue("fill-translate-anchor",w)?(W=-k.C_DEG_TO_RAD*v,v=Math.sin(W),Z=Math.cos(W),W=L*(G*Z-O*v),Z=L*(G*v+O*Z)):(W=L*G,Z=L*O);this._offsetVector[0]=W;this._offsetVector[1]=Z;this._offsetVector[2]=0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);G=this._viewProjMat}this._drawFill(r,t,w,y,x,B,p,G,u,D,C,H);if(B.getPaintValue("fill-antialias",
w)&&!I&&0<t.outlineElementCount&&(1===y||3===y)){y=B.hasDataDrivenOutline;if(B.outlineUsesFillColor){if(1!==this._color[3])return;this._outlineColor[0]=this._color[0];this._outlineColor[1]=this._color[1];this._outlineColor[2]=this._color[2];this._outlineColor[3]=this._color[3]}else w=B.hasDataDrivenOutlineColor?[1,1,1,1]:B.getPaintValue("fill-outline-color",w),D*=E*w[3],this._outlineColor[0]=D*w[0],this._outlineColor[1]=D*w[1],this._outlineColor[2]=D*w[2],this._outlineColor[3]=D;u=.75/u;if(D=this._getOutlineVAO(r,
x,y))r.bindVAO(D),D=this._outlineShaderVariations.getProgram([y,C],void 0,void 0,y?this._outlineAttributeLocationsDD:this._outlineAttributeLocations),r.bindProgram(D),D.setUniformMatrix4fv("u_transformMatrix",G),D.setUniformMatrix4fv("u_extrudeMatrix",z),D.setUniform2fv("u_normalized_origin",x.tileTransform.displayCoord),D.setUniform1f("u_depth",B.z+l),D.setUniform1f("u_outline_width",u),D.setUniform4fv("u_color",this._outlineColor),C&&D.setUniform4f("u_id",H[0],H[1],H[2],H[3]),r.drawElements(4,t.outlineElementCount,
5125,12*t.outlineElementStart),r.bindVAO()}}};n.prototype._initialize=function(r){if(this._initialized)return!0;var t=new f("fill",["fillVS","fillFS"],[],c,r);t.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");t.addDefine("DD","DD",[!0,!1],"DD");t.addDefine("ID","ID",[!0,!0],"ID");this._fillShaderVariations=t;this._fillVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]};this._fillVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,
stride:8,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:8,normalized:!0,divisor:0}]};r=new f("outline",["outlineVS","outlineFS"],[],c,r);r.addDefine("DD","DD",[!0,!1],"DD");r.addDefine("ID","ID",[!0,!0],"ID");this._outlineShaderVariations=r;this._outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,
stride:8,normalized:!1,divisor:0}]};this._outlineVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:12,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:12,normalized:!0,divisor:0}]};return this._initialized=!0};n.prototype._drawFill=function(r,t,w,v,y,x,B,p,z,u,D,I){var C=x.getPaintValue("fill-pattern",
w),E=void 0!==C,G=x.hasDataDrivenOpacity?1:u*x.getPaintValue("fill-opacity",w),H=x.hasDataDrivenColor?[1,1,1,1]:x.getPaintValue("fill-color",w);u*=G*H[3];this._color[0]=u*H[0];this._color[1]=u*H[1];this._color[2]=u*H[2];this._color[3]=u;H=x.hasDataDrivenFill;G=!1;!E&&(H?0:1===u)&&(G=!0);if(!E||0!==v)if(!G||1!==v)if(E||G||0!==v)if(v=this._getFillVAO(r,y,H))r.bindVAO(v),v=this._fillShaderVariations.getProgram([E,H,D],void 0,void 0,H?this._fillAttributeLocationsDD:this._fillAttributeLocations),r.bindProgram(v),
E&&(C=B.getMosaicItemPosition(C,!0))&&(w=y.coordRange/512/Math.pow(2,Math.round(w)-y.key.level)/z,a.identity(this._patternMatrix),z=1/(C.size[1]*w),this._patternMatrix[0]=1/(C.size[0]*w),this._patternMatrix[4]=z,B.bind(r,9729,C.page,1),v.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),v.setUniform2f("u_pattern_tl",C.tl[0],C.tl[1]),v.setUniform2f("u_pattern_br",C.br[0],C.br[1]),v.setUniform1i("u_texture",1)),v.setUniformMatrix4fv("u_transformMatrix",p),v.setUniform2fv("u_normalized_origin",
y.tileTransform.displayCoord),v.setUniform1f("u_depth",x.z+l),v.setUniform4fv("u_color",this._color),D&&v.setUniform4f("u_id",I[0],I[1],I[2],I[3]),r.drawElements(4,t.triangleElementCount,5125,12*t.triangleElementStart),r.bindVAO()};n.prototype._getFillVAO=function(r,t,w){if(w){if(t.fillDDVertexArrayObject)return t.fillDDVertexArrayObject;w=t.fillDDVertexBuffer;var v=t.fillIndexBuffer;if(!w||!v)return null;t.fillDDVertexArrayObject=new e(r,this._fillAttributeLocationsDD,this._fillVertexAttributesDD,
{geometry:w},v);return t.fillDDVertexArrayObject}if(t.fillVertexArrayObject)return t.fillVertexArrayObject;w=t.fillVertexBuffer;v=t.fillIndexBuffer;if(!w||!v)return null;t.fillVertexArrayObject=new e(r,this._fillAttributeLocations,this._fillVertexAttributes,{geometry:w},v);return t.fillVertexArrayObject};n.prototype._getOutlineVAO=function(r,t,w){if(w){if(t.outlineDDVertexArrayObject)return t.outlineDDVertexArrayObject;w=t.outlineDDVertexBuffer;var v=t.outlineIndexBuffer;if(!w||!v)return null;t.outlineDDVertexArrayObject=
new e(r,this._outlineAttributeLocationsDD,this._outlineVertexAttributesDD,{geometry:w},v);return t.outlineDDVertexArrayObject}if(t.outlineVertexArrayObject)return t.outlineVertexArrayObject;w=t.outlineVertexBuffer;v=t.outlineIndexBuffer;if(!w||!v)return null;t.outlineVertexArrayObject=new e(r,this._outlineAttributeLocations,this._outlineVertexAttributes,{geometry:w},v);return t.outlineVertexArrayObject};return n}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/LineRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec2 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e){return function(){function l(){this._attributeLocations={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2};this._attributeLocationsDD={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2,a_color:3,a_width:4};this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=g.create();this._color=h.create();this._dashArray=b.create()}l.prototype.dispose=function(){};l.prototype.render=function(n,r,t,w,v,y,x,B,p,z,u){if(0!==r.triangleElementCount){this._initialized||
this._initialize(n);var D=y.tileTransform.transform,I=y.coordRange/512,C=x.getPaintValue("line-translate",t);if(0!==C[0]||0!==C[1]){a.copy(this._viewProjMat,y.tileTransform.transform);D=C[0];C=C[1];var E=0,G=0;G=(1<<y.key.level)/Math.pow(2,t)*I;v=v.rotation;if(1===x.getPaintValue("line-translate-anchor",t)){E=-k.C_DEG_TO_RAD*v;v=Math.sin(E);var H=Math.cos(E);E=G*(D*H-C*v);G*=D*v+C*H}else E=G*D,G*=C;this._offsetVector[0]=E;this._offsetVector[1]=G;this._offsetVector[2]=0;a.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector);D=this._viewProjMat}C=x.getPaintValue("line-pattern",t);G=void 0!==C;z=1/z;v=x.getPaintValue("line-blur",t);H=x.hasDataDrivenColor?[1,1,1,1]:x.getPaintValue("line-color",t);var L=x.hasDataDrivenOpacity?1:x.getPaintValue("line-opacity",t);E=x.hasDataDrivenWidth?1:x.getPaintValue("line-width",t);u*=L*H[3];this._color[0]=u*H[0];this._color[1]=u*H[1];this._color[2]=u*H[2];this._color[3]=u;u=x.hasDataDrivenLine;w=3===w;var O;w&&(O=d.int32To4Bytes(r.layerID));if(H=
this._getLineVAO(n,y,u)){n.bindVAO(H);u=this._shaderVariations.getProgram([G,u,w],void 0,void 0,u?this._attributeLocationsDD:this._attributeLocations);n.bindProgram(u);u.setUniformMatrix4fv("u_transformMatrix",D);u.setUniformMatrix4fv("u_extrudeMatrix",p);u.setUniform2fv("u_normalized_origin",y.tileTransform.displayCoord);u.setUniform1f("u_depth",x.z);u.setUniform1f("u_blur",v);u.setUniform1f("u_antialiasing",z);u.setUniform4fv("u_color",this._color);u.setUniform1f("u_width",E);w&&u.setUniform4f("u_id",
O[0],O[1],O[2],O[3]);if(G){if(t=B.getMosaicItemPosition(C,!0))B.bind(n,9729,t.page,1),u.setUniform2f("u_pattern_tl",t.tl[0],t.br[1]),u.setUniform2f("u_pattern_br",t.br[0],t.tl[1]),u.setUniform2f("u_spriteSize",I*t.size[0],t.size[1]),u.setUniform1i("u_texture",1)}else B=x.getPaintValue("line-dasharray",t),2>B.length&&(B=[1,-1]),this._dashArray[0]=I*B[0],this._dashArray[1]=I*B[1],u.setUniform2fv("u_dasharray",this._dashArray);n.drawElements(4,r.triangleElementCount,5125,12*r.triangleElementStart);n.bindVAO()}}};
l.prototype._initialize=function(n){if(this._initialized)return!0;n=new f("line",["lineVS","lineFS"],[],c,n);n.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");n.addDefine("DD","DD",[!0,!1],"DD");n.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=n;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,
offset:8,stride:12,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:20,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:20,normalized:!0,divisor:0},{name:"a_width",count:1,type:5126,offset:16,stride:20,normalized:!1,divisor:0}]};return this._initialized=
!0};l.prototype._getLineVAO=function(n,r,t){if(t){if(r.lineDDVertexArrayObject)return r.lineDDVertexArrayObject;t=r.lineDDVertexBuffer;var w=r.lineIndexBuffer;if(!t||!w)return null;r.lineDDVertexArrayObject=new e(n,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:t},w);return r.lineDDVertexArrayObject}if(r.lineVertexArrayObject)return r.lineVertexArrayObject;t=r.lineVertexBuffer;w=r.lineIndexBuffer;if(!t||!w)return null;r.lineVertexArrayObject=new e(n,this._attributeLocations,this._vertexAttributes,
{geometry:t},w);return r.lineVertexArrayObject};return l}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],function(m){var q={create:function(){var a=new m.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new m.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var g=new m.ARRAY_TYPE(2);g[0]=a;g[1]=b;return g},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,g){a[0]=b;a[1]=g;return a},add:function(a,b,g){a[0]=b[0]+
g[0];a[1]=b[1]+g[1];return a},subtract:function(a,b,g){a[0]=b[0]-g[0];a[1]=b[1]-g[1];return a}};q.sub=q.subtract;q.multiply=function(a,b,g){a[0]=b[0]*g[0];a[1]=b[1]*g[1];return a};q.mul=q.multiply;q.divide=function(a,b,g){a[0]=b[0]/g[0];a[1]=b[1]/g[1];return a};q.div=q.divide;q.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};q.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};q.min=function(a,b,g){a[0]=Math.min(b[0],g[0]);a[1]=Math.min(b[1],g[1]);return a};
q.max=function(a,b,g){a[0]=Math.max(b[0],g[0]);a[1]=Math.max(b[1],g[1]);return a};q.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};q.scale=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;return a};q.scaleAndAdd=function(a,b,g,h){a[0]=b[0]+g[0]*h;a[1]=b[1]+g[1]*h;return a};q.distance=function(a,b){var g=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(g*g+a*a)};q.dist=q.distance;q.squaredDistance=function(a,b){var g=b[0]-a[0];a=b[1]-a[1];return g*g+a*a};q.sqrDist=q.squaredDistance;q.length=
function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};q.normalize=function(a,b){var g=b[0],h=b[1];g=g*g+h*h;0<g&&(g=1/Math.sqrt(g),a[0]=b[0]*g,a[1]=b[1]*g);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};q.cross=function(a,b,g){b=b[0]*g[1]-b[1]*g[0];a[0]=a[1]=0;a[2]=b;return a};
q.lerp=function(a,b,g,h){var k=b[0];b=b[1];a[0]=k+h*(g[0]-k);a[1]=b+h*(g[1]-b);return a};q.random=function(a,b){b=b||1;var g=2*m.RANDOM()*Math.PI;a[0]=Math.cos(g)*b;a[1]=Math.sin(g)*b;return a};q.transformMat2=function(a,b,g){var h=b[0];b=b[1];a[0]=g[0]*h+g[2]*b;a[1]=g[1]*h+g[3]*b;return a};q.transformMat2d=function(a,b,g){var h=b[0];b=b[1];a[0]=g[0]*h+g[2]*b+g[4];a[1]=g[1]*h+g[3]*b+g[5];return a};q.transformMat3=function(a,b,g){var h=b[0];b=b[1];a[0]=g[0]*h+g[3]*b+g[6];a[1]=g[1]*h+g[4]*b+g[7];return a};
q.transformMat4=function(a,b,g){var h=b[0];b=b[1];a[0]=g[0]*h+g[4]*b+g[12];a[1]=g[1]*h+g[5]*b+g[13];return a};q.forEach=function(){var a=q.create();return function(b,g,h,k,d,c){g||(g=2);h||(h=0);for(k=k?Math.min(k*g+h,b.length):b.length;h<k;h+=g)a[0]=b[h],a[1]=b[h+1],d(a,a,c),b[h]=a[0],b[h+1]=a[1];return b}}();q.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};q.equals=function(a,b){var g=a[0];a=a[1];var h=b[0];b=b[1];return Math.abs(g-
h)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(h))&&Math.abs(a-b)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return q})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SymbolRenderer":function(){define(["require","exports","./IconRenderer","./SDFRenderer"],function(m,q,a,b){return function(){function g(){this._iconRenderer=new a;this._sdfRenderer=new b}g.prototype.dispose=function(){this._iconRenderer&&(this._iconRenderer.dispose(),this._iconRenderer=null);this._sdfRenderer&&(this._sdfRenderer.dispose(),
this._sdfRenderer=null)};g.prototype.render=function(h,k,d,c,f,e,l,n,r,t,w,v,y,x){k.hasData()&&(0<k.markerPerPageElementsMap.size&&this._iconRenderer.render(h,k,d,c,f,e,l,n,r,w,v,x),0<k.glyphPerPageElementsMap.size&&this._sdfRenderer.render(h,k,d,c,f,e,l,n,t,w,v,y,x))};return g}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/IconRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(m,q,a,b,g,h,k,d,c,f){return function(){function e(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._spritesTextureSize=new Float32Array(2);this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=b.create();this._extrudeMat=a.create();this._color=g.create()}e.prototype.dispose=function(){};e.prototype.render=function(l,n,r,t,w,v,y,x,B,p,z,u){var D=this;
this._initialized||this._initialize(l);var I=x.hasDataDrivenIconSize?1:x.getLayoutValue("icon-size",r),C=x.hasDataDrivenIconColor?[1,1,1,1]:x.getPaintValue("icon-color",r),E=x.hasDataDrivenIconOpacity?1:x.getPaintValue("icon-opacity",r);u*=C[3]*E;this._color[0]=u*C[0];this._color[1]=u*C[1];this._color[2]=u*C[2];this._color[3]=u;C=x.getLayoutValue("icon-rotation-alignment",r);2===C&&(C=1===x.getLayoutValue("symbol-placement",r)?0:1);var G=0===C;u=n.isSDF;E=x.hasDataDrivenIcon;t=3===t;C=h.degToByte(w);
var H=y.tileTransform.transform,L=x.getPaintValue("icon-translate",r);if(0!==L[0]||0!==L[1]){a.copy(this._viewProjMat,y.tileTransform.transform);H=L[0];L=L[1];var O=0,W=0;W=(1<<y.key.level)/Math.pow(2,r)*(y.coordRange/512);if(1===x.getPaintValue("icon-translate-anchor",r)){O=-h.C_DEG_TO_RAD*w;w=Math.sin(O);var Z=Math.cos(O);O=W*(H*Z-L*w);W*=H*w+L*Z}else O=W*H,W*=L;this._offsetVector[0]=O;this._offsetVector[1]=W;this._offsetVector[2]=0;a.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);
H=this._viewProjMat}G?a.copy(this._extrudeMat,p):a.copy(this._extrudeMat,z);if(p=this._getIconVAO(l,y,E)){l.bindVAO(p);var ba=this._shaderVariations.getProgram([u,E,t],void 0,void 0,E?this._attributeLocationsDD:this._attributeLocations);l.bindProgram(ba);u&&(p=x.getPaintValue("icon-halo-color",r),z=x.getPaintValue("icon-halo-width",r),ba.setUniform4f("u_outlineColor",p[0],p[1],p[2],p[3]),ba.setUniform1f("u_outlineSize",z));ba.setUniformMatrix4fv("u_transformMatrix",H);ba.setUniformMatrix4fv("u_extrudeMatrix",
this._extrudeMat);ba.setUniform2fv("u_normalized_origin",y.tileTransform.displayCoord);ba.setUniform1f("u_depth",x.z);ba.setUniform1f("u_mapRotation",C);ba.setUniform1f("u_keepUpright",0);ba.setUniform1f("u_level",10*r);ba.setUniform1f("u_fadeSpeed",10*v.fadeSpeed);ba.setUniform1f("u_minfadeLevel",10*v.minfadeLevel);ba.setUniform1f("u_maxfadeLevel",10*v.maxfadeLevel);ba.setUniform1f("u_fadeChange",10*(r+v.fadeChange));ba.setUniform1i("u_texture",1);ba.setUniform1f("u_size",I);ba.setUniform4fv("u_color",
this._color);t&&(r=k.int32To4Bytes(n.layerID),ba.setUniform4f("u_id",r[0],r[1],r[2],r[3]));n.markerPerPageElementsMap.forEach(function(P,ha){D._spritesTextureSize[0]=B.getWidth(ha)/4;D._spritesTextureSize[1]=B.getHeight(ha)/4;ba.setUniform2fv("u_mosaicSize",D._spritesTextureSize);B.bind(l,9729,ha,1);l.drawElements(4,P[1],5125,12*P[0])});l.bindVAO()}};e.prototype._initialize=function(l){if(this._initialized)return!0;l=new c("icon",["iconVS","iconFS"],[],d,l);l.addDefine("SDF","SDF",[!0,!0],"SDF");
l.addDefine("DD","DD",[!0,!1],"DD");l.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=l;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",
count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]};return this._initialized=!0};e.prototype._getIconVAO=
function(l,n,r){if(r){if(n.iconDDVertexArrayObject)return n.iconDDVertexArrayObject;r=n.iconDDVertexBuffer;var t=n.iconIndexBuffer;if(!r||!t)return null;n.iconDDVertexArrayObject=new f(l,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:r},t);return n.iconDDVertexArrayObject}if(n.iconVertexArrayObject)return n.iconVertexArrayObject;r=n.iconVertexBuffer;t=n.iconIndexBuffer;if(!r||!t)return null;n.iconVertexArrayObject=new f(l,this._attributeLocations,this._vertexAttributes,{geometry:r},
t);return n.iconVertexArrayObject};return e}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SDFRenderer":function(){define("require exports dojo/has ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),function(m,q,a,b,g,h,k,d,c,f,e){var l=1/65536;return function(){function n(){this._attributeLocations={a_pos:0,a_vertexOffset:1,
a_tex:2,a_levelInfo:3};this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=g.create();this._extrudeMat=b.create();this._haloColor=h.create();this._sdfColor=h.create();this._scaleVec=g.create()}n.prototype.dispose=function(){};n.prototype.render=function(r,t,w,v,y,x,B,p,z,u,D,I,C){var E=this;if(!a("esri-vector-tiles-avoid-text")){this._initialized||this._initialize(r);var G=k.degToByte(y),
H=p.getLayoutValue("text-rotation-alignment",w);2===H&&(H=1===p.getLayoutValue("symbol-placement",w)?0:1);var L=0===H;H=p.getLayoutValue("text-keep-upright",w)&&L;v=3===v;I=.8*3/I;var O=p.hasDataDrivenTextSize?1:p.getLayoutValue("text-size",w),W=p.hasDataDrivenTextColor?[1,1,1,1]:p.getPaintValue("text-color",w),Z=p.hasDataDrivenTextOpacity?1:p.getPaintValue("text-opacity",w),ba=W[3]*Z*C;this._sdfColor[0]=ba*W[0];this._sdfColor[1]=ba*W[1];this._sdfColor[2]=ba*W[2];this._sdfColor[3]=ba;this._glyphTextureSize||
(this._glyphTextureSize=new Float32Array([z.width/4,z.height/4]));W=B.tileTransform.transform;ba=p.getPaintValue("text-translate",w);if(0!==ba[0]||0!==ba[1]){b.copy(this._viewProjMat,B.tileTransform.transform);W=ba[0];ba=ba[1];var P=0,ha=0;ha=(1<<B.key.level)/Math.pow(2,w)*(B.coordRange/512);if(1===p.getPaintValue("text-translate-anchor",w)){P=-k.C_DEG_TO_RAD*y;y=Math.sin(P);var X=Math.cos(P);P=ha*(W*X-ba*y);ha*=W*y+ba*X}else P=ha*W,ha*=ba;this._offsetVector[0]=P;this._offsetVector[1]=ha;this._offsetVector[2]=
0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);W=this._viewProjMat}L?b.copy(this._extrudeMat,u):b.copy(this._extrudeMat,D);this._scaleVec[0]=1/24;this._scaleVec[1]=1/24;this._scaleVec[2]=1;b.scale(this._extrudeMat,this._extrudeMat,this._scaleVec);u=p.hasDataDrivenText;if(D=this._getSDFVAO(r,B,u)){r.bindVAO(D);var R=this._shaderVariations.getProgram([u,v],void 0,void 0,u?this._attributeLocationsDD:this._attributeLocations);r.bindProgram(R);R.setUniformMatrix4fv("u_transformMatrix",
W);R.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat);R.setUniform2fv("u_normalized_origin",B.tileTransform.displayCoord);R.setUniform1f("u_depth",p.z+l);R.setUniform2fv("u_mosaicSize",this._glyphTextureSize);R.setUniform1f("u_mapRotation",G);R.setUniform1f("u_keepUpright",H?1:0);R.setUniform1f("u_level",10*w);R.setUniform1f("u_fadeSpeed",10*x.fadeSpeed);R.setUniform1f("u_minfadeLevel",10*x.minfadeLevel);R.setUniform1f("u_maxfadeLevel",10*x.maxfadeLevel);R.setUniform1f("u_fadeChange",10*(w+
x.fadeChange));R.setUniform1i("u_texture",0);R.setUniform1f("u_size",O);R.setUniform1f("u_antialiasingWidth",I);v&&(x=d.int32To4Bytes(t.layerID),R.setUniform4f("u_id",x[0],x[1],x[2],x[3]));t.glyphPerPageElementsMap.forEach(function(V,J){z.bind(r,9729,J,0);var S=p.getPaintValue("text-halo-color",w);J=p.getPaintValue("text-halo-width",w);if(0<S[3]&&0<J){var aa=S[3]*Z*C;E._haloColor[0]=aa*S[0];E._haloColor[1]=aa*S[1];E._haloColor[2]=aa*S[2];E._haloColor[3]=aa;S=3*p.getPaintValue("text-halo-blur",w);
J*=3;R.setUniform4fv("u_color",E._haloColor);R.setUniform1f("u_halo",1);R.setUniform1f("u_edgeDistance",J);R.setUniform1f("u_edgeBlur",S);r.drawElements(4,V[1],5125,12*V[0])}0<E._sdfColor[3]&&(R.setUniform4fv("u_color",E._sdfColor),R.setUniform1f("u_halo",0),R.setUniform1f("u_edgeDistance",0),R.setUniform1f("u_edgeBlur",0),r.drawElements(4,V[1],5125,12*V[0]))});r.bindVAO()}}};n.prototype._initialize=function(r){if(this._initialized)return!0;r=new f("text",["textVS","textFS"],[],c,r);r.addDefine("DD",
"DD",[!0,!1],"DD");r.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=r;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]};return this._initialized=!0};n.prototype._getSDFVAO=function(r,
t,w){if(w){if(t.textDDVertexArrayObject)return t.textDDVertexArrayObject;w=t.textDDVertexBuffer;var v=t.textIndexBuffer;if(!w||!v)return null;t.textDDVertexArrayObject=new e(r,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:w},v);return t.textDDVertexArrayObject}if(t.textVertexArrayObject)return t.textVertexArrayObject;w=t.textVertexBuffer;v=t.textIndexBuffer;if(!w||!v)return null;t.textVertexArrayObject=new e(r,this._attributeLocations,this._vertexAttributes,{geometry:w},v);return t.textVertexArrayObject};
return n}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/TileInfoRenderer":function(){define("require exports ../GeometryUtils ./vtShaderSnippets ../../webgl/BufferObject ../../webgl/Program ../../webgl/Texture ../../webgl/VertexArrayObject".split(" "),function(m,q,a,b,g,h,k,d){return function(){function c(){this._initialized=!1;this._maxWidth=0;this._color=new Float32Array([1,0,0,1])}c.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=
null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null)};c.prototype.render=function(f,e){this._initialized||this._initialize(f);f.bindVAO(this._outlineVertexArrayObject);f.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",
e.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",e.coordRange);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);f.setLineWidth(2);f.drawArrays(3,0,4);f.bindVAO();var l=this._getTexture(f,e);l&&(f.bindVAO(this._tileInfoVertexArrayObject),f.bindProgram(this._tileInfoProgram),f.bindTexture(l,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",
e.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",e.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",e.coordRange/512),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",l.descriptor.width,l.descriptor.height),f.drawArrays(5,0,4),f.bindVAO())};c.prototype._initialize=function(f){if(this._initialized)return!0;var e={a_pos:0},l=new h(f,b.backgroundVS,
b.backgroundFS,e),n=new h(f,b.tileInfoVS,b.tileInfoFS,e),r={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},t=new Int8Array([0,0,1,0,1,1,0,1]);t=g.createVertex(f,35044,t);t=new d(f,e,r,{geometry:t});var w=new Int8Array([0,0,1,0,0,1,1,1]);w=g.createVertex(f,35044,w);f=new d(f,e,r,{geometry:w});this._outlineProgram=l;this._tileInfoProgram=n;this._outlineVertexArrayObject=t;this._tileInfoVertexArrayObject=f;return this._initialized=!0};c.prototype._getTexture=function(f,
e){if(e.texture)return e.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var l=e.key.id,n=this._canvas.getContext("2d");n.font="24px sans-serif";n.textAlign="left";n.textBaseline="middle";var r=n.measureText(l);r=Math.pow(2,Math.ceil(a.log2(r.width+2)));r>this._maxWidth&&(this._maxWidth=r);n.clearRect(0,
0,this._maxWidth,32);n.fillStyle=e.key.level>e.refKey.level?"red":"blue";n.fillText(l,0,16);e.texture=new k(f,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return e.texture};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileDisplayObject":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/ObjectPool ../../core/libs/gl-matrix/mat4 ../../core/libs/gl-matrix/vec2 ../../geometry/support/spatialReferenceUtils ../2d/engine/DisplayObject ../2d/tiling/enums ../2d/tiling/TileKey ./RenderBucket ../webgl/BufferObject".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l){var n="fillVertexBuffer fillDDVertexBuffer fillIndexBuffer outlineVertexBuffer outlineDDVertexBuffer outlineIndexBuffer lineVertexBuffer lineDDVertexBuffer lineIndexBuffer iconVertexBuffer iconDDVertexBuffer iconIndexBuffer textVertexBuffer textDDVertexBuffer textIndexBuffer circleVertexBuffer circleIndexBuffer".split(" ");return function(r){function t(){for(var w=[],v=0;v<arguments.length;v++)w[v]=arguments[v];v=r.call(this)||this;v._renderBuckets=[];v._vectorTileData=
null;v._symbolUpdateData=null;v.status=c.TileStatus.INITIALIZED;v.coords=[0,0];v.bounds=[0,0,0,0];v.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]};v.stencilData={mask:0,reference:0};v.status=c.TileStatus.INITIALIZED;v.tileTransform.transform=g.create();v.tileTransform.displayCoord=h.create();0<w.length&&(y=v.acquire).call.apply(y,[v].concat(w));return v;var y}a(t,r);t.prototype.reset=function(){f.pool.release(this.key);this.refKey=this.key=null;this.coords[0]=0;this.coords[1]=
0;this.bounds[0]=0;this.bounds[1]=0;this.bounds[2]=0;this.height=this.width=this.bounds[3]=0;this.resolution=null;this.rotation=0;this.id=this.client=this.styleLayers=this._vectorTileData=null;this.tileTransform.transform.fill(0);this.tileTransform.displayCoord.fill(0);this.stencilData.mask=0;this.stencilData.reference=0;this._renderBuckets.length=0;this._symbolUpdateData=null;this.status=c.TileStatus.INITIALIZED};t.prototype.acquire=function(w,v,y,x,B){this.key=w;this.refKey=v;v=y.lodAt(w.level).resolution;
var p=y.size[0]*v,z=y.origin,u=w.col*p,D=w.row*p,I=y.spatialReference,C=0;I&&(I._isWrappable?I._isWrappable():I.isWrappable)&&(I=k.getInfo(I),C=I.valid[1]-I.valid[0]);u=z.x+u+w.world*C;z=z.y-D;this.coords[0]=u;this.coords[1]=z;this.bounds[0]=u;this.bounds[1]=z;this.bounds[2]=u+p;this.bounds[3]=z-p;this.widthInPixels=y.size[1];this.coordRange=4096;this.resolution=v;this.rotation=B;this.styleLayers=x;this.id=w.id};t.prototype.setData=function(w,v){this._vectorTileData=w;this.client=v;w&&w.bufferDataInfo||
(this.status=c.TileStatus.NO_DATA)};t.prototype.updateSymbolData=function(w){w&&(this._symbolUpdateData=w,this.requestRender())};t.prototype.dispose=function(){this.fillVertexArrayObject&&(this.fillVertexArrayObject.dispose(),this.fillVertexArrayObject=null);this.fillDDVertexArrayObject&&(this.fillDDVertexArrayObject.dispose(),this.fillDDVertexArrayObject=null);this.outlineVertexArrayObject&&(this.outlineVertexArrayObject.dispose(),this.outlineVertexArrayObject=null);this.outlineDDVertexArrayObject&&
(this.outlineDDVertexArrayObject.dispose(),this.outlineDDVertexArrayObject=null);this.lineVertexArrayObject&&(this.lineVertexArrayObject.dispose(),this.lineVertexArrayObject=null);this.lineDDVertexArrayObject&&(this.lineDDVertexArrayObject.dispose(),this.lineDDVertexArrayObject=null);this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&
(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this.circleVertexArrayObject&&(this.circleVertexArrayObject.dispose(),this.circleVertexArrayObject=null);this.fillVertexBuffer&&(this.fillVertexBuffer.dispose(),this.fillVertexBuffer=null);this.fillDDVertexBuffer&&(this.fillDDVertexBuffer.dispose(),this.fillDDVertexBuffer=null);this.fillIndexBuffer&&(this.fillIndexBuffer.dispose(),
this.fillIndexBuffer=null);this.outlineVertexBuffer&&(this.outlineVertexBuffer.dispose(),this.outlineVertexBuffer=null);this.outlineDDVertexBuffer&&(this.outlineDDVertexBuffer.dispose(),this.outlineDDVertexBuffer=null);this.outlineIndexBuffer&&(this.outlineIndexBuffer.dispose(),this.outlineIndexBuffer=null);this.lineVertexBuffer&&(this.lineVertexBuffer.dispose(),this.lineVertexBuffer=null);this.lineDDVertexBuffer&&(this.lineDDVertexBuffer.dispose(),this.lineDDVertexBuffer=null);this.lineIndexBuffer&&
(this.lineIndexBuffer.dispose(),this.lineIndexBuffer=null);this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textIndexBuffer&&
(this.textIndexBuffer.dispose(),this.textIndexBuffer=null);this.circleVertexBuffer&&(this.circleVertexBuffer.dispose(),this.circleVertexBuffer=null);this.circleIndexBuffer&&(this.circleIndexBuffer.dispose(),this.circleIndexBuffer=null);this.texture&&(this.texture.dispose(),this.texture=null);this._renderBuckets.length=0;this.status=c.TileStatus.INITIALIZED};t.prototype.getCpuMemoryUsage=function(){return null!=this._vectorTileData&&this._vectorTileData.bufferData?this._vectorTileData.bufferData.reduce(function(w,
v){return w+v.byteLength},0)+this._vectorTileData.bufferDataInfo.byteLength+this._vectorTileData.bucketDataInfo.byteLength:0};t.prototype.getGpuMemoryUsage=function(){var w=this,v=n.reduce(function(y,x){return w[x]?y+w[x].size:y},0);this.texture&&(v+=this.texture.descriptor.width*this.texture.descriptor.height*4);return v};t.prototype.attach=function(w){if(this.status!==c.TileStatus.INITIALIZED)return!0;if(0===this._renderBuckets.length)for(var v=new Uint32Array(this._vectorTileData.bucketDataInfo),
y=v.length,x=0;x<y;){var B=v[x],p=v[x+1];if(0===p)p=new e.BackgroundRenderBucket,p.layerID=B,this._renderBuckets.push(p),x+=2;else if(1===p)p=new e.FillRenderBucket,p.layerID=B,p.triangleElementStart=v[x+2],p.triangleElementCount=v[x+3],p.outlineElementStart=v[x+4],p.outlineElementCount=v[x+5],this._renderBuckets.push(p),x+=6;else if(2===p)p=new e.LineRenderBucket,p.layerID=B,p.triangleElementStart=v[x+2],p.triangleElementCount=v[x+3],this._renderBuckets.push(p),x+=4;else if(3===p){p=new e.SymbolRenderBucket;
p.layerID=B;p.isSDF=0!==v[x+2];var z=x+3;B=v[z];z++;if(0<B)for(var u=void 0,D=void 0,I=void 0,C=0;C<B;C++)u=v[z],D=v[z+1],I=v[z+2],p.markerPerPageElementsMap.set(u,[D,I]),z+=3;var E=v[z];z++;if(0<E)for(I=D=u=void 0,C=0;C<E;C++)u=v[z],D=v[z+1],I=v[z+2],p.glyphPerPageElementsMap.set(u,[D,I]),z+=3;this._renderBuckets.push(p);x+=5+3*B+3*E}else 4===p&&(p=new e.CircleRenderBucket,p.layerID=B,p.triangleElementStart=v[x+2],p.triangleElementCount=v[x+3],this._renderBuckets.push(p),x+=4)}w=w.context;v=new Uint32Array(this._vectorTileData.bufferDataInfo);
y=v.length;for(p=x=0;p<y;p+=2,x++)if(!(0>=v[p+1]||0===this._vectorTileData.bufferData[x].byteLength))switch(v[p]){case 1:this.fillVertexBuffer?this.fillVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.fillVertexBuffer=l.createVertex(w,35044,this._vectorTileData.bufferData[x]);break;case 2:this.fillDDVertexBuffer?this.fillDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.fillDDVertexBuffer=l.createVertex(w,35044,this._vectorTileData.bufferData[x]);break;case 3:this.fillIndexBuffer?
this.fillIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.fillIndexBuffer=l.createIndex(w,35044,this._vectorTileData.bufferData[x]);break;case 4:this.outlineVertexBuffer?this.outlineVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.outlineVertexBuffer=l.createVertex(w,35044,this._vectorTileData.bufferData[x]);break;case 5:this.outlineDDVertexBuffer?this.outlineDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.outlineDDVertexBuffer=l.createVertex(w,35044,this._vectorTileData.bufferData[x]);
break;case 6:this.outlineIndexBuffer?this.outlineIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.outlineIndexBuffer=l.createIndex(w,35044,this._vectorTileData.bufferData[x]);break;case 7:this.lineVertexBuffer?this.lineVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.lineVertexBuffer=l.createVertex(w,35044,this._vectorTileData.bufferData[x]);break;case 8:this.lineDDVertexBuffer?this.lineDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.lineDDVertexBuffer=l.createVertex(w,
35044,this._vectorTileData.bufferData[x]);break;case 9:this.lineIndexBuffer?this.lineIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.lineIndexBuffer=l.createIndex(w,35044,this._vectorTileData.bufferData[x]);break;case 10:this.iconVertexBuffer?this.iconVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.iconVertexBuffer=l.createVertex(w,35044,this._vectorTileData.bufferData[x]);break;case 11:this.iconDDVertexBuffer?this.iconDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):
this.iconDDVertexBuffer=l.createVertex(w,35044,this._vectorTileData.bufferData[x]);break;case 12:this.iconIndexBuffer?this.iconIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.iconIndexBuffer=l.createIndex(w,35044,this._vectorTileData.bufferData[x]);break;case 13:this.textVertexBuffer?this.textVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.textVertexBuffer=l.createVertex(w,35044,this._vectorTileData.bufferData[x]);break;case 14:this.textDDVertexBuffer?this.textDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):
this.textDDVertexBuffer=l.createVertex(w,35044,this._vectorTileData.bufferData[x]);break;case 15:this.textIndexBuffer?this.textIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.textIndexBuffer=l.createIndex(w,35044,this._vectorTileData.bufferData[x]);break;case 16:this.circleVertexBuffer?this.circleVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.circleVertexBuffer=l.createVertex(w,35044,this._vectorTileData.bufferData[x]);break;case 17:this.circleIndexBuffer?this.circleIndexBuffer.setData(this._vectorTileData.bufferData[x]):
this.circleIndexBuffer=l.createIndex(w,35044,this._vectorTileData.bufferData[x])}this._vectorTileData=null;this.status=c.TileStatus.READY;return!0};t.prototype.detach=function(w){this.client&&this.status!==c.TileStatus.INVALID&&this.status!==c.TileStatus.INITIALIZED&&this.client.invoke("destructTileData",this.id);this.dispose();r.prototype.detach.call(this,w)};t.prototype.doRender=function(w){if(this.visible&&this.status===c.TileStatus.READY){var v=w.context,y=w.renderer;if(v&&y){var x=w.drawphase;
this._symbolUpdateData&&this._updateSymbolData(w);v.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var B=this.styleLayers,p=void 0!==w.layerOpacity?w.layerOpacity:1;if(0!==p){var z=this._renderBuckets.length,u=0;if(0===x)for(u=z-1;0<=u;u--){var D=this._renderBuckets[u];3!==D.type&&4!==D.type&&D.hasData()&&y.renderBucket(v,D,w.displayLevel,w.requiredLevel,x,this,B.layers[D.layerID],p)}else for(u=0;u<z;u++)D=this._renderBuckets[u],D.hasData()&&y.renderBucket(v,D,w.displayLevel,
w.requiredLevel,x,this,B.layers[D.layerID],p)}}}};t.prototype._updateSymbolData=function(w){if(!this._symbolUpdateData.bucketDataInfo)return!0;var v=new Uint32Array(this._symbolUpdateData.bucketDataInfo),y=v.length;if(0===y)return this._symbolUpdateData=null,!0;if(this.status!==c.TileStatus.READY)return this.requestRender(),!1;w=w.context;for(var x=new Uint32Array(this._symbolUpdateData.bufferDataInfo),B=x.length,p=0,z=0;z<B;z+=2,p++)switch(x[z]){case 10:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),
this.iconVertexBuffer=null);this.iconVertexBuffer=l.createVertex(w,35044,this._symbolUpdateData.bufferData[p]);break;case 11:this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconDDVertexBuffer=l.createVertex(w,35044,this._symbolUpdateData.bufferData[p]);break;case 12:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=l.createIndex(w,35044,this._symbolUpdateData.bufferData[p]);break;case 13:this.textVertexBuffer&&
(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textVertexBuffer=l.createVertex(w,35044,this._symbolUpdateData.bufferData[p]);break;case 14:this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textDDVertexBuffer=l.createVertex(w,35044,this._symbolUpdateData.bufferData[p]);break;case 15:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),this.textIndexBuffer=l.createIndex(w,35044,this._symbolUpdateData.bufferData[p])}w=
this._renderBuckets.length;for(x=0;x<w;x++)this._renderBuckets[x]instanceof e.SymbolRenderBucket&&(B=this._renderBuckets[x],B.markerPerPageElementsMap.clear(),B.glyphPerPageElementsMap.clear());for(w=0;w<y;){B=v[w];p=-1;z=this._renderBuckets.length;for(x=0;x<z;x++)if(this._renderBuckets[x].layerID===B){p=x;break}x=this._renderBuckets[p];x||(x=new e.SymbolRenderBucket,x.layerID=B,x.isSDF=0!==v[w+2],this._renderBuckets.push(x));var u=w+3;B=v[u];u++;if(0<B)for(var D=z=p=void 0,I=0;I<B;I++)p=v[u],z=v[u+
1],D=v[u+2],x.markerPerPageElementsMap.set(p,[z,D]),u+=3;var C=v[u];u++;if(0<C)for(D=z=p=void 0,I=0;I<C;I++)p=v[u],z=v[u+1],D=v[u+2],x.glyphPerPageElementsMap.set(p,[z,D]),u+=3;w+=5+3*B+3*C}this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&
(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this._symbolUpdateData=null;return!0};t.pool=new b(t);return t}(d)})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(m,q,a){return function(){function b(g,h,k,d){this.set(g,h,k,d)}b.from=function(g,h,k,d){return b.pool.acquire(g,h,k,d)};b.getId=function(g,h,k,d){return"object"===typeof g?g.level+"/"+g.row+"/"+g.col+"/"+g.world:g+"/"+h+"/"+k+"/"+
d};Object.defineProperty(b.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});b.prototype.equals=function(g){return this.level===g.level&&this.row===g.row&&this.col===g.col&&this.world===g.world};b.prototype.release=function(){this.world=this.col=this.row=this.level=0};b.prototype.set=function(g,h,k,d){null==g?this.world=this.col=this.row=this.level=0:"object"===
typeof g?(this.level=g.level||0,this.row=g.row||0,this.col=g.col||0,this.world=g.world||0):"string"===typeof g?(g=g.split("/"),h=g[1],k=g[2],d=g[3],this.level=parseFloat(g[0]),this.row=parseFloat(h),this.col=parseFloat(k),this.world=parseFloat(d)):(this.level=+g,this.row=+h,this.col=+k,this.world=+d||0);return this};b.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};b.prototype.getChildKeys=function(){var g=this.level+1,h=this.row<<1,k=this.col<<1,d=this.world;
return[b.pool.acquire(g,h,k,d),b.pool.acquire(g,h,k+1,d),b.pool.acquire(g,h+1,k,d),b.pool.acquire(g,h+1,k+1,d)]};b.prototype._compare=function(g){return this.row<g.row?-1:this.row>g.row?1:this.col<g.col?-1:this.col>g.col?1:0};b.sort=function(g){return g.map(function(h){return b.from(h)}).sort(function(h,k){return h._compare(k)}).map(function(h){return h.id})};b.pool=new a(b,!0,null,25,50);return b}()})},"esri/layers/vectorTiles/views/vectorTiles/RenderBucket":function(){define(["require","exports",
"../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper"],function(m,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});m=function(){return function(g){this.type=g}}();q.RenderBucket=m;b=function(g){function h(){var k=g.call(this,2)||this;k.triangleElementStart=0;k.triangleElementCount=0;return k}a(h,g);h.prototype.hasData=function(){return 0<this.triangleElementCount};return h}(m);q.LineRenderBucket=b;b=function(g){function h(){var k=g.call(this,1)||this;k.triangleElementStart=
0;k.triangleElementCount=0;k.outlineElementStart=0;k.outlineElementCount=0;return k}a(h,g);h.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.outlineElementCount};return h}(m);q.FillRenderBucket=b;b=function(g){function h(){var k=g.call(this,3)||this;k.markerPerPageElementsMap=new Map;k.glyphPerPageElementsMap=new Map;k.isSDF=!1;return k}a(h,g);h.prototype.hasData=function(){return 0<this.markerPerPageElementsMap.size||0<this.glyphPerPageElementsMap.size};return h}(m);q.SymbolRenderBucket=
b;b=function(g){function h(){var k=g.call(this,4)||this;k.triangleElementStart=0;k.triangleElementCount=0;return k}a(h,g);h.prototype.hasData=function(){return 0<this.triangleElementCount};return h}(m);q.CircleRenderBucket=b;m=function(g){function h(){return g.call(this,0)||this}a(h,g);h.prototype.hasData=function(){return!0};return h}(m);q.BackgroundRenderBucket=m})},"esri/layers/vectorTiles/views/vectorTiles/TileHandler":function(){define("require exports dojo/Deferred dojo/has dojo/promise/all ../../request ../../core/LRUCache ../../core/promiseUtils ../../core/requireUtils ../../core/workers ../2d/tiling/TileKey ./GeometryUtils ./GlyphMosaic ./GlyphSource ./SpriteMosaic ./SpriteSource ./TileIndex ./VectorTileDisplayObject module".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t,w,v,y,x){var B=new k(10),p=new Map;return function(){function z(u,D,I,C,E){void 0===C&&(C=!1);this.devicePixelRatio=I;this.allowUpdates=C;this._tileIndex=this._connection=this._glyphMosaic=this._spriteMosaic=null;this._updateQueue=new Map;this._ongoingRequests=new Map;this._vectorTileLayer=u;this._styleRepository=u.styleRepository;this._requestUpdate=D}z.prototype.destroy=function(){this.stop();this._vectorTileLayer=this._requestUpdate=this._styleRepository=
null;this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null);this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null)};Object.defineProperty(z.prototype,"initialized",{get:function(){return this._broadcastPromise&&this._broadcastPromise.isFulfilled()},enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"spriteMosaic",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"glyphMosaic",{get:function(){return this._glyphMosaic},
enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"ongoingRequestCount",{get:function(){return this._ongoingRequests.size},enumerable:!0,configurable:!0});z.prototype.start=function(){var u=this;this.stop();var D=this._styleRepository,I=new w(D.sprite,this.devicePixelRatio);I.devicePixelRatio=this.devicePixelRatio;var C=I.load().then(function(){u._spriteMosaic=new t(1024,1024,250);u._spriteMosaic.setSpriteSource(I);b("stable-symbol-rendering")&&u._spriteMosaic.preloadSpriteItems()}),
E=new r(D.glyphs);this._glyphMosaic=new n(1024,1024,E);var G=this._fetchTileMap(this._vectorTileLayer.tileIndexUrl),H=f.open(c.getAbsMid("./WorkerTileHandler",m,x),{client:this}).then(function(O){u._connection=O}),L=new a(function(O){C.isFulfilled()||C.cancel();G.isFulfilled()||G.cancel();H.isFulfilled()||H.cancel()});g([C,G,H]).then(function(O){g(u._connection.broadcast("setLayers",D.styleJSON)).then(function(){L.resolve()})});return this._broadcastPromise=L.promise};z.prototype.stop=function(){this._broadcastPromise&&
!this._broadcastPromise.isFulfilled()&&this._broadcastPromise.cancel();this._updateQueue.forEach(function(u){return u.cancel()});this._ongoingRequests.forEach(function(u){return u.cancel()});this._connection&&(this._connection.close(),this._connection=null)};z.prototype.updateTile=function(u,D){var I=this;if(!this.allowUpdates)return d.resolve(null);if(!this._broadcastPromise.isFulfilled()||!this._connection)return d.reject(Error("no connection"));D=Math.round(l.degToByte(D.state.rotation));if(u.rotation===
D)return d.resolve(null);var C=u.key;if(this._updateQueue.has(C.id)){var E=this._updateQueue.get(C.id);E.cancel()}u.rotation=D;E=this._connection.invoke("update",{key:u.id,rotation:D},null,{client:u.client}).then(function(G){u.updateSymbolData(G);return G}).always(function(){I._updateQueue["delete"](C.id)});this._updateQueue.set(u.id,E);return E};z.prototype.getVectorTileWithLRC=function(u,D,I,C){var E=this;void 0===C&&(C=0);var G=new e(u,D,I,0);return this.getRefKey(G).then(function(H){var L=new y(G,
H,E._vectorTileLayer.tileInfo,E._styleRepository,0);if(H)return E.getTileData(L.key,0).then(function(O){L.setData(O.tileData,O.client);return L});L.setData(null,null);return L})};z.prototype.getTileData=function(u,D){var I=this;return this._broadcastPromise.isFulfilled()&&this._connection?this.getRefKey(u).then(function(C){if(!C)return d.resolve(null);var E=Math.round(l.degToByte(D));return I._getTileData(I._connection,u,C,E).then(function(G){return G&&G.tileData?{tileData:G.tileData,client:G.client}:
d.reject("No data")})}):d.reject(Error("no connection"))};z.prototype.getRefKey=function(u){return this._tileIndex?this._tileIndex.dataKey(u):d.resolve(u)};z.prototype.fetchTileData=function(u){u=e.pool.acquire(u);var D=this._vectorTileLayer.getTileUrl(u.level,u.row,u.col);e.pool.release(u);return h(D,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(I){return{result:I.data,transferList:[I.data]}})};z.prototype.getSprites=function(u){return this._spriteMosaic.getSpriteItems(u)};
z.prototype.getGlyphs=function(u){return this._glyphMosaic.getGlyphItems(u.tileID,u.font,u.codePoints)};z.prototype.getStyleRepository=function(){return this._styleRepository};z.prototype.getTileIndex=function(){return this._tileIndex};z.prototype._getTileData=function(u,D,I,C){var E=this,G={client:null};if(u=this._ongoingRequests.get(D.id))return u;u=this._connection.invoke("getTile",{key:D.id,refKey:I.id,rotation:C,cacheTile:this.allowUpdates},null,G).then(function(H){E._ongoingRequests["delete"](D.id);
return{tileData:H,client:G.client}}).catch(function(H){E._ongoingRequests["delete"](D.id);E._connection.invoke("destructTileData",D.id,null,G);return d.reject(H)});this._ongoingRequests.set(D.id,u);return u};z.prototype._fetchTileMap=function(u){var D=this;if(this._vectorTileLayer.capabilities.operations.supportsTileMap&&this._vectorTileLayer.tilemapCache)return this._tileIndex=new v(this._vectorTileLayer.tilemapCache),d.resolve();if(!u)return d.resolve();if(B.has(u))return this._tileIndex=B.use(u),
d.resolve();if(p.has(u))return p.get(u).then(function(C){D._tileIndex=new v(C.data)});var I=h(u,{callbackParamName:"callback",responseType:"json"});I.then(function(C){D._tileIndex=new v(C.data);p["delete"](u);B.insert(u,D._tileIndex)});p.set(u,I);return I};return z}()})},"esri/layers/vectorTiles/core/LRUCache":function(){define(["require","exports"],function(m,q){return function(){function a(b){this._cache={};this._lruQueue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=
b}a.prototype.has=function(b){return void 0!==this._cache[b]};a.prototype.insert=function(b,g){null!==this.use(b)?this._cache[b]=g:(this._collect(),this._cache[b]=g,this._lruQueue.unshift(b))};a.prototype.use=function(b){var g=this._cache[b];if(!g)return null;this._lruQueue.splice(this._lruQueue.indexOf(b),1);this._lruQueue.unshift(b);return g};a.prototype.print=function(){for(var b=0,g=this._lruQueue;b<g.length;b++);};a.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var b=
this._lruQueue.pop(),g=this._cache[b];g&&g.release&&g.release();delete this._cache[b]}};return a}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(m,q,a){function b(g,h){if(Array.isArray(h)){var k=new a;g(h,function(){for(var d=[],c=0;c<arguments.length;c++)d[c]=arguments[c];k.resolve(d)});return k.promise}return b(g,[h]).then(function(d){return d[0]})}Object.defineProperty(q,"__esModule",{value:!0});q.when=b;q.getAbsMid=function(g,
h,k){return h.toAbsMid?h.toAbsMid(g):k.id.replace(/\/[^\/]*$/gi,"/")+g}})},"esri/layers/vectorTiles/core/workers":function(){define(["require","exports","./workers/workers"],function(m,q,a){Object.defineProperty(q,"__esModule",{value:!0});for(var b in a)q.hasOwnProperty(b)||(q[b]=a[b])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(m,q,a,b,g,h,
k,d,c){function f(){if(w)return w;for(var v=e+l,y=[],x=function(p){var z=c.create(p).then(function(u){return t[p]=u});y.push(z)},B=0;B<v;B++)x(B);return w=b(y).then(function(){})}Object.defineProperty(q,"__esModule",{value:!0});q.Connection=k;q.RemoteClient=d;(k=navigator.hardwareConcurrency)||(k=a("safari")&&a("mac")||a("trident")?8:2);var e=a("esri-workers-debug")?1:Math.max(1,Math.ceil(k/2)),l=a("esri-workers-debug")?1:Math.max(1,Math.floor(k/2)),n=g.getLogger("esri.core.workers"),r=0,t=[];q.initialize=
function(){f()};q.open=function(v,y,x){void 0===y&&(y={});if(Array.isArray(v))return new q.Connection(v.map(function(z){return new q.RemoteClient(z,y.client)}));if("string"!==typeof v){n.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var B=v;v=y;y={client:B,strategy:x?"dedicated":"distributed"}}var p=y.strategy||"distributed";return"local"===p?h.create(function(z){m([v],function(u){z(q.RemoteClient.connect(u))})}).then(function(z){return new q.Connection([new q.RemoteClient(z,
y.client)])}):f().then(function(){if("dedicated"===p){var z=e+r++;r%=l;return t[z].open(v).then(function(u){return new q.Connection([new q.RemoteClient(u,y.client)])})}return h.all(t.map(function(u){return u.open(v)})).then(function(u){return new q.Connection(u.map(function(D){return new q.RemoteClient(D,y.client)}))})})};q.terminate=function(){for(var v=0;v<t.length;v++)t[v]&&t[v].terminate();t.length=0};var w})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports",
"../promiseUtils"],function(m,q,a){return function(){function b(g){this._clientIdx=0;this._clients=g}b.prototype.broadcast=function(g,h,k){for(var d=[],c=0,f=this._clients;c<f.length;c++)d.push(f[c].invoke(g,h,k));return d};b.prototype.close=function(){for(var g=0,h=this._clients;g<h.length;g++)h[g].close();this._clients=[]};b.prototype.invoke=function(g,h,k,d){var c=d&&d.client;if(!this._clients||!this._clients.length)return a.reject(Error("Connection closed"));null!=c&&-1!==this._clients.indexOf(c)||
this._clients.some(function(f){return f.isBusy()?!1:(c=f,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,c=this._clients[this._clientIdx]);g=c.invoke(g,h,k);d&&(d.client=c);return g};b.prototype.openPorts=function(){return a.all(this._clients.map(function(g){return g.openPort()}))};return b}()})},"esri/layers/vectorTiles/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(m,q,a,b,g,h){function k(r,t){r["delete"](t)}
var d=h.MessageType.CLOSE,c=h.MessageType.CANCEL,f=h.MessageType.INVOKE,e=h.MessageType.RESPONSE,l=h.MessageType.OPEN_PORT,n=function(){function r(t){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=[];this._invoke=t;this._timer=null;this._process=this._process.bind(this)}r.prototype.push=function(t){t.type===h.MessageType.CANCEL?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),null===this._timer&&(this._timer=setTimeout(this._process,0)))};r.prototype.clear=function(){this._invokeMessages.length=
0;this._cancelledJobIds.clear();this._timer=null};r.prototype._process=function(){this._timer=null;for(var t=0,w=this._invokeMessages;t<w.length;t++){var v=w[t];this._cancelledJobIds.has(v.jobId)||this._invoke(v)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return r}();return function(){function r(t,w,v){this._outJobs=new Map;this._inJobs=new Map;this._queue=new n(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=w;this._port=t;this._port.addEventListener("message",
this._onMessage);this._port.start();this._channel=v}r.connect=function(t){var w=new MessageChannel;t="function"===typeof t?new t:"default"in t&&"function"===typeof t.default?new t.default:t;t.remoteClient=new r(w.port1,t,w);return w.port2};r.prototype.close=function(){this._post({type:d});this._close()};r.prototype.isBusy=function(){return 0<this._outJobs.size};r.prototype.invoke=function(t,w,v){var y=this;if(!this._port)return g.reject(new b("remote-client:port-closed","Can't invoke(), port is closed"));
var x=h.newJobId(),B=new a(function(){k(y._outJobs,x);y._post({type:c,jobId:x})});this._outJobs.set(x,B);this._post({type:f,jobId:x,methodName:t},w,v);return B.promise};r.prototype.openPort=function(){var t=this,w=h.newJobId(),v=new a(function(){k(t._outJobs,w);t._post({type:c,jobId:w})});this._outJobs.set(w,v);this._post({type:l,jobId:w});return v.promise};r.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();
this._outJobs.forEach(function(t){t.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};r.prototype._onMessage=function(t){if(t=h.receiveMessage(t))switch(t.type){case e:this._onResponse(t);break;case f:this._queue.push(t);break;case c:this._onCancel(t);break;case d:this._close();break;case l:this._onOpenPort(t)}};r.prototype._onCancel=function(t){var w=this._inJobs,v=t.jobId,y=w.get(v);this._queue.push(t);y&&(k(w,v),y.cancel())};r.prototype._onInvoke=
function(t){var w=this,v=t.methodName,y=t.jobId;t=t.data;var x=this._inJobs,B=this._client,p=B[v];try{if(!p&&v&&-1!==v.indexOf("."))for(var z=v.split("."),u=0;u<z.length-1;u++)B=B[z[u]],p=B[z[u+1]];if("function"!==typeof p)throw new TypeError(v+" is not a function");var D=p.call(B,t,this)}catch(I){this._post({type:e,jobId:y,error:h.toInvokeError(I)});return}g.isThenable(D)?(x.set(y,D),D.then(function(I){x.has(y)&&(k(x,y),w._post({type:e,jobId:y},I))}).catch(function(I){x.has(y)&&(k(x,y),I&&"cancel"===
I.dojoType||w._post({type:e,jobId:y,error:h.toInvokeError(I||{message:"Error encountered at method "+v})}))})):this._post({type:e,jobId:y},D)};r.prototype._onOpenPort=function(t){var w=new MessageChannel;new r(w.port1,this._client);this._post({type:e,jobId:t.jobId},w.port2,[w.port2])};r.prototype._onResponse=function(t){var w=t.jobId,v=t.error;t=t.data;var y=this._outJobs;if(y.has(w)){var x=y.get(w);k(y,w);v?x.reject(b.fromJSON(JSON.parse(v))):x.resolve(t)}};r.prototype._post=function(t,w,v){return h.postMessage(this._port,
t,w,v)};return r}()})},"esri/layers/vectorTiles/core/workers/utils":function(){define(["require","exports","dojo/has"],function(m,q,a){function b(h){return h&&"object"===typeof h&&("result"in h||"transferList"in h)}Object.defineProperty(q,"__esModule",{value:!0});(function(h){h[h.HANDSHAKE=0]="HANDSHAKE";h[h.CONFIGURE=1]="CONFIGURE";h[h.CONFIGURED=2]="CONFIGURED";h[h.OPEN=3]="OPEN";h[h.OPENED=4]="OPENED";h[h.RESPONSE=5]="RESPONSE";h[h.INVOKE=6]="INVOKE";h[h.CANCEL=7]="CANCEL";h[h.CLOSE=8]="CLOSE";
h[h.OPEN_PORT=9]="OPEN_PORT"})(q.MessageType||(q.MessageType={}));var g=0;q.newJobId=function(){return g++};q.isTranferableResult=b;q.toInvokeError=function(h){return h?h.toJSON?JSON.stringify(h):JSON.stringify({name:h.name,message:h.message,details:h.details,stack:h.stack}):null};q.postMessage=function(h,k,d,c){2===arguments.length||void 0===d&&void 0===c?h.postMessage(k):(a("esri-workers-supports-transfer-arraybuffer")||(c?(c=c.filter(function(f){return!(f instanceof ArrayBuffer)}),c.length||(c=
null)):b(d)&&d.transferList&&(d.transferList=d.transferList.filter(function(f){return!(f instanceof ArrayBuffer)}),d.transferList.length||(d.transferList=null))),c?(k.data=d,h.postMessage(k,c)):b(d)?(k.data=d.result,d.transferList?h.postMessage(k,d.transferList):h.postMessage(k)):(k.data=d,h.postMessage(k)))};q.receiveMessage=function(h){return h?(h=h.data)?"string"===typeof h?JSON.parse(h):h:null:null}})},"esri/layers/vectorTiles/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),
function(m,q,a,b,g,h,k,d,c){var f=h.getLogger("esri.core.workers"),e=d.MessageType.CANCEL,l=d.MessageType.INVOKE,n=d.MessageType.OPEN,r=d.MessageType.OPENED,t=d.MessageType.RESPONSE;return function(){function w(v,y){this._outJobs=new Map;this._inJobs=new Map;this.worker=v;this.id=y;v.addEventListener("message",this._onMessage.bind(this));v.addEventListener("error",function(x){x.preventDefault();f.error(x)})}w.create=function(v){return c.createWorker().then(function(y){return new w(y,v)})};w.prototype.terminate=
function(){this.worker.terminate()};w.prototype.open=function(v){var y=this,x=d.newJobId(),B=new a(function(p){y._outJobs["delete"](x);y._post({type:e,jobId:x})});this._outJobs.set(x,B);this._post({type:n,jobId:x,modulePath:v});return B.promise};w.prototype._onMessage=function(v){if(v=d.receiveMessage(v))switch(v.type){case r:case t:this._onResponse(v);break;case e:this._onCancel(v);break;case l:this._onInvoke(v)}};w.prototype._onCancel=function(v){(v=this._inJobs.get(v.jobId))&&v.cancel()};w.prototype._onInvoke=
function(v){var y=this,x=v.methodName,B=v.jobId;v=v.data;var p=this._inJobs,z=b.workerMessages[x];try{if("function"!==typeof z)throw new TypeError(x+" is not a function");var u=z.call(null,v)}catch(D){this._post({type:t,jobId:B,error:d.toInvokeError(D)});return}k.isThenable(u)?(p.set(B,u),u.then(function(D){p["delete"](B);y._post({type:t,jobId:B},D)}).catch(function(D){p["delete"](B);D||(D={message:"Error encountered at method"+x});D.dojoType&&"cancel"===D.dojoType||y._post({type:t,jobId:B,error:d.toInvokeError(D)})})):
this._post({type:t,jobId:B},u)};w.prototype._onResponse=function(v){var y=v.jobId,x=v.error;v=v.data;var B=this._outJobs.get(y);B&&(this._outJobs["delete"](y),x?B.reject(g.fromJSON(JSON.parse(x))):B.resolve(v))};w.prototype._post=function(v,y,x){return d.postMessage(this.worker,v,y,x)};return w}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],function(m,q,a,b){return function(){function g(){}Object.defineProperty(g,"id",{get:function(){return a.id?
b:null},enumerable:!0,configurable:!0});g.workerMessages={};return g}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require","exports","esri/IdentityManager"],function(m,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.findCredential=function(b){return a.findCredential(b)}})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(m,q,a,b){m=new m;q.id=b.safeMixin(m,a);return q.id})},
"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t,w){q=q([t],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(v){g.mixin(this,
v);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(v,y,x){this._nls||(this._nls=w.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var B=this._loginDialog,p=x&&x.error,z=x&&x.token,u=new b(function(){B.onCancel()});if(B.open)return v=Error("BUSY"),v.code="IdentityManager.1",v.log=!!a.isDebug,u.errback(v),u;n.hide(B.errMsg_);p&&403==p.code&&z&&(k.set(B.errMsg_,"innerHTML",this._nls.forbidden),n.show(B.errMsg_));B.dfd_=
u;B.serverInfo_=y;B.resUrl_=v;B.admin_=x&&x.isAdmin;k.set(B.resLink_,{title:v,innerHTML:"("+(this.getResourceName(v)||this._nls.lblItem)+")"});k.set(B.serverLink_,{title:y.server,innerHTML:(-1!==y.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":y.server)+" "});B.txtPwd_.set("value","");B.show();return u},_createLoginDialog:function(){var v=this._nls,y=l.substitute(v,this._dialogContent);y=l.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},y);var x=new f({title:v.title,content:y,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(B){B.charOrCode===d.ENTER&&this.execute_()},execute_:function(){var B=this.txtUser_.get("value"),p=this.txtPwd_.get("value"),z=this.dfd_,u=this;if(this.form_.validate()&&B&&p){this.btnSubmit_.set("label",v.lblSigning);var D=e.id.findCredential(u.resUrl_,B),I=function(C){u.btnSubmit_.set("label",
v.lblOk);u.btnSubmit_.set("disabled",!1);n.hide(u.errMsg_);u.hide();f._DialogLevelManager.hide(u);var E=u.serverInfo_;u.dfd_=u.serverInfo_=u.generateDfd_=u.resUrl_=null;var G=D;if(C){var H=C.token;var L=l.isDefined(C.expires)?Number(C.expires):null;var O=!!C.ssl;G?(G.userId=B,G.token=H,G.expires=L,G.validity=C.validity,G.ssl=O,G.creationTime=(new Date).getTime()):G=new r({userId:B,server:E.server,token:H,expires:L,ssl:O,isAdmin:u.admin_,validity:C.validity})}z.callback(G)};D&&!D._enqueued?I():(u.btnSubmit_.set("disabled",
!0),u.generateDfd_=e.id.generateToken(this.serverInfo_,{username:B,password:p},{isAdmin:this.admin_}).addCallback(I).addErrback(function(C){u.btnSubmit_.set("disabled",!1);u.generateDfd_=null;u.btnSubmit_.set("label",v.lblOk);k.set(u.errMsg_,"innerHTML",C&&C.code?v.invalidUser:v.noAuthService);n.show(u.errMsg_)}))}},cancel_:function(){x.generateDfd_&&x.generateDfd_.cancel();var B=x.dfd_,p=x.resUrl_,z=x.serverInfo_;x.btnSubmit_.set("disabled",!1);x.dfd_=x.serverInfo_=x.generateDfd_=x.resUrl_=null;
n.hide(x.errMsg_);f._DialogLevelManager.hide(x);x.esriIdMgr_.onDialogCancel({resourceUrl:p,serverInfo:z});p=Error("ABORTED");p.code="IdentityManager.2";p.log=!!a.isDebug;B.errback(p)}});y=x.domNode;x.form_=c.byNode(m.query(".esriIdForm",y)[0]);x.txtUser_=c.byNode(m.query(".esriIdUser",y)[0]);x.txtPwd_=c.byNode(m.query(".esriIdPwd",y)[0]);x.btnSubmit_=c.byNode(m.query(".esriIdSubmit",y)[0]);x.btnCancel_=c.byNode(m.query(".esriIdCancel",y)[0]);x.resLink_=m.query(".resLink",y)[0];x.serverLink_=m.query(".serverLink",
y)[0];x.errMsg_=m.query(".esriErrorMsg",y)[0];x.connect(x.txtUser_,"onKeyPress",x.keypressed_);x.connect(x.txtPwd_,"onKeyPress",x.keypressed_);x.connect(x.btnSubmit_,"onClick",x.execute_);x.connect(x.btnCancel_,"onClick",x.onCancel);x.connect(x,"onCancel",x.cancel_);return x}});return e.IdentityManagerDialog=e.IdentityManager=q})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t,w,v,y,x,B,p,z,u,D,I,C,E,G,H,L,O){function W(){}var Z=new g;Z.resolve(!0);z=b("dijit._DialogBase"+(w("dojo-bidi")?"_NoBidi":""),[D,C,E,I],{templateString:O,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:z.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(X){this._set("draggable",X)},maxRatio:.9,
closable:!0,_setClosableAttr:function(X){this.closeButtonNode.style.display=X?"":"none";this._set("closable",X)},postMixInProperties:function(){var X=e.getLocalization("dijit","common");n.mixin(this,X);this.inherited(arguments)},postCreate:function(){c.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);a.after(this,"onExecute",n.hitch(this,"hide"),!0);a.after(this,"onCancel",n.hitch(this,"hide"),!0);r(this.closeButtonNode,
v.press,function(X){X.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&P.isTop(this)&&(this._getFocusItems(),p.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();p.focus(this._firstFocusItem)},_endDrag:function(){var X=d.position(this.domNode),R=y.getBox(this.ownerDocument);X.y=Math.min(Math.max(X.y,0),R.h-X.h);X.x=Math.min(Math.max(X.x,0),R.w-X.w);this._relativePosition=X;this._position()},_setup:function(){var X=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==w("ie")?B:x)(X,{handle:this.titleBar}),a.after(this._moveable,"onMoveStop",n.hitch(this,"_endDrag"),!0)):k.add(X,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":q.map(this["class"].split(/\s/),function(R){return R+"_underlay"}).join(" "),_onKeyDown:n.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!k.contains(this.ownerDocumentBody,"dojoMove")){var X=
this.domNode,R=y.getBox(this.ownerDocument),V=this._relativePosition,J=d.position(X);c.set(X,{left:Math.floor(R.l+(V?Math.min(V.x,R.w-J.w):(R.w-J.w)/2))+"px",top:Math.floor(R.t+(V?Math.min(V.y,R.h-J.h):(R.h-J.h)/2))+"px"})}},_onKey:function(X){if(X.keyCode==l.TAB){this._getFocusItems();var R=X.target;this._firstFocusItem==this._lastFocusItem?(X.stopPropagation(),X.preventDefault()):R==this._firstFocusItem&&X.shiftKey?(p.focus(this._lastFocusItem),X.stopPropagation(),X.preventDefault()):R!=this._lastFocusItem||
X.shiftKey||(p.focus(this._firstFocusItem),X.stopPropagation(),X.preventDefault())}else this.closable&&X.keyCode==l.ESCAPE&&(this.onCancel(),X.stopPropagation(),X.preventDefault())},show:function(){if(this.open)return Z.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),P.hide(this));var X=y.get(this.ownerDocument);this._modalconnects.push(r(X,"scroll",n.hitch(this,"resize",null)));this._modalconnects.push(r(this.domNode,
"keydown",n.hitch(this,"_onKey")));c.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new g(n.hitch(this,function(){R.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,W);X=this._fadeInDeferred.promise;var R=f.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:n.hitch(this,function(){P.show(this,this.underlayAttrs)}),onEnd:n.hitch(this,function(){this.autofocus&&P.isTop(this)&&(this._getFocusItems(),
p.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return X},hide:function(){if(!this._alreadyInitialized||!this.open)return Z.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new g(n.hitch(this,function(){R.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,W);this._fadeOutDeferred.then(n.hitch(this,"onHide"));var X=this._fadeOutDeferred.promise;var R=f.fadeOut({node:this.domNode,duration:this.duration,
onEnd:n.hitch(this,function(){this.domNode.style.display="none";P.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var V;V=this._modalconnects.pop();)V.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return X},resize:function(X){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!X){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),q.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(S){S&&c.set(S,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var R=y.getBox(this.ownerDocument);R.w*=this.maxRatio;R.h*=this.maxRatio;var V=d.position(this.domNode);this._shrunk=!1;V.w>=R.w&&(X={w:R.w},d.setMarginBox(this.domNode,X),V=d.position(this.domNode),this._shrunk=
!0);V.h>=R.h&&(X||(X={w:V.w}),X.h=R.h,this._shrunk=!0);X&&(X.w||(X.w=V.w),X.h||(X.h=V.h))}if(X){d.setMarginBox(this.domNode,X);R=[];this.titleBar&&R.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&R.push({domNode:this.actionBarNode,region:"bottom"});V={domNode:this.containerNode,region:"center"};R.push(V);var J=L.marginBox2contentBox(this.domNode,X);L.layoutChildren(this.domNode,J,R);this._singleChild?(R=L.marginBox2contentBox(this.containerNode,V),this._singleChild.resize({w:R.w,h:R.h})):
(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();w("touch")||X||this._position()}},_layoutChildren:function(){q.forEach(this.getChildren(),function(X){X.resize&&X.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var X;X=this._modalconnects.pop();)X.remove();P.hide(this);this.inherited(arguments)}});w("dojo-bidi")&&(z=b("dijit._DialogBase",
z,{_setTitleAttr:function(X){this._set("title",X);this.titleNode.innerHTML=X;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(X){this._created&&this.textDir!=X&&(this._set("textDir",X),this.set("title",this.title))}}));var ba=b("dijit.Dialog",[H,z],{});ba._DialogBase=z;var P=ba._DialogLevelManager={_beginZIndex:950,show:function(X,R){ha[ha.length-1].focus=p.curNode;var V=ha[ha.length-1].dialog?ha[ha.length-1].zIndex+2:ba._DialogLevelManager._beginZIndex;c.set(X.domNode,"zIndex",V);G.show(R,
V-1);ha.push({dialog:X,underlayAttrs:R,zIndex:V})},hide:function(X){if(ha[ha.length-1].dialog==X){ha.pop();var R=ha[ha.length-1];1==ha.length?G.hide():G.show(R.underlayAttrs,R.zIndex-1);if(X.refocus&&(X=R.focus,!R.dialog||X&&h.isDescendant(X,R.dialog.domNode)||(R.dialog._getFocusItems(),X=R.dialog._firstFocusItem),X))try{X.focus()}catch(V){}}else R=q.indexOf(q.map(ha,function(V){return V.dialog}),X),-1!=R&&ha.splice(R,1)},isTop:function(X){return ha[ha.length-1].dialog==X}},ha=ba._dialogStack=[{dialog:null,
focus:null,underlayAttrs:null}];p.watch("curNode",function(X,R,V){X=ha[ha.length-1].dialog;if(V&&X&&!X._fadeOutDeferred&&V.ownerDocument==X.ownerDocument){do if(V==X.domNode||k.contains(V,"dijitPopup"))return;while(V=V.parentNode);X.focus()}});w("dijit-legacy-requires")&&t(0,function(){m(["dijit/TooltipDialog"])});return ba})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(m,q){var a=q.prototype.onMove;return m("dojo.dnd.TimedMoveable",q,{timeout:40,constructor:function(b,
g){g||(g={});g.timeout&&"number"==typeof g.timeout&&0<=g.timeout&&(this.timeout=g.timeout)},onMoveStop:function(b){b._timer&&(clearTimeout(b._timer),a.call(this,b,b._leftTop));q.prototype.onMoveStop.apply(this,arguments)},onMove:function(b,g){b._leftTop=g;if(!b._timer){var h=this;b._timer=setTimeout(function(){b._timer=null;a.call(h,b,b._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(m,q,a,b,g,h){return q("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(k){var d=[];m.forEach(k||this.getChildren(),function(c){"value"in c?d.push(c):d=d.concat(this._getDescendantFormWidgets(c.getChildren()))},this);return d},reset:function(){m.forEach(this._getDescendantFormWidgets(),function(k){k.reset&&k.reset()})},validate:function(){var k=!1;return m.every(m.map(this._getDescendantFormWidgets(),function(d){d._hasBeenBlurred=!0;var c=d.disabled||!d.validate||
d.validate();c||k||(h.scrollIntoView(d.containerNode||d.domNode),d.focus(),k=!0);return c}),function(d){return d})},setValues:function(k){a.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",k)},_setValueAttr:function(k){var d={};m.forEach(this._getDescendantFormWidgets(),function(l){l.name&&(d[l.name]||(d[l.name]=[])).push(l)});for(var c in d)if(d.hasOwnProperty(c)){var f=d[c],e=b.getObject(c,!1,k);void 0!==e&&(e=[].concat(e),
"boolean"==typeof f[0].checked?m.forEach(f,function(l){l.set("value",-1!=m.indexOf(e,l._get("value")))}):f[0].multiple?f[0].set("value",e):m.forEach(f,function(l,n){l.set("value",e[n])}))}},getValues:function(){a.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var k={};m.forEach(this._getDescendantFormWidgets(),function(d){var c=d.name;if(c&&!d.disabled){var f=d.get("value");"boolean"==typeof d.checked?
/Radio/.test(d.declaredClass)?!1!==f?b.setObject(c,f,k):(f=b.getObject(c,!1,k),void 0===f&&b.setObject(c,null,k)):(d=b.getObject(c,!1,k),d||(d=[],b.setObject(c,d,k)),!1!==f&&d.push(f)):(d=b.getObject(c,!1,k),"undefined"!=typeof d?b.isArray(d)?d.push(f):b.setObject(c,[d,f],k):b.setObject(c,f,k))}});return k},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var k=m.map(this._descendants,function(d){return d.get("state")||""});return 0<=m.indexOf(k,"Error")?
"Error":0<=m.indexOf(k,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(k){this._descendants=this._getDescendantFormWidgets();m.forEach(this._descendants,function(d){d._started||d.startup()});k||this._onChildChange()},_onChildChange:function(k){k&&"state"!=k&&"disabled"!=k||this._set("state",this._getState());k&&"value"!=k&&"disabled"!=k&&"checked"!=k||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var k=this;this.own(g(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(d){d.target!=k.domNode&&k._onChildChange(d.type.replace("attrmodified-",""))}));this.watch("state",function(d,c,f){this.onValidStateChange(""==f)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(m,q){return m("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=q._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l){var n=m("dijit.DialogUnderlay",[d,c],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(r){b.set(this.node,"id",r+"_underlay");this._set("dialogId",r)},_setClassAttr:function(r){this.node.className="dijitDialogUnderlay "+r;this._set("class",r)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(h(this.domNode,"keydown",q.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var r=this.node.style,t=this.domNode.style;t.display="none";var w=k.getBox(this.ownerDocument);t.top=w.t+"px";t.left=w.l+"px";r.width=w.w+"px";r.height=w.h+"px";t.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new f(this.domNode);var r=k.get(this.ownerDocument);this._modalConnects=[e.on("resize",q.hitch(this,"layout")),h(r,"scroll",
q.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});n.show=function(r,t){var w=n._singleton;!w||w._destroyed?w=l._underlay=n._singleton=new n(r):r&&w.set(r);g.set(w.domNode,"zIndex",t);w.open||w.show()};n.hide=function(){var r=
n._singleton;r&&!r._destroyed&&r.hide()};return n})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t,w){return c("dijit.layout.ContentPane",[a,b,g],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:m._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(v,
y,x){var B=new x(v,y);return!B.href&&B._contentSetter&&B._contentSetter.parseDeferred&&!B._contentSetter.parseDeferred.isFulfilled()?B._contentSetter.parseDeferred.then(function(){return B}):B},create:function(v,y){if(!(v&&v.template||!y||"href"in v||"content"in v)){y=e.byId(y);for(var x=y.ownerDocument.createDocumentFragment();y.firstChild;)x.appendChild(y.firstChild);v=q.delegate(v,{content:x})}this.inherited(arguments,[v,y])},postMixInProperties:function(){this.inherited(arguments);var v=t.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=h.substitute(this.loadingMessage,v);this.errorMessage=h.substitute(this.errorMessage,v)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(v){v._started||v._destroyed||!q.isFunction(v.startup)||(v.startup(),v._started=!0)},this)},_startChildren:function(){d.forEach(this.getChildren(),
function(v){v._started||v._destroyed||!q.isFunction(v.startup)||(v.startup(),v._started=!0)});this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(v){v._started||v._destroyed||!q.isFunction(v.startup)||(v.startup(),v._started=!0)},this)},setHref:function(v){m.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",v)},_setHrefAttr:function(v){this.cancel();this.onLoadDeferred=new f(q.hitch(this,"cancel"));this.onLoadDeferred.then(q.hitch(this,
"onLoad"));this._set("href",v);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(v){m.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",v)},_setContentAttr:function(v){this._set("href","");this.cancel();this.onLoadDeferred=new f(q.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(q.hitch(this,"onLoad"));this._setContent(v||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(v){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new f(q.hitch(this,"cancel"));this.onLoadDeferred.then(q.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var v=this,y={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};q.isObject(this.ioArgs)&&q.mixin(y,this.ioArgs);var x=this._xhrDfd=(this.ioMethod||r.get)(y),B;x.then(function(p){B=p;try{return v._isDownloaded=!0,v._setContent(p,!1)}catch(z){v._onError("Content",
z)}},function(p){x.canceled||v._onError("Download",p);delete v._xhrDfd;return p}).then(function(){v.onDownloadEnd();delete v._xhrDfd;return B});delete this._hrefChanged},_onLoadHandler:function(v){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(v)}catch(y){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(v){}},destroyDescendants:function(v){this.isLoaded&&this._onUnloadHandler();var y=this._contentSetter;d.forEach(this.getChildren(),function(x){x.destroyRecursive?
x.destroyRecursive(v):x.destroy&&x.destroy(v);x._destroyed=!0});y&&(d.forEach(y.parseResults,function(x){x._destroyed||(x.destroyRecursive?x.destroyRecursive(v):x.destroy&&x.destroy(v),x._destroyed=!0)}),delete y.parseResults);v||n.empty(this.containerNode);delete this._singleChild},_setContent:function(v,y){v=this.preprocessContent(v);this.destroyDescendants();var x=this._contentSetter;x&&x instanceof k._ContentSetter||(x=this._contentSetter=new k._ContentSetter({node:this.containerNode,_onError:q.hitch(this,
this._onError),onContentError:q.hitch(this,function(z){z=this.onContentError(z);try{this.containerNode.innerHTML=z}catch(u){}})}));var B=q.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!v.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});B=x.set(q.isObject(v)&&v.domNode?v.domNode:v,B);var p=this;return w(B&&B.then?B:x.parseDeferred,function(){delete p._contentSetterParams;
y||(p._started&&(p._startChildren(),p._scheduleLayout()),p._onLoadHandler(v))})},preprocessContent:function(v){return v},_onError:function(v,y,x){this.onLoadDeferred.reject(y);v=this["on"+v+"Error"].call(this,y);x||v&&this._setContent(v,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(m,q,a,b,g,h,k,d,c,f){return q("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var e=this.getParent();this._childOfLayoutWidget=e&&e.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(c.on("resize",h.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var e=[],l=!1;k("\x3e *",this.containerNode).some(function(n){var r=
d.byNode(n);r&&r.resize?e.push(r):!/script|link|style/i.test(n.nodeName)&&n.offsetHeight&&(l=!0)});this._singleChild=1!=e.length||l?null:e[0];a.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(e,l){this._resizeCalled=!0;this._scheduleLayout(e,l)},_scheduleLayout:function(e,l){this._isShown()?this._layout(e,l):(this._needLayout=!0,this._changeSize=e,this._resultSize=l)},_layout:function(e,l){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
e&&b.setMarginBox(this.domNode,e);var n=this.containerNode;n===this.domNode?(l=l||{},h.mixin(l,e||{}),"h"in l&&"w"in l||(l=h.mixin(b.getMarginBox(n),l)),this._contentBox=f.marginBox2contentBox(n,l)):this._contentBox=b.getContentBox(n);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var e=this._contentBox||b.getContentBox(this.containerNode);this._singleChild.resize({w:e.w,h:e.h})}else{e=this.getChildren();for(var l,n=0;l=
e[n++];)l.resize&&l.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var e=this.domNode,l=this.domNode.parentNode;return"none"!=e.style.display&&"hidden"!=e.style.visibility&&!a.contains(e,"dijitHidden")&&l&&l.style&&"none"!=l.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(m,q,a,b,g){function h(c){return c.substring(0,1).toUpperCase()+c.substring(1)}function k(c,f){var e=c.resize?c.resize(f):a.setMarginBox(c.domNode,f);e?g.mixin(c,e):(g.mixin(c,a.getMarginBox(c.domNode)),g.mixin(c,f))}var d={marginBox2contentBox:function(c,f){var e=b.getComputedStyle(c),l=a.getMarginExtents(c,e),n=a.getPadBorderExtents(c,e);return{l:b.toPixelValue(c,e.paddingLeft),t:b.toPixelValue(c,e.paddingTop),w:f.w-
(l.w+n.w),h:f.h-(l.h+n.h)}},layoutChildren:function(c,f,e,l,n){f=g.mixin({},f);q.add(c,"dijitLayoutContainer");e=m.filter(e,function(r){return"center"!=r.region&&"client"!=r.layoutAlign}).concat(m.filter(e,function(r){return"center"==r.region||"client"==r.layoutAlign}));m.forEach(e,function(r){var t=r.domNode,w=r.region||r.layoutAlign;if(!w)throw Error("No region setting for "+r.id);var v=t.style;v.left=f.l+"px";v.top=f.t+"px";v.position="absolute";q.add(t,"dijitAlign"+h(w));t={};l&&l==r.id&&(t["top"==
r.region||"bottom"==r.region?"h":"w"]=n);"leading"==w&&(w=r.isLeftToRight()?"left":"right");"trailing"==w&&(w=r.isLeftToRight()?"right":"left");"top"==w||"bottom"==w?(t.w=f.w,k(r,t),f.h-=r.h,"top"==w?f.t+=r.h:v.top=f.t+f.h+"px"):"left"==w||"right"==w?(t.h=f.h,k(r,t),f.w-=r.w,"left"==w?f.l+=r.w:v.left=f.l+f.w+"px"):"client"!=w&&"center"!=w||k(r,f)})}};g.setObject("dijit.layout.utils",d);return d})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(m,q,a,b,g,h,k){var d=0,c={_secureForInnerHtml:function(f){return f.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:h.empty,_setNodeContent:function(f,e){h.empty(f);if(e)if("number"==typeof e&&(e=e.toString()),"string"==typeof e&&(e=h.toDom(e,f.ownerDocument)),!e.nodeType&&q.isArrayLike(e))for(var l=e.length,n=0;n<e.length;n=l==e.length?n+1:0)h.place(e[n],f,"last");else h.place(e,f,"last");return f},_ContentSetter:b("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:m._scopeName,startup:!0,constructor:function(f,e){q.mixin(this,f||{});e=this.node=g.byId(this.node||e);this.id||(this.id=["Setter",e?e.id||e.tagName:"",d++].join("_"))},set:function(f,e){void 0!==f&&(this.content=f);"number"==typeof f&&(f=f.toString());e&&this._mixin(e);this.onBegin();this.setContent();return(f=this.onEnd())&&f.then?f:this.node},setContent:function(){var f=this.node;if(!f)throw Error(this.declaredClass+
": setContent given no node");try{f=c._setNodeContent(f,this.content)}catch(l){var e=this.onContentError(l);try{f.innerHTML=e}catch(n){}}this.node=f},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(a.forEach(this.parseResults,function(f){f.destroy&&f.destroy()}),delete this.parseResults);h.empty(this.node)},onBegin:function(){var f=this.content;if(q.isString(f)&&(this.cleanContent&&
(f=c._secureForInnerHtml(f)),this.extractContent)){var e=f.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);e&&(f=e[1])}this.empty();this.content=f;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(f){return"Error occurred setting content: "+f},onExecError:function(f){return"Error occurred executing scripts: "+f},_mixin:function(f){var e=
{},l;for(l in f)l in e||(this[l]=f[l])},_parse:function(){var f=this.node;try{var e={};a.forEach(["dir","lang","textDir"],function(n){this[n]&&(e[n]=this[n])},this);var l=this;this.parseDeferred=k.parse({rootNode:f,noStart:!this.startup,inherited:e,scope:this.parserScope}).then(function(n){return l.parseResults=n},function(n){l._onError("Content",n,"Error parsing in _ContentSetter#"+l.id)})}catch(n){this._onError("Content",n,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(f,e,l){f=
this["on"+f+"Error"].call(this,e);l||f&&c._setNodeContent(this.node,f,!0)}}),set:function(f,e,l){void 0==e&&(e="");"number"==typeof e&&(e=e.toString());return l?(new c._ContentSetter(q.mixin(l,{content:e,node:f}))).set():c._setNodeContent(f,e,!0)}};q.setObject("dojo.html",c);return c})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t,w){function v(z){return eval("("+z+")")}function y(z){var u=z._nameCaseMap,D=z.prototype;if(!u||u._extendCnt<B){u=z._nameCaseMap={};for(var I in D)"_"!==I.charAt(0)&&(u[I.toLowerCase()]=I);u._extendCnt=B}return u}function x(z,u){u||(u=m);var D=u._dojoParserCtorMap||(u._dojoParserCtorMap={}),I=z.join();if(!D[I]){for(var C=[],E=0,G=z.length;E<G;E++){var H=z[E];C[C.length]=D[H]=D[H]||a.getObject(H)||~H.indexOf("/")&&u(H)}z=C.shift();D[I]=C.length?z.createSubclass?
z.createSubclass(C):z.extend.apply(z,C):z}return D[I]}new Date("X");var B=0;c.after(a,"extend",function(){B++},!0);var p={_clearCache:function(){B++;_ctorMap={}},_functionFromScript:function(z,u){var D="",I="",C=z.getAttribute(u+"args")||z.getAttribute("args");u=z.getAttribute("with");C=(C||"").split(/\s*,\s*/);u&&u.length&&b.forEach(u.split(/\s*,\s*/),function(E){D+="with("+E+"){";I+="}"});return new Function(C,D+z.innerHTML+I)},instantiate:function(z,u,D){u=u||{};D=D||{};var I=(D.scope||q._scopeName)+
"Type",C="data-"+(D.scope||q._scopeName)+"-",E=C+"type",G=C+"mixins",H=[];b.forEach(z,function(L){var O=I in u?u[I]:L.getAttribute(E)||L.getAttribute(I);if(O){var W=L.getAttribute(G);O=W?[O].concat(W.split(/\s*,\s*/)):[O];H.push({node:L,types:O})}});return this._instantiate(H,u,D)},_instantiate:function(z,u,D,I){function C(E){u._started||D.noStart||b.forEach(E,function(G){"function"!==typeof G.startup||G._started||G.startup()});return E}z=b.map(z,function(E){var G=E.ctor||x(E.types,D.contextRequire);
if(!G)throw Error("Unable to resolve constructor for: '"+E.types.join()+"'");return this.construct(G,E.node,u,D,E.scripts,E.inherited)},this);return I?f(z).then(C):C(z)},construct:function(z,u,D,I,C,E){function G(la){ha&&a.setObject(ha,la);for(ba=0;ba<J.length;ba++)c[J[ba].advice||"after"](la,J[ba].method,a.hitch(la,J[ba].func),!0);for(ba=0;ba<S.length;ba++)S[ba].call(la);for(ba=0;ba<aa.length;ba++)la.watch(aa[ba].prop,aa[ba].func);for(ba=0;ba<ja.length;ba++)t(la,ja[ba].event,ja[ba].func);return la}
var H=z&&z.prototype;I=I||{};var L={};I.defaults&&a.mixin(L,I.defaults);E&&a.mixin(L,E);if(n("dom-attributes-explicit"))var O=u.attributes;else n("dom-attributes-specified-flag")?O=b.filter(u.attributes,function(la){return la.specified}):(E=(/^input$|^img$/i.test(u.nodeName)?u:u.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),O=b.map(E.split(/\s+/),function(la){var ra=la.toLowerCase();return{name:la,value:"LI"==u.nodeName&&
"value"==la||"enctype"==ra?u.getAttribute(ra):u.getAttributeNode(ra).value}}));var W=I.scope||q._scopeName;E="data-"+W+"-";var Z={};"dojo"!==W&&(Z[E+"props"]="data-dojo-props",Z[E+"type"]="data-dojo-type",Z[E+"mixins"]="data-dojo-mixins",Z[W+"type"]="dojotype",Z[E+"id"]="data-dojo-id");var ba=0,P;W=[];for(var ha,X;P=O[ba++];){var R=P.name,V=R.toLowerCase();P=P.value;switch(Z[V]||V){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":X=P;break;case "data-dojo-id":case "jsid":ha=
P;break;case "data-dojo-attach-point":case "dojoattachpoint":L.dojoAttachPoint=P;break;case "data-dojo-attach-event":case "dojoattachevent":L.dojoAttachEvent=P;break;case "class":L["class"]=u.className;break;case "style":L.style=u.style&&u.style.cssText;break;default:if(R in H||(R=y(z)[V]||R),R in H)switch(typeof H[R]){case "string":L[R]=P;break;case "number":L[R]=P.length?Number(P):NaN;break;case "boolean":L[R]="false"!=P.toLowerCase();break;case "function":""===P||-1!=P.search(/[^\w\.]+/i)?L[R]=
new Function(P):L[R]=a.getObject(P,!1)||new Function(P);W.push(R);break;default:V=H[R],L[R]=V&&"length"in V?P?P.split(/\s*,\s*/):[]:V instanceof Date?""==P?new Date(""):"now"==P?new Date:e.fromISOString(P):V instanceof d?q.baseUrl+P:v(P)}else L[R]=P}}for(O=0;O<W.length;O++)Z=W[O].toLowerCase(),u.removeAttribute(Z),u[Z]=null;if(X)try{X=v.call(I.propsThis,"{"+X+"}"),a.mixin(L,X)}catch(la){throw Error(la.toString()+" in data-dojo-props\x3d'"+X+"'");}a.mixin(L,D);C||(C=z&&(z._noScript||H._noScript)?[]:
r("\x3e script[type^\x3d'dojo/']",u));var J=[],S=[],aa=[],ja=[];if(C)for(ba=0;ba<C.length;ba++)Z=C[ba],u.removeChild(Z),D=Z.getAttribute(E+"event")||Z.getAttribute("event"),I=Z.getAttribute(E+"prop"),X=Z.getAttribute(E+"method"),W=Z.getAttribute(E+"advice"),O=Z.getAttribute("type"),Z=this._functionFromScript(Z,E),D?"dojo/connect"==O?J.push({method:D,func:Z}):"dojo/on"==O?ja.push({event:D,func:Z}):L[D]=Z:"dojo/aspect"==O?J.push({method:X,advice:W,func:Z}):"dojo/watch"==O?aa.push({prop:I,func:Z}):S.push(Z);
z=(C=z.markupFactory||H.markupFactory)?C(L,u,z):new z(L,u);return z.then?z.then(G):G(z)},scan:function(z,u){function D(V){if(!V.inherited){V.inherited={};var J=V.node,S=D(V.parent);J={dir:J.getAttribute("dir")||S.dir,lang:J.getAttribute("lang")||S.lang,textDir:J.getAttribute(O)||S.textDir};for(var aa in J)J[aa]&&(V.inherited[aa]=J[aa])}return V.inherited}var I=[],C=[],E={},G=(u.scope||q._scopeName)+"Type",H="data-"+(u.scope||q._scopeName)+"-",L=H+"type",O=H+"textdir";H+="mixins";var W=z.firstChild,
Z=u.inherited;if(!Z){Z=function aa(J,S){return J.getAttribute&&J.getAttribute(S)||J.parentNode&&aa(J.parentNode,S)};Z={dir:Z(z,"dir"),lang:Z(z,"lang"),textDir:Z(z,O)};for(var ba in Z)Z[ba]||delete Z[ba]}ba={inherited:Z};for(var P,ha;;)if(W)if(1!=W.nodeType)W=W.nextSibling;else if(P&&"script"==W.nodeName.toLowerCase())(Z=W.getAttribute("type"))&&/^dojo\/\w/i.test(Z)&&P.push(W),W=W.nextSibling;else if(ha)W=W.nextSibling;else if(Z=W.getAttribute(L)||W.getAttribute(G),z=W.firstChild,Z||z&&(3!=z.nodeType||
z.nextSibling)){ha=null;if(Z){var X=W.getAttribute(H);P=X?[Z].concat(X.split(/\s*,\s*/)):[Z];try{ha=x(P,u.contextRequire)}catch(V){}ha||b.forEach(P,function(V){~V.indexOf("/")&&!E[V]&&(E[V]=!0,C[C.length]=V)});X=ha&&!ha.prototype._noScript?[]:null;ba={types:P,ctor:ha,parent:ba,node:W,scripts:X};ba.inherited=D(ba);I.push(ba)}else ba={node:W,scripts:P,parent:ba};P=X;ha=W.stopParser||ha&&ha.prototype.stopParser&&!u.template;W=z}else W=W.nextSibling;else{if(!ba||!ba.node)break;W=ba.node.nextSibling;ha=
!1;ba=ba.parent;P=ba.scripts}var R=new l;C.length?(u.contextRequire||m)(C,function(){R.resolve(b.filter(I,function(V){if(!V.ctor)try{V.ctor=x(V.types,u.contextRequire)}catch(aa){}for(var J=V.parent;J&&!J.types;)J=J.parent;var S=V.ctor&&V.ctor.prototype;V.instantiateChildren=!(S&&S.stopParser&&!u.template);V.instantiate=!J||J.instantiate&&J.instantiateChildren;return V.instantiate}))}):R.resolve(I);return R.promise},_require:function(z,u){z=v("{"+z.innerHTML+"}");var D=[],I=[],C=new l;u=u&&u.contextRequire||
m;for(var E in z)D.push(E),I.push(z[E]);u(I,function(){for(var G=0;G<D.length;G++)a.setObject(D[G],arguments[G]);C.resolve(arguments)});return C.promise},_scanAmd:function(z,u){var D=new l,I=D.promise;D.resolve(!0);var C=this;r("script[type\x3d'dojo/require']",z).forEach(function(E){I=I.then(function(){return C._require(E,u)});E.parentNode.removeChild(E)});return I},parse:function(z,u){!z||"string"==typeof z||"nodeType"in z||(u=z,z=u.rootNode);var D=z?h.byId(z):k.body();u=u||{};var I=u.template?{template:!0}:
{},C=[],E=this;z=this._scanAmd(D,u).then(function(){return E.scan(D,u)}).then(function(G){return E._instantiate(G,I,u,!0)}).then(function(G){return C=C.concat(G)}).otherwise(function(G){throw G;});a.mixin(C,z);return C}};q.parser=p;g.parseOnLoad&&w(100,p,"parse");return p})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(m,q,a,b){m=m(b.Credential,{});return a.Credential=m})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/on dojo/regexp ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t,w,v,y,x,B,p){var z={},u=function(C){var E=(new h(C.owningSystemUrl)).host;C=(new h(C.server)).host;var G=/.+\.arcgis\.com$/i;return G.test(E)&&G.test(C)},D=function(C,E){return!!(u(C)&&E&&b.some(E,function(G){return G.test(C.server)}))};k=m(x,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=a.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=
[];this._getOAuthHash();f(window,"pageshow",a.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,
customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",
tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(C){var E=this.serverInfos;E?(C=b.filter(C,function(G){return!this.findServerInfo(G.server)},this),this.serverInfos=E.concat(C)):
this.serverInfos=C;b.forEach(C,function(G){G.owningSystemUrl&&this._portals.push(G.owningSystemUrl);if(G.hasPortal){this._portals.push(G.server);var H=n.defaults.io.corsEnabledServers,L=this._getOrigin(G.tokenServiceUrl);w.canUseXhr(G.server)||H.push(G.server.replace(/^https?:\/\//i,""));w.canUseXhr(L)||H.push(L.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(C){var E=this.oAuthInfos;E?(C=b.filter(C,function(G){return!this.findOAuthInfo(G.portalUrl)},this),this.oAuthInfos=E.concat(C)):
this.oAuthInfos=C},registerToken:function(C){C=r.mixin({},C);var E=this._sanitizeUrl(C.server),G=this.findServerInfo(E),H=!0,L;G||(G=new t,G.server=this._getServerInstanceRoot(E),G.tokenServiceUrl=this._getTokenSvcUrl(E),G.hasPortal=!0,this.registerServers([G]));(L=this.findCredential(E,C.userId))?(delete C.server,a.mixin(L,C),H=!1):(L=new I({userId:C.userId,server:G.server,token:C.token,expires:C.expires,ssl:C.ssl,scope:this._isServerRsrc(E)?"server":"portal"}),L.resources=[E],this.credentials.push(L));
L.onTokenChange(!1);H||L.refreshServerTokens()},toJson:function(){return r.fixJson({serverInfos:b.map(this.serverInfos,function(C){return C.toJson()}),oAuthInfos:b.map(this.oAuthInfos,function(C){return C.toJson()}),credentials:b.map(this.credentials,function(C){return C.toJson()})})},initialize:function(C){if(C){a.isString(C)&&(C=JSON.parse(C));var E=C.serverInfos,G=C.oAuthInfos;C=C.credentials;if(E){var H=[];b.forEach(E,function(O){O.server&&O.tokenServiceUrl&&H.push(O.declaredClass?O:new t(O))});
H.length&&this.registerServers(H)}if(G){var L=[];b.forEach(G,function(O){O.appId&&L.push(O.declaredClass?O:new p(O))});L.length&&this.registerOAuthInfos(L)}C&&b.forEach(C,function(O){O.userId&&O.server&&O.token&&O.expires&&O.expires>(new Date).getTime()&&(O=O.declaredClass?O:new I(O),O.onTokenChange(),this.credentials.push(O))},this)}},findServerInfo:function(C){var E;C=this._sanitizeUrl(C);b.some(this.serverInfos,function(G){this._hasSameServerInstance(G.server,C)&&(E=G);return!!E},this);return E},
findOAuthInfo:function(C){var E;C=this._sanitizeUrl(C);b.some(this.oAuthInfos,function(G){this._hasSameServerInstance(G.portalUrl,C)&&(E=G);return!!E},this);return E},findCredential:function(C,E){var G;C=this._sanitizeUrl(C);var H=this._isServerRsrc(C)?"server":"portal";E?b.some(this.credentials,function(L){this._hasSameServerInstance(L.server,C)&&E===L.userId&&L.scope===H&&(G=L);return!!G},this):b.some(this.credentials,function(L){this._hasSameServerInstance(L.server,C)&&-1!==this._getIdenticalSvcIdx(C,
L)&&L.scope===H&&(G=L);return!!G},this);return G},getCredential:function(C,E){var G=!0;if(r.isDefined(E))if(a.isObject(E)){var H=!!E.token;var L=E.error;G=!1!==E.prompt}else H=E;C=this._sanitizeUrl(C);var O=new g(v._dfdCanceller),W=this._isAdminResource(C),Z=H&&this._doPortalSignIn(C)?this._getEsriAuthCookie():null;if((H=H?this.findCredential(C):null)&&L&&498===L.code)H.destroy(),Z&&Z.token===E.token&&(d("esri_auth",null,{expires:-1,path:"/",domain:document.domain}),r.endsWith(window.location.hostname,
".arcgis.com")&&d("esri_auth",null,{expires:-1,path:"/",domain:"arcgis.com"}));else if(Z||H)return C=Error("You are currently signed in as: '"+(Z&&Z.email||H&&H.userId)+"'. You do not have access to this resource: "+C),C.code="IdentityManagerBase.1",C.httpCode=L&&L.httpCode,C.messageCode=L?L.messageCode:null,C.subcode=L?L.subcode:null,C.details=L?L.details:null,C.log=!!q.isDebug,O.errback(C),O;if(L=this._findCredential(C,E))return O.callback(L),O;L=this.findServerInfo(C);if(L)!L.hasServer&&this._isServerRsrc(C)&&
(L._restInfoDfd=this._getTokenSvcUrl(C,!0),L.hasServer=!0);else{Z=this._getTokenSvcUrl(C);if(!Z)return C=Error("Unknown resource - could not find token service endpoint."),C.code="IdentityManagerBase.2",C.log=!!q.isDebug,O.errback(C),O;L=new t;L.server=this._getServerInstanceRoot(C);a.isString(Z)?(L.tokenServiceUrl=Z,L.hasPortal=!0):(L._restInfoDfd=Z,L.hasServer=!0);this.registerServers([L])}G&&L.hasPortal&&void 0===L._selfReq&&!this._findOAuthInfo(C)&&(L._selfReq={owningTenant:E&&E.owningTenant,
selfDfd:this._getPortalSelf(L.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),C)});return this._enqueue(C,L,E,O,W)},getResourceName:function(C){return this._isRESTService(C)?C.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(C)&&C.replace(this._gwUser,"$1")||this._gwItem.test(C)&&C.replace(this._gwItem,"$1")||this._gwGroup.test(C)&&C.replace(this._gwGroup,"$1")||""},generateToken:function(C,E,G){var H=this._rePortalTokenSvc.test(C.tokenServiceUrl),
L=new h(window.location.href.toLowerCase()),O=this._getEsriAuthCookie(),W=!E;var Z=C.shortLivedTokenValidity;if(E){var ba=l.id.tokenValidity||Z||l.id.defaultTokenValidity;ba>Z&&(ba=Z)}if(G){var P=G.isAdmin;var ha=G.serverUrl;var X=G.token;var R=G.ssl;C.customParameters=G.customParameters}if(P)Z=C.adminTokenServiceUrl;else{Z=C.tokenServiceUrl;var V=new h(Z.toLowerCase());if(O)var J=(J=O.auth_tier)&&J.toLowerCase();("web"===J||C.webTierAuth)&&G&&G.serverUrl&&!R&&"http"===L.scheme&&(w.hasSameOrigin(L.uri,
Z,!0)||"https"===V.scheme&&L.host===V.host&&"7080"===L.port&&"7443"===V.port)&&(Z=Z.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));W&&H&&(Z=Z.replace(/\/rest/i,""))}P=a.mixin({url:Z,content:a.mixin({request:"getToken",username:E&&E.username,password:E&&E.password,serverUrl:ha,token:X,expiration:ba,referer:P||H?window.location.host:null,client:P?"referer":null,f:"json"},C.customParameters),handleAs:"json",callbackParamName:W?"callback":void 0},G&&G.ioArgs);G={usePost:!W,disableIdentityLookup:!0,
useProxy:this._useProxy(C,G)};H||(P.withCredentials=!1);H=y(P,G);H.addCallback(function(S){if(!S||!S.token)return S=Error("Unable to generate token"),S.code="IdentityManagerBase.3",S.log=!!q.isDebug,S;var aa=C.server;z[aa]||(z[aa]={});E&&(z[aa][E.username]=E.password);S.validity=ba;return S});H.addErrback(function(S){});return H},isBusy:function(){return!!this._busy},checkSignInStatus:function(C){var E=new g;this.checkAppAccess(C,"").then(function(G){E.resolve(G.credential)}).catch(function(G){E.reject(G)});
return E},checkAppAccess:function(C,E,G){var H=this,L=!1;return this.getCredential(C,{prompt:!1}).then(function(O){var W={f:"json"};if("portal"===O.scope)if(E&&(H._doPortalSignIn(C,!0)||G&&G.force)){var Z=O.server+"/sharing/rest/oauth2/validateAppAccess";W.client_id=E}else if(O.token)Z=O.server+"/sharing/rest";else return{credential:O};else if(O.token)Z=O.server+"/rest/services";else return{credential:O};O.token&&(W.token=O.token);return y({url:Z,content:W,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(ba){if(!1===
ba.valid){var P=Error("You are currently signed in as: '"+O.userId+"'.  You do not have access to this app: '"+E+"'.");P.code="IdentityManagerBase.1";P.log=!!q.isDebug;P.details=ba;throw P;}L=!!ba.viewOnlyUserTypeApp;return{credential:O}}).catch(function(ba){if("IdentityManagerBase.1"===ba.code||400===ba.code)throw ba;if(498===ba.code)throw O.destroy(),ba=Error("User is not signed in."),ba.code="IdentityManagerBase.6",ba.log=!!q.isDebug,ba;return{credential:O}})}).then(function(O){return{credential:O.credential,
viewOnly:L}})},setRedirectionHandler:function(C){this._redirectFunc=C},setProtocolErrorHandler:function(C){this._protocolFunc=C},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var C=this.credentials.slice();b.forEach(C,function(E){E.destroy()})}this.onCredentialsDestroy()},_getOAuthHash:function(){var C=window.location.hash;if(C){"#"===C.charAt(0)&&(C=C.substring(1));C=c.queryToObject(C);
var E=!1;C.access_token&&C.expires_in&&C.state&&C.hasOwnProperty("username")?(C.state=JSON.parse(C.state),this._oAuthHash=C,E=!0):C.error&&C.error_description&&"access_denied"===C.error&&(E=!0);E&&(window.location.hash=C.state&&C.state.hash||"")}},_pageShowHandler:function(C){C.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(C=Error("ABORTED"),C.code="IdentityManager.2",C.log=!!q.isDebug,this._errbackFunc(C))},_findCredential:function(C,E){var G=-1,H,L,O=E&&E.token;E=E&&E.resource;var W=
this._isServerRsrc(C)?"server":"portal",Z=b.filter(this.credentials,function(X){return this._hasSameServerInstance(X.server,C)&&X.scope===W},this);C=E||C;if(Z.length)if(1===Z.length){E=Z[0];var ba=(H=(L=this.findServerInfo(E.server))&&L.owningSystemUrl)&&this.findCredential(H,E.userId);G=this._getIdenticalSvcIdx(C,E);if(O)-1!==G&&(E.resources.splice(G,1),this._removeResource(C,ba));else return-1===G&&E.resources.push(C),this._addResource(C,ba),E}else{var P,ha;b.some(Z,function(X){ha=this._getIdenticalSvcIdx(C,
X);return-1!==ha?(P=X,ba=(H=(L=this.findServerInfo(P.server))&&L.owningSystemUrl)&&this.findCredential(H,P.userId),G=ha,!0):!1},this);if(O)P&&(P.resources.splice(G,1),this._removeResource(C,ba));else if(P)return this._addResource(C,ba),P}},_findOAuthInfo:function(C){var E=this.findOAuthInfo(C);E||b.some(this.oAuthInfos,function(G){this._isIdProvider(G.portalUrl,C)&&(E=G);return!!E},this);return E},_addResource:function(C,E){E&&-1===this._getIdenticalSvcIdx(C,E)&&E.resources.push(C)},_removeResource:function(C,
E){var G=-1;E&&(G=this._getIdenticalSvcIdx(C,E),-1<G&&E.resources.splice(G,1))},_useProxy:function(C,E){return E&&E.isAdmin&&!w.hasSameOrigin(C.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(C.tokenServiceUrl)&&10.1==C.currentVersion&&!w.hasSameOrigin(C.tokenServiceUrl,window.location.href)},_getOrigin:function(C){C=new h(C);return C.scheme+"://"+C.host+(r.isDefined(C.port)?":"+C.port:"")},_getServerInstanceRoot:function(C){var E=C.toLowerCase(),G=E.indexOf(this._agsRest);-1===
G&&this._isAdminResource(C)&&(G=this._agsAdmin.test(C)?C.replace(this._agsAdmin,"$1").length:C.search(this._adminSvcs));-1===G&&(G=E.indexOf("/sharing"));-1===G&&"/"===E.substr(-1)&&(G=E.length-1);return-1<G?C.substring(0,G):C},_hasSameServerInstance:function(C,E){"/"===C.substr(-1)&&(C=C.slice(0,-1));C=C.toLowerCase();E=this._getServerInstanceRoot(E).toLowerCase();C=this._normalizeAGOLorgDomain(C);E=this._normalizeAGOLorgDomain(E);C=C.substr(C.indexOf(":"));E=E.substr(E.indexOf(":"));return C===
E},_normalizeAGOLorgDomain:function(C){var E=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,G=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,H=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;E.test(C)?C=C.replace(E,"https://www.arcgis.com"):G.test(C)?C=C.replace(G,"https://devext.arcgis.com"):H.test(C)&&(C=C.replace(H,"https://qaext.arcgis.com"));return C},_sanitizeUrl:function(C){var E=(n.defaults.io.proxyUrl||"").toLowerCase(),G=E?C.toLowerCase().indexOf(E+"?"):-1;-1!==
G&&(C=C.substring(G+E.length+1));C=w.normalize(C);return w.urlToObject(C).path},_isRESTService:function(C){return-1<C.indexOf(this._agsRest)},_isAdminResource:function(C){return this._agsAdmin.test(C)||this._adminSvcs.test(C)},_isServerRsrc:function(C){return this._isRESTService(C)||this._isAdminResource(C)},_isIdenticalService:function(C,E){if(this._isRESTService(C)&&this._isRESTService(E)){C=this._getSuffix(C).toLowerCase();E=this._getSuffix(E).toLowerCase();var G=C===E;G||(G=/(.*)\/(MapServer|FeatureServer).*/ig,
G=C.replace(G,"$1")===E.replace(G,"$1"))}else this._isAdminResource(C)&&this._isAdminResource(E)?G=!0:this._isServerRsrc(C)||this._isServerRsrc(E)||!this._isPortalDomain(C)||(G=!0);return G},_isPortalDomain:function(C){var E=new h(C.toLowerCase()),G=this._portalConfig;C=b.some(this._gwDomains,function(H){return H.regex.test(E.uri)});!C&&G&&(C=this._hasSameServerInstance(this._getServerInstanceRoot(G.restBaseUrl),E.uri));C||(!this._arcgisUrl&&(G=a.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=
(new h(G)).authority),this._arcgisUrl&&(C=this._arcgisUrl.toLowerCase()===E.authority));C||(C=b.some(this._portals,function(H){return this._hasSameServerInstance(H,E.uri)},this));return C=C||this._agsPortal.test(E.path)},_isIdProvider:function(C,E){var G=-1,H=-1;b.forEach(this._gwDomains,function(Z,ba){-1===G&&Z.regex.test(C)&&(G=ba);-1===H&&Z.regex.test(E)&&(H=ba)});var L=!1;if(-1<G&&-1<H)if(0===G||4===G){if(0===H||4===H)L=!0}else if(1===G){if(1===H||2===H)L=!0}else 2===G?2===H&&(L=!0):3===G&&3===
H&&(L=!0);if(!L){var O=this.findServerInfo(E),W=O&&O.owningSystemUrl;W&&u(O)&&this._isPortalDomain(W)&&this._isIdProvider(C,W)&&(L=!0)}return L},_isPublic:function(C){C=this._sanitizeUrl(C);return b.some(this._publicUrls,function(E){return E.test(C)})},_getIdenticalSvcIdx:function(C,E){var G=-1;b.some(E.resources,function(H,L){return this._isIdenticalService(C,H)?(G=L,!0):!1},this);return G},_getSuffix:function(C){return C.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(C){if(this._isRESTService(C)||
this._isAdminResource(C)){var E=this._getServerInstanceRoot(C);var G=E+"/admin/generateToken";C=E+"/rest/info";E=y({url:C,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});E.adminUrl_=G;return E}if(this._isPortalDomain(C)){var H="";b.some(this._gwDomains,function(L){L.regex.test(C)&&(H=L.tokenServiceUrl);return!!H});H||b.some(this._portals,function(L){this._hasSameServerInstance(L,C)&&(H=L+this._gwTokenUrl);return!!H},this);H||(G=C.toLowerCase().indexOf("/sharing"),-1!==G&&(H=C.substring(0,
G)+this._gwTokenUrl));H||(H=this._getOrigin(C)+this._gwTokenUrl);H&&(G=(new h(C)).port,/^http:\/\//i.test(C)&&"7080"===G&&(H=H.replace(/:7080/i,":7443")),H=H.replace(/http:/i,"https:"));return H}if(-1!==C.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(C,E,G){return y({url:C+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:E,token:G}},{disableIdentityLookup:!0,usePost:!0}).then(function(H){return H.token})},
_getPortalSelf:function(C,E){var G="";b.some(this._gwDomains,function(H){H.regex.test(C)&&(G=H.customBaseUrl);return!!G});if(G)return E=new g,E.resolve({allSSL:!0,currentVersion:"4.4",customBaseUrl:G,portalMode:"multitenant",supportsOAuth:!0}),E;"https:"===window.location.protocol?C=C.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(E)&&(C=C.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return y({url:C,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,
disableIdentityLookup:!0})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var C=null;if(d.isSupported()){var E=this._getAllCookies("esri_auth"),G,H;for(H=0;H<E.length;H++){var L=JSON.parse(E[H]);if(L.portalApp){C=L;break}G?G.push(L):G=[L]}if(!C&&G)for(H=0;H<G.length;H++)if(L=G[H],L.urlKey&&window.location.hostname===L.urlKey.toLowerCase()+"."+L.customBaseUrl){C=L;break}}C&&(E=null,C.expires&&("number"===typeof C.expires?E=C.expires:"string"===typeof C.expires&&
(E=Date.parse(C.expires)),isNaN(E)&&(E=null),C.expires=E),E&&E<(new Date).getTime()&&(C=null));return C},_getAllCookies:function(C){var E=[],G=document.cookie.match(new RegExp("(?:^|; )"+e.escapeString(C)+"\x3d([^;]*)","g"));if(G)for(C=0;C<G.length;C++){var H=G[C],L=H.indexOf("\x3d");-1<L&&(H=H.substring(L+1),E.push(decodeURIComponent(H)))}return E},_doPortalSignIn:function(C,E){if(d.isSupported()){var G=this._getEsriAuthCookie(),H=this._portalConfig,L=window.location.href,O=this.findServerInfo(C);
if((E||this.useSignInPage)&&(H||this._isPortalDomain(L)||G)&&(O?O.hasPortal||O.owningSystemUrl&&this._isPortalDomain(O.owningSystemUrl):this._isPortalDomain(C))&&(this._isIdProvider(L,C)||H&&(this._hasSameServerInstance(this._getServerInstanceRoot(H.restBaseUrl),C)||this._isIdProvider(H.restBaseUrl,C))||w.hasSameOrigin(L,C,!0)))return!0}return!1},_canUsePortalSignInWorkflow:function(C){return this._doPortalSignIn(C)&&(window===window.top||this._hasPortalSession())},_checkProtocol:function(C,E,G,H){var L=
!0;H=H?E.adminTokenServiceUrl:E.tokenServiceUrl;0!==a.trim(H).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||n.defaults.io.useCors&&(w.canUseXhr(H)||w.canUseXhr(w.getProxyUrl(!0).path))||(L=this._protocolFunc?!!this._protocolFunc({resourceUrl:C,serverInfo:E}):!1,L||(C=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),C.code="IdentityManagerBase.4",C.log=!!q.isDebug,G(C)));return L},_enqueue:function(C,E,G,H,L,O){H||
(H=new g(v._dfdCanceller));H.resUrl_=C;H.sinfo_=E;H.options_=G;H.admin_=L;H.refresh_=O;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(C),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(H)):this._xoReqs.push(H):this._doSignIn(H);return H},_doSignIn:function(C){this._busy=C;this._rejectOnPersistedPageShow=!1;var E=this,G=function(P){var ha=C.options_&&C.options_.resource,X=C.resUrl_,R=C.refresh_,V=!1;-1===b.indexOf(E.credentials,
P)&&(R&&-1!==b.indexOf(E.credentials,R)?(R.userId=P.userId,R.token=P.token,R.expires=P.expires,R.validity=P.validity,R.ssl=P.ssl,R.creationTime=P.creationTime,V=!0,P=R):E.credentials.push(P));P.resources||(P.resources=[]);P.resources.push(ha||X);P.scope=E._isServerRsrc(X)?"server":"portal";P.onTokenChange();ha=E._soReqs;var J={};E._soReqs=[];b.forEach(ha,function(S){if(!this._isIdenticalService(X,S.resUrl_)){var aa=this._getSuffix(S.resUrl_);J[aa]||(J[aa]=!0,P.resources.push(S.resUrl_))}},E);C.callback(P);
b.forEach(ha,function(S){this._hasSameServerInstance(this._getServerInstanceRoot(X),S.resUrl_)?S.callback(P):this._soReqs.push(S)},E);E._busy=C.resUrl_=C.sinfo_=C.refresh_=null;if(!V)E.onCredentialCreate({credential:P});E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},H=function(P){C.errback(P);E._busy=C.resUrl_=C.sinfo_=C.refresh_=null;E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},L=function(P,ha,
X,R){var V=C.sinfo_,J=!C.options_||!1!==C.options_.prompt,S=V.hasPortal&&E._findOAuthInfo(C.resUrl_);if(E._canUsePortalSignInWorkflow(C.resUrl_))if(ha=E._getEsriAuthCookie(),P=E._portalConfig,ha){V.webTierAuth||"web"!==(ha.auth_tier&&ha.auth_tier.toLowerCase())||(V.webTierAuth=!0);var aa=new I({userId:ha.email,server:V.server,token:V.webTierAuth?null:ha.token,expires:ha.expires});aa.token?C._pendingDfd=E._exchangeToken(aa.server,S?S.appId:"arcgisonline",aa.token).then(function(la){aa.token=la;G(aa)}).catch(function(){G(aa)}):
G(aa)}else J?(J="",S=window.location.href,J=E.signInPage?E.signInPage:P?P.baseUrl+P.signin:E._isIdProvider(S,C.resUrl_)?E._getOrigin(S)+"/home/signin.html":V.tokenServiceUrl.replace(E._rePortalTokenSvc,"")+"/home/signin.html",J=J.replace(/http:/i,"https:"),P&&!1===P.useSSL&&(J=J.replace(/https:/i,"http:")),0===S.toLowerCase().replace("https","http").indexOf(J.toLowerCase().replace("https","http"))?(V=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+
C.resUrl_),V.code="IdentityManagerBase.5",V.log=!!q.isDebug,H(V)):(E._rejectOnPersistedPageShow=!0,E._redirectFunc?E._redirectFunc({signInPage:J,returnUrlParamName:"returnUrl",returnUrl:S,resourceUrl:C.resUrl_,serverInfo:V}):window.location=J+"?returnUrl\x3d"+window.escape(S))):(V=Error("User is not signed in."),V.code="IdentityManagerBase.6",V.log=!!q.isDebug,H(V));else if(P)G(new I({userId:P,server:V.server,token:X,expires:r.isDefined(R)?Number(R):null,ssl:!!ha}));else if(S){var ja=S._oAuthCred;
ja||(P=new B(S,window.localStorage),ha=new B(S,window.sessionStorage),P.isValid()&&ha.isValid()?P.expires>ha.expires?(ja=P,ha.destroy()):(ja=ha,P.destroy()):ja=P.isValid()?P:ha,S._oAuthCred=ja);ja.isValid()?(aa=new I({userId:ja.userId,server:V.server,token:ja.token,expires:ja.expires,ssl:ja.ssl,_oAuthCred:ja}),S.appId!==ja.appId&&E._doPortalSignIn(C.resUrl_,!0)?C._pendingDfd=E._exchangeToken(aa.server,S.appId,aa.token).then(function(la){aa.token=la;ja.token=la;ja.save();G(aa)}).catch(function(){G(aa)}):
G(aa)):E._oAuthHash&&E._oAuthHash.state.portalUrl===S.portalUrl?(J=E._oAuthHash,aa=new I({userId:J.username,server:V.server,token:J.access_token,expires:(new Date).getTime()+1E3*Number(J.expires_in),ssl:"true"===J.ssl,oAuthState:J.state,_oAuthCred:ja}),ja.storage=J.persist?window.localStorage:window.sessionStorage,ja.token=aa.token,ja.expires=aa.expires,ja.userId=aa.userId,ja.ssl=aa.ssl,ja.save(),E._oAuthHash=null,G(aa)):J?C._pendingDfd=E.oAuthSignIn(C.resUrl_,V,S,C.options_).addCallbacks(G,H):(V=
Error("User is not signed in."),V.code="IdentityManagerBase.6",V.log=!!q.isDebug,H(V))}else J?E._checkProtocol(C.resUrl_,V,H,C.admin_)&&(J=C.options_,C.admin_&&(J=J||{},J.isAdmin=!0),C._pendingDfd=E.signIn(C.resUrl_,V,J).addCallbacks(G,H)):(V=Error("User is not signed in."),V.code="IdentityManagerBase.6",V.log=!!q.isDebug,H(V))},O=function(){var P=C.sinfo_,ha=P.owningSystemUrl,X=C.options_,R;if(X){var V=X.token;var J=X.error;var S=X.prompt}(R=E._findCredential(ha,{token:V,resource:C.resUrl_}))||b.some(E.credentials,
function(aa){this._isIdProvider(ha,aa.server)&&(R=aa);return!!R},E);R?(X=E.findCredential(C.resUrl_,R.userId))?G(X):D(P,E._legacyFed)?(X=R.toJson(),X.server=P.server,X.resources=null,G(new I(X))):(C._pendingDfd=E.generateToken(E.findServerInfo(R.server),null,{serverUrl:C.resUrl_,token:R.token,ssl:R.ssl})).addCallbacks(function(aa){G(new I({userId:R.userId,server:P.server,token:aa.token,expires:r.isDefined(aa.expires)?Number(aa.expires):null,ssl:!!aa.ssl,isAdmin:C.admin_,validity:aa.validity}))},H):
(E._busy=null,V&&(C.options_.token=null),(C._pendingDfd=E.getCredential(ha.replace(/\/?$/,"/sharing"),{resource:C.resUrl_,owningTenant:P.owningTenant,token:V,error:J,prompt:S})).addCallbacks(function(aa){E._enqueue(C.resUrl_,C.sinfo_,C.options_,C,C.admin_)},function(aa){H(aa)}))};this._errbackFunc=H;var W=C.sinfo_.owningSystemUrl,Z=this._isServerRsrc(C.resUrl_),ba=C.sinfo_._restInfoDfd;ba?ba.addCallbacks(function(P){var ha=C.sinfo_;ha._restInfoDfd&&(ha.adminTokenServiceUrl=ha._restInfoDfd.adminUrl_,
ha._restInfoDfd=null,ha.tokenServiceUrl=a.getObject("authInfo.tokenServicesUrl",!1,P)||a.getObject("authInfo.tokenServiceUrl",!1,P)||a.getObject("tokenServiceUrl",!1,P),ha.shortLivedTokenValidity=a.getObject("authInfo.shortLivedTokenValidity",!1,P),ha.currentVersion=P.currentVersion,ha.owningTenant=P.owningTenant,(P=ha.owningSystemUrl=P.owningSystemUrl)&&E._portals.push(P));Z&&ha.owningSystemUrl?O():L()},function(){C.sinfo_._restInfoDfd=null;var P=Error("Unknown resource - could not find token service endpoint.");
P.code="IdentityManagerBase.2";P.log=!!q.isDebug;H(P)}):Z&&W?O():C.sinfo_._selfReq?C.sinfo_._selfReq.selfDfd.then(function(P){var ha={};if(P){var X=P.user&&P.user.username;ha.username=X;ha.allSSL=P.allSSL;var R=P.supportsOAuth;var V=P.currentVersion;if("multitenant"===P.portalMode)var J=P.customBaseUrl}C.sinfo_.webTierAuth=!!X;return X&&E.normalizeWebTierAuth?E.generateToken(C.sinfo_,null,{ssl:ha.allSSL}).addBoth(function(S){ha.portalToken=S&&S.token;ha.tokenExpiration=S&&S.expires;return ha}):!X&&
R&&4.4<=parseFloat(V)&&!E._canUsePortalSignInWorkflow(C.resUrl_)?E._generateOAuthInfo({portalUrl:C.sinfo_.server,customBaseUrl:J,owningTenant:C.sinfo_._selfReq.owningTenant}).always(function(){return ha}):ha}).always(function(P){C.sinfo_._selfReq=null;P?L(P.username,P.allSSL,P.portalToken,P.tokenExpiration):L()}):L()},_generateOAuthInfo:function(C){var E=this,G=C.portalUrl,H=C.customBaseUrl,L=C.owningTenant;if(C=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var O=
window.location.href;var W=O.indexOf("?");-1<W&&(O=O.slice(0,W));W=O.search(/\/(apps|home)\//);O=-1<W?O.slice(0,W):null}C&&O?(this._hasTestedIfAppIsOnPortal=!0,C=y({url:O+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){E.defaultOAuthInfo=new p({appId:"arcgisonline",popup:!0,popupCallbackUrl:O+"/home/oauth-callback.html"})})):(C=new g,C.resolve(),C=C.promise);return C.then(function(){if(E.defaultOAuthInfo)return G=G.replace(/^http:/i,"https:"),y({url:G+"/sharing/rest/oauth2/validateRedirectUri",
content:{accountId:L,client_id:E.defaultOAuthInfo.appId,redirect_uri:w.getAbsoluteUrl(E.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(Z){if(Z.valid){var ba=E.defaultOAuthInfo.clone();ba.portalUrl=Z.urlKey&&H?"https://"+Z.urlKey.toLowerCase()+"."+H:G;E.oAuthInfos.push(ba)}})})}});var I=m(x,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(C){a.mixin(this,C);this.resources=this.resources||[];r.isDefined(this.creationTime)||
(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var C=this,E=this.resources&&this.resources[0],G=l.id.findServerInfo(this.server),H=G&&G.owningSystemUrl,L=!!H&&"server"===this.scope,O=L&&D(G,l.id._legacyFed),W=L&&l.id.findServerInfo(H),Z,ba=(Z=G.webTierAuth)&&l.id.normalizeWebTierAuth,P=z[this.server];P=P&&P[this.userId];var ha={username:this.userId,password:P};if(!Z||ba)if(L&&!W&&b.some(l.id.serverInfos,function(V){l.id._isIdProvider(H,V.server)&&(W=V);return!!W}),
Z=W&&l.id.findCredential(W.server,this.userId),!L||Z)if(O)Z.refreshToken();else{if(L)var X={serverUrl:E,token:Z&&Z.token,ssl:Z&&Z.ssl};else if(ba)ha=null,X={ssl:this.ssl};else if(P)this.isAdmin&&(X={isAdmin:!0});else{if(E){E=l.id._sanitizeUrl(E);this._enqueued=1;var R=l.id._enqueue(E,G,null,null,this.isAdmin,this);R.addCallback(function(){C._enqueued=0;C.refreshServerTokens()}).addErrback(function(){C._enqueued=0})}return R}return l.id.generateToken(L?W:G,L?null:ha,X).addCallback(function(V){C.token=
V.token;C.expires=r.isDefined(V.expires)?Number(V.expires):null;C.creationTime=(new Date).getTime();C.validity=V.validity;C.onTokenChange();C.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&b.forEach(l.id.credentials,function(C){var E=l.id.findServerInfo(C.server),G=E&&E.owningSystemUrl;C!==this&&C.userId===this.userId&&G&&"server"===C.scope&&(l.id._hasSameServerInstance(this.server,G)||l.id._isIdProvider(G,this.server))&&(D(E,l.id._legacyFed)?
(C.token=this.token,C.expires=this.expires,C.creationTime=this.creationTime,C.validity=this.validity,C.onTokenChange()):C.refreshToken())},this)},onTokenChange:function(C){clearTimeout(this._refreshTimer);var E=this.server&&l.id.findServerInfo(this.server),G=(E=E&&E.owningSystemUrl)&&l.id.findServerInfo(E);!1!==C&&(!E||"portal"===this.scope||G&&G.webTierAuth&&!l.id.normalizeWebTierAuth)&&(r.isDefined(this.expires)||r.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=
this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var C=b.indexOf(l.id.credentials,this);-1<C&&l.id.credentials.splice(C,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var C=r.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,
scope:this.scope}),E=this.resources;E&&0<E.length&&(C.resources=E.slice());return C},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var C=6E4*this.tokenRefreshBuffer,E=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>E&&(E=0);this._refreshTimer=setTimeout(a.hitch(this,this.refreshToken),E>C?E-C:E)}});k.Credential=I;return l.IdentityManagerBase=k})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(m,q){m.cookie=function(a,
b,g){var h=document.cookie;if(1==arguments.length)var k=(k=h.match(new RegExp("(?:^|; )"+q.escapeString(a)+"\x3d([^;]*)")))?decodeURIComponent(k[1]):void 0;else{g=g||{};h=g.expires;if("number"==typeof h){var d=new Date;d.setTime(d.getTime()+864E5*h);h=g.expires=d}h&&h.toUTCString&&(g.expires=h.toUTCString());b=encodeURIComponent(b);h=a+"\x3d"+b;for(var c in g)h+="; "+c,d=g[c],!0!==d&&(h+="\x3d"+d);document.cookie=h}return k};m.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__",
"CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return m.cookie})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(m,q,a,b,g){m=m(null,{declaredClass:"esri.ServerInfo",constructor:function(h){q.mixin(this,h)},toJson:function(){return g.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,
adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return b.ServerInfo=m})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has","dojo/json"],function(m,q,a,b){q=q(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,
appId:null,expires:null,ssl:null,token:null,userId:null,constructor:function(g,h){this.oAuthInfo=g;this.storage=h;this._init()},isValid:function(){var g=!1;if(this.oAuthInfo&&this.token&&this.userId){var h=(new Date).getTime();this.expires>h&&(this.expires-h)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(g=!0)}return g},save:function(){if(this.storage){var g=this._load(),h=this.oAuthInfo;if(h&&h.authNamespace&&h.portalUrl){var k=g[h.authNamespace];k||(k=g[h.authNamespace]={});k[h.portalUrl]={appId:this.appId=
h.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",b.stringify(g))}catch(d){}}}},destroy:function(){var g=this._load(),h=this.oAuthInfo;if(h&&h.appId&&h.portalUrl&&this.token&&this.expires>Date.now()){var k=h.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",d=new FormData;d.append("f","json");d.append("auth_token",this.token);d.append("client_id",h.appId);d.append("token_type_hint","access_token");if("function"===
typeof navigator.sendBeacon)navigator.sendBeacon(k,d);else{var c=new XMLHttpRequest;c.open("POST",k);c.send(d)}}if(h&&h.authNamespace&&h.portalUrl&&this.storage&&(k=g[h.authNamespace])){delete k[h.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",b.stringify(g))}catch(f){}}h&&(this.oAuthInfo=h._oAuthCred=null)},_init:function(){var g=this._load(),h=this.oAuthInfo;h&&h.authNamespace&&h.portalUrl&&(g=g[h.authNamespace])&&(g=g[h.portalUrl])&&(this.appId=g.appId,this.expires=g.expires,this.ssl=g.ssl,
this.token=g.token,this.userId=g.userId)},_load:function(){var g={};if(this.storage){var h=this.storage.getItem("esriJSAPIOAuth");if(h)try{g=b.parse(h)}catch(k){}}return g}});return m.OAuthCredential=q})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(m,q,a,b,g){var h=a(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(k){b.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",
authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1},k)},_oAuthCred:null,toJson:function(){return q.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,
preserveUrlHash:this.preserveUrlHash})},clone:function(){return new h(this.toJson())}});b.setObject("arcgis.OAuthInfo",h,m);return h})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(m,q,a,b,g,h,k,d){return m("dijit.form.Form",[g,h,k,d],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(c){q.set(this.domNode,"encType",c);b("ie")&&(this.domNode.encoding=c);this._set("encType",c)},reset:function(c){var f={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:c?c.target:this.domNode,target:c?c.target:this.domNode};!1!==this.onReset(f)&&f.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(c){this.reset(c);c.stopPropagation();c.preventDefault();return!1},_onSubmit:function(c){var f=this.constructor.prototype;if(this.execute!=f.execute||this.onExecute!=f.onExecute)a.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(c)&&(c.stopPropagation(),c.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "),function(m,q,a,b,g,h,k,d,c,f,e,l,n,r){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(t){this._oAuthRedirectFunc=t},oAuthSignIn:function(t,w,v,y){var x=this._oAuthDfd=new d;x.resUrl_=t;x.sinfo_=w;x.oinfo_=v;var B=!y||!1!==y.oAuthPopupConfirmation;if(!v.popup||!B)return this._doOAuthSignIn(t,w,v),x;this._nls||(this._nls=e.identity);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());t=this.oAuthDialog;v=y&&y.error;y=y&&y.token;q.hide(t.errMsg_);v&&403==v.code&&y&&(f.set(t.errMsg_,"innerHTML",this._nls.forbidden),q.show(t.errMsg_));f.set(t.serverLink_,
{title:w.server,innerHTML:-1!==w.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":w.server});t.show();return x},setOAuthResponseHash:function(t){var w=this._oAuthDfd;this._oAuthDfd=null;if(w&&t)if(clearInterval(this._oAuthIntervalId),"#"===t.charAt(0)&&(t=t.substring(1)),t=l.queryToObject(t),t.error)t=Error("access_denied"===t.error?"ABORTED":"OAuth: "+t.error+" - "+t.error_description),t.code="IdentityManagerBase.2",t.log=!!k.isDebug,w.errback(t);else{var v=w.oinfo_._oAuthCred,y=new m({userId:t.username,
server:w.sinfo_.server,token:t.access_token,expires:(new Date).getTime()+1E3*Number(t.expires_in),ssl:"true"===t.ssl,_oAuthCred:v});v.storage=t.persist?window.localStorage:window.sessionStorage;v.token=y.token;v.expires=y.expires;v.userId=y.userId;v.ssl=y.ssl;v.save();w.callback(y)}},_createOAuthDialog:function(){var t=this._nls,w=a.substitute(t,this._oAuthDialogContent);w=a.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},w);var v=new g({title:t.title,
content:w,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var y=v.esriIdMgr_._oAuthDfd;v.hide_();v.esriIdMgr_._doOAuthSignIn(y.resUrl_,y.sinfo_,y.oinfo_)},cancel_:function(){var y=v.esriIdMgr_._oAuthDfd;v.esriIdMgr_._oAuthDfd=null;v.hide_();var x=Error("ABORTED");x.code="IdentityManager.2";x.log=!!k.isDebug;y.errback(x)},hide_:function(){q.hide(v.errMsg_);v.hide();g._DialogLevelManager.hide(v)}});t=v.domNode;v.btnSubmit_=h.byNode(c.query(".esriIdSubmit",
t)[0]);v.btnCancel_=h.byNode(c.query(".esriIdCancel",t)[0]);v.serverLink_=c.query(".serverLink",t)[0];v.errMsg_=c.query(".esriErrorMsg",t)[0];v.connect(v.btnSubmit_,"onClick",v.execute_);v.connect(v.btnCancel_,"onClick",v.onCancel);v.connect(v,"onCancel",v.cancel_);return v},_doOAuthSignIn:function(t,w,v){var y=this,x={portalUrl:v.portalUrl};!v.popup&&v.preserveUrlHash&&window.location.hash&&(x.hash=window.location.hash);x={client_id:v.appId,response_type:"token",state:r.stringify(x),expiration:v.expiration,
locale:v.locale,redirect_uri:v.popup?b.getAbsoluteUrl(v.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};v.forceLogin&&(x.force_login=!0);var B=v.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",p=B+"?"+l.objectToQuery(x);if(v.popup){if(7===n("ie")){var z=window.open(v.popupCallbackUrl,"esriJSAPIOAuth",v.popupWindowFeatures);z.location=p}else z=window.open(p,"esriJSAPIOAuth",v.popupWindowFeatures);z?(z.focus(),this._oAuthDfd.oAuthWin_=z,this._oAuthIntervalId=setInterval(function(){if(z.closed){clearInterval(y._oAuthIntervalId);
var u=y._oAuthDfd;if(u){var D=Error("ABORTED");D.code="IdentityManager.2";D.log=!!k.isDebug;u.errback(D)}}},500)):(t=Error("ABORTED"),t.code="IdentityManager.2",t.log=!!k.isDebug,this._oAuthDfd.errback(t))}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:x,authorizeUrl:B,resourceUrl:t,serverInfo:w,oAuthInfo:v}):window.location=p}}})},"esri/layers/vectorTiles/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n){function r(z){return d.create(function(u){function D(C){if(C=l.receiveMessage(C))switch(C.type){case p:C=z;var E=g.workers.loaderUrl||e.DEFAULT_LOADER_URL;if(null!=g["default"]){var G=a({},g);delete G["default"];G=JSON.parse(JSON.stringify(G))}else G=JSON.parse(JSON.stringify(g));var H=g.workers.loaderConfig;H=e.default({baseUrl:H.baseUrl,locale:b.locale,has:a({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-cors":1,"esri-secure-context":c("esri-secure-context"),
"esri-workers-supports-transfer-arraybuffer":c("esri-workers-supports-transfer-arraybuffer"),"events-keypress-typed":0,"host-webworker":1},H.has),map:a({},H.map),paths:a({},H.paths),packages:H.packages||[]});C.postMessage({type:B,configure:{esriConfig:G,loaderUrl:E,loaderConfig:H}});break;case x:z.removeEventListener("message",D),z.removeEventListener("error",I),u(z)}}function I(C){C.preventDefault();z.removeEventListener("message",D);z.removeEventListener("error",I);v.warn("Failed to create Worker. Fallback to execute module in main thread",
C);z=new n;z.addEventListener("message",D);z.addEventListener("error",I)}z.addEventListener("message",D);z.addEventListener("error",I)})}Object.defineProperty(q,"__esModule",{value:!0});var t=f.normalize(m.toUrl("./worker.js")),w=!f.hasSameOrigin(t,location.href),v=k.getLogger("esri.core.workers"),y=null,x=l.MessageType.CONFIGURED,B=l.MessageType.CONFIGURE,p=l.MessageType.HANDSHAKE;q.createWorker=function(){if(!c("esri-workers"))return r(new n);if(!w){var z=void 0;try{z=new Worker(t)}catch(u){v.warn("Failed to create Worker. Fallback to execute module in main thread",
event),z=new n}return r(z)}y||(y=h(t,{responseType:"text"}));return y.then(function(u){return new Worker(URL.createObjectURL(new Blob([u.data],{type:"text/javascript"})))}).catch(function(u){v.warn("Failed to create Worker. Fallback to execute module in main thread",u);return new n}).then(function(u){return r(u)})}})},"esri/layers/vectorTiles/core/sniff":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(m,q,a,b,g){function h(){var f={available:!1,
version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1},e=document.createElement("canvas");if(!e)return f;var l=g.createContext(e,{failIfMajorPerformanceCaveat:!0},"webgl");!l&&(l=g.createContext(e,{},"webgl"))&&(f.majorPerformanceCaveat=!0);if(!l)return f;e=l.getParameter(l.VERSION);if(!e)return f;if(e=e.match(/^WebGL\s+([\d.]*)/))f.version=parseFloat(e[1]),f.available=.94<=f.version,e=l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,
l.HIGH_FLOAT),f.supportsHighPrecisionFragment=e&&0<e.precision,f.supportsVertexShaderSamplers=0<l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f.supportsElementIndexUint=null!==l.getExtension("OES_element_index_uint"),f.supportsStandardDerivatives=null!==l.getExtension("OES_standard_derivatives");return f}function k(){var f={available:!1,version:0},e=document.createElement("canvas");if(!e)return f;e=g.createContext(e,{},"webgl2");if(!e)return f;f.available=!0;e=e.getParameter(e.VERSION);if(!e)return f;
if(e=e.match(/^WebGL\s+([\d.]*)/))f.version=parseFloat(e[1]);return f}(function(){var f=navigator.userAgent,e=f.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i);f=f.match(/iPhone/i);e&&a.add("esri-mobile",e);f&&a.add("esri-iPhone",f);a.add("esri-phonegap",!!b.cordova);a.add("esri-cors",a("esri-phonegap")||"XMLHttpRequest"in b&&"withCredentials"in new XMLHttpRequest);a.add("esri-geolocation",function(){return!!navigator.geolocation});a.add("esri-canvas-svg-support",function(){return!(a("trident")||
a("ie"))});a.add("esri-secure-context",function(){if("isSecureContext"in b)return b.isSecureContext;if(b.location&&b.location.origin)return 0===b.location.origin.indexOf("https:")});a.add("esri-wasm","WebAssembly"in b);a("host-webworker")||(a.add("esri-workers","Worker"in b),a.add("esri-script-sandbox",function(){return"MessageChannel"in b&&"HTMLIFrameElement"in b&&"sandbox"in HTMLIFrameElement.prototype}),a.add("esri-url-encodes-apostrophe",function(){var l=b.document.createElement("a");l.href="?'";
return-1<l.href.indexOf("?%27")}),d||(d=h()),a.add("esri-webgl",d.available),a.add("esri-webgl-high-precision-fragment",d.supportsHighPrecisionFragment),a.add("esri-webgl-vertex-shader-samplers",d.supportsVertexShaderSamplers),a.add("esri-webgl-element-index-uint",d.supportsElementIndexUint),a.add("esri-webgl-standard-derivatives",d.supportsStandardDerivatives),a.add("esri-webgl-major-performance-caveat",d.majorPerformanceCaveat),a.add("esri-featurelayer-webgl-labeling",!0),c||(c=k()),a.add("esri-webgl2",
c.available))})();var d=null,c=null;return a})},"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(m,q){function a(k,d,c){void 0===d&&(d={});switch(c){case "webgl":var f=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":f=["webgl2"];break;default:f=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}c=null;for(var e=0;e<f.length;e++){var l=f[e];try{c=k.getContext(l,d)}catch(n){}if(c)break}return c}function b(k,d){(k=k.parentNode)&&
(k.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+d+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(q,"__esModule",{value:!0});q.createContextOrErrorHTML=function(k,d,c){void 0===d&&(d={});if(!window.WebGLRenderingContext)return b(k,g),null;d=a(k,d,c);return d?d:(b(k,h),null)};q.createContext=
a;var g='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',h='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},"esri/layers/vectorTiles/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(m,q,a,b,g){Object.defineProperty(q,
"__esModule",{value:!0});q.DEFAULT_LOADER_URL=g.makeAbsolute(g.removeQueryParameters(m.toUrl("./worker-init.js")));q.DEFAULT_CONFIG={baseUrl:function(){var h=g.removeQueryParameters(m.toUrl("dojo/x.js"));return g.makeAbsolute(h.slice(0,h.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",
main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};q.default=function(h){var k={async:h.async,isDebug:h.isDebug,locale:h.locale,baseUrl:h.baseUrl,has:a({},h.has),map:a({},h.map),packages:h.packages&&h.packages.concat()||[],paths:a({},h.paths)};h.hasOwnProperty("async")||
(k.async=!0);h.hasOwnProperty("isDebug")||(k.isDebug=!1);h.baseUrl||(k.baseUrl=q.DEFAULT_CONFIG.baseUrl);q.DEFAULT_CONFIG.packages.forEach(function(e){a:{for(var l=k.packages,n=0;n<l.length;n++)if(l[n].name===e.name)break a;e=a({},e);n=g.removeQueryParameters(m.toUrl(e.name+"/x.js"));n=n.slice(0,n.length-5);e.location=g.makeAbsolute(n);l.push(e)}});h=k.map=k.map||{};for(var d=0,c=Object.keys(q.DEFAULT_CONFIG.map);d<c.length;d++){var f=c[d];h[f]||(h[f]=q.DEFAULT_CONFIG.map[f])}return k}})},"esri/layers/vectorTiles/core/workers/WorkerFallback":function(){define(["require",
"exports","dojo/has","../global","./utils"],function(m,q,a,b,g){var h=function(){return function(){var c=this,f=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(e){c[e]=function(){for(var l=[],n=0;n<arguments.length;n++)l[n]=arguments[n];return f[e].apply(f,l)}})}}(),k=b.MutationObserver||b.WebKitMutationObserver,d=function(){if(b.process&&b.process.nextTick)var c=function(l){b.process.nextTick(l)};else if(b.Promise)c=function(l){b.Promise.resolve().then(l)};
else if(k){var f=[],e=document.createElement("div");(new k(function(){for(;0<f.length;)f.shift()()})).observe(e,{attributes:!0});c=function(l){f.push(l);e.setAttribute("queueStatus","1")}}return c}();return function(){function c(){this._dispatcher=new h;this._isInitialized=!1;this._workerPostMessage({type:g.MessageType.HANDSHAKE})}c.prototype.terminate=function(){};Object.defineProperty(c.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(f){this._onmessageHandler&&
this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=f)&&this.addEventListener("message",f)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(f){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=f)&&this.addEventListener("error",f)},enumerable:!0,configurable:!0});c.prototype.postMessage=function(f,e){var l=this;d(function(){l._workerMessageHandler(new MessageEvent("message",
{data:f}))})};c.prototype.dispatchEvent=function(f){return this._dispatcher.dispatchEvent(f)};c.prototype.addEventListener=function(f,e,l){this._dispatcher.addEventListener(f,e,l)};c.prototype.removeEventListener=function(f,e,l){this._dispatcher.removeEventListener(f,e,l)};c.prototype._workerPostMessage=function(f,e){var l=this;d(function(){l.dispatchEvent(new MessageEvent("message",{data:f}))})};c.prototype._workerMessageHandler=function(f){var e=this;if(f=g.receiveMessage(f)){var l=f.jobId;switch(f.type){case g.MessageType.CONFIGURE:this._isInitialized||
this._workerPostMessage({type:g.MessageType.CONFIGURED});break;case g.MessageType.OPEN:f=f.modulePath,a("esri-webpack")?m(["esri/core/workers/RemoteClient","esri/views/vectorTiles/WorkerTileHandler","esri/views/2d/layers/features/Pipeline","esri/views/3d/layers/PointCloudWorker","esri/views/3d/layers/SceneLayerWorker","esri/layers/graphics/sources/support/CSVSourceWorker","esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker",f],function(n,r,t,w,v,y,x,B){switch(B){case "esri/views/vectorTiles/WorkerTileHandler":break;
case "esri/views/2d/layers/features/Pipeline":r=t;break;case "esri/views/3d/layers/PointCloudWorker":r=w;break;case "esri/views/3d/layers/SceneLayerWorker":r=v;break;case "esri/layers/graphics/sources/support/CSVSourceWorker":r=y;break;case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":r=x;break;default:r=B}n=n.connect(r);e._workerPostMessage({type:g.MessageType.OPENED,jobId:l,data:n})}):m(["./RemoteClient",f],function(n,r){n=n.connect(r);e._workerPostMessage({type:g.MessageType.OPENED,
jobId:l,data:n})})}}};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphMosaic":function(){define("require exports dojo/has ../../core/promiseUtils ./Rect ./RectangleBinPack ../webgl/Texture".split(" "),function(m,q,a,b,g,h,k){var d;a("stable-symbol-rendering")&&(d=new Set);return function(){function c(f,e,l){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=f;this.height=e;this._glyphSource=
l;this._binPack=new h(f-4,e-4);this._glyphData.push(new Uint8Array(f*e));this._dirties.push(!0);this._textures.push(void 0)}c.prototype.getGlyphItems=function(f,e,l){var n=this,r=[],t=this._glyphSource,w=new Set;f=1/256;for(var v=0;v<l.length;v++)w.add(Math.floor(l[v]*f));var y=[];w.forEach(function(x){if(256>=x){var B=e+x;n._rangePromises.has(B)?y.push(n._rangePromises.get(B)):(x=t.getRange(e,x).always(function(){n._rangePromises["delete"](B)}),n._rangePromises.set(B,x),y.push(x))}});return b.all(y).then(function(x){x=
n._glyphIndex[e];x||(x={},n._glyphIndex[e]=x);if(a("stable-symbol-rendering")){d.clear();for(var B=0;B<l.length;B++){var p=l[B];d.add(p)}var z=[];w.forEach(function(ba){z.push(ba)});z.sort();p=[];for(B=0;B<z.length;B++)for(var u=z[B],D=0;256>D;++D)p.push(256*u+D)}else p=l;B=0;for(u=p;B<u.length;B++)if(p=u[B],D=x[p]){if(!a("stable-symbol-rendering")||d.has(p))r[p]={rect:D.rect,metrics:D.metrics,page:D.page}}else{var I=t.getGlyph(e,p);if(I&&I.metrics){D=I.metrics;var C=void 0;if(0===D.width)C=new g(0,
0,0,0);else{var E=D.width+6,G=D.height+6,H=E%4?4-E%4:4,L=G%4?4-G%4:4;1===H&&(H=5);1===L&&(L=5);C=n._binPack.allocate(E+H,G+L);C.isEmpty&&(n._dirties[n._currentPage]||(n._glyphData[n._currentPage]=null),n._currentPage=n._glyphData.length,n._glyphData.push(new Uint8Array(n.width*n.height)),n._dirties.push(!0),n._textures.push(void 0),n._binPack=new h(n.width-4,n.height-4),C=n._binPack.allocate(E+H,G+L));H=n._glyphData[n._currentPage];I=I.bitmap;var O=L=void 0;if(I)for(var W=0;W<G;W++){L=E*W;O=n.width*
(C.y+W+1)+C.x;for(var Z=0;Z<E;Z++)H[O+Z+1]=I[L+Z]}}x[p]={rect:C,metrics:D,tileIDs:null,page:n._currentPage};if(!a("stable-symbol-rendering")||d.has(p))r[p]={rect:C,metrics:D,page:n._currentPage};n._dirties[n._currentPage]=!0}}return r})};c.prototype.removeGlyphs=function(f){for(var e in this._glyphIndex){var l=this._glyphIndex[e];if(l){var n=void 0,r;for(r in l)if(n=l[r],n.tileIDs["delete"](f),0===n.tileIDs.size){for(var t=this._glyphData[n.page],w=n.rect,v=void 0,y=void 0,x=0;x<w.height;x++)for(v=
this.width*(w.y+x)+w.x,y=0;y<w.width;y++)t[v+y]=0;delete l[r];this._dirties[n.page]=!0}}}};c.prototype.bind=function(f,e,l,n){void 0===n&&(n=0);this._textures[l]||(this._textures[l]=new k(f,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var r=this._textures[l];r.setSamplingMode(e);this._dirties[l]&&r.setData(this._glyphData[l]);f.bindTexture(r,n);this._dirties[l]=!1};c.prototype.dispose=function(){this._binPack=null;for(var f=0,e=this._textures;f<
e.length;f++){var l=e[f];l&&l.dispose()}this._textures.length=0};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/Rect":function(){define(["require","exports"],function(m,q){return function(){function a(b,g,h,k){void 0===b&&(b=0);void 0===g&&(g=0);void 0===h&&(h=0);void 0===k&&(k=0);this.x=b;this.y=g;this.width=h;this.height=k}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/vectorTiles/RectangleBinPack":function(){define(["require",
"exports","./Rect"],function(m,q,a){return function(){function b(g,h){this._height=this._width=0;this._free=[];this._width=g;this._height=h;this._free.push(new a(0,0,g,h))}Object.defineProperty(b.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});b.prototype.allocate=function(g,h){if(g>this._width||h>this._height)return new a;for(var k=null,d=-1,c=0;c<
this._free.length;++c){var f=this._free[c];g<=f.width&&h<=f.height&&(null===k||f.y<=k.y&&f.x<=k.x)&&(k=f,d=c)}if(null===k)return new a;this._free.splice(d,1);k.width<k.height?(k.width>g&&this._free.push(new a(k.x+g,k.y,k.width-g,h)),k.height>h&&this._free.push(new a(k.x,k.y+h,k.width,k.height-h))):(k.width>g&&this._free.push(new a(k.x+g,k.y,k.width-g,k.height)),k.height>h&&this._free.push(new a(k.x,k.y+h,g,k.height-h)));return new a(k.x,k.y,g,h)};b.prototype.release=function(g){for(var h=0;h<this._free.length;++h){var k=
this._free[h];if(k.y===g.y&&k.height===g.height&&k.x+k.width===g.x)k.width+=g.width;else if(k.x===g.x&&k.width===g.width&&k.y+k.height===g.y)k.height+=g.height;else if(g.y===k.y&&g.height===k.height&&g.x+g.width===k.x)k.x=g.x,k.width+=g.width;else if(g.x===k.x&&g.width===k.width&&g.y+g.height===k.y)k.y=g.y,k.height+=g.height;else continue;this._free.splice(h,1);this.release(g)}this._free.push(g)};return b}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphSource":function(){define(["require","exports",
"../../request","../../core/pbf","../../core/promiseUtils"],function(m,q,a,b,g){var h=function(){function d(c){this._metrics=[];this._bitmaps=[];if(c)for(;c.next();)switch(c.tag()){case 1:for(var f=c.getMessage();f.next();)switch(f.tag()){case 3:for(var e=f.getMessage(),l=void 0,n=void 0,r=void 0,t=void 0,w=void 0,v=void 0,y=void 0;e.next();)switch(e.tag()){case 1:l=e.getUInt32();break;case 2:n=e.getBytes();break;case 3:r=e.getUInt32();break;case 4:t=e.getUInt32();break;case 5:w=e.getSInt32();break;
case 6:v=e.getSInt32();break;case 7:y=e.getUInt32();break;default:e.skip()}l&&(this._metrics[l]={width:r,height:t,left:w,top:v,advance:y},this._bitmaps[l]=n);break;default:f.skip()}break;default:c.skip()}}d.prototype.getMetrics=function(c){return this._metrics[c]};d.prototype.getBitmap=function(c){return this._bitmaps[c]};return d}(),k=function(){function d(){this._ranges=[]}d.prototype.getRange=function(c){return this._ranges[c]};d.prototype.addRange=function(c,f){this._ranges[c]=f};return d}();
return function(){function d(c){this._glyphInfo={};this._baseURL=c}d.prototype.getRange=function(c,f){var e=this._getFontStack(c);if(e.getRange(f))return g.resolve();var l=256*f,n=l+255;c=this._baseURL.replace("{fontstack}",c).replace("{range}",l+"-"+n);return a(c,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(r){e.addRange(f,new h(new b(new Uint8Array(r.data),new DataView(r.data))))}).catch(function(){e.addRange(f,new h)})};d.prototype.getGlyph=function(c,f){if(c=this._getFontStack(c)){var e=
Math.floor(f/256);if(!(256<e)&&(c=c.getRange(e)))return{metrics:c.getMetrics(f),bitmap:c.getBitmap(f)}}};d.prototype._getFontStack=function(c){var f=this._glyphInfo[c];f||(f=this._glyphInfo[c]=new k);return f};return d}()})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(m,q){return function(){function a(b,g,h,k){this._tag=0;this._dataType=99;this._data=b;this._dataView=g;this._pos=h||0;this._end=k||b.byteLength}a.prototype.clone=function(){return new a(this._data,
this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};a.prototype.next=function(b){for(;;){if(this._pos===this._end)return!1;var g=this._decodeVarint();this._tag=g>>3;this._dataType=g&7;if(!b||b===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=
function(){var b=4294967295;b=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return b};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=
function(){var b=this.getUInt32();return b>>>1^-(b&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var b=0!==this._data[this._pos];this._skip(1);return b};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var b=this._dataView,g=this._pos;b=b.getUint32(g,!0)+4294967296*b.getUint32(g+4,!0);this._skip(8);return b};a.prototype.getSFixed64=function(){var b=this._dataView,g=this._pos;b=b.getUint32(g,!0)+4294967296*
b.getInt32(g+4,!0);this._skip(8);return b};a.prototype.getDouble=function(){var b=this._dataView.getFloat64(this._pos,!0);this._skip(8);return b};a.prototype.getFixed32=function(){var b=this._dataView.getUint32(this._pos,!0);this._skip(4);return b};a.prototype.getSFixed32=function(){var b=this._dataView.getInt32(this._pos,!0);this._skip(4);return b};a.prototype.getFloat=function(){var b=this._dataView.getFloat32(this._pos,!0);this._skip(4);return b};a.prototype.getString=function(){var b=this._getLength(),
g=this._pos;g=this._toString(this._data,g,g+b);this._skip(b);return g};a.prototype.getBytes=function(){var b=this._getLength(),g=this._pos;g=this._toBytes(this._data,g,g+b);this._skip(b);return g};a.prototype.getMessage=function(){var b=this._getLength(),g=this._pos;g=new a(this._data,this._dataView,g,g+b);this._skip(b);return g};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);
break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(b){if(this._pos+b>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=b};a.prototype._decodeVarint=function(){var b=this._data,g=this._pos,h=0;if(10<=this._end-g){var k=b[g++];h|=k&127;if(0!==(k&128)&&(k=b[g++],h|=(k&127)<<7,0!==(k&128)&&(k=b[g++],h|=(k&127)<<14,0!==(k&128)&&(k=b[g++],h|=(k&127)<<21,0!==(k&128)&&(k=b[g++],h+=268435456*(k&127),0!==(k&128)&&(k=b[g++],h+=34359738368*(k&127),0!==(k&128)&&
(k=b[g++],h+=4398046511104*(k&127),0!==(k&128)&&(k=b[g++],h+=562949953421312*(k&127),0!==(k&128)&&(k=b[g++],h+=72057594037927936*(k&127),0!==(k&128)&&(k=b[g++],h+=0x7fffffffffffffff*(k&127),0!==(k&128)))))))))))throw Error("Varint too long!");}else{for(var d=1;g!==this._end;){k=b[g];if(0===(k&128))break;++g;h+=(k&127)*d;d*=128}if(g===this._end)throw Error("Varint overrun!");++g;h+=k*d}this._pos=g;return h};a.prototype._decodeSVarint=function(){var b=this._decodeVarint();return b%2?-(b+1)/2:b/2};a.prototype._getLength=
function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(b,g,h){var k="",d="";for(h=Math.min(this._end,h);g<h;++g){var c=b[g];c&128?d+="%"+c.toString(16):(k+=decodeURIComponent(d)+String.fromCharCode(c),d="")}d.length&&(k+=decodeURIComponent(d));return k};a.prototype._toBytes=function(b,g,h){h=Math.min(this._end,h);return new Uint8Array(b.buffer,g,h-g)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteMosaic":function(){define("require exports ./GeometryUtils ./Rect ./RectangleBinPack ../webgl/Texture".split(" "),
function(m,q,a,b,g,h){return function(){function k(d,c,f){void 0===f&&(f=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;this._pageWidth=d;this._pageHeight=c;0<f&&(this._maxItemSize=f);this._binPack=new g(d-4,c-4)}k.prototype.getWidth=function(d){return d>=this._size.length?-1:this._size[d][0]};k.prototype.getHeight=function(d){return d>=this._size.length?-1:this._size[d][1]};
k.prototype.setSpriteSource=function(d){this.dispose();this.pixelRatio=d.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new g(this._pageWidth-4,this._pageHeight-4);var c=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=c;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=d};k.prototype.getSpriteItem=function(d,c){void 0===c&&(c=!1);var f=this._mosaicRects[d];if(f)return f;
if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;f=this._sprites.getSpriteInfo(d);if(!f||!f.width||!f.height||0>f.width||0>f.height)return null;var e=f.width,l=f.height,n=this._allocateImage(e,l),r=n[0],t=n[1];if(0>=r.width)return null;this._copy(r,f,t,n[2],c);f={rect:r,width:e,height:l,anchorX:0,anchorY:0,sdf:f.sdf,pixelRatio:f.pixelRatio,page:t};return this._mosaicRects[d]=f};k.prototype.preloadSpriteItems=function(){for(var d=0,c=this._sprites.spriteNames;d<c.length;d++)this.getSpriteItem(c[d],
!0)};k.prototype.getSpriteItems=function(d){for(var c={},f=0;f<d.length;f++){var e=d[f];c[e]=this.getSpriteItem(e)}return c};k.prototype.getMosaicItemPosition=function(d,c){c=(d=this.getSpriteItem(d,c))&&d.rect;if(!c)return null;c.width=d.width;c.height=d.height;return{size:[d.width,d.height],tl:[(c.x+2)/this._size[d.page][0],(c.y+2)/this._size[d.page][1]],br:[(c.x+2+d.width)/this._size[d.page][0],(c.y+2+d.height)/this._size[d.page][1]],page:d.page}};k.prototype.bind=function(d,c,f,e){void 0===f&&
(f=0);void 0===e&&(e=0);this._textures[f]||(this._textures[f]=new h(d,{pixelFormat:6408,dataType:5121,width:this._size[f][0],height:this._size[f][1]},new Uint8Array(this._mosaicsData[f].buffer)));var l=this._textures[f];l.setSamplingMode(c);this._dirties[f]&&l.setData(new Uint8Array(this._mosaicsData[f].buffer));d.bindTexture(l,e);this._dirties[f]=!1};k._copyBits=function(d,c,f,e,l,n,r,t,w,v,y){var x=e*c+f;r=t*n+r;if(y)for(r-=n,y=-1;y<=v;y++,x=((y+v)%v+e)*c+f,r+=n)for(t=-1;t<=w;t++)l[r+t]=d[x+(t+
w)%w];else for(y=0;y<v;y++){for(t=0;t<w;t++)l[r+t]=d[x+t];x+=c;r+=n}};k.prototype._copy=function(d,c,f,e,l,n){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(f>=this._mosaicsData.length)){var r=new Uint32Array(n?n.buffer:this._sprites.image.buffer);k._copyBits(r,n?c.width:this._sprites.width,c.x,c.y,this._mosaicsData[f],e[0],d.x+2,d.y+2,c.width,c.height,l);this._dirties[f]=!0}};k.prototype._allocateImage=function(d,c){d+=2;c+=2;var f=Math.max(d,c);if(this._maxItemSize&&this._maxItemSize<
f){f=Math.pow(2,Math.ceil(a.log2(d)));var e=Math.pow(2,Math.ceil(a.log2(c)));d=new b(0,0,d,c);this._mosaicsData.push(new Uint32Array(f*e));this._dirties.push(!0);this._size.push([f,e]);this._textures.push(void 0);return[d,this._mosaicsData.length-1,[f,e]]}f=d%4?4-d%4:4;e=c%4?4-c%4:4;1===f&&(f=5);1===e&&(e=5);f=this._binPack.allocate(d+f,c+e);return 0>=f.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*
this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new g(this._pageWidth-4,this._pageHeight-4),this._allocateImage(d,c)):[f,this._currentPage,[this._pageWidth,this._pageHeight]]};k.prototype.dispose=function(){this._binPack=null;this._mosaicRects={};for(var d=0,c=this._textures;d<c.length;d++){var f=c[d];f&&f.dispose()}this._textures.length=0};return k}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojo/Deferred ../../kernel ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),
function(m,q,a,b,g,h,k,d,c){return function(){function f(e,l){this.baseURL=e;this.devicePixelRatio=l;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}Object.defineProperty(f.prototype,"spriteNames",{get:function(){var e=[],l;for(l in this._spritesData)e.push(l);e.sort();return e},enumerable:!0,configurable:!0});f.prototype.getSpriteInfo=function(e){return this._spritesData[e]};f.prototype.load=function(){var e=this;this.loadStatus="loading";
return this.baseURL?this._loadSprites().then(function(){e.loadStatus="loaded";return e}).catch(function(l){e.loadStatus="failed";return e}):d.resolve(this)};f.prototype._loadSprites=function(){var e=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var l=this.baseURL,n=this._isRetina?"@2x":"";return k(l+n+".json",{callbackParamName:"callback",responseType:"json"}).then(function(r){var t=Object.keys(r.data);if(!t||0===t.length||1===t.length&&"_ssl"===t[0])return d.resolve(null);e._spritesData=r.data;
var w=new g,v=new Image;v.crossOrigin="anonymous";v.onload=function(){v.onload=null;e.width=v.width;e.height=v.height;var y=document.createElement("canvas");y.width=v.width;y.height=v.height;y=y.getContext("2d");y.drawImage(v,0,0,v.width,v.height);y=y.getImageData(0,0,v.width,v.height);y=new Uint8Array(y.data);for(var x,B=0;B<y.length;B+=4)x=y[B+3]/255,y[B]*=x,y[B+1]*=x,y[B+2]*=x;e.image=y;w.resolve()};v.onerror=function(){e._spritesData=null;w.reject()};r=""+l+n+".png";h.id&&(t=h.id.findCredential(r))&&
t.token&&(r+="?token\x3d"+t.token);v.src=c.addProxy(r);return w})};return f}()})},"esri/layers/vectorTiles/views/vectorTiles/TileIndex":function(){define(["require","exports","../../core/promiseUtils","../../layers/support/TilemapCache","../2d/tiling/TileKey"],function(m,q,a,b,g){return function(){function h(k){if(k instanceof b)this._tilemapCache=k;else if(k&&"index"in k)this._tilemap=k.index;else throw Error("Invalid tilemap!");}h.prototype.dataKey=function(k){if(this._tilemapCache){var d=k.level,
c=k.row,f=k.col,e=new g(k);return this._tilemapCache.fetchAvailabilityUpsample(d,c,f,e).then(function(){return e}).catch(function(l){if(l&&"cancel"===l.dojoType)throw l;e.level=d;e.row=c;e.col=f;return e})}return this._getIndexedDataKey(k)};h.prototype.forEach=function(k,d,c,f,e){this._callback=e;this._maxLevel=d+k;this._forEach(this._tilemap,d,c,f)};h.prototype._forEach=function(k,d,c,f){0!==k&&(this._callback(d,c,f),d!==this._maxLevel&&"object"===typeof k&&(this._forEach(k[0],d+1,2*c,2*f),this._forEach(k[1],
d+1,2*c,2*f+1),this._forEach(k[2],d+1,2*c+1,2*f),this._forEach(k[3],d+1,2*c+1,2*f+1)))};h.prototype._getIndexedDataKey=function(k){var d=[k];if(0>k.level||0>k.row||0>k.col||0<k.row>>k.level||0<k.col>>k.level)return a.resolve(null);for(;0!==k.level;)k=new g(k.level-1,k.row>>1,k.col>>1,k.world),d.push(k);k=this._tilemap;var c=d.pop();if(1===k)return a.resolve(c);for(;d.length;){var f=d.pop();var e=(f.col&1)+((f.row&1)<<1);if(k)if(0===k[e]){c=null;break}else if(1===k[e]){c=f;break}else c=f,k=k[e]}return a.resolve(c)};
return h}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper dojo/has ../../../core/promiseUtils ./Container ../engine/webgl/Fader ./webgl/BitBlitRenderer ./webgl/enums ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(m,q,a,b,g,h,k,d,c,f,e,l,n,r,t,w,v,y,x,B,p){function z(D){return{state:D.state,pixelRatio:D.pixelRatio,stationary:D.stationary}}var u={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(D){function I(){var C=null!==D&&D.apply(this,arguments)||this;C._clipData=new Float32Array(8);C._upperLeft=r.create();C._upperRight=r.create();C._lowerLeft=r.create();C._lowerRight=r.create();C._mat2=n.create();C._clipRendererInitialized=!1;C._contextVersion=null;C._labelFader=new k.default(C);
return C}a(I,D);Object.defineProperty(I.prototype,"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});I.prototype.fadeInLabels=function(){this._labelFader.reset();this.requestRender()};I.prototype.createElement=function(){var C=document.createElement("canvas");C.setAttribute("class","esri-display-object");return C};I.prototype.setElement=function(C){this.element=C};I.prototype.useContextVersion=function(C){this._renderingContext||(this._contextVersion=C)};I.prototype.attach=
function(C){if(this.attached)return!0;this._resizeCanvas(C);var E=v.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new B(E);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=z(C);this._painter||(this._painter=new f.default,this._painter.initialize(this._renderingContext));return D.prototype.attach.call(this,C)};I.prototype.detach=function(C){D.prototype.detach.call(this,
C);this._boundFBO=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO1=null);this._labelsFBO2&&(this._labelsFBO2.dispose(),this._labelsFBO2=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._painter&&(this._painter.dispose(),this._painter=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=
null);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};I.prototype.renderChildren=function(C){var E=this.children;C.drawPhase=c.WGLDrawPhase.FILL|c.WGLDrawPhase.LINE|c.WGLDrawPhase.MARKER|c.WGLDrawPhase.TEXT;for(var G=E.length,H=0;H<G;H++){var L=E[H];L.attached&&this.renderChild(L,C)}if(b("esri-featurelayer-webgl-labeling")){var O=C.context,W=O.getBoundFramebufferObject();O.bindFramebuffer(this._labelsFBO2);H=C.stationary;O.setClearColor(0,
0,0,H?0:1);O.clear(O.gl.COLOR_BUFFER_BIT);if(H)for(C.drawPhase=c.WGLDrawPhase.LABEL_ALPHA,C.labelFBO=this._labelsFBO1,C.labelStep=this._labelFader.step(),H=0;H<G;H++)L=E[H],L.attached&&this.renderChild(L,C);else this._labelFader.reset();O.bindFramebuffer(W);C.labelFBO=this._labelsFBO2;C.drawPhase=c.WGLDrawPhase.LABEL;for(H=0;H<G;H++)L=E[H],L.attached&&this.renderChild(L,C);C=this._labelsFBO2;this._labelsFBO2=this._labelsFBO1;this._labelsFBO1=C}};I.prototype.beforeRenderChildren=function(C,E){C=E.context;
var G=E.state,H=E.pixelRatio;if(E=this._painter){C.enforceState();E.update(G,H);var L=G.width;E=G.height;var O=G.rotation;L=Math.round(L*H);E=Math.round(E*H);this._boundFBO=C.getBoundFramebufferObject();!b("esri-featurelayer-webgl-labeling")||this._labelsFBO1&&this._labelsFBO1.width===L&&this._labelsFBO1.height===E||(this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO2.dispose()),this._labelsFBO1=y.createWithAttachments(C,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,
wrapMode:33071,width:L,height:E},{colorTarget:0,depthStencilTarget:0}),C.bindFramebuffer(this._labelsFBO1),C.setDepthWriteEnabled(!0),C.setStencilWriteMask(255),C.setClearColor(0,0,0,0),C.setClearDepth(1),C.setClearStencil(0),C.clear(C.gl.COLOR_BUFFER_BIT|C.gl.DEPTH_BUFFER_BIT|C.gl.STENCIL_BUFFER_BIT),C.setDepthWriteEnabled(!1),C.bindFramebuffer(this._boundFBO),this._labelsFBO2=y.createWithAttachments(C,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,
width:L,height:E},{colorTarget:0,depthStencilTarget:0}));if(G.spatialReference&&(G.spatialReference._isWrappable?G.spatialReference._isWrappable():G.spatialReference.isWrappable)){var W=l.toRadian(O),Z=Math.abs(Math.cos(W)),ba=Math.abs(Math.sin(W)),P=Math.round(G.worldScreenWidth);if(Math.round(L*Z+E*ba)<=P)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===L&&this._clipFBO.height===E||(this._clipFBO=new y(C,{colorTarget:0,depthStencilTarget:3,width:L,height:E}));var ha=.5*L,X=.5*E;G=1/
L;var R=1/E;H*=.5*P;var V=.5*(L*ba+E*Z);L=this._upperLeft;Z=this._upperRight;ba=this._lowerLeft;P=this._lowerRight;r.set(L,-H,-V);r.set(Z,H,-V);r.set(ba,-H,V);r.set(P,H,V);n.identity(this._mat2);n.translate(this._mat2,this._mat2,[ha,X]);0!==O&&n.rotate(this._mat2,this._mat2,W);r.transformMat2d(L,L,this._mat2);r.transformMat2d(Z,Z,this._mat2);r.transformMat2d(ba,ba,this._mat2);r.transformMat2d(P,P,this._mat2);O=this._clipData;O.set([2*ba[0]*G-1,2*(E-ba[1])*R-1,2*P[0]*G-1,2*(E-P[1])*R-1,2*L[0]*G-1,
2*(E-L[1])*R-1,2*Z[0]*G-1,2*(E-Z[1])*R-1]);this._clipRendererInitialized||this._initializeClipRenderer(C);this._clipVBO.setData(O);this._boundFBO=C.getBoundFramebufferObject();C.bindFramebuffer(this._clipFBO);C.setDepthWriteEnabled(!0);C.setStencilWriteMask(255);C.setClearColor(0,0,0,0);C.setClearDepth(1);C.setClearStencil(0);C.clear(C.gl.COLOR_BUFFER_BIT|C.gl.DEPTH_BUFFER_BIT|C.gl.STENCIL_BUFFER_BIT);C.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1}};I.prototype.afterRenderChildren=
function(C,E){this._clipFrame&&this._clipRendererInitialized&&(C=this._renderingContext,C.bindFramebuffer(this._boundFBO),this._boundFBO=null,C.bindVAO(this._clipVAO),C.bindProgram(this._clipStencilProgram),C.setDepthWriteEnabled(!1),C.setDepthTestEnabled(!1),C.setStencilTestEnabled(!0),C.setBlendingEnabled(!1),C.setColorMask(!1,!1,!1,!1),C.setStencilOp(7680,7680,7681),C.setStencilWriteMask(255),C.setStencilFunction(519,1,255),C.drawElements(4,6,5123,0),C.bindVAO(),C.setColorMask(!0,!0,!0,!0),C.setBlendingEnabled(!0),
C.setStencilFunction(514,1,255),this._blitRenderer.render(C,this._clipFBO.colorTexture,9728,1),C.setStencilTestEnabled(!1))};I.prototype.doRender=function(C){var E=this.element.style;this.visible?(E.display="block",E.opacity=""+this.opacity,this._resizeCanvas(C),D.prototype.doRender.call(this,C),this._cachedRenderParams=z(C)):E.display="none"};I.prototype.takeScreenshot=function(C){void 0===C&&(C={});var E=C.pixelRatio||1;this._cachedRenderParams.pixelRatio=E;var G=Math.round(E*this._cachedRenderParams.state.width),
H=Math.round(E*this._cachedRenderParams.state.height),L=0,O=0,W=G,Z=H,ba=G,P=H;if(ba=C.area)L=Math.round(E*ba.x),O=Math.round(E*ba.y),W=Math.round(E*ba.width),Z=Math.round(E*ba.height);void 0!==C.width&&void 0!==C.height?(ba=C.width/C.height,Z*ba<W?(ba*=Z,L+=Math.floor((W-ba)/2),W=Math.floor(ba)):(ba=W/ba,O+=Math.floor((Z-ba)/2),Z=Math.floor(ba)),ba=C.width,P=C.height):(ba=W,P=Z);E=document.createElement("canvas");E.width=ba;E.height=P;var ha=E.getContext("2d"),X=new Uint8Array(W*Z*4),R=this._renderingContext,
V=y.create(R,{colorTarget:1,depthStencilTarget:3,width:G,height:H});R.bindFramebuffer(V);R.setViewport(0,0,G,H);var J=this._cachedRenderParams,S=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT);J.context=this._renderingContext;J.painter=this._painter;this.beforeRenderChildren(J,J);if(void 0!==C.rotation&&null!==
C.rotation){S=J.state;var aa=S.clone();aa.viewpoint.rotation=C.rotation;J.state=aa;this.renderChildren(J);J.state=S}else this.renderChildren(J);this.afterRenderChildren(J,J);V.readPixels(L,H-(O+Z),W,Z,6408,5121,X);R.bindFramebuffer();R=ha.getImageData(0,0,ba,P);if(0!==L||0!==O||W!==G||Z!==H||ba!==G||P!==H)t.resampleHermite(X,W,Z,R.data,ba,P,!0);else{O=Z-1;Z=0;V=4*W;for(aa=S=L=H=G=W=J=void 0;Z<O;){S=Z*V;aa=O*V;for(J=0;J<V;J+=4)W=X[S+J],G=X[S+J+1],H=X[S+J+2],L=X[S+J+3],X[S+J]=X[aa+J],X[S+J+1]=X[aa+
J+1],X[S+J+2]=X[aa+J+2],X[S+J+3]=X[aa+J+3],X[aa+J]=W,X[aa+J+1]=G,X[aa+J+2]=H,X[aa+J+3]=L;Z++;O--}W=R.data;G=X.length;for(O=0;O<G;O++)W[O]=X[O]}X=R.data;Z=X.length;for(O=0;O<Z;O+=4)L=X[O+3],0<L&&(H=L/255,W=Math.floor(X[O+0]/H),G=Math.floor(X[O+1]/H),H=Math.floor(X[O+2]/H),X[O+0]=255>=W?W:255,X[O+1]=255>=G?G:255,X[O+2]=255>=H?H:255);ha.putImageData(R,0,0);ha=u[C.format?C.format.toLowerCase():"png"];X=1;void 0!==C.quality&&(X=C.quality/100);C=E.toDataURL(ha,X);return g.resolve({dataURL:C,x:0,y:0,width:ba,
height:P})};I.prototype.prepareChildrenRenderParameters=function(C){if(!this.attached||!this._renderingContext)return null;C=z(C);var E=this._renderingContext,G=E.gl;E.setDepthWriteEnabled(!0);E.setStencilWriteMask(255);E.setClearColor(0,0,0,0);E.setClearDepth(1);E.setClearStencil(0);E.clear(G.COLOR_BUFFER_BIT|G.DEPTH_BUFFER_BIT|G.STENCIL_BUFFER_BIT);E.setViewport(0,0,this.element.width,this.element.height);E.setDepthWriteEnabled(!1);C.context=E;C.painter=this._painter;return C};I.prototype.attachChild=
function(C,E){return C.attach(E)};I.prototype.detachChild=function(C,E){return C.detach(E)};I.prototype.renderChild=function(C,E){return C.processRender(E)};I.prototype._resizeCanvas=function(C){var E=this.element,G=E.style,H=C.state,L=C.pixelRatio;C=Math.round(H.width*L);L=Math.round(H.height*L);if(E.width!==C||E.height!==L)E.width=C,E.height=L;G.width=H.width+"px";G.height=H.height+"px"};I.prototype._initializeClipRenderer=function(C){if(this._clipRendererInitialized)return!0;this._blitRenderer=
new d;var E={a_pos:0},G=new x(C,e.stencilVS,e.stencilFS,E);if(!G)return!1;var H=w.createVertex(C,35040,32),L=new Uint16Array([0,1,2,2,1,3]);L=w.createIndex(C,35044,L);C=new p(C,E,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:H},L);this._clipStencilProgram=G;this._clipVBO=H;this._clipVAO=C;return this._clipRendererInitialized=!0};return I}(h)})},"esri/layers/vectorTiles/views/2d/engine/webgl/Fader":function(){define(["require","exports"],function(m,
q){Object.defineProperty(q,"__esModule",{value:!0});m=function(){function a(b,g){void 0===g&&(g=250);this.duration=g;this._startTime=this._lastTime=0;this._parent=b}a.prototype.reset=function(){0===this._lastTime;this._startTime=performance.now()};a.prototype.step=function(){var b=performance.now();if(0===this._lastTime)return this._lastTime=b,this._parent.requestRender(),0;var g=b-this._lastTime;this._lastTime=b;b-this._startTime<2*this.duration&&this._parent.requestRender();return g/this.duration};
return a}();q.default=m})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),function(m,q,a,b,g,h){return function(){function k(){this._initialized=!1}k.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)};
k.prototype.render=function(d,c,f,e){d&&(this._initialized||this._initialize(d),d.setBlendFunctionSeparate(1,771,1,771),d.bindVAO(this._vertexArrayObject),d.bindProgram(this._program),c.setSamplingMode(f),d.bindTexture(c,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",e),d.drawArrays(5,0,4),d.bindVAO())};k.prototype._initialize=function(d){if(this._initialized)return!0;var c={a_pos:0,a_tex:1},f=new g(d,a.bitblitVS,a.bitblitFS,c);if(!f)return!1;var e=new Int8Array(16);
e[0]=-1;e[1]=-1;e[2]=0;e[3]=0;e[4]=1;e[5]=-1;e[6]=1;e[7]=0;e[8]=-1;e[9]=1;e[10]=0;e[11]=1;e[12]=1;e[13]=1;e[14]=1;e[15]=1;d=new h(d,c,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:b.createVertex(d,35044,e)});this._program=f;this._vertexArrayObject=d;return this._initialized=!0};return k}()})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!m)var m=
1E-6;if(!q)var q="undefined"!==typeof Float32Array?Float32Array:Array;if(!a)var a=Math.random;var b={GLMAT_EPSILON:m,GLMAT_ARRAY_TYPE:q,GLMAT_RANDOM:a,setMatrixArrayType:function(k){b.GLMAT_ARRAY_TYPE=k}},g=Math.PI/180,h=180/Math.PI;b.toRadian=function(k){return k*g};b.toDegree=function(k){return k*h};b.setMatrixArrayType(Array);return b})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(m){var q=m.GLMAT_ARRAY_TYPE;m={create:function(){var a=new q(6);
a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new q(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var g=b[0],h=b[1],k=b[2],d=b[3],c=b[4];b=b[5];var f=g*d-h*k;if(!f)return null;f=1/f;a[0]=d*f;a[1]=-h*f;a[2]=-k*f;a[3]=g*f;a[4]=(k*b-d*c)*f;a[5]=(h*c-g*b)*f;return a},
determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,g){var h=b[0],k=b[1],d=b[2],c=b[3],f=b[4];b=b[5];var e=g[0],l=g[1],n=g[2],r=g[3],t=g[4];g=g[5];a[0]=h*e+d*l;a[1]=k*e+c*l;a[2]=h*n+d*r;a[3]=k*n+c*r;a[4]=h*t+d*g+f;a[5]=k*t+c*g+b;return a}};m.mul=m.multiply;m.rotate=function(a,b,g){var h=b[0],k=b[1],d=b[2],c=b[3],f=b[4];b=b[5];var e=Math.sin(g);g=Math.cos(g);a[0]=h*g+d*e;a[1]=k*g+c*e;a[2]=h*-e+d*g;a[3]=k*-e+c*g;a[4]=f;a[5]=b;return a};m.scale=function(a,b,g){var h=b[1],k=b[2],
d=b[3],c=b[4],f=b[5],e=g[0];g=g[1];a[0]=b[0]*e;a[1]=h*e;a[2]=k*g;a[3]=d*g;a[4]=c;a[5]=f;return a};m.translate=function(a,b,g){var h=b[0],k=b[1],d=b[2],c=b[3],f=b[4];b=b[5];var e=g[0];g=g[1];a[0]=h;a[1]=k;a[2]=d;a[3]=c;a[4]=h*e+d*g+f;a[5]=k*e+c*g+b;return a};m.fromRotation=function(a,b){var g=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=g;a[2]=-g;a[3]=b;a[4]=0;a[5]=0;return a};m.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=0;return a};m.fromTranslation=function(a,b){a[0]=1;a[1]=
0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};m.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};m.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return m})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(m){var q=m.GLMAT_ARRAY_TYPE,a=m.GLMAT_RANDOM,b={create:function(){var g=new q(2);g[0]=0;g[1]=0;return g},clone:function(g){var h=
new q(2);h[0]=g[0];h[1]=g[1];return h},fromValues:function(g,h){var k=new q(2);k[0]=g;k[1]=h;return k},copy:function(g,h){g[0]=h[0];g[1]=h[1];return g},set:function(g,h,k){g[0]=h;g[1]=k;return g},add:function(g,h,k){g[0]=h[0]+k[0];g[1]=h[1]+k[1];return g},subtract:function(g,h,k){g[0]=h[0]-k[0];g[1]=h[1]-k[1];return g}};b.sub=b.subtract;b.multiply=function(g,h,k){g[0]=h[0]*k[0];g[1]=h[1]*k[1];return g};b.mul=b.multiply;b.divide=function(g,h,k){g[0]=h[0]/k[0];g[1]=h[1]/k[1];return g};b.div=b.divide;
b.min=function(g,h,k){g[0]=Math.min(h[0],k[0]);g[1]=Math.min(h[1],k[1]);return g};b.max=function(g,h,k){g[0]=Math.max(h[0],k[0]);g[1]=Math.max(h[1],k[1]);return g};b.scale=function(g,h,k){g[0]=h[0]*k;g[1]=h[1]*k;return g};b.scaleAndAdd=function(g,h,k,d){g[0]=h[0]+k[0]*d;g[1]=h[1]+k[1]*d;return g};b.distance=function(g,h){var k=h[0]-g[0];g=h[1]-g[1];return Math.sqrt(k*k+g*g)};b.dist=b.distance;b.squaredDistance=function(g,h){var k=h[0]-g[0];g=h[1]-g[1];return k*k+g*g};b.sqrDist=b.squaredDistance;b.length=
function(g){var h=g[0];g=g[1];return Math.sqrt(h*h+g*g)};b.len=b.length;b.squaredLength=function(g){var h=g[0];g=g[1];return h*h+g*g};b.sqrLen=b.squaredLength;b.negate=function(g,h){g[0]=-h[0];g[1]=-h[1];return g};b.inverse=function(g,h){g[0]=1/h[0];g[1]=1/h[1];return g};b.normalize=function(g,h){var k=h[0],d=h[1];k=k*k+d*d;0<k&&(k=1/Math.sqrt(k),g[0]=h[0]*k,g[1]=h[1]*k);return g};b.dot=function(g,h){return g[0]*h[0]+g[1]*h[1]};b.cross=function(g,h,k){h=h[0]*k[1]-h[1]*k[0];g[0]=g[1]=0;g[2]=h;return g};
b.lerp=function(g,h,k,d){var c=h[0];h=h[1];g[0]=c+d*(k[0]-c);g[1]=h+d*(k[1]-h);return g};b.random=function(g,h){h=h||1;var k=2*a()*Math.PI;g[0]=Math.cos(k)*h;g[1]=Math.sin(k)*h;return g};b.transformMat2=function(g,h,k){var d=h[0];h=h[1];g[0]=k[0]*d+k[2]*h;g[1]=k[1]*d+k[3]*h;return g};b.transformMat2d=function(g,h,k){var d=h[0];h=h[1];g[0]=k[0]*d+k[2]*h+k[4];g[1]=k[1]*d+k[3]*h+k[5];return g};b.transformMat3=function(g,h,k){var d=h[0];h=h[1];g[0]=k[0]*d+k[3]*h+k[6];g[1]=k[1]*d+k[4]*h+k[7];return g};
b.transformMat4=function(g,h,k){var d=h[0];h=h[1];g[0]=k[0]*d+k[4]*h+k[12];g[1]=k[1]*d+k[5]*h+k[13];return g};b.forEach=function(){var g=b.create();return function(h,k,d,c,f,e){k||(k=2);d||(d=0);for(c=c?Math.min(c*k+d,h.length):h.length;d<c;d+=k)g[0]=h[d],g[1]=h[d+1],f(g,g,e),h[d]=g[0],h[d+1]=g[1];return h}}();b.str=function(g){return"vec2("+g[0]+", "+g[1]+")"};return b})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper"],
function(m,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.adjustScreenshotSettings=function(b,g){b=a({format:"png",quality:100},b);if(b.includePadding){var h=g.width;var k=g.height}else h=g.width-g.padding.left-g.padding.right,k=g.height-g.padding.top-g.padding.bottom;var d=h/k;void 0!==b.width&&void 0===b.height?b.height=b.width/d:void 0!==b.height&&void 0===b.width&&(b.width=d*b.height);void 0!==b.height&&(b.height=Math.floor(b.height));void 0!==b.width&&(b.width=Math.floor(b.width));b.area||
b.includePadding||(b.area={x:g.padding.left,y:g.padding.top,width:h,height:k});return b};q.resampleHermite=function(b,g,h,k,d,c,f){void 0===f&&(f=!0);var e=g/d;h/=c;for(var l=Math.ceil(e/2),n=Math.ceil(h/2),r=0;r<c;r++)for(var t=0;t<d;t++){for(var w=4*(t+(f?c-r-1:r)*d),v=0,y=0,x=0,B=0,p=0,z=0,u=0,D=(r+.5)*h,I=Math.floor(r*h);I<(r+1)*h;I++){var C=Math.abs(D-(I+.5))/n,E=(t+.5)*e;C*=C;for(var G=Math.floor(t*e);G<(t+1)*e;G++){var H=Math.abs(E-(G+.5))/l;v=Math.sqrt(C+H*H);-1<=v&&1>=v&&(v=2*v*v*v-3*v*v+
1,0<v&&(H=4*(G+I*g),u+=v*b[H+3],x+=v,255>b[H+3]&&(v=v*b[H+3]/250),B+=v*b[H],p+=v*b[H+1],z+=v*b[H+2],y+=v))}}k[w]=B/y;k[w+1]=p/y;k[w+2]=z/y;k[w+3]=u/x}}})},"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define("require exports dojo/has ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(m,q,a,b,g,h,k){return function(){function d(c,f){this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState=
{srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=
[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=h.default(c)?"webgl2":"webgl";this.gl=c;c instanceof WebGLRenderingContext&&
this.gl.getExtension("OES_element_index_uint");this._capabilities=k.loadCapabilities(c,f);c=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:c[0],y:c[1],width:c[2],height:c[3]};c=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:c?this.gl.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY):
void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};a("esri-webgl-debug")&&(this.instanceCounter=new g);this.enforceState()}Object.defineProperty(d.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});d.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);
this._textureUnitMap={};a("esri-webgl-debug")&&this.instanceCounter.printResourceCount();this.gl=null};d.prototype.setBlendingEnabled=function(c){this._blendEnabled!==c&&(!0===c?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=c)};d.prototype.setBlendColor=function(c,f,e,l){if(c!==this._blendColorState.r||f!==this._blendColorState.g||e!==this._blendColorState.b||l!==this._blendColorState.a)this.gl.blendColor(c,f,e,l),this._blendColorState.r=c,this._blendColorState.g=
f,this._blendColorState.b=e,this._blendColorState.a=l};d.prototype.setBlendFunction=function(c,f){if(c!==this._blendFunctionState.srcRGB||f!==this._blendFunctionState.dstRGB)this.gl.blendFunc(c,f),this._blendFunctionState.srcRGB=c,this._blendFunctionState.srcAlpha=c,this._blendFunctionState.dstRGB=f,this._blendFunctionState.dstAlpha=f};d.prototype.setBlendFunctionSeparate=function(c,f,e,l){if(this._blendFunctionState.srcRGB!==c||this._blendFunctionState.srcAlpha!==e||this._blendFunctionState.dstRGB!==
f||this._blendFunctionState.dstAlpha!==l)this.gl.blendFuncSeparate(c,f,e,l),this._blendFunctionState.srcRGB=c,this._blendFunctionState.srcAlpha=e,this._blendFunctionState.dstRGB=f,this._blendFunctionState.dstAlpha=l};d.prototype.setBlendEquation=function(c){this._blendEquationState.mode!==c&&(this.gl.blendEquation(c),this._blendEquationState.mode=c,this._blendEquationState.modeAlpha=c)};d.prototype.setBlendEquationSeparate=function(c,f){if(this._blendEquationState.mode!==c||this._blendEquationState.modeAlpha!==
f)this.gl.blendEquationSeparate(c,f),this._blendEquationState.mode=c,this._blendEquationState.modeAlpha=f};d.prototype.setColorMask=function(c,f,e,l){if(this._colorMaskState.r!==c||this._colorMaskState.g!==f||this._colorMaskState.b!==e||this._colorMaskState.a!==l)this.gl.colorMask(c,f,e,l),this._colorMaskState.r=c,this._colorMaskState.g=f,this._colorMaskState.b=e,this._colorMaskState.a=l};d.prototype.setClearColor=function(c,f,e,l){if(this._clearColor.r!==c||this._clearColor.g!==f||this._clearColor.b!==
e||this._clearColor.a!==l)this.gl.clearColor(c,f,e,l),this._clearColor.r=c,this._clearColor.g=f,this._clearColor.b=e,this._clearColor.a=l};d.prototype.setFaceCullingEnabled=function(c){this._polygonCullingEnabled!==c&&(!0===c?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=c)};d.prototype.setPolygonOffsetFillEnabled=function(c){this._polygonOffsetFillEnabled!==c&&(!0===c?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),
this._polygonOffsetFillEnabled=c)};d.prototype.setPolygonOffset=function(c,f){if(this._polygonOffset[0]!==c||this._polygonOffset[1]!==f)this._polygonOffset[0]=c,this._polygonOffset[1]=f,this.gl.polygonOffset(c,f)};d.prototype.setCullFace=function(c){this._cullFace!==c&&(this.gl.cullFace(c),this._cullFace=c)};d.prototype.setFrontFace=function(c){this._frontFace!==c&&(this.gl.frontFace(c),this._frontFace=c)};d.prototype.setScissorTestEnabled=function(c){this._scissorTestEnabled!==c&&(!0===c?this.gl.enable(this.gl.SCISSOR_TEST):
this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=c)};d.prototype.setScissorRect=function(c,f,e,l){if(this._scissorRect.x!==c||this._scissorRect.y!==f||this._scissorRect.width!==e||this._scissorRect.height!==l)this.gl.scissor(c,f,e,l),this._scissorRect.x=c,this._scissorRect.y=f,this._scissorRect.width=e,this._scissorRect.height=l};d.prototype.setDepthTestEnabled=function(c){this._depthTestEnabled!==c&&(!0===c?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=
c)};d.prototype.setClearDepth=function(c){this._clearDepth!==c&&(this.gl.clearDepth(c),this._clearDepth=c)};d.prototype.setDepthFunction=function(c){this._depthFunction!==c&&(this.gl.depthFunc(c),this._depthFunction=c)};d.prototype.setDepthWriteEnabled=function(c){this._depthWriteEnabled!==c&&(this.gl.depthMask(c),this._depthWriteEnabled=c)};d.prototype.setDepthRange=function(c,f){if(this._depthRange.zNear!==c||this._depthRange.zFar!==f)this.gl.depthRange(c,f),this._depthRange.zNear=c,this._depthRange.zFar=
f};d.prototype.setStencilTestEnabled=function(c){this._stencilTestEnabled!==c&&(!0===c?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=c)};d.prototype.setClearStencil=function(c){c!==this._clearStencil&&(this.gl.clearStencil(c),this._clearStencil=c)};d.prototype.setStencilFunction=function(c,f,e){if(this._stencilFunction.func!==c||this._stencilFunction.ref!==f||this._stencilFunction.mask!==e)this.gl.stencilFunc(c,f,e),this._stencilFunction.face=
1032,this._stencilFunction.func=c,this._stencilFunction.ref=f,this._stencilFunction.mask=e};d.prototype.setStencilFunctionSeparate=function(c,f,e,l){if(this._stencilFunction.face!==c||this._stencilFunction.func!==f||this._stencilFunction.ref!==e||this._stencilFunction.mask!==l)this.gl.stencilFuncSeparate(c,f,e,l),this._stencilFunction.face=c,this._stencilFunction.func=f,this._stencilFunction.ref=e,this._stencilFunction.mask=l};d.prototype.setStencilWriteMask=function(c){this._stencilWriteMask!==c&&
(this.gl.stencilMask(c),this._stencilWriteMask=c)};d.prototype.setStencilOp=function(c,f,e){if(this._stencilOperation.fail!==c||this._stencilOperation.zFail!==f||this._stencilOperation.zPass!==e)this.gl.stencilOp(c,f,e),this._stencilOperation.face=1032,this._stencilOperation.fail=c,this._stencilOperation.zFail=f,this._stencilOperation.zPass=e};d.prototype.setStencilOpSeparate=function(c,f,e,l){if(this._stencilOperation.face!==c||this._stencilOperation.fail!==f||this._stencilOperation.zFail!==e||this._stencilOperation.zPass!==
l)this.gl.stencilOpSeparate(c,f,e,l),this._stencilOperation.face=c,this._stencilOperation.face=c,this._stencilOperation.fail=f,this._stencilOperation.zFail=e,this._stencilOperation.zPass=l};d.prototype.setLineWidth=function(c){var f=this._lineWidth;this._lineWidth!==c&&(this.gl.lineWidth(c),this._lineWidth=c);return f};d.prototype.setActiveTexture=function(c){var f=this._activeTextureUnit;0<=c&&c!==this._activeTextureUnit&&(this.gl.activeTexture(b.BASE_TEXTURE_UNIT+c),this._activeTextureUnit=c);return f};
d.prototype.clear=function(c){c&&this.gl.clear(c)};d.prototype.drawArrays=function(c,f,e){this.gl.drawArrays(c,f,e)};d.prototype.drawElements=function(c,f,e,l){5123===e?this.gl.drawElements(c,f,e,l):5125===e&&this.gl.drawElements(c,f,e,l)};Object.defineProperty(d.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});d.prototype.setViewport=function(c,f,e,l){var n=this._viewport;if(n.x!==c||n.y!==f||n.width!==e||n.height!==l)n.x=c,n.y=f,n.width=e,n.height=
l,this.gl.viewport(c,f,e,l)};d.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};d.prototype.bindProgram=function(c){c?this._activeShaderProgram!==c&&(c.initialize(),this.gl.useProgram(c.glName),this._activeShaderProgram=c):(this.gl.useProgram(null),this._activeShaderProgram=null)};d.prototype.bindTexture=function(c,f){void 0===f&&(f=0);-1===d._MAX_TEXTURE_IMAGE_UNITS&&(d._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));
var e=this._textureUnitMap[f];this.setActiveTexture(f);null==c||null==c.glName?(null!=e&&(this.gl.bindTexture(e.descriptor.target,null),e.setBoundToUnit(f,!1)),this._textureUnitMap[f]=null):e&&e.id===c.id?c.applyChanges():(this.gl.bindTexture(c.descriptor.target,c.glName),c.setBoundToUnit(f,!0),c.applyChanges(),this._textureUnitMap[f]=c)};d.prototype.bindFramebuffer=function(c){c?this._activeFramebuffer!==c&&(c.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,c.glName),this._activeFramebuffer=
c):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};d.prototype.bindBuffer=function(c){c&&(34962===c.bufferType?this._activeVertexBuffer=d._bindBuffer(this.gl,c,c.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=d._bindBuffer(this.gl,c,c.bufferType,this._activeIndexBuffer))};d.prototype.bindRenderbuffer=function(c){var f=this.gl;c||(f.bindRenderbuffer(f.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==c&&(f.bindRenderbuffer(f.RENDERBUFFER,
c.glName),this._activeRenderbuffer=c)};d.prototype.unbindBuffer=function(c){34962===c?this._activeVertexBuffer=d._bindBuffer(this.gl,null,c,this._activeVertexBuffer):this._activeIndexBuffer=d._bindBuffer(this.gl,null,c,this._activeIndexBuffer)};d.prototype.bindVAO=function(c){c?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===c.id||(c.bind(),this._activeVertexArrayObject=c):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};
d.prototype.getBoundTexture=function(c){return this._textureUnitMap[c]};d.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};d.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};d.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var c=0;c<this.parameters.maxTextureImageUnits;c++)this.bindTexture(null,c);this.setBlendingEnabled(!1);this.setBlendFunction(1,
0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,
0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};d.prototype.enforceState=function(){var c=this.gl,f=this._capabilities.vao;f&&f.bindVertexArray(null);for(var e=0;e<this.parameters.maxVertexAttributes;e++)c.disableVertexAttribArray(e);this._activeVertexBuffer?c.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):
c.bindBuffer(34962,null);this._activeIndexBuffer?c.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):c.bindBuffer(34963,null);if(f&&this._activeVertexArrayObject){if(f=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(f)}c.bindFramebuffer(c.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);c.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);c.blendColor(this._blendColorState.r,
this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);c.bindRenderbuffer(c.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?c.enable(this.gl.BLEND):c.disable(this.gl.BLEND);c.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);c.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);c.clearColor(this._clearColor.r,
this._clearColor.g,this._clearColor.b,this._clearColor.a);c.clearDepth(this._clearDepth);c.clearStencil(this._clearStencil);c.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);c.cullFace(this._cullFace);c.depthFunc(this._depthFunction);c.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST);c.depthMask(this._depthWriteEnabled);c.frontFace(this._frontFace);c.lineWidth(this._lineWidth);
!0===this._polygonCullingEnabled?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE);c.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?c.enable(c.POLYGON_OFFSET_FILL):c.disable(c.POLYGON_OFFSET_FILL);c.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?c.enable(c.SCISSOR_TEST):c.disable(c.SCISSOR_TEST);c.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);
c.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST);c.stencilMask(this._stencilWriteMask);for(f=0;f<this.parameters.maxTextureImageUnits;f++)c.activeTexture(b.BASE_TEXTURE_UNIT+f),c.bindTexture(3553,null),(e=this._textureUnitMap[f])&&c.bindTexture(e.descriptor.target,e.glName);c.activeTexture(b.BASE_TEXTURE_UNIT+this._activeTextureUnit);
c.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};d._bindBuffer=function(c,f,e,l){if(!f)return c.bindBuffer(e,null),null;if(l===f)return l;c.bindBuffer(e,f.glName);return f};d._MAX_TEXTURE_IMAGE_UNITS=-1;return d}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/InstanceCounter":function(){define(["require",
"exports"],function(m,q){return function(){function a(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}a.prototype.incrementCount=function(b){switch(b){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};
a.prototype.decrementCount=function(b){switch(b){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};a.prototype.printResourceCount=function(){};return a}()})},"esri/layers/vectorTiles/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],
function(m,q){Object.defineProperty(q,"__esModule",{value:!0});q.default=function(a){return window.WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext}})},"esri/layers/vectorTiles/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),function(m,q,a,b,g,h){function k(d,c,f,e,l){if(e&&g.default(d))return!0;if(c[f])return!1;for(c=0;c<l.length;c++)if(d.getExtension(l[c]))return!0;return!1}Object.defineProperty(q,
"__esModule",{value:!0});q.loadCapabilities=function(d,c){c=c&&c.disabledExtensions||{};var f=b.load(d,c),e=h.load(d,c);var l=c.compressedTextureS3TC?null:(l=d.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:l.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:l.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:l.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:l.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var n=c.textureFilterAnisotropic?null:(n=d.getExtension("EXT_texture_filter_anisotropic")||
d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:n.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:n.TEXTURE_MAX_ANISOTROPY_EXT}:null;var r=a.load(d,c);if(g.default(d))var t=c.colorBufferFloat||!d.getExtension("EXT_color_buffer_float")?null:{R16F:d.R16F,RG16F:d.RG16F,RGBA16F:d.RGBA16F,R32F:d.R32F,RG32F:d.RG32F,RGBA32F:d.RGBA32F,R11F_G11F_B10F:d.R11F_G11F_B10F};else if(d instanceof WebGLRenderingContext){t=
!c.colorBufferFloat&&d.getExtension("EXT_color_buffer_half_float");var w=!c.colorBufferFloat&&d.getExtension("WEBGL_color_buffer_float");t=t||w?{RGBA16F:t?t.RGBA16F_EXT:void 0,RGBA32F:w?w.RGBA32F_EXT:void 0}:null}else t=void 0;w=g.default(d)?{MIN:d.MIN,MAX:d.MAX}:c.blendMinMax?null:(w=d.getExtension("EXT_blend_minmax"))?{MIN:w.MIN_EXT,MAX:w.MAX_EXT}:null;return{instancing:f,vao:e,compressedTextureS3TC:l,textureFilterAnisotropic:n,disjointTimerQuery:r,colorBufferFloat:t,blendMinMax:w,depthTexture:k(d,
c,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:k(d,c,"standardDerivatives",!0,["OES_standard_derivatives"]),shaderTextureLOD:k(d,c,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:k(d,c,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:k(d,c,"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/layers/vectorTiles/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],
function(m,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.load=function(b,g){if(g.disjointTimerQuery)return null;var h=b.getExtension("EXT_disjoint_timer_query")||b.getExtension("EXT_disjoint_timer_query_webgl2");return h?a.default(b)?{createQuery:function(){return b.createQuery()},resultAvailable:function(k){return b.getQueryParameter(k,b.QUERY_RESULT_AVAILABLE)},getResult:function(k){return b.getQueryParameter(k,b.QUERY_RESULT)},disjoint:function(){return b.getParameter(h.GPU_DISJOINT_EXT)},
beginTimeElapsed:function(k){return b.beginQuery(h.TIME_ELAPSED_EXT,k)},endTimeElapsed:function(){return b.endQuery(h.TIME_ELAPSED_EXT)},createTimestamp:function(k){return h.queryCounterEXT(k,h.TIMESTAMP_EXT)},timestampBits:function(){return b.getQuery(h.TIMESTAMP_EXT,h.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return h.createQueryEXT()},resultAvailable:function(k){return h.getQueryObjectEXT(k,h.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(k){return h.getQueryObjectEXT(k,h.QUERY_RESULT_EXT)},
disjoint:function(){return b.getParameter(h.GPU_DISJOINT_EXT)},beginTimeElapsed:function(k){return h.beginQueryEXT(h.TIME_ELAPSED_EXT,k)},endTimeElapsed:function(){return h.endQueryEXT(h.TIME_ELAPSED_EXT)},createTimestamp:function(k){return h.queryCounterEXT(k,h.TIMESTAMP_EXT)},timestampBits:function(){return h.getQueryEXT(h.TIMESTAMP_EXT,h.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(m,
q,a){Object.defineProperty(q,"__esModule",{value:!0});q.load=function(b,g){return a.default(b)?{drawArraysInstanced:b.drawArraysInstanced.bind(b),drawElementsInstanced:b.drawElementsInstanced.bind(b),vertexAttribDivisor:b.vertexAttribDivisor.bind(b)}:g.angleInstancedArrays?null:(b=b.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:b.drawArraysInstancedANGLE.bind(b),drawElementsInstanced:b.drawElementsInstancedANGLE.bind(b),vertexAttribDivisor:b.vertexAttribDivisorANGLE.bind(b)}:null}})},
"esri/layers/vectorTiles/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(m,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.load=function(b,g){return a.default(b)?{createVertexArray:b.createVertexArray.bind(b),deleteVertexArray:b.deleteVertexArray.bind(b),bindVertexArray:b.bindVertexArray.bind(b)}:g.vao?null:(b=b.getExtension("OES_vertex_array_object")||b.getExtension("MOZ_OES_vertex_array_object")||b.getExtension("WEBKIT_OES_vertex_array_object"))?
{createVertexArray:b.createVertexArrayOES.bind(b),deleteVertexArray:b.deleteVertexArrayOES.bind(b),bindVertexArray:b.bindVertexArrayOES.bind(b)}:null}})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(m,q,a,b,g,h,k){var d=new h("0/0/0/0"),c=function(){function e(l,n,r,t,w,v,y,x){this.x=l;this.ymin=n;this.ymax=r;this.invM=t;this.leftAdjust=w;
this.rightAdjust=v;this.leftBound=y;this.rightBound=x}e.create=function(l,n){if(l[1]>n[1]){var r=[n,l];l=r[0];n=r[1]}r=l[0];l=l[1];var t=n[0];n=n[1];var w=t-r,v=n-l;v=0!==v?w/v:0;var y=(Math.ceil(l)-l)*v,x=(Math.floor(l)-l)*v;return new e(r,Math.floor(l),Math.ceil(n),v,0>w?y:x,0>w?x:y,0>w?t:r,0>w?r:t)};e.prototype.incrRow=function(){this.x+=this.invM};e.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};e.prototype.getRightCol=function(){return Math.min(this.x+
this.rightAdjust,this.rightBound)};return e}(),f=[[0,0],[0,0],[0,0],[0,0]];return function(){function e(l,n){var r=this;this.tileInfo=l;this.fullExtent=n;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var t=l.lods.slice();t.sort(function(v,y){return y.scale-v.scale});var w=this._lodInfos=t.map(function(v){return b.create(l,v,n)});t.forEach(function(v,y){r._infoByLevel[v.level]=w[y];r._infoByScale[v.scale]=w[y];r.scales[y]=v.scale},this);this._wrap=l.isWrappable}e.prototype.getLODInfoAt=
function(l){return this._infoByLevel[l.level]};e.prototype.getTileBounds=function(l,n,r){void 0===r&&(r=!1);d.set(n);return(n=this._infoByLevel[d.level])?n.getTileBounds(l,d,r):l};e.prototype.getTileCoords=function(l,n,r){void 0===r&&(r=!1);d.set(n);return(n=this._infoByLevel[d.level])?n.getTileCoords(l,d,r):l};e.prototype.getTileCoverage=function(l,n,r){void 0===n&&(n=192);void 0===r&&(r="closest");r="closest"===r?this.getClosestInfoForScale(l.scale):this.getSmallestInfoForScale(l.scale);var t=g.pool.acquire(r),
w=this._wrap;var v=Infinity;var y=-Infinity,x=t.spans;f[0][0]=f[0][1]=f[1][1]=f[3][0]=-n;f[1][0]=f[2][0]=l.size[0]+n;f[2][1]=f[3][1]=l.size[1]+n;for(n=0;n<f.length;n++){var B=f[n];l.toMap(B,B);B[0]=r.getColumnForX(B[0]);B[1]=r.getRowForY(B[1])}l=[];B=3;for(n=0;4>n;n++){if(f[n][1]!==f[B][1]){var p=c.create(f[n],f[B]);v=Math.min(p.ymin,v);y=Math.max(p.ymax,y);void 0===l[p.ymin]&&(l[p.ymin]=[]);l[p.ymin].push(p)}B=n}if(null==v||null==y||100<y-v)return null;for(B=[];v<y;){null!=l[v]&&(B=B.concat(l[v]));
var z=Infinity;var u=-Infinity;for(n=B.length-1;0<=n;n--)p=B[n],z=Math.min(z,p.getLeftCol()),u=Math.max(u,p.getRightCol());z=Math.floor(z);u=Math.floor(u);if(v>=r.first[1]&&v<=r.last[1])if(w)if(r.size[0]<r.worldSize[0])for(p=Math.floor(u/r.worldSize[0]),n=Math.floor(z/r.worldSize[0]);n<=p;n++)x.push(new k(v,Math.max(r.getFirstColumnForWorld(n),z),Math.min(r.getLastColumnForWorld(n),u)));else x.push(new k(v,z,u));else z>r.last[0]||u<r.first[0]||(z=Math.max(z,r.first[0]),u=Math.min(u,r.last[0]),x.push(new k(v,
z,u)));v+=1;for(n=B.length-1;0<=n;n--)p=B[n],p.ymax>=v?p.incrRow():B.splice(n,1)}return t};e.prototype.getTileIdAtParent=function(l,n){n=h.pool.acquire(n);var r=this._infoByLevel[n.level];if(l.resolution<r.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+l.resolution+" is not a parent resolution of "+r.resolution);return l.resolution===r.resolution?n.id:h.getId(l.level,Math.floor(n.row*r.resolution/l.resolution+.01),Math.floor(n.col*r.resolution/l.resolution+.01),
n.world)};e.prototype.getTileParentId=function(l){l=h.pool.acquire(l);var n=this._lodInfos.indexOf(this._infoByLevel[l.level])-1;if(0>n)return h.pool.release(l),null;n=this.getTileIdAtParent(this._lodInfos[n],l);h.pool.release(l);return n};e.prototype.getTileResolution=function(l){return(l=this._infoByLevel[l.level])?l.resolution:-1};e.prototype.getTileScale=function(l){return(l=this._infoByLevel[l.level])?l.scale:-1};e.prototype.intersects=function(l,n){var r=h.pool.acquire(n);n=this._infoByLevel[r.level];
var t=l.lodInfo;if(t.resolution>n.resolution){var w=h.pool.acquire(this.getTileIdAtParent(t,r)),v=t.denormalizeCol(w.col,w.world);n=l.spans.some(function(I){return I.row===w.row&&I.colFrom<=v&&I.colTo>=v});h.pool.release(r);h.pool.release(w);return n}if(t.resolution<n.resolution){var y=l.spans.reduce(function(I,C){I[0]=Math.min(I[0],C.row);I[1]=Math.max(I[1],C.row);I[2]=Math.min(I[2],C.colFrom);I[3]=Math.max(I[3],C.colTo);return I},[Infinity,-Infinity,Infinity,-Infinity]);l=y[0];var x=y[1],B=y[2];
y=y[3];var p=n.denormalizeCol(r.col,r.world),z=t.getColumnForX(n.getXForColumn(p)),u=t.getRowForY(n.getYForRow(r.row));p=t.getColumnForX(n.getXForColumn(p+1))-1;n=t.getRowForY(n.getYForRow(r.row+1))-1;h.pool.release(r);return!(z>y||p<B||u>x||n<l)}var D=t.denormalizeCol(r.col,r.world);n=l.spans.some(function(I){return I.row===r.row&&I.colFrom<=D&&I.colTo>=D});h.pool.release(r);return n};e.prototype.normalizeBounds=function(l,n,r){l[0]=n[0];l[1]=n[1];l[2]=n[2];l[3]=n[3];this._wrap&&(n=a.getInfo(this.tileInfo.spatialReference),
r=-r*(n.valid[1]-n.valid[0]),l[0]+=r,l[2]+=r);return l};e.prototype.getSmallestInfoForScale=function(l){var n=this.scales;if(this._infoByScale[l])return this._infoByScale[l];if(l>n[0])return this._infoByScale[n[0]];for(var r=1;r<n.length-1;r++)if(l>n[r]+1E-6)return this._infoByScale[n[r-1]];return this._infoByScale[n[n.length-1]]};e.prototype.getClosestInfoForScale=function(l){var n=this.scales;this._infoByScale[l]||(l=n.reduce(function(r,t,w,v){return Math.abs(t-l)<Math.abs(r-l)?t:r},n[0]));return this._infoByScale[l]};
return e}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(m,q,a,b){function g(k,d,c){k[0]=d;k[1]=c;return k}var h=new b("0/0/0/0");return function(){function k(d,c,f,e,l,n,r,t,w,v,y,x){this.level=d;this.resolution=c;this.scale=f;this.origin=e;this.first=l;this.last=n;this.size=r;this.norm=t;this.worldStart=w;this.worldEnd=v;this.worldSize=y;this.wrap=x}k.create=function(d,c,f){var e=
a.getInfo(d.spatialReference),l=[d.origin.x,d.origin.y],n=[d.size[0]*c.resolution,d.size[1]*c.resolution],r=[-Infinity,-Infinity],t=[Infinity,Infinity],w=[Infinity,Infinity];f&&(g(r,Math.max(0,Math.floor((f.xmin-l[0])/n[0])),Math.max(0,Math.floor((l[1]-f.ymax)/n[1]))),g(t,Math.max(0,Math.floor((f.xmax-l[0])/n[0])),Math.max(0,Math.floor((l[1]-f.ymin)/n[1]))),g(w,t[0]-r[0]+1,t[1]-r[1]+1));if(d.isWrappable){d=[Math.ceil(Math.round(2*e.origin[1]/c.resolution)/d.size[0]),w[1]];e=[Math.floor((e.origin[0]-
l[0])/n[0]),r[1]];f=[d[0]+e[0]-1,t[1]];var v=!0}else e=r,f=t,d=w,v=!1;return new k(c.level,c.resolution,c.scale,l,r,t,w,n,e,f,d,v)};k.prototype.normalizeCol=function(d){if(!this.wrap)return d;var c=this.worldSize[0];return 0>d?c-1-Math.abs((d+1)%c):d%c};k.prototype.denormalizeCol=function(d,c){return this.wrap?this.worldSize[0]*c+d:d};k.prototype.getWorldForColumn=function(d){return this.wrap?Math.floor(d/this.worldSize[0]):0};k.prototype.getFirstColumnForWorld=function(d){return d*this.worldSize[0]+
this.first[0]};k.prototype.getLastColumnForWorld=function(d){return d*this.worldSize[0]+this.first[0]+this.size[0]-1};k.prototype.getColumnForX=function(d){return(d-this.origin[0])/this.norm[0]};k.prototype.getXForColumn=function(d){return this.origin[0]+d*this.norm[0]};k.prototype.getRowForY=function(d){return(this.origin[1]-d)/this.norm[1]};k.prototype.getYForRow=function(d){return this.origin[1]-d*this.norm[1]};k.prototype.getTileBounds=function(d,c,f){void 0===f&&(f=!1);h.set(c);var e=f?h.col:
this.denormalizeCol(h.col,h.world),l=h.row;c=this.getXForColumn(e);f=this.getYForRow(l+1);e=this.getXForColumn(e+1);l=this.getYForRow(l);d[0]=c;d[1]=f;d[2]=e;d[3]=l;return d};k.prototype.getTileCoords=function(d,c,f){void 0===f&&(f=!1);h.set(c);c=f?h.col:this.denormalizeCol(h.col,h.world);Array.isArray(d)?g(d,this.getXForColumn(c),this.getYForRow(h.row)):(d.x=this.getXForColumn(c),d.y=this.getYForRow(h.row));return d};return k}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require",
"exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(m,q,a,b,g){return function(){function h(k){this.lodInfo=k;this.spans=a.acquire()}h.prototype.release=function(){for(var k=0,d=this.spans;k<d.length;k++)g.pool.release(d[k]);a.release(this.spans)};h.prototype.forEach=function(k,d){var c=this.spans,f=this.lodInfo,e=f.level;if(0!==c.length)for(var l=0;l<c.length;l++){var n=c[l],r=n.row,t=n.colTo;for(n=n.colFrom;n<=t;n++)k.call(d,e,r,f.normalizeCol(n),f.getWorldForColumn(n))}};
h.pool=new b(h,!0);return h}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(m,q,a){return function(){function b(g,h,k){this.row=g;this.colFrom=h;this.colTo=k}b.pool=new a(b,!0);return b}()})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./enums","./TileKey"],function(m,q,a,b,g){var h=new g(0,0,0,0),k=new Map,d=[],c=[];return function(){function f(e){this._previousResolution=
Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=e.acquireTile;this.releaseTile=e.releaseTile;this.tileInfoView=e.tileInfoView;e.cachePolicy&&(this.cachePolicy=e.cachePolicy);e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy);null!=e.buffer&&(this.buffer=e.buffer)}f.prototype.destroy=function(){this.clear()};f.prototype.update=function(e){var l=this,n=this.tileIndex,r=this.tileInfoView.getTileCoverage(e.state,
this.buffer,this.coveragePolicy);if(r){var t=r.spans,w=r.lodInfo,v=w.level,y=e.state.resolution,x=!e.stationary&&y>this._previousResolution;this._previousResolution=y;n.forEach(function(E){return E.visible=!0});this.tiles.length=0;k.clear();var B=0,p=0;if(0<t.length)for(var z=0;z<t.length;z++){e=t[z];for(var u=e.row,D=e.colTo,I=e.colFrom;I<=D;I++)B++,e=h.set(v,u,w.normalizeCol(I),w.getWorldForColumn(I)).id,n.has(e)?(y=n.get(e),y.status!==b.TileStatus.INITIALIZED&&p++,y.attached?k.set(e,y):y.attached||
x||this._addParentTile(e,k)):(y=this.acquireTile(h),this.tileIndex.set(e,y),x||this._addParentTile(e,k))}var C=p===B;c.length=0;d.length=0;n.forEach(function(E,G){h.set(G);if(!k.has(G)){var H=l.tileInfoView.intersects(r,h);!H||!x&&C?"purge"===l.cachePolicy&&E.status!==b.TileStatus.MODIFIED&&E.status!==b.TileStatus.READY?d.push(G):(h.level>v||!H)&&d.push(G):E.attached?c.push(G):h.level>v&&d.push(G)}});for(t=0;t<c.length;t++)e=c[t],(y=n.get(e))&&y.attached&&k.set(e,y);for(t=0;t<d.length;t++)e=d[t],
y=n.get(e),this.releaseTile(y),n["delete"](e);k.forEach(function(E){return l.tiles.push(E)});n.forEach(function(E){k.has(E.key.id)||(E.visible=!1)});c.length=0;d.length=0;k.clear();return C}};f.prototype.clear=function(){var e=this,l=this.tileIndex;l.forEach(function(n){e.releaseTile(n)});l.clear()};f.prototype._addParentTile=function(e,l){for(var n=null;;){e=this.tileInfoView.getTileParentId(e);if(!e)break;if(this.tileIndex.has(e)&&(n=this.tileIndex.get(e))&&n.attached){l.has(n.key.id)||l.set(n.key.id,
n);break}}};return f}()})},"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor","../libs/gl-matrix/vec2"],function(m,q,a,b){function g(c,f){c.length=0;f.forEach(function(e){return c.push(e)});return c}var h=new Set,k=[],d=new Map;return function(){function c(f){var e=this;this._keysToRequests=new Map;this.tileInfoView=null;var l=f.strategy&&"scale-first"!==f.strategy?this._peekByCenterFirst.bind(this):this._peekByScaleFirst.bind(this);
this.tileInfoView=f.tileInfoView;this._queues=f.tileServers&&0<f.tileServers.length?f.tileServers.map(function(n){return new a({concurrency:f.concurrency||6,process:function(r){r=e._keysToRequests.get(r);return f.process(r,n)},peeker:l})}):[new a({concurrency:f.concurrency||6,process:function(n){n=e._keysToRequests.get(n);return f.process(n)},peeker:l})]}Object.defineProperty(c.prototype,"length",{get:function(){return this._queues.reduce(function(f,e){return f+e.length},0)},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});c.prototype.clear=function(){for(var f=0,e=this._queues;f<e.length;f++)e[f].clear();this._keysToRequests.clear()};c.prototype.find=function(f,e){var l=this;e=0;for(var n=this._queues;e<n.length;e++){var r=n[e].find(function(t){return f(l._keysToRequests.get(t).key)});if(r)return r}};c.prototype.get=function(f){f="string"===typeof f?f:f.id;for(var e=0,l=this._queues;e<
l.length;e++){var n=l[e].get(f);if(n)return n}};c.prototype.getRequest=function(f){return this._keysToRequests.get("string"===typeof f?f:f.id)};c.prototype.has=function(f){return"string"===typeof f?this._keysToRequests.has(f):this._keysToRequests.has(f.id)};c.prototype.isOngoing=function(f){var e="string"===typeof f?f:f.id;return this.has(e)&&this._queues.some(function(l){return l.isOngoing(e)})};c.prototype.pause=function(){for(var f=0,e=this._queues;f<e.length;f++)e[f].pause()};c.prototype.push=
function(f){var e=this,l=f.key.id,n=this._queues[f.key.row%this._queues.length].push(l);this._keysToRequests.set(l,f);n.then(function(){e._keysToRequests.delete(l)});n.catch(function(){e._keysToRequests.delete(l)});return n};c.prototype.reset=function(){for(var f=0,e=this._queues;f<e.length;f++)e[f].reset()};c.prototype.resume=function(){for(var f=0,e=this._queues;f<e.length;f++)e[f].resume()};c.prototype._peekByScaleFirst=function(f){if(!this.state)return f[0];for(var e=this.tileInfoView,l=Number.NEGATIVE_INFINITY,
n=Number.POSITIVE_INFINITY,r=0;r<f.length;r++){var t=this._keysToRequests.get(f[r]),w=this.tileInfoView.getTileScale(t.key);d.has(w)||(d.set(w,[]),l=Math.max(w,l),n=Math.min(w,n));d.get(w).push(t.key);h.add(w)}var v=this.state.scale;d.has(v)||(g(k,h),k.sort(),v=k.reduce(function(p,z,u,D){return Math.abs(z-v)<Math.abs(p-v)?z:p},k[0]));v=Math.min(v,l);v=Math.max(v,n);f=d.get(v);var y=e.getClosestInfoForScale(v),x=y.getColumnForX(this.state.center[0]),B=y.getRowForY(this.state.center[1]);f.sort(function(p,
z){var u=y.denormalizeCol(p.col,p.world),D=y.denormalizeCol(z.col,z.world);return Math.sqrt((x-u)*(x-u)+(B-p.row)*(B-p.row))-Math.sqrt((x-D)*(x-D)+(B-z.row)*(B-z.row))});h.clear();d.clear();return f[0].id};c.prototype._peekByCenterFirst=function(f){if(!this.state)return f[0];for(var e=this.tileInfoView,l=this.state.center,n=[0,0],r=Number.POSITIVE_INFINITY,t=null,w=0;w<f.length;w++){var v=this._keysToRequests.get(f[w]);e.getTileCoords(n,v.key);var y=b.distance(n,l);y<r&&(r=y,t=v.key)}return t.id};
return c}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],function(m,q,a,b,g){return function(){function h(k){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=null;this.concurrency=1;this.ordered=!1;k.concurrency&&(this.concurrency=k.concurrency);this.ordered=!!k.ordered;this._queue=new b(k.peeker?{peeker:k.peeker}:void 0);this.process=k.process}Object.defineProperty(h.prototype,
"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});h.prototype.clear=function(){this._queue.clear();var k=[];this._processingItems.forEach(function(d){return k.push(d.resultPromise)});this._processingItems.clear();k.forEach(function(d){return d.cancel()});k.length=0;this._apiPromises.forEach(function(d){return k.push(d)});this._apiPromises.clear();k.forEach(function(d){return d.cancel()});this._cancelNext()};h.prototype.find=function(k,d){var c=
this,f=void 0;this._apiPromises.forEach(function(e,l){k.call(d,l)&&(f=c._apiPromises.get(l).promise)});return f};h.prototype.get=function(k){return(k=this._apiPromises.get(k))&&k.promise||void 0};h.prototype.isOngoing=function(k){return this._processingItems.has(k)};h.prototype.has=function(k){return this._apiPromises.has(k)};h.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};h.prototype.push=function(k){var d=this;if(this._apiPromises.has(k))return this._apiPromises.get(k).promise;
var c=new a(function(f){var e=d._processingItems.get(k);e?e.resultPromise.cancel(f):(d._remove(k),d._scheduleNext())});this._add(k,c);this._scheduleNext();return c.promise};h.prototype.reset=function(){var k=[];this._processingItems.forEach(function(f){return k.push(f)});this._processingItems.clear();for(var d=0;d<k.length;d++){var c=k[d];c.resultPromise.isFulfilled()?this._processReset(c):(c.isReset=!0,c.resultPromise.cancel())}};h.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};
h.prototype._scheduleNext=function(){var k=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=g.schedule(function(){k._scheduledNextHandle=null;k._next()}))};h.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};h.prototype._processResult=function(k,d){this._remove(k.item);this._scheduleNext();k.dfd.resolve(d)};h.prototype._processError=function(k,d){k.isReset?this._processReset(k):(this._remove(k.item),
this._scheduleNext(),k.dfd.reject(d))};h.prototype._processReset=function(k){this._remove(k.item);this._add(k.item,k.dfd);this._scheduleNext()};h.prototype._processOrdered=function(k,d){var c=this,f=!1;if(k.isReset)this._processReset(k);else{k.result=d;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(l){f||(l.result?c._itemsToProcess.push(l):f=!0)});k=0;for(d=this._itemsToProcess;k<d.length;k++){var e=d[k];!1===e.result.ok?this._processError(e,e.result.error):
this._processResult(e,e.result.value)}this._itemsToProcess.length=0}};h.prototype._process=function(k){var d=this;if(null!=k){var c=this._apiPromises.get(k),f=this.process(k);if(f&&"function"===typeof f.then){var e={item:k,resultPromise:f,result:null,dfd:c,isReset:!1};this._processingItems.set(k,e);this.ordered?f.then(function(l){return d._processOrdered(e,{ok:!0,value:l})},function(l){return d._processOrdered(e,{ok:!1,error:l})}):f.then(function(l){return d._processResult(e,l)},function(l){return d._processError(e,
l)})}else c.resolve(f),this._remove(k)}};h.prototype._add=function(k,d){this._apiPromises.set(k,d);this._queue.push(k)};h.prototype._remove=function(k){this._queue.remove(k);this._apiPromises.delete(k);this._processingItems.delete(k)};h.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)};return h}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(m,q){return function(){function a(b){this._items=
[];this._itemSet=new Set;this._peeker=function(g){return g[0]};this._length=0;b&&b.peeker&&(this._peeker=b.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};a.prototype.push=function(b){this.contains(b)||this._add(b)};a.prototype.contains=function(b){return 0<this._length&&
this._itemSet.has(b)};a.prototype.pop=function(){if(0!==this._length){var b=this.peek();this._remove(b);return b}};a.prototype.remove=function(b){this.contains(b)&&this._remove(b)};a.prototype._add=function(b){this._items.push(b);this._itemSet.add(b);this._length++};a.prototype._remove=function(b){this._itemSet.delete(b);this._items.splice(this._items.indexOf(b),1);this._length--};return a}()})},"esri/layers/vectorTiles/views/webgl/webgl-utils":function(){define([],function(){var m=function(q,a){for(var b=
["webgl","experimental-webgl","webkit-3d","moz-webgl"],g=null,h=0;h<b.length;++h){try{g=q.getContext(b[h],a)}catch(k){}if(g)break}return g};return{create3DContext:m,setupWebGL:function(q,a){function b(g){var h=q.parentNode;h&&(h.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+g+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}
if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];a=m(q,a);return a?[a]:(b('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'])},detectWebGL:function(){try{var q=window.WebGLRenderingContext}catch(b){q=[!1,0]}try{var a=m(document.createElement("canvas"))}catch(b){a=[!1,1]}q?a?(q=a,q=[!0,{VERSION:q.getParameter(q.VERSION),SHADING_LANGUAGE_VERSION:q.getParameter(q.SHADING_LANGUAGE_VERSION),VENDOR:q.getParameter(q.VENDOR),RENDERER:q.getParameter(q.RENDERER),
EXTENSIONS:q.getSupportedExtensions(),MAX_TEXTURE_SIZE:q.getParameter(q.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:q.getParameter(q.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:q.getParameter(q.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]):q=[!1,1]:q=[!1,0];return q}}})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n      \r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n  #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x, a_color);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n      //  discard;\r\n      //}\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\r\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_vertexOffset;\r\n    attribute vec4 a_vertexTex;\r\n\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffset;\r\n      vec2 a_tex \x3d a_vertexTex.xy;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      float h \x3d getVVMinMaxSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      float h \x3d u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      float h \x3d getVVStopsSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      float h \x3d getVVUnitValue(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      // make sure to preserve the aspect ratio of the symbol\r\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\r\n      vec2 offset \x3d a_offset * size / a_size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d a_offset;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2float\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"labelVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n      attribute vec2 a_pos;                  // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_color;                // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset;         // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texAndSize;          // 4 (4 x unsigned byte) texture coordinatesm and font size. w is for the halo size\r\n      attribute vec4 a_refSymbolAndPlacementOffset; // 4 (4 x unsigned byte) the offset of the reference symbol of the feature (x,y) and the placement offset (z, w) all given in pixels\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      attribute mediump vec2 a_visibilityRange; // 2 x unsigned byte;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      // the curent zoom\r\n      uniform mediump float u_zoomLevel; // the current zoom level X 10\r\n      uniform lowp float u_mapRotation;\r\n      uniform lowp float u_mapAligned;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n       uniform mediump float u_fadeStep;\r\n       varying mediump float v_fadeStep;\r\n    #else\r\n       varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // clip the vertex if we are beyond the visibility range of the vertex\r\n        // please note: min value of 0 is regarded infinity. max value of 255 is regarded infinity\r\n        z +\x3d 1.0 + sign(a_visibilityRange.x - u_zoomLevel);\r\n        z +\x3d 1.0 + sign(u_zoomLevel - a_visibilityRange.y);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n        float fontSize \x3d a_texAndSize.z;\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        float mapRotation \x3d u_mapAligned * C_DEG_TO_RAD * -u_mapRotation;\r\n        float sinA \x3d sin(mapRotation);\r\n        float cosA \x3d cos(mapRotation);\r\n\r\n        mat4 mapRotationMat \x3d mat4(cosA, sinA, 0.0, 0.0,\r\n                                  -sinA, cosA, 0.0, 0.0,\r\n                                    0.0,  0.0, 1.0, 0.0,\r\n                                    0.0,  0.0, 0.0, 1.0);\r\n\r\n        vec4 refSymbolOffset \x3d mapRotationMat *  vec4(a_refSymbolAndPlacementOffset.xy, 0.0, 0.0);\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) +\r\n                      u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) +\r\n                      u_extrudeMatrix * vec4(refSymbolOffset.xy + a_refSymbolAndPlacementOffset.zw, 0.0, 0.0) +\r\n                      extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n        v_tex \x3d a_texAndSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.106 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texAndSize.w / fontScale / maxSdfDistance;\r\n\r\n        v_transparency \x3d u_opacity;\r\n\r\n      #ifdef ID\r\n        v_fadeStep \x3d u_fadeStep;\r\n      #else\r\n        v_color \x3d a_color;\r\n      #endif // ID\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"labelFS"\x3e\r\n   \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform mediump sampler2D u_referenceTex;\r\n      uniform mediump vec2 u_screenSize;\r\n      uniform mediump float u_pixelRatio;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n      varying mediump float v_fadeStep;\r\n    #else\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n    const vec3 epsilon \x3d vec3(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\r\n\r\n      void main()\r\n      {\r\n        mediump vec2 refTextPos \x3d gl_FragCoord.xy / (u_pixelRatio * u_screenSize.xy);\r\n        mediump vec4 referenceFragment \x3d texture2D(u_referenceTex, refTextPos);\r\n    #ifdef ID\r\n        mediump float alpha \x3d clamp(referenceFragment.a + v_fadeStep, 0.0, 1.0);\r\n        // fill the whole quad\r\n        gl_FragColor \x3d vec4(alpha);\r\n    #else\r\n        // read the fade alpha\r\n        lowp float fadeAlpha \x3d referenceFragment.a;\r\n\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float sdfAlpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d fadeAlpha * sdfAlpha * v_transparency * v_color;\r\n    #endif\r\n      }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"thinLineParams"\x3e\r\n     \x3c![CDATA[\r\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\r\n    float thinLineWidthFactor \x3d 1.1;\r\n     ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_zoomFactor;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n     const float scale \x3d 1.0 / 31.0;\r\n#ifdef SDF\r\n     const float widthFactor \x3d 2.0;\r\n#else\r\n     const float widthFactor \x3d 1.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n// we need to accumulated distance only if it is a pattern or an SDF line\r\n#if defined(PATTERN) || defined(SDF)\r\n     varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n      v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n#ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n#else\r\n      v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\r\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\r\n\r\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n       $thinLineParams\r\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\r\n       // is claped in line 221 above\r\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\r\n       // in a case of a thin line we move each vertex twice as far\r\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\r\n#endif // PATTERN || SDF\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n      uniform mediump float u_zoomFactor;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\r\n     const float widthFactor \x3d 2.0;\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n         $thinLineParams\r\n\r\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\r\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\r\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $textVVUniformsVS\r\n      $textVVFunctions\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n        // vv size override the original symbol\'s size\r\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n        float fontSize \x3d size.x;\r\n  #else // this generic case, no VV\r\n        float fontSize \x3d a_texFontSize.z;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n    #ifdef VV_ROTATION\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #else\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #endif // VV_ROTATION\r\n\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\r\n\r\n    #ifdef VV_OPACITY\r\n        v_transparency \x3d getVVOpacity(a_vv.z);\r\n    #else\r\n        v_transparency \x3d u_opacity;\r\n    #endif // VV_OPACITY\r\n\r\n    #ifdef VV_COLOR\r\n       // we don\'t want to override the halo color\r\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y, a_color);\r\n    #else\r\n        v_color \x3d a_color;\r\n    #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n        v_id \x3d a_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n  #ifdef ID\r\n      varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n  #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform lowp vec4 u_color;\r\n    void main() {\r\n      gl_FragColor \x3d u_color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"bitblitVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    varying mediump vec2 v_uv;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"bitblitFS"\x3e\r\n  \x3c![CDATA[\r\n    \tuniform lowp sampler2D u_tex;\r\n      uniform lowp float u_opacity;\r\n\r\n      varying mediump vec2 v_uv;\r\n\r\n      void main() {\r\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n        // Note: output in pre-multiplied alpha for correct alpha compositing\r\n        gl_FragColor \x3d color *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"stencilVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"stencilFS"\x3e\r\n  \x3c![CDATA[\r\n    void main() {\r\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"tileInfoVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_depth;\r\n    uniform mediump float u_coord_ratio;\r\n    uniform mediump vec2 u_delta; // in tile coordinates\r\n    uniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main() {\r\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n      v_tex \x3d a_pos;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"tileInfoFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform mediump sampler2D u_texture;\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main(void) {\r\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n      gl_FragColor \x3d 0.75 * color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float estimateDistance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d estimateDistance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/backgroundShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n    \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    attribute vec2 a_pos;\r\n\r\n  #ifdef ID\r\n    uniform mediump vec4 u_id;\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump mat3 u_pattern_matrix; // can we use medium precision?\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n\r\n  #ifdef PATTERN\r\n      // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n      // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n      v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      v_id \x3d u_id / 255.0;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef PATTERN\r\n    uniform lowp float u_opacity;\r\n    uniform mediump vec2 u_pattern_tl;\r\n    uniform mediump vec2 u_pattern_br;\r\n    uniform sampler2D u_texture;\r\n\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #else\r\n    uniform lowp vec4 u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    void main() {\r\n  #ifdef PATTERN\r\n      // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n      mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n      // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n      // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n      // we need to only sample from area that has our sprite in the mosaic.\r\n      mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n      // sample the sprite mosaic\r\n      lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n      gl_FragColor \x3d u_opacity * color;\r\n  #else\r\n      gl_FragColor \x3d u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/circleShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"circleVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_stroke_color;\r\n      attribute vec4 a_data;\r\n\r\n      const float sizePrecision \x3d 0.25; // 1/4\r\n      const float blurPrecision \x3d 0.03125; // 1/32\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp vec4 v_stroke_color;\r\n      varying mediump float v_blur;\r\n      varying mediump float v_stroke_width;\r\n      varying mediump float v_radius;\r\n      varying mediump vec2 v_offset;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_radius;\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_blur;\r\n      uniform mediump float u_stroke_width;\r\n      uniform lowp vec4 u_stroke_color;\r\n\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      void main()\r\n      {\r\n        v_color \x3d a_color * u_color;\r\n        v_stroke_color \x3d a_stroke_color * u_stroke_color;\r\n        v_stroke_width \x3d a_data[1] * sizePrecision * u_stroke_width;\r\n        v_radius \x3d a_data[2] * u_radius;\r\n        v_blur \x3d max(a_data[0] * blurPrecision + u_blur, u_antialiasingWidth / (v_radius + v_stroke_width));\r\n\r\n        mediump vec2 offset \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\r\n        v_offset \x3d offset;\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos * 0.5, 0.0, 1.0) + u_extrudeMatrix * (v_radius + v_stroke_width) * vec4(offset, 0.0, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"circleFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp vec4 v_stroke_color;\r\n      varying mediump float v_blur;\r\n      varying mediump float v_stroke_width;\r\n      varying mediump float v_radius;\r\n      varying mediump vec2 v_offset;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        mediump float dist \x3d length(v_offset);\r\n\r\n        mediump float alpha \x3d smoothstep(0.0, -v_blur, dist - 1.0);\r\n\r\n        lowp float color_mix_ratio \x3d v_stroke_width \x3c 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\r\n\r\n        gl_FragColor \x3d alpha * mix(v_color, v_stroke_color, color_mix_ratio);\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump mat3 u_pattern_matrix;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      varying lowp vec4 v_color;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n      #ifdef PATTERN\r\n        // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n        // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n        // (-4k to 8k -1) to texture coordinates.\r\n        v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n      #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n      void main()\r\n      {\r\n      #ifdef PATTERN\r\n        // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n        mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n        // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n        // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n        // we need to only sample from area that has our sprite in the mosaic.\r\n        mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n        // sample the sprite mosaic\r\n        lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n        gl_FragColor \x3d v_color[3] * color;\r\n      #else\r\n        gl_FragColor \x3d v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_size;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 8 and then at the shader devide by the same number\r\n      const float C_OFFSET_PRECISION \x3d 1.0 / 8.0;\r\n\r\n      const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n      const float tileCoordRatio \x3d 1.0 / 8.0;\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle         \x3d a_levelInfo[1];\r\n        mediump float a_minLevel      \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel      \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label had been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        vec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\r\n\r\n        v_size \x3d abs(offset);\r\n\r\n      #ifdef SDF\r\n        offset \x3d (120.0 / 86.0) * offset;\r\n      #endif // SDF\r\n\r\n      #ifdef DD\r\n        mediump float icon_size \x3d a_size * u_size;\r\n      #else\r\n        mediump float icon_size \x3d u_size;\r\n      #endif // DD\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * icon_size * vec4(offset, delta_z, 0.0);\r\n\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n        v_transparency *\x3d v_color.w;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      uniform lowp sampler2D u_texture; // SDF texture\r\n    #ifdef SDF\r\n      uniform lowp vec4 u_color; // a color to override the one of the vertex\r\n      uniform lowp vec4 u_outlineColor;\r\n      uniform mediump float u_outlineSize;\r\n    #endif // SDF\r\n\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // we need the conversion function from RGBA to float\r\n      $rgba2float\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n\r\n      void main()\r\n      {\r\n      #ifdef SDF\r\n        lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n        // calculate the distance from the edge [-0.5, 0.5]\r\n        float d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\r\n\r\n        // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n        // 1 / 86 represents a single pixel given the size of the SDF is 128 and we add 4 pixels margins to deal with\r\n        // other non SDF types.\r\n        // The rasterized geometry takes only 86 pixels because of the extra 16 pixels margin for the outline.\r\n        const float sofetEdgeRatio \x3d 0.248062016; // \x3d\x3d\x3e (32.0 / 86.0) / 1.5;\r\n        float size \x3d max(v_size.x, v_size.y);\r\n        float dist \x3d d * sofetEdgeRatio * size;\r\n\r\n        // set the fragment\'s transparency according to the distance from the edge\r\n        fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n        // count for the outline\r\n        // therefore tint the entire icon area.\r\n        if (u_outlineSize \x3e 0.25) {\r\n          lowp vec4 outlinePixelColor \x3d u_outlineColor;\r\n          // the outline limit ratio is derived from the 16 pixels allocated for the outline and the fact that 1/86 represents\r\n          // a single pixel.\r\n          const float outlineLimitRatio \x3d (16.0 / 86.0);\r\n          float clampedOutlineSize \x3d sofetEdgeRatio * min(u_outlineSize, outlineLimitRatio * max(v_size.x, v_size.y));\r\n\r\n          outlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\r\n\r\n          // finally combine the outline and the fill colors\r\n          gl_FragColor \x3d v_transparency * mixColors(fillPixelColor, outlinePixelColor);\r\n        }\r\n        else {\r\n          gl_FragColor \x3d v_transparency * fillPixelColor;\r\n        }\r\n      #else // not an SDF\r\n        lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n        gl_FragColor \x3d v_transparency * texColor;\r\n      #endif // SDF\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n      /* The implementation of the renderer is based on the article and implementation of MB described here:\r\n      * https://www.mapbox.com/blog/drawing-antialiased-lines/\r\n      */\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_offsetAndNormal;\r\n      attribute vec2 a_accumulatedDistance;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      uniform mediump float u_blur;\r\n      uniform mediump float u_antialiasing; // the feather distance at which the line edge fades out\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n      varying mediump vec2 v_normal;\r\n\r\n      // the accumulated distance along the line. We need this information in order to render the dashes.\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      const float scale \x3d 1.0 / 31.0;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_width;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_width;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_lineHalfWidth; // the inset and outset of the line\r\n      varying mediump float v_blur;\r\n\r\n    #ifndef PATTERN\r\n      uniform mediump vec2 u_dasharray;\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n      void main()\r\n      {\r\n        v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n      #ifdef DD\r\n        v_lineHalfWidth \x3d a_width * u_width;\r\n      #else\r\n        v_lineHalfWidth \x3d u_width;\r\n      #endif // DD\r\n\r\n        v_lineHalfWidth +\x3d u_antialiasing;\r\n        v_lineHalfWidth *\x3d 0.5;\r\n\r\n      #ifndef PATTERN\r\n      #ifdef DD\r\n        v_dasharray \x3d u_dasharray * a_width;\r\n      #else\r\n        v_dasharray \x3d u_dasharray * u_width;\r\n      #endif // DD\r\n      #endif\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec2 dist \x3d v_lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n        // transform the vertex\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n\r\n        // the accumulated distance will be used to calculate the dashes (or the no-data...)\r\n        v_accumulatedDistance \x3d a_accumulatedDistance.x;\r\n\r\n        v_blur \x3d u_blur + u_antialiasing;\r\n\r\n        #ifdef DD\r\n          v_color \x3d a_color * u_color;\r\n        #else\r\n          v_color \x3d u_color;\r\n        #endif // DD\r\n\r\n        #ifdef ID\r\n          v_id \x3d u_id / 255.0;\r\n        #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying mediump vec2 v_normal;\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      varying mediump float v_lineHalfWidth;\r\n      varying lowp vec4 v_color;\r\n\r\n      varying mediump float v_blur;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform mediump vec2 u_spriteSize;\r\n      uniform sampler2D u_texture;\r\n\r\n      // Horizontal scale is used to scale the horizontal texture coordinate v_normal.x before adding it as an offset to the\r\n      // accumulated distance. Most vertices will have v_normal.x \x3d\x3d 0, because the pattern must be sampled only depending on\r\n      // the v_accumulatedDistance value. But tessellation at caps can have vertices with v_normal.x !\x3d 0, thus allowing to\r\n      // "keep moving" for a few more pixel even when the line has ended or has not started yet.\r\n      const mediump float tileCoordRatio \x3d 8.0;\r\n    #else\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n        // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n        // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n        mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n        // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n        // We need to count for both sides of the line.\r\n        lowp float alpha \x3d clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\r\n\r\n      #ifdef PATTERN\r\n        // we need to calculate the relative portion of the line texture along the line given the accumulated distance aliong the line\r\n        // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n        mediump float relativeTexX \x3d mod((v_accumulatedDistance + v_normal.x * v_lineHalfWidth * tileCoordRatio) / u_spriteSize.x, 1.0);\r\n\r\n        // in order to calculate the texture coordinates perpendicular to the line (Y axis), we use the interpolated normal values\r\n        // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n        // texture value should be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n        // (TL) ---------------------------      --\x3e left edge of line. Interpolated normal is 1.0\r\n        //              | -\x3e line-width / 2\r\n        //      - - - - - - - - - - - - - -\r\n        //              | -\x3e line-width / 2\r\n        //      ---------------------------- (BR)--\x3e right edge of line. Interpolated normal is -1.0\r\n\r\n        mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / u_spriteSize.y);\r\n\r\n        // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n        mediump vec2 texCoord \x3d mix(u_pattern_tl, u_pattern_br, vec2(relativeTexX, relativeTexY));\r\n\r\n        // get the color from the texture\r\n        lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n        // finally write the fragment value\r\n        gl_FragColor \x3d alpha * v_color[3] * color;\r\n      #else\r\n        // now calculate the dashes given the accumulated distance of the line:\r\n        // start with calculating a normalized position along the line\r\n        lowp float dashPos \x3d  mod(v_accumulatedDistance, v_dasharray.x + v_dasharray.y);\r\n\r\n        // calculate the contribution to the alpha of the dash part. It is provided by the shortest portion of the position along the dash.\r\n        // we must clamp since the value might be bigger than 1 or smaller than zero (when over a dash).\r\n        //   | \x3c--- pos along the dash part\r\n        // -------_______-------_______\r\n        // when the dashPos is over the \'gap\' part of the dash dasharray.x - dashPos is negative and therefore the alpha will\r\n        // get clamped to zero.\r\n        // when dasharray.x - dashPos is positive, or when dashPos is smaller than 1.0, it gives us a soft edge to each dash part.\r\n        // along the direction of the line.\r\n        lowp float dashAlpha \x3d clamp(min(dashPos, v_dasharray.x - dashPos) + 0.5, 0.0, 1.0);\r\n\r\n        // if we don\'t have a no-data part to the dash then it is a solid line\r\n        dashAlpha \x3d max(sign(-v_dasharray.y), dashAlpha);\r\n        // finally multiply the fragment\'s alpha by the calculated dash-alpha\r\n        alpha *\x3d dashAlpha;\r\n\r\n        // output the fragment color\r\n        gl_FragColor \x3d alpha * v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/outlineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"outlineVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_offset;\r\n      attribute vec2 a_xnormal;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n      uniform mediump float u_outline_width;\r\n\r\n      varying lowp vec2 v_normal;\r\n\r\n      const float scale \x3d 1.0 / 15.0;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_normal \x3d a_xnormal;\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec4 dist \x3d vec4(u_outline_width * a_offset * scale, 0.0, 0.0);\r\n\r\n        // Remove the texture normal bit of the position before scaling it with the\r\n        // model/view matrix. Add the extrusion vector *after* the model/view matrix\r\n        // because we\'re extruding the line in pixel space, regardless of the current\r\n        // tile\'s zoom level.\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * dist;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"outlineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying lowp vec4 v_color;\r\n      varying mediump vec2 v_normal;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // Calculate the distance of the pixel from the line in pixels.\r\n        lowp float dist \x3d abs(v_normal.y);\r\n\r\n        lowp float alpha \x3d smoothstep(1.0, 0.0, dist);\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO this snippet should only be in views/3d/webgl-engine/materials/internal/Util.xml\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 toFloat \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, toFloat);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n      uniform lowp vec4 u_color; // always defined as halo does not support data driven but text does\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      varying lowp vec4 v_color;\r\n\r\n      uniform mediump float u_size;\r\n    #ifdef DD\r\n      attribute mediump float a_size;\r\n    #endif // DD\r\n      varying mediump float v_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n\r\n      // attribute bool a_visible; // --\x3e a one bit controlling the visibility of the vertex\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying lowp vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 8 and then at the shader divide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n\r\n      // outline position and appearance\r\n      const mediump float edgePos \x3d 0.75; // defined by the SDF encoding\r\n      uniform mediump float u_edgeDistance;\r\n      uniform mediump float u_edgeBlur;\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      varying mediump float v_edgeDistance; // will factor in the size\r\n      varying mediump float v_edgeWidth; // will factor in the size\r\n\r\n      uniform lowp float u_halo; // needed to avoid using the color attribute for halo\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle        \x3d a_levelInfo[1];\r\n        mediump float a_minLevel    \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel    \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // TODO: force clipping the vertex in case that the vertex isn\'t visible\r\n        //delta_z +\x3d a_visible ? 0.0 : 1.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label has been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n\r\n      #ifdef DD\r\n        if (u_halo \x3e 0.5)\r\n        {\r\n          v_color \x3d u_color;\r\n        }\r\n        else\r\n        {\r\n          v_color \x3d a_color * u_color;\r\n          // opacity already factored in a_color\r\n        }\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef DD\r\n        v_size \x3d a_size * u_size;\r\n      #else\r\n        v_size \x3d u_size;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_edgeDistance \x3d edgePos - u_edgeDistance / v_size;\r\n        v_edgeWidth \x3d (u_antialiasingWidth + u_edgeBlur) / v_size;\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * v_size * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      uniform lowp sampler2D u_texture;\r\n      uniform mediump float u_edgeDistance;\r\n\r\n      varying lowp vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_edgeWidth;\r\n      varying mediump float v_edgeDistance;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // this is taken from http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf\r\n      // and https://www.mapbox.com/blog/text-signed-distance-fields/\r\n      // http://metalbyexample.com/rendering-text-in-metal-with-signed-distance-fields/\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        mediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"*now":function(m){m(['dojo/i18n!*preload*esri/layers/nls/VectorTileLayerImpl*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("esri/layers/VectorTileLayerImpl","dojo/_base/lang dojo/has dojo/dom-construct dojo/dom-style dojo/io-query ../geometry/Extent ../geometry/screenUtils ../geometry/scaleUtils ../SpatialReference ../config ../lang ../domUtils ../urlUtils ../kernel ./layer ./TileInfo ./unitBezier ./vectorTiles/request ./vectorTiles/core/promiseUtils ./vectorTiles/core/urlUtils ./vectorTiles/geometry/support/spatialReferenceUtils ./vectorTiles/layers/support/vectorTileLayerLoader ./vectorTiles/layers/support/TilemapCache ./vectorTiles/views/vectorTiles/style/StyleRepository ./vectorTiles/views/vectorTiles/VectorTileContainer ./vectorTiles/views/vectorTiles/VectorTileDisplayObject ./vectorTiles/views/vectorTiles/TileHandler ./vectorTiles/views/2d/engine/StageGL ./vectorTiles/views/2d/tiling/TileInfoView ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/webgl/webgl-utils".split(" "),function(m,
q,a,b,g,h,k,d,c,f,e,l,n,r,t,w,v,y,x,B,p,z,u,D,I,C,E,G,H,L,O,W,Z){var ba=v.ease;k=t.createSubclass({declaredClass:"esri.layers.VectorTileLayer",_mapsWithAttribution:"OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2".split(" "),_eventMap:{"style-change":["style"]},constructor:function(R,V){this._frame=this._frame.bind(this);this._params=
V||{};V&&V.tileServers&&V.tileServers.length&&(this.tileServers=V.tileServers=V.tileServers.map(function(J){return n.getAbsoluteUrl(J)},this));V&&V.copyright&&(this.copyright=V.copyright);this._viewState={scale:0,width:0,height:0,size:[0,0],rotation:0,resolution:1,center:[0,0],worldScreenWidth:0,spatialReference:null,toScreen:function(J,S){var aa=this.center[1]+this.resolution*this.height*.5;J[0]=(S[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution;J[1]=(aa-S[1])/this.resolution;
return J},toMap:function(J,S){var aa=this.center[1]+this.resolution*this.height*.5;J[0]=this.center[0]-this.resolution*this.width*.5+S[0]*this.resolution;J[1]=aa-S[1]*this.resolution;return J}};this._renderParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this.type="vector-tile";this.setStyle(R);this.registerConnectEvents()},setStyle:function(R){return this.loadStyle(R)},
getStyle:function(){return this.currentStyleInfo&&this.currentStyleInfo.style||null},opacity:1,setOpacity:function(R){if(this.opacity!=R)this.onOpacityChange(this.opacity=R)},onOpacityChange:function(){},_pinching:!1,getTileUrl:function(R,V,J){var S=this._url&&this._url.query,aa=this.tileServers[V%this.tileServers.length];aa=aa.replace(/\{z\}/gi,R.toString()).replace(/\{level\}/gi,R.toString()).replace(/\{y\}/gi,V.toString()).replace(/\{row\}/gi,V.toString()).replace(/\{x\}/gi,J.toString()).replace(/\{col\}/gi,
J.toString());S&&(aa+="?"+g.objectToQuery(S));aa=this.addTimestampToURL(aa);return n.addProxy(aa)},loadStyle:function(R){if(this._loadingPromise&&"string"===typeof R&&this.url===R)return this._loadingPromise;this._stopDisplay();var V=this._loadingPromise;this._loadingPromise=z.loadMetadata(R).then(function(J){this.url=J.url;this._url=J.parsedUrl;!this._url&&J.styleUrl&&(this._url=B.urlToObject(J.styleUrl));this.currentStyleInfo={glyphsUrl:J.glyphsUrl,serviceUrl:J.serviceUrl,spriteUrl:J.spriteUrl,
styleUrl:J.styleUrl,style:J.style,layerDefinition:J.layerDefinition};this.styleRepository=new D(J.style,J);this._read(J.layerDefinition);this.onStyleChange(this.getStyle())}.bind(this)).then(function(){this.loaded||(this._findCredential(),this.loaded=!0,this.onLoad(this));this.suspended||this._tileHandler||this._startDisplay()}.bind(this)).otherwise(function(J){this._errorHandler(J);throw J;}.bind(this));V&&!V.isFulfilled()&&V.cancel();return this._loadingPromise},refresh:function(){this.suspended||
(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},takeScreenshot:function(R){return this._stageGL?this._stageGL.takeScreenshot(R):x.reject("No valid GL context!")},_setMap:function(R,V,J){this.inherited(arguments);this._map=R;var S=this._div=a.create("div",null,V);b.set(S,{position:"absolute",width:R.width+"px",height:R.height+"px",overflow:"visible",opacity:this.opacity});this.attr("data-vectortiles",!0);this._onResizeHandle=R.on("resize",m.hitch(this,
this._onResizeHandler));this._onOpacityHandle=this.on("opacity-change",m.hitch(this,this._opacityChangeHandler));this._onScaleVisHandle=this.on("scale-visibility-change",m.hitch(this,function(){}));this._onVisibilityHandle=this.on("visibility-change",m.hitch(this,function(){}));R.acquireWebGLContext(this);this._stageGL=new G;this._stageGL.setElement(this._stageGL.createElement());this._div.appendChild(this._stageGL.element);this._stageGL.parent={requestChildRender:this._scheduleRender.bind(this)};
this._stageGL.attach(this._renderParameters);this._startDisplay();this.evaluateSuspension();if(this.suspended&&!R.loaded)var aa=R.on("load",m.hitch(this,function(){aa.remove();this.evaluateSuspension()}));return S},_unsetMap:function(R,V){R.releaseWebGLContext(this);this._map=null;this.suspended||this._stopDisplay();this._stageGL.detach(this._renderParameters);this._stageGL=null;a.destroy(this._div);this._div=null;this._handles&&this._handles.forEach(function(J){J.remove()});this._handles=null;this._onResizeHandle=
this._onResizeHandle&&this._onResizeHandle.remove()&&null;this._onOpacityHandle=this._onOpacityHandle&&this._onOpacityHandle.remove()&&null;this._onScaleVisHandle=this._onScaleVisHandle&&this._onScaleVisHandle.remove()&&null;this._onVisibilityHandle=this._onVisibilityHandle&&this._onVisibilityHandle.remove()&&null;this.inherited(arguments)},_read:function(R){this.version=R.currentVersion||R.version;this.copyright=this.copyright||R.copyrightText;this.fullExtent=new h(R.fullExtent);this.initialExtent=
new h(R.initialExtent);this.spatialReference=this.fullExtent.spatialReference;this.tileInfo=new w(R.tileInfo);this.tileInfo.size=[this.tileInfo.cols,this.tileInfo.height];this.tileInfo.spatialReference.isWrappable=this.tileInfo.spatialReference._isWrappable();this.tileInfo.scales=this.tileInfo.lods.map(function(J){return J.scale});this.tileInfo.scaleToZoom=function(J){for(var S=this.scales,aa=S.length-1,ja=0;ja<aa;ja++){var la=S[ja],ra=S[ja+1];if(la<=J)break;if(ra===J)return ja+1;if(la>J&&ra<J)return ja+
1-(J-ra)/(la-ra)}return ja};this._hasMin||this.setMinScale(R.minScale);this._hasMax||this.setMaxScale(R.maxScale);R.tileMap&&(this.tileIndexUrl=B.join(this.currentStyleInfo.serviceUrl,R.tileMap));if(!this._params.tileServers){var V=R.tiles;this.currentStyleInfo&&this.currentStyleInfo.serviceUrl&&V.forEach(function(J,S,aa){B.isAbsolute(J)?aa[S]=J:aa[S]=B.join(this.currentStyleInfo.serviceUrl,J)}.bind(this));this.tileServers=V}V=null;this.currentStyleInfo.serviceUrl&&(this.parsedUrl=B.urlToObject(this.currentStyleInfo.serviceUrl),
V=this._getDefaultAttribution(this.parsedUrl.path));V?(this.attributionDataUrl=V,this.hasAttributionData=!0):(this.attributionDataUrl=null,this.hasAttributionData=!1);this.capabilities=this._getCapabilities(R);this.tilemapCache=this.capabilities.supportsTileMapIndexing?new u({layer:this}):null},_getCapabilities:function(R){var V=R.hasOwnProperty("exportTilesAllowed")?R.exportTilesAllowed:!1;R=R.capabilities?-1!==R.capabilities.toLowerCase().indexOf("tilemap"):!1;return{exportTilesAllowed:V,supportsTileMapIndexing:R}},
_getDefaultAttribution:function(R){var V=R.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(V&&(R=V[3])){V=V[2]||"";R=R.toLowerCase();for(var J=0,S=this._mapsWithAttribution.length;J<S;J++){var aa=this._mapsWithAttribution[J];if(-1<aa.toLowerCase().indexOf(R))return R=window.location.protocol,("http:"===R||"https:"===R?R:"https:")+"//static.arcgis.com/attribution/Vector"+V+"/"+aa}}},_startDisplay:function(){var R=
{capabilities:{operations:{supportsTileMap:this.capabilities.supportsTileMapIndexing}},styleRepository:this.styleRepository,tileIndexUrl:this.tileIndexUrl,tileInfo:this.tileInfo,tilemapCache:this.tilemapCache,fullExtent:{width:this.fullExtent.getWidth()},getTileUrl:this.getTileUrl.bind(this)};this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=window.devicePixelRatio;this._vectorTileContainer=new I;this._stageGL.addChild(this._vectorTileContainer);this._viewState.spatialReference=
this.tileInfo.spatialReference;this._tileInfoView=new H(this.tileInfo,this.fullExtent);this._tileRequests=new Map;this._tileHandler=new E(R,this._scheduleUpdate.bind(this),window.devicePixelRatio||1,!1,this._tileInfoView);this._viewState.spatialReference=this.spatialReference;this._allTilesAreHandled=!1;this._tileHandlerPromise=this._tileHandler.start().then(function(){this._fetchQueue=new W({tileInfoView:this._tileInfoView,process:this._getTileData.bind(this)});this._tileStrategy=new L({cachePolicy:"keep",
coveragePolicy:"smallest",acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._vectorTileContainer.initialize(this._tileHandler.spriteMosaic,this._tileHandler.glyphMosaic,this.tileInfo,this._tileInfoView);this._scheduleUpdate()}.bind(this))},_stopDisplay:function(){this._tileHandlerPromise&&!this._tileHandlerPromise.isFulfilled()&&this._tileHandlerPromise.cancel();this._tileStrategy&&(this._frameRequested=this._updateRequested=this._renderRequested=
!1,this._animation&&(this._animation.stop(),this._animation=null),this._tileRequests.forEach(function(R){R.cancel("cancel")}),this._tileHandler.stop(),this._tileHandler.destroy(),this._tileStrategy.destroy(),this._tileInfoView=this._tileHandler=this._tileStrategy=null,this._vectorTileContainer.removeAllChildren(),this._stageGL.removeChild(this._vectorTileContainer),this._vectorTileContainer=null)},_scheduleRender:function(){this._renderRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},
_scheduleUpdate:function(){this._updateRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleFrame:function(){this._map&&!this._frameRequested&&(this._frameRequested=!0,X(this._frame))},_frame:function(){if(this._frameRequested){this._frameRequested=!1;this._renderParameters.pixelRatio!==window.devicePixelRatio&&(this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=window.devicePixelRatio,this._stopDisplay(),this._startDisplay());this._animation&&(this._animation.step(),
this._animation.running||(this._animation=null));this._updateParameters.stationary=this._renderParameters.stationary=!this._animation&&!this._pinching&&!this._panning;this._viewState.resolution=this._viewState.scale/(39.37*d.getUnitValueForSR(this.spatialReference)*96);var R=0;this._viewState.spatialReference&&this._viewState.spatialReference._isWrappable()&&(R=p.getInfo(this._viewState.spatialReference),R=R.valid[1]-R.valid[0]);this._viewState.worldScreenWidth=Math.round(R/this._viewState.resolution);
this._renderRequested&&(this._renderRequested=!1,this._stageGL.doRender(this._renderParameters));this._updateRequested&&(this._updateRequested=!1,this._fetchQueue.pause(),this._fetchQueue.state=this._updateParameters.state,this._allTilesAreHandled=this._tileStrategy.update(this._updateParameters),this._fetchQueue.resume());this._animation&&(this._scheduleRender(),this._scheduleUpdate());this._checkUpdating()}},_setViewState:function(R){R=m.mixin(this._viewState,R);R.center.type&&(R.center=[R.center.x,
R.center.y]);this._scheduleRender();this._scheduleUpdate()},_animateViewState:function(R,V){V=V.immediate||0===f.defaults.map.zoomDuration;this._animation=null;if(V)this._setViewState(R);else{V=this._viewState;var J=f.defaults.map.zoomDuration,S=P()+16,aa=V.center[0],ja=V.center[1],la=V.scale,ra=Array.isArray(R.center)?R.center[0]:R.center.x,ta=Array.isArray(R.center)?R.center[1]:R.center.y,va=R.scale||V.scale,Da=this;this._animation={running:!0,stop:function(){this.running=!1},step:function(){if(this.running){var ua=
(P()+16-S)/J;1<=ua&&(ua=1,this.running=!1);ua=ba(ua);Da._setViewState({center:[aa+(ra-aa)*ua,ja+(ta-ja)*ua],scale:la+(va-la)*ua})}}};this._scheduleRender();this._scheduleUpdate()}},_checkUpdating:function(){var R=!0;this._tileRequests.forEach(function(V){R|=V.isFulfilled()});R&&this._tileStrategy&&(R=this._allTilesAreHandled);R?this._fireUpdateEnd():this._fireUpdateStart()},_acquireTile:function(R){var V=O.pool.acquire();V.set(R.level,R.row,R.col,R.world);R=this._tileHandler.getStyleRepository();
var J=C.pool.acquire(V,V,this.tileInfo,R,this._tileHandler.glyphMosaic,0);this._tileHandlerPromise.then(function(){var S=this._tileHandler.getRefKey(V).then(function(aa){J.refKey=aa;return this._fetchQueue.push(V).then(function(ja){J.setData(ja.tileData,ja.workerId,ja.connection);J.once("attach",this._scheduleUpdate.bind(this));this._vectorTileContainer.addChild(J)}.bind(this))}.bind(this));this._tileRequests.set(V.id,S)}.bind(this));return J},_releaseTile:function(R){var V=R.key.id,J=this._tileRequests.get(V);
J.isFulfilled()||J.cancel();this._tileRequests["delete"](V);this._vectorTileContainer.removeChild(R);this._scheduleUpdate();R.once("detach",function(){C.pool.release(R)})},_getTileData:function(R){return this._tileHandler.getTileData(R,0)},onStyleChange:function(R){},_opacityChangeHandler:function(R){this._div&&(this._div.style.opacity=R.opacity)},_onResizeHandler:function(R){var V=this._div&&this._div.style;V&&(V.width=R.width+"px",V.height=R.height+"px",this._setViewState({center:R.extent.getCenter(),
width:R.width,height:R.height,size:[R.width,R.height]}))},onResume:function(){var R=this._map;this.inherited(arguments);l.show(this._div);this._setViewState({center:R.extent.getCenter(),scale:R.getScale(),width:R.width,height:R.height,size:[R.width,R.height],spatialReference:R.spatialReference});this._handles=[R.on("pan-end",m.hitch(this,this._onPanEndHandler)),R.on("pan",m.hitch(this,this._onPanExtentChangeHandler)),R.on("extent-change",m.hitch(this,this._onExtentChangeHandler)),R.on("scale",m.hitch(this,
this._onScaleHandler))]},onSuspend:function(){this.inherited(arguments);l.hide(this._div);this._handles.forEach(function(R){R.remove()});this._handles=null},_onPanEndHandler:function(R){this._panning=!1;this._setViewState({center:R.extent.getCenter(),scale:this._map.getScale()})},_onPanExtentChangeHandler:function(R){this._panning=!0;this._animation&&(this._animation.stop(),this._animation=null);this._setViewState({center:R.extent.getCenter(),scale:this._map.getScale()})},_onExtentChangeHandler:function(R){var V=
this._pinching||R.immediate;this._animateViewState({center:R.extent.getCenter(),scale:R.lod.scale},{immediate:V});this._pinching=!1},_onScaleHandler:function(R){this._animation&&(this._animation.stop(),this._animation=null);var V=this._map;if(V._zoomAnimDiv.extent)this._pinching=this._panning=!1,this._animateViewState({center:V._zoomAnimDiv.extent.getCenter(),scale:V._zoomAnimDiv.newLod.scale},{immediate:R.immediate});else{var J=V.navigationManager,S=J._dragOrigin;R=V.extent.getCenter();var aa=S.x-
.5*V.width;S=S.y-.5*V.height;var ja=V.extent.getWidth()/V.width;if(J._pinchScale){this._pinching=!0;J=J._pinchScale;var la=ja/J;R.x-=aa*(la-ja);R.y+=S*(la-ja);V=V.__LOD.scale/J;this._setViewState({center:R,scale:V})}else J._zoomEndExtent&&(this._pinching=!1,J=V.getScale()/V.navigationManager._zoomEndLod.scale,la=ja/J,R.x-=aa*(la-ja),R.y+=S*(la-ja),V=V.navigationManager._zoomEndLod.scale,this._animateViewState({center:R,scale:V},{immediate:!1}))}}});k.ACCESS_TOKEN=null;k.supported=function(){return Z.detectWebGL()[0]};
var P=function(){var R=window.performance||{},V=R.now||R.webkitNow||R.msNow||R.oNow||R.mozNow;if(void 0!==V)return function(){return V.call(R)};var J=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-J}}();c=q("ff");e=q("ie");r=q("webkit");q=q("opera");var ha=(new Date).getTime(),X=window.requestAnimationFrame;X||(X=window[(r&&"webkit"||c&&"moz"||q&&"o"||
e&&"ms")+"RequestAnimationFrame"])||(X=function(R){var V=P(),J=Math.max(0,16-(V-ha)),S=window.setTimeout(function(){R(P())},J);ha=V+J;return S});return k});