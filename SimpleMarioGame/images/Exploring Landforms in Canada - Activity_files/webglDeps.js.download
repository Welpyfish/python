//>>built
/*

 Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
 Copyright 2015, Google Inc. All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to
 deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 sell copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice including the dates of first publication and
 either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
 shall be included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
 IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 Original Code. The Original Code is: OpenGL Sample Implementation,
 Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
 Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
 Copyright in any portions created by third parties is as indicated
 elsewhere herein. All Rights Reserved.
*/
require({cache:{"esri/layers/support/WebGLRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-style dojox/gfx/matrix ../../kernel ../../lang ../../sniff ../../urlUtils ../../geometry/scaleUtils ../vectorTiles/core/promiseUtils ../vectorTiles/views/2d/engine/StageGL ../vectorTiles/views/2d/engine/webgl/WGLFeatureView ../vectorTiles/views/2d/layers/features/processors/SymbolProcessor ../vectorTiles/views/2d/layers/features/tileRenderers/SymbolTileRenderer ../vectorTiles/views/2d/support/HighlightOptions ../vectorTiles/layers/support/TileInfo ../vectorTiles/views/2d/tiling/TileInfoView ../vectorTiles/geometry/SpatialReference ../vectorTiles/geometry/support/spatialReferenceUtils ../vectorTiles/renderers/SimpleRenderer ../vectorTiles/renderers/ClassBreaksRenderer ../vectorTiles/renderers/UniqueValueRenderer".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B,b,h,c,v,u){function y(K){Object.defineProperty(K,"width",{get:function(){return this.size[0]}});Object.defineProperty(K,"height",{get:function(){return this.size[1]}});Object.defineProperty(K,"center",{get:function(){var V=this.viewpoint.targetGeometry;return[V.x,V.y]}})}var C=t.default,D=w.SymbolProcessor,E=x.default,F=e("esri-will-change"),G=void 0===e("ie")&&7<=e("trident"),J=e("safari"),R=G||e("edge"),O=function(){var K=window.performance||{},V=K.now||
K.webkitNow||K.msNow||K.oNow||K.mozNow;if(void 0!==V)return function(){return V.call(K)};var Q=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-Q}}();t=e("ff");w=e("ie");x=e("webkit");e=e("opera");var P=(new Date).getTime(),U=window.requestAnimationFrame;U||(U=window[(x&&"webkit"||t&&"moz"||e&&"o"||w&&"ms")+"RequestAnimationFrame"])||(U=function(K){var V=
O(),Q=Math.max(0,16-(V-P)),W=window.setTimeout(function(){K(O())},Q);P=V+Q;return W});r=r(null,{surfaceType:"webgl",surface:null,map:null,layer:null,updateOnPan:!1,renderOnNav:!1,_canvas:null,_mapSR4:null,_dprWatchDelay:2E3,_dprTimer:null,_rendererEvalTimer:null,_redrawPromises:null,_defaultTileSize:512,_tileInfo:null,_tileInfoView:null,_wglContainer:null,_wglView:null,_tileRenderer:null,_tileRendererProps:null,_layerListenerHandles:null,_mapListenerHandles:null,_symbolProcessor:null,_returnCentroid:null,
_started:!1,_renderRequested:!1,_updateRequested:!1,_frameRequested:!1,_frameHandle:null,_viewState:null,_renderParameters:null,_updateParameters:null,_zooming:!1,_panning:!1,_scaleMatrix:null,_defaultTransition:"transform 500ms ease",_panDx:0,_panDy:0,_clipRect:null,constructor:function(K){this._frame=this._frame.bind(this);this._evalRendererChange=this._evalRendererChange.bind(this);this._redrawPromises=new Map;m.mixin(this,K);this._setup()},destroy:function(){this._teardown()},getNode:function(){return this._canvas},
getEventSource:function(){return this.getNode()},setClip:function(K){this._clipRect=null;var V=R&&G?"rect(auto,auto,auto,auto)":null;if(K){V=K.x;var Q=K.y,W=K.width;K=K.height;this._clipRect={x:V,y:Q,width:W,height:K};var N=this.layer.getNavigationTransform();V+=N.dx;Q+=N.dy;V=R?this._getClipRect(V,Q,W,K):this._getClipPath(V,Q,W,K)}l.set(this.getNode(),R?"clip":"clip-path",V);J&&l.set(this.getNode(),"-webkit-clip-path",V)},start:function(){this._started=!0;this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio;this._watchDPR();this._updateMapView(this.map.extent)},stop:function(){this._started=!1;this._unwatchDPR();this._stopFrame()},redraw:function(){this._handleRendererChange()},hitTest:function(K,V){return this.layer.suspended?d.resolve(null):this._wglView.hitTest(K,V).then(function(Q){return 0===Q.length?null:this.layer._mode._featureMap[Q[0]]}.bind(this))},syncHitTest:function(K,V){var Q=this._wglContainer.prepareChildrenRenderParameters(this._renderParameters);Q=this._wglView.prepareChildrenRenderParameters(Q);
K=this._wglView._hitTest(Q,K,V);this._scheduleRender();return this.layer._mode._featureMap[K[0]]},_setup:function(){this._initState();this._createWGLContainer();this._createTileRenderer();this._applyLayerSettings();this._createMapListeners();this._setViewState();this._initRendering()},_teardown:function(){this._destroyRendering();this._destroyMapListeners();this._destroyLayerListeners();this._destroyTileRenderer();this._destroyWGLContainer();this.stop();this.surface.getEventSource().removeChild(this.getNode())},
_createWGLContainer:function(){this._wglContainer=new q;this._canvas=this._wglContainer.createElement();F&&l.set(this._canvas,"will-change","transform");this._wglContainer.setElement(this._canvas);this.surface.getEventSource().appendChild(this._canvas);this._wglContainer.parent={requestChildRender:this._scheduleRender.bind(this)};this._wglContainer.attach(this._renderParameters)},_destroyWGLContainer:function(){this._wglContainer.detach(this._renderParameters);this._wglContainer=null},_createTileRenderer:function(){var K=
this.layer;this._tileRendererProps={layerView:{requestUpdate:function(){this._scheduleUpdate()}.bind(this)},highlightOptions:new z,layer:{objectIdField:K.objectIdField,geometryType:this._getNormalizedGeometryType(K),spatialReference:new b(K.spatialReference.toJson()),fields:K.fields,typeIdField:K.typeIdField,types:a.map(K.types,function(V){return V.toJson()}),outFields:K.getOutFields(),definitionExpression:null,renderer:this._getRenderer4(),gdbVersion:null,historicMoment:null},tileInfoView:this._tileInfoView};
this._tileRenderer=new E(this._tileRendererProps);this._installTileRenderer(this._tileRenderer)},_installTileRenderer:function(K){this._wglView=new C({highlightOptions:K.highlightOptions,tileInfoView:K.tileInfoView,layer:this.layer});K._featuresView=this._wglView;this._wglContainer.addChild(this._wglView);this._wglView._container=this._wglContainer},_getNormalizedGeometryType:function(K){return K.hasXYFootprint()?"esriGeometryPolygon":K.geometryType},_destroyTileRenderer:function(){this._wglContainer.removeChild(this._wglView);
this._wglView.dispose();this._tileRendererProps=this._tileRenderer=this._wglView=this._wglView._container=null},_applyLayerSettings:function(){this._wglContainer.opacity=this.layer.opacity;this._wglContainer.visible=!this.layer.suspended;this._createLayerListeners()},_createLayerListeners:function(){this._destroyLayerListeners();var K=this.layer;this._layerListenerHandles=[K.on("opacity-change",function(){this._wglContainer.opacity=this.layer.opacity}.bind(this)),K.on("suspend",function(){this._wglContainer.visible=
!1}.bind(this)),K.on("resume",function(){this._wglContainer.visible=!0}.bind(this)),K.on("renderer-change",function(){this._handleRendererChange()}.bind(this))]},_destroyLayerListeners:function(){a.forEach(this._layerListenerHandles,function(K){K.remove()});this._layerListenerHandles=null},_createMapListeners:function(){this._destroyMapListeners();var K=this.map;this._mapListenerHandles=[K.on("pan-start",function(V){this._panning=!0;this.updateOnPan||this.renderOnNav||this._stopFrame()}.bind(this)),
K.on("pan",function(V){this._applyPanEvent(V)}.bind(this)),K.on("pan-end",function(V){this._panning=!1;this._applyPanEvent(V)}.bind(this)),K.on("extent-change",function(V){l.set(this.getNode(),p._css.names.transition,"none");this._updateMapView(V.extent)}.bind(this)),K.on("zoom-start",function(V){this._zooming=!0;this._stopFrame()}.bind(this)),K.on("zoom-end",function(V){this._zooming=!1}.bind(this)),K.on("scale",function(V){if(!this.renderOnNav){l.set(this.getNode(),p._css.names.transition,V.immediate?
"none":this._defaultTransition);var Q=this.map.__visibleDelta;Q=k.translate(-Q.x,-Q.y);this._scaleMatrix=V=k.multiply(k.invert(Q),V.matrix,Q);this._applyTransform(V)}}.bind(this))]},_destroyMapListeners:function(){a.forEach(this._mapListenerHandles,function(K){K.remove()});this._mapListenerHandles=null},_getRenderer4:function(K){if(K=K||this.layer._getRenderer()){K=this._fixImageUrl(K.toJson());var V;"simple"===K.type?V=c.fromJSON(K):"classBreaks"===K.type?V=v.fromJSON(K):"uniqueValue"===K.type&&
(V=u.fromJSON(K));return V}},_fixImageUrl:function(K){var V=[];switch(K.type){case "simple":V.push(K.symbol);break;case "uniqueValue":V.push(K.defaultSymbol);V=V.concat(a.map(K.uniqueValueInfos,function(I){return I.symbol}));break;case "classBreaks":V.push(K.defaultSymbol),V=V.concat(a.map(K.classBreakInfos,function(I){return I.symbol}))}V=a.filter(V,function(I){return!!I});var Q=this.layer,W=Q._url.path+"/images/",N=Q._getToken();a.forEach(V,function(I){var S=I.url;S&&(-1===S.search(/https?:/)&&
-1===S.indexOf("data:")&&(I.url=W+S),N&&-1!==I.url.search(/https?:/)&&f.hasSameOrigin(I.url,Q._url.path)&&(I.url+="?token\x3d"+N))});return K},_setRenderer:function(K){this._tileRendererProps.layer.renderer=K;K=this._tileRenderer.getProcessorConfiguration();var V=this._symbolProcessor;V.setConfiguration(K);this._returnCentroid=V._getReturnCentroid(V.getRendererInfo().renderer);return K},_handleRendererChange:function(){this._rendererEvalTimer||(this._rendererEvalTimer=setTimeout(this._evalRendererChange,
0))},_cancelRendererEval:function(){clearTimeout(this._rendererEvalTimer);this._rendererEvalTimer=null},_evalRendererChange:function(){this._cancelRendererEval();var K=this._returnCentroid,V=this._setRenderer(this._getRenderer4());this._cancelRedraw();this._tileRenderer.needsProcessorReconfiguration(V)?(this._tileRenderer.applyConfiguration(V,!0),K!==this._returnCentroid&&this._returnCentroid?this.layer._mode.refresh():this._redrawView()):(this._tileRenderer.applyConfiguration(V,!1),this._scheduleUpdate())},
_redrawView:function(){this._wglView.children.slice(0).forEach(function(K,V){V=K.key.id;var Q=this.layer._mode._tileRequests.get(V);Q&&(K=this._redrawTile(Q.tsTile,K,Q.featureSet),K.isFulfilled()||this._redrawPromises.set(V,K))}.bind(this))},_redrawTile:function(K,V,Q){return this._symbolProcessor.getMeshData(K,Q).then(function(W){var N=V.key.id;this._redrawPromises["delete"](N);this.layer._mode._tileRequests.get(N)&&this._repaintTile(V,W.data)}.bind(this)).otherwise(function(W){this._redrawPromises["delete"](V.key.id)}.bind(this))},
_repaintTile:function(K,V){this._wglView.removeChild(K);K.attached=!1;this._tileRenderer.onTileData({tileKey:K.key.id,data:V});this._wglView.addChild(K)},_cancelRedraw:function(K){K?(K=this._redrawPromises.get(K))&&K.cancel():this._redrawPromises.forEach(function(V,Q){V.cancel()})},_initState:function(){this._mapSR4=new b(this.map.spatialReference.toJson());var K={};y(K);this._viewState=m.mixin(K,{scale:0,size:[0,0],rotation:0,resolution:1,worldScreenWidth:0,spatialReference:this._mapSR4,viewpoint:{rotation:0,
scale:0,targetGeometry:{x:0,y:0},camera:null,clone:function(){var V=m.mixin({},this);V.targetGeometry&&(V.targetGeometry=m.mixin({},V.targetGeometry));return V}},toScreen:function(V,Q){var W=this.center[1]+this.resolution*this.height*.5;V[0]=(Q[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution;V[1]=(W-Q[1])/this.resolution;return V},toMap:function(V,Q){var W=this.center[1]+this.resolution*this.height*.5;V[0]=this.center[0]-this.resolution*this.width*.5+Q[0]*this.resolution;V[1]=W-
Q[1]*this.resolution;return V},clone:function(){var V=m.mixin({},this);y(V);V.size&&(V.size=V.size.slice(0));V.viewpoint&&(V.viewpoint=V.viewpoint.clone());return V}});this._renderParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._tileInfo=A.create({spatialReference:this._mapSR4,size:this._defaultTileSize});this._tileInfoView=new B(this._tileInfo)},_initRendering:function(){var K=
this._tileRendererProps.layer;this._symbolProcessor=new D({configuration:null,service:{fields:K.fields,geometryType:K.geometryType,objectIdField:K.objectIdField,typeIdField:K.typeIdField,types:K.types},spatialReference:this._mapSR4,tileRenderer:this._tileRenderer});K=this._setRenderer(this._getRenderer4());this._tileRenderer.applyConfiguration(K,!0)},_destroyRendering:function(){this._symbolProcessor&&this._symbolProcessor.destroy();this._cancelRendererEval();this._cancelRedraw()},_updateMapView:function(K){this._setViewState(K);
this._scheduleUpdate();this._scheduleRender()},_setViewState:function(K){var V=this.map;if(V.loaded){K=K?K.getCenter():V.extent.getCenter();var Q=this._viewState;Q.viewpoint.targetGeometry=K.toJson();Q.scale=Q.viewpoint.scale=V.getScale();Q.size=[V.width,V.height]}},_updateViewState:function(){var K=this._viewState;K.resolution=K.scale/(39.37*g.getUnitValueForSR(this.map.spatialReference)*96);var V=0;K.spatialReference.isWrappable&&(V=h.getInfo(K.spatialReference),V=V.valid[1]-V.valid[0]);K.worldScreenWidth=
Math.round(V/K.resolution)},_getClipPath:function(K,V,Q,W){return"inset("+(V?V-this._panDy:V)+"px "+(this.map.width-(K+Q)+this._panDx)+"px "+(this.map.height-(V+W)+this._panDy)+"px "+(K?K-this._panDx:K)+"px)"},_getClipRect:function(K,V,Q,W){V-=this._panDy;K-=this._panDx;return"rect("+V+"px, "+(K+Q)+"px, "+(V+W)+"px, "+K+"px)"},_stopFrame:function(){this._frameRequested=this._updateRequested=this._renderRequested=!1;cancelAnimationFrame(this._frameHandle);this._frameHandle=null},_canRender:function(){return this.renderOnNav||
!this._zooming&&!this._panning},_canUpdate:function(){return this.updateOnPan||!this._zooming&&!this._panning},_watchDPR:function(){this._unwatchDPR();this._dprTimer=setTimeout(function(){this._renderParameters.pixelRatio!==window.devicePixelRatio&&this._scheduleRender();this._watchDPR()}.bind(this),this._dprWatchDelay)},_unwatchDPR:function(){clearTimeout(this._dprTimer);this._dprTimer=null},_scheduleRender:function(){this._started&&this._canRender()&&(this._renderRequested=!0,this._scheduleFrame())},
_scheduleUpdate:function(){this._started&&this._canUpdate()&&(this._updateRequested=!0,this._scheduleFrame())},_scheduleFrame:function(){this._frameRequested||(this._frameRequested=!0,this._frameHandle=U(this._frame))},_frame:function(){this._frameRequested&&(this._frameRequested=!1,this._renderParameters.pixelRatio!==window.devicePixelRatio&&(this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=window.devicePixelRatio),this._updateParameters.stationary=this._renderParameters.stationary=
!0,this._updateViewState(),this._renderRequested&&this._canRender()&&(this._renderRequested=!1,l.set(this._canvas,p._css.names.transition,"none"),this._applyTransform(),this._scaleMatrix=null,this._wglContainer.doRender(this._renderParameters)),this._updateRequested&&this._canUpdate()&&(this._updateRequested=!1,this.layer._mode.update(this._updateParameters)))},_applyPanEvent:function(K){if(!this.renderOnNav){this._panDx=K.delta.x;this._panDy=K.delta.y;var V=k.translate(K.delta.x,K.delta.y);V=this._scaleMatrix?
k.multiply(V,this._scaleMatrix):V;this._applyTransform(V)}(this.updateOnPan||this.renderOnNav)&&this._updateMapView(K.extent)},_applyTransform:function(K){K=K?p._css.matrix(K):"";l.set(this._canvas,p._css.names.transform,K);K||(this._panDx=this._panDy=0,this.setClip(this._clipRect))}});n.setObject("layers.support.WebGLRenderer",r,p);return r})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(r,n){var a=r.matrix={},l={};a._degToRad=function(k){return l[k]||(l[k]=Math.PI*
k/180)};a._radToDeg=function(k){return k/Math.PI*180};a.Matrix2D=function(k){if(k)if("number"==typeof k)this.xx=this.yy=k;else if(k instanceof Array){if(0<k.length){for(var p=a.normalize(k[0]),m=1;m<k.length;++m){var e=p,f=a.normalize(k[m]);p=new a.Matrix2D;p.xx=e.xx*f.xx+e.xy*f.yx;p.xy=e.xx*f.xy+e.xy*f.yy;p.yx=e.yx*f.xx+e.yy*f.yx;p.yy=e.yx*f.xy+e.yy*f.yy;p.dx=e.xx*f.dx+e.xy*f.dy+e.dx;p.dy=e.yx*f.dx+e.yy*f.dy+e.dy}n.mixin(this,p)}}else n.mixin(this,k)};n.extend(a.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,
dy:0});n.mixin(a,{identity:new a.Matrix2D,flipX:new a.Matrix2D({xx:-1}),flipY:new a.Matrix2D({yy:-1}),flipXY:new a.Matrix2D({xx:-1,yy:-1}),translate:function(k,p){return 1<arguments.length?new a.Matrix2D({dx:k,dy:p}):new a.Matrix2D({dx:k.x,dy:k.y})},scale:function(k,p){return 1<arguments.length?new a.Matrix2D({xx:k,yy:p}):"number"==typeof k?new a.Matrix2D({xx:k,yy:k}):new a.Matrix2D({xx:k.x,yy:k.y})},rotate:function(k){var p=Math.cos(k);k=Math.sin(k);return new a.Matrix2D({xx:p,xy:-k,yx:k,yy:p})},
rotateg:function(k){return a.rotate(a._degToRad(k))},skewX:function(k){return new a.Matrix2D({xy:Math.tan(k)})},skewXg:function(k){return a.skewX(a._degToRad(k))},skewY:function(k){return new a.Matrix2D({yx:Math.tan(k)})},skewYg:function(k){return a.skewY(a._degToRad(k))},reflect:function(k,p){1==arguments.length&&(p=k.y,k=k.x);var m=k*k,e=p*p,f=m+e,g=2*k*p/f;return new a.Matrix2D({xx:2*m/f-1,xy:g,yx:g,yy:2*e/f-1})},project:function(k,p){1==arguments.length&&(p=k.y,k=k.x);var m=k*k,e=p*p,f=m+e,g=
k*p/f;return new a.Matrix2D({xx:m/f,xy:g,yx:g,yy:e/f})},normalize:function(k){return k instanceof a.Matrix2D?k:new a.Matrix2D(k)},isIdentity:function(k){return 1==k.xx&&0==k.xy&&0==k.yx&&1==k.yy&&0==k.dx&&0==k.dy},clone:function(k){var p=new a.Matrix2D,m;for(m in k)"number"==typeof k[m]&&"number"==typeof p[m]&&p[m]!=k[m]&&(p[m]=k[m]);return p},invert:function(k){k=a.normalize(k);var p=k.xx*k.yy-k.xy*k.yx;return k=new a.Matrix2D({xx:k.yy/p,xy:-k.xy/p,yx:-k.yx/p,yy:k.xx/p,dx:(k.xy*k.dy-k.yy*k.dx)/p,
dy:(k.yx*k.dx-k.xx*k.dy)/p})},_multiplyPoint:function(k,p,m){return{x:k.xx*p+k.xy*m+k.dx,y:k.yx*p+k.yy*m+k.dy}},multiplyPoint:function(k,p,m){k=a.normalize(k);return"number"==typeof p&&"number"==typeof m?a._multiplyPoint(k,p,m):a._multiplyPoint(k,p.x,p.y)},multiplyRectangle:function(k,p){var m=a.normalize(k);p=p||{x:0,y:0,width:0,height:0};if(a.isIdentity(m))return{x:p.x,y:p.y,width:p.width,height:p.height};k=a.multiplyPoint(m,p.x,p.y);var e=a.multiplyPoint(m,p.x,p.y+p.height),f=a.multiplyPoint(m,
p.x+p.width,p.y);p=a.multiplyPoint(m,p.x+p.width,p.y+p.height);m=Math.min(k.x,e.x,f.x,p.x);var g=Math.min(k.y,e.y,f.y,p.y);return{x:m,y:g,width:Math.max(k.x,e.x,f.x,p.x)-m,height:Math.max(k.y,e.y,f.y,p.y)-g}},multiply:function(k){for(var p=a.normalize(k),m=1;m<arguments.length;++m){var e=p,f=a.normalize(arguments[m]);p=new a.Matrix2D;p.xx=e.xx*f.xx+e.xy*f.yx;p.xy=e.xx*f.xy+e.xy*f.yy;p.yx=e.yx*f.xx+e.yy*f.yx;p.yy=e.yx*f.xy+e.yy*f.yy;p.dx=e.xx*f.dx+e.xy*f.dy+e.dx;p.dy=e.yx*f.dx+e.yy*f.dy+e.dy}return p},
_sandwich:function(k,p,m){return a.multiply(a.translate(p,m),k,a.translate(-p,-m))},scaleAt:function(k,p,m,e){switch(arguments.length){case 4:return a._sandwich(a.scale(k,p),m,e);case 3:return"number"==typeof m?a._sandwich(a.scale(k),p,m):a._sandwich(a.scale(k,p),m.x,m.y)}return a._sandwich(a.scale(k),p.x,p.y)},rotateAt:function(k,p,m){return 2<arguments.length?a._sandwich(a.rotate(k),p,m):a._sandwich(a.rotate(k),p.x,p.y)},rotategAt:function(k,p,m){return 2<arguments.length?a._sandwich(a.rotateg(k),
p,m):a._sandwich(a.rotateg(k),p.x,p.y)},skewXAt:function(k,p,m){return 2<arguments.length?a._sandwich(a.skewX(k),p,m):a._sandwich(a.skewX(k),p.x,p.y)},skewXgAt:function(k,p,m){return 2<arguments.length?a._sandwich(a.skewXg(k),p,m):a._sandwich(a.skewXg(k),p.x,p.y)},skewYAt:function(k,p,m){return 2<arguments.length?a._sandwich(a.skewY(k),p,m):a._sandwich(a.skewY(k),p.x,p.y)},skewYgAt:function(k,p,m){return 2<arguments.length?a._sandwich(a.skewYg(k),p,m):a._sandwich(a.skewYg(k),p.x,p.y)}});r.Matrix2D=
a.Matrix2D;return a})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(r,n,a,l,k,p,m,e,f){var g=n.getObject("dojox.gfx",!0),d=g._base={};g._hasClass=function(A,B){return(A=A.getAttribute("className"))&&0<=(" "+A+" ").indexOf(" "+B+" ")};g._addClass=function(A,B){var b=A.getAttribute("className")||"";(!b||0>(" "+b+" ").indexOf(" "+B+" "))&&A.setAttribute("className",
b+(b?" ":"")+B)};g._removeClass=function(A,B){var b=A.getAttribute("className");b&&A.setAttribute("className",b.replace(new RegExp("(^|\\s+)"+B+"(\\s+|$)"),"$1$2"))};d._getFontMeasurements=function(){var A={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},B;if(l("ie")){var b=k.doc.documentElement.style.fontSize||"";b||(k.doc.documentElement.style.fontSize="100%")}var h=e.create("div",{style:{position:"absolute",left:"0",top:"-100px",
width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},k.body());for(B in A)h.style.fontSize=B,A[B]=16*Math.round(12*h.offsetHeight/16)/12/1E3;l("ie")&&(k.doc.documentElement.style.fontSize=b);k.body().removeChild(h);return A};var q=null;d._getCachedFontMeasurements=function(A){if(A||!q)q=d._getFontMeasurements();return q};var t=null,w={};d._getTextBox=function(A,B,b){var h=arguments.length,c;t||(t=e.create("div",{style:{position:"absolute",
top:"-10000px",left:"0",visibility:"hidden"}},k.body()));var v=t;v.className="";var u=v.style;u.borderWidth="0";u.margin="0";u.padding="0";u.outline="0";if(1<h&&B)for(c in B)c in w||(u[c]=B[c]);2<h&&b&&(v.className=b);v.innerHTML=A;v.getBoundingClientRect?(u=v.getBoundingClientRect(),u={l:u.left,t:u.top,w:u.width||u.right-u.left,h:u.height||u.bottom-u.top}):u=f.getMarginBox(v);v.innerHTML="";return u};d._computeTextLocation=function(A,B,b,h){var c={};switch(A.align){case "end":c.x=A.x-B;break;case "middle":c.x=
A.x-B/2;break;default:c.x=A.x}c.y=A.y-b*(h?.75:1);return c};d._computeTextBoundingBox=function(A){if(!g._base._isRendered(A))return{x:0,y:0,width:0,height:0};var B=A.getShape();var b=A.getFont()||g.defaultFont;A=A.getTextWidth();b=g.normalizedLength(b.size);B=d._computeTextLocation(B,A,b,!0);return{x:B.x,y:B.y,width:A,height:b}};d._isRendered=function(A){for(A=A.parent;A&&A.getParent;)A=A.parent;return null!==A};var x=0;d._getUniqueId=function(){do var A=r._scopeName+"xUnique"+ ++x;while(m.byId(A));
return A};var z=l("pointer-events")?"touchAction":l("MSPointer")?"msTouchAction":null;d._fixMsTouchAction=z?function(A){A.rawNode.style[z]="none"}:function(){};n.mixin(g,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,
height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,
color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var A={};return function(B){var b=A[B];if(b)return new b;b=A[B]=function(){};b.prototype=g["default"+B];return new b}}(),normalizeColor:function(A){return A instanceof a?A:new a(A)},normalizeParameters:function(A,B){var b;if(B){var h={};for(b in A)b in B&&!(b in h)&&(A[b]=B[b])}return A},makeParameters:function(A,
B){var b=null;if(!B)return n.delegate(A);var h={};for(b in A)b in h||(h[b]=n.clone(b in B?B[b]:A[b]));return h},formatNumber:function(A,B){var b=A.toString();if(0<=b.indexOf("e"))b=A.toFixed(4);else{var h=b.indexOf(".");0<=h&&5<b.length-h&&(b=A.toFixed(4))}return 0>A?b:B?" "+b:b},makeFontString:function(A){return A.style+" "+A.variant+" "+A.weight+" "+A.size+" "+A.family},splitFontString:function(A){var B=g.getDefault("Font");A=A.split(/\s+/);if(!(5>A.length)){B.style=A[0];B.variant=A[1];B.weight=
A[2];var b=A[3].indexOf("/");B.size=0>b?A[3]:A[3].substring(0,b);var h=4;0>b&&("/"==A[4]?h=6:"/"==A[4].charAt(0)&&(h=5));h<A.length&&(B.family=A.slice(h).join(" "))}return B},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return g._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(A){return A*g.px_in_pt()},px2pt:function(A){return A/g.px_in_pt()},normalizedLength:function(A){if(0===A.length)return 0;if(2<A.length){var B=g.px_in_pt(),b=parseFloat(A);switch(A.slice(-2)){case "px":return b;
case "pt":return b*B;case "in":return 72*b*B;case "pc":return 12*b*B;case "mm":return b*g.mm_in_pt*B;case "cm":return b*g.cm_in_pt*B}}return parseFloat(A)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,equalSources:function(A,B){return A&&B&&A===B},switchTo:function(A){var B="string"==typeof A?g[A]:A;B&&(p.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),
function(b){g[b]=B[b]}),"string"==typeof A?g.renderer=A:p.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(b){return g.renderer=g[b]&&g[b].Surface===g.Surface?b:null}))}});return g})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(r,n,a){n.switchTo(a);return n})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(r,n,a,l,k){var p=null;a.add("vml",function(m,
e,f){f.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';m="adj"in f.firstChild;f.innerHTML="";return m});return{load:function(m,e,f){function g(){e(["dojox/gfx/"+d],function(w){r.renderer=d;p=w;f(w)})}if(p&&"force"!=m)f(p);else{var d=k.forceGfxRenderer;m=!d&&(n.isString(k.gfxRenderer)?k.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var q,t;!d&&m.length;)switch(m.shift()){case "svg":"SVGAngle"in l.global&&(d="svg");break;case "vml":a("vml")&&(d="vml");break;case "silverlight":try{a("ie")?(q=new ActiveXObject("AgControl.AgControl"),
q.IsVersionSupported("1.0"))&&(t=!0):navigator.plugins["Silverlight Plug-In"]&&(t=!0)}catch(w){t=!1}finally{q=null}t&&(d="silverlight");break;case "canvas":l.global.CanvasRenderingContext2D&&(d="canvas")}"canvas"===d&&!1!==k.canvasEvents&&(d="canvasWithEvents");"svg"==d&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(g):g()}}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q){function t(y,C){return a.doc.createElementNS?a.doc.createElementNS(y,C):a.doc.createElement(C)}function w(y,C,D,E){return y.setAttributeNS?y.setAttributeNS(C,D,E):y.setAttribute(D,E)}function x(y){return z.useSvgWeb?a.doc.createTextNode(y,!0):a.doc.createTextNode(y)}var z=g.svg={};z.useSvgWeb="undefined"!=typeof window.svgweb;var A=navigator.userAgent,B=n("ios"),b=n("android"),h=n("chrome")||b&&4<=b?"auto":"optimizeLegibility";z.xmlns={xlink:"http://www.w3.org/1999/xlink",
svg:"http://www.w3.org/2000/svg"};z.getRef=function(y){return y&&"none"!=y?y.match(/^url\(#.+\)$/)?l.byId(y.slice(5,-1)):y.match(/^#dojoUnique\d+$/)?l.byId(y.slice(1)):null:null};z.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var c=0;z.Shape=k("dojox.gfx.svg.Shape",d.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var y=
this.rawNode.getAttribute("fill");(y=z.getRef(y))&&y.parentNode.removeChild(y)}this.clip&&(y=this.rawNode.getAttribute("clip-path"))&&(y=l.byId(y.match(/gfx_clip[\d]+/)[0]))&&y.parentNode.removeChild(y);d.Shape.prototype.destroy.apply(this,arguments)},setFill:function(y){if(!y)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var C=function(E){this.setAttribute(E,D[E].toFixed(8))};if("object"==typeof y&&"type"in y){switch(y.type){case "linear":var D=
g.makeParameters(g.defaultLinearGradient,y);y=this._setFillObject(D,"linearGradient");p.forEach(["x1","y1","x2","y2"],C,y);break;case "radial":D=g.makeParameters(g.defaultRadialGradient,y);y=this._setFillObject(D,"radialGradient");p.forEach(["cx","cy","r"],C,y);break;case "pattern":D=g.makeParameters(g.defaultPattern,y),y=this._setFillObject(D,"pattern"),p.forEach(["x","y","width","height"],C,y)}this.fillStyle=D;return this}this.fillStyle=D=g.normalizeColor(y);this.rawNode.setAttribute("fill",D.toCss());
this.rawNode.setAttribute("fill-opacity",D.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(y){var C=this.rawNode;if(!y)return this.strokeStyle=null,C.setAttribute("stroke","none"),C.setAttribute("stroke-opacity",0),this;if("string"==typeof y||r.isArray(y)||y instanceof f)y={color:y};y=this.strokeStyle=g.makeParameters(g.defaultStroke,y);y.color=g.normalizeColor(y.color);if(y){var D=0>y.width?0:y.width;C.setAttribute("stroke",y.color.toCss());C.setAttribute("stroke-opacity",
y.color.a);C.setAttribute("stroke-width",D);C.setAttribute("stroke-linecap",y.cap);"number"==typeof y.join?(C.setAttribute("stroke-linejoin","miter"),C.setAttribute("stroke-miterlimit",y.join)):C.setAttribute("stroke-linejoin",y.join);var E=y.style.toLowerCase();E in z.dasharray&&(E=z.dasharray[E]);if(E instanceof Array){E=r._toArray(E);var F;for(F=0;F<E.length;++F)E[F]*=D;if("butt"!=y.cap){for(F=0;F<E.length;F+=2)E[F]-=D,1>E[F]&&(E[F]=1);for(F=1;F<E.length;F+=2)E[F]+=D}E=E.join(",")}C.setAttribute("stroke-dasharray",
E);C.setAttribute("dojoGfxStrokeStyle",y.style)}return this},_getParentSurface:function(){for(var y=this.parent;y&&!(y instanceof g.Surface);y=y.parent);return y},_setFillObject:function(y,C){var D=z.xmlns.svg;this.fillStyle=y;var E=this._getParentSurface().defNode,F=this.rawNode.getAttribute("fill");if(F=z.getRef(F))if(F.tagName.toLowerCase()!=C.toLowerCase()){var G=F.id;F.parentNode.removeChild(F);F=t(D,C);F.setAttribute("id",G);E.appendChild(F)}else for(;F.childNodes.length;)F.removeChild(F.lastChild);
else F=t(D,C),F.setAttribute("id",g._base._getUniqueId()),E.appendChild(F);if("pattern"==C)F.setAttribute("patternUnits","userSpaceOnUse"),D=t(D,"image"),D.setAttribute("x",0),D.setAttribute("y",0),D.setAttribute("width",(0>y.width?0:y.width).toFixed(8)),D.setAttribute("height",(0>y.height?0:y.height).toFixed(8)),w(D,z.xmlns.xlink,"xlink:href",y.src),F.appendChild(D);else for(F.setAttribute("gradientUnits","userSpaceOnUse"),C=0;C<y.colors.length;++C){E=y.colors[C];G=t(D,"stop");var J=E.color=g.normalizeColor(E.color);
G.setAttribute("offset",E.offset.toFixed(8));G.setAttribute("stop-color",J.toCss());G.setAttribute("stop-opacity",J.a);F.appendChild(G)}this.rawNode.setAttribute("fill","url(#"+F.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return F},_applyTransform:function(){if(this.matrix){var y=this.matrix;this.rawNode.setAttribute("transform","matrix("+y.xx.toFixed(8)+","+y.yx.toFixed(8)+","+y.xy.toFixed(8)+","+y.yy.toFixed(8)+","+y.dx.toFixed(8)+
","+y.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(y){y=this.rawNode=y;"image"!=this.shape.type&&y.setAttribute("fill","none");y.setAttribute("fill-opacity",0);y.setAttribute("stroke","none");y.setAttribute("stroke-opacity",0);y.setAttribute("stroke-width",1);y.setAttribute("stroke-linecap","butt");y.setAttribute("stroke-linejoin","miter");y.setAttribute("stroke-miterlimit",4);y.__gfxObject__=this},setShape:function(y){this.shape=g.makeParameters(this.shape,
y);for(var C in this.shape)if("type"!=C){y=this.shape[C];if("width"===C||"height"===C)y=0>y?0:y;this.rawNode.setAttribute(C,y)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(y){this.inherited(arguments);var C=y?"width"in y?"rect":"cx"in y?"ellipse":"points"in y?"polyline":"d"in y?"path":null:null;
if(y&&!C)return this;"polyline"===C&&(y=r.clone(y),y.points=y.points.join(","));var D,E=e.get(this.rawNode,"clip-path");E&&(D=l.byId(E.match(/gfx_clip[\d]+/)[0]))&&D.removeChild(D.childNodes[0]);y?(D?(C=t(z.xmlns.svg,C),D.appendChild(C)):(E="gfx_clip"+ ++c,this.rawNode.setAttribute("clip-path","url(#"+E+")"),D=t(z.xmlns.svg,"clipPath"),C=t(z.xmlns.svg,C),D.appendChild(C),this.rawNode.parentNode.insertBefore(D,this.rawNode),e.set(D,"id",E)),e.set(C,y)):(this.rawNode.removeAttribute("clip-path"),D&&
D.parentNode.removeChild(D));return this},_removeClipNode:function(){var y,C=e.get(this.rawNode,"clip-path");C&&(y=l.byId(C.match(/gfx_clip[\d]+/)[0]))&&y.parentNode.removeChild(y);return y}});z.Group=k("dojox.gfx.svg.Group",z.Shape,{constructor:function(){d.Container._init.call(this)},setRawNode:function(y){this.rawNode=y;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);z.Shape.prototype.destroy.apply(this,arguments)}});z.Group.nodeType="g";z.Rect=k("dojox.gfx.svg.Rect",[z.Shape,
d.Rect],{setShape:function(y){this.shape=g.makeParameters(this.shape,y);this.bbox=null;for(var C in this.shape)if("type"!=C&&"r"!=C){y=this.shape[C];if("width"===C||"height"===C)y=0>y?0:y;this.rawNode.setAttribute(C,y)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r));return this}});z.Rect.nodeType="rect";z.Ellipse=k("dojox.gfx.svg.Ellipse",[z.Shape,d.Ellipse],{});z.Ellipse.nodeType="ellipse";z.Circle=k("dojox.gfx.svg.Circle",[z.Shape,
d.Circle],{});z.Circle.nodeType="circle";z.Line=k("dojox.gfx.svg.Line",[z.Shape,d.Line],{});z.Line.nodeType="line";z.Polyline=k("dojox.gfx.svg.Polyline",[z.Shape,d.Polyline],{setShape:function(y,C){y&&y instanceof Array?(this.shape=g.makeParameters(this.shape,{points:y}),C&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=g.makeParameters(this.shape,y);this.bbox=null;this._normalizePoints();y=[];C=this.shape.points;for(var D=0;D<C.length;++D)y.push(C[D].x.toFixed(8),
C[D].y.toFixed(8));this.rawNode.setAttribute("points",y.join(" "));return this}});z.Polyline.nodeType="polyline";z.Image=k("dojox.gfx.svg.Image",[z.Shape,d.Image],{setShape:function(y){this.shape=g.makeParameters(this.shape,y);this.bbox=null;y=this.rawNode;for(var C in this.shape)if("type"!=C&&"src"!=C){var D=this.shape[C];if("width"===C||"height"===C)D=0>D?0:D;y.setAttribute(C,D)}y.setAttribute("preserveAspectRatio","none");w(y,z.xmlns.xlink,"xlink:href",this.shape.src);y.__gfxObject__=this;return this}});
z.Image.nodeType="image";z.Text=k("dojox.gfx.svg.Text",[z.Shape,d.Text],{setShape:function(y){this.shape=g.makeParameters(this.shape,y);this.bbox=null;y=this.rawNode;var C=this.shape;y.setAttribute("x",C.x);y.setAttribute("y",C.y);y.setAttribute("text-anchor",C.align);y.setAttribute("text-decoration",C.decoration);y.setAttribute("rotate",C.rotated?90:0);y.setAttribute("kerning",C.kerning?"auto":0);y.setAttribute("text-rendering",h);y.firstChild?y.firstChild.nodeValue=C.text:y.appendChild(x(C.text));
return this},getTextWidth:function(){var y=this.rawNode,C=y.parentNode;y=y.cloneNode(!0);y.style.visibility="hidden";var D=0,E=y.firstChild.nodeValue;C.appendChild(y);if(""!=E)for(;!D;)D=y.getBBox?parseInt(y.getBBox().width):68;C.removeChild(y);return D},getBoundingBox:function(){var y=null;if(this.getShape().text)try{y=this.rawNode.getBBox()}catch(C){y={x:0,y:0,width:0,height:0}}return y}});z.Text.nodeType="text";z.Path=k("dojox.gfx.svg.Path",[z.Shape,q.Path],{_updateWithSegment:function(y){this.inherited(arguments);
"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(y){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});z.Path.nodeType="path";z.TextPath=k("dojox.gfx.svg.TextPath",[z.Shape,q.TextPath],{_updateWithSegment:function(y){this.inherited(arguments);this._setTextPath()},setShape:function(y){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==
typeof this.shape.path){var y=this.rawNode;if(!y.firstChild){var C=t(z.xmlns.svg,"textPath"),D=x("");C.appendChild(D);y.appendChild(C)}C=(C=y.firstChild.getAttributeNS(z.xmlns.xlink,"href"))&&z.getRef(C);if(!C&&(D=this._getParentSurface())){D=D.defNode;C=t(z.xmlns.svg,"path");var E=g._base._getUniqueId();C.setAttribute("id",E);D.appendChild(C);w(y.firstChild,z.xmlns.xlink,"xlink:href","#"+E)}C&&C.setAttribute("d",this.shape.path)}},_setText:function(){var y=this.rawNode;if(!y.firstChild){var C=t(z.xmlns.svg,
"textPath"),D=x("");C.appendChild(D);y.appendChild(C)}y=y.firstChild;C=this.text;y.setAttribute("alignment-baseline","middle");switch(C.align){case "middle":y.setAttribute("text-anchor","middle");y.setAttribute("startOffset","50%");break;case "end":y.setAttribute("text-anchor","end");y.setAttribute("startOffset","100%");break;default:y.setAttribute("text-anchor","start"),y.setAttribute("startOffset","0%")}y.setAttribute("baseline-shift","0.5ex");y.setAttribute("text-decoration",C.decoration);y.setAttribute("rotate",
C.rotated?90:0);y.setAttribute("kerning",C.kerning?"auto":0);y.firstChild.data=C.text}});z.TextPath.nodeType="text";var v=534<function(){var y=/WebKit\/(\d*)/.exec(A);return y?y[1]:0}();z.Surface=k("dojox.gfx.svg.Surface",d.Surface,{constructor:function(){d.Container._init.call(this)},destroy:function(){d.Container.clear.call(this,!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(y,C){if(!this.rawNode)return this;y=0>y?0:y;C=0>C?0:C;this.rawNode.setAttribute("width",y);this.rawNode.setAttribute("height",
C);v&&(this.rawNode.style.width=y,this.rawNode.style.height=C);return this},getDimensions:function(){return this.rawNode?{width:g.normalizedLength(this.rawNode.getAttribute("width")),height:g.normalizedLength(this.rawNode.getAttribute("height"))}:null}});z.createSurface=function(y,C,D){var E=new z.Surface;E.rawNode=t(z.xmlns.svg,"svg");E.rawNode.setAttribute("overflow","hidden");C&&E.rawNode.setAttribute("width",0>C?0:C);D&&E.rawNode.setAttribute("height",0>D?0:D);C=t(z.xmlns.svg,"defs");E.rawNode.appendChild(C);
E.defNode=C;E._parent=l.byId(y);E._parent.appendChild(E.rawNode);g._base._fixMsTouchAction(E);return E};n={_setFont:function(){var y=this.fontStyle;this.rawNode.setAttribute("font-style",y.style);this.rawNode.setAttribute("font-variant",y.variant);this.rawNode.setAttribute("font-weight",y.weight);this.rawNode.setAttribute("font-size",y.size);this.rawNode.setAttribute("font-family",y.family)}};var u=d.Container;k=z.Container={openBatch:function(){if(!this._batch){var y=z.useSvgWeb?a.doc.createDocumentFragment(!0):
a.doc.createDocumentFragment();this.fragment=y}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(y){this!=y.getParent()&&(this.fragment?this.fragment.appendChild(y.rawNode):this.rawNode.appendChild(y.rawNode),u.add.apply(this,arguments),y.setClip(y.clip));return this},remove:function(y,C){this==y.getParent()&&(this.rawNode==y.rawNode.parentNode&&
this.rawNode.removeChild(y.rawNode),this.fragment&&this.fragment==y.rawNode.parentNode&&this.fragment.removeChild(y.rawNode),y._removeClipNode(),u.remove.apply(this,arguments));return this},clear:function(){for(var y=this.rawNode;y.lastChild;)y.removeChild(y.lastChild);var C=this.defNode;if(C){for(;C.lastChild;)C.removeChild(C.lastChild);y.appendChild(C)}return u.clear.apply(this,arguments)},getBoundingBox:u.getBoundingBox,_moveChildToFront:u._moveChildToFront,_moveChildToBack:u._moveChildToBack};
q=z.Creator={createObject:function(y,C){if(!this.rawNode)return null;var D=new y;y=t(z.xmlns.svg,y.nodeType);D.setRawNode(y);D.setShape(C);this.add(D);return D}};r.extend(z.Text,n);r.extend(z.TextPath,n);r.extend(z.Group,k);r.extend(z.Group,d.Creator);r.extend(z.Group,q);r.extend(z.Surface,k);r.extend(z.Surface,d.Creator);r.extend(z.Surface,q);z.fixTarget=function(y,C){y.gfxTarget||(y.gfxTarget=B&&y.target.wholeText?y.target.parentElement.__gfxObject__:y.target.__gfxObject__);return!0};z.useSvgWeb&&
(z.createSurface=function(y,C,D){var E=new z.Surface;C=0>C?0:C;D=0>D?0:D;if(!C||!D){var F=m.position(y);C=C||F.w;D=D||F.h}y=l.byId(y);F=y.id?y.id+"_svgweb":g._base._getUniqueId();var G=t(z.xmlns.svg,"svg");G.id=F;G.setAttribute("width",C);G.setAttribute("height",D);svgweb.appendChild(G,y);G.addEventListener("SVGLoad",function(){E.rawNode=this;E.isLoaded=!0;var J=t(z.xmlns.svg,"defs");E.rawNode.appendChild(J);E.defNode=J;if(E.onLoad)E.onLoad(E)},!1);E.isLoaded=!1;return E},z.Surface.extend({destroy:function(){var y=
this.rawNode;svgweb.removeChild(y,y.parentNode)}}),n={connect:function(y,C,D){"on"===y.substring(0,2)&&(y=y.substring(2));D=2==arguments.length?C:r.hitch(C,D);this.getEventSource().addEventListener(y,D,!1);return[this,y,D]},disconnect:function(y){this.getEventSource().removeEventListener(y[1],y[2],!1);delete y[0]}},r.extend(z.Shape,n),r.extend(z.Surface,n));return z})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),
function(r,n,a,l,k,p,m,e,f,g){function d(t,w){for(var x=t.length-1;w<x;)t[w]=t[++w];t.length=x}var q=r.shape={};q.Shape=a("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(k("gfxRegistry")){var t=q.register(this);this.getUID=function(){return t}}},destroy:function(){k("gfxRegistry")&&q.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=
null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var t=this.getBoundingBox();if(!t)return null;var w=this._getRealMatrix();return[g.multiplyPoint(w,t.x,t.y),g.multiplyPoint(w,t.x+t.width,t.y),g.multiplyPoint(w,t.x+
t.width,t.y+t.height),g.multiplyPoint(w,t.x,t.y+t.height)]},getEventSource:function(){return this.rawNode},setClip:function(t){this.clip=t},getClip:function(){return this.clip},setShape:function(t){this.shape=r.makeParameters(this.shape,t);this.bbox=null;return this},setFill:function(t){if(!t)return this.fillStyle=null,this;var w=null;if("object"==typeof t&&"type"in t)switch(t.type){case "linear":w=r.makeParameters(r.defaultLinearGradient,t);break;case "radial":w=r.makeParameters(r.defaultRadialGradient,
t);break;case "pattern":w=r.makeParameters(r.defaultPattern,t)}else w=r.normalizeColor(t);this.fillStyle=w;return this},setStroke:function(t){if(!t)return this.strokeStyle=null,this;if("string"==typeof t||n.isArray(t)||t instanceof f)t={color:t};t=this.strokeStyle=r.makeParameters(r.defaultStroke,t);t.color=r.normalizeColor(t.color);return this},setTransform:function(t){this.matrix=g.clone(t?g.normalize(t):g.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var t=
this.getParent();t&&(t._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var t=this.getParent();t&&(t._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(t){return t?this.setTransform([this.matrix,t]):this},applyLeftTransform:function(t){return t?this.setTransform([t,this.matrix]):this},applyTransform:function(t){return t?this.setTransform([this.matrix,t]):this},removeShape:function(t){this.parent&&
this.parent.remove(this,t);return this},_setParent:function(t,w){this.parent=t;return this._updateParentMatrix(w)},_updateParentMatrix:function(t){this.parentMatrix=t?g.clone(t):null;return this._applyTransform()},_getRealMatrix:function(){for(var t=this.matrix,w=this.parent;w;)w.matrix&&(t=g.multiply(w.matrix,t)),w=w.parent;return t}});q._eventsProcessing={on:function(t,w){return p(this.getEventSource(),t,q.fixCallback(this,r.fixTarget,w))},connect:function(t,w,x){"on"==t.substring(0,2)&&(t=t.substring(2));
return this.on(t,x?n.hitch(w,x):w)},disconnect:function(t){return t.remove()}};q.fixCallback=function(t,w,x,z){z||(z=x,x=null);if(n.isString(z)){x=x||l.global;if(!x[z])throw['dojox.gfx.shape.fixCallback: scope["',z,'"] is null (scope\x3d"',x,'")'].join("");return function(A){return w(A,t)?x[z].apply(x,arguments||[]):void 0}}return x?function(A){return w(A,t)?z.apply(x,arguments||[]):void 0}:function(A){return w(A,t)?z.apply(x,arguments):void 0}};n.extend(q.Shape,q._eventsProcessing);q.Container={_init:function(){this.children=
[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(t){var w=t.getParent();w&&w.remove(t,!0);this.children.push(t);return t._setParent(this,this._getRealMatrix())},remove:function(t,w){for(var x=0;x<this.children.length;++x)if(this.children[x]==t){w||(t.parent=null,t.parentMatrix=null);d(this.children,x);break}return this},clear:function(t){for(var w,x=0;x<this.children.length;++x)w=this.children[x],w.parent=null,w.parentMatrix=null,t&&w.destroy();this.children=
[];return this},getBoundingBox:function(){if(this.children){var t=null;m.forEach(this.children,function(w){var x=w.getBoundingBox();x&&((w=w.getTransform())&&(x=g.multiplyRectangle(w,x)),t?(t.x=Math.min(t.x,x.x),t.y=Math.min(t.y,x.y),t.endX=Math.max(t.endX,x.x+x.width),t.endY=Math.max(t.endY,x.y+x.height)):t={x:x.x,y:x.y,endX:x.x+x.width,endY:x.y+x.height})});t&&(t.width=t.endX-t.x,t.height=t.endY-t.y);return t}return null},_moveChildToFront:function(t){for(var w=0;w<this.children.length;++w)if(this.children[w]==
t){d(this.children,w);this.children.push(t);break}return this},_moveChildToBack:function(t){for(var w=0;w<this.children.length;++w)if(this.children[w]==t){d(this.children,w);this.children.unshift(t);break}return this}};q.Surface=a("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){m.forEach(this._nodes,e.destroy);this._nodes=[];m.forEach(this._events,function(t){t&&t.remove()});this._events=[];this.rawNode=null;
if(k("ie"))for(;this._parent.lastChild;)e.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(t){},whenLoaded:function(t,w){var x=n.hitch(t,w);if(this.isLoaded)x(this);else p.once(this,"load",function(z){x(z)})}});n.extend(q.Surface,q._eventsProcessing);q.Rect=a("dojox.gfx.shape.Rect",q.Shape,{constructor:function(t){this.shape=r.getDefault("Rect");this.rawNode=
t},getBoundingBox:function(){return this.shape}});q.Ellipse=a("dojox.gfx.shape.Ellipse",q.Shape,{constructor:function(t){this.shape=r.getDefault("Ellipse");this.rawNode=t},getBoundingBox:function(){if(!this.bbox){var t=this.shape;this.bbox={x:t.cx-t.rx,y:t.cy-t.ry,width:2*t.rx,height:2*t.ry}}return this.bbox}});q.Circle=a("dojox.gfx.shape.Circle",q.Shape,{constructor:function(t){this.shape=r.getDefault("Circle");this.rawNode=t},getBoundingBox:function(){if(!this.bbox){var t=this.shape;this.bbox={x:t.cx-
t.r,y:t.cy-t.r,width:2*t.r,height:2*t.r}}return this.bbox}});q.Line=a("dojox.gfx.shape.Line",q.Shape,{constructor:function(t){this.shape=r.getDefault("Line");this.rawNode=t},getBoundingBox:function(){if(!this.bbox){var t=this.shape;this.bbox={x:Math.min(t.x1,t.x2),y:Math.min(t.y1,t.y2),width:Math.abs(t.x2-t.x1),height:Math.abs(t.y2-t.y1)}}return this.bbox}});q.Polyline=a("dojox.gfx.shape.Polyline",q.Shape,{constructor:function(t){this.shape=r.getDefault("Polyline");this.rawNode=t},setShape:function(t,
w){t&&t instanceof Array?(this.inherited(arguments,[{points:t}]),w&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[t]);return this},_normalizePoints:function(){var t=this.shape.points,w=t&&t.length;if(w&&"number"==typeof t[0]){for(var x=[],z=0;z<w;z+=2)x.push({x:t[z],y:t[z+1]});this.shape.points=x}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var t=this.shape.points,w=t.length,x=t[0],z=x.x,A=x.y,B=x.x,b=x.y,h=1;h<w;++h)x=
t[h],z>x.x&&(z=x.x),B<x.x&&(B=x.x),A>x.y&&(A=x.y),b<x.y&&(b=x.y);this.bbox={x:z,y:A,width:B-z,height:b-A}}return this.bbox}});q.Image=a("dojox.gfx.shape.Image",q.Shape,{constructor:function(t){this.shape=r.getDefault("Image");this.rawNode=t},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});q.Text=a(q.Shape,{constructor:function(t){this.fontStyle=null;this.shape=r.getDefault("Text");this.rawNode=t},getFont:function(){return this.fontStyle},
setFont:function(t){this.fontStyle="string"==typeof t?r.splitFontString(t):r.makeParameters(r.defaultFont,t);this._setFont();return this},getBoundingBox:function(){var t=null;this.getShape().text&&(t=r._base._computeTextBoundingBox(this));return t}});q.Creator={createShape:function(t){switch(t.type){case r.defaultPath.type:return this.createPath(t);case r.defaultRect.type:return this.createRect(t);case r.defaultCircle.type:return this.createCircle(t);case r.defaultEllipse.type:return this.createEllipse(t);
case r.defaultLine.type:return this.createLine(t);case r.defaultPolyline.type:return this.createPolyline(t);case r.defaultImage.type:return this.createImage(t);case r.defaultText.type:return this.createText(t);case r.defaultTextPath.type:return this.createTextPath(t)}return null},createGroup:function(){return this.createObject(r.Group)},createRect:function(t){return this.createObject(r.Rect,t)},createEllipse:function(t){return this.createObject(r.Ellipse,t)},createCircle:function(t){return this.createObject(r.Circle,
t)},createLine:function(t){return this.createObject(r.Line,t)},createPolyline:function(t){return this.createObject(r.Polyline,t)},createImage:function(t){return this.createObject(r.Image,t)},createText:function(t){return this.createObject(r.Text,t)},createPath:function(t){return this.createObject(r.Path,t)},createTextPath:function(t){return this.createObject(r.TextPath,{}).setText(t)},createObject:function(t,w){return null}};return q})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang",
"dojo/_base/declare","./matrix","./shape"],function(r,n,a,l,k){k=a("dojox.gfx.path.Path",k.Shape,{constructor:function(p){this.shape=n.clone(r.defaultPath);this.segments=[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=p;this.segmented=!1},setAbsoluteMode:function(p){this._confirmSegmented();this.absolute="string"==typeof p?"absolute"==p:p;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&
"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();if(this.tbbox)return this.tbbox;var p=this.bbox,m=this._getRealMatrix();this.bbox=null;for(var e=0,f=this.segments.length;e<f;++e)this._updateWithSegment(this.segments[e],m);m=this.bbox;this.bbox=p;return this.tbbox=m?[{x:m.l,y:m.t},{x:m.r,y:m.t},{x:m.r,y:m.b},{x:m.l,y:m.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in
this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(p,m,e){e&&(m=l.multiplyPoint(e,p,m),p=m.x,m=m.y);this.bbox&&"l"in this.bbox?(this.bbox.l>p&&(this.bbox.l=p),this.bbox.r<p&&(this.bbox.r=p),this.bbox.t>m&&(this.bbox.t=m),this.bbox.b<m&&(this.bbox.b=m)):this.bbox={l:p,b:m,r:p,t:m}},_updateWithSegment:function(p,m){var e=p.args,f=e.length,g;switch(p.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(g=0;g<f;g+=2)this._updateBBox(e[g],
e[g+1],m);this.last.x=e[f-2];this.last.y=e[f-1];this.absolute=!0;break;case "H":for(g=0;g<f;++g)this._updateBBox(e[g],this.last.y,m);this.last.x=e[f-1];this.absolute=!0;break;case "V":for(g=0;g<f;++g)this._updateBBox(this.last.x,e[g],m);this.last.y=e[f-1];this.absolute=!0;break;case "m":g=0;"x"in this.last||(this._updateBBox(this.last.x=e[0],this.last.y=e[1],m),g=2);for(;g<f;g+=2)this._updateBBox(this.last.x+=e[g],this.last.y+=e[g+1],m);this.absolute=!1;break;case "l":case "t":for(g=0;g<f;g+=2)this._updateBBox(this.last.x+=
e[g],this.last.y+=e[g+1],m);this.absolute=!1;break;case "h":for(g=0;g<f;++g)this._updateBBox(this.last.x+=e[g],this.last.y,m);this.absolute=!1;break;case "v":for(g=0;g<f;++g)this._updateBBox(this.last.x,this.last.y+=e[g],m);this.absolute=!1;break;case "c":for(g=0;g<f;g+=6)this._updateBBox(this.last.x+e[g],this.last.y+e[g+1],m),this._updateBBox(this.last.x+e[g+2],this.last.y+e[g+3],m),this._updateBBox(this.last.x+=e[g+4],this.last.y+=e[g+5],m);this.absolute=!1;break;case "s":case "q":for(g=0;g<f;g+=
4)this._updateBBox(this.last.x+e[g],this.last.y+e[g+1],m),this._updateBBox(this.last.x+=e[g+2],this.last.y+=e[g+3],m);this.absolute=!1;break;case "A":for(g=0;g<f;g+=7)this._updateBBox(e[g+5],e[g+6],m);this.last.x=e[f-2];this.last.y=e[f-1];this.absolute=!0;break;case "a":for(g=0;g<f;g+=7)this._updateBBox(this.last.x+=e[g+5],this.last.y+=e[g+6],m);this.absolute=!1}p=[p.action];for(g=0;g<f;++g)p.push(r.formatNumber(e[g],!0));if("string"==typeof this.shape.path)this.shape.path+=p.join("");else for(g=
0,f=p.length;g<f;++g)this.shape.path.push(p[g])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(p,m){this.tbbox=null;var e=this._validSegments[p.toLowerCase()];"number"==typeof e&&(e?m.length>=e&&(p={action:p,args:m.slice(0,m.length-m.length%e)},this.segments.push(p),this._updateWithSegment(p)):(p={action:p,args:[]},this.segments.push(p),this._updateWithSegment(p)))},_collectArgs:function(p,m){for(var e=0;e<m.length;++e){var f=m[e];"boolean"==typeof f?p.push(f?1:0):
"number"==typeof f?p.push(f):f instanceof Array?this._collectArgs(p,f):"x"in f&&"y"in f&&p.push(f.x,f.y)}},moveTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"M":"m",p);return this},lineTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"L":"l",p);return this},hLineTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?
"H":"h",p);return this},vLineTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"V":"v",p);return this},curveTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"C":"c",p);return this},smoothCurveTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"S":"s",p);return this},qCurveTo:function(){this._confirmSegmented();var p=
[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"Q":"q",p);return this},qSmoothCurveTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"T":"t",p);return this},arcTo:function(){this._confirmSegmented();var p=[];this._collectArgs(p,arguments);this._pushSegment(this.absolute?"A":"a",p);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var p=
this.shape.path;this.shape.path=[];this._setPath(p);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(p){p=n.isArray(p)?p:p.match(r.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(p){for(var m="",e=[],f=p.length,g=0;g<f;++g){var d=p[g],q=parseFloat(d);isNaN(q)?(m&&this._pushSegment(m,e),e=[],m=d):e.push(q)}this._pushSegment(m,e)}},setShape:function(p){this.inherited(arguments,["string"==typeof p?{path:p}:p]);this.segmented=!1;this.segments=
[];r.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});a=a("dojox.gfx.path.TextPath",k,{constructor:function(p){"text"in this||(this.text=n.clone(r.defaultTextPath));"fontStyle"in this||(this.fontStyle=n.clone(r.defaultFont))},getText:function(){return this.text},setText:function(p){this.text=r.makeParameters(this.text,"string"==typeof p?{text:p}:p);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(p){this.fontStyle="string"==typeof p?
r.splitFontString(p):r.makeParameters(r.defaultFont,p);this._setFont();return this}});return r.path={Path:k,TextPath:a}})},"dojox/gfx/filters":function(){define(["dojo/_base/lang","dojo/_base/array"],function(r,n){var a={},l={x:"0%",y:"0%",width:"100%",height:"100%"},k={};a.createFilter=function(q,t){q=r.mixin({},l,q);q.primitives||(q.primitives=[]);t&&Array.prototype.push.apply(q.primitives,t);return q};var p=function(q,t,w){t instanceof Array&&(w=t,t=null);t=r.mixin({},t);t.children=w;t.tag=q;return t};
n.forEach("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feGaussianBlur feImage feMorphology feOffset feSpecularLighting feTile feTurbulence feDistantLight fePointLight feSpotLight feMergeNode feFuncA feFuncR feFuncG feFuncB".split(" "),function(q){a[q]=function(t,w){return p(q,t,w)}});a.feMerge=function(q,t){if("string"===typeof q){for(var w=[],x=0;x<arguments.length;++x)w.push(a.feMergeNode({"in":arguments[x]}));return p("feMerge",
{},w)}return p("feMerge",q,t)};var m=a.createFilter;k.convolutions=[m({_gfxName:"boxBlur3"},[a.feConvolveMatrix({"in":"SourceGraphic",order:3,divisor:9,kernelMatrix:"1,1,1,1,1,1,1,1,1"})]),m({_gfxName:"boxBlur5"},[a.feConvolveMatrix({"in":"SourceGraphic",order:5,divisor:25,kernelMatrix:"1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1"})]),m({_gfxName:"verticalEdges",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 0 1 -1 0 1 -1 0 1"}),
a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),m({_gfxName:"horizontalEdges",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"1 1 1 0 0 0 -1 -1 -1"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),m({_gfxName:"allEdges3",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 -1 -1 -1 8 -1 -1 -1 -1"}),
a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),m({_gfxName:"edgeEnhance",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:-1,kernelMatrix:"0 1 0 1 -5 1 0 1 0"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])])];n.forEach(k.convolutions,function(q){r.mixin(q,l)});k.shadows=[m({_gfxName:"fastSmallDropShadow"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",
values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),a.feOffset({dx:3,dy:3,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"fastDropShadow"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"fastDropShadowLight"},[a.feColorMatrix({"in":"SourceAlpha",
type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.4,0"}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"dropShadow"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"dropShadowLight"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4,result:"blur"}),a.feComponentTransfer({"in":"blur",
result:"lessblur"},[a.feFuncA({type:"linear",slope:.5})]),a.feOffset({"in":"lessblur",dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"smallDropShadow"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3}),a.feOffset({dx:2,dy:2,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),m({_gfxName:"smallDropShadowLight"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",
slope:.5})]),a.feOffset({"in":"lessblur",dx:2,dy:2,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")])];var e={x:"-10%",y:"-10%",width:"125%",height:"125%"};n.forEach(k.shadows,function(q){r.mixin(q,e)});k.blurs=[m({_gfxName:"blur1",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:1})]),m({_gfxName:"blur2",x:"-15%",y:"-15%",width:"130%",height:"130%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2})]),m({_gfxName:"blur4",x:"-15%",
y:"-15%",width:"130%",height:"130%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:4})]),m({_gfxName:"blur8",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:8})]),m({_gfxName:"glow",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2}),a.feComponentTransfer([a.feFuncA({type:"linear",slope:10})])])];k.colors=[m({_gfxName:"negate"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"1,0"}),
a.feFuncG({type:"table",tableValues:"1,0"}),a.feFuncB({type:"table",tableValues:"1,0"})])]),m({_gfxName:"sepia"},[a.feColorMatrix({result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"}),a.feComponentTransfer({"in":"grey"},[a.feFuncR({type:"linear",slope:.5,intercept:.5}),a.feFuncB({type:"table",tableValues:"0,0"})])]),m({_gfxName:"grayscale"},[a.feColorMatrix({values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"})]),
m({_gfxName:"showRed"},[a.feComponentTransfer([a.feFuncG({type:"table",tableValues:"0,0"}),a.feFuncB({type:"table",tableValues:"0,0"})])]),m({_gfxName:"showGreen"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"0,0"}),a.feFuncB({type:"table",tableValues:"0,0"})])]),m({_gfxName:"showBlue"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"0,0"}),a.feFuncG({type:"table",tableValues:"0,0"})])]),m({_gfxName:"hueRotate60"},[a.feColorMatrix({type:"hueRotate",values:60})]),m({_gfxName:"hueRotate120"},
[a.feColorMatrix({type:"hueRotate",values:120})]),m({_gfxName:"hueRotate180"},[a.feColorMatrix({type:"hueRotate",values:180})]),m({_gfxName:"hueRotate270"},[a.feColorMatrix({type:"hueRotate",values:270})])];n.forEach(k.colors,function(q){r.mixin(q,l)});k.miscs=[m({_gfxName:"thinEmbossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),a.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:8,
specularConstant:1,specularExponent:12,result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),m({_gfxName:"embossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"4",result:"blur"}),a.feOffset({"in":"blur",
dx:4,dy:4,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:5,specularConstant:.75,specularExponent:20,"lighting-color":"#bbbbbb",result:"specOut"},[a.fePointLight({x:-5E3,y:-1E4,z:2E4})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0,result:"litPaint"}),a.feMerge("offsetBlur","litPaint")]),m({_gfxName:"largeEmbossDropShadow",x:"-20%",y:"-20%",width:"140%",
height:"140%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:5,result:"blur"}),a.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"spec"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur",
"litPaint")]),m({_gfxName:"thinEmbossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"lessblur",surfaceScale:8,specularConstant:1,specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",
in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),m({_gfxName:"embossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),
a.feSpecularLighting({"in":"lessblur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"}),a.feMerge("offsetBlur","litPaint")]),m({_gfxName:"largeEmbossDropShadowLight",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:"5",result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"spec"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",
k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"}),a.feMerge("offsetBlur","litPaint")]),m({_gfxName:"fuzzy",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),a.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]),m({_gfxName:"veryFuzzy",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",
result:"turb2"}),a.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"35",xChannelSelector:"R",yChannelSelector:"G"})]),m({_gfxName:"melting",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"2",result:"turb"}),a.feDisplacementMap({result:"bended","in":"SourceGraphic",in2:"turb",scale:"25",xChannelSelector:"R",yChannelSelector:"G"}),a.feGaussianBlur({"in":"bended",stdDeviation:"1",result:"bb"}),a.feComponentTransfer({"in":"bb",
result:"BendedSource"},[a.feFuncA({type:"linear",slope:10,intercept:"-1"})]),a.feComponentTransfer({"in":"BendedSource",result:"BendedAlpha"},[a.feFuncR({type:"linear",slope:"0",intercept:"0"}),a.feFuncG({type:"linear",slope:"0",intercept:"0"}),a.feFuncB({type:"linear",slope:"0",intercept:"0"}),a.feFuncA({type:"linear",slope:"1",intercept:"0"})]),a.feGaussianBlur({"in":"BendedAlpha",stdDeviation:"1",result:"blur"}),a.feSpecularLighting({"in":"blur","lighting-color":"rgb(80%, 80%, 80%)",surfaceScale:"5",
specularConstant:"1",specularExponent:"10",result:"specularOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"20000"})]),a.feComposite({"in":"specularOut",in2:"BendedAlpha",operator:"in",result:"specularOut"}),a.feComposite({"in":"BendedSource",in2:"specularOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]),m({_gfxName:"impressionist",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feMorphology({"in":"SourceGraphic",operator:"dilate",radius:"2"})]),m({_gfxName:"holes",x:"0%",y:"0%",
width:"100%",height:"100%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),a.feComponentTransfer({"in":"texture",result:"holes"},[a.feFuncA({type:"discrete",tableValues:"0,1"})]),a.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})]),m({_gfxName:"holesComplement",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),a.feComponentTransfer({"in":"texture",result:"holes"},
[a.feFuncA({type:"discrete",tableValues:"1,0"})]),a.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})])];k.reliefs=[m({_gfxName:"bumpIn",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),a.feComponentTransfer({"in":"lumalpha",result:"invertedalpha"},[a.feFuncA({type:"table",tableValues:"1,0"})]),a.feDiffuseLighting({"in":"invertedalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[a.feDistantLight({azimuth:"135",
elevation:"60"})]),a.feSpecularLighting({"in":"invertedalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[a.feDistantLight({azimuth:"135",elevation:"30"})]),a.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),m({_gfxName:"bumpOut",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),a.feDiffuseLighting({"in":"lumalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},
[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"lumalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[a.feDistantLight({azimuth:"135",elevation:"30"})]),a.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),m({_gfxName:"thinEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"1",result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",
result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),m({_gfxName:"emboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},
[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),m({_gfxName:"largeEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",
y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})])];k.textures=[m({_gfxName:"paper",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.01",numOctaves:"5",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",
in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),m({_gfxName:"swirl",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.05",numOctaves:"1",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),m({_gfxName:"swirl2",x:"0%",y:"0%",width:"100%",
height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.15",numOctaves:"1",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),m({_gfxName:"gold",x:"-5%",y:"-5%",width:"115%",height:"110%"},[a.feTurbulence({baseFrequency:"0.2",numOctaves:"1",type:"turbulence",result:"turb"}),a.feComposite({"in":"SourceGraphic",
in2:"turb",operator:"arithmetic",k2:"0.6",k3:"0.4",result:"turb"}),a.feComposite({"in":"turb",in2:"SourceGraphic",operator:"in",result:"bump"}),a.feDiffuseLighting({"in":"turb",surfaceScale:"6.0","lighting-color":"rgb(60%, 50%, 0%)",diffuseConstant:"1.0",result:"diffuse"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"bump",surfaceScale:"6.0",specularConstant:"1.0",specularExponent:"10.0",result:"specularOut"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"specularOut",
in2:"SourceGraphic",operator:"in",result:"specularOut"}),a.feComposite({"in":"bump",in2:"diffuse",operator:"arithmetic",k1:"0.7",k2:"0.3",result:"litPaint"}),a.feComposite({"in":"litPaint",in2:"specularOut",operator:"arithmetic",k2:"1.0",k3:"0.7",result:"litPaint"})])];for(var f in k)if(k.hasOwnProperty(f)){a[f]={};for(var g=k[f],d=0;d<g.length;++d)(function(){var q=g[d];a[f][q._gfxName]=function(t){return r.delegate(q,t)}})()}return a})},"dojox/gfx/svgext":function(){define(["dojo/dom","dojo/_base/array",
"dojo/_base/window","./_base","./svg"],function(r,n,a,l,k){function p(e,f){var g=f.ownerDocument.createElementNS(k.xmlns.svg,e.tag);f.appendChild(g);for(var d in e)d in m||g.setAttribute(d,e[d]);e.children&&n.forEach(e.children,function(q){p(q,g)});return g}a=l.svgext={};var m={primitives:null,tag:null,children:null};k.Shape.extend({addRenderingOption:function(e,f){this.rawNode.setAttribute(e,f);return this},setFilter:function(e){if(!e)return this.rawNode.removeAttribute("filter"),this.filter=null,
this;this.filter=e;e.id=e.id||l._base._getUniqueId();var f=r.byId(e.id);if(!f){f=this.rawNode.ownerDocument.createElementNS(k.xmlns.svg,"filter");f.setAttribute("filterUnits","userSpaceOnUse");for(var g in e)g in m||f.setAttribute(g,e[g]);n.forEach(e.primitives,function(d){p(d,f)});(g=this._getParentSurface())&&g.defNode.appendChild(f)}this.rawNode.setAttribute("filter","url(#"+e.id+")");return this},getFilter:function(){return this.filter}});return a})},"dojox/gfx/_gfxBidiSupport":function(){define("./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape ./path dojox/string/BidiEngine".split(" "),
function(r,n,a,l,k,p,m,e,f,g){function d(w,x){var z=q(x);z&&r.utils.forEach(w,function(A){if(A instanceof r.Surface||A instanceof r.Group)A.textDir=z;A instanceof r.Text&&A.setShape({textDir:z});A instanceof r.TextPath&&A.setText({textDir:z})},w);return w}function q(w){var x=["ltr","rtl","auto"];return w&&(w=w.toLowerCase(),0>p.indexOf(x,w))?null:w}n.getObject("dojox.gfx._gfxBidiSupport",!0);switch(r.renderer){case "vml":r.isVml=!0;break;case "svg":r.isSvg=!0;r.svg.useSvgWeb&&(r.isSvgWeb=!0);break;
case "silverlight":r.isSilverlight=!0;break;case "canvas":case "canvasWithEvents":r.isCanvas=!0}var t=new g;n.extend(r.shape.Surface,{textDir:"",setTextDir:function(w){d(this,w)},getTextDir:function(){return this.textDir}});n.extend(r.Group,{textDir:"",setTextDir:function(w){d(this,w)},getTextDir:function(){return this.textDir}});n.extend(r.Text,{textDir:"",formatText:function(w,x){if(x&&w&&1<w.length){var z="ltr";if("auto"==x){if(r.isVml)return w;x=t.checkContextual(w)}if(r.isVml)return z=t.checkContextual(w),
x!=z?"rtl"==x?t.hasBidiChar(w)?"\u200f\u200f"+w:t.bidiTransform(w,"IRNNN","ILNNN"):"\u200e"+w:w;if(r.isSvgWeb)return"rtl"==x?t.bidiTransform(w,"IRNNN","ILNNN"):w;if(r.isSilverlight)return"rtl"==x?t.bidiTransform(w,"IRNNN","VLYNN"):t.bidiTransform(w,"ILNNN","VLYNN");if(r.isCanvas)return"rtl"==x?"\u202b"+w+"\u202c":"\u202a"+w+"\u202c";if(r.isSvg)return 4>a("ff")?"rtl"==x?t.bidiTransform(w,"IRYNN","VLNNN"):t.bidiTransform(w,"ILYNN","VLNNN"):"\u200e"+("rtl"==x?"\u202b":"\u202a")+w+"\u202c"}return w},
bidiPreprocess:function(w){return w}});n.extend(r.TextPath,{textDir:"",formatText:function(w,x){if(x&&w&&1<w.length){var z="ltr";if("auto"==x){if(r.isVml)return w;x=t.checkContextual(w)}if(r.isVml)return z=t.checkContextual(w),x!=z?"rtl"==x?t.hasBidiChar(w)?"\u200f\u200f"+w:t.bidiTransform(w,"IRNNN","ILNNN"):"\u200e"+w:w;if(r.isSvgWeb)return"rtl"==x?t.bidiTransform(w,"IRNNN","ILNNN"):w;r.isSvg&&(w=a("opera")||4<=a("ff")?"\u200e"+("rtl"==x?"\u202b":"\u202a")+w+"\u202c":"rtl"==x?t.bidiTransform(w,"IRYNN",
"VLNNN"):t.bidiTransform(w,"ILYNN","VLNNN"))}return w},bidiPreprocess:function(w){w&&"string"==typeof w&&(this.origText=w,w=this.formatText(w,this.textDir));return w}});m=function(w,x,z,A){var B=w.prototype[x];w.prototype[x]=function(){var b;z&&(b=z.apply(this,arguments));b=B.call(this,b);A&&(b=A.call(this,b,arguments));return b}};e=function(w){w&&(w.textDir&&(w.textDir=q(w.textDir)),w.text&&w.text instanceof Array&&(w.text=w.text.join(",")));!w||void 0==w.text&&!w.textDir||this.textDir==w.textDir&&
w.text==this.origText||(this.origText=void 0!=w.text?w.text:this.origText,w.textDir&&(this.textDir=w.textDir),w.text=this.formatText(this.origText,this.textDir));return this.bidiPreprocess(w)};m(r.Text,"setShape",e,null);m(r.TextPath,"setText",e,null);e=function(w){(w=n.clone(w))&&this.origText&&(w.text=this.origText);return w};m(r.Text,"getShape",null,e);m(r.TextPath,"getText",null,e);e=function(w,x){var z;x&&x[0]&&(z=q(x[0]));w.setTextDir(z?z:this.textDir);return w};m(r.Surface,"createGroup",null,
e);m(r.Group,"createGroup",null,e);e=function(w){if(w){var x=w.textDir?q(w.textDir):this.textDir;x&&(w.textDir=x)}return w};m(r.Surface,"createText",e,null);m(r.Surface,"createTextPath",e,null);m(r.Group,"createText",e,null);m(r.Group,"createTextPath",e,null);r.createSurface=function(w,x,z,A){x=r[r.renderer].createSurface(w,x,z);A=q(A);if(r.isSvgWeb)return x.textDir=A?A:k.style(l.byId(w),"direction"),x;if(r.isVml||r.isSvg||r.isCanvas)x.textDir=A?A:k.style(x.rawNode,"direction");r.isSilverlight&&(x.textDir=
A?A:k.style(x._nodes[1],"direction"));return x};return r})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),function(r,n,a,l,k,p,m,e,f,g,d){var q=a.utils={};n.mixin(q,{forEach:function(t,w,x){x=x||r.global;w.call(x,t);(t instanceof a.Surface||t instanceof a.Group)&&k.forEach(t.children,function(z){q.forEach(z,w,x)})},serialize:function(t){var w=
{},x;if((x=t instanceof a.Surface)||t instanceof a.Group){if(w.children=k.map(t.children,q.serialize),x)return w.children}else w.shape=t.getShape();t.getTransform&&(x=t.getTransform())&&(w.transform=x);t.getStroke&&(x=t.getStroke())&&(w.stroke=x);t.getFill&&(x=t.getFill())&&(w.fill=x);t.getFont&&(x=t.getFont())&&(w.font=x);return w},toJson:function(t,w){return m.toJson(q.serialize(t),w)},deserialize:function(t,w){if(w instanceof Array)return k.map(w,n.hitch(null,q.deserialize,t));t="shape"in w?t.createShape(w.shape):
t.createGroup();"transform"in w&&t.setTransform(w.transform);"stroke"in w&&t.setStroke(w.stroke);"fill"in w&&t.setFill(w.fill);"font"in w&&t.setFont(w.font);"children"in w&&k.forEach(w.children,n.hitch(null,q.deserialize,t));return t},fromJson:function(t,w){return q.deserialize(t,m.fromJson(w))},toSvg:function(t){var w=new e;if("svg"===a.renderer)try{var x=q._cleanSvg(q._innerXML(t.rawNode));w.callback(x)}catch(A){w.errback(A)}else{q._initSvgSerializerDeferred||q._initSvgSerializer();var z=q.toJson(t);
x=function(){try{var A=t.getDimensions(),B=A.width,b=A.height,h=q._gfxSvgProxy.document.createElement("div");q._gfxSvgProxy.document.body.appendChild(h);p.withDoc(q._gfxSvgProxy.document,function(){l.style(h,"width",B);l.style(h,"height",b)},this);q._gfxSvgProxy[dojox._scopeName].gfx.createSurface(h,B,b).whenLoaded(null,function(c){try{q._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(c,z);var v=q._cleanSvg(h.innerHTML);c.clear();c.destroy();q._gfxSvgProxy.document.body.removeChild(h);w.callback(v)}catch(u){w.errback(u)}})}catch(c){w.errback(c)}};
0<q._initSvgSerializerDeferred.fired?x():q._initSvgSerializerDeferred.addCallback(x)}return w},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){q._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!q._initSvgSerializerDeferred){q._initSvgSerializerDeferred=new e;var t=p.doc.createElement("iframe");l.style(t,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var w;f("ie")?t.onreadystatechange=function(){"complete"==
t.contentWindow.document.readyState&&(t.onreadystatechange=function(){},w=setInterval(function(){t.contentWindow[r.scopeMap.dojo[1]._scopeName]&&t.contentWindow[r.scopeMap.dojox[1]._scopeName].gfx&&t.contentWindow[r.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(w),t.contentWindow.parent[r.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=t.contentWindow,t.contentWindow.parent[r.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:t.onload=function(){t.onload=function(){};
w=setInterval(function(){t.contentWindow[r.scopeMap.dojo[1]._scopeName]&&t.contentWindow[r.scopeMap.dojox[1]._scopeName].gfx&&t.contentWindow[r.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(w),t.contentWindow.parent[r.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=t.contentWindow,t.contentWindow.parent[r.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50)};var x=d.dojoxGfxSvgProxyFrameUrl||g.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");t.setAttribute("src",
x.toString());p.body().appendChild(t)}},_innerXML:function(t){return t.innerXML?t.innerXML:t.xml?t.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(t):null},_cleanSvg:function(t){t&&(-1==t.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(t=t.substring(4,t.length),t='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+t),-1==t.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&(t=t.substring(4,t.length),t='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+t),-1===
t.indexOf("xlink:href")&&(t=t.replace(/href\s*=/g,"xlink:href\x3d")),t=t.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),t=t.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),t=t.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),t=t.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),t=t.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return t}});return q})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(r,n,a){function l(pa,ya,Ba,Aa,
ta){var za=pa;void 0===ya&&(ya=ta.defInFormat);void 0===Ba&&(Ba=ta.defOutFormat);void 0===Aa&&(Aa=ta.defSwap);if(ya!==Ba){var wa=ya.substring(0,1);var Ia=ya.substring(1,4);var Ha=Ba.substring(0,1),La=Ba.substring(1,4);"C"===Ia.charAt(0)&&(Ia=k(za),Ia="ltr"===Ia||"rtl"===Ia?Ia.toUpperCase():"L"===ya.charAt(2)?"LTR":"RTL",ya=wa+Ia);"C"===La.charAt(0)&&(Ia=k(za),"rtl"===Ia?La="RTL":"ltr"===Ia?(za=za.split(""),za.reverse(),Ia=k(za.join("")),La=Ia.toUpperCase()):La="L"===Ba.charAt(2)?"LTR":"RTL",Ba=Ha+
La)}if(ya===Ba)return pa;Ha=ya.substring(0,1);za=ya.substring(1,4);wa=Ba.substring(0,1);La=Ba.substring(1,4);ta.inFormat=ya;ta.outFormat=Ba;ta.swap=Aa;if("L"===Ha&&"VLTR"===Ba){if("LTR"===za)return ta.dir=y,p(pa,ta);if("RTL"===za)return ta.dir=C,p(pa,ta)}if("V"===Ha&&"V"===wa)return ta.dir="RTL"===za?C:y,e(pa,ta);if("L"===Ha&&"VRTL"===Ba)return ta.dir="LTR"===za?y:C,pa=p(pa,ta),e(pa);if("VLTR"===ya&&"LLTR"===Ba)return ta.dir=y,p(pa,ta);if("V"===Ha&&"L"===wa&&za!==La)return pa=e(pa),"RTL"===za?l(pa,
"LLTR","VLTR",Aa,ta):l(pa,"LRTL","VRTL",Aa,ta);if("VRTL"===ya&&"LRTL"===Ba)return l(pa,"LRTL","VRTL",Aa,ta);if("L"===Ha&&"L"===wa)return ya=ta.swap,ta.swap=ya.substr(0,1)+"N","RTL"===za?(ta.dir=C,pa=p(pa,ta),ta.swap="N"+ya.substr(1,2),ta.dir=y,pa=p(pa,ta)):(ta.dir=y,pa=p(pa,ta),ta.swap="N"+ya.substr(1,2),pa=l(pa,"VLTR","LRTL",ta.swap,ta)),pa}function k(pa){return(pa=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(pa))?"z">=pa[0]?"ltr":"rtl":""}function p(pa,ya){pa=
pa.split("");var Ba=[];m(pa,Ba,ya);if(0!==ya.hiLevel&&ya.swap.substr(0,1)!==ya.swap.substr(1,2))for(var Aa=0;Aa<pa.length;Aa++)if(1===Ba[Aa]){var ta=Aa;b:{var za=void 0;for(var wa=pa[Aa],Ia=0,Ha=F.length-1;Ia<=Ha;)if(za=Math.floor((Ia+Ha)/2),wa<F[za][0])Ha=za-1;else if(wa>F[za][0])Ia=za+1;else{za=F[za][1];break b}za=wa}pa[ta]=za}d(2,pa,Ba,ya);d(1,pa,Ba,ya);h=Ba;return pa.join("")}function m(pa,ya,Ba){var Aa=pa.length,ta=Ba.dir?Z:S,za=null,wa=null,Ia=null;za=0;wa=wa=null;var Ha=-1,La=wa=null,va=[],
Ma=[];Ba.hiLevel=Ba.dir;Ba.lastArabic=!1;Ba.hasUbatAl=!1;Ba.hasUbatB=!1;Ba.hasUbatS=!1;for(wa=0;wa<Aa;wa++){La=wa;Ia=pa[wa].charCodeAt(0);var Ta=Fa[Ia>>8];va[La]=Ta<Ca?Ta:Ka[Ta-Ca][Ia&255]}for(La=0;La<Aa;La++){Ma[La]=wa=q(pa,va,Ma,La,Ba);za=ta[za][wa];wa=za&240;za&=15;ya[La]=Ia=ta[za][v];if(0<wa){if(16===wa)for(wa=Ha;wa<La;wa++)ya[wa]=1;Ha=-1}if(wa=ta[za][u])-1===Ha&&(Ha=La);else if(-1<Ha){for(wa=Ha;wa<La;wa++)ya[wa]=Ia;Ha=-1}va[La]===ra&&(ya[La]=0);Ba.hiLevel|=Ia}if(Ba.hasUbatS)for(pa=0;pa<Aa;pa++)if(va[pa]===
sa)for(ya[pa]=Ba.dir,ta=pa-1;0<=ta;ta--)if(va[ta]===ea)ya[ta]=Ba.dir;else break}function e(pa,ya){pa=pa.split("");if(ya){var Ba=[];m(pa,Ba,ya);h=Ba}pa.reverse();B.reverse();return pa.join("")}function f(pa){for(var ya=0;ya<N.length;ya++)if(pa>=N[ya]&&pa<=I[ya])return!0;return!1}function g(pa,ya,Ba,Aa){for(;ya*Ba<Aa&&w(pa[ya]);)ya+=Ba;return ya*Ba<Aa&&f(pa[ya])?!0:!1}function d(pa,ya,Ba,Aa){if(!(Aa.hiLevel<pa))if(1!==pa||Aa.dir!==C||Aa.hasUbatB){Aa=ya.length;for(var ta=0,za,wa,Ia;ta<Aa;){if(Ba[ta]>=
pa){for(za=ta+1;za<Aa&&Ba[za]>=pa;)za++;for(wa=za-1;ta<wa;ta++,wa--)Ia=ya[ta],ya[ta]=ya[wa],ya[wa]=Ia,Ia=B[ta],B[ta]=B[wa],B[wa]=Ia;ta=za}ta++}}else ya.reverse(),B.reverse()}function q(pa,ya,Ba,Aa,ta){return{UBAT_L:function(){ta.lastArabic=!1;return ca},UBAT_R:function(){ta.lastArabic=!1;return fa},UBAT_ON:function(){return ma},UBAT_AN:function(){return na},UBAT_EN:function(){return ta.lastArabic?na:ha},UBAT_AL:function(){ta.lastArabic=!0;ta.hasUbatAl=!0;return fa},UBAT_WS:function(){return ma},UBAT_CS:function(){var za,
wa;if(1>Aa||Aa+1>=ya.length||(za=Ba[Aa-1])!==ha&&za!==na||(wa=ya[Aa+1])!==ha&&wa!==na)return ma;ta.lastArabic&&(wa=na);return wa===za?wa:ma},UBAT_ES:function(){return(0<Aa?Ba[Aa-1]:ra)===ha&&Aa+1<ya.length&&ya[Aa+1]===ha?ha:ma},UBAT_ET:function(){if(0<Aa&&Ba[Aa-1]===ha)return ha;if(ta.lastArabic)return ma;for(var za=Aa+1,wa=ya.length;za<wa&&ya[za]===ja;)za++;return za<wa&&ya[za]===ha?ha:ma},UBAT_NSM:function(){if("VLTR"===ta.inFormat){for(var za=ya.length,wa=Aa+1;wa<za&&ya[wa]===oa;)wa++;if(wa<za&&
(za=pa[Aa],wa=ya[wa],(1425<=za&&2303>=za||64286===za)&&(wa===fa||wa===ba)))return fa}return 1>Aa||ya[Aa-1]===ra?ma:Ba[Aa-1]},UBAT_B:function(){ta.lastArabic=!0;ta.hasUbatB=!0;return ta.dir},UBAT_S:function(){ta.hasUbatS=!0;return ma},UBAT_LRE:function(){ta.lastArabic=!1;return ma},UBAT_RLE:function(){ta.lastArabic=!1;return ma},UBAT_LRO:function(){ta.lastArabic=!1;return ma},UBAT_RLO:function(){ta.lastArabic=!1;return ma},UBAT_PDF:function(){ta.lastArabic=!1;return ma},UBAT_BN:function(){return ma}}[ka[ya[Aa]]]()}
function t(pa,ya){for(var Ba=0;Ba<O.length;Ba++)if(pa===O[Ba])return ya[Ba];return pa}function w(pa){return"\u064b"<=pa&&"\u0655">=pa?!0:!1}function x(pa){if("L"===pa)return"LTR";if("R"===pa)return"RTL";if("C"===pa)return"CLR";if("D"===pa)return"CRL"}function z(pa,ya){for(var Ba=0;Ba<G.length;Ba++)if(pa===G[Ba])return ya[Ba];return pa}function A(pa,ya,Ba,Aa){for(var ta=0;ta<pa.length;ta++)if(pa[ta]>ya||!Ba&&pa[ta]===ya)pa[ta]+=Aa}r.getObject("string",!0,dojox);r=n("dojox.string.BidiEngine",a,{inputFormat:"ILYNN",
outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(pa,ya,Ba){this.sourceToTarget=[];this.targetToSource=[];if(!pa)return"";var Aa=this.sourceToTarget,ta=this.targetToSource,za=pa.length;B=[];h=[];for(var wa=0;wa<za;wa++)Aa[wa]=wa,ta[wa]=wa,B[wa]=wa;if(!this.checkParameters(ya,Ba))return pa;ya=this.inputFormat;Ba=this.outputFormat;Aa=pa;Aa=c;wa=x(ya.charAt(1));ta=x(Ba.charAt(1));var Ia="I"===ya.charAt(0)?"L":ya.charAt(0);za="I"===Ba.charAt(0)?"L":Ba.charAt(0);
wa=Ia+wa;ta=za+ta;za=ya.charAt(2)+Ba.charAt(2);Aa.defInFormat=wa;Aa.defOutFormat=ta;Aa.defSwap=za;pa=l(pa,wa,ta,za,Aa);Aa=!1;if("R"===Ba.charAt(1))Aa=!0;else if("C"===Ba.charAt(1)||"D"===Ba.charAt(1))Aa=this.checkContextual(pa);ta=this.sourceToTarget=B;za=Array(ta.length);for(wa=0;wa<ta.length;wa++)za[ta[wa]]=wa;b=this.targetToSource=za;if(ya.charAt(3)===Ba.charAt(3))Aa=pa;else if("S"===Ba.charAt(3))if(ya=Aa,Ba=!0,0===pa.length)Aa=void 0;else{void 0===ya&&(ya=!0);void 0===Ba&&(Ba=!0);pa=String(pa);
pa=pa.split("");var Ha=0;ta=1;Aa=pa.length;ya||(Ha=pa.length-1,ta=-1,Aa=1);za=Aa;wa=Ba;var La=0;Aa=[];for(Ia=0;Ha*ta<za;Ha+=ta)if(f(pa[Ha])||w(pa[Ha])){var va;if(va="\u0644"===pa[Ha])b:{for(var Ma=pa,Ta=Ha+ta,Va=ta,lb=za;Ta*Va<lb&&w(Ma[Ta]);)Ta+=Va;va=" ";if(Ta*Va<lb)for(va=Ma[Ta],Ma=0;Ma<G.length;Ma++)if(G[Ma]===va){va=!0;break b}va=!1}if(va){pa[Ha]=0===La?z(pa[Ha+ta],J):z(pa[Ha+ta],R);Ha+=ta;La=pa;va=Ha;Ma=ta;for(Ta=za;va*Ma<Ta&&w(La[va]);)va+=Ma;va*Ma<Ta&&(La[va]=" ");wa&&(Aa[Ia]=Ha,Ia++);La=0}else{va=
pa[Ha];if(1===La){Ma=Ha;if(g(pa,Ha+ta,ta,za))b:for(Ta=pa[Ha],Va=0;Va<O.length;Va++){if(Ta===O[Va]){Ta=K[Va];break b}}else Ta=t(pa[Ha],U);pa[Ma]=Ta}else!0===g(pa,Ha+ta,ta,za)?pa[Ha]=t(pa[Ha],V):pa[Ha]=t(pa[Ha],P);w(va)||(La=1);b:{for(Ma=0;Ma<Q.length;Ma++)if(Q[Ma]===va){va=!0;break b}va=!1}!0===va&&(La=0)}}else La=0;ta="";for(za=0;za<pa.length;za++){if(wa=Ba){b:{for(wa=0;wa<Aa.length;wa++)if(Aa[wa]===za)break b;wa=-1}wa=-1<wa}wa?(A(b,za,!ya,-1),B.splice(za,1)):ta+=pa[za]}Aa=ta}else if(ya=pa,Ba=Aa,
pa=!0,0===ya.length)Aa=void 0;else for(void 0===pa&&(pa=!0),void 0===Ba&&(Ba=!0),ya=String(ya),Aa="",ta=[],ta=ya.split(""),za=0;za<ya.length;za++)wa=!1,"\ufe70"<=ta[za]&&"\ufeff">ta[za]?(Ia=ya.charCodeAt(za),"\ufef5"<=ta[za]&&"\ufefc">=ta[za]?(Ba?(0<za&&pa&&" "===ta[za-1]?Aa=Aa.substring(0,Aa.length-1)+"\u0644":(Aa+="\u0644",wa=!0),Aa+=G[(Ia-65269)/2]):(Aa+=G[(Ia-65269)/2],Aa+="\u0644",za+1<ya.length&&pa&&" "===ta[za+1]?za++:wa=!0),wa&&(A(b,za,!0,1),B.splice(za,0,B[za]))):Aa+=W[Ia-65136]):Aa+=ta[za];
this.sourceToTarget=B;this.targetToSource=b;this.levels=h;return Aa},_inputFormatSetter:function(pa){if(!D.test(pa))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=pa},_outputFormatSetter:function(pa){if(!D.test(pa))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=pa},checkParameters:function(pa,ya){pa?this.set("inputFormat",pa):pa=this.inputFormat;ya?this.set("outputFormat",ya):ya=this.outputFormat;return pa===ya?
!1:!0},checkContextual:function(pa){pa=k(pa);if("ltr"!==pa&&"rtl"!==pa){try{pa=document.dir.toLowerCase()}catch(ya){}"ltr"!==pa&&"rtl"!==pa&&(pa="ltr")}return pa},hasBidiChar:function(pa){return E.test(pa)}});var B=[],b=[],h=[],c={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},v=5,u=6,y=0,C=1,D=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,E=/[\u0591-\u06ff\ufb1d-\ufefc]/,F=[["(",")"],
[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],G=["\u0622","\u0623",
"\u0625","\u0627"],J=["\ufef5","\ufef7","\ufef9","\ufefb"],R=["\ufef6","\ufef8","\ufefa","\ufefc"],O="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),P="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
U="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),K="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
V="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),Q="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),W="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
N=["\u0621","\u0641"],I=["\u063a","\u064a"],S=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Z=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ca=0,fa=1,ha=2,na=3,ma=4,ra=5,sa=6,ba=7,ea=8,ja=11,oa=12,ka="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),Ca=100;n=ca;a=fa;var Y=ha,aa=na,L=ma,la=ra,ua=sa,T=ba,Ja=ea,
Ea=ja,ia=oa,Fa=[Ca+0,n,n,n,n,Ca+1,Ca+2,Ca+3,a,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,Ca+4,L,L,L,n,L,n,L,n,L,L,L,n,n,L,L,n,n,n,n,n,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,n,n,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,n,n,n,n,n,n,n,n,n,n,n,n,n,n,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,n,n,L,L,n,n,L,L,n,n,L,L,L,L,L,L,L,L,L,L,
L,L,L,L,L,L,L,L,L,L,L,L,L,n,n,n,Ca+5,T,T,Ca+6,Ca+7],Ka=[[18,18,18,18,18,18,18,18,18,ua,la,ua,Ja,la,18,18,18,18,18,18,18,18,18,18,18,18,18,18,la,la,la,ua,Ja,L,L,Ea,Ea,Ea,L,L,L,L,L,10,9,10,9,9,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,9,L,L,L,L,L,L,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,L,L,L,L,L,L,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,L,L,L,L,18,18,18,18,18,18,la,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,L,Ea,Ea,Ea,Ea,L,L,L,L,n,L,L,18,L,L,Ea,Ea,Y,Y,L,n,L,
L,L,Y,n,L,L,L,L,L,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,L,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,L,n,n,n,n,n,n,n,n],[n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,L,L,L,L,L,L,L,L,L,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,L,L,n,n,n,n,n,n,n,L,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,L,n,L,L,L,L,L,L,L,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,
ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,a,ia,a,ia,ia,a,ia,ia,a,ia,L,L,L,L,L,L,L,L,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,L,L,L,L,L,a,a,a,a,a,L,L,L,L,L,L,L,L,L,L,L],[aa,aa,aa,aa,L,L,L,L,T,Ea,Ea,T,9,T,L,L,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,T,L,L,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,Ea,aa,aa,T,T,T,ia,T,T,T,T,T,T,
T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,ia,ia,ia,ia,ia,ia,ia,aa,L,ia,ia,ia,ia,ia,ia,T,T,ia,ia,L,ia,ia,ia,ia,T,T,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,L,T,T,ia,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,L,L,T,T,T,T,T,T,T,T,T,T,T,T,
T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,T,L,L,L,L,L,L,L,L,L,L,L,L,L,L,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,ia,ia,ia,ia,ia,ia,ia,ia,ia,a,a,L,L,L,L,a,L,L,L,L,L],[Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,Ja,18,18,18,n,a,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,Ja,la,13,14,15,16,17,9,Ea,Ea,Ea,Ea,Ea,L,L,L,L,L,L,L,
L,L,L,L,L,L,L,L,9,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,Ja,18,18,18,18,18,L,L,L,L,L,18,18,18,18,18,18,Y,n,L,L,Y,Y,Y,Y,Y,Y,10,10,L,L,L,n,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,10,10,L,L,L,L,n,n,n,n,n,n,n,n,n,n,n,n,n,L,L,L,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,Ea,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L],[n,n,n,n,n,n,n,L,L,L,L,L,L,L,L,L,
L,L,L,n,n,n,n,n,L,L,L,L,L,a,ia,a,a,a,a,a,a,a,a,a,a,10,a,a,a,a,a,a,a,a,a,a,a,a,a,L,a,a,a,a,a,L,a,L,a,a,L,a,a,L,a,a,a,a,a,a,a,a,a,a,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[ia,ia,ia,ia,ia,ia,
ia,ia,ia,ia,ia,ia,ia,ia,ia,ia,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,ia,ia,ia,ia,ia,ia,ia,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,9,L,9,L,L,9,L,L,L,L,L,L,L,L,L,Ea,L,L,10,10,L,L,L,L,L,Ea,Ea,L,L,L,L,L,T,T,T,T,T,L,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,
T,T,T,T,T,T,T,L,L,18],[L,L,L,Ea,Ea,Ea,L,L,L,L,L,10,9,10,9,9,Y,Y,Y,Y,Y,Y,Y,Y,Y,Y,9,L,L,L,L,L,L,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,L,L,L,L,L,L,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,L,L,L,L,L,L,L,L,L,L,L,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,L,L,L,n,n,n,n,n,n,L,L,n,n,n,n,n,n,L,L,n,n,n,n,n,n,L,L,n,n,n,L,L,L,Ea,Ea,L,L,L,Ea,Ea,L,L,L,L,
L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L]];return r})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(r,n,a){r=function(){return this}();var l=r.location,k=l.pathname;a=l.protocol;l={version:"3.35",_appBaseUrl:a+"//"+l.host+k.substring(0,k.lastIndexOf(k.split("/")[k.split("/").length-1]))};n.noGlobals||(r.esri=l);(l.dijit=l.dijit||{})._arcgisUrl=("http:"===a||"https:"===a?a:"http:")+"//www.arcgis.com/sharing/rest";return l})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),
function(r,n,a,l,k,p,m,e,f){function g(B,b,h,c){(b=b&&b[B])?b={formatType:b.formatType,options:b}:c&&-1!==r.indexOf(c.properties||"",B)?b={formatType:c.formatter||"DateString",options:null}:h&&-1!==r.indexOf(h.properties||"",B)&&(b={formatType:h.formatter||"NumberFormat",options:null});return b}function d(B,b,h){return[l.isString(B)?B.split(""):B,b||a.global,l.isString(h)?new Function("item","index","array",h):h]}function q(B){return void 0!==B&&null!==B}function t(B){return q(B)?B:""}function w(B,
b,h,c){var v=h.match(/([^\(]+)(\([^\)]+\))?/i);h=l.trim(v[1]);var u=v[2]?l.trim(v[2]):null;v=b[B];c=c||(u?n.fromJson(u.replace(/^\(/,"({").replace(/\)$/,"})")):{});u=c.utcOffset;if(-1===r.indexOf(z,h))h=l.getObject(h),l.isFunction(h)&&(v=h(v,B,b,c));else if("number"===typeof v||"string"===typeof v&&v&&!isNaN(Number(v)))switch(v=Number(v),h){case "NumberFormat":return m.format(v,c);case "DateString":B=new Date(v);if(c.local||c.systemLocale)return c.systemLocale?B.toLocaleDateString()+(c.hideTime?"":
" "+B.toLocaleTimeString()):B.toDateString()+(c.hideTime?"":" "+B.toTimeString());B=B.toUTCString();c.hideTime&&(B=B.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return B;case "DateFormat":return B=new Date(v),q(u)&&(B=k.add(B,"minute",B.getTimezoneOffset()-u)),e.format(B,c)}return t(v)}function x(B,b){var h;if(b)for(h in B)B.hasOwnProperty(h)&&(void 0===B[h]?delete B[h]:B[h]instanceof Object&&x(B[h],!0));else for(h in B)B.hasOwnProperty(h)&&void 0===B[h]&&delete B[h];return B}var z=["NumberFormat",
"DateString","DateFormat"],A=/<\/?[^>]+>/g;p={valueOf:function(B,b){for(var h in B)if(B[h]==b)return h;return null},stripTags:function(B){if(B){var b=typeof B;if("string"===b)B=B.replace(A,"");else if("object"===b)for(var h in B)(b=B[h])&&"string"===typeof b&&(b=b.replace(A,"")),B[h]=b}return B},substitute:function(B,b,h){if(q(h))if(l.isObject(h)){var c=h.first;var v=h.dateFormat;var u=h.numberFormat;var y=h.format}else c=h;if(b&&"${*}"!==b)return l.replace(b,l.hitch({obj:B},function(D,E){var F=E.split(":");
return 1<F.length?(E=F[0],F.shift(),(D=y&&y[F[0]])?F=D.formatType:(F=F.join(":"),D=null),w(E,this.obj,F,D)):(D=g(E,y,u,v))?w(E,this.obj,D.formatType,D.options):t(this.obj[E])}),/\$\{([^\}]+)\}/g);b=[];for(var C in B)if(h=(h=g(C,y,u,v))?w(C,B,h.formatType,h.options):B[C],b.push(C+" \x3d "+t(h)+"\x3cbr/\x3e"),c)break;return b.join("")},filter:function(B,b,h){b=d(B,h,b);h={};var c;B=b[0];for(c in B)b[2].call(b[c],B[c],c,B)&&(h[c]=B[c]);return h},startsWith:function(B,b,h){h=h||0;return B.indexOf(b,h)===
h},endsWith:function(B,b,h){if("number"!==typeof h||!isFinite(h)||Math.floor(h)!==h||h>B.length)h=B.length;h-=b.length;B=B.indexOf(b,h);return-1!==B&&B===h},isDefined:q,fixJson:x,isObject:function(B){return B&&"object"===typeof B},isString:function(B){return"string"===typeof B},mixin:function(B,b){for(var h in b)b.hasOwnProperty(h)&&(B[h]=b[h]);return B},clone2DArray:function(B){if(B=B?B.slice(0):null){var b,h=B.length;for(b=0;b<h;b++)B[b]=B[b]?B[b].slice(0):null}return B},clone3DArray:function(B){if(B=
B?B.slice(0):null){var b,h=B.length;for(b=0;b<h;b++){B[b]=B[b]?B[b].slice(0):null;var c=B[b];if(c){var v,u=c.length;for(v=0;v<u;v++)c[v]=c[v]?c[v].slice(0):null}}}return B}};l.mixin(f,p);f._isDefined=q;f._getParts=d;f._sanitize=x;return p})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(r,n,a){var l=r("ff"),k=r("ie"),p=void 0===k&&7<=r("trident"),m=r("edge"),e=r("webkit"),f=r("opera"),g=r("chrome"),d=r("safari"),q=navigator.userAgent,t;(t=q.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&
r.add("esri-iphone",parseFloat(t[2].replace("_",".")));(t=q.match(/Android\s+(\d+(\.\d+)*)/i))&&r.add("esri-android",parseFloat(t[1]));(t=q.match(/Fennec\/(\d+\.\d+)/i))&&r.add("esri-fennec",parseFloat(t[1]));0<=q.indexOf("BlackBerry")&&0<=q.indexOf("WebKit")&&r.add("esri-blackberry",1);r.add("esri-touch",r("esri-iphone")||r("esri-android")||r("esri-blackberry")||6<=r("esri-fennec")||(l||e)&&(document.createTouch||"ontouchstart"in n||n.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(t=q.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&
r.add("esri-mobile",!!t);r.add("esri-pointer",!l&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!n.PointerEvent));a._getDOMAccessor=function(x){var z="";l?z="Moz":e?z="Webkit":k?z="ms":f&&(z="O");return z+x.charAt(0).toUpperCase()+x.substr(1)};r.add("esri-phonegap",!!n.cordova);r.add("esri-cors",r("esri-phonegap")||n.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);r.add("esri-file-upload",n.FormData&&n.FileList?!0:!1);r.add("esri-script-sandbox",function(){return"MessageChannel"in
n&&"HTMLIFrameElement"in n&&"sandbox"in HTMLIFrameElement.prototype});r.add("esri-secure-context",function(){if("isSecureContext"in n)return n.isSecureContext;if(n.location&&n.location.origin)return 0===n.location.origin.indexOf("https:")});r.add("esri-wasm","WebAssembly"in n);r.add("esri-workers",n.Worker?!0:!1);r.add("esri-featurelayer-webgl",!1);if(q=r("esri-featurelayer-webgl")){var w=r("esri-mobile");t=w?1:2;w=w?1:3;"object"===typeof q?(q.maxDrillLevel=null==q.maxDrillLevel?t:q.maxDrillLevel,
q.maxRecordCountFactor=null==q.maxRecordCountFactor?w:q.maxRecordCountFactor,q.enablePBFQuery=null==q.enablePBFQuery?!0:q.enablePBFQuery):r.add("esri-featurelayer-webgl",{maxDrillLevel:t,maxRecordCountFactor:w,enablePBFQuery:!0},null,!0)}r.add("esri-featurelayer-webgl-labeling",!1);r.add("esri-pbf",!k||10<=k);r.add("esri-featurelayer-pbf",!0);r.add("esri-transforms",p||m||9<=k||3.5<=l||4<=g||3.1<=d||10.5<=f||3.2<=r("esri-iphone")||2.1<=r("esri-android"));r.add("esri-transitions",p||m||10<=k||4<=l||
4<=g||3.1<=d||10.5<=f||3.2<=r("esri-iphone")||2.1<=r("esri-android"));r.add("esri-transforms3d",p||m||10<=l||12<=g||4<=d||3.2<=r("esri-iphone")||3<=r("esri-android"));r.add("esri-url-encodes-apostrophe",function(){if(!n.document)return!1;var x=n.document.createElement("a");x.href="?'";return-1<x.href.indexOf("?%27")});3>r("esri-android")&&(r.add("esri-transforms",!1,!1,!0),r.add("esri-transitions",!1,!1,!0),r.add("esri-transforms3d",!1,!1,!0));r.add("esri-will-change",r("esri-transforms")&&(52<=g||
11.1<=d));a._css=function(x){var z=r("esri-transforms3d");void 0!==x&&null!==x?z=x:z&&(g||d&&!r("esri-iphone"))&&(z=!1);var A=z?"translate3d(":"translate(",B=z?g?",-1px)":",0px)":")",b=z?"scale3d(":"scale(",h=z?",1)":")",c=z?"rotate3d(0,0,1,":"rotate(",v=z?"matrix3d(":"matrix(",u=z?",0,0,":",",y=z?",0,0,0,0,1,0,":",",C=z?",0,1)":")";return{names:{transition:e&&"-webkit-transition"||l&&"MozTransition"||f&&"OTransition"||k&&"msTransition"||"transition",transform:e&&"-webkit-transform"||l&&"MozTransform"||
f&&"OTransform"||k&&"msTransform"||"transform",transformName:e&&"-webkit-transform"||l&&"-moz-transform"||f&&"-o-transform"||k&&"-ms-transform"||"transform",origin:e&&"-webkit-transform-origin"||l&&"MozTransformOrigin"||f&&"OTransformOrigin"||k&&"msTransformOrigin"||"transformOrigin",endEvent:e&&"webkitTransitionEnd"||l&&"transitionend"||f&&"oTransitionEnd"||k&&"MSTransitionEnd"||"transitionend"},translate:function(D,E){return A+D+"px,"+E+"px"+B},scale:function(D){return b+D+","+D+h},rotate:function(D){return c+
D+"deg)"},matrix:function(D){return v+D.xx+","+D.xy+u+D.yx+","+D.yy+y+D.dx.toFixed(10)+(l&&59>=l?"px,":",")+D.dy.toFixed(10)+(l&&59>=l?"px":"")+C},getScaleFromMatrix:function(D){if(!D)return 1;D=D.toLowerCase();var E=-1<D.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(D.substring(E.length,D.indexOf(",")))}}};a.isiPhone=r("esri-iphone");a.isAndroid=r("esri-android");a.isFennec=r("esri-fennec");a.isBlackBerry=r("esri-blackberry");a.isTouchEnabled=r("esri-touch");a.isPointerEnabled=r("esri-pointer");
a._hasCors=r("esri-cors");a._hasFileUpload=r("esri-file-upload");a._hasTransforms=r("esri-transforms");a._hasTransitions=r("esri-transitions");a._has3DTransforms=r("esri-transforms3d");return r})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(r,n,a,l,k,p,m,e,f,g){var d={},q=e.defaults.io,t=/^[a-z][a-z0-9\+\-\.]*:/i,w=/^\s*http:/i,x=/^\s*https:/i,z=/:\d+$/,A=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;
d.isHTTP=function(b){var h=l.location.protocol;return null==b?"http:"===h||"https:"===h:b?"https:"===h:"http:"===h};d.getProtocolForWebResource=function(b){return d.isHTTP()?l.location.protocol:b?"https:":"http:"};d.urlToObject=function(b){var h={},c=new a(b),v=b.indexOf("?");null===c.query?h={path:b,query:null}:(h.path=b.substring(0,v),h.query=k.queryToObject(c.query));c.fragment&&(h.hash=c.fragment,null===c.query&&(h.path=h.path.substring(0,h.path.length-(c.fragment.length+1))));return h};d.getProxyUrl=
function(b,h){var c=r.isString(b)?0===r.trim(b).toLowerCase().indexOf("https:"):b,v=q.proxyUrl,u=g.io.proxyNotSet;r.isString(b)&&(b=d.getProxyRule(b))&&(v=b.proxyUrl);if(!v)throw Error(u);if(c&&!1!==h&&0!==l.location.href.toLowerCase().indexOf("https:")&&(h=v,0!==h.toLowerCase().indexOf("http")&&(h=d.getAbsoluteUrl(h)),h=h.replace(/^http:/i,"https:"),d.canUseXhr(h))){v=h;var y=1}v=d.urlToObject(v);v._xo=y;return v};d.addProxy=function(b){var h=d.getProxyRule(b),c;h?c=d.urlToObject(h.proxyUrl):q.alwaysUseProxy&&
(c=d.getProxyUrl());c&&(h=d.urlToObject(b),b=c.path+"?"+h.path,(c=k.objectToQuery(r.mixin(c.query||{},h.query)))&&(b+="?"+c));return b};d.addProxyRule=function(b){var h=b.urlPrefix=d.urlToObject(b.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),c=q.proxyRules,v,u=c.length,y=u;for(v=0;v<u;v++){var C=c[v].urlPrefix;if(0===h.indexOf(C)){if(h.length===C)return-1;y=v;break}else 0===C.indexOf(h)&&(y=v+1)}c.splice(y,0,b);return y};d.getProxyRule=function(b){var h=q.proxyRules,
c=h.length,v=d.urlToObject(b).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(b=0;b<c;b++)if(0===v.indexOf(h[b].urlPrefix)){var u=h[b];break}return u};d.hasSameOrigin=function(b,h,c){b=b.toLowerCase();h=h.toLowerCase();var v=l.location.href.toLowerCase();b=0===b.indexOf("http")?new a(b):v=new a(v);h=0===h.indexOf("http")?new a(h):r.isString(v)?new a(v):v;return(c||b.scheme===h.scheme)&&b.host===h.host&&b.port===h.port};d.canUseXhr=function(b,h){var c=f("esri-phonegap")?
!0:!1,v=d.hasSameOrigin,u=q.corsEnabledServers,y,C=-1;!c&&f("esri-cors")&&u&&u.length&&(c=n.some(u,function(D,E){D=!D||"object"!==typeof D||D instanceof RegExp?D:D.host;if(D instanceof RegExp){if(D.test(b))return C=E,!0}else if(D&&(y=0!==D.trim().toLowerCase().indexOf("http"),v(b,y?"http://"+D:D)||y&&v(b,"https://"+D)))return C=E,!0;return!1}));return h?C:c};d.getAbsoluteUrl=function(b){var h=d.getProtocolForWebResource();return r.isString(b)&&!t.test(b)?0===b.indexOf("//")?h+b:0===b.indexOf("/")?
h+"//"+l.location.host+b:p._appBaseUrl+b:b};d.fixUrl=function(b){b=r.trim(b);b=d.getAbsoluteUrl(b);b=d.normalizeSlashes(b);b=b.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");b=d.downgradeToHTTP(b);return b=d.upgradeToHTTPS(b)};d.normalize=function(b){return d.fixUrl(b)};d.normalizeSlashes=function(b){if(/^https?:\/\//i.test(b)){var h=b.indexOf("?");if(-1<h){var c=b.slice(0,h);var v=b.slice(h+1)}else c=b;b=c.replace(/\/{2,}/g,"/");b=b.replace("/","//");v&&(b+="?"+v)}return b};d.downgradeToHTTP=
function(b){return d.isHTTP(!1)&&x.test(b)&&d.hasSameOrigin(l.location.href,b,!0)&&!d.canUseXhr(b)?b.replace(x,"http:"):b};d.upgradeToHTTPS=function(b){var h=q.httpsDomains,c=d.isHTTP(!1),v=d.isHTTP(!0);if(!w.test(b))return b;b=r.trim(b);var u=b.indexOf("/",7);u=-1===u?b:b.slice(0,u);u=u.toLowerCase().slice(7);if(z.test(u))if(m.endsWith(u,":80"))u=u.slice(0,-3),b=b.replace(":80","");else return b;if(c&&u===l.location.host&&(!A.test(b)||!d.canUseXhr(b)))return b;c=!1;if(v&&u===l.location.host)c=!0;
else if(h)for(var y=0;y<h.length;y++){var C=h[y];if(u===C||m.endsWith(u,"."+C)){c=!0;break}}c||!v||q.alwaysUseProxy||d.getProxyRule(b)||(c=!0);c&&(b=b.replace(w,"https:"));return b};e=g.widgets.popup;var B=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:e.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,
appName:"Collector",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",
label:e.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:e.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:e.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:e.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,appName:"Microsoft Power BI",label:e.NLS_openLinkInApp}];d.getURIInfo=function(b){var h;n.some(B,function(c){c.pattern.test(b)&&(h=c);return!!h});return h};d.isKnownURI=
function(b){return!!d.getURIInfo(b)};r.mixin(p,d);p._getProxyUrl=d.getProxyUrl;p._getProxiedUrl=d.addProxy;p._hasSameOrigin=d.hasSameOrigin;p._canDoXOXHR=d.canUseXhr;p._getAbsoluteUrl=d.getAbsoluteUrl;p.fixUrl=d.fixUrl;return d})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(r,n,a,l){a=function(){return this}();var k={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",
slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:a.Worker&&!1,io:{errorHandler:function(p,m){n.publish("esri.Error",[p])},proxyUrl:null,
alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com",
"services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com",
"dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:a.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,
useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};l.config=k;r.noGlobals||(a.esriConfig=k);return k})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(r,n,a,l,k){function p(q,
t,w){return q&&t?q.getWidth()/t*(w||e)*39.37*f.screenDPI:0}function m(q,t,w,x,z){return q.expand(x*t/(39.37*((z?w:g.values[g[w]])||e)*f.screenDPI)/q.getWidth())}var e=6370997*Math.PI/180,f=l.defaults,g=k,d={getUnitValueForSR:function(q){return this.getUnitValue(q)||e},getUnitValue:function(q){if(q)if("object"===typeof q){var t=q.wkid;var w=q.wkt}else"number"===typeof q?t=q:"string"===typeof q&&(w=q);if(t)var x=g.values[g[t]];else w&&-1!==w.search(/^PROJCS/i)&&(q=/UNIT\[([^\]]+)\]\]$/i.exec(w))&&q[1]&&
(x=parseFloat(q[1].split(",")[1]));return x},getScale:function(q,t,w){if(1<arguments.length&&null!=t&&!t.declaredClass){var x=q;var z=t;t=null;var A=d.getUnitValue(w)}else x=t||q.extent,z=q.width,A=d.getUnitValue(x&&x.spatialReference);return p(x,z,A)},getExtentForScale:function(q,t,w){return m(w||q.extent,q.width,d.getUnitValue(q.spatialReference),t,!0)}};r.mixin(r.getObject("geometry",!0,a),d);a.geometry._getScale=p;a.geometry._getExtentForScale=m;return d})},"esri/WKIDUnitConversion":function(){define(["dojo/has",
"./kernel"],function(r,n){var a={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),2066:5,2136:12,2155:2,2157:0,
2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,
3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,
3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,
3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,
5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,
6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,
6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,
6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,
6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,
7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,
7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,
8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,
8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,
8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9367:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,
24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,
31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,
103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,
103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,
103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,
103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(r=2E3;2045>=r;r++)a[r]=0;for(r=2056;2065>=r;r++)a[r]=0;for(r=2067;2135>=r;r++)a[r]=0;for(r=2137;2154>=r;r++)a[r]=0;for(r=2161;2170>=r;r++)a[r]=
0;for(r=2172;2193>=r;r++)a[r]=0;for(r=2195;2198>=r;r++)a[r]=0;for(r=2200;2203>=r;r++)a[r]=0;for(r=2205;2217>=r;r++)a[r]=0;for(r=2222;2224>=r;r++)a[r]=1;for(r=2225;2250>=r;r++)a[r]=2;for(r=2251;2253>=r;r++)a[r]=1;for(r=2257;2264>=r;r++)a[r]=2;for(r=2274;2279>=r;r++)a[r]=2;for(r=2280;2282>=r;r++)a[r]=1;for(r=2283;2289>=r;r++)a[r]=2;for(r=2290;2292>=r;r++)a[r]=0;for(r=2308;2313>=r;r++)a[r]=0;for(r=2315;2491>=r;r++)a[r]=0;for(r=2494;2866>=r;r++)a[r]=0;for(r=2867;2869>=r;r++)a[r]=1;for(r=2870;2888>=r;r++)a[r]=
2;for(r=2891;2895>=r;r++)a[r]=2;for(r=2896;2898>=r;r++)a[r]=1;for(r=2902;2908>=r;r++)a[r]=2;for(r=2915;2920>=r;r++)a[r]=2;for(r=2921;2923>=r;r++)a[r]=1;for(r=2924;2930>=r;r++)a[r]=2;for(r=2931;2962>=r;r++)a[r]=0;for(r=2964;2968>=r;r++)a[r]=2;for(r=2969;2973>=r;r++)a[r]=0;for(r=2975;2991>=r;r++)a[r]=0;for(r=2995;3051>=r;r++)a[r]=0;for(r=3054;3079>=r;r++)a[r]=0;for(r=3081;3088>=r;r++)a[r]=0;for(r=3092;3101>=r;r++)a[r]=0;for(r=3106;3138>=r;r++)a[r]=0;for(r=3146;3151>=r;r++)a[r]=0;for(r=3153;3166>=r;r++)a[r]=
0;for(r=3168;3172>=r;r++)a[r]=0;for(r=3174;3203>=r;r++)a[r]=0;for(r=3294;3358>=r;r++)a[r]=0;for(r=3367;3403>=r;r++)a[r]=0;for(r=3408;3416>=r;r++)a[r]=0;for(r=3417;3438>=r;r++)a[r]=2;for(r=3441;3446>=r;r++)a[r]=2;for(r=3447;3450>=r;r++)a[r]=0;for(r=3451;3459>=r;r++)a[r]=2;for(r=3460;3478>=r;r++)a[r]=0;for(r=3554;3559>=r;r++)a[r]=0;for(r=3560;3570>=r;r++)a[r]=2;for(r=3571;3581>=r;r++)a[r]=0;for(r=3594;3597>=r;r++)a[r]=0;for(r=3601;3604>=r;r++)a[r]=0;for(r=3637;3639>=r;r++)a[r]=0;for(r=3665;3667>=r;r++)a[r]=
0;for(r=3693;3695>=r;r++)a[r]=0;for(r=3701;3727>=r;r++)a[r]=0;for(r=3728;3739>=r;r++)a[r]=2;for(r=3740;3751>=r;r++)a[r]=0;for(r=3753;3760>=r;r++)a[r]=2;for(r=3761;3773>=r;r++)a[r]=0;for(r=3775;3777>=r;r++)a[r]=0;for(r=3779;3781>=r;r++)a[r]=0;for(r=3783;3785>=r;r++)a[r]=0;for(r=3788;3791>=r;r++)a[r]=0;for(r=3797;3802>=r;r++)a[r]=0;for(r=3814;3816>=r;r++)a[r]=0;for(r=3825;3829>=r;r++)a[r]=0;for(r=3832;3841>=r;r++)a[r]=0;for(r=3844;3852>=r;r++)a[r]=0;for(r=3873;3885>=r;r++)a[r]=0;for(r=3890;3893>=r;r++)a[r]=
0;for(r=3907;3912>=r;r++)a[r]=0;for(r=3942;3950>=r;r++)a[r]=0;for(r=3968;3970>=r;r++)a[r]=0;for(r=3973;3976>=r;r++)a[r]=0;for(r=3986;3989>=r;r++)a[r]=0;for(r=3994;3997>=r;r++)a[r]=0;for(r=4048;4051>=r;r++)a[r]=0;for(r=4056;4063>=r;r++)a[r]=0;for(r=4093;4096>=r;r++)a[r]=0;for(r=4390;4398>=r;r++)a[r]=0;for(r=4399;4413>=r;r++)a[r]=2;for(r=4418;4433>=r;r++)a[r]=2;for(r=4455;4457>=r;r++)a[r]=2;for(r=4484;4489>=r;r++)a[r]=0;for(r=4491;4554>=r;r++)a[r]=0;for(r=4568;4589>=r;r++)a[r]=0;for(r=4652;4656>=r;r++)a[r]=
0;for(r=4766;4800>=r;r++)a[r]=0;for(r=5014;5016>=r;r++)a[r]=0;for(r=5069;5072>=r;r++)a[r]=0;for(r=5105;5130>=r;r++)a[r]=0;for(r=5173;5188>=r;r++)a[r]=0;for(r=5253;5259>=r;r++)a[r]=0;for(r=5269;5275>=r;r++)a[r]=0;for(r=5292;5311>=r;r++)a[r]=0;for(r=5329;5331>=r;r++)a[r]=0;for(r=5343;5349>=r;r++)a[r]=0;for(r=5355;5357>=r;r++)a[r]=0;for(r=5387;5389>=r;r++)a[r]=0;for(r=5459;5463>=r;r++)a[r]=0;for(r=5479;5482>=r;r++)a[r]=0;for(r=5518;5520>=r;r++)a[r]=0;for(r=5530;5539>=r;r++)a[r]=0;for(r=5550;5552>=r;r++)a[r]=
0;for(r=5562;5583>=r;r++)a[r]=0;for(r=5623;5625>=r;r++)a[r]=2;for(r=5631;5639>=r;r++)a[r]=0;for(r=5649;5653>=r;r++)a[r]=0;for(r=5663;5680>=r;r++)a[r]=0;for(r=5682;5685>=r;r++)a[r]=0;for(r=5875;5877>=r;r++)a[r]=0;for(r=5896;5899>=r;r++)a[r]=0;for(r=5921;5940>=r;r++)a[r]=0;for(r=6050;6125>=r;r++)a[r]=0;for(r=6244;6275>=r;r++)a[r]=0;for(r=6328;6348>=r;r++)a[r]=0;for(r=6350;6356>=r;r++)a[r]=0;for(r=6366;6372>=r;r++)a[r]=0;for(r=6381;6387>=r;r++)a[r]=0;for(r=6393;6404>=r;r++)a[r]=0;for(r=6480;6483>=r;r++)a[r]=
0;for(r=6511;6514>=r;r++)a[r]=0;for(r=6579;6581>=r;r++)a[r]=0;for(r=6619;6624>=r;r++)a[r]=0;for(r=6625;6627>=r;r++)a[r]=2;for(r=6628;6632>=r;r++)a[r]=0;for(r=6634;6637>=r;r++)a[r]=0;for(r=6669;6692>=r;r++)a[r]=0;for(r=6707;6709>=r;r++)a[r]=0;for(r=6720;6723>=r;r++)a[r]=0;for(r=6732;6738>=r;r++)a[r]=0;for(r=6931;6933>=r;r++)a[r]=0;for(r=6956;6959>=r;r++)a[r]=0;for(r=7005;7007>=r;r++)a[r]=0;for(r=7057;7070>=r;r++)a[r]=2;for(r=7074;7082>=r;r++)a[r]=0;for(r=7109;7118>=r;r++)a[r]=0;for(r=7119;7127>=r;r++)a[r]=
1;for(r=7374;7376>=r;r++)a[r]=0;for(r=7528;7586>=r;r++)a[r]=0;for(r=7587;7645>=r;r++)a[r]=2;for(r=7692;7696>=r;r++)a[r]=0;for(r=7755;7787>=r;r++)a[r]=0;for(r=7791;7795>=r;r++)a[r]=0;for(r=7799;7801>=r;r++)a[r]=0;for(r=7803;7805>=r;r++)a[r]=0;for(r=7825;7831>=r;r++)a[r]=0;for(r=7845;7859>=r;r++)a[r]=0;for(r=8013;8032>=r;r++)a[r]=0;for(r=8065;8068>=r;r++)a[r]=1;for(r=8518;8529>=r;r++)a[r]=2;for(r=8533;8536>=r;r++)a[r]=2;for(r=8538;8540>=r;r++)a[r]=2;for(r=8677;8679>=r;r++)a[r]=0;for(r=8836;8840>=r;r++)a[r]=
0;for(r=8857;8859>=r;r++)a[r]=0;for(r=8908;8910>=r;r++)a[r]=0;for(r=9154;9159>=r;r++)a[r]=0;for(r=9205;9218>=r;r++)a[r]=0;for(r=9271;9273>=r;r++)a[r]=0;for(r=9295;9297>=r;r++)a[r]=0;for(r=20002;20032>=r;r++)a[r]=0;for(r=20062;20092>=r;r++)a[r]=0;for(r=20135;20138>=r;r++)a[r]=0;for(r=20248;20258>=r;r++)a[r]=0;for(r=20348;20358>=r;r++)a[r]=0;for(r=20436;20440>=r;r++)a[r]=0;for(r=20822;20824>=r;r++)a[r]=0;for(r=20934;20936>=r;r++)a[r]=0;for(r=21035;21037>=r;r++)a[r]=0;for(r=21095;21097>=r;r++)a[r]=0;
for(r=21148;21150>=r;r++)a[r]=0;for(r=21413;21423>=r;r++)a[r]=0;for(r=21453;21463>=r;r++)a[r]=0;for(r=21473;21483>=r;r++)a[r]=0;for(r=21780;21782>=r;r++)a[r]=0;for(r=21891;21894>=r;r++)a[r]=0;for(r=21896;21899>=r;r++)a[r]=0;for(r=22171;22177>=r;r++)a[r]=0;for(r=22181;22187>=r;r++)a[r]=0;for(r=22191;22197>=r;r++)a[r]=0;for(r=22234;22236>=r;r++)a[r]=0;for(r=22521;22525>=r;r++)a[r]=0;for(r=22991;22994>=r;r++)a[r]=0;for(r=23028;23038>=r;r++)a[r]=0;for(r=23830;23853>=r;r++)a[r]=0;for(r=23866;23872>=r;r++)a[r]=
0;for(r=23877;23884>=r;r++)a[r]=0;for(r=23886;23894>=r;r++)a[r]=0;for(r=23946;23948>=r;r++)a[r]=0;for(r=24311;24313>=r;r++)a[r]=0;for(r=24342;24347>=r;r++)a[r]=0;for(r=24370;24374>=r;r++)a[r]=10;for(r=24375;24381>=r;r++)a[r]=0;for(r=24718;24721>=r;r++)a[r]=0;for(r=24817;24821>=r;r++)a[r]=0;for(r=24877;24882>=r;r++)a[r]=0;for(r=24891;24893>=r;r++)a[r]=0;for(r=25391;25395>=r;r++)a[r]=0;for(r=25828;25838>=r;r++)a[r]=0;for(r=26191;26195>=r;r++)a[r]=0;for(r=26391;26393>=r;r++)a[r]=0;for(r=26701;26722>=
r;r++)a[r]=0;for(r=26729;26799>=r;r++)a[r]=2;for(r=26801;26803>=r;r++)a[r]=2;for(r=26811;26813>=r;r++)a[r]=2;for(r=26847;26870>=r;r++)a[r]=2;for(r=26891;26899>=r;r++)a[r]=0;for(r=26901;26923>=r;r++)a[r]=0;for(r=26929;26946>=r;r++)a[r]=0;for(r=26948;26998>=r;r++)a[r]=0;for(r=27037;27040>=r;r++)a[r]=0;for(r=27205;27232>=r;r++)a[r]=0;for(r=27258;27260>=r;r++)a[r]=0;for(r=27391;27398>=r;r++)a[r]=0;for(r=27561;27564>=r;r++)a[r]=0;for(r=27571;27574>=r;r++)a[r]=0;for(r=27581;27584>=r;r++)a[r]=0;for(r=27591;27594>=
r;r++)a[r]=0;for(r=28191;28193>=r;r++)a[r]=0;for(r=28348;28358>=r;r++)a[r]=0;for(r=28402;28432>=r;r++)a[r]=0;for(r=28462;28492>=r;r++)a[r]=0;for(r=29118;29122>=r;r++)a[r]=0;for(r=29168;29172>=r;r++)a[r]=0;for(r=29177;29185>=r;r++)a[r]=0;for(r=29187;29195>=r;r++)a[r]=0;for(r=29900;29903>=r;r++)a[r]=0;for(r=30161;30179>=r;r++)a[r]=0;for(r=30491;30494>=r;r++)a[r]=0;for(r=30729;30732>=r;r++)a[r]=0;for(r=31251;31259>=r;r++)a[r]=0;for(r=31265;31268>=r;r++)a[r]=0;for(r=31275;31279>=r;r++)a[r]=0;for(r=31281;31297>=
r;r++)a[r]=0;for(r=31461;31469>=r;r++)a[r]=0;for(r=31491;31495>=r;r++)a[r]=0;for(r=31917;31922>=r;r++)a[r]=0;for(r=31965;32E3>=r;r++)a[r]=0;for(r=32001;32003>=r;r++)a[r]=2;for(r=32005;32031>=r;r++)a[r]=2;for(r=32033;32060>=r;r++)a[r]=2;for(r=32064;32067>=r;r++)a[r]=2;for(r=32074;32077>=r;r++)a[r]=2;for(r=32081;32086>=r;r++)a[r]=0;for(r=32107;32130>=r;r++)a[r]=0;for(r=32133;32158>=r;r++)a[r]=0;for(r=32164;32167>=r;r++)a[r]=2;for(r=32180;32199>=r;r++)a[r]=0;for(r=32201;32260>=r;r++)a[r]=0;for(r=32301;32360>=
r;r++)a[r]=0;for(r=32601;32662>=r;r++)a[r]=0;for(r=32664;32667>=r;r++)a[r]=2;for(r=32701;32761>=r;r++)a[r]=0;for(r=53001;53004>=r;r++)a[r]=0;for(r=53008;53019>=r;r++)a[r]=0;for(r=53021;53032>=r;r++)a[r]=0;for(r=53034;53037>=r;r++)a[r]=0;for(r=53042;53046>=r;r++)a[r]=0;for(r=53074;53080>=r;r++)a[r]=0;for(r=54001;54004>=r;r++)a[r]=0;for(r=54008;54019>=r;r++)a[r]=0;for(r=54021;54032>=r;r++)a[r]=0;for(r=54034;54037>=r;r++)a[r]=0;for(r=54042;54046>=r;r++)a[r]=0;for(r=54048;54053>=r;r++)a[r]=0;for(r=54074;54080>=
r;r++)a[r]=0;for(r=54098;54101>=r;r++)a[r]=0;for(r=102001;102040>=r;r++)a[r]=0;for(r=102042;102063>=r;r++)a[r]=0;for(r=102065;102067>=r;r++)a[r]=0;for(r=102070;102117>=r;r++)a[r]=0;for(r=102122;102216>=r;r++)a[r]=0;for(r=102221;102377>=r;r++)a[r]=0;for(r=102382;102388>=r;r++)a[r]=0;for(r=102389;102398>=r;r++)a[r]=2;for(r=102399;102444>=r;r++)a[r]=0;for(r=102445;102447>=r;r++)a[r]=2;for(r=102448;102458>=r;r++)a[r]=0;for(r=102459;102468>=r;r++)a[r]=2;for(r=102469;102499>=r;r++)a[r]=0;for(r=102500;102519>=
r;r++)a[r]=1;for(r=102520;102524>=r;r++)a[r]=0;for(r=102525;102529>=r;r++)a[r]=2;for(r=102530;102588>=r;r++)a[r]=0;for(r=102590;102598>=r;r++)a[r]=0;for(r=102601;102603>=r;r++)a[r]=0;for(r=102605;102628>=r;r++)a[r]=0;for(r=102629;102646>=r;r++)a[r]=2;for(r=102648;102700>=r;r++)a[r]=2;for(r=102701;102703>=r;r++)a[r]=0;for(r=102707;102730>=r;r++)a[r]=2;for(r=102733;102758>=r;r++)a[r]=2;for(r=102767;102900>=r;r++)a[r]=0;for(r=102965;102969>=r;r++)a[r]=0;for(r=102971;102973>=r;r++)a[r]=0;for(r=102975;102989>=
r;r++)a[r]=0;for(r=102990;102992>=r;r++)a[r]=1;for(r=102997;103002>=r;r++)a[r]=0;for(r=103003;103008>=r;r++)a[r]=2;for(r=103009;103011>=r;r++)a[r]=0;for(r=103012;103014>=r;r++)a[r]=2;for(r=103019;103021>=r;r++)a[r]=0;for(r=103022;103024>=r;r++)a[r]=2;for(r=103029;103031>=r;r++)a[r]=0;for(r=103032;103034>=r;r++)a[r]=2;for(r=103065;103068>=r;r++)a[r]=0;for(r=103074;103076>=r;r++)a[r]=0;for(r=103077;103079>=r;r++)a[r]=1;for(r=103080;103082>=r;r++)a[r]=0;for(r=103083;103085>=r;r++)a[r]=2;for(r=103090;103093>=
r;r++)a[r]=0;for(r=103097;103099>=r;r++)a[r]=0;for(r=103100;103102>=r;r++)a[r]=2;for(r=103107;103109>=r;r++)a[r]=0;for(r=103110;103112>=r;r++)a[r]=2;for(r=103113;103116>=r;r++)a[r]=0;for(r=103117;103120>=r;r++)a[r]=2;for(r=103153;103157>=r;r++)a[r]=0;for(r=103158;103162>=r;r++)a[r]=2;for(r=103163;103165>=r;r++)a[r]=0;for(r=103166;103168>=r;r++)a[r]=1;for(r=103169;103171>=r;r++)a[r]=2;for(r=103186;103188>=r;r++)a[r]=0;for(r=103189;103191>=r;r++)a[r]=2;for(r=103192;103195>=r;r++)a[r]=0;for(r=103196;103199>=
r;r++)a[r]=2;for(r=103200;103224>=r;r++)a[r]=0;for(r=103225;103227>=r;r++)a[r]=1;for(r=103232;103237>=r;r++)a[r]=0;for(r=103238;103243>=r;r++)a[r]=2;for(r=103244;103246>=r;r++)a[r]=0;for(r=103247;103249>=r;r++)a[r]=2;for(r=103254;103256>=r;r++)a[r]=0;for(r=103257;103259>=r;r++)a[r]=2;for(r=103264;103266>=r;r++)a[r]=0;for(r=103267;103269>=r;r++)a[r]=2;for(r=103300;103375>=r;r++)a[r]=0;for(r=103381;103383>=r;r++)a[r]=0;for(r=103384;103386>=r;r++)a[r]=1;for(r=103387;103389>=r;r++)a[r]=0;for(r=103390;103392>=
r;r++)a[r]=2;for(r=103397;103399>=r;r++)a[r]=0;for(r=103400;103471>=r;r++)a[r]=2;for(r=103476;103478>=r;r++)a[r]=0;for(r=103479;103481>=r;r++)a[r]=2;for(r=103486;103488>=r;r++)a[r]=0;for(r=103489;103491>=r;r++)a[r]=2;for(r=103492;103495>=r;r++)a[r]=0;for(r=103496;103499>=r;r++)a[r]=2;for(r=103528;103543>=r;r++)a[r]=0;for(r=103544;103548>=r;r++)a[r]=2;for(r=103549;103551>=r;r++)a[r]=0;for(r=103552;103554>=r;r++)a[r]=1;for(r=103555;103557>=r;r++)a[r]=2;for(r=103558;103560>=r;r++)a[r]=0;for(r=103571;103573>=
r;r++)a[r]=0;for(r=103574;103576>=r;r++)a[r]=2;for(r=103577;103580>=r;r++)a[r]=0;for(r=103581;103583>=r;r++)a[r]=2;for(r=103595;103694>=r;r++)a[r]=0;for(r=103696;103699>=r;r++)a[r]=0;for(r=103700;103793>=r;r++)a[r]=2;for(r=103794;103872>=r;r++)a[r]=0;for(r=103900;103971>=r;r++)a[r]=2;return n.WKIDUnitConversion=a})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(r,n,a,l,k,p){function m(e){if(e){if("function"!==
typeof e.forEach){var f=Object.keys(e),g=f.map(function(w){return e[w]});return m(g).then(function(w){var x={};f.forEach(function(z,A){return x[z]=w[A]});return x})}var d=new a,q=[],t=e.length;0===t&&d.resolve(q);e.forEach(function(w){var x={promise:w};q.push(x);w.then(function(z){x.value=z}).catch(function(z){x.error=z}).then(function(){--t;0===t&&d.resolve(q)})});return d.promise}}Object.defineProperty(n,"__esModule",{value:!0});n.all=function(e){return k(e)};n.filter=function(e,f){var g=e.slice();
return k(e.map(function(d,q){return f(d,q)})).then(function(d){return g.filter(function(q,t){return d[t]})})};n.eachAlways=m;n.create=function(e,f){var g=new a(f);e(function(d){void 0===d&&(d=null);return l(d).then(g.resolve)},g.reject);return g.promise};n.reject=function(e){var f=new a;f.reject(e);return f.promise};n.resolve=function(e){void 0===e&&(e=null);var f=new a;f.resolve(e);return f.promise};n.after=function(e,f){void 0===f&&(f=null);var g=0,d=new a(function(){g&&(clearTimeout(g),g=0)});
g=setTimeout(function(){d.resolve(f)},e);return d.promise};n.timeout=function(e,f,g){var d=0,q=new a(e.cancel);e.then(function(t){q.isFulfilled()||(q.resolve(t),d&&(clearTimeout(d),d=0))});e.catch(function(t){q.isFulfilled()||(q.reject(t),d&&(clearTimeout(d),d=0))});d=setTimeout(function(){var t=g||new p("promiseUtils:timeout","The wrapped promise did not resolve within "+f+" ms");q.reject(t)},f);return q.promise};n.wrapCallback=function(e){var f=!1,g=new a(function(){return f=!0});e(function(d){f||
g.resolve(d)});return g.promise};n.isThenable=function(e){return e&&"function"===typeof e.then};n.when=function(e){return l(e)}})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(r,n,a,l){var k=r.some;return function(p){var m,e;n.isArray(p)?e=p:p&&"object"===typeof p&&(m=p);var f=[];if(m){e=[];for(var g in m)Object.hasOwnProperty.call(m,g)&&(f.push(g),e.push(m[g]));var d={}}else e&&(d=[]);if(!e||!e.length)return(new a).resolve(d);var q=new a;
q.promise.always(function(){d=f=null});var t=e.length;k(e,function(w,x){m||f.push(x);l(w,function(z){q.isFulfilled()||(d[f[x]]=z,0===--t&&q.resolve(d))},q.reject);return q.isFulfilled()});return q.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(r,n,a,l,k){r=function(p){function m(e,f,g){var d=p.call(this,e,f,g)||this;return d instanceof m?d:new m(e,f,g)}a(m,p);m.prototype.toJSON=function(){return{name:this.name,
message:this.message,details:l.clone(this.details),dojoType:this.dojoType}};m.fromJSON=function(e){var f=new m(e.name,e.message,e.details);null!=e.dojoType&&(f.dojoType=e.dojoType);return f};return m}(k);r.prototype.type="error";return r})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)a.hasOwnProperty(l)&&(n[l]=a[l])};return function(n,
a){function l(){this.constructor=n}r(n,a);n.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(r,n,a,l,k,p){function m(w){return void 0!==w&&null!==w}function e(w){return m(w)?w:""}function f(w,x,z){var A=z.match(/([^\(]+)(\([^\)]+\))?/i),B=n.trim(A[1]);z=x[w];A=JSON.parse((A[2]?n.trim(A[2]):"{}").replace(/^\(/,
"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,'$1"$2":').replace(/"\s*:\s*'/gi,'":"').replace(/'\s*(,|\})/gi,'"$1'));var b=A.utcOffset;if(-1===q.indexOf(B))B=n.getObject(B),n.isFunction(B)&&(z=B(z,w,x,A));else if("number"===typeof z||"string"===typeof z&&z&&!isNaN(Number(z)))switch(z=Number(z),B){case "NumberFormat":w=n.mixin({},A);x=parseFloat(w.places);if(isNaN(x)||0>x)w.places=Infinity;return l.format(z,w);case "DateString":z=new Date(z);if(A.local||A.systemLocale)return A.systemLocale?
z.toLocaleDateString()+(A.hideTime?"":" "+z.toLocaleTimeString()):z.toDateString()+(A.hideTime?"":" "+z.toTimeString());z=z.toUTCString();A.hideTime&&(z=z.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return z;case "DateFormat":return z=new Date(z),m(b)&&(z=a.add(z,"minute",z.getTimezoneOffset()-b)),k.format(z,A)}return e(z)}function g(w,x){var z;if(x)for(z in w)w.hasOwnProperty(z)&&(void 0===w[z]?delete w[z]:w[z]instanceof Object&&g(w[z],!0));else for(z in w)w.hasOwnProperty(z)&&void 0===w[z]&&delete w[z];
return w}function d(w){if(!w||"object"!=typeof w||n.isFunction(w))return w;if(w instanceof Int8Array||w instanceof Uint8Array||w instanceof Uint8ClampedArray||w instanceof Int16Array||w instanceof Int32Array||w instanceof Uint16Array||w instanceof Uint32Array||w instanceof Float32Array||w instanceof Float64Array||w instanceof Date)return new w.constructor(w);if(w instanceof ArrayBuffer)return w.slice(0,w.byteLength);if("function"===typeof w.clone)w=w.clone();else if("function"===typeof w.map&&"function"===
typeof w.forEach)w=w.map(d);else if("function"===typeof w.notifyChange&&"function"===typeof w.watch)w=w.clone();else{var x={},z,A={};for(z in w){var B=w[z];var b=!(z in A)||A[z]!==B;if(!(z in x)||x[z]!==B&&b)x[z]=d?d(B):B}w=x}return w}var q=["NumberFormat","DateString","DateFormat"],t=/<\/?[^>]+>/g;return{equals:function(w,x){return w===x||"number"===typeof w&&isNaN(w)&&"number"===typeof x&&isNaN(x)||n.isFunction((w||{}).getTime)&&n.isFunction((x||{}).getTime)&&w.getTime()==x.getTime()||n.isFunction((w||
{}).equals)&&w.equals(x)||n.isFunction((x||{}).equals)&&x.equals(w)||!1},mixin:n.mixin,valueOf:function(w,x){for(var z in w)if(w[z]==x)return z;return null},stripTags:function(w){if(w){var x=typeof w;if("string"===x)w=w.replace(t,"");else if("object"===x)for(var z in w)(x=w[z])&&"string"===typeof x&&(x=x.replace(t,"")),w[z]=x}return w},substitute:function(w,x,z){if(m(z))if(n.isObject(z)){var A=z.first;var B=z.dateFormat;var b=z.numberFormat}else A=z;if(x&&"{*}"!==x)return n.replace(x,n.hitch({obj:w},
function(c,v){c=v.split(":");return 1<c.length?(v=c[0],c.shift(),f(v,this.obj,c.join(":"))):B&&-1!==(B.properties||[]).indexOf(v)?f(v,this.obj,B.formatter||"DateString"):b&&-1!==(b.properties||[]).indexOf(v)?f(v,this.obj,b.formatter||"NumberFormat"):e(this.obj[v])}));x=[];var h;x.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+p.fieldsSummary+'"\x3e\x3ctbody\x3e');for(h in w)if(z=w[h],B&&-1!==(B.properties||[]).indexOf(h)?z=f(h,w,B.formatter||"DateString"):b&&-1!==(b.properties||[]).indexOf(h)&&
(z=f(h,w,b.formatter||"NumberFormat")),x.push("\x3ctr\x3e\x3cth\x3e"+h+"\x3c/th\x3e\x3ctd\x3e"+e(z)+"\x3c/td\x3e\x3c/tr\x3e"),A)break;x.push("\x3c/tbody\x3e\x3c/table\x3e");return x.join("")},filter:function(w,x,z){x=[n.isString(w)?w.split(""):w,z||r.global,n.isString(x)?new Function("item","index","array",x):x];z={};var A;w=x[0];for(A in w)x[2].call(x[A],w[A],A,w)&&(z[A]=w[A]);return z},startsWith:function(w,x,z){z=z||0;return w.indexOf(x,z)===z},endsWith:function(w,x,z){if("number"!==typeof z||
!isFinite(z)||Math.floor(z)!==z||z>w.length)z=w.length;z-=x.length;w=w.indexOf(x,z);return-1!==w&&w===z},isDefined:m,fixJson:g,clone:d}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(r,n,a){return function(){function l(k,p,m){this instanceof l&&(this.name=k,this.message=p&&a.substitute(p,m,function(e){return null==e?"":e})||"",this.details=m)}l.prototype.toString=function(){return"["+this.name+"]: "+this.message};return l}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper dojo/has ../../../core/promiseUtils ./Container ../engine/webgl/Fader ./webgl/BitBlitRenderer ./webgl/enums ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B,b,h,c){function v(y){return{state:y.state,pixelRatio:y.pixelRatio,stationary:y.stationary}}var u={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(y){function C(){var D=null!==y&&y.apply(this,arguments)||this;D._clipData=new Float32Array(8);D._upperLeft=w.create();D._upperRight=w.create();D._lowerLeft=w.create();D._lowerRight=w.create();D._mat2=t.create();D._clipRendererInitialized=!1;D._contextVersion=null;D._labelFader=new m.default(D);
return D}a(C,y);Object.defineProperty(C.prototype,"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});C.prototype.fadeInLabels=function(){this._labelFader.reset();this.requestRender()};C.prototype.createElement=function(){var D=document.createElement("canvas");D.setAttribute("class","esri-display-object");return D};C.prototype.setElement=function(D){this.element=D};C.prototype.useContextVersion=function(D){this._renderingContext||(this._contextVersion=D)};C.prototype.attach=
function(D){if(this.attached)return!0;this._resizeCanvas(D);var E=A.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new h(E);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=v(D);this._painter||(this._painter=new g.default,this._painter.initialize(this._renderingContext));return y.prototype.attach.call(this,D)};C.prototype.detach=function(D){y.prototype.detach.call(this,
D);this._boundFBO=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO1=null);this._labelsFBO2&&(this._labelsFBO2.dispose(),this._labelsFBO2=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._painter&&(this._painter.dispose(),this._painter=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=
null);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};C.prototype.renderChildren=function(D){var E=this.children;D.drawPhase=f.WGLDrawPhase.FILL|f.WGLDrawPhase.LINE|f.WGLDrawPhase.MARKER|f.WGLDrawPhase.TEXT;for(var F=E.length,G=0;G<F;G++){var J=E[G];J.attached&&this.renderChild(J,D)}if(l("esri-featurelayer-webgl-labeling")){var R=D.context,O=R.getBoundFramebufferObject();R.bindFramebuffer(this._labelsFBO2);G=D.stationary;R.setClearColor(0,
0,0,G?0:1);R.clear(R.gl.COLOR_BUFFER_BIT);if(G)for(D.drawPhase=f.WGLDrawPhase.LABEL_ALPHA,D.labelFBO=this._labelsFBO1,D.labelStep=this._labelFader.step(),G=0;G<F;G++)J=E[G],J.attached&&this.renderChild(J,D);else this._labelFader.reset();R.bindFramebuffer(O);D.labelFBO=this._labelsFBO2;D.drawPhase=f.WGLDrawPhase.LABEL;for(G=0;G<F;G++)J=E[G],J.attached&&this.renderChild(J,D);D=this._labelsFBO2;this._labelsFBO2=this._labelsFBO1;this._labelsFBO1=D}};C.prototype.beforeRenderChildren=function(D,E){D=E.context;
var F=E.state,G=E.pixelRatio;if(E=this._painter){D.enforceState();E.update(F,G);var J=F.width;E=F.height;var R=F.rotation;J=Math.round(J*G);E=Math.round(E*G);this._boundFBO=D.getBoundFramebufferObject();!l("esri-featurelayer-webgl-labeling")||this._labelsFBO1&&this._labelsFBO1.width===J&&this._labelsFBO1.height===E||(this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO2.dispose()),this._labelsFBO1=B.createWithAttachments(D,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,
wrapMode:33071,width:J,height:E},{colorTarget:0,depthStencilTarget:0}),D.bindFramebuffer(this._labelsFBO1),D.setDepthWriteEnabled(!0),D.setStencilWriteMask(255),D.setClearColor(0,0,0,0),D.setClearDepth(1),D.setClearStencil(0),D.clear(D.gl.COLOR_BUFFER_BIT|D.gl.DEPTH_BUFFER_BIT|D.gl.STENCIL_BUFFER_BIT),D.setDepthWriteEnabled(!1),D.bindFramebuffer(this._boundFBO),this._labelsFBO2=B.createWithAttachments(D,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,
width:J,height:E},{colorTarget:0,depthStencilTarget:0}));if(F.spatialReference&&(F.spatialReference._isWrappable?F.spatialReference._isWrappable():F.spatialReference.isWrappable)){var O=q.toRadian(R),P=Math.abs(Math.cos(O)),U=Math.abs(Math.sin(O)),K=Math.round(F.worldScreenWidth);if(Math.round(J*P+E*U)<=K)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===J&&this._clipFBO.height===E||(this._clipFBO=new B(D,{colorTarget:0,depthStencilTarget:3,width:J,height:E}));var V=.5*J,Q=.5*E;F=1/J;var W=
1/E;G*=.5*K;var N=.5*(J*U+E*P);J=this._upperLeft;P=this._upperRight;U=this._lowerLeft;K=this._lowerRight;w.set(J,-G,-N);w.set(P,G,-N);w.set(U,-G,N);w.set(K,G,N);t.identity(this._mat2);t.translate(this._mat2,this._mat2,[V,Q]);0!==R&&t.rotate(this._mat2,this._mat2,O);w.transformMat2d(J,J,this._mat2);w.transformMat2d(P,P,this._mat2);w.transformMat2d(U,U,this._mat2);w.transformMat2d(K,K,this._mat2);R=this._clipData;R.set([2*U[0]*F-1,2*(E-U[1])*W-1,2*K[0]*F-1,2*(E-K[1])*W-1,2*J[0]*F-1,2*(E-J[1])*W-1,2*
P[0]*F-1,2*(E-P[1])*W-1]);this._clipRendererInitialized||this._initializeClipRenderer(D);this._clipVBO.setData(R);this._boundFBO=D.getBoundFramebufferObject();D.bindFramebuffer(this._clipFBO);D.setDepthWriteEnabled(!0);D.setStencilWriteMask(255);D.setClearColor(0,0,0,0);D.setClearDepth(1);D.setClearStencil(0);D.clear(D.gl.COLOR_BUFFER_BIT|D.gl.DEPTH_BUFFER_BIT|D.gl.STENCIL_BUFFER_BIT);D.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=!1}};C.prototype.afterRenderChildren=function(D,
E){this._clipFrame&&this._clipRendererInitialized&&(D=this._renderingContext,D.bindFramebuffer(this._boundFBO),this._boundFBO=null,D.bindVAO(this._clipVAO),D.bindProgram(this._clipStencilProgram),D.setDepthWriteEnabled(!1),D.setDepthTestEnabled(!1),D.setStencilTestEnabled(!0),D.setBlendingEnabled(!1),D.setColorMask(!1,!1,!1,!1),D.setStencilOp(7680,7680,7681),D.setStencilWriteMask(255),D.setStencilFunction(519,1,255),D.drawElements(4,6,5123,0),D.bindVAO(),D.setColorMask(!0,!0,!0,!0),D.setBlendingEnabled(!0),
D.setStencilFunction(514,1,255),this._blitRenderer.render(D,this._clipFBO.colorTexture,9728,1),D.setStencilTestEnabled(!1))};C.prototype.doRender=function(D){var E=this.element.style;this.visible?(E.display="block",E.opacity=""+this.opacity,this._resizeCanvas(D),y.prototype.doRender.call(this,D),this._cachedRenderParams=v(D)):E.display="none"};C.prototype.takeScreenshot=function(D){void 0===D&&(D={});var E=D.pixelRatio||1;this._cachedRenderParams.pixelRatio=E;var F=Math.round(E*this._cachedRenderParams.state.width),
G=Math.round(E*this._cachedRenderParams.state.height),J=0,R=0,O=F,P=G,U=F,K=G;if(U=D.area)J=Math.round(E*U.x),R=Math.round(E*U.y),O=Math.round(E*U.width),P=Math.round(E*U.height);void 0!==D.width&&void 0!==D.height?(U=D.width/D.height,P*U<O?(U*=P,J+=Math.floor((O-U)/2),O=Math.floor(U)):(U=O/U,R+=Math.floor((P-U)/2),P=Math.floor(U)),U=D.width,K=D.height):(U=O,K=P);E=document.createElement("canvas");E.width=U;E.height=K;var V=E.getContext("2d"),Q=new Uint8Array(O*P*4),W=this._renderingContext,N=B.create(W,
{colorTarget:1,depthStencilTarget:3,width:F,height:G});W.bindFramebuffer(N);W.setViewport(0,0,F,G);var I=this._cachedRenderParams,S=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT|S.STENCIL_BUFFER_BIT);I.context=this._renderingContext;I.painter=this._painter;this.beforeRenderChildren(I,I);if(void 0!==D.rotation&&null!==D.rotation){S=
I.state;var Z=S.clone();Z.viewpoint.rotation=D.rotation;I.state=Z;this.renderChildren(I);I.state=S}else this.renderChildren(I);this.afterRenderChildren(I,I);N.readPixels(J,G-(R+P),O,P,6408,5121,Q);W.bindFramebuffer();W=V.getImageData(0,0,U,K);if(0!==J||0!==R||O!==F||P!==G||U!==F||K!==G)x.resampleHermite(Q,O,P,W.data,U,K,!0);else{R=P-1;P=0;N=4*O;for(Z=S=J=G=F=O=I=void 0;P<R;){S=P*N;Z=R*N;for(I=0;I<N;I+=4)O=Q[S+I],F=Q[S+I+1],G=Q[S+I+2],J=Q[S+I+3],Q[S+I]=Q[Z+I],Q[S+I+1]=Q[Z+I+1],Q[S+I+2]=Q[Z+I+2],Q[S+
I+3]=Q[Z+I+3],Q[Z+I]=O,Q[Z+I+1]=F,Q[Z+I+2]=G,Q[Z+I+3]=J;P++;R--}O=W.data;F=Q.length;for(R=0;R<F;R++)O[R]=Q[R]}Q=W.data;P=Q.length;for(R=0;R<P;R+=4)J=Q[R+3],0<J&&(G=J/255,O=Math.floor(Q[R+0]/G),F=Math.floor(Q[R+1]/G),G=Math.floor(Q[R+2]/G),Q[R+0]=255>=O?O:255,Q[R+1]=255>=F?F:255,Q[R+2]=255>=G?G:255);V.putImageData(W,0,0);V=u[D.format?D.format.toLowerCase():"png"];Q=1;void 0!==D.quality&&(Q=D.quality/100);D=E.toDataURL(V,Q);return k.resolve({dataURL:D,x:0,y:0,width:U,height:K})};C.prototype.prepareChildrenRenderParameters=
function(D){if(!this.attached||!this._renderingContext)return null;D=v(D);var E=this._renderingContext,F=E.gl;E.setDepthWriteEnabled(!0);E.setStencilWriteMask(255);E.setClearColor(0,0,0,0);E.setClearDepth(1);E.setClearStencil(0);E.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT);E.setViewport(0,0,this.element.width,this.element.height);E.setDepthWriteEnabled(!1);D.context=E;D.painter=this._painter;return D};C.prototype.attachChild=function(D,E){return D.attach(E)};C.prototype.detachChild=
function(D,E){return D.detach(E)};C.prototype.renderChild=function(D,E){return D.processRender(E)};C.prototype._resizeCanvas=function(D){var E=this.element,F=E.style,G=D.state,J=D.pixelRatio;D=Math.round(G.width*J);J=Math.round(G.height*J);if(E.width!==D||E.height!==J)E.width=D,E.height=J;F.width=G.width+"px";F.height=G.height+"px"};C.prototype._initializeClipRenderer=function(D){if(this._clipRendererInitialized)return!0;this._blitRenderer=new e;var E={a_pos:0},F=new b(D,d.stencilVS,d.stencilFS,E);
if(!F)return!1;var G=z.createVertex(D,35040,32),J=new Uint16Array([0,1,2,2,1,3]);J=z.createIndex(D,35044,J);D=new c(D,E,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:G},J);this._clipStencilProgram=F;this._clipVBO=G;this._clipVAO=D;return this._clipRendererInitialized=!0};return C}(p)})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(r,
n,a,l){var k;(function(p){p[p.BEFORE=0]="BEFORE";p[p.ATTACHING=1]="ATTACHING";p[p.DETACHING=2]="DETACHING";p[p.RENDERING=3]="RENDERING";p[p.AFTER=4]="AFTER";p[p.DONE=5]="DONE"})(k||(k={}));return function(p){function m(){var e=null!==p&&p.apply(this,arguments)||this;e._childrenSet=new Set;e._childrenToAttach=[];e._childrenToDetach=[];e._renderPhase=k.DONE;e.children=[];return e}a(m,p);Object.defineProperty(m.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});
m.prototype.detach=function(e){var f=this.children.concat(this._childrenToDetach);e=this.prepareChildrenRenderParameters(e);for(var g=0;g<f.length;g++){var d=f[g];d.attached&&(this.detachChild(d,e),d.attached=!1,d.parent=null)}};m.prototype.doRender=function(e){var f=this.prepareChildrenRenderParameters(e);this._renderPhase=k.BEFORE;this.beforeRenderChildren(e,f);this._renderPhase=k.ATTACHING;this.attachChildren(f);this._renderPhase=k.DETACHING;for(var g=this._childrenToDetach;0<g.length;){var d=
g.shift();this.detachChild(d,f);d.attached=!1;d.parent=null}this._renderPhase=k.RENDERING;this.renderChildren(f);this._renderPhase=k.AFTER;this.afterRenderChildren(e,f);this._renderPhase=k.DONE};m.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)};m.prototype.addChildAt=function(e,f){void 0===f&&(f=this.numChildren);if(!e||this.contains(e))return e;var g=e.parent;g&&g!==this&&g.removeChild(e);f>=this.numChildren?this.children.push(e):this.children.splice(f,0,e);this._childrenSet.add(e);
f=this._childrenToDetach.indexOf(e);-1<f&&this._childrenToDetach.splice(f,1);this._childrenToAttach.push(e);this._renderPhase>=k.RENDERING&&this.requestRender();return e};m.prototype.contains=function(e){return this._childrenSet.has(e)};m.prototype.getChildIndex=function(e){return this.children.indexOf(e)};m.prototype.getChildAt=function(e){return 0>e||e>this.children.length?null:this.children[e]};m.prototype.removeAllChildren=function(){for(var e=this.numChildren;e--;)this.removeChildAt(0)};m.prototype.removeChild=
function(e){return this.contains(e)?this.removeChildAt(this.getChildIndex(e)):e};m.prototype.removeChildAt=function(e){if(0>e||e>=this.children.length)return null;e=this.children.splice(e,1)[0];this._childrenSet["delete"](e);if(e.attached)this._childrenToDetach.push(e),this._renderPhase>=k.RENDERING&&this.requestRender();else{var f=this._childrenToAttach.indexOf(e);-1<f&&this._childrenToAttach.splice(f,1)}return e};m.prototype.requestChildRender=function(e){e&&e.parent===this&&this._renderPhase>=
k.RENDERING&&this.requestRender()};m.prototype.setChildIndex=function(e,f){var g=this.getChildIndex(e);-1<g&&(this.children.splice(g,1),this.children.splice(f,0,e),this._renderPhase>=k.RENDERING&&this.requestRender())};m.prototype.sortChildren=function(e){this._renderPhase>k.RENDERING&&this.requestRender();return this.children.sort(e)};m.prototype.attachChildren=function(e){var f=this._childrenToAttach;if(0!==f.length)for(var g=0,d=!1;!d;)d=f[g],this.attachChild(d,e)?(d.attached=!0,d.parent=this,
f.splice(g,1)):++g,d=f.length===g};m.prototype.renderChildren=function(e){for(var f=this.children,g=f.length,d=0;d<g;d++){var q=f[d];q.attached&&this.renderChild(q,e)}};m.prototype.beforeRenderChildren=function(e,f){};m.prototype.attachChild=function(e,f){return e.attach(f)};m.prototype.detachChild=function(e,f){e.detach(f)};m.prototype.renderChild=function(e,f){e.processRender(f)};m.prototype.afterRenderChildren=function(e,f){};return m}(l)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","./Evented"],function(r,n,a,l){return function(k){function p(){var m=null!==k&&k.apply(this,arguments)||this;m._renderRequestedCalled=!1;m._attached=!1;m._opacity=1;m.renderRequested=!1;m._visible=!0;return m}a(p,k);Object.defineProperty(p.prototype,"attached",{get:function(){return this._attached},set:function(m){this._attached!==m&&((this._attached=m)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},
enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"opacity",{get:function(){return this._opacity},set:function(m){this._opacity!==m&&(this._opacity=m,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"visible",{get:function(){return this._visible},set:function(m){this._visible!==m&&(this._visible=m,this.requestRender())},enumerable:!0,configurable:!0});p.prototype.attach=function(m){return!0};p.prototype.detach=function(m){};p.prototype.processRender=
function(m){this._renderRequestedCalled=!1;this.doRender(m);this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};p.prototype.requestRender=function(){var m=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);m!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};p.prototype.dispose=function(){};return p}(l.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(r,n,a,l,k){Object.defineProperty(n,"__esModule",{value:!0});r=function(){function p(){}p.prototype.on=function(m,e){return l.after(this,"on"+m,e,!0)};p.prototype.once=function(m,e){return k.once(this,m,e)};p.prototype.emit=function(m){k.emit(this,m,this)};p.prototype.hasEventListener=function(m){m="on"+m;return!(!this[m]||!this[m].after)};return p}();n.Evented=r;n.EventedMixin=function(p){return function(m){function e(){return null!==
m&&m.apply(this,arguments)||this}a(e,m);e.prototype.on=function(f,g){return l.after(this,"on"+f,g,!0)};e.prototype.once=function(f,g){return k.once(this,f,g)};e.prototype.emit=function(f,g){k.emit(this,f,g)};e.prototype.hasEventListener=function(f){f="on"+f;return!(!this[f]||!this[f].after)};return e}(p)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/Fader":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});r=function(){function a(l,k){void 0===
k&&(k=250);this.duration=k;this._startTime=this._lastTime=0;this._parent=l}a.prototype.reset=function(){0===this._lastTime;this._startTime=performance.now()};a.prototype.step=function(){var l=performance.now();if(0===this._lastTime)return this._lastTime=l,this._parent.requestRender(),0;var k=l-this._lastTime;this._lastTime=l;l-this._startTime<2*this.duration&&this._parent.requestRender();return k/this.duration};return a}();n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),
function(r,n,a,l,k,p){return function(){function m(){this._initialized=!1}m.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)};m.prototype.render=function(e,f,g,d){e&&(this._initialized||this._initialize(e),e.setBlendFunctionSeparate(1,771,1,771),e.bindVAO(this._vertexArrayObject),e.bindProgram(this._program),f.setSamplingMode(g),e.bindTexture(f,0),this._program.setUniform1i("u_tex",
0),this._program.setUniform1f("u_opacity",d),e.drawArrays(5,0,4),e.bindVAO())};m.prototype._initialize=function(e){if(this._initialized)return!0;var f={a_pos:0,a_tex:1},g=new k(e,a.bitblitVS,a.bitblitFS,f);if(!g)return!1;var d=new Int8Array(16);d[0]=-1;d[1]=-1;d[2]=0;d[3]=0;d[4]=1;d[5]=-1;d[6]=1;d[7]=0;d[8]=-1;d[9]=1;d[10]=0;d[11]=1;d[12]=1;d[13]=1;d[14]=1;d[15]=1;e=new p(e,f,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,
stride:4,normalized:!1,divisor:0}]},{geometry:l.createVertex(e,35044,d)});this._program=g;this._vertexArrayObject=e;return this._initialized=!0};return m}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),function(r,n,a,l,k,p,m){r=new m;m.parse(a,r);m.parse(l,r);m.parse(k,
r);m.parse(p,r);return r})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(r,n,a){return function(){function l(k){if(k)for(var p in k)this[p]=k[p]}l.parse=function(k,p){k=a.parse(k).getElementsByTagName("snippet");for(var m=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,e=/[\$\s]+/g,f=/\(([^\(\)]*)\)/,g=0;g<k.length;g++){for(var d=k[g].getAttribute("name"),q=k[g].textContent;;){var t=q.match(m);if(null==t)break;var w=t[0].replace(e,
""),x=w.match(f),z=void 0;x&&(z=x[1].split(",").map(function(A){return A.trim()}));w=w.replace(f,"");z=p._instantiate(w,z);q=q.replace(t[0],z)}p[d]=q}};l.prototype._instantiate=function(k,p){k=this[k];for(p||(p=[]);;){var m=k.match(/\$(\d+)/);if(null==m)break;var e=parseInt(m[1],10);k=k.replace(m[0],p[e])}return k};return l}()})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports","dojo/has"],function(r,n,a){return function(){function l(k,p,m,e,f){this._glName=
this._context=null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=k;this._bufferType=p;this._usage=m;this._id=l._nextId++;this._glName=this._context.gl.createBuffer();a("esri-webgl-debug")&&k.instanceCounter.incrementCount(1);e&&this.setData(e,f)}l.createIndex=function(k,p,m,e){return new l(k,34963,p,m,e)};l.createVertex=function(k,p,m){return new l(k,34962,p,m)};Object.defineProperty(l.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});
Object.defineProperty(l.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"indexType",{get:function(){return this._indexType},
enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});l.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),this._context=null)};l.prototype.setData=function(k,p){if(k){if("number"===typeof k){if(34963===
this._bufferType&&p)switch(this._indexType=p,this._size=k,p){case 5123:k*=2;break;case 5125:k*=4}}else p=k.byteLength,k instanceof Uint16Array&&(p/=2,this._indexType=5123),k instanceof Uint32Array&&(p/=4,this._indexType=5125),this._size=p,ArrayBuffer.isView(k)&&(k=k.buffer);p=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,k,this._usage);this._context.bindVAO(p)}};l.prototype.setSubData=function(k,p,m,e){void 0===
p&&(p=0);void 0===m&&(m=0);if(k){var f=e,g=k.byteLength;k instanceof Uint16Array&&(g/=2,p*=2,m*=2,f*=2);k instanceof Uint32Array&&(g/=4,p*=4,m*=4,f*=4);void 0===e&&(e=g-1);e=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);g=this._context.gl;k=ArrayBuffer.isView(k)?k.buffer:k;g.bufferSubData(this._bufferType,p,k.slice(m,f));this._context.bindVAO(e)}};l._nextId=0;return l}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports",
"dojo/has","./ShaderTranspiler"],function(r,n,a,l){return function(){function k(p,m,e,f,g){void 0===g&&(g={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};this._context=p;this._vertexShaderSource=
m;this._fragmentShaderSource=e;if(Array.isArray(g))for(m=0;m<g.length;m++)this._defines[g[m]]="1";else this._defines=g;this._id=k._nextId++;this._locations=f;a("esri-webgl-debug")&&p.instanceCounter.incrementCount(3)}Object.defineProperty(k.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"locations",{get:function(){return this._locations},
enumerable:!0,configurable:!0});k.prototype.getDefine=function(p){return this._defines[p]};k.prototype.dispose=function(){if(this._context){var p=this._context.gl;this._vShader&&(p.deleteShader(this._vShader),this._vShader=null);this._fShader&&(p.deleteShader(this._fShader),this._fShader=null);this._glName&&(p.deleteProgram(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3);this._context=null}};k.prototype.initialize=function(){if(!this._initialized){this._vShader=
this._loadShader(35633);this._fShader=this._loadShader(35632);var p=this._context.gl,m=p.createProgram();p.attachShader(m,this._vShader);p.attachShader(m,this._fShader);for(var e in this._locations)p.bindAttribLocation(m,this._locations[e],e);p.linkProgram(m);p.getProgramParameter(m,p.LINK_STATUS);this._glName=m;this._initialized=!0}};k.prototype.getUniformLocation=function(p){this.initialize();void 0===this._nameToUniformLocation[p]&&(this._nameToUniformLocation[p]=this._context.gl.getUniformLocation(this._glName,
p));return this._nameToUniformLocation[p]};k.prototype.hasUniform=function(p){return null!==this.getUniformLocation(p)};k.prototype.getAttribLocation=function(p){this.initialize();void 0===this._nameToAttribLocation[p]&&(this._nameToAttribLocation[p]=this._context.gl.getAttribLocation(this._glName,p));return this._nameToAttribLocation[p]};k.prototype.setUniform1i=function(p,m){var e=this._nameToUniform1[p];if(void 0===e||m!==e)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(p),
m),this._nameToUniform1[p]=m};k.prototype.setUniform1f=function(p,m){var e=this._nameToUniform1[p];if(void 0===e||m!==e)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(p),m),this._nameToUniform1[p]=m};k.prototype.setUniform1fv=function(p,m){var e=this._nameToUniform2[p];void 0!==e&&k._arraysEqual(m,e)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(p),m),void 0===e?this._nameToUniform2[p]=new Float32Array(m):e.set(m))};k.prototype.setUniform2f=
function(p,m,e){var f=this._nameToUniform2[p];if(void 0===f||m!==f[0]||e!==f[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(p),m,e),void 0===f?this._nameToUniform2[p]=new Float32Array([m,e]):(f[0]=m,f[1]=e)};k.prototype.setUniform2fv=function(p,m){var e=this._nameToUniform2[p];void 0!==e&&k._arraysEqual(m,e)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(p),m),void 0===e?this._nameToUniform2[p]=new Float32Array(m):e.set(m))};
k.prototype.setUniform3f=function(p,m,e,f){var g=this._nameToUniform3[p];if(void 0===g||m!==g[0]||e!==g[1]||f!==g[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(p),m,e,f),void 0===g?this._nameToUniform3[p]=new Float32Array([m,e,f]):(g[0]=m,g[1]=e,g[2]=f)};k.prototype.setUniform3fv=function(p,m){var e=this._nameToUniform3[p];void 0!==e&&k._arraysEqual(m,e)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(p),m),void 0===e?this._nameToUniform3[p]=
new Float32Array(m):e.set(m))};k.prototype.setUniform4f=function(p,m,e,f,g){var d=this._nameToUniform4[p];if(void 0===d||m!==d[0]||e!==d[1]||f!==d[2]||g!==d[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(p),m,e,f,g),void 0===d?this._nameToUniform4[p]=new Float32Array([m,e,f,g]):(d[0]=m,d[1]=e,d[2]=f,d[3]=g)};k.prototype.setUniform4fv=function(p,m){var e=this._nameToUniform4[p];void 0!==e&&k._arraysEqual(m,e)||(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(p),
m),void 0===e?this._nameToUniform4[p]=new Float32Array(m):e.set(m))};k.prototype.setUniformMatrix3fv=function(p,m,e){void 0===e&&(e=!1);var f=this._nameToUniformMatrix3[p];void 0!==f&&(9===f.length?k._matrix3Equal(f,m):k._arraysEqual(m,f))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(p),e,m),void 0===f?this._nameToUniformMatrix3[p]=new Float32Array(m):f.set(m))};k.prototype.setUniformMatrix4fv=function(p,m,e){void 0===e&&(e=!1);var f=this._nameToUniformMatrix4[p];
void 0!==f&&(16===f.length?k._matrix4Equal(f,m):k._arraysEqual(m,f))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(p),e,m),void 0===f?this._nameToUniformMatrix4[p]=new Float32Array(m):f.set(m))};k._padToThree=function(p){var m=p.toString();1E3>p&&(m=("  "+p).slice(-3));return m};k.prototype._addLineNumbers=function(p){var m=2;return p.replace(/\n/g,function(){return"\n"+k._padToThree(m++)+":"})};k.prototype._loadShader=function(p){var m=35633===p,e=m?
this._vertexShaderSource:this._fragmentShaderSource,f="",g;for(g in this._defines)f+="#define "+g+" "+this._defines[g]+"\n";e=f+e;"webgl2"===this._context.contextVersion&&(e=l.transpileShader(e,m?"vertex":"fragment"));m=this._context.gl;p=m.createShader(p);m.shaderSource(p,e);m.compileShader(p);m.getShaderParameter(p,m.COMPILE_STATUS);return p};k._matrix4Equal=function(p,m){return p[0]===m[0]&&p[1]===m[1]&&p[2]===m[2]&&p[3]===m[3]&&p[4]===m[4]&&p[5]===m[5]&&p[6]===m[6]&&p[7]===m[7]&&p[8]===m[8]&&
p[9]===m[9]&&p[10]===m[10]&&p[11]===m[11]&&p[12]===m[12]&&p[13]===m[13]&&p[14]===m[14]&&p[15]===m[15]};k._matrix3Equal=function(p,m){return p[0]===m[0]&&p[1]===m[1]&&p[2]===m[2]&&p[3]===m[3]&&p[4]===m[4]&&p[5]===m[5]&&p[6]===m[6]&&p[7]===m[7]&&p[8]===m[8]};k._arraysEqual=function(p,m){if(p.length!==m.length)return!1;for(var e=0;e<p.length;++e)if(p[e]!==m[e])return!1;return!0};k._nextId=0;return k}()})},"esri/layers/vectorTiles/views/webgl/ShaderTranspiler":function(){define(["require","exports","./reservedWordsGLSL3",
"./lib/glsl-tokenizer/string"],function(r,n,a,l){function k(f){return f.map(function(g){return"eof"!==g.type?g.data:""}).join("")}function p(f,g,d,q){q=q||d;for(var t=0;t<f.length;t++){var w=f[t];if("ident"===w.type&&w.data===d)return q in g?g[q]++:g[q]=0,p(f,g,q+"_"+g[q],q)}return d}function m(f,g,d){void 0===d&&(d="afterVersion");var q={data:"\n",type:"whitespace"},t=function(A){return A<f.length?/[^\r\n]$/.test(f[A].data):!1},w=function(A){for(var B=-1,b=0,h=-1,c=0;c<A.length;c++){var v=A[c];"preprocessor"===
v.type&&(v.data.match(/#(if|ifdef|ifndef)\s+.+/)?++b:v.data.match(/#endif\s*.*/)&&--b);("afterVersion"===d||"afterPrecision"===d)&&"preprocessor"===v.type&&/^#version/.test(v.data)&&(h=Math.max(h,c));if("afterPrecision"===d&&"keyword"===v.type&&"precision"===v.data){a:{for(v=c;v<A.length;v++){var u=A[v];if("operator"===u.type&&";"===u.data)break a}v=null}if(null===v)throw Error("precision statement not followed by any semicolons!");h=Math.max(h,v)}B<h&&0===b&&(B=c)}return B+1}(f);t(w-1)&&f.splice(w++,
0,q);for(var x=0;x<g.length;x++){var z=g[x];f.splice(w++,0,z)}t(w-1)&&t(w)&&f.splice(w,0,q)}Object.defineProperty(n,"__esModule",{value:!0});var e=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];n.transpileShader=function(f,g){f=l(f);a:{var d="100";var q="300 es";void 0===d&&(d="100");void 0===q&&(q="300 es");for(var t=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,w=0;w<f.length;w++){var x=f[w];if("preprocessor"===x.type){var z=t.exec(x.data);if(z)if(t=
z[1].replace(/\s\s+/g," "),t===q){d=t;break a}else if(t===d){x.data="#version "+q;break a}else throw Error("unknown glsl version: "+t);}}f.splice(0,0,{type:"preprocessor",data:"#version "+q},{type:"whitespace",data:"\n"});d=null}if("300 es"===d)throw Error("shader is already glsl 300 es");t=x=null;w={};z={};for(d=0;d<f.length;++d)switch(q=f[d],q.type){case "keyword":"vertex"===g&&"attribute"===q.data?q.data="in":"varying"===q.data&&(q.data="vertex"===g?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(q.data.trim())&&
(q.data=q.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===g&&"gl_FragColor"===q.data){if(!x){x=p(f,w,"fragColor");var A=void 0;void 0===A&&(A="lowp");m(f,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:A},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:x},{type:"operator",data:";"}],"afterPrecision")}q.data=x}else"fragment"===g&&"gl_FragDepthEXT"===q.data&&(t||(t=p(f,w,"gl_FragDepth")),q.data=t);break;case "ident":if(0<=
a.indexOf(q.data)){if(A="vertex"===g)a:{for(A=d-1;0<=A;A--){var B=f[A];if("whitespace"!==B.type&&"block-comment"!==B.type)if("keyword"===B.type){if("attribute"===B.data||"in"===B.data){A=!0;break a}}else break}A=!1}if(A)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");q.data in z||(z[q.data]=p(f,w,q.data));q.data=z[q.data]}}for(d=f.length-1;0<=d;--d)q=f[d],"preprocessor"===q.type&&((g=q.data.match(/#extension\s+(.*):/))&&g[1]&&0<=e.indexOf(g[1].trim())&&
(g=f[d+1],f.splice(d,g&&"whitespace"===g.type?2:1)),(g=q.data.match(/#ifdef\s+(.*)/))&&g[1]&&0<=e.indexOf(g[1].trim())&&(q.data="#if 1"),(g=q.data.match(/#ifndef\s+(.*)/))&&g[1]&&0<=e.indexOf(g[1].trim())&&(q.data="#if 0"));return k(f)}})},"esri/layers/vectorTiles/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(r,n){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(r){"use strict;";return function(n){var a=r(),l=[];l=l.concat(a(n));return l=l.concat(a(null))}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(r,n,a){"use strict;";var l="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function k(D){D.length&&
B.push({type:l[w],data:D,position:c,line:b,column:h})}function p(){A=A.length?[]:A;if("/"===z&&"*"===x)return c=t+q-1,w=0,z=x,q+1;if("/"===z&&"/"===x)return c=t+q-1,w=1,z=x,q+1;if("#"===x)return w=2,c=t+q,q;if(/\s/.test(x))return w=9,c=t+q,q;v=/\d/.test(x);u=/[^\w_]/.test(x);c=t+q;w=v?4:u?3:9999;return q}function m(){if(("\r"===x||"\n"===x)&&"\\"!==z)return k(A.join("")),w=999,q;A.push(x);z=x;return q+1}function e(){if("."===z&&/\d/.test(x))return w=5,q;if("/"===z&&"*"===x)return w=0,q;if("/"===z&&
"/"===x)return w=1,q;if("."===x&&A.length){for(;f(A););w=5;return q}if(";"===x||")"===x||"("===x){if(A.length)for(;f(A););k(x);w=999;return q+1}var D=2===A.length&&"\x3d"!==x;if(/[\w_\d\s]/.test(x)||D){for(;f(A););w=999;return q}A.push(x);z=x;return q+1}function f(D){var E=0;do{var F=n.indexOf(D.slice(0,D.length+E).join(""));var G=n[F];if(-1===F){if(0<E--+D.length)continue;G=D.slice(0,1).join("")}k(G);c+=G.length;A=A.slice(G.length);return A.length}while(1)}function g(){if("."===x||/[eE]/.test(x))return A.push(x),
w=5,z=x,q+1;if("x"===x&&1===A.length&&"0"===A[0])return w=11,A.push(x),z=x,q+1;if(/[^\d]/.test(x))return k(A.join("")),w=999,q;A.push(x);z=x;return q+1}function d(){"f"===x&&(A.push(x),z=x,q+=1);if(/[eE]/.test(x)||"-"===x&&/[eE]/.test(z))return A.push(x),z=x,q+1;if(/[^\d]/.test(x))return k(A.join("")),w=999,q;A.push(x);z=x;return q+1}var q=0,t=0,w=999,x,z,A=[],B=[],b=1,h=0,c=0,v=!1,u=!1,y="",C;return function(D){B=[];if(null!==D){D=D.replace?D.replace(/\r\n/g,"\n"):D;q=0;y+=D;for(C=y.length;x=y[q],
q<C;){D=q;switch(w){case 0:"/"===x&&"*"===z?(A.push(x),k(A.join("")),w=999):(A.push(x),z=x);q+=1;break;case 1:q=m();break;case 2:q=m();break;case 3:q=e();break;case 4:q=g();break;case 11:/[^a-fA-F0-9]/.test(x)?(k(A.join("")),w=999):(A.push(x),z=x,q+=1);break;case 5:q=d();break;case 9999:if(/[^\d\w_]/.test(x)){var E=A.join("");w=-1<r.indexOf(E)?8:-1<a.indexOf(E)?7:6;k(A.join(""));w=999}else A.push(x),z=x,q+=1;break;case 9:/[^\s]/g.test(x)?(k(A.join("")),w=999):(A.push(x),z=x,q+=1);break;case 999:q=
p()}if(D!==q)switch(y[D]){case "\n":h=0;++b;break;default:++h}}t+=q;y=y.slice(q);return B}A.length&&k(A.join(""));w=10;k("(eof)");return B}}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require","exports","dojo/has","./Util"],function(r,n,a,l){return function(){function k(p,m,e,f,g){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=p;this._layout=e;this._buffers=f;this._locations=m;g&&(this._indexBuffer=g);this._id=k._nextId++;a("esri-webgl-debug")&&p.instanceCounter.incrementCount(2)}Object.defineProperty(k.prototype,"id",
{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"size",{get:function(){var p=this;return Object.keys(this._buffers).reduce(function(m,
e){return m+p._buffers[e].size},this._indexBuffer?this._indexBuffer.size:0)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});k.prototype.dispose=function(p){void 0===p&&(p=!0);if(this._context){var m=this._context.capabilities.vao;m&&this._glName&&(m.deleteVertexArray(this._glName),this._glName=
null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(p){for(var e in this._buffers)this._buffers[e].dispose(),delete this._buffers[e];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2);this._context=null}};k.prototype.initialize=function(){if(!this._initialized){var p=this._context.capabilities.vao;if(p){var m=p.createVertexArray();p.bindVertexArray(m);this._bindLayout();p.bindVertexArray(null);
this._glName=m}this._initialized=!0}};k.prototype.bind=function(){this.initialize();var p=this._context.capabilities.vao;p?p.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};k.prototype._bindLayout=function(){var p=this._buffers,m=!!this._context.capabilities.vao,e=this._layout,f=this._indexBuffer,g=this._context.gl,d;for(d in p)l.bindVertexBufferLayout(this._context,this._locations,p[d],e[d]);f&&(m?g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,f.glName):this._context.bindBuffer(f))};
k.prototype.unbind=function(){this.initialize();var p=this._context.capabilities.vao;p?p.bindVertexArray(null):this._unbindLayout()};k.prototype._unbindLayout=function(){var p=this._buffers,m=this._layout,e;for(e in p)l.unbindVertexBufferLayout(this._context,this._locations,p[e],m[e]);(p=this._indexBuffer)&&this._context.unbindBuffer(p.bufferType)};k._nextId=0;return k}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error"],
function(r,n,a,l){return function(){function k(){}k.vertexCount=function(p,m){return p.vertexBuffers[m].size/k.getStride(p.layout[m])};k.getStride=function(p){return p[0].stride};k.getBytesPerElement=function(p){switch(p){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};k.addDescriptor=function(p,m,e,f,g,d){var q=k.getBytesPerElement(f);if(0<p.length){var t=p[0].stride,w=
t+q*e;p.forEach(function(x){return x.stride=w});p.push({name:m,count:e,type:f,offset:t,stride:w,normalized:g,divisor:d})}else p.push({name:m,count:e,type:f,offset:0,stride:q*e,normalized:g,divisor:d})};k.assertCompatibleVertexAttributeLocations=function(p,m){return p.locations===m.locations};k.hasAttribute=function(p,m){for(var e=0;e<p.length;e++)if(p[e].name===m)return!0;return!1};k.findAttribute=function(p,m){for(var e=0;e<p.length;e++)if(p[e].name===m)return p[e];return null};k.copyFramebufferToTexture=
function(p,m,e,f,g){void 0===g&&(g=0);var d=p.getBoundFramebufferObject(),q=p.getBoundTexture(0);p.bindFramebuffer(m);p.bindTexture(e,0);p.gl.copyTexImage2D(p.gl.TEXTURE_2D,g,e.descriptor.pixelFormat,f[0],f[1],f[2],f[3],0);p.gl.flush();p.bindFramebuffer(d);p.bindTexture(q,0)};k.assert=function(p,m){if(!p)throw new l(m);};k.setBaseInstanceOffset=function(p,m){var e={},f;for(f in p)e[f]=p[f].map(function(g){return g.divisor?a({},g,{baseInstance:m}):g});return e};k.bindVertexBufferLayout=function(p,
m,e,f,g){var d=p.gl,q=p.capabilities.instancing;p.bindBuffer(e);f.forEach(function(t){var w=m[t.name],x=(g?g:0+t.baseInstance?t.baseInstance:0)*t.stride;if(4>=t.count)d.vertexAttribPointer(w,t.count,t.type,t.normalized,t.stride,t.offset+x),d.enableVertexAttribArray(w),t.divisor&&0<t.divisor&&q&&q.vertexAttribDivisor(w,t.divisor);else if(9===t.count)for(var z=0;3>z;z++)d.vertexAttribPointer(w+z,3,t.type,t.normalized,t.stride,t.offset+12*z+x),d.enableVertexAttribArray(w+z),t.divisor&&0<t.divisor&&q&&
q.vertexAttribDivisor(w+z,t.divisor);else if(16===t.count)for(z=0;4>z;z++)d.vertexAttribPointer(w+z,4,t.type,t.normalized,t.stride,t.offset+16*z+x),d.enableVertexAttribArray(w+z),t.divisor&&0<t.divisor&&q&&q.vertexAttribDivisor(w+z,t.divisor)})};k.unbindVertexBufferLayout=function(p,m,e,f){var g=p.gl;p.bindBuffer(e);f.forEach(function(d){var q=m[d.name];if(4>=d.count)g.disableVertexAttribArray(q);else if(9===d.count)for(d=0;3>d;d++)g.disableVertexAttribArray(q+d);else if(16===d.count)for(d=0;4>d;d++)g.disableVertexAttribArray(q+
d)});p.unbindBuffer(34962)};return k}()})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(r){for(var n,a=1,l=arguments.length;a<l;a++){n=arguments[a];for(var k in n)Object.prototype.hasOwnProperty.call(n,k)&&(r[k]=n[k])}return r}})},"esri/layers/vectorTiles/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=
1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL";a[a.NONE=5]="NONE";a[a.UNKNOWN=6]="UNKNOWN";a[a.COUNT=7]="COUNT"})(n.WGLGeometryType||(n.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(n.WGLGeometryTransactionStatus||(n.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.MARKER=4]="MARKER";a[a.TEXT=8]="TEXT";a[a.LABEL=16]="LABEL";a[a.LABEL_ALPHA=32]=
"LABEL_ALPHA";a[a.HITTEST=64]="HITTEST";a[a.HIGHLIGHT=128]="HIGHLIGHT";a[a.CLIP=256]="CLIP";a[a.DEBUG=512]="DEBUG";a[a.NUM_DRAW_PHASES=12]="NUM_DRAW_PHASES"})(n.WGLDrawPhase||(n.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(n.VVType||(n.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]=
"SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(n.WGLVVFlag||(n.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(n.WGLVVTarget||(n.WGLVVTarget={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]=
"SQUARE"})(n.CapType||(n.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=3]="ROUND"})(n.JoinType||(n.JoinType={}));(function(a){a.SIMPLE_MARKER="esriSMS";a.SIMPLE_LINE="esriSLS";a.SIMPLE_FILL="esriSFS";a.PICTURE_MARKER="esriPMS";a.PICTURE_FILL="esriPFS";a.TEXT="esriTS"})(n.EsriSymbolType||(n.EsriSymbolType={}));(function(a){a.SIMPLE_MARKER="simple-marker";a.SIMPLE_LINE="simple-line";a.SIMPLE_FILL="simple-fill";a.PICTURE_MARKER="picture-marker";
a.PICTURE_FILL="picture-fill";a.TEXT="text"})(n.EsriSymbolTypeKebab||(n.EsriSymbolTypeKebab={}))})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLabel ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B){Object.defineProperty(n,"__esModule",{value:!0});r=function(){function c(){this._initialized=!1}c.prototype.registerPass=function(v,u){this._initialize();for(var y=0;y<u.length;y++)this._passMap.set(u[y],v);return this};c.prototype.getPaintPassTs=function(v){this._initialize();return this._passMap.has(v)?[this._passMap.get(v)]:[]};c.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return c}();n.WGLPainterOptions=
r;var b=new Uint8Array(4*f.C_HITTEST_SEARCH_SIZE*f.C_HITTEST_SEARCH_SIZE),h=new Uint32Array(b.buffer);r=function(){function c(){this._hlPainter=new A;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new e}c.allGeometryPhases=function(){return[p.WGLDrawPhase.FILL,
p.WGLDrawPhase.LINE,p.WGLDrawPhase.MARKER,p.WGLDrawPhase.TEXT]};c.toWGLDrawPhases=function(v){for(var u=[],y,C=0;C<p.WGLDrawPhase.NUM_DRAW_PHASES;C++)y=1<<C,y&v&&u.push(y);return u};Object.defineProperty(c.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});c.prototype.dispose=function(){this.materialManager.dispose();
this.textureManager=null;this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null);this._passes&&(this._passes.forEach(function(v){return v.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(v){return v.forEach(function(u){return u.dispose()})}),this._brushes.clear())};c.prototype.initialize=function(v){this.materialManager.initialize(v)};c.prototype.update=function(v,u){this._state=v;if(this._state.width!==
this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/v.width,this._extrudeScaleVector[1]=-2/v.height,k.identity(this._extrudeMatrix),k.rotate(this._extrudeMatrix,this._extrudeMatrix,-v.rotation*m.C_DEG_TO_RAD,this._extrudeRotateVector),k.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),k.transpose(this._extrudeMatrix,this._extrudeMatrix),k.identity(this._extrudeNoRotationMatrix),k.scale(this._extrudeNoRotationMatrix,
this._extrudeNoRotationMatrix,this._extrudeScaleVector),k.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};c.prototype.getBrushes=function(v){if(!this._brushes){var u=new q.default,y=new x.default,C=new w.default,D=new z.default,E=new t.default,F=new g.default,G=new d.default;this._brushes=new Map;this._brushes.set(p.WGLDrawPhase.FILL,[u]);this._brushes.set(p.WGLDrawPhase.MARKER,
[y]);this._brushes.set(p.WGLDrawPhase.LINE,[C]);this._brushes.set(p.WGLDrawPhase.TEXT,[D]);this._brushes.set(p.WGLDrawPhase.LABEL,[E]);this._brushes.set(p.WGLDrawPhase.LABEL_ALPHA,[E]);this._brushes.set(p.WGLDrawPhase.HITTEST,[u,y,C,D]);this._brushes.set(p.WGLDrawPhase.HIGHLIGHT,[u,y,C,D]);this._brushes.set(p.WGLDrawPhase.CLIP,[G]);this._brushes.set(p.WGLDrawPhase.DEBUG,[F])}if(!this._brushes.has(v))throw Error("WGLPainter: Tried to get brush for unknown phase: "+v);return this._brushes.get(v)};c.prototype.bindTextureManager=
function(v){this.textureManager=v};c.prototype.draw=function(v,u,y,C){y[0]===p.WGLDrawPhase.LABEL_ALPHA&&y[0]===p.WGLDrawPhase.LABEL||this._drawClippingRects(v,u);var D=v.context;D.setBlendingEnabled(!0);D.setStencilWriteMask(0);D.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(v,u,y,C);this._debugTiles(v,u)};c.prototype.setHighlightOptions=function(v){this._hlPainter.setHighlightOptions(v)};c.prototype.highlight=function(v,u){var y=v.context,C=y.getViewport();this._hlPainter.setup(y,C.width,
C.height);this._hlPainter.startMaskDraw(y);this._drawClippingRects(v,u);y.setBlendingEnabled(!0);y.setStencilWriteMask(0);y.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(v,u,[p.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(y)};c.prototype.hitTest=function(v,u){var y=f.C_HITTEST_SEARCH_SIZE,C=[0,0],D=[0,0],E=v.state;E.toMap(C,[0,0]);E.toMap(D,[y,y]);if(0===u.filter(function(O){return!(C[0]>O.bounds[2]||D[0]<O.bounds[0]||C[1]<O.bounds[1]||D[1]>O.bounds[3])}).length)return[];E=v.context;this._hittestFBO||
(this._hittestFBO=B.create(E,{colorTarget:0,depthStencilTarget:3,width:y,height:y}));var F=E.getViewport(),G=E.getBoundFramebufferObject();E.bindFramebuffer(this._hittestFBO);E.setViewport(0,0,y,y);this._drawClippingRects(v,u);var J=E.gl;E.setClearColor(1,1,1,1);E.clear(J.COLOR_BUFFER_BIT);E.setBlendingEnabled(!1);E.setStencilWriteMask(0);this._drawPhases(v,u,[p.WGLDrawPhase.HITTEST]);E.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,0,y,y,6408,5121,b);v=y*y;u=new Set;for(y=0;y<v;y++)J=h[y],
4294967295!==J&&u.add(J);E.bindFramebuffer(G);E.setViewport(F.x,F.y,F.width,F.height);var R=[];u.forEach(function(O){R.push(O)});return R};c.prototype._getPaintPass=function(v){this._passes||(this._passes=new Map);if(!this._passes.has(v))try{this._passes.set(v,new v)}catch(u){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+v+",\n"+u);}return this._passes.get(v)};c.prototype._getPaintPasses=function(v,u){var y=this;return u.getPaintPassTs(v).map(function(C){return y._getPaintPass(C)})};
c.prototype._drawPhases=function(v,u,y,C){v.context.setStencilTestEnabled(!0);for(var D=0;D<y.length;D++){var E=y[D],F=C?this._getPaintPasses(E,C):[];E=a({},v,{drawPhase:E});F.forEach(function(R){return R.preRender(v,v.rendererInfo)});for(var G=0,J=u;G<J.length;G++)J[G].doRender(E);F.reverse().forEach(function(R){return R.postRender(v,v.rendererInfo)})}v.context.setStencilTestEnabled(!1)};c.prototype._debugTiles=function(v,u){l("esri-feature-tiles-debug")&&this._drawPhases(v,u,[p.WGLDrawPhase.DEBUG])};
c.prototype._drawClippingRects=function(v,u){if(0!==u.length){var y=v.context;y.setDepthWriteEnabled(!1);y.setDepthTestEnabled(!1);y.setStencilTestEnabled(!0);y.setBlendingEnabled(!1);y.setColorMask(!1,!1,!1,!1);y.setStencilOp(7680,7680,7681);y.setClearStencil(0);y.clear(y.gl.STENCIL_BUFFER_BIT);y.setStencilWriteMask(255);y=0;for(var C=u.length;y<u.length;y++,C--){var D=u[y];D.attached&&(D.stencilRef=C)}this._drawPhases(v,u,[p.WGLDrawPhase.CLIP]);v.context.setColorMask(!0,!0,!0,!0)}};return c}();
n.default=r})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(r){var n={scalar:{},SIMD:{},create:function(){var a=new r.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var l=new r.ARRAY_TYPE(16);l[0]=a[0];l[1]=a[1];l[2]=a[2];l[3]=a[3];l[4]=a[4];l[5]=a[5];l[6]=a[6];l[7]=a[7];l[8]=a[8];l[9]=a[9];l[10]=a[10];l[11]=a[11];l[12]=a[12];l[13]=a[13];l[14]=
a[14];l[15]=a[15];return l},copy:function(a,l){a[0]=l[0];a[1]=l[1];a[2]=l[2];a[3]=l[3];a[4]=l[4];a[5]=l[5];a[6]=l[6];a[7]=l[7];a[8]=l[8];a[9]=l[9];a[10]=l[10];a[11]=l[11];a[12]=l[12];a[13]=l[13];a[14]=l[14];a[15]=l[15];return a},fromValues:function(a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B){var b=new r.ARRAY_TYPE(16);b[0]=a;b[1]=l;b[2]=k;b[3]=p;b[4]=m;b[5]=e;b[6]=f;b[7]=g;b[8]=d;b[9]=q;b[10]=t;b[11]=w;b[12]=x;b[13]=z;b[14]=A;b[15]=B;return b},set:function(a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B,b){a[0]=l;a[1]=k;a[2]=
p;a[3]=m;a[4]=e;a[5]=f;a[6]=g;a[7]=d;a[8]=q;a[9]=t;a[10]=w;a[11]=x;a[12]=z;a[13]=A;a[14]=B;a[15]=b;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};n.scalar.transpose=function(a,l){if(a===l){var k=l[1],p=l[2],m=l[3],e=l[6],f=l[7],g=l[11];a[1]=l[4];a[2]=l[8];a[3]=l[12];a[4]=k;a[6]=l[9];a[7]=l[13];a[8]=p;a[9]=e;a[11]=l[14];a[12]=m;a[13]=f;a[14]=g}else a[0]=l[0],a[1]=l[4],a[2]=l[8],a[3]=l[12],
a[4]=l[1],a[5]=l[5],a[6]=l[9],a[7]=l[13],a[8]=l[2],a[9]=l[6],a[10]=l[10],a[11]=l[14],a[12]=l[3],a[13]=l[7],a[14]=l[11],a[15]=l[15];return a};n.SIMD.transpose=function(a,l){var k=SIMD.Float32x4.load(l,0);var p=SIMD.Float32x4.load(l,4);var m=SIMD.Float32x4.load(l,8);l=SIMD.Float32x4.load(l,12);var e=SIMD.Float32x4.shuffle(k,p,0,1,4,5);var f=SIMD.Float32x4.shuffle(m,l,0,1,4,5);var g=SIMD.Float32x4.shuffle(e,f,0,2,4,6);e=SIMD.Float32x4.shuffle(e,f,1,3,5,7);SIMD.Float32x4.store(a,0,g);SIMD.Float32x4.store(a,
4,e);e=SIMD.Float32x4.shuffle(k,p,2,3,6,7);f=SIMD.Float32x4.shuffle(m,l,2,3,6,7);k=SIMD.Float32x4.shuffle(e,f,0,2,4,6);p=SIMD.Float32x4.shuffle(e,f,1,3,5,7);SIMD.Float32x4.store(a,8,k);SIMD.Float32x4.store(a,12,p);return a};n.transpose=r.USE_SIMD?n.SIMD.transpose:n.scalar.transpose;n.scalar.invert=function(a,l){var k=l[0],p=l[1],m=l[2],e=l[3],f=l[4],g=l[5],d=l[6],q=l[7],t=l[8],w=l[9],x=l[10],z=l[11],A=l[12],B=l[13],b=l[14];l=l[15];var h=k*g-p*f,c=k*d-m*f,v=k*q-e*f,u=p*d-m*g,y=p*q-e*g,C=m*q-e*d,D=
t*B-w*A,E=t*b-x*A,F=t*l-z*A,G=w*b-x*B,J=w*l-z*B,R=x*l-z*b,O=h*R-c*J+v*G+u*F-y*E+C*D;if(!O)return null;O=1/O;a[0]=(g*R-d*J+q*G)*O;a[1]=(m*J-p*R-e*G)*O;a[2]=(B*C-b*y+l*u)*O;a[3]=(x*y-w*C-z*u)*O;a[4]=(d*F-f*R-q*E)*O;a[5]=(k*R-m*F+e*E)*O;a[6]=(b*v-A*C-l*c)*O;a[7]=(t*C-x*v+z*c)*O;a[8]=(f*J-g*F+q*D)*O;a[9]=(p*F-k*J-e*D)*O;a[10]=(A*y-B*v+l*h)*O;a[11]=(w*v-t*y-z*h)*O;a[12]=(g*E-f*G-d*D)*O;a[13]=(k*G-p*E+m*D)*O;a[14]=(B*c-A*u-b*h)*O;a[15]=(t*u-w*c+x*h)*O;return a};n.SIMD.invert=function(a,l){var k=SIMD.Float32x4.load(l,
0);var p=SIMD.Float32x4.load(l,4);var m=SIMD.Float32x4.load(l,8);var e=SIMD.Float32x4.load(l,12);l=SIMD.Float32x4.shuffle(k,p,0,1,4,5);var f=SIMD.Float32x4.shuffle(m,e,0,1,4,5);var g=SIMD.Float32x4.shuffle(l,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,l,1,3,5,7);l=SIMD.Float32x4.shuffle(k,p,2,3,6,7);var d=SIMD.Float32x4.shuffle(m,e,2,3,6,7);var q=SIMD.Float32x4.shuffle(l,d,0,2,4,6);d=SIMD.Float32x4.shuffle(d,l,1,3,5,7);l=SIMD.Float32x4.mul(q,d);l=SIMD.Float32x4.swizzle(l,1,0,3,2);k=SIMD.Float32x4.mul(f,
l);p=SIMD.Float32x4.mul(g,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,l),k);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,l),p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);l=SIMD.Float32x4.mul(f,q);l=SIMD.Float32x4.swizzle(l,1,0,3,2);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,l),k);e=SIMD.Float32x4.mul(g,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(d,l));e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,l),e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);
l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,3,0,1),d);l=SIMD.Float32x4.swizzle(l,1,0,3,2);q=SIMD.Float32x4.swizzle(q,2,3,0,1);k=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,l),k);m=SIMD.Float32x4.mul(g,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(q,l));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,l),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);l=SIMD.Float32x4.mul(g,f);l=SIMD.Float32x4.swizzle(l,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,l),m);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(q,
l),e);l=SIMD.Float32x4.swizzle(l,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,l),m);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(q,l));l=SIMD.Float32x4.mul(g,d);l=SIMD.Float32x4.swizzle(l,1,0,3,2);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(q,l));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,l),m);l=SIMD.Float32x4.swizzle(l,2,3,0,1);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,l),p);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(f,l));l=SIMD.Float32x4.mul(g,q);l=SIMD.Float32x4.swizzle(l,1,0,3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,
l),p);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(f,l));l=SIMD.Float32x4.swizzle(l,2,3,0,1);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(d,l));e=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,l),e);g=SIMD.Float32x4.mul(g,k);g=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(g,2,3,0,1),g);g=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(g,1,0,3,2),g);l=SIMD.Float32x4.reciprocalApproximation(g);g=SIMD.Float32x4.sub(SIMD.Float32x4.add(l,l),SIMD.Float32x4.mul(g,SIMD.Float32x4.mul(l,l)));g=SIMD.Float32x4.swizzle(g,0,0,0,0);if(!g)return null;
SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(g,k));SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(g,p));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(g,m));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(g,e));return a};n.invert=r.USE_SIMD?n.SIMD.invert:n.scalar.invert;n.scalar.adjoint=function(a,l){var k=l[0],p=l[1],m=l[2],e=l[3],f=l[4],g=l[5],d=l[6],q=l[7],t=l[8],w=l[9],x=l[10],z=l[11],A=l[12],B=l[13],b=l[14];l=l[15];a[0]=g*(x*l-z*b)-w*(d*l-q*b)+B*(d*z-q*x);a[1]=-(p*(x*l-z*b)-w*(m*l-e*b)+B*(m*z-e*x));a[2]=
p*(d*l-q*b)-g*(m*l-e*b)+B*(m*q-e*d);a[3]=-(p*(d*z-q*x)-g*(m*z-e*x)+w*(m*q-e*d));a[4]=-(f*(x*l-z*b)-t*(d*l-q*b)+A*(d*z-q*x));a[5]=k*(x*l-z*b)-t*(m*l-e*b)+A*(m*z-e*x);a[6]=-(k*(d*l-q*b)-f*(m*l-e*b)+A*(m*q-e*d));a[7]=k*(d*z-q*x)-f*(m*z-e*x)+t*(m*q-e*d);a[8]=f*(w*l-z*B)-t*(g*l-q*B)+A*(g*z-q*w);a[9]=-(k*(w*l-z*B)-t*(p*l-e*B)+A*(p*z-e*w));a[10]=k*(g*l-q*B)-f*(p*l-e*B)+A*(p*q-e*g);a[11]=-(k*(g*z-q*w)-f*(p*z-e*w)+t*(p*q-e*g));a[12]=-(f*(w*b-x*B)-t*(g*b-d*B)+A*(g*x-d*w));a[13]=k*(w*b-x*B)-t*(p*b-m*B)+A*(p*
x-m*w);a[14]=-(k*(g*b-d*B)-f*(p*b-m*B)+A*(p*d-m*g));a[15]=k*(g*x-d*w)-f*(p*x-m*w)+t*(p*d-m*g);return a};n.SIMD.adjoint=function(a,l){var k=SIMD.Float32x4.load(l,0);var p=SIMD.Float32x4.load(l,4);var m=SIMD.Float32x4.load(l,8);var e=SIMD.Float32x4.load(l,12);var f=SIMD.Float32x4.shuffle(k,p,0,1,4,5);var g=SIMD.Float32x4.shuffle(m,e,0,1,4,5);l=SIMD.Float32x4.shuffle(f,g,0,2,4,6);g=SIMD.Float32x4.shuffle(g,f,1,3,5,7);f=SIMD.Float32x4.shuffle(k,p,2,3,6,7);p=SIMD.Float32x4.shuffle(m,e,2,3,6,7);k=SIMD.Float32x4.shuffle(f,
p,0,2,4,6);p=SIMD.Float32x4.shuffle(p,f,1,3,5,7);f=SIMD.Float32x4.mul(k,p);f=SIMD.Float32x4.swizzle(f,1,0,3,2);m=SIMD.Float32x4.mul(g,f);e=SIMD.Float32x4.mul(l,f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,f),m);e=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,f),e);e=SIMD.Float32x4.swizzle(e,2,3,0,1);f=SIMD.Float32x4.mul(g,k);f=SIMD.Float32x4.swizzle(f,1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,f),m);var d=SIMD.Float32x4.mul(l,f);f=SIMD.Float32x4.swizzle(f,2,3,
0,1);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(p,f));d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,f),d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);f=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,2,3,0,1),p);f=SIMD.Float32x4.swizzle(f,1,0,3,2);k=SIMD.Float32x4.swizzle(k,2,3,0,1);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,f),m);var q=SIMD.Float32x4.mul(l,f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(k,f));q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,f),q);q=SIMD.Float32x4.swizzle(q,
2,3,0,1);f=SIMD.Float32x4.mul(l,g);f=SIMD.Float32x4.swizzle(f,1,0,3,2);q=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,f),q);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,f),d);f=SIMD.Float32x4.swizzle(f,2,3,0,1);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,f),q);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(k,f));f=SIMD.Float32x4.mul(l,p);f=SIMD.Float32x4.swizzle(f,1,0,3,2);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(k,f));q=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,f),q);f=SIMD.Float32x4.swizzle(f,2,3,0,1);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(k,
f),e);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(g,f));f=SIMD.Float32x4.mul(l,k);f=SIMD.Float32x4.swizzle(f,1,0,3,2);e=SIMD.Float32x4.add(SIMD.Float32x4.mul(p,f),e);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(g,f));f=SIMD.Float32x4.swizzle(f,2,3,0,1);e=SIMD.Float32x4.sub(e,SIMD.Float32x4.mul(p,f));d=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,f),d);SIMD.Float32x4.store(a,0,m);SIMD.Float32x4.store(a,4,e);SIMD.Float32x4.store(a,8,q);SIMD.Float32x4.store(a,12,d);return a};n.adjoint=r.USE_SIMD?n.SIMD.adjoint:
n.scalar.adjoint;n.determinant=function(a){var l=a[0],k=a[1],p=a[2],m=a[3],e=a[4],f=a[5],g=a[6],d=a[7],q=a[8],t=a[9],w=a[10],x=a[11],z=a[12],A=a[13],B=a[14];a=a[15];return(l*f-k*e)*(w*a-x*B)-(l*g-p*e)*(t*a-x*A)+(l*d-m*e)*(t*B-w*A)+(k*g-p*f)*(q*a-x*z)-(k*d-m*f)*(q*B-w*z)+(p*d-m*g)*(q*A-t*z)};n.SIMD.multiply=function(a,l,k){var p=SIMD.Float32x4.load(l,0),m=SIMD.Float32x4.load(l,4),e=SIMD.Float32x4.load(l,8);l=SIMD.Float32x4.load(l,12);var f=SIMD.Float32x4.load(k,0);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,
0,0,0,0),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),l))));SIMD.Float32x4.store(a,0,f);f=SIMD.Float32x4.load(k,4);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),e),
SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),l))));SIMD.Float32x4.store(a,4,f);f=SIMD.Float32x4.load(k,8);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),l))));SIMD.Float32x4.store(a,8,f);k=SIMD.Float32x4.load(k,12);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,
0,0,0,0),p),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,1,1,1,1),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,2,2,2,2),e),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(k,3,3,3,3),l))));SIMD.Float32x4.store(a,12,p);return a};n.scalar.multiply=function(a,l,k){var p=l[0],m=l[1],e=l[2],f=l[3],g=l[4],d=l[5],q=l[6],t=l[7],w=l[8],x=l[9],z=l[10],A=l[11],B=l[12],b=l[13],h=l[14];l=l[15];var c=k[0],v=k[1],u=k[2],y=k[3];a[0]=c*p+v*g+u*w+y*B;a[1]=c*m+v*d+u*x+y*b;a[2]=c*e+v*
q+u*z+y*h;a[3]=c*f+v*t+u*A+y*l;c=k[4];v=k[5];u=k[6];y=k[7];a[4]=c*p+v*g+u*w+y*B;a[5]=c*m+v*d+u*x+y*b;a[6]=c*e+v*q+u*z+y*h;a[7]=c*f+v*t+u*A+y*l;c=k[8];v=k[9];u=k[10];y=k[11];a[8]=c*p+v*g+u*w+y*B;a[9]=c*m+v*d+u*x+y*b;a[10]=c*e+v*q+u*z+y*h;a[11]=c*f+v*t+u*A+y*l;c=k[12];v=k[13];u=k[14];y=k[15];a[12]=c*p+v*g+u*w+y*B;a[13]=c*m+v*d+u*x+y*b;a[14]=c*e+v*q+u*z+y*h;a[15]=c*f+v*t+u*A+y*l;return a};n.multiply=r.USE_SIMD?n.SIMD.multiply:n.scalar.multiply;n.mul=n.multiply;n.scalar.translate=function(a,l,k){var p=
k[0],m=k[1];k=k[2];if(l===a)a[12]=l[0]*p+l[4]*m+l[8]*k+l[12],a[13]=l[1]*p+l[5]*m+l[9]*k+l[13],a[14]=l[2]*p+l[6]*m+l[10]*k+l[14],a[15]=l[3]*p+l[7]*m+l[11]*k+l[15];else{var e=l[0];var f=l[1];var g=l[2];var d=l[3];var q=l[4];var t=l[5];var w=l[6];var x=l[7];var z=l[8];var A=l[9];var B=l[10];var b=l[11];a[0]=e;a[1]=f;a[2]=g;a[3]=d;a[4]=q;a[5]=t;a[6]=w;a[7]=x;a[8]=z;a[9]=A;a[10]=B;a[11]=b;a[12]=e*p+q*m+z*k+l[12];a[13]=f*p+t*m+A*k+l[13];a[14]=g*p+w*m+B*k+l[14];a[15]=d*p+x*m+b*k+l[15]}return a};n.SIMD.translate=
function(a,l,k){var p=SIMD.Float32x4.load(l,0),m=SIMD.Float32x4.load(l,4),e=SIMD.Float32x4.load(l,8),f=SIMD.Float32x4.load(l,12);k=SIMD.Float32x4(k[0],k[1],k[2],0);l!==a&&(a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a[4]=l[4],a[5]=l[5],a[6]=l[6],a[7]=l[7],a[8]=l[8],a[9]=l[9],a[10]=l[10],a[11]=l[11]);p=SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(k,0,0,0,0));m=SIMD.Float32x4.mul(m,SIMD.Float32x4.swizzle(k,1,1,1,1));e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(k,2,2,2,2));l=SIMD.Float32x4.add(p,SIMD.Float32x4.add(m,
SIMD.Float32x4.add(e,f)));SIMD.Float32x4.store(a,12,l);return a};n.translate=r.USE_SIMD?n.SIMD.translate:n.scalar.translate;n.scalar.scale=function(a,l,k){var p=k[0],m=k[1];k=k[2];a[0]=l[0]*p;a[1]=l[1]*p;a[2]=l[2]*p;a[3]=l[3]*p;a[4]=l[4]*m;a[5]=l[5]*m;a[6]=l[6]*m;a[7]=l[7]*m;a[8]=l[8]*k;a[9]=l[9]*k;a[10]=l[10]*k;a[11]=l[11]*k;a[12]=l[12];a[13]=l[13];a[14]=l[14];a[15]=l[15];return a};n.SIMD.scale=function(a,l,k){k=SIMD.Float32x4(k[0],k[1],k[2],0);var p=SIMD.Float32x4.load(l,0);SIMD.Float32x4.store(a,
0,SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(k,0,0,0,0)));p=SIMD.Float32x4.load(l,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(k,1,1,1,1)));p=SIMD.Float32x4.load(l,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(p,SIMD.Float32x4.swizzle(k,2,2,2,2)));a[12]=l[12];a[13]=l[13];a[14]=l[14];a[15]=l[15];return a};n.scale=r.USE_SIMD?n.SIMD.scale:n.scalar.scale;n.rotate=function(a,l,k,p){var m=p[0],e=p[1];p=p[2];var f=Math.sqrt(m*m+e*e+p*p);if(Math.abs(f)<r.EPSILON)return null;f=
1/f;m*=f;e*=f;p*=f;var g=Math.sin(k);var d=Math.cos(k);var q=1-d;k=l[0];f=l[1];var t=l[2];var w=l[3];var x=l[4];var z=l[5];var A=l[6];var B=l[7];var b=l[8];var h=l[9];var c=l[10];var v=l[11];var u=m*m*q+d;var y=e*m*q+p*g;var C=p*m*q-e*g;var D=m*e*q-p*g;var E=e*e*q+d;var F=p*e*q+m*g;var G=m*p*q+e*g;m=e*p*q-m*g;e=p*p*q+d;a[0]=k*u+x*y+b*C;a[1]=f*u+z*y+h*C;a[2]=t*u+A*y+c*C;a[3]=w*u+B*y+v*C;a[4]=k*D+x*E+b*F;a[5]=f*D+z*E+h*F;a[6]=t*D+A*E+c*F;a[7]=w*D+B*E+v*F;a[8]=k*G+x*m+b*e;a[9]=f*G+z*m+h*e;a[10]=t*G+
A*m+c*e;a[11]=w*G+B*m+v*e;l!==a&&(a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]);return a};n.scalar.rotateX=function(a,l,k){var p=Math.sin(k);k=Math.cos(k);var m=l[4],e=l[5],f=l[6],g=l[7],d=l[8],q=l[9],t=l[10],w=l[11];l!==a&&(a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]);a[4]=m*k+d*p;a[5]=e*k+q*p;a[6]=f*k+t*p;a[7]=g*k+w*p;a[8]=d*k-m*p;a[9]=q*k-e*p;a[10]=t*k-f*p;a[11]=w*k-g*p;return a};n.SIMD.rotateX=function(a,l,k){var p=SIMD.Float32x4.splat(Math.sin(k));
k=SIMD.Float32x4.splat(Math.cos(k));l!==a&&(a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]);var m=SIMD.Float32x4.load(l,4);l=SIMD.Float32x4.load(l,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(m,k),SIMD.Float32x4.mul(l,p)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,k),SIMD.Float32x4.mul(m,p)));return a};n.rotateX=r.USE_SIMD?n.SIMD.rotateX:n.scalar.rotateX;n.scalar.rotateY=function(a,l,k){var p=Math.sin(k);k=Math.cos(k);
var m=l[0],e=l[1],f=l[2],g=l[3],d=l[8],q=l[9],t=l[10],w=l[11];l!==a&&(a[4]=l[4],a[5]=l[5],a[6]=l[6],a[7]=l[7],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]);a[0]=m*k-d*p;a[1]=e*k-q*p;a[2]=f*k-t*p;a[3]=g*k-w*p;a[8]=m*p+d*k;a[9]=e*p+q*k;a[10]=f*p+t*k;a[11]=g*p+w*k;return a};n.SIMD.rotateY=function(a,l,k){var p=SIMD.Float32x4.splat(Math.sin(k));k=SIMD.Float32x4.splat(Math.cos(k));l!==a&&(a[4]=l[4],a[5]=l[5],a[6]=l[6],a[7]=l[7],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]);var m=SIMD.Float32x4.load(l,
0);l=SIMD.Float32x4.load(l,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(m,k),SIMD.Float32x4.mul(l,p)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(m,p),SIMD.Float32x4.mul(l,k)));return a};n.rotateY=r.USE_SIMD?n.SIMD.rotateY:n.scalar.rotateY;n.scalar.rotateZ=function(a,l,k){var p=Math.sin(k);k=Math.cos(k);var m=l[0],e=l[1],f=l[2],g=l[3],d=l[4],q=l[5],t=l[6],w=l[7];l!==a&&(a[8]=l[8],a[9]=l[9],a[10]=l[10],a[11]=l[11],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]);
a[0]=m*k+d*p;a[1]=e*k+q*p;a[2]=f*k+t*p;a[3]=g*k+w*p;a[4]=d*k-m*p;a[5]=q*k-e*p;a[6]=t*k-f*p;a[7]=w*k-g*p;return a};n.SIMD.rotateZ=function(a,l,k){var p=SIMD.Float32x4.splat(Math.sin(k));k=SIMD.Float32x4.splat(Math.cos(k));l!==a&&(a[8]=l[8],a[9]=l[9],a[10]=l[10],a[11]=l[11],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]);var m=SIMD.Float32x4.load(l,0);l=SIMD.Float32x4.load(l,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(m,k),SIMD.Float32x4.mul(l,p)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,
k),SIMD.Float32x4.mul(m,p)));return a};n.rotateZ=r.USE_SIMD?n.SIMD.rotateZ:n.scalar.rotateZ;n.fromTranslation=function(a,l){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=l[0];a[13]=l[1];a[14]=l[2];a[15]=1;return a};n.fromScaling=function(a,l){a[0]=l[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=l[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=l[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};n.fromRotation=function(a,l,k){var p=k[0],m=k[1];k=k[2];var e=Math.sqrt(p*p+
m*m+k*k);if(Math.abs(e)<r.EPSILON)return null;e=1/e;p*=e;m*=e;k*=e;e=Math.sin(l);l=Math.cos(l);var f=1-l;a[0]=p*p*f+l;a[1]=m*p*f+k*e;a[2]=k*p*f-m*e;a[3]=0;a[4]=p*m*f-k*e;a[5]=m*m*f+l;a[6]=k*m*f+p*e;a[7]=0;a[8]=p*k*f+m*e;a[9]=m*k*f-p*e;a[10]=k*k*f+l;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};n.fromXRotation=function(a,l){var k=Math.sin(l);l=Math.cos(l);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=l;a[6]=k;a[7]=0;a[8]=0;a[9]=-k;a[10]=l;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};n.fromYRotation=
function(a,l){var k=Math.sin(l);l=Math.cos(l);a[0]=l;a[1]=0;a[2]=-k;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=k;a[9]=0;a[10]=l;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};n.fromZRotation=function(a,l){var k=Math.sin(l);l=Math.cos(l);a[0]=l;a[1]=k;a[2]=0;a[3]=0;a[4]=-k;a[5]=l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};n.fromRotationTranslation=function(a,l,k){var p=l[0],m=l[1],e=l[2],f=l[3],g=p+p,d=m+m,q=e+e;l=p*g;var t=p*d;p*=q;var w=m*d;m*=q;e*=q;g*=
f;d*=f;f*=q;a[0]=1-(w+e);a[1]=t+f;a[2]=p-d;a[3]=0;a[4]=t-f;a[5]=1-(l+e);a[6]=m+g;a[7]=0;a[8]=p+d;a[9]=m-g;a[10]=1-(l+w);a[11]=0;a[12]=k[0];a[13]=k[1];a[14]=k[2];a[15]=1;return a};n.getTranslation=function(a,l){a[0]=l[12];a[1]=l[13];a[2]=l[14];return a};n.getRotation=function(a,l){var k=l[0]+l[5]+l[10],p=0;0<k?(p=2*Math.sqrt(k+1),a[3]=.25*p,a[0]=(l[6]-l[9])/p,a[1]=(l[8]-l[2])/p,a[2]=(l[1]-l[4])/p):l[0]>l[5]&l[0]>l[10]?(p=2*Math.sqrt(1+l[0]-l[5]-l[10]),a[3]=(l[6]-l[9])/p,a[0]=.25*p,a[1]=(l[1]+l[4])/
p,a[2]=(l[8]+l[2])/p):l[5]>l[10]?(p=2*Math.sqrt(1+l[5]-l[0]-l[10]),a[3]=(l[8]-l[2])/p,a[0]=(l[1]+l[4])/p,a[1]=.25*p,a[2]=(l[6]+l[9])/p):(p=2*Math.sqrt(1+l[10]-l[0]-l[5]),a[3]=(l[1]-l[4])/p,a[0]=(l[8]+l[2])/p,a[1]=(l[6]+l[9])/p,a[2]=.25*p);return a};n.fromRotationTranslationScale=function(a,l,k,p){var m=l[0],e=l[1],f=l[2],g=l[3],d=m+m,q=e+e,t=f+f;l=m*d;var w=m*q;m*=t;var x=e*q;e*=t;f*=t;d*=g;q*=g;g*=t;t=p[0];var z=p[1];p=p[2];a[0]=(1-(x+f))*t;a[1]=(w+g)*t;a[2]=(m-q)*t;a[3]=0;a[4]=(w-g)*z;a[5]=(1-(l+
f))*z;a[6]=(e+d)*z;a[7]=0;a[8]=(m+q)*p;a[9]=(e-d)*p;a[10]=(1-(l+x))*p;a[11]=0;a[12]=k[0];a[13]=k[1];a[14]=k[2];a[15]=1;return a};n.fromRotationTranslationScaleOrigin=function(a,l,k,p,m){var e=l[0],f=l[1],g=l[2],d=l[3],q=e+e,t=f+f,w=g+g;l=e*q;var x=e*t;e*=w;var z=f*t;f*=w;g*=w;q*=d;t*=d;d*=w;w=p[0];var A=p[1];p=p[2];var B=m[0],b=m[1];m=m[2];a[0]=(1-(z+g))*w;a[1]=(x+d)*w;a[2]=(e-t)*w;a[3]=0;a[4]=(x-d)*A;a[5]=(1-(l+g))*A;a[6]=(f+q)*A;a[7]=0;a[8]=(e+t)*p;a[9]=(f-q)*p;a[10]=(1-(l+z))*p;a[11]=0;a[12]=k[0]+
B-(a[0]*B+a[4]*b+a[8]*m);a[13]=k[1]+b-(a[1]*B+a[5]*b+a[9]*m);a[14]=k[2]+m-(a[2]*B+a[6]*b+a[10]*m);a[15]=1;return a};n.fromQuat=function(a,l){var k=l[0],p=l[1],m=l[2];l=l[3];var e=k+k,f=p+p,g=m+m;k*=e;var d=p*e;p*=f;var q=m*e,t=m*f;m*=g;e*=l;f*=l;l*=g;a[0]=1-p-m;a[1]=d+l;a[2]=q-f;a[3]=0;a[4]=d-l;a[5]=1-k-m;a[6]=t+e;a[7]=0;a[8]=q+f;a[9]=t-e;a[10]=1-k-p;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};n.frustum=function(a,l,k,p,m,e,f){var g=1/(k-l),d=1/(m-p),q=1/(e-f);a[0]=2*e*g;a[1]=0;a[2]=0;a[3]=
0;a[4]=0;a[5]=2*e*d;a[6]=0;a[7]=0;a[8]=(k+l)*g;a[9]=(m+p)*d;a[10]=(f+e)*q;a[11]=-1;a[12]=0;a[13]=0;a[14]=f*e*2*q;a[15]=0;return a};n.perspective=function(a,l,k,p,m){l=1/Math.tan(l/2);var e=1/(p-m);a[0]=l/k;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(m+p)*e;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*m*p*e;a[15]=0;return a};n.perspectiveFromFieldOfView=function(a,l,k,p){var m=Math.tan(l.upDegrees*Math.PI/180),e=Math.tan(l.downDegrees*Math.PI/180),f=Math.tan(l.leftDegrees*Math.PI/180);
l=Math.tan(l.rightDegrees*Math.PI/180);var g=2/(f+l),d=2/(m+e);a[0]=g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d;a[6]=0;a[7]=0;a[8]=-((f-l)*g*.5);a[9]=(m-e)*d*.5;a[10]=p/(k-p);a[11]=-1;a[12]=0;a[13]=0;a[14]=p*k/(k-p);a[15]=0;return a};n.ortho=function(a,l,k,p,m,e,f){var g=1/(l-k),d=1/(p-m),q=1/(e-f);a[0]=-2*g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*d;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*q;a[11]=0;a[12]=(l+k)*g;a[13]=(m+p)*d;a[14]=(f+e)*q;a[15]=1;return a};n.lookAt=function(a,l,k,p){var m=l[0],e=l[1];l=l[2];var f=
p[0];var g=p[1];var d=p[2];var q=k[0];p=k[1];var t=k[2];if(Math.abs(m-q)<r.EPSILON&&Math.abs(e-p)<r.EPSILON&&Math.abs(l-t)<r.EPSILON)return n.identity(a);k=m-q;p=e-p;q=l-t;var w=1/Math.sqrt(k*k+p*p+q*q);k*=w;p*=w;q*=w;t=g*q-d*p;d=d*k-f*q;f=f*p-g*k;(w=Math.sqrt(t*t+d*d+f*f))?(w=1/w,t*=w,d*=w,f*=w):f=d=t=0;g=p*f-q*d;var x=q*t-k*f;var z=k*d-p*t;(w=Math.sqrt(g*g+x*x+z*z))?(w=1/w,g*=w,x*=w,z*=w):z=x=g=0;a[0]=t;a[1]=g;a[2]=k;a[3]=0;a[4]=d;a[5]=x;a[6]=p;a[7]=0;a[8]=f;a[9]=z;a[10]=q;a[11]=0;a[12]=-(t*m+d*
e+f*l);a[13]=-(g*m+x*e+z*l);a[14]=-(k*m+p*e+q*l);a[15]=1;return a};n.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};n.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],
2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};n.add=function(a,l,k){a[0]=l[0]+k[0];a[1]=l[1]+k[1];a[2]=l[2]+k[2];a[3]=l[3]+k[3];a[4]=l[4]+k[4];a[5]=l[5]+k[5];a[6]=l[6]+k[6];a[7]=l[7]+k[7];a[8]=l[8]+k[8];a[9]=l[9]+k[9];a[10]=l[10]+k[10];a[11]=l[11]+k[11];a[12]=l[12]+k[12];a[13]=l[13]+k[13];a[14]=l[14]+k[14];a[15]=l[15]+k[15];return a};n.subtract=function(a,l,k){a[0]=l[0]-k[0];a[1]=l[1]-k[1];a[2]=l[2]-k[2];a[3]=l[3]-k[3];a[4]=l[4]-k[4];a[5]=l[5]-k[5];a[6]=l[6]-k[6];a[7]=
l[7]-k[7];a[8]=l[8]-k[8];a[9]=l[9]-k[9];a[10]=l[10]-k[10];a[11]=l[11]-k[11];a[12]=l[12]-k[12];a[13]=l[13]-k[13];a[14]=l[14]-k[14];a[15]=l[15]-k[15];return a};n.sub=n.subtract;n.multiplyScalar=function(a,l,k){a[0]=l[0]*k;a[1]=l[1]*k;a[2]=l[2]*k;a[3]=l[3]*k;a[4]=l[4]*k;a[5]=l[5]*k;a[6]=l[6]*k;a[7]=l[7]*k;a[8]=l[8]*k;a[9]=l[9]*k;a[10]=l[10]*k;a[11]=l[11]*k;a[12]=l[12]*k;a[13]=l[13]*k;a[14]=l[14]*k;a[15]=l[15]*k;return a};n.multiplyScalarAndAdd=function(a,l,k,p){a[0]=l[0]+k[0]*p;a[1]=l[1]+k[1]*p;a[2]=
l[2]+k[2]*p;a[3]=l[3]+k[3]*p;a[4]=l[4]+k[4]*p;a[5]=l[5]+k[5]*p;a[6]=l[6]+k[6]*p;a[7]=l[7]+k[7]*p;a[8]=l[8]+k[8]*p;a[9]=l[9]+k[9]*p;a[10]=l[10]+k[10]*p;a[11]=l[11]+k[11]*p;a[12]=l[12]+k[12]*p;a[13]=l[13]+k[13]*p;a[14]=l[14]+k[14]*p;a[15]=l[15]+k[15]*p;return a};n.exactEquals=function(a,l){return a[0]===l[0]&&a[1]===l[1]&&a[2]===l[2]&&a[3]===l[3]&&a[4]===l[4]&&a[5]===l[5]&&a[6]===l[6]&&a[7]===l[7]&&a[8]===l[8]&&a[9]===l[9]&&a[10]===l[10]&&a[11]===l[11]&&a[12]===l[12]&&a[13]===l[13]&&a[14]===l[14]&&
a[15]===l[15]};n.equals=function(a,l){var k=a[0],p=a[1],m=a[2],e=a[3],f=a[4],g=a[5],d=a[6],q=a[7],t=a[8],w=a[9],x=a[10],z=a[11],A=a[12],B=a[13],b=a[14];a=a[15];var h=l[0],c=l[1],v=l[2],u=l[3],y=l[4],C=l[5],D=l[6],E=l[7],F=l[8],G=l[9],J=l[10],R=l[11],O=l[12],P=l[13],U=l[14];l=l[15];return Math.abs(k-h)<=r.EPSILON*Math.max(1,Math.abs(k),Math.abs(h))&&Math.abs(p-c)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(c))&&Math.abs(m-v)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(v))&&Math.abs(e-u)<=r.EPSILON*Math.max(1,
Math.abs(e),Math.abs(u))&&Math.abs(f-y)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(g-C)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(C))&&Math.abs(d-D)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(q-E)<=r.EPSILON*Math.max(1,Math.abs(q),Math.abs(E))&&Math.abs(t-F)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(F))&&Math.abs(w-G)<=r.EPSILON*Math.max(1,Math.abs(w),Math.abs(G))&&Math.abs(x-J)<=r.EPSILON*Math.max(1,Math.abs(x),Math.abs(J))&&Math.abs(z-R)<=r.EPSILON*Math.max(1,Math.abs(z),
Math.abs(R))&&Math.abs(A-O)<=r.EPSILON*Math.max(1,Math.abs(A),Math.abs(O))&&Math.abs(B-P)<=r.EPSILON*Math.max(1,Math.abs(B),Math.abs(P))&&Math.abs(b-U)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(U))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))};return n})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var r={EPSILON:1E-6};r.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;r.RANDOM=Math.random;r.ENABLE_SIMD=!1;r.SIMD_AVAILABLE=
r.ARRAY_TYPE===Float32Array&&"SIMD"in this;r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE;r.setMatrixArrayType=function(a){r.ARRAY_TYPE=a};var n=Math.PI/180;r.toRadian=function(a){return a*n};r.equals=function(a,l){return Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))};return r})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(r,n){function a(k,p){k%=p;return 0<=k?k:k+p}Object.defineProperty(n,"__esModule",{value:!0});n.C_INFINITY=
Number.POSITIVE_INFINITY;n.C_PI=Math.PI;n.C_2PI=2*n.C_PI;n.C_PI_BY_2=n.C_PI/2;n.C_RAD_TO_256=128/n.C_PI;n.C_256_TO_RAD=n.C_PI/128;n.C_DEG_TO_256=256/360;n.C_DEG_TO_RAD=n.C_PI/180;n.C_SQRT2=1.414213562;n.C_SQRT2_INV=1/n.C_SQRT2;var l=1/Math.LN2;n.positiveMod=a;n.radToByte=function(k){return a(k*n.C_RAD_TO_256,256)};n.degToByte=function(k){return a(k*n.C_DEG_TO_256,256)};n.log2=function(k){return Math.log(k)*l};n.sqr=function(k){return k*k};n.clamp=function(k,p,m){return Math.min(Math.max(k,p),m)};
n.interpolate=function(k,p,m){return k*(1-m)+p*m};n.between=function(k,p,m){return k>=p&&k<=m||k>=m&&k<=p}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/labelShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),function(r,n,a,l,k,p,m,e,f,g){return function(){function d(){this._programRep=
new Map;this.isInitialize=!1}d.prototype.dispose=function(){this._fillShaderVariations&&(this._fillShaderVariations.dispose(),this._fillShaderVariations=null);this._lineShaderVariations&&(this._lineShaderVariations.dispose(),this._lineShaderVariations=null);this._iconShaderVariations&&(this._iconShaderVariations.dispose(),this._iconShaderVariations=null);this._textShaderVariations&&(this._textShaderVariations.dispose(),this._textShaderVariations=null);0!==this._programRep.size&&(this._programRep.forEach(function(q){return q.dispose()}),
this._programRep.clear())};d.prototype.initialize=function(q){if(!this.isInitialize){var t=new g("label",["labelVS","labelFS"],[],m,q);t.addDefine("ID","ID",[!0,!0],"ID");t.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");t.addDefine("SDF","SDF",[!1,!1],"SDF");t.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");t.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");t.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",
[!1,!1],"VV_SIZE_FIELD_STOPS");t.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");t.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");t.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");t.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");t.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");t.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");t.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var w=new g("text",["textVS",
"textFS"],[],f,q);w.addDefine("ID","ID",[!0,!0],"ID");w.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");w.addDefine("SDF","SDF",[!1,!1],"SDF");w.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");w.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");w.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");w.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");
w.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");w.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");w.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");w.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");w.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");w.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var x=new g("icon",["iconVS","iconFS"],[],p,q);x.addDefine("ID","ID",[!0,!0],"ID");x.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");x.addDefine("SDF",
"SDF",[!0,!0],"SDF");x.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");x.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");x.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");x.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");x.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");x.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");x.addDefine("VV_OPACITY",
"VV_OPACITY",[!0,!1],"VV_OPACITY");x.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");x.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");x.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var z=new g("fill",["fillVS","fillFS"],[],k,q);z.addDefine("ID","ID",[!0,!0],"ID");z.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");z.addDefine("SDF","SDF",[!1,!1],"SDF");z.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");z.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");z.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");z.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");z.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");z.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");z.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");z.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");z.addDefine("PATTERN",
"PATTERN",[!0,!0],"PATTERN");z.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");q=new g("line",["lineVS","lineFS"],[],e,q);q.addDefine("ID","ID",[!0,!0],"ID");q.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");q.addDefine("SDF","SDF",[!0,!0],"SDF");q.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");q.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");q.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");
q.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");q.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");q.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");q.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");q.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");q.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");q.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._labelShaderVariations=t;this._textShaderVariations=
w;this._fillShaderVariations=z;this._iconShaderVariations=x;this._lineShaderVariations=q;this.isInitialize=!0}};d.prototype.getProgram=function(q,t,w){q|=t===a.WGLDrawPhase.HITTEST?8:0;q|=t===a.WGLDrawPhase.HIGHLIGHT?16:0;if(this._programRep[q])return this._programRep[q];if(!(this._iconShaderVariations&&this._fillShaderVariations&&this._lineShaderVariations&&this._labelShaderVariations))return null;t=l.getMaterialVariations(q);switch(t.geometryType){case a.WGLGeometryType.MARKER:var x=this._iconShaderVariations.getProgram(t.variations,
null,null,w);break;case a.WGLGeometryType.TEXT:x=this._textShaderVariations.getProgram(t.variations,null,null,w);break;case a.WGLGeometryType.LABEL:x=this._labelShaderVariations.getProgram(t.variations,null,null,w);break;case a.WGLGeometryType.FILL:x=this._fillShaderVariations.getProgram(t.variations,null,null,w);break;case a.WGLGeometryType.LINE:x=this._lineShaderVariations.getProgram(t.variations,null,null,w)}x&&(this._programRep[q]=x);return x};return d}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require",
"exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(r,n,a,l,k){function p(e){var f=[];f[0]=e.sdf?!0:!1;f[1]=e.vvSizeMinMaxValue?!0:!1;f[2]=e.vvSizeScaleStops?!0:!1;f[3]=e.vvSizeFieldStops?!0:!1;f[4]=e.vvSizeUnitValue?!0:!1;f[5]=e.vvColor?!0:!1;f[6]=e.vvRotation?!0:!1;f[7]=e.vvOpacity?!0:!1;f[8]=e.visibility?!0:!1;f[9]=e.pattern?!0:!1;f[10]=e.heatmap?!0:!1;return f.reduce(function(g,d,q){d&&(g|=1<<q+2);return g},0)}function m(e){if(e.geometryType===a.WGLGeometryType.UNKNOWN)return-1;
var f=p(e)<<3;return e.geometryType+f}Object.defineProperty(n,"__esModule",{value:!0});n.createTextMaterialInfo=function(e,f,g){var d=new l.default,q=new k;q.geometryType=g;q.sdf=!0;q.pattern=!1;q.visibility=!1;q.heatmap=!1;d.texBindingInfo.push(new l.TexBindingInfo(2,e.page,"u_texture"));0===f?q.vvOpacity=q.vvSizeMinMaxValue=q.vvSizeScaleStops=q.vvSizeFieldStops=q.vvSizeUnitValue=q.vvColor=q.vvRotation=!1:(q.vvOpacity=0!==(f&a.WGLVVFlag.OPACITY),q.vvSizeMinMaxValue=0!==(f&a.WGLVVFlag.SIZE_MINMAX_VALUE),
q.vvSizeScaleStops=0!==(f&a.WGLVVFlag.SIZE_SCALE_STOPS),q.vvSizeFieldStops=0!==(f&a.WGLVVFlag.SIZE_FIELD_STOPS),q.vvSizeUnitValue=0!==(f&a.WGLVVFlag.SIZE_UNIT_VALUE),q.vvColor=0!==(f&a.WGLVVFlag.COLOR),q.vvRotation=0!==(f&a.WGLVVFlag.ROTATION));d.materialKey=m(q);d.materialKeyInfo=q;return d};n.createMaterialInfo=function(e,f,g){var d=new l.default,q=new k;q.geometryType=f;e?(e=e.spriteMosaicItem,q.sdf=e.sdf,q.pattern=!0,d.texBindingInfo.push(new l.TexBindingInfo(1,e.page,"u_texture"))):(q.sdf=!1,
q.pattern=!1);0===g?q.vvOpacity=q.vvSizeMinMaxValue=q.vvSizeScaleStops=q.vvSizeFieldStops=q.vvSizeUnitValue=q.vvColor=q.vvRotation=!1:(q.vvOpacity=0!==(g&a.WGLVVFlag.OPACITY),q.vvSizeMinMaxValue=0!==(g&a.WGLVVFlag.SIZE_MINMAX_VALUE),q.vvSizeScaleStops=0!==(g&a.WGLVVFlag.SIZE_SCALE_STOPS),q.vvSizeFieldStops=0!==(g&a.WGLVVFlag.SIZE_FIELD_STOPS),q.vvSizeUnitValue=0!==(g&a.WGLVVFlag.SIZE_UNIT_VALUE),q.vvColor=0!==(g&a.WGLVVFlag.COLOR),q.vvRotation=0!==(g&a.WGLVVFlag.ROTATION));q.visibility=!1;d.materialKey=
m(q);d.materialKeyInfo=q;return d};n.getMaterialKey=m;n.getMaterialVariations=function(e){var f=e&7;e>>=3;return{geometryType:f,variations:[0!==(e&1),0!==(e&2),0!==(e&4),0!==(e&8),0!==(e&16),0!==(e&32),0!==(e&64),0!==(e&128),0!==(e&256),0!==(e&512),0!==(e&1024),0!==(e&2048),0!==(e&4096)]}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(r,n,a,l,k,p,m){Object.defineProperty(n,"__esModule",{value:!0});var e=function(){function g(d,q,t){this.unit=d;this.pageId=q;this.semantic=t}g.prototype.clone=function(){return new g(this.unit,this.pageId,this.semantic)};g.prototype.serialize=function(d){d.writeInt32(this.unit);d.writeInt32(this.pageId);return d};g.deserialize=function(d){var q=d.readInt32();d=d.readInt32();return new g(q,d,"u_texture")};return g}();n.TexBindingInfo=e;var f=function(){function g(d,q){this.name=d;this.value=
q}g.prototype.clone=function(){return new g(this.name,this.value)};g.prototype.serialize=function(d){d.writeInt32(this.value);return d};g.deserialize=function(d){d=d.readInt32();return new g("u_my_param",d)};return g}();n.MaterialParam=f;r=function(){function g(){this.texBindingInfo=[];this.materialParams=[]}g.fromSprite=function(d,q,t){var w=new g,x=new p;x.geometryType=q;d?(x.sdf=d.sdf,x.pattern=!0,w.texBindingInfo.push(new e(1,d.page,"u_texture"))):(x.sdf=!1,x.pattern=!1);0===t?x.vvOpacity=x.vvSizeMinMaxValue=
x.vvSizeScaleStops=x.vvSizeFieldStops=x.vvSizeUnitValue=x.vvColor=x.vvRotation=!1:(x.vvOpacity=0!==(t&a.WGLVVFlag.OPACITY),x.vvSizeMinMaxValue=0!==(t&a.WGLVVFlag.SIZE_MINMAX_VALUE),x.vvSizeScaleStops=0!==(t&a.WGLVVFlag.SIZE_SCALE_STOPS),x.vvSizeFieldStops=0!==(t&a.WGLVVFlag.SIZE_FIELD_STOPS),x.vvSizeUnitValue=0!==(t&a.WGLVVFlag.SIZE_UNIT_VALUE),x.vvColor=0!==(t&a.WGLVVFlag.COLOR),x.vvRotation=0!==(t&a.WGLVVFlag.ROTATION));x.visibility=!1;w.materialKey=l.getMaterialKey(x);w.materialKeyInfo=x;return w};
g.fromGlyph=function(d,q,t){var w=new g,x=new p;x.geometryType=q;x.sdf=!0;x.pattern=!1;x.visibility=!1;x.heatmap=!1;w.texBindingInfo.push(new e(2,d.page,"u_texture"));0===t?x.vvOpacity=x.vvSizeMinMaxValue=x.vvSizeScaleStops=x.vvSizeFieldStops=x.vvSizeUnitValue=x.vvColor=x.vvRotation=!1:(x.vvOpacity=0!==(t&a.WGLVVFlag.OPACITY),x.vvSizeMinMaxValue=0!==(t&a.WGLVVFlag.SIZE_MINMAX_VALUE),x.vvSizeScaleStops=0!==(t&a.WGLVVFlag.SIZE_SCALE_STOPS),x.vvSizeFieldStops=0!==(t&a.WGLVVFlag.SIZE_FIELD_STOPS),x.vvSizeUnitValue=
0!==(t&a.WGLVVFlag.SIZE_UNIT_VALUE),x.vvColor=0!==(t&a.WGLVVFlag.COLOR),x.vvRotation=0!==(t&a.WGLVVFlag.ROTATION));w.materialKey=l.getMaterialKey(x);w.materialKeyInfo=x;return w};g.prototype.copy=function(d){this.materialParams=d.materialParams.map(function(q){return q.clone()});this.texBindingInfo=d.texBindingInfo.map(function(q){return q.clone()});d.materialKeyInfo&&(this.materialKeyInfo=new p,this.materialKeyInfo.copy(d.materialKeyInfo));this.materialKey=d.materialKey};g.prototype.serialize=function(d){d.writeInt32(this.materialKey);
m.serializeList(d,this.texBindingInfo);m.serializeList(d,this.materialParams);return d};g.deserialize=function(d){var q=new g;q.materialKey=d.readInt32();q.texBindingInfo=m.deserializeList(d,e);q.materialParams=m.deserializeList(d,f);q.materialKeyInfo=new p;k(q.materialKeyInfo,q.materialKey);return q};return g}();n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(r,n){return function(a,l){a.geometryType=
l&7;l>>=3;a.sdf=0!==(l&4);a.vvSizeMinMaxValue=0!==(l&8);a.vvSizeScaleStops=0!==(l&16);a.vvSizeFieldStops=0!==(l&32);a.vvSizeUnitValue=0!==(l&64);a.vvColor=0!==(l&128);a.vvRotation=0!==(l&256);a.vvOpacity=0!==(l&512);a.visibility=0!==(l&1024);a.pattern=0!==(l&2048);a.heatmap=0!==(l&4096);return a}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(r,n){return function(){function a(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=
this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(l){this.geometryType=l.geometryType;this.sdf=l.sdf;this.vvSizeMinMaxValue=l.vvSizeMinMaxValue;this.vvSizeScaleStops=l.vvSizeScaleStops;this.vvSizeFieldStops=l.vvSizeFieldStops;this.vvSizeUnitValue=l.vvSizeUnitValue;this.vvColor=l.vvColor;this.vvRotation=l.vvRotation;this.vvOpacity=l.vvOpacity;this.visibility=l.visibility;this.pattern=l.pattern;
this.heatmap=l.heatmap};a.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};a.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};a.prototype.hasVVColor=function(){return this.vvColor};a.prototype.hasVVRotation=function(){return this.vvRotation};a.prototype.hasVVOpacity=
function(){return this.vvOpacity};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.serializeList=function(a,l){if(null===l)a.writeInt32(0);else{a.writeInt32(l.length);for(var k=0;k<l.length;k++)l[k].serialize(a);return a}};n.deserializeList=function(a,l,k){var p=a.readInt32();p=Array(p);for(var m=0;m<p.length;m++)p[m]=l.deserialize(a,k);return p}})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require",
"exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(r,n,a,l){r=new l;l.parse(a,r);return r})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require","exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(r,n,a,l){r=new l;l.parse(a,r);return r})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaderSnippets":function(){define(["require","exports","dojo/text!./labelShaders.xml",
"../../../../webgl/ShaderSnippets"],function(r,n,a,l){r=new l;l.parse(a,r);return r})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml","../../../../webgl/ShaderSnippets"],function(r,n,a,l){r=new l;l.parse(a,r);return r})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml","../../../../webgl/ShaderSnippets"],function(r,
n,a,l){r=new l;l.parse(a,r);return r})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(r,n,a,l,k){function p(m){return m.reduce(function(e,f,g){f&&(e|=1<<g);return e},0)}return function(){function m(e,f,g,d,q,t){"string"===typeof e?this._initParams(e,f,g,d,q,t):this._initObject({programNamePrefix:e.programNamePrefix,shaderSnippetPrefixes:e.shaderSnippetPrefixes,baseDefines:e.baseDefines,snippets:e.snippets,
rctx:e.rctx,vertexAttribLocs:e.vertexAttribLocs})}m.prototype.dispose=function(){this._programCache&&(this._programCache.forEach(function(e){return e.dispose()}),this._programCache.clear())};m.prototype._initObject=function(e){this._initParams(e.programNamePrefix,e.shaderSnippetPrefixes,e.baseDefines,e.snippets,e.rctx,e.vertexAttribLocs)};m.prototype._initParams=function(e,f,g,d,q,t){this._defaultSnippets=d;this._defaultRctx=q;this._defaultVertexAttribLocs=t;this._programCache=new Map;this._variationInfo=
new Map;this._shaderSourceVariator=new l(e,f,g)};m.prototype.addDefine=function(e,f,g,d){this._shaderSourceVariator.addDefine(e,f,g,d)};m.prototype.addBinaryShaderSnippetSuffix=function(e,f,g){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(e,f,g)};m.prototype.addNaryShaderSnippetSuffix=function(e,f){this._shaderSourceVariator.addNaryShaderSnippetSuffix(e,f)};m.prototype.getProgram=function(e,f,g,d){f=f||this._defaultSnippets;g=g||this._defaultRctx;d=d||this._defaultVertexAttribLocs;if(!f)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");
if(!g)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!d)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");var q=p(e);if(this._programCache.has(q))return this._programCache.get(q);e=this._shaderSourceVariator.getShaderVariation(e);var t=e.shaderSnippetNames[0];var w=f[t];k.assert(null!=w,"shader snippet '"+t+"' does not exist");t=e.shaderSnippetNames[1];f=f[t];k.assert(null!=f,"shader snippet '"+
t+"' does not exist");g=new a(g,w,f,d,e.defines);this._programCache.set(q,g);return g};m.prototype.getProgramByKey=function(e){if(this._programCache.has(e))return this._programCache.get(e);if(!this._variationInfo[e])return null;var f=this._variationInfo[e],g=this._defaultSnippets,d=this._defaultRctx,q=this._defaultVertexAttribLocs;var t=f.shaderSnippetNames[0];var w=g[t];k.assert(null!=w,"shader snippet '"+t+"' does not exist");t=f.shaderSnippetNames[1];g=g[t];k.assert(null!=g,"shader snippet '"+
t+"' does not exist");f=new a(d,w,g,q,f.defines);this._programCache.set(e,f);return f};m.prototype.getProgramInfo=function(e){var f=this._shaderSourceVariator.getShaderVariation(e);e=p(e);this._variationInfo[e]||(this._variationInfo[e]=f);return{name:f.programName,key:e}};return m}()})},"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","../../core/lang","./Util"],function(r,n,a,l){return function(){function k(p,m,e){if("string"===typeof p)var f=p;else f=
p.programNamePrefix,m=p.shaderSnippetPrefixes,e=p.baseDefines;l.assert(m,"you must specify shader snippet prefixes");l.assert(2===m.length,"you must specify shader snippet prefixes for vertex and fragment shaders");e&&0!==e.length||(e=[]);this.programNamePrefix=f;this.shaderSnippetPrefixes=m;this.baseDefines=e;this.variables=[];this.sealed=!1}k.prototype.addDefine=function(p,m,e,f){l.assert(!this.sealed,"you cannot add another variable after the first program has been generated");l.assert(p,"you must specify a program name suffix");
this.variables.push({programNameSuffixes:["",p],shaderNameSuffixes:f||p,defineStr:m,affectsShaderTypes:e||[!0,!0]})};k.prototype.addBinaryShaderSnippetSuffix=function(p,m,e){l.assert(!this.sealed,"you cannot add another variable after the first program has been generated");l.assert(p,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",p],shaderSnippetSuffixes:["",m],affectsShaderTypes:e||[!0,!0]})};k.prototype.addNaryShaderSnippetSuffix=function(p,m){l.assert(!this.sealed,
"you cannot add another variable after the first program has been generated");var e=p.map(function(f){l.assert(null!=f.value,"value must always be specified");return f.value});this.variables.push({values:e,programNameSuffixes:p.map(function(f,g){return null!=f.programNameSuffix?f.programNameSuffix:e[g]}),shaderSnippetSuffixes:p.map(function(f,g){return null!=f.shaderSnippetSuffix?f.shaderSnippetSuffix:e[g]}),affectsShaderTypes:m||[!0,!0]})};k.prototype.getShaderVariation=function(p){l.assert(p.length===
this.variables.length,"you must specify a value for each variable");for(var m=this.programNamePrefix,e=a.clone(this.shaderSnippetPrefixes),f=a.clone(this.shaderSnippetPrefixes),g=a.clone(this.baseDefines),d=0;d<this.variables.length;d++){var q=this.variables[d],t=p[d],w=void 0;q.values?(w=q.values.indexOf(t),l.assert(0<=w,"invalid value "+t+" for variable "+d)):w=t?1:0;m+=q.programNameSuffixes[w];for(t=0;2>t;t++)q.affectsShaderTypes[t]&&(q.shaderSnippetSuffixes&&(e[t]+=q.shaderSnippetSuffixes[w],
f[t]+=q.shaderSnippetSuffixes[w]),q.defineStr&&w&&(g.push(q.defineStr),f[t]+=q.shaderNameSuffixes))}return{programName:m,shaderSnippetNames:e,shaderNames:f,defines:g}};return k}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),function(r,n,a,l,k,p,m,e,f,g){function d(u){return u.map(function(y){return y.name})}
function q(u){for(var y={},C=0;C<u.length;C++){var D=u[C];y[D.name]=D.strideInBytes}return y}function t(u,y){switch(u){case f.WGLGeometryType.MARKER:return y?n.C_ICON_VERTEX_NAMES_VV:n.C_ICON_VERTEX_NAMES;case f.WGLGeometryType.FILL:return y?n.C_FILL_VERTEX_NAMES_VV:n.C_FILL_VERTEX_NAMES;case f.WGLGeometryType.LINE:return y?n.C_LINE_VERTEX_NAMES_VV:n.C_LINE_VERTEX_NAMES;case f.WGLGeometryType.TEXT:return y?n.C_TEXT_VERTEX_NAMES_VV:n.C_TEXT_VERTEX_NAMES;case f.WGLGeometryType.LABEL:return n.C_LABEL_VERTEX_NAMES}return null}
function w(u){switch(u){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return u}function x(u){if(u=w(u.type)){switch(u){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function z(u){if(u=w(u.type)){switch(u){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}
function A(u){if(u=w(u.type)){switch(u){case "simple-line":case "picture-line":return!0;case "CIMLineSymbol":return!0}return!1}}function B(u){if(u=w(u.type)){switch(u){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function b(u){return u&&u.length||0}function h(u){return"string"===typeof u}Object.defineProperty(n,"__esModule",{value:!0});var c=k.getLogger("esri.views.2d.engine.webgl.Utils");n.C_HITTEST_SEARCH_SIZE=4;n.C_VBO_GEOMETRY="geometry";n.C_VBO_PERINSTANCE="per_instance";n.C_VBO_PERINSTANCE_VV=
"per_instance_vv";n.C_VBO_VISIBILITY="visibility";n.C_VBO_VISIBILITY_RANGE="visibilityRange";n.C_ICON_VERTEX_DEF=[{name:n.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];n.C_ICON_VERTEX_DEF_VV=[{name:n.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];n.C_ICON_HEATMAP=[{name:n.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];n.C_FILL_VERTEX_DEF=[{name:n.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];n.C_FILL_VERTEX_DEF_VV=[{name:n.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];n.C_LINE_VERTEX_DEF=[{name:n.C_VBO_GEOMETRY,
strideInBytes:32,divisor:0}];n.C_LINE_VERTEX_DEF_VV=[{name:n.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];n.C_TEXT_VERTEX_DEF=[{name:n.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:n.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];n.C_TEXT_VERTEX_DEF_VV=[{name:n.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:n.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];n.C_LABEL_VERTEX_DEF=[{name:n.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:n.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:n.C_VBO_VISIBILITY_RANGE,
strideInBytes:2,divisor:0}];n.C_ICON_VERTEX_NAMES=d(n.C_ICON_VERTEX_DEF);n.C_ICON_VERTEX_NAMES_VV=d(n.C_ICON_VERTEX_DEF_VV);n.C_FILL_VERTEX_NAMES=d(n.C_FILL_VERTEX_DEF);n.C_FILL_VERTEX_NAMES_VV=d(n.C_FILL_VERTEX_DEF_VV);n.C_LINE_VERTEX_NAMES=d(n.C_LINE_VERTEX_DEF);n.C_LINE_VERTEX_NAMES_VV=d(n.C_LINE_VERTEX_DEF_VV);n.C_TEXT_VERTEX_NAMES=d(n.C_TEXT_VERTEX_DEF);n.C_TEXT_VERTEX_NAMES_VV=d(n.C_TEXT_VERTEX_DEF_VV);n.C_LABEL_VERTEX_NAMES=d(n.C_LABEL_VERTEX_DEF);n.C_ICON_STRIDE_SPEC=q(n.C_ICON_VERTEX_DEF);
n.C_ICON_STRIDE_SPEC_VV=q(n.C_ICON_VERTEX_DEF_VV);n.C_ICON_STRIDE_SPEC_HEATMAP=q(n.C_ICON_HEATMAP);n.C_FILL_STRIDE_SPEC=q(n.C_FILL_VERTEX_DEF);n.C_FILL_STRIDE_SPEC_VV=q(n.C_FILL_VERTEX_DEF_VV);n.C_LINE_STRIDE_SPEC=q(n.C_LINE_VERTEX_DEF);n.C_LINE_STRIDE_SPEC_VV=q(n.C_LINE_VERTEX_DEF_VV);n.C_TEXT_STRIDE_SPEC=q(n.C_TEXT_VERTEX_DEF);n.C_TEXT_STRIDE_SPEC_VV=q(n.C_TEXT_VERTEX_DEF_VV);n.C_LABEL_STRIDE_SPEC=q(n.C_LABEL_VERTEX_DEF);n.getStrides=function(u,y,C){void 0===C&&(C=!1);switch(u){case f.WGLGeometryType.MARKER:return y?
n.C_ICON_STRIDE_SPEC_VV:C?n.C_ICON_STRIDE_SPEC_HEATMAP:n.C_ICON_STRIDE_SPEC;case f.WGLGeometryType.FILL:return y?n.C_FILL_STRIDE_SPEC_VV:n.C_FILL_STRIDE_SPEC;case f.WGLGeometryType.LINE:return y?n.C_LINE_STRIDE_SPEC_VV:n.C_LINE_STRIDE_SPEC;case f.WGLGeometryType.TEXT:return y?n.C_TEXT_STRIDE_SPEC_VV:n.C_TEXT_STRIDE_SPEC;case f.WGLGeometryType.LABEL:return n.C_LABEL_STRIDE_SPEC}return null};n.getNamedBuffers=t;n.getSymbolGeometryType=function(u){return x(u)?f.WGLGeometryType.MARKER:A(u)?f.WGLGeometryType.LINE:
z(u)?f.WGLGeometryType.FILL:B(u)?f.WGLGeometryType.TEXT:f.WGLGeometryType.UNKNOWN};n.normalizeSymbolType=w;n.isMarkerSymbol=x;n.isFillSymbol=z;n.isLineSymbol=A;n.isPictureSymbol=function(u){if(u=w(u.type))switch(u){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};n.isTextSymbol=B;n.getTextProperties=function(u){return g.TextProperties.pool.acquire(u.color?e.copyAndPremultiply(u.color):[255,255,255,255],u.haloColor?e.copyAndPremultiply(u.haloColor):[255,255,255,255],
p.pt2px(u.haloSize),p.pt2px(u.font.size),u.angle*Math.PI/180,u.xoffset/u.font.size,u.yoffset/u.font.size,"left"===u.horizontalAlignment?0:"right"===u.horizontalAlignment?1:.5,"top"===u.verticalAlignment?0:"bottom"===u.verticalAlignment?1:.5)};n.isSameUniformValue=function(u,y){return!1};n.isSameMaterialInfo=function(u,y){if(u.materialKey!==y.materialKey||b(u.texBindingInfo)!==b(y.texBindingInfo)||b(u.materialParams)!==b(y.materialParams))return!1;for(var C=u.texBindingInfo.length,D=0;D<C;++D){var E=
u.texBindingInfo[D],F=y.texBindingInfo[D];if(E.unit!==F.unit||E.pageId!==F.pageId||E.semantic!==F.semantic)return!1}u=u.materialParams.length;for(D=0;D<u;)return!1;return!0};n.serializeString=function(u,y,C){for(var D=0,E=u.length,F=0;F<E;++F)y&&(y[C+D]=u.charCodeAt(F)),++D;y&&(y[C+D]=0);++D;return D};n.deserializeString=function(u,y,C){var D=0;u.s="";for(var E=!0;E;){var F=y[C+D];++D;0!==F?u.s+=String.fromCharCode(F):E=!1}return D};n.isDefined=function(u){return null!==u&&void 0!==u};n.isNumber=
function(u){return"number"===typeof u};n.isString=h;n.isStringOrNull=function(u){return null==u||h(u)};n.lerp=function(u,y,C){return u+(y-u)*C};r=function(){function u(){this._arr=[];this._push=this._push.bind(this)}u.prototype._push=function(y,C){this._arr.push(C)};u.prototype.getKeys=function(y){this._arr.length=0;y&&y.forEach(this._push);return this._arr};return u}();n.KeysGetter=r;r=function(){function u(){this._arr=[];this._push=this._push.bind(this)}u.prototype._push=function(y,C){this._arr.push(y)};
u.prototype.getValues=function(y){this._arr.length=0;y&&y.forEach(this._push);return this._arr};return u}();n.ValuesGetter=r;n.getCapType=function(u){switch(u){case "butt":return f.CapType.BUTT;case "round":return f.CapType.ROUND;case "square":return f.CapType.SQUARE;default:return c.error("Cannot interpret unknown cap: "+u),f.CapType.UNKNOWN}};n.getJoinType=function(u){switch(u){case "miter":return f.JoinType.MITER;case "bevel":return f.JoinType.BEVEL;case "round":return f.JoinType.ROUND;default:return c.error("Cannot interpret unknown join: "+
u),f.JoinType.UNKNOWN}};n.getVVType=function(u){switch(u){case "opacity":return f.VVType.OPACITY;case "color":return f.VVType.COLOR;case "rotation":return f.VVType.ROTATION;case "size":return f.VVType.SIZE;default:return c.error("Cannot interpret unknown vv: "+u),null}};n.createArcadeFunction=function(u,y){var C=u.spatialReference,D=u.layer,E=m.createFunction(u.valueExpression),F=new l;return function(G,J){F.repurposeFromGraphicLikeObject(G.geometry,G.attributes,D);G=J&&new a({viewingMode:J.viewingMode,
scale:J.scale});G=m.executeFunction(E,{vars:{$feature:F,$view:G||{}},spatialReference:C});return y?y(G):G}};n.copyMeshData=function(u,y,C,D,E,F,G){for(var J in F){var R=F[J].stride,O=F[J].data,P=C[J].data,U=R*E.vertexCount/4,K=R*u/4,V=R*E.vertexFrom/4;for(R=0;R<U;++R)P[R+K]=O[R+V]}C=E.indexCount;for(R=0;R<C;++R)D[R+y]=G[R+E.indexFrom]-E.vertexFrom+u};n.C_VBO_INFO=(v={},v[n.C_VBO_GEOMETRY]=35044,v[n.C_VBO_VISIBILITY]=35044,v[n.C_VBO_VISIBILITY_RANGE]=35048,v);n.createGeometryData=function(u,y,C){for(var D=
[],E=0;5>E;++E){for(var F={},G=0,J=t(E,u);G<J.length;G++){var R=J[G];F[R]={data:C(E,R)}}D.push({data:y(E),buffers:F})}return D};var v})},"esri/layers/vectorTiles/arcade/Dictionary":function(){define(["require","exports","esri/arcade/Dictionary"],function(r,n,a){return a})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(r,n,a,l,k){function p(e){var f=null;if(null!==e)if(l.isNumber(e))f=l.toNumber(e);else if(l.isBoolean(e))f=
l.toBoolean(e);else if(l.isString(e))f=l.toString(e);else if(l.isDate(e))f=l.toDate(e);else if(l.isArray(e)){f=[];for(var g=0;g<e.length;g++)f.push(p(e[g]))}else{if(0===Object.keys(e).length)return null;f=new m;f.immutable=!1;g=0;for(var d=Object.keys(e);g<d.length;g++){var q=d[g],t=e[q];void 0!==t&&f.setField(q,p(t))}f.immutable=!0}return f}var m=function(){function e(f){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=f instanceof e?
f.attributes:void 0===f?{}:null===f?{}:f}e.prototype.field=function(f){var g=f.toLowerCase(),d=this.attributes[f];if(void 0!==d)return d;for(var q in this.attributes)if(q.toLowerCase()===g)return this.attributes[q];throw Error("Field not Found : "+f);};e.prototype.setField=function(f,g){if(this.immutable)throw Error("Dictionary is Immutable");var d=f.toLowerCase();if(void 0===this.attributes[f])for(var q in this.attributes)if(q.toLowerCase()===d){this.attributes[q]=g;return}this.attributes[f]=g};
e.prototype.hasField=function(f){var g=f.toLowerCase();if(void 0!==this.attributes[f])return!0;for(var d in this.attributes)if(d.toLowerCase()===g)return!0;return!1};e.prototype.keys=function(){var f=[],g;for(g in this.attributes)f.push(g);return f=f.sort()};e.prototype.castToText=function(){var f="",g;for(g in this.attributes){""!==f&&(f+=",");var d=this.attributes[g];null==d?f+=JSON.stringify(g)+":null":l.isBoolean(d)||l.isNumber(d)||l.isString(d)?f+=JSON.stringify(g)+":"+JSON.stringify(d):d instanceof
k?f+=JSON.stringify(g)+":"+l.toStringExplicit(d):d instanceof a?f+=JSON.stringify(g)+":"+l.toStringExplicit(d):d instanceof Array?f+=JSON.stringify(g)+":"+l.toStringExplicit(d):d instanceof Date?f+=JSON.stringify(g)+":"+JSON.stringify(d):null!==d&&"object"===typeof d&&void 0!==d.castToText&&(f+=JSON.stringify(g)+":"+d.castToText())}return"{"+f+"}"};e.convertObjectToArcadeDictionary=function(f){var g=new e;g.immutable=!1;for(var d in f){var q=f[d];void 0!==q&&g.setField(d.toString(),p(q))}g.immutable=
!0;return g};return e}();return m})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(r,n){return function(){function a(l){void 0===l&&(l=[]);this._elements=l}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(l){return this._elements[l]};a.prototype.toArray=function(){for(var l=[],k=0;k<this.length();k++)l.push(this.get(k));return l};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline dojo/number".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w){function x(I,S,Z){return""===S||null===S||void 0===S||S===Z||S===Z?I:I=I.split(S).join(Z)}function z(I){return I instanceof Q||I instanceof a||I instanceof W}function A(I){return B(I)||h(I)||u(I)||b(I)||null===I||I===n.voidOperation||"number"===typeof I?!0:!1}function B(I){return"string"===typeof I||I instanceof String}function b(I){return"boolean"===typeof I}function h(I){return"number"===typeof I}function c(I){return I instanceof Array}function v(I){return I instanceof
l}function u(I){return I instanceof Date}function y(I,S){if(!1===isNaN(I)){if(void 0===S||null===S||""===S)return I.toString();S=x(S,"\u2030","");S=x(S,"\u00a4","");return w.format(I,{pattern:S})}return I.toString()}function C(I,S){I=n.MomentLibrary.Moment(I);return void 0===S||null===S||""===S?I.format():I.format(D(S))}function D(I){return I.replace(/(LTS)|L|l/g,function(S){return"["+S+"]"})}function E(I,S,Z){switch(Z){case "\x3e":return I>S;case "\x3c":return I<S;case "\x3e\x3d":return I>=S;case "\x3c\x3d":return I<=
S}return!1}function F(I,S){if(I===S||null===I&&S===n.voidOperation||null===S&&I===n.voidOperation)return!0;if(u(I)&&u(S))return I.getTime()===S.getTime();if(I instanceof k||I instanceof p)return I.equalityTest(S);if(I instanceof d&&S instanceof d){var Z=void 0,ca=void 0;Z=I.getCacheValue("_arcadeCacheId");ca=S.getCacheValue("_arcadeCacheId");if(void 0!==Z&&null!==Z)return Z===ca}return void 0!==I&&void 0!==S&&null!==I&&null!==S&&"object"===typeof I&&"object"===typeof S&&(I._arcadeCacheId===S._arcadeCacheId&&
void 0!==I._arcadeCacheId&&null!==I._arcadeCacheId||I._underlyingGraphic===S._underlyingGraphic&&void 0!==I._underlyingGraphic&&null!==I._underlyingGraphic)?!0:!1}function G(I,S){if(B(I))return I;if(null===I)return"";if(h(I))return y(I,S);if(b(I))return I.toString();if(u(I))return C(I,S);if(I instanceof f)return JSON.stringify(I.toJson());if(c(I)){S=[];for(var Z=0;Z<I.length;Z++)S[Z]=R(I[Z]);return"["+S.join(",")+"]"}if(I instanceof l){S=[];for(Z=0;Z<I.length();Z++)S[Z]=R(I.get(Z));return"["+S.join(",")+
"]"}return null!==I&&"object"===typeof I&&void 0!==I.castToText?I.castToText():z(I)?"object, Function":""}function J(I,S){if(B(I))return I;if(null===I)return"";if(h(I))return y(I,S);if(b(I))return I.toString();if(u(I))return C(I,S);if(I instanceof f)return I instanceof e?'{"xmin":'+I.xmin.toString()+',"ymin":'+I.ymin.toString()+","+(I.hasZ?'"zmin":'+I.zmin.toString()+",":"")+(I.hasM?'"mmin":'+I.mmin.toString()+",":"")+'"xmax":'+I.xmax.toString()+',"ymax":'+I.ymax.toString()+","+(I.hasZ?'"zmax":'+
I.zmax.toString()+",":"")+(I.hasM?'"mmax":'+I.mmax.toString()+",":"")+'"spatialReference":'+U(I.spatialReference)+"}":U(I.toJson(),function(ca,fa){return ca.key===fa.key?0:"spatialReference"===ca.key?1:"spatialReference"===fa.key||ca.key<fa.key?-1:ca.key>fa.key?1:0});if(c(I)){S=[];for(var Z=0;Z<I.length;Z++)S[Z]=R(I[Z]);return"["+S.join(",")+"]"}if(I instanceof l){S=[];for(Z=0;Z<I.length();Z++)S[Z]=R(I.get(Z));return"["+S.join(",")+"]"}return null!==I&&"object"===typeof I&&void 0!==I.castToText?I.castToText():
z(I)?"object, Function":""}function R(I){return null===I?"null":b(I)||h(I)||B(I)?JSON.stringify(I):I instanceof f||I instanceof l||I instanceof Array?J(I):I instanceof Date?JSON.stringify(C(I,"")):null!==I&&"object"===typeof I&&void 0!==I.castToText?I.castToText():"null"}function O(I,S){return h(I)?I:null===I||""===I?0:u(I)?NaN:b(I)?I?1:0:c(I)||""===I||void 0===I?NaN:void 0!==S&&B(I)?(S=x(S,"\u2030",""),S=x(S,"\u00a4",""),w.parse(I,{pattern:S})):I===n.voidOperation?0:Number(I)}function P(I,S){var Z;
S.fields.some(function(ca){ca.name===I&&(Z=ca.domain);return!!Z});return Z}function U(I,S){S||(S={});"function"===typeof S&&(S={cmp:S});var Z="boolean"===typeof S.cycles?S.cycles:!1,ca=S.cmp&&function(ha){return function(na){return function(ma,ra){return ha({key:ma,value:na[ma]},{key:ra,value:na[ra]})}}}(S.cmp),fa=[];return function ma(na){na&&na.toJson&&"function"===typeof na.toJson&&(na=na.toJson());if(void 0!==na){if("number"===typeof na)return isFinite(na)?""+na:"null";if("object"!==typeof na)return JSON.stringify(na);
var ra;if(Array.isArray(na)){var sa="[";for(ra=0;ra<na.length;ra++)ra&&(sa+=","),sa+=ma(na[ra])||"null";return sa+"]"}if(null===na)return"null";if(-1!==fa.indexOf(na)){if(Z)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var ba=fa.push(na)-1,ea=Object.keys(na).sort(ca&&ca(na));sa="";for(ra=0;ra<ea.length;ra++){var ja=ea[ra],oa=ma(na[ja]);oa&&(sa&&(sa+=","),sa+=JSON.stringify(ja)+":"+oa)}fa.splice(ba,1);return"{"+sa+"}"}}(I)}function K(I,S){if(S instanceof
d)I.push([S.x,S.y]);else throw Error("Invalid Argument");}Object.defineProperty(n,"__esModule",{value:!0});n.binaryOperator=n.MomentLibrary=n.tick=n.toStringArray=n.autoCastArrayOfPointsToMultiPoint=n.autoCastArrayOfPointsToPolyline=n.autoCastArrayOfPointsToPolygon=n.autoCastFeatureToGeometry=n.stableStringify=n.getDomain=n.getDomainCode=n.getDomainValue=n.fixNullGeometry=n.fixSpatialReference=n.toBoolean=n.toDateM=n.toDate=n.toNumber=n.toStringExplicit=n.toNumberArray=n.toString=n.equalityTest=n.greaterThanLessThan=
n.standardiseDateFormat=n.formatDate=n.formatNumber=n.generateUUID=n.pcCheck=n.isDate=n.isImmutableArray=n.isFeatureSetCollection=n.isFeatureSet=n.isArray=n.isInteger=n.isNumber=n.isBoolean=n.isString=n.defaultUndefined=n.isSimpleType=n.isFunctionParameter=n.multiReplace=n.continueResult=n.breakResult=n.voidOperation=n.SizzleFunction=n.ReturnResult=n.ImplicitResult=n.NativeFunction=n.SizzleFunctionE=n.NativeFunctionE=n.ImplicitResultE=n.ReturnResultE=void 0;r=function(){return function(I){this.value=
I}}();n.ReturnResultE=r;var V=function(){return function(I){this.value=I}}();n.ImplicitResultE=V;var Q=function(){return function(I){this.fn=I}}();n.NativeFunctionE=Q;var W=function(){return function(I){this.fn=I}}();n.SizzleFunctionE=W;n.NativeFunction=Q;n.ImplicitResult=V;n.ReturnResult=r;n.SizzleFunction=W;n.voidOperation={type:"VOID"};n.breakResult={type:"BREAK"};n.continueResult={type:"CONTINUE"};n.multiReplace=x;n.isFunctionParameter=z;n.isSimpleType=A;n.defaultUndefined=function(I,S){return void 0===
I?S:I};n.isString=B;n.isBoolean=b;n.isNumber=h;n.isInteger=function(I){return"number"===typeof I&&isFinite(I)&&Math.floor(I)===I};n.isArray=c;n.isFeatureSet=function(I){return!0===(I&&I.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===I.declaredRootClass)};n.isFeatureSetCollection=function(I){return!0===(I&&I.declaredRootClass&&"esri.arcade.featureSetCollection"===I.declaredRootClass)};n.isImmutableArray=v;n.isDate=u;n.pcCheck=function(I,S,Z){if(I.length<S||I.length>Z)throw Error("Function called with wrong number of Parameters");
};n.generateUUID=function(){var I=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(S){var Z=(I+16*Math.random())%16|0;I=Math.floor(I/16);return("x"===S?Z:Z&3|8).toString(16)})};n.formatNumber=y;n.formatDate=C;n.standardiseDateFormat=D;n.greaterThanLessThan=function(I,S,Z){if(null===I){if(null===S||S===n.voidOperation)return E(null,null,Z);if(h(S))return E(0,S,Z);if(B(S)||b(S))return E(0,O(S),Z);if(u(S))return E(0,S.getTime(),Z)}if(I===n.voidOperation){if(null===
S||S===n.voidOperation)return E(null,null,Z);if(h(S))return E(0,S,Z);if(B(S)||b(S))return E(0,O(S),Z);if(u(S))return E(0,S.getTime(),Z)}else if(h(I)){if(h(S))return E(I,S,Z);if(b(S))return E(I,O(S),Z);if(null===S||S===n.voidOperation)return E(I,0,Z);if(B(S))return E(I,O(S),Z);if(u(S))return E(I,S.getTime(),Z)}else if(B(I)){if(B(S))return E(G(I),G(S),Z);if(u(S))return E(O(I),S.getTime(),Z);if(h(S))return E(O(I),S,Z);if(null===S||S===n.voidOperation)return E(O(I),0,Z);if(b(S))return E(O(I),O(S),Z)}else if(u(I)){if(u(S))return E(I,
S,Z);if(null===S||S===n.voidOperation)return E(I.getTime(),0,Z);if(h(S))return E(I.getTime(),S,Z);if(b(S)||B(S))return E(I.getTime(),O(S),Z)}else if(b(I)){if(b(S))return E(I,S,Z);if(h(S))return E(O(I),O(S),Z);if(u(S))return E(O(I),S.getTime(),Z);if(null===S||S===n.voidOperation)return E(O(I),0,Z);if(B(S))return E(O(I),O(S),Z)}return!F(I,S)||"\x3c\x3d"!==Z&&"\x3e\x3d"!==Z?!1:!0};n.equalityTest=F;n.toString=G;n.toNumberArray=function(I){var S=[];if(!1===c(I))return null;if(I instanceof l){for(var Z=
0;Z<I.length();Z++)S[Z]=O(I.get(Z));return S}for(Z=0;Z<I.length;Z++)S[Z]=O(I[Z]);return S};n.toStringExplicit=J;n.toNumber=O;n.toDate=function(I,S){return u(I)?I:B(I)&&(I=n.MomentLibrary.Moment(I,[void 0===S||null===S||""===S?n.MomentLibrary.Moment.ISO_8601:S]),I.isValid())?I.toDate():null};n.toDateM=function(I,S){return u(I)?n.MomentLibrary.Moment(I):B(I)&&(I=n.MomentLibrary.Moment(I,[void 0===S||null===S||""===S?n.MomentLibrary.Moment.ISO_8601:S]),I.isValid())?I:null};n.toBoolean=function(I){return b(I)?
I:B(I)?(I=I.toLowerCase(),"true"===I?!0:!1):h(I)?0===I||isNaN(I)?!1:!0:!1};n.fixSpatialReference=function(I,S){if(null===I||void 0===I)return null;if(null===I.spatialReference||void 0===I.spatialReference)I.spatialReference=S;return I};n.fixNullGeometry=function(I){if(null===I)return null;if(I instanceof d)return"NaN"===I.x||null===I.x||isNaN(I.x)?null:I;if(I instanceof q){if(0===I.rings.length)return null;for(var S=0,Z=I.rings;S<Z.length;S++){var ca=Z[S];if(0<ca.length)return I}return null}if(I instanceof
t){if(0===I.paths.length)return null;S=0;for(Z=I.paths;S<Z.length;S++)if(ca=Z[S],0<ca.length)return I;return null}return I instanceof g?0===I.points.length?null:I:I instanceof e?"NaN"===I.xmin||null===I.xmin||isNaN(I.xmin)?null:I:null};n.getDomainValue=function(I,S){if(!I||!I.domain)return S;var Z=null;if("string"===I.field.type||"esriFieldTypeString"===I.field.type)S=G(S);else{if(null===S||void 0===S)return null;if(""===S)return S;S=O(S)}for(var ca=0;ca<I.domain.codedValues.length;ca++){var fa=I.domain.codedValues[ca];
fa.code===S&&(Z=fa)}return null===Z?S:Z.name};n.getDomainCode=function(I,S){if(!I||!I.domain)return S;var Z=null;S=G(S);for(var ca=0;ca<I.domain.codedValues.length;ca++){var fa=I.domain.codedValues[ca];fa.name===S&&(Z=fa)}return null===Z?S:Z.code};n.getDomain=function(I,S,Z,ca){void 0===Z&&(Z=null);if(!S||!S.fields)return null;for(var fa=null,ha=0;ha<S.fields.length;ha++){var na=S.fields[ha];na.name.toLowerCase()===I.toString().toLowerCase()&&(fa=na)}if(null===fa)throw Error("Field not found");var ma,
ra;ca||(ca=Z&&S.typeIdField&&Z._field(S.typeIdField));null!=ca&&S.types.some(function(sa){return sa.id===ca?((ma=sa.domains&&sa.domains[fa.name])&&"inherited"===ma.type&&(ma=P(fa.name,S),ra=!0),!0):!1});ra||ma||(ma=P(I,S));return{field:fa,domain:ma}};n.stableStringify=U;n.autoCastFeatureToGeometry=function(I){if(null===I)return null;for(var S=[],Z=0;Z<I.length;Z++){var ca=I[Z];ca&&(ca.declaredClass&&"esri.arcade.Feature"===ca.declaredClass||"FeatureSetReader"===ca.type)?S.push(ca.geometry()):S.push(ca)}return S};
n.autoCastArrayOfPointsToPolygon=function(I,S){if(c(I)||v(I)){var Z=!1,ca=!1,fa=[];if(c(I)){for(var ha=0;ha<I.length;ha++){var na=I[ha];K(fa,na)}0<fa.length&&(S=I[0].spatialReference,Z=I[0].hasZ,ca=I[0].hasM)}else if(I instanceof p)fa=I._elements,0<fa.length&&(Z=I._hasZ,ca=I._hasM,S=I.get(0).spatialReference);else if(v(I)){ha=0;for(var ma=I.toArray();ha<ma.length;ha++)na=ma[ha],K(fa,na);0<fa.length&&(S=I.get(0).spatialReference,Z=!0===I.get(0).hasZ,ca=!0===I.get(0).hasM)}else throw Error("Invalid Argument");
if(0===fa.length)return null;!1===(new q({rings:[],spatialReference:{wkid:4326}})).isClockwise(fa)&&(fa=fa.slice(0).reverse());return new q({rings:[fa],spatialReference:S,hasZ:Z,hasM:ca})}return I};n.autoCastArrayOfPointsToPolyline=function(I,S){if(c(I)||v(I)){var Z=!1,ca=!1,fa=[];if(c(I)){for(var ha=0;ha<I.length;ha++){var na=I[ha];K(fa,na)}0<fa.length&&(S=I[0].spatialReference,Z=!0===I[0].hasZ,ca=!0===I[0].hasM)}else if(I instanceof p)fa=I._elements,0<fa.length&&(Z=I._hasZ,ca=I._hasM,S=I.get(0).spatialReference);
else if(v(I)){ha=0;for(var ma=I.toArray();ha<ma.length;ha++)na=ma[ha],K(fa,na);0<fa.length&&(S=I.get(0).spatialReference,Z=!0===I.get(0).hasZ,ca=!0===I.get(0).hasM)}return 0===fa.length?null:new t({paths:[fa],spatialReference:S,hasZ:Z,hasM:ca})}return I};n.autoCastArrayOfPointsToMultiPoint=function(I,S){if(c(I)||v(I)){var Z=!1,ca=!1,fa=[];if(c(I)){for(var ha=0;ha<I.length;ha++){var na=I[ha];K(fa,na)}0<fa.length&&(S=I[0].spatialReference,Z=!0===I[0].hasZ,ca=!0===I[0].hasM)}else if(I instanceof p)fa=
I._elements,0<fa.length&&(Z=I._hasZ,ca=I._hasM,S=I.get(0).spatialReference);else if(v(I)){ha=0;for(var ma=I.toArray();ha<ma.length;ha++)na=ma[ha],K(fa,na);0<fa.length&&(S=I.get(0).spatialReference,Z=!0===I.get(0).hasZ,ca=!0===I.get(0).hasM)}return 0===fa.length?null:new g({points:fa,spatialReference:S,hasZ:Z,hasM:ca})}return I};n.toStringArray=function(I,S){void 0===S&&(S=!1);var Z=[];if(null===I)return Z;if(!0===c(I)){for(var ca=0;ca<I.length;ca++){var fa=G(I[ca]);""===fa&&!0!==S||Z.push(fa)}return Z}if(I instanceof
l){for(ca=0;ca<I.length();ca++)fa=G(I.get(ca)),""===fa&&!0!==S||Z.push(fa);return Z}return A(I)?(fa=G(I),""===fa&&!0!==S||Z.push(fa),Z):[]};var N=0;n.tick=function(I){N++;return 0===N%100?(N=0,m.create(function(S){setTimeout(function(){S(I)},0)})):I};n.MomentLibrary={Moment:null};n.binaryOperator=function(I,S,Z){switch(Z){case "\x26":return I&S;case "|":return I|S;case "^":return I^S;case "\x3c\x3c":return I<<S;case "\x3e\x3e":return I>>S;case "\x3e\x3e\x3e":return I>>>S}}})},"esri/arcade/FunctionWrapper":function(){define(["require",
"exports"],function(r,n){return function(){return function(a,l){this.context=this.definition=null;this.definition=a;this.context=l}}()})},"esri/arcade/ImmutablePathArray":function(){var r=this&&this.__extends||function(){var n=function(a,l){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,p){k.__proto__=p}||function(k,p){for(var m in p)p.hasOwnProperty(m)&&(k[m]=p[m])};return n(a,l)};return function(a,l){function k(){this.constructor=a}n(a,l);a.prototype=null===l?Object.create(l):
(k.prototype=l.prototype,new k)}}();define(["require","exports","./ImmutableArray","./ImmutablePointArray"],function(n,a,l,k){return function(p){function m(e,f,g,d,q){e=p.call(this,e)||this;e._lazyPath=[];e._hasZ=!1;e._hasM=!1;e._hasZ=g;e._hasM=d;e._spRef=f;e._cacheId=q;return e}r(m,p);m.prototype.get=function(e){if(void 0===this._lazyPath[e]){var f=this._elements[e];if(void 0===f)return;this._lazyPath[e]=new k(f,this._spRef,this._hasZ,this._hasM,this._cacheId,e)}return this._lazyPath[e]};m.prototype.equalityTest=
function(e){return e===this?!0:null===e||!1===e instanceof m?!1:e.getUniqueHash()===this.getUniqueHash()};m.prototype.getUniqueHash=function(){return this._cacheId.toString()};return m}(l)})},"esri/arcade/ImmutablePointArray":function(){var r=this&&this.__extends||function(){var n=function(a,l){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,p){k.__proto__=p}||function(k,p){for(var m in p)p.hasOwnProperty(m)&&(k[m]=p[m])};return n(a,l)};return function(a,l){function k(){this.constructor=
a}n(a,l);a.prototype=null===l?Object.create(l):(k.prototype=l.prototype,new k)}}();define(["require","exports","./ImmutableArray","../geometry/Point"],function(n,a,l,k){return function(p){function m(e,f,g,d,q,t){e=p.call(this,e)||this;e._lazyPt=[];e._hasZ=!1;e._hasM=!1;e._spRef=f;e._hasZ=g;e._hasM=d;e._cacheId=q;e._partId=t;return e}r(m,p);m.prototype.get=function(e){if(void 0===this._lazyPt[e]){var f=this._elements[e];if(void 0===f)return;var g=this._hasZ,d=this._hasM,q=null;q=g&&!d?new k(f[0],f[1],
f[2],void 0,this._spRef):d&&!g?new k(f[0],f[1],void 0,f[2],this._spRef):g&&d?new k(f[0],f[1],f[2],f[3],this._spRef):new k(f[0],f[1],this._spRef);q.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+e.toString());this._lazyPt[e]=q}return this._lazyPt[e]};m.prototype.equalityTest=function(e){return e===this?!0:null===e||!1===e instanceof m?!1:e.getUniqueHash()===this.getUniqueHash()};m.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};
return m}(l)})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(r,n,a,l,k,p,m,e){function f(w,x){89.99999<x?x=89.99999:-89.99999>x&&(x=-89.99999);x*=.017453292519943;return[111319.49079327169*w,3189068.5*Math.log((1+Math.sin(x))/(1-Math.sin(x)))]}function g(w,x,z){w=w/6378137*57.29577951308232;return z?[w,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*x/6378137)))]:
[w-360*Math.floor((w+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*x/6378137)))]}function d(){}function q(){}function t(w){var x=w._json;w._unquantizeFn?(x=w._unquantizeFn({x:x.x,y:x.y}),w._xVal=x.x,w._yVal=x.y,w._unquantizeFn=null):(w._xVal=x.x,w._yVal=x.y);w._json=null}a={type:"point",x:0,y:0};r=r(m,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(w,x,z){n.isArray(w)?(this.x=w[0],this.y=w[1],this.spatialReference=x):k.isObject(w)?(k.mixin(this,
w),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=e.createSpatialReference(this.spatialReference))):(this.x=w,this.y=x,this.spatialReference=z);this.verifySR()},offset:function(w,x){return new this.constructor(this.x+w,this.y+x,this.spatialReference)},setX:function(w){this.x=w;this.clearCache();return this},setY:function(w){this.y=w;this.clearCache();return this},setLongitude:function(w){var x=this.spatialReference;
x&&(x._isWebMercator()?this.setX(f(w,this.y)[0]):4326===x.wkid&&this.setX(w));return this},setLatitude:function(w){var x=this.spatialReference;x&&(x._isWebMercator()?this.setY(f(this.x,w)[1]):4326===x.wkid&&this.setY(w));return this},getLongitude:function(){var w=this.spatialReference;if(w)if(w._isWebMercator())var x=g(this.x,this.y)[0];else 4326===w.wkid&&(x=this.x);return x},getLatitude:function(){var w=this.spatialReference;if(w)if(w._isWebMercator())var x=g(this.x,this.y)[1];else 4326===w.wkid&&
(x=this.y);return x},update:function(w,x){this.x=w;this.y=x;this.clearCache();return this},normalize:function(){var w=this.x,x=this.spatialReference;if(x){var z=x._getInfo();z&&(w=this._normalizeX(w,z))}return new this.constructor(w,this.y,x)},_normalizeX:function(w,x){var z=x.valid[0],A=x.valid[1];x=2*A;w>A?(z=Math.ceil(Math.abs(w-A)/x),w-=z*x):w<z&&(z=Math.ceil(Math.abs(w-z)/x),w+=z*x);return w},toJson:function(){var w={x:this.x,y:this.y},x=this.spatialReference;x&&(w.spatialReference=x.toJson());
return w}});d.prototype=r.prototype;q.prototype=new d;Object.defineProperty(q.prototype,"x",{get:function(){this._json&&t(this);return this._xVal},set:function(w){this._xVal=w}});Object.defineProperty(q.prototype,"y",{get:function(){this._json&&t(this);return this._yVal},set:function(w){this._yVal=w}});q.prototype.setupLazyUnquantization=function(w,x){this._unquantizeFn=w;this._json=x};r.simpleConstructor=d;r.accessorConstructor=q;r.lngLatToXY=f;r.xyToLngLat=g;r.defaultProps=a;r.metersPerDegree=6378137*
Math.PI/180;n.setObject("geometry.Point",r,l);l.geometry.defaultPoint=a;return r})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(r,n,a,l,k){function p(){}a=[-2.0037508342788905E7,2.0037508342788905E7];var m=[-2.0037508342787E7,2.0037508342787E7];r=r(null,{declaredClass:"esri.SpatialReference",constructor:function(e){e&&(k.isObject(e)?k.mixin(this,e):k.isString(e)?this.wkt=e:this.wkid=e)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:m,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:m,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:m,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:m,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==n.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==n.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(e){var f=!1;e&&(f=this.isWebMercator()&&4326===e.wkid||e.isWebMercator()&&4326===this.wkid);return f},isWebMercator:function(){return this._isWebMercator()},equals:function(e){var f=!1;e&&(this===e&&
(f=!0),this.wkid||e.wkid?f=this.wkid===e.wkid||this.isWebMercator()&&e.isWebMercator()||this.wkid===e.latestWkid||e.wkid===this.latestWkid:this.wkt&&e.wkt&&(f=this.wkt.toUpperCase()===e.wkt.toUpperCase()));return f},toJson:function(){var e=null;null!=this.wkid?e={wkid:this.wkid}:null!=this.wkt&&(e={wkt:this.wkt});e&&null!=this.latestWkid&&(e.latestWkid=this.latestWkid);return e}});p.prototype=r.prototype;r.simpleConstructor=p;return l.SpatialReference=r})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(r,n,a,l,k){r=r(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(p){this.spatialReference=p;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new k(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(p){return this.cache&&this.cache[p]},setCacheValue:function(p,m){this.cache||
(this.cache={});this.cache[p]=m}});n.setObject("geometry.Geometry",r,l);return r})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(r,n,a,l,k){function p(m){var e=!1;m&&(m.ics||m.icsid)&&(e=!0);return e}l={isICS:p,createSpatialReference:function(m){var e=null;m&&(e=p(m)?new n(m):new r(m));return e}};k.mixin(a,l);return l})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(r,n,a,l,k,p){r=r(p,{declaredClass:"esri.ImageSpatialReference",constructor:function(m){m&&n.isObject(m)&&n.mixin(this,m)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(m){var e=!1;if(m)if(this.icsid&&m.icsid){if(e=this.icsid===m.icsid,this.icsns||m.icsns)e=e&&this.icsns===m.icsns}else this.ics&&m.ics&&(e=this.ics===m.ics);return e},toJson:function(m){var e=null,f=k.isDefined;m=f(m)?m:!0;f(this.icsid)?(e={icsid:this.icsid},
f(this.icsns)&&(e.icsns=this.icsns)):f(this.ics)&&(e={ics:this.ics});f(this.url)&&f(e)&&m&&(e.url=this.url);return e}});return l.ImageSpatialReference=r})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(r,n,a,l){function k(f,g){var d=new a(g);f(function(q){return e(q).then(d.resolve)},d.reject);return d.promise}function p(f){if(f){if("function"!==typeof f.forEach){var g=Object.keys(f),d=g.map(function(t){return f[t]});return p(d).then(function(t){var w=
{};g.forEach(function(x,z){return w[x]=t[z]});return w})}var q=null;return k(function(t,w){var x=[],z=f.length;0===z&&t(x);f.forEach(function(A){var B={promise:A};x.push(B);A.then(function(b){B.value=b}).catch(function(b){B.error=b}).then(function(){--z;0===z&&(q?w(Error("AbortError")):t(x))})})},function(t){q=t||"Invocation cancellation";f.forEach(function(w){return w.cancel(t)})})}}function m(f){void 0===f&&(f=void 0);var g=new a;g.resolve(f);return g.promise}function e(f){return f&&"function"===
typeof f.then?f:m(f)}Object.defineProperty(n,"__esModule",{value:!0});n.createResolver=n.when=n.isPromiseLike=n.wrapCallback=n.timeout=n.after=n.resolve=n.reject=n.first=n.eachAlwaysValues=n.eachAlways=n.createDeferred=n.create=n.filter=n.all=void 0;n.all=function(f){return l(f)};n.filter=function(f,g){var d=f.slice();return l(f.map(function(q,t){return g(q,t)})).then(function(q){return d.filter(function(t,w){return q[w]})})};n.create=k;n.createDeferred=function(f){var g=null;f=k(function(d,q){g=
{resolve:d,reject:q}},f);g.promise=f;g.cancel=function(){g.reject(Error("AbortError"))};return g};n.eachAlways=p;n.eachAlwaysValues=function(f){return p(f).then(function(g){return g.filter(function(d){return!!d.value}).map(function(d){return d.value})})};n.first=function(f){return f&&f.length?k(function(g,d){for(var q=0;q<f.length;q++)f[q].then(g,d)}):m()};n.reject=function(f){var g=new a;g.reject(f);return g.promise};n.resolve=m;n.after=function(f,g){void 0===g&&(g=void 0);var d=0;return k(function(q){d=
setTimeout(function(){q(g)},f)},function(){d&&(clearTimeout(d),d=0)})};n.timeout=function(f,g,d){var q=0,t=new a(f.cancel);f.then(function(w){t.isFulfilled()||(t.resolve(w),q&&(clearTimeout(q),q=0))});f.catch(function(w){t.isFulfilled()||(t.reject(w),q&&(clearTimeout(q),q=0))});q=setTimeout(function(){t.reject(d||Error("promiseUtils:timeout"))},g);return t.promise};n.wrapCallback=function(f){var g=!1;return k(function(){f(function(d){g||m(d)})},function(){return g=!0})};n.isPromiseLike=function(f){return f&&
"function"===typeof f.then};n.when=e;n.createResolver=function(f){var g,d;f=k(function(t,w){g=t;d=w},f);var q=function(t){g(t)};q.resolve=function(t){return g(t)};q.reject=function(t){return d(t)};q.promise=f;return q}})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(r,n,a,l,k,p,m,e,f,g,d,q){function t(){}l={type:"extent",
xmin:0,ymin:0,xmax:0,ymax:0};var w=r(e,{declaredClass:"esri.geometry.Extent",type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(x,z,A,B,b){p.isObject(x)?(p.mixin(this,x),this.spatialReference&&(this.spatialReference=q.createSpatialReference(this.spatialReference))):this.update(x,z,A,B,b);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new f((this.xmin+this.xmax)/2,(this.ymin+
this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new f(this.xmin,this.ymax,this.spatialReference)},getTopRight:function(){return new f(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new f(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new f(this.xmax,this.ymin,this.spatialReference)},centerAt:function(x){var z=this.getCenter(),A=x.x-z.x;x=x.y-z.y;return new w(this.xmin+A,this.ymin+x,this.xmax+A,this.ymax+x,this.spatialReference)},
update:function(x,z,A,B,b){this.xmin=x;this.ymin=z;this.xmax=A;this.ymax=B;this.spatialReference=b;this.clearCache();return this},offset:function(x,z){return new w(this.xmin+x,this.ymin+z,this.xmax+x,this.ymax+z,this.spatialReference)},expand:function(x){var z=(1-x)/2;x=this.getWidth()*z;z*=this.getHeight();return new w(this.xmin+x,this.ymin+z,this.xmax-x,this.ymax-z,this.spatialReference)},intersects:function(x){if(!x)return!1;var z=x.type,A=this.spatialReference,B=x.spatialReference;A&&B&&!A.equals(B)&&
A._canProject(B)&&(x=A.isWebMercator()?g.geographicToWebMercator(x):g.webMercatorToGeographic(x,!0));switch(z){case "point":return this.contains(x);case "multipoint":return this._intersectsMultipoint(x);case "extent":return this._intersectsExtent(x);case "polygon":return this._intersectsPolygon(x);case "polyline":return this._intersectsPolyline(x)}},normalize:function(){var x=this._normalize(!1,!0);a.isArray(x)||(x=[x]);return x},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var x=
this.spatialReference,z=x&&x._getInfo(),A=[],B=0;if(z&&this._isOutOfBounds(z)){var b=this;B=b.xmin;var h=b.ymin,c=b.ymax,v=z.valid[0],u=z.valid[1];b.getWidth()>2*u&&(b=b.getCenter(),b=new w(b.x-u,h,b.x+u,c,new m(x.toJson())));B=b.xmin-B;var y=this._normalizeX(b.xmin,z);z=this._normalizeX(b.xmax,z);y.frameId===z.frameId?A.push(new w(y.x,h,z.x,c,new m(x.toJson()))):A.push(new w(y.x,h,u,c,new m(x.toJson())),new w(v,h,z.x,c,new m(x.toJson())))}else A.push(this.getExtent());return{extents:A,marginLeft:B}},
_intersectsMultipoint:function(x){var z=x.points.length,A;for(A=0;A<z;A++)if(this.contains(x.getPoint(A)))return!0;return!1},_intersectsExtent:function(x){var z,A,B=!1;if(this.xmin<=x.xmin){var b=x.xmin;this.xmax<b?B=!0:z=Math.min(this.xmax,x.xmax)-b}else b=this.xmin,x.xmax<b?B=!0:z=Math.min(this.xmax,x.xmax)-b;if(this.ymin<=x.ymin){var h=x.ymin;this.ymax<h?B=!0:A=Math.min(this.ymax,x.ymax)-h}else h=this.ymin,x.ymax<h?B=!0:A=Math.min(this.ymax,x.ymax)-h;return B?null:new w(b,h,b+z,h+A,this.spatialReference)},
_intersectsPolygon:function(x){var z=[this.xmin,this.ymax],A=[this.xmax,this.ymax],B=[this.xmin,this.ymin],b=[this.xmax,this.ymin],h=[z,A,B,b];z=[[B,z],[z,A],[A,b],[b,B]];B=x.rings;b=B.length;var c=new f(0,0,this.spatialReference);var v=h.length;for(A=0;A<v;A++)if(c.update(h[A][0],h[A][1]),x.contains(c))return!0;c.setSpatialReference(x.spatialReference);for(A=0;A<b;A++)if(h=B[A],v=h.length){var u=h[0];c.update(u[0],u[1]);if(this.contains(c))return!0;for(x=1;x<v;x++){var y=h[x];c.update(y[0],y[1]);
if(this.contains(c)||this._intersectsLine([u,y],z))return!0;u=y}}return!1},_intersectsPolyline:function(x){var z=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],A,B=x.paths,b=B.length,h,c=new f(0,0,x.spatialReference);for(x=0;x<b;x++){var v=B[x];if(h=v.length){var u=v[0];c.update(u[0],u[1]);if(this.contains(c))return!0;for(A=1;A<h;A++){var y=v[A];c.update(y[0],
y[1]);if(this.contains(c)||this._intersectsLine([u,y],z))return!0;u=y}}}return!1},_intersectsLine:function(x,z){var A=d._getLineIntersection2,B,b=z.length;for(B=0;B<b;B++)if(A(x,z[B]))return!0;return!1},contains:function(x){if(!x)return!1;var z=x.type;if("point"===z){var A=this.spatialReference,B=x.spatialReference;z=x.x;x=x.y;A&&B&&!A.equals(B)&&A._canProject(B)&&(x=A.isWebMercator()?f.lngLatToXY(z,x):f.xyToLngLat(z,x,!0),z=x[0],x=x[1]);return z>=this.xmin&&z<=this.xmax&&x>=this.ymin&&x<=this.ymax}return"extent"===
z?this._containsExtent(x):!1},_containsExtent:function(x){var z=x.xmin,A=x.ymin,B=x.xmax,b=x.ymax,h=x.spatialReference;x=new f(z,A,h);z=new f(z,b,h);b=new f(B,b,h);A=new f(B,A,h);return this.contains(x)&&this.contains(z)&&this.contains(b)&&this.contains(A)?!0:!1},union:function(x){return new w(Math.min(this.xmin,x.xmin),Math.min(this.ymin,x.ymin),Math.max(this.xmax,x.xmax),Math.max(this.ymax,x.ymax),this.spatialReference)},getExtent:function(){var x=this.spatialReference;return new w(this.xmin,this.ymin,
this.xmax,this.ymax,x&&new m(x.toJson()))},_shiftCM:function(x){var z=this.getCacheValue("_shifted");if(!z){z=new w(this.toJson());var A=z.spatialReference;if(x=x||A._getInfo()){var B=this._getCM(x);if(B){var b=A._isWebMercator()?g.webMercatorToGeographic(B):B;z.xmin-=B.x;z.xmax-=B.x;A._isWebMercator()||(b.x=this._normalizeX(b.x,x).x);z.setSpatialReference(new m(p.substitute({Central_Meridian:b.x},4326===A.wkid?x.altTemplate:x.wkTemplate)))}}this.setCacheValue("_shifted",z)}return z},_getCM:function(x){var z;
this._isOutOfBounds(x)&&(z=this.getCenter());return z},_isOutOfBounds:function(x){var z=x.valid[0];x=x.valid[1];var A=this.xmin,B=this.xmax;return!(A>=z&&A<=x&&B>=z&&B<=x)},_normalize:function(x,z,A){var B=new w(this.toJson()),b=B.spatialReference;if(b&&(A=A||b._getInfo())){var h=n.map(this._getParts(A),function(c){return c.extent});return 2<h.length?x?this._shiftCM(A):B.update(A.valid[0],B.ymin,A.valid[1],B.ymax,b):2===h.length?x?this._shiftCM(A):z?h:{rings:n.map(h,function(c){return[[c.xmin,c.ymin],
[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]]}),spatialReference:b}:h[0]||B}return B},_getParts:function(x){var z=this.getCacheValue("_parts");if(!z){z=[];var A=this.xmin,B=this.xmax,b=this.ymin,h=this.ymax,c=this.spatialReference,v=this.getWidth(),u=A,y=B,C=0,D=0;x=x||c._getInfo();var E=x.valid[0];var F=x.valid[1];D=this._normalizeX(A,x);A=D.x;C=D.frameId;D=this._normalizeX(B,x);B=D.x;D=D.frameId;x=A===B&&0<v;if(v>2*F){v=new w(u<y?A:B,b,F,h,c);A=new w(E,b,u<y?B:A,h,c);F=new w(0,
b,F,h,c);b=new w(E,b,0,h,c);c=[];E=[];v.contains(F)&&c.push(C);v.contains(b)&&E.push(C);A.contains(F)&&c.push(D);A.contains(b)&&E.push(D);for(h=C+1;h<D;h++)c.push(h),E.push(h);z.push({extent:v,frameIds:[C]},{extent:A,frameIds:[D]},{extent:F,frameIds:c},{extent:b,frameIds:E})}else A>B||x?z.push({extent:new w(A,b,F,h,c),frameIds:[C]},{extent:new w(E,b,B,h,c),frameIds:[D]}):z.push({extent:new w(A,b,B,h,c),frameIds:[C]});this.setCacheValue("_parts",z)}return z},_normalizeX:function(x,z){var A=0,B=z.valid[0],
b=z.valid[1];z=2*b;x>b?(A=Math.ceil(Math.abs(x-b)/z),x-=A*z):x<B&&(A=Math.ceil(Math.abs(x-B)/z),x+=A*z,A=-A);return{x:x,frameId:A}},toJson:function(){var x={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},z=this.spatialReference;z&&(x.spatialReference=z.toJson());return x}});t.prototype=w.prototype;w.simpleConstructor=t;w.defaultProps=l;a.setObject("geometry.Extent",w,k);k.geometry.defaultExtent=l;return w})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),
function(r,n,a,l,k,p){function m(f,g,d,q){if("point"===f.type){var t=g(f.x,f.y,q);return new f.constructor(t[0],t[1],new k(d))}if("extent"===f.type){t=g(f.xmin,f.ymin,q);var w=g(f.xmax,f.ymax,q);return new f.constructor(t[0],t[1],w[0],w[1],new k(d))}if("polyline"===f.type||"polygon"===f.type){t="polyline"===f.type;var x=[],z;r.forEach(t?f.paths:f.rings,function(B){x.push(z=[]);r.forEach(B,function(b){z.push(g(b[0],b[1],q))})});return t?new f.constructor({paths:x,spatialReference:new k(d)}):new f.constructor({rings:x,
spatialReference:new k(d)})}if("multipoint"===f.type){var A=[];r.forEach(f.points,function(B){A.push(g(B[0],B[1],q))});return new f.constructor({points:A,spatialReference:new k(d)})}}function e(f,g){f=f&&(null!=f.wkid?f:f.spatialReference);g=g&&(null!=g.wkid?g:g.spatialReference);return f&&g?g.equals(f)?!0:g._canProject(f):!1}a={canProject:e,project:function(f,g){var d=f&&f.spatialReference;g=g&&(null!=g.wkid?g:g.spatialReference);d&&g?d.equals(g)?f=new f.constructor(f.toJson()):e(d,g)?g.isWebMercator()?
f=m(f,p.lngLatToXY,{wkid:102100}):4326===g.wkid&&(f=m(f,p.xyToLngLat,{wkid:4326})):f=null:f=null;return f},lngLatToXY:p.lngLatToXY,xyToLngLat:p.xyToLngLat,metersPerDegree:p.metersPerDegree,geographicToWebMercator:function(f){return m(f,p.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(f,g){return m(f,p.xyToLngLat,{wkid:4326},g)}};n.mixin(n.getObject("geometry",!0,l),a);return a})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(r,
n,a,l){function k(e,f,g){return e instanceof l?new l(e.x+g*(f.x-e.x),e.y+g*(f.y-e.y)):[e[0]+g*(f[0]-e[0]),e[1]+g*(f[1]-e[1])]}function p(e,f){return 1E-8>Math.abs(e-f)}function m(e,f,g,d){var q=p(e[0],f[0])?1E10:(e[1]-f[1])/(e[0]-f[0]),t=p(g[0],d[0])?1E10:(g[1]-d[1])/(g[0]-d[0]),w=e[1]-q*e[0],x=g[1]-t*g[0];if(p(q,t)){if(p(w,x)){if(p(e[0],f[0]))if(Math.min(e[1],f[1])<Math.max(g[1],d[1])||Math.max(e[1],f[1])>Math.min(g[1],d[1])){e=(e[1]+f[1]+g[1]+d[1]-Math.min(e[1],f[1],g[1],d[1])-Math.max(e[1],f[1],
g[1],d[1]))/2;var z=(e-w)/q}else return null;else if(Math.min(e[0],f[0])<Math.max(g[0],d[0])||Math.max(e[0],f[0])>Math.min(g[0],d[0]))z=(e[0]+f[0]+g[0]+d[0]-Math.min(e[0],f[0],g[0],d[0])-Math.max(e[0],f[0],g[0],d[0]))/2,e=q*z+w;else return null;return[z,e]}return null}p(q,1E10)?(z=e[0],e=t*z+x):p(t,1E10)?(z=g[0],e=q*z+w):(z=-(w-x)/(q-t),e=e[1]===f[1]?e[1]:g[1]===d[1]?g[1]:q*z+w);return[z,e]}n={getLength:function(e,f){var g=f.x-e.x;e=f.y-e.y;return Math.sqrt(g*g+e*e)},_getLength:function(e,f){var g=
f[0]-e[0];e=f[1]-e[1];return Math.sqrt(g*g+e*e)},getPointOnLine:k,getMidpoint:function(e,f){return k(e,f,.5)},_equals:p,_getLineIntersection:m,getLineIntersection:function(e,f,g,d,q){(e=m([e.x,e.y],[f.x,f.y],[g.x,g.y],[d.x,d.y]))&&(e=new l(e[0],e[1],q));return e},_getLineIntersection2:function(e,f){var g=e[0],d=e[1],q=f[0],t=f[1];f=g[0];g=g[1];e=d[0];d=d[1];var w=q[0],x=q[1];q=t[0]-w;w=f-w;var z=e-f;t=t[1]-x;x=g-x;var A=d-g,B=t*z-q*A;if(0===B)return!1;q=(q*x-t*w)/B;w=(z*x-A*w)/B;return 0<=q&&1>=q&&
0<=w&&1>=w?[f+q*(e-f),g+q*(d-g)]:!1},_pointLineDistance:function(e,f){var g=f[0],d=f[1];f=g[0];var q=g[1];g=e[0];e=e[1];var t=d[0]-f,w=d[1]-q,x=g-f,z=e-q;d=Math.sqrt;var A=Math.pow,B=d(A(t,2)+A(w,2));x=(x*t+z*w)/(B*B);q+=x*w;return d(A(g-(f+x*t),2)+A(e-q,2))}};r.mixin(r.getObject("geometry",!0,a),n);return n})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(r,
n,a,l,k,p,m,e,f,g){function d(){}function q(){}a={type:"multipoint",points:null};r=r(m,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(t){this.points=[];t&&(t.points?k.mixin(this,t):this.spatialReference=t,this.spatialReference&&(this.spatialReference=g.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(t){this.clearCache();n.isArray(t)?this.points.push(t):this.points.push([t.x,t.y]);return this},removePoint:function(t){if(this._validateInputs(t))return this.clearCache(),
new e(this.points.splice(t,1)[0],this.spatialReference)},getExtent:function(){var t=this.getCacheValue("_extent");if(t)return new f(t);t=this.points;var w=t.length;if(w){var x=t[0],z,A,B=z=x[0],b=A=x[1],h=Math.min,c=Math.max,v=this.spatialReference,u;for(u=0;u<w;u++){x=t[u];var y=x[0];x=x[1];B=h(B,y);b=h(b,x);z=c(z,y);A=c(A,x)}t={xmin:B,ymin:b,xmax:z,ymax:A,spatialReference:v?v.toJson():null};this.setCacheValue("_extent",t);return new f(t)}},_validateInputs:function(t){return null===t||0>t||t>=this.points.length?
!1:!0},getPoint:function(t){if(this._validateInputs(t))return t=this.points[t],new e(t[0],t[1],this.spatialReference)},setPoint:function(t,w){if(this._validateInputs(t))return this.clearCache(),this.points[t]=[w.x,w.y],this},toJson:function(){var t={points:k.clone2DArray(this.points)},w=this.spatialReference;w&&(t.spatialReference=w.toJson());return t}});d.prototype=r.prototype;q.prototype=new d;Object.defineProperty(q.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:k.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(t){this._pointsVal=t}});q.prototype.setupLazyUnquantization=function(t,w){this._unquantizeFn=t;this._pointsVal=w.points};r.simpleConstructor=d;r.accessorConstructor=q;r.defaultProps=a;n.setObject("geometry.Multipoint",r,l);l.geometry.defaultMultipoint=a;return r})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q){function t(){}function w(){}l={type:"polygon",rings:null};var x=r(e,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(z){this.rings=[];this._ring=0;z&&(a.isArray(z)?this.rings=a.isArray(z[0][0])?z:[z]:z.rings?p.mixin(this,z):this.spatialReference=z,this.spatialReference&&(this.spatialReference=q.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(z){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=
[];a.isArray(z[0])?n.forEach(z,this._addPointArr,this):n.forEach(z,this._addPoint,this);return this},_addPointArr:function(z){this.rings[this._ring].push(z)},_addPoint:function(z){this.rings[this._ring].push([z.x,z.y])},_insertPoints:function(z,A){this.clearCache();this._ring=A;this.rings[this._ring]||(this.rings[this._ring]=[]);n.forEach(z,this._addPoint,this)},_validateInputs:function(z,A){return null!==z&&void 0!==z&&(0>z||z>=this.rings.length)||null!==A&&void 0!==z&&(0>A||A>=this.rings[z].length)?
!1:!0},getPoint:function(z,A){if(this._validateInputs(z,A))return new f(this.rings[z][A],this.spatialReference)},setPoint:function(z,A,B){if(this._validateInputs(z,A))return this.clearCache(),this.rings[z][A]=[B.x,B.y],this},insertPoint:function(z,A,B){if(this._validateInputs(z)&&null!=A&&0<=A&&A<=this.rings[z].length)return this.clearCache(),this.rings[z].splice(A,0,[B.x,B.y]),this},removeRing:function(z){if(this._validateInputs(z,null)){this.clearCache();z=this.rings.splice(z,1)[0];var A,B=z.length,
b=this.spatialReference;for(A=0;A<B;A++)z[A]=new f(z[A],b);return z}},removePoint:function(z,A){if(this._validateInputs(z,A))return this.clearCache(),new f(this.rings[z].splice(A,1)[0],this.spatialReference)},getExtent:function(){var z=this.getCacheValue("_extent");var A=this.getCacheValue("_partwise");if(z)return z=new g(z),z._partwise=A,z;z=this.rings;var B=z.length;if(B&&z[0].length){var b,h,c,v,u=b=z[0][0][0],y=h=z[0][0][1],C=Math.min,D=Math.max,E=this.spatialReference;A=[];var F,G;for(c=0;c<
B;c++){var J=z[c];var R=F=J[0]&&J[0][0];var O=G=J[0]&&J[0][1];var P=J.length;for(v=0;v<P;v++){var U=J[v];var K=U[0];U=U[1];u=C(u,K);y=C(y,U);b=D(b,K);h=D(h,U);R=C(R,K);O=C(O,U);F=D(F,K);G=D(G,U)}A.push(new g({xmin:R,ymin:O,xmax:F,ymax:G,spatialReference:E?E.toJson():null}))}z={xmin:u,ymin:y,xmax:b,ymax:h,spatialReference:E?E.toJson():null};A=1<A.length?A:null;this.setCacheValue("_extent",z);this.setCacheValue("_partwise",A);z=new g(z);z._partwise=A;return z}},contains:function(z){var A=this.rings,
B=!1,b,h,c,v=A.length;var u=this.spatialReference;var y=z.spatialReference;var C=z.x;z=z.y;u&&y&&!u.equals(y)&&u._canProject(y)&&(z=u.isWebMercator()?f.lngLatToXY(C,z):f.xyToLngLat(C,z,!0),C=z[0],z=z[1]);for(c=0;c<v;c++){u=A[c];var D=u.length;for(h=b=0;h<D;h++){b++;b===D&&(b=0);y=u[h];var E=u[b];(y[1]<z&&E[1]>=z||E[1]<z&&y[1]>=z)&&y[0]+(z-y[1])/(E[1]-y[1])*(E[0]-y[0])<C&&(B=!B)}}return B},getCentroid:function(){var z=this.getCacheValue("_centroid");if(void 0!==z)return z;z=this.rings;var A,B,b=[],
h,c,v=Infinity,u=-Infinity,y=Infinity,C=-Infinity;n.forEach(z,function(F){D=A=B=0;n.forEach(F,function(G,J){J<F.length-1&&(h=F[J+1],c=G[0]*h[1]-h[0]*G[1],D+=(G[0]+h[0])*c,A+=(G[1]+h[1])*c,B+=c,G[0]<v&&(v=G[0]),G[0]>u&&(u=G[0]),G[1]<y&&(y=G[1]),G[1]>C&&(C=G[1]))});0<B&&(B*=-1);B&&b.push([D,A,B/2])});b.sort(function(F,G){return F[2]-G[2]});var D=A=void 0;if(b[0]){var E=6*b[0][2];D=b[0][0]/E;A=b[0][1]/E;if(D<v||D>u||A<y||A>C)D=A=void 0}if(void 0===D||void 0===A)if(z=z[0]&&z[0].length?this._getLineCentroid(z[0]):
null)D=z.x,A=z.y;z=isNaN(D)||isNaN(A)?null:new f(D,A,this.spatialReference);this.setCacheValue("_centroid",z);return z},_getLineCentroid:function(z){var A=0,B=0,b=0,h={x:0,y:0},c={x:0,y:0},v,u=z.length,y;for(v=0;v<u-1;v++){var C=z[v];var D=z[v+1];if(C&&D){h.x=C[0];h.y=C[1];c.x=D[0];c.y=D[1];var E=d.getLength(h,c);0<E&&(A+=E,C=d.getMidpoint(C,D),B+=E*C[0],b+=E*C[1])}}0<A?y={x:B/A,y:b/A}:z[0]&&(y={x:z[0][0],y:z[0][1]});return y},isClockwise:function(z){var A=0,B,b=z.length,h=a.isArray(z[0])?function(c,
v){return c[0]*v[1]-v[0]*c[1]}:function(c,v){return c.x*v.y-v.x*c.y};for(B=0;B<b;B++)A+=h(z[B],z[(B+1)%b]);return 0>=A/2},isSelfIntersecting:function(z){z=z||this;var A,B,b,h,c,v=z.rings.length;for(b=0;b<v;b++){for(A=0;A<z.rings[b].length-1;A++){var u=[[z.rings[b][A][0],z.rings[b][A][1]],[z.rings[b][A+1][0],z.rings[b][A+1][1]]];for(B=b+1;B<v;B++)for(h=0;h<z.rings[B].length-1;h++){var y=[[z.rings[B][h][0],z.rings[B][h][1]],[z.rings[B][h+1][0],z.rings[B][h+1][1]]];if((c=d._getLineIntersection2(u,y))&&
!(c[0]===u[0][0]&&c[1]===u[0][1]||c[0]===y[0][0]&&c[1]===y[0][1]||c[0]===u[1][0]&&c[1]===u[1][1]||c[0]===y[1][0]&&c[1]===y[1][1]))return!0}}h=z.rings[b].length;if(!(4>=h))for(A=0;A<h-3;A++){var C=h-1;0===A&&(C=h-2);u=[[z.rings[b][A][0],z.rings[b][A][1]],[z.rings[b][A+1][0],z.rings[b][A+1][1]]];for(B=A+2;B<C;B++)if(y=[[z.rings[b][B][0],z.rings[b][B][1]],[z.rings[b][B+1][0],z.rings[b][B+1][1]]],(c=d._getLineIntersection2(u,y))&&!(c[0]===u[0][0]&&c[1]===u[0][1]||c[0]===y[0][0]&&c[1]===y[0][1]||c[0]===
u[1][0]&&c[1]===u[1][1]||c[0]===y[1][0]&&c[1]===y[1][1]))return!0}}return!1},toJson:function(){var z={rings:p.clone3DArray(this.rings)},A=this.spatialReference;A&&(z.spatialReference=A.toJson());return z}});t.prototype=x.prototype;w.prototype=new t;Object.defineProperty(w.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:p.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(z){this._ringsVal=z}});w.prototype.setupLazyUnquantization=
function(z,A){this._unquantizeFn=z;this._ringsVal=A.rings};x.simpleConstructor=t;x.accessorConstructor=w;x.defaultProps=l;x.createEllipse=function(z){var A=z.center.x,B=z.center.y,b=z.longAxis,h=z.shortAxis,c=z.numberOfPoints,v=z.map,u;z=[];var y=2*Math.PI/c;for(u=0;u<c;u++){var C=Math.cos(u*y);var D=Math.sin(u*y);C=v.toMap({x:b*C+A,y:h*D+B});z.push(C)}z.push(z[0]);A=new x(v.spatialReference);A.addRing(z);return A};x.createCircle=function(z){return x.createEllipse({center:z.center,longAxis:z.r,shortAxis:z.r,
numberOfPoints:z.numberOfPoints,map:z.map})};x.fromExtent=function(z){var A=z.normalize();z=z.spatialReference;return new x({rings:n.map(A,function(B){return[[B.xmin,B.ymin],[B.xmin,B.ymax],[B.xmax,B.ymax],[B.xmax,B.ymin],[B.xmin,B.ymin]]}),spatialReference:z?z.toJson():null})};a.setObject("geometry.Polygon",x,k);k.geometry.defaultPolygon=l;k.geometry.createEllipse=x.createEllipse;k.geometry.createCircle=x.createCircle;k.geometry.isClockwise=x.prototype.isClockwise;k.geometry.polygonSelfIntersecting=
x.prototype.isSelfIntersecting;return x})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(r,n,a,l,k,p,m,e,f,g,d){function q(){}function t(){}l={type:"polyline",paths:null};r=r(e,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(w){this.paths=[];this._path=0;w&&(a.isArray(w)?this.paths=a.isArray(w[0][0])?w:
[w]:w.paths?p.mixin(this,w):this.spatialReference=w,this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(w){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];a.isArray(w[0])?n.forEach(w,this._addPointArr,this):n.forEach(w,this._addPoint,this);return this},_addPointArr:function(w){this.paths[this._path].push(w)},_addPoint:function(w){this.paths[this._path].push([w.x,w.y])},_insertPoints:function(w,x){this.clearCache();
this._path=x;this.paths[this._path]||(this.paths[this._path]=[]);n.forEach(w,this._addPoint,this)},_validateInputs:function(w,x){return null!==w&&void 0!==w&&(0>w||w>=this.paths.length)||null!==x&&void 0!==w&&(0>x||x>=this.paths[w].length)?!1:!0},getPoint:function(w,x){if(this._validateInputs(w,x))return new f(this.paths[w][x],this.spatialReference)},setPoint:function(w,x,z){if(this._validateInputs(w,x))return this.clearCache(),this.paths[w][x]=[z.x,z.y],this},insertPoint:function(w,x,z){if(this._validateInputs(w)&&
null!=x&&0<=x&&x<=this.paths[w].length)return this.clearCache(),this.paths[w].splice(x,0,[z.x,z.y]),this},removePath:function(w){if(this._validateInputs(w,null)){this.clearCache();w=this.paths.splice(w,1)[0];var x,z=w.length,A=this.spatialReference;for(x=0;x<z;x++)w[x]=new f(w[x],A);return w}},removePoint:function(w,x){if(this._validateInputs(w,x))return this.clearCache(),new f(this.paths[w].splice(x,1)[0],this.spatialReference)},getExtent:function(){var w=this.getCacheValue("_extent");var x=this.getCacheValue("_partwise");
if(w)return w=new g(w),w._partwise=x,w;w=this.paths;var z=w.length;if(z&&w[0].length){var A,B,b,h,c=A=w[0][0][0],v=B=w[0][0][1],u=Math.min,y=Math.max,C=this.spatialReference;x=[];var D,E;for(b=0;b<z;b++){var F=w[b];var G=D=F[0]&&F[0][0];var J=E=F[0]&&F[0][1];var R=F.length;for(h=0;h<R;h++){var O=F[h];var P=O[0];O=O[1];c=u(c,P);v=u(v,O);A=y(A,P);B=y(B,O);G=u(G,P);J=u(J,O);D=y(D,P);E=y(E,O)}x.push(new g({xmin:G,ymin:J,xmax:D,ymax:E,spatialReference:C?C.toJson():null}))}w={xmin:c,ymin:v,xmax:A,ymax:B,
spatialReference:C?C.toJson():null};x=1<x.length?x:null;this.setCacheValue("_extent",w);this.setCacheValue("_partwise",x);w=new g(w);w._partwise=x;return w}},toJson:function(){var w={paths:p.clone3DArray(this.paths)},x=this.spatialReference;x&&(w.spatialReference=x.toJson());return w}});q.prototype=r.prototype;t.prototype=new q;Object.defineProperty(t.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:p.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=
null);return this._pathsVal},set:function(w){this._pathsVal=w}});t.prototype.setupLazyUnquantization=function(w,x){this._unquantizeFn=w;this._pathsVal=x.paths};r.simpleConstructor=q;r.accessorConstructor=t;r.defaultProps=l;a.setObject("geometry.Polyline",r,k);k.geometry.defaultPolyline=l;return r})},"esri/layers/vectorTiles/arcade/Feature":function(){define(["require","exports","esri/arcade/Feature"],function(r,n,a){a.prototype.repurposeFromGraphicLikeObject=function(l,k,p){void 0===p&&(p=null);null===
k&&(k={});this.attributes=k;this.geometry=l;this._datesfixed=(this._layer=p)?!1:!0};return a})},"esri/arcade/Feature":function(){var r=this&&this.__assign||function(){r=Object.assign||function(n){for(var a,l=1,k=arguments.length;l<k;l++){a=arguments[l];for(var p in a)Object.prototype.hasOwnProperty.call(a,p)&&(n[p]=a[p])}return n};return r.apply(this,arguments)};define("require exports ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "),
function(n,a,l,k,p,m,e,f,g){return function(){function d(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._adapter=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}d.createFromGraphic=function(q){var t=new d;t._geometry=q.geometry?q.geometry:null;t.attributes=void 0===q.attributes?{}:null===q.attributes?{}:q.attributes;q._sourceLayer?(t._layer=q._sourceLayer,t._datesfixed=!1):q._layer?(t._layer=q._layer,t._datesfixed=!1):q.layer?
(t._layer=q.layer,t._datesfixed=!1):q.sourceLayer&&(t._layer=q.sourceLayer,t._datesfixed=!1);return t};d.createFromArcadeFeature=function(q){var t=new d;t._datesfixed=q._datesfixed;t.attributes=q.attributes;t._geometry=q._geometry;q._layer&&(t._layer=q._layer);return t};d.createFromArcadeDictionary=function(q){var t=new d;t.attributes=q.field("attributes");null!==t.attributes?t.attributes instanceof l?(t.attributes=t.attributes.attributes,null===t.attributes&&(t.attributes={})):t.attributes={}:t.attributes=
{};t._geometry=q.field("geometry");null!==t._geometry&&(t._geometry instanceof l?t._geometry=d.parseGeometryFromDictionary(t._geometry):t._geometry instanceof m||(t._geometry=null));return t};d.createFromGraphicLikeObject=function(q,t,w){void 0===w&&(w=null);var x=new d;null===t&&(t={});x.attributes=t;x._geometry=q?q:null;x._layer=w;x._layer&&(x._datesfixed=!1);x._adapter=null;return x};d.prototype.repurposeFromGraphicLikeObject=function(q,t,w){void 0===w&&(w=null);null===t&&(t={});this.attributes=
t;this._geometry=q?q:null;this._datesfixed=(this._layer=w)?!1:!0};d.prototype.castToText=function(){if(this._adapter)return this._adapter.castToText();var q="";!1===this._datesfixed&&this._fixDates();for(var t in this.attributes){""!==q&&(q+=",");var w=this.attributes[t];null==w?q+=JSON.stringify(t)+":null":p.isBoolean(w)||p.isNumber(w)||p.isString(w)?q+=JSON.stringify(t)+":"+JSON.stringify(w):w instanceof m?q+=JSON.stringify(t)+":"+p.toStringExplicit(w):w instanceof k?q+=JSON.stringify(t)+":"+p.toStringExplicit(w):
w instanceof Array?q+=JSON.stringify(t)+":"+p.toStringExplicit(w):w instanceof Date?q+=JSON.stringify(t)+":"+JSON.stringify(w):null!==w&&"object"===typeof w&&void 0!==w.castToText&&(q+=JSON.stringify(t)+":"+w.castToText())}return'{"geometry":'+(null===this.geometry()?"null":p.toStringExplicit(this.geometry()))+',"attributes":{'+q+"}}"};d.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var q=[],t=0;t<this._layer.fields.length;t++){var w=
this._layer.fields[t];"date"!==w.type&&"esriFieldTypeDate"!==w.type||q.push(w.name)}this._datefields=q;0<q.length&&this._fixDateFields(q)}this._datesfixed=!0};d.prototype._fixDateFields=function(q){this.attributes=r({},this.attributes);for(var t=0;t<q.length;t++){var w=this.attributes[q[t]];if(null!==w)if(void 0===w)for(var x in this.attributes){if(x.toLowerCase()===q[t].toLowerCase()){w=this.attributes[x];null===w||w instanceof Date||(this.attributes[x]=new Date(w));break}}else w instanceof Date||
(this.attributes[q[t]]=new Date(w))}};d.prototype.geometry=function(){if(this._adapter)return this._adapter.geometry();if(null===this._geometry)return this._geometry;this._geometry instanceof m||(this._geometry=f.fromJson(this._geometry));return this._geometry};d.prototype.field=function(q){if(this._adapter)return this._adapter.field(q);!1===this._datesfixed&&this._fixDates();var t=this.attributes[q];if(void 0!==t)return t;t=q.toLowerCase();for(var w in this.attributes)if(w.toLowerCase()===t)return this.attributes[w];
if(this._hasFieldDefinition(t))return null;throw Error("Field not Found : "+q);};d.prototype._hasFieldDefinition=function(q){if(null===this._layer)return!1;for(var t=0;t<this._layer.fields.length;t++)if(this._layer.fields[t].name.toLowerCase()===q)return!0;return!1};d.prototype._field=function(q){var t;if(this._adapter)return null!==(t=this._adapter.field(q))&&void 0!==t?t:null;!1===this._datesfixed&&this._fixDates();t=q.toLowerCase();q=this.attributes[q];if(void 0!==q)return q;for(var w in this.attributes)if(w.toLowerCase()===
t)return this.attributes[w];return null};d.prototype.setField=function(q,t){if(this.immutable)throw Error("Feature is Immutable");if(!1===p.isSimpleType(t))throw Error("Illegal Value Assignment to Feature");if(this._adapter)this._adapter.setField(q,t);else{var w=q.toLowerCase();if(void 0===this.attributes[q])for(var x in this.attributes)if(x.toLowerCase()===w){this.attributes[x]=t;return}this.attributes[q]=t}};d.prototype.hasField=function(q){if(this._adapter)return this._adapter.hasField(q);var t=
q.toLowerCase();if(void 0!==this.attributes[q])return!0;for(var w in this.attributes)if(w.toLowerCase()===t)return!0;return this._hasFieldDefinition(t)?!0:!1};d.prototype.keys=function(){if(this._adapter)return this._adapter.keys();var q=[],t={},w;for(w in this.attributes)q.push(w),t[w.toLowerCase()]=1;if(null!==this._layer)for(w=0;w<this._layer.fields.length;w++){var x=this._layer.fields[w];1!==t[x.name.toLowerCase()]&&q.push(x.name)}return q=q.sort()};d.parseGeometryFromDictionary=function(q){q=
d.convertDictionaryToJson(q,!0);void 0!==q.hasm&&(q.hasM=q.hasm,delete q.hasm);void 0!==q.hasz&&(q.hasZ=q.hasz,delete q.hasz);void 0!==q.spatialreference&&(q.spatialReference=q.spatialreference,delete q.spatialreference);void 0!==q.rings&&(q.rings=this.fixPathArrays(q.rings,!0===q.hasZ,!0===q.hasZ));void 0!==q.paths&&(q.paths=this.fixPathArrays(q.paths,!0===q.hasZ,!0===q.hasM));void 0!==q.points&&(q.points=this.fixPointArrays(q.points,!0===q.hasZ,!0===q.hasM));return f.fromJson(q)};d.fixPathArrays=
function(q,t,w){var x=[];if(q instanceof Array)for(var z=0;z<q.length;z++)x.push(this.fixPointArrays(q[z],t,w));else if(q instanceof k)for(z=0;z<q.length();z++)x.push(this.fixPointArrays(q.get(z),t,w));return x};d.fixPointArrays=function(q,t,w){var x=[];if(q instanceof Array)for(var z=0;z<q.length;z++){var A=q[z];A instanceof e?t&&w?x.push([A.x,A.y,A.z,A.m]):t?x.push([A.x,A.y,A.z]):w?x.push([A.x,A.y,A.m]):x.push([A.x,A.y]):A instanceof k?x.push(A.toArray()):x.push(A)}else if(q instanceof k)for(z=
0;z<q.length();z++)A=q.get(z),A instanceof e?t&&w?x.push([A.x,A.y,A.z,A.m]):t?x.push([A.x,A.y,A.z]):w?x.push([A.x,A.y,A.m]):x.push([A.x,A.y]):A instanceof k?x.push(A.toArray()):x.push(A);return x};d.convertDictionaryToJson=function(q,t){void 0===t&&(t=!1);var w={},x;for(x in q.attributes){var z=q.attributes[x];z instanceof l&&(z=d.convertDictionaryToJson(z));t?w[x.toLowerCase()]=z:w[x]=z}return w};d.parseAttributesFromDictionary=function(q){var t={},w;for(w in q.attributes){var x=q.attributes[w];
if(p.isSimpleType(x))t[w]=x;else throw Error("Illegal Argument");}return t};d.fromJson=function(q){var t=null;null!==q.geometry&&void 0!==q.geometry&&(t=f.fromJson(q.geometry));var w={};if(null!==q.attributes&&void 0!==q.attributes)for(var x in q.attributes){var z=q.attributes[x];if(null===z)w[x]=z;else if(p.isString(z)||p.isNumber(z)||p.isBoolean(z)||p.isDate(z))w[x]=z;else throw Error("Illegal Argument");}return d.createFromGraphicLikeObject(t,w,null)};d.prototype.fullDomain=function(q,t){return null!==
this._layer&&this._layer.fields?p.getDomain(q,this._layer,this,t):null};d.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(function(q){return{name:q.name,code:q.id}}):[]}:null:null};d.prototype.domainValueLookup=function(q,t,w){if(null===this._layer||!this._layer.fields)return null;w=p.getDomain(q,this._layer,this,w);if(void 0===t)try{t=this.field(q)}catch(x){return null}return p.getDomainValue(w,
t)};d.prototype.gdbVersion=function(){if(null===this._layer)return"";var q=this._layer.gdbVersion;return void 0===q?"":""===q&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":q};d.prototype.domainCodeLookup=function(q,t,w){if(null===this._layer||!this._layer.fields)return null;if(void 0===t){try{t=this.field(q)}catch(x){return null}return t}q=p.getDomain(q,this._layer,this,w);return p.getDomainCode(q,t)};d.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;
for(var q=[],t=0,w=this._layer.fields;t<w.length;t++)q.push(g.esriFieldToJson(w[t]));return{objectIdField:this._layer.objectIdField,globalIdField:this._layer.globalIdField,geometryType:void 0===g.layerGeometryEsriRestConstants[this._layer.geometryType]?"":g.layerGeometryEsriRestConstants[this._layer.geometryType],fields:q}};return d}()})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(r,
n,a,l,k,p,m,e,f){function g(w,x,z){var A=w.rings||w.paths,B,b;var h=0;for(B=A.length;h<B;h++){var c=A[h];var v=0;for(b=c.length;v<b;v++){var u=c[v];if(0<v)y+=u[0],C+=u[1];else{var y=u[0];var C=u[1]}u[0]=x(y);u[1]=z(C)}}return w}var d={esriGeometryPoint:function(w,x,z){w.x=x(w.x);w.y=z(w.y);return w},esriGeometryPolyline:g,esriGeometryPolygon:g,esriGeometryEnvelope:function(w,x,z){w.xmin=x(w.xmin);w.ymin=z(w.ymin);w.xmax=x(w.xmax);w.ymax=z(w.ymax);return w},esriGeometryMultipoint:function(w,x,z){var A=
w.points,B;var b=0;for(B=A.length;b<B;b++){var h=A[b];if(0<b)c+=h[0],v+=h[1];else{var c=h[0];var v=h[1]}h[0]=x(c);h[1]=z(v)}return w}},q={esriGeometryPoint:function(w,x,z){w.x=x(w.x);w.y=z(w.y);return w}},t={createInstance:function(w,x){w=new w;x&&l.mixin(w,x);return w},fromJson:function(w){if(void 0!==w.x&&void 0!==w.y)return new k(w);if(void 0!==w.paths)return new p(w);if(void 0!==w.rings)return new m(w);if(void 0!==w.points)return new e(w);if(void 0!==w.xmin&&void 0!==w.ymin&&void 0!==w.xmax&&
void 0!==w.ymax)return new f(w)},getJsonType:function(w){return w instanceof k?"esriGeometryPoint":w instanceof p?"esriGeometryPolyline":w instanceof m?"esriGeometryPolygon":w instanceof f?"esriGeometryEnvelope":w instanceof e?"esriGeometryMultipoint":null},getGeometryType:function(w){return"esriGeometryPoint"===w?k:"esriGeometryPolyline"===w?p:"esriGeometryPolygon"===w?m:"esriGeometryEnvelope"===w?f:"esriGeometryMultipoint"===w?e:null},supportsLazyUnquantization:function(w){return"esriGeometryPoint"===
w||"esriGeometryPolyline"===w||"esriGeometryPolygon"===w||"esriGeometryMultipoint"===w},unquantizeFunction:function(w,x){if(w&&x){var z=x.translate[0],A=x.translate[1],B=x.scale[0],b=x.scale[1],h=function(u){return u*B+z},c=function(u){return A-u*b},v=d[w];return function(u){return u?v(u,h,c):null}}},unquantize:function(w,x,z){if(x=t.unquantizeFunction(x,z)){var A=w.length;for(z=0;z<A;z++)x(w[z].geometry)}},quantizeFunction:function(w,x){if(w&&"esriGeometryPoint"===w&&x){var z=x.translate[0],A=x.translate[1],
B=x.scale[0],b=x.scale[1],h=function(u){return Math.round((u-z)/B)},c=function(u){return Math.round((A-u)/b)},v=q[w];return function(u){return u?v(u,h,c):null}}},quantize:function(w,x,z){if(x=t.quantizeFunction(x,z)){var A=w.length;for(z=0;z<A;z++)x(w[z].geometry)}}};r.mixin(r.getObject("geometry",!0,a),t);return t})},"esri/arcade/featureset/support/shared":function(){var r=this&&this.__assign||function(){r=Object.assign||function(n){for(var a,l=1,k=arguments.length;l<k;l++){a=arguments[l];for(var p in a)Object.prototype.hasOwnProperty.call(a,
p)&&(n[p]=a[p])}return n};return r.apply(this,arguments)};define(["require","exports","../../polyfill/promiseUtils","../../../geometry/Extent","../../../layers/Field"],function(n,a,l,k,p){function m(f){var g=null;f.domain&&(g="range"===f.domain.type?{type:"range",range:[f.domain.minValue,f.domain.maxValue]}:{type:"codedValue",codedValues:f.domain.toJson().codedValues});return r(r({name:f.name,type:f.type,alias:f.alias},void 0!==f.length?{length:f.length}:{}),{editable:!0===f.editable,nullable:!0===
f.nullable,domain:g})}function e(f){return f instanceof Date}Object.defineProperty(a,"__esModule",{value:!0});a.stableStringify=a.extractServiceUrl=a.reduceArrayWithPromises=a.toEsriGeometryType=a.layerFieldEsriConstants=a.layerGeometryEsriRestConstants=a.layerGeometryEsriConstants=a.callback=a.errback=a.defaultMaxRecords=a.sameGeomType=a.convertLinearUnitsToCode=a.shapeExtent=a.convertSquareUnitsToCode=a.cloneAttributes=a.equalityTest=a.isDate=a.isArray=a.isNumber=a.isBoolean=a.isString=a.IdState=
a.esriFieldToJson=a.cloneField=a.FeatureServiceDatabaseType=void 0;(function(f){f[f.Standardised=0]="Standardised";f[f.StandardisedNoInterval=1]="StandardisedNoInterval";f[f.SqlServer=2]="SqlServer";f[f.Oracle=3]="Oracle";f[f.Postgres=4]="Postgres";f[f.PGDB=5]="PGDB";f[f.FILEGDB=6]="FILEGDB";f[f.NotEvaluated=7]="NotEvaluated"})(a.FeatureServiceDatabaseType||(a.FeatureServiceDatabaseType={}));a.cloneField=function(f){return new p(m(f))};a.esriFieldToJson=m;(function(f){f[f.InFeatureSet=0]="InFeatureSet";
f[f.NotInFeatureSet=1]="NotInFeatureSet";f[f.Unknown=2]="Unknown"})(a.IdState||(a.IdState={}));a.isString=function(f){return"string"===typeof f||f instanceof String};a.isBoolean=function(f){return"boolean"===typeof f};a.isNumber=function(f){return"number"===typeof f};a.isArray=function(f){return f instanceof Array};a.isDate=e;a.equalityTest=function(f,g){return f===g?!0:e(f)&&e(g)?f.getTime()===g.getTime():!1};a.cloneAttributes=function(f){var g={},d;for(d in f)g[d]=f[d];return g};a.convertSquareUnitsToCode=
function(f){if(void 0===f)return null;if("number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};a.shapeExtent=function(f){if(null===f)return null;switch(f.type){case "polygon":case "multipoint":case "polyline":return f.getExtent();case "point":return new k({xmin:f.x,ymin:f.y,xmax:f.x,ymax:f.y,spatialReference:f.spatialReference});case "extent":return f}return null};
a.convertLinearUnitsToCode=function(f){if(void 0===f)return null;if("number"===typeof f||"number"===typeof f)return f;switch(f.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};a.sameGeomType=function(f,g){return f===g||"point"===f&&"esriGeometryPoint"===g||"polyline"===f&&"esriGeometryPolyline"===g||"polygon"===f&&"esriGeometryPolygon"===g||"extent"===f&&"esriGeometryEnvelope"===g||"multipoint"===
f&&"esriGeometryMultipoint"===g||"point"===g&&"esriGeometryPoint"===f||"polyline"===g&&"esriGeometryPolyline"===f||"polygon"===g&&"esriGeometryPolygon"===f||"extent"===g&&"esriGeometryEnvelope"===f||"multipoint"===g&&"esriGeometryMultipoint"===f?!0:!1};a.defaultMaxRecords=1E3;a.errback=function(f){return function(g){f.reject(g)}};a.callback=function(f,g){return function(){try{f.apply(null,arguments)}catch(d){g.reject(d)}}};a.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",
multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};a.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",
esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};a.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID",
"global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",
esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};a.toEsriGeometryType=function(f){switch(f){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};a.reduceArrayWithPromises=function(f,g){return l.create(function(d,q){var t=l.resolve(!0);f.reduce(function(w,x,z,A){return w.then(function(B){try{return g(B,
x,z,A)}catch(b){return l.reject(b)}},function(B){return l.reject(B)})},t).then(d,q)})};a.extractServiceUrl=function(f){if(void 0===f)return"";f=f.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");f=f.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return f=f.split("?")[0]};a.stableStringify=function(f,g){g||(g={});"function"===typeof g&&(g={cmp:g});var d="boolean"===typeof g.cycles?g.cycles:!1,q=g.cmp&&function(w){return function(x){return function(z,A){return w({key:z,value:x[z]},{key:A,value:x[A]})}}}(g.cmp),
t=[];return function z(x){x&&x.toJson&&"function"===typeof x.toJson&&(x=x.toJson());if(void 0!==x){if("number"===typeof x)return isFinite(x)?""+x:"null";if("object"!==typeof x)return JSON.stringify(x);var A;if(Array.isArray(x)){var B="[";for(A=0;A<x.length;A++)A&&(B+=","),B+=z(x[A])||"null";return B+"]"}if(null===x)return"null";if(-1!==t.indexOf(x)){if(d)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var b=t.push(x)-1,h=Object.keys(x).sort(q&&q(x));
B="";for(A=0;A<h.length;A++){var c=h[A],v=z(x[c]);v&&(B&&(B+=","),B+=JSON.stringify(c)+":"+v)}t.splice(b,1);return"{"+B+"}"}}(f)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(r,n,a,l,k,p,m){r=r(null,{declaredClass:"esri.layers.Field",constructor:function(e){if(e&&n.isObject(e)&&(this.name=e.name,this.type=e.type,this.alias=e.alias,this.length=e.length,this.editable=e.editable,this.nullable=
e.nullable,this.defaultValue=e.defaultValue,this.description=e.description?JSON.parse(e.description):null,this.isViewOverride=!!e.isViewOverride,(e=e.domain)&&n.isObject(e)))switch(e.type){case "range":this.domain=new p(e);break;case "codedValue":this.domain=new m(e)}},toJson:function(){return k.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):
null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});n.setObject("layers.Field",r,l);return r})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(r,n,a,l,k,p){r=r([p],{declaredClass:"esri.layers.RangeDomain",constructor:function(m){m&&n.isObject(m)&&(this.minValue=m.range[0],this.maxValue=m.range[1])},toJson:function(){var m=this.inherited(arguments);
m.range=[this.minValue,this.maxValue];return k.fixJson(m)}});n.setObject("layers.RangeDomain",r,l);return r})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(r,n,a,l,k){r=r(null,{declaredClass:"esri.layers.Domain",constructor:function(p){p&&n.isObject(p)&&(this.name=p.name,this.type=p.type)},toJson:function(){return k.fixJson({name:this.name,type:this.type})}});n.setObject("layers.Domain",r,l);return r})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(r,n,a,l,k,p,m){r=r([m],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(e){e&&n.isObject(e)&&(this.codedValues=e.codedValues)},getName:function(e){var f;a.some(this.codedValues,function(g){g.code==e&&(f=g.name);return!!f});return f},toJson:function(){var e=this.inherited(arguments);e.codedValues=n.clone(this.codedValues);return p.fixJson(e)}});n.setObject("layers.CodedValueDomain",r,k);return r})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports",
"dojo/has"],function(r,n,a){var l={info:0,warn:1,error:2};r=function(){function k(p){void 0===p&&(p={});this.module=p.module||"";this.writer=p.writer||null;this.level=p.level||null;null!=p.enabled&&(this.enabled=!!p.enabled);k._loggers[this.module]=this;p=this.module.lastIndexOf(".");-1!==p&&(this.parent=k.getLogger(this.module.slice(0,p)))}k.prototype.log=function(p){for(var m=[],e=1;e<arguments.length;e++)m[e-1]=arguments[e];this._isEnabled()&&this._matchLevel(p)&&(e=this._inheritedWriter())&&e.apply(void 0,
[p,this.module].concat(m))};k.prototype.error=function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];this.log.apply(this,["error"].concat(p))};k.prototype.warn=function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];this.log.apply(this,["warn"].concat(p))};k.prototype.info=function(){for(var p=[],m=0;m<arguments.length;m++)p[m]=arguments[m];this.log.apply(this,["info"].concat(p))};k.prototype.getLogger=function(p){return k.getLogger(this.module+"."+p)};k.getLogger=function(p){var m=
k._loggers[p];m||(m=new k({module:p}));return m};k.prototype._parentWithMember=function(p,m){for(var e=this;e&&null==e[p];)e=e.parent;return e?e[p]:m};k.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};k.prototype._consoleWriter=function(p,m){for(var e=[],f=2;f<arguments.length;f++)e[f-2]=arguments[f];console[p].apply(console,["["+m+"]"].concat(e))};k.prototype._matchLevel=function(p){return l[this._parentWithMember("level","error")]<=l[p]};k.prototype._isEnabled=
function(){return this._parentWithMember("enabled",!0)};k._loggers={};return k}();r.getLogger("esri").level="warn";return r})},"esri/layers/vectorTiles/core/screenUtils":function(){define(["require","exports"],function(r,n){function a(k){return k?72*k/n.DPI:0}Object.defineProperty(n,"__esModule",{value:!0});var l=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;n.DPI=96;n.pt2px=function(k){return k?k/72*n.DPI:0};n.px2pt=a;n.toPt=function(k){if("string"===typeof k){if(l.test(k)){var p=k.match(l),m=Number(p[1]);
p=p[3]&&p[3].toLowerCase();k="-"===k.charAt(0);m="px"===p?a(m):m;return k?-m:m}return null}return k}})},"esri/layers/vectorTiles/support/arcadeUtils":function(){define(["require","exports","esri/renderers/arcadeUtils","esri/arcade/Dictionary"],function(r,n,a,l){Object.defineProperty(n,"__esModule",{value:!0});n.createSyntaxTree=function(k){return a.createSyntaxTree(k)};n.createFunction=function(k,p){return a.createFunction(k,p)};n.createExecContext=function(k,p){return a.createExecContext(k,p)};n.executeFunction=
function(k,p){return a.executeFunction(k,p)};n.extractFieldNames=function(k){return a.extractFieldNames(k)};n.getViewInfo=function(k){if(k&&k.viewingMode&&null!=k.scale&&k.spatialReference)return{view:new l({viewingMode:k.viewingMode,scale:k.scale}),sr:k.spatialReference}}})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(r,n,a,l){r.setObject("renderer.arcadeUtils",l,a);return l})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),
function(r,n,a,l,k,p,m){var e={vars:{$feature:"any",$view:"any"}},f=/^\$feature\./i,g={_getSyntaxTree:function(d){return"string"===typeof d?g.createSyntaxTree(d):d},createSyntaxTree:function(d){try{var q=d?p.parseScript(d):null}catch(t){q=null}return q},createFunction:function(d,q){q=q||r.clone(e);d=g._getSyntaxTree(d);try{var t=d?p.compileScript(d,q):null}catch(w){t=null}return t},createExecContext:function(d,q){return{vars:{$feature:d?m.createFromGraphic(d):new m,$view:q&&q.view},spatialReference:q&&
q.sr}},evalSyntaxTree:function(d,q){try{var t=p.executeScript(d,q)}catch(w){t=null}return t},executeFunction:function(d,q){try{var t=d?d(q):null}catch(w){t=null}return t},executeAsyncFunction:function(d,q){try{var t=d?d(q):(new l).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(w){t=(new l).reject(w)}return t},extractFieldNames:function(d){d=g._getSyntaxTree(d);d=p.extractFieldLiterals(d);var q=[];n.forEach(d,function(t){f.test(t)&&(t=t.replace(f,
""),q.push(t))});q.sort();return n.filter(q,function(t,w){return 0===w||q[w-1]!==t})},dependsOnView:function(d){return g.hasVariable(d,"$view")},hasGeometryOperations:function(d){return(d=g._getSyntaxTree(d))?p.scriptUsesGeometryEngine(d):!1},enableGeometryOperations:function(){return p.enableGeometrySupport()},hasVariable:function(d,q){return(d=g._getSyntaxTree(d))?p.referencesMember(d,q):!1},hasFunction:function(d,q){return(d=g._getSyntaxTree(d))?p.referencesFunction(d,q):!1},createFeatureSetFromLayer:function(d,
q){q=q||{};var t=p.featureSetUtils();return t?t.constructFeatureSet(d,q.spatialReference,q.outFields,q.returnGeometry,q.cache):null},createFeatureSetFromLayerUrl:function(d,q){q=q||{};var t=p.featureSetUtils();return t?t.constructFeatureSetFromUrlRaw(d,q.spatialReference,q.outFields,q.returnGeometry,q.cache):null},createFeatureSetCollectionFromMap:function(d,q){var t=p.featureSetUtils();return t?t.createFeatureSetCollectionFromMap(d,d.spatialReference,q&&q.cache):null},createFeatureSetCollectionFromServiceUrl:function(d,
q){q=q||{};var t=p.featureSetUtils();return t?t.createFeatureSetCollectionFromService(d,q.spatialReference,q.cache):null},hasFeatureSetOperations:function(d){return(d=g._getSyntaxTree(d))?p.scriptUsesFeatureSet(d):!1},enableFeatureSetOperations:function(){return p.enableFeatureSetSupport().then(function(){var d=p.featureSetUtils();d&&d.initialiseMetaDataCache()})},enableAsyncOperations:function(){return p.enableAsyncSupport()}};r.setObject("support.expressionUtils",g,k);return g})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils ../moment".split(" "),
function(r,n,a,l,k,p,m,e,f,g){function d(R,O){if(null===C)throw Error("Async Arcade must be enabled for this script");return e("csp-restrictions")||!1===v?function(P){return C.executeScript(R,P)}:a.compileScript(R,O,!0)}function q(R,O){void 0===O&&(O=[]);return p.parseScript(R,O)}function t(R,O){if(!0===O.useAsync||!0===R.isAsync){if(null===C)throw Error("Async Arcade must be enabled for this script");return C.executeScript(R,O)}return l.executeScript(R,O)}function w(R,O){return l.referencesMember(R,
O)}function x(R,O){void 0===O&&(O=[]);void 0===R.usesGeometry&&m.findScriptDependencies(R,O);return!0===R.usesGeometry}function z(){return E?E:E=f.create(function(R,O){r(["../geometry/geometryEngine","./functions/geomsync"],function(P,U){y=!0;U.setGeometryEngine(P);R(!0)},function(P){O(P)})})}function A(){return null!==F?F:F=a.enableAsyncSupport().then(function(){return f.create(function(R,O){r(["./arcadeAsyncRuntime"],function(P){try{C=P;P=0;for(var U=D;P<U.length;P++){var K=U[P];C.extend(K);a.extend(K,
"async")}D=null;R(!0)}catch(V){O(V)}},O)})})}function B(){return C?!0:!1}function b(){return G?G:G=A().then(function(){return f.create(function(R,O){r(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(P,U,K,V,Q){try{J=P,C.extend([U,K,V,Q]),a.extend([U,K,V,Q],"async"),u=!0,R(!0)}catch(W){O(W)}},O)})})}function h(R,O){void 0===O&&(O=[]);void 0===R.usesFeatureSet&&m.findScriptDependencies(R,O);return!0===
R.usesFeatureSet}function c(R,O){if(O)for(var P=0;P<O.length;P++)if(w(R,O[P]))return!0;return!1}Object.defineProperty(n,"__esModule",{value:!0});n.featureSetUtils=n.scriptTouchesGeometry=n.loadScriptDependencies=n.scriptIsAsync=n.scriptUsesFeatureSet=n.enableFeatureSetSupport=n.isGeometryEnabled=n.isAsyncEnabled=n.isFeatureSetSupportEnabled=n.enableAsyncSupport=n.enableGeometrySupport=n.scriptUsesGeometryEngine=n.extractFieldLiterals=n.referencesFunction=n.referencesMember=n.executeScript=n.parseAndExecuteScript=
n.scriptCheck=n.validateScript=n.parseScript=n.extend=n.compileScript=void 0;var v=function(){if(e("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(R){return!1}}(),u=!1,y=!1,C=null,D=[];n.compileScript=function(R,O){return!0===O.useAsync||!0===R.isAsync?d(R,O):e("csp-restrictions")?function(P){return l.executeScript(R,P)}:a.compileScript(R,O)};n.extend=function(R){l.extend(R);a.extend(R,"sync");null===C?D.push(R):(a.extend(R,"async"),C.extend(R))};
n.parseScript=q;n.validateScript=function(R,O,P){void 0===P&&(P="");return p.validateScript(R,O,P)};n.scriptCheck=function(R,O,P,U){void 0===U&&(U="");return p.scriptCheck(R,O,P,U)};n.parseAndExecuteScript=function(R,O,P){void 0===P&&(P=[]);R=p.parseScript(R,P);return t(R,O)};n.executeScript=t;n.referencesMember=w;n.referencesFunction=function(R,O){return l.referencesFunction(R,O)};n.extractFieldLiterals=function(R,O){void 0===O&&(O=!1);return p.extractFieldLiterals(R,O)};n.scriptUsesGeometryEngine=
x;var E=null;n.enableGeometrySupport=z;var F=null;n.enableAsyncSupport=A;n.isFeatureSetSupportEnabled=function(){return u};n.isAsyncEnabled=B;n.isGeometryEnabled=function(){return y};var G=null;n.enableFeatureSetSupport=b;n.scriptUsesFeatureSet=h;n.scriptIsAsync=function(R,O){void 0===O&&(O=[]);void 0===R.isAsync&&m.findScriptDependencies(R,O);return!0===R.isAsync};n.loadScriptDependencies=function(R,O,P,U){void 0===P&&(P=[]);void 0===U&&(U=!1);return f.create(function(K,V){var Q="string"===typeof R?
q(R):R,W=[];Q&&(!1===y&&(x(Q)||U)&&W.push(z()),!1===B()&&(!0===Q.isAsync||O)&&W.push(A()),!1===u&&(h(Q)||c(Q,P))&&W.push(b()));W?f.all(W).then(function(){K(!0)},V):K(!0)})};n.scriptTouchesGeometry=function(R){if(x(R))return!0;R=m.findFunctionCalls(R);return-1<R.indexOf("geometry")||-1<R.indexOf("feature")?!0:!1};var J=null;n.featureSetUtils=function(){return J};k.MomentLibrary.Moment=g})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B,b,h,c,v,u,y,C){function D(Y,aa,L){try{return L(Y,null,aa)}catch(la){throw la;}}function E(Y){return Y instanceof Error?B.reject(Y):B.reject(Error(Y))}function F(Y,aa){try{switch(aa.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return P(Y,aa);case "VariableDeclaration":for(var L=[],la=0;la<aa.declarations.length;la++)L.push(F(Y,aa.declarations[la]));return L.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return O(Y,
aa);case "FunctionDeclaration":var ua=aa.id.name.toLowerCase(),T={isAsync:Y.isAsync,spatialReference:Y.spatialReference,console:Y.console,lrucache:Y.lrucache,services:Y.services,symbols:Y.symbols,mangleMap:Y.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:Y.depthCounter+1,globalScope:Y.globalScope};if(64<T.depthCounter)throw Error("Exceeded maximum function depth");L="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(la=0;la<aa.params.length;la++){var Ja=aa.params[la].name.toLowerCase(),Ea=Z(Y);T.localScope._SymbolsMap[Ja]=Ea;T.mangleMap[Ja]=Ea;L+="lscope['"+Ea+"']\x3darguments["+la.toString()+"];\n"}!0===Y.isAsync?(L=L+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(O(T,aa.body)+"\n return lastStatement; "),L+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(L+=O(T,aa.body)+"\n return lastStatement; }, runtimeCtx))",L+="\n lastStatement \x3d lc.voidOperation; \n");if(void 0!==
Y.globalScope[ua])var ia="gscope['"+ua+"']\x3d"+L;else void 0!==Y.globalScope._SymbolsMap[ua]?ia="gscope['"+Y.globalScope._SymbolsMap[ua]+"']\x3d"+L:(Ea=Z(Y),Y.globalScope._SymbolsMap[ua]=Ea,Y.mangleMap[ua]=Ea,ia="gscope['"+Ea+"']\x3d"+L);return ia;case "ReturnStatement":var Fa=null===aa.argument?"return lc.voidOperation":"return "+F(Y,aa.argument);return Fa;case "IfStatement":if("AssignmentExpression"===aa.test.type||"UpdateExpression"===aa.test.type)throw Error(g.nodeErrorMessage(aa.test,"RUNTIME",
"CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var Ka=F(Y,aa.test),pa=ca(Y),ya="var "+pa+" \x3d "+Ka+";\n if ("+pa+" \x3d\x3d\x3d true) {\n"+R(Y,aa.consequent)+"\n }\n";ya=null!==aa.alternate?ya+("else if ("+pa+"\x3d\x3d\x3dfalse)   { \n"+R(Y,aa.alternate)+"}\n"):ya+("else if ("+pa+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return ya+="else { lang.error({type: '"+aa.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var Ba="AssignmentExpression"===
aa.expression.type?"lastStatement \x3d lc.voidOperation; "+F(Y,aa.expression)+"; \n ":"lastStatement \x3d "+F(Y,aa.expression)+"; ";return Ba;case "AssignmentExpression":return J(Y,aa);case "UpdateExpression":return G(Y,aa);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var Aa=[];ua=ia=0;for(la=aa.quasis;ua<la.length;ua++){var ta=la[ua];Aa.push(ta.value?JSON.stringify(ta.value.cooked):JSON.stringify(""));!1===ta.tail&&(Aa.push(aa.expressions[ia]?
"lang.castString(lang.aCheck("+F(Y,aa.expressions[ia])+", 'TemplateLiteral'))":""),ia++)}L="(["+Aa.join(",")+"]).join('')"}catch(Za){throw Za;}return L;case "TemplateElement":return JSON.stringify(aa.value?aa.value.cooked:"");case "ForStatement":L="lastStatement \x3d lc.voidOperation; \n";null!==aa.init&&(L+=F(Y,aa.init)+"; ");var za=ca(Y),wa=ca(Y);L+="var "+za+" \x3d true; \n do { ";null!==aa.update&&(L+=" if ("+za+"\x3d\x3d\x3dfalse) {\n "+F(Y,aa.update)+"  \n}\n "+za+"\x3dfalse; \n");null!==aa.test&&
(L+="var "+wa+" \x3d "+F(Y,aa.test)+"; ",L+="if ("+wa+"\x3d\x3d\x3dfalse) { break; } else if ("+wa+"!\x3d\x3dtrue) { lang.error({type: '"+aa.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");L+=F(Y,aa.body);null!==aa.update&&(L+="\n "+F(Y,aa.update));return L+("\n"+za+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Ia=ca(Y),Ha=ca(Y),La=ca(Y),va="var "+Ia+" \x3d "+F(Y,aa.right)+";\n";"VariableDeclaration"===aa.left.type&&(va+=F(Y,aa.left));
var Ma="VariableDeclaration"===aa.left.type?aa.left.declarations[0].id.name:aa.left.name;Ma=Ma.toLowerCase();L="";null!==Y.localScope&&(void 0!==Y.localScope[Ma]?L="lscope['"+Ma+"']":void 0!==Y.localScope._SymbolsMap[Ma]&&(L="lscope['"+Y.localScope._SymbolsMap[Ma]+"']"));""===L&&(void 0!==Y.globalScope[Ma]?L="gscope['"+Ma+"']":void 0!==Y.globalScope._SymbolsMap[Ma]&&(L="gscope['"+Y.globalScope._SymbolsMap[Ma]+"']"));va=va+("if ("+Ia+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Ia+") || lc.isString("+Ia+")) {var ")+(Ha+"\x3d"+Ia+".length; \nfor(var ")+(La+"\x3d0; "+La+"\x3c"+Ha+"; "+La+"++) {\n");va+=L+"\x3d"+La+";\n";va+=F(Y,aa.body);va+="\n}\n";va+=" lastStatement \x3d lc.voidOperation; \n";va+=" \n}\n";va+="else if (lc.isImmutableArray("+Ia+")) {";va=va+("var "+Ha+"\x3d"+Ia+".length(); \nfor(var ")+(La+"\x3d0; "+La+"\x3c"+Ha+"; "+La+"++) {\n");va+=L+"\x3d"+La+";\n";va+=F(Y,aa.body);va+="\n}\n";va+=" lastStatement \x3d lc.voidOperation; \n";va+=" \n}\n";va+="else if (( "+
Ia+" instanceof lang.Dictionary) || ( "+Ia+" instanceof lang.Feature)) {";va=va+("var "+Ha+"\x3d"+Ia+".keys(); \nfor(var ")+(La+"\x3d0; "+La+"\x3c"+Ha+".length; "+La+"++) {\n");va+=L+"\x3d"+Ha+"["+La+"];\n";va+=F(Y,aa.body);va+="\n}\n";va+=" lastStatement \x3d lc.voidOperation; \n";va+=" \n}\n";Y.isAsync&&(va+="else if (lc.isFeatureSet("+Ia+")) {",va=va+("var "+Ha+"\x3d"+Ia+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(La+"\x3dlang. graphicToFeature( yield "+Ha+".next(),"+Ia+"); "+La+"!\x3dnull; "+
La+"\x3dlang. graphicToFeature( yield "+Ha+".next(),"+Ia+")) {\n")+(L+"\x3d"+La+";\n"),va+=F(Y,aa.body),va+="\n}\n",va+=" lastStatement \x3d lc.voidOperation; \n",va+=" \n}\n");return va+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return K(Y,aa);case "MemberExpression":try{L=void 0;L=!0===aa.computed?F(Y,aa.property):"'"+aa.property.name+"'";var Ta="lang.member("+F(Y,aa.object)+","+L+")"}catch(Za){throw Za;}return Ta;case "Literal":return null===aa.value||void 0===aa.value?
"null":JSON.stringify(aa.value);case "ThisExpression":throw Error(g.nodeErrorMessage(aa,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==aa.callee.type)throw Error(g.nodeErrorMessage(aa,"RUNTIME","ONLYNODESSUPPORTED"));var Va=aa.callee.name.toLowerCase();L="";null!==Y.localScope&&(void 0!==Y.localScope[Va]?L="lscope['"+Va+"']":void 0!==Y.localScope._SymbolsMap[Va]&&(L="lscope['"+Y.localScope._SymbolsMap[Va]+"']"));""===L&&(void 0!==Y.globalScope[Va]?L="gscope['"+Va+"']":void 0!==
Y.globalScope._SymbolsMap[Va]&&(L="gscope['"+Y.globalScope._SymbolsMap[Va]+"']"));if(""!==L){la="[";for(ta=0;ta<aa.arguments.length;ta++)0<ta&&(la+=", "),la+=F(Y,aa.arguments[ta]);la+="]";Aa=Y.isAsync?"(yield lang.callfunc("+L+","+la+",runtimeCtx) )":"lang.callfunc("+L+","+la+",runtimeCtx)"}else throw Error(g.nodeErrorMessage(aa,"RUNTIME","NOTFOUND"));}catch(Za){throw Za;}return Aa;case "UnaryExpression":try{var lb="lang.unary("+F(Y,aa.argument)+",'"+aa.operator+"')"}catch(Za){throw Za;}return lb;
case "BinaryExpression":try{var Cb="lang.binary("+F(Y,aa.left)+","+F(Y,aa.right)+",'"+aa.operator+"')"}catch(Za){throw Za;}return Cb;case "LogicalExpression":try{if("AssignmentExpression"===aa.left.type||"UpdateExpression"===aa.left.type)throw Error(g.nodeErrorMessage(aa.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===aa.right.type||"UpdateExpression"===aa.right.type)throw Error(g.nodeErrorMessage(aa.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===
aa.operator||"||"===aa.operator)var vb="(lang.logicalCheck("+F(Y,aa.left)+") "+aa.operator+" lang.logicalCheck("+F(Y,aa.right)+"))";else throw Error(g.nodeErrorMessage(aa,"RUNTIME","ONLYORORAND"));}catch(Za){throw Za;}return vb;case "ConditionalExpression":throw Error(g.nodeErrorMessage(aa,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{L=[];for(la=0;la<aa.elements.length;la++)"Literal"===aa.elements[la].type?L.push(F(Y,aa.elements[la])):L.push("lang.aCheck("+F(Y,aa.elements[la])+",'ArrayExpression')");
var wb="["+L.join(",")+"]"}catch(Za){throw Za;}return wb;case "ObjectExpression":L="lang.dictionary([";for(la=0;la<aa.properties.length;la++){var nb=aa.properties[la],bb="Identifier"===nb.key.type?"'"+nb.key.name+"'":F(Y,nb.key),fb=F(Y,nb.value);0<la&&(L+=",");L+="lang.strCheck("+bb+",'ObjectExpression'),lang.aCheck("+fb+", 'ObjectExpression')"}return L+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(g.nodeErrorMessage(aa,"RUNTIME","NOTSUPPORTED"));default:throw Error(g.nodeErrorMessage(aa,
"RUNTIME","UNREOGNISED"));}}catch(Za){throw Za;}}function G(Y,aa){var L=null,la="";if("MemberExpression"===aa.argument.type)return L=F(Y,aa.argument.object),la=!0===aa.argument.computed?F(Y,aa.argument.property):"'"+aa.argument.property.name+"'","lang.memberupdate("+L+","+la+",'"+aa.operator+"',"+aa.prefix+")";L=aa.argument.name.toLowerCase();if(null!==Y.localScope){if(void 0!==Y.localScope[L])return"lang.update(lscope, '"+L+"','"+aa.operator+"',"+aa.prefix+")";if(void 0!==Y.localScope._SymbolsMap[L])return"lang.update(lscope, '"+
Y.localScope._SymbolsMap[L]+"','"+aa.operator+"',"+aa.prefix+")"}if(void 0!==Y.globalScope[L])return"lang.update(gscope, '"+L+"','"+aa.operator+"',"+aa.prefix+")";if(void 0!==Y.globalScope._SymbolsMap[L])return"lang.update(gscope, '"+Y.globalScope._SymbolsMap[L]+"','"+aa.operator+"',"+aa.prefix+")";throw Error("Variable not recognised");}function J(Y,aa){var L=F(Y,aa.right),la=null,ua="";if("MemberExpression"===aa.left.type)return la=F(Y,aa.left.object),ua=!0===aa.left.computed?F(Y,aa.left.property):
"'"+aa.left.property.name+"'","lang.assignmember("+la+","+ua+",'"+aa.operator+"',"+L+")";la=aa.left.name.toLowerCase();if(null!==Y.localScope){if(void 0!==Y.localScope[la])return"lscope['"+la+"']\x3dlang.assign("+L+",'"+aa.operator+"', lscope['"+la+"'])";if(void 0!==Y.localScope._SymbolsMap[la])return"lscope['"+Y.localScope._SymbolsMap[la]+"']\x3dlang.assign("+L+",'"+aa.operator+"', lscope['"+Y.localScope._SymbolsMap[la]+"'])"}if(void 0!==Y.globalScope[la])return"gscope['"+la+"']\x3dlang.assign("+
L+",'"+aa.operator+"', gscope['"+la+"'])";if(void 0!==Y.globalScope._SymbolsMap[la])return"gscope['"+Y.globalScope._SymbolsMap[la]+"']\x3dlang.assign("+L+",'"+aa.operator+"', gscope['"+Y.globalScope._SymbolsMap[la]+"'])";throw Error("Variable not recognised");}function R(Y,aa){return"BlockStatement"===aa.type?F(Y,aa):"ReturnStatement"===aa.type||"BreakStatement"===aa.type||"ContinueStatement"===aa.type?F(Y,aa)+"; ":"UpdateExpression"===aa.type?"lastStatement \x3d "+F(Y,aa)+"; ":"ExpressionStatement"===
aa.type?F(Y,aa):"ObjectExpression"===aa.type?"lastStatement \x3d "+F(Y,aa)+"; ":F(Y,aa)+"; "}function O(Y,aa){for(var L="",la=0;la<aa.body.length;la++)L="ReturnStatement"===aa.body[la].type?L+(F(Y,aa.body[la])+"; \n"):"BreakStatement"===aa.body[la].type?L+(F(Y,aa.body[la])+"; \n"):"ContinueStatement"===aa.body[la].type?L+(F(Y,aa.body[la])+"; \n"):"UpdateExpression"===aa.body[la].type?L+("lastStatement \x3d "+F(Y,aa.body[la])+"; \n"):"ObjectExpression"===aa.body[la].type?L+("lastStatement \x3d "+F(Y,
aa.body[la])+"; \n"):L+(F(Y,aa.body[la])+" \n");return L}function P(Y,aa){var L=null===aa.init?null:F(Y,aa.init);L===f.voidOperation&&(L=null);aa=aa.id.name.toLowerCase();if(null!==Y.localScope){if(void 0!==Y.localScope[aa])return"lscope['"+aa+"']\x3d"+L+"; ";if(void 0!==Y.localScope._SymbolsMap[aa])return"lscope['"+Y.localScope._SymbolsMap[aa]+"']\x3d"+L+"; ";var la=Z(Y);Y.localScope._SymbolsMap[aa]=la;Y.mangleMap[aa]=la;return"lscope['"+la+"']\x3d"+L+"; "}if(void 0!==Y.globalScope[aa])return"gscope['"+
aa+"']\x3d"+L+"; ";if(void 0!==Y.globalScope._SymbolsMap[aa])return"gscope['"+Y.globalScope._SymbolsMap[aa]+"']\x3d"+L+"; ";la=Z(Y);Y.globalScope._SymbolsMap[aa]=la;Y.mangleMap[aa]=la;return"gscope['"+la+"']\x3d"+L+"; "}function U(Y,aa,L){aa=aa.toLowerCase();switch(aa){case "hasz":return Y=Y.hasZ,void 0===Y?!1:Y;case "hasm":return Y=Y.hasM,void 0===Y?!1:Y;case "spatialreference":return aa=Y.spatialReference._arcadeCacheId,void 0===aa&&(L=!0,Object.freeze&&Object.isFrozen(Y.spatialReference)&&(L=!1),
L&&(ra++,aa=Y.spatialReference._arcadeCacheId=ra)),Y=new k({wkt:Y.spatialReference.wkt,wkid:Y.spatialReference.wkid}),void 0!==aa&&(Y._arcadeCacheId="SPREF"+aa.toString()),Y}switch(Y.type){case "extent":switch(aa){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return Y=Y[aa],void 0!==Y?Y:null;case "type":return"Extent"}break;case "polygon":switch(aa){case "rings":return aa=Y.getCacheValue("_arcadeCacheId"),void 0===aa&&(ra++,aa=ra,Y.setCacheValue("_arcadeCacheId",
aa)),Y=new m(Y.rings,Y.spatialReference,!0===Y.hasZ,!0===Y.hasM,aa);case "type":return"Polygon"}break;case "point":switch(aa){case "x":case "y":case "z":case "m":return void 0!==Y[aa]?Y[aa]:null;case "type":return"Point"}break;case "polyline":switch(aa){case "paths":return aa=Y.getCacheValue("_arcadeCacheId"),void 0===aa&&(ra++,aa=ra,Y.setCacheValue("_arcadeCacheId",aa)),Y=new m(Y.paths,Y.spatialReference,!0===Y.hasZ,!0===Y.hasM,aa);case "type":return"Polyline"}break;case "multipoint":switch(aa){case "points":return aa=
Y.getCacheValue("_arcadeCacheId"),void 0===aa&&(ra++,aa=ra,Y.setCacheValue("_arcadeCacheId",aa)),Y=new e(Y.points,Y.spatialReference,!0===Y.hasZ,!0===Y.hasM,aa,1);case "type":return"Multipoint"}}throw Error(g.nodeErrorMessage(L,"RUNTIME","PROPERTYNOTFOUND"));}function K(Y,aa){try{var L=aa.name.toLowerCase();if(null!==Y.localScope){if(void 0!==Y.localScope[L])return"lscope['"+L+"']";if(void 0!==Y.localScope._SymbolsMap[L])return"lscope['"+Y.localScope._SymbolsMap[L]+"']"}if(void 0!==Y.globalScope[L])return"gscope['"+
L+"']";if(void 0!==Y.globalScope._SymbolsMap[L])return"gscope['"+Y.globalScope._SymbolsMap[L]+"']";throw Error(g.nodeErrorMessage(aa,"RUNTIME","VARIABLENOTFOUND"));}catch(la){throw la;}}function V(Y){return null===Y?"":f.isArray(Y)||f.isImmutableArray(Y)?"Array":f.isDate(Y)?"Date":f.isString(Y)?"String":f.isBoolean(Y)?"Boolean":f.isNumber(Y)?"Number":Y instanceof l?"Attachment":Y instanceof a?"Portal":Y instanceof k?"Dictionary":Y instanceof p?"Feature":Y instanceof v?"Point":Y instanceof u?"Polygon":
Y instanceof y?"Polyline":Y instanceof c?"Multipoint":Y instanceof b?"Extent":f.isFunctionParameter(Y)?"Function":f.isFeatureSet(Y)?"FeatureSet":f.isFeatureSetCollection(Y)?"FeatureSetCollection":Y===f.voidOperation?"":"number"===typeof Y&&isNaN(Y)?"Number":"Unrecognised Type"}function Q(Y,aa,L,la){try{if(f.equalityTest(aa[L],la))return aa[L+1];var ua=aa.length-L;return 1===ua?aa[L]:2===ua?null:3===ua?aa[L+2]:Q(Y,aa,L+2,la)}catch(T){throw T;}}function W(Y,aa,L,la){try{if(!0===la)return aa[L+1];if(3===
aa.length-L)return aa[L+2];var ua=aa[L+2];if(!1===f.isBoolean(ua))throw Error("WHEN needs boolean test conditions");return W(Y,aa,L+2,ua)}catch(T){throw T;}}function N(Y,aa){var L=Y.length,la=Math.floor(L/2);if(0===L)return[];if(1===L)return[Y[0]];var ua=N(Y.slice(0,la),aa);Y=N(Y.slice(la,L),aa);for(L=[];0<ua.length||0<Y.length;)0<ua.length&&0<Y.length?(la=aa(ua[0],Y[0]),isNaN(la)&&(la=0),0>=la?(L.push(ua[0]),ua=ua.slice(1)):(L.push(Y[0]),Y=Y.slice(1))):0<ua.length?(L.push(ua[0]),ua=ua.slice(1)):
0<Y.length&&(L.push(Y[0]),Y=Y.slice(1));return L}function I(Y,aa){try{var L=Y.length,la=Math.floor(L/2);if(0===L)return B.resolve([]);if(1===L)return B.resolve([Y[0]]);var ua=[I(Y.slice(0,la),aa),I(Y.slice(la,L),aa)];return B.all(ua).then(function(T){return S(T[0],T[1],aa,[])})}catch(T){return B.reject(T)}}function S(Y,aa,L,la){return B.create(function(ua,T){0<Y.length||0<aa.length?0<Y.length&&0<aa.length?L(Y[0],aa[0]).then(function(Ja){try{isNaN(Ja)&&(Ja=1),0>=Ja?(la.push(Y[0]),Y=Y.slice(1)):(la.push(aa[0]),
aa=aa.slice(1)),S(Y,aa,L,la).then(function(Ea){ua(Ea)},T)}catch(Ea){T(Ea)}},T):0<Y.length?(la.push(Y[0]),Y=Y.slice(1),S(Y,aa,L,la).then(function(Ja){ua(Ja)},T)):0<aa.length&&(la.push(aa[0]),aa=aa.slice(1),S(Y,aa,L,la).then(function(Ja){ua(Ja)},T)):ua(la)})}function Z(Y){Y.symbols.symbolCounter++;return"_T"+Y.symbols.symbolCounter.toString()}function ca(Y){Y.symbols.symbolCounter++;return"_Tvar"+Y.symbols.symbolCounter.toString()}function fa(Y,aa,L){var la={};Y||(Y={});L||(L={});la._SymbolsMap={};
la.textformatting=1;la.infinity=1;la.pi=1;for(var ua in aa)la[ua]=1;for(ua in L)la[ua]=1;for(ua in Y)la[ua]=1;return la}function ha(Y,aa){for(var L={mode:aa,compiled:!0,functions:{},signatures:[],failDefferred:E,standardFunction:D,standardFunctionAsync:D,evaluateIdentifier:na},la=0;la<Y.length;la++)Y[la].registerFunctions(L);if("sync"===aa){for(var ua in L.functions)sa[ua]=new f.NativeFunction(L.functions[ua]),ja.prototype[ua]=sa[ua];for(la=0;la<L.signatures.length;la++)g.addFunctionDeclaration(L.signatures[la],
"sync")}else{for(ua in L.functions)ba[ua]=new f.NativeFunction(L.functions[ua]),oa.prototype[ua]=ba[ua];for(la=0;la<L.signatures.length;la++)g.addFunctionDeclaration(L.signatures[la],"async")}}function na(Y,aa){aa=aa.name;if("_SymbolsMap"===aa)throw"Illegal";if(0<Y.localStack.length){if("_t"!==aa.substr(0,2).toLowerCase()&&void 0!==Y.localStack[Y.localStack.length-1][aa])return Y.localStack[Y.localStack.length-1][aa];var L=Y.mangleMap[aa];if(void 0!==L&&void 0!==Y.localStack[Y.localStack.length-1][L])return Y.localStack[Y.localStack.length-
1][L]}if("_t"!==aa.substr(0,2).toLowerCase()&&void 0!==Y.globalScope[aa]||1===Y.globalScope._SymbolsMap[aa])return Y.globalScope[aa];aa=Y.mangleMap[aa];if(void 0!==aa)return Y.globalScope[aa]}function ma(Y){}Object.defineProperty(n,"__esModule",{value:!0});n.enableAsyncSupport=n.compileScript=n.referencesFunction=n.referencesMember=n.validateScript=n.extractFieldLiterals=n.executeScript=n.extend=n.functionHelper=void 0;var ra=0,sa={};d.registerFunctions(sa,D);q.registerFunctions(sa,D);A.registerFunctions(sa,
D);x.registerFunctions(sa,D);t.registerFunctions(sa,D);z.registerFunctions(sa,D);sa["typeof"]=function(Y,aa){return D(Y,aa,function(L,la,ua){f.pcCheck(ua,1,1);L=V(ua[0]);if("Unrecognised Type"===L)throw Error("Unrecognised Type");return L})};sa.iif=function(Y,aa){try{return D(Y,aa,function(L,la,ua){f.pcCheck(ua,3,3);if(!1===f.isBoolean(ua[0]))throw Error("IF Function must have a boolean test condition");return ua[0]?ua[1]:ua[2]})}catch(L){throw L;}};sa.decode=function(Y,aa){try{return D(Y,aa,function(L,
la,ua){if(2>ua.length)throw Error("Missing Parameters");if(2===ua.length)return ua[1];if(0===(ua.length-1)%2)throw Error("Must have a default value result.");return Q(Y,ua,1,ua[0])})}catch(L){throw L;}};sa.when=function(Y,aa){try{return D(Y,aa,function(L,la,ua){if(3>ua.length)throw Error("Missing Parameters");if(0===ua.length%2)throw Error("Must have a default value result.");L=ua[0];if(!1===f.isBoolean(L))throw Error("WHEN needs boolean test conditions");return W(Y,ua,0,L)})}catch(L){throw L;}};
sa.top=function(Y,aa){return D(Y,aa,function(L,la,ua){f.pcCheck(ua,2,2);if(f.isArray(ua[0]))return f.toNumber(ua[1])>=ua[0].length?ua[0].slice(0):ua[0].slice(0,f.toNumber(ua[1]));if(f.isImmutableArray(ua[0]))return f.toNumber(ua[1])>=ua[0].length()?ua[0].slice(0):ua[0].slice(0,f.toNumber(ua[1]));throw Error("Top cannot accept this parameter type");})};sa.first=function(Y,aa){return D(Y,aa,function(L,la,ua){f.pcCheck(ua,1,1);return f.isArray(ua[0])?0===ua[0].length?null:ua[0][0]:f.isImmutableArray(ua[0])?
0===ua[0].length()?null:ua[0].get(0):null})};sa.sort=function(Y,aa){return D(Y,aa,function(L,la,ua){f.pcCheck(ua,1,2);la=ua[0];f.isImmutableArray(la)&&(la=la.toArray());if(!1===f.isArray(la))throw Error("Illegal Argument");if(1<ua.length){if(!1===f.isFunctionParameter(ua[1]))throw Error("Illegal Argument");var T=function(Ka,pa){return Ca.callfunc(ua[1],[Ka,pa],L)};return Y.isAsync?I(la,T):la=N(la,function(Ka,pa){return T(Ka,pa)})}if(0===la.length)return[];for(var Ja={},Ea=0;Ea<la.length;Ea++){var ia=
V(la[Ea]);""!==ia&&(Ja[ia]=!0)}if(!0===Ja.Array||!0===Ja.Dictionary||!0===Ja.Feature||!0===Ja.Point||!0===Ja.Polygon||!0===Ja.Polyline||!0===Ja.Multipoint||!0===Ja.Extent||!0===Ja.Function)return la.slice(0);Ea=0;ia="";for(var Fa in Ja)Ea++,ia=Fa;return la=1<Ea||"String"===ia?N(la,function(Ka,pa){if(null===Ka||void 0===Ka||Ka===f.voidOperation)return null===pa||void 0===pa||pa===f.voidOperation?0:1;if(null===pa||void 0===pa||pa===f.voidOperation)return-1;Ka=f.toString(Ka);pa=f.toString(pa);return Ka<
pa?-1:Ka===pa?0:1}):"Number"===ia?N(la,function(Ka,pa){return Ka-pa}):"Boolean"===ia?N(la,function(Ka,pa){return Ka===pa?0:pa?-1:1}):"Date"===ia?N(la,function(Ka,pa){return pa-Ka}):la.slice(0)})};var ba={},ea;for(ea in sa)ba[ea]=new f.NativeFunction(sa[ea]);w.registerFunctions(sa,D);for(ea in sa)sa[ea]=new f.NativeFunction(sa[ea]);var ja=function(){};ja.prototype=sa;var oa=function(){};oa.prototype=ba;n.functionHelper={fixSpatialReference:f.fixSpatialReference,parseArguments:function(Y,aa){for(var L=
[],la=0;la<aa.arguments.length;la++)L.push(F(Y,aa.arguments[la]));return L},standardFunction:D};n.extend=ha;n.executeScript=function(Y,aa){return Y(aa)};n.extractFieldLiterals=function(Y,aa){void 0===aa&&(aa=!1);return g.findFieldLiterals(Y)};n.validateScript=function(Y,aa){return g.validateScript(Y,aa,"sync")};n.referencesMember=function(Y,aa){return g.referencesMember(Y,aa)};n.referencesFunction=function(Y,aa){return g.referencesFunction(Y,aa)};var ka=0,Ca={error:function(Y,aa,L){throw Error(g.nodeErrorMessage(Y,
aa,L));},__awaiter:function(Y,aa,L,la){return B.create(function(ua,T){function Ja(Fa){try{ia(la.next(Fa))}catch(Ka){T(Ka)}}function Ea(Fa){try{ia(la["throw"](Fa))}catch(Ka){T(Ka)}}function ia(Fa){Fa.done?ua(Fa.value):Fa.value&&Fa.value.then?Fa.value.then(Ja,Ea):(ka++,0===ka%100?setTimeout(function(){ka=0;Ja(Fa.value)},0):Ja(Fa.value))}ia((la=la.apply(Y,aa||[])).next())})},functionDepthchecker:function(Y,aa){return function(){aa.depthCounter++;aa.localStack.push([]);if(64<aa.depthCounter)throw Error("Exceeded maximum function depth");
var L=Y.apply(this,arguments);if(B.isPromiseLike(L))return L.then(function(la){aa.depthCounter--;--aa.localStack.length;return la});aa.depthCounter--;--aa.localStack.length;return L}},castString:function(Y){return f.toString(Y)},aCheck:function(Y,aa){if(f.isFunctionParameter(Y))throw Error(g.nodeErrorMessage({type:aa},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return Y===f.voidOperation?null:Y},Dictionary:k,Feature:p,dictionary:function(Y){for(var aa={},L=0;L<Y.length;L+=2){if(f.isFunctionParameter(Y[L+
1]))throw Error("Illegal Argument");if(!1===f.isString(Y[L]))throw Error("Illegal Argument");aa[Y[L].toString()]=Y[L+1]===f.voidOperation?null:Y[L+1]}Y=new k(aa);Y.immutable=!1;return Y},strCheck:function(Y){if(!1===f.isString(Y))throw Error("Illegal Argument");return Y},unary:function(Y,aa){if(f.isBoolean(Y)){if("!"===aa)return!Y;if("-"===aa)return-1*f.toNumber(Y);if("+"===aa)return 1*f.toNumber(Y);if("~"===aa)return~f.toNumber(Y);throw Error(g.nodeErrorMessage({type:"UnaryExpression",operator:aa,
prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===aa)return-1*f.toNumber(Y);if("+"===aa)return 1*f.toNumber(Y);if("~"===aa)return~f.toNumber(Y);throw Error(g.nodeErrorMessage({type:"UnaryExpression",operator:aa,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(Y){if(!1===f.isBoolean(Y))throw Error(g.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return Y},logical:function(Y,
aa,L){if(f.isBoolean(Y)&&f.isBoolean(aa))switch(L){case "||":return Y||aa;case "\x26\x26":return Y&&aa}throw Error(g.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(Y,aa,L){switch(L){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return f.binaryOperator(f.toNumber(Y),f.toNumber(aa),L);case "\x3d\x3d":return f.equalityTest(Y,aa);case "\x3d":return f.equalityTest(Y,aa);case "!\x3d":return!f.equalityTest(Y,
aa);case "\x3c":return f.greaterThanLessThan(Y,aa,L);case "\x3e":return f.greaterThanLessThan(Y,aa,L);case "\x3c\x3d":return f.greaterThanLessThan(Y,aa,L);case "\x3e\x3d":return f.greaterThanLessThan(Y,aa,L);case "+":return f.isString(Y)||f.isString(aa)?f.toString(Y)+f.toString(aa):f.toNumber(Y)+f.toNumber(aa);case "-":return f.toNumber(Y)-f.toNumber(aa);case "*":return f.toNumber(Y)*f.toNumber(aa);case "/":return f.toNumber(Y)/f.toNumber(aa);case "%":return f.toNumber(Y)%f.toNumber(aa);default:throw Error(g.nodeErrorMessage({type:"BinaryExpression",
operator:L,left:Y,right:aa},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(Y,aa,L){switch(aa){case "\x3d":return Y===f.voidOperation?null:Y;case "/\x3d":return f.toNumber(L)/f.toNumber(Y);case "*\x3d":return f.toNumber(L)*f.toNumber(Y);case "-\x3d":return f.toNumber(L)-f.toNumber(Y);case "+\x3d":return f.isString(L)||f.isString(Y)?f.toString(L)+f.toString(Y):f.toNumber(L)+f.toNumber(Y);case "%\x3d":return f.toNumber(L)%f.toNumber(Y);default:throw Error(g.nodeErrorMessage({type:"AssignmentExpression",
operator:aa,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(Y,aa,L,la){var ua=f.toNumber(Y[aa]);Y[aa]="++"===L?ua+1:ua-1;return!1===la?ua:"++"===L?ua+1:ua-1},graphicToFeature:function(Y,aa){return null===Y?null:p.createFromGraphicLikeObject(Y.geometry,Y.attributes,aa)},memberupdate:function(Y,aa,L,la){if(f.isArray(Y))if(f.isNumber(aa)){0>aa&&(aa=Y.length+aa);if(0>aa||aa>=Y.length)throw Error("Assignment outside of array bounds");var ua=f.toNumber(Y[aa]);Y[aa]="++"===L?
ua+1:ua-1}else throw Error("Invalid Parameter");else if(Y instanceof k){if(!1===f.isString(aa))throw Error("Dictionary accessor must be a string");if(!0===Y.hasField(aa))ua=f.toNumber(Y.field(aa)),Y.setField(aa,"++"===L?ua+1:ua-1);else throw Error("Invalid Parameter");}else if(Y instanceof p){if(!1===f.isString(aa))throw Error("Feature accessor must be a string");if(!0===Y.hasField(aa))ua=f.toNumber(Y.field(aa)),Y.setField(aa,"++"===L?ua+1:ua-1);else throw Error("Invalid Parameter");}else{if(f.isImmutableArray(Y))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}return!1===la?ua:"++"===L?ua+1:ua-1},assignmember:function(Y,aa,L,la){if(f.isArray(Y))if(f.isNumber(aa)){0>aa&&(aa=Y.length+aa);if(0>aa||aa>Y.length)throw Error("Assignment outside of array bounds");if(aa===Y.length&&"\x3d"!==L)throw Error("Invalid Parameter");Y[aa]=this.assign(la,L,Y[aa])}else throw Error("Invalid Parameter");else if(Y instanceof k){if(!1===f.isString(aa))throw Error("Dictionary accessor must be a string");if(!0===Y.hasField(aa))Y.setField(aa,this.assign(la,
L,Y.field(aa)));else{if("\x3d"!==L)throw Error("Invalid Parameter");Y.setField(aa,this.assign(la,L,null))}}else if(Y instanceof p){if(!1===f.isString(aa))throw Error("Feature accessor must be a string");if(!0===Y.hasField(aa))Y.setField(aa,this.assign(la,L,Y.field(aa)));else{if("\x3d"!==L)throw Error("Invalid Parameter");Y.setField(aa,this.assign(la,L,null))}}else{if(f.isImmutableArray(Y))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(Y,aa){if(null===Y)throw Error(g.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(Y instanceof k||Y instanceof p){if(f.isString(aa))return Y.field(aa);throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(Y instanceof h){if(f.isString(aa))return U(Y,aa,"MemberExpression");throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(f.isArray(Y)){if(f.isNumber(aa)&&isFinite(aa)&&
Math.floor(aa)===aa){0>aa&&(aa=Y.length+aa);if(aa>=Y.length||0>aa)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return Y[aa]}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(f.isString(Y)){if(f.isNumber(aa)&&isFinite(aa)&&Math.floor(aa)===aa){0>aa&&(aa=Y.length+aa);if(aa>=Y.length||0>aa)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,
property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return Y[aa]}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(f.isImmutableArray(Y)&&f.isNumber(aa)&&isFinite(aa)&&Math.floor(aa)===aa){0>aa&&(aa=Y.length()+aa);if(aa>=Y.length()||0>aa)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return Y.get(aa)}throw Error(g.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(Y,aa,L){return Y instanceof f.NativeFunction?Y.fn(L,aa):Y instanceof f.SizzleFunction?Y.fn.apply(this,aa):Y.apply(this,aa)}};n.compileScript=function(Y,aa,L){void 0===aa&&(aa=null);void 0===L&&(L=!1);null===aa&&(aa={vars:{},customfunctions:{}});aa={isAsync:L,globalScope:fa(aa.vars,L?ba:sa,aa.customfunctions),localScope:null,mangleMap:{},console:ma,lrucache:aa.lrucache,services:aa.services,symbols:{symbolCounter:0}};
Y=F(aa,Y.body[0].body);""===Y&&(Y="lc.voidOperation; ");aa={lc:f,lang:Ca,mangles:aa.mangleMap,postProcess:function(la){la instanceof f.ReturnResult&&(la=la.value);la instanceof f.ImplicitResult&&(la=la.value);la===f.voidOperation&&(la=null);if(la===f.breakResult)throw Error("Cannot return BREAK");if(la===f.continueResult)throw Error("Cannot return CONTINUE");if(f.isFunctionParameter(la))throw Error("Cannot return FUNCTION");return la},prepare:function(la,ua){var T=la.spatialReference;if(null===T||
void 0===T)T=new C({wkid:102100});var Ja=la.vars,Ea=la.customfunctions,ia=ua?new oa:new ja;Ja||(Ja={});Ea||(Ea={});var Fa=new k({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});Fa.immutable=!1;ia._SymbolsMap={textformatting:1,infinity:1,pi:1};ia.textformatting=Fa;ia.infinity=Number.POSITIVE_INFINITY;ia.pi=Math.PI;for(var Ka in Ea)ia[Ka]=Ea[Ka],ia._SymbolsMap[Ka]=1;for(Ka in Ja)ia._SymbolsMap[Ka]=1,ia[Ka]=Ja[Ka]&&"esri.Graphic"===Ja[Ka].declaredClass?p.createFromGraphic(Ja[Ka]):
Ja[Ka];return{localStack:[],isAsync:ua,mangleMap:this.mangles,spatialReference:T,globalScope:ia,abortSignal:void 0===la.abortSignal||null===la.abortSignal?{aborted:!1}:la.abortSignal,localScope:null,services:la.services,console:la.console?la.console:ma,lrucache:la.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",L?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
Y+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+Y+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(aa)};n.enableAsyncSupport=function(){return B.create(function(Y,aa){r(["./functions/geomasync"],function(L){ha([L],"async");Y(!0)},
function(L){aa(L)})})}})},"esri/arcade/ArcadePortal":function(){var r=this&&this.__extends||function(){var n=function(a,l){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,p){k.__proto__=p}||function(k,p){for(var m in p)p.hasOwnProperty(m)&&(k[m]=p[m])};return n(a,l)};return function(a,l){function k(){this.constructor=a}n(a,l);a.prototype=null===l?Object.create(l):(k.prototype=l.prototype,new k)}}();define(["require","exports","./Dictionary"],function(n,a,l){return function(k){function p(m){var e=
k.call(this)||this;e.immutable=!1;e.setField("url",m);e.immutable=!0;return e}r(p,k);return p}(l)})},"esri/arcade/Attachment":function(){var r=this&&this.__extends||function(){var n=function(a,l){n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,p){k.__proto__=p}||function(k,p){for(var m in p)p.hasOwnProperty(m)&&(k[m]=p[m])};return n(a,l)};return function(a,l){function k(){this.constructor=a}n(a,l);a.prototype=null===l?Object.create(l):(k.prototype=l.prototype,new k)}}();define(["require",
"exports","./Dictionary"],function(n,a,l){return function(k){function p(m,e,f,g,d){var q=k.call(this)||this;q.attachmentUrl=d;q.immutable=!1;q.setField("id",m);q.setField("name",e);q.setField("contenttype",f);q.setField("size",g);q.immutable=!0;return q}r(p,k);return p}(l)})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(r,n){function a(c,v){return"0"!==c.min&&v.length<Number(c.min)||"*"!==c.max&&v.length>Number(c.max)?-2:1}function l(c,v,u){if(null!==u.localScope&&void 0!==
u.localScope[c.toLowerCase()]){var y=u.localScope[c.toLowerCase()];if("FormulaFunction"===y.type||"any"===y.type)return void 0===y.signature&&(y.signature={min:"0",max:"*"}),a(y.signature,v)}return void 0!==u.globalScope[c.toLowerCase()]&&(y=u.globalScope[c.toLowerCase()],"FormulaFunction"===y.type||"any"===y.type)?(void 0===y.signature&&(y.signature={min:"0",max:"*"}),a(y.signature,v)):-1}function k(c,v){if(c)for(var u=0;u<c.length;u++)p(c[u],v)}function p(c,v){if(c&&!1!==v(c))switch(c.type){case "ArrayExpression":k(c.elements,
v);break;case "AssignmentExpression":case "BinaryExpression":p(c.left,v);p(c.right,v);break;case "BlockStatement":k(c.body,v);break;case "CallExpression":p(c.callee,v);k(c.arguments,v);break;case "ConditionalExpression":p(c.test,v);p(c.alternate,v);p(c.consequent,v);break;case "ExpressionStatement":p(c.expression,v);break;case "ForInStatement":p(c.left,v);p(c.right,v);p(c.body,v);break;case "ForStatement":p(c.init,v);p(c.test,v);p(c.update,v);p(c.body,v);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":p(c.id,
v);k(c.params,v);p(c.body,v);break;case "IfStatement":p(c.test,v);p(c.consequent,v);p(c.alternate,v);break;case "LogicalExpression":p(c.left,v);p(c.right,v);break;case "MemberExpression":p(c.object,v);p(c.property,v);break;case "ObjectExpression":k(c.properties,v);break;case "Program":k(c.body,v);break;case "Property":p(c.key,v);p(c.value,v);break;case "ReturnStatement":p(c.argument,v);break;case "UnaryExpression":p(c.argument,v);break;case "UpdateExpression":p(c.argument,v);break;case "VariableDeclaration":k(c.declarations,
v);break;case "VariableDeclarator":p(c.id,v);p(c.init,v);break;case "TemplateLiteral":k(c.expressions,v),k(c.quasis,v)}}function m(c,v){void 0===v&&(v=!0);var u=t(c,"SYNTAX","UNREOGNISED");try{switch(c.type){case "VariableDeclarator":return null!==c.init&&"FunctionExpression"===c.init.type?t(c,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==c.id.type?t(c,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==c.init?m(c.init,!1):"";case "VariableDeclaration":for(var y=0;y<c.declarations.length;y++)if(u=
m(c.declarations[y],v),""!==u)return u;return"";case "ForInStatement":u=m(c.left,v);if(""!==u)break;if("VariableDeclaration"===c.left.type){if(1<c.left.declarations.length)return t(c,"SYNTAX","ONLY1VAR");if(null!==c.left.declarations[0].init)return t(c,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==c.left.type)return t(c,"SYNTAX","LEFTNOTVAR");u=m(c.right,v);if(""!==u)break;u=m(c.body,v);if(""!==u)break;return"";case "ForStatement":if(null!==c.test&&(u=m(c.test,v),""!==u))break;if(null!==c.init&&
(u=m(c.init,v),""!==u))break;if(null!==c.update&&(u=m(c.update,v),""!==u))break;if(null!==c.body&&(u=m(c.body,v),""!==u))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":u=m(c.test,v);if(""!==u)break;if(null!==c.consequent&&(u=m(c.consequent,!1),""!==u))break;if(null!==c.alternate&&(u=m(c.alternate,!1),""!==u))break;return"";case "BlockStatement":var C=[];for(y=0;y<c.body.length;y++)"EmptyStatement"!==c.body[y].type&&
C.push(c.body[y]);c.body=C;for(y=0;y<c.body.length;y++)if(u=m(c.body[y],v),""!==u)return u;return"";case "FunctionDeclaration":return!1===v?t(c,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==c.id.type?t(c,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):m(c.body,!1);case "ReturnStatement":return null!==c.argument?m(c.argument,v):"";case "UpdateExpression":return"Identifier"!==c.argument.type&&"MemberExpression"!==c.argument.type?t(c,"SYNTAX","ASSIGNMENTTOVARSONLY"):m(c.argument,v);case "AssignmentExpression":if("Identifier"!==
c.left.type&&"MemberExpression"!==c.left.type)return t(c,"SYNTAX","ASSIGNMENTTOVARSONLY");u=m(c.left,v);if(""!==u)break;switch(c.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return t(c,"SYNTAX","OPERATORNOTRECOGNISED")}return m(c.right,!1);case "ExpressionStatement":return m(c.expression,!1);case "Identifier":u="";break;case "MemberExpression":u=m(c.object,v);if(""!==u)break;return!0===c.computed?m(c.property,v):"";case "Literal":return"";case "TemplateElement":return"";
case "CallExpression":if("Identifier"!==c.callee.type)return t(c,"SYNTAX","ONLYNODESSUPPORTED");u="";for(y=0;y<c.arguments.length;y++)if(u=m(c.arguments[y],v),""!==u)return u;return"";case "UnaryExpression":u=m(c.argument,v);break;case "BinaryExpression":u=m(c.left,v);if(""!==u)break;u=m(c.right,v);if(""!==u)break;switch(c.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return t(c,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":u=m(c.left,v);if(""!==u)break;u=m(c.right);if(""!==u)break;switch(c.operator){case "\x26\x26":case "||":break;default:return t(c,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return t(c,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":u="";for(y=0;y<c.elements.length&&(u=m(c.elements[y],v),""===u);y++);break;case "TemplateLiteral":u="";for(y=0;y<c.quasis.length;y++)if(u=m(c.quasis[y],v),
""!==u)return u;for(y=0;y<c.expressions.length&&(u=m(c.expressions[y],v),""===u);y++);break;case "ObjectExpression":u="";for(y=0;y<c.properties.length;y++){u="";if(null!==c.properties[y].key&&("Literal"!==c.properties[y].key.type&&"Identifier"!==c.properties[y].key.type&&(u=t(c,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===c.properties[y].key.type)){C=c.properties[y].key;var D="value"in C?C.value:null;"string"===typeof D||D instanceof String||(u=t(c,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===
u&&(u=m(c.properties[y],v));if(""!==u)break}break;case "Property":if("Literal"!==c.key.type&&"Identifier"!==c.key.type)return t(c,"SYNTAX","ONLYLITERAL");if("Identifier"!==c.key.type&&(u=m(c.key,v),""!==u))break;u=m(c.value,v)}return u}catch(E){throw E;}}function e(c,v){var u=t(c,"SYNTAX","UNREOGNISED"),y=null,C="";try{switch(c.type){case "VariableDeclarator":if(null!==c.init&&"FunctionExpression"===c.init.type)return t(c,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var D=null===c.init?"":e(c.init,v);if(""!==
D)return D;"Identifier"===c.id.type&&(null===v.localScope?v.globalScope[c.id.name.toLowerCase()]={type:"any"}:v.localScope[c.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":y=g(c.id.name.toLowerCase(),c);C=d(c,v);if(""!==C)return C;if(null!==v.localScope)return t(c,"SYNTAX","GLOBALFUNCTIONSONLY");y.isnative=!1;v.globalScope[c.id.name.toLowerCase()]={type:"FormulaFunction",signature:[y]};return"";case "VariableDeclaration":u="";for(var E=0;E<c.declarations.length&&(u=e(c.declarations[E],
v),""===u);E++);break;case "IfStatement":u=e(c.test,v);if(""!==u)break;if("AssignmentExpression"===c.test.type||"UpdateExpression"===c.test.type)return t(c.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==c.consequent&&(u=e(c.consequent,v),""!==u))break;if(null!==c.alternate&&(u=e(c.alternate,v),""!==u))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(E=0;E<c.body.length;E++)if(u=e(c.body[E],v),""!==u)return u;return"";case "ReturnStatement":return null!==c.argument?
e(c.argument,v):"";case "ForInStatement":if("VariableDeclaration"===c.left.type){if(1<c.left.declarations.length)return t(c,"SYNTAX","ONLY1VAR");if(null!==c.left.declarations[0].init)return t(c,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==c.left.type)return t(c,"SYNTAX","LEFTNOTVAR");u=e(c.left,v);if(""!==u)break;u=e(c.right,v);if(""!==u)break;u=e(c.body,v);if(""!==u)break;return"";case "ForStatement":if(null!==c.init&&(u=e(c.init,v),""!==u))break;if(null!==c.test&&(u=e(c.test,v),""!==u))break;
if(null!==c.body&&(u=e(c.body,v),""!==u))break;if(null!==c.update&&(u=e(c.update,v),""!==u))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==c.argument.type&&"MemberExpression"!==c.argument.type)return t(c,"SYNTAX","ASSIGNMENTTOVARSONLY");var F=!1;if("MemberExpression"===c.argument.type)return e(c.argument,v);null!==v.localScope&&void 0!==v.localScope[c.argument.name.toLowerCase()]&&(F=!0);void 0!==v.globalScope[c.argument.name.toLowerCase()]&&
(F=!0);return!1===F?"Identifier "+c.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==c.left.type&&"MemberExpression"!==c.left.type)return t(c,"SYNTAX","ASSIGNMENTTOVARSONLY");var G=e(c.right,v);if(""!==G)return G;F=!1;if("MemberExpression"===c.left.type)return G=e(c.left,v),""!==G?G:"";null!==v.localScope&&void 0!==v.localScope[c.left.name.toLowerCase()]&&(F=!0);void 0!==v.globalScope[c.left.name.toLowerCase()]&&(F=!0);return!1===F?"Identifier "+c.left.name+
" has not been declared.":"";case "ExpressionStatement":return e(c.expression,v);case "Identifier":var J=c.name.toLowerCase();if(null!==v.localScope&&void 0!==v.localScope[J])return"";u=void 0!==v.globalScope[J]?"":t(c,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":u=e(c.object,v);if(""!==u)break;return!0===c.computed?e(c.property,v):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==c.callee.type)return t(c,"SYNTAX","ONLYNODESSUPPORTED");
u="";for(E=0;E<c.arguments.length;E++)if(u=e(c.arguments[E],v),""!==u)return u;var R=l(c.callee.name,c.arguments,v);-1===R&&(u=t(c,"SYNTAX","NOTFOUND"));-2===R&&(u=t(c,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":u=e(c.argument,v);break;case "BinaryExpression":u=e(c.left,v);if(""!==u)break;u=e(c.right,v);if(""!==u)break;return"";case "LogicalExpression":u=e(c.left,v);if(""!==u)break;if("AssignmentExpression"===c.left.type||"UpdateExpression"===c.left.type)return t(c.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
u=e(c.right,v);if(""!==u)break;return"AssignmentExpression"===c.right.type||"UpdateExpression"===c.right.type?t(c.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return t(c,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":u="";for(E=0;E<c.elements.length&&(u=e(c.elements[E],v),""===u);E++);break;case "TemplateLiteral":u="";for(E=0;E<c.quasis.length;E++)if(u=e(c.quasis[E],v),""!==u)return u;for(E=0;E<c.expressions.length&&(u=e(c.expressions[E],v),""===u);E++);break;
case "ObjectExpression":u="";for(E=0;E<c.properties.length;E++){u="";if(null!==c.properties[E].key&&("Literal"!==c.properties[E].key.type&&"Identifier"!==c.properties[E].key.type&&(u=t(c,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===c.properties[E].key.type)){var O=c.properties[E].key,P="value"in O?O.value:null;"string"===typeof P||P instanceof String||(u=t(c,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===u&&(u=e(c.properties[E],v));if(""!==u)break}break;case "Property":if("Literal"!==c.key.type&&
"Identifier"!==c.key.type)return t(c,"SYNTAX","ONLYLITERAL");if("Identifier"!==c.key.type&&(u=e(c.key,v),""!==u))break;u=e(c.value,v)}return u}catch(U){throw U;}}function f(c,v){var u=!1,y=v.toLowerCase();p(c,function(C){if(u)return!1;"Identifier"===C.type&&C.name&&C.name.toLowerCase()===y&&(u=!0);return!0});return u}function g(c,v){var u=[];if(void 0!==v.params&&null!==v.params)for(var y=0;y<v.params.length;y++)u.push("any");return{name:c,return:"any",params:u}}function d(c,v){v={globalScope:v.globalScope,
localScope:{}};for(var u=0;u<c.params.length;u++)v.localScope[c.params[u].name.toLowerCase()]={type:"any"};return e(c.body,v)}function q(c,v,u,y){var C={};if(void 0===c||null===c)c={};if(void 0===u||null===u)u={};C.infinity={type:"any"};C.textformatting={type:"any"};C.pi={type:"any"};for(var D in v)"sync"===y&&void 0!==v[D].min?C[D]={type:"FormulaFunction",signature:{min:v[D].min,max:v[D].max}}:"sync"!==y&&void 0!==v[D].fmin&&(C[D]={type:"FormulaFunction",signature:{min:v[D].fmin,max:v[D].fmax}});
for(v=0;v<u.length;v++)D=u[v],C[D.name]={type:"FormulaFunction",signature:D};for(D in c)C[D]=c[D],C[D].type="any";return C}function t(c,v,u){var y="";switch(v){case "SYNTAX":y="Syntax Error: ";break;case "RUNTIME":y="Runtime Error: ";break;default:y="Syntax Error: "}try{switch(c.type){case "IfStatement":switch(u){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":y+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":y+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(u){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":y+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":y+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":y+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(u){case "GLOBALFUNCTIONSONLY":y+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":y+=" Function Definition must have an identifier"}break;case "VariableDeclaration":y+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(u){case "FUNCTIONVARIABLEDECLARATOR":y+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":y+=" Variable Definition must have an identifier"}break;case "Identifier":y+=" Identifier Not Found. ";y+=c.name;break;case "ObjectExpression":switch(u){case "OBJECTPROPERTYMUSTBESTRING":y+=" Property name must be a string"}break;case "ForStatement":switch(u){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":y+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(u){case "ONLY1VAR":y+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":y+=" Can only declare value for use with IN";break;case "LEFTNOVAR":y+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":y+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":y+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(u){case "PROPERTYNOTFOUND":y+="Cannot find member property. ";y+=
!1===c.computed?"Identifier"===c.property.type?c.property.name:"":"";break;case "OUTOFBOUNDS":y+="Out of Bounds. ";y+=!1===c.computed?"Identifier"===c.property.type?c.property.name:"":"";break;case "NOTFOUND":y+="Cannot call member method on null. ";y+=!1===c.computed?"Identifier"===c.property.type?c.property.name:"":"";break;case "INVALIDTYPE":y+="Cannot call member property on object of this type. ",y+=!1===c.computed?"Identifier"===c.property.type?c.property.name:"":""}break;case "Property":switch(u){case "ONLYLITERAL":y+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(u){case "WRONGSIGNATURE":y+="Function signature does not match: ";y+="Identifier"===c.callee.type?c.callee.name:"";break;case "ONLYNODESUPPORTED":y+="Functions must be declared.";y+="Identifier"===c.callee.type?c.callee.name:"";break;case "NOTAFUNCTION":y+="Not a Function: ";y+="Identifier"===c.callee.type?c.callee.name:"";break;case "NOTFOUND":y+="Function Not Found: "+("Identifier"===c.callee.type?
c.callee.name:"")}break;case "UnaryExpression":switch(u){case "NOTSUPPORTEDUNARYOPERATOR":y+="Operator "+c.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":y+="Unary operator "+c.operator+" cannot be used with this argument."}case "BinaryExpression":switch(u){case "OPERATORNOTRECOGNISED":y+="Binary Operator not recognised "+c.operator}break;case "LogicalExpression":switch(u){case "ONLYBOOLEAN":y+="Operator "+c.operator+" cannot be used. Only || or \x26\x26 are allowed values";
break;case "ONLYORORAND":y+="Logical Expression "+c.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":y+="Conditional statements not supported.";break;case "ArrayExpression":switch(u){case "FUNCTIONCONTEXTILLEGAL":y+=" Cannot Put Function inside Array."}break;default:y+="Expression contains unrecognised code structures."}}catch(C){throw C;}return y}function w(c,v,u){return{line:c.loc.start.line,character:c.loc.start.column,reason:t(c,v,u)}}function x(c,
v,u,y){v={globalScope:v.globalScope,localScope:{}};for(var C=0;C<c.params.length;C++)v.localScope[c.params[C].name.toLowerCase()]={type:"any"};z(c.body,v,u,y,!1)}function z(c,v,u,y,C){void 0===C&&(C=!0);if(null===c)throw Error("Unnexpexted Expression Syntax");var D=null;try{switch(c.type){case "VariableDeclarator":if(null!==c.init&&"FunctionExpression"===c.init.type){y.push(w(c,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==c.id.type?y.push(w(c,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):
(c.id.name.toLowerCase(),null===v.localScope?v.globalScope[c.id.name.toLowerCase()]={type:"any"}:v.localScope[c.id.name.toLowerCase()]={type:"any"});null!==c.init&&z(c.init,v,u,y,C);break;case "FunctionDeclaration":!1===C&&y.push(w(c,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==c.id.type&&y.push(w(c,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));D=g("",c);x(c,v,u,y);null!==v.localScope&&y.push(w(c,"SYNTAX","GLOBALFUNCTIONSONLY"));D.isnative=!1;"Identifier"===c.id.type&&(v.globalScope[c.id.name.toLowerCase()]=
{type:"FormulaFunction",signature:[D]});break;case "VariableDeclaration":for(var E=0;E<c.declarations.length;E++)z(c.declarations[E],v,u,y,C);break;case "IfStatement":null!==c.test&&(z(c.test,v,u,y,C),"AssignmentExpression"!==c.test.type&&"UpdateExpression"!==c.test.type||y.push(w(c.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==c.consequent&&z(c.consequent,v,u,y,C);null!==c.alternate&&z(c.alternate,v,u,y,C);break;case "EmptyStatement":break;case "BlockStatement":if(null!==c.body)for(E=
0;E<c.body.length;E++)z(c.body[E],v,u,y,C);break;case "ReturnStatement":null!==c.argument&&z(c.argument,v,u,y,C);break;case "ForInStatement":"VariableDeclaration"===c.left.type?(1<c.left.declarations.length&&y.push(w(c,"SYNTAX","ONLY1VAR")),null!==c.left.declarations[0].init&&y.push(w(c,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==c.left.type&&y.push(w(c,"SYNTAX","LEFTNOTVAR"));z(c.left,v,u,y,C);z(c.right,v,u,y,C);z(c.body,v,u,y,C);break;case "ForStatement":null!==c.init&&z(c.init,v,u,y,C);null!==
c.test&&z(c.test,v,u,y,C);null!==c.body&&z(c.body,v,u,y,C);null!==c.update&&z(c.update,v,u,y,C);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==c.argument.type&&"MemberExpression"!==c.argument.type)y.push(w(c,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===c.argument.type){var F=!1;!1===u&&(null!==v.localScope&&void 0!==v.localScope[c.argument.name.toLowerCase()]&&(F=!0),void 0!==v.globalScope[c.argument.name.toLowerCase()]&&(F=!0),
!1===F&&y.push({line:null===c?0:c.loc.start.line,character:null===c?0:c.loc.start.column,reason:"Identifier "+c.argument.name+" has not been declared."}))}"MemberExpression"===c.argument.type&&z(c.argument,v,u,y,C)}break;case "AssignmentExpression":"Identifier"!==c.left.type&&"MemberExpression"!==c.left.type&&y.push(w(c,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(c.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:y.push(w(c,"SYNTAX","OPERATORNOTRECOGNISED"))}z(c.right,
v,u,y,C);F=!1;"Identifier"===c.left.type&&(null!==v.localScope&&void 0!==v.localScope[c.left.name.toLowerCase()]&&(F=!0),void 0!==v.globalScope[c.left.name.toLowerCase()]&&(F=!0),!1===u&&!1===F&&y.push({line:null===c?0:c.loc.start.line,character:null===c?0:c.loc.start.column,reason:"Identifier "+c.left.name+" has not been declared."}));"MemberExpression"===c.left.type&&z(c.left,v,u,y,C);break;case "ExpressionStatement":z(c.expression,v,u,y,C);break;case "Identifier":var G=c.name.toLowerCase();if(null!==
v.localScope&&void 0!==v.localScope[G]||void 0!==v.globalScope[G])break;!1===u&&y.push(w(c,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":z(c.object,v,u,y,C);!0===c.computed&&z(c.property,v,u,y,C);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==c.callee.type&&y.push(w(c,"SYNTAX","ONLYNODESSUPPORTED"));for(E=0;E<c.arguments.length;E++)z(c.arguments[E],v,u,y,C);if("Identifier"===c.callee.type){var J=l(c.callee.name,c.arguments,v);!1===u&&-1===
J&&y.push(w(c,"SYNTAX","NOTFOUND"));-2===J&&y.push(w(c,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":z(c.argument,v,u,y,C);break;case "BinaryExpression":z(c.left,v,u,y,C);z(c.right,v,u,y,C);switch(c.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:y.push(w(c,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(c.operator){case "\x26\x26":case "||":break;
default:y.push(w(c,"SYNTAX","OPERATORNOTRECOGNISED"))}z(c.left,v,u,y,C);"AssignmentExpression"!==c.left.type&&"UpdateExpression"!==c.left.type||y.push(w(c,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));z(c.right,v,u,y,C);"AssignmentExpression"!==c.right.type&&"UpdateExpression"!==c.right.type||y.push(w(c,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":y.push(w(c,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(E=0;E<c.elements.length;E++)z(c.elements[E],
v,u,y,C);break;case "TemplateLiteral":for(E=0;E<c.quasis.length;E++)z(c.quasis[E],v,u,y,C);for(E=0;E<c.expressions.length;E++)z(c.expressions[E],v,u,y,C);break;case "ObjectExpression":for(E=0;E<c.properties.length;E++)z(c.properties[E],v,u,y,C);break;case "Property":"Literal"!==c.key.type&&"Identifier"!==c.key.type&&y.push(w(c,"SYNTAX","ONLYLITERAL"));"Literal"===c.key.type&&z(c.key,v,u,y,C);z(c.value,v,u,y,C);break;default:y.push(w(c,"SYNTAX","UNRECOGNISED"))}}catch(R){y.push({line:null===c?0:c.loc.start.line,
character:null===c?0:c.loc.start.column,reason:"Unnexpected Syntax"})}}function A(c){var v=[];p(c,function(u){"CallExpression"===u.type&&"Identifier"===u.callee.type&&v.push(u.callee.name.toLowerCase());return!0});return v}Object.defineProperty(n,"__esModule",{value:!0});n.scriptUsesFeatureSet=n.findScriptDependencies=n.findFunctionCalls=n.checkScript=n.extractAllIssues=n.extractAllIssuesInFunction=n.makeError=n.nodeErrorMessage=n.validateLanguage=n.validateScript=n.constructGlobalScope=n.validateFunction=
n.extractFunctionDeclaration=n.findFieldLiterals=n.referencesFunction=n.referencesMember=n.testValidityOfExpression=n.validateLanguageNode=n.walk=n.findFunction=n.checkFunctionSignature=n.addFunctionDeclaration=n.functionDecls=void 0;n.functionDecls={concatenate:{min:"0",max:"*"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",
max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",
max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",
max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",
max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},
boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",
max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",
max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},schema:{min:"1",max:"1"}};for(var B in n.functionDecls)n.functionDecls[B].fmin=n.functionDecls[B].min,n.functionDecls[B].fmax=n.functionDecls[B].max;var b="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl attachments featuresetbyportalitem".split(" "),
h="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");n.addFunctionDeclaration=function(c,v){var u=n.functionDecls[c.name.toLowerCase()];void 0===u?"sync"===v?n.functionDecls[c.name.toLowerCase()]={min:c.min,max:c.max}:n.functionDecls[c.name.toLowerCase()]=
{fmin:c.min,fmax:c.max}:"sync"===v?(u.min=c.min,u.max=c.max):(u.fmin=c.min,u.fmax=c.max)};n.checkFunctionSignature=a;n.findFunction=l;n.walk=p;n.validateLanguageNode=m;n.testValidityOfExpression=e;n.referencesMember=f;n.referencesFunction=function(c,v){var u=!1,y=v.toLowerCase();p(c,function(C){return u?!1:"CallExpression"===C.type&&"Identifier"===C.callee.type&&C.callee.name&&C.callee.name.toLowerCase()===y?(u=!0,!1):!0});return u};n.findFieldLiterals=function(c){var v=[];p(c,function(u){if("MemberExpression"!==
u.type||"Identifier"!==u.object.type)return!0;!1===u.computed&&u.object&&u.object.name&&u.property&&"Identifier"===u.property.type&&u.property.name?v.push(u.object.name.toLowerCase()+"."+u.property.name.toLowerCase()):u.object&&u.object.name&&u.property&&"Literal"===u.property.type&&"string"===typeof u.property.value&&v.push(u.object.name.toLowerCase()+"."+u.property.value.toString().toLowerCase());return!1});return v};n.extractFunctionDeclaration=g;n.validateFunction=d;n.constructGlobalScope=q;n.validateScript=
function(c,v,u,y){void 0===u&&(u="async");void 0===y&&(y=n.functionDecls);v={globalScope:q(v.vars,y,v.customFunctions,u),localScope:null};return e(c.body[0].body,v)};n.validateLanguage=function(c){return"BlockStatement"!==c.body[0].body.type?"Invalid formula content.":m(c.body[0].body)};n.nodeErrorMessage=t;n.makeError=w;n.extractAllIssuesInFunction=x;n.extractAllIssues=z;n.checkScript=function(c,v,u,y,C){void 0===y&&(y="async");void 0===C&&(C=n.functionDecls);var D=[];if("BlockStatement"!==c.body[0].body.type)return[{line:0,
character:0,reason:"Invalid Body"}];if(null===v||void 0===v)v={vars:{},customFunctions:[]};v={globalScope:q(v.vars,C,v.customFunctions,y),localScope:null};try{z(c.body[0].body,v,u,D)}catch(E){}return D};n.findFunctionCalls=A;n.findScriptDependencies=function(c,v){void 0===v&&(v=[]);var u=null;if(void 0===c.usesFeatureSet){null===u&&(u=A(c));c.usesFeatureSet=!1;for(var y=0;y<u.length;y++)-1<b.indexOf(u[y])&&(c.usesFeatureSet=!0,c.isAsync=!0);if(!1===c.usesFeatureSet&&v&&0<v.length)for(y=0;y<v.length;y++)if(f(c,
v[y])){c.usesFeatureSet=!0;c.isAsync=!0;break}}if(void 0===c.usesGeometry)for(c.usesGeometry=!1,null===u&&(u=A(c)),y=0;y<u.length;y++)-1<h.indexOf(u[y])&&(c.usesGeometry=!0)};n.scriptUsesFeatureSet=function(c){c=A(c);for(var v=0;v<c.length;v++)if(-1<b.indexOf(c[v]))return!0;return!1}})},"esri/arcade/functions/array":function(){define(["require","exports","../languageUtils"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});n.registerFunctions=void 0;n.registerFunctions=function(l,k){l.array=
function(p,m){return k(p,m,function(e,f,g){a.pcCheck(g,1,2);e=a.toNumber(g[0]);if(isNaN(e)||!1===a.isInteger(e))throw Error("Invalid Parameter");g=a.defaultUndefined(g[1],null);e=Array(e);e.fill(g);return e})};l.front=function(p,m){return k(p,m,function(e,f,g){a.pcCheck(g,1,1);if(a.isImmutableArray(g[0])){if(0>=g[0].length())throw Error("Array is empty");return g[0].get(0)}if(a.isArray(g[0])){if(0>=g[0].length)throw Error("Array is empty");return g[0][0]}throw Error("Invalid Parameter");})};l.back=
function(p,m){return k(p,m,function(e,f,g){a.pcCheck(g,1,1);if(a.isImmutableArray(g[0])){if(0>=g[0].length())throw Error("Array is empty");return g[0].get(g[0].length()-1)}if(a.isArray(g[0])){if(0>=g[0].length)throw Error("Array is empty");return g[0][g[0].length-1]}throw Error("Invalid Parameter");})};l.push=function(p,m){return k(p,m,function(e,f,g){a.pcCheck(g,1,2);if(a.isArray(g[0]))return g[0][g[0].length]=g[1],g[0].length;throw Error("Invalid Parameter");})};l.pop=function(p,m){return k(p,m,
function(e,f,g){a.pcCheck(g,1,1);if(a.isArray(g[0])){if(0>=g[0].length)throw Error("Array is empty");e=g[0][g[0].length-1];--g[0].length;return e}throw Error("Invalid Parameter");})};l.erase=function(p,m){return k(p,m,function(e,f,g){a.pcCheck(g,2,2);if(a.isArray(g[0])){e=a.toNumber(g[1]);if(isNaN(e)||!1===a.isInteger(e))throw Error("Invalid Parameter");g=g[0];if(0>=g.length)throw Error("Array is empty");0>e&&(e=g.length+e);if(0>e)throw Error("Element not found");if(e>=g.length)throw Error("Index is greater than array");
g.splice(e,1);return a.voidOperation}throw Error("Invalid Parameter");})};l.insert=function(p,m){return k(p,m,function(e,f,g){a.pcCheck(g,3,3);if(a.isArray(g[0])){e=a.toNumber(g[1]);if(isNaN(e)||!1===a.isInteger(e))throw Error("Invalid Parameter");f=g[2];g=g[0];if(e>g.length)throw Error("Index is greater than array");if(0>e&&e<-1*g.length)throw Error("Index is greater than array");if(e===g.length)return g[e]=f,a.voidOperation;g.splice(e,0,f);return a.voidOperation}throw Error("Invalid Parameter");
})};l.resize=function(p,m){return k(p,m,function(e,f,g){a.pcCheck(g,2,3);if(a.isArray(g[0])){f=a.toNumber(g[1]);if(isNaN(f)||!1===a.isInteger(f))throw Error("Invalid Parameter");if(0>f)throw Error("Size cannot be negative");e=a.defaultUndefined(g[2],null);g=g[0];if(g.length>=f)return g.length=f,a.voidOperation;var d=g.length;g.length=f;for(f=d;f<g.length;f++)g[f]=e;return a.voidOperation}throw Error("Invalid Parameter");})};l.includes=function(p,m){return k(p,m,function(e,f,g){a.pcCheck(g,2,2);if(a.isArray(g[0])){var d=
g[1];e=g[0];return-1<e.findIndex(function(t){return a.equalityTest(t,d)})?!0:!1}if(a.isImmutableArray(g[0])){var q=g[1];e=g[0].toArray();return-1<e.findIndex(function(t){return a.equalityTest(t,q)})?!0:!1}throw Error("Invalid Parameter");})};l.slice=function(p,m){return k(p,m,function(e,f,g){a.pcCheck(g,1,3);if(a.isArray(g[0])){e=a.toNumber(a.defaultUndefined(g[1],0));f=a.toNumber(a.defaultUndefined(g[2],g[0].length));if(isNaN(e)||!1===a.isInteger(e))throw Error("Invalid Parameter");if(isNaN(f)||
!1===a.isInteger(f))throw Error("Invalid Parameter");var d=g[0];return d.slice(e,f)}if(a.isImmutableArray(g[0])){d=g[0];e=a.toNumber(a.defaultUndefined(g[1],0));f=a.toNumber(a.defaultUndefined(g[2],d.length()));if(isNaN(e)||!1===a.isInteger(e))throw Error("Invalid Parameter");if(isNaN(f)||!1===a.isInteger(f))throw Error("Invalid Parameter");return d.toArray().slice(e,f)}throw Error("Invalid Parameter");})};l.splice=function(p,m){return k(p,m,function(e,f,g){e=[];for(f=0;f<g.length;f++)a.isArray(g[f])?
e.push.apply(e,g[f]):a.isImmutableArray(g[f])?e.push.apply(e,g[f].toArray()):e.push(g[f]);return e})}}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils"],function(r,n,a){function l(m){m=new Date(m.getTime());var e=m.getFullYear(),f=new Date(0);f.setFullYear(e+1,0,4);f.setHours(0,0,0,0);f=k(f);var g=new Date(0);g.setFullYear(e,0,4);g.setHours(0,0,0,0);g=k(g);return m.getTime()>=f.getTime()?e+1:m.getTime()>=g.getTime()?e:e-1}function k(m){m=new Date(m.getTime());
var e=m.getDay();e=(1>e?7:0)+e-1;m.setDate(m.getDate()-e);m.setHours(0,0,0,0);return m}function p(m){return null===m?m:isNaN(m.getTime())?null:m}Object.defineProperty(n,"__esModule",{value:!0});n.registerFunctions=void 0;n.registerFunctions=function(m,e){m.today=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,0,0);d=new Date;d.setHours(0,0,0,0);return d})};m.now=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,0,0);return new Date})};m.timestamp=function(f,g){return e(f,g,function(d,
q,t){a.pcCheck(t,0,0);d=new Date;return d=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds())})};m.toutc=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?null:new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds())})};m.tolocal=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);
return null===d?null:a.MomentLibrary.Moment.utc([d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()]).toDate()})};m.day=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getDate()})};m.month=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getMonth()})};m.year=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===
d?NaN:d.getFullYear()})};m.hour=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getHours()})};m.second=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getSeconds()})};m.millisecond=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getMilliseconds()})};m.minute=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===
d?NaN:d.getMinutes()})};m.weekday=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getDay()})};m.isoweekday=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);if(null===d)return NaN;d=d.getDay();0===d&&(d=7);return d})};m.isomonth=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:d.getMonth()+1})};m.isoweek=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);q=a.toDate(t[0]);
if(null===q)return NaN;d=k(q).getTime();q=l(q);t=new Date(0);t.setFullYear(q,0,4);t.setHours(0,0,0,0);q=k(t);d-=q.getTime();return Math.round(d/6048E5)+1})};m.isoyear=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,1,1);d=a.toDate(t[0]);return null===d?NaN:l(d)})};m.date=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,0,7);if(3===t.length)return p(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),0,0,0,0));if(4===t.length)return p(new Date(a.toNumber(t[0]),a.toNumber(t[1]),
a.toNumber(t[2]),a.toNumber(t[3]),0,0,0));if(5===t.length)return p(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),a.toNumber(t[4]),0,0));if(6===t.length)return p(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),a.toNumber(t[4]),a.toNumber(t[5]),0));if(7===t.length)return p(new Date(a.toNumber(t[0]),a.toNumber(t[1]),a.toNumber(t[2]),a.toNumber(t[3]),a.toNumber(t[4]),a.toNumber(t[5]),a.toNumber(t[6])));if(2===t.length){d=a.toString(t[1]);if(""===
d)return null;d=a.standardiseDateFormat(d);t=a.MomentLibrary.Moment(a.toString(t[0]),d,!0);return!0===t.isValid()?t.toDate():null}if(1===t.length){if(a.isString(t[0])){if(""===t[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(t[0]))return a.toDate(t[0]+"-01-01")}d=a.toNumber(t[0]);return!1===isNaN(d)?p(new Date(d)):a.toDate(t[0])}if(0===t.length)return new Date})};m.datediff=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,2,3);d=a.toDateM(t[0]);
q=a.toDateM(t[1]);if(null===d||null===q)return NaN;switch(a.toString(t[2]).toLowerCase()){case "days":case "day":case "d":return d.diff(q,"days",!0);case "months":case "month":return d.diff(q,"months",!0);case "minutes":case "minute":case "m":return"M"===t[2]?d.diff(q,"months",!0):d.diff(q,"minutes",!0);case "seconds":case "second":case "s":return d.diff(q,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return d.diff(q);case "hours":case "hour":case "h":return d.diff(q,"hours",!0);
case "years":case "year":case "y":return d.diff(q,"years",!0);default:return d.diff(q)}})};m.dateadd=function(f,g){return e(f,g,function(d,q,t){a.pcCheck(t,2,3);d=a.toDateM(t[0]);if(null===d)return null;q="milliseconds";switch(a.toString(t[2]).toLowerCase()){case "days":case "day":case "d":q="days";break;case "months":case "month":q="months";break;case "minutes":case "minute":case "m":q="M"===t[2]?"months":"minutes";break;case "seconds":case "second":case "s":q="seconds";break;case "milliseconds":case "millisecond":case "ms":q=
"milliseconds";break;case "hours":case "hour":case "h":q="hours";break;case "years":case "year":case "y":q="years"}d.add(a.toNumber(t[1]),q);return d.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(r,n,a,
l,k,p,m,e,f,g,d,q,t,w){Object.defineProperty(n,"__esModule",{value:!0});n.registerFunctions=void 0;n.registerFunctions=function(x,z){x.ringisclockwise=function(A,B){return z(A,B,function(b,h,c){p.pcCheck(c,1,1);b=[];if(null===c[0])return!1;if(p.isArray(c[0])){var v=0;for(c=c[0];v<c.length;v++)if(h=c[v],h instanceof g)b.push([h.x,h.y]);else throw Error("Invalid Argument");}else if(c[0]instanceof k)b=c[0]._elements;else if(p.isImmutableArray(c[0])){v=0;for(var u=c[0].toArray();v<u.length;v++)if(h=u[v],
h instanceof g)b.push([h.x,h.y]);else throw Error("Invalid Argument");0<b.length&&(c[0].get(0),c[0].get(0))}else throw Error("Invalid Argument");return 3>b.length?!1:(new d({rings:[],spatialReference:{wkid:4326}})).isClockwise(b)})};x.polygon=function(A,B){return z(A,B,function(b,h,c){p.pcCheck(c,1,1);b=null;if(c[0]instanceof a){if(b=p.fixSpatialReference(l.parseGeometryFromDictionary(c[0]),A.spatialReference),!1===b instanceof d)throw Error("Illegal Parameter");}else b=c[0]instanceof d?w.fromJson(c[0].toJson()):
p.fixSpatialReference(new d(JSON.parse(c[0])),A.spatialReference);if(null!==b&&!1===b.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return p.fixNullGeometry(b)})};x.polyline=function(A,B){return z(A,B,function(b,h,c){p.pcCheck(c,1,1);b=null;if(c[0]instanceof a){if(b=p.fixSpatialReference(l.parseGeometryFromDictionary(c[0]),A.spatialReference),!1===b instanceof q)throw Error("Illegal Parameter");
}else b=c[0]instanceof q?w.fromJson(c[0].toJson()):p.fixSpatialReference(new q(JSON.parse(c[0])),A.spatialReference);if(null!==b&&!1===b.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return p.fixNullGeometry(b)})};x.point=function(A,B){return z(A,B,function(b,h,c){p.pcCheck(c,1,1);b=null;if(c[0]instanceof a){if(b=p.fixSpatialReference(l.parseGeometryFromDictionary(c[0]),A.spatialReference),
!1===b instanceof g)throw Error("Illegal Parameter");}else b=c[0]instanceof g?w.fromJson(c[0].toJson()):p.fixSpatialReference(new g(JSON.parse(c[0])),A.spatialReference);if(null!==b&&!1===b.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return p.fixNullGeometry(b)})};x.multipoint=function(A,B){return z(A,B,function(b,h,c){p.pcCheck(c,1,1);b=null;if(c[0]instanceof a){if(b=p.fixSpatialReference(l.parseGeometryFromDictionary(c[0]),
A.spatialReference),!1===b instanceof f)throw Error("Illegal Parameter");}else b=c[0]instanceof f?w.fromJson(c[0].toJson()):p.fixSpatialReference(new f(JSON.parse(c[0])),A.spatialReference);if(null!==b&&!1===b.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return p.fixNullGeometry(b)})};x.extent=function(A,B){return z(A,B,function(b,h,c){c=p.autoCastFeatureToGeometry(c);p.pcCheck(c,1,1);b=null;
c[0]instanceof a?b=p.fixSpatialReference(l.parseGeometryFromDictionary(c[0]),A.spatialReference):c[0]instanceof g?(b={xmin:c[0].x,ymin:c[0].y,xmax:c[0].x,ymax:c[0].y,spatialReference:c[0].spatialReference.toJson()},c=c[0],c.hasZ?(b.zmin=c.z,b.zmax=c.z):c.hasM&&(b.mmin=c.m,b.mmax=c.m),b=w.fromJson(b)):b=c[0]instanceof d?w.fromJson(c[0].getExtent().toJson()):c[0]instanceof q?w.fromJson(c[0].getExtent().toJson()):c[0]instanceof f?w.fromJson(c[0].getExtent().toJson()):c[0]instanceof m?w.fromJson(c[0].toJson()):
p.fixSpatialReference(new m(JSON.parse(c[0])),A.spatialReference);if(null!==b&&!1===b.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return p.fixNullGeometry(b)})};x.geometry=function(A,B){return z(A,B,function(b,h,c){p.pcCheck(c,1,1);b=null;b=c[0]instanceof l?p.fixSpatialReference(c[0].geometry(),A.spatialReference):c[0]instanceof a?p.fixSpatialReference(l.parseGeometryFromDictionary(c[0]),
A.spatialReference):p.fixSpatialReference(w.fromJson(JSON.parse(c[0])),A.spatialReference);if(null!==b&&!1===b.spatialReference.equals(A.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return p.fixNullGeometry(b)})};x.setgeometry=function(A,B){return z(A,B,function(b,h,c){p.pcCheck(c,2,2);if(c[0]instanceof l){if(!0===c[0].immutable)throw Error("Feature is Immutable");if(c[1]instanceof e||null===c[1])c[0]._geometry=c[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return p.voidOperation})};x.feature=function(A,B){return z(A,B,function(b,h,c){if(0===c.length)throw Error("Missing Parameters");b=null;if(1===c.length)if(p.isString(c[0]))b=l.fromJson(JSON.parse(c[0]));else if(c[0]instanceof l)b=l.createFromArcadeFeature(c[0]);else if(c[0]instanceof e)b=l.createFromGraphicLikeObject(c[0],null,null);else if(c[0]instanceof a)b=c[0].hasField("geometry")?c[0].field("geometry"):null,h=c[0].hasField("attributes")?
c[0].field("attributes"):null,null!==b&&b instanceof a&&(b=l.parseGeometryFromDictionary(b)),null!==h&&(h=l.parseAttributesFromDictionary(h)),b=l.createFromGraphicLikeObject(b,h,null);else throw Error("Illegal Argument");else{if(2===c.length){h=b=null;if(null!==c[0])if(c[0]instanceof e)b=c[0];else if(b instanceof a)b=l.parseGeometryFromDictionary(c[0]);else throw Error("Illegal Argument");if(null!==c[1])if(c[1]instanceof a)h=l.parseAttributesFromDictionary(c[1]);else throw Error("Illegal Argument");
}else{b=null;h={};if(null!==c[0])if(c[0]instanceof e)b=c[0];else if(b instanceof a)b=l.parseGeometryFromDictionary(c[0]);else throw Error("Illegal Argument");for(var v=1;v<c.length;v+=2){var u=p.toString(c[v]),y=c[v+1];if(null===y||void 0===y||p.isString(y)||isNaN(y)||p.isDate(y)||p.isNumber(y)||p.isBoolean(y)){if(p.isFunctionParameter(y)||!1===p.isSimpleType(y))throw Error("Illegal Argument");h[u]=y===p.voidOperation?null:y}else throw Error("Illegal Argument");}}b=l.createFromGraphicLikeObject(b,
h,null)}b._geometry=p.fixSpatialReference(b.geometry(),A.spatialReference);b.immutable=!1;return b})};x.dictionary=function(A,B){return z(A,B,function(b,h,c){if(0===c.length)return c=new a,c.immutable=!1,c;if(1===c.length&&p.isString(c[0]))try{var v=JSON.parse(c[0]),u=a.convertObjectToArcadeDictionary(v);u.immutable=!1;return u}catch(y){throw Error("Missing Parameters or Illegal Json");}if(0!==c.length%2)throw Error("Missing Parameters");b={};for(h=0;h<c.length;h+=2)if(v=p.toString(c[h]),u=c[h+1],
null===u||void 0===u||p.isString(u)||isNaN(u)||p.isDate(u)||p.isNumber(u)||p.isBoolean(u)||p.isArray(u)||p.isImmutableArray(u)){if(p.isFunctionParameter(u))throw Error("Illegal Argument");b[v]=u===p.voidOperation?null:u}else throw Error("Illegal Argument");c=new a(b);c.immutable=!1;return c})};x.haskey=function(A,B){return z(A,B,function(b,h,c){p.pcCheck(c,2,2);b=p.toString(c[1]);if(c[0]instanceof l||c[0]instanceof a)return c[0].hasField(b);throw Error("Illegal Argument");})};x.indexof=function(A,
B){return z(A,B,function(b,h,c){p.pcCheck(c,2,2);b=c[1];if(p.isArray(c[0])){for(h=0;h<c[0].length;h++)if(p.equalityTest(b,c[0][h]))return h;return-1}if(p.isImmutableArray(c[0])){var v=c[0].length();for(h=0;h<v;h++)if(p.equalityTest(b,c[0].get(h)))return h;return-1}throw Error("Illegal Argument");})};x.angle=function(A,B){return z(A,B,function(b,h,c){c=p.autoCastFeatureToGeometry(c);p.pcCheck(c,2,3);if(!(c[0]instanceof g))throw Error("Illegal Argument");if(!(c[1]instanceof g))throw Error("Illegal Argument");
if(2<c.length&&!(c[2]instanceof g))throw Error("Illegal Argument");return 2===c.length?t.angle2D(c[0],c[1]):t.angleBetween2D(c[0],c[1],c[2])})};x.bearing=function(A,B){return z(A,B,function(b,h,c){c=p.autoCastFeatureToGeometry(c);p.pcCheck(c,2,3);if(!(c[0]instanceof g))throw Error("Illegal Argument");if(!(c[1]instanceof g))throw Error("Illegal Argument");if(2<c.length&&!(c[2]instanceof g))throw Error("Illegal Argument");return 2===c.length?t.bearing2D(c[0],c[1]):t.bearingBetween2D(c[0],c[1],c[2])})};
x.isselfintersecting=function(A,B){return z(A,B,function(b,h,c){c=p.autoCastFeatureToGeometry(c);p.pcCheck(c,1,1);b=c[0];if(b instanceof d)return b.isSelfIntersecting(b);if(b instanceof q)return b=b.paths,t.pathsSelfIntersecting(b);if(b instanceof f)for(h=b.points,c=0;c<h.length;c++)for(var v=0;v<h.length;v++)if(v!==c){for(var u=!0,y=0;y<h[c].length;y++)if(h[c][y]!==h[v][y]){u=!1;break}if(!0===u)return!0}return p.isArray(b)||p.isImmutableArray(b)?(b=p.autoCastArrayOfPointsToPolyline(b,A.spatialReference),
null!==b&&(b=b.paths),t.pathsSelfIntersecting(b)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(r,n,a){function l(d,q,t){var w={x:0,y:0};q&&(w.z=0);t&&(w.m=0);for(var x=0,z=d[0],A=0;A<d.length;A++){var B=d[A];a:if(B.length!==z.length)var b=!1;else{for(b=0;b<B.length;b++)if(B[b]!==z[b]){b=!1;break a}b=!0}if(!1===b){b=k(z,B,q);var h=B,c=q,v=t,u={x:(z[0]+h[0])/2,y:(z[1]+h[1])/2};c&&(u.z=(z[2]+h[2])/2);c&&v?u.m=(z[3]+h[3])/2:v&&(u.m=
(z[2]+h[2])/2);z=u;z.x*=b;z.y*=b;w.x+=z.x;w.y+=z.y;q&&(z.z*=b,w.z+=z.z);t&&(z.m*=b,w.m+=z.m);x+=b;z=B}}0<x?(w.x/=x,w.y/=x,q&&(w.z/=x),t&&(w.m/=x)):(w.x=d[0][0],w.y=d[0][1],q&&(w.z=d[0][2]),t&&q?w.m=d[0][3]:t&&(w.m=d[0][2]));return w}function k(d,q,t){var w=q[0]-d[0];d=q[1]-d[1];return t?(q=q[2]-q[2],Math.sqrt(w*w+d*d+q*q)):Math.sqrt(w*w+d*d)}function p(d,q,t){for(void 0===t&&(t=0);d<t;)d+=q;for(t+=q;d>=t;)d-=q;return d}function m(d,q){return Math.atan2(q.y-d.y,q.x-d.x)}function e(d,q,t){var w=d.x-
q.x;d=d.y-q.y;var x=t.x-q.x;q=t.y-q.y;return Math.atan2(w*q-x*d,w*x+d*q)}function f(d,q,t,w,x){var z=d[0];d=d[1];var A=q[0];q=q[1];var B=t[0],b=t[1];t=w[0]-B;B=z-B;var h=A-z;w=w[1]-b;b=d-b;var c=q-d,v=w*h-t*c;if(0===v)return!1;t=(t*b-w*B)/v;B=(h*b-c*B)/v;return 0<=t&&1>=t&&0<=B&&1>=B?(x&&(x[0]=z+t*(A-z),x[1]=d+t*(q-d)),!0):!1}Object.defineProperty(n,"__esModule",{value:!0});n.pathsSelfIntersecting=n.bearingBetween2D=n.angleBetween2D=n.angleBetweenRad=n.bearing2D=n.angle2D=n.angleRad=n.centroidMultiPoint=
n.centroidPolyline=void 0;n.centroidPolyline=function(d){for(var q={x:0,y:0,spatialReference:d.spatialReference.toJson()},t={x:0,y:0,spatialReference:d.spatialReference.toJson()},w=0,x=0,z=0;z<d.paths.length;z++)if(0!==d.paths[z].length){var A=d.paths[z];var B=!0===d.hasZ;if(1>=A.length)A=0;else{for(var b=0,h=1;h<A.length;h++)b+=k(A[h-1],A[h],B);A=b}0===A?(B=l(d.paths[z],!0===d.hasZ,!0===d.hasM),q.x+=B.x,q.y+=B.y,!0===d.hasZ&&(q.z+=B.z),!0===d.hasM&&(q.m+=B.m),++w):(B=l(d.paths[z],!0===d.hasZ,!0===
d.hasM),t.x+=B.x*A,t.y+=B.y*A,!0===d.hasZ&&(t.z+=B.z*A),!0===d.hasM&&(t.m+=B.m*A),x+=A)}return 0<x?(t.x/=x,t.y/=x,!0===d.hasZ&&(t.z/=x),!0===d.hasM&&(t.m/=x),new a(t)):0<w?(q.x/=w,q.y/=w,!0===d.hasZ&&(t.z/=w),!0===d.hasM&&(q.m/=w),new a(q)):null};n.centroidMultiPoint=function(d){if(0===d.points.length)return null;for(var q=0,t=0,w=0,x=0,z=0;z<d.points.length;z++){var A=d.getPoint(z);!0===A.hasZ&&(w+=A.z);!0===A.hasM&&(x+=A.m);q+=A.x;t+=A.y;x+=A.m}q={x:q/d.points.length,y:t/d.points.length,spatialReference:null};
q.spatialReference=d.spatialReference.toJson();!0===d.hasZ&&(q.z=w/d.points.length);!0===d.hasM&&(q.m=x/d.points.length);return new a(q)};n.angleRad=m;n.angle2D=function(d,q){return p(m(d,q),2*Math.PI)*(180/Math.PI)};n.bearing2D=function(d,q){return p(Math.PI/2-m(d,q),2*Math.PI)*(180/Math.PI)};n.angleBetweenRad=e;n.angleBetween2D=function(d,q,t){return p(e(d,q,t),2*Math.PI)*(180/Math.PI)};n.bearingBetween2D=function(d,q,t){return p(-1*e(d,q,t),2*Math.PI)*(180/Math.PI)};var g=[0,0];n.pathsSelfIntersecting=
function(d){for(var q=0;q<d.length;q++){for(var t=d[q],w=0;w<t.length-1;w++)for(var x=t[w],z=t[w+1],A=q+1;A<d.length;A++)for(var B=0;B<d[A].length-1;B++){var b=d[A][B],h=d[A][B+1],c=f(x,z,b,h,g);if(c&&!(g[0]===x[0]&&g[1]===x[1]||g[0]===b[0]&&g[1]===b[1]||g[0]===z[0]&&g[1]===z[1]||g[0]===h[0]&&g[1]===h[1]))return!0}B=t.length;if(!(3>B))for(w=0;w<=B-2;w++)for(x=t[w],z=t[w+1],A=w+2;A<=B-2;A++)if(b=t[A],h=t[A+1],(c=f(x,z,b,h,g))&&!(g[0]===x[0]&&g[1]===x[1]||g[0]===b[0]&&g[1]===b[1]||g[0]===z[0]&&g[1]===
z[1]||g[0]===h[0]&&g[1]===h[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),function(r,n,a,l,k,p,m,e,f,g,d,q,t){function w(z){return 0===a.version.indexOf("4.")?d.fromExtent(z):new d({spatialReference:z.spatialReference,rings:[[[z.xmin,
z.ymin],[z.xmin,z.ymax],[z.xmax,z.ymax],[z.xmax,z.ymin],[z.xmin,z.ymin]]]})}Object.defineProperty(n,"__esModule",{value:!0});n.registerFunctions=n.setGeometryEngine=void 0;var x=null;n.setGeometryEngine=function(z){x=z};n.registerFunctions=function(z,A){function B(b){k.pcCheck(b,2,2);if(!(b[0]instanceof e&&b[1]instanceof e||b[0]instanceof e&&null===b[1]||b[1]instanceof e&&null===b[0]||null===b[0]&&null===b[1]))throw Error("Illegal Argument");}z.disjoint=function(b,h){return A(b,h,function(c,v,u){u=
k.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!0:x.disjoint(u[0],u[1])})};z.intersects=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:x.intersects(u[0],u[1])})};z.touches=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:x.touches(u[0],u[1])})};z.crosses=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);B(u);return null===
u[0]||null===u[1]?!1:x.crosses(u[0],u[1])})};z.within=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:x.within(u[0],u[1])})};z.contains=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:x.contains(u[0],u[1])})};z.overlaps=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:x.overlaps(u[0],u[1])})};z.equals=
function(b,h){return A(b,h,function(c,v,u){k.pcCheck(u,2,2);return u[0]===u[1]?!0:u[0]instanceof e&&u[1]instanceof e?x.equals(u[0],u[1]):k.isDate(u[0])&&k.isDate(u[1])?u[0].getTime()===u[1].getTime():!1})};z.relate=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,3,3);if(u[0]instanceof e&&u[1]instanceof e)return x.relate(u[0],u[1],k.toString(u[2]));if(u[0]instanceof e&&null===u[1]||u[1]instanceof e&&null===u[0]||null===u[0]&&null===u[1])return!1;throw Error("Illegal Argument");
})};z.intersection=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?null:x.intersect(u[0],u[1])})};z.union=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);c=[];if(0===u.length)throw Error("Function called with wrong number of Parameters");if(1===u.length)if(k.isArray(u[0]))for(u=k.autoCastFeatureToGeometry(u[0]),v=0;v<u.length;v++){if(null!==u[v]){if(!(u[v]instanceof e))throw Error("Illegal Argument");c.push(u[v])}}else if(k.isImmutableArray(u[0]))for(u=
k.autoCastFeatureToGeometry(u[0].toArray()),v=0;v<u.length;v++){if(null!==u[v]){if(!(u[v]instanceof e))throw Error("Illegal Argument");c.push(u[v])}}else{if(u[0]instanceof e)return k.fixSpatialReference(l.cloneGeometry(u[0]),b.spatialReference);if(null===u[0])return null;throw Error("Illegal Argument");}else for(v=0;v<u.length;v++)if(null!==u[v]){if(!(u[v]instanceof e))throw Error("Illegal Argument");c.push(u[v])}return 0===c.length?null:x.union(c)})};z.difference=function(b,h){return A(b,h,function(c,
v,u){u=k.autoCastFeatureToGeometry(u);B(u);return null!==u[0]&&null===u[1]?l.cloneGeometry(u[0]):null===u[0]?null:x.difference(u[0],u[1])})};z.symmetricdifference=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);B(u);return null===u[0]&&null===u[1]?null:null===u[0]?l.cloneGeometry(u[1]):null===u[1]?l.cloneGeometry(u[0]):x.symmetricDifference(u[0],u[1])})};z.clip=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,2,2);if(!(u[1]instanceof
m)&&null!==u[1])throw Error("Illegal Argument");if(null===u[0])return null;if(!(u[0]instanceof e))throw Error("Illegal Argument");return null===u[1]?null:x.clip(u[0],u[1])})};z.cut=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,2,2);if(!(u[1]instanceof q)&&null!==u[1])throw Error("Illegal Argument");if(null===u[0])return[];if(!(u[0]instanceof e))throw Error("Illegal Argument");return null===u[1]?[l.cloneGeometry(u[0])]:x.cut(u[0],u[1])})};z.area=function(b,
h){return A(b,h,function(c,v,u){k.pcCheck(u,1,2);u=k.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(k.isArray(u[0])||k.isImmutableArray(u[0]))return c=k.autoCastArrayOfPointsToPolygon(u[0],b.spatialReference),null===c?0:x.planarArea(c,l.convertSquareUnitsToCode(k.defaultUndefined(u[1],-1)));if(!(u[0]instanceof e))throw Error("Illegal Argument");return x.planarArea(u[0],l.convertSquareUnitsToCode(k.defaultUndefined(u[1],-1)))})};z.areageodetic=function(b,h){return A(b,h,function(c,v,u){k.pcCheck(u,
1,2);u=k.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(k.isArray(u[0])||k.isImmutableArray(u[0]))return c=k.autoCastArrayOfPointsToPolygon(u[0],b.spatialReference),null===c?0:x.geodesicArea(c,l.convertSquareUnitsToCode(k.defaultUndefined(u[1],-1)));if(!(u[0]instanceof e))throw Error("Illegal Argument");return x.geodesicArea(u[0],l.convertSquareUnitsToCode(k.defaultUndefined(u[1],-1)))})};z.length=function(b,h){return A(b,h,function(c,v,u){k.pcCheck(u,1,2);u=k.autoCastFeatureToGeometry(u);
if(null===u[0])return 0;if(k.isArray(u[0])||k.isImmutableArray(u[0]))return c=k.autoCastArrayOfPointsToPolyline(u[0],b.spatialReference),null===c?0:x.planarLength(c,l.convertLinearUnitsToCode(k.defaultUndefined(u[1],-1)));if(!(u[0]instanceof e))throw Error("Illegal Argument");return x.planarLength(u[0],l.convertLinearUnitsToCode(k.defaultUndefined(u[1],-1)))})};z.lengthgeodetic=function(b,h){return A(b,h,function(c,v,u){k.pcCheck(u,1,2);u=k.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(k.isArray(u[0])||
k.isImmutableArray(u[0]))return c=k.autoCastArrayOfPointsToPolyline(u[0],b.spatialReference),null===c?0:x.geodesicLength(c,l.convertLinearUnitsToCode(k.defaultUndefined(u[1],-1)));if(!(u[0]instanceof e))throw Error("Illegal Argument");return x.geodesicLength(u[0],l.convertLinearUnitsToCode(k.defaultUndefined(u[1],-1)))})};z.distance=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,2,3);c=u[0];if(k.isArray(u[0])||k.isImmutableArray(u[0]))c=k.autoCastArrayOfPointsToMultiPoint(u[0],
b.spatialReference);v=u[1];if(k.isArray(u[1])||k.isImmutableArray(u[1]))v=k.autoCastArrayOfPointsToMultiPoint(u[1],b.spatialReference);if(!(c instanceof e))throw Error("Illegal Argument");if(!(v instanceof e))throw Error("Illegal Argument");return x.distance(c,v,l.convertLinearUnitsToCode(k.defaultUndefined(u[2],-1)))})};z.distancegeodetic=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,2,3);c=u[0];v=u[1];if(!(c instanceof g))throw Error("Illegal Argument");
if(!(v instanceof g))throw Error("Illegal Argument");var y=new q({paths:[],spatialReference:c.spatialReference});y.addPath([c,v]);return x.geodesicLength(y,l.convertLinearUnitsToCode(k.defaultUndefined(u[2],-1)))})};z.densify=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof e))throw Error("Illegal Argument");c=k.toNumber(u[1]);if(isNaN(c))throw Error("Illegal Argument");if(0>=c)throw Error("Illegal Argument");
return u[0]instanceof d||u[0]instanceof q?x.densify(u[0],c,l.convertLinearUnitsToCode(k.defaultUndefined(u[2],-1))):u[0]instanceof m?x.densify(w(u[0]),c,l.convertLinearUnitsToCode(k.defaultUndefined(u[2],-1))):u[0]})};z.densifygeodetic=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof e))throw Error("Illegal Argument");c=k.toNumber(u[1]);if(isNaN(c))throw Error("Illegal Argument");if(0>=c)throw Error("Illegal Argument");
return u[0]instanceof d||u[0]instanceof q?x.geodesicDensify(u[0],c,l.convertLinearUnitsToCode(k.defaultUndefined(u[2],-1))):u[0]instanceof m?x.geodesicDensify(w(u[0]),c,l.convertLinearUnitsToCode(k.defaultUndefined(u[2],-1))):u[0]})};z.generalize=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,2,4);if(null===u[0])return null;if(!(u[0]instanceof e))throw Error("Illegal Argument");c=k.toNumber(u[1]);if(isNaN(c))throw Error("Illegal Argument");return x.generalize(u[0],
c,k.toBoolean(k.defaultUndefined(u[2],!0)),l.convertLinearUnitsToCode(k.defaultUndefined(u[3],-1)))})};z.buffer=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof e))throw Error("Illegal Argument");c=k.toNumber(u[1]);if(isNaN(c))throw Error("Illegal Argument");return 0===c?l.cloneGeometry(u[0]):x.buffer(u[0],c,l.convertLinearUnitsToCode(k.defaultUndefined(u[2],-1)))})};z.buffergeodetic=function(b,h){return A(b,
h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof e))throw Error("Illegal Argument");c=k.toNumber(u[1]);if(isNaN(c))throw Error("Illegal Argument");return 0===c?l.cloneGeometry(u[0]):x.geodesicBuffer(u[0],c,l.convertLinearUnitsToCode(k.defaultUndefined(u[2],-1)))})};z.offset=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,2,6);if(null===u[0])return null;if(!(u[0]instanceof d||u[0]instanceof q))throw Error("Illegal Argument");
c=k.toNumber(u[1]);if(isNaN(c))throw Error("Illegal Argument");v=k.toNumber(k.defaultUndefined(u[4],10));if(isNaN(v))throw Error("Illegal Argument");var y=k.toNumber(k.defaultUndefined(u[5],0));if(isNaN(y))throw Error("Illegal Argument");return x.offset(u[0],c,l.convertLinearUnitsToCode(k.defaultUndefined(u[2],-1)),k.toString(k.defaultUndefined(u[3],"round")).toLowerCase(),v,y)})};z.rotate=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,2,3);c=u[0];if(null===
c)return null;if(!(c instanceof e))throw Error("Illegal Argument");c instanceof m&&(c=d.fromExtent(c));v=k.toNumber(u[1]);if(isNaN(v))throw Error("Illegal Argument");u=k.defaultUndefined(u[2],null);if(null===u)return x.rotate(c,v);if(u instanceof g)return x.rotate(c,v,u);throw Error("Illegal Argument");})};z.centroid=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,1,1);if(null===u[0])return null;c=u[0];if(k.isArray(u[0])||k.isImmutableArray(u[0]))c=k.autoCastArrayOfPointsToMultiPoint(u[0],
b.spatialReference);if(null===c)return null;if(!(c instanceof e))throw Error("Illegal Argument");return c instanceof g?k.fixSpatialReference(l.cloneGeometry(u[0]),b.spatialReference):c instanceof d?c.getCentroid():c instanceof q?p.centroidPolyline(c):c instanceof f?p.centroidMultiPoint(c):c instanceof m?c.getCenter():null})};z.multiparttosinglepart=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,1,1);v=[];if(null===u[0])return null;if(!(u[0]instanceof e))throw Error("Illegal Argument");
if(u[0]instanceof g||u[0]instanceof m)return[k.fixSpatialReference(l.cloneGeometry(u[0]),b.spatialReference)];c=x.simplify(u[0]);if(c instanceof d){v=[];var y=[];for(u=0;u<c.rings.length;u++)if(c.isClockwise(c.rings[u])){var C=t.fromJson({rings:[c.rings[u]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJson()});v.push(C)}else y.push({ring:c.rings[u],pt:c.getPoint(u,0)});for(c=0;c<y.length;c++)for(u=0;u<v.length;u++)if(v[u].contains(y[c].pt)){v[u].addRing(y[c].ring);break}return v}if(c instanceof
q){v=[];for(u=0;u<c.paths.length;u++)y=t.fromJson({paths:[c.paths[u]],hasZ:!0===c.hasZ,hasM:!0===c.hasM,spatialReference:c.spatialReference.toJson()}),v.push(y);return v}if(u[0]instanceof f){c=k.fixSpatialReference(l.cloneGeometry(u[0]),b.spatialReference);for(u=0;u<c.points.length;u++)v.push(c.getPoint(u));return v}return null})};z.issimple=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,1,1);if(null===u[0])return!0;if(!(u[0]instanceof e))throw Error("Illegal Argument");
return x.isSimple(u[0])})};z.simplify=function(b,h){return A(b,h,function(c,v,u){u=k.autoCastFeatureToGeometry(u);k.pcCheck(u,1,1);if(null===u[0])return null;if(!(u[0]instanceof e))throw Error("Illegal Argument");return x.simplify(u[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(r,n,a,l){Object.defineProperty(n,"__esModule",{value:!0});n.cloneGeometry=n.sameGeomType=n.convertLinearUnitsToCode=n.shapeExtent=n.convertSquareUnitsToCode=
void 0;n.convertSquareUnitsToCode=function(k){if(void 0===k)return null;if("number"===typeof k)return k;switch(k.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};n.shapeExtent=function(k){if(null===k)return null;switch(k.type){case "polygon":case "multipoint":case "polyline":return k.extent;case "point":return new a({xmin:k.x,
ymin:k.y,xmax:k.x,ymax:k.y,spatialReference:k.spatialReference});case "extent":return k}return null};n.convertLinearUnitsToCode=function(k){if(void 0===k)return null;if("number"===typeof k||"number"===typeof k)return k;switch(k.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};n.sameGeomType=function(k,p){return k===p||"point"===k&&"esriGeometryPoint"===p||"polyline"===k&&"esriGeometryPolyline"===p||"polygon"===k&&"esriGeometryPolygon"===p||"extent"===k&&"esriGeometryEnvelope"===p||"multipoint"===k&&"esriGeometryMultipoint"===
p||"point"===p&&"esriGeometryPoint"===k||"polyline"===p&&"esriGeometryPolyline"===k||"polygon"===p&&"esriGeometryPolygon"===k||"extent"===p&&"esriGeometryEnvelope"===k||"multipoint"===p&&"esriGeometryMultipoint"===k?!0:!1};n.cloneGeometry=function(k){if(null===k)return null;var p=l.fromJson(k.toJson());k.getCacheValue("_geVersion")&&p.setCacheValue("_geVersion",k.getCacheValue("_geVersion"));return p}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","dojo/number"],
function(r,n,a,l){function k(p,m,e){if("undefined"===typeof e||0===+e)return Math[p](m);m=+m;e=+e;if(isNaN(m)||"number"!==typeof e||0!==e%1)return NaN;m=m.toString().split("e");m=Math[p](+(m[0]+"e"+(m[1]?+m[1]-e:-e)));m=m.toString().split("e");return+(m[0]+"e"+(m[1]?+m[1]+e:e))}Object.defineProperty(n,"__esModule",{value:!0});n.registerFunctions=void 0;n.registerFunctions=function(p,m){function e(f,g,d){f=a.toNumber(f);return isNaN(f)?f:isNaN(g)||isNaN(d)||g>d?NaN:f<g?g:f>d?d:f}p.number=function(f,
g){return m(f,g,function(d,q,t){a.pcCheck(t,1,2);d=t[0];return a.isNumber(d)?d:null===d?0:a.isDate(d)||a.isBoolean(d)?Number(d):a.isArray(d)?NaN:""===d||void 0===d?Number(d):a.isString(d)?void 0!==t[1]?(t=a.multiReplace(t[1],"\u2030",""),t=a.multiReplace(t,"\u00a4",""),l.parse(d,{pattern:t})):Number(d.trim()):Number(d)})};p.abs=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,1);return Math.abs(a.toNumber(t[0]))})};p.acos=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,1);return Math.acos(a.toNumber(t[0]))})};
p.asin=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,1);return Math.asin(a.toNumber(t[0]))})};p.atan=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,1);return Math.atan(a.toNumber(t[0]))})};p.atan2=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,2,2);return Math.atan2(a.toNumber(t[0]),a.toNumber(t[1]))})};p.ceil=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,2);return 2===t.length?(d=a.toNumber(t[1]),isNaN(d)&&(d=0),k("ceil",a.toNumber(t[0]),-1*d)):Math.ceil(a.toNumber(t[0]))})};
p.round=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,2);return 2===t.length?(d=a.toNumber(t[1]),isNaN(d)&&(d=0),k("round",a.toNumber(t[0]),-1*d)):Math.round(a.toNumber(t[0]))})};p.floor=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,2);return 2===t.length?(d=a.toNumber(t[1]),isNaN(d)&&(d=0),k("floor",a.toNumber(t[0]),-1*d)):Math.floor(a.toNumber(t[0]))})};p.cos=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,1);return Math.cos(a.toNumber(t[0]))})};p.isnan=function(f,
g){return m(f,g,function(d,q,t){a.pcCheck(t,1,1);return"number"===typeof t[0]&&isNaN(t[0])})};p.exp=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,1);return Math.exp(a.toNumber(t[0]))})};p.log=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,1);return Math.log(a.toNumber(t[0]))})};p.pow=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,2,2);return Math.pow(a.toNumber(t[0]),a.toNumber(t[1]))})};p.random=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,0,0);return Math.random()})};
p.sin=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,1);return Math.sin(a.toNumber(t[0]))})};p.sqrt=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,1);return Math.sqrt(a.toNumber(t[0]))})};p.tan=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,1);return Math.tan(a.toNumber(t[0]))})};p.defaultvalue=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,2,2);return null===t[0]||""===t[0]||void 0===t[0]?t[1]:t[0]})};p.isempty=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,
1,1);return null===t[0]||""===t[0]||void 0===t[0]?!0:!1})};p["boolean"]=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,1,1);return a.toBoolean(t[0])})};p.constrain=function(f,g){return m(f,g,function(d,q,t){a.pcCheck(t,3,3);d=a.toNumber(t[1]);q=a.toNumber(t[2]);if(a.isArray(t[0])){var w=[],x=0;for(t=t[0];x<t.length;x++)w.push(e(t[x],d,q));return w}if(a.isImmutableArray(t[0])){w=[];for(x=0;x<t[0].length();x++)w.push(e(t[0].get(x),d,q));return w}return e(t[0],d,q)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(r,n,a,l){function k(p,m,e,f){if(1===f.length){if(a.isArray(f[0]))return l.calculateStat(p,f[0],-1);if(a.isImmutableArray(f[0]))return l.calculateStat(p,f[0].toArray(),-1)}return l.calculateStat(p,f,-1)}Object.defineProperty(n,"__esModule",{value:!0});n.registerFunctions=void 0;n.registerFunctions=function(p,m){p.stdev=function(e,f){return m(e,f,function(g,d,q){return k("stdev",g,d,q)})};p.variance=function(e,f){return m(e,f,function(g,d,q){return k("variance",
g,d,q)})};p.average=function(e,f){return m(e,f,function(g,d,q){return k("mean",g,d,q)})};p.mean=function(e,f){return m(e,f,function(g,d,q){return k("mean",g,d,q)})};p.sum=function(e,f){return m(e,f,function(g,d,q){return k("sum",g,d,q)})};p.min=function(e,f){return m(e,f,function(g,d,q){return k("min",g,d,q)})};p.max=function(e,f){return m(e,f,function(g,d,q){return k("max",g,d,q)})};p.distinct=function(e,f){return m(e,f,function(g,d,q){return k("distinct",g,d,q)})};p.count=function(e,f){return m(e,
f,function(g,d,q){a.pcCheck(q,1,1);if(a.isArray(q[0])||a.isString(q[0]))return q[0].length;if(a.isImmutableArray(q[0]))return q[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(r,n,a){function l(p){for(var m=0,e=0;e<p.length;e++)m+=p[e];return m/p.length}function k(p){for(var m=l(p),e=0,f=0;f<p.length;f++)e+=Math.pow(m-p[f],2);return e/p.length}Object.defineProperty(n,"__esModule",
{value:!0});n.calculateStat=n.decodeStatType=void 0;n.decodeStatType=function(p){switch(p.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};n.calculateStat=function(p,m,e){void 0===e&&(e=1E3);switch(p.toLowerCase()){case "distinct":a:{p=e;e=[];for(var f={},g=[],d=0;d<m.length;d++){if(void 0!==
m[d]&&null!==m[d]&&m[d]!==a.voidOperation){var q=m[d];if(a.isNumber(q)||a.isString(q))void 0===f[q]&&(e.push(q),f[q]=1);else{for(var t=!1,w=0;w<g.length;w++)!0===a.equalityTest(g[w],q)&&(t=!0);!1===t&&(g.push(q),e.push(q))}}if(e.length>=p&&-1!==p){m=e;break a}}m=e}return m;case "avg":case "mean":return l(a.toNumberArray(m));case "min":return Math.min.apply(Math,a.toNumberArray(m));case "sum":m=a.toNumberArray(m);for(e=p=0;e<m.length;e++)p+=m[e];return p;case "max":return Math.max.apply(Math,a.toNumberArray(m));
case "stdev":case "stddev":return Math.sqrt(k(a.toNumberArray(m)));case "var":case "variance":return k(a.toNumberArray(m));case "count":return m.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Attachment ../Dictionary ../Feature ../languageUtils ../featureset/support/shared ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),function(r,
n,a,l,k,p,m,e,f,g,d,q,t,w,x){function z(A,B,b){if(null===A)B.updateUint8Array([0,139]);else if(m.isArray(A)){B.updateUint8Array([61]);if(b.map.has(A))A=b.map.get(A),B.updateIntArray([A^61237541]);else{b.map.set(A,b.currentLength++);for(var h=0;h<A.length;h++){var c=A[h];z(c,B,b)}b.map.delete(A);b.currentLength--}B.updateUint8Array([199])}else if(m.isImmutableArray(A)){B.updateUint8Array([61]);if(b.map.has(A))A=b.map.get(A),B.updateIntArray([A^61237541]);else{b.map.set(A,b.currentLength++);h=0;for(var v=
A.toArray();h<v.length;h++)c=v[h],z(c,B,b);b.map.delete(A);b.currentLength--}B.updateUint8Array([199])}else if(m.isDate(A))B.updateIntArray([A.getTime()]),B.updateUint8Array([241]);else if(m.isString(A))B.updateIntArray([A.length]),B.updateWithString(A),B.updateUint8Array([41]);else if(m.isBoolean(A))B.updateUint8Array([!0===A?1:0,113]);else if(m.isNumber(A))B.updateFloatArray([A]),B.updateUint8Array([173]);else{if(A instanceof l)throw Error("Type not supported in Hash");if(A instanceof a)throw Error("Type not supported in Hash");
if(A instanceof k){B.updateUint8Array([223]);if(b.map.has(A))A=b.map.get(A),B.updateIntArray([A^61237541]);else{b.map.set(A,b.currentLength++);h=0;for(v=A.keys();h<v.length;h++)c=v[h],B.updateIntArray([c.length]),B.updateWithString(c),B.updateUint8Array([251]),c=A.field(c),z(c,B,b),B.updateUint8Array([239]);b.map.delete(A);b.currentLength--}B.updateUint8Array([73])}else{if(A instanceof p)throw Error("Type not supported in Hash");if(A instanceof q)B.updateIntArray([3833836621]),B.updateIntArray([0]),
B.updateFloatArray([A.x]),B.updateIntArray([1]),B.updateFloatArray([A.y]),B.updateIntArray([3765347959]),z(A.spatialReference.wkid,B,b);else if(A instanceof t){B.updateIntArray([1266616829]);for(h=0;h<A.rings.length;h++){v=A.rings[h];var u=[],y=null,C=null;for(c=0;c<v.length;c++){var D=A.getPoint(h,c);if(0===c)y=D;else if(C.x===D.x&&C.y===D.y)continue;C=D;c===v.length-1&&y.x===D.x&&y.y===D.y||u.push(D)}B.updateIntArray([1397116793,u.length]);for(c=0;c<u.length;c++)D=u[c],B.updateIntArray([3962308117,
c]),z(D,B,b),B.updateIntArray([2716288009]);B.updateIntArray([2278822459])}B.updateIntArray([3878477243]);z(A.spatialReference.wkid,B,b)}else if(A instanceof w){B.updateIntArray([4106883559]);for(h=0;h<A.paths.length;h++){v=A.paths[h];B.updateIntArray([1397116793,v.length]);for(c=0;c<v.length;c++)B.updateIntArray([3962308117,c]),z(A.getPoint(h,c),B,b),B.updateIntArray([2716288009]);B.updateIntArray([2278822459])}B.updateIntArray([2568784753]);z(A.spatialReference.wkid,B,b)}else if(A instanceof d){B.updateIntArray([588535921,
A.points.length]);for(c=0;c<A.points.length;c++)h=A.getPoint(c),B.updateIntArray([c]),z(h,B,b);B.updateIntArray([1700171621]);z(A.spatialReference.wkid,B,b)}else if(A instanceof g)B.updateIntArray([3483648373]),B.updateIntArray([0]),B.updateFloatArray([A.xmax]),B.updateIntArray([1]),B.updateFloatArray([A.xmin]),B.updateIntArray([2]),B.updateFloatArray([A.ymax]),B.updateIntArray([3]),B.updateFloatArray([A.ymin]),B.updateIntArray([3622027469]),z(A.spatialReference.wkid,B,b);else if(A instanceof x)B.updateIntArray([14]),
void 0!==A.wkid&&null!==A.wkid&&B.updateIntArray([A.wkid]),A.wkt&&B.updateWithString(A.wkt);else{if(m.isFunctionParameter(A))throw Error("Type not supported in Hash");if(m.isFeatureSet(A))throw Error("Type not supported in Hash");m.isFeatureSetCollection(A);throw Error("Type not supported in Hash");}}}}Object.defineProperty(n,"__esModule",{value:!0});n.registerFunctions=void 0;n.registerFunctions=function(A,B){A.portal=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,1);return new a(m.toString(u[0]))})};
A.trim=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,1);return m.toString(u[0]).trim()})};A.tohex=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,1);c=m.toNumber(u[0]);return isNaN(c)?c:c.toString(16)})};A.upper=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,1);return m.toString(u[0]).toUpperCase()})};A.proper=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,2);c=1;2===u.length&&"firstword"===m.toString(u[1]).toLowerCase()&&(c=2);v=/\s/;u=m.toString(u[0]);for(var y=
"",C=!0,D=0;D<u.length;D++){var E=u[D];v.test(E)?1===c&&(C=!0):E.toUpperCase()!==E.toLowerCase()&&(C?(E=E.toUpperCase(),C=!1):E=E.toLowerCase());y+=E}return y})};A.lower=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,1);return m.toString(u[0]).toLowerCase()})};A.guid=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,0,1);if(0<u.length)switch(m.toString(u[0]).toLowerCase()){case "digits":return m.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return m.generateUUID();
case "digits-hyphen-parentheses":return"("+m.generateUUID()+")"}return"{"+m.generateUUID()+"}"})};A.console=function(b,h){return B(b,h,function(c,v,u){0!==u.length&&(1===u.length?b.console(m.toString(u[0])):b.console(m.toString(u)));return m.voidOperation})};A.mid=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,2,3);c=m.toNumber(u[1]);if(isNaN(c))return"";0>c&&(c=0);if(2===u.length)return m.toString(u[0]).substr(c);v=m.toNumber(u[2]);if(isNaN(v))return"";0>v&&(v=0);return m.toString(u[0]).substr(c,
v)})};A.find=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,2,3);c=0;if(2<u.length){c=m.toNumber(m.defaultUndefined(u[2],0));if(isNaN(c))return-1;0>c&&(c=0)}return m.toString(u[1]).indexOf(m.toString(u[0]),c)})};A.left=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,2,2);c=m.toNumber(u[1]);if(isNaN(c))return"";0>c&&(c=0);return m.toString(u[0]).substr(0,c)})};A.right=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,2,2);c=m.toNumber(u[1]);if(isNaN(c))return"";0>c&&(c=0);return m.toString(u[0]).substr(-1*
c,c)})};A.split=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,2,4);c=m.toNumber(m.defaultUndefined(u[2],-1));v=m.toBoolean(m.defaultUndefined(u[3],!1));-1===c||null===c||!0===v?u=m.toString(u[0]).split(m.toString(u[1])):(isNaN(c)&&(c=-1),-1>c&&(c=-1),u=m.toString(u[0]).split(m.toString(u[1]),c));if(!1===v)return u;v=[];for(var y=0;y<u.length&&!(-1!==c&&v.length>=c);y++)""!==u[y]&&void 0!==u[y]&&v.push(u[y]);return v})};A.text=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,2);return m.toStringExplicit(u[0],
u[1])})};A.concatenate=function(b,h){return B(b,h,function(c,v,u){c=[];if(1>u.length)return"";if(m.isArray(u[0])){v=m.defaultUndefined(u[2],"");for(var y=0;y<u[0].length;y++)c[y]=m.toStringExplicit(u[0][y],v);return 1<u.length?c.join(u[1]):c.join("")}if(m.isImmutableArray(u[0])){v=m.defaultUndefined(u[2],"");for(y=0;y<u[0].length();y++)c[y]=m.toStringExplicit(u[0].get(y),v);return 1<u.length?c.join(u[1]):c.join("")}for(y=0;y<u.length;y++)c[y]=m.toStringExplicit(u[y]);return c.join("")})};A.reverse=
function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,1);if(m.isArray(u[0]))return c=u[0].slice(0),c.reverse(),c;if(m.isImmutableArray(u[0]))return c=u[0].toArray().slice(0),c.reverse(),c;throw Error("Invalid Parameter");})};A.replace=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,3,4);c=m.toString(u[0]);v=m.toString(u[1]);var y=m.toString(u[2]);return(4===u.length?m.toBoolean(u[3]):1)?m.multiReplace(c,v,y):c.replace(v,y)})};A.schema=function(b,h){return B(b,h,function(c,v,u){if(u[0]instanceof
p)return(c=u[0].schema())?k.convertObjectToArcadeDictionary(c):null;throw Error("Invalid Parameter");})};A.subtypes=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,1);if(u[0]instanceof p)return(c=u[0].subtypes())?k.convertObjectToArcadeDictionary(c):null;throw Error("Invalid Parameter");})};A.subtypecode=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,1);if(u[0]instanceof p){v=u[0].subtypes();if(!v)return null;if(v.subtypeField&&u[0].hasField(v.subtypeField))for(u=u[0].field(v.subtypeField),
c=0,v=v.subtypes;c<v.length;c++){var y=v[c];if(y.code===u)return y.code}return null}throw Error("Invalid Parameter");})};A.subtypename=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,1);if(u[0]instanceof p){v=u[0].subtypes();if(!v)return"";if(v.subtypeField&&u[0].hasField(v.subtypeField))for(u=u[0].field(v.subtypeField),c=0,v=v.subtypes;c<v.length;c++){var y=v[c];if(y.code===u)return y.name}return""}throw Error("Invalid Parameter");})};A.gdbversion=function(b,h){return B(b,h,function(c,v,
u){m.pcCheck(u,1,1);if(u[0]instanceof p)return u[0].gdbVersion();throw Error("Invalid Parameter");})};A.domain=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,2,3);if(u[0]instanceof p)return(c=u[0].fullDomain(m.toString(u[1]),void 0===u[2]?void 0:m.toNumber(u[2])))&&c.domain?"coded-value"===c.domain.type||"codedValue"===c.domain.type?k.convertObjectToArcadeDictionary({type:"codedValue",name:c.domain.name,dataType:e.layerFieldEsriConstants[c.field.type],codedValues:c.domain.codedValues.map(function(y){return{name:y.name,
code:y.code}})}):k.convertObjectToArcadeDictionary({type:"range",name:c.domain.name,dataType:e.layerFieldEsriConstants[c.field.type],min:c.domain.min,max:c.domain.max}):null;throw Error("Invalid Parameter");})};A.domainname=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,2,4);if(u[0]instanceof p)return u[0].domainValueLookup(m.toString(u[1]),u[2],void 0===u[3]?void 0:m.toNumber(u[3]));throw Error("Invalid Parameter");})};A.domaincode=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,2,
4);if(u[0]instanceof p)return u[0].domainCodeLookup(m.toString(u[1]),u[2],void 0===u[3]?void 0:m.toNumber(u[3]));throw Error("Invalid Parameter");})};A.urlencode=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,1);if(null===u[0])return"";if(u[0]instanceof k){c="";v=0;for(var y=u[0].keys();v<y.length;v++){var C=y[v],D=u[0].field(C);""!==c&&(c+="\x26");c=null===D?c+(encodeURIComponent(C)+"\x3d"):c+(encodeURIComponent(C)+"\x3d"+encodeURIComponent(D))}return c}return encodeURIComponent(m.toString(u[0]))})};
A.hash=function(b,h){return B(b,h,function(c,v,u){m.pcCheck(u,1,1);c=new f.XXH(0);z(u[0],c,{map:new Map,currentLength:0});return c.digest()})}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(r,n){function a(l){for(var k=[],p=0,m=l.length;p<m;p++){var e=l.charCodeAt(p);128>e?k.push(e):2048>e?k.push(192|e>>6,128|e&63):55296>e||57344<=e?k.push(224|e>>12,128|e>>6&63,128|e&63):(p++,e=65536+((e&1023)<<10|l.charCodeAt(p)&1023),k.push(240|e>>18,128|e>>12&63,128|e>>6&63,128|
e&63))}return new Uint8Array(k)}Object.defineProperty(n,"__esModule",{value:!0});n.XXH=void 0;r=function(){function l(k){this.seed=k;this.totallen=0;this.bufs=[];this.init()}l.prototype.init=function(){this.bufs=[];this.totallen=0;return this};l.prototype.updateFloatArray=function(k){for(var p=[],m=0;m<k.length;m++){var e=k[m];isNaN(e)?p.push("NaN"):Infinity===e?p.push("Infinity"):-Infinity===e?p.push("-Infinity"):0===e?p.push("0"):p.push(e.toString(16))}this.update(a(p.join("")))};l.prototype.updateIntArray=
function(k){k=Int32Array.from(k);this.update(new Uint8Array(k.buffer))};l.prototype.updateUint8Array=function(k){this.update(Uint8Array.from(k))};l.prototype.updateWithString=function(k){return this.update(a(k))};l.prototype.update=function(k){this.bufs.push(k);this.totallen+=k.length;return this};l.prototype.digest=function(){for(var k=new Uint8Array(this.totallen),p=0,m=0,e=this.bufs;m<e.length;m++){var f=e[m];k.set(f,p);p+=f.length}this.init();return this.xxHash32(k,this.seed)};l.prototype.xxHash32=
function(k,p){void 0===p&&(p=0);var m=p+374761393&4294967295,e=0;if(16<=k.length){m=[p+2654435761+2246822519&4294967295,p+2246822519&4294967295,p+0&4294967295,p-2654435761&4294967295];var f=k.length-16;for(e=p=0;(e&4294967280)<=f;e+=4){var g=e,d=k[g+0]+(k[g+1]<<8);g=k[g+2]+(k[g+3]<<8);d=m[p]+(2246822519*d+(2246822519*g<<16))&4294967295;d=d<<13|d>>>19;m[p]=2654435761*(d&65535)+(2654435761*(d>>>16)<<16)&4294967295;p=p+1&3}m=(m[0]<<1|m[0]>>>31)+(m[1]<<7|m[1]>>>25)+(m[2]<<12|m[2]>>>20)+(m[3]<<18|m[3]>>>
14)&4294967295}m=m+k.length&4294967295;for(p=k.length-4;e<=p;e+=4)g=e,d=k[g+0]+(k[g+1]<<8),g=k[g+2]+(k[g+3]<<8),m=m+(3266489917*d+(3266489917*g<<16))&4294967295,m=m<<17|m>>>15,m=668265263*(m&65535)+(668265263*(m>>>16)<<16)&4294967295;for(;e<k.length;++e)p=k[e],m+=374761393*p,m=m<<11|m>>>21,m=2654435761*(m&65535)+(2654435761*(m>>>16)<<16)&4294967295;m^=m>>>15;m=(2246822519*(m&65535)&4294967295)+(2246822519*(m>>>16)<<16);m^=m>>>13;m=(3266489917*(m&65535)&4294967295)+(3266489917*(m>>>16)<<16);m^=m>>>
16;return 0>m?m+4294967296:m};return l}();n.XXH=r})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B,b,h,c,v,u,y,C){function D(ba,ea){for(var ja=[],oa=0;oa<ea.arguments.length;oa++)ja.push(F(ba,ea.arguments[oa]));return ja}function E(ba,ea,ja){try{return ja(ba,ea,D(ba,ea))}catch(oa){throw oa;}}function F(ba,ea){try{switch(ea.type){case "EmptyStatement":return g.voidOperation;case "VariableDeclarator":var ja=null===ea.init?null:F(ba,ea.init);ja===g.voidOperation&&(ja=null);if("Identifier"!==ea.id.type)throw Error("Can only assign a regular variable");var oa=
ea.id.name.toLowerCase();null!==ba.localScope?ba.localScope[oa]={value:ja,valueset:!0,node:ea.init}:ba.globalScope[oa]={value:ja,valueset:!0,node:ea.init};return g.voidOperation;case "VariableDeclaration":for(var ka=0;ka<ea.declarations.length;ka++)F(ba,ea.declarations[ka]);return g.voidOperation;case "BlockStatement":a:{var Ca=g.voidOperation;for(ka=0;ka<ea.body.length;ka++)if(Ca=F(ba,ea.body[ka]),Ca instanceof g.ReturnResult||Ca===g.breakResult||Ca===g.continueResult){var Y=Ca;break a}Y=Ca}return Y;
case "FunctionDeclaration":var aa=ea.id.name.toLowerCase();ba.globalScope[aa]={valueset:!0,node:null,value:new m(ea,ba)};return g.voidOperation;case "ReturnStatement":if(null===ea.argument)var L=new g.ReturnResult(g.voidOperation);else{var la=F(ba,ea.argument);L=new g.ReturnResult(la)}return L;case "IfStatement":if("AssignmentExpression"===ea.test.type||"UpdateExpression"===ea.test.type)throw Error(d.nodeErrorMessage(ea.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ua=F(ba,ea.test);if(!0===
ua)var T=F(ba,ea.consequent);else if(!1===ua)T=null!==ea.alternate?F(ba,ea.alternate):g.voidOperation;else throw Error(d.nodeErrorMessage(ea,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return T;case "ExpressionStatement":if("AssignmentExpression"===ea.expression.type||"UpdateExpression"===ea.expression.type)var Ja=F(ba,ea.expression);else{var Ea=F(ba,ea.expression);Ja=Ea===g.voidOperation?g.voidOperation:new g.ImplicitResult(Ea)}return Ja;case "AssignmentExpression":var ia=F(ba,ea.right);ka=
null;var Fa="";if("MemberExpression"===ea.left.type){ka=F(ba,ea.left.object);!0===ea.left.computed?Fa=F(ba,ea.left.property):"Identifier"===ea.left.property.type&&(Fa=ea.left.property.name);if(g.isArray(ka))if(g.isNumber(Fa)){0>Fa&&(Fa=ka.length+Fa);if(0>Fa||Fa>ka.length)throw Error("Assignment outside of array bounds");if(Fa===ka.length&&"\x3d"!==ea.operator)throw Error("Invalid Parameter");ka[Fa]=J(ia,ea.operator,ka[Fa],ea)}else throw Error("Invalid Parameter");else if(ka instanceof k){if(!1===
g.isString(Fa))throw Error("Dictionary accessor must be a string");if(!0===ka.hasField(Fa))ka.setField(Fa,J(ia,ea.operator,ka.field(Fa),ea));else{if("\x3d"!==ea.operator)throw Error("Invalid Parameter");ka.setField(Fa,J(ia,ea.operator,null,ea))}}else if(ka instanceof p){if(!1===g.isString(Fa))throw Error("Feature accessor must be a string");if(!0===ka.hasField(Fa))ka.setField(Fa,J(ia,ea.operator,ka.field(Fa),ea));else{if("\x3d"!==ea.operator)throw Error("Invalid Parameter");ka.setField(Fa,J(ia,ea.operator,
null,ea))}}else{if(g.isImmutableArray(ka))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var Ka=g.voidOperation}else if(ka=ea.left.name.toLowerCase(),null!==ba.localScope&&void 0!==ba.localScope[ka])ba.localScope[ka]={value:J(ia,ea.operator,ba.localScope[ka].value,ea),valueset:!0,node:ea.right},Ka=g.voidOperation;else if(void 0!==ba.globalScope[ka])ba.globalScope[ka]={value:J(ia,ea.operator,ba.globalScope[ka].value,ea),valueset:!0,node:ea.right},Ka=g.voidOperation;else throw Error("Variable not recognised");
return Ka;case "UpdateExpression":ka=null;Fa="";if("MemberExpression"===ea.argument.type){ka=F(ba,ea.argument.object);!0===ea.argument.computed?Fa=F(ba,ea.argument.property):"Identifier"===ea.argument.property.type&&(Fa=ea.argument.property.name);if(g.isArray(ka))if(g.isNumber(Fa)){0>Fa&&(Fa=ka.length+Fa);if(0>Fa||Fa>=ka.length)throw Error("Assignment outside of array bounds");var pa=g.toNumber(ka[Fa]);ka[Fa]="++"===ea.operator?pa+1:pa-1}else throw Error("Invalid Parameter");else if(ka instanceof
k){if(!1===g.isString(Fa))throw Error("Dictionary accessor must be a string");if(!0===ka.hasField(Fa))pa=g.toNumber(ka.field(Fa)),ka.setField(Fa,"++"===ea.operator?pa+1:pa-1);else throw Error("Invalid Parameter");}else if(ka instanceof p){if(!1===g.isString(Fa))throw Error("Feature accessor must be a string");if(!0===ka.hasField(Fa))pa=g.toNumber(ka.field(Fa)),ka.setField(Fa,"++"===ea.operator?pa+1:pa-1);else throw Error("Invalid Parameter");}else{if(g.isImmutableArray(ka))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var ya=!1===ea.prefix?pa:"++"===ea.operator?pa+1:pa-1}else{ka="Identifier"===ea.argument.type?ea.argument.name.toLowerCase():"";if(!ka)throw Error("Invalid identifier");if(null!==ba.localScope&&void 0!==ba.localScope[ka])pa=g.toNumber(ba.localScope[ka].value),ba.localScope[ka]={value:"++"===ea.operator?pa+1:pa-1,valueset:!0,node:ea},ya=!1===ea.prefix?pa:"++"===ea.operator?pa+1:pa-1;else if(void 0!==ba.globalScope[ka])pa=g.toNumber(ba.globalScope[ka].value),ba.globalScope[ka]=
{value:"++"===ea.operator?pa+1:pa-1,valueset:!0,node:ea},ya=!1===ea.prefix?pa:"++"===ea.operator?pa+1:pa-1;else throw Error("Variable not recognised");}return ya;case "BreakStatement":return g.breakResult;case "ContinueStatement":return g.continueResult;case "TemplateElement":return ea.value?ea.value.cooked:"";case "TemplateLiteral":var Ba="",Aa=0;Ka=0;for(ka=ea.quasis;Ka<ka.length;Ka++)if(Fa=ka[Ka],Ba+=Fa.value?Fa.value.cooked:"",!1===Fa.tail){var ta=ea.expressions[Aa]?g.toString(F(ba,ea.expressions[Aa])):
"";Ba+=ta;Aa++}return Ba;case "ForStatement":null!==ea.init&&F(ba,ea.init);Aa={testResult:!0,lastAction:g.voidOperation};do b:{ka=ba;Fa=ea;ta=Aa;if(null!==Fa.test){ta.testResult=F(ka,Fa.test);if(!1===ta.testResult)break b;if(!0!==ta.testResult)throw Error(d.nodeErrorMessage(Fa,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}ta.lastAction=F(ka,Fa.body);ta.lastAction===g.breakResult?ta.testResult=!1:ta.lastAction instanceof g.ReturnResult?ta.testResult=!1:null!==Fa.update&&F(ka,Fa.update)}while(!0===
Aa.testResult);Ba=Aa.lastAction instanceof g.ReturnResult?Aa.lastAction:g.voidOperation;return Ba;case "ForInStatement":return G(ba,ea);case "Identifier":return V(ba,ea);case "MemberExpression":return O(ba,ea);case "Literal":return ea.value;case "CallExpression":return Q(ba,ea);case "UnaryExpression":return P(ba,ea);case "BinaryExpression":return U(ba,ea);case "LogicalExpression":return K(ba,ea);case "ConditionalExpression":throw Error(d.nodeErrorMessage(ea,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(ka=
[],Fa=0;Fa<ea.elements.length;Fa++){var za=F(ba,ea.elements[Fa]);if(g.isFunctionParameter(za))throw Error(d.nodeErrorMessage(ea,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));za===g.voidOperation?ka.push(null):ka.push(za)}}catch(Ha){throw Ha;}return ka;case "ObjectExpression":ka={};for(Fa=0;Fa<ea.properties.length;Fa++){var wa=F(ba,ea.properties[Fa]);if(g.isFunctionParameter(wa.value))throw Error("Illegal Argument");if(!1===g.isString(wa.key))throw Error("Illegal Argument");ka[wa.key.toString()]=wa.value===
g.voidOperation?null:wa.value}var Ia=new k(ka);Ia.immutable=!1;return Ia;case "Property":return{key:"Identifier"===ea.key.type?ea.key.name:F(ba,ea.key),value:F(ba,ea.value)};default:throw Error(d.nodeErrorMessage(ea,"RUNTIME","UNREOGNISED"));}}catch(Ha){throw Ha;}}function G(ba,ea){var ja=F(ba,ea.right);"VariableDeclaration"===ea.left.type&&F(ba,ea.left);var oa=null,ka="";if("VariableDeclaration"===ea.left.type){var Ca=ea.left.declarations[0].id;"Identifier"===Ca.type&&(ka=Ca.name)}else"Identifier"===
ea.left.type&&(ka=ea.left.name);if(!ka)throw Error(d.nodeErrorMessage(ea,"RUNTIME","INVALIDVARIABLE"));ka=ka.toLowerCase();null!==ba.localScope&&void 0!==ba.localScope[ka]&&(oa=ba.localScope[ka]);null===oa&&void 0!==ba.globalScope[ka]&&(oa=ba.globalScope[ka]);if(null===oa)throw Error(d.nodeErrorMessage(ea,"RUNTIME","VARIABLENOTDECLARED"));if(g.isArray(ja)||g.isString(ja)){ja=ja.length;for(Ca=0;Ca<ja;Ca++){oa.value=Ca;ka=F(ba,ea.body);if(ka===g.breakResult)break;if(ka instanceof g.ReturnResult)return ka}return g.voidOperation}if(g.isImmutableArray(ja)){for(Ca=
0;Ca<ja.length();Ca++){oa.value=Ca;ka=F(ba,ea.body);if(ka===g.breakResult)break;if(ka instanceof g.ReturnResult)return ka}return g.voidOperation}if(ja instanceof k||ja instanceof p)for(ja=ja.keys(),Ca=0;Ca<ja.length;Ca++){oa.value=ja[Ca];ka=F(ba,ea.body);if(ka===g.breakResult)break;if(ka instanceof g.ReturnResult)return ka}else return g.voidOperation}function J(ba,ea,ja,oa){switch(ea){case "\x3d":return ba===g.voidOperation?null:ba;case "/\x3d":return g.toNumber(ja)/g.toNumber(ba);case "*\x3d":return g.toNumber(ja)*
g.toNumber(ba);case "-\x3d":return g.toNumber(ja)-g.toNumber(ba);case "+\x3d":return g.isString(ja)||g.isString(ba)?g.toString(ja)+g.toString(ba):g.toNumber(ja)+g.toNumber(ba);case "%\x3d":return g.toNumber(ja)%g.toNumber(ba);default:throw Error(d.nodeErrorMessage(oa,"RUNTIME","OPERATORNOTRECOGNISED"));}}function R(ba,ea,ja){ea=ea.toLowerCase();switch(ea){case "hasz":return ba=ba.hasZ,void 0===ba?!1:ba;case "hasm":return ba=ba.hasM,void 0===ba?!1:ba;case "spatialreference":return ea=ba.spatialReference._arcadeCacheId,
void 0===ea&&(ja=!0,Object.freeze&&Object.isFrozen(ba.spatialReference)&&(ja=!1),ja&&(na++,ea=ba.spatialReference._arcadeCacheId=na)),ba=new k({wkt:ba.spatialReference.wkt,wkid:ba.spatialReference.wkid}),void 0!==ea&&(ba._arcadeCacheId="SPREF"+ea.toString()),ba}switch(ba.type){case "extent":switch(ea){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return ba=ba[ea],void 0!==ba?ba:null;case "type":return"Extent"}break;case "polygon":switch(ea){case "rings":return ea=
ba.getCacheValue("_arcadeCacheId"),void 0===ea&&(na++,ea=na,ba.setCacheValue("_arcadeCacheId",ea)),ba=new e(ba.rings,ba.spatialReference,!0===ba.hasZ,!0===ba.hasM,ea);case "type":return"Polygon"}break;case "point":switch(ea){case "x":case "y":case "z":case "m":return void 0!==ba[ea]?ba[ea]:null;case "type":return"Point"}break;case "polyline":switch(ea){case "paths":return ea=ba.getCacheValue("_arcadeCacheId"),void 0===ea&&(na++,ea=na,ba.setCacheValue("_arcadeCacheId",ea)),ba=new e(ba.paths,ba.spatialReference,
!0===ba.hasZ,!0===ba.hasM,ea);case "type":return"Polyline"}break;case "multipoint":switch(ea){case "points":return ea=ba.getCacheValue("_arcadeCacheId"),void 0===ea&&(na++,ea=na,ba.setCacheValue("_arcadeCacheId",ea)),ba=new f(ba.points,ba.spatialReference,!0===ba.hasZ,!0===ba.hasM,ea,1);case "type":return"Multipoint"}}throw Error(d.nodeErrorMessage(ja,"RUNTIME","PROPERTYNOTFOUND"));}function O(ba,ea){try{var ja=F(ba,ea.object);if(null===ja)throw Error(d.nodeErrorMessage(ea,"RUNTIME","NOTFOUND"));
if(!1===ea.computed){if("Identifier"===ea.property.type){if(ja instanceof k||ja instanceof p)return ja.field(ea.property.name);if(ja instanceof h)return R(ja,ea.property.name,ea)}throw Error(d.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}var oa=F(ba,ea.property);if(ja instanceof k||ja instanceof p){if(g.isString(oa))return ja.field(oa);throw Error(d.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(ja instanceof h){if(g.isString(oa))return R(ja,oa,ea);throw Error(d.nodeErrorMessage(ea,"RUNTIME",
"INVALIDTYPE"));}if(g.isArray(ja)){if(g.isNumber(oa)&&isFinite(oa)&&Math.floor(oa)===oa){0>oa&&(oa=ja.length+oa);if(oa>=ja.length||0>oa)throw Error(d.nodeErrorMessage(ea,"RUNTIME","OUTOFBOUNDS"));return ja[oa]}throw Error(d.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}if(g.isString(ja)){if(g.isNumber(oa)&&isFinite(oa)&&Math.floor(oa)===oa){0>oa&&(oa=ja.length+oa);if(oa>=ja.length||0>oa)throw Error(d.nodeErrorMessage(ea,"RUNTIME","OUTOFBOUNDS"));return ja[oa]}throw Error(d.nodeErrorMessage(ea,"RUNTIME",
"INVALIDTYPE"));}if(g.isImmutableArray(ja)&&g.isNumber(oa)&&isFinite(oa)&&Math.floor(oa)===oa){0>oa&&(oa=ja.length()+oa);if(oa>=ja.length()||0>oa)throw Error(d.nodeErrorMessage(ea,"RUNTIME","OUTOFBOUNDS"));return ja.get(oa)}throw Error(d.nodeErrorMessage(ea,"RUNTIME","INVALIDTYPE"));}catch(ka){throw ka;}}function P(ba,ea){try{var ja=F(ba,ea.argument);if(g.isBoolean(ja)){if("!"===ea.operator)return!ja;if("-"===ea.operator)return-1*g.toNumber(ja);if("+"===ea.operator)return 1*g.toNumber(ja);if("~"===
ea.operator)return~g.toNumber(ja);throw Error(d.nodeErrorMessage(ea,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===ea.operator)return~g.toNumber(ja);if("-"===ea.operator)return-1*g.toNumber(ja);if("+"===ea.operator)return 1*g.toNumber(ja);throw Error(d.nodeErrorMessage(ea,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(oa){throw oa;}}function U(ba,ea){try{var ja=[F(ba,ea.left),F(ba,ea.right)],oa=ja[0],ka=ja[1];switch(ea.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return g.binaryOperator(g.toNumber(oa),
g.toNumber(ka),ea.operator);case "\x3d\x3d":return g.equalityTest(oa,ka);case "!\x3d":return!g.equalityTest(oa,ka);case "\x3c":return g.greaterThanLessThan(oa,ka,ea.operator);case "\x3e":return g.greaterThanLessThan(oa,ka,ea.operator);case "\x3c\x3d":return g.greaterThanLessThan(oa,ka,ea.operator);case "\x3e\x3d":return g.greaterThanLessThan(oa,ka,ea.operator);case "+":return g.isString(oa)||g.isString(ka)?g.toString(oa)+g.toString(ka):g.toNumber(oa)+g.toNumber(ka);case "-":return g.toNumber(oa)-
g.toNumber(ka);case "*":return g.toNumber(oa)*g.toNumber(ka);case "/":return g.toNumber(oa)/g.toNumber(ka);case "%":return g.toNumber(oa)%g.toNumber(ka);default:throw Error(d.nodeErrorMessage(ea,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(Ca){throw Ca;}}function K(ba,ea){try{if("AssignmentExpression"===ea.left.type||"UpdateExpression"===ea.left.type)throw Error(d.nodeErrorMessage(ea.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===ea.right.type||"UpdateExpression"===
ea.right.type)throw Error(d.nodeErrorMessage(ea.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ja=F(ba,ea.left);if(g.isBoolean(ja))switch(ea.operator){case "||":if(!0===ja)return ja;var oa=F(ba,ea.right);if(g.isBoolean(oa))return oa;throw Error(d.nodeErrorMessage(ea,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===ja)return ja;oa=F(ba,ea.right);if(g.isBoolean(oa))return oa;throw Error(d.nodeErrorMessage(ea,"RUNTIME","ONLYORORAND"));default:throw Error(d.nodeErrorMessage(ea,"RUNTIME",
"ONLYORORAND"));}throw Error(d.nodeErrorMessage(ea,"RUNTIME","ONLYBOOLEAN"));}catch(ka){throw ka;}}function V(ba,ea){try{var ja=ea.name.toLowerCase();if(null!==ba.localScope&&void 0!==ba.localScope[ja]){var oa=ba.localScope[ja];if(!0===oa.valueset)return oa.value;oa.value=F(ba,oa.node);oa.valueset=!0;return oa.value}if(void 0!==ba.globalScope[ja]){oa=ba.globalScope[ja];if(!0===oa.valueset)return oa.value;oa.value=F(ba,oa.node);oa.valueset=!0;return oa.value}throw Error(d.nodeErrorMessage(ea,"RUNTIME",
"VARIABLENOTFOUND"));}catch(ka){throw ka;}}function Q(ba,ea){try{if("Identifier"!==ea.callee.type)throw Error(d.nodeErrorMessage(ea,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==ba.localScope&&void 0!==ba.localScope[ea.callee.name.toLowerCase()]){var ja=ba.localScope[ea.callee.name.toLowerCase()];if(ja.value instanceof g.NativeFunction)return ja.value.fn(ba,ea);if(ja.value instanceof m)return ca(ba,ea,ja.value.definition);throw Error(d.nodeErrorMessage(ea,"RUNTIME","NOTAFUNCTION"));}if(void 0!==ba.globalScope[ea.callee.name.toLowerCase()]){ja=
ba.globalScope[ea.callee.name.toLowerCase()];if(ja.value instanceof g.NativeFunction)return ja.value.fn(ba,ea);if(ja.value instanceof m)return ca(ba,ea,ja.value.definition);throw Error(d.nodeErrorMessage(ea,"RUNTIME","NOTAFUNCTION"));}throw Error(d.nodeErrorMessage(ea,"RUNTIME","NOTFOUND"));}catch(oa){throw oa;}}function W(ba){return null==ba?"":g.isArray(ba)||g.isImmutableArray(ba)?"Array":g.isDate(ba)?"Date":g.isString(ba)?"String":g.isBoolean(ba)?"Boolean":g.isNumber(ba)?"Number":ba instanceof
l?"Attachment":ba instanceof a?"Portal":ba instanceof k?"Dictionary":ba instanceof p?"Feature":ba instanceof v?"Point":ba instanceof u?"Polygon":ba instanceof y?"Polyline":ba instanceof c?"Multipoint":ba instanceof b?"Extent":g.isFunctionParameter(ba)?"Function":g.isFeatureSet(ba)?"FeatureSet":g.isFeatureSetCollection(ba)?"FeatureSetCollection":ba===g.voidOperation?"":"number"===typeof ba&&isNaN(ba)?"Number":"Unrecognised Type"}function N(ba,ea,ja,oa){try{var ka=F(ba,ea.arguments[ja]);if(g.equalityTest(ka,
oa))return F(ba,ea.arguments[ja+1]);var Ca=ea.arguments.length-ja;return 1===Ca?F(ba,ea.arguments[ja]):2===Ca?null:3===Ca?F(ba,ea.arguments[ja+2]):N(ba,ea,ja+2,oa)}catch(Y){throw Y;}}function I(ba,ea,ja,oa){try{if(!0===oa)return F(ba,ea.arguments[ja+1]);if(3===ea.arguments.length-ja)return F(ba,ea.arguments[ja+2]);var ka=F(ba,ea.arguments[ja+2]);if(!1===g.isBoolean(ka))throw Error("WHEN needs boolean test conditions");return I(ba,ea,ja+2,ka)}catch(Ca){throw Ca;}}function S(ba,ea){var ja=ba.length,
oa=Math.floor(ja/2);if(0===ja)return[];if(1===ja)return[ba[0]];var ka=S(ba.slice(0,oa),ea);ba=S(ba.slice(oa,ja),ea);for(ja=[];0<ka.length||0<ba.length;)0<ka.length&&0<ba.length?(oa=ea(ka[0],ba[0]),isNaN(oa)&&(oa=0),0>=oa?(ja.push(ka[0]),ka=ka.slice(1)):(ja.push(ba[0]),ba=ba.slice(1))):0<ka.length?(ja.push(ka[0]),ka=ka.slice(1)):0<ba.length&&(ja.push(ba[0]),ba=ba.slice(1));return ja}function Z(ba,ea,ja){try{var oa=ba.body;if(ja.length!==ba.params.length)throw Error("Invalid Parameter calls to function.");
for(var ka=0;ka<ja.length;ka++)ea.localScope[ba.params[ka].name.toLowerCase()]={value:ja[ka],valueset:!0,node:null};var Ca=F(ea,oa);if(Ca instanceof g.ReturnResult)return Ca.value;if(Ca===g.breakResult)throw Error("Cannot Break from a Function");if(Ca===g.continueResult)throw Error("Cannot Continue from a Function");return Ca instanceof g.ImplicitResult?Ca.value:Ca}catch(Y){throw Y;}}function ca(ba,ea,ja){return E(ba,ea,function(oa,ka,Ca){oa={spatialReference:ba.spatialReference,globalScope:ba.globalScope,
depthCounter:ba.depthCounter+1,console:ba.console,lrucache:ba.lrucache,localScope:{}};if(64<oa.depthCounter)throw Error("Exceeded maximum function depth");return Z(ja,oa,Ca)})}function fa(ba){return function(){var ea={spatialReference:ba.context.spatialReference,console:ba.context.console,lrucache:ba.context.lrucache,localScope:{},depthCounter:ba.context.depthCounter+1,globalScope:ba.context.globalScope};if(64<ea.depthCounter)throw Error("Exceeded maximum function depth");return Z(ba.definition,ea,
arguments)}}function ha(ba){}Object.defineProperty(n,"__esModule",{value:!0});n.findFunctionCalls=n.referencesFunction=n.referencesMember=n.validateScript=n.extractFieldLiterals=n.executeScript=n.extend=n.functionHelper=void 0;var na=0,ma={};q.registerFunctions(ma,E);t.registerFunctions(ma,E);B.registerFunctions(ma,E);z.registerFunctions(ma,E);w.registerFunctions(ma,E);A.registerFunctions(ma,E);x.registerFunctions(ma,E);ma["typeof"]=function(ba,ea){return E(ba,ea,function(ja,oa,ka){g.pcCheck(ka,1,
1);ja=W(ka[0]);if("Unrecognised Type"===ja)throw Error("Unrecognised Type");return ja})};ma.iif=function(ba,ea){try{g.pcCheck(null===ea.arguments?[]:ea.arguments,3,3);var ja=F(ba,ea.arguments[0]);if(!1===g.isBoolean(ja))throw Error("IF Function must have a boolean test condition");var oa=F(ba,ea.arguments[1]),ka=F(ba,ea.arguments[2]);return!0===ja?oa:ka}catch(Ca){throw Ca;}};ma.decode=function(ba,ea){try{if(2>ea.arguments.length)throw Error("Missing Parameters");if(2===ea.arguments.length)return F(ba,
ea.arguments[1]);if(0===(ea.arguments.length-1)%2)throw Error("Must have a default value result.");var ja=F(ba,ea.arguments[0]);return N(ba,ea,1,ja)}catch(oa){throw oa;}};ma.when=function(ba,ea){try{if(3>ea.arguments.length)throw Error("Missing Parameters");if(0===ea.arguments.length%2)throw Error("Must have a default value result.");var ja=F(ba,ea.arguments[0]);if(!1===g.isBoolean(ja))throw Error("WHEN needs boolean test conditions");return I(ba,ea,0,ja)}catch(oa){throw oa;}};ma.top=function(ba,
ea){return E(ba,ea,function(ja,oa,ka){g.pcCheck(ka,2,2);if(g.isArray(ka[0]))return g.toNumber(ka[1])>=ka[0].length?ka[0].slice(0):ka[0].slice(0,g.toNumber(ka[1]));if(g.isImmutableArray(ka[0]))return g.toNumber(ka[1])>=ka[0].length()?ka[0].slice(0):ka[0].slice(0,g.toNumber(ka[1]));throw Error("Top cannot accept this parameter type");})};ma.first=function(ba,ea){return E(ba,ea,function(ja,oa,ka){g.pcCheck(ka,1,1);return g.isArray(ka[0])?0===ka[0].length?null:ka[0][0]:g.isImmutableArray(ka[0])?0===ka[0].length()?
null:ka[0].get(0):null})};ma.sort=function(ba,ea){return E(ba,ea,function(ja,oa,ka){g.pcCheck(ka,1,2);ja=ka[0];g.isImmutableArray(ja)&&(ja=ja.toArray());if(!1===g.isArray(ja))throw Error("Illegal Argument");if(1<ka.length){if(!1===g.isFunctionParameter(ka[1]))throw Error("Illegal Argument");var Ca=fa(ka[1]);return ja=S(ja,function(L,la){return Ca(L,la)})}if(0===ja.length)return[];ka={};for(oa=0;oa<ja.length;oa++){var Y=W(ja[oa]);""!==Y&&(ka[Y]=!0)}if(!0===ka.Array||!0===ka.Dictionary||!0===ka.Feature||
!0===ka.Point||!0===ka.Polygon||!0===ka.Polyline||!0===ka.Multipoint||!0===ka.Extent||!0===ka.Function)return ja.slice(0);oa=0;Y="";for(var aa in ka)oa++,Y=aa;return ja=1<oa||"String"===Y?S(ja,function(L,la){if(null===L||void 0===L||L===g.voidOperation)return null===la||void 0===la||la===g.voidOperation?0:1;if(null===la||void 0===la||la===g.voidOperation)return-1;L=g.toString(L);la=g.toString(la);return L<la?-1:L===la?0:1}):"Number"===Y?S(ja,function(L,la){return L-la}):"Boolean"===Y?S(ja,function(L,
la){return L===la?0:la?-1:1}):"Date"===Y?S(ja,function(L,la){return la-L}):ja.slice(0)})};for(var ra in ma)ma[ra]={value:new g.NativeFunction(ma[ra]),valueset:!0,node:null};var sa=function(){};sa.prototype=ma;sa.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};sa.prototype.pi={value:Math.PI,valueset:!0,node:null};n.functionHelper={fixSpatialReference:g.fixSpatialReference,parseArguments:D,standardFunction:E};n.extend=function(ba){for(var ea={mode:"sync",compiled:!1,functions:{},
signatures:[],standardFunction:E,evaluateIdentifier:V,arcadeCustomFunctionHandler:fa},ja=0;ja<ba.length;ja++)ba[ja].registerFunctions(ea);for(var oa in ea.functions)ma[oa]={value:new g.NativeFunction(ea.functions[oa]),valueset:!0,node:null},sa.prototype[oa]=ma[oa];for(ja=0;ja<ea.signatures.length;ja++)d.addFunctionDeclaration(ea.signatures[ja],"async")};n.executeScript=function(ba,ea){var ja=ea.spatialReference;if(null===ja||void 0===ja)ja=new C({wkid:102100});var oa=ea.vars,ka=ea.customfunctions,
Ca=new sa;oa||(oa={});ka||(ka={});var Y=new k({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});Y.immutable=!1;Ca.textformatting={value:Y,valueset:!0,node:null};for(var aa in ka)Ca[aa]={value:new g.NativeFunction(ka[aa]),native:!0,valueset:!0,node:null};for(aa in oa)Ca[aa]=oa[aa]&&"esri.Graphic"===oa[aa].declaredClass?{value:p.createFromGraphic(oa[aa]),valueset:!0,node:null}:{value:oa[aa],valueset:!0,node:null};ba=F({spatialReference:ja,globalScope:Ca,localScope:null,
console:ea.console?ea.console:ha,lrucache:ea.lrucache,depthCounter:1},ba.body[0].body);ba instanceof g.ReturnResult&&(ba=ba.value);ba instanceof g.ImplicitResult&&(ba=ba.value);ba===g.voidOperation&&(ba=null);if(ba===g.breakResult)throw Error("Cannot return BREAK");if(ba===g.continueResult)throw Error("Cannot return CONTINUE");if(ba instanceof m)throw Error("Cannot return FUNCTION");if(ba instanceof g.NativeFunction)throw Error("Cannot return FUNCTION");return ba};n.extractFieldLiterals=function(ba,
ea){void 0===ea&&(ea=!1);return d.findFieldLiterals(ba)};n.validateScript=function(ba,ea){return d.validateScript(ba,ea,"simple")};n.referencesMember=function(ba,ea){return d.referencesMember(ba,ea)};n.referencesFunction=function(ba,ea){return d.referencesFunction(ba,ea)};n.findFunctionCalls=function(ba){return d.findFunctionCalls(ba)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(r,n,a,l){Object.defineProperty(n,"__esModule",{value:!0});
n.referencesFunction=n.referencesMember=n.validateScript=n.extractFieldLiterals=n.scriptCheck=n.parseScript=void 0;n.parseScript=function(k,p){void 0===p&&(p=[]);k=l.parse("function _() { "+k+"\n}");if(null===k.body||void 0===k.body)throw Error("No formula provided.");if(0===k.body.length)throw Error("No formula provided.");if(0===k.body.length)throw Error("No formula provided.");if("BlockStatement"!==k.body[0].body.type)throw Error("Invalid formula content.");var m=a.validateLanguage(k);if(""!==
m)throw Error(m);a.findScriptDependencies(k,p);return k};n.scriptCheck=function(k,p,m,e,f){var g=[];k="function _() { \n"+k+"\n}";try{var d=l.parse(k,{tolerant:!0,loc:!0,range:!0}),q=d.errors;if(0<q.length)for(var t=0;t<q.length;t++)g.push({line:q[t].lineNumber-2,character:q[t].column,reason:q[t].description});var w=a.checkScript(d,p,m,e,f);for(p=0;p<w.length;p++)w[p].line-=2,w[p].range&&(w[p].range=[w[p][0]-15,w[p][1]-15]),w[p].loc&&(w[p].loc.start.line-=2,w[p].loc.end.line-=2),g.push(w[p])}catch(z){try{if("Unexpected token }"===
z.description){var x=k.split("\n").length;z.lineNumber===x?(z.index=k.length-1,g.push({line:z.lineNumber-4,character:z.column,reason:"Unexpected end of script"})):(z.index=k.length-1,g.push({line:z.lineNumber-2,character:z.column,reason:"Unexpected end of script"}))}else g.push({line:z.lineNumber-2,character:z.column,reason:z.description})}catch(A){}}return g};n.extractFieldLiterals=function(k,p){void 0===p&&(p=!1);return a.findFieldLiterals(k)};n.validateScript=function(k,p,m){return a.validateScript(k,
p,m)};n.referencesMember=function(k,p){return a.referencesMember(k,p)};n.referencesFunction=function(k,p){return a.referencesFunction(k,p)}})},"esri/arcade/lib/esprima":function(){define("require exports ./comment-handler ./parser ./tokenizer ./syntax".split(" "),function(r,n,a,l,k,p){function m(e,f,g){var d=null,q=function(z,A){g&&g(z,A);d&&d.visit(z,A)},t="function"===typeof g?q:null,w=!1;if(f){w="boolean"===typeof f.comment&&f.comment;var x="boolean"===typeof f.attachComment&&f.attachComment;if(w||
x)d=new a.CommentHandler,d.attach=x,f.comment=!0,t=q}e=new l.Parser(e,f,t);f=e.parseScript();w&&d&&(f.comments=d.comments);e.config.tokens&&(f.tokens=e.tokens);e.config.tolerant&&(f.errors=e.errorHandler.errors);return f}Object.defineProperty(n,"__esModule",{value:!0});n.version=n.tokenize=n.parseScript=n.parse=void 0;n.parse=m;n.parseScript=function(e,f,g){f=f||{};f.sourceType="script";return m(e,f,g)};n.tokenize=function(e,f,g){e=new k.Tokenizer(e,f);f=[];try{for(;;){var d=e.getNextToken();if(!d)break;
g&&(d=g(d));f.push(d)}}catch(q){e.errorHandler.tolerate(q)}e.errorHandler.tolerant&&(f.errors=e.errors());return f};Object.defineProperty(n,"Syntax",{enumerable:!0,get:function(){return p.Syntax}});n.version="4.0.0-dev"})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});n.CommentHandler=void 0;r=function(){function l(){this.attach=!1;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}
l.prototype.insertInnerComments=function(k,p){if(k.type===a.Syntax.BlockStatement&&0===k.body.length){for(var m=[],e=this.leading.length-1;0<=e;--e){var f=this.leading[e];p.end.offset>=f.start&&(m.unshift(f.comment),this.leading.splice(e,1),this.trailing.splice(e,1))}m.length&&(k.innerComments=m)}};l.prototype.findTrailingComments=function(k){var p=[];if(0<this.trailing.length){for(var m=this.trailing.length-1;0<=m;--m){var e=this.trailing[m];e.start>=k.end.offset&&p.unshift(e.comment)}this.trailing.length=
0;return p}(m=this.stack[this.stack.length-1])&&m.node.trailingComments&&(e=m.node.trailingComments[0])&&e.range[0]>=k.end.offset&&(p=m.node.trailingComments,delete m.node.trailingComments);return p};l.prototype.findLeadingComments=function(k){for(var p=[],m;0<this.stack.length;){var e=this.stack[this.stack.length-1];if(e&&e.start>=k.start.offset)m=e.node,this.stack.pop();else break}if(m){for(var f=(m.leadingComments?m.leadingComments.length:0)-1;0<=f;--f)e=m.leadingComments[f],e.range[1]<=k.start.offset&&
(p.unshift(e),m.leadingComments.splice(f,1));m.leadingComments&&0===m.leadingComments.length&&delete m.leadingComments;return p}for(f=this.leading.length-1;0<=f;--f)e=this.leading[f],e.start<=k.start.offset&&(p.unshift(e.comment),this.leading.splice(f,1));return p};l.prototype.visitNode=function(k,p){if(!(k.type===a.Syntax.Program&&0<k.body.length)){this.insertInnerComments(k,p);var m=this.findTrailingComments(p),e=this.findLeadingComments(p);0<e.length&&(k.leadingComments=e);0<m.length&&(k.trailingComments=
m);this.stack.push({node:k,start:p.start.offset})}};l.prototype.visitComment=function(k,p){var m="L"===k.type[0]?"Line":"Block",e={type:m,value:k.value};k.range&&(e.range=k.range);k.loc&&(e.loc=k.loc);this.comments.push(e);this.attach&&(p={comment:{type:m,value:k.value,range:[p.start.offset,p.end.offset]},start:p.start.offset},k.loc&&(p.comment.loc=k.loc),k.type=m,this.leading.push(p),this.trailing.push(p))};l.prototype.visit=function(k,p){"LineComment"===k.type?this.visitComment(k,p):"BlockComment"===
k.type?this.visitComment(k,p):this.attach&&this.visitNode(k,p)};return l}();n.CommentHandler=r})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.Syntax=void 0;n.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",
ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ObjectExpression:"ObjectExpression",
ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement"}})},"esri/arcade/lib/parser":function(){define("require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),
function(r,n,a,l,k,p,m,e,f){Object.defineProperty(n,"__esModule",{value:!0});n.Parser=void 0;r=function(){function g(d,q,t){void 0===q&&(q={});this.config={range:"boolean"===typeof q.range&&q.range,loc:"boolean"===typeof q.loc&&q.loc,source:null,tokens:"boolean"===typeof q.tokens&&q.tokens,comment:"boolean"===typeof q.comment&&q.comment,tolerant:"boolean"===typeof q.tolerant&&q.tolerant};this.config.loc&&q.source&&null!==q.source&&(this.config.source=String(q.source));this.delegate=t;this.errorHandler=
new l.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new m.Scanner(d,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,
lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={isModule:!1,allowIn:!0,allowStrictDirective:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-
this.scanner.lineStart}}g.prototype.throwError=function(d){for(var q=[],t=1;t<arguments.length;t++)q[t-1]=arguments[t];var w=q.slice();q=d.replace(/%(\d)/g,function(x,z){a.assert(z<w.length,"Message reference must be in range");return w[z]});throw this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,q);};g.prototype.tolerateError=function(d){for(var q=[],t=1;t<arguments.length;t++)q[t-1]=arguments[t];var w=q.slice();q=d.replace(/%(\d)/g,function(x,z){a.assert(z<
w.length,"Message reference must be in range");return w[z]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,q)};g.prototype.unexpectedTokenError=function(d,q){var t=q||k.Messages.UnexpectedToken;d?(q||(t=2===d.type?k.Messages.UnexpectedEOS:3===d.type?k.Messages.UnexpectedIdentifier:6===d.type?k.Messages.UnexpectedNumber:8===d.type?k.Messages.UnexpectedString:10===d.type?k.Messages.UnexpectedTemplate:k.Messages.UnexpectedToken,4===d.type&&(this.scanner.isFutureReservedWord(d.value)?
t=k.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(d.value)&&(t=k.Messages.StrictReservedWord))),q=d.value):q="ILLEGAL";t=t.replace("%0",q);if(d&&"number"===typeof d.lineNumber){q=d.start;var w=d.lineNumber;d=d.start-(this.lastMarker.index-this.lastMarker.column)+1;return this.errorHandler.createError(q,w,d,t)}q=this.lastMarker.index;w=this.lastMarker.line;d=this.lastMarker.column+1;return this.errorHandler.createError(q,w,d,t)};g.prototype.throwUnexpectedToken=
function(d,q){throw this.unexpectedTokenError(d,q);};g.prototype.tolerateUnexpectedToken=function(d,q){this.errorHandler.tolerate(this.unexpectedTokenError(d,q))};g.prototype.collectComments=function(){if(this.config.comment){var d=this.scanner.scanComments();if(0<d.length&&this.delegate)for(var q=0;q<d.length;++q){var t=d[q],w={type:t.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(t.slice[0],t.slice[1])};this.config.range&&(w.range=t.range);this.config.loc&&(w.loc=t.loc);
this.delegate(w,{start:{line:t.loc.start.line,column:t.loc.start.column,offset:t.range[0]},end:{line:t.loc.end.line,column:t.loc.end.column,offset:t.range[1]}})}}else this.scanner.scanComments()};g.prototype.getTokenRaw=function(d){return this.scanner.source.slice(d.start,d.end)};g.prototype.convertToken=function(d){var q={type:f.TokenName[d.type],value:this.getTokenRaw(d)};this.config.range&&(q.range=[d.start,d.end]);this.config.loc&&(q.loc={start:{line:this.startMarker.line,column:this.startMarker.column},
end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});9===d.type&&(q.regex={pattern:d.pattern,flags:d.flags});return q};g.prototype.nextToken=function(){var d=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,
this.startMarker.column=this.scanner.index-this.scanner.lineStart);var q=this.scanner.lex();this.hasLineTerminator=d.lineNumber!==q.lineNumber;q&&this.context.strict&&3===q.type&&this.scanner.isStrictModeReservedWord(q.value)&&(q.type=4);this.lookahead=q;this.config.tokens&&2!==q.type&&this.tokens.push(this.convertToken(q));return d};g.prototype.nextRegexToken=function(){this.collectComments();var d=this.scanner.scanRegExp();this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(d)));
this.lookahead=d;this.nextToken();return d};g.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};g.prototype.startNode=function(d,q){void 0===q&&(q=0);var t=d.start-d.lineStart,w=d.lineNumber;0>t&&(t+=q,w--);return{index:d.start,line:w,column:t}};g.prototype.finalize=function(d,q){this.config.range&&(q.range=[d.index,this.lastMarker.index]);this.config.loc&&(q.loc={start:{line:d.line,column:d.column},end:{line:this.lastMarker.line,
column:this.lastMarker.column}},this.config.source&&(q.loc.source=this.config.source));this.delegate&&this.delegate(q,{start:{line:d.line,column:d.column,offset:d.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});return q};g.prototype.expect=function(d){var q=this.nextToken();7===q.type&&q.value===d||this.throwUnexpectedToken(q)};g.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var d=this.lookahead;7===d.type&&","===d.value?this.nextToken():
7===d.type&&";"===d.value?(this.nextToken(),this.tolerateUnexpectedToken(d)):this.tolerateUnexpectedToken(d,k.Messages.UnexpectedToken)}else this.expect(",")};g.prototype.expectKeyword=function(d){var q=this.nextToken();4===q.type&&q.value.toLowerCase()===d.toLowerCase()||this.throwUnexpectedToken(q)};g.prototype.match=function(d){return 7===this.lookahead.type&&this.lookahead.value===d};g.prototype.matchKeyword=function(d){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===d.toLowerCase()};
g.prototype.matchContextualKeyword=function(d){return 3===this.lookahead.type&&this.lookahead.value===d};g.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var d=this.lookahead.value;return"\x3d"===d||"*\x3d"===d||"**\x3d"===d||"/\x3d"===d||"%\x3d"===d||"+\x3d"===d||"-\x3d"===d||"\x3c\x3c\x3d"===d||"\x3e\x3e\x3d"===d||"\x3e\x3e\x3e\x3d"===d||"\x26\x3d"===d||"^\x3d"===d||"|\x3d"===d};g.prototype.isolateCoverGrammar=function(d){var q=this.context.isBindingElement,t=this.context.isAssignmentTarget,
w=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;d=d.call(this);null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=q;this.context.isAssignmentTarget=t;this.context.firstCoverInitializedNameError=w;return d};g.prototype.inheritCoverGrammar=function(d){var q=this.context.isBindingElement,
t=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;d=d.call(this);this.context.isBindingElement=this.context.isBindingElement&&q;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&t;this.context.firstCoverInitializedNameError=w||this.context.firstCoverInitializedNameError;return d};g.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():
this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)};g.prototype.parsePrimaryExpression=function(){var d=this.createNode();switch(this.lookahead.type){case 3:d=this.finalize(d,new p.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,
k.Messages.StrictOctalLiteral);this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var q=this.nextToken();var t=this.getTokenRaw(q);d=this.finalize(d,new p.Literal(q.value,t));break;case 1:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;q=this.nextToken();t=this.getTokenRaw(q);d=this.finalize(d,new p.Literal("true"===q.value.toLowerCase(),t));break;case 5:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;q=this.nextToken();t=this.getTokenRaw(q);
d=this.finalize(d,new p.Literal(null,t));break;case 10:d=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;d=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":d=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":d=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:d=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=!1;this.context.isBindingElement=
!1;d=this.matchKeyword("function")?this.parseFunctionExpression():this.throwUnexpectedToken(this.nextToken());break;default:d=this.throwUnexpectedToken(this.nextToken())}return d};g.prototype.parseArrayInitializer=function(){var d=this.createNode(),q=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),q.push(null)):(q.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(d,new p.ArrayExpression(q))};
g.prototype.parsePropertyMethod=function(d){this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var q=this.context.strict,t=this.context.allowStrictDirective;this.context.allowStrictDirective=d.simple;var w=this.isolateCoverGrammar(this.parseFunctionSourceElements);this.context.strict&&d.firstRestricted&&this.tolerateUnexpectedToken(d.firstRestricted,d.message);this.context.strict&&d.stricted&&this.tolerateUnexpectedToken(d.stricted,d.message);this.context.strict=q;this.context.allowStrictDirective=
t;return w};g.prototype.parsePropertyMethodFunction=function(){var d=this.createNode(),q=this.parseFormalParameters(),t=this.parsePropertyMethod(q);return this.finalize(d,new p.FunctionExpression(null,q.params,t,!1))};g.prototype.parseObjectPropertyKey=function(){var d=this.createNode(),q=this.nextToken();switch(q.type){case 8:case 6:this.context.strict&&q.octal&&this.tolerateUnexpectedToken(q,k.Messages.StrictOctalLiteral);var t=this.getTokenRaw(q);d=this.finalize(d,new p.Literal(q.value,t));break;
case 3:case 1:case 5:case 4:d=this.finalize(d,new p.Identifier(q.value));break;case 7:"["===q.value?(d=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):d=this.throwUnexpectedToken(q);break;default:d=this.throwUnexpectedToken(q)}return d};g.prototype.isPropertyKey=function(d,q){return d.type===e.Syntax.Identifier&&d.name===q||d.type===e.Syntax.Literal&&d.value===q};g.prototype.parseObjectProperty=function(d){var q=this.createNode(),t=this.lookahead,w=null,x=null,z=!1,A=!1,
B=!1,b=!1;if(3===t.type){var h=t.value;this.nextToken();z=this.match("[");w=(b=!this.hasLineTerminator&&"async"===h&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","))?this.parseObjectPropertyKey():this.finalize(q,new p.Identifier(h))}else this.match("*")?this.nextToken():(z=this.match("["),w=this.parseObjectPropertyKey());w||this.throwUnexpectedToken(this.lookahead);this.match(":")&&!b?(!z&&this.isPropertyKey(w,"__proto__")&&(d.value&&this.tolerateError(k.Messages.DuplicateProtoProperty),
d.value=!0),this.nextToken(),x=this.inheritCoverGrammar(this.parseAssignmentExpression)):this.match("(")?(x=this.parsePropertyMethodFunction(),A=!0):3===t.type?(h=this.finalize(q,new p.Identifier(t.value)),this.match("\x3d")?(this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),B=!0,d=this.isolateCoverGrammar(this.parseAssignmentExpression),x=this.finalize(q,new p.AssignmentPattern(h,d))):(B=!0,x=h)):this.throwUnexpectedToken(this.nextToken());return this.finalize(q,new p.Property("init",
w,z,x,A,B))};g.prototype.parseObjectInitializer=function(){var d=this.createNode();this.expect("{");for(var q=[],t={value:!1};!this.match("}");)q.push(this.parseObjectProperty(t)),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(d,new p.ObjectExpression(q))};g.prototype.parseTemplateHead=function(){a.assert(this.lookahead.head,"Template literal must start with a template head");var d=this.createNode(),q=this.nextToken();return this.finalize(d,new p.TemplateElement({raw:q.value,
cooked:q.cooked},q.tail))};g.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var d=this.createNode(),q=this.nextToken();return this.finalize(d,new p.TemplateElement({raw:q.value,cooked:q.cooked},q.tail))};g.prototype.parseTemplateLiteral=function(){var d=this.createNode(),q=[],t=[],w=this.parseTemplateHead();for(t.push(w);!w.tail;)q.push(this.parseExpression()),w=this.parseTemplateElement(),t.push(w);return this.finalize(d,new p.TemplateLiteral(t,q))};
g.prototype.reinterpretExpressionAsPattern=function(d){switch(d.type){case e.Syntax.ArrayExpression:d.type=e.Syntax.ArrayPattern;for(var q=0;q<d.elements.length;q++)null!==d.elements[q]&&this.reinterpretExpressionAsPattern(d.elements[q]);break;case e.Syntax.ObjectExpression:d.type=e.Syntax.ObjectPattern;for(q=0;q<d.properties.length;q++)this.reinterpretExpressionAsPattern(d.properties[q].value);break;case e.Syntax.AssignmentExpression:d.type=e.Syntax.AssignmentPattern,delete d.operator,this.reinterpretExpressionAsPattern(d.left)}};
g.prototype.parseGroupExpression=function(){this.expect("(");if(this.match(")")){this.nextToken();this.match("\x3d\x3e")||this.expect("\x3d\x3e");var d={type:"ArrowParameterPlaceHolder",params:[],async:!1}}else{var q=this.lookahead,t=!1;this.context.isBindingElement=!0;d=this.inheritCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var w=[];this.context.isAssignmentTarget=!1;for(w.push(d);2!==this.lookahead.type&&this.match(",");){this.nextToken();if(this.match(")")){this.nextToken();
for(t=0;t<w.length;t++)this.reinterpretExpressionAsPattern(w[t]);t=!0;d={type:"ArrowParameterPlaceHolder",params:w,async:!1}}else w.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(t)break}t||(d=this.finalize(this.startNode(q),new p.SequenceExpression(w)))}if(!t){this.expect(")");if(this.match("\x3d\x3e")&&(d.type===e.Syntax.Identifier&&"yield"===d.name&&(t=!0,d={type:"ArrowParameterPlaceHolder",params:[d],async:!1}),!t)){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead);
if(d.type===e.Syntax.SequenceExpression)for(t=0;t<d.expressions.length;t++)this.reinterpretExpressionAsPattern(d.expressions[t]);else this.reinterpretExpressionAsPattern(d);d={type:"ArrowParameterPlaceHolder",params:d.type===e.Syntax.SequenceExpression?d.expressions:[d],async:!1}}this.context.isBindingElement=!1}}return d};g.prototype.parseArguments=function(){this.expect("(");var d=[];if(!this.match(")"))for(;;){var q=this.isolateCoverGrammar(this.parseAssignmentExpression);d.push(q);if(this.match(")"))break;
this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return d};g.prototype.isIdentifierName=function(d){return 3===d.type||4===d.type||1===d.type||5===d.type};g.prototype.parseIdentifierName=function(){var d=this.createNode(),q=this.nextToken();this.isIdentifierName(q)||this.throwUnexpectedToken(q);return this.finalize(d,new p.Identifier(q.value))};g.prototype.parseLeftHandSideExpressionAllowCall=function(){var d=this.lookahead,q=this.context.allowIn;this.context.allowIn=!0;var t;
for(t=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect(".");var w=this.parseIdentifierName();t=this.finalize(this.startNode(d),new p.StaticMemberExpression(t,w))}else if(this.match("("))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1,w=this.parseArguments(),t=this.finalize(this.startNode(d),new p.CallExpression(t,w));else if(this.match("["))this.context.isBindingElement=!1,
this.context.isAssignmentTarget=!0,this.expect("["),w=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),t=this.finalize(this.startNode(d),new p.ComputedMemberExpression(t,w));else break;this.context.allowIn=q;return t};g.prototype.parseLeftHandSideExpression=function(){a.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var d=this.startNode(this.lookahead),q=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=
!1;this.context.isAssignmentTarget=!0;this.expect("[");var t=this.isolateCoverGrammar(this.parseExpression);this.expect("]");q=this.finalize(d,new p.ComputedMemberExpression(q,t))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),t=this.parseIdentifierName(),q=this.finalize(d,new p.StaticMemberExpression(q,t));else break;return q};g.prototype.parseUpdateExpression=function(){var d=this.lookahead;if(this.match("++")||this.match("--")){d=this.startNode(d);
var q=this.nextToken();var t=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.strict&&t.type===e.Syntax.Identifier&&this.scanner.isRestrictedWord(t.name)&&this.tolerateError(k.Messages.StrictLHSPrefix);this.context.isAssignmentTarget||this.tolerateError(k.Messages.InvalidLHSInAssignment);t=this.finalize(d,new p.UpdateExpression(q.value,t,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else t=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),
this.hasLineTerminator||7!==this.lookahead.type||!this.match("++")&&!this.match("--")||(this.context.strict&&t.type===e.Syntax.Identifier&&this.scanner.isRestrictedWord(t.name)&&this.tolerateError(k.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(k.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,q=this.nextToken().value,t=this.finalize(this.startNode(d),new p.UpdateExpression(q,t,!1)));return t};g.prototype.parseUnaryExpression=
function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var d=this.startNode(this.lookahead),q=this.nextToken();var t=this.inheritCoverGrammar(this.parseUnaryExpression);t=this.finalize(d,new p.UnaryExpression(q.value,t));this.context.strict&&"delete"===t.operator&&t.argument.type===e.Syntax.Identifier&&this.tolerateError(k.Messages.StrictDelete);this.context.isAssignmentTarget=!1;this.context.isBindingElement=
!1}else t=this.parseUpdateExpression();return t};g.prototype.parseExponentiationExpression=function(){var d=this.lookahead,q=this.inheritCoverGrammar(this.parseUnaryExpression);if(q.type!==e.Syntax.UnaryExpression&&this.match("**")){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var t=this.isolateCoverGrammar(this.parseExponentiationExpression);q=this.finalize(this.startNode(d),new p.BinaryExpression("**",q,t))}return q};g.prototype.binaryPrecedence=function(d){var q=
d.value;return 7===d.type?this.operatorPrecedence[q]||0:4===d.type?"instanceof"===q||this.context.allowIn&&"in"===q?7:0:0};g.prototype.parseBinaryExpression=function(){var d=this.lookahead,q=this.inheritCoverGrammar(this.parseExponentiationExpression),t=this.lookahead,w=this.binaryPrecedence(t);if(0<w){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;d=[d,this.lookahead];var x=this.isolateCoverGrammar(this.parseExponentiationExpression);t=[q,t.value,x];for(var z=
[w];;){w=this.binaryPrecedence(this.lookahead);if(0>=w)break;for(;2<t.length&&w<=z[z.length-1];){x=t.pop();var A=t.pop();z.pop();q=t.pop();d.pop();var B=d[d.length-1],b=this.startNode(B,B.lineStart);t.push(this.finalize(b,new p.BinaryExpression(A,q,x)))}t.push(this.nextToken().value);z.push(w);d.push(this.lookahead);t.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}w=t.length-1;q=t[w];for(A=d.pop();1<w;)B=d.pop(),b=this.startNode(B,A&&A.lineStart),A=t[w-1],q=this.finalize(b,new p.BinaryExpression(A,
t[w-2],q)),w-=2,A=B}return q};g.prototype.parseConditionalExpression=function(){var d=this.lookahead,q=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var t=this.context.allowIn;this.context.allowIn=!0;var w=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=t;this.expect(":");t=this.isolateCoverGrammar(this.parseAssignmentExpression);q=this.finalize(this.startNode(d),new p.ConditionalExpression(q,w,t));this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1}return q};g.prototype.checkPatternParam=function(d,q){switch(q.type){case e.Syntax.Identifier:this.validateParam(d,q,q.name);break;case e.Syntax.AssignmentPattern:this.checkPatternParam(d,q.left);break;case e.Syntax.ArrayPattern:for(var t=0;t<q.elements.length;t++)null!==q.elements[t]&&this.checkPatternParam(d,q.elements[t]);break;case e.Syntax.ObjectPattern:for(t=0;t<q.properties.length;t++)this.checkPatternParam(d,q.properties[t].value)}d.simple=d.simple&&q instanceof
p.Identifier};g.prototype.reinterpretAsCoverFormalsList=function(d){var q=[d],t={simple:!0,paramSet:{}};switch(d.type){case e.Syntax.Identifier:break;default:return null}for(d=0;d<q.length;++d){var w=q[d];this.checkPatternParam(t,w);q[d]=w}t.message===k.Messages.StrictParamDupe&&this.throwUnexpectedToken(this.context.strict?t.stricted:t.firstRestricted,t.message);return{simple:t.simple,params:q,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}};g.prototype.parseAssignmentExpression=
function(){var d=this.lookahead,q=d;var t=this.parseConditionalExpression();if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(k.Messages.InvalidLHSInAssignment);if(this.context.strict&&t.type===e.Syntax.Identifier){var w=t;this.scanner.isRestrictedWord(w.name)&&this.tolerateUnexpectedToken(q,k.Messages.StrictLHSAssignment);this.scanner.isStrictModeReservedWord(w.name)&&this.tolerateUnexpectedToken(q,k.Messages.StrictReservedWord)}this.match("\x3d")?this.reinterpretExpressionAsPattern(t):
(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);q=this.nextToken();q=q.value;w=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(d),new p.AssignmentExpression(q,t,w));this.context.firstCoverInitializedNameError=null}return t};g.prototype.parseExpression=function(){var d=this.lookahead,q=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var t=[];for(t.push(q);2!==this.lookahead.type&&this.match(",");)this.nextToken(),
t.push(this.isolateCoverGrammar(this.parseAssignmentExpression));q=this.finalize(this.startNode(d),new p.SequenceExpression(t))}return q};g.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(4===this.lookahead.type)switch(this.lookahead.value){case "function":var d=this.parseFunctionDeclaration();break;default:d=this.parseStatement()}else d=this.parseStatement();return d};g.prototype.parseBlock=function(){var d=this.createNode();this.expect("{");
for(var q=[];!this.match("}");)q.push(this.parseStatementListItem());this.expect("}");return this.finalize(d,new p.BlockStatement(q))};g.prototype.parseBlockOrObjectInitialiser=function(){var d=this.createNode();this.expect("{");if(3===this.lookahead.type||8===this.lookahead.type){var q=this.scanner.saveState();this.scanner.scanComments();var t=this.scanner.lex();this.scanner.restoreState(q);if(7===t.type&&":"===t.value){q=[];for(t={value:!1};!this.match("}");)q.push(this.parseObjectProperty(t)),
this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(d,new p.ObjectExpression(q))}}for(q=[];!this.match("}");)q.push(this.parseStatementListItem());this.expect("}");return this.finalize(d,new p.BlockStatement(q))};g.prototype.parseLexicalBinding=function(d,q){var t=this.createNode();d=this.parsePattern([],d);this.context.strict&&d.type===e.Syntax.Identifier&&this.scanner.isRestrictedWord(d.name)&&this.tolerateError(k.Messages.StrictVarName);var w=null;if(!q.inFor&&d.type!==
e.Syntax.Identifier||this.match("\x3d"))this.expect("\x3d"),w=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize(t,new p.VariableDeclarator(d,w))};g.prototype.parseBindingList=function(d,q){for(var t=[this.parseLexicalBinding(d,q)];this.match(",");)this.nextToken(),t.push(this.parseLexicalBinding(d,q));return t};g.prototype.parseArrayPattern=function(d,q){var t=this.createNode();this.expect("[");for(var w=[];!this.match("]");)this.match(",")?(this.nextToken(),w.push(null)):
(w.push(this.parsePatternWithDefault(d,q)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(t,new p.ArrayPattern(w))};g.prototype.parsePropertyPattern=function(d,q){var t=this.createNode(),w=!1,x=!1;if(3===this.lookahead.type){var z=this.lookahead;var A=this.parseVariableIdentifier();var B=this.finalize(t,new p.Identifier(z.value));this.match("\x3d")?(d.push(z),x=!0,this.nextToken(),d=this.parseAssignmentExpression(),z=this.finalize(this.startNode(z),new p.AssignmentPattern(B,
d))):this.match(":")?(this.expect(":"),z=this.parsePatternWithDefault(d,q)):(d.push(z),x=!0,z=B)}else w=this.match("["),A=this.parseObjectPropertyKey(),this.expect(":"),z=this.parsePatternWithDefault(d,q);return this.finalize(t,new p.Property("init",A,w,z,!1,x))};g.prototype.parseObjectPattern=function(d,q){var t=this.createNode(),w=[];for(this.expect("{");!this.match("}");)w.push(this.parsePropertyPattern(d,q)),this.match("}")||this.expect(",");this.expect("}");return this.finalize(t,new p.ObjectPattern(w))};
g.prototype.parsePattern=function(d,q){this.match("[")?d=this.parseArrayPattern(d,q):this.match("{")?d=this.parseObjectPattern(d,q):(!this.matchKeyword("let")||"const"!==q&&"let"!==q||this.tolerateUnexpectedToken(this.lookahead,k.Messages.LetInLexicalBinding),d.push(this.lookahead),d=this.parseVariableIdentifier(q));return d};g.prototype.parsePatternWithDefault=function(d,q){var t=this.lookahead;d=this.parsePattern(d,q);this.match("\x3d")&&(this.nextToken(),q=this.isolateCoverGrammar(this.parseAssignmentExpression),
d=this.finalize(this.startNode(t),new p.AssignmentPattern(d,q)));return d};g.prototype.parseVariableIdentifier=function(d){var q=this.createNode(),t=this.nextToken();3!==t.type&&(this.context.strict&&4===t.type&&this.scanner.isStrictModeReservedWord(t.value)?this.tolerateUnexpectedToken(t,k.Messages.StrictReservedWord):(this.context.strict||"let"!==t.value||"var"!==d)&&this.throwUnexpectedToken(t));return this.finalize(q,new p.Identifier(t.value))};g.prototype.parseVariableDeclaration=function(d){var q=
this.createNode(),t=this.parsePattern([],"var");this.context.strict&&t.type===e.Syntax.Identifier&&this.scanner.isRestrictedWord(t.name)&&this.tolerateError(k.Messages.StrictVarName);var w=null;this.match("\x3d")?(this.nextToken(),w=this.isolateCoverGrammar(this.parseAssignmentExpression)):t.type===e.Syntax.Identifier||d.inFor||this.expect("\x3d");return this.finalize(q,new p.VariableDeclarator(t,w))};g.prototype.parseVariableDeclarationList=function(d){d={inFor:d.inFor};var q=[];for(q.push(this.parseVariableDeclaration(d));this.match(",");)this.nextToken(),
q.push(this.parseVariableDeclaration(d));return q};g.prototype.parseVariableStatement=function(){var d=this.createNode();this.expectKeyword("var");var q=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(d,new p.VariableDeclaration(q,"var"))};g.prototype.parseEmptyStatement=function(){var d=this.createNode();this.expect(";");return this.finalize(d,new p.EmptyStatement)};g.prototype.parseExpressionStatement=function(){var d=this.createNode(),q=this.parseExpression();
this.consumeSemicolon();return this.finalize(d,new p.ExpressionStatement(q))};g.prototype.parseIfClause=function(){this.context.strict&&this.matchKeyword("function")&&this.tolerateError(k.Messages.StrictFunction);return this.parseStatement(!0)};g.prototype.parseIfStatement=function(){var d=this.createNode(),q=null;this.expectKeyword("if");this.expect("(");var t=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var w=this.finalize(this.createNode(),
new p.EmptyStatement)}else this.expect(")"),w=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),q=this.parseIfClause());return this.finalize(d,new p.IfStatement(t,w,q))};g.prototype.parseForStatement=function(){var d=null,q=null,t=null,w=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){d=this.createNode();this.nextToken();var x=this.context.allowIn;this.context.allowIn=!1;var z=this.parseVariableDeclarationList({inFor:!0});
this.context.allowIn=x;if(1===z.length&&this.matchKeyword("in")){var A=z[0];A.init&&(A.id.type===e.Syntax.ArrayPattern||A.id.type===e.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(k.Messages.ForInOfLoopInitializer,"for-in");d=this.finalize(d,new p.VariableDeclaration(z,"var"));this.nextToken();A=d;var B=this.parseExpression();d=null}else 1===z.length&&null===z[0].init&&this.matchContextualKeyword("of")?(d=this.finalize(d,new p.VariableDeclaration(z,"var")),this.nextToken(),A=d,B=
this.parseAssignmentExpression(),d=null):(d=this.finalize(d,new p.VariableDeclaration(z,"var")),this.expect(";"))}else{z=this.lookahead;var b=this.context.isBindingElement,h=this.context.isAssignmentTarget,c=this.context.firstCoverInitializedNameError;x=this.context.allowIn;this.context.allowIn=!1;d=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=x;if(this.matchKeyword("in"))this.context.isAssignmentTarget&&d.type!==e.Syntax.AssignmentExpression||this.tolerateError(k.Messages.InvalidLHSInForIn),
this.nextToken(),this.reinterpretExpressionAsPattern(d),A=d,B=this.parseExpression(),d=null;else{this.context.isBindingElement=b;this.context.isAssignmentTarget=h;this.context.firstCoverInitializedNameError=c;if(this.match(",")){for(d=[d];this.match(",");)this.nextToken(),d.push(this.isolateCoverGrammar(this.parseAssignmentExpression));d=this.finalize(this.startNode(z),new p.SequenceExpression(d))}this.expect(";")}}"undefined"===typeof A&&(this.match(";")||(q=this.isolateCoverGrammar(this.parseExpression)),
this.expect(";"),this.match(")")||(t=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),x=this.finalize(this.createNode(),new p.EmptyStatement)):(this.expect(")"),z=this.context.inIteration,this.context.inIteration=!0,x=this.isolateCoverGrammar(this.parseStatementBlockAllowed),this.context.inIteration=z);return"undefined"===typeof A?this.finalize(w,new p.ForStatement(d,q,t,x)):this.finalize(w,new p.ForInStatement(A,
B,x))};g.prototype.parseContinueStatement=function(){var d=this.createNode();this.expectKeyword("continue");var q=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var t=this.parseVariableIdentifier();q=t;Object.prototype.hasOwnProperty.call(this.context.labelSet,"$"+t.name)||this.throwError(k.Messages.UnknownLabel,t.name)}this.consumeSemicolon();null!==q||this.context.inIteration||this.throwError(k.Messages.IllegalContinue);return this.finalize(d,new p.ContinueStatement(q))};g.prototype.parseBreakStatement=
function(){var d=this.createNode();this.expectKeyword("break");var q=null;3!==this.lookahead.type||this.hasLineTerminator||(q=this.parseVariableIdentifier(),Object.prototype.hasOwnProperty.call(this.context.labelSet,"$"+q.name)||this.throwError(k.Messages.UnknownLabel,q.name));this.consumeSemicolon();null!==q||this.context.inIteration||this.context.inSwitch||this.throwError(k.Messages.IllegalBreak);return this.finalize(d,new p.BreakStatement(q))};g.prototype.parseReturnStatement=function(){this.context.inFunctionBody||
this.tolerateError(k.Messages.IllegalReturn);var d=this.createNode();this.expectKeyword("return");var q=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();this.consumeSemicolon();return this.finalize(d,new p.ReturnStatement(q))};g.prototype.parseLabelledStatement=function(){var d=this.createNode(),q=this.parseExpression();this.consumeSemicolon();q=new p.ExpressionStatement(q);return this.finalize(d,
q)};g.prototype.parseStatementBlockAllowed=function(){return this.parseStatement(!0)};g.prototype.parseStatement=function(d){void 0===d&&(d=!1);switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:d=this.parseExpressionStatement();break;case 7:var q=this.lookahead.value;d="{"===q?d?this.parseBlockOrObjectInitialiser():this.parseObjectInitializer():"("===q?this.parseExpressionStatement():";"===q?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:d=this.parseLabelledStatement();
break;case 4:switch(this.lookahead.value.toLowerCase()){case "break":d=this.parseBreakStatement();break;case "continue":d=this.parseContinueStatement();break;case "for":d=this.parseForStatement();break;case "function":d=this.parseFunctionDeclaration();break;case "if":d=this.parseIfStatement();break;case "return":d=this.parseReturnStatement();break;case "var":d=this.parseVariableStatement();break;default:d=this.parseExpressionStatement()}break;default:d=this.throwUnexpectedToken(this.lookahead)}return d};
g.prototype.parseFunctionSourceElements=function(){var d=this.createNode();this.expect("{");var q=[],t=this.context.labelSet,w=this.context.inIteration,x=this.context.inSwitch,z=this.context.inFunctionBody;this.context.labelSet={};this.context.inIteration=!1;this.context.inSwitch=!1;for(this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)q.push(this.parseStatementListItem());this.expect("}");this.context.labelSet=t;this.context.inIteration=w;this.context.inSwitch=x;this.context.inFunctionBody=
z;return this.finalize(d,new p.BlockStatement(q))};g.prototype.validateParam=function(d,q,t){var w="$"+t;this.context.strict?(this.scanner.isRestrictedWord(t)&&(d.stricted=q,d.message=k.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(d.paramSet,w)&&(d.stricted=q,d.message=k.Messages.StrictParamDupe)):d.firstRestricted||(this.scanner.isRestrictedWord(t)?(d.firstRestricted=q,d.message=k.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(t)?(d.firstRestricted=q,d.message=
k.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(d.paramSet,w)&&(d.stricted=q,d.message=k.Messages.StrictParamDupe));"function"===typeof Object.defineProperty?Object.defineProperty(d.paramSet,w,{value:!0,enumerable:!0,writable:!0,configurable:!0}):d.paramSet[w]=!0};g.prototype.parseFormalParameter=function(d){for(var q=[],t=this.parsePatternWithDefault(q),w=0;w<q.length;w++)this.validateParam(d,q[w],q[w].value);d.simple=d.simple&&t instanceof p.Identifier;d.params.push(t)};g.prototype.parseFormalParameters=
function(d){d={simple:!0,params:[],firstRestricted:d};this.expect("(");if(!this.match(")"))for(d.paramSet={};2!==this.lookahead.type;){this.parseFormalParameter(d);if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return{simple:d.simple,params:d.params,stricted:d.stricted,firstRestricted:d.firstRestricted,message:d.message}};g.prototype.parseFunctionDeclaration=function(d){var q=this.createNode();this.expectKeyword("function");var t=null,w=null;if(!d||!this.match("("))if(d=
this.lookahead,t=this.parseVariableIdentifier(),this.context.strict)this.scanner.isRestrictedWord(d.value)&&this.tolerateUnexpectedToken(d,k.Messages.StrictFunctionName);else if(this.scanner.isRestrictedWord(d.value)){w=d;var x=k.Messages.StrictFunctionName}else this.scanner.isStrictModeReservedWord(d.value)&&(w=d,x=k.Messages.StrictReservedWord);var z=this.parseFormalParameters(w);d=z.params;var A=z.stricted;w=z.firstRestricted;z.message&&(x=z.message);var B=this.context.strict,b=this.context.allowStrictDirective;
this.context.allowStrictDirective=z.simple;z=this.parseFunctionSourceElements();this.context.strict&&w&&this.throwUnexpectedToken(w,x);this.context.strict&&A&&this.tolerateUnexpectedToken(A,x);this.context.strict=B;this.context.allowStrictDirective=b;return this.finalize(q,new p.FunctionDeclaration(t,d,z,!1))};g.prototype.parseFunctionExpression=function(){var d=this.createNode();this.expectKeyword("function");var q=null;if(!this.match("(")){var t=this.lookahead;q=this.parseVariableIdentifier();if(this.context.strict)this.scanner.isRestrictedWord(t.value)&&
this.tolerateUnexpectedToken(t,k.Messages.StrictFunctionName);else if(this.scanner.isRestrictedWord(t.value)){var w=t;var x=k.Messages.StrictFunctionName}else this.scanner.isStrictModeReservedWord(t.value)&&(w=t,x=k.Messages.StrictReservedWord)}var z=this.parseFormalParameters(w);t=z.params;var A=z.stricted;w=z.firstRestricted;z.message&&(x=z.message);var B=this.context.strict,b=this.context.allowStrictDirective;this.context.allowStrictDirective=z.simple;z=this.parseFunctionSourceElements();this.context.strict&&
w&&this.throwUnexpectedToken(w,x);this.context.strict&&A&&this.tolerateUnexpectedToken(A,x);this.context.strict=B;this.context.allowStrictDirective=b;return this.finalize(d,new p.FunctionExpression(q,t,z,!1))};g.prototype.qualifiedPropertyName=function(d){switch(d.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===d.value}return!1};g.prototype.isStartOfExpression=function(){var d=!0,q=this.lookahead.value;switch(this.lookahead.type){case 7:d="["===q||"("===q||"{"===q||"+"===
q||"-"===q||"!"===q||"~"===q||"++"===q||"--"===q||"/"===q||"/\x3d"===q;break;case 4:d="class"===q||"delete"===q||"function"===q||"let"===q||"new"===q||"super"===q||"this"===q||"typeof"===q||"void"===q||"yield"===q}return d};g.prototype.parseScript=function(){for(var d=this.createNode(),q=[];2!==this.lookahead.type;)q.push(this.parseStatementListItem());return this.finalize(d,new p.Script(q))};return g}();n.Parser=r})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,
"__esModule",{value:!0});n.assert=void 0;n.assert=function(a,l){if(!a)throw Error("ASSERT: "+l);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.ErrorHandler=void 0;r=function(){function a(){this.errors=[];this.tolerant=!1}a.prototype.recordError=function(l){this.errors.push(l)};a.prototype.tolerate=function(l){if(this.tolerant)this.recordError(l);else throw l;};a.prototype.constructError=function(l,k){l=
Error(l);try{throw l;}catch(p){Object.create&&Object.defineProperty&&(l=Object.create(p),Object.defineProperty(l,"column",{value:k}))}return l};a.prototype.createError=function(l,k,p,m){p=this.constructError("Line "+k+": "+m,p);p.index=l;p.lineNumber=k;p.description=m;return p};a.prototype.throwError=function(l,k,p,m){throw this.createError(l,k,p,m);};a.prototype.tolerateError=function(l,k,p,m){l=this.createError(l,k,p,m);if(this.tolerant)this.recordError(l);else throw l;};return a}();n.ErrorHandler=
r})},"esri/arcade/lib/messages":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.Messages=void 0;n.Messages={BadImportCallArity:"Unexpected token",BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",
DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token \x3d",DefaultRestProperty:"Unexpected token \x3d",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",
IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",
InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",
ParameterAfterRestParameter:"Rest parameter must be last formal parameter",PropertyAfterRestProperty:"Unexpected token",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",
StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",
StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",
UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}})},"esri/arcade/lib/nodes":function(){define(["require","exports","./syntax"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});n.VariableDeclarator=n.VariableDeclaration=n.UpdateExpression=n.UnaryExpression=n.TemplateLiteral=n.TemplateElement=n.StaticMemberExpression=n.SequenceExpression=n.Script=n.ReturnStatement=n.Property=n.ObjectPattern=n.ObjectExpression=n.Module=n.MethodDefinition=
n.Literal=n.IfStatement=n.Identifier=n.FunctionExpression=n.FunctionDeclaration=n.ForStatement=n.ForInStatement=n.ExpressionStatement=n.EmptyStatement=n.ContinueStatement=n.ConditionalExpression=n.ComputedMemberExpression=n.CallExpression=n.BreakStatement=n.BlockStatement=n.BinaryExpression=n.AssignmentPattern=n.AssignmentExpression=n.ArrayPattern=n.ArrayExpression=void 0;r=function(){return function(l){this.type=a.Syntax.ArrayExpression;this.elements=l}}();n.ArrayExpression=r;r=function(){return function(l){this.type=
a.Syntax.ArrayPattern;this.elements=l}}();n.ArrayPattern=r;r=function(){return function(l,k,p){this.type=a.Syntax.AssignmentExpression;this.operator=l;this.left=k;this.right=p}}();n.AssignmentExpression=r;r=function(){return function(l,k){this.type=a.Syntax.AssignmentPattern;this.left=l;this.right=k}}();n.AssignmentPattern=r;r=function(){return function(l,k,p){this.type="||"===l||"\x26\x26"===l?a.Syntax.LogicalExpression:a.Syntax.BinaryExpression;this.operator=l;this.left=k;this.right=p}}();n.BinaryExpression=
r;r=function(){return function(l){this.type=a.Syntax.BlockStatement;this.body=l}}();n.BlockStatement=r;r=function(){return function(l){this.type=a.Syntax.BreakStatement;this.label=l}}();n.BreakStatement=r;r=function(){return function(l,k){this.type=a.Syntax.CallExpression;this.callee=l;this.arguments=k}}();n.CallExpression=r;r=function(){return function(l,k){this.type=a.Syntax.MemberExpression;this.computed=!0;this.object=l;this.property=k}}();n.ComputedMemberExpression=r;r=function(){return function(l,
k,p){this.type=a.Syntax.ConditionalExpression;this.test=l;this.consequent=k;this.alternate=p}}();n.ConditionalExpression=r;r=function(){return function(l){this.type=a.Syntax.ContinueStatement;this.label=l}}();n.ContinueStatement=r;r=function(){return function(){this.type=a.Syntax.EmptyStatement}}();n.EmptyStatement=r;r=function(){return function(l){this.type=a.Syntax.ExpressionStatement;this.expression=l}}();n.ExpressionStatement=r;r=function(){return function(l,k,p){this.type=a.Syntax.ForInStatement;
this.left=l;this.right=k;this.body=p;this.each=!1}}();n.ForInStatement=r;r=function(){return function(l,k,p,m){this.type=a.Syntax.ForStatement;this.init=l;this.test=k;this.update=p;this.body=m}}();n.ForStatement=r;r=function(){return function(l,k,p,m){this.type=a.Syntax.FunctionDeclaration;this.id=l;this.params=k;this.body=p;this.generator=m;this.async=this.expression=!1}}();n.FunctionDeclaration=r;r=function(){return function(l,k,p,m){this.type=a.Syntax.FunctionExpression;this.id=l;this.params=k;
this.body=p;this.generator=m;this.async=this.expression=!1}}();n.FunctionExpression=r;r=function(){return function(l){this.type=a.Syntax.Identifier;this.name=l}}();n.Identifier=r;r=function(){return function(l,k,p){this.type=a.Syntax.IfStatement;this.test=l;this.consequent=k;this.alternate=p}}();n.IfStatement=r;r=function(){return function(l,k){this.type=a.Syntax.Literal;this.value=l;this.raw=k}}();n.Literal=r;r=function(){return function(l,k,p,m,e){this.type=a.Syntax.MethodDefinition;this.key=l;
this.computed=k;this.value=p;this.kind=m;this.static=e}}();n.MethodDefinition=r;r=function(){return function(l){this.type=a.Syntax.Program;this.body=l;this.sourceType="module"}}();n.Module=r;r=function(){return function(l){this.type=a.Syntax.ObjectExpression;this.properties=l}}();n.ObjectExpression=r;r=function(){return function(l){this.type=a.Syntax.ObjectPattern;this.properties=l}}();n.ObjectPattern=r;r=function(){return function(l,k,p,m,e,f){this.type=a.Syntax.Property;this.key=k;this.computed=
p;this.value=m;this.kind=l;this.method=e;this.shorthand=f}}();n.Property=r;r=function(){return function(l){this.type=a.Syntax.ReturnStatement;this.argument=l}}();n.ReturnStatement=r;r=function(){return function(l){this.type=a.Syntax.Program;this.body=l;this.sourceType="script"}}();n.Script=r;r=function(){return function(l){this.type=a.Syntax.SequenceExpression;this.expressions=l}}();n.SequenceExpression=r;r=function(){return function(l,k){this.type=a.Syntax.MemberExpression;this.computed=!1;this.object=
l;this.property=k}}();n.StaticMemberExpression=r;r=function(){return function(l,k){this.type=a.Syntax.TemplateElement;this.value=l;this.tail=k}}();n.TemplateElement=r;r=function(){return function(l,k){this.type=a.Syntax.TemplateLiteral;this.quasis=l;this.expressions=k}}();n.TemplateLiteral=r;r=function(){return function(l,k){this.type=a.Syntax.UnaryExpression;this.operator=l;this.argument=k;this.prefix=!0}}();n.UnaryExpression=r;r=function(){return function(l,k,p){this.type=a.Syntax.UpdateExpression;
this.operator=l;this.argument=k;this.prefix=p}}();n.UpdateExpression=r;r=function(){return function(l,k){this.type=a.Syntax.VariableDeclaration;this.declarations=l;this.kind=k}}();n.VariableDeclaration=r;r=function(){return function(l,k){this.type=a.Syntax.VariableDeclarator;this.id=l;this.init=k}}();n.VariableDeclarator=r})},"esri/arcade/lib/scanner":function(){define(["require","exports","./assert","./character","./messages"],function(r,n,a,l,k){Object.defineProperty(n,"__esModule",{value:!0});
n.Scanner=void 0;r=function(){function p(m,e){this.source=m;this.errorHandler=e;this.isModule=this.trackComment=!1;this.length=m.length;this.index=0;this.lineNumber=0<m.length?1:0;this.lineStart=0;this.curlyStack=[]}p.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};p.prototype.restoreState=function(m){this.index=m.index;this.lineNumber=m.lineNumber;this.lineStart=m.lineStart;this.curlyStack=m.curlyStack};
p.prototype.eof=function(){return this.index>=this.length};p.prototype.throwUnexpectedToken=function(m){void 0===m&&(m=k.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,m)};p.prototype.tolerateUnexpectedToken=function(m){void 0===m&&(m=k.Messages.UnexpectedTokenIllegal);this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,m)};p.prototype.skipSingleLineComment=function(m){var e=[];if(this.trackComment){e=
[];var f=this.index-m;var g={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{}}}for(;!this.eof();){var d=this.source.charCodeAt(this.index);++this.index;if(l.Character.isLineTerminator(d))return this.trackComment&&(g.end={line:this.lineNumber,column:this.index-this.lineStart-1},m={multiLine:!1,slice:[f+m,this.index-1],range:[f,this.index-1],loc:g},e.push(m)),13===d&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,e}this.trackComment&&
(g.end={line:this.lineNumber,column:this.index-this.lineStart},m={multiLine:!1,slice:[f+m,this.index],range:[f,this.index],loc:g},e.push(m));return e};p.prototype.skipMultiLineComment=function(){var m=[];if(this.trackComment){m=[];var e=this.index-2;var f={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}}}for(;!this.eof();){var g=this.source.charCodeAt(this.index);if(l.Character.isLineTerminator(g))13===g&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,
++this.index,this.lineStart=this.index;else{if(42===g&&47===this.source.charCodeAt(this.index+1))return this.index+=2,this.trackComment&&(f.end={line:this.lineNumber,column:this.index-this.lineStart},e={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:f},m.push(e)),m;++this.index}}this.trackComment&&(f.end={line:this.lineNumber,column:this.index-this.lineStart},e={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:f},m.push(e));this.tolerateUnexpectedToken();return m};p.prototype.scanComments=
function(){var m;this.trackComment&&(m=[]);for(var e=0===this.index;!this.eof();){var f=this.source.charCodeAt(this.index);if(l.Character.isWhiteSpace(f))++this.index;else if(l.Character.isLineTerminator(f))++this.index,13===f&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,e=!0;else if(47===f)if(f=this.source.charCodeAt(this.index+1),47===f)this.index+=2,f=this.skipSingleLineComment(2),this.trackComment&&(m=m.concat(f)),e=!0;else if(42===f)this.index+=
2,f=this.skipMultiLineComment(),this.trackComment&&(m=m.concat(f));else break;else if(e&&45===f)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,f=this.skipSingleLineComment(3),this.trackComment&&(m=m.concat(f));else break;else if(60!==f||this.isModule)break;else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,f=this.skipSingleLineComment(4),this.trackComment&&(m=m.concat(f));else break}return m};p.prototype.isFutureReservedWord=
function(m){return!1};p.prototype.isStrictModeReservedWord=function(m){return!1};p.prototype.isRestrictedWord=function(m){return!1};p.prototype.isKeyword=function(m){m=m.toLowerCase();switch(m.length){case 2:return"if"===m||"in"===m;case 3:return"var"===m||"for"===m;case 4:return"else"===m;case 5:return"break"===m;case 6:return"return"===m;case 8:return"function"===m||"continue"===m;default:return!1}};p.prototype.codePointAt=function(m){var e=this.source.charCodeAt(m);55296<=e&&56319>=e&&(m=this.source.charCodeAt(m+
1),56320<=m&&57343>=m&&(e=1024*(e-55296)+m-56320+65536));return e};p.prototype.scanHexEscape=function(m){m="u"===m?4:2;for(var e=0,f=0;f<m;++f)if(!this.eof()&&l.Character.isHexDigit(this.source.charCodeAt(this.index)))e=16*e+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(e)};p.prototype.scanUnicodeCodePointEscape=function(){var m=this.source[this.index],e=0;for("}"===m&&this.throwUnexpectedToken();!this.eof();){m=this.source[this.index++];
if(!l.Character.isHexDigit(m.charCodeAt(0)))break;e=16*e+"0123456789abcdef".indexOf(m.toLowerCase())}(1114111<e||"}"!==m)&&this.throwUnexpectedToken();return l.Character.fromCodePoint(e)};p.prototype.getIdentifier=function(){for(var m=this.index++;!this.eof();){var e=this.source.charCodeAt(this.index);if(92===e||55296<=e&&57343>e)return this.index=m,this.getComplexIdentifier();if(l.Character.isIdentifierPart(e))++this.index;else break}return this.source.slice(m,this.index)};p.prototype.getComplexIdentifier=
function(){var m=this.codePointAt(this.index),e=l.Character.fromCodePoint(m);this.index+=e.length;if(92===m){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var f=this.scanUnicodeCodePointEscape()}else f=this.scanHexEscape("u"),null!==f&&"\\"!==f&&l.Character.isIdentifierStart(f.charCodeAt(0))||this.throwUnexpectedToken();e=f}for(;!this.eof();){m=this.codePointAt(this.index);if(!l.Character.isIdentifierPart(m))break;
f=l.Character.fromCodePoint(m);e+=f;this.index+=f.length;92===m&&(e=e.substr(0,e.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,f=this.scanUnicodeCodePointEscape()):(f=this.scanHexEscape("u"),null!==f&&"\\"!==f&&l.Character.isIdentifierPart(f.charCodeAt(0))||this.throwUnexpectedToken()),e+=f)}return e};p.prototype.octalToDecimal=function(m){var e="0"!==m,f="01234567".indexOf(m);!this.eof()&&l.Character.isOctalDigit(this.source.charCodeAt(this.index))&&
(e=!0,f=8*f+"01234567".indexOf(this.source[this.index++]),0<="0123".indexOf(m)&&!this.eof()&&l.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(f=8*f+"01234567".indexOf(this.source[this.index++])));return{code:f,octal:e}};p.prototype.scanIdentifier=function(){var m=this.index,e=92===this.source.charCodeAt(m)?this.getComplexIdentifier():this.getIdentifier();var f=1===e.length?3:this.isKeyword(e)?4:"null"===e.toLowerCase()?5:"true"===e.toLowerCase()||"false"===e.toLowerCase()?1:3;if(3!==
f&&m+e.length!==this.index){var g=this.index;this.index=m;this.tolerateUnexpectedToken(k.Messages.InvalidEscapedReservedWord);this.index=g}return{type:f,value:e,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};p.prototype.scanPunctuator=function(){var m=this.index,e=this.source[this.index];switch(e){case "(":case "{":"{"===e&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,
e="...");break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:e=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===e?this.index+=4:(e=e.substr(0,3),"\x3d\x3d\x3d"===e||"!\x3d\x3d"===e||"\x3e\x3e\x3e"===e||"\x3c\x3c\x3d"===e||"\x3e\x3e\x3d"===e||"**\x3d"===e?this.index+=3:(e=e.substr(0,2),"\x26\x26"===e||"||"===e||"\x3d\x3d"===e||"!\x3d"===e||"+\x3d"===e||"-\x3d"===e||"*\x3d"===e||"/\x3d"===e||
"++"===e||"--"===e||"\x3c\x3c"===e||"\x3e\x3e"===e||"\x26\x3d"===e||"|\x3d"===e||"^\x3d"===e||"%\x3d"===e||"\x3c\x3d"===e||"\x3e\x3d"===e||"\x3d\x3e"===e||"**"===e?this.index+=2:(e=this.source[this.index],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(e)&&++this.index)))}this.index===m&&this.throwUnexpectedToken();return{type:7,value:e,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};p.prototype.scanHexLiteral=function(m){for(var e="";!this.eof()&&l.Character.isHexDigit(this.source.charCodeAt(this.index));)e+=
this.source[this.index++];0===e.length&&this.throwUnexpectedToken();l.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseInt("0x"+e,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};p.prototype.scanBinaryLiteral=function(m){for(var e="",f;!this.eof();){f=this.source[this.index];if("0"!==f&&"1"!==f)break;e+=this.source[this.index++]}0===e.length&&this.throwUnexpectedToken();this.eof()||(f=this.source.charCodeAt(this.index),
(l.Character.isIdentifierStart(f)||l.Character.isDecimalDigit(f))&&this.throwUnexpectedToken());return{type:6,value:parseInt(e,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};p.prototype.scanOctalLiteral=function(m,e){var f="",g=!1;l.Character.isOctalDigit(m.charCodeAt(0))?(g=!0,f="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&l.Character.isOctalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];g||0!==f.length||this.throwUnexpectedToken();
(l.Character.isIdentifierStart(this.source.charCodeAt(this.index))||l.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:6,value:parseInt(f,8),octal:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};p.prototype.scanNumericLiteral=function(){var m=this.index,e=this.source[m];a.assert(l.Character.isDecimalDigit(e.charCodeAt(0))||"."===e,"Numeric literal must start with a decimal digit or a decimal point");var f="";if("."!==
e){f=this.source[this.index++];e=this.source[this.index];if("0"===f){if("x"===e||"X"===e)return++this.index,this.scanHexLiteral(m);if("b"===e||"B"===e)return++this.index,this.scanBinaryLiteral(m);if("o"===e||"O"===e)return this.scanOctalLiteral(e,m)}for(;l.Character.isDecimalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];e=this.source[this.index]}if("."===e){for(f+=this.source[this.index++];l.Character.isDecimalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];
e=this.source[this.index]}if("e"===e||"E"===e){f+=this.source[this.index++];e=this.source[this.index];if("+"===e||"-"===e)f+=this.source[this.index++];if(l.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;l.Character.isDecimalDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];else this.throwUnexpectedToken()}l.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(f),lineNumber:this.lineNumber,
lineStart:this.lineStart,start:m,end:this.index}};p.prototype.scanStringLiteral=function(){var m=this.index,e=this.source[m];a.assert("'"===e||'"'===e,"String literal must starts with a quote");++this.index;for(var f=!1,g="";!this.eof();){var d=this.source[this.index++];if(d===e){e="";break}if("\\"===d)if((d=this.source[this.index++])&&l.Character.isLineTerminator(d.charCodeAt(0)))++this.lineNumber,"\r"===d&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(d){case "u":"{"===
this.source[this.index]?(++this.index,g+=this.scanUnicodeCodePointEscape()):(d=this.scanHexEscape(d),null===d&&this.throwUnexpectedToken(),g+=d);break;case "x":d=this.scanHexEscape(d);null===d&&this.throwUnexpectedToken(k.Messages.InvalidHexEscapeSequence);g+=d;break;case "n":g+="\n";break;case "r":g+="\r";break;case "t":g+="\t";break;case "b":g+="\b";break;case "f":g+="\f";break;case "v":g+="\x0B";break;case "8":case "9":g+=d;this.tolerateUnexpectedToken();break;default:d&&l.Character.isOctalDigit(d.charCodeAt(0))?
(d=this.octalToDecimal(d),f=d.octal||f,g+=String.fromCharCode(d.code)):g+=d}else if(l.Character.isLineTerminator(d.charCodeAt(0)))break;else g+=d}""!==e&&(this.index=m,this.throwUnexpectedToken());return{type:8,value:g,octal:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};p.prototype.scanTemplate=function(){var m="",e=!1,f=this.index,g="`"===this.source[f],d=!1,q=2;for(++this.index;!this.eof();){var t=this.source[this.index++];if("`"===t){q=1;e=d=!0;break}if("$"===t){if("{"===
this.source[this.index]){this.curlyStack.push("${");++this.index;e=!0;break}m+=t}else if("\\"===t)if(t=this.source[this.index++],l.Character.isLineTerminator(t.charCodeAt(0)))++this.lineNumber,"\r"===t&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(t){case "n":m+="\n";break;case "r":m+="\r";break;case "t":m+="\t";break;case "u":if("{"===this.source[this.index])++this.index,m+=this.scanUnicodeCodePointEscape();else{var w=this.index,x=this.scanHexEscape(t);null!==
x?m+=x:(this.index=w,m+=t)}break;case "x":t=this.scanHexEscape(t);null===t&&this.throwUnexpectedToken(k.Messages.InvalidHexEscapeSequence);m+=t;break;case "b":m+="\b";break;case "f":m+="\f";break;case "v":m+="\v";break;default:"0"===t?(l.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(k.Messages.TemplateOctalLiteral),m+="\x00"):l.Character.isOctalDigit(t.charCodeAt(0))?this.throwUnexpectedToken(k.Messages.TemplateOctalLiteral):m+=t}else l.Character.isLineTerminator(t.charCodeAt(0))?
(++this.lineNumber,"\r"===t&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,m+="\n"):m+=t}e||this.throwUnexpectedToken();g||this.curlyStack.pop();return{type:10,value:this.source.slice(f+1,this.index-q),cooked:m,head:g,tail:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};p.prototype.testRegExp=function(m,e){var f=this,g=m;0<=e.indexOf("u")&&(g=g.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(d,q,t){d=parseInt(q||t,16);1114111<d&&
f.throwUnexpectedToken(k.Messages.InvalidRegExp);return 65535>=d?String.fromCharCode(d):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(g)}catch(d){this.throwUnexpectedToken(k.Messages.InvalidRegExp)}try{return new RegExp(m,e)}catch(d){return null}};p.prototype.scanRegExpBody=function(){var m=this.source[this.index];a.assert("/"===m,"Regular expression literal must start with a slash");for(var e=this.source[this.index++],f=!1,g=!1;!this.eof();)if(m=this.source[this.index++],
e+=m,"\\"===m)m=this.source[this.index++],l.Character.isLineTerminator(m.charCodeAt(0))&&this.throwUnexpectedToken(k.Messages.UnterminatedRegExp),e+=m;else if(l.Character.isLineTerminator(m.charCodeAt(0)))this.throwUnexpectedToken(k.Messages.UnterminatedRegExp);else if(f)"]"===m&&(f=!1);else{if("/"===m){g=!0;break}"["===m&&(f=!0)}g||this.throwUnexpectedToken(k.Messages.UnterminatedRegExp);return e.substr(1,e.length-2)};p.prototype.scanRegExpFlags=function(){for(var m="";!this.eof();){var e=this.source[this.index];
if(!l.Character.isIdentifierPart(e.charCodeAt(0)))break;++this.index;if("\\"!==e||this.eof())m+=e;else{e=this.source[this.index];if("u"===e){++this.index;e=this.index;var f=this.scanHexEscape("u");if(null!==f)for(m+=f;e<this.index;++e);else this.index=e,m+="u"}this.tolerateUnexpectedToken()}}return m};p.prototype.scanRegExp=function(){var m=this.index,e=this.scanRegExpBody(),f=this.scanRegExpFlags(),g=this.testRegExp(e,f);return{type:9,value:"",pattern:e,flags:f,regex:g,lineNumber:this.lineNumber,
lineStart:this.lineStart,start:m,end:this.index}};p.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var m=this.source.charCodeAt(this.index);return l.Character.isIdentifierStart(m)?this.scanIdentifier():40===m||41===m||59===m?this.scanPunctuator():39===m||34===m?this.scanStringLiteral():46===m?l.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():
l.Character.isDecimalDigit(m)?this.scanNumericLiteral():96===m||125===m&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=m&&57343>m&&l.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return p}();n.Scanner=r})},"esri/arcade/lib/character":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.Character=void 0;var a=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
l=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
n.Character={fromCodePoint:function(k){return 65536>k?String.fromCharCode(k):String.fromCharCode(55296+(k-65536>>10))+String.fromCharCode(56320+(k-65536&1023))},isWhiteSpace:function(k){return 32===k||9===k||11===k||12===k||160===k||5760<=k&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(k)},isLineTerminator:function(k){return 10===k||13===k||8232===k||8233===k},isIdentifierStart:function(k){return 36===k||95===k||65<=k&&90>=k||97<=k&&122>=k||92===k||
128<=k&&a.test(n.Character.fromCodePoint(k))},isIdentifierPart:function(k){return 36===k||95===k||65<=k&&90>=k||97<=k&&122>=k||48<=k&&57>=k||92===k||128<=k&&l.test(n.Character.fromCodePoint(k))},isDecimalDigit:function(k){return 48<=k&&57>=k},isHexDigit:function(k){return 48<=k&&57>=k||65<=k&&70>=k||97<=k&&102>=k},isOctalDigit:function(k){return 48<=k&&55>=k}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.TokenName=
n.Token=void 0;r=n.Token||(n.Token={});r[r.BooleanLiteral=1]="BooleanLiteral";r[r.EOF=2]="EOF";r[r.Identifier=3]="Identifier";r[r.Keyword=4]="Keyword";r[r.NullLiteral=5]="NullLiteral";r[r.NumericLiteral=6]="NumericLiteral";r[r.Punctuator=7]="Punctuator";r[r.StringLiteral=8]="StringLiteral";r[r.RegularExpression=9]="RegularExpression";r[r.Template=10]="Template";n.TokenName={};n.TokenName[1]="Boolean";n.TokenName[2]="\x3cend\x3e";n.TokenName[3]="Identifier";n.TokenName[4]="Keyword";n.TokenName[5]=
"Null";n.TokenName[6]="Numeric";n.TokenName[7]="Punctuator";n.TokenName[8]="String";n.TokenName[9]="RegularExpression";n.TokenName[10]="Template"})},"esri/arcade/lib/tokenizer":function(){define(["require","exports","./error-handler","./scanner","./token"],function(r,n,a,l,k){Object.defineProperty(n,"__esModule",{value:!0});n.Tokenizer=void 0;var p=function(){function m(){this.values=[];this.curly=this.paren=-1}m.prototype.beforeFunctionExpression=function(e){return 0<="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d **\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * ** / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ").indexOf(e)};
m.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],f=null!==e;switch(e){case "this":case "]":f=!1;break;case ")":e=this.values[this.paren-1];f="if"===e||"while"===e||"for"===e||"with"===e;break;case "}":f=!0,"function"===this.values[this.curly-3]?f=(e=this.values[this.curly-4])?!this.beforeFunctionExpression(e):!1:"function"===this.values[this.curly-4]&&(f=(e=this.values[this.curly-5])?!this.beforeFunctionExpression(e):!0)}return f};m.prototype.push=function(e){7===e.type||
4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)};return m}();r=function(){function m(e,f){this.errorHandler=new a.ErrorHandler;this.errorHandler.tolerant=f?"boolean"===typeof f.tolerant&&f.tolerant:!1;this.scanner=new l.Scanner(e,this.errorHandler);this.scanner.trackComment=f?"boolean"===typeof f.comment&&f.comment:!1;this.trackRange=f?"boolean"===typeof f.range&&f.range:!1;this.trackLoc=f?"boolean"===
typeof f.loc&&f.loc:!1;this.buffer=[];this.reader=new p}m.prototype.errors=function(){return this.errorHandler.errors};m.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var f=0;f<e.length;++f){var g=e[f],d=this.scanner.source.slice(g.slice[0],g.slice[1]);d={type:g.multiLine?"BlockComment":"LineComment",value:d};this.trackRange&&(d.range=g.range);this.trackLoc&&(d.loc=g.loc);this.buffer.push(d)}if(!this.scanner.eof()){e=
void 0;this.trackLoc&&(e={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});f=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){g=this.scanner.saveState();try{f=this.scanner.scanRegExp()}catch(q){this.scanner.restoreState(g),f=this.scanner.lex()}}else f=this.scanner.lex();this.reader.push(f);g={type:k.TokenName[f.type],value:this.scanner.source.slice(f.start,f.end)};this.trackRange&&(g.range=[f.start,f.end]);this.trackLoc&&
(e.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},g.loc=e);9===f.type&&(g.regex={pattern:f.pattern,flags:f.flags});this.buffer.push(g)}}return this.buffer.shift()};return m}();n.Tokenizer=r})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(r,n,a){return a})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(r,n,a,l){Object.defineProperty(n,"__esModule",{value:!0});var k=
{ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-in":1,"en-nz":1,"en-sg":1,es:1,"es-do":1,"es-mx":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,hu:1,id:1,it:1,"it-ch":1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-mo":1,"zh-tw":1};n.load=function(p,m,e){p=a.locale;var f=
p in k;if(!f){var g=p.split("-");1<g.length&&g[0]in k&&(p=g[0],f=!0)}f?m(["moment/locale/"+p],function(){e(l)}):e(l)}})},"moment/moment":function(){(function(r,n){"object"===typeof exports&&"undefined"!==typeof module?module.exports=n():"function"===typeof define&&define.amd?define(n):r.moment=n()})(this,function(){function r(){return Ac.apply(null,arguments)}function n(H){return H instanceof Array||"[object Array]"===Object.prototype.toString.call(H)}function a(H){return null!=H&&"[object Object]"===
Object.prototype.toString.call(H)}function l(H,M){return Object.prototype.hasOwnProperty.call(H,M)}function k(H){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(H).length;for(var M in H)if(l(H,M))return!1;return!0}function p(H){return void 0===H}function m(H){return"number"===typeof H||"[object Number]"===Object.prototype.toString.call(H)}function e(H){return H instanceof Date||"[object Date]"===Object.prototype.toString.call(H)}function f(H,M){var X=[],da;for(da=0;da<H.length;++da)X.push(M(H[da],
da));return X}function g(H,M){for(var X in M)l(M,X)&&(H[X]=M[X]);l(M,"toString")&&(H.toString=M.toString);l(M,"valueOf")&&(H.valueOf=M.valueOf);return H}function d(H,M,X,da){return La(H,M,X,da,!0).utc()}function q(H){null==H._pf&&(H._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return H._pf}function t(H){if(null==
H._isValid){var M=q(H),X=Bc.call(M.parsedDateParts,function(da){return null!=da});X=!isNaN(H._d.getTime())&&0>M.overflow&&!M.empty&&!M.invalidEra&&!M.invalidMonth&&!M.invalidWeekday&&!M.weekdayMismatch&&!M.nullInput&&!M.invalidFormat&&!M.userInvalidated&&(!M.meridiem||M.meridiem&&X);H._strict&&(X=X&&0===M.charsLeftOver&&0===M.unusedTokens.length&&void 0===M.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(H))return X;H._isValid=X}return H._isValid}function w(H){var M=d(NaN);null!=H?g(q(M),H):q(M).userInvalidated=
!0;return M}function x(H,M){var X;p(M._isAMomentObject)||(H._isAMomentObject=M._isAMomentObject);p(M._i)||(H._i=M._i);p(M._f)||(H._f=M._f);p(M._l)||(H._l=M._l);p(M._strict)||(H._strict=M._strict);p(M._tzm)||(H._tzm=M._tzm);p(M._isUTC)||(H._isUTC=M._isUTC);p(M._offset)||(H._offset=M._offset);p(M._pf)||(H._pf=q(M));p(M._locale)||(H._locale=M._locale);if(0<Ob.length)for(X=0;X<Ob.length;X++){var da=Ob[X];var qa=M[da];p(qa)||(H[da]=qa)}return H}function z(H){x(this,H);this._d=new Date(null!=H._d?H._d.getTime():
NaN);this.isValid()||(this._d=new Date(NaN));!1===Pb&&(Pb=!0,r.updateOffset(this),Pb=!1)}function A(H){return H instanceof z||null!=H&&null!=H._isAMomentObject}function B(H,M){var X=!0;return g(function(){null!=r.deprecationHandler&&r.deprecationHandler(null,H);if(X){var da=[],qa,xa;for(qa=0;qa<arguments.length;qa++){var Da="";if("object"===typeof arguments[qa]){Da+="\n["+qa+"] ";for(xa in arguments[0])l(arguments[0],xa)&&(Da+=xa+": "+arguments[0][xa]+", ");Da=Da.slice(0,-2)}else Da=arguments[qa];
da.push(Da)}Array.prototype.slice.call(da).join("");X=!1}return M.apply(this,arguments)},M)}function b(H,M){null!=r.deprecationHandler&&r.deprecationHandler(H,M);ac[H]||(ac[H]=!0)}function h(H){return"undefined"!==typeof Function&&H instanceof Function||"[object Function]"===Object.prototype.toString.call(H)}function c(H,M){var X=g({},H),da;for(da in M)l(M,da)&&(a(H[da])&&a(M[da])?(X[da]={},g(X[da],H[da]),g(X[da],M[da])):null!=M[da]?X[da]=M[da]:delete X[da]);for(da in H)l(H,da)&&!l(M,da)&&a(H[da])&&
(X[da]=g({},X[da]));return X}function v(H){null!=H&&this.set(H)}function u(H,M,X){var da=""+Math.abs(H);return(0<=H?X?"+":"":"-")+Math.pow(10,Math.max(0,M-da.length)).toString().substr(1)+da}function y(H,M,X,da){var qa=da;"string"===typeof da&&(qa=function(){return this[da]()});H&&(qb[H]=qa);M&&(qb[M[0]]=function(){return u(qa.apply(this,arguments),M[1],M[2])});X&&(qb[X]=function(){return this.localeData().ordinal(qa.apply(this,arguments),H)})}function C(H){return H.match(/\[[\s\S]/)?H.replace(/^\[|\]$/g,
""):H.replace(/\\/g,"")}function D(H){var M=H.match(Qb),X;var da=0;for(X=M.length;da<X;da++)M[da]=qb[M[da]]?qb[M[da]]:C(M[da]);return function(qa){var xa="",Da;for(Da=0;Da<X;Da++)xa+=h(M[Da])?M[Da].call(qa,H):M[Da];return xa}}function E(H,M){if(!H.isValid())return H.localeData().invalidDate();M=F(M,H.localeData());Rb[M]=Rb[M]||D(M);return Rb[M](H)}function F(H,M){function X(qa){return M.longDateFormat(qa)||qa}var da=5;for(Db.lastIndex=0;0<=da&&Db.test(H);)H=H.replace(Db,X),Db.lastIndex=0,--da;return H}
function G(H,M){var X=H.toLowerCase();xb[X]=xb[X+"s"]=xb[M]=H}function J(H){return"string"===typeof H?xb[H]||xb[H.toLowerCase()]:void 0}function R(H){var M={},X,da;for(da in H)l(H,da)&&(X=J(da))&&(M[X]=H[da]);return M}function O(H){var M=[],X;for(X in H)l(H,X)&&M.push({unit:X,priority:$a[X]});M.sort(function(da,qa){return da.priority-qa.priority});return M}function P(H){return 0===H%4&&0!==H%100||0===H%400}function U(H){return 0>H?Math.ceil(H)||0:Math.floor(H)}function K(H){H=+H;var M=0;0!==H&&isFinite(H)&&
(M=U(H));return M}function V(H,M){return function(X){return null!=X?(W(this,H,X),r.updateOffset(this,M),this):Q(this,H)}}function Q(H,M){return H.isValid()?H._d["get"+(H._isUTC?"UTC":"")+M]():NaN}function W(H,M,X){if(H.isValid()&&!isNaN(X))if("FullYear"===M&&P(H.year())&&1===H.month()&&29===H.date())X=K(X),H._d["set"+(H._isUTC?"UTC":"")+M](X,H.month(),ha(X,H.month()));else H._d["set"+(H._isUTC?"UTC":"")+M](X)}function N(H,M,X){Sb[H]=h(M)?M:function(da,qa){return da&&X?X:M}}function I(H,M){return l(Sb,
H)?Sb[H](M._strict,M._locale):new RegExp(S(H))}function S(H){return Z(H.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(M,X,da,qa,xa){return X||da||qa||xa}))}function Z(H){return H.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function ca(H,M){var X,da=M;"string"===typeof H&&(H=[H]);m(M)&&(da=function(qa,xa){xa[M]=K(qa)});for(X=0;X<H.length;X++)Tb[H[X]]=da}function fa(H,M){ca(H,function(X,da,qa,xa){qa._w=qa._w||{};M(X,qa._w,qa,xa)})}function ha(H,M){if(isNaN(H)||isNaN(M))return NaN;
var X=(M%12+12)%12;return 1===X?P(H+(M-X)/12)?29:28:31-X%7%2}function na(H,M){if(!H.isValid())return H;if("string"===typeof M)if(/^\d+$/.test(M))M=K(M);else if(M=H.localeData().monthsParse(M),!m(M))return H;var X=Math.min(H.date(),ha(H.year(),M));H._d["set"+(H._isUTC?"UTC":"")+"Month"](M,X);return H}function ma(H){return null!=H?(na(this,H),r.updateOffset(this,!0),this):Q(this,"Month")}function ra(){function H(Da,Na){return Na.length-Da.length}var M=[],X=[],da=[],qa;for(qa=0;12>qa;qa++){var xa=d([2E3,
qa]);M.push(this.monthsShort(xa,""));X.push(this.months(xa,""));da.push(this.months(xa,""));da.push(this.monthsShort(xa,""))}M.sort(H);X.sort(H);da.sort(H);for(qa=0;12>qa;qa++)M[qa]=Z(M[qa]),X[qa]=Z(X[qa]);for(qa=0;24>qa;qa++)da[qa]=Z(da[qa]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+da.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+X.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+M.join("|")+")","i")}function sa(H,M,X,da,qa,xa,Da){100>H&&0<=H?(M=new Date(H+
400,M,X,da,qa,xa,Da),isFinite(M.getFullYear())&&M.setFullYear(H)):M=new Date(H,M,X,da,qa,xa,Da);return M}function ba(H){if(100>H&&0<=H){var M=Array.prototype.slice.call(arguments);M[0]=H+400;M=new Date(Date.UTC.apply(null,M));isFinite(M.getUTCFullYear())&&M.setUTCFullYear(H)}else M=new Date(Date.UTC.apply(null,arguments));return M}function ea(H,M,X){X=7+M-X;return-((7+ba(H,0,X).getUTCDay()-M)%7)+X-1}function ja(H,M,X,da,qa){X=(7+X-da)%7;da=ea(H,da,qa);da=1+7*(M-1)+X+da;0>=da?(M=H-1,H=(P(M)?366:365)+
da):da>(P(H)?366:365)?(M=H+1,H=da-(P(H)?366:365)):(M=H,H=da);return{year:M,dayOfYear:H}}function oa(H,M,X){var da=ea(H.year(),M,X);da=Math.floor((H.dayOfYear()-da-1)/7)+1;1>da?(H=H.year()-1,M=da+ka(H,M,X)):da>ka(H.year(),M,X)?(M=da-ka(H.year(),M,X),H=H.year()+1):(H=H.year(),M=da);return{week:M,year:H}}function ka(H,M,X){var da=ea(H,M,X);M=ea(H+1,M,X);return((P(H)?366:365)-da+M)/7}function Ca(H,M){return H.slice(M,7).concat(H.slice(0,M))}function Y(H,M,X){var da;H=H.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=
[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],da=0;7>da;++da){var qa=d([2E3,1]).day(da);this._minWeekdaysParse[da]=this.weekdaysMin(qa,"").toLocaleLowerCase();this._shortWeekdaysParse[da]=this.weekdaysShort(qa,"").toLocaleLowerCase();this._weekdaysParse[da]=this.weekdays(qa,"").toLocaleLowerCase()}if(X)M="dddd"===M?Wa.call(this._weekdaysParse,H):"ddd"===M?Wa.call(this._shortWeekdaysParse,H):Wa.call(this._minWeekdaysParse,H);else if("dddd"===M){M=Wa.call(this._weekdaysParse,H);if(-1!==M)return M;
M=Wa.call(this._shortWeekdaysParse,H);if(-1!==M)return M;M=Wa.call(this._minWeekdaysParse,H)}else if("ddd"===M){M=Wa.call(this._shortWeekdaysParse,H);if(-1!==M)return M;M=Wa.call(this._weekdaysParse,H);if(-1!==M)return M;M=Wa.call(this._minWeekdaysParse,H)}else{M=Wa.call(this._minWeekdaysParse,H);if(-1!==M)return M;M=Wa.call(this._weekdaysParse,H);if(-1!==M)return M;M=Wa.call(this._shortWeekdaysParse,H)}return-1!==M?M:null}function aa(){function H(Oa,Xa){return Xa.length-Oa.length}var M=[],X=[],da=
[],qa=[],xa;for(xa=0;7>xa;xa++){var Da=d([2E3,1]).day(xa);var Na=Z(this.weekdaysMin(Da,""));var Ra=Z(this.weekdaysShort(Da,""));Da=Z(this.weekdays(Da,""));M.push(Na);X.push(Ra);da.push(Da);qa.push(Na);qa.push(Ra);qa.push(Da)}M.sort(H);X.sort(H);da.sort(H);qa.sort(H);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+qa.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+da.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+X.join("|")+")","i");
this._weekdaysMinStrictRegex=new RegExp("^("+M.join("|")+")","i")}function L(){return this.hours()%12||12}function la(H,M){y(H,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),M)})}function ua(H,M){return M._meridiemParse}function T(H){return H?H.toLowerCase().replace("_","-"):H}function Ja(H){var M=null;if(void 0===Ua[H]&&"undefined"!==typeof module&&module&&module.exports)try{M=yb._abbr;var X=require;X("./locale/"+H);Ea(M)}catch(da){Ua[H]=null}return Ua[H]}function Ea(H,
M){H&&(H=p(M)?Fa(H):ia(H,M))&&(yb=H);return yb._abbr}function ia(H,M){if(null!==M){var X=bc;M.abbr=H;if(null!=Ua[H])b("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),X=Ua[H]._config;else if(null!=M.parentLocale)if(null!=Ua[M.parentLocale])X=Ua[M.parentLocale]._config;else if(X=Ja(M.parentLocale),
null!=X)X=X._config;else return zb[M.parentLocale]||(zb[M.parentLocale]=[]),zb[M.parentLocale].push({name:H,config:M}),null;Ua[H]=new v(c(X,M));zb[H]&&zb[H].forEach(function(da){ia(da.name,da.config)});Ea(H);return Ua[H]}delete Ua[H];return null}function Fa(H){var M;H&&H._locale&&H._locale._abbr&&(H=H._locale._abbr);if(!H)return yb;if(!n(H)){if(M=Ja(H))return M;H=[H]}a:{M=0;for(var X,da,qa,xa;M<H.length;){xa=T(H[M]).split("-");X=xa.length;for(da=(da=T(H[M+1]))?da.split("-"):null;0<X;){if(qa=Ja(xa.slice(0,
X).join("-"))){H=qa;break a}if(qa=da&&da.length>=X){b:{qa=void 0;var Da=Math.min(xa.length,da.length);for(qa=0;qa<Da;qa+=1)if(xa[qa]!==da[qa])break b;qa=Da}qa=qa>=X-1}if(qa)break;X--}M++}H=yb}return H}function Ka(H){var M;(M=H._a)&&-2===q(H).overflow&&(M=0>M[gb]||11<M[gb]?gb:1>M[eb]||M[eb]>ha(M[ab],M[gb])?eb:0>M[Ya]||24<M[Ya]||24===M[Ya]&&(0!==M[db]||0!==M[hb]||0!==M[ob])?Ya:0>M[db]||59<M[db]?db:0>M[hb]||59<M[hb]?hb:0>M[ob]||999<M[ob]?ob:-1,q(H)._overflowDayOfYear&&(M<ab||M>eb)&&(M=eb),q(H)._overflowWeeks&&
-1===M&&(M=Cc),q(H)._overflowWeekday&&-1===M&&(M=Dc),q(H).overflow=M);return H}function pa(H){var M;var X=H._i;var da=Ec.exec(X)||Fc.exec(X);if(da){q(H).iso=!0;X=0;for(M=Eb.length;X<M;X++)if(Eb[X][1].exec(da[1])){var qa=Eb[X][0];var xa=!1!==Eb[X][2];break}if(null==qa)H._isValid=!1;else{if(da[3]){X=0;for(M=Ub.length;X<M;X++)if(Ub[X][1].exec(da[3])){var Da=(da[2]||" ")+Ub[X][0];break}if(null==Da){H._isValid=!1;return}}if(xa||null==Da){if(da[4])if(Gc.exec(da[4]))var Na="Z";else{H._isValid=!1;return}H._f=
qa+(Da||"")+(Na||"");za(H)}else H._isValid=!1}}else H._isValid=!1}function ya(H){var M=Hc.exec(H._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(M){var X=M[3],da=M[2],qa=M[5],xa=M[6],Da=M[7],Na=parseInt(M[4],10);X=[49>=Na?2E3+Na:999>=Na?1900+Na:Na,cc.indexOf(X),parseInt(da,10),parseInt(qa,10),parseInt(xa,10)];Da&&X.push(parseInt(Da,10));a:{if(Da=M[1])if(Da=dc.indexOf(Da),da=(new Date(X[0],X[1],X[2])).getDay(),Da!==da){q(H).weekdayMismatch=
!0;Da=H._isValid=!1;break a}Da=!0}Da&&(H._a=X,(Da=M[8])?M=Ic[Da]:M[9]?M=0:(M=parseInt(M[10],10),Da=M%100,M=(M-Da)/100*60+Da),H._tzm=M,H._d=ba.apply(null,H._a),H._d.setUTCMinutes(H._d.getUTCMinutes()-H._tzm),q(H).rfc2822=!0)}else H._isValid=!1}function Ba(H){var M=Jc.exec(H._i);null!==M?H._d=new Date(+M[1]):(pa(H),!1===H._isValid&&(delete H._isValid,ya(H),!1===H._isValid&&(delete H._isValid,H._strict?H._isValid=!1:r.createFromInputFallback(H))))}function Aa(H,M,X){return null!=H?H:null!=M?M:X}function ta(H){var M=
[];if(!H._d){var X=new Date(r.now());X=H._useUTC?[X.getUTCFullYear(),X.getUTCMonth(),X.getUTCDate()]:[X.getFullYear(),X.getMonth(),X.getDate()];if(H._w&&null==H._a[eb]&&null==H._a[gb]){var da=H._w;if(null!=da.GG||null!=da.W||null!=da.E){var qa=1;var xa=4;var Da=Aa(da.GG,H._a[ab],oa(va(),1,4).year);var Na=Aa(da.W,1);var Ra=Aa(da.E,1);if(1>Ra||7<Ra)var Oa=!0}else if(qa=H._locale._week.dow,xa=H._locale._week.doy,Na=oa(va(),qa,xa),Da=Aa(da.gg,H._a[ab],Na.year),Na=Aa(da.w,Na.week),null!=da.d){if(Ra=da.d,
0>Ra||6<Ra)Oa=!0}else if(null!=da.e){if(Ra=da.e+qa,0>da.e||6<da.e)Oa=!0}else Ra=qa;1>Na||Na>ka(Da,qa,xa)?q(H)._overflowWeeks=!0:null!=Oa?q(H)._overflowWeekday=!0:(Oa=ja(Da,Na,Ra,qa,xa),H._a[ab]=Oa.year,H._dayOfYear=Oa.dayOfYear)}if(null!=H._dayOfYear){Oa=Aa(H._a[ab],X[ab]);if(H._dayOfYear>(P(Oa)?366:365)||0===H._dayOfYear)q(H)._overflowDayOfYear=!0;Oa=ba(Oa,0,H._dayOfYear);H._a[gb]=Oa.getUTCMonth();H._a[eb]=Oa.getUTCDate()}for(Oa=0;3>Oa&&null==H._a[Oa];++Oa)H._a[Oa]=M[Oa]=X[Oa];for(;7>Oa;Oa++)H._a[Oa]=
M[Oa]=null==H._a[Oa]?2===Oa?1:0:H._a[Oa];24===H._a[Ya]&&0===H._a[db]&&0===H._a[hb]&&0===H._a[ob]&&(H._nextDay=!0,H._a[Ya]=0);H._d=(H._useUTC?ba:sa).apply(null,M);M=H._useUTC?H._d.getUTCDay():H._d.getDay();null!=H._tzm&&H._d.setUTCMinutes(H._d.getUTCMinutes()-H._tzm);H._nextDay&&(H._a[Ya]=24);H._w&&"undefined"!==typeof H._w.d&&H._w.d!==M&&(q(H).weekdayMismatch=!0)}}function za(H){if(H._f===r.ISO_8601)pa(H);else if(H._f===r.RFC_2822)ya(H);else{H._a=[];q(H).empty=!0;var M=""+H._i,X,da,qa=M.length,xa=
0;var Da=F(H._f,H._locale).match(Qb)||[];for(X=0;X<Da.length;X++){var Na=Da[X];if(da=(M.match(I(Na,H))||[])[0]){var Ra=M.substr(0,M.indexOf(da));0<Ra.length&&q(H).unusedInput.push(Ra);M=M.slice(M.indexOf(da)+da.length);xa+=da.length}if(qb[Na]){if(da?q(H).empty=!1:q(H).unusedTokens.push(Na),Ra=H,null!=da&&l(Tb,Na))Tb[Na](da,Ra._a,Ra,Na)}else H._strict&&!da&&q(H).unusedTokens.push(Na)}q(H).charsLeftOver=qa-xa;0<M.length&&q(H).unusedInput.push(M);12>=H._a[Ya]&&!0===q(H).bigHour&&0<H._a[Ya]&&(q(H).bigHour=
void 0);q(H).parsedDateParts=H._a.slice(0);q(H).meridiem=H._meridiem;M=H._a;X=Ya;qa=H._locale;Da=H._a[Ya];xa=H._meridiem;null!=xa&&(null!=qa.meridiemHour?Da=qa.meridiemHour(Da,xa):null!=qa.isPM&&((qa=qa.isPM(xa))&&12>Da&&(Da+=12),qa||12!==Da||(Da=0)));M[X]=Da;M=q(H).era;null!==M&&(H._a[ab]=H._locale.erasConvertYear(M,H._a[ab]));ta(H);Ka(H)}}function wa(H){if(!H._d){var M=R(H._i);H._a=f([M.year,M.month,void 0===M.day?M.date:M.day,M.hour,M.minute,M.second,M.millisecond],function(X){return X&&parseInt(X,
10)});ta(H)}}function Ia(H){var M=H._i,X=H._f;H._locale=H._locale||Fa(H._l);if(null===M||void 0===X&&""===M)return w({nullInput:!0});"string"===typeof M&&(H._i=M=H._locale.preparse(M));if(A(M))return new z(Ka(M));if(e(M))H._d=M;else if(n(X)){var da=!1;if(0===H._f.length)q(H).invalidFormat=!0,H._d=new Date(NaN);else{for(M=0;M<H._f.length;M++){X=0;var qa=!1;var xa=x({},H);null!=H._useUTC&&(xa._useUTC=H._useUTC);xa._f=H._f[M];za(xa);t(xa)&&(qa=!0);X+=q(xa).charsLeftOver;X+=10*q(xa).unusedTokens.length;
q(xa).score=X;if(da)X<Da&&(Da=X,Na=xa);else if(null==Da||X<Da||qa){var Da=X;var Na=xa;qa&&(da=!0)}}g(H,Na||xa)}}else X?za(H):Ha(H);t(H)||(H._d=null);return H}function Ha(H){var M=H._i;p(M)?H._d=new Date(r.now()):e(M)?H._d=new Date(M.valueOf()):"string"===typeof M?Ba(H):n(M)?(H._a=f(M.slice(0),function(X){return parseInt(X,10)}),ta(H)):a(M)?wa(H):m(M)?H._d=new Date(M):r.createFromInputFallback(H)}function La(H,M,X,da,qa){var xa={};if(!0===M||!1===M)da=M,M=void 0;if(!0===X||!1===X)da=X,X=void 0;if(a(H)&&
k(H)||n(H)&&0===H.length)H=void 0;xa._isAMomentObject=!0;xa._useUTC=xa._isUTC=qa;xa._l=X;xa._i=H;xa._f=M;xa._strict=da;H=new z(Ka(Ia(xa)));H._nextDay&&(H.add(1,"d"),H._nextDay=void 0);return H}function va(H,M,X,da){return La(H,M,X,da,!1)}function Ma(H,M){var X;1===M.length&&n(M[0])&&(M=M[0]);if(!M.length)return va();var da=M[0];for(X=1;X<M.length;++X)if(!M[X].isValid()||M[X][H](da))da=M[X];return da}function Ta(H){var M=R(H);H=M.year||0;var X=M.quarter||0,da=M.month||0,qa=M.week||M.isoWeek||0,xa=
M.day||0,Da=M.hour||0,Na=M.minute||0,Ra=M.second||0,Oa=M.millisecond||0;a:{var Xa,ec=!1;for(Xa in M)if(l(M,Xa)&&(-1===Wa.call(Ab,Xa)||null!=M[Xa]&&isNaN(M[Xa]))){M=!1;break a}for(Xa=0;Xa<Ab.length;++Xa)if(M[Ab[Xa]]){if(ec){M=!1;break a}parseFloat(M[Ab[Xa]])!==K(M[Ab[Xa]])&&(ec=!0)}M=!0}this._isValid=M;this._milliseconds=+Oa+1E3*Ra+6E4*Na+36E5*Da;this._days=+xa+7*qa;this._months=+da+3*X+12*H;this._data={};this._locale=Fa();this._bubble()}function Va(H){return H instanceof Ta}function lb(H){return 0>
H?-1*Math.round(-1*H):Math.round(H)}function Cb(H,M){y(H,0,0,function(){var X=this.utcOffset(),da="+";0>X&&(X=-X,da="-");return da+u(~~(X/60),2)+M+u(~~X%60,2)})}function vb(H,M){H=(M||"").match(H);if(null===H)return null;H=((H[H.length-1]||[])+"").match(Kc)||["-",0,0];M=+(60*H[1])+K(H[2]);return 0===M?0:"+"===H[0]?M:-M}function wb(H,M){return M._isUTC?(M=M.clone(),H=(A(H)||e(H)?H.valueOf():va(H).valueOf())-M.valueOf(),M._d.setTime(M._d.valueOf()+H),r.updateOffset(M,!1),M):va(H).local()}function nb(){return this.isValid()?
this._isUTC&&0===this._offset:!1}function bb(H,M){var X=H,da=null;Va(H)?X={ms:H._milliseconds,d:H._days,M:H._months}:m(H)||!isNaN(+H)?(X={},M?X[M]=+H:X.milliseconds=+H):(da=Lc.exec(H))?(X="-"===da[1]?-1:1,X={y:0,d:K(da[eb])*X,h:K(da[Ya])*X,m:K(da[db])*X,s:K(da[hb])*X,ms:K(lb(1E3*da[ob]))*X}):(da=Mc.exec(H))?(X="-"===da[1]?-1:1,X={y:fb(da[2],X),M:fb(da[3],X),w:fb(da[4],X),d:fb(da[5],X),h:fb(da[6],X),m:fb(da[7],X),s:fb(da[8],X)}):null==X?X={}:"object"===typeof X&&("from"in X||"to"in X)&&(da=va(X.from),
X=va(X.to),da.isValid()&&X.isValid()?(X=wb(X,da),da.isBefore(X)?X=Za(da,X):(X=Za(X,da),X.milliseconds=-X.milliseconds,X.months=-X.months),da=X):da={milliseconds:0,months:0},X={},X.ms=da.milliseconds,X.M=da.months);X=new Ta(X);Va(H)&&l(H,"_locale")&&(X._locale=H._locale);Va(H)&&l(H,"_isValid")&&(X._isValid=H._isValid);return X}function fb(H,M){H=H&&parseFloat(H.replace(",","."));return(isNaN(H)?0:H)*M}function Za(H,M){var X={};X.months=M.month()-H.month()+12*(M.year()-H.year());H.clone().add(X.months,
"M").isAfter(M)&&--X.months;X.milliseconds=+M-+H.clone().add(X.months,"M");return X}function fc(H,M){return function(X,da){if(null!==da&&!isNaN(+da)){b(M,"moment()."+M+"(period, number) is deprecated. Please use moment()."+M+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var qa=X;X=da;da=qa}X=bb(X,da);gc(this,X,H);return this}}function gc(H,M,X,da){var qa=M._milliseconds,xa=lb(M._days);M=lb(M._months);H.isValid()&&(da=null==da?!0:da,M&&na(H,Q(H,"Month")+
M*X),xa&&W(H,"Date",Q(H,"Date")+xa*X),qa&&H._d.setTime(H._d.valueOf()+qa*X),da&&r.updateOffset(H,xa||M))}function hc(H){return"string"===typeof H||H instanceof String}function Nc(H){var M=n(H),X=!1;M&&(X=0===H.filter(function(da){return!m(da)&&hc(H)}).length);return M&&X}function Fb(H,M){if(H.date()<M.date())return-Fb(M,H);var X=12*(M.year()-H.year())+(M.month()-H.month()),da=H.clone().add(X,"months");0>M-da?(H=H.clone().add(X-1,"months"),M=(M-da)/(da-H)):(H=H.clone().add(X+1,"months"),M=(M-da)/(H-
da));return-(X+M)||0}function ic(H){if(void 0===H)return this._locale._abbr;H=Fa(H);null!=H&&(this._locale=H);return this}function jc(){return this._locale}function rb(H,M){return(H%M+M)%M}function kc(H,M,X){return 100>H&&0<=H?new Date(H+400,M,X)-lc:(new Date(H,M,X)).valueOf()}function mc(H,M,X){return 100>H&&0<=H?Date.UTC(H+400,M,X)-lc:Date.UTC(H,M,X)}function Vb(H,M){return M.erasAbbrRegex(H)}function Wb(){var H=[],M=[],X=[],da=[],qa,xa=this.eras();var Da=0;for(qa=xa.length;Da<qa;++Da)M.push(Z(xa[Da].name)),
H.push(Z(xa[Da].abbr)),X.push(Z(xa[Da].narrow)),da.push(Z(xa[Da].name)),da.push(Z(xa[Da].abbr)),da.push(Z(xa[Da].narrow));this._erasRegex=new RegExp("^("+da.join("|")+")","i");this._erasNameRegex=new RegExp("^("+M.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+H.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+X.join("|")+")","i")}function Gb(H,M){y(0,[H,H.length],0,M)}function nc(H,M,X,da,qa){if(null==H)return oa(this,da,qa).year;var xa=ka(H,da,qa);M>xa&&(M=xa);H=ja(H,M,X,da,qa);
H=ba(H.year,0,H.dayOfYear);this.year(H.getUTCFullYear());this.month(H.getUTCMonth());this.date(H.getUTCDate());return this}function Oc(H,M){M[ob]=K(1E3*("0."+H))}function oc(H){return H}function Hb(H,M,X,da){var qa=Fa();M=d().set(da,M);return qa[X](M,H)}function pc(H,M,X){m(H)&&(M=H,H=void 0);H=H||"";if(null!=M)return Hb(H,M,X,"month");var da=[];for(M=0;12>M;M++)da[M]=Hb(H,M,X,"month");return da}function Xb(H,M,X,da){"boolean"!==typeof H&&(X=M=H,H=!1);m(M)&&(X=M,M=void 0);M=M||"";var qa=Fa();H=H?
qa._week.dow:0;qa=[];if(null!=X)return Hb(M,(X+H)%7,da,"day");for(X=0;7>X;X++)qa[X]=Hb(M,(X+H)%7,da,"day");return qa}function qc(H,M,X,da){M=bb(M,X);H._milliseconds+=da*M._milliseconds;H._days+=da*M._days;H._months+=da*M._months;return H._bubble()}function rc(H){return 0>H?Math.floor(H):Math.ceil(H)}function ib(H){return function(){return this.as(H)}}function pb(H){return function(){return this.isValid()?this._data[H]:NaN}}function Pc(H,M,X,da,qa){return qa.relativeTime(M||1,!!X,H,da)}function sb(H){return(0<
H)-(0>H)||+H}function Ib(){if(!this.isValid())return this.localeData().invalidDate();var H=Yb(this._milliseconds)/1E3,M=Yb(this._days),X=Yb(this._months),da=this.asSeconds();if(!da)return"P0D";var qa=U(H/60);var xa=U(qa/60);H%=60;qa%=60;var Da=U(X/12);X%=12;var Na=H?H.toFixed(3).replace(/\.?0+$/,""):"";var Ra=0>da?"-":"";var Oa=sb(this._months)!==sb(da)?"-":"";var Xa=sb(this._days)!==sb(da)?"-":"";da=sb(this._milliseconds)!==sb(da)?"-":"";return Ra+"P"+(Da?Oa+Da+"Y":"")+(X?Oa+X+"M":"")+(M?Xa+M+"D":
"")+(xa||qa||H?"T":"")+(xa?da+xa+"H":"")+(qa?da+qa+"M":"")+(H?da+Na+"S":"")}var Bc=Array.prototype.some?Array.prototype.some:function(H){var M=Object(this),X=M.length>>>0,da;for(da=0;da<X;da++)if(da in M&&H.call(this,M[da],da,M))return!0;return!1};var Ob=r.momentProperties=[],Pb=!1,ac={};r.suppressDeprecationWarnings=!1;r.deprecationHandler=null;var Qc=Object.keys?Object.keys:function(H){var M,X=[];for(M in H)l(H,M)&&X.push(M);return X};var Qb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
Db=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Rb={},qb={},xb={},$a={},sc=/\d/,cb=/\d\d/,tc=/\d{3}/,Zb=/\d{4}/,Jb=/[+-]?\d{6}/,Sa=/\d\d?/,uc=/\d\d\d\d?/,vc=/\d\d\d\d\d\d?/,Kb=/\d{1,3}/,$b=/\d{1,4}/,Lb=/[+-]?\d{1,6}/,tb=/\d+/,Mb=/[+-]?\d+/,Rc=/Z|[+-]\d\d:?\d\d/gi,Nb=/Z|[+-]\d\d(?::?\d\d)?/gi,Bb=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var Sb={};var Tb={},ab=0,gb=1,eb=2,Ya=3,db=4,hb=5,ob=
6,Cc=7,Dc=8;var Wa=Array.prototype.indexOf?Array.prototype.indexOf:function(H){var M;for(M=0;M<this.length;++M)if(this[M]===H)return M;return-1};y("M",["MM",2],"Mo",function(){return this.month()+1});y("MMM",0,0,function(H){return this.localeData().monthsShort(this,H)});y("MMMM",0,0,function(H){return this.localeData().months(this,H)});G("month","M");$a.month=8;N("M",Sa);N("MM",Sa,cb);N("MMM",function(H,M){return M.monthsShortRegex(H)});N("MMMM",function(H,M){return M.monthsRegex(H)});ca(["M","MM"],
function(H,M){M[gb]=K(H)-1});ca(["MMM","MMMM"],function(H,M,X,da){da=X._locale.monthsParse(H,da,X._strict);null!=da?M[gb]=da:q(X).invalidMonth=H});var cc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),wc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;y("Y",0,0,function(){var H=this.year();return 9999>=H?u(H,4):"+"+H});y(0,["YY",2],0,function(){return this.year()%100});y(0,["YYYY",4],0,"year");y(0,["YYYYY",5],0,"year");y(0,["YYYYYY",6,!0],0,"year");G("year","y");$a.year=1;N("Y",Mb);N("YY",Sa,cb);N("YYYY",
$b,Zb);N("YYYYY",Lb,Jb);N("YYYYYY",Lb,Jb);ca(["YYYYY","YYYYYY"],ab);ca("YYYY",function(H,M){M[ab]=2===H.length?r.parseTwoDigitYear(H):K(H)});ca("YY",function(H,M){M[ab]=r.parseTwoDigitYear(H)});ca("Y",function(H,M){M[ab]=parseInt(H,10)});r.parseTwoDigitYear=function(H){return K(H)+(68<K(H)?1900:2E3)};var xc=V("FullYear",!0);y("w",["ww",2],"wo","week");y("W",["WW",2],"Wo","isoWeek");G("week","w");G("isoWeek","W");$a.week=5;$a.isoWeek=5;N("w",Sa);N("ww",Sa,cb);N("W",Sa);N("WW",Sa,cb);fa(["w","ww","W",
"WW"],function(H,M,X,da){M[da.substr(0,1)]=K(H)});y("d",0,"do","day");y("dd",0,0,function(H){return this.localeData().weekdaysMin(this,H)});y("ddd",0,0,function(H){return this.localeData().weekdaysShort(this,H)});y("dddd",0,0,function(H){return this.localeData().weekdays(this,H)});y("e",0,0,"weekday");y("E",0,0,"isoWeekday");G("day","d");G("weekday","e");G("isoWeekday","E");$a.day=11;$a.weekday=11;$a.isoWeekday=11;N("d",Sa);N("e",Sa);N("E",Sa);N("dd",function(H,M){return M.weekdaysMinRegex(H)});N("ddd",
function(H,M){return M.weekdaysShortRegex(H)});N("dddd",function(H,M){return M.weekdaysRegex(H)});fa(["dd","ddd","dddd"],function(H,M,X,da){da=X._locale.weekdaysParse(H,da,X._strict);null!=da?M.d=da:q(X).invalidWeekday=H});fa(["d","e","E"],function(H,M,X,da){M[da]=K(H)});var dc="Sun Mon Tue Wed Thu Fri Sat".split(" ");y("H",["HH",2],0,"hour");y("h",["hh",2],0,L);y("k",["kk",2],0,function(){return this.hours()||24});y("hmm",0,0,function(){return""+L.apply(this)+u(this.minutes(),2)});y("hmmss",0,0,
function(){return""+L.apply(this)+u(this.minutes(),2)+u(this.seconds(),2)});y("Hmm",0,0,function(){return""+this.hours()+u(this.minutes(),2)});y("Hmmss",0,0,function(){return""+this.hours()+u(this.minutes(),2)+u(this.seconds(),2)});la("a",!0);la("A",!1);G("hour","h");$a.hour=13;N("a",ua);N("A",ua);N("H",Sa);N("h",Sa);N("k",Sa);N("HH",Sa,cb);N("hh",Sa,cb);N("kk",Sa,cb);N("hmm",uc);N("hmmss",vc);N("Hmm",uc);N("Hmmss",vc);ca(["H","HH"],Ya);ca(["k","kk"],function(H,M,X){H=K(H);M[Ya]=24===H?0:H});ca(["a",
"A"],function(H,M,X){X._isPm=X._locale.isPM(H);X._meridiem=H});ca(["h","hh"],function(H,M,X){M[Ya]=K(H);q(X).bigHour=!0});ca("hmm",function(H,M,X){var da=H.length-2;M[Ya]=K(H.substr(0,da));M[db]=K(H.substr(da));q(X).bigHour=!0});ca("hmmss",function(H,M,X){var da=H.length-4,qa=H.length-2;M[Ya]=K(H.substr(0,da));M[db]=K(H.substr(da,2));M[hb]=K(H.substr(qa));q(X).bigHour=!0});ca("Hmm",function(H,M,X){X=H.length-2;M[Ya]=K(H.substr(0,X));M[db]=K(H.substr(X))});ca("Hmmss",function(H,M,X){X=H.length-4;var da=
H.length-2;M[Ya]=K(H.substr(0,X));M[db]=K(H.substr(X,2));M[hb]=K(H.substr(da))});var Sc=V("Hours",!0),bc={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",
past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:cc,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:dc,meridiemParse:/[ap]\.?m?\.?/i},
Ua={},zb={},yb,Ec=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Gc=/Z|[+-]\d\d(?::?\d\d)?/,Eb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],
["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Ub=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Jc=/^\/?Date\((-?\d+)/i,Hc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,
Ic={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};r.createFromInputFallback=B("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(H){H._d=new Date(H._i+(H._useUTC?" UTC":""))});r.ISO_8601=function(){};r.RFC_2822=function(){};
var Tc=B("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var H=va.apply(null,arguments);return this.isValid()&&H.isValid()?H<this?this:H:w()}),Uc=B("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var H=va.apply(null,arguments);return this.isValid()&&H.isValid()?H>this?this:H:w()}),Ab="year quarter month week day hour minute second millisecond".split(" ");Cb("Z",":");Cb("ZZ",
"");N("Z",Nb);N("ZZ",Nb);ca(["Z","ZZ"],function(H,M,X){X._useUTC=!0;X._tzm=vb(Nb,H)});var Kc=/([\+\-]|\d\d)/gi;r.updateOffset=function(){};var Lc=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Mc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;bb.fn=Ta.prototype;bb.invalid=function(){return bb(NaN)};var Vc=fc(1,"add"),Wc=fc(-1,"subtract");r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";
r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var yc=B("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(H){return void 0===H?this.localeData():this.locale(H)}),lc=126227808E5;y("N",0,0,"eraAbbr");y("NN",0,0,"eraAbbr");y("NNN",0,0,"eraAbbr");y("NNNN",0,0,"eraName");y("NNNNN",0,0,"eraNarrow");y("y",["y",1],"yo","eraYear");y("y",["yy",2],0,"eraYear");y("y",["yyy",3],0,"eraYear");y("y",["yyyy",4],0,
"eraYear");N("N",Vb);N("NN",Vb);N("NNN",Vb);N("NNNN",function(H,M){return M.erasNameRegex(H)});N("NNNNN",function(H,M){return M.erasNarrowRegex(H)});ca(["N","NN","NNN","NNNN","NNNNN"],function(H,M,X,da){(M=X._locale.erasParse(H,da,X._strict))?q(X).era=M:q(X).invalidEra=H});N("y",tb);N("yy",tb);N("yyy",tb);N("yyyy",tb);N("yo",function(H,M){return M._eraYearOrdinalRegex||tb});ca(["y","yy","yyy","yyyy"],ab);ca(["yo"],function(H,M,X,da){var qa;X._locale._eraYearOrdinalRegex&&(qa=H.match(X._locale._eraYearOrdinalRegex));
M[ab]=X._locale.eraYearOrdinalParse?X._locale.eraYearOrdinalParse(H,qa):parseInt(H,10)});y(0,["gg",2],0,function(){return this.weekYear()%100});y(0,["GG",2],0,function(){return this.isoWeekYear()%100});Gb("gggg","weekYear");Gb("ggggg","weekYear");Gb("GGGG","isoWeekYear");Gb("GGGGG","isoWeekYear");G("weekYear","gg");G("isoWeekYear","GG");$a.weekYear=1;$a.isoWeekYear=1;N("G",Mb);N("g",Mb);N("GG",Sa,cb);N("gg",Sa,cb);N("GGGG",$b,Zb);N("gggg",$b,Zb);N("GGGGG",Lb,Jb);N("ggggg",Lb,Jb);fa(["gggg","ggggg",
"GGGG","GGGGG"],function(H,M,X,da){M[da.substr(0,2)]=K(H)});fa(["gg","GG"],function(H,M,X,da){M[da]=r.parseTwoDigitYear(H)});y("Q",0,"Qo","quarter");G("quarter","Q");$a.quarter=7;N("Q",sc);ca("Q",function(H,M){M[gb]=3*(K(H)-1)});y("D",["DD",2],"Do","date");G("date","D");$a.date=9;N("D",Sa);N("DD",Sa,cb);N("Do",function(H,M){return H?M._dayOfMonthOrdinalParse||M._ordinalParse:M._dayOfMonthOrdinalParseLenient});ca(["D","DD"],eb);ca("Do",function(H,M){M[eb]=K(H.match(Sa)[0])});var zc=V("Date",!0);y("DDD",
["DDDD",3],"DDDo","dayOfYear");G("dayOfYear","DDD");$a.dayOfYear=4;N("DDD",Kb);N("DDDD",tc);ca(["DDD","DDDD"],function(H,M,X){X._dayOfYear=K(H)});y("m",["mm",2],0,"minute");G("minute","m");$a.minute=14;N("m",Sa);N("mm",Sa,cb);ca(["m","mm"],db);var Xc=V("Minutes",!1);y("s",["ss",2],0,"second");G("second","s");$a.second=15;N("s",Sa);N("ss",Sa,cb);ca(["s","ss"],hb);var Yc=V("Seconds",!1);y("S",0,0,function(){return~~(this.millisecond()/100)});y(0,["SS",2],0,function(){return~~(this.millisecond()/10)});
y(0,["SSS",3],0,"millisecond");y(0,["SSSS",4],0,function(){return 10*this.millisecond()});y(0,["SSSSS",5],0,function(){return 100*this.millisecond()});y(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});y(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});y(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});y(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});G("millisecond","ms");$a.millisecond=16;N("S",Kb,sc);N("SS",Kb,cb);N("SSS",Kb,tc);var mb;for(mb=
"SSSS";9>=mb.length;mb+="S")N(mb,tb);for(mb="S";9>=mb.length;mb+="S")ca(mb,Oc);var Zc=V("Milliseconds",!1);y("z",0,0,"zoneAbbr");y("zz",0,0,"zoneName");var Ga=z.prototype;Ga.add=Vc;Ga.calendar=function(H,M){if(1===arguments.length)if(arguments[0]){var X=arguments[0],da;if(!(da=A(X)||e(X)||hc(X)||m(X)||Nc(X))){da=a(X)&&!k(X);var qa=!1,xa="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),Da;for(Da=0;Da<xa.length;Da+=
1){var Na=xa[Da];qa=qa||l(X,Na)}da=da&&qa}if(da||null===X||void 0===X)H=arguments[0],M=void 0;else{X=arguments[0];da=a(X)&&!k(X);qa=!1;xa="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(Da=0;Da<xa.length;Da+=1)Na=xa[Da],qa=qa||l(X,Na);da&&qa&&(M=arguments[0],H=void 0)}}else M=H=void 0;X=H||va();da=wb(X,this).startOf("day");da=r.calendarFormat(this,da)||"sameElse";qa=M&&(h(M[da])?M[da].call(this,X):M[da]);return this.format(qa||this.localeData().calendar(da,this,va(X)))};Ga.clone=
function(){return new z(this)};Ga.diff=function(H,M,X){if(!this.isValid())return NaN;H=wb(H,this);if(!H.isValid())return NaN;var da=6E4*(H.utcOffset()-this.utcOffset());M=J(M);switch(M){case "year":M=Fb(this,H)/12;break;case "month":M=Fb(this,H);break;case "quarter":M=Fb(this,H)/3;break;case "second":M=(this-H)/1E3;break;case "minute":M=(this-H)/6E4;break;case "hour":M=(this-H)/36E5;break;case "day":M=(this-H-da)/864E5;break;case "week":M=(this-H-da)/6048E5;break;default:M=this-H}return X?M:U(M)};
Ga.endOf=function(H){H=J(H);if(void 0===H||"millisecond"===H||!this.isValid())return this;var M=this._isUTC?mc:kc;switch(H){case "year":var X=M(this.year()+1,0,1)-1;break;case "quarter":X=M(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":X=M(this.year(),this.month()+1,1)-1;break;case "week":X=M(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":X=M(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":X=M(this.year(),
this.month(),this.date()+1)-1;break;case "hour":X=this._d.valueOf();X+=36E5-rb(X+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":X=this._d.valueOf();X+=6E4-rb(X,6E4)-1;break;case "second":X=this._d.valueOf(),X+=1E3-rb(X,1E3)-1}this._d.setTime(X);r.updateOffset(this,!0);return this};Ga.format=function(H){H||(H=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);H=E(this,H);return this.localeData().postformat(H)};Ga.from=function(H,M){return this.isValid()&&(A(H)&&H.isValid()||va(H).isValid())?
bb({to:this,from:H}).locale(this.locale()).humanize(!M):this.localeData().invalidDate()};Ga.fromNow=function(H){return this.from(va(),H)};Ga.to=function(H,M){return this.isValid()&&(A(H)&&H.isValid()||va(H).isValid())?bb({from:this,to:H}).locale(this.locale()).humanize(!M):this.localeData().invalidDate()};Ga.toNow=function(H){return this.to(va(),H)};Ga.get=function(H){H=J(H);return h(this[H])?this[H]():this};Ga.invalidAt=function(){return q(this).overflow};Ga.isAfter=function(H,M){H=A(H)?H:va(H);
if(!this.isValid()||!H.isValid())return!1;M=J(M)||"millisecond";return"millisecond"===M?this.valueOf()>H.valueOf():H.valueOf()<this.clone().startOf(M).valueOf()};Ga.isBefore=function(H,M){H=A(H)?H:va(H);if(!this.isValid()||!H.isValid())return!1;M=J(M)||"millisecond";return"millisecond"===M?this.valueOf()<H.valueOf():this.clone().endOf(M).valueOf()<H.valueOf()};Ga.isBetween=function(H,M,X,da){H=A(H)?H:va(H);M=A(M)?M:va(M);if(!(this.isValid()&&H.isValid()&&M.isValid()))return!1;da=da||"()";return("("===
da[0]?this.isAfter(H,X):!this.isBefore(H,X))&&(")"===da[1]?this.isBefore(M,X):!this.isAfter(M,X))};Ga.isSame=function(H,M){H=A(H)?H:va(H);if(!this.isValid()||!H.isValid())return!1;M=J(M)||"millisecond";if("millisecond"===M)return this.valueOf()===H.valueOf();H=H.valueOf();return this.clone().startOf(M).valueOf()<=H&&H<=this.clone().endOf(M).valueOf()};Ga.isSameOrAfter=function(H,M){return this.isSame(H,M)||this.isAfter(H,M)};Ga.isSameOrBefore=function(H,M){return this.isSame(H,M)||this.isBefore(H,
M)};Ga.isValid=function(){return t(this)};Ga.lang=yc;Ga.locale=ic;Ga.localeData=jc;Ga.max=Uc;Ga.min=Tc;Ga.parsingFlags=function(){return g({},q(this))};Ga.set=function(H,M){if("object"===typeof H){H=R(H);M=O(H);var X;for(X=0;X<M.length;X++)this[M[X].unit](H[M[X].unit])}else if(H=J(H),h(this[H]))return this[H](M);return this};Ga.startOf=function(H){H=J(H);if(void 0===H||"millisecond"===H||!this.isValid())return this;var M=this._isUTC?mc:kc;switch(H){case "year":var X=M(this.year(),0,1);break;case "quarter":X=
M(this.year(),this.month()-this.month()%3,1);break;case "month":X=M(this.year(),this.month(),1);break;case "week":X=M(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":X=M(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":X=M(this.year(),this.month(),this.date());break;case "hour":X=this._d.valueOf();X-=rb(X+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":X=this._d.valueOf();X-=rb(X,6E4);break;case "second":X=this._d.valueOf(),
X-=rb(X,1E3)}this._d.setTime(X);r.updateOffset(this,!0);return this};Ga.subtract=Wc;Ga.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};Ga.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};Ga.toDate=function(){return new Date(this.valueOf())};Ga.toISOString=function(H){if(!this.isValid())return null;
var M=(H=!0!==H)?this.clone().utc():this;return 0>M.year()||9999<M.year()?E(M,H?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):h(Date.prototype.toISOString)?H?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",E(M,"Z")):E(M,H?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};Ga.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var H="moment",M="";this.isLocal()||(H=0===this.utcOffset()?"moment.utc":
"moment.parseZone",M="Z");H="["+H+'("]';var X=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(H+X+"-MM-DD[T]HH:mm:ss.SSS"+(M+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol.for&&(Ga[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});Ga.toJSON=function(){return this.isValid()?this.toISOString():null};Ga.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};Ga.unix=function(){return Math.floor(this.valueOf()/
1E3)};Ga.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};Ga.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};Ga.eraName=function(){var H,M=this.localeData().eras();var X=0;for(H=M.length;X<H;++X){var da=this.clone().startOf("day").valueOf();if(M[X].since<=da&&da<=M[X].until||M[X].until<=da&&da<=M[X].since)return M[X].name}return""};Ga.eraNarrow=function(){var H,M=this.localeData().eras();var X=0;for(H=M.length;X<
H;++X){var da=this.clone().startOf("day").valueOf();if(M[X].since<=da&&da<=M[X].until||M[X].until<=da&&da<=M[X].since)return M[X].narrow}return""};Ga.eraAbbr=function(){var H,M=this.localeData().eras();var X=0;for(H=M.length;X<H;++X){var da=this.clone().startOf("day").valueOf();if(M[X].since<=da&&da<=M[X].until||M[X].until<=da&&da<=M[X].since)return M[X].abbr}return""};Ga.eraYear=function(){var H,M=this.localeData().eras();var X=0;for(H=M.length;X<H;++X){var da=M[X].since<=M[X].until?1:-1;var qa=
this.clone().startOf("day").valueOf();if(M[X].since<=qa&&qa<=M[X].until||M[X].until<=qa&&qa<=M[X].since)return(this.year()-r(M[X].since).year())*da+M[X].offset}return this.year()};Ga.year=xc;Ga.isLeapYear=function(){return P(this.year())};Ga.weekYear=function(H){return nc.call(this,H,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};Ga.isoWeekYear=function(H){return nc.call(this,H,this.isoWeek(),this.isoWeekday(),1,4)};Ga.quarter=Ga.quarters=function(H){return null==
H?Math.ceil((this.month()+1)/3):this.month(3*(H-1)+this.month()%3)};Ga.month=ma;Ga.daysInMonth=function(){return ha(this.year(),this.month())};Ga.week=Ga.weeks=function(H){var M=this.localeData().week(this);return null==H?M:this.add(7*(H-M),"d")};Ga.isoWeek=Ga.isoWeeks=function(H){var M=oa(this,1,4).week;return null==H?M:this.add(7*(H-M),"d")};Ga.weeksInYear=function(){var H=this.localeData()._week;return ka(this.year(),H.dow,H.doy)};Ga.weeksInWeekYear=function(){var H=this.localeData()._week;return ka(this.weekYear(),
H.dow,H.doy)};Ga.isoWeeksInYear=function(){return ka(this.year(),1,4)};Ga.isoWeeksInISOWeekYear=function(){return ka(this.isoWeekYear(),1,4)};Ga.date=zc;Ga.day=Ga.days=function(H){if(!this.isValid())return null!=H?this:NaN;var M=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=H){var X=this.localeData();"string"===typeof H&&(isNaN(H)?(H=X.weekdaysParse(H),H="number"===typeof H?H:null):H=parseInt(H,10));return this.add(H-M,"d")}return M};Ga.weekday=function(H){if(!this.isValid())return null!=
H?this:NaN;var M=(this.day()+7-this.localeData()._week.dow)%7;return null==H?M:this.add(H-M,"d")};Ga.isoWeekday=function(H){if(!this.isValid())return null!=H?this:NaN;if(null!=H){var M=this.localeData();H="string"===typeof H?M.weekdaysParse(H)%7||7:isNaN(H)?null:H;return this.day(this.day()%7?H:H-7)}return this.day()||7};Ga.dayOfYear=function(H){var M=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==H?M:this.add(H-M,"d")};Ga.hour=Ga.hours=Sc;Ga.minute=Ga.minutes=
Xc;Ga.second=Ga.seconds=Yc;Ga.millisecond=Ga.milliseconds=Zc;Ga.utcOffset=function(H,M,X){var da=this._offset||0,qa;if(!this.isValid())return null!=H?this:NaN;if(null!=H){if("string"===typeof H){if(H=vb(Nb,H),null===H)return this}else 16>Math.abs(H)&&!X&&(H*=60);!this._isUTC&&M&&(qa=-Math.round(this._d.getTimezoneOffset()));this._offset=H;this._isUTC=!0;null!=qa&&this.add(qa,"m");da!==H&&(!M||this._changeInProgress?gc(this,bb(H-da,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,
!0),this._changeInProgress=null));return this}return this._isUTC?da:-Math.round(this._d.getTimezoneOffset())};Ga.utc=function(H){return this.utcOffset(0,H)};Ga.local=function(H){this._isUTC&&(this.utcOffset(0,H),this._isUTC=!1,H&&this.subtract(-Math.round(this._d.getTimezoneOffset()),"m"));return this};Ga.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var H=vb(Rc,this._i);null!=H?this.utcOffset(H):this.utcOffset(0,!0)}return this};Ga.hasAlignedHourOffset=
function(H){if(!this.isValid())return!1;H=H?va(H).utcOffset():0;return 0===(this.utcOffset()-H)%60};Ga.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};Ga.isLocal=function(){return this.isValid()?!this._isUTC:!1};Ga.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};Ga.isUtc=nb;Ga.isUTC=nb;Ga.zoneAbbr=function(){return this._isUTC?"UTC":""};Ga.zoneName=function(){return this._isUTC?"Coordinated Universal Time":
""};Ga.dates=B("dates accessor is deprecated. Use date instead.",zc);Ga.months=B("months accessor is deprecated. Use month instead",ma);Ga.years=B("years accessor is deprecated. Use year instead",xc);Ga.zone=B("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(H,M){return null!=H?("string"!==typeof H&&(H=-H),this.utcOffset(H,M),this):-this.utcOffset()});Ga.isDSTShifted=B("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",
function(){if(!p(this._isDSTShifted))return this._isDSTShifted;var H={};x(H,this);H=Ia(H);if(H._a){var M=H._isUTC?d(H._a):va(H._a);var X;if(X=this.isValid()){H=H._a;M=M.toArray();X=Math.min(H.length,M.length);var da=Math.abs(H.length-M.length),qa=0,xa;for(xa=0;xa<X;xa++)K(H[xa])!==K(M[xa])&&qa++;X=0<qa+da}this._isDSTShifted=X}else this._isDSTShifted=!1;return this._isDSTShifted});var Qa=v.prototype;Qa.calendar=function(H,M,X){H=this._calendar[H]||this._calendar.sameElse;return h(H)?H.call(M,X):H};
Qa.longDateFormat=function(H){var M=this._longDateFormat[H],X=this._longDateFormat[H.toUpperCase()];if(M||!X)return M;this._longDateFormat[H]=X.match(Qb).map(function(da){return"MMMM"===da||"MM"===da||"DD"===da||"dddd"===da?da.slice(1):da}).join("");return this._longDateFormat[H]};Qa.invalidDate=function(){return this._invalidDate};Qa.ordinal=function(H){return this._ordinal.replace("%d",H)};Qa.preparse=oc;Qa.postformat=oc;Qa.relativeTime=function(H,M,X,da){var qa=this._relativeTime[X];return h(qa)?
qa(H,M,X,da):qa.replace(/%d/i,H)};Qa.pastFuture=function(H,M){H=this._relativeTime[0<H?"future":"past"];return h(H)?H(M):H.replace(/%s/i,M)};Qa.set=function(H){var M;for(M in H)if(l(H,M)){var X=H[M];h(X)?this[M]=X:this["_"+M]=X}this._config=H;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};Qa.eras=function(H,M){var X=this._eras||Fa("en")._eras;H=0;for(M=X.length;H<M;++H){switch(typeof X[H].since){case "string":var da=
r(X[H].since).startOf("day");X[H].since=da.valueOf()}switch(typeof X[H].until){case "undefined":X[H].until=Infinity;break;case "string":da=r(X[H].until).startOf("day").valueOf(),X[H].until=da.valueOf()}}return X};Qa.erasParse=function(H,M,X){var da,qa=this.eras();H=H.toUpperCase();var xa=0;for(da=qa.length;xa<da;++xa){var Da=qa[xa].name.toUpperCase();var Na=qa[xa].abbr.toUpperCase();var Ra=qa[xa].narrow.toUpperCase();if(X)switch(M){case "N":case "NN":case "NNN":if(Na===H)return qa[xa];break;case "NNNN":if(Da===
H)return qa[xa];break;case "NNNNN":if(Ra===H)return qa[xa]}else if(0<=[Da,Na,Ra].indexOf(H))return qa[xa]}};Qa.erasConvertYear=function(H,M){var X=H.since<=H.until?1:-1;return void 0===M?r(H.since).year():r(H.since).year()+(M-H.offset)*X};Qa.erasAbbrRegex=function(H){l(this,"_erasAbbrRegex")||Wb.call(this);return H?this._erasAbbrRegex:this._erasRegex};Qa.erasNameRegex=function(H){l(this,"_erasNameRegex")||Wb.call(this);return H?this._erasNameRegex:this._erasRegex};Qa.erasNarrowRegex=function(H){l(this,
"_erasNarrowRegex")||Wb.call(this);return H?this._erasNarrowRegex:this._erasRegex};Qa.months=function(H,M){return H?n(this._months)?this._months[H.month()]:this._months[(this._months.isFormat||wc).test(M)?"format":"standalone"][H.month()]:n(this._months)?this._months:this._months.standalone};Qa.monthsShort=function(H,M){return H?n(this._monthsShort)?this._monthsShort[H.month()]:this._monthsShort[wc.test(M)?"format":"standalone"][H.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};
Qa.monthsParse=function(H,M,X){var da;if(this._monthsParseExact){a:{H=H.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],da=0;12>da;++da){var qa=d([2E3,da]);this._shortMonthsParse[da]=this.monthsShort(qa,"").toLocaleLowerCase();this._longMonthsParse[da]=this.months(qa,"").toLocaleLowerCase()}if(X)M="MMM"===M?Wa.call(this._shortMonthsParse,H):Wa.call(this._longMonthsParse,H);else if("MMM"===M){M=Wa.call(this._shortMonthsParse,H);
if(-1!==M)break a;M=Wa.call(this._longMonthsParse,H)}else{M=Wa.call(this._longMonthsParse,H);if(-1!==M)break a;M=Wa.call(this._shortMonthsParse,H)}M=-1!==M?M:null}return M}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(da=0;12>da;da++)if(qa=d([2E3,da]),X&&!this._longMonthsParse[da]&&(this._longMonthsParse[da]=new RegExp("^"+this.months(qa,"").replace(".","")+"$","i"),this._shortMonthsParse[da]=new RegExp("^"+this.monthsShort(qa,"").replace(".","")+
"$","i")),X||this._monthsParse[da]||(qa="^"+this.months(qa,"")+"|^"+this.monthsShort(qa,""),this._monthsParse[da]=new RegExp(qa.replace(".",""),"i")),X&&"MMMM"===M&&this._longMonthsParse[da].test(H)||X&&"MMM"===M&&this._shortMonthsParse[da].test(H)||!X&&this._monthsParse[da].test(H))return da};Qa.monthsRegex=function(H){if(this._monthsParseExact)return l(this,"_monthsRegex")||ra.call(this),H?this._monthsStrictRegex:this._monthsRegex;l(this,"_monthsRegex")||(this._monthsRegex=Bb);return this._monthsStrictRegex&&
H?this._monthsStrictRegex:this._monthsRegex};Qa.monthsShortRegex=function(H){if(this._monthsParseExact)return l(this,"_monthsRegex")||ra.call(this),H?this._monthsShortStrictRegex:this._monthsShortRegex;l(this,"_monthsShortRegex")||(this._monthsShortRegex=Bb);return this._monthsShortStrictRegex&&H?this._monthsShortStrictRegex:this._monthsShortRegex};Qa.week=function(H){return oa(H,this._week.dow,this._week.doy).week};Qa.firstDayOfYear=function(){return this._week.doy};Qa.firstDayOfWeek=function(){return this._week.dow};
Qa.weekdays=function(H,M){M=n(this._weekdays)?this._weekdays:this._weekdays[H&&!0!==H&&this._weekdays.isFormat.test(M)?"format":"standalone"];return!0===H?Ca(M,this._week.dow):H?M[H.day()]:M};Qa.weekdaysMin=function(H){return!0===H?Ca(this._weekdaysMin,this._week.dow):H?this._weekdaysMin[H.day()]:this._weekdaysMin};Qa.weekdaysShort=function(H){return!0===H?Ca(this._weekdaysShort,this._week.dow):H?this._weekdaysShort[H.day()]:this._weekdaysShort};Qa.weekdaysParse=function(H,M,X){var da;if(this._weekdaysParseExact)return Y.call(this,
H,M,X);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(da=0;7>da;da++){var qa=d([2E3,1]).day(da);X&&!this._fullWeekdaysParse[da]&&(this._fullWeekdaysParse[da]=new RegExp("^"+this.weekdays(qa,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[da]=new RegExp("^"+this.weekdaysShort(qa,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[da]=new RegExp("^"+this.weekdaysMin(qa,"").replace(".","\\.?")+"$","i"));
this._weekdaysParse[da]||(qa="^"+this.weekdays(qa,"")+"|^"+this.weekdaysShort(qa,"")+"|^"+this.weekdaysMin(qa,""),this._weekdaysParse[da]=new RegExp(qa.replace(".",""),"i"));if(X&&"dddd"===M&&this._fullWeekdaysParse[da].test(H)||X&&"ddd"===M&&this._shortWeekdaysParse[da].test(H)||X&&"dd"===M&&this._minWeekdaysParse[da].test(H)||!X&&this._weekdaysParse[da].test(H))return da}};Qa.weekdaysRegex=function(H){if(this._weekdaysParseExact)return l(this,"_weekdaysRegex")||aa.call(this),H?this._weekdaysStrictRegex:
this._weekdaysRegex;l(this,"_weekdaysRegex")||(this._weekdaysRegex=Bb);return this._weekdaysStrictRegex&&H?this._weekdaysStrictRegex:this._weekdaysRegex};Qa.weekdaysShortRegex=function(H){if(this._weekdaysParseExact)return l(this,"_weekdaysRegex")||aa.call(this),H?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Bb);return this._weekdaysShortStrictRegex&&H?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};Qa.weekdaysMinRegex=function(H){if(this._weekdaysParseExact)return l(this,
"_weekdaysRegex")||aa.call(this),H?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Bb);return this._weekdaysMinStrictRegex&&H?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};Qa.isPM=function(H){return"p"===(H+"").toLowerCase().charAt(0)};Qa.meridiem=function(H,M,X){return 11<H?X?"pm":"PM":X?"am":"AM"};Ea("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,
offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(H){var M=H%10;M=1===K(H%100/10)?"th":1===M?"st":2===M?"nd":3===M?"rd":"th";return H+M}});r.lang=B("moment.lang is deprecated. Use moment.locale instead.",Ea);r.langData=B("moment.langData is deprecated. Use moment.localeData instead.",Fa);var jb=Math.abs,$c=ib("ms"),ad=ib("s"),bd=ib("m"),cd=ib("h"),dd=ib("d"),ed=ib("w"),fd=ib("M"),gd=ib("Q"),hd=ib("y"),id=pb("milliseconds"),jd=pb("seconds"),
kd=pb("minutes"),ld=pb("hours"),md=pb("days"),nd=pb("months"),od=pb("years"),kb=Math.round,ub={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},Yb=Math.abs,Pa=Ta.prototype;Pa.isValid=function(){return this._isValid};Pa.abs=function(){var H=this._data;this._milliseconds=jb(this._milliseconds);this._days=jb(this._days);this._months=jb(this._months);H.milliseconds=jb(H.milliseconds);H.seconds=jb(H.seconds);H.minutes=jb(H.minutes);H.hours=jb(H.hours);H.months=jb(H.months);H.years=jb(H.years);return this};Pa.add=
function(H,M){return qc(this,H,M,1)};Pa.subtract=function(H,M){return qc(this,H,M,-1)};Pa.as=function(H){if(!this.isValid())return NaN;var M=this._milliseconds;H=J(H);if("month"===H||"quarter"===H||"year"===H){var X=this._days+M/864E5;X=this._months+4800*X/146097;switch(H){case "month":return X;case "quarter":return X/3;case "year":return X/12}}else switch(X=this._days+Math.round(146097*this._months/4800),H){case "week":return X/7+M/6048E5;case "day":return X+M/864E5;case "hour":return 24*X+M/36E5;
case "minute":return 1440*X+M/6E4;case "second":return 86400*X+M/1E3;case "millisecond":return Math.floor(864E5*X)+M;default:throw Error("Unknown unit "+H);}};Pa.asMilliseconds=$c;Pa.asSeconds=ad;Pa.asMinutes=bd;Pa.asHours=cd;Pa.asDays=dd;Pa.asWeeks=ed;Pa.asMonths=fd;Pa.asQuarters=gd;Pa.asYears=hd;Pa.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*K(this._months/12):NaN};Pa._bubble=function(){var H=this._milliseconds,M=this._days,X=this._months,
da=this._data;0<=H&&0<=M&&0<=X||0>=H&&0>=M&&0>=X||(H+=864E5*rc(146097*X/4800+M),X=M=0);da.milliseconds=H%1E3;H=U(H/1E3);da.seconds=H%60;H=U(H/60);da.minutes=H%60;H=U(H/60);da.hours=H%24;M+=U(H/24);H=U(4800*M/146097);X+=H;M-=rc(146097*H/4800);H=U(X/12);da.days=M;da.months=X%12;da.years=H;return this};Pa.clone=function(){return bb(this)};Pa.get=function(H){H=J(H);return this.isValid()?this[H+"s"]():NaN};Pa.milliseconds=id;Pa.seconds=jd;Pa.minutes=kd;Pa.hours=ld;Pa.days=md;Pa.weeks=function(){return U(this.days()/
7)};Pa.months=nd;Pa.years=od;Pa.humanize=function(H,M){if(!this.isValid())return this.localeData().invalidDate();var X=!1,da=ub;"object"===typeof H&&(M=H,H=!1);"boolean"===typeof H&&(X=H);"object"===typeof M&&(da=Object.assign({},ub,M),null!=M.s&&null==M.ss&&(da.ss=M.s-1));H=this.localeData();M=!X;var qa=bb(this).abs(),xa=kb(qa.as("s")),Da=kb(qa.as("m")),Na=kb(qa.as("h")),Ra=kb(qa.as("d")),Oa=kb(qa.as("M")),Xa=kb(qa.as("w"));qa=kb(qa.as("y"));xa=xa<=da.ss&&["s",xa]||xa<da.s&&["ss",xa]||1>=Da&&["m"]||
Da<da.m&&["mm",Da]||1>=Na&&["h"]||Na<da.h&&["hh",Na]||1>=Ra&&["d"]||Ra<da.d&&["dd",Ra];null!=da.w&&(xa=xa||1>=Xa&&["w"]||Xa<da.w&&["ww",Xa]);xa=xa||1>=Oa&&["M"]||Oa<da.M&&["MM",Oa]||1>=qa&&["y"]||["yy",qa];xa[2]=M;xa[3]=0<+this;xa[4]=H;M=Pc.apply(null,xa);X&&(M=H.pastFuture(+this,M));return H.postformat(M)};Pa.toISOString=Ib;Pa.toString=Ib;Pa.toJSON=Ib;Pa.locale=ic;Pa.localeData=jc;Pa.toIsoString=B("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ib);Pa.lang=yc;
y("X",0,0,"unix");y("x",0,0,"valueOf");N("x",Mb);N("X",/[+-]?\d+(\.\d{1,3})?/);ca("X",function(H,M,X){X._d=new Date(1E3*parseFloat(H))});ca("x",function(H,M,X){X._d=new Date(K(H))});r.version="2.29.1";var Ac=va;r.fn=Ga;r.min=function(){var H=[].slice.call(arguments,0);return Ma("isBefore",H)};r.max=function(){var H=[].slice.call(arguments,0);return Ma("isAfter",H)};r.now=function(){return Date.now?Date.now():+new Date};r.utc=d;r.unix=function(H){return va(1E3*H)};r.months=function(H,M){return pc(H,
M,"months")};r.isDate=e;r.locale=Ea;r.invalid=w;r.duration=bb;r.isMoment=A;r.weekdays=function(H,M,X){return Xb(H,M,X,"weekdays")};r.parseZone=function(){return va.apply(null,arguments).parseZone()};r.localeData=Fa;r.isDuration=Va;r.monthsShort=function(H,M){return pc(H,M,"monthsShort")};r.weekdaysMin=function(H,M,X){return Xb(H,M,X,"weekdaysMin")};r.defineLocale=ia;r.updateLocale=function(H,M){if(null!=M){var X=bc;if(null!=Ua[H]&&null!=Ua[H].parentLocale)Ua[H].set(c(Ua[H]._config,M));else{var da=
Ja(H);null!=da&&(X=da._config);M=c(X,M);null==da&&(M.abbr=H);M=new v(M);M.parentLocale=Ua[H];Ua[H]=M}Ea(H)}else null!=Ua[H]&&(null!=Ua[H].parentLocale?(Ua[H]=Ua[H].parentLocale,H===Ea()&&Ea(H)):null!=Ua[H]&&delete Ua[H]);return Ua[H]};r.locales=function(){return Qc(Ua)};r.weekdaysShort=function(H,M,X){return Xb(H,M,X,"weekdaysShort")};r.normalizeUnits=J;r.relativeTimeRounding=function(H){return void 0===H?kb:"function"===typeof H?(kb=H,!0):!1};r.relativeTimeThreshold=function(H,M){if(void 0===ub[H])return!1;
if(void 0===M)return ub[H];ub[H]=M;"s"===H&&(ub.ss=M-1);return!0};r.calendarFormat=function(H,M){H=H.diff(M,"days",!0);return-6>H?"sameElse":-1>H?"lastWeek":0>H?"lastDay":1>H?"sameDay":2>H?"nextDay":7>H?"nextWeek":"sameElse"};r.prototype=Ga;r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return r})},
"esri/layers/vectorTiles/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(r,n,a){function l(m,e){Array.isArray(e)?(m[0]=e[0],m[1]=e[1],m[2]=e[2],m[3]=e[3]):(m[0]=e.r,m[1]=e.g,m[2]=e.b,m[3]=e.a);return m}function k(m,e,f){void 0===e&&(e=0);void 0===f&&(f=!1);var g=m[e+3];m[e+0]*=g;m[e+1]*=g;m[e+2]*=g;f||(m[e+3]*=255);return m}Object.defineProperty(n,"__esModule",{value:!0});n.white=[255,255,255,1];var p=[0,0,0,0];n.premultiplyAlpha=k;n.copyAndPremultiply=function(m){return k(l([],
m))};n.premultiplyAlphaUint32=function(m){k(l(p,m));return a.i8888to32(p[0],p[1],p[2],p[3])};n.premultiplyAlphaRGBA=function(m){var e=m.a;return a.i8888to32(m.r*e,m.g*e,m.b*e,255*e)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/number":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var a=new Float32Array(1),l=new Uint32Array(a.buffer);n.nextHighestPowerOfTwo=function(k){k--;k|=k>>1;k|=k>>2;k|=k>>4;k|=k>>8;k|=k>>16;k++;return k};n.toUint32=
function(k){a[0]=k;return l[0]};n.i1616to32=function(k,p){return 65535&k|p<<16};n.i8888to32=function(k,p,m,e){return k&255|(p&255)<<8|(m&255)<<16|e<<24};n.i8816to32=function(k,p,m){return k&255|(p&255)<<8|m<<16};n.numTo32=function(k){return k|0}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});r=function(){function l(){this.color=[0,0,0,0];this.haloColor=
[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}l.prototype.acquire=function(k,p,m,e,f,g,d,q,t){this.color=k;this.haloColor=p;this.haloSize=m;this.size=e;this.angle=f;this.offsetX=g;this.offsetY=d;this.hAnchor=q;this.vAnchor=t};l.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=
this.haloColor[3]=0};l.pool=new a(l);return l}();n.TextProperties=r})},"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(r,n){var a=function(){return function(){}}();return function(){function l(k,p,m,e,f){void 0===e&&(e=1);void 0===f&&(f=0);this.classConstructor=k;this.acquireFunctionOrWithConstructor=p;this.releaseFunction=m;this.growthSize=e;!0===p?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof p&&(this.acquireFunction=p);this._pool=
Array(f);this._set=new Set;this._initialSize=f;for(k=0;k<f;k++)this._pool[k]=new this.classConstructor;this.growthSize=Math.max(e,1)}l.prototype.acquire=function(){for(var k=[],p=0;p<arguments.length;p++)k[p]=arguments[p];p=this.classConstructor||a;if(0===this._pool.length)for(var m=this.growthSize,e=0;e<m;e++)this._pool[e]=new p;p=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[p].concat(k)):p&&p.acquire&&"function"===typeof p.acquire&&p.acquire.apply(p,k);this._set.delete(p);
return p};l.prototype.release=function(k){k&&!this._set.has(k)&&(this.releaseFunction?this.releaseFunction(k):k&&k.release&&"function"===typeof k.release&&k.release(),this._pool.push(k),this._set.add(k))};l.prototype.prune=function(k){void 0===k&&(k=this._initialSize);if(!(this._pool.length<=k))for(var p;k>this._pool.length;)p=this._pool.shift(),this._set.delete(p),p.dispose&&"function"===typeof p.dispose&&p.dispose()};l.prototype._constructorAcquireFunction=function(k){for(var p=[],m=1;m<arguments.length;m++)p[m-
1]=arguments[m];(e=this.classConstructor).call.apply(e,[k].concat(p));var e};return l}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../tiling/enums ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(r,n,a,l,k,p,m,e,f,g,d){Object.defineProperty(n,
"__esModule",{value:!0});r=function(q){function t(){var w=q.call(this)||this;w._initialized=!1;w._maxWidth=0;w._color=new Float32Array([1,0,0,1]);return w}a(t,q);t.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&
(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=null};t.prototype.draw=function(w,x){w=w.context;if(x.status!==m.TileStatus.INITIALIZED){this._initialized||this._initialize(w);w.bindVAO(this._outlineVertexArrayObject);w.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",x.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",x.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",
512);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);w.setLineWidth(2);w.drawArrays(3,0,4);w.bindVAO();var z=this._getTexture(w,x);z&&(w.bindVAO(this._tileInfoVertexArrayObject),w.bindProgram(this._tileInfoProgram),w.bindTexture(z,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",x.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",x.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",
0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",z.descriptor.width,z.descriptor.height),w.drawArrays(5,0,4),w.bindVAO())}};t.prototype._initialize=function(w){if(this._initialized)return!0;var x={a_pos:0},z=new f(w,p.backgroundVS,p.backgroundFS,x),A=new f(w,p.tileInfoVS,p.tileInfoFS,x),B={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},b=new Int8Array([0,
0,1,0,1,1,0,1]);b=e.createVertex(w,35044,b);b=new d(w,x,B,{geometry:b});var h=new Int8Array([0,0,1,0,0,1,1,1]);h=e.createVertex(w,35044,h);w=new d(w,x,B,{geometry:h});this._outlineProgram=z;this._tileInfoProgram=A;this._outlineVertexArrayObject=b;this._tileInfoVertexArrayObject=w;return this._initialized=!0};t.prototype._getTexture=function(w,x){if(x.texture)return x.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width",
"256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var z=x.key.id,A=this._canvas.getContext("2d");A.font="24px sans-serif";A.textAlign="left";A.textBaseline="middle";var B=A.measureText(z);B=Math.pow(2,Math.ceil(l.log2(B.width+2)));B>this._maxWidth&&(this._maxWidth=B);A.clearRect(0,0,this._maxWidth,32);A.fillStyle="blue";A.fillText(z,0,16);x.texture=new g(w,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return x.texture};
return t}(k.default);n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});r=function(){return function(){}}();n.default=r})},"esri/layers/vectorTiles/views/2d/tiling/enums":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});r=n.TileStatus||(n.TileStatus={});r[r.INITIALIZED=0]="INITIALIZED";r[r.NO_DATA=1]="NO_DATA";r[r.READY=
2]="READY";r[r.MODIFIED=3]="MODIFIED";r[r.INVALID=4]="INVALID"})},"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports","dojo/has"],function(r,n,a){return function(){function l(k,p,m){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=k;this._desc={pixelFormat:p.pixelFormat,internalFormat:p.internalFormat,dataType:p.dataType,target:p.target?p.target:3553,samplingMode:p.samplingMode?
p.samplingMode:9729,wrapMode:p.wrapMode?p.wrapMode:10497,maxAnisotropy:p.maxAnisotropy,flipped:void 0!==p.flipped?p.flipped:!1,hasMipmap:void 0!==p.hasMipmap?p.hasMipmap:!1,level:void 0!==p.level?p.level:0,unpackAlignment:p.unpackAlignment?p.unpackAlignment:4,width:p.width,height:p.height,preMultiplyAlpha:void 0!==p.preMultiplyAlpha?p.preMultiplyAlpha:!1};this._id=++l._nextId;a("esri-webgl-debug")&&k.instanceCounter.incrementCount(0);this.setData(m)}Object.defineProperty(l.prototype,"id",{get:function(){return this._id},
enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});l.prototype.dispose=function(){var k=this;if(this._context){if(this._glName){var p=this._context.gl;this._boundToUnits.forEach(function(m){k._context.bindTexture(null,m)});p.deleteTexture(this._glName);this._glName=null}a("esri-webgl-debug")&&
this._context.instanceCounter.decrementCount(0);this._context=null}};l.prototype.resize=function(k,p){var m=this._desc;if(m.width!==k||m.height!==p)m.width=k,m.height=p,this.setData(null)};l.prototype.setData=function(k){var p=this._context.gl;this._glName||(this._glName=p.createTexture());void 0===k&&(k=null);null===k&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var m=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var e=this._desc;l._validateTexture(e);
p.pixelStorei(p.UNPACK_ALIGNMENT,e.unpackAlignment);p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,e.flipped?1:0);p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.preMultiplyAlpha);if(k instanceof ImageData||k instanceof HTMLImageElement||k instanceof HTMLCanvasElement||k instanceof HTMLVideoElement)p.texImage2D(p.TEXTURE_2D,e.level,e.internalFormat?e.internalFormat:e.pixelFormat,e.pixelFormat,e.dataType,k),void 0===this._desc.width&&(this._desc.width=k.width),void 0===this._desc.height&&(this._desc.height=
k.height);else{var f=e.internalFormat?e.internalFormat:e.pixelFormat,g=e.pixelFormat;p.DEPTH24_STENCIL8&&f===p.DEPTH_STENCIL&&(f=p.DEPTH24_STENCIL8);p.texImage2D(p.TEXTURE_2D,e.level,f,e.width,e.height,0,g,e.dataType,k)}e.hasMipmap&&this.generateMipmap();l._applySamplingMode(p,this._desc);l._applyWrapMode(p,this._desc);l._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(m,0)};l.prototype.updateData=function(k,p,m,e,f,g){var d=this._context.gl,q=this._desc,t=
this._context.getBoundTexture(0);this._context.bindTexture(this,0);g instanceof ImageData||g instanceof HTMLImageElement||g instanceof HTMLCanvasElement||g instanceof HTMLVideoElement?d.texSubImage2D(d.TEXTURE_2D,k,p,m,q.pixelFormat,q.dataType,g):d.texSubImage2D(d.TEXTURE_2D,k,p,m,e,f,q.pixelFormat,q.dataType,g);this._context.bindTexture(t,0)};l.prototype.generateMipmap=function(){var k=this._desc;k.hasMipmap||(k.hasMipmap=!0,l._validateTexture(k));9729===k.samplingMode?(this._samplingModeDirty=!0,
k.samplingMode=9985):9728===k.samplingMode&&(this._samplingModeDirty=!0,k.samplingMode=9984);k=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var p=this._context.gl;p.generateMipmap(p.TEXTURE_2D);this._context.bindTexture(k,0)};l.prototype.setSamplingMode=function(k){k!==this._desc.samplingMode&&(this._desc.samplingMode=k,l._validateTexture(this._desc),this._samplingModeDirty=!0)};l.prototype.setWrapMode=function(k){k!==this._desc.wrapMode&&(this._desc.wrapMode=k,l._validateTexture(this._desc),
this._wrapModeDirty=!0)};l.prototype.applyChanges=function(){var k=this._context.gl,p=this._desc;this._samplingModeDirty&&(l._applySamplingMode(k,p),this._samplingModeDirty=!1);this._wrapModeDirty&&(l._applyWrapMode(k,p),this._wrapModeDirty=!1)};l.prototype.setBoundToUnit=function(k,p){p?this._boundToUnits.add(k):this._boundToUnits.delete(k)};l._isPowerOfTwo=function(k){return 0===(k&k-1)};l._validateTexture=function(k){l._isPowerOfTwo(k.width)&&l._isPowerOfTwo(k.height)};l._applySamplingMode=function(k,
p){var m=p.samplingMode;if(9985===m||9987===m)m=9729;else if(9984===m||9986===m)m=9728;k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,m);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,p.samplingMode)};l._applyWrapMode=function(k,p){k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,p.wrapMode);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,p.wrapMode)};l._applyAnisotropicFilteringParameters=function(k,p){if(null!=p.maxAnisotropy){var m=k.capabilities.textureFilterAnisotropic;m&&(k=k.gl,k.texParameterf(k.TEXTURE_2D,
m.TEXTURE_MAX_ANISOTROPY,p.maxAnisotropy))}};l._nextId=0;return l}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),function(r,n,a,l,k,p,m,e,f){Object.defineProperty(n,"__esModule",{value:!0});r=function(g){function d(){var q=
g.call(this)||this;q._color=l.create();q._initialized=!1;q._color.set([1,0,0,1]);return q}a(d,g);d.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};d.prototype.draw=function(q,t){q=q.context;this._initialized||this._initialize(q);q.setStencilFunctionSeparate(1032,519,t.stencilRef,255);q.bindVAO(this._solidVertexArrayObject);q.bindProgram(this._solidProgram);
this._solidProgram.setUniformMatrix4fv("u_transformMatrix",t.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",t.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);q.drawArrays(5,0,4);q.bindVAO()};d.prototype._initialize=function(q){if(this._initialized)return!0;var t={a_pos:0},w=new e(q,p.backgroundVS,p.backgroundFS,t);if(!w)return!1;var x=
new Int8Array([0,0,1,0,0,1,1,1]);x=m.createVertex(q,35044,x);q=new f(q,t,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:x});this._solidProgram=w;this._solidVertexArrayObject=q;return this._initialized=!0};return d}(k.default);n.default=r})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],function(r){var n={create:function(){var a=new r.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var l=new r.ARRAY_TYPE(4);
l[0]=a[0];l[1]=a[1];l[2]=a[2];l[3]=a[3];return l},fromValues:function(a,l,k,p){var m=new r.ARRAY_TYPE(4);m[0]=a;m[1]=l;m[2]=k;m[3]=p;return m},copy:function(a,l){a[0]=l[0];a[1]=l[1];a[2]=l[2];a[3]=l[3];return a},set:function(a,l,k,p,m){a[0]=l;a[1]=k;a[2]=p;a[3]=m;return a},add:function(a,l,k){a[0]=l[0]+k[0];a[1]=l[1]+k[1];a[2]=l[2]+k[2];a[3]=l[3]+k[3];return a},subtract:function(a,l,k){a[0]=l[0]-k[0];a[1]=l[1]-k[1];a[2]=l[2]-k[2];a[3]=l[3]-k[3];return a}};n.sub=n.subtract;n.multiply=function(a,l,
k){a[0]=l[0]*k[0];a[1]=l[1]*k[1];a[2]=l[2]*k[2];a[3]=l[3]*k[3];return a};n.mul=n.multiply;n.divide=function(a,l,k){a[0]=l[0]/k[0];a[1]=l[1]/k[1];a[2]=l[2]/k[2];a[3]=l[3]/k[3];return a};n.div=n.divide;n.ceil=function(a,l){a[0]=Math.ceil(l[0]);a[1]=Math.ceil(l[1]);a[2]=Math.ceil(l[2]);a[3]=Math.ceil(l[3]);return a};n.floor=function(a,l){a[0]=Math.floor(l[0]);a[1]=Math.floor(l[1]);a[2]=Math.floor(l[2]);a[3]=Math.floor(l[3]);return a};n.min=function(a,l,k){a[0]=Math.min(l[0],k[0]);a[1]=Math.min(l[1],
k[1]);a[2]=Math.min(l[2],k[2]);a[3]=Math.min(l[3],k[3]);return a};n.max=function(a,l,k){a[0]=Math.max(l[0],k[0]);a[1]=Math.max(l[1],k[1]);a[2]=Math.max(l[2],k[2]);a[3]=Math.max(l[3],k[3]);return a};n.round=function(a,l){a[0]=Math.round(l[0]);a[1]=Math.round(l[1]);a[2]=Math.round(l[2]);a[3]=Math.round(l[3]);return a};n.scale=function(a,l,k){a[0]=l[0]*k;a[1]=l[1]*k;a[2]=l[2]*k;a[3]=l[3]*k;return a};n.scaleAndAdd=function(a,l,k,p){a[0]=l[0]+k[0]*p;a[1]=l[1]+k[1]*p;a[2]=l[2]+k[2]*p;a[3]=l[3]+k[3]*p;return a};
n.distance=function(a,l){var k=l[0]-a[0],p=l[1]-a[1],m=l[2]-a[2];a=l[3]-a[3];return Math.sqrt(k*k+p*p+m*m+a*a)};n.dist=n.distance;n.squaredDistance=function(a,l){var k=l[0]-a[0],p=l[1]-a[1],m=l[2]-a[2];a=l[3]-a[3];return k*k+p*p+m*m+a*a};n.sqrDist=n.squaredDistance;n.length=function(a){var l=a[0],k=a[1],p=a[2];a=a[3];return Math.sqrt(l*l+k*k+p*p+a*a)};n.len=n.length;n.squaredLength=function(a){var l=a[0],k=a[1],p=a[2];a=a[3];return l*l+k*k+p*p+a*a};n.sqrLen=n.squaredLength;n.negate=function(a,l){a[0]=
-l[0];a[1]=-l[1];a[2]=-l[2];a[3]=-l[3];return a};n.inverse=function(a,l){a[0]=1/l[0];a[1]=1/l[1];a[2]=1/l[2];a[3]=1/l[3];return a};n.normalize=function(a,l){var k=l[0],p=l[1],m=l[2];l=l[3];var e=k*k+p*p+m*m+l*l;0<e&&(e=1/Math.sqrt(e),a[0]=k*e,a[1]=p*e,a[2]=m*e,a[3]=l*e);return a};n.dot=function(a,l){return a[0]*l[0]+a[1]*l[1]+a[2]*l[2]+a[3]*l[3]};n.lerp=function(a,l,k,p){var m=l[0],e=l[1],f=l[2];l=l[3];a[0]=m+p*(k[0]-m);a[1]=e+p*(k[1]-e);a[2]=f+p*(k[2]-f);a[3]=l+p*(k[3]-l);return a};n.random=function(a,
l){l=l||1;a[0]=r.RANDOM();a[1]=r.RANDOM();a[2]=r.RANDOM();a[3]=r.RANDOM();n.normalize(a,a);n.scale(a,a,l);return a};n.transformMat4=function(a,l,k){var p=l[0],m=l[1],e=l[2];l=l[3];a[0]=k[0]*p+k[4]*m+k[8]*e+k[12]*l;a[1]=k[1]*p+k[5]*m+k[9]*e+k[13]*l;a[2]=k[2]*p+k[6]*m+k[10]*e+k[14]*l;a[3]=k[3]*p+k[7]*m+k[11]*e+k[15]*l;return a};n.transformQuat=function(a,l,k){var p=l[0],m=l[1],e=l[2],f=k[0],g=k[1],d=k[2];k=k[3];var q=k*p+g*e-d*m,t=k*m+d*p-f*e,w=k*e+f*m-g*p;p=-f*p-g*m-d*e;a[0]=q*k+p*-f+t*-d-w*-g;a[1]=
t*k+p*-g+w*-f-q*-d;a[2]=w*k+p*-d+q*-g-t*-f;a[3]=l[3];return a};n.forEach=function(){var a=n.create();return function(l,k,p,m,e,f){k||(k=4);p||(p=0);for(m=m?Math.min(m*k+p,l.length):l.length;p<m;p+=k)a[0]=l[p],a[1]=l[p+1],a[2]=l[p+2],a[3]=l[p+3],e(a,a,f),l[p]=a[0],l[p+1]=a[1],l[p+2]=a[2],l[p+3]=a[3];return l}}();n.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};n.exactEquals=function(a,l){return a[0]===l[0]&&a[1]===l[1]&&a[2]===l[2]&&a[3]===l[3]};n.equals=function(a,l){var k=
a[0],p=a[1],m=a[2];a=a[3];var e=l[0],f=l[1],g=l[2];l=l[3];return Math.abs(k-e)<=r.EPSILON*Math.max(1,Math.abs(k),Math.abs(e))&&Math.abs(p-f)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(f))&&Math.abs(m-g)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(g))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))};return n})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(r,n,a,l,k,p,m){Object.defineProperty(n,"__esModule",{value:!0});r=function(e){function f(){var g=null!==e&&e.apply(this,arguments)||this;g._isInitialized=!1;g._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};g._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};g._spritesTextureSize=new Float32Array(2);return g}a(f,e);f.prototype.dispose=function(){};f.prototype.getGeometryType=function(){return l.WGLGeometryType.FILL};f.prototype.drawGeometry=
function(g,d,q,t){t=g.context;var w=g.painter,x=g.rendererInfo,z=g.requiredLevel,A=g.stationary,B=q.indexCount,b=q.indexFrom;this._initialize();var h=q.materialInfo.materialKeyInfo,c=h.hasVV()?this._fillAttributeLocationsVV:this._fillAttributeLocations;if(c=g.painter.materialManager.getProgram(q.materialInfo.materialKey,g.drawPhase,c)){t.bindProgram(c);var v=this._getVAO(t,d,h.hasVV());t.bindVAO(v);if(0<q.materialInfo.texBindingInfo.length){q=q.materialInfo.texBindingInfo[0];v=q.pageId;var u=g.painter.textureManager.sprites;
this._spritesTextureSize[0]=u.getWidth(v);this._spritesTextureSize[1]=u.getHeight(v);c.setUniform1f("u_zoomFactor",1/Math.pow(2,z-d.key.level)/g.pixelRatio);w.textureManager.bindSpritePage(t,v,q.unit,A?9728:9729);c.setUniform1i(q.semantic,q.unit);c.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}c.setUniformMatrix4fv("u_transformMatrix",d.tileTransform.transform);c.setUniform2fv("u_normalized_origin",d.tileTransform.displayCoord);c.setUniform1f("u_opacity",1);h.vvColor&&(c.setUniform1fv("u_vvColorValues",
x.vvColorValues),c.setUniform4fv("u_vvColors",x.vvColors));h.vvOpacity&&(c.setUniform1fv("u_vvOpacityValues",x.vvOpacityValues),c.setUniform1fv("u_vvOpacities",x.vvOpacities));t.drawElements(4,B,5125,4*b);t.bindVAO(null)}};f.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,
type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};f.prototype._getVAO=function(g,d,q){if(d.fillGeometry.vao)return d.fillGeometry.vao;var t=d.fillGeometry.vertexBufferMap[k.C_VBO_GEOMETRY],w=d.fillGeometry.indexBuffer;if(!t||!w)return null;d.fillGeometry.vao=q?new m(g,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:t},w):new m(g,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:t},w);return d.fillGeometry.vao};return f}(p.default);n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(r,n,a,l,k){Object.defineProperty(n,"__esModule",{value:!0});r=function(p){function m(){return null!==p&&p.apply(this,arguments)||this}a(m,
p);m.prototype.draw=function(e,f){var g=this;if(f.canDisplay){var d=this.getGeometryType(),q=f.getDisplayList(e.drawPhase),t=f.getGeometry(d);t&&k.forEachIter(q.ofType(d),function(w){return g.drawGeometry(e,f,w,t)})}};return m}(l.default);n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.forEachIter=function(a,l){for(;;){var k=a.next();if(k.done)break;l(k.value)}}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(r,n,a,l,k,p,m){Object.defineProperty(n,"__esModule",{value:!0});r=function(e){function f(){var g=null!==e&&e.apply(this,arguments)||this;g._attributeLocations={a_pos:0,a_color:1,a_vertexOffset:2,a_texAndSize:3,a_refSymbolAndPlacementOffset:4,a_visible:5,
a_visibilityRange:6};g._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_texAndSize",count:4,type:5120,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_refSymbolAndPlacementOffset",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",
count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}],visibilityRange:[{name:"a_visibilityRange",count:2,type:5121,offset:0,stride:2,normalized:!1,divisor:0}]};g._glyphsTextureSize=new Float32Array(2);return g}a(f,e);f.prototype.dispose=function(){};f.prototype.drawGeometry=function(g,d,q,t){if(g.requiredLevel===d.key.level){t=g.context;var w=g.painter,x=g.drawPhase,z=q.materialInfo,A=q.indexCount;q=q.indexFrom;var B=this._attributeLocations,b=g.drawPhase===l.WGLDrawPhase.LABEL_ALPHA,h=z.materialKey;
b&&(h|=8);if(x=w.materialManager.getProgram(h,x,B))t.setStencilTestEnabled(!1),t.bindProgram(x),B=this._getVAO(t,d),t.bindVAO(B),b?(t.setBlendingEnabled(!1),x.setUniform1f("u_fadeStep",g.labelStep)):(z=z.texBindingInfo[0],w.textureManager.bindGlyphsPage(t,z.pageId,z.unit),x.setUniform1i(z.semantic,z.unit)),z=w.textureManager.glyphs,this._glyphsTextureSize[0]=z.width/4,this._glyphsTextureSize[1]=z.height/4,w=w.extrudeNoRotationMatrix,t.bindTexture(g.labelFBO.colorTexture,3),x.setUniform1i("u_referenceTex",
3),x.setUniformMatrix4fv("u_transformMatrix",d.tileTransform.transform),x.setUniformMatrix4fv("u_extrudeMatrix",w),x.setUniform2fv("u_normalized_origin",d.tileTransform.displayCoord),x.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),x.setUniform1f("u_pixelRatio",g.pixelRatio),x.setUniform1f("u_opacity",1),x.setUniform1f("u_zoomLevel",10*g.displayLevel),x.setUniform1f("u_mapRotation",g.state.rotation),x.setUniform1f("u_mapAligned",0),x.setUniform2fv("u_screenSize",g.state.size),t.drawElements(4,
A,5125,4*q),t.bindVAO(null),t.setStencilTestEnabled(!0),t.setBlendingEnabled(!0)}};f.prototype.getGeometryType=function(){return l.WGLGeometryType.LABEL};f.prototype._getVAO=function(g,d){if((d=d.labelGeometry)&&d.vao)return d.vao;var q=d.vertexBufferMap[k.C_VBO_GEOMETRY],t=d.vertexBufferMap[k.C_VBO_VISIBILITY_RANGE],w=d.indexBuffer;if(!q||!w||!t)return null;d.vao=new m(g,this._attributeLocations,this._vertexAttributeLayout,{geometry:q,visibility:d.vertexBufferMap[k.C_VBO_VISIBILITY],visibilityRange:t},
w);return d.vao};return f}(p.default);n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(r,n,a,l,k,p,m){Object.defineProperty(n,"__esModule",{value:!0});r=function(e){function f(){var g=null!==e&&e.apply(this,arguments)||this;g._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,
a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};g._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};g._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",
count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};g._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,
stride:44,normalized:!1,divisor:0}]};g._spritesTextureSize=new Float32Array(2);return g}a(f,e);f.prototype.dispose=function(){};f.prototype.getGeometryType=function(){return l.WGLGeometryType.LINE};f.prototype.drawGeometry=function(g,d,q,t){t=g.context;var w=g.painter,x=g.rendererInfo,z=g.requiredLevel,A=g.drawPhase,B=q.indexFrom,b=q.indexCount,h=q.materialInfo;q=h.materialKeyInfo;var c=q.hasVV()?this._lineAttributeLocationsVV:this._lineAttributeLocations;if(A=w.materialManager.getProgram(h.materialKey,
A,c)){t.bindProgram(A);c=this._getVAO(t,d,q.hasVV());t.bindVAO(c);c=1/g.pixelRatio;if(0<h.texBindingInfo.length){h=h.texBindingInfo[0];var v=h.pageId,u=w.textureManager.sprites;this._spritesTextureSize[0]=u.getWidth(v);this._spritesTextureSize[1]=u.getHeight(v);w.textureManager.bindSpritePage(t,v,h.unit);A.setUniform1i(h.semantic,h.unit);A.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}g=Math.pow(2,z-d.key.level)/g.pixelRatio;A.setUniform1f("u_zoomFactor",g);A.setUniformMatrix4fv("u_transformMatrix",
d.tileTransform.transform);A.setUniformMatrix4fv("u_extrudeMatrix",w.extrudeMatrix);A.setUniform2fv("u_normalized_origin",d.tileTransform.displayCoord);A.setUniform1f("u_opacity",1);A.setUniform1f("u_blur",0+c);A.setUniform1f("u_antialiasing",c);A.setUniform1f("u_zoomFactor",g);q.vvSizeMinMaxValue&&A.setUniform4fv("u_vvSizeMinMaxValue",x.vvSizeMinMaxValue);q.vvSizeScaleStops&&A.setUniform1f("u_vvSizeScaleStopsValue",x.vvSizeScaleStopsValue);q.vvSizeFieldStops&&(A.setUniform1fv("u_vvSizeFieldStopsValues",
x.vvSizeFieldStopsValues),A.setUniform1fv("u_vvSizeFieldStopsSizes",x.vvSizeFieldStopsSizes));q.vvSizeUnitValue&&A.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",x.vvSizeUnitValueToPixelsRatio);q.vvColor&&(A.setUniform1fv("u_vvColorValues",x.vvColorValues),A.setUniform4fv("u_vvColors",x.vvColors));q.vvOpacity&&(A.setUniform1fv("u_vvOpacityValues",x.vvOpacityValues),A.setUniform1fv("u_vvOpacities",x.vvOpacities));t.setFaceCullingEnabled(!0);t.setFrontFace(2305);t.setCullFace(1029);t.drawElements(4,
b,5125,4*B);t.setFaceCullingEnabled(!1);t.bindVAO(null)}};f.prototype._getVAO=function(g,d,q){if(d.lineGeometry.vao)return d.lineGeometry.vao;var t=d.lineGeometry.vertexBufferMap[k.C_VBO_GEOMETRY],w=d.lineGeometry.indexBuffer;if(!t||!w)return null;d.lineGeometry.vao=q?new m(g,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:t},w):new m(g,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:t},w);return d.lineGeometry.vao};return f}(p.default);n.default=
r})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(r,n,a,l,k,p,m,e){Object.defineProperty(n,"__esModule",{value:!0});r=function(f){function g(){var d=null!==f&&f.apply(this,arguments)||this;d._iconAttributeLocations={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,
a_outlineColor:5,a_sizeAndOutlineWidth:6};d._iconAttributeLocationsVV={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_vv:7};d._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_weight:7};d._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:28,normalized:!1,
divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:28,normalized:!1,divisor:0}]};d._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:44,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:44,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:44,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:44,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:44,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,
stride:44,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:28,stride:44,normalized:!1,divisor:0}]};d._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:32,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:16,stride:32,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:32,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:32,normalized:!1,divisor:0},{name:"a_weight",count:1,type:5126,offset:28,stride:32,normalized:!1,divisor:0}]};d._spritesTextureSize=new Float32Array(2);return d}a(g,f);g.prototype.dispose=function(){};g.prototype.getGeometryType=function(){return l.WGLGeometryType.MARKER};g.prototype.drawGeometry=
function(d,q,t,w){w=d.context;var x=d.painter,z=d.rendererInfo,A=d.drawPhase;d=t.indexCount;var B=t.indexFrom,b=t.materialInfo;t=b.materialKeyInfo;var h=t.heatmap,c=t.hasVV()?this._iconAttributeLocationsVV:this._iconAttributeLocations;if(A=x.materialManager.getProgram(b.materialKey,A,c))w.bindProgram(A),c=this._getVAO(w,q,t.hasVV(),h),w.bindVAO(c),h?(b=this._getIntensityTexture(w,z.heatmapParameters),w.bindTexture(b,1),A.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(z.heatmapParameters.radius),
this._spritesTextureSize[1]=Math.round(z.heatmapParameters.radius)):(h=b.texBindingInfo[0],b=h.pageId,x.textureManager.bindSpritePage(w,b,h.unit),A.setUniform1i(h.semantic,h.unit),h=x.textureManager.sprites,this._spritesTextureSize[0]=h.getWidth(b)/4,this._spritesTextureSize[1]=h.getHeight(b)/4),x=z.vvMaterialParameters.vvRotationEnabled&&"geographic"===z.vvMaterialParameters.vvRotationType?x.extrudeMatrix:x.extrudeNoRotationMatrix,A.setUniformMatrix4fv("u_transformMatrix",q.tileTransform.transform),
A.setUniformMatrix4fv("u_extrudeMatrix",x),A.setUniform2fv("u_normalized_origin",q.tileTransform.displayCoord),A.setUniform2fv("u_mosaicSize",this._spritesTextureSize),A.setUniform1f("u_opacity",1),t.vvSizeMinMaxValue&&A.setUniform4fv("u_vvSizeMinMaxValue",z.vvSizeMinMaxValue),t.vvSizeScaleStops&&A.setUniform1f("u_vvSizeScaleStopsValue",z.vvSizeScaleStopsValue),t.vvSizeFieldStops&&(A.setUniform1fv("u_vvSizeFieldStopsValues",z.vvSizeFieldStopsValues),A.setUniform1fv("u_vvSizeFieldStopsSizes",z.vvSizeFieldStopsSizes)),
t.vvSizeUnitValue&&A.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",z.vvSizeUnitValueToPixelsRatio),t.vvColor&&(A.setUniform1fv("u_vvColorValues",z.vvColorValues),A.setUniform4fv("u_vvColors",z.vvColors)),t.vvOpacity&&(A.setUniform1fv("u_vvOpacityValues",z.vvOpacityValues),A.setUniform1fv("u_vvOpacities",z.vvOpacities)),t.vvRotation&&A.setUniform1f("u_vvRotationType","geographic"===z.vvMaterialParameters.vvRotationType?0:1),w.drawElements(4,d,5125,4*B),w.bindVAO(null)};g.prototype._getVAO=function(d,
q,t,w){if(q.iconGeometry.vao)return q.iconGeometry.vao;var x=q.iconGeometry.vertexBufferMap[k.C_VBO_GEOMETRY],z=q.iconGeometry.indexBuffer;if(!x||!z)return null;q.iconGeometry.vao=t?new e(d,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,{geometry:x},z):w?new e(d,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:x},z):new e(d,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:x},z);return q.iconGeometry.vao};g.prototype._getIntensityTexture=
function(d,q){if(q.intensityKernel&&!q.refreshIntensityKernel)return q.intensityKernel;q.intensityKernel&&(q.intensityKernel.dispose(),q.intensityKernel=null);for(var t=q.radius,w=q.kernelSize,x=q.blurRadius,z=t*t,A=[],B=-1;++B<w;)A[B]=Math.exp(-Math.pow(B-x,2)/(2*z))/(t/2*Math.sqrt(2*Math.PI));t=[];for(var b,h=0;h<w;h++)for(z=A[h],B=0;B<w;B++)b=h*w+B,x=A[B],t[4*b]=z*x,t[4*b+1]=0,t[4*b+2]=0,t[4*b+3]=1;d=new m(d,{target:3553,pixelFormat:6408,internalFormat:d.capabilities.colorBufferFloat.RGBA32F,dataType:5126,
samplingMode:d.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:w,height:w},new Float32Array(t));q.intensityKernel=d;q.refreshIntensityKernel=!1;return d};return g}(p.default);n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(r,n,a,l,k,p,m){Object.defineProperty(n,"__esModule",
{value:!0});r=function(e){function f(){var g=null!==e&&e.apply(this,arguments)||this;g._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};g._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};g._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,
offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};g._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",
count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};g._glyphsTextureSize=new Float32Array(2);return g}a(f,e);f.prototype.dispose=function(){};f.prototype.getGeometryType=
function(){return l.WGLGeometryType.TEXT};f.prototype.drawGeometry=function(g,d,q,t){t=g.context;var w=g.painter,x=g.rendererInfo,z=q.materialInfo,A=q.indexCount;q=q.indexFrom;var B=z.materialKeyInfo,b=B.vvSizeMinMaxValue||B.vvSizeScaleStops||B.vvSizeFieldStops||B.vvSizeUnitValue||B.vvColor||B.vvRotation||B.vvOpacity;if(g=w.materialManager.getProgram(z.materialKey,g.drawPhase,b?this._attributeLocationsVV:this._attributeLocations))t.bindProgram(g),b=this._getVAO(t,d,b,this.getGeometryType()),t.bindVAO(b),
z=z.texBindingInfo[0],w.textureManager.bindGlyphsPage(t,z.pageId,z.unit),g.setUniform1i(z.semantic,z.unit),z=w.textureManager.glyphs,this._glyphsTextureSize[0]=z.width/4,this._glyphsTextureSize[1]=z.height/4,w=x.vvMaterialParameters.vvRotationEnabled&&"geographic"===x.vvMaterialParameters.vvRotationType?w.extrudeMatrix:w.extrudeNoRotationMatrix,g.setUniformMatrix4fv("u_transformMatrix",d.tileTransform.transform),g.setUniformMatrix4fv("u_extrudeMatrix",w),g.setUniform2fv("u_normalized_origin",d.tileTransform.displayCoord),
g.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),g.setUniform1f("u_pixelRatio",1),g.setUniform1f("u_opacity",1),B.vvSizeMinMaxValue&&g.setUniform4fv("u_vvSizeMinMaxValue",x.vvSizeMinMaxValue),B.vvSizeScaleStops&&g.setUniform1f("u_vvSizeScaleStopsValue",x.vvSizeScaleStopsValue),B.vvSizeFieldStops&&(g.setUniform1fv("u_vvSizeFieldStopsValues",x.vvSizeFieldStopsValues),g.setUniform1fv("u_vvSizeFieldStopsSizes",x.vvSizeFieldStopsSizes)),B.vvSizeUnitValue&&g.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",
x.vvSizeUnitValueToPixelsRatio),B.vvColor&&(g.setUniform1fv("u_vvColorValues",x.vvColorValues),g.setUniform4fv("u_vvColors",x.vvColors)),B.vvOpacity&&(g.setUniform1fv("u_vvOpacityValues",x.vvOpacityValues),g.setUniform1fv("u_vvOpacities",x.vvOpacities)),B.vvRotation&&g.setUniform1f("u_vvRotationType","geographic"===x.vvMaterialParameters.vvRotationType?0:1),t.drawElements(4,A,5125,4*q),t.bindVAO(null)};f.prototype._getVAO=function(g,d,q,t){if((d=d.getGeometry(t))&&d.vao)return d.vao;t=d.vertexBufferMap[k.C_VBO_GEOMETRY];
var w=d.vertexBufferMap[k.C_VBO_VISIBILITY],x=d.indexBuffer;if(!t||!x)return null;d.vao=q?new m(g,this._attributeLocationsVV,this._vertexAttributeLayoutVV,{geometry:t,visibility:w},x):new m(g,this._attributeLocations,this._vertexAttributeLayout,{geometry:t,visibility:w},x);return d.vao};return f}(p.default);n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require","exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],
function(r,n,a,l,k){return function(){function p(){this._hlRenderer=new l;this._hlSurfaces=new k;this._height=this._width=void 0}p.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._boundFBO=null};p.prototype.setup=function(m,e,f){var g=e%4,d=f%4;e+=2>g?-g:4-g;f+=2>d?-d:4-d;this._width=e;this._height=f;this._boundFBO=m.getBoundFramebufferObject();e=Math.round(.75*e);f=Math.round(.75*f);this._hlRenderer.setup(m,e,f);this._hlSurfaces.setup(m,
e,f)};p.prototype.setHighlightOptions=function(m){this._hlRenderer.setHighlightOptions({fillColor:m.fillColor,outlineColor:m.outlineColor,outlineWidth:.75*m.outlineWidth,outerHaloWidth:.75*m.outerHaloWidth,innerHaloWidth:.75*m.innerHaloWidth,outlinePosition:.75*m.outlinePosition})};p.prototype.startMaskDraw=function(m){m.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);m.setClearColor(0,0,0,0);m.setClearStencil(0);m.clear(m.gl.COLOR_BUFFER_BIT|m.gl.STENCIL_BUFFER_BIT);m.setViewport(0,0,.75*this._width,
.75*this._height)};p.prototype.draw=function(m){m.setStencilTestEnabled(!1);m.setBlendingEnabled(!1);m.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);m.setClearColor(0,0,0,0);m.clear(m.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(m,this._hlSurfaces.sharedBlur1Tex);a("esri-feature-highlight-debug")?(m.bindFramebuffer(null),m.clear(m.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(m,this._hlSurfaces.sharedBlur2Tex)):(m.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),m.setClearColor(0,0,0,0),m.clear(m.gl.COLOR_BUFFER_BIT),
this._hlRenderer.finalBlur(m,this._hlSurfaces.sharedBlur2Tex),m.bindFramebuffer(this._boundFBO),m.setBlendingEnabled(!0),m.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(m,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return p}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),
function(r,n,a,l,k,p,m){var e=[void 0,void 0,void 0,1],f=[3,4],g=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function q(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}q.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),
this._resources.blurProgram.dispose(),this._resources.shadeTex.dispose(),this._resources=null)};q.prototype.preBlur=function(t,w){t.bindTexture(w,f[0]);t.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",g);t.bindVAO(this._resources.quadVAO);t.drawArrays(5,0,4);t.bindVAO()};q.prototype.finalBlur=function(t,w){t.bindTexture(w,f[0]);t.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",d);t.bindVAO(this._resources.quadVAO);t.drawArrays(5,0,4);t.bindVAO()};q.prototype.renderHighlight=function(t,w){t.bindTexture(w,f[0]);t.bindTexture(this._resources.shadeTex,f[1]);t.bindProgram(this._resources.highlightProgram);t.bindVAO(this._resources.quadVAO);t.drawArrays(5,0,4);t.bindVAO()};q.prototype._initialize=function(t,w,x){this._width=w;this._height=
x;w=new l(t,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,0,-128,127,0,255,127,127,255,255])).buffer);x=new m(t,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:w});var z=(new k("hl",["texturedVS","highlightFS"],[],a,t,{a_position:0,a_texcoord:1})).getProgram([]),A=(new k("hl",["texturedVS","blurFS"],[],a,t,{a_position:0,a_texcoord:1})).getProgram([]);
z.setUniform1i("u_texture",f[0]);z.setUniform1i("u_shade",f[1]);z.setUniform4fv("u_sigmas",e);A.setUniform1i("u_texture",f[0]);A.setUniform4fv("u_sigmas",e);t=new p(t,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:w,quadVAO:x,highlightProgram:z,blurProgram:A,shadeTex:t}};q.prototype.setHighlightOptions=function(t){function w(u,y,C){c[0]=(1-C)*u[0]+C*y[0];c[1]=(1-C)*u[1]+C*y[1];c[2]=(1-C)*u[2]+C*y[2];c[3]=(1-C)*u[3]+C*
y[3]}this._highlightOptions=t;if(this._resources){for(var x=t.outlinePosition-t.outlineWidth/2-t.outerHaloWidth,z=t.outlinePosition-t.outlineWidth/2,A=t.outlinePosition+t.outlineWidth/2,B=t.outlinePosition+t.outlineWidth/2+t.innerHaloWidth,b=new Uint8Array(1024),h,c=[void 0,void 0,void 0,void 0],v=0;256>v;++v)h=x+v/255*(B-x),h<x?(b[4*v]=0,b[4*v+1]=0,b[4*v+2]=0,b[4*v+3]=0):h<z?w([0,0,0,0],t.outlineColor,(h-x)/(z-x)):h<A?(c[0]=t.outlineColor[0],c[1]=t.outlineColor[1],c[2]=t.outlineColor[2],c[3]=t.outlineColor[3]):
h<B?w(t.outlineColor,t.fillColor,(h-A)/(B-A)):(b[4*v]=t.fillColor[0],b[4*v+1]=t.fillColor[1],b[4*v+2]=t.fillColor[2],b[4*v+3]=t.fillColor[3]),b[4*v]=255*c[0]*c[3],b[4*v+1]=255*c[1]*c[3],b[4*v+2]=255*c[2]*c[3],b[4*v+3]=255*c[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[x,B]);this._resources.shadeTex.updateData(0,0,0,256,1,b)}};q.prototype.setup=function(t,w,x){this._resources?(this._width=w,this._height=x):(this._initialize(t,w,x),this.setHighlightOptions(this._highlightOptions))};
return q}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(r,n,a,l){r=new l;l.parse(a,r);return r})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],function(r,n,a,l){function k(p,m,e){m=new l(p,{target:3553,pixelFormat:6408,
dataType:5121,wrapMode:33071,width:m,height:e,samplingMode:9729});p=a.createWithAttachments(p,m,{colorTarget:0,depthStencilTarget:2});return[m,p]}return function(){function p(){this._height=this._width=void 0;this._resources=null}p.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};p.prototype._initialize=function(m,
e,f){this._width=e;this._height=f;var g=k(m,e,f),d=g[0];g=g[1];m=k(m,e,f);this._resources={sharedBlur1Tex:d,sharedBlur1Fbo:g,sharedBlur2Tex:m[0],sharedBlur2Fbo:m[1]}};p.prototype.setup=function(m,e,f){!this._resources||this._width===e&&this._height===f||this.dispose();this._resources||this._initialize(m,e,f)};Object.defineProperty(p.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},
enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return p}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require","exports","dojo/has","./Renderbuffer","./Texture"],function(r,n,a,l,k){return function(){function p(m,
e,f,g){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=m;this._desc={colorTarget:e.colorTarget,depthStencilTarget:e.depthStencilTarget,width:e.width,height:e.height,multisampled:e.multisampled};this._id=p._nextId++;a("esri-webgl-debug")&&m.instanceCounter.incrementCount(4);f&&(m=void 0,f instanceof k?(this._colorAttachment=f,m=f.descriptor):(m=f,this._colorAttachment=new k(this._context,m)),p._validateTextureDimensions(m,
this._desc));if(g instanceof l){if(2===e.depthStencilTarget)this._stencilAttachment=g;else if(1===e.depthStencilTarget||3===e.depthStencilTarget)this._depthAttachment=g;p._validateBufferDimensions(g.descriptor,this._desc)}else g&&(e=void 0,g instanceof k?(this._depthStencilTexture=g,e=this._depthStencilTexture.descriptor):(e=g,this._depthStencilTexture=new k(this._context,e)),p._validateTextureDimensions(e,this._desc))}p.create=function(m,e){return new p(m,e)};p.createWithAttachments=function(m,e,
f,g){return new p(m,f,e,g)};Object.defineProperty(p.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof k?this._colorAttachment:null},enumerable:!0,
configurable:!0});Object.defineProperty(p.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});p.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),
this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)};p.prototype.attachColorTexture=function(m){if(m){p._validateTextureDimensions(m.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,m.glName,0)}this._colorAttachment=m}};p.prototype.detachColorTexture=
function(){var m=void 0;if(this._colorAttachment instanceof k){m=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var e=this._context.gl;this._context.gl.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}this._colorAttachment=null}return m};p.prototype.attachDepthStencilTexture=function(m){if(m){p._validateTextureDimensions(m.descriptor,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();
if(this._initialized){this._context.bindFramebuffer(this);var e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,m.glName,0)}this._depthStencilTexture=m}};p.prototype.detachDepthStencilTexture=function(){var m=this._depthStencilTexture;if(m&&this._initialized){this._context.bindFramebuffer(this);var e=this._context.gl;this._context.gl.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return m};
p.prototype.attachDepthStencilBuffer=function(m){if(m){var e=m.descriptor;p._validateBufferDimensions(e,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===e.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),e=this._context.gl,e.framebufferRenderbuffer(e.FRAMEBUFFER,1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,m.glName));this._depthAttachment=m}};p.prototype.detachDepthStencilBuffer=function(){var m=
this._context.gl,e=this._depthAttachment;e&&this._initialized&&(this._context.bindFramebuffer(this),m.framebufferRenderbuffer(m.FRAMEBUFFER,1===this._desc.depthStencilTarget?m.DEPTH_ATTACHMENT:m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,null));this._depthAttachment=null;return e};p.prototype.copyToTexture=function(m,e,f,g,d,q,t){var w=this._context;w.bindTexture(t);w.bindFramebuffer(this);w.gl.copyTexSubImage2D(3553,0,d,q,m,e,f,g)};p.prototype.readPixels=function(m,e,f,g,d,q,t){this._context.bindFramebuffer(this);
this._context.gl.readPixels(m,e,f,g,d,q,t)};p.prototype.resize=function(m,e){var f=this._desc;if(f.width!==m||f.height!==e)if(this._initialized)f.width=m,f.height=e,this._colorAttachment instanceof k?(g=this._colorAttachment,f=g.descriptor,f.width=m,f.height=e,this._colorAttachment.dispose(),this._colorAttachment=new k(this._context,f),p._validateTextureDimensions(g.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(f=this._depthStencilTexture.descriptor,
f.width=m,f.height=e,this._depthStencilTexture.dispose(),this._depthStencilTexture=new k(this._context,f)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{f.width=m;f.height=e;if(this._colorAttachment instanceof k){var g=this._colorAttachment;g.resize(m,e)}this._depthStencilTexture&&this._depthStencilTexture.resize(m,e)}};p.prototype.initialize=function(){if(this._initialized)return!1;
var m=this._context.gl;this._glName&&m.deleteFramebuffer(this._glName);var e=m.createFramebuffer(),f=this._desc;m.bindFramebuffer(m.FRAMEBUFFER,e);if(!this._colorAttachment)if(0===f.colorTarget)this._colorAttachment=new k(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:f.width,height:f.height});else{var g=new l(this._context,{internalFormat:32854,width:f.width,height:f.height});m.framebufferRenderbuffer(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.RENDERBUFFER,
g.glName);this._colorAttachment=g}this._colorAttachment instanceof k&&m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,this._colorAttachment.glName,0);switch(f.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new l(this._context,{internalFormat:1===f.depthStencilTarget?33189:34041,width:f.width,height:f.height}));m.framebufferRenderbuffer(m.FRAMEBUFFER,1===f.depthStencilTarget?m.DEPTH_ATTACHMENT:m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,this._depthAttachment.glName);
break;case 2:this._stencilAttachment||(this._stencilAttachment=new l(this._context,{internalFormat:36168,width:f.width,height:f.height}));m.framebufferRenderbuffer(m.FRAMEBUFFER,m.STENCIL_ATTACHMENT,m.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._depthStencilTexture=new k(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:f.width,height:f.height})),m.framebufferTexture2D(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,
m.TEXTURE_2D,this._depthStencilTexture.glName,0)}m.checkFramebufferStatus(m.FRAMEBUFFER);this._glName=e;return this._initialized=!0};p.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof k){var m=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var e=this._context.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}m.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(m=this._colorAttachment,e=
this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(m));this._colorAttachment=null};p.prototype._disposeDepthStencilAttachments=function(){var m=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),m.framebufferRenderbuffer(m.FRAMEBUFFER,1===this._desc.depthStencilTarget?m.DEPTH_ATTACHMENT:m.DEPTH_STENCIL_ATTACHMENT,
m.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),m.framebufferRenderbuffer(m.FRAMEBUFFER,m.STENCIL_ATTACHMENT,m.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),m.framebufferTexture2D(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),
this._depthStencilTexture=null)};p._validateBufferDimensions=function(m,e){void 0!==e.width&&0<=e.width&&void 0!==e.height&&0<=e.height||(e.width=m.width,e.height=m.height)};p._validateTextureDimensions=function(m,e){void 0!==e.width&&0<=e.width&&void 0!==e.height&&0<=e.height||(e.width=m.width,e.height=m.height)};p._nextId=0;return p}()})},"esri/layers/vectorTiles/views/webgl/Renderbuffer":function(){define(["require","exports","dojo/has"],function(r,n,a){return function(){function l(k,p){this._context=
k;this._desc=p;this._glName=null;this._id=-1;k=this._context.gl;a("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5);this._id=++l._nextId;this._glName=k.createRenderbuffer();this._context.bindRenderbuffer(this);k.renderbufferStorage(k.RENDERBUFFER,p.internalFormat,p.width,p.height)}Object.defineProperty(l.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"id",{get:function(){return this._id},enumerable:!0,
configurable:!0});Object.defineProperty(l.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});l.prototype.resize=function(k,p){var m=this._context.gl,e=this._desc;if(e.width!==k||e.height!==p)e.width=k,e.height=p,this._context.bindRenderbuffer(this),m.renderbufferStorage(m.RENDERBUFFER,e.internalFormat,e.width,e.height)};l.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5);
this._context=null};l._nextId=0;return l}()})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!r)var r=1E-6;if(!n)var n="undefined"!==typeof Float32Array?Float32Array:Array;if(!a)var a=Math.random;var l={GLMAT_EPSILON:r,GLMAT_ARRAY_TYPE:n,GLMAT_RANDOM:a,setMatrixArrayType:function(m){l.GLMAT_ARRAY_TYPE=m}},k=Math.PI/180,p=180/Math.PI;l.toRadian=function(m){return m*k};l.toDegree=function(m){return m*p};l.setMatrixArrayType(Array);return l})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],
function(r){var n=r.GLMAT_ARRAY_TYPE;r={create:function(){var a=new n(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var l=new n(6);l[0]=a[0];l[1]=a[1];l[2]=a[2];l[3]=a[3];l[4]=a[4];l[5]=a[5];return l},copy:function(a,l){a[0]=l[0];a[1]=l[1];a[2]=l[2];a[3]=l[3];a[4]=l[4];a[5]=l[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,l){var k=l[0],p=l[1],m=l[2],e=l[3],f=l[4];l=l[5];var g=k*e-p*m;if(!g)return null;g=1/g;a[0]=e*
g;a[1]=-p*g;a[2]=-m*g;a[3]=k*g;a[4]=(m*l-e*f)*g;a[5]=(p*f-k*l)*g;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,l,k){var p=l[0],m=l[1],e=l[2],f=l[3],g=l[4];l=l[5];var d=k[0],q=k[1],t=k[2],w=k[3],x=k[4];k=k[5];a[0]=p*d+e*q;a[1]=m*d+f*q;a[2]=p*t+e*w;a[3]=m*t+f*w;a[4]=p*x+e*k+g;a[5]=m*x+f*k+l;return a}};r.mul=r.multiply;r.rotate=function(a,l,k){var p=l[0],m=l[1],e=l[2],f=l[3],g=l[4];l=l[5];var d=Math.sin(k);k=Math.cos(k);a[0]=p*k+e*d;a[1]=m*k+f*d;a[2]=p*-d+e*k;a[3]=
m*-d+f*k;a[4]=g;a[5]=l;return a};r.scale=function(a,l,k){var p=l[1],m=l[2],e=l[3],f=l[4],g=l[5],d=k[0];k=k[1];a[0]=l[0]*d;a[1]=p*d;a[2]=m*k;a[3]=e*k;a[4]=f;a[5]=g;return a};r.translate=function(a,l,k){var p=l[0],m=l[1],e=l[2],f=l[3],g=l[4];l=l[5];var d=k[0];k=k[1];a[0]=p;a[1]=m;a[2]=e;a[3]=f;a[4]=p*d+e*k+g;a[5]=m*d+f*k+l;return a};r.fromRotation=function(a,l){var k=Math.sin(l);l=Math.cos(l);a[0]=l;a[1]=k;a[2]=-k;a[3]=l;a[4]=0;a[5]=0;return a};r.fromScaling=function(a,l){a[0]=l[0];a[1]=0;a[2]=0;a[3]=
l[1];a[4]=0;a[5]=0;return a};r.fromTranslation=function(a,l){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=l[0];a[5]=l[1];return a};r.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};r.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return r})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(r){var n=r.GLMAT_ARRAY_TYPE,a=r.GLMAT_RANDOM,
l={create:function(){var k=new n(2);k[0]=0;k[1]=0;return k},clone:function(k){var p=new n(2);p[0]=k[0];p[1]=k[1];return p},fromValues:function(k,p){var m=new n(2);m[0]=k;m[1]=p;return m},copy:function(k,p){k[0]=p[0];k[1]=p[1];return k},set:function(k,p,m){k[0]=p;k[1]=m;return k},add:function(k,p,m){k[0]=p[0]+m[0];k[1]=p[1]+m[1];return k},subtract:function(k,p,m){k[0]=p[0]-m[0];k[1]=p[1]-m[1];return k}};l.sub=l.subtract;l.multiply=function(k,p,m){k[0]=p[0]*m[0];k[1]=p[1]*m[1];return k};l.mul=l.multiply;
l.divide=function(k,p,m){k[0]=p[0]/m[0];k[1]=p[1]/m[1];return k};l.div=l.divide;l.min=function(k,p,m){k[0]=Math.min(p[0],m[0]);k[1]=Math.min(p[1],m[1]);return k};l.max=function(k,p,m){k[0]=Math.max(p[0],m[0]);k[1]=Math.max(p[1],m[1]);return k};l.scale=function(k,p,m){k[0]=p[0]*m;k[1]=p[1]*m;return k};l.scaleAndAdd=function(k,p,m,e){k[0]=p[0]+m[0]*e;k[1]=p[1]+m[1]*e;return k};l.distance=function(k,p){var m=p[0]-k[0];k=p[1]-k[1];return Math.sqrt(m*m+k*k)};l.dist=l.distance;l.squaredDistance=function(k,
p){var m=p[0]-k[0];k=p[1]-k[1];return m*m+k*k};l.sqrDist=l.squaredDistance;l.length=function(k){var p=k[0];k=k[1];return Math.sqrt(p*p+k*k)};l.len=l.length;l.squaredLength=function(k){var p=k[0];k=k[1];return p*p+k*k};l.sqrLen=l.squaredLength;l.negate=function(k,p){k[0]=-p[0];k[1]=-p[1];return k};l.inverse=function(k,p){k[0]=1/p[0];k[1]=1/p[1];return k};l.normalize=function(k,p){var m=p[0],e=p[1];m=m*m+e*e;0<m&&(m=1/Math.sqrt(m),k[0]=p[0]*m,k[1]=p[1]*m);return k};l.dot=function(k,p){return k[0]*p[0]+
k[1]*p[1]};l.cross=function(k,p,m){p=p[0]*m[1]-p[1]*m[0];k[0]=k[1]=0;k[2]=p;return k};l.lerp=function(k,p,m,e){var f=p[0];p=p[1];k[0]=f+e*(m[0]-f);k[1]=p+e*(m[1]-p);return k};l.random=function(k,p){p=p||1;var m=2*a()*Math.PI;k[0]=Math.cos(m)*p;k[1]=Math.sin(m)*p;return k};l.transformMat2=function(k,p,m){var e=p[0];p=p[1];k[0]=m[0]*e+m[2]*p;k[1]=m[1]*e+m[3]*p;return k};l.transformMat2d=function(k,p,m){var e=p[0];p=p[1];k[0]=m[0]*e+m[2]*p+m[4];k[1]=m[1]*e+m[3]*p+m[5];return k};l.transformMat3=function(k,
p,m){var e=p[0];p=p[1];k[0]=m[0]*e+m[3]*p+m[6];k[1]=m[1]*e+m[4]*p+m[7];return k};l.transformMat4=function(k,p,m){var e=p[0];p=p[1];k[0]=m[0]*e+m[4]*p+m[12];k[1]=m[1]*e+m[5]*p+m[13];return k};l.forEach=function(){var k=l.create();return function(p,m,e,f,g,d){m||(m=2);e||(e=0);for(f=f?Math.min(f*m+e,p.length):p.length;e<f;e+=m)k[0]=p[e],k[1]=p[e+1],g(k,k,d),p[e]=k[0],p[e+1]=k[1];return p}}();l.str=function(k){return"vec2("+k[0]+", "+k[1]+")"};return l})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require",
"exports","../../core/tsSupport/assignHelper"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});n.adjustScreenshotSettings=function(l,k){l=a({format:"png",quality:100},l);if(l.includePadding){var p=k.width;var m=k.height}else p=k.width-k.padding.left-k.padding.right,m=k.height-k.padding.top-k.padding.bottom;var e=p/m;void 0!==l.width&&void 0===l.height?l.height=l.width/e:void 0!==l.height&&void 0===l.width&&(l.width=e*l.height);void 0!==l.height&&(l.height=Math.floor(l.height));void 0!==
l.width&&(l.width=Math.floor(l.width));l.area||l.includePadding||(l.area={x:k.padding.left,y:k.padding.top,width:p,height:m});return l};n.resampleHermite=function(l,k,p,m,e,f,g){void 0===g&&(g=!0);var d=k/e;p/=f;for(var q=Math.ceil(d/2),t=Math.ceil(p/2),w=0;w<f;w++)for(var x=0;x<e;x++){for(var z=4*(x+(g?f-w-1:w)*e),A=0,B=0,b=0,h=0,c=0,v=0,u=0,y=(w+.5)*p,C=Math.floor(w*p);C<(w+1)*p;C++){var D=Math.abs(y-(C+.5))/t,E=(x+.5)*d;D*=D;for(var F=Math.floor(x*d);F<(x+1)*d;F++){var G=Math.abs(E-(F+.5))/q;A=
Math.sqrt(D+G*G);-1<=A&&1>=A&&(A=2*A*A*A-3*A*A+1,0<A&&(G=4*(F+C*k),u+=A*l[G+3],b+=A,255>l[G+3]&&(A=A*l[G+3]/250),h+=A*l[G],c+=A*l[G+1],v+=A*l[G+2],B+=A))}}m[z]=h/B;m[z+1]=c/B;m[z+2]=v/B;m[z+3]=u/b}}})},"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(r,n){function a(m,e,f){void 0===e&&(e={});switch(f){case "webgl":var g=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":g=["webgl2"];break;default:g=["webgl","experimental-webgl",
"webkit-3d","moz-webgl"]}f=null;for(var d=0;d<g.length;d++){var q=g[d];try{f=m.getContext(q,e)}catch(t){}if(f)break}return f}function l(m,e){(m=m.parentNode)&&(m.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+e+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(n,"__esModule",{value:!0});n.createContextOrErrorHTML=
function(m,e,f){void 0===e&&(e={});if(!window.WebGLRenderingContext)return l(m,k),null;e=a(m,e,f);return e?e:(l(m,p),null)};n.createContext=a;var k='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',p='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define("require exports dojo/has ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),
function(r,n,a,l,k,p,m){return function(){function e(f,g){this.gl=null;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=
1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=
null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=p.default(f)?"webgl2":"webgl";this.gl=f;f instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=m.loadCapabilities(f,g);f=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:f[0],y:f[1],width:f[2],height:f[3]};f=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:f?this.gl.getParameter(f.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};a("esri-webgl-debug")&&(this.instanceCounter=new k);this.enforceState()}Object.defineProperty(e.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"parameters",{get:function(){return this._parameters},
enumerable:!0,configurable:!0});e.prototype.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};a("esri-webgl-debug")&&this.instanceCounter.printResourceCount();this.gl=null};e.prototype.setBlendingEnabled=function(f){this._blendEnabled!==f&&(!0===f?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=f)};e.prototype.setBlendColor=function(f,g,d,q){if(f!==this._blendColorState.r||g!==this._blendColorState.g||d!==
this._blendColorState.b||q!==this._blendColorState.a)this.gl.blendColor(f,g,d,q),this._blendColorState.r=f,this._blendColorState.g=g,this._blendColorState.b=d,this._blendColorState.a=q};e.prototype.setBlendFunction=function(f,g){if(f!==this._blendFunctionState.srcRGB||g!==this._blendFunctionState.dstRGB)this.gl.blendFunc(f,g),this._blendFunctionState.srcRGB=f,this._blendFunctionState.srcAlpha=f,this._blendFunctionState.dstRGB=g,this._blendFunctionState.dstAlpha=g};e.prototype.setBlendFunctionSeparate=
function(f,g,d,q){if(this._blendFunctionState.srcRGB!==f||this._blendFunctionState.srcAlpha!==d||this._blendFunctionState.dstRGB!==g||this._blendFunctionState.dstAlpha!==q)this.gl.blendFuncSeparate(f,g,d,q),this._blendFunctionState.srcRGB=f,this._blendFunctionState.srcAlpha=d,this._blendFunctionState.dstRGB=g,this._blendFunctionState.dstAlpha=q};e.prototype.setBlendEquation=function(f){this._blendEquationState.mode!==f&&(this.gl.blendEquation(f),this._blendEquationState.mode=f,this._blendEquationState.modeAlpha=
f)};e.prototype.setBlendEquationSeparate=function(f,g){if(this._blendEquationState.mode!==f||this._blendEquationState.modeAlpha!==g)this.gl.blendEquationSeparate(f,g),this._blendEquationState.mode=f,this._blendEquationState.modeAlpha=g};e.prototype.setColorMask=function(f,g,d,q){if(this._colorMaskState.r!==f||this._colorMaskState.g!==g||this._colorMaskState.b!==d||this._colorMaskState.a!==q)this.gl.colorMask(f,g,d,q),this._colorMaskState.r=f,this._colorMaskState.g=g,this._colorMaskState.b=d,this._colorMaskState.a=
q};e.prototype.setClearColor=function(f,g,d,q){if(this._clearColor.r!==f||this._clearColor.g!==g||this._clearColor.b!==d||this._clearColor.a!==q)this.gl.clearColor(f,g,d,q),this._clearColor.r=f,this._clearColor.g=g,this._clearColor.b=d,this._clearColor.a=q};e.prototype.setFaceCullingEnabled=function(f){this._polygonCullingEnabled!==f&&(!0===f?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=f)};e.prototype.setPolygonOffsetFillEnabled=function(f){this._polygonOffsetFillEnabled!==
f&&(!0===f?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=f)};e.prototype.setPolygonOffset=function(f,g){if(this._polygonOffset[0]!==f||this._polygonOffset[1]!==g)this._polygonOffset[0]=f,this._polygonOffset[1]=g,this.gl.polygonOffset(f,g)};e.prototype.setCullFace=function(f){this._cullFace!==f&&(this.gl.cullFace(f),this._cullFace=f)};e.prototype.setFrontFace=function(f){this._frontFace!==f&&(this.gl.frontFace(f),this._frontFace=
f)};e.prototype.setScissorTestEnabled=function(f){this._scissorTestEnabled!==f&&(!0===f?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=f)};e.prototype.setScissorRect=function(f,g,d,q){if(this._scissorRect.x!==f||this._scissorRect.y!==g||this._scissorRect.width!==d||this._scissorRect.height!==q)this.gl.scissor(f,g,d,q),this._scissorRect.x=f,this._scissorRect.y=g,this._scissorRect.width=d,this._scissorRect.height=q};e.prototype.setDepthTestEnabled=
function(f){this._depthTestEnabled!==f&&(!0===f?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=f)};e.prototype.setClearDepth=function(f){this._clearDepth!==f&&(this.gl.clearDepth(f),this._clearDepth=f)};e.prototype.setDepthFunction=function(f){this._depthFunction!==f&&(this.gl.depthFunc(f),this._depthFunction=f)};e.prototype.setDepthWriteEnabled=function(f){this._depthWriteEnabled!==f&&(this.gl.depthMask(f),this._depthWriteEnabled=f)};e.prototype.setDepthRange=
function(f,g){if(this._depthRange.zNear!==f||this._depthRange.zFar!==g)this.gl.depthRange(f,g),this._depthRange.zNear=f,this._depthRange.zFar=g};e.prototype.setStencilTestEnabled=function(f){this._stencilTestEnabled!==f&&(!0===f?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=f)};e.prototype.setClearStencil=function(f){f!==this._clearStencil&&(this.gl.clearStencil(f),this._clearStencil=f)};e.prototype.setStencilFunction=function(f,g,d){if(this._stencilFunction.func!==
f||this._stencilFunction.ref!==g||this._stencilFunction.mask!==d)this.gl.stencilFunc(f,g,d),this._stencilFunction.face=1032,this._stencilFunction.func=f,this._stencilFunction.ref=g,this._stencilFunction.mask=d};e.prototype.setStencilFunctionSeparate=function(f,g,d,q){if(this._stencilFunction.face!==f||this._stencilFunction.func!==g||this._stencilFunction.ref!==d||this._stencilFunction.mask!==q)this.gl.stencilFuncSeparate(f,g,d,q),this._stencilFunction.face=f,this._stencilFunction.func=g,this._stencilFunction.ref=
d,this._stencilFunction.mask=q};e.prototype.setStencilWriteMask=function(f){this._stencilWriteMask!==f&&(this.gl.stencilMask(f),this._stencilWriteMask=f)};e.prototype.setStencilOp=function(f,g,d){if(this._stencilOperation.fail!==f||this._stencilOperation.zFail!==g||this._stencilOperation.zPass!==d)this.gl.stencilOp(f,g,d),this._stencilOperation.face=1032,this._stencilOperation.fail=f,this._stencilOperation.zFail=g,this._stencilOperation.zPass=d};e.prototype.setStencilOpSeparate=function(f,g,d,q){if(this._stencilOperation.face!==
f||this._stencilOperation.fail!==g||this._stencilOperation.zFail!==d||this._stencilOperation.zPass!==q)this.gl.stencilOpSeparate(f,g,d,q),this._stencilOperation.face=f,this._stencilOperation.face=f,this._stencilOperation.fail=g,this._stencilOperation.zFail=d,this._stencilOperation.zPass=q};e.prototype.setLineWidth=function(f){var g=this._lineWidth;this._lineWidth!==f&&(this.gl.lineWidth(f),this._lineWidth=f);return g};e.prototype.setActiveTexture=function(f){var g=this._activeTextureUnit;0<=f&&f!==
this._activeTextureUnit&&(this.gl.activeTexture(l.BASE_TEXTURE_UNIT+f),this._activeTextureUnit=f);return g};e.prototype.clear=function(f){f&&this.gl.clear(f)};e.prototype.drawArrays=function(f,g,d){this.gl.drawArrays(f,g,d)};e.prototype.drawElements=function(f,g,d,q){5123===d?this.gl.drawElements(f,g,d,q):5125===d&&this.gl.drawElements(f,g,d,q)};Object.defineProperty(e.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});e.prototype.setViewport=function(f,
g,d,q){var t=this._viewport;if(t.x!==f||t.y!==g||t.width!==d||t.height!==q)t.x=f,t.y=g,t.width=d,t.height=q,this.gl.viewport(f,g,d,q)};e.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};e.prototype.bindProgram=function(f){f?this._activeShaderProgram!==f&&(f.initialize(),this.gl.useProgram(f.glName),this._activeShaderProgram=f):(this.gl.useProgram(null),this._activeShaderProgram=null)};e.prototype.bindTexture=function(f,
g){void 0===g&&(g=0);-1===e._MAX_TEXTURE_IMAGE_UNITS&&(e._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));var d=this._textureUnitMap[g];this.setActiveTexture(g);null==f||null==f.glName?(null!=d&&(this.gl.bindTexture(d.descriptor.target,null),d.setBoundToUnit(g,!1)),this._textureUnitMap[g]=null):d&&d.id===f.id?f.applyChanges():(this.gl.bindTexture(f.descriptor.target,f.glName),f.setBoundToUnit(g,!0),f.applyChanges(),this._textureUnitMap[g]=f)};e.prototype.bindFramebuffer=
function(f){f?this._activeFramebuffer!==f&&(f.initialize()||this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,f.glName),this._activeFramebuffer=f):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};e.prototype.bindBuffer=function(f){f&&(34962===f.bufferType?this._activeVertexBuffer=e._bindBuffer(this.gl,f,f.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=e._bindBuffer(this.gl,f,f.bufferType,this._activeIndexBuffer))};e.prototype.bindRenderbuffer=function(f){var g=
this.gl;f||(g.bindRenderbuffer(g.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==f&&(g.bindRenderbuffer(g.RENDERBUFFER,f.glName),this._activeRenderbuffer=f)};e.prototype.unbindBuffer=function(f){34962===f?this._activeVertexBuffer=e._bindBuffer(this.gl,null,f,this._activeVertexBuffer):this._activeIndexBuffer=e._bindBuffer(this.gl,null,f,this._activeIndexBuffer)};e.prototype.bindVAO=function(f){f?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===f.id||(f.bind(),
this._activeVertexArrayObject=f):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};e.prototype.getBoundTexture=function(f){return this._textureUnitMap[f]};e.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};e.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};e.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);
for(var f=0;f<this.parameters.maxTextureImageUnits;f++)this.bindTexture(null,f);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,
1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};e.prototype.enforceState=function(){var f=this.gl,g=this._capabilities.vao;g&&g.bindVertexArray(null);for(var d=0;d<this.parameters.maxVertexAttributes;d++)f.disableVertexAttribArray(d);
this._activeVertexBuffer?f.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):f.bindBuffer(34962,null);this._activeIndexBuffer?f.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):f.bindBuffer(34963,null);if(g&&this._activeVertexArrayObject){if(g=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(g)}f.bindFramebuffer(f.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:
null);f.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);f.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);f.bindRenderbuffer(f.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?f.enable(this.gl.BLEND):f.disable(this.gl.BLEND);f.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);f.blendFuncSeparate(this._blendFunctionState.srcRGB,
this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);f.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);f.clearDepth(this._clearDepth);f.clearStencil(this._clearStencil);f.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);f.cullFace(this._cullFace);f.depthFunc(this._depthFunction);f.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?
f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST);f.depthMask(this._depthWriteEnabled);f.frontFace(this._frontFace);f.lineWidth(this._lineWidth);!0===this._polygonCullingEnabled?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE);f.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?f.enable(f.POLYGON_OFFSET_FILL):f.disable(f.POLYGON_OFFSET_FILL);f.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?
f.enable(f.SCISSOR_TEST):f.disable(f.SCISSOR_TEST);f.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);f.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST);f.stencilMask(this._stencilWriteMask);for(g=0;g<this.parameters.maxTextureImageUnits;g++)f.activeTexture(l.BASE_TEXTURE_UNIT+g),f.bindTexture(3553,
null),(d=this._textureUnitMap[g])&&f.bindTexture(d.descriptor.target,d.glName);f.activeTexture(l.BASE_TEXTURE_UNIT+this._activeTextureUnit);f.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};e._bindBuffer=function(f,g,d,q){if(!g)return f.bindBuffer(d,null),null;if(q===g)return q;f.bindBuffer(d,g.glName);return g};e._MAX_TEXTURE_IMAGE_UNITS=-1;return e}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,
"__esModule",{value:!0});n.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/InstanceCounter":function(){define(["require","exports"],function(r,n){return function(){function a(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}a.prototype.incrementCount=function(l){switch(l){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;
break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};a.prototype.decrementCount=function(l){switch(l){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};a.prototype.printResourceCount=function(){};return a}()})},
"esri/layers/vectorTiles/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.default=function(a){return window.WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext}})},"esri/layers/vectorTiles/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),function(r,n,a,l,k,p){function m(e,f,g,d,q){if(d&&
k.default(e))return!0;if(f[g])return!1;for(f=0;f<q.length;f++)if(e.getExtension(q[f]))return!0;return!1}Object.defineProperty(n,"__esModule",{value:!0});n.loadCapabilities=function(e,f){f=f&&f.disabledExtensions||{};var g=l.load(e,f),d=p.load(e,f);var q=f.compressedTextureS3TC?null:(q=e.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:q.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:q.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:q.COMPRESSED_RGBA_S3TC_DXT3_EXT,
COMPRESSED_RGBA_S3TC_DXT5:q.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var t=f.textureFilterAnisotropic?null:(t=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:t.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:t.TEXTURE_MAX_ANISOTROPY_EXT}:null;var w=a.load(e,f);if(k.default(e))var x=f.colorBufferFloat||!e.getExtension("EXT_color_buffer_float")?null:{R16F:e.R16F,
RG16F:e.RG16F,RGBA16F:e.RGBA16F,R32F:e.R32F,RG32F:e.RG32F,RGBA32F:e.RGBA32F,R11F_G11F_B10F:e.R11F_G11F_B10F};else if(e instanceof WebGLRenderingContext){x=!f.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float");var z=!f.colorBufferFloat&&e.getExtension("WEBGL_color_buffer_float");x=x||z?{RGBA16F:x?x.RGBA16F_EXT:void 0,RGBA32F:z?z.RGBA32F_EXT:void 0}:null}else x=void 0;z=k.default(e)?{MIN:e.MIN,MAX:e.MAX}:f.blendMinMax?null:(z=e.getExtension("EXT_blend_minmax"))?{MIN:z.MIN_EXT,MAX:z.MAX_EXT}:
null;return{instancing:g,vao:d,compressedTextureS3TC:q,textureFilterAnisotropic:t,disjointTimerQuery:w,colorBufferFloat:x,blendMinMax:z,depthTexture:m(e,f,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:m(e,f,"standardDerivatives",!0,["OES_standard_derivatives"]),shaderTextureLOD:m(e,f,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:m(e,f,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:m(e,f,
"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/layers/vectorTiles/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require","exports","./isWebGL2Context"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});n.load=function(l,k){if(k.disjointTimerQuery)return null;var p=l.getExtension("EXT_disjoint_timer_query")||l.getExtension("EXT_disjoint_timer_query_webgl2");return p?a.default(l)?{createQuery:function(){return l.createQuery()},resultAvailable:function(m){return l.getQueryParameter(m,
l.QUERY_RESULT_AVAILABLE)},getResult:function(m){return l.getQueryParameter(m,l.QUERY_RESULT)},disjoint:function(){return l.getParameter(p.GPU_DISJOINT_EXT)},beginTimeElapsed:function(m){return l.beginQuery(p.TIME_ELAPSED_EXT,m)},endTimeElapsed:function(){return l.endQuery(p.TIME_ELAPSED_EXT)},createTimestamp:function(m){return p.queryCounterEXT(m,p.TIMESTAMP_EXT)},timestampBits:function(){return l.getQuery(p.TIMESTAMP_EXT,p.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return p.createQueryEXT()},
resultAvailable:function(m){return p.getQueryObjectEXT(m,p.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(m){return p.getQueryObjectEXT(m,p.QUERY_RESULT_EXT)},disjoint:function(){return l.getParameter(p.GPU_DISJOINT_EXT)},beginTimeElapsed:function(m){return p.beginQueryEXT(p.TIME_ELAPSED_EXT,m)},endTimeElapsed:function(){return p.endQueryEXT(p.TIME_ELAPSED_EXT)},createTimestamp:function(m){return p.queryCounterEXT(m,p.TIMESTAMP_EXT)},timestampBits:function(){return p.getQueryEXT(p.TIMESTAMP_EXT,
p.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});n.load=function(l,k){return a.default(l)?{drawArraysInstanced:l.drawArraysInstanced.bind(l),drawElementsInstanced:l.drawElementsInstanced.bind(l),vertexAttribDivisor:l.vertexAttribDivisor.bind(l)}:k.angleInstancedArrays?null:(l=l.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:l.drawArraysInstancedANGLE.bind(l),
drawElementsInstanced:l.drawElementsInstancedANGLE.bind(l),vertexAttribDivisor:l.vertexAttribDivisorANGLE.bind(l)}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});n.load=function(l,k){return a.default(l)?{createVertexArray:l.createVertexArray.bind(l),deleteVertexArray:l.deleteVertexArray.bind(l),bindVertexArray:l.bindVertexArray.bind(l)}:k.vao?
null:(l=l.getExtension("OES_vertex_array_object")||l.getExtension("MOZ_OES_vertex_array_object")||l.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:l.createVertexArrayOES.bind(l),deleteVertexArray:l.deleteVertexArrayOES.bind(l),bindVertexArray:l.bindVertexArrayOES.bind(l)}:null}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLFeatureView":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/promiseUtils ../../../../core/promiseUtils ../../../../core/libs/gl-matrix/mat4 ../../../../core/libs/gl-matrix/vec3 ../../../../geometry/Point ../Container ../StageGL ../../engine/webgl/TileData ./enums ./GeometryUtils ./TextureManager ./Utils ./WGLPainter ./WGLRendererInfo".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B){Object.defineProperty(n,"__esModule",{value:!0});r=function(b){function h(c){var v=b.call(this)||this;v._rendererInfo=new B;v._stage=new d;v._container=null;v._tileCoordinateScale=e.create();v._orientationVec=e.fromValues(0,0,1);v._displayScale=e.create();v._defaultTransform=m.create();v._pointToCallbacks=new Map;v._highlightIDs=new Set;v._tileId=void 0;v._patches={};v._displayWidth=0;v._displayHeight=0;v._highlightOptionsUpToDate=!1;v.layer=null;v.textureManager=
new x;v.highlightOptions=c.highlightOptions;v.tileInfoView=c.tileInfoView;v._stage.useContextVersion("webgl");v.layer=c.layer;v._layerView=c.layerView;return v}l(h,b);h.prototype.dispose=function(){this.textureManager&&(this.textureManager.dispose(),this.textureManager=null);this.removeAllChildren();for(var c=0,v=this.children;c<v.length;c++)v[c].dispose()};h.prototype.disposeWebGLResources=function(){for(var c=0,v=this.children;c<v.length;c++)v[c].clear()};h.prototype.displayWidth=function(){return this._displayWidth};
Object.defineProperty(h.prototype,"displayHeight",{get:function(){return this._displayHeight},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"highlightOptions",{get:function(){return this._highlightOptions},set:function(c){this._highlightOptions=c;this._highlightOptionsUpToDate=!1},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"visualVariablesInfo",{get:function(){return this._visualVariablesInfo},set:function(c){this._visualVariablesInfo=c;this.requestRender()},
enumerable:!0,configurable:!0});h.prototype.install=function(c){c.addChild(this._stage);this._stage.addChild(this);this._container=c};h.prototype.uninstall=function(c){c.removeChild(this._stage);this._stage.removeChild(this);this.dispose();this._container=null};h.prototype.hitTest=function(c,v){var u=this,y=[c,v];return k.create(function(C,D){u._pointToCallbacks.set(y,{resolve:C,reject:D});u.requestRender()},function(){u._pointToCallbacks.has(y)&&u._pointToCallbacks.delete(y)})};h.prototype.highlight=
function(c){var v=this;v.addHighlight(c);return{remove:function(){v.removeHighlight(c)}}};h.prototype.setHighlight=function(c){this._highlightIDs.clear();this.addHighlight(c)};h.prototype.setVisibility=function(c,v){for(var u=function(D){if(D.data){var E=D.data.tileDisplayData.displayObjectRegistry,F=c.filter(function(G){return E.has(G.id)});D.setVisibility(F,v)}},y=0,C=this.children;y<C.length;y++)u(C[y])};h.prototype.setVisibilityRange=function(c,v,u,y){for(var C=0,D=this.children;C<D.length;C++){var E=
D[C];E.data&&E.data.tileDisplayData.displayObjectRegistry.has(c)&&E.setVisibilityRange(c,v,u,y)}};h.prototype.addHighlight=function(c){for(var v=0;v<c.length;v++)this._highlightIDs.add(c[v]);this._buildHLList()};h.prototype.removeHighlight=function(c){for(var v=0;v<c.length;v++)this._highlightIDs.delete(c[v]);this._buildHLList()};h.prototype.getMaterialItems=function(c){if(c&&0!==c.length){for(var v=[],u=0;u<c.length;u++){var y=c[u];v.push(this.textureManager.rasterizeItem(y.symbol,y.glyphIds))}return p.all(v).then(function(C){return C.map(function(D,
E){return{id:E,mosaicItem:D}})})}};h.prototype.onTileData=function(c,v){var u=null;v&&(u=q.decode(v));c.setData(u,null!=this.visualVariablesInfo.vvFields,this.layer.labelsVisible);c.buildHLList(this._highlightIDs);this._layerView&&this._layerView.view.labelManager.requestUpdate();this.addChild(c);this._stage.fadeInLabels();this.requestRender()};h.prototype.onTileDataUpdate=function(c,v){this._patches[c.key.id]=this._patches[c.key.id]||[];this._patches[c.key.id].push({tile:c,patch:v});this._stage.fadeInLabels();
this.requestRender()};h.prototype.onTileError=function(c){c.clear();c.buildHLList(this._highlightIDs);this.addChild(c);this.requestRender()};h.prototype.addChild=function(c){var v=b.prototype.addChild.call(this,c);this.layer.labelingInfo&&this._layerView&&this._layerView.view.labelManager.addTile(this.layer.uid,c);this._buildHLList();return v};h.prototype.removeChild=function(c){var v=b.prototype.removeChild.call(this,c);this.layer.labelingInfo&&this._layerView&&this._layerView.view.labelManager.removeTile(this.layer.uid,
c.key.id);this._buildHLList();return v};h.prototype.prepareChildrenRenderParameters=function(c){this._rendererInfo.updateVisualVariables(this._visualVariablesInfo.vvRanges,c.state);var v=this.tileInfoView.getClosestInfoForScale(c.state.scale).level,u=this.tileInfoView.tileInfo.scaleToZoom(c.state.scale);return a({},c,{rendererInfo:this._rendererInfo,requiredLevel:v,displayLevel:u})};h.prototype.renderChildren=function(c){for(var v=this,u=0;this._nextTile()&&4>u;){for(var y=0,C=this._patches[this._tileId];y<
C.length;y++){var D=C[y];this._patchTileVisuals(D.tile,D.patch)}delete this._patches[this._tileId];++u}u=c.painter;u.bindTextureManager(this.textureManager);this._rendererInfo.updateVisualVariables(this._visualVariablesInfo.vvRanges,c.state);this.sortChildren(function(E,F){return 0!==E.key.level-F.key.level?E.key.level-F.key.level:0!==E.key.row-F.key.row?E.key.row-F.key.row:E.key.col-F.key.col});y=A.default.toWGLDrawPhases(c.drawPhase);if(0<y.length&&y[0]===t.WGLDrawPhase.LABEL||y[0]===t.WGLDrawPhase.LABEL_ALPHA){C=
this.layer;if(!(C.labelsVisible&&C.labelingInfo&&0<C.labelingInfo.length))return;this._updateTilesTransform(c.state,c.requiredLevel);u.update(c.state,c.pixelRatio)}u.draw(c,this.children,y,this._painterOptions);0<this._highlightIDs.size&&u.highlight(c,this.children);0!==this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(E,F){E.resolve(v._hitTest(c,F[0],F[1]))}),this._pointToCallbacks.clear())};h.prototype.attachChild=function(c,v){return c.attach(v)};h.prototype.detachChild=function(c,
v){c.detach(v)};h.prototype.renderChild=function(c,v){c.doRender(v)};h.prototype.beforeRenderChildren=function(c,v){this._updateTilesTransform(c.state,this.tileInfoView.getClosestInfoForScale(c.state.scale).level);this._updateHighlightOptions();this._stage.opacity=this._container.opacity};h.prototype._hitTest=function(c,v,u){var y=c.painter,C=c.requiredLevel,D=[0,0];c.state.toMap(D,[v,u]);v=c.state.clone();u=v.viewpoint.clone();u.targetGeometry=new f(D[0],D[1],c.state.spatialReference);v.viewpoint=
u;v.size=[z.C_HITTEST_SEARCH_SIZE,z.C_HITTEST_SEARCH_SIZE];this._updateTilesTransform(v,C);y.update(v,c.pixelRatio);return y.hitTest({context:c.context,drawPhase:t.WGLDrawPhase.HITTEST,painter:y,pixelRatio:c.pixelRatio,displayLevel:c.displayLevel,rendererInfo:this._rendererInfo,requiredLevel:C,state:v,stationary:c.stationary},this.children)};h.prototype._updateTilesTransform=function(c,v){var u=1/c.width,y=1/c.height,C=[0,0];this._calculateRelativeViewProjMat(this.tileInfoView.tileInfo.lods[v].resolution,
c.resolution,c.rotation,this.tileInfoView.tileInfo.size[0],c.width,c.height,this._defaultTransform);for(var D=0,E=this.children;D<E.length;D++){var F=E[D];c.toScreen(C,F.coords);C[1]=c.height-C[1];F.tileTransform.displayCoord[0]=2*C[0]*u-1;F.tileTransform.displayCoord[1]=2*C[1]*y-1;F.key.level===v?F.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this.tileInfoView.tileInfo.lods[F.key.level].resolution,c.resolution,c.rotation,this.tileInfoView.tileInfo.size[0],
c.width,c.height,F.tileTransform.transform)}};h.prototype._calculateRelativeViewProjMat=function(c,v,u,y,C,D,E){c/=v;this._tileCoordinateScale.set([c,c,1]);if(C!==this._displayWidth||D!==this._displayHeight)this._displayScale.set([2/C,-2/D,1]),this._displayWidth=C,this._displayHeight=D;m.identity(E);m.scale(E,E,this._tileCoordinateScale);m.rotate(E,E,-u*w.C_DEG_TO_RAD,this._orientationVec);m.scale(E,E,this._displayScale);m.transpose(E,E)};h.prototype._updateHighlightOptions=function(){if(!this._highlightOptionsUpToDate&&
this.parent){var c=this.parent.glPainter,v=this._highlightOptions;if(c){var u=v.color.toRgba();u[0]/=255;u[1]/=255;u[2]/=255;var y=u.slice();u[3]*=v.fillOpacity;y[3]*=v.haloOpacity;c.setHighlightOptions({fillColor:u,outlineColor:y,outlineWidth:2,outerHaloWidth:.3,innerHaloWidth:.3,outlinePosition:0})}}};h.prototype._buildHLList=function(){for(var c=0,v=this.children;c<v.length;c++)v[c].buildHLList(this._highlightIDs);this.requestRender()};h.prototype._nextTile=function(){var c=Object.keys(this._patches);
if(0===c.length)return this._tileId=void 0,!1;if(!this._tileId)return this._tileId=c[0],!0;var v=c.indexOf(this._tileId);v=(v+1)%c.length;this._tileId=c[v];return!0};h.prototype._patchTileVisuals=function(c,v){var u=v.addOrUpdate?q.decode(v.addOrUpdate):null;c.patchData({remove:v.remove||[],addOrUpdate:u},this.layer.labelsVisible);c.buildHLList(this._highlightIDs);this.contains(c)||this.addChild(c)};return h}(g);n.default=r})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],
function(r){var n={create:function(){var a=new r.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var l=new r.ARRAY_TYPE(3);l[0]=a[0];l[1]=a[1];l[2]=a[2];return l},fromValues:function(a,l,k){var p=new r.ARRAY_TYPE(3);p[0]=a;p[1]=l;p[2]=k;return p},copy:function(a,l){a[0]=l[0];a[1]=l[1];a[2]=l[2];return a},set:function(a,l,k,p){a[0]=l;a[1]=k;a[2]=p;return a},add:function(a,l,k){a[0]=l[0]+k[0];a[1]=l[1]+k[1];a[2]=l[2]+k[2];return a},subtract:function(a,l,k){a[0]=l[0]-k[0];a[1]=l[1]-k[1];
a[2]=l[2]-k[2];return a}};n.sub=n.subtract;n.multiply=function(a,l,k){a[0]=l[0]*k[0];a[1]=l[1]*k[1];a[2]=l[2]*k[2];return a};n.mul=n.multiply;n.divide=function(a,l,k){a[0]=l[0]/k[0];a[1]=l[1]/k[1];a[2]=l[2]/k[2];return a};n.div=n.divide;n.ceil=function(a,l){a[0]=Math.ceil(l[0]);a[1]=Math.ceil(l[1]);a[2]=Math.ceil(l[2]);return a};n.floor=function(a,l){a[0]=Math.floor(l[0]);a[1]=Math.floor(l[1]);a[2]=Math.floor(l[2]);return a};n.min=function(a,l,k){a[0]=Math.min(l[0],k[0]);a[1]=Math.min(l[1],k[1]);
a[2]=Math.min(l[2],k[2]);return a};n.max=function(a,l,k){a[0]=Math.max(l[0],k[0]);a[1]=Math.max(l[1],k[1]);a[2]=Math.max(l[2],k[2]);return a};n.round=function(a,l){a[0]=Math.round(l[0]);a[1]=Math.round(l[1]);a[2]=Math.round(l[2]);return a};n.scale=function(a,l,k){a[0]=l[0]*k;a[1]=l[1]*k;a[2]=l[2]*k;return a};n.scaleAndAdd=function(a,l,k,p){a[0]=l[0]+k[0]*p;a[1]=l[1]+k[1]*p;a[2]=l[2]+k[2]*p;return a};n.distance=function(a,l){var k=l[0]-a[0],p=l[1]-a[1];a=l[2]-a[2];return Math.sqrt(k*k+p*p+a*a)};n.dist=
n.distance;n.squaredDistance=function(a,l){var k=l[0]-a[0],p=l[1]-a[1];a=l[2]-a[2];return k*k+p*p+a*a};n.sqrDist=n.squaredDistance;n.length=function(a){var l=a[0],k=a[1];a=a[2];return Math.sqrt(l*l+k*k+a*a)};n.len=n.length;n.squaredLength=function(a){var l=a[0],k=a[1];a=a[2];return l*l+k*k+a*a};n.sqrLen=n.squaredLength;n.negate=function(a,l){a[0]=-l[0];a[1]=-l[1];a[2]=-l[2];return a};n.inverse=function(a,l){a[0]=1/l[0];a[1]=1/l[1];a[2]=1/l[2];return a};n.normalize=function(a,l){var k=l[0],p=l[1],
m=l[2];k=k*k+p*p+m*m;0<k&&(k=1/Math.sqrt(k),a[0]=l[0]*k,a[1]=l[1]*k,a[2]=l[2]*k);return a};n.dot=function(a,l){return a[0]*l[0]+a[1]*l[1]+a[2]*l[2]};n.cross=function(a,l,k){var p=l[0],m=l[1];l=l[2];var e=k[0],f=k[1];k=k[2];a[0]=m*k-l*f;a[1]=l*e-p*k;a[2]=p*f-m*e;return a};n.lerp=function(a,l,k,p){var m=l[0],e=l[1];l=l[2];a[0]=m+p*(k[0]-m);a[1]=e+p*(k[1]-e);a[2]=l+p*(k[2]-l);return a};n.hermite=function(a,l,k,p,m,e){var f=e*e,g=f*(2*e-3)+1,d=f*(e-2)+e,q=f*(e-1);e=f*(3-2*e);a[0]=l[0]*g+k[0]*d+p[0]*q+
m[0]*e;a[1]=l[1]*g+k[1]*d+p[1]*q+m[1]*e;a[2]=l[2]*g+k[2]*d+p[2]*q+m[2]*e;return a};n.bezier=function(a,l,k,p,m,e){var f=1-e,g=f*f,d=e*e,q=g*f;g*=3*e;f*=3*d;e*=d;a[0]=l[0]*q+k[0]*g+p[0]*f+m[0]*e;a[1]=l[1]*q+k[1]*g+p[1]*f+m[1]*e;a[2]=l[2]*q+k[2]*g+p[2]*f+m[2]*e;return a};n.random=function(a,l){l=l||1;var k=2*r.RANDOM()*Math.PI,p=2*r.RANDOM()-1,m=Math.sqrt(1-p*p)*l;a[0]=Math.cos(k)*m;a[1]=Math.sin(k)*m;a[2]=p*l;return a};n.transformMat4=function(a,l,k){var p=l[0],m=l[1];l=l[2];var e=k[3]*p+k[7]*m+k[11]*
l+k[15];e=e||1;a[0]=(k[0]*p+k[4]*m+k[8]*l+k[12])/e;a[1]=(k[1]*p+k[5]*m+k[9]*l+k[13])/e;a[2]=(k[2]*p+k[6]*m+k[10]*l+k[14])/e;return a};n.transformMat3=function(a,l,k){var p=l[0],m=l[1];l=l[2];a[0]=p*k[0]+m*k[3]+l*k[6];a[1]=p*k[1]+m*k[4]+l*k[7];a[2]=p*k[2]+m*k[5]+l*k[8];return a};n.transformQuat=function(a,l,k){var p=l[0],m=l[1],e=l[2];l=k[0];var f=k[1],g=k[2];k=k[3];var d=k*p+f*e-g*m,q=k*m+g*p-l*e,t=k*e+l*m-f*p;p=-l*p-f*m-g*e;a[0]=d*k+p*-l+q*-g-t*-f;a[1]=q*k+p*-f+t*-l-d*-g;a[2]=t*k+p*-g+d*-f-q*-l;
return a};n.rotateX=function(a,l,k,p){var m=[],e=[];m[0]=l[0]-k[0];m[1]=l[1]-k[1];m[2]=l[2]-k[2];e[0]=m[0];e[1]=m[1]*Math.cos(p)-m[2]*Math.sin(p);e[2]=m[1]*Math.sin(p)+m[2]*Math.cos(p);a[0]=e[0]+k[0];a[1]=e[1]+k[1];a[2]=e[2]+k[2];return a};n.rotateY=function(a,l,k,p){var m=[],e=[];m[0]=l[0]-k[0];m[1]=l[1]-k[1];m[2]=l[2]-k[2];e[0]=m[2]*Math.sin(p)+m[0]*Math.cos(p);e[1]=m[1];e[2]=m[2]*Math.cos(p)-m[0]*Math.sin(p);a[0]=e[0]+k[0];a[1]=e[1]+k[1];a[2]=e[2]+k[2];return a};n.rotateZ=function(a,l,k,p){var m=
[],e=[];m[0]=l[0]-k[0];m[1]=l[1]-k[1];m[2]=l[2]-k[2];e[0]=m[0]*Math.cos(p)-m[1]*Math.sin(p);e[1]=m[0]*Math.sin(p)+m[1]*Math.cos(p);e[2]=m[2];a[0]=e[0]+k[0];a[1]=e[1]+k[1];a[2]=e[2]+k[2];return a};n.forEach=function(){var a=n.create();return function(l,k,p,m,e,f){k||(k=3);p||(p=0);for(m=m?Math.min(m*k+p,l.length):l.length;p<m;p+=k)a[0]=l[p],a[1]=l[p+1],a[2]=l[p+2],e(a,a,f),l[p]=a[0],l[p+1]=a[1],l[p+2]=a[2];return l}}();n.angle=function(a,l){a=n.fromValues(a[0],a[1],a[2]);l=n.fromValues(l[0],l[1],l[2]);
n.normalize(a,a);n.normalize(l,l);l=n.dot(a,l);return 1<l?0:Math.acos(l)};n.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};n.exactEquals=function(a,l){return a[0]===l[0]&&a[1]===l[1]&&a[2]===l[2]};n.equals=function(a,l){var k=a[0],p=a[1];a=a[2];var m=l[0],e=l[1];l=l[2];return Math.abs(k-m)<=r.EPSILON*Math.max(1,Math.abs(k),Math.abs(m))&&Math.abs(p-e)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(e))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))};return n})},"esri/layers/vectorTiles/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(r,n,a,l,k,p,m,e,f,g){function d(w){return w&&("esri.geometry.SpatialReference"===w.declaredClass||null!=w.wkid)}var q=[0,0],t=k.getLogger("esri.geometry.Point");r=function(w){function x(A,B,b,h,c){A=w.call(this)||this;A.x=0;A.y=0;A.z=void 0;A.m=void 0;A.type="point";return A}a(x,w);var z=x;x.copy=function(A,B){B.x=A.x;B.y=A.y;B.z=A.z;B.m=A.m;B.spatialReference=Object.isFrozen(A.spatialReference)?A.spatialReference:A.spatialReference.clone()};x.distance=function(A,B){var b=A.x-B.x,h=A.y-B.y;
A=A.hasZ&&B.hasZ?A.z-B.z:0;return Math.sqrt(b*b+h*h+A*A)};x.prototype.normalizeCtorArgs=function(A,B,b,h,c){if(Array.isArray(A)){var v=A;c=B;A=v[0];B=v[1];b=v[2];h=v[3]}else if(A&&"object"===typeof A){if(v=A,A=null!=v.x?v.x:v.longitude,B=null!=v.y?v.y:v.latitude,b=null!=v.z?v.z:v.altitude,h=v.m,(c=v.spatialReference)&&"esri.geometry.SpatialReference"!==c.declaredClass&&(c=new e(c)),null!=v.longitude||null!=v.latitude)null==v.longitude?t.warn(".longitude\x3d","Latitude was defined without longitude"):
null==v.latitude?t.warn(".latitude\x3d","Longitude was defined without latitude"):!v.declaredClass&&c&&c.isWebMercator&&(B=g.lngLatToXY(v.longitude,v.latitude,q),A=B[0],B=B[1])}else d(b)?(c=b,b=null):d(h)&&(c=h,h=null);A={x:A,y:B};null!=c&&(A.spatialReference=c);null!=b&&(A.z=b);null!=h&&(A.m=h);return A};Object.defineProperty(x.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(A){var B=this._get("hasM");A!==B&&(this._set("m",A?0:void 0),this._set("hasM",A))},enumerable:!0,configurable:!0});
Object.defineProperty(x.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(A){var B=this._get("hasZ");A!==B&&(this._set("z",A?0:void 0),this._set("hasZ",A))},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"latitude",{get:function(){var A=this._get("spatialReference");if(A){if(A.isWebMercator)return g.xyToLngLat(this.x,this.y,q)[1];if(A.isWGS84)return this._get("y")}return null},set:function(A){var B=this._get("spatialReference");B&&(B.isWebMercator?this._set("y",
g.lngLatToXY(this.x,A,q)[1]):B.isWGS84&&this._set("y",A),this._set("latitude",A))},enumerable:!0,configurable:!0});Object.defineProperty(x.prototype,"longitude",{get:function(){var A=this._get("spatialReference");if(A){if(A.isWebMercator)return g.xyToLngLat(this._get("x"),this._get("y"),q)[0];if(A.isWGS84)return this._get("x")}return null},set:function(A){var B=this._get("spatialReference");B&&(B.isWebMercator?this._set("x",g.lngLatToXY(A,this._get("y"),q)[0]):B.isWGS84&&this._set("x",A),this._set("longitude",
A))},enumerable:!0,configurable:!0});x.prototype.clone=function(){var A=new z;A.x=this.x;A.y=this.y;A.z=this.z;A.m=this.m;A.spatialReference=this.spatialReference;return A};x.prototype.copy=function(A){z.copy(A,this);return this};x.prototype.equals=function(A){if(!A)return!1;var B=this.x,b=this.y,h=this.z,c=this.m,v=this.spatialReference,u=A.z,y=A.m,C=A.x,D=A.y;A=A.spatialReference;if(!v.equals(A))if(v.isWebMercator&&A.isWGS84)D=g.lngLatToXY(C,D),C=D[0],D=D[1],A=v;else if(v.isWGS84&&A.isWebMercator)D=
g.xyToLngLat(C,D),C=D[0],D=D[1],A=v;else return!1;return B===C&&b===D&&h===u&&c===y&&v.wkid===A.wkid};x.prototype.offset=function(A,B,b){this.x+=A;this.y+=B;null!=b&&this.hasZ&&(this.z+=b);return this};x.prototype.normalize=function(){if(!this.spatialReference)return this;var A=f.getInfo(this.spatialReference);if(!A)return this;var B=this.x,b=A.valid;A=b[0];var h=b[1];b=2*h;B>h?(A=Math.ceil(Math.abs(B-h)/b),B-=A*b):B<A&&(A=Math.ceil(Math.abs(B-A)/b),B+=A*b);this._set("x",B);return this};x.prototype.distance=
function(A){return z.distance(this,A)};x.prototype.toArray=function(){var A=this.hasZ,B=this.hasM;return A&&B?[this.x,this.y,this.z,this.m]:A?[this.x,this.y,this.z]:B?[this.x,this.y,this.m]:[this.x,this.y]};x.prototype.toJSON=function(A){return this.write(null,A)};l([p.property({dependsOn:["x","y","z","m","spatialReference"]})],x.prototype,"cache",void 0);l([p.property({type:Boolean,dependsOn:["m"],json:{write:{enabled:!1,overridePolicy:null}}})],x.prototype,"hasM",null);l([p.property({type:Boolean,
dependsOn:["z"],json:{write:{enabled:!1,overridePolicy:null}}})],x.prototype,"hasZ",null);l([p.property({type:Number,dependsOn:["y"]})],x.prototype,"latitude",null);l([p.property({type:Number,dependsOn:["x"]})],x.prototype,"longitude",null);l([p.property({type:Number,json:{write:{isRequired:!0}}})],x.prototype,"x",void 0);l([p.property({type:Number,json:{write:!0}})],x.prototype,"y",void 0);l([p.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],x.prototype,
"z",void 0);l([p.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],x.prototype,"m",void 0);return x=z=l([p.subclass("esri.geometry.Point")],x)}(p.declared(m));r.prototype.toJSON.isDefaultToJSON=!0;return r})},"esri/layers/vectorTiles/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(r,n){return function(a,l){a.__bases__=l.__bases__}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(r,
n,a,l){var k=arguments.length,p=3>k?n:null===l?l=Object.getOwnPropertyDescriptor(n,a):l,m;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)p=Reflect.decorate(r,n,a,l);else for(var e=r.length-1;0<=e;e--)if(m=r[e])p=(3>k?m(p):3<k?m(n,a,p):m(n,a))||p;return 3<k&&p&&Object.defineProperty(n,a,p),p}})},"esri/layers/vectorTiles/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d){function q(t){for(var w in t)n.hasOwnProperty(w)||(n[w]=t[w])}Object.defineProperty(n,"__esModule",{value:!0});q(a);q(l);q(k);q(p);q(m);q(e);q(f);q(g);q(d)})},"esri/layers/vectorTiles/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});n.aliasOf=function(l){return function(k,p){a.getPropertyMetadata(k,p).aliasOf=l}}})},"esri/layers/vectorTiles/core/accessorSupport/metadata":function(){define(["require",
"exports"],function(r,n){function a(e){return null!=e.__accessorMetadata__}function l(e){return a(e)&&null!=k(e).properties}function k(e){e.__accessorMetadata__||Object.defineProperty(e,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return e.__accessorMetadata__}function p(e){e=k(e);var f=e.properties;f||(f=e.properties={});return f}function m(e,f){var g=k(e);e=g.parameters;e||(e=g.parameters={});g=e[f];g||(g=[],e[f]=g);return g}Object.defineProperty(n,"__esModule",{value:!0});
n.hasMetadata=a;n.hasPropertiesMetadata=l;n.hasPropertyMetadata=function(e,f){return l(e)&&null!=p(e)[f]};n.hasParametersMetadata=function(e,f){return a(e)&&null!=k(e).parameters&&null!=k(e).parameters[f]};n.getMetadata=k;n.getPropertiesMetadata=p;n.getPropertyMetadata=function(e,f){e=p(e);var g=e[f];g||(g=e[f]={});return g};n.setPropertyMetadata=function(e,f,g){p(e)[f]=g};n.getParametersMetadata=m;n.getParameterMetadata=function(e,f,g){var d=m(e,f)[g];d||(m(e,f)[g]=d={index:g});return d}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});n.autoDestroy=function(){return function(l,k,p){a.getMetadata(l).autoDestroy=!0;return l[k]}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(r,n,a,l){function k(g){var d="_meta"in g?a.ensureType(g):g;return function(){for(var q=[],t=0;t<arguments.length;t++)q[t]=arguments[t];q.push(d);return"number"===typeof q[2]?
m.apply(this,q):p.apply(this,q)}}function p(g,d,q,t){l.getPropertyMetadata(g,d).cast=t}function m(g,d,q,t){l.getParameterMetadata(g,d,q).cast=t}function e(g){return function(d,q,t){l.getPropertyMetadata(d,g).cast=d[q]}}Object.defineProperty(n,"__esModule",{value:!0});var f=Object.prototype.toString;n.autocastMethod=function(g,d,q){if(l.hasParametersMetadata(g,d)){var t=l.getParametersMetadata(g,d).filter(function(x){return null!=x.cast});if(t.length){var w=q.value;q.value=function(){for(var x=[],
z=0;z<arguments.length;z++)x[z]=arguments[z];for(z=0;z<t.length;z++){var A=t[z];x[A.index]=A.cast(x[A.index])}return w.apply(this,x)};return q}}};n.cast=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];if(3!==g.length||"string"!==typeof g[1]){if(1===g.length&&"[object Function]"===f.call(g[0]))return k(g[0]);if(1===g.length&&"string"===typeof g[0])return e(g[0])}}})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(r,
n,a){function l(c,v){return v.isInstanceOf?v.isInstanceOf(c):v instanceof c}function k(c){return null==c?c:new Date(c)}function p(c){return null==c?c:!!c}function m(c){return null==c?c:c.toString()}function e(c){return null==c?c:parseFloat(c)}function f(c){return null==c?c:Math.round(parseFloat(c))}function g(c){return c&&c.constructor&&void 0!==c.constructor._meta}function d(c,v){return null!=v&&c&&!l(c,v)}function q(c,v){d(c,v)&&(g(v)?b.error("Accessor#set","Assigning an instance of '"+(v.declaredClass||
"unknown")+"' which is not a subclass of '"+(c&&c.prototype&&c.prototype.declaredClass||"unknown")+"'"):v=new c(v));return v}function t(c){switch(c){case Number:return e;case h:return f;case Boolean:return p;case String:return m;case Date:return k;default:return q.bind(null,c)}}function w(c,v){var u=t(c);return 1===arguments.length?u:u(v)}function x(c,v){return 1===arguments.length?x.bind(null,c):v?Array.isArray(v)?v.map(c):[c(v)]:v}function z(c,v,u){return 0!==v&&Array.isArray(u)?u.map(function(y){return z(c,
v-1,y)}):c(u)}function A(c,v,u){if(2===arguments.length)return A.bind(null,c,v);if(!u)return u;u=z(c,v,u);for(var y=v,C=u;0<y&&Array.isArray(C);)y--,C=C[0];if(void 0!==C)for(C=0;C<y;C++)u=[u];return u}function B(c,v){if(2===arguments.length)return B(c).call(null,v);var u={},y=[],C=[],D;for(D in c.typeMap){var E=c.typeMap[D];u[D]=w(E);y.push(E&&E.prototype&&E.prototype.declaredClass||"unknown");C.push(D)}var F="string"===typeof c.key?function(G){return G[c.key]}:c.key;return function(G){if(c.base&&
!d(c.base,G))return G;var J=F(G)||c.defaultKeyValue,R=u[J];if(!R)return b.error("Accessor#set","Invalid property value, value needs to be one of '"+(y.join("', '")+"', or a plain object that can auto-cast (having .type \x3d '")+(C.join("', '")+"')")),null;if(!d(c.typeMap[J],G))return G;if("string"!==typeof c.key||g(G))return R(G);J={};for(var O in G)O!==c.key&&(J[O]=G[O]);return R(J)}}Object.defineProperty(n,"__esModule",{value:!0});var b=a.getLogger("esri.core.Accessor");n.isInstanceOf=l;n.ensureDate=
k;n.ensureBoolean=p;n.ensureString=m;n.ensureNumber=e;n.ensureInteger=f;n.isClassedType=g;n.requiresType=d;n.ensureClass=q;n.ensureType=w;n.ensureArrayTyped=x;n.ensureArray=function(c,v){return 1===arguments.length?x(w.bind(null,c)):x(w.bind(null,c),v)};n.ensureNArrayTyped=A;n.ensureNArray=function(c,v,u){return 2===arguments.length?A(w.bind(null,c),v):A(w.bind(null,c),v,u)};n.ensureOneOfType=B;var h=function(){return function(){}}();n.Integer=h;n.default=w})},"esri/layers/vectorTiles/core/accessorSupport/decorators/declared":function(){define(["require",
"exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.declared=function(a){for(var l=[],k=1;k<arguments.length;k++)l[k-1]=arguments[k];k=function(){return this||{}};k.__bases__=[a].concat(l);return k}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),function(r,n,a,l,k,p){Object.defineProperty(n,"__esModule",{value:!0});k.getLogger("esri.core.accessorSupport.decorators.property");
n.property=function(m){void 0===m&&(m={});return function(e,f){var g=e.constructor.prototype;if(g!==Function.prototype){(e=Object.getOwnPropertyDescriptor(e,f))&&(e.get||e.set)?(m=l.clone(m),e.set&&(m.set=e.set),e.get&&(m.get=e.get)):e&&e.hasOwnProperty("value")&&(m=l.clone(m),m.value=e.value);f=p.getPropertyMetadata(g,f);for(var d in m)g=m[d],Array.isArray(g)?f[d]=(f[d]||[]).concat(g):f[d]=g}}};n.propertyJSONMeta=function(m,e,f){m=p.getPropertyMetadata(m.constructor.prototype,f);m.json||(m.json=
{});m=m.json;void 0!==e&&(m.origins||(m.origins={}),m.origins[e]||(m.origins[e]={}),m=m.origins[e]);return m}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(r,n,a,l){Object.defineProperty(n,"__esModule",{value:!0});n.reader=function(k,p,m){if(void 0===p||Array.isArray(p)){var e=k;m=p;var f=[void 0]}else e=p,f=Array.isArray(k)?k:[k];return function(g,d,q){var t=g.constructor.prototype;f.forEach(function(w){w=
l.propertyJSONMeta(g,w,e);w.read&&"object"!==typeof w.read&&(w.read={});a.setDeepValue("read.reader",t[d],w);m&&(w.read.source=(w.read.source||[]).concat(m))})}}})},"esri/layers/vectorTiles/core/object":function(){define(["require","exports"],function(r,n){function a(l,k,p){for(var m=0;m<l.length;m++){var e=l[m];if(!(e in p))if(k)p[e]={};else return;p=p[e]}return p}Object.defineProperty(n,"__esModule",{value:!0});n.getDeepValue=function(l,k){return a(l.split("."),!1,k)};n.setDeepValue=function(l,
k,p){var m=l.split(".");l=m.pop();(p=a(m,!0,p))&&l&&(p[l]=k)}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.shared=function(a){return function(l,k){l[k]=a}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(r,n,a,l){function k(d,q){d.read&&("function"===typeof d.read?q.push(d.read):
"object"===typeof d.read&&d.read.reader&&q.push(d.read.reader))}function p(d,q){d.write&&("function"===typeof d.write?q.push(d.write):"object"===typeof d.write&&d.write.writer&&q.push(d.write.writer))}function m(d){var q=[];d=l.getPropertiesMetadata(d.prototype);if(!d)return q;for(var t in d){var w=d[t];w.cast&&q.push(w.cast);w.copy&&q.push(w.copy);if(w=w.json)if(k(w,q),p(w,q),w=w.origins)for(var x in w){var z=w[x];k(z,q);p(z,q)}}return q}function e(d){var q={values:{},descriptors:{}},t=["__bases__"],
w=l.getPropertiesMetadata(d.prototype),x=m(d);Object.getOwnPropertyNames(d.prototype).filter(function(z){return-1!==t.indexOf(z)||w&&w.hasOwnProperty(z)||!g(Object.getOwnPropertyDescriptor(d.prototype,z))&&-1!==x.indexOf(d.prototype[z])?!1:!0}).forEach(function(z){var A=Object.getOwnPropertyDescriptor(d.prototype,z);g(A)?q.descriptors[z]=A:q.values[z]=d.prototype[z]});return q}function f(d){var q=Object.getOwnPropertyNames(d),t=Object.getPrototypeOf(d.prototype).constructor,w=Object.getOwnPropertyNames(Function);
w.push("__bases__");var x=Object.getOwnPropertyNames(t),z={values:{},descriptors:{}};q.filter(function(A){return-1!==w.indexOf(A)?!1:-1===x.indexOf(A)||t[A]!==d[A]?!0:!1}).forEach(function(A){var B=Object.getOwnPropertyDescriptor(d,A);g(B)?z.descriptors[A]=B:z.values[A]=d[A]});return z}function g(d){return d&&!(!d.get&&!d.set)}Object.defineProperty(n,"__esModule",{value:!0});n.subclass=function(d){return function(q){var t=e(q),w=f(q);null!=d&&(t.values.declaredClass=d);q=a(q.__bases__,t.values);Object.defineProperties(q.prototype,
t.descriptors);for(var x in w.values)q[x]=w.values[x];Object.defineProperties(q,w.descriptors);return q}}})},"esri/layers/vectorTiles/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(r,n,a){function l(e,f){e&&!Array.isArray(e)&&"function"!==typeof e&&(f=e,e=null);e=e||[];f=f||{};return k([this].concat(e),f)}function k(e,f){e&&!Array.isArray(e)&&"function"!==typeof e&&(f=e,e=null);"function"===typeof e?e=[e]:e||(e=[]);f=f||{};var g;var d=0;for(g=p.length;d<g;d++)p[d](e,
f);e=a(e,f);e.createSubclass=l;d=0;for(g=m.length;d<g;d++)m[d](e);return e}var p=[],m=[];(function(e){e.hasMixin=function(f,g){f=Array.isArray(f)?f.reduce(function(q,t){return t._meta?q.concat(t._meta.bases):q},[]):f._meta?f._meta.bases:f;if(!f)return!1;if("string"===typeof g)for(var d=f.length-1;0<=d;d--)if(f[d].prototype.declaredClass===g)return!0;return-1!==f.indexOf(g)};e.safeMixin=function(f,g){return a.safeMixin(f,g)};e.before=function(f){p.push(f)};e.after=function(f){m.push(f)}})(k||(k={}));
return k})},"esri/layers/vectorTiles/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(r,n,a,l){Object.defineProperty(n,"__esModule",{value:!0});n.writer=function(k,p,m){if(void 0===p){var e=k;var f=[void 0]}else"string"!==typeof p?(e=k,f=[void 0],m=p):(e=p,f=Array.isArray(k)?k:[k]);return function(g,d,q){var t=g.constructor.prototype;f.forEach(function(w){w=l.propertyJSONMeta(g,w,e);w.write&&"object"!==typeof w.write&&(w.write={});
m&&a.setDeepValue("write.target",m,w);a.setDeepValue("write.writer",t[d],w)})}}})},"esri/layers/vectorTiles/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),function(r,n,a,l,k,p,m){return function(e){function f(){var g=e.call(this)||this;g.type=null;g.extent=null;g.hasM=!1;g.hasZ=!1;g.spatialReference=m.WGS84;return g}a(f,e);Object.defineProperty(f.prototype,
"cache",{get:function(){return{}},enumerable:!0,configurable:!0});f.prototype.clone=function(){return null};f.prototype.clearCache=function(){this.notifyChange("cache")};f.prototype.getCacheValue=function(g){return this.cache[g]};f.prototype.setCacheValue=function(g,d){this.cache[g]=d};l([p.property()],f.prototype,"type",void 0);l([p.property({readOnly:!0,dependsOn:["spatialReference"]})],f.prototype,"cache",null);l([p.property({readOnly:!0,dependsOn:["spatialReference"]})],f.prototype,"extent",void 0);
l([p.property({type:Boolean,json:{write:{overridePolicy:function(g){return{enabled:g}}}}})],f.prototype,"hasM",void 0);l([p.property({type:Boolean,json:{write:{overridePolicy:function(g){return{enabled:g}}}}})],f.prototype,"hasZ",void 0);l([p.property({type:m,json:{write:!0}})],f.prototype,"spatialReference",void 0);return f=l([p.subclass("esri.geometry.Geometry")],f)}(p.declared(k))})},"esri/layers/vectorTiles/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),
function(r,n,a,l,k,p,m,e,f){function g(q,t){if(!q)return null;if(q.declaredClass)throw Error("JSON object is already hydrated");var w=new this;w.read(q,t);return w}var d=function(q){function t(){return null!==q&&q.apply(this,arguments)||this}a(t,q);t.prototype.read=function(w,x){e.default(this,w,x);return this};t.prototype.write=function(w,x){return f.default(this,w||{},x)};t.prototype.toJSON=function(w){return this.write(null,w)};t.fromJSON=function(w,x){return g.call(this,w,x)};return t=l([m.subclass("esri.core.JSONSupport")],
t)}(m.declared(k));d.prototype.toJSON.isDefaultToJSON=!0;p.after(function(q){p.hasMixin(q,d)&&(q.fromJSON=g.bind(q))});return d})},"esri/layers/vectorTiles/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(r,n,a,l,k,p){n=n.default;r.before(function(e,f){r.hasMixin(e,m)&&l.processPrototype(f)});r.after(function(e){r.hasMixin(e,m)&&(l.processClass(e),Object.defineProperties(e.prototype,
{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var m=r(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===m)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");
Object.defineProperty(this,"__accessor__",{value:new n(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var e=[],f=0;f<arguments.length;f++)e.push(arguments[f]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e)}},__accessor__:null,postscript:function(e){var f=this.__accessor__;e=f.ctorArgs||e;if(null!=this.getDefaults){var g=this.getDefaults(e||{});this.set(g)}f.initialize();e&&(this.set(e),f.ctorArgs=null);f.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(e){}else p.removeTarget(this),this.__accessor__.destroy()},get:function(e){return a.get(this,e)},hasOwnProperty:function(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(e,f){k.set(this,e,f);return this},watch:function(e,f,g){return p.watch(this,e,f,g)},_clearOverride:function(e){return this.__accessor__.clearOverride(e)},_override:function(e,f){return this.__accessor__.override(e,
f)},_isOverridden:function(e){return this.__accessor__.isOverridden(e)},notifyChange:function(e){this.__accessor__.propertyInvalidated(e)},_get:function(e){return this.__accessor__.internalGet(e)},_set:function(e,f){return this.__accessor__.internalSet(e,f)}});return m})},"esri/layers/vectorTiles/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(r,n,a,l,k,p,m){Object.defineProperty(n,"__esModule",{value:!0});
l.getLogger("esri.core.accessorSupport.Properties");r=function(){function e(f){this.host=f;this._origin=p.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new m.default;f=this.host.constructor.__accessorMetadata__;this.metadatas=f.properties;this.autoDestroy=f.autoDestroy}e.prototype.initialize=function(){this.lifecycle=1;k.instanceCreated(this.host,this.metadatas)};e.prototype.constructed=function(){this.lifecycle=2};
e.prototype.destroy=function(){this.destroyed=!0;var f=this.cursors;if(this.cursors)for(var g=0,d=Object.getOwnPropertyNames(f);g<d.length;g++){var q=d[g],t=f[q];if(t){for(;0<t.length;)t.pop().propertyDestroyed(this,q);f[q]=null}}if(this.autoDestroy)for(q in this.metadatas)(f=this.internalGet(q))&&f&&"function"===typeof f.destroy&&(f.destroy(),this.metadatas[q].nonNullable||this.internalSet(q,null))};Object.defineProperty(e.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,
configurable:!0});e.prototype.clearOverride=function(f){this.isOverridden(f)&&(this.overridden[f]=!1,this.propertyInvalidated(f))};e.prototype.get=function(f){var g=this.metadatas[f];if(this.store.has(f)&&!this.dirties[f])return this.store.get(f);var d=g.get;return d?(g=d.call(this.host),this.store.set(f,g,p.OriginId.COMPUTED),this.propertyCommitted(f),g):g.value};e.prototype.originOf=function(f){var g=this.store.originOf(f);return void 0===g&&(f=this.metadatas[f])&&f.hasOwnProperty("value")?"defaults":
p.idToName(g)};e.prototype.has=function(f){return this.metadatas[f]?this.store.has(f):!1};e.prototype.internalGet=function(f){if(this.metadatas[f]){var g=this.store;return g.has(f)?g.get(f):this.metadatas[f].value}};e.prototype.internalSet=function(f,g){this.metadatas[f]&&(this.propertyInvalidated(f),this.initialized?this.store.set(f,g,this._origin):this.store.set(f,g,p.OriginId.DEFAULTS),this.propertyCommitted(f))};e.prototype.isOverridden=function(f){return null!=this.overridden&&!0===this.overridden[f]};
e.prototype.keys=function(){return this.store.keys()};e.prototype.override=function(f,g){if(this.metadatas[f]){this.overridden||(this.overridden={});var d=this.metadatas[f];d.nonNullable&&null==g||((d=d.cast)&&(g=d.call(this.host,g)),this.overridden[f]=!0,this.internalSet(f,g))}};e.prototype.set=function(f,g){if(this.metadatas[f]){var d=this.metadatas[f];if(!d.nonNullable||null!=g){var q=d.set;(d=d.cast)&&(g=d.call(this.host,g));q?q.call(this.host,g):this.internalSet(f,g)}}};e.prototype.setDefaultOrigin=
function(f){this._origin=p.nameToId(f)};e.prototype.propertyInvalidated=function(f){var g=this.dirties,d=this.isOverridden(f),q=this.cursors&&this.cursors[f],t=this.metadatas[f].computes;if(q)for(var w=0;w<q.length;w++)q[w].propertyInvalidated(this,f);d||(g[f]=!0);if(t)for(f=0;f<t.length;f++)this.propertyInvalidated(t[f])};e.prototype.propertyCommitted=function(f){var g=this.cursors&&this.cursors[f];this.dirties[f]=!1;if(g)for(var d=0;d<g.length;d++)g[d].propertyCommitted(this,f)};e.prototype.addCursor=
function(f,g){this.cursors||(this.cursors={});var d=this.cursors[f];d||(this.cursors[f]=d=[]);d.push(g)};e.prototype.removeCursor=function(f,g){var d=this.cursors[f];this.cursors[f]&&(d.splice(d.indexOf(g),1),0===d.length&&(this.cursors[f]=null))};return e}();n.default=r})},"esri/layers/vectorTiles/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(r,n,a,l,k){Object.defineProperty(n,
"__esModule",{value:!0});var p=[a.default,l.default,k.default];n.processPrototypeMetadatas=function(m,e){for(var f=Object.getOwnPropertyNames(m),g=0;g<p.length;g++){var d=p[g];if(d.processPrototypePropertyMetadata)for(var q=0,t=f;q<t.length;q++){var w=t[q];d.processPrototypePropertyMetadata(w,m[w],m,e)}}};n.processClassMetadatas=function(m,e){for(var f=Object.getOwnPropertyNames(m),g=0;g<p.length;g++){var d=p[g];if(d.processClassPropertyMetadata)for(var q=0,t=f;q<t.length;q++){var w=t[q];d.processClassPropertyMetadata(w,
m[w],m,e)}}};n.instanceCreated=function(m,e){for(var f=Object.getOwnPropertyNames(e),g=0;g<p.length;g++){var d=p[g];d.instanceCreated&&d.instanceCreated(m,e,f)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(r,n,a,l,k,p,m){function e(f,g,d){var q=p.getProperties(f);return m.wire(f,d.aliasOf,function(){q.propertyInvalidated(g)})}Object.defineProperty(n,"__esModule",{value:!0});
n.AliasedPropertyExtension={processClassPropertyMetadata:function(f,g,d,q){var t=g.aliasOf;if(t&&(f=t.split(".")[0],null!=d[f]&&!g.set&&!g.get)){var w;g.get=function(){var x=l.default(this,t);if("function"===typeof x){w||(w=t.split(".").slice(0,-1).join("."));var z=l.default(this,w);z&&(x=x.bind(z))}return x};g.readOnly||(g.set=function(x){return k.default(this,t,x)})}},instanceCreated:function(f,g,d){for(var q=0;q<d.length;q++){var t=d[q],w=g[t];w.aliasOf&&e(f,t,w)}}};n.default=n.AliasedPropertyExtension})},
"esri/layers/vectorTiles/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(r,n,a){function l(e,f,g){if(null!=g.getItemAt||Array.isArray(g)){var d=parseInt(e,10);if(!isNaN(d))return Array.isArray(g)?g[d]:g.getItemAt(d)}d=a.getProperties(g);return f?a.isPropertyDeclared(d,e)?d.get(e):g[e]:a.isPropertyDeclared(d,e)?d.internalGet(e):g[e]}function k(e,f,g,d){if(null==e)return e;if((e=l(f[d],g,e))||!(d<f.length-1))return d===f.length-1?e:k(e,f,g,d+1)}function p(e,f,g,
d){void 0===g&&(g=!1);void 0===d&&(d=0);return"string"===typeof f&&-1===f.indexOf(".")?l(f,g,e):k(e,a.pathToArray(f),g,d)}function m(e,f){return p(e,f,!0)}Object.defineProperty(n,"__esModule",{value:!0});n.valueOf=p;n.get=m;n.exists=function(e,f){return void 0!==p(f,e,!0)};n.default=m})},"esri/layers/vectorTiles/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(r,n,a){function l(e,f){return f?Object.keys(f).reduce(function(g,d){if("value"===d)return g[d]=f[d],
g;if(void 0===g[d])return g[d]=a.clone(f[d]),g;var q=g[d],t=f[d];if(q===t)return g;if(Array.isArray(t)||Array.isArray(g))q=q?Array.isArray(q)?g[d]=q.concat():g[d]=[q]:g[d]=[],t&&(Array.isArray(t)||(t=[t]),t.forEach(function(w){-1===q.indexOf(w)&&q.push(w)}));else if(t&&"object"===typeof t)g[d]=l(q,t);else if(!g.hasOwnProperty(d)||f.hasOwnProperty(d))g[d]=t;return g},e||{}):e}function k(e){return Array.isArray(e)?e:e.split(".")}function p(e){if(Array.isArray(e)||-1<e.indexOf(",")){e=Array.isArray(e)?
e:e.split(",");for(var f=0;f<e.length;f++)e[f]=e[f].trim();return 1===e.length?e[0]:e}return e.trim()}function m(e){var f=!1;return function(){f||(f=!0,e())}}Object.defineProperty(n,"__esModule",{value:!0});n.getProperties=function(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null};n.isPropertyDeclared=function(e,f){return e&&e.metadatas&&null!=e.metadatas[f]};n.merge=l;n.pathToStringOrArray=function(e){return e?"string"===typeof e&&-1===e.indexOf(".")?e:k(e):e};n.pathToArray=
k;n.splitPath=p;n.parse=function(e,f,g,d){f=p(f);if(Array.isArray(f)){var q=f.map(function(t){return d(e,t.trim(),g)});return{remove:m(function(){return q.forEach(function(t){return t.remove()})})}}return d(e,f.trim(),g)};n.once=m})},"esri/layers/vectorTiles/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(r,n,a,l,k){function p(m,e,f){if(m&&e)if("object"===typeof e){f=0;for(var g=Object.getOwnPropertyNames(e);f<g.length;f++){var d=g[f];p(m,
d,e[d])}}else"_"!==e[0]&&(-1!==e.indexOf(".")?(e=e.split("."),d=e.splice(e.length-1,1)[0],p(k.default(m,e),d,f)):m[e]=f)}Object.defineProperty(n,"__esModule",{value:!0});l.getLogger("esri.core.accessorSupport.set");n.set=p;n.default=p})},"esri/layers/vectorTiles/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(r,n,a){function l(g,d,q){d=a.splitPath(d);if(Array.isArray(d)){for(var t=[],w=0;w<d.length;w++)t.push((new k(d[w],q)).install(g));return new e(t)}g=(new k(d,
q)).install(g);return new f(g)}Object.defineProperty(n,"__esModule",{value:!0});var k=function(){function g(d,q){this.path=d;this.callback=q;this.chain=null;this.path=d;-1<d.indexOf(".")&&(this.chain=a.pathToArray(d));this.callback=q;return this}g.prototype.install=function(d){d=this.chain?new m(this,d):new p(this,d);return d};g.prototype.notify=function(d){this.callback(d,this.path)};return g}(),p=function(){function g(d,q){this.binding=d;this.target=q;a.getProperties(q).addCursor(this.binding.path,
this)}g.prototype.destroy=function(){this.target&&(a.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};g.prototype.propertyDestroyed=function(d,q){a.getProperties(this.target).removeCursor(q,this)};g.prototype.propertyInvalidated=function(d,q){this.binding&&this.binding.notify(this.target)};g.prototype.propertyCommitted=function(d,q){this.binding&&this.binding.notify(this.target)};return g}(),m=function(){function g(d,q){this.binding=d;this.target=q;this.stack=
[];this.properties=a.getProperties(q);this.stack.push({properties:this.properties,propertyName:d.chain[0]});this.properties.addCursor(d.chain[0],this);this.moveForward();return this}g.prototype.destroy=function(){for(;;){var d=this.stack.pop();if(null==d)break;d.properties.removeCursor(d.propertyName,this)}this.target=this.binding=null};g.prototype.propertyDestroyed=function(d,q){this.moveBackward(d,q)};g.prototype.propertyInvalidated=function(d,q){this.binding&&this.binding.notify(this.target)};
g.prototype.propertyCommitted=function(d,q){this.binding&&(this.moveBackward(d,q),this.moveForward(),this.binding.notify(this.target))};g.prototype.moveBackward=function(d,q){for(var t=this.stack,w=t[t.length-1];w.properties!==d&&w.propertyName!==q;)w.properties.removeCursor(w.propertyName,this),t.pop(),w=t[t.length-1]};g.prototype.moveForward=function(){var d=this.stack,q=d[d.length-1];q=q.properties.internalGet(q.propertyName);(q=a.getProperties(q))&&d.length<this.binding.chain.length&&(d=this.binding.chain[d.length],
this.stack.push({properties:q,propertyName:d}),q.addCursor(d,this),this.moveForward())};return g}(),e=function(){function g(d){this.cursors=d}g.prototype.remove=function(){for(var d=this.cursors;0<d.length;)d.pop().destroy();this.cursors=null};return g}(),f=function(){function g(d){this.cursor=d}g.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return g}();n.create=function(g,d){g=a.splitPath(g);if(Array.isArray(g)){for(var q=[],t=0;t<g.length;t++)q.push(new k(g[t],d));return function(x){for(var z=
[],A=0;A<q.length;A++)z[A]=q[A].install(x);return new e(z)}}var w=new k(g,d);return function(x){return new f(w.install(x))}};n.wire=l;n.default=l})},"esri/layers/vectorTiles/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(r,n,a,l,k,p){Object.defineProperty(n,"__esModule",{value:!0});l.getLogger("esri.core.accessorSupport.extensions.computedProperty");n.ComputedPropertyExtension={processClassPropertyMetadata:function(m,
e,f,g){e.dependsOn&&(f=void 0,f=e.dependsOn.slice())&&(e.wire=p.create(f,function(d){return k.getProperties(d).propertyInvalidated(m)}))},instanceCreated:function(m,e,f){for(var g=0;g<f.length;g++){var d=e[f[g]];d.wire&&d.wire(m)}}};n.default=n.ComputedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(r,n,a,l,k,p){function m(e,f,g){var d=e&&e.json;e&&e.json&&e.json.origins&&g&&(e=e.json.origins[g.origin])&&f in e&&(d=e);return d}Object.defineProperty(n,"__esModule",{value:!0});n.originSpecificReadPropertyDefinition=function(e,f){return m(e,"read",f)};n.originSpecificWritePropertyDefinition=function(e,f){return m(e,"write",f)};n.SerializablePropertyExtension={processPrototypePropertyMetadata:function(e,f,g,d){if(k.process(f)){a.process(f);g=f.type;for(d=0;Array.isArray(g);)g=g[0],d++;if(f.json.origins)for(var q in f.json.origins){var t=
f.json.origins[q];l.create(g,d,e,t);p.create(g,d,e,t)}l.create(g,d,e,f.json);p.create(g,d,e,f.json)}}};n.default=n.SerializablePropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.process=function(a){if(a.json&&a.json.origins){var l=a.json.origins,k={"web-document":["web-scene","web-map"]};a=function(m){if(l[m]){var e=l[m];k[m].forEach(function(f){l[f]=
e});delete l[m]}};for(var p in k)a(p)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(r,n,a,l){function k(q,t,w,x){if(1<t)return e(q,t);if(1===t)return f(q);if(g(q)){var z=f(q.prototype.itemType.Type);return function(A,B,b){return(A=z(A,B,b))?new q(A):A}}return p(q)}function p(q){return q.prototype.read?function(t,w,x){return null==t?t:(new q).read(t,x)}:q.fromJSON}function m(q,t,
w,x){return 0!==x&&Array.isArray(t)?t.map(function(z){return m(q,z,w,x-1)}):q(t,null,w)}function e(q,t){q=p(q);var w=m.bind(null,q);return function(x,z,A){if(null==x)return x;x=w(x,A,t);z=t;for(A=x;0<z&&Array.isArray(A);)z--,A=A[0];if(void 0!==A)for(A=0;A<z;A++)x=[x];return x}}function f(q){var t=p(q);return function(w,x,z){return null==w?w:Array.isArray(w)?w.map(function(A){return t(A,null,z)}):[t(w,null,z)]}}function g(q){return l.isCollection(q)?(q=q.prototype.itemType)&&q.Type&&"function"===typeof q.Type?
d(q.Type):!1:!1}function d(q){return!!q&&(!!q.prototype.read||!!q.fromJSON||g(q))}Object.defineProperty(n,"__esModule",{value:!0});n.create=function(q,t,w,x){(!x.read||!x.read.reader&&!1!==x.read.enabled)&&d(q)&&a.setDeepValue("read.reader",k(q,t,w,x),x)}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&
0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(r,n){function a(k){"boolean"===typeof k.read?k.read={enabled:k.read}:"function"===typeof k.read?k.read={enabled:!0,reader:k.read}:k.read&&"object"===typeof k.read&&void 0===k.read.enabled&&(k.read.enabled=!0)}function l(k){"boolean"===typeof k.write?k.write={enabled:k.write}:"function"===typeof k.write?
k.write={enabled:!0,writer:k.write}:k.write&&"object"===typeof k.write&&void 0===k.write.enabled&&(k.write.enabled=!0)}Object.defineProperty(n,"__esModule",{value:!0});n.process=function(k){k.json||(k.json={});a(k.json);l(k.json);if(k.json.origins)for(var p in k.json.origins)a(k.json.origins[p]),l(k.json.origins[p]);return!0}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(r,n,a,l){function k(g,
d,q,t){a.setDeepValue(q,p(g,t),d)}function p(g,d){return g=g&&"function"===typeof g.write?g.write({},d):g&&"function"===typeof g.toJSON?g.toJSON():"number"===typeof g?-Infinity===g?-Number.MAX_VALUE:Infinity===g?Number.MAX_VALUE:isNaN(g)?null:g:g}function m(g,d,q,t){null===g?g=null:g&&"function"===typeof g.map?(g=g.map(function(w){return p(w,t)}),"function"===typeof g.toArray&&(g=g.toArray())):g=[p(g,t)];a.setDeepValue(q,g,d)}function e(g,d,q){return 0!==q&&Array.isArray(g)?g.map(function(t){return e(t,
d,q-1)}):p(g,d)}function f(g){return function(d,q,t,w){if(null===d)d=null;else{d=e(d,w,g);w=g;for(var x=d;0<w&&Array.isArray(x);)w--,x=x[0];if(void 0!==x)for(x=0;x<w;x++)d=[d]}a.setDeepValue(t,d,q)}}Object.defineProperty(n,"__esModule",{value:!0});n.create=function(g,d,q,t){t.write&&!t.write.writer&&!1!==t.write.enabled&&(1===d||l.isCollection(g)?t.write.writer=m:t.write.writer=1<d?f(d):k)}})},"esri/layers/vectorTiles/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(r,
n){function a(p){switch(p){case "defaults":return k.DEFAULTS;case "service":return k.SERVICE;case "portal-item":return k.PORTAL_ITEM;case "web-scene":return k.WEB_SCENE;case "web-map":return k.WEB_MAP;case "user":return k.USER}}function l(p){switch(p){case k.DEFAULTS:return"defaults";case k.SERVICE:return"service";case k.PORTAL_ITEM:return"portal-item";case k.WEB_SCENE:return"web-scene";case k.WEB_MAP:return"web-map";case k.USER:return"user"}}Object.defineProperty(n,"__esModule",{value:!0});var k;
(function(p){p[p.DEFAULTS=0]="DEFAULTS";p[p.COMPUTED=1]="COMPUTED";p[p.SERVICE=2]="SERVICE";p[p.PORTAL_ITEM=3]="PORTAL_ITEM";p[p.WEB_SCENE=4]="WEB_SCENE";p[p.WEB_MAP=5]="WEB_MAP";p[p.USER=6]="USER";p[p.NUM=7]="NUM"})(k=n.OriginId||(n.OriginId={}));n.nameToId=a;n.idToName=l;n.readableNameToId=function(p){return a(p)};n.idToReadableName=function(p){return l(p)};n.writableNameToId=function(p){return a(p)};n.idToWritableName=function(p){return l(p)}})},"esri/layers/vectorTiles/core/accessorSupport/Store":function(){define(["require",
"exports","./PropertyOrigin"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});r=function(){function l(){this._values={}}l.prototype.get=function(k){return this._values[k]};l.prototype.originOf=function(k){return a.OriginId.USER};l.prototype.keys=function(){return Object.keys(this._values)};l.prototype.set=function(k,p){this._values[k]=p};l.prototype.clear=function(k){delete this._values[k]};l.prototype.has=function(k){return k in this._values};return l}();n.default=r})},"esri/layers/vectorTiles/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(r,n,a,l,k,p,m,e){Object.defineProperty(n,"__esModule",{value:!0});var f=Object.prototype.hasOwnProperty,g=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,d={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},q=/^_(set|get)([a-zA-Z0-9]+)Attr$/;n.processPrototype=function(t){for(var w=t.declaredClass,x=t.properties||{},z=0,A=Object.getOwnPropertyNames(x);z<A.length;z++){var B=A[z],b=x[B],h=typeof b;null==b?p.setPropertyMetadata(t,B,{value:b}):
Array.isArray(b)?p.setPropertyMetadata(t,B,{type:[b[0]],value:null}):"object"===h?m.getProperties(b)||b instanceof Date?p.setPropertyMetadata(t,B,{type:b.constructor,value:b}):p.setPropertyMetadata(t,B,b):"boolean"===h?p.setPropertyMetadata(t,B,{type:Boolean,value:b}):"string"===h?p.setPropertyMetadata(t,B,{type:String,value:b}):"number"===h?p.setPropertyMetadata(t,B,{type:Number,value:b}):"function"===h&&p.setPropertyMetadata(t,B,{type:b,value:null})}z=0;for(A=Object.getOwnPropertyNames(t);z<A.length;z++){h=
A[z];b=t[h];x=B=void 0;var c=g.exec(h);if(c)B=c[1],x=d[c[2]];else if(c=q.exec(h))B=c[2][0].toLowerCase()+c[2].substr(1),x=c[1].toLowerCase();B&&x&&(B=p.getPropertyMetadata(t,B),a.setDeepValue(x,b,B))}z=0;for(A=Object.getOwnPropertyNames(p.getPropertiesMetadata(t));z<A.length;z++)if(B=A[z],b=p.getPropertyMetadata(t,B),x=b.type,h=b.types,void 0===b.value&&f.call(t,B)&&(b.value=t[B]),!b.cast&&x){B=b;b=0;for(h=x;Array.isArray(h);)h=h[0],b++;x=1===b?l.ensureArray(h):1<b?l.ensureNArray(h,b):l.ensureType(x);
B.cast=x}else!b.cast&&h&&(Array.isArray(h)?b.cast=l.ensureArrayTyped(l.ensureOneOfType(h[0])):b.cast=l.ensureOneOfType(h));k.processPrototypeMetadatas(p.getPropertiesMetadata(t),w);return p.getPropertiesMetadata(t)};n.processClass=function(t){for(var w=t.prototype,x=w.declaredClass,z=t._meta.bases,A={},B=z.length-1;0<=B;B--)m.merge(A,p.getMetadata(z[B].prototype));var b=A.properties;k.processClassMetadatas(b,x);Object.defineProperty(t,"__accessorMetadata__",{value:{properties:b,autoDestroy:!!A.autoDestroy}});
var h={};x=function(c){var v=b[c];h[c]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(c):v.value},set:function(u){var y=this.__accessor__;if(!y)Object.defineProperty(this,c,{enumerable:!0,configurable:!0,writable:!0,value:u});else if(!Object.isFrozen(this)){if(y.initialized&&v.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+c+"' of "+this.declaredClass);if(2===y.lifecycle&&v.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
c+"' of "+this.declaredClass);y.set(c,u)}}}};z=0;for(B=Object.getOwnPropertyNames(b);z<B.length;z++)x(B[z]);Object.defineProperties(t.prototype,h);if(A.parameters)for(t=0,x=Object.getOwnPropertyNames(A.parameters);t<x.length;t++)z=x[t],B=Object.getOwnPropertyDescriptor(w,z)||{value:w[z]},(B=e.autocastMethod(w,z,B))&&Object.defineProperty(w,z,B);return A}})},"esri/layers/vectorTiles/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),
function(r,n,a,l,k,p,m,e,f){function g(v){B.has(v)?b.splice(b.indexOf(v),1):B.add(v);b.push(v);h||(h=p.schedule(q))}function d(v){if(!v.removed){var u=v.callback,y=v.path,C=v.oldValue,D=v.target,E=m.valueOf(D,v.propertyPath,!0);l.equals(C,E)||(v.oldValue=E,u.call(D,E,C,y,D))}}function q(){if(h){h=null;var v=b;b=A.acquire();B.clear();for(var u=A.acquire(),y=0;y<v.length;y++){var C=v[y];d(C);C.removed&&u.push(C)}for(y=0;y<b.length;y++)C=b[y],C.removed&&(u.push(C),B.delete(C),b.splice(y,1),--y);for(y=
0;y<u.length;y++)z.pool.release(u[y]);A.release(v);A.release(u);c.forEach(function(D){return D()})}}function t(v,u,y){var C=e.parse(v,u,y,function(D,E,F){var G=m.valueOf(D,E,!0),J,R=f.wire(D,E,function(O,P){O.__accessor__.destroyed?C.remove():(J||(J=z.pool.acquire(O,P,G,F),G=null),g(J))});return{remove:e.once(function(){R.remove();J&&(J.removed=!0,g(J),J=null);C=R=G=null})}});return C}function w(v,u,y){var C=e.parse(v,u,y,function(D,E,F){var G=m.valueOf(D,E,!0),J=!1;return f.wire(D,E,function(R,O){if(R.__accessor__.destroyed)C.remove();
else if(!J){J=!0;var P=m.valueOf(R,O,!0);l.equals(G,P)||F.call(R,P,G,O,R);G=m.valueOf(R,O,!0);J=!1}})});return C}function x(v,u,y,C){void 0===C&&(C=!1);return!v.__accessor__||v.__accessor__.destroyed?{remove:function(){}}:C?w(v,u,y):t(v,u,y)}Object.defineProperty(n,"__esModule",{value:!0});var z=function(){function v(u,y,C,D){this.target=u;this.path=y;this.oldValue=C;this.callback=D;this.removed=!1;this.propertyPath=e.pathToStringOrArray(y)}v.prototype.release=function(){this.target=this.path=this.propertyPath=
this.callback=this.oldValue=null;this.removed=!0};v.pool=new k(v,!0);return v}(),A=new a,B=new Set,b=A.acquire(),h;n.dispatchTarget=function(v){for(var u=A.copy(b),y=0;y<u.length;y++){var C=u[y];C.target===v&&(d(C),B.delete(C),b.splice(b.indexOf(C),1))}};n.removeTarget=function(v){for(var u=0;u<b.length;u++){var y=b[u];y.target===v&&(y.removed=!0)}};n.dispatch=q;var c=new Set;n.afterDispatch=function(v){c.add(v);return{remove:function(){c.delete(v)}}};n.watch=x;n.isValueInUse=function(v){return b.some(function(u){return u.oldValue===
v})};n.default=x})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(r,n,a){function l(m){m.length=0}var k=Array.prototype.splice;r=function(){function m(e,f){void 0===e&&(e=50);void 0===f&&(f=50);this._pool=new a(Array,!1,l,f,e)}m.prototype.acquire=function(){return this._pool.acquire()};m.prototype.copy=function(e){var f=this.acquire();e.unshift(0,0);k.apply(f,e);e.splice(0,2);return f};m.prototype.release=function(e){this._pool.release(e)};
m.acquire=function(){return p.acquire()};m.copy=function(e){return p.copy(e)};m.release=function(e){return p.release(e)};return m}();var p=new r(100);return r})},"esri/layers/vectorTiles/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(r,n,a,l,k){function p(u){void 0===u&&(u=n.now());n.debug.rafId=null;0<h.length&&(n.debug.rafId=m());if(0<t){var y=u-t;z=Math.min(y,z);if(y<w)return}n.debug.executeFrameTasks(u)}function m(){return n.debug.requestNextFrame?
n.debug.requestNextFrame(g):g()}function e(){for(var u=0;u<h.length;){var y=h[u];u++;if(y.removed){h.splice(u-1,1);for(var C=0;C<B.length;C++){var D=B[C];if(y.phases[D]){D=c[D];var E=D.indexOf(y);-1!==E&&D.splice(E,1)}}}}}function f(){for(;b.length;){var u=b.shift();u.isActive&&(u.isActive=!1,u.callback())}n.debug.willDispatch=!1}function g(){return k(p)}Object.defineProperty(n,"__esModule",{value:!0});n.now=l;var d=function(){return function(u){this.phases=u;this.paused=!1;this.pausedAt=0;this.epoch=
-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),q=function(){function u(y){this.callback=y;this.isActive=!0}u.prototype.remove=function(){this.isActive=!1};return u}(),t=-1,w=0,x=0,z=Number.POSITIVE_INFINITY,A={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},B=["prepare","preRender","render","postRender","update"],b=[],h=[],c={prepare:[],preRender:[],render:[],postRender:[],update:[]},v=function(){function u(y){this._task=y}u.prototype.remove=function(){this._task.removed=!0};
u.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=n.now())};u.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=n.now()-this._task.pausedAt))};return u}();n.FrameTaskHandle=v;n.debug={frameTasks:h,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(u){void 0===u&&(u=!1);for(var y=0;y<h.length;y++)h[y].removed=!0;u&&e()},dispatch:f,executeFrameTasks:function(u){void 0===u&&(u=
n.now());0>t&&(t=u);var y=u-t;t=u;for(var C=0;C<h.length;C++){var D=h[C];-1!==D.epoch&&(D.dt=y)}for(C=0;C<B.length;C++){y=B[C];for(var E=c[y],F=0;F<E.length;F++)D=E[F],D.paused||D.removed||(0===C&&D.ticks++,-1===D.epoch&&(D.epoch=u),A.time=u,A.deltaTime=D.dt,A.elapsedFrameTime=n.now()-u,A.frameDuration=0<x?x:z,A.spendInTask=u-D.epoch,D.phases[y].call(D,A))}e()}};n.schedule=function(u){u=new q(u);b.push(u);n.debug.willDispatch||(n.debug.willDispatch=!0,a(f));return u};n.addFrameTask=function(u){var y=
new d(u);h.push(y);for(var C=0,D=B;C<D.length;C++){var E=D[C];u[E]&&c[E].push(y)}n.debug.rafId||(t=-1,n.debug.rafId=m());return new v(y)};n.setFrameRate=function(u){if(0>=u)x=w=0;else{var y=1.05*z;u=Math.ceil(1E3/u/y);w=(u-1)*y;x=u*z}};n.requestNextFrame=m})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require","exports","./global"],function(r,n,a){function l(){if(a.postMessage&&!a.importScripts){var p=a.onmessage,m=!0;a.onmessage=function(){m=!1};a.postMessage("","*");a.onmessage=
p;return m}return!1}var k=a.MutationObserver||a.WebKitMutationObserver;return function(){if(a.process&&a.process.nextTick)var p=function(g){a.process.nextTick(g)};else if(a.Promise)p=function(g){a.Promise.resolve().then(g)};else if(k){var m=[],e=document.createElement("div");(new k(function(){for(;0<m.length;)m.shift()()})).observe(e,{attributes:!0});p=function(g){m.push(g);e.setAttribute("queueStatus","1")}}else if(l()){var f=[];a.addEventListener("message",function(g){if(g.source===a&&"esri-nexttick-message"===
g.data)for(g.stopPropagation();f.length;)f.shift()()},!0);p=function(g){f.push(g);a.postMessage("esri-nexttick-message","*")}}else p=a.setImmediate?function(g){return a.setImmediate(g)}:function(g){return a.setTimeout(g,0)};return p}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(r,n){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/layers/vectorTiles/core/now":function(){define(["require",
"exports","./global"],function(r,n,a){return function(){var l=a.performance||{};if(l.now)return function(){return l.now()};if(l.webkitNow)return function(){return l.webkitNow()};if(l.mozNow)return function(){return l.mozNow()};if(l.msNow)return function(){return l.msNow()};if(l.oNow)return function(){return l.oNow()};var k=l.timing&&l.timing.navigationStart?l.timing.navigationStart:Date.now();return function(){return Date.now()-k}}()})},"esri/layers/vectorTiles/core/requestAnimationFrame":function(){define(["require",
"exports","./global","./now"],function(r,n,a,l){var k=l();r=a.requestAnimationFrame;if(!r){n=["ms","moz","webkit","o"];for(var p=0;p<n.length&&!r;++p)r=a[n[p]+"RequestAnimationFrame"];r||(r=function(m){var e=l(),f=Math.max(0,16-(e-k)),g=a.setTimeout(function(){m(l())},f);k=e+f;return g})}return r})},"esri/layers/vectorTiles/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),function(r,n,a,l,k,p){function m(f,
g,d){void 0===d&&(d=e);for(var q=k.getProperties(f),t=q.metadatas,w={},x=0,z=Object.getOwnPropertyNames(g);x<z.length;x++){var A=w,B=t,b=z[x],h=g,c=d,v=p.originSpecificReadPropertyDefinition(B[b],c);v&&(!v.read||!1!==v.read.enabled&&!v.read.source)&&(A[b]=!0);for(var u=0,y=Object.getOwnPropertyNames(B);u<y.length;u++){var C=y[u];v=p.originSpecificReadPropertyDefinition(B[C],c);a:{var D=b;var E=h;if(v&&v.read&&!1!==v.read.enabled&&v.read.source)if(v=v.read.source,"string"===typeof v){if(v===D||-1<
v.indexOf(".")&&0===v.indexOf(D)&&l.exists(v,E)){D=!0;break a}}else for(var F=0;F<v.length;F++){var G=v[F];if(G===D||-1<G.indexOf(".")&&0===G.indexOf(D)&&l.exists(G,E)){D=!0;break a}}D=!1}D&&(A[C]=!0)}}q.setDefaultOrigin(d.origin);z=0;for(A=Object.getOwnPropertyNames(w);z<A.length;z++)x=A[z],b=(B=p.originSpecificReadPropertyDefinition(t[x],d).read)&&B.source,h=void 0,h=b&&"string"===typeof b?l.valueOf(g,b):g[x],B&&B.reader&&(h=B.reader.call(f,h,g,d)),void 0!==h&&q.set(x,h);g=0;for(t=Object.getOwnPropertyNames(t);g<
t.length;g++)x=t[g],w[x]||(z=f,A=q,B=d,b=(b=p.originSpecificReadPropertyDefinition(A.metadatas[x],B))&&b.read&&b.read.default,void 0!==b&&(z="function"===typeof b?b.call(z,x,B):b,void 0!==z&&A.set(x,z)));q.setDefaultOrigin("user")}Object.defineProperty(n,"__esModule",{value:!0});var e={origin:"service"};n.read=m;n.readLoadable=function(f,g,d,q){void 0===q&&(q=e);g=a({},q,{messages:[]});d(g);g.messages.forEach(function(t){"warning"!==t.type||f.loaded?q&&q.messages.push(t):f.loadWarnings.push(t)})};
n.default=m})},"esri/layers/vectorTiles/core/accessorSupport/write":function(){define("require exports ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(r,n,a,l,k,p,m){function e(d,q,t,w,x,z){if(!w||!w.write)return!1;var A=d.get(t);if(void 0===A)return!1;if(!x&&w.write.overridePolicy){var B=w.write.overridePolicy.call(d,A,t,z);void 0!==B&&(x=B)}x||(x=w.write);if(!x||!1===x.enabled)return!1;if(null===A){if(x.allowNull)return!0;x.isRequired&&((d=new a("web-document-write:property-required",
"Missing value for required property '"+t+"' on '"+d.declaredClass+"'",{propertyName:t,target:d}),z)&&z.messages?z.messages.push(d):d&&!z&&g.error(d.name,d.message));return!1}return!x.ignoreOrigin&&z&&z.origin&&q.store.originOf(t)<k.nameToId(z.origin)?!1:!0}function f(d,q,t){if(d&&"function"===typeof d.toJSON&&(!d.toJSON.isDefaultToJSON||!d.write))return p.merge(q,d.toJSON());var w=p.getProperties(d),x=w.metadatas,z;for(z in x){var A=m.originSpecificWritePropertyDefinition(x[z],t);if(e(d,w,z,A,null,
t)){var B=d.get(z),b={};A.write.writer.call(d,B,b,"string"===typeof A.write.target?A.write.target:z,t);A=b;0<Object.keys(A).length&&(q=p.merge(q,A),t&&t.writtenProperties&&t.writtenProperties.push({target:d,propName:z,oldOrigin:k.idToReadableName(w.store.originOf(z)),newOrigin:t.origin}))}}return q}Object.defineProperty(n,"__esModule",{value:!0});var g=l.getLogger("esri.core.accessorSupport.write");n.willPropertyWrite=function(d,q,t,w){var x=p.getProperties(d),z=m.originSpecificWritePropertyDefinition(x.metadatas[q],
w);return z?e(d,x,q,z,t,w):!1};n.write=f;n.disableWriteDefaultPolicy=function(d){return function(q){return{enabled:q!==d}}};n.default=f})},"esri/layers/vectorTiles/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),function(r,n,a,l,k,p,m,e){r=function(f){function g(q){q=f.call(this)||this;q.latestWkid=null;
q.wkid=null;q.wkt=null;return q}a(g,f);var d=g;g.fromJSON=function(q){if(!q)return null;if(q.wkid){if(102100===q.wkid)return d.WebMercator;if(4326===q.wkid)return d.WGS84}var t=new d;t.read(q);return t};g.prototype.normalizeCtorArgs=function(q){return q&&"object"===typeof q?q:(t={},t["string"===typeof q?"wkt":"wkid"]=q,t);var t};Object.defineProperty(g.prototype,"isWGS84",{get:function(){return e.isWGS84(this)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"isWebMercator",{get:function(){return e.isWebMercator(this)},
enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"isGeographic",{get:function(){return e.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"isWrappable",{get:function(){return e.isWrappable(this)},enumerable:!0,configurable:!0});g.prototype.writeWkt=function(q,t){this.wkid||(t.wkt=q)};g.prototype.clone=function(){if(this===d.WGS84)return d.WGS84;if(this===d.WebMercator)return d.WebMercator;var q=new d;null!=this.wkid?(q.wkid=this.wkid,null!=this.latestWkid&&
(q.latestWkid=this.latestWkid),null!=this.vcsWkid&&(q.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(q.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(q.wkt=this.wkt);return q};g.prototype.equals=function(q){return e.equals(this,q)};g.prototype.toJSON=function(q){return this.write(null,q)};g.GCS_NAD_1927=null;g.WGS84=null;g.WebMercator=null;l([m.property({dependsOn:["wkid"],readOnly:!0})],g.prototype,"isWGS84",null);l([m.property({dependsOn:["wkid"],readOnly:!0})],g.prototype,"isWebMercator",
null);l([m.property({dependsOn:["wkid","wkt"],readOnly:!0})],g.prototype,"isGeographic",null);l([m.property({dependsOn:["wkid"],readOnly:!0})],g.prototype,"isWrappable",null);l([m.property({type:Number,json:{write:!0}})],g.prototype,"latestWkid",void 0);l([m.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?!0:!1}}}}}}})],g.prototype,"wkid",void 0);l([m.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===
this.wkid?!0:!1}}}}}}})],g.prototype,"wkt",void 0);l([m.writer("wkt"),m.writer("web-scene","wkt")],g.prototype,"writeWkt",null);l([m.property({type:Number,json:{write:!0}})],g.prototype,"vcsWkid",void 0);l([m.property({type:Number,json:{write:!0}})],g.prototype,"latestVcsWkid",void 0);return g=d=l([m.subclass("esri.geometry.SpatialReference")],g)}(m.declared(k));r.prototype.toJSON.isDefaultToJSON=!0;r.GCS_NAD_1927=new r({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});
r.WGS84=new r(4326);r.WGS84.wkt=p.substitute({Central_Meridian:"0.0"},e.getInfo(r.WGS84).wkTemplate);r.WebMercator=new r({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(r.GCS_NAD_1927),Object.freeze(r.WGS84),Object.freeze(r.WebMercator));return r})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(r,n,a){function l(f){return f.wkid&&!0===k[f.wkid]}Object.defineProperty(n,"__esModule",{value:!0});var k=
{102113:!0,102100:!0,3857:!0,3785:!0},p={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};r=[-2.0037508342788905E7,2.0037508342788905E7];var m=[-2.0037508342787E7,2.0037508342787E7],e={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:r,origin:m,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:r,origin:m,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:r,origin:m,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:r,origin:m,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};n.equals=function(f,g){if(g){if(f===g)return!0;if(null!=f.wkid||null!=g.wkid)return f.wkid===g.wkid||l(f)&&l(g)||null!=g.latestWkid&&f.wkid===g.latestWkid||null!=f.latestWkid&&g.wkid===f.latestWkid;if(f.wkt&&g.wkt)return f.wkt.toUpperCase()===g.wkt.toUpperCase()}return!1};n.getInfo=function(f){return f.wkid?e[f.wkid]:null};n.isGeographic=function(f){return f.wkid?null==a[f.wkid]:f.wkt?!!/^\s*GEOGCS/i.test(f.wkt):!1};n.isWGS84=function(f){return 4326===
f.wkid};n.isWebMercator=l;n.isWrappable=function(f){return f.wkid&&!0===p[f.wkid]}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define(["esri/WKIDUnitConversion"],function(r){return r})},"esri/layers/vectorTiles/geometry/support/webMercatorUtils":function(){define(["require","exports","../SpatialReference","./spatialReferenceUtils"],function(r,n,a,l){function k(g,d,q,t,w){if("point"===g.type&&"point"===w.type)d=d(g.x,g.y,f,0,t),w.x=d[0],w.y=d[1];else if("extent"===g.type&&
"extent"===w.type){var x=d(g.xmin,g.ymin,f,0,t);w.xmin=x[0];w.ymin=x[1];d=d(g.xmax,g.ymax,f,0,t);w.xmax=d[0];w.ymax=d[1]}else if("polyline"===g.type&&"polyline"===w.type||"polygon"===g.type&&"polygon"===w.type){x="polyline"===g.type?g.paths:g.rings;var z=[],A=void 0;for(g=0;g<x.length;g++){var B=x[g];A=[];z.push(A);for(var b=0;b<B.length;b++)A.push(d(B[b][0],B[b][1],[0,0],0,t)),2<B[b].length&&A[b].push(B[b][2]),3<B[b].length&&A[b].push(B[b][3])}"polyline"===w.type?w.paths=z:w.rings=z}else if("multipoint"===
g.type&&"multipoint"===w.type){x=g.points;z=[];for(g=0;g<x.length;g++)z[g]=d(x[g][0],x[g][1],[0,0],0,t),2<x[g].length&&z[g].push(x[g][2]),3<x[g].length&&z[g].push(x[g][3]);w.points=z}else if("mesh"===g.type&&"mesh"===w.type&&(x=g.vertexAttributes&&g.vertexAttributes.position,z=w.vertexAttributes&&w.vertexAttributes.position,x))for(A=[0,0],g=0;g<x.length;g+=3)d(x[g],x[g+1],A,0,t),z[g]=A[0],z[g+1]=A[1];w.spatialReference=q;return w}function p(g,d){g=g&&(null!=g.wkid||null!=g.wkt?g:g.spatialReference);
d=d&&(null!=d.wkid||null!=d.wkt?d:d.spatialReference);return g&&d?l.equals(d,g)?!0:l.isWebMercator(d)&&l.isWGS84(g)||l.isWebMercator(g)&&l.isWGS84(d):!1}function m(g,d,q,t){void 0===q&&(q=[0,0]);void 0===t&&(t=0);89.99999<d?d=89.99999:-89.99999>d&&(d=-89.99999);d*=.017453292519943;q[t]=111319.49079327169*g;q[t+1]=3189068.5*Math.log((1+Math.sin(d))/(1-Math.sin(d)));return q}function e(g,d,q,t,w){void 0===q&&(q=[0,0]);void 0===t&&(t=0);void 0===w&&(w=!1);g=g/6378137*57.29577951308232;q[t]=w?g:g-360*
Math.floor((g+180)/360);q[t+1]=57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*d/6378137)));return q}Object.defineProperty(n,"__esModule",{value:!0});var f=[0,0];n.canProject=p;n.project=function(g,d){var q=g&&g.spatialReference;d=d&&(null!=d.wkid||null!=d.wkt?d:d.spatialReference);return p(q,d)?l.equals(q,d)?g.clone():l.isWebMercator(d)?k(g,m,a.WebMercator,!1,g.clone()):l.isWGS84(d)?k(g,e,a.WGS84,!1,g.clone()):null:null};n.lngLatToXY=m;n.xyToLngLat=e;n.geographicToWebMercator=function(g,
d,q){void 0===d&&(d=!1);void 0===q&&(q=g.clone());return k(g,m,a.WebMercator,d,q)};n.webMercatorToGeographic=function(g,d,q){void 0===d&&(d=!1);void 0===q&&(q=g.clone());return k(g,e,a.WGS84,d,q)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileData":function(){define("require exports ./MemoryRequirements ./TileBufferData ./TileDisplayData ./Utils ./WGLDisplayList ./WGLDisplayObject ./WGLDisplayRecord ./mesh/VertexBuffer ./mesh/factories/WGLMeshFactory ./util/Reader ./util/serializationUtils ./util/Writer".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w){var x=new a.default,z=new a.default;return function(){function A(){this.tileBufferData=this.tileDisplayData=null}A.prototype.reshuffle=function(){x.reset();var B=this._collectDisplayRecords(),b;for(b in B)for(var h=B[b],c=0,v=h;c<v.length;c++){var u=v[c];x.needMore(u.geometryType,u.meshData?u.meshData.vertexCount:u.vertexCount,u.meshData?u.meshData.indexData.length:u.indexCount)}c=B.length;v=new l;for(b=0;b<c;++b){v.geometries[b].indexBuffer=new Uint32Array(Math.round(1.15*
x.indicesFor(b)));u=[];for(var y in this.tileBufferData.geometries[b].vertexBuffer)u.push(this.tileBufferData.geometries[b].vertexBuffer[y].stride);u=A._computeVertexAlignment(u);h=Math.round(1.15*x.verticesFor(b));u=A._align(h,u);for(var C in this.tileBufferData.geometries[b].vertexBuffer)h=this.tileBufferData.geometries[b].vertexBuffer[C].stride,v.geometries[b].vertexBuffer[C]={stride:h,data:new Uint32Array(Math.round(u*h/4))}}z.reset();this.tileDisplayData.displayList=new m;for(b=0;b<c;++b){h=
B[b];y=0;for(C=h;y<C.length;y++){u=C[y];if(u.meshData)u.writeMeshDataToBuffers(z.verticesFor(b),v.geometries[b].vertexBuffer,z.indicesFor(b),v.geometries[b].indexBuffer),u.meshData=null;else{var D=this.tileBufferData.geometries[b].vertexBuffer,E=this.tileBufferData.geometries[b].indexBuffer,F=v.geometries[b].vertexBuffer,G=v.geometries[b].indexBuffer,J=z.verticesFor(b),R=z.indicesFor(b);p.copyMeshData(J,R,F,G,u,D,E);u.vertexFrom=J;u.indexFrom=R}z.needMore(b,u.vertexCount,u.indexCount)}this.tileDisplayData.displayList.addToList(h)}this.tileBufferData=
v};A.prototype.getStrides=function(){for(var B=[],b=0;b<this.tileBufferData.geometries.length;++b){var h=this.tileBufferData.geometries[b];B[b]={};for(var c in h.vertexBuffer)B[b][c]=h.vertexBuffer[c].stride}return B};A.prototype._guessSize=function(){for(var B=this.tileDisplayData.displayObjects,b=Math.min(B.length,4),h=0,c=0;c<b;c++)h=Math.max(h,B[c].displayRecords.length);return 2*(12*B.length+B.length*h*40)};A.prototype.serialize=function(){var B=this.tileBufferData.serialize(),b=this.tileBufferData.getBuffers(),
h=this.tileDisplayData.serialize(new w.default(Int32Array,this._guessSize())).buffer();b.push(h);return{result:{displayData:h,bufferData:B},transferList:b}};A.decode=function(B){var b=d.MaterialStore.deserialize(new q.default(B.materialStore)),h=t.deserializeList(new q.default(B.displayObjects),e,{store:b});b={};for(var c in B.vertexBuffersMap)b[c]=g.VertexBuffers.decode(B.vertexBuffersMap[c]);B=new A;c=new k;var v=new l;c.displayObjects=h;for(var u in b)h=b[u],v.geometries[u].indexBuffer=h.indexBuffer,
v.geometries[u].vertexBuffer=h.namedBuffers;B.tileDisplayData=c;B.tileBufferData=v;return B};A.bind=function(B,b){var h=new A;h.tileDisplayData=B;h.tileBufferData=b;return h};A.create=function(B,b){var h=new A;h.tileDisplayData=new k;h.tileDisplayData.displayObjects=B;for(var c=[0,0,0,0,0],v=[0,0,0,0,0],u=[[],[],[],[],[]],y=0;y<B.length;y++)for(var C=0,D=B[y].displayRecords;C<D.length;C++){var E=D[C];u[E.geometryType].push(E);c[E.geometryType]+=E.meshData.vertexCount;v[E.geometryType]+=E.meshData.indexData.length}B=
new l;b=[b.fill||{},b.line||{},b.icon||{},b.text||{},b.label||{}];for(y=0;5>y;y++){C=new Uint32Array(v[y]);D=void 0;E=b[y];var F=c[y],G={};for(D in E){var J={data:new Uint32Array(F*E[D]/4),stride:E[D]};G[D]=J}D=G;f.writeAllMeshDataToBuffers(u[y],D,C);B.geometries[y]={indexBuffer:C,vertexBuffer:D}}h.tileBufferData=B;return h};A._align=function(B,b){var h=B%b;return 0===h?B:B+(b-h)};A._computeVertexAlignment=function(B){for(var b=!1,h=!1,c=0;c<B.length;c++){var v=B[c];2===v%4?b=!0:0!==v%4&&(h=!0)}return h?
4:b?2:1};A.prototype._collectDisplayRecords=function(){for(var B=[[],[],[],[],[]],b=0,h=this.tileDisplayData.displayObjects;b<h.length;b++)for(var c=0,v=h[b].displayRecords;c<v.length;c++){var u=v[c];B[u.geometryType].push(u)}return B};return A}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MemoryRequirements":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});r=function(){function a(){this._byGeometryType=null}Object.defineProperty(a.prototype,
"satisfied",{get:function(){return!this._byGeometryType},enumerable:!0,configurable:!0});a.prototype.reset=function(){this._byGeometryType=null};a.prototype.verticesFor=function(l){return this._byGeometryType?this._byGeometryType[l].vertices:0};a.prototype.indicesFor=function(l){return this._byGeometryType?this._byGeometryType[l].indices:0};a.prototype.needMore=function(l,k,p){if(k||p)this._byGeometryType||(this._byGeometryType=[{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},
{vertices:0,indices:0},{vertices:0,indices:0}]),l=this._byGeometryType[l],l.vertices+=k,l.indices+=p};return a}();n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileBufferData":function(){define(["require","exports"],function(r,n){return function(){function a(){this.geometries=[{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}}]}a.deserialize=function(l){for(var k=
new a,p=0;5>p;++p){k.geometries[p].indexBuffer=new Uint32Array(l.geometries[p].indexBuffer);k.geometries[p].vertexBuffer={};for(var m in l.geometries[p].vertexBuffer)k.geometries[p].vertexBuffer[m]={data:new Uint32Array(l.geometries[p].vertexBuffer[m].data),stride:l.geometries[p].vertexBuffer[m].stride}}return k};a.prototype.serialize=function(){for(var l={geometries:[{indexBuffer:this.geometries[0].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[1].indexBuffer.buffer,vertexBuffer:{}},
{indexBuffer:this.geometries[2].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[3].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[4].indexBuffer.buffer,vertexBuffer:{}}]},k=0;5>k;++k)for(var p in this.geometries[k].vertexBuffer)l.geometries[k].vertexBuffer[p]={data:this.geometries[k].vertexBuffer[p].data.buffer,stride:this.geometries[k].vertexBuffer[p].stride};return l};a.prototype.getBuffers=function(){for(var l=[],k=0;5>k;++k){l.push(this.geometries[k].indexBuffer.buffer);
for(var p in this.geometries[k].vertexBuffer)l.push(this.geometries[k].vertexBuffer[p].data.buffer)}return l};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/TileDisplayData":function(){define("require exports ./WGLDisplayList ./WGLDisplayObject ./mesh/factories/WGLMeshFactory ./util/serializationUtils".split(" "),function(r,n,a,l,k,p){return function(){function m(){}Object.defineProperty(m.prototype,"displayObjectRegistry",{get:function(){if(!this._displayObjectRegistry){this._displayObjectRegistry=
new Map;for(var e=0,f=this.displayObjects;e<f.length;e++){var g=f[e];this._displayObjectRegistry.set(g.id,g)}}return this._displayObjectRegistry},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"displayList",{get:function(){if(!this._displayList){this._displayList=new a;for(var e=0,f=this.displayObjects;e<f.length;e++)for(var g=0,d=f[e].displayRecords;g<d.length;g++)this._displayList.addToList(d[g])}return this._displayList},set:function(e){this._displayList=e},enumerable:!0,configurable:!0});
m.prototype.serialize=function(e){this.materialStore.serialize(e);p.serializeList(e,this.displayObjects);return e};m.prototype._deserializeObjects=function(e){var f=e.readInt32();f=Array(f);for(var g=new a,d=new Map,q={store:this.materialStore},t=0;t<f.length;++t){var w=l.deserialize(e,q);f[t]=w;d.set(w.id,w);var x=0;for(w=w.displayRecords;x<w.length;x++)g.addToList(w[x])}this.displayObjects=f;this._displayList=g;this._displayObjectRegistry=d};m.deserialize=function(e){var f=new m;f.materialStore=
k.MaterialStore.deserialize(e);f._deserializeObjects(e);return f};return m}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayList":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/Logger ./enums ./MaterialInfo ./Utils ./util/serializationUtils".split(" "),function(r,n,a,l,k,p,m,e){var f=l.getLogger("esri.views.2d.engine.webgl.WGLDisplayList");r=function(){function w(){this.symbolLevels=[]}Object.defineProperty(w.prototype,"empty",{get:function(){return!this.symbolLevels||
0===this.symbolLevels.length},enumerable:!0,configurable:!0});w.prototype.addToList=function(x){var z=this;Array.isArray(x)?x.forEach(function(A){z._addToList(A)}):this._addToList(x)};w.prototype.removeFromList=function(x){var z=this;Array.isArray(x)||(x=[x]);x.forEach(function(A){z._removeFromList(A)})};w.prototype.ofType=function(x){var z,A,B,b,h,c,v,u,y,C,D;return a(this,function(E){switch(E.label){case 0:z=0,A=this.symbolLevels,E.label=1;case 1:if(!(z<A.length))return[3,8];B=A[z];b=0;h=B.zLevels;
E.label=2;case 2:if(!(b<h.length))return[3,7];c=h[b];v=c.geometryDPInfo;u=this._getDPInfoType(x);if(!v[u])return[3,6];y=0;C=v[u];E.label=3;case 3:if(!(y<C.length))return[3,6];D=C[y];return[4,D];case 4:E.sent(),E.label=5;case 5:return y++,[3,3];case 6:return b++,[3,2];case 7:return z++,[3,1];case 8:return[2]}})};w.prototype._addToList=function(x){var z=this._getDisplayList(x.symbolLevel,x.zOrder,x.geometryType),A=0<z.length?z[z.length-1]:null;null!==A&&m.isSameMaterialInfo(A.materialInfo,x.materialInfo)&&
A.indexFrom+A.indexCount===x.indexFrom?A.indexCount+=x.indexCount:(A=new g,A.indexFrom=x.indexFrom,A.indexCount=x.indexCount,A.materialInfo=x.materialInfo,A.geometryType=x.geometryType,z.push(A))};w.prototype._removeFromList=function(x){for(var z=this._getDisplayList(x.symbolLevel,x.zOrder,x.geometryType),A=z.length,B=void 0,b=0;b<A;++b){var h=z[b];x.indexFrom+x.indexCount>h.indexFrom&&x.indexFrom<h.indexFrom+h.indexCount&&(B=b)}if(void 0!==B)if(h=z[B],x.indexFrom===h.indexFrom)h.indexCount-=x.indexCount,
h.indexFrom+=x.indexCount;else if(x.indexFrom+x.indexCount===h.indexFrom+h.indexCount)h.indexCount-=x.indexCount;else{A=h.indexFrom;b=x.indexFrom-h.indexFrom;var c=x.indexCount;x=h.indexFrom+h.indexCount-(x.indexFrom+x.indexCount);h.indexCount=b;var v=new g;v.geometryType=h.geometryType;v.materialInfo=new p.default;v.materialInfo.copy(h.materialInfo);v.indexFrom=A+b+c;v.indexCount=x;z.splice(B+1,0,v)}};w.prototype._getDisplayList=function(x,z,A){for(var B,b=this.symbolLevels.length,h=0;h<b;h++)if(this.symbolLevels[h].symbolLevel===
x){B=this.symbolLevels[h];break}B||(B=new t,B.symbolLevel=x,this.symbolLevels.push(B));x=B.zLevels.length;for(b=0;b<x;b++)if(B.zLevels[b].zLevel===z){var c=B.zLevels[b];break}c||(c=new q,c.geometryDPInfo=new d,c.zLevel=z,B.zLevels.push(c));switch(A){case k.WGLGeometryType.FILL:c.geometryDPInfo.fill||(c.geometryDPInfo.fill=[]);var v=c.geometryDPInfo.fill;break;case k.WGLGeometryType.LINE:c.geometryDPInfo.line||(c.geometryDPInfo.line=[]);v=c.geometryDPInfo.line;break;case k.WGLGeometryType.MARKER:c.geometryDPInfo.marker||
(c.geometryDPInfo.marker=[]);v=c.geometryDPInfo.marker;break;case k.WGLGeometryType.TEXT:c.geometryDPInfo.text||(c.geometryDPInfo.text=[]);v=c.geometryDPInfo.text;break;case k.WGLGeometryType.LABEL:c.geometryDPInfo.label||(c.geometryDPInfo.label=[]),v=c.geometryDPInfo.label}return v};w.prototype.serialize=function(x){e.serializeList(x,this.symbolLevels);return x};w.deserialize=function(x){var z=new w;z.symbolLevels=e.deserializeList(x,t);return z};w.prototype._getDPInfoType=function(x){switch(x){case k.WGLGeometryType.FILL:return"fill";
case k.WGLGeometryType.LINE:return"line";case k.WGLGeometryType.MARKER:return"marker";case k.WGLGeometryType.TEXT:return"text";case k.WGLGeometryType.LABEL:return"label";default:f.error("DisplayList: Tried to convert unknown geometryType: "+x)}};return w}();var g=function(){function w(){this.materialInfo=null;this.indexCount=this.indexFrom=0}w.prototype.serialize=function(x){this.materialInfo.serialize(x);x.writeInt32(this.indexFrom);x.writeInt32(this.indexCount);return x};w.deserialize=function(x,
z){var A=new w;A.geometryType=z.geometryType;A.materialInfo=p.default.deserialize(x);A.indexFrom=x.readInt32();A.indexCount=x.readInt32();return A};return w}(),d=function(){function w(){this.label=this.text=this.marker=this.line=this.fill=null}w.prototype.serialize=function(x){e.serializeList(x,this.fill);e.serializeList(x,this.line);e.serializeList(x,this.marker);e.serializeList(x,this.text);e.serializeList(x,this.label);return x};w.deserialize=function(x){var z=new w,A={geometryType:k.WGLGeometryType.FILL},
B=e.deserializeList(x,g,A);B.length&&(z.fill=B);A.geometryType=k.WGLGeometryType.LINE;B=e.deserializeList(x,g,A);B.length&&(z.line=B);A.geometryType=k.WGLGeometryType.MARKER;B=e.deserializeList(x,g,A);B.length&&(z.marker=B);A.geometryType=k.WGLGeometryType.TEXT;B=e.deserializeList(x,g,A);B.length&&(z.text=B);A.geometryType=k.WGLGeometryType.LABEL;x=e.deserializeList(x,g,A);x.length&&(z.label=x);return z};return w}(),q=function(){function w(){this.geometryDPInfo=new d}w.prototype.serialize=function(x){x.writeInt32(this.zLevel);
this.geometryDPInfo.serialize(x);return x};w.deserialize=function(x){var z=new w;z.zLevel=x.readInt32();z.geometryDPInfo=d.deserialize(x);return z};return w}(),t=function(){function w(){this.zLevels=[]}w.prototype.serialize=function(x){x.writeInt32(this.symbolLevel);e.serializeList(x,this.zLevels);return x};w.deserialize=function(x){var z=new w;z.symbolLevel=x.readInt32();z.zLevels=e.deserializeList(x,q);return z};return w}();return r})},"esri/layers/vectorTiles/core/tsSupport/generatorHelper":function(){define([],
function(){return function(r,n){function a(g){return function(d){return l([g,d])}}function l(g){if(p)throw new TypeError("Generator is already executing.");for(;k;)try{if(p=1,m&&(e=g[0]&2?m["return"]:g[0]?m["throw"]||((e=m["return"])&&e.call(m),0):m.next)&&!(e=e.call(m,g[1])).done)return e;if(m=0,e)g=[g[0]&2,e.value];switch(g[0]){case 0:case 1:e=g;break;case 4:return k.label++,{value:g[1],done:!1};case 5:k.label++;m=g[1];g=[0];continue;case 7:g=k.ops.pop();k.trys.pop();continue;default:if(!(e=k.trys,
e=0<e.length&&e[e.length-1])&&(6===g[0]||2===g[0])){k=0;continue}if(3===g[0]&&(!e||g[1]>e[0]&&g[1]<e[3]))k.label=g[1];else if(6===g[0]&&k.label<e[1])k.label=e[1],e=g;else if(e&&k.label<e[2])k.label=e[2],k.ops.push(g);else{e[2]&&k.ops.pop();k.trys.pop();continue}}g=n.call(r,k)}catch(d){g=[6,d],m=0}finally{p=e=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}var k={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},p,m,e,f;return f={next:a(0),"throw":a(1),"return":a(2)},
"function"===typeof Symbol&&(f[Symbol.iterator]=function(){return this}),f}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayObject":function(){define("require exports ../../../../core/libs/gl-matrix/vec2 ./WGLDisplayRecord ./collisions/Metric ./util/serializationUtils".split(" "),function(r,n,a,l,k,p){return function(){function m(e){this.yOverflow=this.xOverflow=this.yBucket=this.xBucket=-1;this.id=e;this.displayRecords=[];this.metrics=[];this.anchor=null}m.prototype.addMetric=function(e,
f,g,d){this.metrics.push(new k.default(e,{from:f,count:g},d))};m.prototype.serialize=function(e){e.writeInt32(this.id);p.serializeList(e,this.metrics);p.serializeList(e,this.displayRecords);this.anchor?(e.writeF32(this.anchor[0]),e.writeF32(this.anchor[1]),e.writeInt32(this.xBucket),e.writeInt32(this.yBucket),e.writeInt32(this.xOverflow),e.writeInt32(this.yOverflow)):(e.writeF32(0),e.writeF32(0));return e};m.deserialize=function(e,f){var g=f.store,d=e.readInt32();f=new m(d);g={id:d,store:g};d=p.deserializeList(e,
k.default);d.length&&(f.metrics=d);f.displayRecords=p.deserializeList(e,l,g);g=e.readF32();d=e.readF32();if(g||d)f.anchor=a.fromValues(g,d),f.xBucket=e.readInt32(),f.yBucket=e.readInt32(),f.xOverflow=e.readInt32(),f.yOverflow=e.readInt32();return f};return m}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],function(r){var n={create:function(){var a=new r.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var l=new r.ARRAY_TYPE(2);l[0]=a[0];l[1]=a[1];return l},
fromValues:function(a,l){var k=new r.ARRAY_TYPE(2);k[0]=a;k[1]=l;return k},copy:function(a,l){a[0]=l[0];a[1]=l[1];return a},set:function(a,l,k){a[0]=l;a[1]=k;return a},add:function(a,l,k){a[0]=l[0]+k[0];a[1]=l[1]+k[1];return a},subtract:function(a,l,k){a[0]=l[0]-k[0];a[1]=l[1]-k[1];return a}};n.sub=n.subtract;n.multiply=function(a,l,k){a[0]=l[0]*k[0];a[1]=l[1]*k[1];return a};n.mul=n.multiply;n.divide=function(a,l,k){a[0]=l[0]/k[0];a[1]=l[1]/k[1];return a};n.div=n.divide;n.ceil=function(a,l){a[0]=
Math.ceil(l[0]);a[1]=Math.ceil(l[1]);return a};n.floor=function(a,l){a[0]=Math.floor(l[0]);a[1]=Math.floor(l[1]);return a};n.min=function(a,l,k){a[0]=Math.min(l[0],k[0]);a[1]=Math.min(l[1],k[1]);return a};n.max=function(a,l,k){a[0]=Math.max(l[0],k[0]);a[1]=Math.max(l[1],k[1]);return a};n.round=function(a,l){a[0]=Math.round(l[0]);a[1]=Math.round(l[1]);return a};n.scale=function(a,l,k){a[0]=l[0]*k;a[1]=l[1]*k;return a};n.scaleAndAdd=function(a,l,k,p){a[0]=l[0]+k[0]*p;a[1]=l[1]+k[1]*p;return a};n.distance=
function(a,l){var k=l[0]-a[0];a=l[1]-a[1];return Math.sqrt(k*k+a*a)};n.dist=n.distance;n.squaredDistance=function(a,l){var k=l[0]-a[0];a=l[1]-a[1];return k*k+a*a};n.sqrDist=n.squaredDistance;n.length=function(a){var l=a[0];a=a[1];return Math.sqrt(l*l+a*a)};n.len=n.length;n.squaredLength=function(a){var l=a[0];a=a[1];return l*l+a*a};n.sqrLen=n.squaredLength;n.negate=function(a,l){a[0]=-l[0];a[1]=-l[1];return a};n.inverse=function(a,l){a[0]=1/l[0];a[1]=1/l[1];return a};n.normalize=function(a,l){var k=
l[0],p=l[1];k=k*k+p*p;0<k&&(k=1/Math.sqrt(k),a[0]=l[0]*k,a[1]=l[1]*k);return a};n.dot=function(a,l){return a[0]*l[0]+a[1]*l[1]};n.cross=function(a,l,k){l=l[0]*k[1]-l[1]*k[0];a[0]=a[1]=0;a[2]=l;return a};n.lerp=function(a,l,k,p){var m=l[0];l=l[1];a[0]=m+p*(k[0]-m);a[1]=l+p*(k[1]-l);return a};n.random=function(a,l){l=l||1;var k=2*r.RANDOM()*Math.PI;a[0]=Math.cos(k)*l;a[1]=Math.sin(k)*l;return a};n.transformMat2=function(a,l,k){var p=l[0];l=l[1];a[0]=k[0]*p+k[2]*l;a[1]=k[1]*p+k[3]*l;return a};n.transformMat2d=
function(a,l,k){var p=l[0];l=l[1];a[0]=k[0]*p+k[2]*l+k[4];a[1]=k[1]*p+k[3]*l+k[5];return a};n.transformMat3=function(a,l,k){var p=l[0];l=l[1];a[0]=k[0]*p+k[3]*l+k[6];a[1]=k[1]*p+k[4]*l+k[7];return a};n.transformMat4=function(a,l,k){var p=l[0];l=l[1];a[0]=k[0]*p+k[4]*l+k[12];a[1]=k[1]*p+k[5]*l+k[13];return a};n.forEach=function(){var a=n.create();return function(l,k,p,m,e,f){k||(k=2);p||(p=0);for(m=m?Math.min(m*k+p,l.length):l.length;p<m;p+=k)a[0]=l[p],a[1]=l[p+1],e(a,a,f),l[p]=a[0],l[p+1]=a[1];return l}}();
n.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};n.exactEquals=function(a,l){return a[0]===l[0]&&a[1]===l[1]};n.equals=function(a,l){var k=a[0];a=a[1];var p=l[0];l=l[1];return Math.abs(k-p)<=r.EPSILON*Math.max(1,Math.abs(k),Math.abs(p))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))};return n})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["require","exports","../../../../core/Logger","./MeshData"],function(r,n,a,l){var k=a.getLogger("esri/views/2d/engine/webgl/WGLDisplayRecord");
return function(){function p(m,e,f){this.id=m;this.geometryType=e;this._materialInfo=f;this.meshData=null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}Object.defineProperty(p.prototype,"sortKey",{get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"materialInfo",{get:function(){return"number"===typeof this._materialInfo?(k.warn("Tried to read materialInfo, but found an index! Was materialInfo deserialized correctly?"),
null):this._materialInfo},set:function(m){this._materialInfo=m},enumerable:!0,configurable:!0});p.prototype.copy=function(){var m=new p(this.id,this.geometryType,this._materialInfo);m.vertexFrom=this.vertexFrom;m.vertexCount=this.vertexCount;m.indexFrom=this.indexFrom;m.indexCount=this.indexCount;m.zOrder=this.zOrder;m.symbolLevel=this.symbolLevel;m.meshData=this.meshData;return m};p.prototype.setMeshDataFromBuffers=function(m,e,f){var g=new l,d;for(d in e){for(var q=e[d].stride,t=e[d].data,w=[],
x=0;x<q*m.vertexCount/4;++x)w[x]=t[x+q*m.vertexFrom/4];g.vertexData.set(d,w)}for(x=g.indexData.length=0;x<m.indexCount;++x)g.indexData[x]=f[x+m.indexFrom]-m.vertexFrom;g.vertexCount=m.vertexCount;this.meshData=g};p.prototype.readMeshDataFromBuffers=function(m,e){this.meshData?this.meshData.clear():this.meshData=new l;for(var f in m){for(var g=m[f].stride,d=m[f].data,q=[],t=0;t<g*this.vertexCount/4;++t)q[t]=d[t+g*this.vertexFrom/4];this.meshData.vertexData.set(f,q)}for(t=this.meshData.indexData.length=
0;t<this.indexCount;++t)this.meshData.indexData[t]=e[t+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};p.prototype.writeMeshDataToBuffers=function(m,e,f,g){for(var d in e)for(var q=e[d].stride,t=this.meshData.vertexData.get(d),w=e[d].data,x=0;x<q*this.meshData.vertexCount/4;++x)w[x+q*m/4]=t[x];for(x=0;x<this.meshData.indexData.length;++x)g[x+f]=this.meshData.indexData[x]+m;this.vertexFrom=m;this.vertexCount=this.meshData.vertexCount;this.indexFrom=f;this.indexCount=this.meshData.indexData.length};
p.writeAllMeshDataToBuffers=function(m,e,f){for(var g=0,d=0,q=0;q<m.length;q++){var t=m[q];t.writeMeshDataToBuffers(g,e,d,f);g+=t.vertexCount;d+=t.indexCount}};p.prototype._computeSortKey=function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};p.prototype.serialize=function(m){m.writeInt32(this.geometryType);m.writeInt32(this._materialInfo);m.writeInt32(this.symbolLevel);m.writeInt32(this.zOrder);m.writeInt32(this.vertexFrom);m.writeInt32(this.vertexCount);m.writeInt32(this.indexFrom);
m.writeInt32(this.indexCount);return m};p.deserialize=function(m,e){var f=m.readInt32(),g=e.store&&e.store.get(m.readInt32())||m.readInt32();e=new p(e.id,f,g);e.symbolLevel=m.readInt32();e.zOrder=m.readInt32();e.vertexFrom=m.readInt32();e.vertexCount=m.readInt32();e.indexFrom=m.readInt32();e.indexCount=m.readInt32();return e};return p}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MeshData":function(){define(["require","exports"],function(r,n){return function(){function a(){this.vertexData=
new Map;this.vertexCount=0;this.indexData=[]}a.prototype.clear=function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};a.prototype.update=function(l,k,p){for(var m in l)this.vertexData.set(m,l[m]);for(m in this.vertexData)null===l[m]&&this.vertexData.delete(m);this.vertexCount=k;this.indexData=p};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/collisions/Metric":function(){define(["require","exports","./BoundingBox"],function(r,n,a){Object.defineProperty(n,"__esModule",
{value:!0});r=function(){function l(k,p,m,e,f){void 0===e&&(e=255);void 0===f&&(f=0);this.bounds=k;this.range=p;this.index=m;this.minZoom=e;this.maxZoom=f}l.prototype.serialize=function(k){this.bounds.serialize(k);k.writeInt32(this.range.from);k.writeInt32(this.range.count);k.writeInt32(this.index);return k};l.deserialize=function(k){var p=a.default.deserialize(k),m=k.readInt32(),e=k.readInt32();m={from:m,count:e};k=k.readInt32();return new l(p,m,k)};return l}();n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["require",
"exports","../../../../../core/libs/gl-matrix/vec2"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});r=function(){function l(k,p,m,e){this.width=m;this.height=e;this.center=a.fromValues(k,p)}Object.defineProperty(l.prototype,"x",{get:function(){return this.center[0]},set:function(k){this.center[0]=k},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"y",{get:function(){return this.center[1]},set:function(k){this.center[1]=k},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,
"halfWidth",{get:function(){return this.width/2},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"halfHeight",{get:function(){return this.height/2},enumerable:!0,configurable:!0});l.prototype.serialize=function(k){k.writeF32(this.center[0]);k.writeF32(this.center[1]);k.writeInt32(this.width);k.writeInt32(this.height);return k};l.deserialize=function(k){var p=k.readF32(),m=k.readF32(),e=k.readInt32();k=k.readInt32();return new l(p,m,e,k)};return l}();n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../symbols/SimpleLineSymbol ../../definitions ../../enums ../../MaterialInfo ../../Utils ../../visualVariablesUtils ../../WGLDisplayObject ../VertexVector ../templates/meshTemplateUtils ../templates/WGLLabelTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../../util/Matcher ../../util/serializationUtils ../../util/vvFlagUtils ../../util/Writer".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B,b,h,c){Object.defineProperty(n,"__esModule",{value:!0});var v=k.getLogger("esri.views.2d.engine.webgl.WGLMeshFactory"),u={esriGeometryPoint:"above-center above-left above-right center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:null,esriGeometryMultipoint:null,esriGeometryEnvelope:null},y=function(){function F(){this._materials=[];this._materialsIndex=new Map}
F.prototype.insert=function(G){var J=this._materials.length;this._materials.push(G);return J};F.prototype._hashGlyph=function(G,J,R){return"G-"+J+"-"+R+"-"+G.page};F.prototype._hashSprite=function(G,J,R){return"S-"+J+"-"+R+"-"+(G?G.page:-1)+"-"+(G?G.sdf:!1)};F.prototype.createSpriteMaterial=function(G,J,R){var O=this._hashSprite(G,J,R);if(this._materialsIndex.has(O))return this._materialsIndex.get(O);var P=this._materials.length;G=f.default.fromSprite(G,J,R);this._materials.push(G);this._materialsIndex.set(O,
P);return P};F.prototype.createGlyphMaterial=function(G,J,R){var O=this._hashGlyph(G,J,R);if(this._materialsIndex.has(O))return this._materialsIndex.get(O);var P=this._materials.length;G=f.default.fromGlyph(G,J,R);this._materials.push(G);this._materialsIndex.set(O,P);return P};F.prototype.get=function(G){return this._materials[G]};F.prototype.serialize=function(G){b.serializeList(G,this._materials);return G};F.deserialize=function(G){var J=new F;J._materials=b.deserializeList(G,f.default);return J};
return F}();n.MaterialStore=y;var C=function(){function F(G){this._bucketSize=G;this._rowsLength=m.TILE_SIZE/G;this._colsLength=m.TILE_SIZE/G;this._grid=this._initGrid()}F.prototype.checkOverlap=function(G,J){G=Math.floor(G/this._bucketSize);J=Math.floor(J/this._bucketSize);if(0>G||G>=this._rowsLength||0>J||J>=this._colsLength||this._grid[J][G])return!0;this._grid[J][G]=!0;return!1};F.prototype.reset=function(){this._grid=this._initGrid()};F.prototype._initGrid=function(){for(var G=[],J=0;J<this._rowsLength;J++)G.push(Array(this._colsLength));
return G};return F}(),D=function(){function F(G,J,R){this.displayObjects=G;this.vertexVectorsMap=J;this._materials=R;this.grid=new C(m.COLLISION_EARLY_REJECT_BUCKET_SIZE)}F.prototype.get=function(G){return this.vertexVectorsMap[G]};F.prototype.pushDisplayObject=function(G){this.displayObjects.push(G)};F.prototype.encode=function(G,J){var R=b.serializeList(new c.default(Uint32Array,this._guessSize()),this.displayObjects).buffer(),O=this._materials.serialize(new c.default(Uint32Array)).buffer(),P={};
J.push(R);J.push(O);for(var U=0;U<this.vertexVectorsMap.length;U++){var K=this.vertexVectorsMap[U];P[U]={};K.transfer(P[U],J)}G.displayObjects=R;G.materialStore=O;G.vertexBuffersMap=P;this.destroy()};F.prototype.destroy=function(){this.displayObjects=this.vertexVectorsMap=null};F.prototype._guessSize=function(){for(var G=this.displayObjects,J=Math.min(G.length,4),R=0,O=0;O<J;O++)R=Math.max(R,G[O].displayRecords.length);return 2*(12*G.length+G.length*R*40)};return F}(),E=function(){function F(){this._vvMap=
new Map}F.prototype.set=function(G,J){this._vvMap.set(G,J)};F.prototype.getValue=function(G,J,R){return this._vvMap.has(G)?this._vvMap.get(G)(J,R):0};return F}();r=function(){function F(G,J,R,O,P,U,K,V,Q,W){var N=this;this._labelsDebugTemplate=null;this._matcher=G;this._materials=R;this._geometryType=O;this._idField=P;this._pixelRatio=Q;this._vvMap=null;this._vvFlags=K;this._vvBuf=new ArrayBuffer(16);this._vvBufU32=new Uint32Array(this._vvBuf);this._vvBufF32=new Float32Array(this._vvBuf);this._createVVFunctionMap(U,
J,V);W&&(this._validateLabelingInfo(W)?this._labelTemplates=W.map(function(I){return x.default.fromText(N._materials,0,I.symbol,Q,I.labelPlacement)}):v.error(new l("mapview-labeling:unsupported-geometry","LabelingInfo failed validation - unable to create labels for layer.")))}F.from=function(G,J,R,O,P,U,K,V){switch(G.type){case "simple":return F._fromSimpleRenderer(G,J,R,O,P,U,K,V);case "unique-value":case "uniqueValue":return F._fromUniqueValueRenderer(G,J,R,O,P,U,K,V);case "class-breaks":case "classBreaks":return F._fromClassBreaksRenderer(G,
J,R,O,P,U,K,V);default:return v.error(new l("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),null}};Object.defineProperty(F.prototype,"materials",{get:function(){return this._materials},enumerable:!0,configurable:!0});F.prototype.createMeshData=function(G){var J=Array(5),R=this._matcher.getDefault(),O=!!h.getMarkerVVFlags(this._vvFlags),P=!!h.getFillVVFlags(this._vvFlags),U=!!h.getLineVVFlags(this._vvFlags,"esriGeometryPolyline"!==this._geometryType),K=!!h.getTextVVFlags(this._vvFlags);
!this._labelTemplates&&R&&1===R.length&&R[0]instanceof A.default?(J[e.WGLGeometryType.MARKER]=new t.VertexVectors(e.WGLGeometryType.MARKER,O,G),J[e.WGLGeometryType.FILL]=new t.VertexVectors(e.WGLGeometryType.FILL,P,0),J[e.WGLGeometryType.LINE]=new t.VertexVectors(e.WGLGeometryType.LINE,U,0),J[e.WGLGeometryType.TEXT]=new t.VertexVectors(e.WGLGeometryType.TEXT,K,0),J[e.WGLGeometryType.LABEL]=new t.VertexVectors(e.WGLGeometryType.LABEL,!1,0)):(J[e.WGLGeometryType.MARKER]=new t.VertexVectors(e.WGLGeometryType.MARKER,
O,G),J[e.WGLGeometryType.FILL]=new t.VertexVectors(e.WGLGeometryType.FILL,P,G),J[e.WGLGeometryType.LINE]=new t.VertexVectors(e.WGLGeometryType.LINE,U,G),J[e.WGLGeometryType.TEXT]=new t.VertexVectors(e.WGLGeometryType.TEXT,K,G),J[e.WGLGeometryType.LABEL]=new t.VertexVectors(e.WGLGeometryType.LABEL,!1,this._labelTemplates&&0<this._labelTemplates.length?G:0));return new D([],J,this._materials)};F.prototype.write=function(G,J,R,O,P){var U=1===this._matcher.size()&&this._matcher.getDefault()||this._matcher.match(J,
R),K=J.attributes[this._idField],V=new q(K),Q=!!O&&!!this._labelTemplates;this._computeVV(J,R);if(U&&(J.geometry||J.centroid)){R=V.displayRecords;for(var W=0;W<U.length;W++){var N=U[W],I=G.get(N.geometryType);N.writeMesh(R,I,this._geometryType,K,J,this._pixelRatio,this._vvBufU32)}Q&&(U=this._getLabelReference(U),this._writeLabelMesh(V,G,K,J,P,O.get(K),U));G.pushDisplayObject(V)}};F.prototype._hasBadLabelClass=function(G,J){var R=G.labelPlacement,O=u[J];if(!O)return v.error(new l("mapview-labeling:unsupported-geometry-type",
"Unable to create labels for WebGL Feature Layer, "+J+" is not supported")),!0;O.some(function(P){return P===R})||(O=O[0],v.warn("Found invalid label placement type "+R+" for "+J+". Defaulting to "+O),G.labelPlacement=O);return!1};F.prototype._validateLabelingInfo=function(G){var J=this;return!G.some(function(R){return J._hasBadLabelClass(R,J._geometryType)})};F.prototype._getLabelReference=function(G){for(var J=0;J<G.length;J++){var R=G[J];if(R instanceof A.default)return R}return null};F.prototype._writeLabelMesh=
function(G,J,R,O,P,U,K){for(var V=G.displayRecords,Q=0,W=0,N=-1,I=-1,S=0;S<U.labelingInfo.length;S++){var Z=U.labelingInfo[S],ca=U.text[S],fa=this._labelTemplates[Z],ha=J.get(fa.geometryType),na=P.get(fa.symbolId).glyphMosaicItems,ma=V.length;fa.bindReferenceTemplate(K);if(!fa.computeGlyphs(na,ca)){na=fa.computeAnchor(this._geometryType,O);ca=fa.bounds;if(-1===N&&(N=Math.floor(na[0]/m.COLLISION_BUCKET_SIZE),I=Math.floor(na[1]/m.COLLISION_BUCKET_SIZE),J.grid.checkOverlap(na[0],na[1])))return;fa.writeMesh(V,
ha,this._geometryType,R,O,this._pixelRatio,this._vvBufU32);G.anchor=na;G.addMetric(ca,ma,V.length-ma,Z);Z=ca.center;Q=Math.max(ca.halfWidth+Math.abs(Z[0]),Q);W=Math.max(ca.halfHeight+Math.abs(Z[1]),W)}}-1!==N&&(R=2.5*Math.max(Q,W),J=Math.ceil(Math.abs((R-G.anchor[0]%m.COLLISION_BUCKET_SIZE)/m.COLLISION_BUCKET_SIZE)),R=Math.ceil(Math.abs((R-G.anchor[1]%m.COLLISION_BUCKET_SIZE)/m.COLLISION_BUCKET_SIZE)),G.xBucket=N,G.yBucket=I,G.xOverflow=J,G.yOverflow=R)};F.prototype._debugLabels=function(G,J,R,O,
P){O={geometry:{paths:[[[O[0]+P.center[0]-P.width/2,O[1]+P.center[1]+P.height/2],[0,-P.height],[P.width,0],[0,P.height],[-P.width,0]]]},attributes:{}};P=this._getLabelDebugTemplate();J=J.get(P.geometryType);P.writeMesh(G,J,"esriGeometryPolyline",R,O,this._pixelRatio,this._vvBufU32)};F.prototype._getLabelDebugTemplate=function(){this._labelsDebugTemplate||(this._labelsDebugTemplate=this._createLabelsDebugTemplate());return this._labelsDebugTemplate};F.prototype._createLabelsDebugTemplate=function(){var G=
new p({style:"solid",width:1,color:[255,0,0,1]});return z.default.fromSimpleLine(this._materials,0,G,null,this._pixelRatio)};F.prototype._isErrorVV=function(G){return null===G||isNaN(G)||Infinity===G};F.prototype._computeVV=function(G,J){if(!this._vvMap)return 0;var R=this._vvMap.getValue(e.VVType.SIZE,G,J),O=this._vvMap.getValue(e.VVType.COLOR,G,J),P=this._vvMap.getValue(e.VVType.OPACITY,G,J);G=this._vvMap.getValue(e.VVType.ROTATION,G,J);this._vvBufF32[e.VVType.SIZE]=this._isErrorVV(R)?NaN:R;this._vvBufF32[e.VVType.COLOR]=
this._isErrorVV(O)?NaN:O;this._vvBufF32[e.VVType.OPACITY]=this._isErrorVV(P)?NaN:P;this._vvBufF32[e.VVType.ROTATION]=this._isErrorVV(G)?NaN:G;return 0};F.prototype._createVVFunctionMap=function(G,J,R){if(G&&G.length)for(var O=0;O<G.length;O++){var P=G[O],U=g.getVVType(P.type);if(P=this._createGetValueFunction(P,J,R))this._vvMap||(this._vvMap=new E),this._vvMap.set(U,P)}};F.prototype._createGetValueFunction=function(G,J,R){if(g.getVVType(G.type)===e.VVType.SIZE){var O=d.getTypeOfSizeVisualVariable(G);
return O===e.WGLVVFlag.SIZE_SCALE_STOPS?null:this._createNormalizedFunction(G,J,R,O===e.WGLVVFlag.SIZE_UNIT_VALUE&&function(P){return d.getVisualVariableSizeValueRepresentationRatio(P,G.valueRepresentation)})}return this._createNormalizedFunction(G,J,R)};F.prototype._createNormalizedFunction=function(G,J,R,O){var P=G.field;if(P){if("string"===typeof P){var U=G.normalizationField;return U?function(K){if(K.attributes[P]&&K.attributes[U])return K=K.attributes[P]/K.attributes[U],O?O(K):K}:O?function(K){return O(K.attributes[P])}:
function(K){return K.attributes[P]}}if("function"===typeof P)return v.error(new l("mapview-rendering:unsupported-feature","Function field types are not currently supported. Please use a valueExpression instead")),function(K){};v.error(new l("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof P));return function(K){}}if(G.valueExpression&&"$view.scale"!==G.valueExpression)return g.createArcadeFunction({valueExpression:G.valueExpression,spatialReference:R,
layer:J},O);v.error("Unable to create a normalized function for visual variable: "+G);return function(K){}};F._fromSimpleRenderer=function(G,J,R,O,P,U,K,V){var Q=G.getSymbols();G=G.visualVariables;var W=h.getVVFlags(G),N=new B.default,I=new y;Q.length&&N.setDefault(w.createMeshTemplates([],I,Q[0],R,W,K));return new F(N,J,I,O,P,G,W,U,K,V)};F._fromUniqueValueRenderer=function(G,J,R,O,P,U,K,V){var Q=G.uniqueValueInfos,W=G.visualVariables,N=h.getVVFlags(W),I=[G.field];G.field2&&I.push(G.field2);G.field3&&
I.push(G.field3);var S=G.valueExpression;I=new B.MapMatcher(I,G.fieldDelimiter,S?{valueExpression:S,spatialReference:U,layer:J}:null);S=new y;var Z=G.backgroundFillSymbol;Z=Z&&w.createMeshTemplates([],S,Z,R,N,K);for(var ca=0;ca<Q.length;ca++){var fa=Q[ca],ha=w.createMeshTemplates([],S,fa.symbol,R,N,K);I.add(fa.value,Z?Z.concat(ha):ha)}if(G=G.defaultSymbol)R=w.createMeshTemplates([],S,G,R,N,K),I.setDefault(Z?Z.concat(R):R);return new F(I,J,S,O,P,W,N,U,K,V)};F._fromClassBreaksRenderer=function(G,J,
R,O,P,U,K,V){var Q=G.isMaxInclusive,W=G.visualVariables,N=G.valueExpression,I=G.normalizationField,S=G.normalizationTotal,Z=G.normalizationType,ca=h.getVVFlags(W);Q=new B.IntervalMatcher(G.field,Q,N?{valueExpression:N,spatialReference:U,layer:J}:null,{normalizationField:I,normalizationTotal:S,normalizationType:Z});N=new y;I=(I=G.backgroundFillSymbol)&&w.createMeshTemplates([],N,I,R,ca,K,!0);S=0;for(Z=G.classBreakInfos;S<Z.length;S++){var fa=Z[S],ha=w.createMeshTemplates([],N,fa.symbol,R,ca,K);Q.add({min:fa.minValue,
max:fa.maxValue},I?I.concat(ha):ha)}if(G=G.defaultSymbol)R=w.createMeshTemplates([],N,G,R,ca,K),Q.setDefault(I?I.concat(R):R);return new F(Q,J,N,O,P,W,ca,U,K,V)};return F}();n.default=r})},"esri/layers/vectorTiles/symbols/SimpleLineSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./LineSymbol"],function(r,n,a,l){var k={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",
STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},p={color:[0,0,0,1],style:k.STYLE_SOLID,width:.75,cap:k.CAP_BUTT,join:k.JOIN_MITER,miterLimit:7.5},m=r(l,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line",style:{value:k.STYLE_SOLID,json:{read:function(e,
f){return n.valueOf(this._jsonStyles,e)||void 0},write:function(e,f){f.style=this._jsonStyles[e]}}},cap:{value:k.CAP_BUTT,json:{read:!1,write:!1}},join:{value:k.JOIN_MITER,json:{read:!1,write:!1}},miterLimit:{value:7.5,cast:a.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot",
"short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return n.mixin(this.inherited(arguments),p)},normalizeCtorArgs:function(e,f,g,d,q,t){if(e&&"string"!==typeof e)return e;var w={};null!=e&&(w.style=e);null!=f&&(w.color=f);null!=g&&(w.width=a.toPt(g));null!=d&&(w.cap=d);null!=q&&(w.join=q);null!=t&&(w.miterLimit=a.toPt(t));return w},clone:function(){return new m({color:n.clone(this.color),
style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});n.mixin(m,k);m.defaultProps=p;return m})},"esri/layers/vectorTiles/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(r,n,a){return r(a,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:n.toPt,json:{write:!0}}}})})},"esri/layers/vectorTiles/symbols/Symbol":function(){define(["../core/lang","../core/kebabDictionary",
"../core/JSONSupport","../Color"],function(r,n,a,l){var k=n({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),p=0;return a.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+p++},properties:{type:{type:String,value:null,json:{read:k.fromJSON,
write:{ignoreOrigin:!0,writer:function(m,e){e.type=k.toJSON(this.type)}}}},color:{type:l,value:new l([0,0,0,1]),json:{read:function(m){return m&&r.isDefined(m[0])?[m[0],m[1],m[2],m[3]/255]:m},write:{allowNull:!0}}}}})})},"esri/layers/vectorTiles/core/kebabDictionary":function(){define(["require","exports"],function(r,n){return function(a,l){void 0===l&&(l={});var k=l.ignoreUnknown||!1,p={},m;for(m in a)p[a[m]]=m;var e=function(g){return p.hasOwnProperty(g)?p[g]:k?void 0:g},f=function(g){return a.hasOwnProperty(g)?
a[g]:k?void 0:g};return{toJSON:e,fromJSON:f,read:function(g){return f(g)},write:function(g,d,q){g=e(g);void 0!==g&&(d[q]=g)}}}})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(r,n,a){function l(m){return Math.max(0,Math.min(n.ensureInteger(m),255))}var k=r([a],{declaredClass:"esri.Color",toJSON:function(){return[l(this.r),l(this.g),l(this.b),1<this.a?this.a:l(255*this.a)]},clone:function(){return new k(this.toRgba())}});
k.toJSON=function(m){return m&&[l(m.r),l(m.g),l(m.b),1<m.a?m.a:l(255*m.a)]};k.fromJSON=function(m){return m&&new k([m[0],m[1],m[2],m[3]/255])};k.toUnitRGB=function(m){return[m.r/255,m.g/255,m.b/255]};k.toUnitRGBA=function(m){return[m.r/255,m.g/255,m.b/255,null!=m.a?m.a:1]};var p="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(r=0;r<p.length;r++)k[p[r]]=a[p[r]];k.named.rebeccapurple=[102,51,153];return k})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color",
"./_base/array"],function(r,n,a,l){var k={};n.setObject("dojo.colors",k);var p=function(e,f,g){0>g&&++g;1<g&&--g;var d=6*g;return 1>d?e+(f-e)*d:1>2*g?f:2>3*g?e+(f-e)*(2/3-g)*6:e};r.colorFromRgb=a.fromRgb=function(e,f){var g=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(g){e=g[2].split(/\s*,\s*/);var d=e.length;g=g[1];if("rgb"==g&&3==d||"rgba"==g&&4==d)return g=e[0],"%"==g.charAt(g.length-1)?(g=l.map(e,function(w){return 2.56*parseFloat(w)}),4==d&&(g[3]=e[3]),a.fromArray(g,f)):a.fromArray(e,
f);if("hsl"==g&&3==d||"hsla"==g&&4==d){g=(parseFloat(e[0])%360+360)%360/360;var q=parseFloat(e[1])/100,t=parseFloat(e[2])/100;q=.5>=t?t*(q+1):t+q-t*q;t=2*t-q;g=[256*p(t,q,g+1/3),256*p(t,q,g),256*p(t,q,g-1/3),1];4==d&&(g[3]=e[3]);return a.fromArray(g,f)}}return null};var m=function(e,f,g){e=Number(e);return isNaN(e)?g:e<f?f:e>g?g:e};a.prototype.sanitize=function(){this.r=Math.round(m(this.r,0,255));this.g=Math.round(m(this.g,0,255));this.b=Math.round(m(this.b,0,255));this.a=m(this.a,0,1);return this};
k.makeGrey=a.makeGrey=function(e,f){return a.fromArray([e,e,e,f])};n.mixin(a.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,
105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],
lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,
85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,
112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,
191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.EXTRUDE_SCALE=64;n.PICTURE_FILL_COLOR=4294967295;n.TILE_SIZE=512;n.ANGLE_FACTOR_256=256/360;n.COLLISION_BUCKET_SIZE=128;n.COLLISION_MAX_ZOOM_DELTA=4;n.COLLISION_EARLY_REJECT_BUCKET_SIZE=
32})},"esri/layers/vectorTiles/views/2d/engine/webgl/visualVariablesUtils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./Utils ../../../3d/layers/support/FastSymbolUpdates".split(" "),function(r,n,a,l,k,p,m){function e(t){return p.isNumber(t.minDataValue)&&p.isNumber(t.maxDataValue)&&null!=t.minSize&&null!=t.maxSize?k.WGLVVFlag.SIZE_MINMAX_VALUE:(t.expression&&"view.scale"===t.expression||t.valueExpression&&"$view.scale"===t.valueExpression)&&Array.isArray(t.stops)?
k.WGLVVFlag.SIZE_SCALE_STOPS:(null!=t.field||t.expression&&"view.scale"!==t.expression||t.valueExpression&&"$view.scale"!==t.valueExpression)&&Array.isArray(t.stops)?k.WGLVVFlag.SIZE_FIELD_STOPS:(null!=t.field||t.expression&&"view.scale"!==t.expression||t.valueExpression&&"$view.scale"!==t.valueExpression)&&null!=t.valueUnit?k.WGLVVFlag.SIZE_UNIT_VALUE:k.WGLVVFlag.NONE}function f(t){return{value:t.value,size:a.toPt(t.size)}}function g(t){return t.map(function(w){return f(w)})}function d(t){return"string"===
typeof t||"number"===typeof t?a.toPt(t):{type:"size",expression:t.expression,stops:g(t.stops)}}function q(t){var w={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(p.isString(t.field))if(t.stops){if(8<t.stops.length)return null;t=t.stops;for(var x=0;8>x;++x){var z=t[Math.min(x,t.length-1)];w.values[x]=z.value;w.opacities[x]=z.opacity}}else if(t.opacityValues){if(!p.isDefined(t.minDataValue)||!p.isDefined(t.maxDataValue)||2!==t.opacityValues.length)return null;w.values[0]=t.minDataValue;w.opacities[0]=
t.opacityValues[0];w.values[1]=t.maxDataValue;w.opacities[1]=t.opacityValues[1];for(x=2;8>x;++x)w.values[x]=t.maxDataValue,w.opacities[x]=t.opacityValues[1]}else return null;else if(t.stops&&0<=t.stops.length||t.opacityValues&&0<=t.opacityValues.length)for(t=t.stops&&0<=t.stops.length?t.stops[0].opacity:t.opacityValues[0],x=0;8>x;x++)w.values[x]=Infinity,w.opacities[x]=t;else return null;return w}Object.defineProperty(n,"__esModule",{value:!0});n.getTypeOfSizeVisualVariable=e;n.getVisualVariableSizeValueRepresentationRatio=
function(t,w){if(!t||!w)return t;switch(w){case "radius":case "distance":return 2*t;case "area":return Math.sqrt(t)}return t};n.stopToSizeStop=f;n.normalizeSizeStops=g;n.normalizeSizeElement=d;n.getVisualVariablesFields=function(t){var w=t&&0<t.length?{}:null;w&&t.forEach(function(x){var z=x.type;x.field&&(w[z]=x.field)});return w};n.convertVisualVariables=function(t){var w=t&&0<t.length?{}:null,x=w?{}:null;if(!w)return{vvFields:w,vvRanges:x};for(var z=0;z<t.length;z++){var A=t[z],B=A.type;A.field&&
(w[B]=A.field);if("size"===B){x.size||(x.size={});var b=A;switch(e(b)){case k.WGLVVFlag.SIZE_MINMAX_VALUE:x.size.minMaxValue={minDataValue:b.minDataValue,maxDataValue:b.maxDataValue,minSize:d(b.minSize),maxSize:d(b.maxSize)};break;case k.WGLVVFlag.SIZE_SCALE_STOPS:x.size.scaleStops={stops:g(b.stops)};break;case k.WGLVVFlag.SIZE_FIELD_STOPS:A=[];B=[];b=g(b.stops);for(var h=b.length,c=0;6>c;c++){var v=b[Math.min(c,h-1)];A.push(v.value);B.push(a.pt2px(v.size))}x.size.fieldStops={values:A,sizes:B};break;
case k.WGLVVFlag.SIZE_UNIT_VALUE:x.size.unitValue={unit:b.valueUnit,valueRepresentation:b.valueRepresentation}}}else if("color"===B)for(A=m.convertVisualVariables([A],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),x.color=A.color,c=0;32>c;c+=4)l.premultiplyAlpha(x.color.colors,c,!0);else"opacity"===B?x.opacity=q(A):"rotation"===B&&(x.rotation={type:A.rotationType})}return{vvFields:w,vvRanges:x}}})},"esri/layers/vectorTiles/views/3d/layers/support/FastSymbolUpdates":function(){define(["require",
"exports","../../../../renderers/support/utils","../graphics/graphicUtils","../../lib/glMatrix"],function(r,n,a,l,k){function p(c){return null!==c&&void 0!==c}function m(c){return"number"===typeof c}function e(c,v){c&&c.push(v)}function f(c,v,u,y,C){var D=c.minSize,E=c.maxSize;if(c.expression)return e(C,"Could not convert size info: expression not supported"),!1;if(c.useSymbolValue)return c=y.symbolSize[u],v.minSize[u]=c,v.maxSize[u]=c,v.offset[u]=v.minSize[u],v.factor[u]=0,v.type[u]=1,!0;if(p(c.field)){if(p(c.stops)){if(2===
c.stops.length&&m(c.stops[0].size)&&m(c.stops[1].size))return g(c.stops[0].size,c.stops[1].size,c.stops[0].value,c.stops[1].value,v,u),v.type[u]=1,!0;e(C,"Could not convert size info: stops only supported with 2 elements");return!1}if(m(D)&&m(E)&&p(c.minDataValue)&&p(c.maxDataValue))return g(D,E,c.minDataValue,c.maxDataValue,v,u),v.type[u]=1,!0;if(null!=a.meterIn[c.valueUnit])return v.minSize[u]=-Infinity,v.maxSize[u]=Infinity,v.offset[u]=0,v.factor[u]=1/a.meterIn[c.valueUnit],v.type[u]=1,!0;"unknown"===
c.valueUnit?e(C,"Could not convert size info: proportional size not supported"):e(C,"Could not convert size info: scale-dependent size not supported");return!1}if(!p(c.field)){if(c.stops&&c.stops[0]&&m(c.stops[0].size))return v.minSize[u]=c.stops[0].size,v.maxSize[u]=c.stops[0].size,v.offset[u]=v.minSize[u],v.factor[u]=0,v.type[u]=1,!0;if(m(D))return v.minSize[u]=D,v.maxSize[u]=D,v.offset[u]=D,v.factor[u]=0,v.type[u]=1,!0}e(C,"Could not convert size info: unsupported variant of sizeInfo");return!1}
function g(c,v,u,y,C,D){y=0<Math.abs(y-u)?(v-c)/(y-u):0;C.minSize[D]=0<y?c:v;C.maxSize[D]=0<y?v:c;C.offset[D]=c-u*y;C.factor[D]=y}function d(c,v,u,y){if(c.normalizationField||c.valueRepresentation)return e(y,"Could not convert size info: unsupported property"),null;var C=c.field;if(null!=C&&"string"!==typeof C)return e(y,"Could not convert size info: field is not a string"),null;if(!v.size)v.size={field:c.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(c.field)if(!v.size.field)v.size.field=
c.field;else if(c.field!==v.size.field)return e(y,"Could not convert size info: multiple fields in use"),null;switch(c.axis){case "width":return(C=f(c,v.size,0,u,y))?v:null;case "height":return(C=f(c,v.size,2,u,y))?v:null;case "depth":return(C=f(c,v.size,1,u,y))?v:null;case "width-and-depth":return(C=f(c,v.size,0,u,y))&&f(c,v.size,1,u,y),C?v:null;case null:case void 0:case "all":return(C=(C=(C=f(c,v.size,0,u,y))&&f(c,v.size,1,u,y))&&f(c,v.size,2,u,y))?v:null;default:return e(y,'Could not convert size info: unknown axis "'+
c.axis+'""'),null}}function q(c,v,u){for(var y=0;3>y;++y){var C=v.unitInMeters;1===c.type[y]&&(C*=v.modelSize[y],c.type[y]=2);c.minSize[y]/=C;c.maxSize[y]/=C;c.offset[y]/=C;c.factor[y]/=C}if(0!==c.type[0])v=0;else if(0!==c.type[1])v=1;else if(0!==c.type[2])v=2;else return e(u,"No size axis contains a valid size or scale"),!1;for(y=0;3>y;++y)0===c.type[y]&&(c.minSize[y]=c.minSize[v],c.maxSize[y]=c.maxSize[v],c.offset[y]=c.offset[v],c.factor[y]=c.factor[v],c.type[y]=c.type[v]);return!0}function t(c,
v,u){c[4*v]=u.r/255;c[4*v+1]=u.g/255;c[4*v+2]=u.b/255;c[4*v+3]=u.a}function w(c,v,u){if(c.normalizationField)return e(u,"Could not convert color info: unsupported property"),null;if("string"===typeof c.field)if(c.stops){if(8<c.stops.length)return e(u,"Could not convert color info: too many color stops"),null;v.color={field:c.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};c=c.stops;for(u=0;8>u;++u){var y=c[Math.min(u,c.length-1)];v.color.values[u]=
y.value;t(v.color.colors,u,y.color)}}else if(c.colors){if(!p(c.minDataValue)||!p(c.maxDataValue))return e(u,"Could not convert color info: missing data values"),null;if(2!==c.colors.length)return e(u,"Could not convert color info: invalid colors array"),null;v.color={field:c.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};v.color.values[0]=c.minDataValue;t(v.color.colors,0,c.colors[0]);v.color.values[1]=c.maxDataValue;t(v.color.colors,1,c.colors[1]);
for(u=2;8>u;++u)v.color.values[u]=c.maxDataValue,t(v.color.colors,u,c.colors[1])}else return e(u,"Could not convert color info: missing stops or colors"),null;else if(c.stops&&0<=c.stops.length||c.colors&&0<=c.colors.length)for(c=c.stops&&0<=c.stops.length?c.stops[0].color:c.colors[0],v.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},u=0;8>u;u++)v.color.values[u]=Infinity,t(v.color.colors,u,c);else return e(u,"Could not convert color info: no field and no colors/stops"),
null;return v}function x(c,v,u,y){c=2===u&&"arithmetic"===c.rotationType;v.offset[u]=c?90:0;v.factor[u]=c?-1:1;v.type[u]=1}function z(c,v,u){if("string"!==typeof c.field)return e(u,"Could not convert rotation info: field is not a string"),null;if(!v.rotation)v.rotation={field:c.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(c.field)if(!v.rotation.field)v.rotation.field=c.field;else if(c.field!==v.rotation.field)return e(u,"Could not convert rotation info: multiple fields in use"),null;
switch(c.axis){case "tilt":return x(c,v.rotation,0,u),v;case "roll":return x(c,v.rotation,1,u),v;case null:case void 0:case "heading":return x(c,v.rotation,2,u),v;default:return e(u,'Could not convert rotation info: unknown axis "'+c.axis+'""'),null}}function A(c,v,u){if(!c)return null;var y=!v.supportedTypes||!!v.supportedTypes.size,C=!v.supportedTypes||!!v.supportedTypes.color,D=!v.supportedTypes||!!v.supportedTypes.rotation;return(c=c.reduce(function(E,F){if(!E)return E;if(F.valueExpression)return e(u,
"Could not convert visual variables: arcade expressions not supported"),null;switch(F.type){case "size":return y?d(F,E,v,u):E;case "color":return C?w(F,E,u):E;case "rotation":return D?z(F,E,u):E;default:return e(u,"Could not convert visual variables: unsupported type "+F.type),null}},{size:null,color:null,rotation:null}))&&c.size&&!q(c.size,v,u)?null:c}function B(c,v,u){if(!!c!==!!v||c&&c.field!==v.field)return!1;if(c&&"rotation"===u)for(u=0;3>u;u++)if(c.type[u]!==v.type[u]||c.offset[u]!==v.offset[u]||
c.factor[u]!==v.factor[u])return!1;return!0}function b(c,v){var u={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvSymbolAnchor:null,vvSymbolRotation:null},y=c&&null!=c.size;c&&c.size?(u.vvSizeEnabled=!0,u.vvSizeMinSize=c.size.minSize,u.vvSizeMaxSize=c.size.maxSize,u.vvSizeOffset=c.size.offset,u.vvSizeFactor=c.size.factor):c&&y&&(u.vvSizeValue=v.transformation.scale);c&&y&&(u.vvSymbolAnchor=
v.transformation.anchor,u.vvSymbolRotation=v.transformation.rotation);c&&c.color&&(u.vvColorEnabled=!0,u.vvColorValues=c.color.values,u.vvColorColors=c.color.colors);return u}Object.defineProperty(n,"__esModule",{value:!0});n.convertVisualVariables=A;n.initFastSymbolUpdatesState=function(c,v,u){return v&&c&&!c.disableFastUpdates?(c=A(c.visualVariables,u))?{enabled:!0,visualVariables:c,materialParameters:b(c,u),customTransformation:c&&null!=c.size}:{enabled:!1}:{enabled:!1}};n.updateFastSymbolUpdatesState=
function(c,v,u){if(!v||!c.enabled)return!1;var y=c.visualVariables;v=A(v.visualVariables,u);if(!(v&&B(y.size,v.size,"size")&&B(y.color,v.color,"color")&&B(y.rotation,v.rotation,"rotation")))return!1;c.visualVariables=v;c.materialParameters=b(v,u);c.customTransformation=v&&null!=v.size;return!0};n.getMaterialParams=b;var h;(function(c){var v=k.mat4d,u=k.vec3,y=v.create(),C=u.create();c.evaluateModelTransform=function(D,E,F){if(!D.vvSizeEnabled)return F;v.set(F,y);l.computeObjectRotation(D.vvSymbolRotation[2],
D.vvSymbolRotation[0],D.vvSymbolRotation[1],y);if(D.vvSizeEnabled){for(F=0;3>F;++F){var G=D.vvSizeOffset[F]+E[0]*D.vvSizeFactor[F],J=F;var R=D.vvSizeMinSize[F],O=D.vvSizeMaxSize[F];G=G<R?R:G>O?O:G;C[J]=G}v.scale(y,C,y)}else v.scale(y,D.vvSizeValue,y);v.translate(y,D.vvSymbolAnchor,y);return y}})(h||(h={}));n.evaluateModelTransform=h.evaluateModelTransform})},"esri/layers/vectorTiles/renderers/support/utils":function(){define(["dojo/date/locale","../../Color","../../core/lang","../../core/numberUtils",
"dojo/i18n!dojo/cldr/nls/gregorian"],function(r,n,a,l,k){function p(w){return w&&w.map(function(x){return new n(x)})}function m(w,x,z){var A="";0===x?A=f.lt+" ":x===z&&(A=f.gt+" ");return A+w}var e={},f={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},g={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},d={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},
minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},q={formatLength:"short",fullYear:!0},t={formatLength:"short"};a.mixin(e,{meterIn:{inches:1/.0254,feet:1/.3048,"us-feet":3.28084,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,
millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(w,x){var z=[];null==w||w instanceof Date||(w=new Date(w));x=x||{};x=a.mixin({},x);var A=x.selector?x.selector.toLowerCase():null,B=!A||-1<A.indexOf("time");A=!A||-1<A.indexOf("date");B&&(x.timeOptions=x.timeOptions||t,x.timeOptions&&(x.timeOptions=a.mixin({},x.timeOptions),x.timeOptions.selector=
x.timeOptions.selector||"time",z.push(x.timeOptions)));A&&(x.dateOptions=x.dateOptions||q,x.dateOptions&&(x.dateOptions=a.mixin({},x.dateOptions),x.dateOptions.selector=x.dateOptions.selector||"date",z.push(x.dateOptions)));z&&z.length?(z=z.map(function(b){return r.format(w,b)}),x=1==z.length?z[0]:k["dateTimeFormat-medium"].replace(/'/g,"").replace(/\{(\d+)\}/g,function(b,h){return z[h]})):x=r.format(w);return x},createColorStops:function(w){var x=w.values,z=w.colors,A=w.labelIndexes,B=w.isDate,b=
w.dateFormatOptions;w=[];return w=x.map(function(h,c){var v=null;if(!A||-1<A.indexOf(c)){var u;(u=B?e.formatDate(h,b):l.format(h))&&(v=m(u,c,x.length-1))}return{value:h,color:z[c],label:v}})},updateColorStops:function(w){var x=w.stops,z=w.changes,A=w.isDate,B=w.dateFormatOptions,b=[],h=x.map(function(v){return v.value});z.forEach(function(v){b.push(v.index);h[v.index]=v.value});var c=l.round(h,{indexes:b});x.forEach(function(v,u){v.value=h[u];if(null!=v.label){var y,C=null;(y=A?e.formatDate(c[u],
B):l.format(c[u]))&&(C=m(y,u,x.length-1));v.label=C}})},createClassBreakLabel:function(w){var x=w.minValue,z=w.maxValue,A=w.isFirstBreak?"":f.gt+" ";w="percent-of-total"===w.normalizationType?f.pct:"";x=null==x?"":l.format(x);z=null==z?"":l.format(z);return A+x+w+" "+f.ld+" "+z+w},setLabelsForClassBreaks:function(w){var x=w.classBreakInfos,z=w.classificationMethod,A=w.normalizationType,B=[];x&&x.length&&"standard-deviation"!==z&&(w.round?(B.push(x[0].minValue),x.forEach(function(b){B.push(b.maxValue)}),
B=l.round(B),x.forEach(function(b,h){b.label=e.createClassBreakLabel({minValue:0===h?B[0]:B[h],maxValue:B[h+1],isFirstBreak:0===h,normalizationType:A})})):x.forEach(function(b,h){b.label=e.createClassBreakLabel({minValue:b.minValue,maxValue:b.maxValue,isFirstBreak:0===h,normalizationType:A})}))},updateClassBreak:function(w){var x=w.classBreaks,z=w.normalizationType,A=w.change,B=A.index;A=A.value;var b=-1,h=-1,c=x.length;"standard-deviation"!==w.classificationMethod&&(0===B?b=B:B===c?h=B-1:(h=B-1,
b=B),-1<b&&b<c&&(w=x[b],w.minValue=A,w.label=e.createClassBreakLabel({minValue:w.minValue,maxValue:w.maxValue,isFirstBreak:0===b,normalizationType:z})),-1<h&&h<c&&(w=x[h],w.maxValue=A,w.label=e.createClassBreakLabel({minValue:w.minValue,maxValue:w.maxValue,isFirstBreak:0===h,normalizationType:z})))},calculateDateFormatInterval:function(w){var x,z,A=w.length,B=Infinity;w=w.map(function(D){return new Date(D)});for(x=0;x<A-1;x++){var b=w[x];var h=[];var c=Infinity;var v="";for(z=x+1;z<A;z++){var u=w[z];
u=b.getFullYear()!==u.getFullYear()&&"year"||b.getMonth()!==u.getMonth()&&"month"||b.getDate()!==u.getDate()&&"day"||b.getHours()!==u.getHours()&&"hour"||b.getMinutes()!==u.getMinutes()&&"minute"||b.getSeconds()!==u.getSeconds()&&"second"||"millisecond";var y=g[u];y<c&&(c=y,v=u);h.push(u)}if(c<B){B=c;var C=v}}return C},createUniqueValueLabel:function(w){var x=w.value,z=w.fieldInfo,A=w.domain;w=w.dateFormatInterval;var B=String(x);(A=A&&A.codedValues?A.getName(x):null)?B=A:"number"===typeof x&&(B=
z&&"date"===z.type?e.formatDate(x,w&&d[w]):l.format(x));return B},cloneColorVariable:function(w){if(w){var x=a.mixin({},w);x.colors=p(x.colors);x.stops=x.stops&&x.stops.map(function(z){z=a.mixin({},z);z.color&&(z.color=new n(z.color));return z});x.legendOptions&&(x.legendOptions=a.mixin({},x.legendOptions))}return x},cloneOpacityVariable:function(w){if(w){var x=a.mixin({},w);if(w=x.opacityValues)x.opacityValues=w.slice(0);if(w=x.stops)x.stops=w.map(function(z){return a.mixin({},z)});if(w=x.legendOptions)x.legendOptions=
a.mixin({},w)}return x},cloneSizeVariable:function(w){if(w){var x=a.mixin({},w);x.stops&&(x.stops=x.stops.map(function(z){return a.mixin({},z)}));(w=x.minSize)&&"object"===typeof w&&(x.minSize=e.cloneSizeVariable(w));(w=x.maxSize)&&"object"===typeof w&&(x.maxSize=e.cloneSizeVariable(w));if(w=x.legendOptions)if(x.legendOptions=a.mixin({},w),w=w.customValues)x.legendOptions.customValues=w.slice(0)}return x}});return e})},"esri/layers/vectorTiles/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],
function(r,n){function a(e,f){return e-f}var l=/^-?(\d+)(\.(\d+))?$/i,k=new RegExp("\\"+n.decimal+"0+$","g"),p=/(\d)0*$/g,m={numDigits:function(e){var f=String(e),g=f.match(l);e={integer:0,fractional:0};g&&g[1]?(e.integer=g[1].split("").length,e.fractional=g[3]?g[3].split("").length:0):-1<f.toLowerCase().indexOf("e")&&(g=f.split("e"),f=g[0],g=g[1],f&&g&&(f=Number(f),g=Number(g),(e=0<g)||(g=Math.abs(g)),f=m.numDigits(f),e?(f.integer+=g,f.fractional=g>f.fractional?0:f.fractional-g):(f.fractional+=g,
f.integer=g>f.integer?1:f.integer-g),e=f));return e},percentChange:function(e,f,g,d){var q={previous:null,next:null};if(null!=g){var t=e-g;q.previous=Math.floor(Math.abs(100*(f-g-t)/t))}null!=d&&(t=d-e,q.next=Math.floor(Math.abs(100*(d-f-t)/t)));return q},round:function(e,f){e=e.slice(0);var g,d,q=f&&null!=f.tolerance?f.tolerance:2,t=f&&f.indexes,w=f&&null!=f.strictBounds?f.strictBounds:!1;if(t)t.sort(a);else for(t=[],g=0;g<e.length;g++)t.push(g);for(g=0;g<t.length;g++){var x=t[g];f=e[x];var z=0===
x?null:e[x-1];var A=x===e.length-1?null:e[x+1];var B=m.numDigits(f);if(B=B.fractional){var b=0;for(d=!1;b<=B&&!d;){var h=void 0;var c=void 0;h=f;d=b;c=Number(h.toFixed(d));c<h?h=c+1/Math.pow(10,d):(h=c,c-=1/Math.pow(10,d));c=Number(c.toFixed(d));h=Number(h.toFixed(d));c=[c,h];c=w&&0===g?c[1]:c[0];h=d=d=void 0;var v=q,u=m.percentChange(f,c,z,A);h=null==u.previous||u.previous<=v;d=null==u.next||u.next<=v;d=h&&d||u.previous+u.next<=2*v;b++}d&&(e[x]=c)}}return e},format:function(e,f){f=f||{places:20,
round:-1};(e=r.format(e,f))&&(e=e.replace(p,"$1").replace(k,""));return e}};return m})},"esri/layers/vectorTiles/views/3d/layers/graphics/graphicUtils":function(){define("require exports ../../../../geometry ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../geometry/support/webMercatorUtils ../../../../layers/graphics/dehydratedFeatures ../../lib/glMatrix ../../support/mathUtils".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d){function q(z){var A=z.paths[0];if(!A||0===A.length)return null;A=m.getPointOnPath(A,m.getPathLength(A)/2);return f.makeDehydratedPoint(A[0],A[1],A[2],z.spatialReference)}function t(z){if(Array.isArray(z)){for(var A=0;A<z.length;A++)if(!t(z[A]))return!1;return!0}return null==z||0<=z}Object.defineProperty(n,"__esModule",{value:!0});var w=[1,1,1];n.computeCentroid=function(z){if("point"===z.type)return z;if(f.isHydratedGeometry(z))switch(z.type){case "extent":return z.center;
case "polygon":return z.centroid;case "polyline":return q(z);case "mesh":return z.extent.center}else switch(z.type){case "extent":var A=d.isFinite(z.zmin);return f.makeDehydratedPoint(.5*(z.xmax+z.xmin),.5*(z.ymax+z.ymin),A?.5*(z.zmax+z.zmin):void 0,z.spatialReference);case "polygon":return A=p.ringsCentroid(z.rings,f.hasZ(z)),f.makeDehydratedPoint(A[0],A[1],A[2],z.spatialReference);case "polyline":return q(z)}};n.convertPointSR=function(z,A){var B=z.spatialReference;B.isWebMercator&&A.isWGS84?(e.xyToLngLat(z.x,
z.y,x),z.x=x[0],z.y=x[1],z.spatialReference=a.SpatialReference.WGS84):A.isWebMercator&&B.isWGS84&&(e.lngLatToXY(z.x,z.y,x),z.x=x[0],z.y=x[1],z.spatialReference=a.SpatialReference.WebMercator)};n.enlargeExtent=function(z,A,B){if(z){A||(A=k.create());var b=.5*z.width*(B-1);B=.5*z.height*(B-1);z.width<1E-7*z.height?b+=B/20:z.height<1E-7*z.width&&(B+=b/20);g.vec4d.set4(z.xmin-b,z.ymin-B,z.xmax+b,z.ymax+B,A);return A}return null};n.updateVertexAttributeAuxpos1w=function(z,A){for(var B=0;B<z.geometries.length;++B){var b=
z.geometries[B].data.vertexAttributes.auxpos1;b&&b.data[3]!==A&&(b.data[3]=A,z.geometryVertexAttrsUpdated(B))}};n.mixinColorAndOpacity=function(z,A){var B=[1,1,1,1];null!=z&&(B[0]=z[0],B[1]=z[1],B[2]=z[2]);null!==A&&void 0!==A?B[3]=A:null!=z&&3<z.length&&(B[3]=z[3]);return B};n.overrideColor=function(z,A,B,b,h,c){void 0===c&&(c=[0,0,0,0]);for(var v=0;3>v;++v)c[v]=z&&null!=z[v]?z[v]:B&&null!=B[v]?B[v]:h[v];c[3]=null!=A?A:null!=b?b:h[3];return c};n.computeObjectScale=function(z,A,B,b){void 0===z&&(z=
w);void 0===b&&(b=1);var h=Array(3);if(null==A||null==B)h[0]=1,h[1]=1,h[2]=1;else{for(var c=void 0,v=0,u=2;0<=u;u--){var y=z[u],C=void 0,D=null!=y,E=0===u&&!c&&!D,F=B[u];"symbolValue"===y||E?C=0!==F?A[u]/F:1:D&&"proportional"!==y&&isFinite(y)&&(C=0!==F?y/F:1);null!=C&&(c=h[u]=C,v=Math.max(v,Math.abs(C)))}for(u=2;0<=u;u--)null==h[u]?h[u]=c:0===h[u]&&(h[u]=.001*v)}for(u=2;0<=u;u--)h[u]/=b;return h};n.computeSizeWithResourceSize=function(z,A){var B=A.width,b=A.depth,h=A.height;A=A.isPrimitive?10:1;if(null==
B&&null==h&&null==b)return[A*z[0],A*z[1],A*z[2]];B=[B,b,h];for(b=0;3>b;b++)if(h=B[b],null!=h){var c=h/z[b];break}for(b=0;3>b;b++)null==B[b]&&(B[b]=z[b]*c);return B};n.validateSymbolLayerSize=function(z){null!=z.isPrimitive&&(z=[z.width,z.depth,z.height]);return t(z)?null:"Symbol sizes may not be negative values"};n.computeObjectRotation=function(z,A,B,b){void 0===b&&(b=g.mat4d.identity());z=z||0;A=A||0;B=B||0;0!==z&&g.mat4d.rotateZ(b,-z/180*Math.PI,b);0!==A&&g.mat4d.rotateX(b,A/180*Math.PI,b);0!==
B&&g.mat4d.rotateY(b,B/180*Math.PI,b);return b};n.demResolutionForBoundingBox=function(z,A){return null!=A.minDemResolution?A.minDemResolution:l.isPoint(z)?A.minDemResolutionForPoints:.01*l.maximumDimension(z)};var x=[0,0]})},"esri/layers/vectorTiles/geometry":function(){define("require exports ./geometry/Extent ./geometry/Geometry ./geometry/Mesh ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/ScreenPoint ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q){Object.defineProperty(n,"__esModule",{value:!0});n.Extent=a;n.BaseGeometry=l;n.Mesh=k;n.Multipoint=p;n.Point=m;n.Polygon=e;n.Polyline=f;n.ScreenPoint=g;n.SpatialReference=d;n.isGeometry=function(t){return t instanceof n.BaseGeometry};n.fromJSON=q.fromJSON})},"esri/layers/vectorTiles/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t){function w(x,z,A){return null==z?A:null==A?z:x(z,A)}r=function(x){function z(){for(var B=0;B<arguments.length;B++);B=x.call(this)||this;B.type="extent";B.xmin=0;B.ymin=0;B.mmin=void 0;B.zmin=void 0;B.xmax=0;B.ymax=0;B.mmax=void 0;B.zmax=void 0;return B}a(z,x);var A=z;z.prototype.normalizeCtorArgs=function(B,b,h,c,v){return!B||"esri.geometry.SpatialReference"!==B.declaredClass&&null==B.wkid?"object"===typeof B?(B.spatialReference=null!=B.spatialReference?B.spatialReference:
f.WGS84,B):{xmin:B,ymin:b,xmax:h,ymax:c,spatialReference:null!=v?v:f.WGS84}:{spatialReference:B,xmin:0,ymin:0,xmax:0,ymax:0}};Object.defineProperty(z.prototype,"center",{get:function(){var B=new e({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(B.z=.5*(this.zmin+this.zmax));this.hasM&&(B.m=.5*(this.mmin+this.mmax));return B},enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,
configurable:!0});Object.defineProperty(z.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(z.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},
enumerable:!0,configurable:!0});z.prototype.centerAt=function(B){var b=this.center;return null!=B.z&&this.hasZ?this.offset(B.x-b.x,B.y-b.y,B.z-b.z):this.offset(B.x-b.x,B.y-b.y)};z.prototype.clone=function(){var B=new A;B.xmin=this.xmin;B.ymin=this.ymin;B.xmax=this.xmax;B.ymax=this.ymax;B.spatialReference=this.spatialReference;null!=this.zmin&&(B.zmin=this.zmin,B.zmax=this.zmax);null!=this.mmin&&(B.mmin=this.mmin,B.mmax=this.mmax);return B};z.prototype.contains=function(B){if(!B)return!1;var b=this.spatialReference,
h=B.spatialReference;b&&h&&!b.equals(h)&&t.canProject(b,h)&&(B=b.isWebMercator?t.geographicToWebMercator(B):t.webMercatorToGeographic(B,!0));return"point"===B.type?g.extentContainsPoint(this,B):"extent"===B.type?g.extentContainsExtent(this,B):!1};z.prototype.equals=function(B){if(!B)return!1;var b=this.spatialReference,h=B.spatialReference;b&&h&&!b.equals(h)&&t.canProject(b,h)&&(B=b.isWebMercator?t.geographicToWebMercator(B):t.webMercatorToGeographic(B,!0));return this.xmin===B.xmin&&this.ymin===
B.ymin&&this.zmin===B.zmin&&this.mmin===B.mmin&&this.xmax===B.xmax&&this.ymax===B.ymax&&this.zmax===B.zmax&&this.mmax===B.mmax};z.prototype.expand=function(B){B=.5*(1-B);var b=this.width*B,h=this.height*B;this.xmin+=b;this.ymin+=h;this.xmax-=b;this.ymax-=h;this.hasZ&&(b=(this.zmax-this.zmin)*B,this.zmin+=b,this.zmax-=b);this.hasM&&(B*=this.mmax-this.mmin,this.mmin+=B,this.mmax-=B);return this};z.prototype.intersects=function(B){if(!B)return!1;var b=this.spatialReference,h=B.spatialReference;b&&h&&
!b.equals(h)&&t.canProject(b,h)&&(B=b.isWebMercator?t.geographicToWebMercator(B):t.webMercatorToGeographic(B,!0));b=d.getExtentIntersector(B.type);return"mesh"!==B.type?b(this,B):b(this,B.extent)};z.prototype.normalize=function(){var B=this._normalize(!1,!0);return Array.isArray(B)?B:[B]};z.prototype.offset=function(B,b,h){this.xmin+=B;this.ymin+=b;this.xmax+=B;this.ymax+=b;null!=h&&(this.zmin+=h,this.zmax+=h);return this};z.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};z.prototype.union=
function(B){this.xmin=Math.min(this.xmin,B.xmin);this.ymin=Math.min(this.ymin,B.ymin);this.xmax=Math.max(this.xmax,B.xmax);this.ymax=Math.max(this.ymax,B.ymax);if(this.hasZ||B.hasZ)this.zmin=w(Math.min,this.zmin,B.zmin),this.zmax=w(Math.max,this.zmax,B.zmax);if(this.hasM||B.hasM)this.mmin=w(Math.min,this.mmin,B.mmin),this.mmax=w(Math.max,this.mmax,B.mmax);return this};z.prototype.intersection=function(B){if(!this.intersects(B))return null;this.xmin=Math.max(this.xmin,B.xmin);this.ymin=Math.max(this.ymin,
B.ymin);this.xmax=Math.min(this.xmax,B.xmax);this.ymax=Math.min(this.ymax,B.ymax);if(this.hasZ||B.hasZ)this.zmin=w(Math.max,this.zmin,B.zmin),this.zmax=w(Math.min,this.zmax,B.zmax);if(this.hasM||B.hasM)this.mmin=w(Math.max,this.mmin,B.mmin),this.mmax=w(Math.min,this.mmax,B.mmax);return this};z.prototype.toJSON=function(B){return this.write(null,B)};z.prototype._shiftCM=function(B){void 0===B&&(B=q.getInfo(this.spatialReference));if(!B||!this.spatialReference)return this;var b=this.spatialReference,
h=this._getCM(B);if(h){var c=b.isWebMercator?t.webMercatorToGeographic(h):h;this.xmin-=h.x;this.xmax-=h.x;b.isWebMercator||(c.x=this._normalizeX(c.x,B).x);this.spatialReference=new f(k.substitute({Central_Meridian:c.x},b.isWGS84?B.altTemplate:B.wkTemplate))}return this};z.prototype._getCM=function(B){var b=null,h=B.valid;B=h[0];h=h[1];var c=this.xmin,v=this.xmax;c>=B&&c<=h&&v>=B&&v<=h||(b=this.center);return b};z.prototype._normalize=function(B,b,h){var c=this.spatialReference;if(!c)return this;h=
h||q.getInfo(c);if(!h)return this;var v=this._getParts(h).map(function(C){return C.extent});if(2>v.length)return v[0]||this;if(2<v.length)return B?this._shiftCM(h):this.set({xmin:h.valid[0],xmax:h.valid[1]});if(B)return this._shiftCM(h);if(b)return v;var u=!0,y=!0;v.forEach(function(C){C.hasZ||(u=!1);C.hasM||(y=!1)});return{rings:v.map(function(C){var D=[[C.xmin,C.ymin],[C.xmin,C.ymax],[C.xmax,C.ymax],[C.xmax,C.ymin],[C.xmin,C.ymin]];if(u)for(var E=(C.zmax-C.zmin)/2,F=0;F<D.length;F++)D[F].push(E);
if(y)for(C=(C.mmax-C.mmin)/2,F=0;F<D.length;F++)D[F].push(C);return D}),hasZ:u,hasM:y,spatialReference:c}};z.prototype._getParts=function(B){var b=this.cache._parts;if(!b){b=[];var h=this.ymin,c=this.ymax,v=this.spatialReference,u=this.width,y=this.xmin,C=this.xmax,D=void 0;B=B||q.getInfo(v);var E=B.valid,F=E[0],G=E[1];D=this._normalizeX(this.xmin,B);var J=D.x;E=D.frameId;D=this._normalizeX(this.xmax,B);var R=D.x;B=D.frameId;D=J===R&&0<u;if(u>2*G){u=new A(y<C?J:R,h,G,c,v);y=new A(F,h,y<C?R:J,c,v);
C=new A(0,h,G,c,v);h=new A(F,h,0,c,v);c=[];v=[];u.contains(C)&&c.push(E);u.contains(h)&&v.push(E);y.contains(C)&&c.push(B);y.contains(h)&&v.push(B);for(F=E+1;F<B;F++)c.push(F),v.push(F);b.push({extent:u,frameIds:[E]},{extent:y,frameIds:[B]},{extent:C,frameIds:c},{extent:h,frameIds:v})}else J>R||D?b.push({extent:new A(J,h,G,c,v),frameIds:[E]},{extent:new A(F,h,R,c,v),frameIds:[B]}):b.push({extent:new A(J,h,R,c,v),frameIds:[E]});this.cache._parts=b}B=this.hasZ;h=this.hasM;if(B||h)for(E={},B&&(E.zmin=
this.zmin,E.zmax=this.zmax),h&&(E.mmin=this.mmin,E.mmax=this.mmax),B=0;B<b.length;B++)b[B].extent.set(E);return b};z.prototype._normalizeX=function(B,b){var h=b.valid;b=h[0];var c=h[1];h=2*c;var v=0;B>c?(b=Math.ceil(Math.abs(B-c)/h),B-=b*h,v=b):B<b&&(b=Math.ceil(Math.abs(B-b)/h),B+=b*h,v=-b);return{x:B,frameId:v}};l([p.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],z.prototype,"cache",void 0);l([p.property({readOnly:!0,dependsOn:["cache"]})],z.prototype,
"center",null);l([p.property({readOnly:!0,dependsOn:["cache"]})],z.prototype,"extent",null);l([p.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],z.prototype,"hasM",null);l([p.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],z.prototype,"hasZ",null);l([p.property({readOnly:!0,dependsOn:["ymin","ymax"]})],z.prototype,"height",null);l([p.property({readOnly:!0,dependsOn:["xmin","xmax"]})],z.prototype,"width",
null);l([p.property({type:Number,json:{write:!0}})],z.prototype,"xmin",void 0);l([p.property({type:Number,json:{write:!0}})],z.prototype,"ymin",void 0);l([p.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],z.prototype,"mmin",void 0);l([p.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],z.prototype,"zmin",void 0);l([p.property({type:Number,json:{write:!0}})],
z.prototype,"xmax",void 0);l([p.property({type:Number,json:{write:!0}})],z.prototype,"ymax",void 0);l([p.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],z.prototype,"mmax",void 0);l([p.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],z.prototype,"zmax",void 0);return z=A=l([p.subclass("esri.geometry.Extent")],z)}(p.declared(m));r.prototype.toJSON.isDefaultToJSON=
!0;return r})},"esri/layers/vectorTiles/geometry/support/contains":function(){define(["require","exports"],function(r,n){function a(p,m,e,f){return m>=p.xmin&&m<=p.xmax&&e>=p.ymin&&e<=p.ymax?null!=f&&p.hasZ?f>=p.zmin&&f<=p.zmax:!0:!1}function l(p,m){if(p=p.rings)if(Array.isArray(p[0][0])){for(var e=!1,f=0,g=p.length;f<g;f++)e=k(e,p[f],m);m=e}else m=k(!1,p,m);else m=!1;return m}function k(p,m,e){var f=e[0];e=e[1];for(var g=0,d=0,q=m.length;d<q;d++){g++;g===q&&(g=0);var t=m[d],w=t[0];t=t[1];var x=m[g],
z=x[0];x=x[1];(t<e&&x>=e||x<e&&t>=e)&&w+(e-t)/(x-t)*(z-w)<f&&(p=!p)}return p}Object.defineProperty(n,"__esModule",{value:!0});n.extentContainsPoint=function(p,m){return a(p,m.x,m.y,m.z)};n.extentContainsExtent=function(p,m){var e=m.xmin,f=m.ymin,g=m.zmin,d=m.xmax,q=m.ymax,t=m.zmax;return p.hasZ&&m.hasZ?a(p,e,f,g)&&a(p,e,q,g)&&a(p,d,q,g)&&a(p,d,f,g)&&a(p,e,f,t)&&a(p,e,q,t)&&a(p,d,q,t)&&a(p,d,f,t):a(p,e,f)&&a(p,e,q)&&a(p,d,q)&&a(p,d,f)};n.extentContainsCoords2D=function(p,m){return a(p,m[0],m[1])};
n.extentContainsCoords3D=function(p,m){return a(p,m[0],m[1],m[2])};n.polygonContainsPoint=function(p,m){return l(p,[m.x,m.y])};n.polygonContainsCoords=l})},"esri/layers/vectorTiles/geometry/support/intersects":function(){define(["require","exports","./contains"],function(r,n,a){function l(B,b){return a.extentContainsPoint(B,b)}function k(B,b){var h=B.hasZ&&b.hasZ;if(B.xmin<=b.xmin){var c=b.xmin;if(B.xmax<c)return!1}else if(c=B.xmin,b.xmax<c)return!1;if(B.ymin<=b.ymin){if(c=b.ymin,B.ymax<c)return!1}else if(c=
B.ymin,b.ymax<c)return!1;if(h&&b.hasZ)if(B.zmin<=b.zmin){if(h=b.zmin,B.zmax<h)return!1}else if(h=B.zmin,b.zmax<h)return!1;return!0}function p(B,b){var h=b.hasZ?a.extentContainsCoords3D:a.extentContainsCoords2D,c=0;for(b=b.points;c<b.length;c++)if(h(B,b[c]))return!0;return!1}function m(B,b){d[0]=B.xmin;d[1]=B.ymax;q[0]=B.xmax;q[1]=B.ymax;t[0]=B.xmin;t[1]=B.ymin;w[0]=B.xmax;w[1]=B.ymin;for(var h=0,c=x;h<c.length;h++)if(a.polygonContainsCoords(b,c[h]))return!0;h=0;for(b=b.rings;h<b.length;h++)if(c=b[h],
c.length){var v=c[0];if(a.extentContainsCoords2D(B,v))return!0;for(var u=1;u<c.length;u++){var y=c[u];if(a.extentContainsCoords2D(B,y)||f(v,y,z))return!0;v=y}}return!1}function e(B,b){d[0]=B.xmin;d[1]=B.ymax;q[0]=B.xmax;q[1]=B.ymax;t[0]=B.xmin;t[1]=B.ymin;w[0]=B.xmax;w[1]=B.ymin;b=b.paths;for(var h=0;h<b.length;h++){var c=b[h];if(b.length){var v=c[0];if(a.extentContainsCoords2D(B,v))return!0;for(var u=1;u<c.length;u++){var y=c[u];if(a.extentContainsCoords2D(B,y)||f(v,y,z))return!0;v=y}}}return!1}
function f(B,b,h){for(var c=0;c<h.length;c++)if(g(B,b,h[c][0],h[c][1]))return!0;return!1}function g(B,b,h,c,v){var u=B[0];B=B[1];var y=b[0];b=b[1];var C=h[0],D=h[1];h=c[0]-C;C=u-C;var E=y-u;c=c[1]-D;D=B-D;var F=b-B,G=c*E-h*F;if(0===G)return!1;h=(h*D-c*C)/G;C=(E*D-F*C)/G;return 0<=h&&1>=h&&0<=C&&1>=C?(v&&(v[0]=u+h*(y-u),v[1]=B+h*(b-B)),!0):!1}Object.defineProperty(n,"__esModule",{value:!0});n.extentIntersectsPoint=l;n.extentIntersectsExtent=k;n.extentIntersectsMultipoint=p;var d=[0,0],q=[0,0],t=[0,
0],w=[0,0],x=[d,q,t,w],z=[[t,d],[d,q],[q,w],[w,t]];n.extentIntersectsPolygon=m;n.extentIntersectsPolyline=e;var A=[0,0];n.isSelfIntersecting=function(B){for(var b=0;b<B.length;b++){for(var h=B[b],c=0;c<h.length-1;c++)for(var v=h[c],u=h[c+1],y=b+1;y<B.length;y++)for(var C=0;C<B[y].length-1;C++){var D=B[y][C],E=B[y][C+1],F=g(v,u,D,E,A);if(F&&!(A[0]===v[0]&&A[1]===v[1]||A[0]===D[0]&&A[1]===D[1]||A[0]===u[0]&&A[1]===u[1]||A[0]===E[0]&&A[1]===E[1]))return!0}C=h.length;if(!(4>=C))for(c=0;c<C-3;c++){var G=
C-1;0===c&&(G=C-2);v=h[c];u=h[c+1];for(y=c+2;y<G;y++)if(D=h[y],E=h[y+1],(F=g(v,u,D,E,A))&&!(A[0]===v[0]&&A[1]===v[1]||A[0]===D[0]&&A[1]===D[1]||A[0]===u[0]&&A[1]===u[1]||A[0]===E[0]&&A[1]===E[1]))return!0}}return!1};n.segmentIntersects=g;n.getExtentIntersector=function(B){switch(B){case "esriGeometryEnvelope":case "extent":return k;case "esriGeometryMultipoint":case "multipoint":return p;case "esriGeometryPoint":case "point":return l;case "esriGeometryPolygon":case "polygon":return m;case "esriGeometryPolyline":case "polyline":return e;
case "mesh":return k}}})},"esri/layers/vectorTiles/geometry/Mesh":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Geometry"],function(r,n,a,l){return function(k){function p(m){return k.call(this)||this}a(p,k);p.prototype.clone=function(){return new p};return p}(l)})},"esri/layers/vectorTiles/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
function(r,n,a,l,k,p,m,e,f,g){function d(q){return function(t,w){return null==t?w:null==w?t:q(t,w)}}r=function(q){function t(){for(var x=0;x<arguments.length;x++);x=q.call(this)||this;x.points=[];x.type="multipoint";return x}a(t,q);var w=t;t.prototype.normalizeCtorArgs=function(x,z){if(!x&&!z)return null;var A={};Array.isArray(x)?(A.points=x,A.spatialReference=z):!x||"esri.geometry.SpatialReference"!==x.declaredClass&&null==x.wkid?(x.points&&(A.points=x.points),x.spatialReference&&(A.spatialReference=
x.spatialReference),x.hasZ&&(A.hasZ=x.hasZ),x.hasM&&(A.hasM=x.hasM)):A.spatialReference=x;if(x=A.points&&A.points[0])void 0===A.hasZ&&void 0===A.hasM?(A.hasZ=2<x.length,A.hasM=!1):void 0===A.hasZ?A.hasZ=3<x.length:void 0===A.hasM&&(A.hasM=3<x.length);return A};Object.defineProperty(t.prototype,"extent",{get:function(){var x=this.points;if(!x.length)return null;var z=new m,A=this.hasZ,B=this.hasM,b=A?3:2,h=x[0],c=d(Math.min),v=d(Math.max),u=h[0],y=h[1],C=h[0];h=h[1];for(var D,E,F,G,J=0,R=x.length;J<
R;J++){var O=x[J],P=O[0],U=O[1];u=c(u,P);y=c(y,U);C=v(C,P);h=v(h,U);A&&2<O.length&&(P=O[2],D=c(D,P),F=v(F,P));B&&O.length>b&&(O=O[b],E=c(E,O),G=v(G,O))}z.xmin=u;z.ymin=y;z.xmax=C;z.ymax=h;z.spatialReference=this.spatialReference;A?(z.zmin=D,z.zmax=F):(z.zmin=null,z.zmax=null);B?(z.mmin=E,z.mmax=G):(z.mmin=null,z.mmax=null);return z},enumerable:!0,configurable:!0});t.prototype.writePoints=function(x,z,A,B){z.points=k.clone(this.points)};t.prototype.addPoint=function(x){this.clearCache();g.updateSupportFromPoint(this,
x);Array.isArray(x)?this.points.push(x):this.points.push(x.toArray());return this};t.prototype.clone=function(){var x={points:k.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(x.hasZ=!0);this.hasM&&(x.hasM=!0);return new w(x)};t.prototype.getPoint=function(x){if(!this._validateInputs(x))return null;x=this.points[x];var z={x:x[0],y:x[1],spatialReference:this.spatialReference},A=2;this.hasZ&&(z.z=x[2],A=3);this.hasM&&(z.m=x[A]);return new f(z)};t.prototype.removePoint=function(x){if(!this._validateInputs(x))return null;
this.clearCache();return new f(this.points.splice(x,1)[0],this.spatialReference)};t.prototype.setPoint=function(x,z){if(!this._validateInputs(x))return this;this.clearCache();g.updateSupportFromPoint(z);this.points[x]=z.toArray();return this};t.prototype.toJSON=function(x){return this.write(null,x)};t.prototype._validateInputs=function(x){return null!=x&&0<=x&&x<this.points.length};l([p.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],t.prototype,"cache",void 0);l([p.property({dependsOn:["cache"]})],
t.prototype,"extent",null);l([p.property({type:[[Number]],json:{write:{isRequired:!0}}})],t.prototype,"points",void 0);l([p.writer("points")],t.prototype,"writePoints",null);return t=w=l([p.subclass("esri.geometry.Multipoint")],t)}(p.declared(e));r.prototype.toJSON.isDefaultToJSON=!0;return r})},"esri/layers/vectorTiles/geometry/support/zmUtils":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});n.updateSupportFromPoint=function(a,l,k){void 0===
k&&(k=!1);var p=a.hasM,m=a.hasZ;Array.isArray(l)?4!==l.length||p||m?3===l.length&&k&&!p?(m=!0,p=!1):3===l.length&&p&&m&&(m=p=!1):m=p=!0:(m=!m&&l.hasZ&&(!p||l.hasM),p=!p&&l.hasM&&(!m||l.hasZ));a.hasZ=m;a.hasM=p}})},"esri/layers/vectorTiles/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z){function A(h){return function(c,v){return null==c?v:null==v?c:h(c,v)}}var B=A(Math.min),b=A(Math.max);r=function(h){function c(){for(var u=0;u<arguments.length;u++);u=h.call(this)||this;u.rings=[];u.type="polygon";return u}a(c,h);var v=c;c.createEllipse=function(u){var y=u.center.x,C=u.center.y,D=u.center.z,E=u.center.m,F=u.center.hasZ,G=u.center.hasM,J=u.longAxis,R=u.shortAxis,O=u.numberOfPoints;u=u.view;for(var P=[],U=2*Math.PI/O,K=F?3:2,V=0;V<O;V++){var Q=
u.toMap(J*Math.cos(V*U)+y,R*Math.sin(V*U)+C);Q=[Q.x,Q.y];F&&(Q[2]=D);G&&(Q[K]=E);P.push(Q)}P.push(P[0]);return new v({rings:[P],spatialReference:u.spatialReference})};c.createCircle=function(u){return v.createEllipse({center:u.center,longAxis:u.r,shortAxis:u.r,numberOfPoints:u.numberOfPoints,view:u.view})};c.fromExtent=function(u){var y=u.clone().normalize();u=u.spatialReference;var C=!1,D=!1;y.map(function(E){E.hasZ&&(C=!0);E.hasM&&(D=!0)});y={rings:y.map(function(E){var F=[[E.xmin,E.ymin],[E.xmin,
E.ymax],[E.xmax,E.ymax],[E.xmax,E.ymin],[E.xmin,E.ymin]];if(C&&E.hasZ)for(var G=E.zmin+.5*(E.zmax-E.zmin),J=0;J<F.length;J++)F[J].push(G);if(D&&E.hasM)for(E=E.mmin+.5*(E.mmax-E.mmin),J=0;J<F.length;J++)F[J].push(E);return F}),spatialReference:u};C&&(y.hasZ=!0);D&&(y.hasM=!0);return new v(y)};c.prototype.normalizeCtorArgs=function(u,y){var C=null,D=null;if(u&&!Array.isArray(u)){C=u.rings?u.rings:null;y||(u.spatialReference?y=u.spatialReference:u.rings||(y=u));var E=u.hasZ;var F=u.hasM}else C=u;C=C||
[];y=y||g.WGS84;C.length&&C[0]&&null!=C[0][0]&&"number"===typeof C[0][0]&&(C=[C]);if(D=C[0]&&C[0][0])void 0===E&&void 0===F?(E=2<D.length,F=!1):void 0===E?E=!F&&3<D.length:void 0===F&&(F=!E&&3<D.length);return{rings:C,spatialReference:y,hasZ:E,hasM:F}};Object.defineProperty(c.prototype,"centroid",{get:function(){var u=d.polygonCentroid(this);if(!u||isNaN(u[0])||isNaN(u[1])||this.hasZ&&isNaN(u[2]))return null;var y=new f;y.x=u[0];y.y=u[1];y.spatialReference=this.spatialReference;this.hasZ&&(y.z=u[2]);
return y},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extent",{get:function(){var u=this.hasZ,y=this.hasM,C=this.spatialReference,D=this.rings,E=u?3:2;if(!D.length||!D[0].length)return null;var F=D[0][0],G=F[0];F=F[1];var J=D[0][0],R=J[0];J=J[1];for(var O=void 0,P=void 0,U=void 0,K=void 0,V=[],Q=0;Q<D.length;Q++){var W=D[Q],N=W[0],I=N[0];N=N[1];var S=W[0],Z=S[0];S=S[1];for(var ca=void 0,fa=void 0,ha=void 0,na=void 0,ma=0;ma<W.length;ma++){var ra=W[ma],sa=ra[0],ba=ra[1];G=B(G,
sa);F=B(F,ba);R=b(R,sa);J=b(J,ba);I=B(I,sa);N=B(N,ba);Z=b(Z,sa);S=b(S,ba);u&&2<ra.length&&(sa=ra[2],O=B(O,sa),P=b(P,sa),ca=B(ca,sa),fa=b(fa,sa));y&&ra.length>E&&(na=ra[E],U=B(O,na),K=b(P,na),ha=B(ca,na),na=b(fa,na))}V.push(new m({xmin:I,ymin:N,zmin:ca,mmin:ha,xmax:Z,ymax:S,zmax:fa,mmax:na,spatialReference:C}))}D=new m;D.xmin=G;D.ymin=F;D.xmax=R;D.ymax=J;D.spatialReference=C;u&&(D.zmin=O,D.zmax=P);y&&(D.mmin=U,D.mmax=K);D.cache._partwise=1<V.length?V:null;return D},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"isSelfIntersecting",{get:function(){return w.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});c.prototype.writePaths=function(u,y,C,D){y.rings=k.clone(this.rings)};c.prototype.addRing=function(u){if(u){this.clearCache();var y=this.rings,C=y.length;if(Array.isArray(u[0]))y[C]=u.concat();else{for(var D=[],E=0,F=u.length;E<F;E++)D[E]=u[E].toArray();y[C]=D}return this}};c.prototype.clone=function(){var u=new v;u.spatialReference=this.spatialReference;
u.rings=k.clone(this.rings);u.hasZ=this.hasZ;u.hasM=this.hasM;return u};c.prototype.contains=function(u){if(!u)return!1;x.canProject(u,this.spatialReference)&&(u=x.project(u,this.spatialReference));return q.polygonContainsPoint(this,u)};c.prototype.isClockwise=function(u){var y=this;u=Array.isArray(u[0])?u:u.map(function(C){return y.hasZ?y.hasM?[C.x,C.y,C.z,C.m]:[C.x,C.y,C.z]:[C.x,C.y]});return t.isClockwise(u,this.hasM,this.hasZ)};c.prototype.getPoint=function(u,y){if(!this._validateInputs(u,y))return null;
u=this.rings[u][y];y=this.hasZ;var C=this.hasM;return y&&!C?new f(u[0],u[1],u[2],void 0,this.spatialReference):C&&!y?new f(u[0],u[1],void 0,u[2],this.spatialReference):y&&C?new f(u[0],u[1],u[2],u[3],this.spatialReference):new f(u[0],u[1],this.spatialReference)};c.prototype.insertPoint=function(u,y,C){if(!this._validateInputs(u,y,!0))return this;this.clearCache();z.updateSupportFromPoint(this,C);Array.isArray(C)||(C=C.toArray());this.rings[u].splice(y,0,C);return this};c.prototype.removePoint=function(u,
y){if(!this._validateInputs(u,y))return null;this.clearCache();return new f(this.rings[u].splice(y,1)[0],this.spatialReference)};c.prototype.removeRing=function(u){if(!this._validateInputs(u,null))return null;this.clearCache();u=this.rings.splice(u,1)[0];var y=this.spatialReference;return u.map(function(C){return new f(C,y)})};c.prototype.setPoint=function(u,y,C){if(!this._validateInputs(u,y))return this;this.clearCache();z.updateSupportFromPoint(this,C);Array.isArray(C)||(C=C.toArray());this.rings[u][y]=
C;return this};c.prototype._validateInputs=function(u,y,C){void 0===C&&(C=!1);return null==u||0>u||u>=this.rings.length||null!=y&&(u=this.rings[u],C&&(0>y||y>u.length)||!C&&(0>y||y>=u.length))?!1:!0};c.prototype.toJSON=function(u){return this.write(null,u)};l([p.property({dependsOn:["hasM","hasZ","rings"]})],c.prototype,"cache",void 0);l([p.property({readOnly:!0,dependsOn:["cache"]})],c.prototype,"centroid",null);l([p.property({dependsOn:["cache"],readOnly:!0})],c.prototype,"extent",null);l([p.property({dependsOn:["cache"],
readOnly:!0})],c.prototype,"isSelfIntersecting",null);l([p.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],c.prototype,"rings",void 0);l([p.writer("rings")],c.prototype,"writePaths",null);return c=v=l([p.subclass("esri.geometry.Polygon")],c)}(p.declared(e));r.prototype.toJSON.isDefaultToJSON=!0;return r})},"esri/layers/vectorTiles/geometry/support/centroid":function(){define(["require","exports","../support/coordsUtils"],function(r,n,a){function l(m,e){if(!m||!m.length)return null;for(var f=
[],g=[],d=e?[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],q=0,t=m.length;q<t;q++){var w=k(m[q],e,d);w&&g.push(w)}g.sort(function(x,z){var A=x[2]-z[2];0===A&&e&&(A=x[4]-z[4]);return A});g.length&&(q=6*g[0][2],f[0]=g[0][0]/q,f[1]=g[0][1]/q,e&&(q=6*g[0][4],f[2]=0!==q?g[0][3]/q:0),f[0]<d[0]||f[0]>d[1]||f[1]<d[2]||f[1]>d[3]||e&&(f[2]<d[4]||f[2]>d[5]))&&(f.length=0);if(!f.length)if(m=m[0]&&m[0].length?p(m[0],e):null)f[0]=m[0],f[1]=m[1],e&&2<m.length&&
(f[2]=m[2]);else return null;return f}function k(m,e,f){for(var g=0,d=0,q=0,t=0,w=0,x=0,z=m.length-1;x<z;x++){var A=m[x],B=A[0],b=A[1],h=A[2],c=m[x+1],v=c[0],u=c[1],y=c[2],C=B*u-v*b;t+=C;g+=(B+v)*C;d+=(b+u)*C;e&&2<A.length&&2<c.length&&(C=B*y-v*h,q+=(h+y)*C,w+=C);B<f[0]&&(f[0]=B);B>f[1]&&(f[1]=B);b<f[2]&&(f[2]=b);b>f[3]&&(f[3]=b);e&&(h<f[4]&&(f[4]=h),h>f[5]&&(f[5]=h))}0<t&&(t*=-1);0<w&&(w*=-1);if(!t)return null;m=[g,d,.5*t];e&&(m[3]=q,m[4]=.5*w);return m}function p(m,e){for(var f=e?[0,0,0]:[0,0],
g=e?[0,0,0]:[0,0],d=0,q=0,t=0,w=0,x=0,z=m.length;x<z-1;x++){var A=m[x],B=m[x+1];if(A&&B){f[0]=A[0];f[1]=A[1];g[0]=B[0];g[1]=B[1];e&&2<A.length&&2<B.length&&(f[2]=A[2],g[2]=B[2]);var b=a.getLength(f,g);b&&(d+=b,A=a.getMidpoint(A,B),q+=b*A[0],t+=b*A[1],e&&2<A.length&&(w+=b*A[2]))}}return 0<d?e?[q/d,t/d,w/d]:[q/d,t/d]:m.length?m[0]:null}Object.defineProperty(n,"__esModule",{value:!0});n.extentCentroid=function(m){return m?m.hasZ?[m.xmax-m.xmin/2,m.ymax-m.ymin/2,m.zmax-m.zmin/2]:[m.xmax-m.xmin/2,m.ymax-
m.ymin/2]:null};n.polygonCentroid=function(m){return m?l(m.rings,m.hasZ):null};n.ringsCentroid=l;n.lineCentroid=p})},"esri/layers/vectorTiles/geometry/support/coordsUtils":function(){define(["require","exports"],function(r,n){function a(k,p){var m=p[0]-k[0],e=p[1]-k[1];return 2<k.length&&2<p.length?(k=k[2]-p[2],Math.sqrt(m*m+e*e+k*k)):Math.sqrt(m*m+e*e)}function l(k,p,m){var e=k[0]+m*(p[0]-k[0]),f=k[1]+m*(p[1]-k[1]);return 2<k.length&&2<p.length?[e,f,k[2]+m*(p[2]-k[2])]:[e,f]}Object.defineProperty(n,
"__esModule",{value:!0});n.geometryToCoordinates=function(k){if(!k)return null;if(Array.isArray(k))return k;var p=k.hasZ,m=k.hasM;if("point"===k.type)return m&&p?[k.x,k.y,k.z,k.m]:p?[k.x,k.y,k.z]:m?[k.x,k.y,k.m]:[k.x,k.y];if("polygon"===k.type)return k.rings.slice(0);if("polyline"===k.type)return k.paths.slice(0);if("multipoint"===k.type)return k.points.slice(0);if("extent"===k.type){k=k.clone().normalize();if(!k)return null;var e=!1,f=!1;k.forEach(function(g){g.hasZ&&(e=!0);g.hasM&&(f=!0)});return k.map(function(g){var d=
[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]];if(e&&g.hasZ)for(var q=.5*(g.zmax-g.zmin),t=0;t<d.length;t++)d[t].push(q);if(f&&g.hasM)for(g=.5*(g.mmax-g.mmin),t=0;t<d.length;t++)d[t].push(g);return d})}return null};n.getLength=a;n.getMidpoint=function(k,p){return l(k,p,.5)};n.getPathLength=function(k){for(var p=k.length,m=0,e=0;e<p-1;++e)m+=a(k[e],k[e+1]);return m};n.getPointOnPath=function(k,p){if(0>=p)return k[0];for(var m=k.length,e=0,f=0;f<m-1;++f){var g=a(k[f],
k[f+1]);if(p-e<g)return l(k[f],k[f+1],(p-e)/g);e+=g}return k[m-1]};n.isClockwise=function(k,p,m){for(var e=k.length,f=0,g=0,d=0,q=0;q<e;q++){var t=k[q],w=k[(q+1)%e],x=2;f+=t[0]*w[1]-w[0]*t[1];2<t.length&&2<w.length&&m&&(g+=t[0]*w[2]-w[0]*t[2],x=3);t.length>x&&w.length>x&&p&&(d+=t[0]*w[x]-w[0]*t[x])}return 0>=f&&0>=g&&0>=d}})},"esri/layers/vectorTiles/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/zmUtils".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d){function q(x){return function(z,A){return null==z?A:null==A?z:x(z,A)}}var t=q(Math.min),w=q(Math.max);r=function(x){function z(){for(var B=0;B<arguments.length;B++);B=x.call(this)||this;B.paths=[];B.type="polyline";return B}a(z,x);var A=z;z.prototype.normalizeCtorArgs=function(B,b){var h=null,c=null;if(B&&!Array.isArray(B)){h=B.paths?B.paths:null;b||(B.spatialReference?b=B.spatialReference:B.paths||(b=B));var v=B.hasZ;var u=B.hasM}else h=B;h=h||[];b=b||g.WGS84;h.length&&
h[0]&&null!=h[0][0]&&"number"===typeof h[0][0]&&(h=[h]);if(c=h[0]&&h[0][0])void 0===v&&void 0===u?(v=2<c.length,u=!1):void 0===v?v=!u&&3<c.length:void 0===u&&(u=!v&&3<c.length);return{paths:h,spatialReference:b,hasZ:v,hasM:u}};Object.defineProperty(z.prototype,"extent",{get:function(){var B=this.hasZ,b=this.hasM,h=this.spatialReference,c=this.paths,v=B?3:2;if(!c.length||!c[0].length)return null;var u=c[0][0],y=u[0];u=u[1];var C=c[0][0],D=C[0];C=C[1];for(var E=void 0,F=void 0,G=void 0,J=void 0,R=[],
O=0;O<c.length;O++){var P=c[O],U=P[0],K=U[0];U=U[1];var V=P[0],Q=V[0];V=V[1];for(var W=void 0,N=void 0,I=void 0,S=void 0,Z=0;Z<P.length;Z++){var ca=P[Z],fa=ca[0],ha=ca[1];y=t(y,fa);u=t(u,ha);D=w(D,fa);C=w(C,ha);K=t(K,fa);U=t(U,ha);Q=w(Q,fa);V=w(V,ha);B&&2<ca.length&&(fa=ca[2],E=t(E,fa),F=w(F,fa),W=t(W,fa),N=w(N,fa));b&&ca.length>v&&(S=ca[v],G=t(E,S),J=w(F,S),I=t(W,S),S=w(N,S))}R.push(new m({xmin:K,ymin:U,zmin:W,mmin:I,xmax:Q,ymax:V,zmax:N,mmax:S,spatialReference:h}))}c=new m;c.xmin=y;c.ymin=u;c.xmax=
D;c.ymax=C;c.spatialReference=h;B&&(c.zmin=E,c.zmax=F);b&&(c.mmin=G,c.mmax=J);c.cache._partwise=1<R.length?R:null;return c},enumerable:!0,configurable:!0});z.prototype.writePaths=function(B,b,h,c){b.paths=k.clone(this.paths)};z.prototype.addPath=function(B){if(B){this.clearCache();var b=this.paths,h=b.length;if(Array.isArray(B[0]))b[h]=B.concat();else{for(var c=[],v=0,u=B.length;v<u;v++)c[v]=B[v].toArray();b[h]=c}return this}};z.prototype.clone=function(){var B=new A;B.spatialReference=this.spatialReference;
B.paths=k.clone(this.paths);B.hasZ=this.hasZ;B.hasM=this.hasM;return B};z.prototype.getPoint=function(B,b){if(!this._validateInputs(B,b))return null;B=this.paths[B][b];b=this.hasZ;var h=this.hasM;return b&&!h?new f(B[0],B[1],B[2],void 0,this.spatialReference):h&&!b?new f(B[0],B[1],void 0,B[2],this.spatialReference):b&&h?new f(B[0],B[1],B[2],B[3],this.spatialReference):new f(B[0],B[1],this.spatialReference)};z.prototype.insertPoint=function(B,b,h){if(!this._validateInputs(B,b,!0))return this;this.clearCache();
d.updateSupportFromPoint(this,h);Array.isArray(h)||(h=h.toArray());this.paths[B].splice(b,0,h);return this};z.prototype.removePath=function(B){if(!this._validateInputs(B,null))return null;this.clearCache();B=this.paths.splice(B,1)[0];var b=this.spatialReference;return B.map(function(h){return new f(h,b)})};z.prototype.removePoint=function(B,b){if(!this._validateInputs(B,b))return null;this.clearCache();return new f(this.paths[B].splice(b,1)[0],this.spatialReference)};z.prototype.setPoint=function(B,
b,h){if(!this._validateInputs(B,b))return this;this.clearCache();d.updateSupportFromPoint(this,h);Array.isArray(h)||(h=h.toArray());this.paths[B][b]=h;return this};z.prototype._validateInputs=function(B,b,h){void 0===h&&(h=!1);return null==B||0>B||B>=this.paths.length||null!=b&&(B=this.paths[B],h&&(0>b||b>B.length)||!h&&(0>b||b>=B.length))?!1:!0};z.prototype.toJSON=function(B){return this.write(null,B)};l([p.property({dependsOn:["hasM","hasZ","paths"]})],z.prototype,"cache",void 0);l([p.property({dependsOn:["cache"],
readOnly:!0})],z.prototype,"extent",null);l([p.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],z.prototype,"paths",void 0);l([p.writer("paths")],z.prototype,"writePaths",null);return z=A=l([p.subclass("esri.geometry.Polyline")],z)}(p.declared(e));r.prototype.toJSON.isDefaultToJSON=!0;return r})},"esri/layers/vectorTiles/geometry/ScreenPoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),
function(r,n,a,l,k,p){return function(m){function e(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];g=m.apply(this,g)||this;g.x=0;g.y=0;g.z=void 0;return g}a(e,m);var f=e;e.prototype.normalizeCtorArgs=function(g,d){return"number"===typeof g?{x:g,y:d}:Array.isArray(g)?{x:g[0],y:g[1]}:g};e.prototype.clone=function(){return new f({x:this.x,y:this.y,z:this.z})};e.prototype.toArray=function(){return null==this.z?[this.x,this.y]:[this.x,this.y,this.z]};l([p.property({type:Number})],e.prototype,
"x",void 0);l([p.property({type:Number})],e.prototype,"y",void 0);l([p.property({type:Number})],e.prototype,"z",void 0);return e=f=l([p.subclass("esri.geometry.ScreenPoint")],e)}(p.declared(k))})},"esri/layers/vectorTiles/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(r,n,a,l,k,p,m){function e(w){return void 0!==w.points}function f(w){return void 0!==w.x&&void 0!==w.y}function g(w){return void 0!==w.paths}
function d(w){return void 0!==w.rings}function q(w){if(w){if(f(w))return k.fromJSON(w);if(g(w))return m.fromJSON(w);if(d(w))return p.fromJSON(w);if(e(w))return l.fromJSON(w);if(void 0!==w.xmin&&void 0!==w.ymin&&void 0!==w.xmax&&void 0!==w.ymax)return a.fromJSON(w)}return null}Object.defineProperty(n,"__esModule",{value:!0});n.fromJson=function(w){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(x){}return q(w)};n.isMultipoint=e;n.isPoint=f;n.isPolyline=g;n.isPolygon=d;n.fromJSON=
q;n.getJsonType=function(w){return w instanceof k?"esriGeometryPoint":w instanceof m?"esriGeometryPolyline":w instanceof p?"esriGeometryPolygon":w instanceof a?"esriGeometryEnvelope":w instanceof l?"esriGeometryMultipoint":null};var t={esriGeometryPoint:k,esriGeometryPolyline:m,esriGeometryPolygon:p,esriGeometryEnvelope:a,esriGeometryMultipoint:l};n.getGeometryType=function(w){return w&&t[w]||null}})},"esri/layers/vectorTiles/geometry/support/aaBoundingBox":function(){define(["require","exports",
"../Extent","./aaBoundingRect"],function(r,n,a,l){function k(d){void 0===d&&(d=n.ZERO);return[d[0],d[1],d[2],d[3],d[4],d[5]]}function p(d){return d[0]>=d[3]?0:d[3]-d[0]}function m(d){return d[1]>=d[4]?0:d[4]-d[1]}function e(d){return d[2]>=d[5]?0:d[5]-d[2]}function f(d,q){d[0]=q[0];d[1]=q[1];d[2]=q[2];d[3]=q[3];d[4]=q[4];d[5]=q[5];return d}function g(d){return 6===d.length}Object.defineProperty(n,"__esModule",{value:!0});n.create=k;n.fromValues=function(d,q,t,w,x,z){return[d,q,t,w,x,z]};n.fromExtent=
function(d,q){void 0===q&&(q=k());q[0]=d.xmin;q[1]=d.ymin;q[2]=d.zmin;q[3]=d.xmax;q[4]=d.ymax;q[5]=d.zmax;return q};n.toExtent=function(d,q){return isFinite(d[2])||isFinite(d[5])?new a({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:q}):new a({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],spatialReference:q})};n.fromMinMax=function(d,q,t){void 0===t&&(t=k());t[0]=d[0];t[1]=d[1];t[2]=d[2];t[3]=q[0];t[4]=q[1];t[5]=q[2];return t};n.expandPointInPlace=function(d,q){q[0]<d[0]&&
(d[0]=q[0]);q[0]>d[3]&&(d[3]=q[0]);q[1]<d[1]&&(d[1]=q[1]);q[1]>d[4]&&(d[4]=q[1]);q[2]<d[2]&&(d[2]=q[2]);q[2]>d[5]&&(d[5]=q[2])};n.expand=function(d,q,t){void 0===t&&(t=d);g(q)?(t[0]=Math.min(d[0],q[0]),t[1]=Math.min(d[1],q[1]),t[2]=Math.min(d[2],q[2]),t[3]=Math.max(d[3],q[3]),t[4]=Math.max(d[4],q[4]),t[5]=Math.max(d[5],q[5])):l.is(q)?(t[0]=Math.min(d[0],q[0]),t[1]=Math.min(d[1],q[1]),t[3]=Math.max(d[3],q[2]),t[4]=Math.max(d[4],q[3])):2===q.length?(t[0]=Math.min(d[0],q[0]),t[1]=Math.min(d[1],q[1]),
t[3]=Math.max(d[3],q[0]),t[4]=Math.max(d[4],q[1])):3===q.length&&(t[0]=Math.min(d[0],q[0]),t[1]=Math.min(d[1],q[1]),t[2]=Math.min(d[2],q[2]),t[3]=Math.max(d[3],q[0]),t[4]=Math.max(d[4],q[1]),t[5]=Math.max(d[5],q[2]));return t};n.expandWithBuffer=function(d,q,t,w,x){void 0===x&&(x=d);var z=d[0],A=d[1],B=d[2],b=d[3],h=d[4];d=d[5];for(var c=0;c<w;c++)z=Math.min(z,q[t+3*c]),A=Math.min(A,q[t+3*c+1]),B=Math.min(B,q[t+3*c+2]),b=Math.max(b,q[t+3*c]),h=Math.max(h,q[t+3*c+1]),d=Math.max(d,q[t+3*c+2]);x[0]=
z;x[1]=A;x[2]=B;x[3]=b;x[4]=h;x[5]=d;return x};n.expandWithNestedArray=function(d,q,t,w){void 0===w&&(w=d);var x=q.length,z=d[0],A=d[1],B=d[2],b=d[3],h=d[4];d=d[5];if(t)for(t=0;t<x;t++){var c=q[t];z=Math.min(z,c[0]);A=Math.min(A,c[1]);B=Math.min(B,c[2]);b=Math.max(b,c[0]);h=Math.max(h,c[1]);d=Math.max(d,c[2])}else for(t=0;t<x;t++)c=q[t],z=Math.min(z,c[0]),A=Math.min(A,c[1]),b=Math.max(b,c[0]),h=Math.max(h,c[1]);w[0]=z;w[1]=A;w[2]=B;w[3]=b;w[4]=h;w[5]=d;return w};n.allFinite=function(d){for(var q=
0;6>q;q++)if(!isFinite(d[q]))return!1;return!0};n.width=p;n.depth=m;n.height=e;n.diameter=function(d){var q=p(d),t=e(d);d=m(d);return Math.sqrt(q*q+t*t+d*d)};n.center=function(d,q){void 0===q&&(q=[0,0,0]);q[0]=d[0]+p(d)/2;q[1]=d[1]+m(d)/2;q[2]=d[2]+e(d)/2;return q};n.size=function(d,q){void 0===q&&(q=[0,0,0]);q[0]=p(d);q[1]=m(d);q[2]=e(d);return q};n.maximumDimension=function(d){return Math.max(p(d),e(d),m(d))};n.containsPoint=function(d,q){return q[0]>=d[0]&&q[1]>=d[1]&&q[2]>=d[2]&&q[0]<=d[3]&&q[1]<=
d[4]&&q[2]<=d[5]};n.containsPointWithMargin=function(d,q,t){return q[0]>=d[0]-t&&q[1]>=d[1]-t&&q[2]>=d[2]-t&&q[0]<=d[3]+t&&q[1]<=d[4]+t&&q[2]<=d[5]+t};n.contains=function(d,q){return q[0]>=d[0]&&q[1]>=d[1]&&q[2]>=d[2]&&q[3]<=d[3]&&q[4]<=d[4]&&q[5]<=d[5]};n.intersects=function(d,q){return Math.max(q[0],d[0])<=Math.min(q[3],d[3])&&Math.max(q[1],d[1])<=Math.min(q[4],d[4])&&Math.max(q[2],d[2])<=Math.min(q[5],d[5])};n.offset=function(d,q,t,w,x){void 0===x&&(x=d);x[0]=d[0]+q;x[1]=d[1]+t;x[2]=d[2]+w;x[3]=
d[3]+q;x[4]=d[4]+t;x[5]=d[5]+w;return x};n.setMin=function(d,q,t){void 0===t&&(t=d);t[0]=q[0];t[1]=q[1];t[2]=q[2];t!==d&&(t[3]=d[3],t[4]=d[4],t[5]=d[5]);return t};n.setMax=function(d,q,t){void 0===t&&(t=d);t[3]=q[0];t[4]=q[1];t[5]=q[2];t!==d&&(t[0]=d[0],t[1]=d[1],t[2]=d[2]);return d};n.set=f;n.empty=function(d){return d?f(d,n.NEGATIVE_INFINITY):k(n.NEGATIVE_INFINITY)};n.toRect=function(d,q){q||(q=l.create());q[0]=d[0];q[1]=d[1];q[2]=d[3];q[3]=d[4];return q};n.fromRect=function(d,q){d[0]=q[0];d[1]=
q[1];d[3]=q[2];d[4]=q[3];return d};n.is=g;n.isPoint=function(d){return 0===p(d)&&0===m(d)&&0===e(d)};n.equals=function(d,q,t){if(null==d||null==q)return d===q;if(!g(d)||!g(q))return!1;if(t)for(var w=0;w<d.length;w++){if(!t(d[w],q[w]))return!1}else for(w=0;w<d.length;w++)if(d[w]!==q[w])return!1;return!0};n.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];n.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];n.ZERO=[0,0,0,0,0,0]})},"esri/layers/vectorTiles/geometry/support/aaBoundingRect":function(){define(["require",
"exports","../../geometry"],function(r,n,a){function l(g){void 0===g&&(g=n.ZERO);return[g[0],g[1],g[2],g[3]]}function k(g){return g[0]>=g[2]?0:g[2]-g[0]}function p(g){return g[1]>=g[3]?0:g[3]-g[1]}function m(g,d){g[0]=d[0];g[1]=d[1];g[2]=d[2];g[3]=d[3];return g}function e(g){return 4===g.length}function f(g,d,q){return g<d?d:g>q?q:g}Object.defineProperty(n,"__esModule",{value:!0});n.create=l;n.clone=function(g){return[g[0],g[1],g[2],g[3]]};n.fromValues=function(g,d,q,t,w){void 0===w&&(w=l());w[0]=
g;w[1]=d;w[2]=q;w[3]=t;return w};n.fromExtent=function(g,d){void 0===d&&(d=l());d[0]=g.xmin;d[1]=g.ymin;d[2]=g.xmax;d[3]=g.ymax;return d};n.toExtent=function(g,d){return new a.Extent({xmin:g[0],ymin:g[1],xmax:g[2],ymax:g[3],spatialReference:d})};n.expandPointInPlace=function(g,d){d[0]<g[0]&&(g[0]=d[0]);d[0]>g[2]&&(g[2]=d[0]);d[1]<g[1]&&(g[1]=d[1]);d[1]>g[3]&&(g[3]=d[1])};n.expand=function(g,d,q){void 0===q&&(q=g);if("length"in d)if(e(d))q[0]=Math.min(g[0],d[0]),q[1]=Math.min(g[1],d[1]),q[2]=Math.max(g[2],
d[2]),q[3]=Math.max(g[3],d[3]);else{if(2===d.length||3===d.length)q[0]=Math.min(g[0],d[0]),q[1]=Math.min(g[1],d[1]),q[2]=Math.max(g[2],d[0]),q[3]=Math.max(g[3],d[1])}else switch(d.type){case "extent":q[0]=Math.min(g[0],d.xmin);q[1]=Math.min(g[1],d.ymin);q[2]=Math.max(g[2],d.xmax);q[3]=Math.max(g[3],d.ymax);break;case "point":q[0]=Math.min(g[0],d.x),q[1]=Math.min(g[1],d.y),q[2]=Math.max(g[2],d.x),q[3]=Math.max(g[3],d.y)}return q};n.expandWithNestedArray=function(g,d,q){void 0===q&&(q=g);var t=d.length,
w=g[0],x=g[1],z=g[2];g=g[3];for(var A=0;A<t;A++){var B=d[A];w=Math.min(w,B[0]);x=Math.min(x,B[1]);z=Math.max(z,B[0]);g=Math.max(g,B[1])}q[0]=w;q[1]=x;q[2]=z;q[3]=g;return q};n.allFinite=function(g){for(var d=0;4>d;d++)if(!isFinite(g[d]))return!1;return!0};n.width=k;n.height=p;n.diameter=function(g){var d=k(g);g=p(g);return Math.sqrt(d*d+g*g)};n.area=function(g){return k(g)*p(g)};n.center=function(g,d){void 0===d&&(d=[0,0]);d[0]=g[0]+k(g)/2;d[1]=g[1]+p(g)/2;return d};n.containsPoint=function(g,d){return d[0]>=
g[0]&&d[1]>=g[1]&&d[0]<=g[2]&&d[1]<=g[3]};n.containsPointWithMargin=function(g,d,q){return d[0]>=g[0]-q&&d[1]>=g[1]-q&&d[0]<=g[2]+q&&d[1]<=g[3]+q};n.intersects=function(g,d){return Math.max(d[0],g[0])<=Math.min(d[2],g[2])&&Math.max(d[1],g[1])<=Math.min(d[3],g[3])};n.contains=function(g,d){return d[0]>=g[0]&&d[2]<=g[2]&&d[1]>=g[1]&&d[3]<=g[3]};n.intersection=function(g,d,q){void 0===q&&(q=g);var t=d[0],w=d[1],x=d[2];d=d[3];q[0]=f(g[0],t,x);q[1]=f(g[1],w,d);q[2]=f(g[2],t,x);q[3]=f(g[3],w,d);return q};
n.offset=function(g,d,q,t){void 0===t&&(t=g);t[0]=g[0]+d;t[1]=g[1]+q;t[2]=g[2]+d;t[3]=g[3]+q;return t};n.pad=function(g,d,q){void 0===q&&(q=g);q[0]=g[0]-d;q[1]=g[1]-d;q[2]=g[2]+d;q[3]=g[3]+d;return q};n.setMin=function(g,d,q){void 0===q&&(q=g);q[0]=d[0];q[1]=d[1];q!==g&&(q[2]=g[2],q[3]=g[3]);return q};n.setMax=function(g,d,q){void 0===q&&(q=g);q[2]=d[0];q[3]=d[1];q!==g&&(q[0]=g[0],q[1]=g[1]);return g};n.set=m;n.empty=function(g){return g?m(g,n.NEGATIVE_INFINITY):l(n.NEGATIVE_INFINITY)};n.is=e;n.isPoint=
function(g){return(0===k(g)||!isFinite(g[0]))&&(0===p(g)||!isFinite(g[1]))};n.equals=function(g,d,q){if(null==g||null==d)return g===d;if(!e(g)||!e(d))return!1;if(q)for(var t=0;t<g.length;t++){if(!q(g[t],d[t]))return!1}else for(t=0;t<g.length;t++)if(g[t]!==d[t])return!1;return!0};n.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];n.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];n.ZERO=[0,0,0,0]})},"esri/layers/vectorTiles/layers/graphics/dehydratedFeatures":function(){define("require exports ../../Graphic ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ./dehydratedFeatureComparison".split(" "),
function(r,n,a,l,k,p,m){function e(A){switch(A){case "esriGeometryPoint":return"point";case "esriGeometryMultipoint":return"multipoint";case "esriGeometryPolyline":return"polyline";case "esriGeometryPolygon":return"polygon";case "esriGeometryEnvelope":return"extent"}}function f(A,B,b,h){return{uid:a.generateUID(),objectId:h&&A.attributes?A.attributes[h]:null,attributes:A.attributes,geometry:g(A.geometry,B,b),visible:!0}}function g(A,B,b){if(!A)return null;switch(B){case "point":return{x:A.x,y:A.y,
z:A.z,type:B,spatialReference:b};case "polyline":var h=A;return{paths:h.paths,hasZ:h.hasZ,hasM:h.hasM,type:B,spatialReference:b};case "polygon":return{rings:A.rings,hasZ:h.hasZ,hasM:h.hasM,type:B,spatialReference:b};case "multipoint":return{points:A.points,hasZ:h.hasZ,hasM:h.hasM,type:B,spatialReference:b};case "extent":return{xmin:A.xmin,ymin:A.ymin,zmin:A.zmin,mmin:A.mmin,xmax:A.xmax,ymax:A.ymax,zmax:A.zmax,mmax:A.mmax,hasZ:A.hasZ,hasM:A.hasM,type:B,spatialReference:b}}}function d(A){return"point"===
A.type?null!=A.z:"extent"===A.type?null!=A.zmin:A.hasZ}function q(A){return"declaredClass"in A}function t(A,B){k.empty(B);"mesh"===A.type&&(A=A.extent);switch(A.type){case "point":B[0]=B[3]=A.x;B[1]=B[4]=A.y;d(A)&&(B[2]=B[5]=A.z);break;case "polyline":for(var b=0;b<A.paths.length;b++)k.expandWithNestedArray(B,A.paths[b],d(A));break;case "polygon":for(b=0;b<A.rings.length;b++)k.expandWithNestedArray(B,A.rings[b],d(A));break;case "multipoint":k.expandWithNestedArray(B,A.points,d(A));break;case "extent":B[0]=
A.xmin,B[1]=A.ymin,B[3]=A.xmax,B[4]=A.ymax,null!=A.zmin&&(B[2]=A.zmin),null!=A.zmax&&(B[5]=A.zmax)}}function w(A,B){p.empty(B);"mesh"===A.type&&(A=A.extent);switch(A.type){case "point":B[0]=B[2]=A.x;B[1]=B[3]=A.y;break;case "polyline":for(var b=0;b<A.paths.length;b++)p.expandWithNestedArray(B,A.paths[b]);break;case "polygon":for(b=0;b<A.rings.length;b++)p.expandWithNestedArray(B,A.rings[b]);break;case "multipoint":p.expandWithNestedArray(B,A.points);break;case "extent":B[0]=A.xmin,B[1]=A.ymin,B[2]=
A.xmax,B[3]=A.ymax}}Object.defineProperty(n,"__esModule",{value:!0});n.equals=m.equals;n.isPoint=function(A){return"point"===A.type};n.mapJSONGeometryType=e;n.fromFeatureSetJSON=function(A){var B=e(A.geometryType),b=l.fromJSON(A.spatialReference);return A.features.map(function(h){return f(h,B,b,A.objectIdFieldName)})};n.fromJSON=f;n.fromJSONGeometry=g;n.makeDehydratedPoint=function(A,B,b,h){return{x:A,y:B,z:b,spatialReference:h,type:"point"}};n.hasZ=d;n.isHydratedGeometry=function(A){return"declaredClass"in
A};n.isHydratedGraphic=q;n.hydrateGraphic=function(A,B){if(!A||q(A))return A;B=new a({layer:B,sourceLayer:B});B.read(A);return B};n.computeAABB=t;n.expandAABB=function(A,B){t(A,x);k.expand(B,x)};n.computeAABR=w;n.expandAABR=function(A,B){w(A,z);p.expand(B,z)};var x=k.create(),z=p.create()})},"esri/layers/vectorTiles/Graphic":function(){define(["require","exports","esri/graphic","./core/tsSupport/declareExtendsHelper","./core/JSONSupport"],function(r,n,a,l,k){r=function(m){function e(f){return m.call(this)||
this}l(e,m);e.fromJSON=function(f){return new a(f)};return e}(k);var p=0;(function(m){m.generateUID=function(){return p++}})(r||(r={}));return r})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(r,n,a,l,k,p,m,e,f){function g(){}r=r(null,{declaredClass:"esri.Graphic",constructor:function(d,q,t,w){this._construct();d&&!d.declaredClass?(this.geometry=d.geometry?e.fromJson(d.geometry):
null,this.symbol=d.symbol?f.fromJson(d.symbol):null,this.attributes=d.attributes||null,this.infoTemplate=d.infoTemplate?new m(d.infoTemplate):null):(this.geometry=d,this.symbol=q,this.attributes=t,this.infoTemplate=w)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,
getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(d){this._parentGraphic=d},setSize:function(d){this.size=d;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(d){this._aggregationSourceLayer=d;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(d){this._aggregationInfo=d;return this},getChildGraphics:function(){var d=
this.getAggregationSourceLayer();return d?d.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var d=[];this._shape&&d.push(this._shape);this._bgShape&&d.push(this._bgShape);return d},getNode:function(){var d=this._shape&&this._shape.getNode();return d&&d.nodeType?d:null},getNodes:function(){var d=this.getShapes(),q,t,w=d.length,x=[];for(t=0;t<w;t++)(q=d[t]&&d[t].getNode())&&q.nodeType&&x.push(q);return x},getLayer:function(){return this._layer},getSourceLayer:function(){return this._sourceLayer||
this._layer},clone:function(){var d=new this.constructor(this.toJson());d.visible=this.visible;d._layer=this._layer;d._sourceLayer=this._sourceLayer;d._aggregationSourceLayer=this._aggregationSourceLayer;d._aggregationInfo=this._aggregationInfo;d._resolution=this._resolution;return d},draw:function(){var d=this._graphicsLayer;d&&d._draw(this,!0);return this},setGeometry:function(d){this.geometry=d;this._geomVersion++;var q=this._graphicsLayer;q&&(q._updateExtent(this),this.draw(),d&&"polyline"===
d.type&&q._updateSVGMarkers());return this},setResolution:function(d){this._resolution=d;return this},getResolution:function(){return this._resolution},setSymbol:function(d,q){var t=this._graphicsLayer,w=this._shape;this.symbol=d;t&&(q&&w&&t._removeShape(this),this.draw());return this},setAttributes:function(d){this.attributes=d;this.clearCache();return this},setInfoTemplate:function(d){this.infoTemplate=d;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var d=
this.getLayer();return this.infoTemplate||d&&d.infoTemplate},getTitle:function(){var d=this.getInfoTemplate(),q=d&&d.title;if(n.isFunction(q))q=q.call(d,this);else if(n.isString(q)){var t=(d=this.getLayer())&&d._getDateOpts;q=p.substitute(this.attributes,q,{first:!0,dateFormat:t&&t.call(d)})}return q},getContent:function(){var d=this.getInfoTemplate(),q=d&&d.content;if(n.isFunction(q))q=q.call(d,this);else if(n.isString(q)){var t=(d=this.getLayer())&&d._getDateOpts;q=p.substitute(this.attributes,
q,{dateFormat:t&&t.call(d)})}return q},attr:function(d,q){null==q||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[d]=q,this._setDataAttr(d,q));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=!0;this.attr("data-hidden");var d;if(this.getShapes().length){var q=this.getNodes();var t=q.length;for(d=0;d<t;d++)k.show(q[d])}else this.draw();
(q=this._graphicsLayer)&&q._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var d=this._graphicsLayer,q,t;if(d){if("canvas-2d"===d.surfaceType)d._removeShape(this);else{var w=this.getNodes();if(t=w.length)for(q=0;q<t;q++)k.hide(w[q])}d._graphicVisibilityChanged(this)}return this},toJson:function(){var d={};this.geometry&&(d.geometry=this.geometry.toJson());this.attributes&&(d.attributes=n.mixin({},this.attributes));this.symbol&&(d.symbol=this.symbol.toJson());
this.infoTemplate&&(d.infoTemplate=this.infoTemplate.toJson());return d},_setDataAttr:function(d,q){var t=this.getNodes(),w,x=t.length;for(w=0;w<x;w++)this._setDOMDataAttr(t[w],d,q)},_setDOMDataAttr:function(d,q,t){null==t?d.removeAttribute(q):d.setAttribute(q,t)},_applyDataAttrs:function(){var d=this._dataAttrs;if(d){var q=this.getNodes(),t,w=q.length;for(t=0;t<w;t++)for(var x in d)this._setDOMDataAttr(q[t],x,d[x])}},_getViewInfo:function(d){return(d=(d=d||this.getLayer())&&d.getMap())&&d.getViewInfo()},
evaluateExpression:function(d,q){return this._getDataValue(d._attributeDef,d._attributeCache,null,null,d,q)},_getDataValue:function(d,q,t,w,x,z){var A=q.id,B=this.attributes,b=d.field,h=q.isNumeric,c=null;if(A){var v=this._computedAttributes,u=this._computedVersion,y=this._computedGeomVersion;w=this._getViewInfo(w);var C=!(!x||!x.async),D=z&&z.skipCache||C,E=!z||!1!==z.strictReturnType,F=q.dependsOnView||q.isJSFunc,G=q.dependsOnGeometry;v||(v=this._computedAttributes={});F&&!u&&(u=this._computedVersion=
{});G&&!y&&(y=this._computedGeomVersion={});var J=F&&u[A]!==w.version||G&&y[A]!==this._geomVersion;c=v[A];if(void 0===c||J||D)c=null,q.hasExpr?c=x?x.evaluate(z&&z.context):t.executeFunction(q.compiledFunc,t.createExecContext(this,w)):q.isJSFunc?c=b(this,d):B&&(c=B[b],h&&this._isValidNumber(c)&&(q=d.normalizationType||"field",t=c,c=null,x=d.normalizationTotal,d=B[d.normalizationField],"log"===q&&0!==t?c=Math.log(t)*Math.LOG10E:"percent-of-total"===q&&this._isValidNumber(x)&&0!==x?c=t/x*100:"field"===
q&&this._isValidNumber(d)&&0!==d&&(c=t/d))),E&&(C?h&&(this._construct(),c=c.then(this._sanitizeNumericValue)):c=this._sanitizeValue(c,h)),D||(v[A]=c,F&&(u[A]=w.version),G&&(y[A]=this._geomVersion))}else B&&(c=this._sanitizeValue(B[b],h));return c},_sanitizeValue:function(d,q){q&&!this._isValidNumber(d)&&(d=null);return d},_sanitizeNumericValue:function(d){return this._sanitizeValue(d,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=n.hitch(this,this._sanitizeNumericValue),
this._constructed=!0)},_isValidNumber:function(d){return"number"===typeof d&&!isNaN(d)&&Infinity!==d&&-Infinity!==d},clearCache:function(d){if(null!=d){var q=this._computedAttributes,t=this._computedVersion,w=this._computedGeomVersion;q&&(q[d]=void 0);t&&(t[d]=void 0);w&&(w[d]=void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});r.prototype.getShape=r.prototype.getDojoShape;g.prototype=r.prototype;r.simpleConstructor=g;return l.Graphic=r})},"esri/domUtils":function(){define(["./kernel",
"dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(r,n,a,l,k){var p={show:function(m){if(m=p.getNode(m))m.style.display="block"},getNode:function(m){return m&&m.domNode||m},hide:function(m){if(m=p.getNode(m))m.style.display="none"},toggle:function(m){if(m=p.getNode(m))m.style.display="none"===m.style.display?"block":"none"},documentBox:8>=k("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(m){if(m=
this.getNode(m)){var e=0,f=0,g=0,d=0,q=0,t=0;return[n.connect(m,"ontouchstart",function(w){e=w.touches[0].screenX;f=w.touches[0].screenY;g=m.scrollWidth;d=m.scrollHeight;q=m.clientWidth;t=m.clientHeight}),n.connect(m,"ontouchmove",function(w){w.preventDefault();var x=m.firstChild;x instanceof Text&&(x=m.childNodes[1]);var z=x._currentX||0,A=x._currentY||0;z+=w.touches[0].screenX-e;0<z?z=0:0>z&&Math.abs(z)+q>g&&(z=-1*(g-q));x._currentX=z;A+=w.touches[0].screenY-f;0<A?A=0:0>A&&Math.abs(A)+t>d&&(A=-1*
(d-t));x._currentY=A;l.set(x,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+z+"px, "+A+"px)"});e=w.touches[0].screenX;f=w.touches[0].screenY})]}}};a.mixin(r,p);return p})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(r,n,a,l,k){r=r(null,{declaredClass:"esri.InfoTemplate",constructor:function(p,m){p&&n.isObject(p)&&!n.isFunction(p)?n.mixin(this,p):(this.title=p||"${*}",this.content=m||"${*}")},
setTitle:function(p){this.title=p;return this},setContent:function(p){this.content=p;return this},toJson:function(){return k.fixJson({title:this.title,content:this.content})}});return l.InfoTemplate=r})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(r,n,a,l,k,p,m,e,f,g,d){var q={createDefaultSymbol:function(t){switch(t){case "esriGeometryPoint":case "esriGeometryMultipoint":var w=
q.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":w=q.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":w=q.createDefaultFillSymbol()}return w},createDefaultMarkerSymbol:function(){return new k},createDefaultLineSymbol:function(){return new m},createDefaultFillSymbol:function(){return new f},getFirstSupportedSymbol:function(t){var w;n.some(t,function(x){x&&-1<q.supportedSymbolTypes.indexOf(x.type)&&(w=x);return!!w});
return w},isPointSymbol:function(t){return t?-1<q.supportedPointSymbolTypes.indexOf(t.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(t,w){var x=null;switch(t.type){case "esriSMS":x=new k(t);break;case "esriPMS":x=new p(t);break;case "esriTS":x=new d(t);break;case "esriSLS":x=void 0!==t.cap?new e(t):new m(t);break;case "esriCLS":x=new e(t);break;case "esriSFS":x=new f(t);break;
case "esriPFS":x=new g(t);break;default:x=(t=w&&w.geometryType)?q.createDefaultSymbol(t):null}return x},getShapeDescriptors:function(t){return t&&t.getShapeDescriptors?t.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};r.mixin(r.getObject("symbol",!0,l),q);return q})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(r,n,a,l,k,p,
m,e,f){var g={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},d={style:g.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};r=r(e,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},
constructor:function(q,t,w,x){q?n.isString(q)?(this.style=q,t&&(this.size=t),w&&(this.outline=w),x&&(this.color=x)):(this.style=m.valueOf(this._styles,this.style),q.outline&&(this.outline=new f(q.outline))):(n.mixin(this,d),this.size=k.pt2px(this.size),this.outline=new f(this.outline),this.color=new a(this.color));this.style||(this.style=g.STYLE_CIRCLE)},setStyle:function(q){this.style=q;return this},setPath:function(q){this.path=q;this.setStyle(g.STYLE_PATH);return this},setOutline:function(q){this.outline=
q;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(q,t,w){this._targetWidth=q;this._targetHeight=t;this._spikeSize=w},getShapeDescriptors:function(){var q,t=this.style,w=(this.size||k.pt2px(d.size))/2,x=0-w,z=0+w,A=0-w,B=0+w;switch(t){case g.STYLE_CIRCLE:var b={type:"circle",cx:0,cy:0,r:w};var h=this.getFill();if(q=this.getStroke())q.style=q.style||"Solid";break;case g.STYLE_CROSS:b={type:"path",path:"M "+x+",0 L "+
z+",0 M 0,"+A+" L 0,"+B+" E"};h=null;q=this.getStroke();break;case g.STYLE_DIAMOND:b={type:"path",path:"M "+x+",0 L 0,"+A+" L "+z+",0 L 0,"+B+" L "+x+",0 Z"};h=this.getFill();q=this.getStroke();break;case g.STYLE_SQUARE:b={type:"path",path:"M "+x+","+B+" L "+x+","+A+" L "+z+","+A+" L "+z+","+B+" L "+x+","+B+" Z"};h=this.getFill();q=this.getStroke();break;case g.STYLE_TRIANGLE:b={type:"path",path:"M "+x+","+B+" L 0,"+A+" L "+z+","+B+" L "+x+","+B+" Z"};h=this.getFill();q=this.getStroke();break;case g.STYLE_X:b=
{type:"path",path:"M "+x+","+B+" L "+z+","+A+" M "+x+","+A+" L "+z+","+B+" E"};h=null;q=this.getStroke();break;case g.STYLE_PATH:b={type:"path",path:this.path||""},h=this.getFill(),q=this.getStroke()}return{defaultShape:b,fill:h,stroke:q}},toJson:function(){var q=this.style,t=this.outline,w=n.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[q]||"esriSMSCircle"});t&&(w.outline=t.toJson());"x"===q||"cross"===q?delete w.color:"target"===q&&(w.style="esriSMSSquare",delete w.color,
0<this._targetHeight&&0<this._targetWidth&&(w.size=k.px2pt(Math.max(this._targetHeight,this._targetWidth))));w.path=this.path;return m.fixJson(w)}});n.mixin(r,g);r.defaultProps=d;n.setObject("symbol.SimpleMarkerSymbol",r,p);p.symbol.defaultSimpleMarkerSymbol=d;return r})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(r,n,a,l,k,p){r=r(p,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,
size:12,constructor:function(m){m&&n.isObject(m)&&(this.size="auto"===this.size?this.size:l.pt2px(this.size),this.xoffset=l.pt2px(this.xoffset),this.yoffset=l.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(m){this.angle=m;return this},setSize:function(m){this.size=m;return this},setOffset:function(m,e){this.xoffset=m;this.yoffset=e;return this},toJson:function(){var m=l.px2pt(this.size);m=isNaN(m)?void 0:m;var e=l.px2pt(this.xoffset);e=isNaN(e)?void 0:e;var f=l.px2pt(this.yoffset);
f=isNaN(f)?void 0:f;return n.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:m,angle:this.angle&&-1*this.angle,xoffset:e,yoffset:f})}});n.setObject("symbol.MarkerSymbol",r,k);return r})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(r,n,a,l,k,p){r=r(null,{declaredClass:"esri.symbol.Symbol",color:new p([0,0,0,1]),type:null,constructor:function(m){m&&n.isObject(m)&&(n.mixin(this,m),this.color&&
k.isDefined(this.color[0])&&(this.color=p.toDojoColor(this.color)),(m=this.type)&&0===m.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[m]))},setColor:function(m){this.color=m;return this},toJson:function(){return{color:p.toJsonColor(this.color)}}});n.setObject("symbol.Symbol",r,l);return r})},"esri/Color":function(){define(["dojo/_base/declare",
"dojo/_base/Color","dojo/has","./kernel"],function(r,n,a,l){var k=r([n],{declaredClass:"esri.Color"});k.toJsonColor=function(p){return p&&[p.r,p.g,p.b,1<p.a?p.a:Math.round(255*p.a)]};k.toDojoColor=function(p){return p&&new k([p[0],p[1],p[2],p[3]/255])};a="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(r=0;r<a.length;r++)k[a[r]]=n[a[r]];return l.Color=k})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),
function(r,n,a,l,k,p,m,e){var f={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},g={color:[0,0,0,1],style:f.STYLE_SOLID,width:1};r=r(e,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",
dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(d,q,t){d?n.isString(d)?(this.style=d,q&&(this.color=q),t&&(this.width=t)):(this.style=m.valueOf(this._styles,d.style)||f.STYLE_SOLID,this.marker=
d.marker):(n.mixin(this,g),this.color=new a(this.color),this.width=k.pt2px(this.width))},setStyle:function(d){this.style=d;return this},setMarker:function(d){this.marker=d},getStroke:function(){return this.style===f.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return m.fixJson(n.mixin(this.inherited("toJson",
arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?n.clone(this.marker):void 0}))}});n.mixin(r,f);r.defaultProps=g;n.setObject("symbol.SimpleLineSymbol",r,p);p.symbol.defaultSimpleLineSymbol=g;return r})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(r,n,a,l,k,p){r=r(p,{declaredClass:"esri.symbol.LineSymbol",constructor:function(m){n.isObject(m)?this.width=l.pt2px(this.width):
this.width=12},setWidth:function(m){this.width=m;return this},toJson:function(){var m=l.px2pt(this.width);m=isNaN(m)?void 0:m;return n.mixin(this.inherited("toJson",arguments),{width:m})}});n.setObject("symbol.LineSymbol",r,k);return r})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(r,n,a,l,k,p,m,e){var f={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};r=
r(e,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(g,d,q){g?n.isString(g)?(this.url=g,d&&(this.width=d),q&&(this.height=q)):(this.width=l.pt2px(null==g.width?f.width:g.width),this.height=l.pt2px(null==g.height?f.height:g.height),d=g.imageData,9>a("ie")||!d||(q=this.url,this.url="data:"+(g.contentType||"image")+";base64,"+d,this.imageData=q)):(n.mixin(this,f),this.width=l.pt2px(this.width),this.height=l.pt2px(this.height))},getStroke:function(){return null},
getFill:function(){return null},setWidth:function(g){this.width=g;return this},setHeight:function(g){this.height=g;return this},setUrl:function(g){g!==this.url&&(delete this.imageData,delete this.contentType);this.url=g;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var g=this.url,d=this.imageData;if(0===g.indexOf("data:")){var q=
g;g=d;d=q.indexOf(";base64,")+8;d=q.substr(d)}!n.isString(g)||0!==g.indexOf("/")&&0!==g.indexOf("//")&&0!==g.indexOf("./")&&0!==g.indexOf("../")||(g=m.getAbsoluteUrl(g));q=l.px2pt(this.width);q=isNaN(q)?void 0:q;var t=l.px2pt(this.height);t=isNaN(t)?void 0:t;g=p.fixJson(n.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:g,imageData:d,contentType:this.contentType,width:q,height:t}));delete g.color;delete g.size;g.imageData||delete g.imageData;return g}});r.defaultProps=f;n.setObject("symbol.PictureMarkerSymbol",
r,k);k.symbol.defaultPictureMarkerSymbol=f;return r})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(r,n,a,l,k,p,m,e){var f={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},g={color:[0,0,0,1],style:f.STYLE_SOLID,width:1,cap:f.CAP_BUTT,join:f.JOIN_MITER,miterLimit:10};r=r(e,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",
bevel:"esriLJSBevel"},constructor:function(d,q,t,w,x,z){d?n.isString(d)?(this.style=d,q&&(this.color=q),void 0!==t&&(this.width=t),w&&(this.cap=w),x&&(this.join=x),void 0!==z&&(this.miterLimit=z)):(this.cap=m.valueOf(this._caps,d.cap),this.join=m.valueOf(this._joins,d.join),this.width=k.pt2px(d.width),this.miterLimit=k.pt2px(d.miterLimit)):(n.mixin(this,g),this.color=new a(this.color),this.width=k.pt2px(this.width),this.miterLimit=k.pt2px(this.miterLimit))},setCap:function(d){this.cap=d;return this},
setJoin:function(d){this.join=d;return this},setMiterLimit:function(d){this.miterLimit=d;return this},getStroke:function(){return n.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===f.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var d=k.px2pt(this.miterLimit);d=isNaN(d)?void 0:d;return m.fixJson(n.mixin(this.inherited("toJson",
arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:d}))}});n.mixin(r,f);r.defaultProps=g;n.setObject("symbol.CartographicLineSymbol",r,p);p.symbol.defaultCartographicLineSymbol=g;return r})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(r,n,a,l,k,p,m,e,f,g){var d={STYLE_SOLID:"solid",STYLE_NULL:"none",
STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},q={style:d.STYLE_SOLID,color:[0,0,0,.25]};r=r(e,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",
vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(t,w,x){t?n.isString(t)?(this.style=t,void 0!==w&&(this.outline=w),void 0!==x&&(this.color=x)):this.style=m.valueOf(this._styles,t.style):(n.mixin(this,q),this.outline=new f(this.outline),this.color=new a(this.color))},setStyle:function(t){this.style=t;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},
getFill:function(){var t=this.style;return t===d.STYLE_NULL?null:t===d.STYLE_SOLID?this.color:n.mixin({},k.defaultPattern,{src:g.toUrl("../images/symbol/sfs/"+t+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return m.fixJson(n.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});n.mixin(r,d);r.defaultProps=
q;n.setObject("symbol.SimpleFillSymbol",r,p);p.symbol.defaultSimpleFillSymbol=q;return r})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(r,n,a,l,k,p){r=r(k,{declaredClass:"esri.symbol.FillSymbol",constructor:function(m){m&&n.isObject(m)&&m.outline&&(this.outline=new p(m.outline))},setOutline:function(m){this.outline=m;return this},toJson:function(){var m=this.inherited("toJson",arguments);this.outline&&
(m.outline=this.outline.toJson());return m}});n.setObject("symbol.FillSymbol",r,l);return r})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(r,n,a,l,k,p,m,e){var f={xoffset:0,yoffset:0,width:12,height:12};r=r(e,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(g,d,q,t){g?n.isString(g)?(this.url=
g,void 0!==d&&(this.outline=d),void 0!==q&&(this.width=q),void 0!==t&&(this.height=t)):(this.xoffset=l.pt2px(g.xoffset),this.yoffset=l.pt2px(g.yoffset),this.width=l.pt2px(g.width),this.height=l.pt2px(g.height),d=g.imageData,9>a("ie")||!d||(q=this.url,this.url="data:"+(g.contentType||"image")+";base64,"+d,this.imageData=q)):(n.mixin(this,f),this.width=l.pt2px(this.width),this.height=l.pt2px(this.height))},setWidth:function(g){this.width=g;return this},setHeight:function(g){this.height=g;return this},
setOffset:function(g,d){this.xoffset=g;this.yoffset=d;return this},setUrl:function(g){g!==this.url&&(delete this.imageData,delete this.contentType);this.url=g;return this},setXScale:function(g){this.xscale=g;return this},setYScale:function(g){this.yscale=g;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return n.mixin({},l.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var g=this.url,d=this.imageData;if(0===g.indexOf("data:")){var q=g;g=d;d=q.indexOf(";base64,")+8;d=q.substr(d)}!n.isString(g)||0!==g.indexOf("/")&&0!==g.indexOf("//")&&0!==g.indexOf("./")&&0!==g.indexOf("../")||(g=m.getAbsoluteUrl(g));q=l.px2pt(this.width);q=isNaN(q)?void 0:q;var t=l.px2pt(this.height);t=isNaN(t)?void 0:t;var w=l.px2pt(this.xoffset);w=isNaN(w)?void 0:w;var x=l.px2pt(this.yoffset);
x=isNaN(x)?void 0:x;g=p.fixJson(n.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:g,imageData:d,contentType:this.contentType,width:q,height:t,xoffset:w,yoffset:x,xscale:this.xscale,yscale:this.yscale}));g.imageData||delete g.imageData;return g}});r.defaultProps=f;n.setObject("symbol.PictureFillSymbol",r,k);k.symbol.defaultPictureFillSymbol=f;return r})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(r,n,a,l,k,p,m,e,f){var g={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:l.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},d={start:"left",middle:"center",end:"right"},q={left:"start",center:"middle",right:"end",justify:"start"},t={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},w=document.createElement("canvas");r=r(e,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(x,
z,A){n.mixin(this,g);this.font=new f(this.font);this.color=new m(this.color);x&&(n.isObject(x)?(n.mixin(this,x),this.color&&p.isDefined(this.color[0])&&(this.color=m.toDojoColor(this.color)),this.type="textsymbol",this.font=new f(this.font),this.xoffset=l.pt2px(this.xoffset),this.yoffset=l.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=l.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=m.toDojoColor(this.haloColor))):(this.text=x,z&&(this.font=z),A&&(this.color=
A)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(x){this.font=x;return this},setSize:function(x){this.font.size=x;return this},setAngle:function(x){this.angle=x;return this},setOffset:function(x,z){this.xoffset=x;this.yoffset=z;return this},setHaloColor:function(x){this.haloColor=x;return this},setHaloSize:function(x){this.haloSize=x;return this},setAlign:function(x){this.align=x;this.setHorizontalAlignment(x&&d[x.toLowerCase()]||"center");return this},setHorizontalAlignment:function(x){this.horizontalAlignment=
x;return this},getSVGAlign:function(){var x=this.horizontalAlignment;return x=x&&q[x.toLowerCase()]||"middle"},setVerticalAlignment:function(x){this.verticalAlignment=x;return this},getSVGBaseline:function(){var x=this.verticalAlignment;return x&&t[x.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(x){this.decoration=x;this.font||this.setFont(new f);this.font.setDecoration(x);return this},setRotated:function(x){this.rotated=
x;return this},setKerning:function(x){this.kerning=x;return this},setText:function(x){this.text=x;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var x=w&&w.getContext&&w.getContext("2d");if(x){var z=this.font;x.font=(z.style?z.style:l.defaultFont.style)+" "+(z.weight?z.weight:l.defaultFont.weight)+" "+(z.size?z.size:l.defaultFont.size)+"px "+(z.family?z.family:l.defaultFont.family);return x.measureText(this.text).width}x=this.getHeight();z=
0;var A;for(A=0;A<this.text.length;A++){var B=this.text.charAt(A);z=B==B.toUpperCase()?z+.7*x:z+.5*x}return z},getHeight:function(){return l.normalizedLength(this.font.size)},getShapeDescriptors:function(){var x=this.font;if(x){var z={};x.size&&(z.size=x.size);x.style&&(z.style=x.style);x.variant&&(z.variant=x.variant);x.decoration&&(z.decoration=x.decoration);x.weight&&(z.weight=x.weight);x.family&&(z.family=x.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||x&&x.decoration,rotated:this.rotated,kerning:this.kerning},font:z,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var x=l.px2pt(this.xoffset),z=l.px2pt(this.yoffset),A=l.px2pt(this.haloSize);x=isNaN(x)?void 0:x;z=isNaN(z)?void 0:z;A=isNaN(A)?void 0:A;return p.fixJson(n.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:A,haloColor:this.haloColor&&
m.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:x,yoffset:z,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});n.mixin(r,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});r.defaultProps=
g;n.setObject("symbol.TextSymbol",r,k);k.symbol.defaultTextSymbol=g;return r})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(r,n,a,l,k,p){r=r(null,{declaredClass:"esri.symbol.Font",constructor:function(m,e,f,g,d){m?n.isObject(m)?n.mixin(this,m):(this.size=m,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==e&&(this.style=e),void 0!==f&&(this.variant=f),void 0!==g&&(this.weight=g),void 0!==d&&
(this.family=d)):n.mixin(this,l.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>a("ie")&&this.size&&n.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=l.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(m){this.size=this._convert2PxSize(m);return this},_convert2PxSize:function(m){var e;parseFloat(m)==m?e=m:n.isString(m)&&(-1<m.indexOf("pt")?e=l.pt2px(parseFloat(m)):-1<m.indexOf("px")?e=parseFloat(m):-1<m.indexOf("em")?e=
l.pt2px(12*parseFloat(m)):-1<m.indexOf("%")&&(e=l.pt2px(.12*parseFloat(m))));return e},setStyle:function(m){this.style=m;return this},setVariant:function(m){this.variant=m;return this},setWeight:function(m){this.weight=m;return this},setFamily:function(m){this.family=m;return this},setDecoration:function(m){this.decoration=m;return this},toJson:function(){return p.fixJson({size:l.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});n.mixin(r,{STYLE_NORMAL:"normal",
STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});n.setObject("symbol.Font",r,k);return r})},"esri/layers/vectorTiles/layers/graphics/dehydratedFeatureComparison":function(){define(["require","exports"],function(r,n){function a(e,f){if(e===f)return!0;if(null==e||null==f||e.length!==f.length)return!1;for(var g=0;g<e.length;g++){var d=e[g],q=f[g];if(d.length!==
q.length)return!1;for(var t=0;t<d.length;t++)if(d[t]!==q[t])return!1}return!0}function l(e,f){if(e===f)return!0;if(null==e||null==f||e.length!==f.length)return!1;for(var g=0;g<e.length;g++)if(!a(e[g],f[g]))return!1;return!0}function k(e,f){return e===f||e&&f&&e.equals(f)}function p(e,f){if(e===f)return!0;if(!e||!f||e.type!==f.type)return!1;switch(e.type){case "point":return k(e.spatialReference,f.spatialReference)?e.x===f.x&&e.y===f.y&&e.z===f.z&&e.m===f.m:!1;case "extent":return e.hasZ===f.hasZ&&
e.hasM===f.hasM&&k(e.spatialReference,f.spatialReference)?e.xmin===f.xmin&&e.ymin===f.ymin&&e.zmin===f.zmin&&e.xmax===f.xmax&&e.ymax===f.ymax&&e.zmax===f.zmax:!1;case "polyline":return e.hasZ===f.hasZ&&e.hasM===f.hasM&&k(e.spatialReference,f.spatialReference)?l(e.paths,f.paths):!1;case "polygon":return e.hasZ===f.hasZ&&e.hasM===f.hasM&&k(e.spatialReference,f.spatialReference)?l(e.rings,f.rings):!1;case "multipoint":return e.hasZ===f.hasZ&&e.hasM===f.hasM&&k(e.spatialReference,f.spatialReference)?
a(e.points,f.points):!1;case "mesh":return!1}}function m(e,f){if(e===f)return!0;if(!e||!f)return!1;for(var g in e)if(!(g in f)||e[g]!==f[g])return!1;for(g in f)if(!(g in e))return!1;return!0}Object.defineProperty(n,"__esModule",{value:!0});n.equals=function(e,f){return e===f?!0:null!=e&&null!=f&&e.objectId===f.objectId&&p(e.geometry,f.geometry)&&m(e.attributes,f.attributes)?!0:!1}})},"esri/layers/vectorTiles/views/3d/lib/glMatrix":function(){define([],function(){var r={};(function(n,a){a(n,!0);a(n,
!1)})(r,function(n,a){var l={};(function(){if("undefined"!=typeof Float32Array){var b=new Float32Array(1),h=new Int32Array(b.buffer);l.invsqrt=function(c){b[0]=c;h[0]=1597463007-(h[0]>>1);var v=b[0];return v*(1.5-.5*c*v*v)}}else l.invsqrt=function(c){return 1/Math.sqrt(c)}})();var k=Array;"undefined"!=typeof Float32Array&&(k=a?Float32Array:Array);var p={create:function(b){var h=new k(3);b?(h[0]=b[0],h[1]=b[1],h[2]=b[2]):h[0]=h[1]=h[2]=0;return h},createFrom:function(b,h,c){var v=new k(3);v[0]=b;v[1]=
h;v[2]=c;return v},set:function(b,h){h[0]=b[0];h[1]=b[1];h[2]=b[2];return h},set3:function(b,h,c,v){v[0]=b;v[1]=h;v[2]=c;return v},add:function(b,h,c){if(!c||b===c)return b[0]+=h[0],b[1]+=h[1],b[2]+=h[2],b;c[0]=b[0]+h[0];c[1]=b[1]+h[1];c[2]=b[2]+h[2];return c},subtract:function(b,h,c){if(!c||b===c)return b[0]-=h[0],b[1]-=h[1],b[2]-=h[2],b;c[0]=b[0]-h[0];c[1]=b[1]-h[1];c[2]=b[2]-h[2];return c},multiply:function(b,h,c){if(!c||b===c)return b[0]*=h[0],b[1]*=h[1],b[2]*=h[2],b;c[0]=b[0]*h[0];c[1]=b[1]*
h[1];c[2]=b[2]*h[2];return c},max:function(b,h,c){c[0]=Math.max(b[0],h[0]);c[1]=Math.max(b[1],h[1]);c[2]=Math.max(b[2],h[2]);return c},min:function(b,h,c){c[0]=Math.min(b[0],h[0]);c[1]=Math.min(b[1],h[1]);c[2]=Math.min(b[2],h[2]);return c},negate:function(b,h){h||(h=b);h[0]=-b[0];h[1]=-b[1];h[2]=-b[2];return h},scale:function(b,h,c){if(!c||b===c)return b[0]*=h,b[1]*=h,b[2]*=h,b;c[0]=b[0]*h;c[1]=b[1]*h;c[2]=b[2]*h;return c},normalize:function(b,h){h||(h=b);var c=b[0],v=b[1];b=b[2];var u=Math.sqrt(c*
c+v*v+b*b);if(!u)return h[0]=0,h[1]=0,h[2]=0,h;if(1===u)return h[0]=c,h[1]=v,h[2]=b,h;u=1/u;h[0]=c*u;h[1]=v*u;h[2]=b*u;return h},cross:function(b,h,c){c||(c=b);var v=b[0],u=b[1];b=b[2];var y=h[0],C=h[1];h=h[2];c[0]=u*h-b*C;c[1]=b*y-v*h;c[2]=v*C-u*y;return c},length:function(b){var h=b[0],c=b[1];b=b[2];return Math.sqrt(h*h+c*c+b*b)},length2:function(b){var h=b[0],c=b[1];b=b[2];return h*h+c*c+b*b},dot:function(b,h){return b[0]*h[0]+b[1]*h[1]+b[2]*h[2]},direction:function(b,h,c){c||(c=b);var v=b[0]-
h[0],u=b[1]-h[1];b=b[2]-h[2];h=Math.sqrt(v*v+u*u+b*b);if(!h)return c[0]=0,c[1]=0,c[2]=0,c;h=1/h;c[0]=v*h;c[1]=u*h;c[2]=b*h;return c},lerp:function(b,h,c,v){v||(v=b);v[0]=b[0]+c*(h[0]-b[0]);v[1]=b[1]+c*(h[1]-b[1]);v[2]=b[2]+c*(h[2]-b[2]);return v},dist:function(b,h){var c=h[0]-b[0],v=h[1]-b[1];b=h[2]-b[2];return Math.sqrt(c*c+v*v+b*b)},dist2:function(b,h){var c=h[0]-b[0],v=h[1]-b[1];b=h[2]-b[2];return c*c+v*v+b*b}},m=null,e=new k(4);p.unproject=function(b,h,c,v,u){u||(u=b);m||(m=x.create());var y=
m;e[0]=2*(b[0]-v[0])/v[2]-1;e[1]=2*(b[1]-v[1])/v[3]-1;e[2]=2*b[2]-1;e[3]=1;x.multiply(c,h,y);if(!x.inverse(y))return null;x.multiplyVec4(y,e);if(0===e[3])return null;u[0]=e[0]/e[3];u[1]=e[1]/e[3];u[2]=e[2]/e[3];return u};var f=p.createFrom(1,0,0),g=p.createFrom(0,1,0),d=p.createFrom(0,0,1);p.rotationTo=function(b,h,c){c||(c=z.create());var v=p.dot(b,h),u=p.create();if(1<=v)z.set(A,c);else if(-.999999>v)p.cross(f,b,u),1E-6>u.length&&p.cross(g,b,u),1E-6>u.length&&p.cross(d,b,u),p.normalize(u),z.fromAxisAngle(u,
Math.PI,c);else{v=Math.sqrt(2*(1+v));var y=1/v;p.cross(b,h,u);c[0]=u[0]*y;c[1]=u[1]*y;c[2]=u[2]*y;c[3]=.5*v;z.normalize(c)}1<c[3]?c[3]=1:-1>c[3]&&(c[3]=-1);return c};var q=p.create(),t=p.create();p.project=function(b,h,c,v){v||(v=b);p.direction(h,c,q);p.subtract(b,h,t);b=p.dot(q,t);p.scale(q,b,v);p.add(v,h,v)};p.str=function(b){return"["+b[0]+", "+b[1]+", "+b[2]+"]"};var w={create:function(b){var h=new k(9);b?(h[0]=b[0],h[1]=b[1],h[2]=b[2],h[3]=b[3],h[4]=b[4],h[5]=b[5],h[6]=b[6],h[7]=b[7],h[8]=b[8]):
h[0]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=0;return h},createFrom:function(b,h,c,v,u,y,C,D,E){var F=new k(9);F[0]=b;F[1]=h;F[2]=c;F[3]=v;F[4]=u;F[5]=y;F[6]=C;F[7]=D;F[8]=E;return F},determinant:function(b){var h=b[3],c=b[4],v=b[5],u=b[6],y=b[7],C=b[8];return b[0]*(C*c-v*y)+b[1]*(-C*h+v*u)+b[2]*(y*h-c*u)},inverse:function(b,h){var c=b[0],v=b[1],u=b[2],y=b[3],C=b[4],D=b[5],E=b[6],F=b[7];b=b[8];var G=b*C-D*F,J=-b*y+D*E,R=F*y-C*E,O=c*G+v*J+u*R;if(!O)return null;O=1/O;h||(h=w.create());h[0]=G*O;h[1]=
(-b*v+u*F)*O;h[2]=(D*v-u*C)*O;h[3]=J*O;h[4]=(b*c-u*E)*O;h[5]=(-D*c+u*y)*O;h[6]=R*O;h[7]=(-F*c+v*E)*O;h[8]=(C*c-v*y)*O;return h},multiply:function(b,h,c){c||(c=b);var v=b[0],u=b[1],y=b[2],C=b[3],D=b[4],E=b[5],F=b[6],G=b[7];b=b[8];var J=h[0],R=h[1],O=h[2],P=h[3],U=h[4],K=h[5],V=h[6],Q=h[7];h=h[8];c[0]=J*v+R*C+O*F;c[1]=J*u+R*D+O*G;c[2]=J*y+R*E+O*b;c[3]=P*v+U*C+K*F;c[4]=P*u+U*D+K*G;c[5]=P*y+U*E+K*b;c[6]=V*v+Q*C+h*F;c[7]=V*u+Q*D+h*G;c[8]=V*y+Q*E+h*b;return c},add:function(b,h,c){c||(c=b);c[0]=b[0]+h[0];
c[1]=b[1]+h[1];c[2]=b[2]+h[2];c[3]=b[3]+h[3];c[4]=b[4]+h[4];c[5]=b[5]+h[5];c[6]=b[6]+h[6];c[7]=b[7]+h[7];c[8]=b[8]+h[8];return c},subtract:function(b,h,c){c||(c=b);c[0]=b[0]-h[0];c[1]=b[1]-h[1];c[2]=b[2]-h[2];c[3]=b[3]-h[3];c[4]=b[4]-h[4];c[5]=b[5]-h[5];c[6]=b[6]-h[6];c[7]=b[7]-h[7];c[8]=b[8]-h[8];return c},multiplyVec2:function(b,h,c){c||(c=h);var v=h[0];h=h[1];c[0]=v*b[0]+h*b[3]+b[6];c[1]=v*b[1]+h*b[4]+b[7];return c},multiplyVec3:function(b,h,c){c||(c=h);var v=h[0],u=h[1];h=h[2];c[0]=v*b[0]+u*b[3]+
h*b[6];c[1]=v*b[1]+u*b[4]+h*b[7];c[2]=v*b[2]+u*b[5]+h*b[8];return c},set:function(b,h){h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];h[4]=b[4];h[5]=b[5];h[6]=b[6];h[7]=b[7];h[8]=b[8];return h},identity:function(b){b||(b=w.create());b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},transpose:function(b,h){if(!h||b===h){h=b[1];var c=b[2],v=b[5];b[1]=b[3];b[2]=b[6];b[3]=h;b[5]=b[7];b[6]=c;b[7]=v;return b}h[0]=b[0];h[1]=b[3];h[2]=b[6];h[3]=b[1];h[4]=b[4];h[5]=b[7];h[6]=b[2];h[7]=b[5];
h[8]=b[8];return h},toMat4:function(b,h){h||(h=x.create());h[15]=1;h[14]=0;h[13]=0;h[12]=0;h[11]=0;h[10]=b[8];h[9]=b[7];h[8]=b[6];h[7]=0;h[6]=b[5];h[5]=b[4];h[4]=b[3];h[3]=0;h[2]=b[2];h[1]=b[1];h[0]=b[0];return h},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+"]"}},x={create:function(b){var h=new k(16);4===arguments.length?(h[0]=arguments[0],h[1]=arguments[1],h[2]=arguments[2],h[3]=arguments[3],h[4]=arguments[4],h[5]=arguments[5],h[6]=
arguments[6],h[7]=arguments[7],h[8]=arguments[8],h[9]=arguments[9],h[10]=arguments[10],h[11]=arguments[11],h[12]=arguments[12],h[13]=arguments[13],h[14]=arguments[14],h[15]=arguments[15]):b&&(h[0]=b[0],h[1]=b[1],h[2]=b[2],h[3]=b[3],h[4]=b[4],h[5]=b[5],h[6]=b[6],h[7]=b[7],h[8]=b[8],h[9]=b[9],h[10]=b[10],h[11]=b[11],h[12]=b[12],h[13]=b[13],h[14]=b[14],h[15]=b[15]);return h},createFrom:function(b,h,c,v,u,y,C,D,E,F,G,J,R,O,P,U){var K=new k(16);K[0]=b;K[1]=h;K[2]=c;K[3]=v;K[4]=u;K[5]=y;K[6]=C;K[7]=D;K[8]=
E;K[9]=F;K[10]=G;K[11]=J;K[12]=R;K[13]=O;K[14]=P;K[15]=U;return K},createFromMatrixRowMajor:function(b){var h=new k(16);h[0]=b[0];h[4]=b[1];h[8]=b[2];h[12]=b[3];h[1]=b[4];h[5]=b[5];h[9]=b[6];h[13]=b[7];h[2]=b[8];h[6]=b[9];h[10]=b[10];h[14]=b[11];h[3]=b[12];h[7]=b[13];h[11]=b[14];h[15]=b[15];return h},createFromMatrix:function(b){var h=new k(16);h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];h[4]=b[4];h[5]=b[5];h[6]=b[6];h[7]=b[7];h[8]=b[8];h[9]=b[9];h[10]=b[10];h[11]=b[11];h[12]=b[12];h[13]=b[13];h[14]=
b[14];h[15]=b[15];return h},set:function(b,h){h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];h[4]=b[4];h[5]=b[5];h[6]=b[6];h[7]=b[7];h[8]=b[8];h[9]=b[9];h[10]=b[10];h[11]=b[11];h[12]=b[12];h[13]=b[13];h[14]=b[14];h[15]=b[15];return h},setRowMajor:function(b,h){h[0]=b[0];h[4]=b[1];h[8]=b[2];h[12]=b[3];h[1]=b[4];h[5]=b[5];h[9]=b[6];h[13]=b[7];h[2]=b[8];h[6]=b[9];h[10]=b[10];h[14]=b[11];h[3]=b[12];h[7]=b[13];h[11]=b[14];h[15]=b[15];return h},identity:function(b){b||(b=x.create());b[0]=1;b[1]=0;b[2]=0;b[3]=
0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},transpose:function(b,h){if(!h||b===h){h=b[1];var c=b[2],v=b[3],u=b[6],y=b[7],C=b[11];b[1]=b[4];b[2]=b[8];b[3]=b[12];b[4]=h;b[6]=b[9];b[7]=b[13];b[8]=c;b[9]=u;b[11]=b[14];b[12]=v;b[13]=y;b[14]=C;return b}h[0]=b[0];h[1]=b[4];h[2]=b[8];h[3]=b[12];h[4]=b[1];h[5]=b[5];h[6]=b[9];h[7]=b[13];h[8]=b[2];h[9]=b[6];h[10]=b[10];h[11]=b[14];h[12]=b[3];h[13]=b[7];h[14]=b[11];h[15]=b[15];return h},determinant:function(b){var h=
b[0],c=b[1],v=b[2],u=b[3],y=b[4],C=b[5],D=b[6],E=b[7],F=b[8],G=b[9],J=b[10],R=b[11],O=b[12],P=b[13],U=b[14];b=b[15];return O*G*D*u-F*P*D*u-O*C*J*u+y*P*J*u+F*C*U*u-y*G*U*u-O*G*v*E+F*P*v*E+O*c*J*E-h*P*J*E-F*c*U*E+h*G*U*E+O*C*v*R-y*P*v*R-O*c*D*R+h*P*D*R+y*c*U*R-h*C*U*R-F*C*v*b+y*G*v*b+F*c*D*b-h*G*D*b-y*c*J*b+h*C*J*b},inverse:function(b,h){h||(h=b);var c=b[0],v=b[1],u=b[2],y=b[3],C=b[4],D=b[5],E=b[6],F=b[7],G=b[8],J=b[9],R=b[10],O=b[11],P=b[12],U=b[13],K=b[14];b=b[15];var V=c*D-v*C,Q=c*E-u*C,W=c*F-y*
C,N=v*E-u*D,I=v*F-y*D,S=u*F-y*E,Z=G*U-J*P,ca=G*K-R*P,fa=G*b-O*P,ha=J*K-R*U,na=J*b-O*U,ma=R*b-O*K,ra=V*ma-Q*na+W*ha+N*fa-I*ca+S*Z;if(!ra)return null;ra=1/ra;h[0]=(D*ma-E*na+F*ha)*ra;h[1]=(-v*ma+u*na-y*ha)*ra;h[2]=(U*S-K*I+b*N)*ra;h[3]=(-J*S+R*I-O*N)*ra;h[4]=(-C*ma+E*fa-F*ca)*ra;h[5]=(c*ma-u*fa+y*ca)*ra;h[6]=(-P*S+K*W-b*Q)*ra;h[7]=(G*S-R*W+O*Q)*ra;h[8]=(C*na-D*fa+F*Z)*ra;h[9]=(-c*na+v*fa-y*Z)*ra;h[10]=(P*I-U*W+b*V)*ra;h[11]=(-G*I+J*W-O*V)*ra;h[12]=(-C*ha+D*ca-E*Z)*ra;h[13]=(c*ha-v*ca+u*Z)*ra;h[14]=
(-P*N+U*Q-K*V)*ra;h[15]=(G*N-J*Q+R*V)*ra;return h},toRotationMat:function(b,h){h||(h=x.create());h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];h[4]=b[4];h[5]=b[5];h[6]=b[6];h[7]=b[7];h[8]=b[8];h[9]=b[9];h[10]=b[10];h[11]=b[11];h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h},toMat3:function(b,h){h||(h=w.create());h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[4];h[4]=b[5];h[5]=b[6];h[6]=b[8];h[7]=b[9];h[8]=b[10];return h},toInverseMat3:function(b,h){var c=b[0],v=b[1],u=b[2],y=b[4],C=b[5],D=b[6],E=b[8],F=b[9];b=b[10];var G=
b*C-D*F,J=-b*y+D*E,R=F*y-C*E,O=c*G+v*J+u*R;if(!O)return null;O=1/O;h||(h=w.create());h[0]=G*O;h[1]=(-b*v+u*F)*O;h[2]=(D*v-u*C)*O;h[3]=J*O;h[4]=(b*c-u*E)*O;h[5]=(-D*c+u*y)*O;h[6]=R*O;h[7]=(-F*c+v*E)*O;h[8]=(C*c-v*y)*O;return h},multiply:function(b,h,c){c||(c=b);var v=b[0],u=b[1],y=b[2],C=b[3],D=b[4],E=b[5],F=b[6],G=b[7],J=b[8],R=b[9],O=b[10],P=b[11],U=b[12],K=b[13],V=b[14];b=b[15];var Q=h[0],W=h[1],N=h[2],I=h[3],S=h[4],Z=h[5],ca=h[6],fa=h[7],ha=h[8],na=h[9],ma=h[10],ra=h[11],sa=h[12],ba=h[13],ea=h[14];
h=h[15];c[0]=Q*v+W*D+N*J+I*U;c[1]=Q*u+W*E+N*R+I*K;c[2]=Q*y+W*F+N*O+I*V;c[3]=Q*C+W*G+N*P+I*b;c[4]=S*v+Z*D+ca*J+fa*U;c[5]=S*u+Z*E+ca*R+fa*K;c[6]=S*y+Z*F+ca*O+fa*V;c[7]=S*C+Z*G+ca*P+fa*b;c[8]=ha*v+na*D+ma*J+ra*U;c[9]=ha*u+na*E+ma*R+ra*K;c[10]=ha*y+na*F+ma*O+ra*V;c[11]=ha*C+na*G+ma*P+ra*b;c[12]=sa*v+ba*D+ea*J+h*U;c[13]=sa*u+ba*E+ea*R+h*K;c[14]=sa*y+ba*F+ea*O+h*V;c[15]=sa*C+ba*G+ea*P+h*b;return c},multiplyVec3:function(b,h,c){c||(c=h);var v=h[0],u=h[1];h=h[2];c[0]=b[0]*v+b[4]*u+b[8]*h+b[12];c[1]=b[1]*
v+b[5]*u+b[9]*h+b[13];c[2]=b[2]*v+b[6]*u+b[10]*h+b[14];return c},multiplyVec4:function(b,h,c){c||(c=h);var v=h[0],u=h[1],y=h[2];h=h[3];c[0]=b[0]*v+b[4]*u+b[8]*y+b[12]*h;c[1]=b[1]*v+b[5]*u+b[9]*y+b[13]*h;c[2]=b[2]*v+b[6]*u+b[10]*y+b[14]*h;c[3]=b[3]*v+b[7]*u+b[11]*y+b[15]*h;return c},translate:function(b,h,c){var v=h[0],u=h[1];h=h[2];if(!c||b===c)return b[12]=b[0]*v+b[4]*u+b[8]*h+b[12],b[13]=b[1]*v+b[5]*u+b[9]*h+b[13],b[14]=b[2]*v+b[6]*u+b[10]*h+b[14],b[15]=b[3]*v+b[7]*u+b[11]*h+b[15],b;var y=b[0];
var C=b[1];var D=b[2];var E=b[3];var F=b[4];var G=b[5];var J=b[6];var R=b[7];var O=b[8];var P=b[9];var U=b[10];var K=b[11];c[0]=y;c[1]=C;c[2]=D;c[3]=E;c[4]=F;c[5]=G;c[6]=J;c[7]=R;c[8]=O;c[9]=P;c[10]=U;c[11]=K;c[12]=y*v+F*u+O*h+b[12];c[13]=C*v+G*u+P*h+b[13];c[14]=D*v+J*u+U*h+b[14];c[15]=E*v+R*u+K*h+b[15];return c},scale:function(b,h,c){var v=h[0],u=h[1];h=h[2];if(!c||b===c)return b[0]*=v,b[1]*=v,b[2]*=v,b[3]*=v,b[4]*=u,b[5]*=u,b[6]*=u,b[7]*=u,b[8]*=h,b[9]*=h,b[10]*=h,b[11]*=h,b;c[0]=b[0]*v;c[1]=b[1]*
v;c[2]=b[2]*v;c[3]=b[3]*v;c[4]=b[4]*u;c[5]=b[5]*u;c[6]=b[6]*u;c[7]=b[7]*u;c[8]=b[8]*h;c[9]=b[9]*h;c[10]=b[10]*h;c[11]=b[11]*h;c[12]=b[12];c[13]=b[13];c[14]=b[14];c[15]=b[15];return c},maxScale:function(b){return Math.max(Math.max(Math.sqrt(b[0]*b[0]+b[4]*b[4]+b[8]*b[8]),Math.sqrt(b[1]*b[1]+b[5]*b[5]+b[9]*b[9])),Math.sqrt(b[2]*b[2]+b[6]*b[6]+b[10]*b[10]))},rotate:function(b,h,c,v){var u=c[0],y=c[1];c=c[2];var C=Math.sqrt(u*u+y*y+c*c);if(!C)return null;1!==C&&(C=1/C,u*=C,y*=C,c*=C);var D=Math.sin(h);
var E=Math.cos(h);var F=1-E;h=b[0];C=b[1];var G=b[2];var J=b[3];var R=b[4];var O=b[5];var P=b[6];var U=b[7];var K=b[8];var V=b[9];var Q=b[10];var W=b[11];var N=u*u*F+E;var I=y*u*F+c*D;var S=c*u*F-y*D;var Z=u*y*F-c*D;var ca=y*y*F+E;var fa=c*y*F+u*D;var ha=u*c*F+y*D;u=y*c*F-u*D;y=c*c*F+E;v?b!==v&&(v[12]=b[12],v[13]=b[13],v[14]=b[14],v[15]=b[15]):v=b;v[0]=h*N+R*I+K*S;v[1]=C*N+O*I+V*S;v[2]=G*N+P*I+Q*S;v[3]=J*N+U*I+W*S;v[4]=h*Z+R*ca+K*fa;v[5]=C*Z+O*ca+V*fa;v[6]=G*Z+P*ca+Q*fa;v[7]=J*Z+U*ca+W*fa;v[8]=h*
ha+R*u+K*y;v[9]=C*ha+O*u+V*y;v[10]=G*ha+P*u+Q*y;v[11]=J*ha+U*u+W*y;return v},rotateX:function(b,h,c){var v=Math.sin(h);h=Math.cos(h);var u=b[4],y=b[5],C=b[6],D=b[7],E=b[8],F=b[9],G=b[10],J=b[11];c?b!==c&&(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[12]=b[12],c[13]=b[13],c[14]=b[14],c[15]=b[15]):c=b;c[4]=u*h+E*v;c[5]=y*h+F*v;c[6]=C*h+G*v;c[7]=D*h+J*v;c[8]=u*-v+E*h;c[9]=y*-v+F*h;c[10]=C*-v+G*h;c[11]=D*-v+J*h;return c},rotateY:function(b,h,c){var v=Math.sin(h);h=Math.cos(h);var u=b[0],y=b[1],C=b[2],D=
b[3],E=b[8],F=b[9],G=b[10],J=b[11];c?b!==c&&(c[4]=b[4],c[5]=b[5],c[6]=b[6],c[7]=b[7],c[12]=b[12],c[13]=b[13],c[14]=b[14],c[15]=b[15]):c=b;c[0]=u*h+E*-v;c[1]=y*h+F*-v;c[2]=C*h+G*-v;c[3]=D*h+J*-v;c[8]=u*v+E*h;c[9]=y*v+F*h;c[10]=C*v+G*h;c[11]=D*v+J*h;return c},rotateZ:function(b,h,c){var v=Math.sin(h);h=Math.cos(h);var u=b[0],y=b[1],C=b[2],D=b[3],E=b[4],F=b[5],G=b[6],J=b[7];c?b!==c&&(c[8]=b[8],c[9]=b[9],c[10]=b[10],c[11]=b[11],c[12]=b[12],c[13]=b[13],c[14]=b[14],c[15]=b[15]):c=b;c[0]=u*h+E*v;c[1]=y*
h+F*v;c[2]=C*h+G*v;c[3]=D*h+J*v;c[4]=u*-v+E*h;c[5]=y*-v+F*h;c[6]=C*-v+G*h;c[7]=D*-v+J*h;return c},frustum:function(b,h,c,v,u,y,C){C||(C=x.create());var D=h-b,E=v-c,F=y-u;C[0]=2*u/D;C[1]=0;C[2]=0;C[3]=0;C[4]=0;C[5]=2*u/E;C[6]=0;C[7]=0;C[8]=(h+b)/D;C[9]=(v+c)/E;C[10]=-(y+u)/F;C[11]=-1;C[12]=0;C[13]=0;C[14]=-(y*u*2)/F;C[15]=0;return C},perspective:function(b,h,c,v,u){b=c*Math.tan(b*Math.PI/360);h*=b;return x.frustum(-h,h,-b,b,c,v,u)},ortho:function(b,h,c,v,u,y,C){C||(C=x.create());var D=h-b,E=v-c,F=
y-u;C[0]=2/D;C[1]=0;C[2]=0;C[3]=0;C[4]=0;C[5]=2/E;C[6]=0;C[7]=0;C[8]=0;C[9]=0;C[10]=-2/F;C[11]=0;C[12]=-(b+h)/D;C[13]=-(v+c)/E;C[14]=-(y+u)/F;C[15]=1;return C},lookAt:function(b,h,c,v){v||(v=x.create());var u=b[0],y=b[1];b=b[2];var C=c[0];var D=c[1];var E=c[2];var F=h[0];c=h[1];var G=h[2];if(u===F&&y===c&&b===G)return x.identity(v);h=u-F;c=y-c;F=b-G;var J=1/Math.sqrt(h*h+c*c+F*F);h*=J;c*=J;F*=J;G=D*F-E*c;E=E*h-C*F;C=C*c-D*h;(J=Math.sqrt(G*G+E*E+C*C))?(J=1/J,G*=J,E*=J,C*=J):C=E=G=0;D=c*C-F*E;var R=
F*G-h*C;var O=h*E-c*G;(J=Math.sqrt(D*D+R*R+O*O))?(J=1/J,D*=J,R*=J,O*=J):O=R=D=0;v[0]=G;v[1]=D;v[2]=h;v[3]=0;v[4]=E;v[5]=R;v[6]=c;v[7]=0;v[8]=C;v[9]=O;v[10]=F;v[11]=0;v[12]=-(G*u+E*y+C*b);v[13]=-(D*u+R*y+O*b);v[14]=-(h*u+c*y+F*b);v[15]=1;return v},fromRotationTranslation:function(b,h,c){c||(c=x.create());var v=b[0],u=b[1],y=b[2],C=b[3],D=v+v,E=u+u,F=y+y;b=v*D;var G=v*E;v*=F;var J=u*E;u*=F;y*=F;D*=C;E*=C;C*=F;c[0]=1-(J+y);c[1]=G+C;c[2]=v-E;c[3]=0;c[4]=G-C;c[5]=1-(b+y);c[6]=u+D;c[7]=0;c[8]=v+E;c[9]=
u-D;c[10]=1-(b+J);c[11]=0;c[12]=h[0];c[13]=h[1];c[14]=h[2];c[15]=1;return c},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+"]"}},z={create:function(b){var h=new k(4);b?(h[0]=b[0],h[1]=b[1],h[2]=b[2],h[3]=b[3]):h[0]=h[1]=h[2]=h[3]=0;return h},createFrom:function(b,h,c,v){var u=new k(4);u[0]=b;u[1]=h;u[2]=c;u[3]=v;return u},set:function(b,h){h[0]=b[0];h[1]=b[1];
h[2]=b[2];h[3]=b[3];return h},identity:function(b){b||(b=z.create());b[0]=0;b[1]=0;b[2]=0;b[3]=1;return b}},A=z.identity();z.calculateW=function(b,h){var c=b[0],v=b[1],u=b[2];if(!h||b===h)return b[3]=-Math.sqrt(Math.abs(1-c*c-v*v-u*u)),b;h[0]=c;h[1]=v;h[2]=u;h[3]=-Math.sqrt(Math.abs(1-c*c-v*v-u*u));return h};z.dot=function(b,h){return b[0]*h[0]+b[1]*h[1]+b[2]*h[2]+b[3]*h[3]};z.inverse=function(b,h){var c=b[0],v=b[1],u=b[2],y=b[3];c=(c=c*c+v*v+u*u+y*y)?1/c:0;if(!h||b===h)return b[0]*=-c,b[1]*=-c,b[2]*=
-c,b[3]*=c,b;h[0]=-b[0]*c;h[1]=-b[1]*c;h[2]=-b[2]*c;h[3]=b[3]*c;return h};z.conjugate=function(b,h){if(!h||b===h)return b[0]*=-1,b[1]*=-1,b[2]*=-1,b;h[0]=-b[0];h[1]=-b[1];h[2]=-b[2];h[3]=b[3];return h};z.length=function(b){var h=b[0],c=b[1],v=b[2];b=b[3];return Math.sqrt(h*h+c*c+v*v+b*b)};z.normalize=function(b,h){h||(h=b);var c=b[0],v=b[1],u=b[2];b=b[3];var y=Math.sqrt(c*c+v*v+u*u+b*b);if(0===y)return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h;y=1/y;h[0]=c*y;h[1]=v*y;h[2]=u*y;h[3]=b*y;return h};z.add=function(b,
h,c){if(!c||b===c)return b[0]+=h[0],b[1]+=h[1],b[2]+=h[2],b[3]+=h[3],b;c[0]=b[0]+h[0];c[1]=b[1]+h[1];c[2]=b[2]+h[2];c[3]=b[3]+h[3];return c};z.multiply=function(b,h,c){c||(c=b);var v=b[0],u=b[1],y=b[2];b=b[3];var C=h[0],D=h[1],E=h[2];h=h[3];c[0]=v*h+b*C+u*E-y*D;c[1]=u*h+b*D+y*C-v*E;c[2]=y*h+b*E+v*D-u*C;c[3]=b*h-v*C-u*D-y*E;return c};z.multiplyVec3=function(b,h,c){c||(c=h);var v=h[0],u=h[1],y=h[2];h=b[0];var C=b[1],D=b[2];b=b[3];var E=b*v+C*y-D*u,F=b*u+D*v-h*y,G=b*y+h*u-C*v;v=-h*v-C*u-D*y;c[0]=E*b+
v*-h+F*-D-G*-C;c[1]=F*b+v*-C+G*-h-E*-D;c[2]=G*b+v*-D+E*-C-F*-h;return c};z.scale=function(b,h,c){if(!c||b===c)return b[0]*=h,b[1]*=h,b[2]*=h,b[3]*=h,b;c[0]=b[0]*h;c[1]=b[1]*h;c[2]=b[2]*h;c[3]=b[3]*h;return c};z.toMat3=function(b,h){h||(h=w.create());var c=b[0],v=b[1],u=b[2],y=b[3],C=c+c,D=v+v,E=u+u;b=c*C;var F=c*D;c*=E;var G=v*D;v*=E;u*=E;C*=y;D*=y;y*=E;h[0]=1-(G+u);h[1]=F+y;h[2]=c-D;h[3]=F-y;h[4]=1-(b+u);h[5]=v+C;h[6]=c+D;h[7]=v-C;h[8]=1-(b+G);return h};z.toMat4=function(b,h){h||(h=x.create());var c=
b[0],v=b[1],u=b[2],y=b[3],C=c+c,D=v+v,E=u+u;b=c*C;var F=c*D;c*=E;var G=v*D;v*=E;u*=E;C*=y;D*=y;y*=E;h[0]=1-(G+u);h[1]=F+y;h[2]=c-D;h[3]=0;h[4]=F-y;h[5]=1-(b+u);h[6]=v+C;h[7]=0;h[8]=c+D;h[9]=v-C;h[10]=1-(b+G);h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h};z.slerp=function(b,h,c,v){v||(v=b);var u=b[0]*h[0]+b[1]*h[1]+b[2]*h[2]+b[3]*h[3];if(1<=Math.abs(u))return v!==b&&(v[0]=b[0],v[1]=b[1],v[2]=b[2],v[3]=b[3]),v;var y=Math.acos(u);var C=Math.sqrt(1-u*u);if(.001>Math.abs(C))return v[0]=.5*b[0]+.5*h[0],
v[1]=.5*b[1]+.5*h[1],v[2]=.5*b[2]+.5*h[2],v[3]=.5*b[3]+.5*h[3],v;u=Math.sin((1-c)*y)/C;c=Math.sin(c*y)/C;v[0]=b[0]*u+h[0]*c;v[1]=b[1]*u+h[1]*c;v[2]=b[2]*u+h[2]*c;v[3]=b[3]*u+h[3]*c;return v};z.fromRotationMatrix=function(b,h){h||(h=z.create());var c=b[0]+b[4]+b[8];if(0<c){var v=Math.sqrt(c+1);h[3]=.5*v;v=.5/v;h[0]=(b[7]-b[5])*v;h[1]=(b[2]-b[6])*v;h[2]=(b[3]-b[1])*v}else{v=z.fromRotationMatrix.s_iNext=z.fromRotationMatrix.s_iNext||[1,2,0];c=0;b[4]>b[0]&&(c=1);b[8]>b[3*c+c]&&(c=2);var u=v[c],y=v[u];
v=Math.sqrt(b[3*c+c]-b[3*u+u]-b[3*y+y]+1);h[c]=.5*v;v=.5/v;h[3]=(b[3*y+u]-b[3*u+y])*v;h[u]=(b[3*u+c]+b[3*c+u])*v;h[y]=(b[3*y+c]+b[3*c+y])*v}return h};w.toQuat4=z.fromRotationMatrix;(function(){var b=w.create();z.fromAxes=function(h,c,v,u){b[0]=c[0];b[3]=c[1];b[6]=c[2];b[1]=v[0];b[4]=v[1];b[7]=v[2];b[2]=h[0];b[5]=h[1];b[8]=h[2];return z.fromRotationMatrix(b,u)}})();z.identity=function(b){b||(b=z.create());b[0]=0;b[1]=0;b[2]=0;b[3]=1;return b};z.fromAngleAxis=function(b,h,c){c||(c=z.create());b*=.5;
var v=Math.sin(b);c[3]=Math.cos(b);c[0]=v*h[0];c[1]=v*h[1];c[2]=v*h[2];return c};z.toAngleAxis=function(b,h){h||(h=b);var c=b[0]*b[0]+b[1]*b[1]+b[2]*b[2];0<c?(h[3]=2*Math.acos(b[3]),c=l.invsqrt(c),h[0]=b[0]*c,h[1]=b[1]*c,h[2]=b[2]*c):(h[3]=0,h[0]=1,h[1]=0,h[2]=0);return h};z.str=function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"};var B={create:function(b){var h=new k(4);b?(h[0]=b[0],h[1]=b[1],h[2]=b[2],h[3]=b[3]):h[0]=h[1]=h[2]=h[3]=0;return h},createFrom:function(b,h,c,v){var u=new k(4);
u[0]=b;u[1]=h;u[2]=c;u[3]=v;return u},set:function(b,h){h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];return h},identity:function(b){b||(b=B.create());b[0]=1;b[1]=0;b[2]=0;b[3]=1;return b},transpose:function(b,h){if(!h||b===h)return h=b[1],b[1]=b[2],b[2]=h,b;h[0]=b[0];h[1]=b[2];h[2]=b[1];h[3]=b[3];return h},determinant:function(b){return b[0]*b[3]-b[2]*b[1]},inverse:function(b,h){h||(h=b);var c=b[0],v=b[1],u=b[2];b=b[3];var y=c*b-u*v;if(!y)return null;y=1/y;h[0]=b*y;h[1]=-v*y;h[2]=-u*y;h[3]=c*y;return h},
multiply:function(b,h,c){c||(c=b);var v=b[0],u=b[1],y=b[2];b=b[3];c[0]=v*h[0]+u*h[2];c[1]=v*h[1]+u*h[3];c[2]=y*h[0]+b*h[2];c[3]=y*h[1]+b*h[3];return c},rotate:function(b,h,c){c||(c=b);var v=b[0],u=b[1],y=b[2];b=b[3];var C=Math.sin(h);h=Math.cos(h);c[0]=v*h+u*C;c[1]=v*-C+u*h;c[2]=y*h+b*C;c[3]=y*-C+b*h;return c},multiplyVec2:function(b,h,c){c||(c=h);var v=h[0];h=h[1];c[0]=v*b[0]+h*b[1];c[1]=v*b[2]+h*b[3];return c},scale:function(b,h,c){c||(c=b);var v=b[1],u=b[2],y=b[3],C=h[0];h=h[1];c[0]=b[0]*C;c[1]=
v*h;c[2]=u*C;c[3]=y*h;return c},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"}};a=a?"":"d";n["glMath"+a]=l;n["vec2"+a]={create:function(b){var h=new k(2);b?(h[0]=b[0],h[1]=b[1]):(h[0]=0,h[1]=0);return h},createFrom:function(b,h){var c=new k(2);c[0]=b;c[1]=h;return c},add:function(b,h,c){c||(c=h);c[0]=b[0]+h[0];c[1]=b[1]+h[1];return c},subtract:function(b,h,c){c||(c=h);c[0]=b[0]-h[0];c[1]=b[1]-h[1];return c},multiply:function(b,h,c){c||(c=h);c[0]=b[0]*h[0];c[1]=b[1]*h[1];return c},
divide:function(b,h,c){c||(c=h);c[0]=b[0]/h[0];c[1]=b[1]/h[1];return c},scale:function(b,h,c){c||(c=b);c[0]=b[0]*h;c[1]=b[1]*h;return c},dist:function(b,h){var c=h[0]-b[0];b=h[1]-b[1];return Math.sqrt(c*c+b*b)},dist2:function(b,h){var c=h[0]-b[0];b=h[1]-b[1];return c*c+b*b},set:function(b,h){h[0]=b[0];h[1]=b[1];return h},set2:function(b,h,c){c[0]=b;c[1]=h;return c},negate:function(b,h){h||(h=b);h[0]=-b[0];h[1]=-b[1];return h},normalize:function(b,h){h||(h=b);var c=b[0]*b[0]+b[1]*b[1];0<c?(c=Math.sqrt(c),
h[0]=b[0]/c,h[1]=b[1]/c):h[0]=h[1]=0;return h},cross:function(b,h,c){b=b[0]*h[1]-b[1]*h[0];if(!c)return b;c[0]=c[1]=0;c[2]=b;return c},length:function(b){var h=b[0];b=b[1];return Math.sqrt(h*h+b*b)},dot:function(b,h){return b[0]*h[0]+b[1]*h[1]},direction:function(b,h,c){c||(c=b);var v=b[0]-h[0];b=b[1]-h[1];h=v*v+b*b;if(!h)return c[0]=0,c[1]=0,c[2]=0,c;h=1/Math.sqrt(h);c[0]=v*h;c[1]=b*h;return c},lerp:function(b,h,c,v){v||(v=b);v[0]=b[0]+c*(h[0]-b[0]);v[1]=b[1]+c*(h[1]-b[1]);return v},str:function(b){return"["+
b[0]+", "+b[1]+"]"}};n["vec3"+a]=p;n["vec4"+a]={create:function(b){var h=new k(4);b?(h[0]=b[0],h[1]=b[1],h[2]=b[2],h[3]=b[3]):(h[0]=0,h[1]=0,h[2]=0,h[3]=0);return h},createFrom:function(b,h,c,v){var u=new k(4);u[0]=b;u[1]=h;u[2]=c;u[3]=v;return u},add:function(b,h,c){c||(c=h);c[0]=b[0]+h[0];c[1]=b[1]+h[1];c[2]=b[2]+h[2];c[3]=b[3]+h[3];return c},subtract:function(b,h,c){c||(c=h);c[0]=b[0]-h[0];c[1]=b[1]-h[1];c[2]=b[2]-h[2];c[3]=b[3]-h[3];return c},multiply:function(b,h,c){c||(c=h);c[0]=b[0]*h[0];c[1]=
b[1]*h[1];c[2]=b[2]*h[2];c[3]=b[3]*h[3];return c},divide:function(b,h,c){c||(c=h);c[0]=b[0]/h[0];c[1]=b[1]/h[1];c[2]=b[2]/h[2];c[3]=b[3]/h[3];return c},scale:function(b,h,c){c||(c=b);c[0]=b[0]*h;c[1]=b[1]*h;c[2]=b[2]*h;c[3]=b[3]*h;return c},dot:function(b,h){return b[0]*h[0]+b[1]*h[1]+b[2]*h[2]+b[3]*h[3]},set:function(b,h){h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];return h},set4:function(b,h,c,v,u){u[0]=b;u[1]=h;u[2]=c;u[3]=v;return u},negate:function(b,h){h||(h=b);h[0]=-b[0];h[1]=-b[1];h[2]=-b[2];
h[3]=-b[3];return h},lerp:function(b,h,c,v){v||(v=b);v[0]=b[0]+c*(h[0]-b[0]);v[1]=b[1]+c*(h[1]-b[1]);v[2]=b[2]+c*(h[2]-b[2]);v[3]=b[3]+c*(h[3]-b[3]);return v},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"}};n["mat2"+a]=B;n["mat3"+a]=w;n["mat4"+a]=x;n["quat4"+a]=z});return r})},"esri/layers/vectorTiles/views/3d/support/mathUtils":function(){define(["require","exports","../lib/glMatrix"],function(r,n,a){function l(d){return Math.asin(1<d?1:-1>d?-1:d)}function k(d){return Math.acos(1<
d?1:-1>d?-1:d)}function p(d,q,t){return d<q?q:d>t?t:d}function m(d){for(var q in d){var t=d[q];t instanceof Function&&(d[q]=t.bind(d))}return d}Object.defineProperty(n,"__esModule",{value:!0});n.deg2rad=function(d){return d*Math.PI/180};n.rad2deg=function(d){return 180*d/Math.PI};n.asin=l;n.acos=k;n.sign=Math.sign||function(d){return+(0<d)-+(0>d)||+d};n.log2=Math.log2||function(d){return Math.log(d)/Math.LN2};n.fovx2fovy=function(d,q,t){return 2*Math.atan(t*Math.tan(.5*d)/q)};n.fovy2fovx=function(d,
q,t){return 2*Math.atan(q*Math.tan(.5*d)/t)};n.makeOrthonormal=function(d,q,t){t=t||d;var w=a.vec3d.dot(d,q);a.vec3d.set3(d[0]-w*q[0],d[1]-w*q[1],d[2]-w*q[2],t);a.vec3d.normalize(t)};n.tangentFrame=function(d,q,t){Math.abs(d[0])>Math.abs(d[1])?a.vec3d.set3(0,1,0,q):a.vec3d.set3(1,0,0,q);a.vec3d.cross(d,q,t);a.vec3d.normalize(q);a.vec3d.cross(t,d,q);a.vec3d.normalize(t)};n.cartesianToSpherical=function(d,q){var t=a.vec3d.length(d),w=l(d[2]/t);a.vec3d.set3(t,w,Math.atan2(d[1]/t,d[0]/t),q)};n.sphericalToCartesian=
function(d,q){var t=d[0],w=d[1];d=d[2];var x=Math.cos(w);a.vec3d.set3(t*x*Math.cos(d),t*x*Math.sin(d),t*Math.sin(w),q)};n.lerp=function(d,q,t){return d+(q-d)*t};n.bilerp=function(d,q,t,w,x,z){d+=(q-d)*x;return d+(t+(w-t)*x-d)*z};n.slerp=function(d,q,t,w){void 0===w&&(w=d);var x=a.vec3d.length(d),z=a.vec3d.length(q),A=a.vec3d.dot(d,q)/(x*z);if(.9999999999999999>A){A=Math.acos(A);var B=((1-t)*x+t*z)/Math.sin(A);z=B/z*Math.sin(t*A);a.vec3d.scale(d,B/x*Math.sin((1-t)*A),f);a.vec3d.scale(q,z,g);return a.vec3d.add(f,
g,w)}return a.vec3d.lerp(d,q,t,w)};n.angle=function(d,q,t){d=a.vec3d.normalize(d,f);q=a.vec3d.normalize(q,g);var w=k(a.vec3d.dot(d,q));return t&&(d=a.vec3d.cross(d,q,e),0>a.vec3d.dot(d,t))?-w:w};n.clamp=p;n.isFinite=Number.isFinite||function(d){return"number"===typeof d&&window.isFinite(d)};n.isNaN=Number.isNaN||function(d){return d!==d};n.makePiecewiseLinearFunction=function(d){var q=d.length;return function(t){var w=0;if(t<=d[0][0])return d[0][1];if(t>=d[q-1][0])return d[q-1][1];for(;t>d[w][0];)w++;
var x=d[w][0];t=(x-t)/(x-d[w-1][0]);return t*d[w-1][1]+(1-t)*d[w][1]}};n.vectorEquals=function(d,q){if(null==d||null==q)return d!==q;if(d.length!==q.length)return!1;for(var t=0;t<d.length;t++)if(d[t]!==q[t])return!1;return!0};n.floatEqualRelative=function(d,q,t){void 0===t&&(t=1E-6);if(n.isNaN(d)||n.isNaN(q))return!1;if(d===q)return!0;var w=Math.abs(d-q),x=Math.abs(d),z=Math.abs(q);if(0===d||0===q||1E-12>x&&1E-12>z){if(w>.01*t)return!1}else if(w/(x+z)>t)return!1;return!0};n.floatEqualAbsolute=function(d,
q,t){void 0===t&&(t=1E-6);return n.isNaN(d)||n.isNaN(q)?!1:(d>q?d-q:q-d)<=t};r=function(){function d(q,t){this.min=q;this.max=t;this.range=t-q}d.prototype.ndiff=function(q,t){void 0===t&&(t=0);return Math.ceil((q-t)/this.range)*this.range+t};d.prototype._normalize=function(q,t,w,x){void 0===x&&(x=0);w-=x;w<q?w+=this.ndiff(q-w):w>t&&(w-=this.ndiff(w-t));return w+x};d.prototype.normalize=function(q,t){return this._normalize(this.min,this.max,q,t)};d.prototype.clamp=function(q,t){void 0===t&&(t=0);return p(q-
t,this.min,this.max)+t};d.prototype.monotonic=function(q,t,w){return q<t?t:t+this.ndiff(q-t,w)};d.prototype.minimalMonotonic=function(q,t,w){return this._normalize(q,q+this.range,t,w)};d.prototype.center=function(q,t,w){t=this.monotonic(q,t,w);return this.normalize((q+t)/2,w)};d.prototype.diff=function(q,t,w){return this.monotonic(q,t,w)-q};d.prototype.contains=function(q,t,w){t=this.minimalMonotonic(q,t);w=this.minimalMonotonic(q,w);return w>q&&w<t};return d}();n.Cyclical=r;n.cyclical2PI=m(new r(0,
2*Math.PI));n.cyclicalPI=m(new r(-Math.PI,Math.PI));n.cyclicalDeg=m(new r(0,360));var e=a.vec3d.create(),f=a.vec3d.create(),g=a.vec3d.create()})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/VertexVector":function(){define(["require","exports","../Utils","../util/Writer"],function(r,n,a,l){Object.defineProperty(n,"__esModule",{value:!0});var k=function(){function p(m,e){this.data=m;this.stride=e;this.vertexCount=0}p.prototype.transfer=function(m,e){var f=this.data.buffer();m.vertexCount=this.vertexCount;
m.data=f;m.stride=this.stride;e.push(f)};return p}();n.default=k;r=function(){function p(m,e,f){this.geometryType=m;this.indexVector=new l.default(Uint32Array,f);this.namedVectors={};m=a.getStrides(m,e);for(var g in m){e=m[g];var d=new l.default(Uint32Array,e/4*f);this.namedVectors[g]=new k(d,e)}}p.prototype.get=function(m){return this.namedVectors[m].data};p.prototype.transfer=function(m,e){var f=this.indexVector.buffer(),g={};e.push(f);for(var d in this.namedVectors){var q=this.namedVectors[d];
g[d]={};q.transfer(g[d],e)}m.geometryType=this.geometryType;m.indexBuffer=f;m.namedBuffers=g;this.destroy()};p.prototype.destroy=function(){this.namedVectors=this.indexVector=null};return p}();n.VertexVectors=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Writer":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});r=function(){function a(l,k){this._pos=0;k=k?this._roundToNearest4(k):40;this._array=new ArrayBuffer(k);this._buffer=new l(this._array);
this._ctor=l}Object.defineProperty(a.prototype,"length",{get:function(){return this._pos},enumerable:!0,configurable:!0});a.prototype._roundToNearest4=function(l){l=Math.round(l);return l+(4-l%4)};a.prototype._ensureSize=function(l){if(this._pos+l>=this._buffer.length){l=this._roundToNearest4(1.5*(this._array.byteLength+4*l));l=new ArrayBuffer(l);var k=new this._ctor(l);k.set(this._buffer,0);this._array=l;this._buffer=k}};a.prototype.writeInt32=function(l){this._ensureSize(1);var k=this._pos;this._buffer[this._pos++]=
l;return k};a.prototype.writeF32=function(l){this._ensureSize(1);var k=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=l;this._pos++;return k};a.prototype.writeUint32=function(l){this._ensureSize(1);var k=this._pos;this._buffer[this._pos++]=l;return k};a.prototype.push=function(l){this._ensureSize(1);var k=this._pos;this._buffer[this._pos++]=l;return k};a.prototype.writeRegion=function(l){this._ensureSize(l.length);var k=this._pos;this._buffer.set(l,this._pos);this._pos+=l.length;return k};
a.prototype.buffer=function(){var l=this._array.slice(0,4*this._pos);this.destroy();return l};a.prototype.destroy=function(){this._buffer=this._array=null};return a}();n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/meshTemplateUtils":function(){define("require exports ../../../../../../core/Logger ../../enums ../templates/WGLFillTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../templates/WGLTextTemplate ../../util/vvFlagUtils".split(" "),function(r,
n,a,l,k,p,m,e,f){Object.defineProperty(n,"__esModule",{value:!0});var g=a.getLogger("esri.views.2d.engine.webgl.mesh.templates.meshTemplateUtils");n.createMeshTemplates=function(d,q,t,w,x,z,A){void 0===A&&(A=!1);if(-1!==t.type.indexOf("3d"))return g.error("3D symbols are not supported with MapView"),d;var B=w.get(t.id);B||g.error("Couldn't find texture resources for symbol: "+t.id+"!");switch(t.type){case l.EsriSymbolTypeKebab.SIMPLE_MARKER:return d.push(m.default.fromSimpleMarker(q,f.getMarkerVVFlags(x),
t,B.spriteMosaicItem,z)),d;case l.EsriSymbolTypeKebab.PICTURE_MARKER:return d.push(m.default.fromPictureMarker(q,f.getMarkerVVFlags(x),t,B.spriteMosaicItem,z)),d;case l.EsriSymbolTypeKebab.SIMPLE_FILL:return d.push(k.default.fromSimpleFill(q,f.getFillVVFlags(x),t,B.spriteMosaicItem,z,A)),t.outline&&(w=w.get(t.outline.id),d.push(p.default.fromSimpleLine(q,f.getLineVVFlags(x,!0),t.outline,w&&w.spriteMosaicItem,z))),d;case l.EsriSymbolTypeKebab.PICTURE_FILL:return d.push(k.default.fromPictureFill(q,
f.getFillVVFlags(x),t,B.spriteMosaicItem,z,A)),t.outline&&(w=w.get(t.outline.id),d.push(p.default.fromSimpleLine(q,f.getLineVVFlags(x,!0),t.outline,w&&w.spriteMosaicItem,z))),d;case l.EsriSymbolTypeKebab.SIMPLE_LINE:return d.push(p.default.fromSimpleLine(q,f.getLineVVFlags(x,!1),t,B.spriteMosaicItem,z)),d;case l.EsriSymbolTypeKebab.TEXT:return d.push(e.default.fromText(q,f.getTextVVFlags(x),t,z,B.glyphMosaicItems)),d;default:return g.error("Unable to create mesh template for unknown symbol type: "+
t.type),d}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper dojo/has ../../../../../../core/Logger ../../../../../../core/libs/earcut/earcut ../../color ../../definitions ../../enums ../../enums ../../number ../../TileClipper ../../WGLDisplayRecord ../Tesselator ./WGLMeshTemplate".split(" "),function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x){Object.defineProperty(n,"__esModule",{value:!0});var z=
k.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLFillTemplate"),A=[],B=[];r=function(b){function h(c,v,u,y,C,D,E,F){var G=b.call(this)||this;G.fillColor=y;G.tl=C;G.br=D;G.aux=E;G.isBFS=F;G.geometryType=f.WGLGeometryType.FILL;G.useLibtess=!1;y=l("esri-featurelayer-webgl");G.useLibtess="libtess"===((y||{}).tesselator||"libtess");G.useLibtess&&(G._tesselator=new w.default);G.vvFlags=v;G._materialStore=c;G.materialId=G._materialStore.createSpriteMaterial(u,G.geometryType,v);G._tileClipper=new q.TileClipper(0,
0,0,1,8);G._tileClipper.setExtent(512);return G}a(h,b);h.fromSimpleFill=function(c,v,u,y,C,D){void 0===D&&(D=!1);u=(C=u.color)&&"none"!==u.style&&m.premultiplyAlphaRGBA(C)||0;if(!y)return new h(c,v,null,u,0,0,0,D);var E=y.rect;C=E.x+1;var F=E.y+1,G=E.x+1+y.width,J=E.y+1+y.height;E=d.i1616to32(C,F);var R=d.i1616to32(G,J);C=d.i8888to32(d.nextHighestPowerOfTwo(G-C),d.nextHighestPowerOfTwo(J-F),0,0);return new h(c,v,y,u,E,R,C,D)};h.fromPictureFill=function(c,v,u,y,C,D){void 0===D&&(D=!1);C=e.PICTURE_FILL_COLOR;
var E=y.rect,F=E.x+1+y.width,G=E.y+1+y.height;E=d.i1616to32(E.x+1,E.y+1);F=d.i1616to32(F,G);u=d.i8888to32(d.nextHighestPowerOfTwo(u.width),d.nextHighestPowerOfTwo(u.height),0,0);return new h(c,v,y,C,E,F,u,D)};h.prototype.writeMesh=function(c,v,u,y,C,D,E){A.length=0;if(this.vvFlags&g.WGLVVFlag.COLOR||0!==this.fillColor)if("esriGeometryPolygon"!==u)z.error("Unable to handle geometryType: "+u);else{var F=C.geometry;F=(C=this._isClippingRequired(F))?this._clip(F,!this.useLibtess):F.rings;return this.useLibtess?
this._writeMeshLibtess(c,v,u,y,F,C,D,E):this._writeMeshEarcut(c,v,u,y,F,C,D,E)}};h.prototype._isClippingRequired=function(c){var v=0;for(c=c.rings;v<c.length;v++){var u=c[v],y=u.length;if(!(3>y)){var C=u[0][0],D=u[0][1];if(-8>C||520<C||-8>D||520<D)return!0;for(var E=1;E<y;++E)if(C+=u[E][0],D+=u[E][1],-8>C||520<C||-8>D||520<D)return!0}}return!1};h.prototype._clip=function(c,v){this._tileClipper.reset(3);for(var u=0,y=c.rings;u<y.length;u++){var C=y[u],D=C.length;if(!(3>D)){c=C[0][0];var E=C[0][1];
this._tileClipper.moveTo(c,E);for(var F=1;F<D;++F)c+=C[F][0],E+=C[F][1],this._tileClipper.lineTo(c,E);this._tileClipper.close()}}return this._tileClipper.result(v)};h.prototype._writeMeshLibtess=function(c,v,u,y,C,D,E,F){if(C&&C.length){u=this._materialStore.get(this.materialId);E=[];var G=v.indexVector;v=v.get("geometry");var J=new t(y,this.geometryType,this.materialId),R=this._getOffset(v,u);J.vertexFrom=R;J.indexFrom=G.length;c.push(J);this._tesselator.beginPolygon(A,E);for(c=0;c<C.length;c++){var O=
C[c];if(!(3>O.length)){this._tesselator.beginContour();var P=void 0,U=void 0;D?(P=O[0].x,U=O[0].y):(P=O[0][0],U=O[0][1]);var K=[P,U,0];this._tesselator.addVertex(K,K);for(K=1;K<O.length-1;K++){var V=void 0,Q=void 0;D?(P=O[K].x,U=O[K].y):(V=O[K][0],Q=O[K][1],P+=V,U+=Q);V=[P,U,0];this._tesselator.addVertex(V,V)}this._tesselator.endContour()}}this._tesselator.endPolygon();this._writeVerticesLibTess(J,v,y,A,u,F);this._writeIndicesLibTess(J,G,R,E)}};h.prototype._writeMeshEarcut=function(c,v,u,y,C,D,E,
F){if(C&&C.length){u=this._materialStore.get(this.materialId);E=v.indexVector;v=v.get("geometry");var G=new t(y,this.geometryType,this.materialId),J=this._getOffset(v,u);G.vertexFrom=J;G.indexFrom=E.length;c.push(G);for(var R=c=0,O=0;O<C.length;O++){var P=C[O],U=R,K=void 0,V=void 0;D?(K=P[0].x,V=P[0].y):(K=P[0][0],V=P[0][1]);A[R++]=K;A[R++]=V;for(var Q=0,W=1;W<P.length;++W){var N=void 0,I=void 0;D?(N=K,I=V,K=P[W].x,V=P[W].y,N=K-N,I=V-I):(N=P[W][0],I=P[W][1],K+=N,V+=I);Q-=N*(V+V+I);A[R++]=K;A[R++]=
V}0<Q?(0<U-c&&(this._write(G,E,v,J,y,A,B,c,U,u,F),c=U),B.length=0):0>Q?0<U-c?B.push(.5*(U-c)):R=U:R=U}0<R-c&&this._write(G,E,v,J,y,A,B,c,R,u,F);A.length=B.length=0}};h.prototype._write=function(c,v,u,y,C,D,E,F,G,J,R){y=p(D.slice(F,G),E,2);y.length&&(F=this._getOffset(u,J),this._writeVertices(c,u,C,D,E,J,R),this._writeIndices(c,v,F,y))};h.prototype._getOffset=function(c,v){v=v.materialKeyInfo.hasVV()?8:6;return c.length/v};h.prototype._writeVertices=function(c,v,u,y,C,D,E){for(C=0;C<y.length;C+=2){var F=
d.i1616to32(y[C],y[C+1]);v.push(F);v.push(u);v.push(this.fillColor);v.push(this.tl);v.push(this.br);v.push(this.aux);this._writeVV(v,E,D);c.vertexCount++}};h.prototype._writeIndices=function(c,v,u,y){for(var C=0;C<y.length;C+=3)v.push(u+y[C]),v.push(u+y[C+1]),v.push(u+y[C+2]),c.indexCount+=3};h.prototype._writeVerticesLibTess=function(c,v,u,y,C,D){for(var E=0;E<y.length;E+=2){var F=d.i1616to32(y[E],y[E+1]);v.push(F);v.push(u);v.push(this.fillColor);v.push(this.tl);v.push(this.br);v.push(this.aux);
this._writeVV(v,D,C);c.vertexCount++}};h.prototype._writeIndicesLibTess=function(c,v,u,y){for(var C=0;C<y.length;C++)v.push(u+y[C]),c.indexCount++};h.prototype._writeVV=function(c,v,u){u.materialKeyInfo.hasVV()&&(this.isBFS?(c.push(4294967295),c.push(4294967295)):(c.push(v[f.VVType.COLOR]),c.push(v[f.VVType.OPACITY])))};return h}(x.default);n.default=r})},"esri/layers/vectorTiles/core/libs/earcut/earcut":function(){define([],function(){function r(v,u,y){y=y||2;h=v.length/y+(u?2*u.length:0);c=!1;var C=
u&&u.length,D=C?u[0]*y:v.length,E=n(v,0,D,y,!0),F=[];if(!E)return F;var G;if(C)a:{var J=y;C=[];var R;var O=0;for(R=u.length;O<R;O++){var P=u[O]*J;var U=O<R-1?u[O+1]*J:v.length;P=n(v,P,U,J,!1);P===P.next&&(P.steiner=!0);C.push(f(P))}C.sort(p);for(O=0;O<C.length;O++){if(!E){E=null;break a}u=C[O];J=E;if(J=m(u,J))u=x(J,u),a(u,u.next);E=a(E,E.next)}}if(c)return F;if(v.length>80*y){var K=G=v[0];var V=C=v[1];for(J=y;J<D;J+=y)O=v[J],u=v[J+1],O<K&&(K=O),u<V&&(V=u),O>G&&(G=O),u>C&&(C=u);G=Math.max(G-K,C-V)}l(E,
F,y,K,V,G);return F}function n(v,u,y,C,D){if(D===0<b(v,u,y,C))for(D=u;D<y;D+=C)var E=z(D,v[D],v[D+1],E);else for(D=y-C;D>=u;D-=C)E=z(D,v[D],v[D+1],E);E&&q(E,E.next)&&(A(E),E=E.next);return E}function a(v,u){if(!v)return v;u||(u=v);var y=0,C=h*h/2;do{var D=!1;if(v.steiner||!q(v,v.next)&&0!==d(v.prev,v,v.next))v=v.next;else{A(v);v=u=v.prev;if(v===v.next)return null;D=!0}if(y++>C)return c=!0,null}while(D||v!==u);return u}function l(v,u,y,C,D,E,F){if(v){if(!F&&E){var G=v,J=G;do null===J.z&&(J.z=e(J.x,
J.y,C,D,E)),J.prevZ=J.prev,J=J.nextZ=J.next;while(J!==G);J.prevZ.nextZ=null;J.prevZ=null;G=J;var R,O,P,U,K=1;do{J=G;var V=G=null;for(O=0;J;){O++;var Q=J;for(R=P=0;R<K&&(P++,Q=Q.nextZ,Q);R++);for(U=K;0<P||0<U&&Q;)0===P?(R=Q,Q=Q.nextZ,U--):0!==U&&Q?J.z<=Q.z?(R=J,J=J.nextZ,P--):(R=Q,Q=Q.nextZ,U--):(R=J,J=J.nextZ,P--),V?V.nextZ=R:G=R,R.prevZ=V,V=R;J=Q}V.nextZ=null;K*=2}while(1<O)}for(G=v;v.prev!==v.next;){J=v.prev;Q=v.next;if(E)a:{V=v;U=C;var W=D,N=E;O=V.prev;P=V;K=V.next;if(0<=d(O,P,K))V=!1;else{var I=
O.x>P.x?O.x>K.x?O.x:K.x:P.x>K.x?P.x:K.x,S=O.y>P.y?O.y>K.y?O.y:K.y:P.y>K.y?P.y:K.y;R=e(O.x<P.x?O.x<K.x?O.x:K.x:P.x<K.x?P.x:K.x,O.y<P.y?O.y<K.y?O.y:K.y:P.y<K.y?P.y:K.y,U,W,N);U=e(I,S,U,W,N);for(W=V.nextZ;W&&W.z<=U;){if(W!==V.prev&&W!==V.next&&g(O.x,O.y,P.x,P.y,K.x,K.y,W.x,W.y)&&0<=d(W.prev,W,W.next)){V=!1;break a}W=W.nextZ}for(W=V.prevZ;W&&W.z>=R;){if(W!==V.prev&&W!==V.next&&g(O.x,O.y,P.x,P.y,K.x,K.y,W.x,W.y)&&0<=d(W.prev,W,W.next)){V=!1;break a}W=W.prevZ}V=!0}}else V=k(v);if(V)u.push(J.i/y),u.push(v.i/
y),u.push(Q.i/y),A(v),G=v=Q.next;else{if(c)break;v=Q;if(v===G){if(!F)l(a(v),u,y,C,D,E,1);else if(1===F){F=u;G=y;J=v;do Q=J.prev,V=J.next.next,!q(Q,V)&&t(Q,J,J.next,V)&&w(Q,V)&&w(V,Q)&&(F.push(Q.i/G),F.push(J.i/G),F.push(V.i/G),A(J),A(J.next),J=v=V),J=J.next;while(J!==v);v=J;l(v,u,y,C,D,E,2)}else if(2===F)a:{F=v;do{for(G=F.next.next;G!==F.prev;){if(J=F.i!==G.i){V=V=V=void 0;J=F;Q=G;if(V=J.next.i!==Q.i&&J.prev.i!==Q.i){b:{V=J;do{if(V.i!==J.i&&V.next.i!==J.i&&V.i!==Q.i&&V.next.i!==Q.i&&t(V,V.next,J,
Q)){V=!0;break b}V=V.next}while(V!==J);V=!1}V=!V}if(V=V&&w(J,Q)&&w(Q,J)){V=J;O=!1;P=(J.x+Q.x)/2;Q=(J.y+Q.y)/2;do V.y>Q!==V.next.y>Q&&P<(V.next.x-V.x)*(Q-V.y)/(V.next.y-V.y)+V.x&&(O=!O),V=V.next;while(V!==J);V=O}J=V}if(J){v=x(F,G);F=a(F,F.next);v=a(v,v.next);l(F,u,y,C,D,E);l(v,u,y,C,D,E);break a}G=G.next}F=F.next}while(F!==v)}break}}}}}function k(v){var u=v.prev,y=v.next;if(0<=d(u,v,y))return!1;for(var C=v.next.next,D=0;C!==v.prev;){if(g(u.x,u.y,v.x,v.y,y.x,y.y,C.x,C.y)&&0<=d(C.prev,C,C.next))return!1;
C=C.next;if(D++>h)return c=!0,!1}return!0}function p(v,u){return v.x-u.x}function m(v,u){var y=u,C=v.x,D=v.y,E=-Infinity;do{if(!y)return null;if(D<=y.y&&D>=y.next.y){var F=y.x+(D-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(F<=C&&F>E){E=F;if(F===C){if(D===y.y)return y;if(D===y.next.y)return y.next}var G=y.x<y.next.x?y:y.next}}y=y.next}while(y!==u);if(!G)return null;if(C===E)return G.prev;u=G;F=G.x;var J=G.y,R=Infinity;for(y=G.next;y!==u;){if(C>=y.x&&y.x>=F&&g(D<J?C:E,D,F,J,D<J?E:C,D,y.x,y.y)){var O=Math.abs(D-
y.y)/(C-y.x);(O<R||O===R&&y.x>G.x)&&w(y,v)&&(G=y,R=O)}y=y.next}return G}function e(v,u,y,C,D){v=32767*(v-y)/D;u=32767*(u-C)/D;v=(v|v<<8)&16711935;v=(v|v<<4)&252645135;v=(v|v<<2)&858993459;u=(u|u<<8)&16711935;u=(u|u<<4)&252645135;u=(u|u<<2)&858993459;return(v|v<<1)&1431655765|((u|u<<1)&1431655765)<<1}function f(v){var u=v,y=v;do u.x<y.x&&(y=u),u=u.next;while(u!==v);return y}function g(v,u,y,C,D,E,F,G){return 0<=(D-F)*(u-G)-(v-F)*(E-G)&&0<=(v-F)*(C-G)-(y-F)*(u-G)&&0<=(y-F)*(E-G)-(D-F)*(C-G)}function d(v,
u,y){return(u.y-v.y)*(y.x-u.x)-(u.x-v.x)*(y.y-u.y)}function q(v,u){return v.x===u.x&&v.y===u.y}function t(v,u,y,C){return q(v,u)&&q(y,C)||q(v,C)&&q(y,u)?!0:0<d(v,u,y)!==0<d(v,u,C)&&0<d(y,C,v)!==0<d(y,C,u)}function w(v,u){return 0>d(v.prev,v,v.next)?0<=d(v,u,v.next)&&0<=d(v,v.prev,u):0>d(v,u,v.prev)||0>d(v,v.next,u)}function x(v,u){var y=new B(v.i,v.x,v.y),C=new B(u.i,u.x,u.y),D=v.next,E=u.prev;v.next=u;u.prev=v;y.next=D;D.prev=y;C.next=y;y.prev=C;E.next=C;C.prev=E;return C}function z(v,u,y,C){v=new B(v,
u,y);C?(v.next=C.next,v.prev=C,C.next.prev=v,C.next=v):(v.prev=v,v.next=v);return v}function A(v){v.next.prev=v.prev;v.prev.next=v.next;v.prevZ&&(v.prevZ.nextZ=v.nextZ);v.nextZ&&(v.nextZ.prevZ=v.prevZ)}function B(v,u,y){this.i=v;this.x=u;this.y=y;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function b(v,u,y,C){for(var D=0,E=y-C;u<y;u+=C)D+=(v[E]-v[u])*(v[u+1]+v[E+1]),E=u;return D}var h,c;r.deviation=function(v,u,y,C){var D=u&&u.length,E=Math.abs(b(v,0,D?u[0]*y:v.length,y));
if(D){D=0;for(var F=u.length;D<F;D++)E-=Math.abs(b(v,u[D]*y,D<F-1?u[D+1]*y:v.length,y))}for(D=u=0;D<C.length;D+=3){F=C[D]*y;var G=C[D+1]*y,J=C[D+2]*y;u+=Math.abs((v[F]-v[J])*(v[G+1]-v[F+1])-(v[F]-v[G])*(v[J+1]-v[F+1]))}return 0===E&&0===u?0:Math.abs((u-E)/E)};r.flatten=function(v){for(var u=v[0][0].length,y={vertices:[],holes:[],dimensions:u},C=0,D=0;D<v.length;D++){for(var E=0;E<v[D].length;E++)for(var F=0;F<u;F++)y.vertices.push(v[D][E][F]);0<D&&(C+=v[D-1].length,y.holes.push(C))}return y};return r})},
"esri/layers/vectorTiles/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./Geometry","./GeometryUtils"],function(r,n,a,l){Object.defineProperty(n,"__esModule",{value:!0});var k=function(){return function(m,e,f){this.ratio=m;this.x=e;this.y=f}}();r=function(){function m(e,f,g,d,q){void 0===d&&(d=8);void 0===q&&(q=8);this.lines=[];this.starts=[];this.pixelRatio=d;this.pixelMargin=q;this.tileSize=512*d;this.dz=e;this.yPos=f;this.xPos=g}m.prototype.setExtent=function(e){this.finalRatio=
this.tileSize/e*(1<<this.dz);var f=this.pixelRatio*this.pixelMargin;f/=this.finalRatio;e>>=this.dz;f>e&&(f=e);this.margin=f;this.xmin=e*this.xPos-f;this.ymin=e*this.yPos-f;this.xmax=this.xmin+e+2*f;this.ymax=this.ymin+e+2*f};m.prototype.reset=function(e){this.type=e;this.lines=[];this.starts=[];this.line=null;this.start=0};m.prototype.moveTo=function(e,f){this._pushLine();this._prevIsIn=this._isIn(e,f);this._moveTo(e,f,this._prevIsIn);this._prevPt=new a.Point(e,f);this._firstPt=new a.Point(e,f);this._dist=
0};m.prototype.lineTo=function(e,f){var g=this._isIn(e,f),d=new a.Point(e,f),q=a.Point.distance(this._prevPt,d);if(g)if(this._prevIsIn)this._lineTo(e,f,!0);else{var t=this._prevPt;var w=d;e=this._intersect(w,t);this.start=this._dist+q*(1-this._r);this._lineTo(e.x,e.y,!0);this._lineTo(w.x,w.y,!0)}else if(this._prevIsIn)w=this._prevPt,t=d,e=this._intersect(w,t),this._lineTo(e.x,e.y,!0),this._lineTo(t.x,t.y,!1);else{var x=this._prevPt;if(!(x.x<=this.xmin&&d.x<=this.xmin||x.x>=this.xmax&&d.x>=this.xmax||
x.y<=this.ymin&&d.y<=this.ymin||x.y>=this.ymax&&d.y>=this.ymax)){e=[];if(x.x<this.xmin&&d.x>this.xmin||x.x>this.xmin&&d.x<this.xmin){f=(this.xmin-x.x)/(d.x-x.x);var z=x.y+f*(d.y-x.y);z<=this.ymin?w=!1:z>=this.ymax?w=!0:e.push(new k(f,this.xmin,z))}if(x.x<this.xmax&&d.x>this.xmax||x.x>this.xmax&&d.x<this.xmax)f=(this.xmax-x.x)/(d.x-x.x),z=x.y+f*(d.y-x.y),z<=this.ymin?w=!1:z>=this.ymax?w=!0:e.push(new k(f,this.xmax,z));if(x.y<this.ymin&&d.y>this.ymin||x.y>this.ymin&&d.y<this.ymin)f=(this.ymin-x.y)/
(d.y-x.y),z=x.x+f*(d.x-x.x),z<=this.xmin?t=!1:z>=this.xmax?t=!0:e.push(new k(f,z,this.ymin));if(x.y<this.ymax&&d.y>this.ymax||x.y>this.ymax&&d.y<this.ymax)f=(this.ymax-x.y)/(d.y-x.y),z=x.x+f*(d.x-x.x),z<=this.xmin?t=!1:z>=this.xmax?t=!0:e.push(new k(f,z,this.ymax));if(0===e.length)t?w?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):w?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<e.length&&e[0].ratio>e[1].ratio)this.start=this._dist+q*
e[1].ratio,this._lineTo(e[1].x,e[1].y,!0),this._lineTo(e[0].x,e[0].y,!0);else for(this.start=this._dist+q*e[0].ratio,t=0;t<e.length;t++)this._lineTo(e[t].x,e[t].y,!0)}this._lineTo(d.x,d.y,!1)}this._dist+=q;this._prevIsIn=g;this._prevPt=d};m.prototype.close=function(){if(2<this.line.length){var e=this._firstPt,f=this._prevPt;e.x===f.x&&e.y===f.y||this.lineTo(e.x,e.y);e=this.line;for(f=e.length;4<=f;)if(e[0].x===e[1].x&&e[0].x===e[f-2].x||e[0].y===e[1].y&&e[0].y===e[f-2].y)e.pop(),e[0].x=e[f-2].x,e[0].y=
e[f-2].y,--f;else break}};m.prototype.result=function(e){void 0===e&&(e=!0);this._pushLine();if(0===this.lines.length)return null;3===this.type&&e&&p.simplify(this.tileSize,this.margin*this.finalRatio,this.lines);return this.lines};m.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var e=this.lines,f=e.length;if(0===f)return null;for(var g=[],d=0;d<f;d++)g.push({line:e[d],start:this.starts[d]||0});return g};m.prototype._isIn=function(e,f){return e>=
this.xmin&&e<=this.xmax&&f>=this.ymin&&f<=this.ymax};m.prototype._intersect=function(e,f){if(f.x>=this.xmin&&f.x<=this.xmax){var g=f.y<=this.ymin?this.ymin:this.ymax;var d=(g-e.y)/(f.y-e.y);var q=e.x+d*(f.x-e.x)}else if(f.y>=this.ymin&&f.y<=this.ymax)q=f.x<=this.xmin?this.xmin:this.xmax,d=(q-e.x)/(f.x-e.x),g=e.y+d*(f.y-e.y);else{g=f.y<=this.ymin?this.ymin:this.ymax;q=f.x<=this.xmin?this.xmin:this.xmax;var t=(q-e.x)/(f.x-e.x),w=(g-e.y)/(f.y-e.y);t<w?(d=t,g=e.y+t*(f.y-e.y)):(d=w,q=e.x+w*(f.x-e.x))}this._r=
d;return new a.Point(q,g)};m.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0};m.prototype._moveTo=function(e,f,g){3!==this.type?g&&(e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),f=Math.round((f-
(this.ymin+this.margin))*this.finalRatio),this.line.push(new a.Point(e,f))):(g||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),f<this.ymin&&(f=this.ymin),f>this.ymax&&(f=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),f=Math.round((f-(this.ymin+this.margin))*this.finalRatio),this.line.push(new a.Point(e,f)),this._is_v=this._is_h=!1)};m.prototype._lineTo=function(e,f,g){if(3!==this.type)if(g){e=Math.round((e-(this.xmin+this.margin))*this.finalRatio);f=Math.round((f-(this.ymin+
this.margin))*this.finalRatio);if(0<this.line.length&&(g=this.line[this.line.length-1],g.equals(e,f)))return;this.line.push(new a.Point(e,f))}else this.line&&0<this.line.length&&this._pushLine();else if(g||(e<this.xmin&&(e=this.xmin),e>this.xmax&&(e=this.xmax),f<this.ymin&&(f=this.ymin),f>this.ymax&&(f=this.ymax)),e=Math.round((e-(this.xmin+this.margin))*this.finalRatio),f=Math.round((f-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){g=this.line[this.line.length-1];var d=
g.x===e,q=g.y===f;d&&q||(this._is_h&&d?(g.x=e,g.y=f,g=this.line[this.line.length-2],g.x===e&&g.y===f?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(g=this.line[this.line.length-2],this._is_h=g.x===e,this._is_v=g.y===f)):(this._is_h=g.x===e,this._is_v=g.y===f)):this._is_v&&q?(g.x=e,g.y=f,g=this.line[this.line.length-2],g.x===e&&g.y===f?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(g=this.line[this.line.length-2],this._is_h=g.x===e,this._is_v=g.y===f)):(this._is_h=g.x===
e,this._is_v=g.y===f)):(this.line.push(new a.Point(e,f)),this._is_h=d,this._is_v=q))}else this.line.push(new a.Point(e,f))};return m}();n.TileClipper=r;r=function(){function m(){}m.prototype.setExtent=function(e){this._ratio=4096===e?1:4096/e};m.prototype.reset=function(e){this.type=e;this.lines=[];this.line=null};m.prototype.moveTo=function(e,f){this.line&&this.lines.push(this.line);this.line=[];var g=this._ratio;this.line.push(new a.Point(e*g,f*g))};m.prototype.lineTo=function(e,f){var g=this._ratio;
this.line.push(new a.Point(e*g,f*g))};m.prototype.close=function(){var e=this.line;e&&!e[0].isEqual(e[e.length-1])&&e.push(e[0])};m.prototype.result=function(){this.line&&this.lines.push(this.line);return 0===this.lines.length?null:this.lines};return m}();n.SimpleBuilder=r;var p=function(){function m(){}m.simplify=function(e,f,g){if(g){var d=-f,q=e+f,t=-f,w=e+f;e=[];f=[];for(var x=g.length,z=0;z<x;++z){var A=g[z];if(A&&!(2>A.length))for(var B=A[0],b=void 0,h=A.length,c=1;c<h;++c)b=A[c],B.x===b.x&&
(B.x<=d&&(B.y>b.y?(e.push(z),e.push(c),e.push(0),e.push(-1)):(f.push(z),f.push(c),f.push(0),f.push(-1))),B.x>=q&&(B.y<b.y?(e.push(z),e.push(c),e.push(1),e.push(-1)):(f.push(z),f.push(c),f.push(1),f.push(-1)))),B.y===b.y&&(B.y<=t&&(B.x<b.x?(e.push(z),e.push(c),e.push(2),e.push(-1)):(f.push(z),f.push(c),f.push(2),f.push(-1))),B.y>=w&&(B.x>b.x?(e.push(z),e.push(c),e.push(3),e.push(-1)):(f.push(z),f.push(c),f.push(3),f.push(-1)))),B=b}0!==e.length&&0!==f.length&&(m.fillParent(g,f,e),m.fillParent(g,e,
f),d=[],m.calcDeltas(d,f,e),m.calcDeltas(d,e,f),m.addDeltas(d,g))}};m.fillParent=function(e,f,g){for(var d=g.length,q=f.length,t=0;t<q;t+=4){var w=f[t],x=f[t+1],z=f[t+2],A=e[w][x-1];w=e[w][x];x=8092;for(var B=-1,b=0;b<d;b+=4)if(g[b+2]===z){var h=g[b],c=g[b+1],v=e[h][c-1];h=e[h][c];switch(z){case 0:case 1:l.between(A.y,v.y,h.y)&&l.between(w.y,v.y,h.y)&&(v=Math.abs(h.y-v.y),v<x&&(x=v,B=b));break;case 2:case 3:l.between(A.x,v.x,h.x)&&l.between(w.x,v.x,h.x)&&(v=Math.abs(h.x-v.x),v<x&&(x=v,B=b))}}f[t+
3]=B}};m.calcDeltas=function(e,f,g){for(var d=f.length,q=0;q<d;q+=4){var t=m.calcDelta(q,f,g,[]);e.push(f[q]);e.push(f[q+1]);e.push(f[q+2]);e.push(t)}};m.calcDelta=function(e,f,g,d){e=f[e+3];if(-1===e)return 0;var q=d.length;if(1<q&&d[q-2]===e)return 0;d.push(e);return m.calcDelta(e,g,f,d)+1};m.addDeltas=function(e,f){for(var g=e.length,d=0,q=0;q<g;q+=4){var t=e[q+3];t>d&&(d=t)}for(q=0;q<g;q+=4){var w=f[e[q]],x=e[q+1];t=d-e[q+3];switch(e[q+2]){case 0:w[x-1].x-=t;w[x].x-=t;1===x&&(w[w.length-1].x-=
t);x===w.length-1&&(w[0].x-=t);break;case 1:w[x-1].x+=t;w[x].x+=t;1===x&&(w[w.length-1].x+=t);x===w.length-1&&(w[0].x+=t);break;case 2:w[x-1].y-=t;w[x].y-=t;1===x&&(w[w.length-1].y-=t);x===w.length-1&&(w[0].y-=t);break;case 3:w[x-1].y+=t,w[x].y+=t,1===x&&(w[w.length-1].y+=t),x===w.length-1&&(w[0].y+=t)}}};return m}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Geometry":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});r=function(){function a(l,
k){this.x=l;this.y=k}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(l,k){return l===this.x&&k===this.y};a.prototype.isEqual=function(l){return l.x===this.x&&l.y===this.y};a.prototype.setCoords=function(l,k){this.x=l;this.y=k};a.prototype.normalize=function(){var l=this.x,k=this.y;l=Math.sqrt(l*l+k*k);this.x/=l;this.y/=l};a.prototype.rightPerpendicular=function(){var l=this.x;this.x=this.y;this.y=-l};a.prototype.move=function(l,k){this.x+=l;this.y+=k};a.prototype.assign=
function(l){this.x=l.x;this.y=l.y};a.prototype.assignAdd=function(l,k){this.x=l.x+k.x;this.y=l.y+k.y};a.prototype.assignSub=function(l,k){this.x=l.x-k.x;this.y=l.y-k.y};a.prototype.rotate=function(l,k){var p=this.x,m=this.y;this.x=p*l-m*k;this.y=p*k+m*l};a.prototype.scale=function(l){this.x*=l;this.y*=l};a.prototype.length=function(){var l=this.x,k=this.y;return Math.sqrt(l*l+k*k)};a.distance=function(l,k){var p=k.x-l.x;l=k.y-l.y;return Math.sqrt(p*p+l*l)};a.add=function(l,k){return new a(l.x+k.x,
l.y+k.y)};a.sub=function(l,k){return new a(l.x-k.x,l.y-k.y)};return a}();n.Point=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/Tesselator":function(){define(["require","exports","../../../../../core/Logger","../../../../../core/libs/libtess/libtess"],function(r,n,a,l){Object.defineProperty(n,"__esModule",{value:!0});var k=a.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator");r=function(){function p(){this._indexCounter=this._currentVertexIndex=0;this._triangleIndices=[-1,
-1,-1];this.glu=new l.GluTesselator;this.glu.gluTessCallback(l.gluEnum.GLU_TESS_BEGIN,this._begincallback.bind(this));this.glu.gluTessCallback(l.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this));this.glu.gluTessCallback(l.gluEnum.GLU_TESS_END,this._endcallback.bind(this));this.glu.gluTessCallback(l.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this));this.glu.gluTessCallback(l.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this));this.glu.gluTessCallback(l.gluEnum.GLU_TESS_EDGE_FLAG,
this._edgeCallback.bind(this));this.glu.gluTessProperty(l.gluEnum.GLU_TESS_WINDING_RULE,l.windingRule.GLU_TESS_WINDING_ODD)}p.prototype.beginPolygon=function(m,e){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._indexCounter=this._currentVertexIndex=0;this.glu.gluTessBeginPolygon(m);this._indices=e};p.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()};p.prototype.beginContour=function(){this.glu.gluTessBeginContour()};p.prototype.endContour=function(){this.glu.gluTessEndContour()};
p.prototype.addVertex=function(m,e){this.glu.gluTessVertex(m,e)};p.prototype._vertexCallback=function(m,e){e[e.length]=m[0];e[e.length]=m[1];this._triangleIndices[this._currentVertexIndex]=-1;if(2<=this._currentVertexIndex){for(m=0;3>m;m++)-1===this._triangleIndices[m]&&(this._triangleIndices[m]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[m];this._currentVertexIndex=0}else this._currentVertexIndex++};p.prototype._begincallback=function(m){this._triangleIndices[0]=
-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._currentVertexIndex=0};p.prototype._endcallback=function(){this._currentVertexIndex=0};p.prototype._errorcallback=function(m){k.error("Encountered error during tesselation: "+m)};p.prototype._combinecallback=function(m,e,f){return[m[0],m[1],m[2]]};p.prototype._edgeCallback=function(m){};return p}();n.default=r})},"esri/layers/vectorTiles/core/libs/libtess/libtess":function(){define([],function(){var r={DEBUG:!1,assert:function(n,a){if(r.DEBUG&&
!n)throw Error("Assertion failed"+(a?": "+a:""));},GLU_TESS_MAX_COORD:1E150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,
GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,
GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};r.geom.vertEq=function(n,a){return n.s===a.s&&n.t===a.t};r.geom.vertLeq=function(n,a){return n.s<a.s||n.s===a.s&&n.t<=a.t};r.geom.edgeEval=function(n,a,l){r.assert(r.geom.vertLeq(n,a)&&r.geom.vertLeq(a,l));var k=a.s-n.s,p=l.s-a.s;return 0<k+p?k<p?a.t-n.t+k/(k+p)*(n.t-l.t):a.t-l.t+p/(k+p)*(l.t-n.t):0};r.geom.edgeSign=function(n,a,l){r.assert(r.geom.vertLeq(n,a)&&r.geom.vertLeq(a,l));var k=a.s-n.s,p=l.s-a.s;return 0<k+p?(a.t-l.t)*k+(a.t-n.t)*
p:0};r.geom.transLeq=function(n,a){return n.t<a.t||n.t===a.t&&n.s<=a.s};r.geom.transEval=function(n,a,l){r.assert(r.geom.transLeq(n,a)&&r.geom.transLeq(a,l));var k=a.t-n.t,p=l.t-a.t;return 0<k+p?k<p?a.s-n.s+k/(k+p)*(n.s-l.s):a.s-l.s+p/(k+p)*(l.s-n.s):0};r.geom.transSign=function(n,a,l){r.assert(r.geom.transLeq(n,a)&&r.geom.transLeq(a,l));var k=a.t-n.t,p=l.t-a.t;return 0<k+p?(a.s-l.s)*k+(a.s-n.s)*p:0};r.geom.edgeGoesLeft=function(n){return r.geom.vertLeq(n.dst(),n.org)};r.geom.edgeGoesRight=function(n){return r.geom.vertLeq(n.org,
n.dst())};r.geom.vertL1dist=function(n,a){return Math.abs(n.s-a.s)+Math.abs(n.t-a.t)};r.geom.vertCCW=function(n,a,l){return 0<=n.s*(a.t-l.t)+a.s*(l.t-n.t)+l.s*(n.t-a.t)};r.geom.interpolate_=function(n,a,l,k){n=0>n?0:n;l=0>l?0:l;return n<=l?0===l?(a+k)/2:a+n/(n+l)*(k-a):k+l/(n+l)*(a-k)};r.geom.edgeIntersect=function(n,a,l,k,p){if(!r.geom.vertLeq(n,a)){var m=n;n=a;a=m}r.geom.vertLeq(l,k)||(m=l,l=k,k=m);r.geom.vertLeq(n,l)||(m=n,n=l,l=m,m=a,a=k,k=m);if(r.geom.vertLeq(l,a))if(r.geom.vertLeq(a,k)){m=r.geom.edgeEval(n,
l,a);var e=r.geom.edgeEval(l,a,k);0>m+e&&(m=-m,e=-e);p.s=r.geom.interpolate_(m,l.s,e,a.s)}else m=r.geom.edgeSign(n,l,a),e=-r.geom.edgeSign(n,k,a),0>m+e&&(m=-m,e=-e),p.s=r.geom.interpolate_(m,l.s,e,k.s);else p.s=(l.s+a.s)/2;r.geom.transLeq(n,a)||(m=n,n=a,a=m);r.geom.transLeq(l,k)||(m=l,l=k,k=m);r.geom.transLeq(n,l)||(m=n,n=l,l=m,m=a,a=k,k=m);r.geom.transLeq(l,a)?r.geom.transLeq(a,k)?(m=r.geom.transEval(n,l,a),e=r.geom.transEval(l,a,k),0>m+e&&(m=-m,e=-e),p.t=r.geom.interpolate_(m,l.t,e,a.t)):(m=r.geom.transSign(n,
l,a),e=-r.geom.transSign(n,k,a),0>m+e&&(m=-m,e=-e),p.t=r.geom.interpolate_(m,l.t,e,k.t)):p.t=(l.t+a.t)/2};r.mesh={};r.mesh.makeEdge=function(n){var a=r.mesh.makeEdgePair_(n.eHead);r.mesh.makeVertex_(a,n.vHead);r.mesh.makeVertex_(a.sym,n.vHead);r.mesh.makeFace_(a,n.fHead);return a};r.mesh.meshSplice=function(n,a){var l=!1,k=!1;n!==a&&(a.org!==n.org&&(k=!0,r.mesh.killVertex_(a.org,n.org)),a.lFace!==n.lFace&&(l=!0,r.mesh.killFace_(a.lFace,n.lFace)),r.mesh.splice_(a,n),k||(r.mesh.makeVertex_(a,n.org),
n.org.anEdge=n),l||(r.mesh.makeFace_(a,n.lFace),n.lFace.anEdge=n))};r.mesh.deleteEdge=function(n){var a=n.sym,l=!1;n.lFace!==n.rFace()&&(l=!0,r.mesh.killFace_(n.lFace,n.rFace()));n.oNext===n?r.mesh.killVertex_(n.org,null):(n.rFace().anEdge=n.oPrev(),n.org.anEdge=n.oNext,r.mesh.splice_(n,n.oPrev()),l||r.mesh.makeFace_(n,n.lFace));a.oNext===a?(r.mesh.killVertex_(a.org,null),r.mesh.killFace_(a.lFace,null)):(n.lFace.anEdge=a.oPrev(),a.org.anEdge=a.oNext,r.mesh.splice_(a,a.oPrev()));r.mesh.killEdge_(n)};
r.mesh.addEdgeVertex=function(n){var a=r.mesh.makeEdgePair_(n),l=a.sym;r.mesh.splice_(a,n.lNext);a.org=n.dst();r.mesh.makeVertex_(l,a.org);a.lFace=l.lFace=n.lFace;return a};r.mesh.splitEdge=function(n){var a=r.mesh.addEdgeVertex(n).sym;r.mesh.splice_(n.sym,n.sym.oPrev());r.mesh.splice_(n.sym,a);n.sym.org=a.org;a.dst().anEdge=a.sym;a.sym.lFace=n.rFace();a.winding=n.winding;a.sym.winding=n.sym.winding;return a};r.mesh.connect=function(n,a){var l=!1,k=r.mesh.makeEdgePair_(n),p=k.sym;a.lFace!==n.lFace&&
(l=!0,r.mesh.killFace_(a.lFace,n.lFace));r.mesh.splice_(k,n.lNext);r.mesh.splice_(p,a);k.org=n.dst();p.org=a.org;k.lFace=p.lFace=n.lFace;n.lFace.anEdge=p;l||r.mesh.makeFace_(k,n.lFace);return k};r.mesh.zapFace=function(n){var a=n.anEdge,l=a.lNext;do{var k=l;l=k.lNext;k.lFace=null;if(null===k.rFace()){k.oNext===k?r.mesh.killVertex_(k.org,null):(k.org.anEdge=k.oNext,r.mesh.splice_(k,k.oPrev()));var p=k.sym;p.oNext===p?r.mesh.killVertex_(p.org,null):(p.org.anEdge=p.oNext,r.mesh.splice_(p,p.oPrev()));
r.mesh.killEdge_(k)}}while(k!==a);a=n.prev;n=n.next;n.prev=a;a.next=n};r.mesh.meshUnion=function(n,a){var l=n.fHead,k=n.vHead,p=n.eHead,m=a.fHead,e=a.vHead;a=a.eHead;m.next!==m&&(l.prev.next=m.next,m.next.prev=l.prev,m.prev.next=l,l.prev=m.prev);e.next!==e&&(k.prev.next=e.next,e.next.prev=k.prev,e.prev.next=k,k.prev=e.prev);a.next!==a&&(p.sym.next.sym.next=a.next,a.next.sym.next=p.sym.next,a.sym.next.sym.next=p,p.sym.next=a.sym.next);return n};r.mesh.deleteMesh=function(n){};r.mesh.makeEdgePair_=
function(n){var a=new r.GluHalfEdge,l=new r.GluHalfEdge,k=n.sym.next;l.next=k;k.sym.next=a;a.next=n;n.sym.next=l;a.sym=l;a.oNext=a;a.lNext=l;l.sym=a;l.oNext=l;return l.lNext=a};r.mesh.splice_=function(n,a){var l=n.oNext,k=a.oNext;l.sym.lNext=a;k.sym.lNext=n;n.oNext=k;a.oNext=l};r.mesh.makeVertex_=function(n,a){var l=a.prev,k=new r.GluVertex(a,l);l.next=k;a.prev=k;a=k.anEdge=n;do a.org=k,a=a.oNext;while(a!==n)};r.mesh.makeFace_=function(n,a){var l=a.prev,k=new r.GluFace(a,l);l.next=k;a.prev=k;k.anEdge=
n;k.inside=a.inside;a=n;do a.lFace=k,a=a.lNext;while(a!==n)};r.mesh.killEdge_=function(n){var a=n.next;n=n.sym.next;a.sym.next=n;n.sym.next=a};r.mesh.killVertex_=function(n,a){var l=n.anEdge,k=l;do k.org=a,k=k.oNext;while(k!==l);a=n.prev;n=n.next;n.prev=a;a.next=n};r.mesh.killFace_=function(n,a){var l=n.anEdge,k=l;do k.lFace=a,k=k.lNext;while(k!==l);a=n.prev;n=n.next;n.prev=a;a.next=n};r.normal={};r.normal.S_UNIT_X_=1;r.normal.S_UNIT_Y_=0;r.normal.projectPolygon=function(n,a,l,k){var p=!1,m=[a,l,
k];0===a&&0===l&&0===k&&(r.normal.computeNormal_(n,m),p=!0);l=r.normal.longAxis_(m);a=n.mesh.vHead;if(r.TRUE_PROJECT){r.normal.normalize_(m);k=[0,0,0];var e=[0,0,0];k[l]=0;k[(l+1)%3]=r.normal.S_UNIT_X_;k[(l+2)%3]=r.normal.S_UNIT_Y_;l=r.normal.dot_(k,m);k[0]-=l*m[0];k[1]-=l*m[1];k[2]-=l*m[2];r.normal.normalize_(k);e[0]=m[1]*k[2]-m[2]*k[1];e[1]=m[2]*k[0]-m[0]*k[2];e[2]=m[0]*k[1]-m[1]*k[0];r.normal.normalize_(e);for(m=a.next;m!==a;m=m.next)m.s=r.normal.dot_(m.coords,k),m.t=r.normal.dot_(m.coords,e)}else for(k=
(l+1)%3,e=(l+2)%3,l=0<m[l]?1:-1,m=a.next;m!==a;m=m.next)m.s=m.coords[k],m.t=l*m.coords[e];p&&r.normal.checkOrientation_(n)};r.normal.dot_=function(n,a){return n[0]*a[0]+n[1]*a[1]+n[2]*a[2]};r.normal.normalize_=function(n){var a=n[0]*n[0]+n[1]*n[1]+n[2]*n[2];r.assert(0<a);a=Math.sqrt(a);n[0]/=a;n[1]/=a;n[2]/=a};r.normal.longAxis_=function(n){var a=0;Math.abs(n[1])>Math.abs(n[0])&&(a=1);Math.abs(n[2])>Math.abs(n[a])&&(a=2);return a};r.normal.computeNormal_=function(n,a){var l=[-2*r.GLU_TESS_MAX_COORD,
-2*r.GLU_TESS_MAX_COORD,-2*r.GLU_TESS_MAX_COORD],k=[2*r.GLU_TESS_MAX_COORD,2*r.GLU_TESS_MAX_COORD,2*r.GLU_TESS_MAX_COORD],p=[],m=[],e;n=n.mesh.vHead;for(e=n.next;e!==n;e=e.next)for(var f=0;3>f;++f){var g=e.coords[f];g<k[f]&&(k[f]=g,m[f]=e);g>l[f]&&(l[f]=g,p[f]=e)}e=0;l[1]-k[1]>l[0]-k[0]&&(e=1);l[2]-k[2]>l[e]-k[e]&&(e=2);if(k[e]>=l[e])a[0]=0,a[1]=0,a[2]=1;else{l=0;k=m[e];p=p[e];m=[0,0,0];k=[k.coords[0]-p.coords[0],k.coords[1]-p.coords[1],k.coords[2]-p.coords[2]];f=[0,0,0];for(e=n.next;e!==n;e=e.next)f[0]=
e.coords[0]-p.coords[0],f[1]=e.coords[1]-p.coords[1],f[2]=e.coords[2]-p.coords[2],m[0]=k[1]*f[2]-k[2]*f[1],m[1]=k[2]*f[0]-k[0]*f[2],m[2]=k[0]*f[1]-k[1]*f[0],g=m[0]*m[0]+m[1]*m[1]+m[2]*m[2],g>l&&(l=g,a[0]=m[0],a[1]=m[1],a[2]=m[2]);0>=l&&(a[0]=a[1]=a[2]=0,a[r.normal.longAxis_(k)]=1)}};r.normal.checkOrientation_=function(n){for(var a=0,l=n.mesh.fHead,k=l.next;k!==l;k=k.next){var p=k.anEdge;if(!(0>=p.winding)){do a+=(p.org.s-p.dst().s)*(p.org.t+p.dst().t),p=p.lNext;while(p!==k.anEdge)}}if(0>a)for(n=n.mesh.vHead,
a=n.next;a!==n;a=a.next)a.t=-a.t};r.render={};r.render.renderMesh=function(n,a,l){for(var k=!1,p=-1,m=a.fHead.prev;m!==a.fHead;m=m.prev)if(m.inside){k||(n.callBeginCallback(r.primitiveType.GL_TRIANGLES),k=!0);var e=m.anEdge;r.assert(e.lNext.lNext.lNext===e,"renderMesh called with non-triangulated mesh");do{if(l){var f=e.rFace().inside?0:1;p!==f&&(p=f,n.callEdgeFlagCallback(!!p))}n.callVertexCallback(e.org.data);e=e.lNext}while(e!==m.anEdge)}k&&n.callEndCallback()};r.render.renderBoundary=function(n,
a){for(var l=a.fHead.next;l!==a.fHead;l=l.next)if(l.inside){n.callBeginCallback(r.primitiveType.GL_LINE_LOOP);var k=l.anEdge;do n.callVertexCallback(k.org.data),k=k.lNext;while(k!==l.anEdge);n.callEndCallback()}};r.sweep={};r.sweep.SENTINEL_COORD_=4*r.GLU_TESS_MAX_COORD;r.sweep.TOLERANCE_NONZERO_=!1;r.sweep.computeInterior=function(n){n.fatalError=!1;r.sweep.removeDegenerateEdges_(n);r.sweep.initPriorityQ_(n);r.sweep.initEdgeDict_(n);for(var a;null!==(a=n.pq.extractMin());){for(;;){var l=n.pq.minimum();
if(null===l||!r.geom.vertEq(l,a))break;l=n.pq.extractMin();r.sweep.spliceMergeVertices_(n,a.anEdge,l.anEdge)}r.sweep.sweepEvent_(n,a)}a=n.dict.getMin().getKey();n.event=a.eUp.org;r.sweep.doneEdgeDict_(n);r.sweep.donePriorityQ_(n);r.sweep.removeDegenerateFaces_(n.mesh);n.mesh.checkMesh()};r.sweep.addWinding_=function(n,a){n.winding+=a.winding;n.sym.winding+=a.sym.winding};r.sweep.edgeLeq_=function(n,a,l){n=n.event;a=a.eUp;l=l.eUp;if(a.dst()===n)return l.dst()===n?r.geom.vertLeq(a.org,l.org)?0>=r.geom.edgeSign(l.dst(),
a.org,l.org):0<=r.geom.edgeSign(a.dst(),l.org,a.org):0>=r.geom.edgeSign(l.dst(),n,l.org);if(l.dst()===n)return 0<=r.geom.edgeSign(a.dst(),n,a.org);a=r.geom.edgeEval(a.dst(),n,a.org);n=r.geom.edgeEval(l.dst(),n,l.org);return a>=n};r.sweep.deleteRegion_=function(n,a){a.fixUpperEdge&&r.assert(0===a.eUp.winding);a.eUp.activeRegion=null;n.dict.deleteNode(a.nodeUp);a.nodeUp=null};r.sweep.fixUpperEdge_=function(n,a){r.assert(n.fixUpperEdge);r.mesh.deleteEdge(n.eUp);n.fixUpperEdge=!1;n.eUp=a;a.activeRegion=
n};r.sweep.topLeftRegion_=function(n){var a=n.eUp.org;do n=n.regionAbove();while(n.eUp.org===a);n.fixUpperEdge&&(a=r.mesh.connect(n.regionBelow().eUp.sym,n.eUp.lNext),r.sweep.fixUpperEdge_(n,a),n=n.regionAbove());return n};r.sweep.topRightRegion_=function(n){var a=n.eUp.dst();do n=n.regionAbove();while(n.eUp.dst()===a);return n};r.sweep.addRegionBelow_=function(n,a,l){var k=new r.ActiveRegion;k.eUp=l;k.nodeUp=n.dict.insertBefore(a.nodeUp,k);return l.activeRegion=k};r.sweep.isWindingInside_=function(n,
a){switch(n.windingRule){case r.windingRule.GLU_TESS_WINDING_ODD:return 0!==(a&1);case r.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==a;case r.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<a;case r.windingRule.GLU_TESS_WINDING_NEGATIVE:return 0>a;case r.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=a||-2>=a}r.assert(!1);return!1};r.sweep.computeWinding_=function(n,a){a.windingNumber=a.regionAbove().windingNumber+a.eUp.winding;a.inside=r.sweep.isWindingInside_(n,a.windingNumber)};r.sweep.finishRegion_=
function(n,a){var l=a.eUp,k=l.lFace;k.inside=a.inside;k.anEdge=l;r.sweep.deleteRegion_(n,a)};r.sweep.finishLeftRegions_=function(n,a,l){var k=a;for(a=a.eUp;k!==l;){k.fixUpperEdge=!1;var p=k.regionBelow(),m=p.eUp;if(m.org!==a.org){if(!p.fixUpperEdge){r.sweep.finishRegion_(n,k);break}m=r.mesh.connect(a.lPrev(),m.sym);r.sweep.fixUpperEdge_(p,m)}a.oNext!==m&&(r.mesh.meshSplice(m.oPrev(),m),r.mesh.meshSplice(a,m));r.sweep.finishRegion_(n,k);a=p.eUp;k=p}return a};r.sweep.addRightEdges_=function(n,a,l,k,
p,m){var e=!0;do r.assert(r.geom.vertLeq(l.org,l.dst())),r.sweep.addRegionBelow_(n,a,l.sym),l=l.oNext;while(l!==k);for(null===p&&(p=a.regionBelow().eUp.rPrev());;){k=a.regionBelow();l=k.eUp.sym;if(l.org!==p.org)break;l.oNext!==p&&(r.mesh.meshSplice(l.oPrev(),l),r.mesh.meshSplice(p.oPrev(),l));k.windingNumber=a.windingNumber-l.winding;k.inside=r.sweep.isWindingInside_(n,k.windingNumber);a.dirty=!0;!e&&r.sweep.checkForRightSplice_(n,a)&&(r.sweep.addWinding_(l,p),r.sweep.deleteRegion_(n,a),r.mesh.deleteEdge(p));
e=!1;a=k;p=l}a.dirty=!0;r.assert(a.windingNumber-l.winding===k.windingNumber);m&&r.sweep.walkDirtyRegions_(n,a)};r.sweep.callCombine_=function(n,a,l,k,p){var m=[a.coords[0],a.coords[1],a.coords[2]];a.data=null;a.data=n.callCombineCallback(m,l,k);null===a.data&&(p?n.fatalError||(n.callErrorCallback(r.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),n.fatalError=!0):a.data=l[0])};r.sweep.spliceMergeVertices_=function(n,a,l){var k=[null,null,null,null];k[0]=a.org.data;k[1]=l.org.data;r.sweep.callCombine_(n,
a.org,k,[.5,.5,0,0],!1);r.mesh.meshSplice(a,l)};r.sweep.vertexWeights_=function(n,a,l,k,p){var m=r.geom.vertL1dist(a,n),e=r.geom.vertL1dist(l,n),f=p+1;k[p]=.5*e/(m+e);k[f]=.5*m/(m+e);n.coords[0]+=k[p]*a.coords[0]+k[f]*l.coords[0];n.coords[1]+=k[p]*a.coords[1]+k[f]*l.coords[1];n.coords[2]+=k[p]*a.coords[2]+k[f]*l.coords[2]};r.sweep.getIntersectData_=function(n,a,l,k,p,m){var e=[0,0,0,0],f=[l.data,k.data,p.data,m.data];a.coords[0]=a.coords[1]=a.coords[2]=0;r.sweep.vertexWeights_(a,l,k,e,0);r.sweep.vertexWeights_(a,
p,m,e,2);r.sweep.callCombine_(n,a,f,e,!0)};r.sweep.checkForRightSplice_=function(n,a){var l=a.regionBelow(),k=a.eUp,p=l.eUp;if(r.geom.vertLeq(k.org,p.org)){if(0<r.geom.edgeSign(p.dst(),k.org,p.org))return!1;r.geom.vertEq(k.org,p.org)?k.org!==p.org&&(n.pq.remove(k.org.pqHandle),r.sweep.spliceMergeVertices_(n,p.oPrev(),k)):(r.mesh.splitEdge(p.sym),r.mesh.meshSplice(k,p.oPrev()),a.dirty=l.dirty=!0)}else{if(0>r.geom.edgeSign(k.dst(),p.org,k.org))return!1;a.regionAbove().dirty=a.dirty=!0;r.mesh.splitEdge(k.sym);
r.mesh.meshSplice(p.oPrev(),k)}return!0};r.sweep.checkForLeftSplice_=function(n,a){var l=a.regionBelow();n=a.eUp;var k=l.eUp;r.assert(!r.geom.vertEq(n.dst(),k.dst()));if(r.geom.vertLeq(n.dst(),k.dst())){if(0>r.geom.edgeSign(n.dst(),k.dst(),n.org))return!1;a.regionAbove().dirty=a.dirty=!0;l=r.mesh.splitEdge(n);r.mesh.meshSplice(k.sym,l);l.lFace.inside=a.inside}else{if(0<r.geom.edgeSign(k.dst(),n.dst(),k.org))return!1;a.dirty=l.dirty=!0;l=r.mesh.splitEdge(k);r.mesh.meshSplice(n.lNext,k.sym);l.rFace().inside=
a.inside}return!0};r.sweep.checkForIntersect_=function(n,a){var l=a.regionBelow(),k=a.eUp,p=l.eUp,m=k.org,e=p.org,f=k.dst(),g=p.dst(),d=new r.GluVertex;r.assert(!r.geom.vertEq(g,f));r.assert(0>=r.geom.edgeSign(f,n.event,m));r.assert(0<=r.geom.edgeSign(g,n.event,e));r.assert(m!==n.event&&e!==n.event);r.assert(!a.fixUpperEdge&&!l.fixUpperEdge);if(m===e||Math.min(m.t,f.t)>Math.max(e.t,g.t))return!1;if(r.geom.vertLeq(m,e)){if(0<r.geom.edgeSign(g,m,e))return!1}else if(0>r.geom.edgeSign(f,e,m))return!1;
r.geom.edgeIntersect(f,m,g,e,d);r.assert(Math.min(m.t,f.t)<=d.t);r.assert(d.t<=Math.max(e.t,g.t));r.assert(Math.min(g.s,f.s)<=d.s);r.assert(d.s<=Math.max(e.s,m.s));r.geom.vertLeq(d,n.event)&&(d.s=n.event.s,d.t=n.event.t);var q=r.geom.vertLeq(m,e)?m:e;r.geom.vertLeq(q,d)&&(d.s=q.s,d.t=q.t);if(r.geom.vertEq(d,m)||r.geom.vertEq(d,e))return r.sweep.checkForRightSplice_(n,a),!1;if(!r.geom.vertEq(f,n.event)&&0<=r.geom.edgeSign(f,n.event,d)||!r.geom.vertEq(g,n.event)&&0>=r.geom.edgeSign(g,n.event,d)){if(g===
n.event)return r.mesh.splitEdge(k.sym),r.mesh.meshSplice(p.sym,k),a=r.sweep.topLeftRegion_(a),k=a.regionBelow().eUp,r.sweep.finishLeftRegions_(n,a.regionBelow(),l),r.sweep.addRightEdges_(n,a,k.oPrev(),k,k,!0),!0;if(f===n.event)return r.mesh.splitEdge(p.sym),r.mesh.meshSplice(k.lNext,p.oPrev()),l=a,a=r.sweep.topRightRegion_(a),m=a.regionBelow().eUp.rPrev(),l.eUp=p.oPrev(),p=r.sweep.finishLeftRegions_(n,l,null),r.sweep.addRightEdges_(n,a,p.oNext,k.rPrev(),m,!0),!0;0<=r.geom.edgeSign(f,n.event,d)&&(a.regionAbove().dirty=
a.dirty=!0,r.mesh.splitEdge(k.sym),k.org.s=n.event.s,k.org.t=n.event.t);0>=r.geom.edgeSign(g,n.event,d)&&(a.dirty=l.dirty=!0,r.mesh.splitEdge(p.sym),p.org.s=n.event.s,p.org.t=n.event.t);return!1}r.mesh.splitEdge(k.sym);r.mesh.splitEdge(p.sym);r.mesh.meshSplice(p.oPrev(),k);k.org.s=d.s;k.org.t=d.t;k.org.pqHandle=n.pq.insert(k.org);r.sweep.getIntersectData_(n,k.org,m,f,e,g);a.regionAbove().dirty=a.dirty=l.dirty=!0;return!1};r.sweep.walkDirtyRegions_=function(n,a){for(var l=a.regionBelow();;){for(;l.dirty;)a=
l,l=l.regionBelow();if(!a.dirty&&(l=a,a=a.regionAbove(),null===a||!a.dirty))break;a.dirty=!1;var k=a.eUp,p=l.eUp;k.dst()!==p.dst()&&r.sweep.checkForLeftSplice_(n,a)&&(l.fixUpperEdge?(r.sweep.deleteRegion_(n,l),r.mesh.deleteEdge(p),l=a.regionBelow(),p=l.eUp):a.fixUpperEdge&&(r.sweep.deleteRegion_(n,a),r.mesh.deleteEdge(k),a=l.regionAbove(),k=a.eUp));if(k.org!==p.org)if(k.dst()===p.dst()||a.fixUpperEdge||l.fixUpperEdge||k.dst()!==n.event&&p.dst()!==n.event)r.sweep.checkForRightSplice_(n,a);else if(r.sweep.checkForIntersect_(n,
a))break;k.org===p.org&&k.dst()===p.dst()&&(r.sweep.addWinding_(p,k),r.sweep.deleteRegion_(n,a),r.mesh.deleteEdge(k),a=l.regionAbove())}};r.sweep.connectRightVertex_=function(n,a,l){var k=l.oNext,p=a.regionBelow(),m=a.eUp,e=p.eUp,f=!1;m.dst()!==e.dst()&&r.sweep.checkForIntersect_(n,a);r.geom.vertEq(m.org,n.event)&&(r.mesh.meshSplice(k.oPrev(),m),a=r.sweep.topLeftRegion_(a),k=a.regionBelow().eUp,r.sweep.finishLeftRegions_(n,a.regionBelow(),p),f=!0);r.geom.vertEq(e.org,n.event)&&(r.mesh.meshSplice(l,
e.oPrev()),l=r.sweep.finishLeftRegions_(n,p,null),f=!0);f?r.sweep.addRightEdges_(n,a,l.oNext,k,k,!0):(k=r.geom.vertLeq(e.org,m.org)?e.oPrev():m,k=r.mesh.connect(l.lPrev(),k),r.sweep.addRightEdges_(n,a,k,k.oNext,k.oNext,!1),k.sym.activeRegion.fixUpperEdge=!0,r.sweep.walkDirtyRegions_(n,a))};r.sweep.connectLeftDegenerate_=function(n,a,l){var k=a.eUp;if(r.geom.vertEq(k.org,l))r.assert(r.sweep.TOLERANCE_NONZERO_),r.sweep.TOLERANCE_NONZERO_&&r.sweep.spliceMergeVertices_(n,k,l.anEdge);else if(r.geom.vertEq(k.dst(),
l)){if(r.assert(r.sweep.TOLERANCE_NONZERO_),r.sweep.TOLERANCE_NONZERO_){a=r.sweep.topRightRegion_(a);k=a.regionBelow();var p=k.eUp.sym,m=p.oNext,e=m;k.fixUpperEdge&&(r.assert(m!==p),r.sweep.deleteRegion_(n,k),r.mesh.deleteEdge(p),p=m.oPrev());r.mesh.meshSplice(l.anEdge,p);r.geom.edgeGoesLeft(m)||(m=null);r.sweep.addRightEdges_(n,a,p.oNext,e,m,!0)}}else r.mesh.splitEdge(k.sym),a.fixUpperEdge&&(r.mesh.deleteEdge(k.oNext),a.fixUpperEdge=!1),r.mesh.meshSplice(l.anEdge,k),r.sweep.sweepEvent_(n,l)};r.sweep.connectLeftVertex_=
function(n,a){var l=new r.ActiveRegion;l.eUp=a.anEdge.sym;l=n.dict.search(l).getKey();var k=l.regionBelow(),p=l.eUp,m=k.eUp;0===r.geom.edgeSign(p.dst(),a,p.org)?r.sweep.connectLeftDegenerate_(n,l,a):(k=r.geom.vertLeq(m.dst(),p.dst())?l:k,l.inside||k.fixUpperEdge?(p=k===l?r.mesh.connect(a.anEdge.sym,p.lNext):r.mesh.connect(m.dNext(),a.anEdge).sym,k.fixUpperEdge?r.sweep.fixUpperEdge_(k,p):r.sweep.computeWinding_(n,r.sweep.addRegionBelow_(n,l,p)),r.sweep.sweepEvent_(n,a)):r.sweep.addRightEdges_(n,l,
a.anEdge,a.anEdge,null,!0))};r.sweep.sweepEvent_=function(n,a){n.event=a;for(var l=a.anEdge;null===l.activeRegion;)if(l=l.oNext,l===a.anEdge){r.sweep.connectLeftVertex_(n,a);return}a=r.sweep.topLeftRegion_(l.activeRegion);var k=a.regionBelow();l=k.eUp;k=r.sweep.finishLeftRegions_(n,k,null);k.oNext===l?r.sweep.connectRightVertex_(n,a,k):r.sweep.addRightEdges_(n,a,k.oNext,l,l,!0)};r.sweep.addSentinel_=function(n,a){var l=new r.ActiveRegion,k=r.mesh.makeEdge(n.mesh);k.org.s=r.sweep.SENTINEL_COORD_;k.org.t=
a;k.dst().s=-r.sweep.SENTINEL_COORD_;k.dst().t=a;n.event=k.dst();l.eUp=k;l.windingNumber=0;l.inside=!1;l.fixUpperEdge=!1;l.sentinel=!0;l.dirty=!1;l.nodeUp=n.dict.insert(l)};r.sweep.initEdgeDict_=function(n){n.dict=new r.Dict(n,r.sweep.edgeLeq_);r.sweep.addSentinel_(n,-r.sweep.SENTINEL_COORD_);r.sweep.addSentinel_(n,r.sweep.SENTINEL_COORD_)};r.sweep.doneEdgeDict_=function(n){for(var a=0,l;null!==(l=n.dict.getMin().getKey());)l.sentinel||(r.assert(l.fixUpperEdge),r.assert(1===++a)),r.assert(0===l.windingNumber),
r.sweep.deleteRegion_(n,l);n.dict=null};r.sweep.removeDegenerateEdges_=function(n){for(var a=n.mesh.eHead,l,k=a.next;k!==a;k=l){l=k.next;var p=k.lNext;r.geom.vertEq(k.org,k.dst())&&k.lNext.lNext!==k&&(r.sweep.spliceMergeVertices_(n,p,k),r.mesh.deleteEdge(k),k=p,p=k.lNext);if(p.lNext===k){if(p!==k){if(p===l||p===l.sym)l=l.next;r.mesh.deleteEdge(p)}if(k===l||k===l.sym)l=l.next;r.mesh.deleteEdge(k)}}};r.sweep.initPriorityQ_=function(n){var a=new r.PriorityQ;n.pq=a;n=n.mesh.vHead;var l;for(l=n.next;l!==
n;l=l.next)l.pqHandle=a.insert(l);a.init()};r.sweep.donePriorityQ_=function(n){n.pq.deleteQ();n.pq=null};r.sweep.removeDegenerateFaces_=function(n){for(var a,l=n.fHead.next;l!==n.fHead;l=a)a=l.next,l=l.anEdge,r.assert(l.lNext!==l),l.lNext.lNext===l&&(r.sweep.addWinding_(l.oNext,l),r.mesh.deleteEdge(l))};r.tessmono={};r.tessmono.tessellateMonoRegion_=function(n){n=n.anEdge;for(r.assert(n.lNext!==n&&n.lNext.lNext!==n);r.geom.vertLeq(n.dst(),n.org);n=n.lPrev());for(;r.geom.vertLeq(n.org,n.dst());n=n.lNext);
for(var a=n.lPrev(),l;n.lNext!==a;)if(r.geom.vertLeq(n.dst(),a.org)){for(;a.lNext!==n&&(r.geom.edgeGoesLeft(a.lNext)||0>=r.geom.edgeSign(a.org,a.dst(),a.lNext.dst()));)l=r.mesh.connect(a.lNext,a),a=l.sym;a=a.lPrev()}else{for(;a.lNext!==n&&(r.geom.edgeGoesRight(n.lPrev())||0<=r.geom.edgeSign(n.dst(),n.org,n.lPrev().org));)l=r.mesh.connect(n,n.lPrev()),n=l.sym;n=n.lNext}for(r.assert(a.lNext!==n);a.lNext.lNext!==n;)l=r.mesh.connect(a.lNext,a),a=l.sym};r.tessmono.tessellateInterior=function(n){for(var a,
l=n.fHead.next;l!==n.fHead;l=a)a=l.next,l.inside&&r.tessmono.tessellateMonoRegion_(l)};r.tessmono.discardExterior=function(n){for(var a,l=n.fHead.next;l!==n.fHead;l=a)a=l.next,l.inside||r.mesh.zapFace(l)};r.tessmono.setWindingNumber=function(n,a,l){for(var k,p=n.eHead.next;p!==n.eHead;p=k)k=p.next,p.rFace().inside!==p.lFace.inside?p.winding=p.lFace.inside?a:-a:l?r.mesh.deleteEdge(p):p.winding=0};r.Dict=function(n,a){this.head_=new r.DictNode;this.frame_=n;this.leq_=a};r.Dict.prototype.deleteDict_=
function(){};r.Dict.prototype.insertBefore=function(n,a){do n=n.prev;while(null!==n.key&&!this.leq_(this.frame_,n.key,a));a=new r.DictNode(a,n.next,n);n.next.prev=a;return n.next=a};r.Dict.prototype.insert=function(n){return this.insertBefore(this.head_,n)};r.Dict.prototype.deleteNode=function(n){n.next.prev=n.prev;n.prev.next=n.next};r.Dict.prototype.search=function(n){var a=this.head_;do a=a.next;while(null!==a.key&&!this.leq_(this.frame_,n,a.key));return a};r.Dict.prototype.getMin=function(){return this.head_.next};
r.Dict.prototype.getMax=function(){return this.head_.prev};r.DictNode=function(n,a,l){this.key=n||null;this.next=a||this;this.prev=l||this};r.DictNode.prototype.getKey=function(){return this.key};r.DictNode.prototype.getSuccessor=function(){return this.next};r.DictNode.prototype.getPredecessor=function(){return this.prev};r.GluTesselator=function(){this.state_=r.GluTesselator.tessState_.T_DORMANT;this.errorCallback_=this.mesh=this.lastEdge_=null;this.normal_=[0,0,0];this.windingRule=r.windingRule.GLU_TESS_WINDING_ODD;
this.fatalError=!1;this.combineCallback_=this.event=this.pq=this.dict=null;this.boundaryOnly_=!1;this.polygonData_=this.meshCallback_=this.endCallback_=this.vertexCallback_=this.edgeFlagCallback_=this.beginCallback_=null};r.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2};r.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(r.GluTesselator.tessState_.T_DORMANT)};r.GluTesselator.prototype.gluTessProperty=function(n,a){switch(n){case r.gluEnum.GLU_TESS_TOLERANCE:return;
case r.gluEnum.GLU_TESS_WINDING_RULE:switch(a){case r.windingRule.GLU_TESS_WINDING_ODD:case r.windingRule.GLU_TESS_WINDING_NONZERO:case r.windingRule.GLU_TESS_WINDING_POSITIVE:case r.windingRule.GLU_TESS_WINDING_NEGATIVE:case r.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:this.windingRule=a;return}break;case r.gluEnum.GLU_TESS_BOUNDARY_ONLY:this.boundaryOnly_=!!a;return;default:this.callErrorCallback(r.gluEnum.GLU_INVALID_ENUM);return}this.callErrorCallback(r.gluEnum.GLU_INVALID_VALUE)};r.GluTesselator.prototype.gluGetTessProperty=
function(n){switch(n){case r.gluEnum.GLU_TESS_TOLERANCE:return 0;case r.gluEnum.GLU_TESS_WINDING_RULE:return n=this.windingRule,r.assert(n===r.windingRule.GLU_TESS_WINDING_ODD||n===r.windingRule.GLU_TESS_WINDING_NONZERO||n===r.windingRule.GLU_TESS_WINDING_POSITIVE||n===r.windingRule.GLU_TESS_WINDING_NEGATIVE||n===r.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),n;case r.gluEnum.GLU_TESS_BOUNDARY_ONLY:return r.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(r.gluEnum.GLU_INVALID_ENUM)}return!1};
r.GluTesselator.prototype.gluTessNormal=function(n,a,l){this.normal_[0]=n;this.normal_[1]=a;this.normal_[2]=l};r.GluTesselator.prototype.gluTessCallback=function(n,a){a=a?a:null;switch(n){case r.gluEnum.GLU_TESS_BEGIN:case r.gluEnum.GLU_TESS_BEGIN_DATA:this.beginCallback_=a;break;case r.gluEnum.GLU_TESS_EDGE_FLAG:case r.gluEnum.GLU_TESS_EDGE_FLAG_DATA:this.edgeFlagCallback_=a;break;case r.gluEnum.GLU_TESS_VERTEX:case r.gluEnum.GLU_TESS_VERTEX_DATA:this.vertexCallback_=a;break;case r.gluEnum.GLU_TESS_END:case r.gluEnum.GLU_TESS_END_DATA:this.endCallback_=
a;break;case r.gluEnum.GLU_TESS_ERROR:case r.gluEnum.GLU_TESS_ERROR_DATA:this.errorCallback_=a;break;case r.gluEnum.GLU_TESS_COMBINE:case r.gluEnum.GLU_TESS_COMBINE_DATA:this.combineCallback_=a;break;case r.gluEnum.GLU_TESS_MESH:this.meshCallback_=a;break;default:this.callErrorCallback(r.gluEnum.GLU_INVALID_ENUM)}};r.GluTesselator.prototype.gluTessVertex=function(n,a){var l=!1,k=[0,0,0];this.requireState_(r.GluTesselator.tessState_.T_IN_CONTOUR);for(var p=0;3>p;++p){var m=n[p];m<-r.GLU_TESS_MAX_COORD&&
(m=-r.GLU_TESS_MAX_COORD,l=!0);m>r.GLU_TESS_MAX_COORD&&(m=r.GLU_TESS_MAX_COORD,l=!0);k[p]=m}l&&this.callErrorCallback(r.errorType.GLU_TESS_COORD_TOO_LARGE);this.addVertex_(k,a)};r.GluTesselator.prototype.gluTessBeginPolygon=function(n){this.requireState_(r.GluTesselator.tessState_.T_DORMANT);this.state_=r.GluTesselator.tessState_.T_IN_POLYGON;this.mesh=new r.GluMesh;this.polygonData_=n};r.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(r.GluTesselator.tessState_.T_IN_POLYGON);
this.state_=r.GluTesselator.tessState_.T_IN_CONTOUR;this.lastEdge_=null};r.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(r.GluTesselator.tessState_.T_IN_CONTOUR);this.state_=r.GluTesselator.tessState_.T_IN_POLYGON};r.GluTesselator.prototype.gluTessEndPolygon=function(){this.requireState_(r.GluTesselator.tessState_.T_IN_POLYGON);this.state_=r.GluTesselator.tessState_.T_DORMANT;r.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]);r.sweep.computeInterior(this);
if(!this.fatalError){var n=this.mesh;this.boundaryOnly_?r.tessmono.setWindingNumber(n,1,!0):r.tessmono.tessellateInterior(n);this.mesh.checkMesh();if(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)this.boundaryOnly_?r.render.renderBoundary(this,this.mesh):r.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_);if(this.meshCallback_){r.tessmono.discardExterior(this.mesh);this.meshCallback_(this.mesh);this.polygonData_=this.mesh=null;return}}r.mesh.deleteMesh(this.mesh);
this.mesh=this.polygonData_=null};r.GluTesselator.prototype.requireState_=function(n){this.state_!==n&&this.gotoState_(n)};r.GluTesselator.prototype.gotoState_=function(n){for(;this.state_!==n;)if(this.state_<n)switch(this.state_){case r.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(r.errorType.GLU_TESS_MISSING_BEGIN_POLYGON);this.gluTessBeginPolygon(null);break;case r.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(r.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case r.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(r.errorType.GLU_TESS_MISSING_END_CONTOUR);
this.gluTessEndContour();break;case r.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(r.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}};r.GluTesselator.prototype.addVertex_=function(n,a){var l=this.lastEdge_;null===l?(l=r.mesh.makeEdge(this.mesh),r.mesh.meshSplice(l,l.sym)):(r.mesh.splitEdge(l),l=l.lNext);l.org.data=a;l.org.coords[0]=n[0];l.org.coords[1]=n[1];l.org.coords[2]=n[2];l.winding=1;l.sym.winding=-1;this.lastEdge_=l};r.GluTesselator.prototype.callBeginCallback=
function(n){this.beginCallback_&&this.beginCallback_(n,this.polygonData_)};r.GluTesselator.prototype.callVertexCallback=function(n){this.vertexCallback_&&this.vertexCallback_(n,this.polygonData_)};r.GluTesselator.prototype.callEdgeFlagCallback=function(n){this.edgeFlagCallback_&&this.edgeFlagCallback_(n,this.polygonData_)};r.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)};r.GluTesselator.prototype.callCombineCallback=function(n,a,l){return this.combineCallback_?
this.combineCallback_(n,a,l,this.polygonData_)||null:null};r.GluTesselator.prototype.callErrorCallback=function(n){this.errorCallback_&&this.errorCallback_(n,this.polygonData_)};r.GluFace=function(n,a){this.next=n||this;this.prev=a||this;this.anEdge=null;this.inside=!1};r.GluHalfEdge=function(n){this.next=n||this;this.activeRegion=this.lFace=this.org=this.lNext=this.oNext=this.sym=null;this.winding=0};r.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace};r.GluHalfEdge.prototype.dst=function(){return this.sym.org};
r.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext};r.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym};r.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym};r.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext};r.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym};r.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym};r.GluMesh=function(){this.vHead=new r.GluVertex;this.fHead=new r.GluFace;this.eHead=new r.GluHalfEdge;this.eHeadSym=
new r.GluHalfEdge;this.eHead.sym=this.eHeadSym;this.eHeadSym.sym=this.eHead};r.GluMesh.prototype.checkMesh=function(){if(r.DEBUG){var n=this.fHead,a=this.vHead,l=this.eHead,k,p;for(k=k=n;(p=k.next)!==n;k=p){r.assert(p.prev===k);k=p.anEdge;do r.assert(k.sym!==k),r.assert(k.sym.sym===k),r.assert(k.lNext.oNext.sym===k),r.assert(k.oNext.sym.lNext===k),r.assert(k.lFace===p),k=k.lNext;while(k!==p.anEdge)}r.assert(p.prev===k&&null===p.anEdge);for(k=k=a;(n=k.next)!==a;k=n){r.assert(n.prev===k);k=n.anEdge;
do r.assert(k.sym!==k),r.assert(k.sym.sym===k),r.assert(k.lNext.oNext.sym===k),r.assert(k.oNext.sym.lNext===k),r.assert(k.org===n),k=k.oNext;while(k!==n.anEdge)}r.assert(n.prev===k&&null===n.anEdge&&null===n.data);for(a=a=l;(k=a.next)!==l;a=k)r.assert(k.sym.next===a.sym),r.assert(k.sym!==k),r.assert(k.sym.sym===k),r.assert(null!==k.org),r.assert(null!==k.dst()),r.assert(k.lNext.oNext.sym===k),r.assert(k.oNext.sym.lNext===k);r.assert(k.sym.next===a.sym&&k.sym===this.eHeadSym&&k.sym.sym===k&&null===
k.org&&null===k.dst()&&null===k.lFace&&null===k.rFace())}};r.GluVertex=function(n,a){this.next=n||this;this.prev=a||this;this.data=this.anEdge=null;this.coords=[0,0,0];this.pqHandle=this.t=this.s=0};r.PriorityQ=function(){this.verts_=[];this.order_=null;this.size_=0;this.initialized_=!1;this.heap_=new r.PriorityQHeap};r.PriorityQ.prototype.deleteQ=function(){this.verts_=this.order_=this.heap_=null};r.PriorityQ.prototype.init=function(){this.order_=[];for(var n=0;n<this.size_;n++)this.order_[n]=n;
n=function(l){return function(k,p){return r.geom.vertLeq(l[k],l[p])?1:-1}}(this.verts_);this.order_.sort(n);this.initialized_=!0;this.heap_.init();if(r.DEBUG){var a=0+this.size_-1;for(n=0;n<a;++n)r.assert(r.geom.vertLeq(this.verts_[this.order_[n+1]],this.verts_[this.order_[n]]))}};r.PriorityQ.prototype.insert=function(n){if(this.initialized_)return this.heap_.insert(n);var a=this.size_++;this.verts_[a]=n;return-(a+1)};r.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();
var n=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var a=this.heap_.minimum();if(r.geom.vertLeq(a,n))return this.heap_.extractMin()}do--this.size_;while(0<this.size_&&null===this.verts_[this.order_[this.size_-1]]);return n};r.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var n=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var a=this.heap_.minimum();if(r.geom.vertLeq(a,n))return a}return n};r.PriorityQ.prototype.remove=function(n){if(0<=
n)this.heap_.remove(n);else for(n=-(n+1),r.assert(n<this.verts_.length&&null!==this.verts_[n]),this.verts_[n]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-1]];)--this.size_};r.PriorityQHeap=function(){this.heap_=r.PriorityQHeap.reallocNumeric_([0],r.PriorityQHeap.INIT_SIZE_+1);this.verts_=[null,null];this.handles_=[0,0];this.size_=0;this.max_=r.PriorityQHeap.INIT_SIZE_;this.freeList_=0;this.initialized_=!1;this.heap_[1]=1};r.PriorityQHeap.INIT_SIZE_=32;r.PriorityQHeap.reallocNumeric_=
function(n,a){for(var l=Array(a),k=0;k<n.length;k++)l[k]=n[k];for(;k<a;k++)l[k]=0;return l};r.PriorityQHeap.prototype.init=function(){for(var n=this.size_;1<=n;--n)this.floatDown_(n);this.initialized_=!0};r.PriorityQHeap.prototype.insert=function(n){var a=++this.size_;2*a>this.max_&&(this.max_*=2,this.handles_=r.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1));if(0===this.freeList_)var l=a;else l=this.freeList_,this.freeList_=this.handles_[this.freeList_];this.verts_[l]=n;this.handles_[l]=
a;this.heap_[a]=l;this.initialized_&&this.floatUp_(a);return l};r.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_};r.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]};r.PriorityQHeap.prototype.extractMin=function(){var n=this.heap_,a=this.verts_,l=this.handles_,k=n[1],p=a[k];0<this.size_&&(n[1]=n[this.size_],l[n[1]]=1,a[k]=null,l[k]=this.freeList_,this.freeList_=k,0<--this.size_&&this.floatDown_(1));return p};r.PriorityQHeap.prototype.remove=function(n){var a=
this.heap_,l=this.verts_,k=this.handles_;r.assert(1<=n&&n<=this.max_&&null!==l[n]);var p=k[n];a[p]=a[this.size_];k[a[p]]=p;p<=--this.size_&&(1>=p?this.floatDown_(p):r.geom.vertLeq(l[a[p>>1]],l[a[p]])?this.floatDown_(p):this.floatUp_(p));l[n]=null;k[n]=this.freeList_;this.freeList_=n};r.PriorityQHeap.prototype.floatDown_=function(n){for(var a=this.heap_,l=this.verts_,k=this.handles_,p=a[n];;){var m=n<<1;m<this.size_&&r.geom.vertLeq(l[a[m+1]],l[a[m]])&&(m+=1);r.assert(m<=this.max_);var e=a[m];if(m>
this.size_||r.geom.vertLeq(l[p],l[e])){a[n]=p;k[p]=n;break}a[n]=e;k[e]=n;n=m}};r.PriorityQHeap.prototype.floatUp_=function(n){for(var a=this.heap_,l=this.verts_,k=this.handles_,p=a[n];;){var m=n>>1,e=a[m];if(0===m||r.geom.vertLeq(l[e],l[p])){a[n]=p;k[p]=n;break}a[n]=e;k[e]=n;n=m}};r.ActiveRegion=function(){this.nodeUp=this.eUp=null;this.windingNumber=0;this.fixUpperEdge=this.dirty=this.sentinel=this.inside=!1};r.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()};
r.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};return r})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["require","exports","../../../../../../core/tsSupport/extendsHelper"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});r=function(){return function(){}}();n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../color ../../definitions ../../enums ../../enums ../../LineTess ../../number ../../TileClipper ../../Utils ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w){Object.defineProperty(n,"__esModule",{value:!0});var x=l.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),z=f.allocTriangles(20),A=f.allocTriangles(20),B=[f.allocExtrudeVectors(),f.allocExtrudeVectors()],b=f.allocExtrudeVectors(),h=p.TILE_SIZE+8,c=new f.Tessellator({distanceAlongCorrection:!0}),v=new d.TileClipper(0,0,0,1,8);v.setExtent(512);r=function(u){function y(C,D,E,F,G,J,R,O,P,U,K){var V=u.call(this)||this;V.capType=J;V.joinType=R;V.fillColor=O;
V.tl=P;V.br=U;V.hasPattern=K;V.geometryType=m.WGLGeometryType.LINE;V.halfWidth=0<F?.5*(F+1/G):0;V._materialStore=C;V.vvFlags=D;V.materialId=V._materialStore.createSpriteMaterial(E,V.geometryType,D);return V}a(y,u);y.fromSimpleLine=function(C,D,E,F,G){var J=E.color,R=q.getCapType("round"),O=q.getJoinType("round");J=J&&"none"!==E.style&&k.premultiplyAlphaRGBA(J)||0;"none"===E.style&&(J=0);if(!F)return new y(C,D,F,E.width,G,R,O,J,0,0,!1);var P=F.rect,U=P.x+1+F.width,K=P.y+1+F.height;P=g.i1616to32(P.x+
1,P.y+1);U=g.i1616to32(U,K);return new y(C,D,F,E.width,G,R,O,J,P,U,!0)};y.fromPictureLineSymbol=function(C,D,E,F){x.error("PictureLineSymbol support does not exist!");return null};y.prototype.writeMesh=function(C,D,E,F,G,J,R){if(this.vvFlags&e.WGLVVFlag.COLOR||0!==this.fillColor){J=this._materialStore.get(this.materialId);var O=D.indexVector;D=D.get("geometry");var P=this.halfWidth,U=new t(F,this.geometryType,this.materialId),K=this._getOffset(D,J);U.vertexFrom=K;U.indexFrom=O.length;C.push(U);switch(E){case "esriGeometryPolyline":C=
this._clipLines(G.geometry.paths);this._write(U,O,D,K,F,P,C,J,R);break;case "esriGeometryPolygon":C=this._clipLines(G.geometry.rings);this._write(U,O,D,K,F,P,C,J,R);break;default:x.error("Unable to handle geometryType: "+E)}}};y.prototype._clipLines=function(C){for(var D=[],E=!1,F=0;F<C.length;){var G=[],J=C[F];v.reset(2);var R=J[0],O=R[0];R=R[1];if(E)v.moveTo(O,R);else{if(-8>O||O>h||-8>R||R>h){E=!0;continue}G.push({x:O,y:R})}for(var P=!1,U=J.length,K=1;K<U;++K)if(O+=J[K][0],R+=J[K][1],E)v.lineTo(O,
R);else{if(-8>O||O>h||-8>R||R>h){P=!0;break}G.push({x:O,y:R})}if(P)E=!0;else{if(E){if(G=v.resultWithStarts())for(E=0;E<G.length;E++)D.push(G[E])}else D.push({line:G,start:0});F++;E=!1}}return D};y.prototype._getOffset=function(C,D){D=D.materialKeyInfo.hasVV()?11:8;return C.length/D};y.prototype._write=function(C,D,E,F,G,J,R,O,P){for(var U=0,K=0;K<R.length;K++){var V=R[K],Q=V.line;if(!(2>Q.length)){var W=Q[0],N=Q[Q.length-1],I=N.x-W.x;W=N.y-W.y;I=1E-6>I*I+W*W;var S=V.start%65535;V=B[1];for(W=0;W<Q.length;W++){var Z=
Q[W];N=V===B[W%2]?B[(W+1)%2]:B[W%2];var ca=0===W,fa=W===Q.length-1;fa&&I&&!this.hasPattern?f.copyExtrudeVectors(N,b):(this._computeExtrudeVectors(N,W,Q,I),U+=this._writeVertices(E,G,J,Z.x,Z.y,N,S,U,O,P),!N.capCenter||I&&fa||this._writePieIndices(C,D,F,N),I&&ca&&!this.hasPattern&&f.copyExtrudeVectors(b,N));ca||this._writeBridgeIndices(C,D,F,V,N);if(!fa){fa=Q[W+1];ca=[fa.x-Z.x,fa.y-Z.y];var ha=f.length(ca);ca=[ca[0]/ha,ca[1]/ha];ha=S+ha;if(65535<ha){var na=(65535-S)/(ha-S);S=Z.x+(fa.x-Z.x)*na;Z=Z.y+
(fa.y-Z.y)*na;fa=V;c.buttCap(fa,ca,ca);U+=this._writeVertices(E,G,J,S,Z,fa,65535,U,O,P);c.bridge(z,N,fa);this._writeBridgeIndices(C,D,F,N,fa);c.buttCap(fa,ca,ca);S=ha-65535}else S=ha,V=N}}}}C.vertexCount=U};y.prototype._writeVertices=function(C,D,E,F,G,J,R,O,P,U){var K=0,V=g.i1616to32(F,G),Q=J.vectors;J=Q.items;for(Q=Q.count;K<Q;++K){var W=J[K].vector,N=W[0];W=W[1];var I=J[K].texCoords,S=I[0],Z=I[1],ca=J[K].direction;I=ca[0];var fa=ca[1];ca=g.i1616to32(R,31*E);N=g.i8888to32(Math.round(31*N),Math.round(31*
W),Math.round(31*S),Math.round(31*Z));W=g.i8888to32(Math.round(31*I),Math.round(31*fa),0,0);C.push(V);C.push(D);C.push(this.fillColor);C.push(N);C.push(ca);C.push(this.tl);C.push(this.br);C.push(W);this._writeVV(C,U,P);J[K].base={index:O+K,point:[F,G]}}return K};y.prototype._writeVV=function(C,D,E){E.materialKeyInfo.hasVV()&&(C.push(D[m.VVType.SIZE]),C.push(D[m.VVType.COLOR]),C.push(D[m.VVType.OPACITY]))};y.prototype._writeBridgeIndices=function(C,D,E,F,G){c.bridge(z,F,G);for(F=0;F<z.count;++F)G=
z.items[F],D.push(E+G.v1.base.index),D.push(E+G.v2.base.index),D.push(E+G.v3.base.index),C.indexCount+=3};y.prototype._writePieIndices=function(C,D,E,F){c.pie(A,F);for(F=0;F<A.count;++F){var G=A.items[F];D.push(E+G.v1.base.index);D.push(E+G.v2.base.index);D.push(E+G.v3.base.index);C.indexCount+=3}};y.prototype._computeExtrudeVectors=function(C,D,E,F){var G=E[D],J=[void 0,void 0],R=[void 0,void 0];if(0<D&&D<E.length-1){var O=E[(D+E.length-1)%E.length],P=E[(D+1)%E.length];f.normalize(J,[G.x-O.x,G.y-
O.y]);f.normalize(R,[P.x-G.x,P.y-G.y])}else if(0===D)P=E[(D+1)%E.length],f.normalize(R,[P.x-G.x,P.y-G.y]),F?(O=E[E.length-2],f.normalize(J,[G.x-O.x,G.y-O.y])):J=R;else if(D===E.length-1)O=E[(D+E.length-1)%E.length],f.normalize(J,[G.x-O.x,G.y-O.y]),F?(O=E[1],f.normalize(R,[O.x-G.x,O.y-G.y])):R=J;else return;F||0!==D?F||D!==E.length-1?this._computeJoinExtrudeVectors(C,J,R):this._computeCapExtrudeVectors(C,J,R,f.CapPosition.END):this._computeCapExtrudeVectors(C,J,R,f.CapPosition.START)};y.prototype._computeCapExtrudeVectors=
function(C,D,E,F){switch(this.capType){case m.CapType.BUTT:c.buttCap(C,D,E);break;case m.CapType.ROUND:var G=f.getNumberOfSlices(Math.PI);c.roundCap(C,D,E,F,G,F===f.CapPosition.START?-1:1);break;case m.CapType.SQUARE:c.squareCap(C,D,E,F);break;default:x.error("Encountered unknown cap type: "+this.capType+", defaulting to BUTT"),c.buttCap(C,D,E)}};y.prototype._computeJoinExtrudeVectors=function(C,D,E){var F=f.getRads(D,E);if(F>Math.PI-.05)c.rectJoin(C,D,E);else if(this.joinType===m.JoinType.MITER||
.1>F).05>F?c.fastMiterJoin(C,D,E):F<f.MITER_SAFE_RADS?c.miterJoin(C,D,E):c.bevelJoin(C,D,E,f.SYSTEM_MAG_LIMIT);else if(this.joinType===m.JoinType.BEVEL)c.bevelJoin(C,D,E,1);else if(this.joinType===m.JoinType.ROUND){var G=f.getNumberOfSlices(F);2.3>F?2>G||.5>F?c.bevelJoin(C,D,E,1):c.roundJoin(C,D,E,G):c.unitRoundJoin(C,D,E,G)}};return y}(w.default);n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(r,n){function a(O){var P={items:[],
count:0},U;for(U=0;U<O;++U)P.items.push(void 0);return P}function l(O,P){h.vector[0]=O.vector[0];h.vector[1]=O.vector[1];h.texCoords[0]=O.texCoords[0];h.texCoords[1]=O.texCoords[1];h.direction[0]=O.direction[0];h.direction[1]=O.direction[1];h.base=O.base;O.vector[0]=P.vector[0];O.vector[1]=P.vector[1];O.texCoords[0]=P.texCoords[0];O.texCoords[1]=P.texCoords[1];O.direction[0]=P.direction[0];O.direction[1]=P.direction[1];O.base=P.base;P.vector[0]=h.vector[0];P.vector[1]=h.vector[1];P.texCoords[0]=h.texCoords[0];
P.texCoords[1]=h.texCoords[1];P.direction[0]=h.direction[0];P.direction[1]=h.direction[1];P.base=h.base}function k(O,P){return O[0]*P[0]+O[1]*P[1]}function p(O){return Math.sqrt(k(O,O))}function m(O,P){var U=p(P);O[0]=P[0]/U;O[1]=P[1]/U;return O}function e(O,P){O[0]=-P[1];O[1]=P[0];return O}function f(O,P){return O[0]*P[1]-O[1]*P[0]}function g(O,P){O[0]=-P[0];O[1]=-P[1];return O}function d(O,P,U){O[0]=P[0]*U;O[1]=P[1]*U;return O}function q(O,P,U){O[0]=P[0]+U[0];O[1]=P[1]+U[1];return O}function t(O,
P){O=k(O,P);return.999<O?0:-.999>O?Math.PI:Math.acos(O)}function w(O,P,U,K,V){if(0===K)O.count=0;else{var Q=p(P),W=d(c[0],P,1/Q);U=d(c[1],U,1/Q);W=t(W,U);W=(V?-1:1)*W/K;V=Math.cos(W);W=Math.sin(W);U=P[0];var N=P[1];for(P=0;P<K-1;++P)Q=U,U=V*Q-W*N,N=W*Q+V*N,O.items[P][0]=U,O.items[P][1]=N;O.count=K-1}}function x(O){var P=O.count,U=Math.floor(P/2),K;for(K=0;K<U;++K){var V=O.items[K];O.items[K]=O.items[P-K-1];O.items[P-K-1]=V}}Object.defineProperty(n,"__esModule",{value:!0});var z;(function(O){O[O.ENTRY=
1]="ENTRY";O[O.EXIT=2]="EXIT";O[O.CAP=3]="CAP"})(z=n.VectorRole||(n.VectorRole={}));var A;(function(O){O[O.START=1]="START";O[O.END=2]="END"})(A=n.CapPosition||(n.CapPosition={}));n.SYSTEM_MAG_LIMIT=3.8;n.MITER_SAFE_RADS=2*Math.acos(1/n.SYSTEM_MAG_LIMIT);var B=n.SYSTEM_MAG_LIMIT*n.SYSTEM_MAG_LIMIT,b=16/(2*Math.PI);n.allocTriangles=function(O){var P={items:[],count:0},U;for(U=0;U<O;++U)P.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,
void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return P};n.allocExtrudeVectors=function(){var O={items:[],count:0},P;for(P=0;30>P;++P)O.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});P={};P[z.ENTRY]=a(20);P[z.EXIT]=a(20);P[z.CAP]=a(20);return{vectors:O,lists:P}};n.copyExtrudeVectors=function(O,P){var U;for(U=0;U<P.vectors.count;++U)O.vectors.items[U].vector[0]=
P.vectors.items[U].vector[0],O.vectors.items[U].vector[1]=P.vectors.items[U].vector[1],O.vectors.items[U].texCoords[0]=P.vectors.items[U].texCoords[0],O.vectors.items[U].texCoords[1]=P.vectors.items[U].texCoords[1],O.vectors.items[U].direction[0]=P.vectors.items[U].direction[0],O.vectors.items[U].direction[1]=P.vectors.items[U].direction[1],O.vectors.items[U].base=P.vectors.items[U].base;O.vectors.count=P.vectors.count;var K=P.lists[z.ENTRY],V=O.lists[z.ENTRY],Q=P.lists[z.EXIT],W=O.lists[z.EXIT],
N=P.lists[z.CAP],I=O.lists[z.CAP];for(U=0;U<K.count;++U)V.items[U]=K.items[U];V.count=K.count;for(U=0;U<Q.count;++U)W.items[U]=Q.items[U];W.count=Q.count;for(U=0;U<N.count;++U)I.items[U]=N.items[U];I.count=N.count;O.capCenter=P.capCenter};var h={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};n.swapExtrudeVectors=l;var c=[];for(r=0;32>r;++r)c.push([void 0,void 0]);var v=function(O){var P={items:[],count:0},U;for(U=0;U<O;++U)P.items.push([void 0,void 0]);return P}(16);
n.length=p;n.normalize=m;n.getNumberOfSlices=function(O){return Math.max(Math.round(O*b),1)};n.getRads=t;n.reverse=x;var u=[void 0,void 0],y=[void 0,void 0],C=[0,0],D=[0,0],E=[0,0],F=[0,0],G=Math.cos(Math.PI/4),J=Math.sin(Math.PI/4),R=Math.sqrt(2);r=function(){function O(P){this._distanceAlongCorrection=P.distanceAlongCorrection}O.prototype.bridge=function(P,U,K){var V=U.vectors;U=U.lists[z.EXIT];var Q=K.vectors,W=K.lists[z.ENTRY];if(U.count===W.count+1){K=U.items;var N=V.items;var I=W.items;Q=Q.items}else if(W.count===
U.count+1)K=W.items,N=Q.items,I=U.items,Q=V.items;else if(U.count===W.count)K=W.items,N=Q.items,I=U.items,Q=V.items;else{P.count=0;return}V=U.count+W.count-2;P.count=V;u[0]=K;u[1]=I;y[0]=N;y[1]=Q;for(U=0;U<V;++U)K=P.items[U],N=(U+0)%2,N=y[N][u[N][Math.floor((U+0)/2)]],K.v1.vector[0]=N.vector[0],K.v1.vector[1]=N.vector[1],K.v1.texCoords[0]=N.texCoords[0],K.v1.texCoords[1]=N.texCoords[1],K.v1.direction[0]=N.direction[0],K.v1.direction[1]=N.direction[1],K.v1.base=N.base,N=(U+1)%2,N=y[N][u[N][Math.floor((U+
1)/2)]],K.v2.vector[0]=N.vector[0],K.v2.vector[1]=N.vector[1],K.v2.texCoords[0]=N.texCoords[0],K.v2.texCoords[1]=N.texCoords[1],K.v2.direction[0]=N.direction[0],K.v2.direction[1]=N.direction[1],K.v2.base=N.base,N=(U+2)%2,N=y[N][u[N][Math.floor((U+2)/2)]],K.v3.vector[0]=N.vector[0],K.v3.vector[1]=N.vector[1],K.v3.texCoords[0]=N.texCoords[0],K.v3.texCoords[1]=N.texCoords[1],K.v3.direction[0]=N.direction[0],K.v3.direction[1]=N.direction[1],K.v3.base=N.base,N=K.v1.base&&K.v1.base.point||C,I=K.v2.base&&
K.v2.base.point||C,Q=K.v3.base&&K.v3.base.point||C,D[0]=N[0]+K.v1.vector[0],D[1]=N[1]+K.v1.vector[1],E[0]=I[0]+K.v2.vector[0],E[1]=I[1]+K.v2.vector[1],F[0]=Q[0]+K.v3.vector[0],F[1]=Q[1]+K.v3.vector[1],0>(E[0]-D[0])*(F[1]-D[1])-(F[0]-D[0])*(E[1]-D[1])||l(K.v2,K.v3)};O.prototype.pie=function(P,U){if(0===U.lists[z.CAP].count)P.count=0;else if(1===U.lists[z.CAP].count)P.count=0;else{P.count=U.lists[z.CAP].count-1;var K;for(K=0;K<P.count;++K){var V=P.items[K],Q=U.vectors.items[U.lists[z.CAP].items[K]];
V.v1.vector[0]=Q.vector[0];V.v1.vector[1]=Q.vector[1];V.v1.texCoords[0]=Q.texCoords[0];V.v1.texCoords[1]=Q.texCoords[1];V.v1.direction[0]=Q.direction[0];V.v1.direction[1]=Q.direction[1];V.v1.base=Q.base;Q=U.vectors.items[U.lists[z.CAP].items[K+1]];V.v2.vector[0]=Q.vector[0];V.v2.vector[1]=Q.vector[1];V.v2.texCoords[0]=Q.texCoords[0];V.v2.texCoords[1]=Q.texCoords[1];V.v2.direction[0]=Q.direction[0];V.v2.direction[1]=Q.direction[1];V.v2.base=Q.base;Q=U.vectors.items[U.capCenter];V.v3.vector[0]=Q.vector[0];
V.v3.vector[1]=Q.vector[1];V.v3.texCoords[0]=Q.texCoords[0];V.v3.texCoords[1]=Q.texCoords[1];V.v3.direction[0]=Q.direction[0];V.v3.direction[1]=Q.direction[1];V.v3.base=Q.base;Q=V.v1.base&&V.v1.base.point||C;var W=V.v2.base&&V.v2.base.point||C,N=V.v3.base&&V.v3.base.point||C;D[0]=Q[0]+V.v1.vector[0];D[1]=Q[1]+V.v1.vector[1];E[0]=W[0]+V.v2.vector[0];E[1]=W[1]+V.v2.vector[1];F[0]=N[0]+V.v3.vector[0];F[1]=N[1]+V.v3.vector[1];0>(E[0]-D[0])*(F[1]-D[1])-(F[0]-D[0])*(E[1]-D[1])||l(V.v2,V.v3)}}};O.prototype.buttCap=
function(P,U,K){this.fastMiterJoin(P,U,K)};O.prototype.roundCap=function(P,U,K,V,Q,W){void 0===W&&(W=0);this.fastMiterJoin(P,U,K);K=V===A.START?0:1;V=V===A.START?1:0;P.capCenter=P.vectors.count;U=P.vectors.items[P.capCenter];U.vector[0]=0;U.vector[1]=0;U.texCoords[0]=0;U.texCoords[1]=0;U.direction[0]=0;U.direction[1]=0;++P.vectors.count;w(v,P.vectors.items[K].vector,P.vectors.items[V].vector,Q,!1);Q=P.vectors.count;U=P.lists[z.CAP];U.items[0]=K;K=P.vectors.items[K].texCoords[1];var N=P.vectors.items[V].texCoords[1],
I;for(I=0;I<v.count;++I){var S=W*(1-Math.abs(v.count/2-I)/(v.count/2)),Z=K+I/(v.count-1)*(N-K),ca=v.items[I],fa=P.vectors.items[Q+I];fa.vector[0]=ca[0];fa.vector[1]=ca[1];fa.texCoords[0]=S;fa.texCoords[1]=Z;fa.direction[0]=0;fa.direction[1]=0;U.items[I+1]=Q+I}U.items[v.count+1]=V;U.count=v.count+2;P.vectors.count=Q+v.count};O.prototype.squareCap=function(P,U,K,V){this.fastMiterJoin(P,U,K);U=V===A.START?0:1;K=V===A.START?1:0;var Q=c[0],W=c[1],N=c[2],I=c[3];V=c[4];var S=P.vectors.items[U].vector;Q[0]=
G*S[0]-J*S[1];Q[1]=J*S[0]+G*S[1];d(I,Q,R);W[0]=G*Q[0]-J*Q[1];W[1]=J*Q[0]+G*Q[1];N[0]=G*W[0]-J*W[1];N[1]=J*W[0]+G*W[1];d(V,N,R);U=P.vectors.items[U];U.vector[0]=I[0];U.vector[1]=I[1];P=P.vectors.items[K];P.vector[0]=V[0];P.vector[1]=V[1]};O.prototype.fastMiterJoin=function(P,U,K){K=e(c[0],K);U=g(c[1],K);var V=P.vectors.items[0];V.vector[0]=K[0];V.vector[1]=K[1];V.texCoords[0]=0;V.texCoords[1]=-1;V.direction[0]=0;V.direction[1]=0;K=P.vectors.items[1];K.vector[0]=U[0];K.vector[1]=U[1];K.texCoords[0]=
0;K.texCoords[1]=1;K.direction[0]=0;K.direction[1]=0;P.vectors.count=2;U=P.lists[z.ENTRY];U.items[0]=0;U.items[1]=1;U.count=2;U=P.lists[z.EXIT];U.items[0]=0;U.items[1]=1;U.count=2;P.lists[z.CAP].count=0;P.capCenter=void 0};O.prototype.miterJoin=function(P,U,K){var V=e(c[0],U),Q=e(c[1],K),W=c[2];W[0]=V[0]+Q[0];W[1]=V[1]+Q[1];Q=m(c[3],W);V=k(Q,V);Q=d(c[4],Q,1/V);V=g(c[5],Q);this._distanceAlongCorrection?(W=P.vectors.items[0],W.vector[0]=Q[0],W.vector[1]=Q[1],W.texCoords[0]=0,W.texCoords[1]=-1,W.direction[0]=
U[0],W.direction[1]=U[1],W=P.vectors.items[1],W.vector[0]=V[0],W.vector[1]=V[1],W.texCoords[0]=0,W.texCoords[1]=1,W.direction[0]=U[0],W.direction[1]=U[1],U=P.vectors.items[2],U.vector[0]=Q[0],U.vector[1]=Q[1],U.texCoords[0]=0,U.texCoords[1]=-1,U.direction[0]=K[0],U.direction[1]=K[1],U=P.vectors.items[3],U.vector[0]=V[0],U.vector[1]=V[1],U.texCoords[0]=0,U.texCoords[1]=1,U.direction[0]=K[0],U.direction[1]=K[1],P.vectors.count=4,K=P.lists[z.ENTRY],K.items[0]=0,K.items[1]=1,K.count=2,K=P.lists[z.EXIT],
K.items[0]=2,K.items[1]=3):(W=P.vectors.items[0],W.vector[0]=Q[0],W.vector[1]=Q[1],W.texCoords[0]=0,W.texCoords[1]=-1,W.direction[0]=0,W.direction[1]=0,W=P.vectors.items[1],W.vector[0]=V[0],W.vector[1]=V[1],W.texCoords[0]=0,W.texCoords[1]=1,W.direction[0]=0,W.direction[1]=0,P.vectors.count=2,K=P.lists[z.ENTRY],K.items[0]=0,K.items[1]=1,K.count=2,K=P.lists[z.EXIT],K.items[0]=0,K.items[1]=1);K.count=2;P.lists[z.CAP].count=0;P.capCenter=void 0};O.prototype.bevelJoin=function(P,U,K,V){var Q=V*V;V=f(U,
K);var W=0<V?[-1,1]:[1,-1],N=W[0];W=W[1];var I=0<V?g(c[0],e(c[1],U)):e(c[2],U),S=0<V?g(c[3],e(c[4],K)):e(c[5],K),Z=c[6];Z[0]=I[0]+S[0];Z[1]=I[1]+S[1];var ca=m(c[7],Z),fa=g(c[8],ca),ha=k(ca,I);Z=f(ca,I);var na=Math.abs(Z/ha);Z=1+na*na;var ma=Z<B?[na,this._distanceAlongCorrection]:[Math.sqrt(B-1),!0],ra=ma[0];ma=ma[1];var sa=Z<Q?[na,this._distanceAlongCorrection]:[Math.sqrt(Q-1),!0];na=sa[0];(sa=sa[1])&&ma?(ma=P.vectors.items[0],q(ma.vector,g(c[9],I),d(c[10],g(c[11],U),ra)),ma.texCoords[0]=0,ma.texCoords[1]=
N,ma.direction[0]=this._distanceAlongCorrection?U[0]:0,ma.direction[1]=this._distanceAlongCorrection?U[1]:0,fa=P.vectors.items[1],q(fa.vector,g(c[12],S),d(c[13],K,ra)),fa.texCoords[0]=0,fa.texCoords[1]=N,fa.direction[0]=this._distanceAlongCorrection?K[0]:0,fa.direction[1]=this._distanceAlongCorrection?K[1]:0,N=P.vectors.items[2],N.vector[0]=0,N.vector[1]=0,N.texCoords[0]=0,N.texCoords[1]=0,N.direction[0]=0,N.direction[1]=0,N=P.vectors.items[3],q(N.vector,I,d(c[14],U,na)),N.texCoords[0]=0,N.texCoords[1]=
W,N.direction[0]=this._distanceAlongCorrection?U[0]:0,N.direction[1]=this._distanceAlongCorrection?U[1]:0,U=P.vectors.items[4],q(U.vector,S,d(c[15],g(c[16],K),na)),U.texCoords[0]=0,U.texCoords[1]=W,U.direction[0]=this._distanceAlongCorrection?K[0]:0,U.direction[1]=this._distanceAlongCorrection?K[1]:0,P.vectors.count=5,K=P.lists[z.ENTRY],K.items[0]=0,K.items[1]=2,K.items[2]=3,K.count=3,K=P.lists[z.EXIT],K.items[0]=1,K.items[1]=2,K.items[2]=4,K.count=3,Z<Q?(Q=P.lists[z.CAP],Q.count=0,P.capCenter=void 0):
(Q=P.lists[z.CAP],Q.items[0]=3,Q.items[1]=4,Q.count=2,P.capCenter=2)):!sa&&ma?(ma=P.vectors.items[0],q(ma.vector,g(c[9],I),d(c[10],g(c[11],U),ra)),ma.texCoords[0]=0,ma.texCoords[1]=N,ma.direction[0]=this._distanceAlongCorrection?U[0]:0,ma.direction[1]=this._distanceAlongCorrection?U[1]:0,fa=P.vectors.items[1],q(fa.vector,g(c[12],S),d(c[13],K,ra)),fa.texCoords[0]=0,fa.texCoords[1]=N,fa.direction[0]=this._distanceAlongCorrection?K[0]:0,fa.direction[1]=this._distanceAlongCorrection?K[1]:0,N=P.vectors.items[2],
N.vector[0]=0,N.vector[1]=0,N.texCoords[0]=0,N.texCoords[1]=0,N.direction[0]=0,N.direction[1]=0,N=P.vectors.items[3],d(N.vector,ca,1/ha),N.texCoords[0]=0,N.texCoords[1]=W,N.direction[0]=0,N.direction[1]=0,P.vectors.count=4,K=P.lists[z.ENTRY],K.items[0]=0,K.items[1]=2,K.items[2]=3,K.count=3,K=P.lists[z.EXIT],K.items[0]=1,K.items[1]=2,K.items[2]=3,K.count=3,P.lists[z.CAP].count=0,P.capCenter=void 0):sa&&!ma?(ma=P.vectors.items[0],d(ma.vector,fa,1/ha),ma.texCoords[0]=0,ma.texCoords[1]=N,ma.direction[0]=
0,ma.direction[1]=0,fa=P.vectors.items[1],fa.vector[0]=0,fa.vector[1]=0,fa.texCoords[0]=0,fa.texCoords[1]=0,fa.direction[0]=0,fa.direction[1]=0,N=P.vectors.items[2],q(N.vector,I,d(c[9],U,na)),N.texCoords[0]=0,N.texCoords[1]=W,N.direction[0]=this._distanceAlongCorrection?U[0]:0,N.direction[1]=this._distanceAlongCorrection?U[1]:0,N=P.vectors.items[3],q(N.vector,S,d(c[10],g(c[11],K),na)),N.texCoords[0]=0,N.texCoords[1]=W,N.direction[0]=this._distanceAlongCorrection?K[0]:0,N.direction[1]=this._distanceAlongCorrection?
K[1]:0,P.vectors.count=4,K=P.lists[z.ENTRY],K.items[0]=0,K.items[1]=1,K.items[2]=2,K.count=3,K=P.lists[z.EXIT],K.items[0]=0,K.items[1]=1,K.items[2]=3,K.count=3,Z<Q?(Q=P.lists[z.CAP],Q.count=0,P.capCenter=void 0):(Q=P.lists[z.CAP],Q.items[0]=2,Q.items[1]=3,Q.count=2,P.capCenter=1)):sa||ma||(ma=P.vectors.items[0],d(ma.vector,fa,1/ha),ma.texCoords[0]=0,ma.texCoords[1]=N,ma.direction[0]=0,ma.direction[1]=0,fa=P.vectors.items[1],d(fa.vector,ca,1/ha),fa.texCoords[0]=0,fa.texCoords[1]=W,fa.direction[0]=
0,fa.direction[1]=0,P.vectors.count=2,K=P.lists[z.ENTRY],K.items[0]=0,K.items[1]=1,K.count=2,K=P.lists[z.EXIT],K.items[0]=0,K.items[1]=1,K.count=2,P.lists[z.CAP].count=0,P.capCenter=void 0);0>V&&(x(P.lists[z.ENTRY]),x(P.lists[z.EXIT]))};O.prototype.roundJoin=function(P,U,K,V){var Q=f(U,K),W=0<Q?[-1,1]:[1,-1],N=W[0];W=W[1];var I=0<Q?g(c[0],e(c[1],U)):e(c[2],U),S=0<Q?g(c[3],e(c[4],K)):e(c[5],K),Z=c[6];Z[0]=I[0]+S[0];Z[1]=I[1]+S[1];var ca=m(c[7],Z);Z=g(c[8],ca);var fa=k(ca,I);ca=f(ca,I);ca=Math.abs(ca/
fa);var ha=1+ca*ca<B?[ca,this._distanceAlongCorrection]:[Math.sqrt(B-1),!0];ca=ha[0];ha[1]?(ha=P.vectors.items[0],ha.vector[0]=I[0],ha.vector[1]=I[1],ha.texCoords[0]=0,ha.texCoords[1]=W,ha.direction[0]=0,ha.direction[1]=0,ha=P.vectors.items[1],ha.vector[0]=S[0],ha.vector[1]=S[1],ha.texCoords[0]=0,ha.texCoords[1]=W,ha.direction[0]=0,ha.direction[1]=0,ha=P.vectors.items[2],q(ha.vector,g(c[9],I),d(c[10],g(c[11],U),ca)),ha.texCoords[0]=0,ha.texCoords[1]=N,ha.direction[0]=this._distanceAlongCorrection?
U[0]:0,ha.direction[1]=this._distanceAlongCorrection?U[1]:0,U=P.vectors.items[3],q(U.vector,g(c[12],S),d(c[13],K,ca)),U.texCoords[0]=0,U.texCoords[1]=N,U.direction[0]=this._distanceAlongCorrection?K[0]:0,U.direction[1]=this._distanceAlongCorrection?K[1]:0,K=P.vectors.items[4],K.vector[0]=0,K.vector[1]=0,K.texCoords[0]=0,K.texCoords[1]=0,K.direction[0]=0,K.direction[1]=0,P.vectors.count=5,K=P.lists[z.ENTRY],K.items[0]=2,K.items[1]=4,K.items[2]=0,K.count=3,K=P.lists[z.EXIT],K.items[0]=3,K.items[1]=
4,K.items[2]=1,K.count=3,P.capCenter=4):(ha=P.vectors.items[0],ha.vector[0]=I[0],ha.vector[1]=I[1],ha.texCoords[0]=0,ha.texCoords[1]=W,ha.direction[0]=0,ha.direction[1]=0,ha=P.vectors.items[1],ha.vector[0]=S[0],ha.vector[1]=S[1],ha.texCoords[0]=0,ha.texCoords[1]=W,ha.direction[0]=0,ha.direction[1]=0,ha=P.vectors.items[2],d(ha.vector,Z,1/fa),ha.texCoords[0]=0,ha.texCoords[1]=N,ha.direction[0]=0,ha.direction[1]=0,U=P.vectors.items[3],U.vector[0]=0,U.vector[1]=0,U.texCoords[0]=0,U.texCoords[1]=0,U.direction[0]=
0,U.direction[1]=0,P.vectors.count=4,K=P.lists[z.ENTRY],K.items[0]=2,K.items[1]=3,K.items[2]=0,K.count=3,K=P.lists[z.EXIT],K.items[0]=2,K.items[1]=3,K.items[2]=1,K.count=3,P.capCenter=3);w(v,I,S,V,0>Q);V=P.vectors.count;I=P.lists[z.CAP];for(S=I.items[0]=0;S<v.count;++S)K=v.items[S],N=P.vectors.items[V+S],N.vector[0]=K[0],N.vector[1]=K[1],N.texCoords[0]=0,N.texCoords[1]=W,N.direction[0]=0,N.direction[1]=0,I.items[S+1]=V+S;I.items[v.count+1]=1;I.count=v.count+2;P.vectors.count=V+v.count;0>Q&&(x(P.lists[z.ENTRY]),
x(P.lists[z.EXIT]))};O.prototype.unitRoundJoin=function(P,U,K,V){var Q=f(U,K),W=0<Q?[-1,1]:[1,-1],N=W[0];W=W[1];U=0<Q?g(c[0],e(c[1],U)):e(c[2],U);K=0<Q?g(c[3],e(c[4],K)):e(c[5],K);var I=P.vectors.items[0];I.vector[0]=U[0];I.vector[1]=U[1];I.texCoords[0]=0;I.texCoords[1]=W;I.direction[0]=0;I.direction[1]=0;I=P.vectors.items[1];I.vector[0]=K[0];I.vector[1]=K[1];I.texCoords[0]=0;I.texCoords[1]=W;I.direction[0]=0;I.direction[1]=0;I=P.vectors.items[2];g(I.vector,U);I.texCoords[0]=0;I.texCoords[1]=N;I.direction[0]=
0;I.direction[1]=0;I=P.vectors.items[3];g(I.vector,K);I.texCoords[0]=0;I.texCoords[1]=N;I.direction[0]=0;I.direction[1]=0;N=P.vectors.items[4];N.vector[0]=0;N.vector[1]=0;N.texCoords[0]=0;N.texCoords[1]=0;N.direction[0]=0;N.direction[1]=0;P.vectors.count=5;N=P.lists[z.ENTRY];N.items[0]=2;N.items[1]=0;N.count=2;N=P.lists[z.EXIT];N.items[0]=3;N.items[1]=1;N.count=2;P.capCenter=4;w(v,U,K,V,0>Q);V=P.vectors.count;U=P.lists[z.CAP];for(N=U.items[0]=0;N<v.count;++N)K=v.items[N],I=P.vectors.items[V+N],I.vector[0]=
K[0],I.vector[1]=K[1],I.texCoords[0]=0,I.texCoords[1]=W,I.direction[0]=0,I.direction[1]=0,U.items[N+1]=V+N;U.items[v.count+1]=1;U.count=v.count+2;P.vectors.count=V+v.count;0>Q&&(x(P.lists[z.ENTRY]),x(P.lists[z.EXIT]))};O.prototype.rectJoin=function(P,U,K){U=e(c[0],U);K=e(c[1],K);var V=P.vectors.items[0];V.vector[0]=U[0];V.vector[1]=U[1];V.texCoords[0]=0;V.texCoords[1]=-1;V.direction[0]=0;V.direction[1]=0;V=P.vectors.items[1];V.vector[0]=K[0];V.vector[1]=K[1];V.texCoords[0]=0;V.texCoords[1]=-1;V.direction[0]=
0;V.direction[1]=0;V=P.vectors.items[2];g(V.vector,U);V.texCoords[0]=0;V.texCoords[1]=1;V.direction[0]=0;V.direction[1]=0;U=P.vectors.items[3];g(U.vector,K);U.texCoords[0]=0;U.texCoords[1]=1;U.direction[0]=0;U.direction[1]=0;P.vectors.count=4;U=P.lists[z.ENTRY];U.items[0]=0;U.items[1]=2;U.count=2;U=P.lists[z.EXIT];U.items[0]=1;U.items[1]=3;U.count=2;P.capCenter=void 0};return O}();n.Tessellator=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../color ../../definitions ../../enums ../../number ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t){Object.defineProperty(n,"__esModule",{value:!0});var w=l.getLogger("esri.views.2d.engine.webgl.WGLMeshTemplate");r=function(x){function z(A,B,b,h,c,v,u,y,C,D,E){if(255<u||255<y)w.error("mapview-oversized-resource","Marker size was clamped to the maximum allowed value of 200x200 pixels"),u>y?(y*=255/u,u=255):(u*=255/y,y=255);var F=x.call(this)||this;F.geometryType=g.WGLGeometryType.MARKER;var G=m.create(),J=p.create(),R=E.sdf?.5:1;p.translate(J,J,new Float32Array([R*
b,R*-h]));c&&p.rotate(J,J,3.14159265359/180*c);F._materialStore=A;F.vvFlags=B;F._materialId=A.createSpriteMaterial(E,F.geometryType,B);F._fillColor=v;F._outlineColor=C;F._sizeOutlineWidth=d.i8888to32(u,y,D,0);A=Math.round(E.rect.x/4);B=Math.round(E.rect.y/4);c=A+Math.round(E.rect.width/4);E=B+Math.round(E.rect.height/4);G.set([-.5*u,-.5*y]);m.transformMat2d(G,G,J);F._offsetUpperLeft=d.i1616to32(G[0],G[1]);F._texUpperLeft=d.i8888to32(A,B,0,0);G.set([.5*u,-.5*y]);m.transformMat2d(G,G,J);F._offsetUpperRight=
d.i1616to32(G[0],G[1]);F._texUpperRight=d.i8888to32(c,B,0,0);G.set([-.5*u,.5*y]);m.transformMat2d(G,G,J);F._offsetBottomLeft=d.i1616to32(G[0],G[1]);F._texBottomLeft=d.i8888to32(A,E,0,0);G.set([.5*u,.5*y]);m.transformMat2d(G,G,J);F._offsetBottomRight=d.i1616to32(G[0],G[1]);F._texBottomRight=d.i8888to32(c,E,0,0);F.height=y;F.width=u;F.xOffset=b;F.yOffset=h;return F}a(z,x);z.fromPictureMarker=function(A,B,b,h,c){c=Math.round(k.pt2px(b.width));var v=Math.round(k.pt2px(b.height)),u=f.PICTURE_FILL_COLOR,
y=Math.round(k.pt2px(b.xoffset||0)),C=Math.round(k.pt2px(b.yoffset||0));return new z(A,B,y,C,b.angle,u,c,v,0,0,h)};z.fromSimpleMarker=function(A,B,b,h,c){c=e.premultiplyAlphaRGBA(b.color);var v=Math.round(k.pt2px(b.size)),u=Math.round(k.pt2px(b.xoffset||0)),y=Math.round(k.pt2px(b.yoffset||0)),C=b.outline,D=(C&&C.color&&e.premultiplyAlphaRGBA(C.color))|0;C=(C&&C.width&&Math.round(k.pt2px(C.width)))|0;return new z(A,B,u,y,b.angle,c,v,v,D,C,h)};z.prototype.writeMesh=function(A,B,b,h,c,v,u){v=this._materialStore.get(this._materialId);
var y=B.indexVector;B=B.get("geometry");var C=new q(h,this.geometryType,this._materialId),D=this._getOffset(B,v);A.push(C);C.vertexFrom=D;C.indexFrom=y.length;switch(b){case "esriGeometryPoint":b=c.geometry;A=b.x;b=b.y;this._writeVertices(C,B,h,this._getPos(A,b),v,u);this._writeIndices(C,y,D);break;case "esriGeometryPolyline":this._writeMany(C,y,B,D,h,c.geometry.paths[0],v,u);break;case "esriGeometryPolygon":(b=c.centroid)?(A=b.x,b=b.y,this._writeVertices(C,B,h,this._getPos(A,b),v,u),this._writeIndices(C,
y,D)):w.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(C,y,B,D,h,c.geometry.points,v,u);break;default:w.error("Unable to handle geometryType: "+b)}};z.prototype._getPos=function(A,B){return d.i1616to32(A,B)};z.prototype._writeMany=function(A,B,b,h,c,v,u,y){for(var C=0,D=0,E=0,F=0;F<v.length;F++){var G=v[F],J=G[0];G=G[1];this._writeVertices(A,b,c,this._getPos(J+C,G+D),u,y);this._writeIndices(A,B,h+E);C+=J;D+=G;E+=4}};
z.prototype._getOffset=function(A,B){B=B.materialKeyInfo.hasVV()?11:7;return A.length/B};z.prototype._writeVertices=function(A,B,b,h,c,v){B.push(h);B.push(this._offsetUpperLeft);B.push(this._texUpperLeft);B.push(b);B.push(this._fillColor);B.push(this._outlineColor);B.push(this._sizeOutlineWidth);this._writeVV(B,v,c);B.push(h);B.push(this._offsetUpperRight);B.push(this._texUpperRight);B.push(b);B.push(this._fillColor);B.push(this._outlineColor);B.push(this._sizeOutlineWidth);this._writeVV(B,v,c);B.push(h);
B.push(this._offsetBottomLeft);B.push(this._texBottomLeft);B.push(b);B.push(this._fillColor);B.push(this._outlineColor);B.push(this._sizeOutlineWidth);this._writeVV(B,v,c);B.push(h);B.push(this._offsetBottomRight);B.push(this._texBottomRight);B.push(b);B.push(this._fillColor);B.push(this._outlineColor);B.push(this._sizeOutlineWidth);this._writeVV(B,v,c);A.vertexCount+=4};z.prototype._writeVV=function(A,B,b){b.materialKeyInfo.hasVV()&&(A.push(B[g.VVType.SIZE]),A.push(B[g.VVType.COLOR]),A.push(B[g.VVType.OPACITY]),
A.push(B[g.VVType.ROTATION]))};z.prototype._writeIndices=function(A,B,b){B.push(b+0);B.push(b+1);B.push(b+2);B.push(b+1);B.push(b+3);B.push(b+2);A.indexCount+=6};return z}(t.default);n.default=r})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat2d":function(){define(["./common"],function(r){var n={create:function(){var a=new r.ARRAY_TYPE(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var l=new r.ARRAY_TYPE(6);l[0]=a[0];l[1]=a[1];l[2]=a[2];l[3]=a[3];l[4]=a[4];l[5]=a[5];return l},
copy:function(a,l){a[0]=l[0];a[1]=l[1];a[2]=l[2];a[3]=l[3];a[4]=l[4];a[5]=l[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},fromValues:function(a,l,k,p,m,e){var f=new r.ARRAY_TYPE(6);f[0]=a;f[1]=l;f[2]=k;f[3]=p;f[4]=m;f[5]=e;return f},set:function(a,l,k,p,m,e,f){a[0]=l;a[1]=k;a[2]=p;a[3]=m;a[4]=e;a[5]=f;return a},invert:function(a,l){var k=l[0],p=l[1],m=l[2],e=l[3],f=l[4];l=l[5];var g=k*e-p*m;if(!g)return null;g=1/g;a[0]=e*g;a[1]=-p*g;a[2]=-m*g;a[3]=k*g;a[4]=
(m*l-e*f)*g;a[5]=(p*f-k*l)*g;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,l,k){var p=l[0],m=l[1],e=l[2],f=l[3],g=l[4];l=l[5];var d=k[0],q=k[1],t=k[2],w=k[3],x=k[4];k=k[5];a[0]=p*d+e*q;a[1]=m*d+f*q;a[2]=p*t+e*w;a[3]=m*t+f*w;a[4]=p*x+e*k+g;a[5]=m*x+f*k+l;return a}};n.mul=n.multiply;n.rotate=function(a,l,k){var p=l[0],m=l[1],e=l[2],f=l[3],g=l[4];l=l[5];var d=Math.sin(k);k=Math.cos(k);a[0]=p*k+e*d;a[1]=m*k+f*d;a[2]=p*-d+e*k;a[3]=m*-d+f*k;a[4]=g;a[5]=l;return a};n.scale=
function(a,l,k){var p=l[1],m=l[2],e=l[3],f=l[4],g=l[5],d=k[0];k=k[1];a[0]=l[0]*d;a[1]=p*d;a[2]=m*k;a[3]=e*k;a[4]=f;a[5]=g;return a};n.translate=function(a,l,k){var p=l[0],m=l[1],e=l[2],f=l[3],g=l[4];l=l[5];var d=k[0];k=k[1];a[0]=p;a[1]=m;a[2]=e;a[3]=f;a[4]=p*d+e*k+g;a[5]=m*d+f*k+l;return a};n.fromRotation=function(a,l){var k=Math.sin(l);l=Math.cos(l);a[0]=l;a[1]=k;a[2]=-k;a[3]=l;a[4]=0;a[5]=0;return a};n.fromScaling=function(a,l){a[0]=l[0];a[1]=0;a[2]=0;a[3]=l[1];a[4]=0;a[5]=0;return a};n.fromTranslation=
function(a,l){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=l[0];a[5]=l[1];return a};n.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};n.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};n.add=function(a,l,k){a[0]=l[0]+k[0];a[1]=l[1]+k[1];a[2]=l[2]+k[2];a[3]=l[3]+k[3];a[4]=l[4]+k[4];a[5]=l[5]+k[5];return a};n.subtract=function(a,l,k){a[0]=l[0]-k[0];a[1]=l[1]-k[1];a[2]=l[2]-k[2];
a[3]=l[3]-k[3];a[4]=l[4]-k[4];a[5]=l[5]-k[5];return a};n.sub=n.subtract;n.multiplyScalar=function(a,l,k){a[0]=l[0]*k;a[1]=l[1]*k;a[2]=l[2]*k;a[3]=l[3]*k;a[4]=l[4]*k;a[5]=l[5]*k;return a};n.multiplyScalarAndAdd=function(a,l,k,p){a[0]=l[0]+k[0]*p;a[1]=l[1]+k[1]*p;a[2]=l[2]+k[2]*p;a[3]=l[3]+k[3]*p;a[4]=l[4]+k[4]*p;a[5]=l[5]+k[5]*p;return a};n.exactEquals=function(a,l){return a[0]===l[0]&&a[1]===l[1]&&a[2]===l[2]&&a[3]===l[3]&&a[4]===l[4]&&a[5]===l[5]};n.equals=function(a,l){var k=a[0],p=a[1],m=a[2],
e=a[3],f=a[4];a=a[5];var g=l[0],d=l[1],q=l[2],t=l[3],w=l[4];l=l[5];return Math.abs(k-g)<=r.EPSILON*Math.max(1,Math.abs(k),Math.abs(g))&&Math.abs(p-d)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(d))&&Math.abs(m-q)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(q))&&Math.abs(e-t)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))&&Math.abs(f-w)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))};return n})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../enums ../../Geometry ../../number ../../TextShaping ../../WGLDisplayRecord ../../collisions/BoundingBox ./WGLMeshTemplate ../../util/BidiText".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x){Object.defineProperty(n,"__esModule",{value:!0});var z=l.getLogger("esri.views.2d.engine.webgl.WGLTextTemplate"),A=24*1.2,B=function(){function b(h,c,v,u,y,C,D,E,F){this.materialId=h;this.vertexOffsetUpperLeft=c;this.vertexOffsetUpperRight=v;this.vertexOffsetLowerLeft=u;this.vertexOffsetLowerRight=y;this.texFontSizeUpperLeft=C;this.texFontSizeUpperRight=D;this.texFontSizeLowerLeft=E;this.texFontSizeLowerRight=F}b.from=function(h,c,v,u,y){var C=h.glyphMosaicItem,
D=C.rect,E=C.metrics,F=Math.round(D.x/4),G=Math.round(D.y/4);C=F+Math.round(D.width/4);var J=G+Math.round(D.height/4);if(h.codePoint){var R=h.x+0+E.left;h=h.y+-17-E.top;h=new f.Point(R-4,h-4);D=new f.Point(h.x+D.width,h.y+D.height)}else R=h.x,h=h.y,h=new f.Point(R,h),D=new f.Point(h.x+E.width,h.y+E.height);E=new f.Point(h.x,D.y);R=new f.Point(D.x,h.y);if(v){var O=Math.cos(v);v=Math.sin(v);h.rotate(O,v);D.rotate(O,v);E.rotate(O,v);R.rotate(O,v)}v=g.i1616to32(8*h.x,8*h.y);h=g.i1616to32(8*R.x,8*R.y);
E=g.i1616to32(8*E.x,8*E.y);D=g.i1616to32(8*D.x,8*D.y);R=g.i8888to32(F,G,u,y);G=g.i8888to32(C,G,u,y);F=g.i8888to32(F,J,u,y);u=g.i8888to32(C,J,u,y);return new b(c,v,h,E,D,R,G,F,u)};return b}();n.ComputedGlyph=B;r=function(b){function h(c,v,u){var y=b.call(this)||this;y.geometryType=e.WGLGeometryType.TEXT;var C=u.haloColor;y.color=(u.color&&p.premultiplyAlphaRGBA(u.color))|0;y.textSize=k.pt2px(u.font.size);var D=u.yoffset/u.font.size;y.shapingXOffset=u.xoffset/u.font.size*24;y.shapingYOffset=24*D;y.haloColor=
(C&&p.premultiplyAlphaRGBA(C))|0;y.haloSize=10*k.pt2px(k.toPt(u.haloSize||0));y.textPropColor=y.color||m.PICTURE_FILL_COLOR;y.textPropSize=k.pt2px(u.font.size);y.textPropAngle=u.angle*Math.PI/180;y.xOffset=k.pt2px(u.xoffset);y.yOffset=k.pt2px(u.yoffset);y.textPropHAnchor="left"===u.horizontalAlignment?0:"right"===u.horizontalAlignment?1:.5;y.textPropVAnchor="top"===u.verticalAlignment?0:"bottom"===u.verticalAlignment?1:.5;y.textPropHaloColor=y.haloColor||4294967295;y.textPropHaloSize=k.pt2px(k.toPt(u.haloSize||
0));y._materialStore=c;y.vvFlags=v;return y}a(h,b);h.fromText=function(c,v,u,y,C){c=new h(c,v,u);c.computeGlyphs(C,u.text,!1);return c};h.prototype.writeMesh=function(c,v,u,y,C,D,E){D=v.indexVector;var F=v.get("geometry");v=v.get("visibility");var G=this._getOffset(F);switch(u){case "esriGeometryPoint":C=C.geometry;u=C.x;C=C.y;this._writeVertices(c,D,F,v,G,y,u,C,E);break;case "esriGeometryPolygon":if(C.centroid){C=C.centroid;u=C.x;C=C.y;this._writeVertices(c,D,F,v,G,y,u,C,E);break}default:z.error("Unable to handle geometryType: "+
u)}};h.prototype.computeGlyphs=function(c,v,u){if(!v||!v.length)return this._computedGlyphs=[],null;c=this._computeShaping(c,240,A,0,this.shapingXOffset,this.shapingYOffset,this.textPropHAnchor,this.textPropVAnchor,.5);v=x.bidiText(v);v=c.getShaping(v[0],v[1]);c=Array(v.length);for(var y=0;y<v.length;y++){var C=this.textPropAngle,D=this.textSize,E=this.haloSize,F=this._materialStore.createGlyphMaterial(v[y].glyphMosaicItem,e.WGLGeometryType.TEXT,this.vvFlags);c[y]=B.from(v[y],F,C,D,E)}this._computedGlyphs=
c;if(!u)return null;u=d.getBox(v);u.width*=this.textSize/24;u.height*=this.textSize/24;return new t.default(u.x,u.y,u.width,u.height)};h.prototype._computeShaping=function(c,v,u,y,C,D,E,F,G){return this._shaping=new d([c],240,A,0,[C,D],E,F,.5)};h.prototype._getOffset=function(c){return c.length/(this.vvFlags?9:5)};h.prototype._writeVertices=function(c,v,u,y,C,D,E,F,G){var J=this._computedGlyphs,R=g.i1616to32(2*E,2*F);E=g.i1616to32(2*E+1,2*F);F=0;if(this.haloSize)for(var O=0;O<J.length;O++,F+=4){var P=
J[O].materialId,U=this._materialStore.get(P);P=new q(D,this.geometryType,P);P.vertexFrom=C;P.indexFrom=v.length;this._writeVertex(P,u,y,D,E,this.haloColor,J[O],U,G);this._writeIndices(P,v,C+F);c.push(P)}for(O=0;O<J.length;O++,F+=4)P=J[O].materialId,U=this._materialStore.get(P),P=new q(D,this.geometryType,P),P.vertexFrom=C,P.indexFrom=v.length,this._writeVertex(P,u,y,D,R,this.color,J[O],U,G),this._writeIndices(P,v,C+F),c.push(P)};h.prototype._writeVertex=function(c,v,u,y,C,D,E,F,G){v.push(C);v.push(y);
v.push(D);v.push(E.vertexOffsetUpperLeft);v.push(E.texFontSizeUpperLeft);this._writeVV(v,G,F);v.push(C);v.push(y);v.push(D);v.push(E.vertexOffsetUpperRight);v.push(E.texFontSizeUpperRight);this._writeVV(v,G,F);v.push(C);v.push(y);v.push(D);v.push(E.vertexOffsetLowerLeft);v.push(E.texFontSizeLowerLeft);this._writeVV(v,G,F);v.push(C);v.push(y);v.push(D);v.push(E.vertexOffsetLowerRight);v.push(E.texFontSizeLowerRight);this._writeVV(v,G,F);u.push(4294967295);c.vertexCount+=4};h.prototype._writeVV=function(c,
v,u){u.materialKeyInfo.hasVV()&&(c.push(v[e.VVType.SIZE]),c.push(v[e.VVType.COLOR]),c.push(v[e.VVType.OPACITY]),c.push(v[e.VVType.ROTATION]))};h.prototype._writeIndices=function(c,v,u){v.push(u+0);v.push(u+1);v.push(u+2);v.push(u+1);v.push(u+3);v.push(u+2);c.indexCount+=6};return h}(w.default);n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextShaping":function(){define(["require","exports","./Rect"],function(r,n,a){return function(){function l(k,p,m,e,f,g,d,q){this._glyphItems=k;this._maxWidth=
p;this._lineHeight=m;this._letterSpacing=e;this._offset=f;this._hAnchor=g;this._vAnchor=d;this._justify=q}l.prototype.getShaping=function(k,p){for(var m=this._letterSpacing,e=this._lineHeight,f=this._justify,g=this._maxWidth,d=[],q=0,t=0,w=0,x=0,z=-1,A=0,B=-1,b=k.length,h=0;h<b;h++){var c=k.charCodeAt(h);if(10===c){if(h!==b-1){if(z>=x){q=d[z];var v=q.x+q.glyphMosaicItem.metrics.advance;A=Math.max(v,A);f&&this._applyJustification(d,x,z);x=d.length}t=p?t-e:t+e;q=0;++w}}else{v=void 0;for(var u=0,y=this._glyphItems;u<
y.length&&!(v=y[u][c]);u++);if(v){d.push({codePoint:c,x:q,y:t,glyphMosaicItem:v});q+=v.metrics.advance+m;if(0<g&&q>g&&0<=B){u=B+1;v=d[u].x;A=Math.max(v,A);for(y=u;y<d.length;y++)d[y].y=p?d[y].y-e:d[y].y+e,d[y].x-=v;f&&this._applyJustification(d,x,B);t=p?t-e:t+e;q-=v;++w;x=u;B=-1}++z;32===c&&(B=d.length-1)}}}z>=x&&(q=d[z],A=Math.max(A,q.x+q.glyphMosaicItem.metrics.advance),f&&this._applyJustification(d,x,z));if(0<d.length)for(k=(f-this._hAnchor)*A,m=(-this._vAnchor*(w+1)+.5)*e,p&&w&&(m+=w*e),k+=this._offset[0],
m+=this._offset[1],p=0;p<d.length;p++)e=d[p],e.x+=k,e.y+=m;return d};l.getBox=function(k){var p=k.length;if(0!==p){for(var m=k[0].x+k[0].glyphMosaicItem.metrics.left,e=m,f=k[0].y,g=f,d=f,q=1;q<p;q++){var t=k[q],w=t.x+t.glyphMosaicItem.metrics.left;w<m&&(m=w);w>e&&(e=w);t=t.y;t<f&&(f=t);t>g&&(g=t);t!==d&&(e=Math.max(e,k[q-1].x+k[q-1].glyphMosaicItem.metrics.left+k[q-1].glyphMosaicItem.metrics.width),d=t)}e=Math.max(e,k[p-1].x+k[p-1].glyphMosaicItem.metrics.left+k[p-1].glyphMosaicItem.metrics.width);
g+=12;return{x:m,y:g,width:e-m,height:g-(f-12)}}};l.addDecoration=function(k,p){var m=k.length;if(0!==m){for(var e=k[0].x+k[0].glyphMosaicItem.metrics.left,f=k[0].y,g=1;g<m;g++){var d=k[g];if(d.y!==f){var q=k[g-1].x+k[g-1].glyphMosaicItem.metrics.left+k[g-1].glyphMosaicItem.metrics.width;k.push({codePoint:0,x:e,y:f+p-3,glyphMosaicItem:{rect:new a(4,0,4,8),metrics:{width:q-e,height:8,left:0,top:0,advance:0},page:0}});f=d.y;e=d.x+d.glyphMosaicItem.metrics.left}}m=k[m-1].x+k[m-1].glyphMosaicItem.metrics.left+
k[m-1].glyphMosaicItem.metrics.width;k.push({codePoint:0,x:e,y:f+p-3,glyphMosaicItem:{rect:new a(4,0,4,8),metrics:{width:m-e,height:8,left:0,top:0,advance:0},page:0}})}};l.prototype._applyJustification=function(k,p,m){var e=k[m];for(e=(e.x+e.glyphMosaicItem.metrics.advance)*this._justify;p<=m;p++)k[p].x-=e};return l}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Rect":function(){define(["require","exports"],function(r,n){return function(){function a(l,k,p,m){void 0===l&&(l=0);void 0===k&&(k=
0);void 0===p&&(p=0);void 0===m&&(m=0);this.x=l;this.y=k;this.width=p;this.height=m}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/BidiText":function(){define(["require","exports","dojox/string/BidiEngine"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});var l=new a;n.bidiText=function(k){if(!l.hasBidiChar(k))return[k,!1];var p="rtl"===
l.checkContextual(k)?"IDNNN":"ICNNN";return[l.bidiTransform(k,p,"VLYSN"),!0]}})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["require","exports","../enums","../visualVariablesUtils"],function(r,n,a,l){function k(m,e){void 0===e&&(e=!1);var f=a.WGLVVFlag.SIZE_FIELD_STOPS|a.WGLVVFlag.SIZE_MINMAX_VALUE|a.WGLVVFlag.SIZE_SCALE_STOPS|a.WGLVVFlag.SIZE_UNIT_VALUE;m=(m&(a.WGLVVTarget.FIELD_TARGETS_OUTLINE|a.WGLVVTarget.MINMAX_TARGETS_OUTLINE|a.WGLVVTarget.SCALE_TARGETS_OUTLINE|
a.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return e?f&m:f&~m}function p(m){var e=k(m,!1);return m&(a.WGLVVFlag.COLOR|a.WGLVVFlag.OPACITY|a.WGLVVFlag.ROTATION|e)}Object.defineProperty(n,"__esModule",{value:!0});n.getVVFlags=function(m){if(!m)return a.WGLVVFlag.NONE;for(var e=0,f=0;f<m.length;f++){var g=m[f];if("size"===g.type){var d=l.getTypeOfSizeVisualVariable(g);e|=d;"outline"===g.target&&(e|=d<<4)}else"color"===g.type?e|=a.WGLVVFlag.COLOR:"opacity"===g.type?e|=a.WGLVVFlag.OPACITY:"rotation"===g.type&&
(e|=a.WGLVVFlag.ROTATION)}return e};n.getSizeFlagsMask=k;n.getMarkerVVFlags=p;n.getFillVVFlags=function(m){return m&(a.WGLVVFlag.COLOR|a.WGLVVFlag.OPACITY)};n.getLineVVFlags=function(m,e){if(e)return e=k(m,!0),m&e;e=k(m,!1);return m&(a.WGLVVFlag.COLOR|a.WGLVVFlag.OPACITY|e)};n.getTextVVFlags=function(m){return p(m)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../../../../../geometry/support/centroid ../../color ../../enums ../../fontUtils ../../number ../../TextShaping ../../WGLDisplayRecord ../../collisions/BoundingBox ./WGLMeshTemplate ./WGLTextTemplate".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A){Object.defineProperty(n,"__esModule",{value:!0});var B=l.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),b=24*1.2,h=q.i8888to32(255,255,255,255),c={xOffset:0,yOffset:0,width:0,height:0};r=function(v){function u(y,C,D){var E=v.call(this)||this;E.geometryType=g.WGLGeometryType.LABEL;E.vvFlags=0;E._textBoxVerticalOffset=0;E._textBoxHorizontalOffset=0;E._refTemplate=c;E._xOffset=C.xoffset;E._yOffset=-C.yoffset;E._decorationOffset=d.getFontDecorationOffset(C.font);
var F=C.haloColor;E._color=(C.color&&f.premultiplyAlphaRGBA(C.color))|0;var G=C.yoffset/C.font.size;E._shapingXOffset=C.xoffset/C.font.size*24;E._shapingYOffset=24*G;E._haloColor=(F&&f.premultiplyAlphaRGBA(F))|0;E._haloSize=10*k.pt2px(k.toPt(C.haloSize||0));E._textPropSize=k.pt2px(C.font.size);E._textPropAngle=C.angle*Math.PI/180;E._textPropHJustification="left"===C.horizontalAlignment?0:"right"===C.horizontalAlignment?1:.5;F=0;G=.5;switch(D){case "above-center":case "above-left":case "above-right":F=
-.5;G=0;break;case "below-center":case "below-left":case "below-right":F=.5,G=1}var J=0,R=.5;switch(D){case "above-left":case "center-left":case "below-left":J=-.5;R=1;break;case "above-right":case "center-right":case "below-right":J=.5,R=0}E._textPropHAnchorPlacement=R;E._textPropVAnchorPlacement=G;E._placementDirection=[J,F];E._materialStore=y;E.symbolId=C.id;E.anchor=m.create();return E}a(u,v);u.fromText=function(y,C,D,E,F,G){return new u(y,D,F)};Object.defineProperty(u.prototype,"bounds",{get:function(){return this._bounds},
enumerable:!0,configurable:!0});u.prototype.computeGlyphs=function(y,C){var D=C.text;if(!D||!D.length)return this._computedGlyphs=[],1;y=this._computeShaping(y,240,b,0,this._shapingXOffset,this._shapingYOffset,this._textPropHAnchorPlacement,this._textPropVAnchorPlacement,this._textPropHJustification).getShaping(D,C.rtl);isNaN(this._decorationOffset)||t.addDecoration(y,this._decorationOffset);C=Array(y.length);for(D=0;D<y.length;D++){var E=this._textPropAngle,F=this._textPropSize,G=this._haloSize,
J=this._materialStore.createGlyphMaterial(y[D].glyphMosaicItem,g.WGLGeometryType.LABEL,this.vvFlags);C[D]=A.ComputedGlyph.from(y[D],J,E,F,G)}this._computedGlyphs=C;if(!y||0===y.length)return 2;y=t.getBox(y);C=this._textPropSize/24;y.width*=C;y.height*=C;y.x*=C;y.y*=C;0>this._placementDirection[0]?this._textBoxHorizontalOffset=-y.x-y.width:0<this._placementDirection[0]&&(this._textBoxHorizontalOffset=-y.x);0>this._placementDirection[1]?this._textBoxVerticalOffset=-y.y:0<this._placementDirection[1]&&
(this._textBoxVerticalOffset=-y.y+y.height);D=y.width/2;E=y.height/2;this._textPropAngle&&(C=m.fromValues(-D,-E),D=m.fromValues(D,E),E=p.create(),p.rotate(E,E,this._textPropAngle),m.transformMat2d(C,C,E),m.transformMat2d(D,D,E),E=Math.abs(D[1]-C[1]),y.width=Math.abs(D[0]-C[0]),y.height=E);this._bounds=new x.default(y.x,y.y,y.width+10,y.height+10);y=this._placementDirection[1]*(this._refTemplate.height+this._bounds.height);this._bounds.center[0]=this._placementDirection[0]*(this._refTemplate.width+
this._bounds.width)+this._xOffset;this._bounds.center[1]=y+this._yOffset;return 0};u.prototype.bindReferenceTemplate=function(y){this._refTemplate=y?y:c};u.prototype.computeAnchor=function(y,C){var D=this._refTemplate.xOffset,E=this._refTemplate.yOffset;switch(y){case "esriGeometryPoint":C=C.geometry;y=C.x;C=C.y;this._setAnchor(y,C);break;case "esriGeometryMultipoint":y=C.geometry;C=this._computeAnchorMultipoint(y.points);y=C.x;C=C.y;this._setAnchor(y,C);break;case "esriGeometryPolygon":if(C.centroid){y=
C.centroid;this._setAnchor(y.x,y.y);break}y=C.geometry;C=this._computeAnchorRings(y.rings);if(!C)break;y=C.x;C=C.y;this._setAnchor(y,C);break;case "esriGeometryPolyline":y=C.geometry;C=this._computeAnchorRings(y.paths);if(!C)break;y=C.x;C=C.y;this._setAnchor(y,C);break;default:B.error("Unable to handle geometryType: "+y)}return m.fromValues(this.anchor[0]+D,this.anchor[1]+E)};u.prototype.writeMesh=function(y,C,D,E,F,G,J){D=C.indexVector;F=C.get("geometry");G=C.get("visibility");C=C.get("visibilityRange");
J=this._getOffset(F);var R=q.i8888to32(this._refTemplate.xOffset,-this._refTemplate.yOffset,this._placementDirection[0]*(this._refTemplate.width+10)+this._textBoxHorizontalOffset,this._placementDirection[1]*(this._refTemplate.height+10)+this._textBoxVerticalOffset);this._writeVertices(y,D,F,G,C,E,J,R,this.anchor[0],this.anchor[1])};u.prototype._setAnchor=function(y,C){this.anchor[0]=y;this.anchor[1]=C};u.prototype._computeAnchorMultipoint=function(y){return y.length&&y[0].length?{x:y[0][0],y:y[0][1]}:
null};u.prototype._computeAnchorRings=function(y){if(!y.length||!y[0].length||!y[0][0].length)return null;y=e.ringsCentroid(y,!1);return{x:y[0],y:y[1]}};u.prototype._computeShaping=function(y,C,D,E,F,G,J,R,O){return this._shaping=new t([y],240,b,0,[F,G],J,R,O)};u.prototype._getOffset=function(y){return y.length/5};u.prototype._writeVertices=function(y,C,D,E,F,G,J,R,O,P){var U=this._computedGlyphs,K=q.i1616to32(2*O,2*P);O=q.i1616to32(2*O+1,2*P);P=0;var V=q.i8888to32(0,(G&16711680)>>16,(G&65280)>>8,
G&255);if(this._haloSize)for(var Q=0;Q<U.length;Q++,P+=4){var W=U[Q].materialId,N=this._materialStore.get(W);W=new w(G,this.geometryType,W);W.vertexFrom=J+P;W.indexFrom=C.length;this._writeGlyph(W,D,E,F,V,O,this._haloColor,R,U[Q],N);this._writeIndices(W,C,J+P);y.push(W)}for(Q=0;Q<U.length;Q++,P+=4)W=U[Q].materialId,N=this._materialStore.get(W),W=new w(G,this.geometryType,W),W.vertexFrom=J+P,W.indexFrom=C.length,this._writeGlyph(W,D,E,F,V,K,this._color,R,U[Q],N),this._writeIndices(W,C,J+P),y.push(W)};
u.prototype._writeGlyph=function(y,C,D,E,F,G,J,R,O,P){C.push(G);C.push(J);C.push(O.vertexOffsetUpperLeft);C.push(O.texFontSizeUpperLeft);C.push(R);C.push(G);C.push(J);C.push(O.vertexOffsetUpperRight);C.push(O.texFontSizeUpperRight);C.push(R);C.push(G);C.push(J);C.push(O.vertexOffsetLowerLeft);C.push(O.texFontSizeLowerLeft);C.push(R);C.push(G);C.push(J);C.push(O.vertexOffsetLowerRight);C.push(O.texFontSizeLowerRight);C.push(R);D.push(4294967295);E.push(h);E.push(h);y.vertexCount+=4};u.prototype._writeIndices=
function(y,C,D){C.push(D+0);C.push(D+1);C.push(D+2);C.push(D+1);C.push(D+3);C.push(D+2);y.indexCount+=6};return u}(z.default);n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/fontUtils":function(){define(["require","exports"],function(r,n){function a(l){l=l.toLowerCase().split(" ").join("-");switch(l){case "serif":return"noto-serif";case "sans-serif":return"arial-unicode-ms";case "monospace":return"ubuntu-mono";case "fantasy":return"cabin-sketch";case "cursive":return"redressed";default:return l}}
Object.defineProperty(n,"__esModule",{value:!0});n.getFullyQualifiedFontName=function(l){a:{if(l.weight)switch(l.weight.toLowerCase()){case "bold":case "bolder":var k="-bold";break a}k=""}a:{if(l.style)switch(l.style.toLowerCase()){case "italic":case "oblic":var p="-italic";break a}p=""}k+=p;return a(l.family)+(0<k.length?k:"-regular")};n.getFontDecorationOffset=function(l){switch(l.decoration.toLowerCase()){case "underline":return 8;case "line-through":return-3}return NaN}})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Matcher":function(){define(["require",
"exports","../../../../../core/tsSupport/extendsHelper","../../../../../core/Logger","../Utils"],function(r,n,a,l,k){Object.defineProperty(n,"__esModule",{value:!0});var p=l.getLogger("esri/views/2d/engine/webgl/util/Matcher");r=function(){function m(){this._defaultResult=null}m.prototype.size=function(){return 1};m.prototype.getDefault=function(){return this._defaultResult};m.prototype.setDefault=function(e){this._defaultResult=e};m.prototype.match=function(e,f){return this.getDefault()};return m}();
n.default=r;l=function(m){function e(f,g,d,q){var t=m.call(this)||this;t._intervals=[];t._isMaxInclusive=g;d?t._getValue=k.createArcadeFunction(d):f&&f.length?"function"===typeof f?(t._field=null,t._getValue=f):(t._field=f,t._normalizationInfo=q,t._getValue=t._getValueFromField.bind(t)):t._field=null;return t}a(e,m);e.prototype.add=function(f,g){this._intervals.push({interval:f,result:g});this._intervals.sort(function(d,q){return d.interval.min-q.interval.min})};e.prototype.size=function(){return m.prototype.size.call(this)+
this._intervals.length};e.prototype.match=function(f,g){if(!this._getValue)return this.getDefault();f=this._getValue(f,g);if(!f&&(null===f||void 0===f||isNaN(f)))return this.getDefault();for(g=0;g<this._intervals.length;g++){var d=this._intervals[g],q=d.interval;d=d.result;var t=this._isMaxInclusive?f<=q.max:f<q.max;if(f>=q.min&&t)return d}return this.getDefault()};e.prototype._needsNormalization=function(){var f=this._normalizationInfo;return f&&(f.normalizationField||f.normalizationTotal||f.normalizationType)};
e.prototype._getValueFromField=function(f){var g=f.attributes[this._field];if(!this._needsNormalization())return g;var d=this._normalizationInfo,q=d.normalizationField,t=d.normalizationTotal;d=d.normalizationType;f=!!q&&f.attributes[q];if(d)switch(d){case "field":return(f||void 0)&&g/f;case "log":return Math.log(g)*Math.LOG10E;case "percent-of-total":return g/t*100;default:p.error("Found unknown normalization type: "+d)}else p.error("Normalization is required, but no type was set!")};return e}(r);
n.IntervalMatcher=l;r=function(m){function e(f,g,d){var q=m.call(this)||this;q._resultsMap=new Map;d?q._getValue=k.createArcadeFunction(d):f&&f.length?"function"===typeof f[0]?(q._fields=null,q._getValue=f[0]):(q._fields=f,q._seperator=g||"",q._getValue=q._getValueFromFields.bind(q)):q._fields=null;return q}a(e,m);e.prototype.add=function(f,g){this._resultsMap.set(f.toString(),g)};e.prototype.size=function(){return m.prototype.size.call(this)+this._resultsMap.size};e.prototype.match=function(f,g){if(!this._getValue)return this.getDefault();
f=this._getValue(f,g);if(!f&&(null===f||void 0===f))return this.getDefault();f=f.toString();return this._resultsMap.has(f)?this._resultsMap.get(f):this.getDefault()};e.prototype._getValueFromFields=function(f){for(var g=[],d=0,q=this._fields;d<q.length;d++)g.push(f.attributes[q[d]]);return g.join(this._seperator)};return e}(r);n.MapMatcher=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/mesh/VertexBuffer":function(){define(["require","exports"],function(r,n){Object.defineProperty(n,"__esModule",
{value:!0});var a=function(){function l(k,p,m){this.data=k;this.stride=p;this.vertexCount=m}l.decode=function(k){var p=new Uint32Array(k.data);return new l(p,k.stride,k.vertexCount)};return l}();n.default=a;r=function(){function l(k,p,m){this.geometryType=k;this.indexBuffer=new Uint32Array(p);this.namedBuffers=m}l.decode=function(k){var p=k.geometryType,m=k.indexBuffer,e={},f;for(f in k.namedBuffers)e[f]=a.decode(k.namedBuffers[f]);return new l(p,m,e)};return l}();n.VertexBuffers=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/Reader":function(){define(["require",
"exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});r=function(){function a(l){this._pos=0;this._buffer=l;this._i32View=new Int32Array(this._buffer);this._f32View=new Float32Array(this._buffer)}a.prototype.readInt32=function(){return this._i32View[this._pos++]};a.prototype.readF32=function(){return this._f32View[this._pos++]};return a}();n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/TextureManager":function(){define("require exports ../../../../config ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ./CIMSymbolHelper ./fontUtils ./GlyphMosaic ./GlyphSource ./SDFHelper ./SpriteMosaic ./Utils ../../../3d/support/imageUtils ../../../support/screenshotUtils ./SDFConverter".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z){function A(b){if(b.type){switch(t.normalizeSymbolType(b.type)){case "simple-marker":return b.path?"simple-marker"+b.style+b.path:"simple-marker"+b.style;case "simple-line":return"simple-line"+b.style}if(t.isPictureSymbol(b))return b.url?b.url:b.imageData+(""+b.width+b.height)}return JSON.stringify(b)}var B=k.getLogger("esri.views.2d.engine.webgl.TextureManager");return function(){function b(){this._invalidFontsMap=new Map;this._spriteMosaic=new q(1024,1024,
500);this._glyphSource=new g(a.fontsUrl+"/{fontstack}/{range}.pbf");this._glyphMosaic=new f(1024,1024,this._glyphSource);this._sdfConverter=new z.default(126)}Object.defineProperty(b.prototype,"sprites",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glyphs",{get:function(){return this._glyphMosaic},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this._spriteMosaic.dispose();this._glyphMosaic.dispose();this._rasterizationCanvas=
null};b.prototype.rasterizeItem=function(h,c){void 0===c&&(c=null);return h?h.type&&-1!==h.type.toLowerCase().indexOf("3d")?(B.error(new l("mapview-invalid-type","Mapviewer does not support 3d symbol type: "+h.type,h)),p.resolve({glyphMosaicItems:[],spriteMosaicItem:null})):!h.type||"text"!==h.type&&"esriTS"!==h.type?this._rasterizeSpriteSymbol(h).then(function(v){return{spriteMosaicItem:v}}):this._rasterizeTextSymbol(h,c).then(function(v){return{glyphMosaicItems:v}}):(B.error(new l("mapview-null-resource",
"Unable to rasterize null resource")),p.resolve(null))};b.prototype.bindSpritePage=function(h,c,v,u){u||(u=9729);this._spriteMosaic.bind(h,u,c,v)};b.prototype.bindGlyphsPage=function(h,c,v){this._glyphMosaic.bind(h,9729,c,v)};b.prototype._rasterizeTextSymbol=function(h,c){var v=this,u=e.getFullyQualifiedFontName(h.font);h=this._invalidFontsMap.has(u);return this._glyphMosaic.getGlyphItems(h?"arial-unicode-ms-regular":u,c).catch(function(y){B.error(new l("mapview-invalid-resource","Couldn't find font "+
u+". Falling back to Arial Unicode MS Regular"));v._invalidFontsMap.set(u,!0);return v._glyphMosaic.getGlyphItems("arial-unicode-ms-regular",c)})};b.prototype._rasterizeSpriteSymbol=function(h){var c=this;if(h&&(t.isFillSymbol(h)||t.isLineSymbol(h))&&"style"in h&&("solid"===h.style||"esriSFSSolid"===h.style||"esriSLSSolid"===h.style||"none"===h.style||"esriSFSNull"===h.style||"esriSLSNull"===h.style))return p.resolve(null);var v=A(h);if(this._spriteMosaic.has(v))return p.resolve(this._spriteMosaic.getSpriteItem(v));
if("simple-marker"!==h.type&&"esriSMS"!==h.type||!h.path){if(h.url||h.imageData)return w.requestImage(h.imageData?"data:"+h.contentType+";base64,"+h.imageData:h.url).then(function(D){D=c._rasterizeResource(D);return c._addItemToMosaic(v,D.size,D.anchor,D.image,!t.isMarkerSymbol(h),D.sdf)});var u=this._rasterizeResource(h);return p.resolve(this._addItemToMosaic(v,u.size,u.anchor,u.image,!t.isMarkerSymbol(h),u.sdf))}var y=[126,126],C=this;return this._sdfConverter.draw(h.path).then(function(D){return C._addItemToMosaic(v,
y,[0,0],new Uint32Array(D.buffer),!1,!0)})};b.prototype._rasterizeResource=function(h){if(h instanceof HTMLImageElement){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));this._rasterizationCanvas.width=h.width;this._rasterizationCanvas.height=h.height;var c=this._rasterizationCanvas.getContext("2d");c.drawImage(h,0,0,h.width,h.height);c=c.getImageData(0,0,h.width,h.height);c=new Uint8Array(c.data);for(var v=void 0,u=0;u<c.length;u+=4)v=c[u+3]/255,c[u]*=v,c[u+
1]*=v,c[u+2]*=v;v=h.width;u=h.height;var y=c;if(500<=v||500<=u)y=h.width/h.height,1<y?(v=500,u=Math.round(500/y)):(u=500,v=Math.round(500*y)),y=new Uint8Array(4*v*u),x.resampleHermite(c,h.width,h.height,new Uint8ClampedArray(y.buffer),v,u,!1);return{size:[v,u],anchor:[0,0],image:new Uint32Array(y.buffer),sdf:!1}}return this._rasterizeJSON(h)};b.prototype._addItemToMosaic=function(h,c,v,u,y,C){return this._spriteMosaic.addSpriteItem(h,c,v,u,y,C)};b.prototype._rasterizeJSON=function(h){this._rasterizationCanvas||
(this._rasterizationCanvas=document.createElement("canvas"));if("simple-fill"===h.type||"esriSFS"===h.type){var c=m.SymbolHelper.rasterizeSimpleFill(this._rasterizationCanvas,h.style);h=c[0];var v=c[1];c=c[2];return{size:[v,c],anchor:[0,0],image:new Uint32Array(h.buffer),sdf:!1}}if("simple-line"===h.type||"esriSLS"===h.type)return c=m.SymbolHelper.rasterizeSimpleLine(this._rasterizationCanvas,h.style),h=c[0],v=c[1],c=c[2],{size:[v,c],anchor:[0,0],image:new Uint32Array(h.buffer),sdf:!0};"simple-marker"===
h.type||"esriSMS"===h.type?(h=m.CIMSymbolHelper.fromSimpleMarker(h),v=!0):v=d.SDFHelper.checkSDF(h);if(v)return v=(new d.SDFHelper).buildSDF(h),h=v[0],{size:[v[1],v[2]],anchor:[0,0],image:new Uint32Array(h.buffer),sdf:!0};var u=m.CIMSymbolHelper.rasterize(this._rasterizationCanvas,h);h=u[0];v=u[1];c=u[2];return{size:[v,c],anchor:[u[3],u[4]],image:new Uint32Array(h.buffer),sdf:!1}};return b}()})},"esri/layers/vectorTiles/config":function(){define(["require","exports","esri/config"],function(r,n,a){Object.defineProperty(a,
"workers",{get:function(){return a.defaults.workers},set:function(l){return a.defaults.workers=l}});return a})},"esri/layers/vectorTiles/views/2d/engine/webgl/CIMSymbolHelper":function(){define("require exports ../../../../core/Logger ./CIMSymbolDrawHelper ./SDFHelper ../../../vectorTiles/GeometryUtils".split(" "),function(r,n,a,l,k,p){Object.defineProperty(n,"__esModule",{value:!0});var m=a.getLogger("esri/views/2d/engine/webgl/CIMSymbolHelper");r=function(){function e(){}e.getEnvelope=function(f){if("CIMPointSymbol"!==
f.type)return null;var g=new l.EnvDrawHelper;g.drawSymbol(f,{type:"point",x:0,y:0});return g.envelope()};e.rasterize=function(f,g){var d=this.getEnvelope(g);if(!d||0>=d.width||0>=d.height)return[null,0,0,0,0];var q=96/72,t=(d.x+.5*d.width)*q,w=-(d.y+.5*d.height)*q;f.width=d.width*q+2;f.height=d.height*q+2;d=f.getContext("2d");q=l.Transformation.createScale(q,-q);q.translate(.5*f.width-t,.5*f.height-w);(new l.CanvasDrawHelper(d,q)).drawSymbol(g,{type:"point",x:0,y:0});g=d.getImageData(0,0,f.width,
f.height);g=new Uint8Array(g.data);for(d=0;d<g.length;d+=4)q=g[d+3]/255,g[d]*=q,g[d+1]*=q,g[d+2]*=q;return[g,f.width,f.height,t/f.width,w/f.height]};e.fromSimpleMarker=function(f){var g=f.style;if("circle"===g||"esriSMSCircle"===g){var d=Math.acos(.995);var q=Math.ceil(p.C_PI/d/4);0===q&&(q=1);d=p.C_PI_BY_2/q;q*=4;g=[];g.push([50,0]);for(var t=1;t<q;t++)g.push([50*Math.cos(t*d),-50*Math.sin(t*d)]);g.push([50,0]);d={rings:[g]};q={xmin:-50,ymin:-50,xmax:50,ymax:50}}else if("cross"===g||"esriSMSCross"===
g)d=0,d={rings:[[[d,50],[d,d],[50,d],[50,-d],[d,-d],[d,-50],[-d,-50],[-d,-d],[-50,-d],[-50,d],[-d,d],[-d,50],[d,50]]]},q={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("diamond"===g||"esriSMSDiamond"===g)d={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},q={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("square"===g||"esriSMSSquare"===g)d={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},q={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("x"===g||"esriSMSX"===g)d=0,d={rings:[[[0,d],[50-d,50],[50,50-
d],[d,0],[50,d-50],[50-d,-50],[0,-d],[d-50,-50],[-50,d-50],[-d,0],[-50,50-d],[d-50,50],[0,d]]]},q={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("triangle"===g||"esriSMSTriangle"===g)q=2/3*100,g=q-100,d={rings:[[[-57.735026918962575,g],[0,q],[57.735026918962575,g],[-57.735026918962575,g]]]},q={xmin:-57.735026918962575,ymin:g,xmax:57.735026918962575,ymax:q};if(d&&q){var w=[{type:"CIMSolidFill",enable:!0,color:f.color}];f.outline&&w.push({type:"CIMSolidStroke",enable:!0,width:f.outline.width,color:f.outline.color});
w={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:f.angle,size:f.size,offsetX:f.xoffset,offsetY:f.yoffset,frame:q,markerGraphics:[{type:"CIMMarkerGraphic",geometry:d,symbol:{type:"CIMPolygonSymbol",symbolLayers:w}}]}]}}return w};return e}();n.CIMSymbolHelper=r;r=function(){function e(){}e.rasterizeSimpleFill=function(f,g){f.width=8;f.height=8;var d=f.getContext("2d");d.strokeStyle="#FFFFFF";d.beginPath();if("vertical"===g||"cross"===g||"esriSFSCross"===g||"esriSFSVertical"===
g)d.moveTo(0,0),d.lineTo(0,8);if("horizontal"===g||"cross"===g||"esriSFSCross"===g||"esriSFSHorizontal"===g)d.moveTo(0,0),d.lineTo(8,0);if("forward-diagonal"===g||"diagonal-cross"===g||"esriSFSDiagonalCross"===g||"esriSFSForwardDiagonal"===g)d.moveTo(0,0),d.lineTo(8,8);if("backward-diagonal"===g||"diagonal-cross"===g||"esriSFSBackwardDiagonal"===g||"esriSFSDiagonalCross"===g)d.moveTo(8,0),d.lineTo(0,8);d.stroke();g=d.getImageData(0,0,f.width,f.height);g=new Uint8Array(g.data);for(var q=0;q<g.length;q+=
4)d=g[q+3]/255,g[q]*=d,g[q+1]*=d,g[q+2]*=d;return[g,f.width,f.height]};e.rasterizeSimpleLine=function(f,g){switch(g){case "dash":case "esriSLSDash":var d=[3,2];break;case "dash-dot":case "esriSLSDashDot":d=[2,2,0,2];break;case "dot":case "esriSLSDot":d=[0,3];break;case "long-dash":case "esriSLSLongDash":d=[6,3];break;case "long-dash-dot":case "esriSLSLongDashDot":d=[6,3,0,3];break;case "long-dash-dot-dot":case "esriSLSDashDotDot":d=[2,2,0,2,0,2];break;case "short-dash":case "esriSLSShortDash":d=[2,
2];break;case "short-dash-dot":case "esriSLSShortDashDot":d=[2,2,0,2];break;case "short-dash-dot-dot":case "esriSLSShortDashDotDot":d=[2,2,0,2,0,2];break;case "short-dot":case "esriSLSShortDot":d=[0,2];break;case "solid":case "esriSLSSolid":case "none":m.error("Unexpected: style does not require rasterization");d=[0,0];break;default:m.error("Tried to rasterize SLS, but found an unexpected style: "+g+"!"),d=[0,0]}g=f=0;for(var q=d;g<q.length;g++){var t=q[g];f+=t}f*=16;q=31*f;g=new Float32Array(q);
for(t=0;t<q;++t)g[t]=257;for(var w=q=.5,x=!0,z=0;z<d.length;z++){t=d[z];q=w;w+=16*t;for(var A=q;A<w;){for(var B=.5;31>B;){t=(31-B+1.5)*f+A-.5;var b=(B-15.5)*(B-15.5);g[t]=x?b:Math.min((A-q)*(A-q)+b,(A-w)*(A-w)+b);B++}A++}x=!x}d=g.length;q=new Uint8Array(4*d);for(t=0;t<d;++t)k.packFloat(Math.sqrt(g[t])/15,q,4*t);return[q,f,31]};return e}();n.SymbolHelper=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/CIMSymbolDrawHelper":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ./GeometryUtils ./Rect".split(" "),
function(r,n,a,l,k,p){Object.defineProperty(n,"__esModule",{value:!0});var m=function(){function e(f){this._t=f}e.createIdentity=function(){return new e([1,0,0,0,1,0])};e.prototype.clone=function(){return new e(this._t.slice())};e.prototype.transform=function(f){var g=this._t;return[g[0]*f[0]+g[1]*f[1]+g[2],g[3]*f[0]+g[4]*f[1]+g[5]]};e.createScale=function(f,g){return new e([f,0,0,0,g,0])};e.prototype.scale=function(f,g){var d=this._t;d[0]*=f;d[1]*=f;d[2]*=f;d[3]*=g;d[4]*=g;d[5]*=g;return this};e.prototype.scaleRatio=
function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};e.createTranslate=function(f,g){return new e([0,0,f,0,0,g])};e.prototype.translate=function(f,g){var d=this._t;d[2]+=f;d[5]+=g;return this};e.createRotate=function(f){var g=Math.cos(f);f=Math.sin(f);return new e([g,-f,0,f,g,0])};e.prototype.rotate=function(f){return this.multiply(e.createRotate(f))};e.prototype.multiply=function(f){var g=this._t;f=f._t;var d=g[1]*f[0]+g[4]*f[1],q=g[2]*f[0]+g[5]*f[1]+f[2],t=g[0]*f[3]+g[3]*f[4],
w=g[1]*f[3]+g[4]*f[4],x=g[2]*f[3]+g[5]*f[4]+f[5];g[0]=g[0]*f[0]+g[3]*f[1];g[1]=d;g[2]=q;g[3]=t;g[4]=w;g[5]=x;return this};return e}();n.Transformation=m;r=function(){function e(f){this._transfos=[];this._sizeTransfos=[];this._transfos.push(f||m.createIdentity());this._sizeTransfos.push(f?f.scaleRatio():1)}e.prototype.transformPt=function(f){return this._transfos[this._transfos.length-1].transform(f)};e.prototype.transformSize=function(f){return f*this._sizeTransfos[this._sizeTransfos.length-1]};e.prototype.back=
function(){return this._transfos[this._transfos.length-1]};e.prototype.push=function(f){var g=f.scaleRatio();f.multiply(this.back());this._transfos.push(f);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*g)};e.prototype.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};e.prototype.drawSolidFill=function(f,g){};e.prototype.drawSolidStroke=function(f,g,d){};e.prototype.drawSymbol=function(f,g){if(f)switch(f.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(f,
g)}};e.prototype.drawMultiLayerSymbol=function(f,g){if(f&&(f=f.symbolLayers))for(var d=f.length;d--;){var q=f[d];if(q&&q.enable)switch(q.type){case "CIMSolidFill":this.drawSolidFill(g,q.color);break;case "CIMSolidStroke":this.drawSolidStroke(g,q.color,q.width);break;case "CIMVectorMarker":this.drawVectorMarker(q,g)}}};e.prototype.drawVectorMarker=function(f,g){if(f){var d=f.markerGraphics;if(d){var q=f.size,t=f.frame,w=t?t.ymax-t.ymin:0;w=q&&w?q/w:1;var x=m.createIdentity();t&&x.translate(.5*-(t.xmax+
t.xmin),.5*-(t.ymax+t.ymin));var z=f.anchorPt;if(z){var A=z.x;z=z.y;"relative"===f.anchorPtUnits&&t&&(A*=(t.xmax-t.xmin)*w,z*=q);x.translate(-A,-z)}1!==w&&x.scale(w,w);f.rotation&&x.rotate(f.rotation*k.C_DEG_TO_RAD);x.translate(f.offsetX||0,f.offsetY||0);x.translate(g.x,g.y);this.push(x);for(f=0;f<d.length;f++)(g=d[f])&&this.drawSymbol(g.symbol,g.geometry);this.pop()}}};return e}();n.CIMSymbolDrawHelper=r;l=function(e){function f(){var g=e.call(this)||this;g._xmin=g._ymin=Infinity;g._xmax=g._ymax=
-Infinity;return g}a(f,e);f.prototype.envelope=function(){return new p(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};f.prototype._merge=function(g,d){g[0]-d<this._xmin&&(this._xmin=g[0]-d);g[0]+d>this._xmax&&(this._xmax=g[0]+d);g[1]-d<this._ymin&&(this._ymin=g[1]-d);g[1]+d>this._ymax&&(this._ymax=g[1]+d)};f.prototype.drawSolidFill=function(g,d){d=0;for(g=g.rings;d<g.length;d++){var q=g[d],t=q?q.length:0;if(2<t){this._merge(this.transformPt(q[0]),0);for(var w=1;w<t;++w)this._merge(this.transformPt(q[w]),
0)}}};f.prototype.drawSolidStroke=function(g,d,q){d=.5*this.transformSize(q);q=0;for(g=g.rings||g.paths;q<g.length;q++){var t=g[q],w=t?t.length:0;if(1<w){this._merge(this.transformPt(t[0]),d);for(var x=1;x<w;++x)this._merge(this.transformPt(t[x]),d)}}};return f}(r);n.EnvDrawHelper=l;r=function(e){function f(g,d){d=e.call(this,d)||this;d._ctx=g;return d}a(f,e);f.prototype.drawSolidFill=function(g,d){var q=this._ctx;q.fillStyle="rgba("+Math.round(d[0])+","+Math.round(d[1])+","+Math.round(d[2])+","+
d[3]/255+")";q.beginPath();d=0;for(g=g.rings;d<g.length;d++){var t=g[d],w=t?t.length:0;if(2<w){var x=this.transformPt(t[0]);q.moveTo(x[0],x[1]);for(var z=1;z<w;++z)x=this.transformPt(t[z]),q.lineTo(x[0],x[1]);q.closePath()}}q.fill("evenodd")};f.prototype.drawSolidStroke=function(g,d,q){var t=this._ctx;t.strokeStyle="rgba("+Math.round(d[0])+","+Math.round(d[1])+","+Math.round(d[2])+","+d[3]/255+")";t.lineWidth=this.transformSize(q)+.5;t.beginPath();d=!!g.rings;q=0;for(g=g.rings||g.paths;q<g.length;q++){var w=
g[q],x=w?w.length:0;if(1<x){var z=this.transformPt(w[0]);t.moveTo(z[0],z[1]);for(var A=1;A<x;++A)z=this.transformPt(w[A]),t.lineTo(z[0],z[1]);d&&t.closePath()}}t.stroke()};return f}(r);n.CanvasDrawHelper=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/SDFHelper":function(){define(["require","exports","./Geometry","./Rect","../../../3d/webgl-engine/lib/Util"],function(r,n,a,l,k){function p(m,e,f){k.packFloatRGBA(m,e,f)}Object.defineProperty(n,"__esModule",{value:!0});n.packFloat=p;r=function(){function m(){}
m.checkSDF=function(e){return!0};m.prototype._extractGeometry=function(e){if(!e)return null;e=e.symbolLayers;if(!e||1!==e.length)return null;e=e[0];if(!e)return null;e=e.markerGraphics;if(!e||1!==e.length)return null;e=e[0];if(!e)return null;var f=e.geometry;if(!f||!f.rings)return null;e=[];var g=0;for(f=f.rings;g<f.length;g++){for(var d=[],q=0,t=f[g];q<t.length;q++){var w=t[q];d.push(new a.Point(w[0],w[1]))}e.push(d)}return e};m.prototype._getEnvelope=function(e){for(var f=Infinity,g=-Infinity,d=
Infinity,q=-Infinity,t=0;t<e.length;t++)for(var w=0,x=e[t];w<x.length;w++){var z=x[w];z.x<f&&(f=z.x);z.x>g&&(g=z.x);z.y<d&&(d=z.y);z.y>q&&(q=z.y)}return new l(f,d,g-f,q-d)};m.prototype.buildSDF=function(e){e=this._extractGeometry(e);if(!e)return null;var f=this._getEnvelope(e);if(0>=f.width||0>=f.height)return null;for(var g=64/Math.max(f.width,f.height),d=Math.round(f.width*g),q=Math.round(f.height*g),t=d+62,w=q+62,x=0;x<e.length;x++)for(var z=0,A=e[x];z<A.length;z++){var B=A[z];B.x-=f.x;B.y-=f.y;
B.x*=g;B.y*=g;B.x+=30.5;B.y+=30.5}f=this._dist_map(e,t,w,31);this._sign_dist_map(e,t,w,31,f);return[this._encodeDistMap(f,31),t,w,d,q,g]};m.prototype._dist_map=function(e,f,g,d){for(var q=f*g,t=new Float32Array(q),w=d*d+1,x=0;x<q;++x)t[x]=w;for(w=0;w<e.length;w++){var z=e[w],A=z.length;for(x=1;x<A;++x){var B=z[x-1],b=z[x],h=void 0,c=void 0;B.x<b.x?(h=B.x,c=b.x):(h=b.x,c=B.x);var v=void 0,u=void 0;B.y<b.y?(v=B.y,u=b.y):(v=b.y,u=B.y);var y=Math.floor(h)-d;c=Math.floor(c)+d;v=Math.floor(v)-d;u=Math.floor(u)+
d;0>y&&(y=0);c>f&&(c=f);0>v&&(v=0);u>g&&(u=g);h=b.x-B.x;for(var C=b.y-B.y,D=h*h+C*C;y<c;y++)for(var E=v;E<u;E++){var F=(y-B.x)*h+(E-B.y)*C,G=void 0,J=void 0;0>F?(G=B.x,J=B.y):F>D?(G=b.x,J=b.y):(F/=D,G=B.x+F*h,J=B.y+F*C);F=(y-G)*(y-G)+(E-J)*(E-J);G=(g-E-1)*f+y;F<t[G]&&(t[G]=F)}}}for(x=0;x<q;++x)t[x]=Math.sqrt(t[x]);return t};m.prototype._sign_dist_map=function(e,f,g,d,q){for(var t=0;t<e.length;t++)for(var w=e[t],x=w.length,z=1;z<x;++z){var A=w[z-1],B=w[z],b=void 0,h=void 0;A.x<B.x?(b=A.x,h=B.x):(b=
B.x,h=A.x);var c=void 0,v=void 0;A.y<B.y?(c=A.y,v=B.y):(c=B.y,v=A.y);b=Math.floor(b);h=Math.floor(h)+1;c=Math.floor(c);v=Math.floor(v)+1;b<d&&(b=d);h>f-d&&(h=f-d);c<d&&(c=d);for(v>g-d&&(v=g-d);c<v;++c)if(A.y>c!==B.y>c){for(var u=(g-c-1)*f,y=b;y<h;++y)y<(B.x-A.x)*(c-A.y)/(B.y-A.y)+A.x&&(q[u+y]=-q[u+y]);for(y=d;y<b;++y)q[u+y]=-q[u+y]}}};m.prototype._encodeDistMap=function(e,f){f*=2;for(var g=e.length,d=new Uint8Array(4*g),q=0;q<g;++q)p(.5-e[q]/f,d,4*q);return d};return m}();n.SDFHelper=r})},"esri/layers/vectorTiles/views/3d/webgl-engine/lib/Util":function(){define(["require",
"exports","../../support/geometryUtils","./gl-matrix"],function(r,n,a,l){function k(N,I){if(!N)throw new U(I);}function p(N,I,S){return N<I?I:N>S?S:N}function m(N){return N/180*Math.PI}function e(N){return 180*N/Math.PI}function f(N,I,S){l.mat4d.multiply(I,N,z);l.mat4d.inverse(z);for(N=0;8>N;++N)l.mat4d.multiplyVec4(z,A[N],B),l.vec3d.set3(B[0]/B[3],B[1]/B[3],B[2]/B[3],S[N])}function g(N,I){a.plane.fromPoints(N[4],N[0],N[3],I[0]);a.plane.fromPoints(N[1],N[5],N[6],I[1]);a.plane.fromPoints(N[4],N[5],
N[1],I[2]);a.plane.fromPoints(N[3],N[2],N[6],I[3]);a.plane.fromPoints(N[0],N[1],N[2],I[4]);a.plane.fromPoints(N[5],N[4],N[7],I[5])}function d(N,I,S,Z){var ca=6378137/Math.sqrt(1-n.ECCENTRICITY_SQUARED*Math.pow(Math.sin(N),2)),fa=Math.cos(N);Z[0]=(ca+S)*Math.cos(I)*fa;Z[1]=(ca*(1-n.ECCENTRICITY_SQUARED)+S)*Math.sin(N);Z[2]=-(ca+S)*Math.sin(I)*fa}function q(N){for(var I in N)return I}function t(N,I){N[12]=I[0];N[13]=I[1];N[14]=I[2]}function w(N,I){void 0===I&&(I=0);for(var S=0,Z=0;4>Z;Z++)S+=N[I+Z]*
Q[Z];return S}function x(N){return N-Math.floor(N)}Object.defineProperty(n,"__esModule",{value:!0});var z=l.mat4d.create(),A=[l.vec4d.createFrom(-1,-1,-1,1),l.vec4d.createFrom(1,-1,-1,1),l.vec4d.createFrom(1,1,-1,1),l.vec4d.createFrom(-1,1,-1,1),l.vec4d.createFrom(-1,-1,1,1),l.vec4d.createFrom(1,-1,1,1),l.vec4d.createFrom(1,1,1,1),l.vec4d.createFrom(-1,1,1,1)],B=l.vec4d.create(),b=[l.vec3d.create(),l.vec3d.create(),l.vec3d.create(),l.vec3d.create(),l.vec3d.create(),l.vec3d.create(),l.vec3d.create(),
l.vec3d.create()],h=l.vec3d.create(),c=l.vec3d.create(),v=l.vec3d.create(),u=l.vec3d.create(),y=l.vec3d.create(),C=l.vec3d.create(),D=l.vec3d.create(),E=l.vec3d.create(),F=l.vec3d.create(),G=l.vec3d.create(),J=l.vec3d.create(),R=l.vec3d.create(),O=l.vec3d.create(),P=l.vec3d.createFrom(0,0,0),U=function(){function N(I){this.message=I}N.prototype.toString=function(){return"AssertException: "+this.message};return N}();n.AssertException=U;n.EARTH_RADIUS=6378137;n.METER2FEET=3.28084;n.ECCENTRICITY_SQUARED=
.0066943799901414;n.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex"};n.assert=k;n.verify=function(N,I){};n.isPowerOfTwo=function(N){return 0===(N&N-1)};n.lerp=function(N,I,S){return N+(I-N)*S};n.clamp=p;n.encodeInt16=function(N){return p(Math.round(32767*N),-32767,32767)};n.encodeNormal=function(N,I){var S=Math.abs(N[0]),
Z=Math.abs(N[1]),ca=1/(S+Z+Math.abs(N[2]));S*=ca;Z*=ca;ca=Math.min(N[2]*ca,0);I[0]=K(N[0])*(S-ca);I[1]=K(N[1])*(Z-ca)};var K="function"===typeof Math.sign?Math.sign:function(N){return+(0<N)-+(0>N)||0};n.fallbackIfUndefined=function(N,I){return void 0===N?I:N};n.hex2rgb=function(N){N=Math.floor(N);return[(N>>16&255)/255,(N>>8&255)/255,(N&255)/255]};n.rgb2hex=function(N){var I=p(Math.round(255*N[0]),0,255),S=p(Math.round(255*N[1]),0,255);N=p(Math.round(255*N[2]),0,255);return"0x"+((I<<16)+(S<<8)+N).toString(16)};
n.dec2hex=function(N){N=N.toString(16);return"00000000".substr(0,8-N.length)+N};n.deg2rad=m;n.rad2deg=e;n.azimuthElevationAngle2Direction=function(N,I){N=1.5*Math.PI-N;I=.5*Math.PI-I;return[Math.cos(N)*Math.sin(I),Math.cos(I),Math.sin(N)*Math.sin(I)]};n.raySphere=function(N,I,S,Z,ca){S=S||P;var fa=l.vec3d.subtract(N,S,h);S=l.vec3d.dot(I,I);var ha=2*l.vec3d.dot(I,fa);Z=l.vec3d.dot(fa,fa)-Z*Z;Z=ha*ha-4*S*Z;if(0>Z)return!1;fa=Math.sqrt(Z);Z=(-ha-fa)/(2*S);S=(-ha+fa)/(2*S);if(0>Z||S<Z&&0<S)Z=S;return 0<
Z?(ca&&l.vec3d.add(N,l.vec3d.scale(I,Z,O),ca),!0):!1};n.rayTriangle3D=function(N,I,S,Z,ca,fa,ha,na,ma){void 0===ma&&(ma=l.vec3d.create());var ra=Z[ha]-S[fa],sa=Z[ha+1]-S[fa+1],ba=Z[ha+2]-S[fa+2];Z=ca[na]-S[fa];ha=ca[na+1]-S[fa+1];ca=ca[na+2]-S[fa+2];var ea=I[1]*ca-ha*I[2],ja=I[2]*Z-ca*I[0],oa=I[0]*ha-Z*I[1];na=ra*ea+sa*ja+ba*oa;if(-1E-5<na&&1E-5>na)return!1;na=1/na;var ka=N[0]-S[fa],Ca=N[1]-S[fa+1];N=N[2]-S[fa+2];ma[1]=na*(ka*ea+Ca*ja+N*oa);if(0>ma[1]||1<ma[1])return!1;S=Ca*ba-sa*N;N=N*ra-ba*ka;ra=
ka*sa-ra*Ca;ma[2]=na*(I[0]*S+I[1]*N+I[2]*ra);if(0>ma[2]||1<ma[1]+ma[2])return!1;ma[0]=na*(Z*S+ha*N+ca*ra);return!0};n.rayBoxTest=function(N,I,S,Z){var ca=(S[0]-N[0])/I[0],fa=(Z[0]-N[0])/I[0];if(ca>fa){var ha=ca;ca=fa;fa=ha}var na=(S[1]-N[1])/I[1],ma=(Z[1]-N[1])/I[1];na>ma&&(ha=na,na=ma,ma=ha);if(ca>ma||na>fa)return!1;na>ca&&(ca=na);ma<fa&&(fa=ma);S=(S[2]-N[2])/I[2];N=(Z[2]-N[2])/I[2];S>N&&(ha=S,S=N,N=ha);if(ca>N||S>fa)return!1;N<fa&&(fa=N);return 0>fa?!1:!0};n.rayRay2D=function(N,I,S,Z,ca,fa){void 0===
fa&&(fa=l.vec2d.create());var ha=(Z[ca]-S[ca])*(I[0]-N[0])-(Z[0]-S[0])*(I[ca]-N[ca]);if(0===ha)return!1;S=((Z[0]-S[0])*(N[ca]-S[ca])-(Z[ca]-S[ca])*(N[0]-S[0]))/ha;fa[0]=N[0]+S*(I[0]-N[0]);fa[1]=N[ca]+S*(I[ca]-N[ca]);return!0};n.matrixToFrustumPoints=f;n.matrixToFrustumPlanes=function(N,I,S,Z){void 0===Z&&(Z=S,S=b);f(N,I,S);g(S,Z)};n.frustumPointsToPlanes=g;n.project=function(N,I,S,Z,ca){ca||(ca=N);B[0]=N[0];B[1]=N[1];B[2]=N[2];B[3]=1;l.mat4d.multiplyVec4(I,B);2<ca.length&&(ca[2]=-B[2]);l.mat4d.multiplyVec4(S,
B);k(0!==B[3]);ca[0]=B[0]/B[3];ca[1]=B[1]/B[3];ca[2]=B[2]/B[3];ca[0]=(.5*ca[0]+.5)*Z[2]+Z[0];ca[1]=(.5*ca[1]+.5)*Z[3]+Z[1]};n.geodeticToGeocentricLatidude=function(N){return Math.atan((1-n.ECCENTRICITY_SQUARED)*Math.tan(N))};n.latLon2positionWGS84Ellipsoid=d;n.pos2latLon=function(N,I){var S=l.vec3d.length(N);I[0]=Math.asin(p(N[1]/S,-1,1));I[1]=(0>N[2]?1:-1)*Math.acos(p(N[0]/(Math.cos(I[0])*S),-1,1));I[0]=e(I[0]);I[1]=e(I[1]);I[2]=S};n.pos2latLonWGS84Ellipsoid=function(N,I){var S=N[0],Z=-N[2],ca=N[1],
fa=Math.sqrt(Math.pow(6378137,2)*(1-n.ECCENTRICITY_SQUARED));N=Math.sqrt(Math.pow(S,2)+Math.pow(Z,2));var ha=Math.atan2(6378137*ca,fa*N);S=Math.atan2(Z,S);Z=Math.atan2(ca+Math.pow(Math.sqrt((Math.pow(6378137,2)-Math.pow(fa,2))/Math.pow(fa,2)),2)*fa*Math.pow(Math.sin(ha),3),N-6378137*n.ECCENTRICITY_SQUARED*Math.pow(Math.cos(ha),3));N=N/Math.cos(Z)-6378137/Math.sqrt(1-n.ECCENTRICITY_SQUARED*Math.pow(Math.sin(Z),2))+n.EARTH_RADIUS;I[0]=Z;I[1]=S;I[2]=N};n.computeGlobeTransformation=function(N,I,S){var Z=
m(N[0]);N=m(N[1]);d(Z,N,I,c);l.mat4d.translate(S,c);l.mat4d.rotateY(S,.5*Math.PI+N);l.mat4d.rotateX(S,.5*Math.PI-Z);return S};n.readUInt16=function(N,I){return N[I]+(N[I+1]<<8)};n.readUInt32=function(N,I){return N[I]+(N[I+1]<<8)+(N[I+2]<<16)+(N[I+3]<<24)};n.setIfDefined=function(N,I,S){void 0!==I[N]&&(S[N]=I[N])};n.array2object=function(N,I){var S={};if(void 0!==I)for(var Z=0;Z<N.length;Z++){var ca=N[Z];S[I(ca)]=ca}else for(I=0;I<N.length;I++)ca=N[I],S[ca]=ca;return S};n.object2array=function(N){var I=
[],S;for(S in N)I.push(N[S]);return I};n.mergeObjects=function(N,I,S){void 0===S&&(S={});if(S!==N)for(var Z in N)S[Z]=N[Z];if(S!==I)for(var ca in I)S[ca]=I[ca];return S};n.subtractObjects=function(N,I){var S={},Z;for(Z in N)void 0===I[Z]&&(S[Z]=N[Z]);return S};n.intersectObjects=function(N,I){var S={},Z;for(Z in N)void 0!==I[Z]&&(S[Z]=N[Z]);return S};n.getFirstObjectKey=q;n.getFirstObjectValue=function(N){return N[q(N)]};n.objectEmpty=function(N){for(var I in N)return!1;return!0};n.byteBuffer2base64image=
function(N,I,S,Z,ca){var fa=4*I;k(N.length===fa*S,"buffer length must match image resolution");var ha=document.createElement("canvas");ha.width=I;ha.height=S;var na=ha.getContext("2d");I=na.getImageData(0,0,I,S);for(var ma=I.data,ra=0;ra<S;++ra)for(var sa=ra*fa,ba=(S-1-ra)*fa,ea=0;ea<fa;++ea)ma[sa++]=N[ba++];na.putImageData(I,0,0);return ha.toDataURL(Z,ca)};n.cround=function(N){return Math.round(100*N)/100};n.logWithBase=function(N,I){return Math.log(N)/Math.log(I)};n.setMatrixTranslation=t;n.setMatrixTranslation3=
function(N,I,S,Z){N[12]=I;N[13]=S;N[14]=Z};n.getMatrixTranslation=function(N,I){void 0===I&&(I=l.vec3d.create());I[0]=N[12];I[1]=N[13];I[2]=N[14];return I};n.createTranslationMatrix=function(N,I){N=l.mat4d.identity(N);t(N,I);return N};n.isTranslationMatrix=function(N){return 1===N[0]&&0===N[1]&&0===N[2]&&0===N[3]&&0===N[4]&&1===N[5]&&0===N[6]&&0===N[7]&&0===N[8]&&0===N[9]&&1===N[10]&&0===N[11]&&1===N[15]};n.fovx2fovy=function(N,I,S){return 2*Math.atan(S*Math.tan(.5*N)/I)};n.fovy2fovx=function(N,I,
S){return 2*Math.atan(I*Math.tan(.5*N)/S)};n.fovx2fovd=function(N,I,S){return 2*Math.atan(Math.sqrt(I*I+S*S)*Math.tan(.5*N)/I)};n.fovy2fovd=function(N,I,S){return 2*Math.atan(Math.sqrt(I*I+S*S)*Math.tan(.5*N)/S)};n.fovd2fovx=function(N,I,S){return 2*Math.atan(I*Math.tan(.5*N)/Math.sqrt(I*I+S*S))};n.fovd2fovy=function(N,I,S){return 2*Math.atan(S*Math.tan(.5*N)/Math.sqrt(I*I+S*S))};n.nextHighestPowerOfTwo=function(N){--N;for(var I=1;32>I;I<<=1)N|=N>>I;return N+1};n.nextHighestPowerOfTen=function(N){return Math.pow(10,
Math.ceil(Math.LOG10E*Math.log(N)))};n.lineLineDistanceSquared3D=function(N,I,S,Z,ca){v[0]=N[0]-S[0];v[1]=N[1]-S[1];v[2]=N[2]-S[2];u[0]=Z[0]-S[0];u[1]=Z[1]-S[1];u[2]=Z[2]-S[2];if(1E-4>Math.abs(u[0])&&1E-4>Math.abs(u[1])&&1E-4>Math.abs(u[2]))return ca.success=!1,ca;y[0]=I[0]-N[0];y[1]=I[1]-N[1];y[2]=I[2]-N[2];if(1E-4>Math.abs(y[0])&&1E-4>Math.abs(y[1])&&1E-4>Math.abs(y[2]))return ca.success=!1,ca;I=v[0]*u[0]+v[1]*u[1]+v[2]*u[2];Z=u[0]*y[0]+u[1]*y[1]+u[2]*y[2];var fa=v[0]*y[0]+v[1]*y[1]+v[2]*y[2],ha=
u[0]*u[0]+u[1]*u[1]+u[2]*u[2],na=(y[0]*y[0]+y[1]*y[1]+y[2]*y[2])*ha-Z*Z;if(1E-4>Math.abs(na))return ca.success=!1,ca;fa=p((I*Z-fa*ha)/na,0,1);I=p((I+Z*fa)/ha,0,1);C[0]=N[0]+fa*y[0];C[1]=N[1]+fa*y[1];C[2]=N[2]+fa*y[2];D[0]=S[0]+I*u[0];D[1]=S[1]+I*u[1];D[2]=S[2]+I*u[2];N=l.vec3d.dist2(C,D);ca.success=!0;ca.dist2=N;ca.pa=C;ca.pb=D;return ca};n.pointLineSegmentDistanceSquared2D=function(N,I,S){J[0]=I[0]-N[0];J[1]=I[1]-N[1];J[2]=0;R[0]=S[0]-N[0];R[1]=S[1]-N[1];R[2]=0;O[0]=S[0];O[1]=S[1];O[2]=0;I=l.vec2d.dot(R,
J);S=l.vec2d.dot(J,J);I=p(I/S,0,1);G[0]=J[0]*I;G[1]=J[1]*I;E[0]=N[0]+G[0];E[1]=N[1]+G[1];l.vec2d.subtract(O,E,F);N=l.vec2d.dot(F,F);I=l.vec2d.dot(R,R);S=l.vec2d.dot(J,J);var Z=l.vec2d.dot(G,G);if(Z>I||Z>S)N=Number.MAX_VALUE;return N};n.packFloatRGBA=function(N,I,S){void 0===S&&(S=0);N=p(N,0,W);for(var Z=0;4>Z;Z++)I[S+Z]=Math.floor(256*x(N*V[Z]))};n.unpackFloatRGBA=w;var V=[1,256,65536,16777216],Q=[1/256,1/65536,1/16777216,1/4294967296],W=w(new Uint8ClampedArray([255,255,255,255]));n.inverseProjectionInfo=
function(N,I,S,Z,ca){0===N[11]?(Z[0]=2/(I*N[0]),Z[1]=2/(S*N[5]),Z[2]=(1+N[12])/N[0],Z[3]=(1+N[13])/N[5],l.vec2d.set2(0,1,ca)):(Z[0]=-2/(I*N[0]),Z[1]=-2/(S*N[5]),Z[2]=(1-N[8])/N[0],Z[3]=(1-N[9])/N[5],l.vec2d.set2(1,0,ca))}})},"esri/layers/vectorTiles/views/3d/support/geometryUtils":function(){define(["require","exports","./geometryUtils/lineSegment","./geometryUtils/plane","./geometryUtils/triangle"],function(r,n,a,l,k){Object.defineProperty(n,"__esModule",{value:!0});n.plane=l;n.triangle=k;n.lineSegment=
a})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/lineSegment":function(){define(["require","exports","../../lib/glMatrix","../mathUtils"],function(r,n,a,l){function k(m,e){void 0===m&&(m=a.vec3d.create());void 0===e&&(e=a.vec3d.create());return{origin:m,vector:e}}Object.defineProperty(n,"__esModule",{value:!0});n.create=k;n.fromOriginAndVector=function(m,e,f){void 0===f&&(f=k());a.vec3d.set(m,f.origin);a.vec3d.set(e,f.vector);return f};n.distance2=function(m,e){e=a.vec3d.subtract(e,m.origin);
var f=a.vec3d.dot(m.vector,e),g=a.vec3d.dot(m.vector,m.vector);f=l.clamp(f/g,0,1);m=a.vec3d.subtract(a.vec3d.scale(m.vector,f,p),e,p);return a.vec3d.dot(m,m)};var p=a.vec3d.create()})},"esri/layers/vectorTiles/views/3d/support/geometryUtils/plane":function(){define(["require","exports","../../lib/glMatrix"],function(r,n,a){function l(g){void 0===g&&(g=n.UP);return[g[0],g[1],g[2],g[3]]}function k(g,d,q){void 0===q&&(q=l());a.vec3d.set(d,q);q[3]=-a.vec3d.dot(d,g);return q}function p(g,d,q,t){void 0===
t&&(t=l());a.vec3d.cross(d,g,f);return k(q,a.vec3d.normalize(f),t)}Object.defineProperty(n,"__esModule",{value:!0});n.create=l;n.fromValues=function(g,d,q,t,w){void 0===w&&(w=l());w[0]=g;w[1]=d;w[2]=q;w[3]=t;return w};n.fromNormalAndOffset=function(g,d,q){void 0===q&&(q=l());a.vec3d.set(g,q);q[3]=d;return q};n.fromPositionAndNormal=k;n.projectVector=function(g,d,q){void 0===q&&(q=d);return a.vec3d.cross(g,a.vec3d.cross(d,g,e),q)};n.distance=function(g,d){return a.vec3d.dot(g,d)+g[3]};n.fromPoints=
function(g,d,q,t){void 0===t&&(t=l());return p(a.vec3d.subtract(g,d,m),a.vec3d.subtract(q,d,e),g,t)};n.set=function(g,d){g[0]=d[0];g[1]=d[1];g[2]=d[2];g[3]=d[3];return g};n.negate=function(g,d){void 0===d&&(d=g);d[0]=-g[0];d[1]=-g[1];d[2]=-g[2];d[3]=-g[3];return d};n.fromVectorsAndPoint=p;n.intersectRay=function(g,d,q,t){var w=a.vec3d.dot(g,q);if(0===w)return!1;g=-(a.vec3d.dot(g,d)+g[3])/w;a.vec3d.add(d,a.vec3d.scale(q,g,t),t);return!0};n.UP=[0,0,1,0];var m=a.vec3d.create(),e=a.vec3d.create(),f=a.vec3d.create()})},
"esri/layers/vectorTiles/views/3d/support/geometryUtils/triangle":function(){define(["require","exports","../../lib/glMatrix","./lineSegment"],function(r,n,a,l){function k(w,x,z){var A=a.vec2d.dist(w,x);x=a.vec2d.dist(x,z);w=a.vec2d.dist(z,w);z=(A+x+w)/2;return Math.sqrt(z*(z-A)*(z-x)*(z-w))}Object.defineProperty(n,"__esModule",{value:!0});n.create=function(w,x,z){void 0===w&&(w=a.vec3d.create());void 0===x&&(x=a.vec3d.create());void 0===z&&(z=a.vec3d.create());return{p0:w,p1:x,p2:z}};n.distance2=
function(w,x){var z=w.p0,A=w.p1;w=w.p2;var B=a.vec3d.subtract(A,z,p),b=a.vec3d.subtract(w,A,m),h=a.vec3d.subtract(z,w,e),c=a.vec3d.subtract(x,z,f),v=a.vec3d.subtract(x,A,g),u=a.vec3d.subtract(x,w,d),y=a.vec3d.cross(B,h),C=a.vec3d.dot(a.vec3d.cross(B,y,q),c);v=a.vec3d.dot(a.vec3d.cross(b,y,q),v);u=a.vec3d.dot(a.vec3d.cross(h,y,q),u);if(0<C&&0<v&&0<u)return x=a.vec3d.dot(y,c),x*x/a.vec3d.dot(y,y);z=l.distance2(l.fromOriginAndVector(z,B,t),x);A=l.distance2(l.fromOriginAndVector(A,b,t),x);x=l.distance2(l.fromOriginAndVector(w,
h,t),x);return Math.min(z,A,x)};n.areaPoints2d=k;n.area2d=function(w){return k(w.p0,w.p1,w.p2)};var p=a.vec3d.create(),m=a.vec3d.create(),e=a.vec3d.create(),f=a.vec3d.create(),g=a.vec3d.create(),d=a.vec3d.create(),q=a.vec3d.create(),t=l.create()})},"esri/layers/vectorTiles/views/3d/webgl-engine/lib/gl-matrix":function(){define([],function(){var r={};(function(n,a){a(n,!0);a(n,!1)})(r,function(n,a){var l={};(function(){if("undefined"!=typeof Float32Array){var b=new Float32Array(1),h=new Int32Array(b.buffer);
l.invsqrt=function(c){b[0]=c;h[0]=1597463007-(h[0]>>1);var v=b[0];return v*(1.5-.5*c*v*v)}}else l.invsqrt=function(c){return 1/Math.sqrt(c)}})();var k=Array;"undefined"!=typeof Float32Array&&(k=a?Float32Array:Array);var p={create:function(b){var h=new k(3);b?(h[0]=b[0],h[1]=b[1],h[2]=b[2]):h[0]=h[1]=h[2]=0;return h},createFrom:function(b,h,c){var v=new k(3);v[0]=b;v[1]=h;v[2]=c;return v},set:function(b,h){h[0]=b[0];h[1]=b[1];h[2]=b[2];return h},set3:function(b,h,c,v){v[0]=b;v[1]=h;v[2]=c;return v},
add:function(b,h,c){if(!c||b===c)return b[0]+=h[0],b[1]+=h[1],b[2]+=h[2],b;c[0]=b[0]+h[0];c[1]=b[1]+h[1];c[2]=b[2]+h[2];return c},subtract:function(b,h,c){if(!c||b===c)return b[0]-=h[0],b[1]-=h[1],b[2]-=h[2],b;c[0]=b[0]-h[0];c[1]=b[1]-h[1];c[2]=b[2]-h[2];return c},multiply:function(b,h,c){if(!c||b===c)return b[0]*=h[0],b[1]*=h[1],b[2]*=h[2],b;c[0]=b[0]*h[0];c[1]=b[1]*h[1];c[2]=b[2]*h[2];return c},max:function(b,h,c){c[0]=Math.max(b[0],h[0]);c[1]=Math.max(b[1],h[1]);c[2]=Math.max(b[2],h[2]);return c},
min:function(b,h,c){c[0]=Math.min(b[0],h[0]);c[1]=Math.min(b[1],h[1]);c[2]=Math.min(b[2],h[2]);return c},negate:function(b,h){h||(h=b);h[0]=-b[0];h[1]=-b[1];h[2]=-b[2];return h},scale:function(b,h,c){if(!c||b===c)return b[0]*=h,b[1]*=h,b[2]*=h,b;c[0]=b[0]*h;c[1]=b[1]*h;c[2]=b[2]*h;return c},normalize:function(b,h){h||(h=b);var c=b[0],v=b[1];b=b[2];var u=Math.sqrt(c*c+v*v+b*b);if(!u)return h[0]=0,h[1]=0,h[2]=0,h;if(1===u)return h[0]=c,h[1]=v,h[2]=b,h;u=1/u;h[0]=c*u;h[1]=v*u;h[2]=b*u;return h},cross:function(b,
h,c){c||(c=b);var v=b[0],u=b[1];b=b[2];var y=h[0],C=h[1];h=h[2];c[0]=u*h-b*C;c[1]=b*y-v*h;c[2]=v*C-u*y;return c},length:function(b){var h=b[0],c=b[1];b=b[2];return Math.sqrt(h*h+c*c+b*b)},length2:function(b){var h=b[0],c=b[1];b=b[2];return h*h+c*c+b*b},dot:function(b,h){return b[0]*h[0]+b[1]*h[1]+b[2]*h[2]},direction:function(b,h,c){c||(c=b);var v=b[0]-h[0],u=b[1]-h[1];b=b[2]-h[2];h=Math.sqrt(v*v+u*u+b*b);if(!h)return c[0]=0,c[1]=0,c[2]=0,c;h=1/h;c[0]=v*h;c[1]=u*h;c[2]=b*h;return c},lerp:function(b,
h,c,v){v||(v=b);v[0]=b[0]+c*(h[0]-b[0]);v[1]=b[1]+c*(h[1]-b[1]);v[2]=b[2]+c*(h[2]-b[2]);return v},dist:function(b,h){var c=h[0]-b[0],v=h[1]-b[1];b=h[2]-b[2];return Math.sqrt(c*c+v*v+b*b)},dist2:function(b,h){var c=h[0]-b[0],v=h[1]-b[1];b=h[2]-b[2];return c*c+v*v+b*b}},m=null,e=new k(4);p.unproject=function(b,h,c,v,u){u||(u=b);m||(m=x.create());var y=m;e[0]=2*(b[0]-v[0])/v[2]-1;e[1]=2*(b[1]-v[1])/v[3]-1;e[2]=2*b[2]-1;e[3]=1;x.multiply(c,h,y);if(!x.inverse(y))return null;x.multiplyVec4(y,e);if(0===
e[3])return null;u[0]=e[0]/e[3];u[1]=e[1]/e[3];u[2]=e[2]/e[3];return u};var f=p.createFrom(1,0,0),g=p.createFrom(0,1,0),d=p.createFrom(0,0,1);p.rotationTo=function(b,h,c){c||(c=z.create());var v=p.dot(b,h),u=p.create();if(1<=v)z.set(A,c);else if(-.999999>v)p.cross(f,b,u),1E-6>u.length&&p.cross(g,b,u),1E-6>u.length&&p.cross(d,b,u),p.normalize(u),z.fromAxisAngle(u,Math.PI,c);else{v=Math.sqrt(2*(1+v));var y=1/v;p.cross(b,h,u);c[0]=u[0]*y;c[1]=u[1]*y;c[2]=u[2]*y;c[3]=.5*v;z.normalize(c)}1<c[3]?c[3]=1:
-1>c[3]&&(c[3]=-1);return c};var q=p.create(),t=p.create();p.project=function(b,h,c,v){v||(v=b);p.direction(h,c,q);p.subtract(b,h,t);b=p.dot(q,t);p.scale(q,b,v);p.add(v,h,v)};p.str=function(b){return"["+b[0]+", "+b[1]+", "+b[2]+"]"};var w={create:function(b){var h=new k(9);b?(h[0]=b[0],h[1]=b[1],h[2]=b[2],h[3]=b[3],h[4]=b[4],h[5]=b[5],h[6]=b[6],h[7]=b[7],h[8]=b[8]):h[0]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=0;return h},createFrom:function(b,h,c,v,u,y,C,D,E){var F=new k(9);F[0]=b;F[1]=h;F[2]=c;F[3]=
v;F[4]=u;F[5]=y;F[6]=C;F[7]=D;F[8]=E;return F},determinant:function(b){var h=b[3],c=b[4],v=b[5],u=b[6],y=b[7],C=b[8];return b[0]*(C*c-v*y)+b[1]*(-C*h+v*u)+b[2]*(y*h-c*u)},inverse:function(b,h){var c=b[0],v=b[1],u=b[2],y=b[3],C=b[4],D=b[5],E=b[6],F=b[7];b=b[8];var G=b*C-D*F,J=-b*y+D*E,R=F*y-C*E,O=c*G+v*J+u*R;if(!O)return null;O=1/O;h||(h=w.create());h[0]=G*O;h[1]=(-b*v+u*F)*O;h[2]=(D*v-u*C)*O;h[3]=J*O;h[4]=(b*c-u*E)*O;h[5]=(-D*c+u*y)*O;h[6]=R*O;h[7]=(-F*c+v*E)*O;h[8]=(C*c-v*y)*O;return h},multiply:function(b,
h,c){c||(c=b);var v=b[0],u=b[1],y=b[2],C=b[3],D=b[4],E=b[5],F=b[6],G=b[7];b=b[8];var J=h[0],R=h[1],O=h[2],P=h[3],U=h[4],K=h[5],V=h[6],Q=h[7];h=h[8];c[0]=J*v+R*C+O*F;c[1]=J*u+R*D+O*G;c[2]=J*y+R*E+O*b;c[3]=P*v+U*C+K*F;c[4]=P*u+U*D+K*G;c[5]=P*y+U*E+K*b;c[6]=V*v+Q*C+h*F;c[7]=V*u+Q*D+h*G;c[8]=V*y+Q*E+h*b;return c},multiplyVec2:function(b,h,c){c||(c=h);var v=h[0];h=h[1];c[0]=v*b[0]+h*b[3]+b[6];c[1]=v*b[1]+h*b[4]+b[7];return c},multiplyVec3:function(b,h,c){c||(c=h);var v=h[0],u=h[1];h=h[2];c[0]=v*b[0]+u*
b[3]+h*b[6];c[1]=v*b[1]+u*b[4]+h*b[7];c[2]=v*b[2]+u*b[5]+h*b[8];return c},set:function(b,h){h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];h[4]=b[4];h[5]=b[5];h[6]=b[6];h[7]=b[7];h[8]=b[8];return h},identity:function(b){b||(b=w.create());b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},transpose:function(b,h){if(!h||b===h){h=b[1];var c=b[2],v=b[5];b[1]=b[3];b[2]=b[6];b[3]=h;b[5]=b[7];b[6]=c;b[7]=v;return b}h[0]=b[0];h[1]=b[3];h[2]=b[6];h[3]=b[1];h[4]=b[4];h[5]=b[7];h[6]=b[2];h[7]=
b[5];h[8]=b[8];return h},toMat4:function(b,h){h||(h=x.create());h[15]=1;h[14]=0;h[13]=0;h[12]=0;h[11]=0;h[10]=b[8];h[9]=b[7];h[8]=b[6];h[7]=0;h[6]=b[5];h[5]=b[4];h[4]=b[3];h[3]=0;h[2]=b[2];h[1]=b[1];h[0]=b[0];return h},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+"]"}},x={create:function(b){var h=new k(16);4===arguments.length?(h[0]=arguments[0],h[1]=arguments[1],h[2]=arguments[2],h[3]=arguments[3],h[4]=arguments[4],h[5]=arguments[5],
h[6]=arguments[6],h[7]=arguments[7],h[8]=arguments[8],h[9]=arguments[9],h[10]=arguments[10],h[11]=arguments[11],h[12]=arguments[12],h[13]=arguments[13],h[14]=arguments[14],h[15]=arguments[15]):b&&(h[0]=b[0],h[1]=b[1],h[2]=b[2],h[3]=b[3],h[4]=b[4],h[5]=b[5],h[6]=b[6],h[7]=b[7],h[8]=b[8],h[9]=b[9],h[10]=b[10],h[11]=b[11],h[12]=b[12],h[13]=b[13],h[14]=b[14],h[15]=b[15]);return h},createFrom:function(b,h,c,v,u,y,C,D,E,F,G,J,R,O,P,U){var K=new k(16);K[0]=b;K[1]=h;K[2]=c;K[3]=v;K[4]=u;K[5]=y;K[6]=C;K[7]=
D;K[8]=E;K[9]=F;K[10]=G;K[11]=J;K[12]=R;K[13]=O;K[14]=P;K[15]=U;return K},createFromMatrixRowMajor:function(b){var h=new k(16);h[0]=b[0];h[4]=b[1];h[8]=b[2];h[12]=b[3];h[1]=b[4];h[5]=b[5];h[9]=b[6];h[13]=b[7];h[2]=b[8];h[6]=b[9];h[10]=b[10];h[14]=b[11];h[3]=b[12];h[7]=b[13];h[11]=b[14];h[15]=b[15];return h},createFromMatrix:function(b){var h=new k(16);h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];h[4]=b[4];h[5]=b[5];h[6]=b[6];h[7]=b[7];h[8]=b[8];h[9]=b[9];h[10]=b[10];h[11]=b[11];h[12]=b[12];h[13]=b[13];
h[14]=b[14];h[15]=b[15];return h},set:function(b,h){h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];h[4]=b[4];h[5]=b[5];h[6]=b[6];h[7]=b[7];h[8]=b[8];h[9]=b[9];h[10]=b[10];h[11]=b[11];h[12]=b[12];h[13]=b[13];h[14]=b[14];h[15]=b[15];return h},setRowMajor:function(b,h){h[0]=b[0];h[4]=b[1];h[8]=b[2];h[12]=b[3];h[1]=b[4];h[5]=b[5];h[9]=b[6];h[13]=b[7];h[2]=b[8];h[6]=b[9];h[10]=b[10];h[14]=b[11];h[3]=b[12];h[7]=b[13];h[11]=b[14];h[15]=b[15];return h},identity:function(b){b||(b=x.create());b[0]=1;b[1]=0;b[2]=0;
b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},transpose:function(b,h){if(!h||b===h){h=b[1];var c=b[2],v=b[3],u=b[6],y=b[7],C=b[11];b[1]=b[4];b[2]=b[8];b[3]=b[12];b[4]=h;b[6]=b[9];b[7]=b[13];b[8]=c;b[9]=u;b[11]=b[14];b[12]=v;b[13]=y;b[14]=C;return b}h[0]=b[0];h[1]=b[4];h[2]=b[8];h[3]=b[12];h[4]=b[1];h[5]=b[5];h[6]=b[9];h[7]=b[13];h[8]=b[2];h[9]=b[6];h[10]=b[10];h[11]=b[14];h[12]=b[3];h[13]=b[7];h[14]=b[11];h[15]=b[15];return h},determinant:function(b){var h=
b[0],c=b[1],v=b[2],u=b[3],y=b[4],C=b[5],D=b[6],E=b[7],F=b[8],G=b[9],J=b[10],R=b[11],O=b[12],P=b[13],U=b[14];b=b[15];return O*G*D*u-F*P*D*u-O*C*J*u+y*P*J*u+F*C*U*u-y*G*U*u-O*G*v*E+F*P*v*E+O*c*J*E-h*P*J*E-F*c*U*E+h*G*U*E+O*C*v*R-y*P*v*R-O*c*D*R+h*P*D*R+y*c*U*R-h*C*U*R-F*C*v*b+y*G*v*b+F*c*D*b-h*G*D*b-y*c*J*b+h*C*J*b},inverse:function(b,h){h||(h=b);var c=b[0],v=b[1],u=b[2],y=b[3],C=b[4],D=b[5],E=b[6],F=b[7],G=b[8],J=b[9],R=b[10],O=b[11],P=b[12],U=b[13],K=b[14];b=b[15];var V=c*D-v*C,Q=c*E-u*C,W=c*F-y*
C,N=v*E-u*D,I=v*F-y*D,S=u*F-y*E,Z=G*U-J*P,ca=G*K-R*P,fa=G*b-O*P,ha=J*K-R*U,na=J*b-O*U,ma=R*b-O*K,ra=V*ma-Q*na+W*ha+N*fa-I*ca+S*Z;if(!ra)return null;ra=1/ra;h[0]=(D*ma-E*na+F*ha)*ra;h[1]=(-v*ma+u*na-y*ha)*ra;h[2]=(U*S-K*I+b*N)*ra;h[3]=(-J*S+R*I-O*N)*ra;h[4]=(-C*ma+E*fa-F*ca)*ra;h[5]=(c*ma-u*fa+y*ca)*ra;h[6]=(-P*S+K*W-b*Q)*ra;h[7]=(G*S-R*W+O*Q)*ra;h[8]=(C*na-D*fa+F*Z)*ra;h[9]=(-c*na+v*fa-y*Z)*ra;h[10]=(P*I-U*W+b*V)*ra;h[11]=(-G*I+J*W-O*V)*ra;h[12]=(-C*ha+D*ca-E*Z)*ra;h[13]=(c*ha-v*ca+u*Z)*ra;h[14]=
(-P*N+U*Q-K*V)*ra;h[15]=(G*N-J*Q+R*V)*ra;return h},toRotationMat:function(b,h){h||(h=x.create());h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];h[4]=b[4];h[5]=b[5];h[6]=b[6];h[7]=b[7];h[8]=b[8];h[9]=b[9];h[10]=b[10];h[11]=b[11];h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h},toMat3:function(b,h){h||(h=w.create());h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[4];h[4]=b[5];h[5]=b[6];h[6]=b[8];h[7]=b[9];h[8]=b[10];return h},toInverseMat3:function(b,h){var c=b[0],v=b[1],u=b[2],y=b[4],C=b[5],D=b[6],E=b[8],F=b[9];b=b[10];var G=
b*C-D*F,J=-b*y+D*E,R=F*y-C*E,O=c*G+v*J+u*R;if(!O)return null;O=1/O;h||(h=w.create());h[0]=G*O;h[1]=(-b*v+u*F)*O;h[2]=(D*v-u*C)*O;h[3]=J*O;h[4]=(b*c-u*E)*O;h[5]=(-D*c+u*y)*O;h[6]=R*O;h[7]=(-F*c+v*E)*O;h[8]=(C*c-v*y)*O;return h},multiply:function(b,h,c){c||(c=b);var v=b[0],u=b[1],y=b[2],C=b[3],D=b[4],E=b[5],F=b[6],G=b[7],J=b[8],R=b[9],O=b[10],P=b[11],U=b[12],K=b[13],V=b[14];b=b[15];var Q=h[0],W=h[1],N=h[2],I=h[3],S=h[4],Z=h[5],ca=h[6],fa=h[7],ha=h[8],na=h[9],ma=h[10],ra=h[11],sa=h[12],ba=h[13],ea=h[14];
h=h[15];c[0]=Q*v+W*D+N*J+I*U;c[1]=Q*u+W*E+N*R+I*K;c[2]=Q*y+W*F+N*O+I*V;c[3]=Q*C+W*G+N*P+I*b;c[4]=S*v+Z*D+ca*J+fa*U;c[5]=S*u+Z*E+ca*R+fa*K;c[6]=S*y+Z*F+ca*O+fa*V;c[7]=S*C+Z*G+ca*P+fa*b;c[8]=ha*v+na*D+ma*J+ra*U;c[9]=ha*u+na*E+ma*R+ra*K;c[10]=ha*y+na*F+ma*O+ra*V;c[11]=ha*C+na*G+ma*P+ra*b;c[12]=sa*v+ba*D+ea*J+h*U;c[13]=sa*u+ba*E+ea*R+h*K;c[14]=sa*y+ba*F+ea*O+h*V;c[15]=sa*C+ba*G+ea*P+h*b;return c},multiplyVec3:function(b,h,c){c||(c=h);var v=h[0],u=h[1];h=h[2];c[0]=b[0]*v+b[4]*u+b[8]*h+b[12];c[1]=b[1]*
v+b[5]*u+b[9]*h+b[13];c[2]=b[2]*v+b[6]*u+b[10]*h+b[14];return c},multiplyVec4:function(b,h,c){c||(c=h);var v=h[0],u=h[1],y=h[2];h=h[3];c[0]=b[0]*v+b[4]*u+b[8]*y+b[12]*h;c[1]=b[1]*v+b[5]*u+b[9]*y+b[13]*h;c[2]=b[2]*v+b[6]*u+b[10]*y+b[14]*h;c[3]=b[3]*v+b[7]*u+b[11]*y+b[15]*h;return c},translate:function(b,h,c){var v=h[0],u=h[1];h=h[2];if(!c||b===c)return b[12]=b[0]*v+b[4]*u+b[8]*h+b[12],b[13]=b[1]*v+b[5]*u+b[9]*h+b[13],b[14]=b[2]*v+b[6]*u+b[10]*h+b[14],b[15]=b[3]*v+b[7]*u+b[11]*h+b[15],b;var y=b[0];
var C=b[1];var D=b[2];var E=b[3];var F=b[4];var G=b[5];var J=b[6];var R=b[7];var O=b[8];var P=b[9];var U=b[10];var K=b[11];c[0]=y;c[1]=C;c[2]=D;c[3]=E;c[4]=F;c[5]=G;c[6]=J;c[7]=R;c[8]=O;c[9]=P;c[10]=U;c[11]=K;c[12]=y*v+F*u+O*h+b[12];c[13]=C*v+G*u+P*h+b[13];c[14]=D*v+J*u+U*h+b[14];c[15]=E*v+R*u+K*h+b[15];return c},scale:function(b,h,c){var v=h[0],u=h[1];h=h[2];if(!c||b===c)return b[0]*=v,b[1]*=v,b[2]*=v,b[3]*=v,b[4]*=u,b[5]*=u,b[6]*=u,b[7]*=u,b[8]*=h,b[9]*=h,b[10]*=h,b[11]*=h,b;c[0]=b[0]*v;c[1]=b[1]*
v;c[2]=b[2]*v;c[3]=b[3]*v;c[4]=b[4]*u;c[5]=b[5]*u;c[6]=b[6]*u;c[7]=b[7]*u;c[8]=b[8]*h;c[9]=b[9]*h;c[10]=b[10]*h;c[11]=b[11]*h;c[12]=b[12];c[13]=b[13];c[14]=b[14];c[15]=b[15];return c},maxScale:function(b){return Math.max(Math.max(Math.sqrt(b[0]*b[0]+b[4]*b[4]+b[8]*b[8]),Math.sqrt(b[1]*b[1]+b[5]*b[5]+b[9]*b[9])),Math.sqrt(b[2]*b[2]+b[6]*b[6]+b[10]*b[10]))},rotate:function(b,h,c,v){var u=c[0],y=c[1];c=c[2];var C=Math.sqrt(u*u+y*y+c*c);if(!C)return null;1!==C&&(C=1/C,u*=C,y*=C,c*=C);var D=Math.sin(h);
var E=Math.cos(h);var F=1-E;h=b[0];C=b[1];var G=b[2];var J=b[3];var R=b[4];var O=b[5];var P=b[6];var U=b[7];var K=b[8];var V=b[9];var Q=b[10];var W=b[11];var N=u*u*F+E;var I=y*u*F+c*D;var S=c*u*F-y*D;var Z=u*y*F-c*D;var ca=y*y*F+E;var fa=c*y*F+u*D;var ha=u*c*F+y*D;u=y*c*F-u*D;y=c*c*F+E;v?b!==v&&(v[12]=b[12],v[13]=b[13],v[14]=b[14],v[15]=b[15]):v=b;v[0]=h*N+R*I+K*S;v[1]=C*N+O*I+V*S;v[2]=G*N+P*I+Q*S;v[3]=J*N+U*I+W*S;v[4]=h*Z+R*ca+K*fa;v[5]=C*Z+O*ca+V*fa;v[6]=G*Z+P*ca+Q*fa;v[7]=J*Z+U*ca+W*fa;v[8]=h*
ha+R*u+K*y;v[9]=C*ha+O*u+V*y;v[10]=G*ha+P*u+Q*y;v[11]=J*ha+U*u+W*y;return v},rotateX:function(b,h,c){var v=Math.sin(h);h=Math.cos(h);var u=b[4],y=b[5],C=b[6],D=b[7],E=b[8],F=b[9],G=b[10],J=b[11];c?b!==c&&(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[12]=b[12],c[13]=b[13],c[14]=b[14],c[15]=b[15]):c=b;c[4]=u*h+E*v;c[5]=y*h+F*v;c[6]=C*h+G*v;c[7]=D*h+J*v;c[8]=u*-v+E*h;c[9]=y*-v+F*h;c[10]=C*-v+G*h;c[11]=D*-v+J*h;return c},rotateY:function(b,h,c){var v=Math.sin(h);h=Math.cos(h);var u=b[0],y=b[1],C=b[2],D=
b[3],E=b[8],F=b[9],G=b[10],J=b[11];c?b!==c&&(c[4]=b[4],c[5]=b[5],c[6]=b[6],c[7]=b[7],c[12]=b[12],c[13]=b[13],c[14]=b[14],c[15]=b[15]):c=b;c[0]=u*h+E*-v;c[1]=y*h+F*-v;c[2]=C*h+G*-v;c[3]=D*h+J*-v;c[8]=u*v+E*h;c[9]=y*v+F*h;c[10]=C*v+G*h;c[11]=D*v+J*h;return c},rotateZ:function(b,h,c){var v=Math.sin(h);h=Math.cos(h);var u=b[0],y=b[1],C=b[2],D=b[3],E=b[4],F=b[5],G=b[6],J=b[7];c?b!==c&&(c[8]=b[8],c[9]=b[9],c[10]=b[10],c[11]=b[11],c[12]=b[12],c[13]=b[13],c[14]=b[14],c[15]=b[15]):c=b;c[0]=u*h+E*v;c[1]=y*
h+F*v;c[2]=C*h+G*v;c[3]=D*h+J*v;c[4]=u*-v+E*h;c[5]=y*-v+F*h;c[6]=C*-v+G*h;c[7]=D*-v+J*h;return c},frustum:function(b,h,c,v,u,y,C){C||(C=x.create());var D=h-b,E=v-c,F=y-u;C[0]=2*u/D;C[1]=0;C[2]=0;C[3]=0;C[4]=0;C[5]=2*u/E;C[6]=0;C[7]=0;C[8]=(h+b)/D;C[9]=(v+c)/E;C[10]=-(y+u)/F;C[11]=-1;C[12]=0;C[13]=0;C[14]=-(y*u*2)/F;C[15]=0;return C},perspective:function(b,h,c,v,u){b=c*Math.tan(b*Math.PI/360);h*=b;return x.frustum(-h,h,-b,b,c,v,u)},ortho:function(b,h,c,v,u,y,C){C||(C=x.create());var D=h-b,E=v-c,F=
y-u;C[0]=2/D;C[1]=0;C[2]=0;C[3]=0;C[4]=0;C[5]=2/E;C[6]=0;C[7]=0;C[8]=0;C[9]=0;C[10]=-2/F;C[11]=0;C[12]=-(b+h)/D;C[13]=-(v+c)/E;C[14]=-(y+u)/F;C[15]=1;return C},lookAt:function(b,h,c,v){v||(v=x.create());var u=b[0],y=b[1];b=b[2];var C=c[0];var D=c[1];var E=c[2];var F=h[0];c=h[1];var G=h[2];if(u===F&&y===c&&b===G)return x.identity(v);h=u-F;c=y-c;F=b-G;var J=1/Math.sqrt(h*h+c*c+F*F);h*=J;c*=J;F*=J;G=D*F-E*c;E=E*h-C*F;C=C*c-D*h;(J=Math.sqrt(G*G+E*E+C*C))?(J=1/J,G*=J,E*=J,C*=J):C=E=G=0;D=c*C-F*E;var R=
F*G-h*C;var O=h*E-c*G;(J=Math.sqrt(D*D+R*R+O*O))?(J=1/J,D*=J,R*=J,O*=J):O=R=D=0;v[0]=G;v[1]=D;v[2]=h;v[3]=0;v[4]=E;v[5]=R;v[6]=c;v[7]=0;v[8]=C;v[9]=O;v[10]=F;v[11]=0;v[12]=-(G*u+E*y+C*b);v[13]=-(D*u+R*y+O*b);v[14]=-(h*u+c*y+F*b);v[15]=1;return v},fromRotationTranslation:function(b,h,c){c||(c=x.create());var v=b[0],u=b[1],y=b[2],C=b[3],D=v+v,E=u+u,F=y+y;b=v*D;var G=v*E;v*=F;var J=u*E;u*=F;y*=F;D*=C;E*=C;C*=F;c[0]=1-(J+y);c[1]=G+C;c[2]=v-E;c[3]=0;c[4]=G-C;c[5]=1-(b+y);c[6]=u+D;c[7]=0;c[8]=v+E;c[9]=
u-D;c[10]=1-(b+J);c[11]=0;c[12]=h[0];c[13]=h[1];c[14]=h[2];c[15]=1;return c},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+"]"}},z={create:function(b){var h=new k(4);b?(h[0]=b[0],h[1]=b[1],h[2]=b[2],h[3]=b[3]):h[0]=h[1]=h[2]=h[3]=0;return h},createFrom:function(b,h,c,v){var u=new k(4);u[0]=b;u[1]=h;u[2]=c;u[3]=v;return u},set:function(b,h){h[0]=b[0];h[1]=b[1];
h[2]=b[2];h[3]=b[3];return h},identity:function(b){b||(b=z.create());b[0]=0;b[1]=0;b[2]=0;b[3]=1;return b}},A=z.identity();z.calculateW=function(b,h){var c=b[0],v=b[1],u=b[2];if(!h||b===h)return b[3]=-Math.sqrt(Math.abs(1-c*c-v*v-u*u)),b;h[0]=c;h[1]=v;h[2]=u;h[3]=-Math.sqrt(Math.abs(1-c*c-v*v-u*u));return h};z.dot=function(b,h){return b[0]*h[0]+b[1]*h[1]+b[2]*h[2]+b[3]*h[3]};z.inverse=function(b,h){var c=b[0],v=b[1],u=b[2],y=b[3];c=(c=c*c+v*v+u*u+y*y)?1/c:0;if(!h||b===h)return b[0]*=-c,b[1]*=-c,b[2]*=
-c,b[3]*=c,b;h[0]=-b[0]*c;h[1]=-b[1]*c;h[2]=-b[2]*c;h[3]=b[3]*c;return h};z.conjugate=function(b,h){if(!h||b===h)return b[0]*=-1,b[1]*=-1,b[2]*=-1,b;h[0]=-b[0];h[1]=-b[1];h[2]=-b[2];h[3]=b[3];return h};z.length=function(b){var h=b[0],c=b[1],v=b[2];b=b[3];return Math.sqrt(h*h+c*c+v*v+b*b)};z.normalize=function(b,h){h||(h=b);var c=b[0],v=b[1],u=b[2];b=b[3];var y=Math.sqrt(c*c+v*v+u*u+b*b);if(0===y)return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h;y=1/y;h[0]=c*y;h[1]=v*y;h[2]=u*y;h[3]=b*y;return h};z.add=function(b,
h,c){if(!c||b===c)return b[0]+=h[0],b[1]+=h[1],b[2]+=h[2],b[3]+=h[3],b;c[0]=b[0]+h[0];c[1]=b[1]+h[1];c[2]=b[2]+h[2];c[3]=b[3]+h[3];return c};z.multiply=function(b,h,c){c||(c=b);var v=b[0],u=b[1],y=b[2];b=b[3];var C=h[0],D=h[1],E=h[2];h=h[3];c[0]=v*h+b*C+u*E-y*D;c[1]=u*h+b*D+y*C-v*E;c[2]=y*h+b*E+v*D-u*C;c[3]=b*h-v*C-u*D-y*E;return c};z.multiplyVec3=function(b,h,c){c||(c=h);var v=h[0],u=h[1],y=h[2];h=b[0];var C=b[1],D=b[2];b=b[3];var E=b*v+C*y-D*u,F=b*u+D*v-h*y,G=b*y+h*u-C*v;v=-h*v-C*u-D*y;c[0]=E*b+
v*-h+F*-D-G*-C;c[1]=F*b+v*-C+G*-h-E*-D;c[2]=G*b+v*-D+E*-C-F*-h;return c};z.scale=function(b,h,c){if(!c||b===c)return b[0]*=h,b[1]*=h,b[2]*=h,b[3]*=h,b;c[0]=b[0]*h;c[1]=b[1]*h;c[2]=b[2]*h;c[3]=b[3]*h;return c};z.toMat3=function(b,h){h||(h=w.create());var c=b[0],v=b[1],u=b[2],y=b[3],C=c+c,D=v+v,E=u+u;b=c*C;var F=c*D;c*=E;var G=v*D;v*=E;u*=E;C*=y;D*=y;y*=E;h[0]=1-(G+u);h[1]=F+y;h[2]=c-D;h[3]=F-y;h[4]=1-(b+u);h[5]=v+C;h[6]=c+D;h[7]=v-C;h[8]=1-(b+G);return h};z.toMat4=function(b,h){h||(h=x.create());var c=
b[0],v=b[1],u=b[2],y=b[3],C=c+c,D=v+v,E=u+u;b=c*C;var F=c*D;c*=E;var G=v*D;v*=E;u*=E;C*=y;D*=y;y*=E;h[0]=1-(G+u);h[1]=F+y;h[2]=c-D;h[3]=0;h[4]=F-y;h[5]=1-(b+u);h[6]=v+C;h[7]=0;h[8]=c+D;h[9]=v-C;h[10]=1-(b+G);h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h};z.slerp=function(b,h,c,v){v||(v=b);var u=b[0]*h[0]+b[1]*h[1]+b[2]*h[2]+b[3]*h[3];if(1<=Math.abs(u))return v!==b&&(v[0]=b[0],v[1]=b[1],v[2]=b[2],v[3]=b[3]),v;var y=Math.acos(u);var C=Math.sqrt(1-u*u);if(.001>Math.abs(C))return v[0]=.5*b[0]+.5*h[0],
v[1]=.5*b[1]+.5*h[1],v[2]=.5*b[2]+.5*h[2],v[3]=.5*b[3]+.5*h[3],v;u=Math.sin((1-c)*y)/C;c=Math.sin(c*y)/C;v[0]=b[0]*u+h[0]*c;v[1]=b[1]*u+h[1]*c;v[2]=b[2]*u+h[2]*c;v[3]=b[3]*u+h[3]*c;return v};z.fromRotationMatrix=function(b,h){h||(h=z.create());var c=b[0]+b[4]+b[8];if(0<c){var v=Math.sqrt(c+1);h[3]=.5*v;v=.5/v;h[0]=(b[7]-b[5])*v;h[1]=(b[2]-b[6])*v;h[2]=(b[3]-b[1])*v}else{v=z.fromRotationMatrix.s_iNext=z.fromRotationMatrix.s_iNext||[1,2,0];c=0;b[4]>b[0]&&(c=1);b[8]>b[3*c+c]&&(c=2);var u=v[c],y=v[u];
v=Math.sqrt(b[3*c+c]-b[3*u+u]-b[3*y+y]+1);h[c]=.5*v;v=.5/v;h[3]=(b[3*y+u]-b[3*u+y])*v;h[u]=(b[3*u+c]+b[3*c+u])*v;h[y]=(b[3*y+c]+b[3*c+y])*v}return h};w.toQuat4=z.fromRotationMatrix;(function(){var b=w.create();z.fromAxes=function(h,c,v,u){b[0]=c[0];b[3]=c[1];b[6]=c[2];b[1]=v[0];b[4]=v[1];b[7]=v[2];b[2]=h[0];b[5]=h[1];b[8]=h[2];return z.fromRotationMatrix(b,u)}})();z.identity=function(b){b||(b=z.create());b[0]=0;b[1]=0;b[2]=0;b[3]=1;return b};z.fromAngleAxis=function(b,h,c){c||(c=z.create());b*=.5;
var v=Math.sin(b);c[3]=Math.cos(b);c[0]=v*h[0];c[1]=v*h[1];c[2]=v*h[2];return c};z.toAngleAxis=function(b,h){h||(h=b);var c=b[0]*b[0]+b[1]*b[1]+b[2]*b[2];0<c?(h[3]=2*Math.acos(b[3]),c=l.invsqrt(c),h[0]=b[0]*c,h[1]=b[1]*c,h[2]=b[2]*c):(h[3]=0,h[0]=1,h[1]=0,h[2]=0);return h};z.str=function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"};var B={create:function(b){var h=new k(4);b?(h[0]=b[0],h[1]=b[1],h[2]=b[2],h[3]=b[3]):h[0]=h[1]=h[2]=h[3]=0;return h},createFrom:function(b,h,c,v){var u=new k(4);
u[0]=b;u[1]=h;u[2]=c;u[3]=v;return u},set:function(b,h){h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];return h},identity:function(b){b||(b=B.create());b[0]=1;b[1]=0;b[2]=0;b[3]=1;return b},transpose:function(b,h){if(!h||b===h)return h=b[1],b[1]=b[2],b[2]=h,b;h[0]=b[0];h[1]=b[2];h[2]=b[1];h[3]=b[3];return h},determinant:function(b){return b[0]*b[3]-b[2]*b[1]},inverse:function(b,h){h||(h=b);var c=b[0],v=b[1],u=b[2];b=b[3];var y=c*b-u*v;if(!y)return null;y=1/y;h[0]=b*y;h[1]=-v*y;h[2]=-u*y;h[3]=c*y;return h},
multiply:function(b,h,c){c||(c=b);var v=b[0],u=b[1],y=b[2];b=b[3];c[0]=v*h[0]+u*h[2];c[1]=v*h[1]+u*h[3];c[2]=y*h[0]+b*h[2];c[3]=y*h[1]+b*h[3];return c},rotate:function(b,h,c){c||(c=b);var v=b[0],u=b[1],y=b[2];b=b[3];var C=Math.sin(h);h=Math.cos(h);c[0]=v*h+u*C;c[1]=v*-C+u*h;c[2]=y*h+b*C;c[3]=y*-C+b*h;return c},multiplyVec2:function(b,h,c){c||(c=h);var v=h[0];h=h[1];c[0]=v*b[0]+h*b[1];c[1]=v*b[2]+h*b[3];return c},scale:function(b,h,c){c||(c=b);var v=b[1],u=b[2],y=b[3],C=h[0];h=h[1];c[0]=b[0]*C;c[1]=
v*h;c[2]=u*C;c[3]=y*h;return c},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"}};a=a?"":"d";n["glMath"+a]=l;n["vec2"+a]={create:function(b){var h=new k(2);b?(h[0]=b[0],h[1]=b[1]):(h[0]=0,h[1]=0);return h},createFrom:function(b,h){var c=new k(2);c[0]=b;c[1]=h;return c},add:function(b,h,c){c||(c=h);c[0]=b[0]+h[0];c[1]=b[1]+h[1];return c},subtract:function(b,h,c){c||(c=h);c[0]=b[0]-h[0];c[1]=b[1]-h[1];return c},multiply:function(b,h,c){c||(c=h);c[0]=b[0]*h[0];c[1]=b[1]*h[1];return c},
divide:function(b,h,c){c||(c=h);c[0]=b[0]/h[0];c[1]=b[1]/h[1];return c},scale:function(b,h,c){c||(c=b);c[0]=b[0]*h;c[1]=b[1]*h;return c},dist:function(b,h){var c=h[0]-b[0];b=h[1]-b[1];return Math.sqrt(c*c+b*b)},dist2:function(b,h){var c=h[0]-b[0];b=h[1]-b[1];return c*c+b*b},set:function(b,h){h[0]=b[0];h[1]=b[1];return h},set2:function(b,h,c){c[0]=b;c[1]=h;return c},negate:function(b,h){h||(h=b);h[0]=-b[0];h[1]=-b[1];return h},normalize:function(b,h){h||(h=b);var c=b[0]*b[0]+b[1]*b[1];0<c?(c=Math.sqrt(c),
h[0]=b[0]/c,h[1]=b[1]/c):h[0]=h[1]=0;return h},cross:function(b,h,c){b=b[0]*h[1]-b[1]*h[0];if(!c)return b;c[0]=c[1]=0;c[2]=b;return c},length:function(b){var h=b[0];b=b[1];return Math.sqrt(h*h+b*b)},dot:function(b,h){return b[0]*h[0]+b[1]*h[1]},direction:function(b,h,c){c||(c=b);var v=b[0]-h[0];b=b[1]-h[1];h=v*v+b*b;if(!h)return c[0]=0,c[1]=0,c[2]=0,c;h=1/Math.sqrt(h);c[0]=v*h;c[1]=b*h;return c},lerp:function(b,h,c,v){v||(v=b);v[0]=b[0]+c*(h[0]-b[0]);v[1]=b[1]+c*(h[1]-b[1]);return v},str:function(b){return"["+
b[0]+", "+b[1]+"]"}};n["vec3"+a]=p;n["vec4"+a]={create:function(b){var h=new k(4);b?(h[0]=b[0],h[1]=b[1],h[2]=b[2],h[3]=b[3]):(h[0]=0,h[1]=0,h[2]=0,h[3]=0);return h},createFrom:function(b,h,c,v){var u=new k(4);u[0]=b;u[1]=h;u[2]=c;u[3]=v;return u},add:function(b,h,c){c||(c=h);c[0]=b[0]+h[0];c[1]=b[1]+h[1];c[2]=b[2]+h[2];c[3]=b[3]+h[3];return c},subtract:function(b,h,c){c||(c=h);c[0]=b[0]-h[0];c[1]=b[1]-h[1];c[2]=b[2]-h[2];c[3]=b[3]-h[3];return c},multiply:function(b,h,c){c||(c=h);c[0]=b[0]*h[0];c[1]=
b[1]*h[1];c[2]=b[2]*h[2];c[3]=b[3]*h[3];return c},divide:function(b,h,c){c||(c=h);c[0]=b[0]/h[0];c[1]=b[1]/h[1];c[2]=b[2]/h[2];c[3]=b[3]/h[3];return c},scale:function(b,h,c){c||(c=b);c[0]=b[0]*h;c[1]=b[1]*h;c[2]=b[2]*h;c[3]=b[3]*h;return c},dot:function(b,h){return b[0]*h[0]+b[1]*h[1]+b[2]*h[2]+b[3]*h[3]},set:function(b,h){h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];return h},set4:function(b,h,c,v,u){u[0]=b;u[1]=h;u[2]=c;u[3]=v;return u},negate:function(b,h){h||(h=b);h[0]=-b[0];h[1]=-b[1];h[2]=-b[2];
h[3]=-b[3];return h},lerp:function(b,h,c,v){v||(v=b);v[0]=b[0]+c*(h[0]-b[0]);v[1]=b[1]+c*(h[1]-b[1]);v[2]=b[2]+c*(h[2]-b[2]);v[3]=b[3]+c*(h[3]-b[3]);return v},str:function(b){return"["+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+"]"}};n["mat2"+a]=B;n["mat3"+a]=w;n["mat4"+a]=x;n["quat4"+a]=z});return r})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(r,n){function a(k,p){k%=p;return 0<=k?k:k+p}Object.defineProperty(n,"__esModule",{value:!0});n.C_INFINITY=
Number.POSITIVE_INFINITY;n.C_PI=Math.PI;n.C_2PI=2*n.C_PI;n.C_PI_BY_2=n.C_PI/2;n.C_RAD_TO_256=128/n.C_PI;n.C_256_TO_RAD=n.C_PI/128;n.C_DEG_TO_256=256/360;n.C_DEG_TO_RAD=n.C_PI/180;n.C_SQRT2=1.414213562;n.C_SQRT2_INV=1/n.C_SQRT2;var l=1/Math.LN2;n.positiveMod=a;n.radToByte=function(k){return a(k*n.C_RAD_TO_256,256)};n.degToByte=function(k){return a(k*n.C_DEG_TO_256,256)};n.log2=function(k){return Math.log(k)*l};n.sqr=function(k){return k*k};n.clamp=function(k,p,m){return Math.min(Math.max(k,p),m)};
n.interpolate=function(k,p,m){return k*(1-m)+p*m};n.between=function(k,p,m){return k>=p&&k<=m||k>=m&&k<=p}})},"esri/layers/vectorTiles/views/2d/engine/webgl/GlyphMosaic":function(){define("require exports dojo/has dojo/promise/all ./Rect ./RectangleBinPack ../../../webgl/Texture".split(" "),function(r,n,a,l,k,p,m){var e;a("stable-symbol-rendering")&&(e=new Set);return function(){function f(g,d,q){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};
this._textures=[];this._rangePromises=new Map;this.width=g;this.height=d;this._glyphSource=q;this._binPack=new p(g-4,d-4);this._glyphData.push(new Uint8Array(g*d));this._dirties.push(!0);this._textures.push(void 0);this._addDecorationGlyph()}f.prototype.getGlyphItems=function(g,d){for(var q=this,t=[],w=this._glyphSource,x=new Set,z=1/256,A=0;A<d.length;A++)x.add(Math.floor(d[A]*z));var B=[];x.forEach(function(b){if(256>=b){var h=g+b;q._rangePromises.has(h)?B.push(q._rangePromises.get(h)):(b=w.getRange(g,
b).then(function(){q._rangePromises["delete"](h)}).catch(function(){q._rangePromises["delete"](h);throw Error("Unable to query resource");}),q._rangePromises.set(h,b),B.push(b))}});return l(B).then(function(b){b=q._glyphIndex[g];b||(b={},q._glyphIndex[g]=b);if(a("stable-symbol-rendering")){e.clear();for(var h=0;h<d.length;h++){var c=d[h];e.add(c)}var v=[];x.forEach(function(D){v.push(D)});v.sort();c=[];for(h=0;h<v.length;h++)for(var u=v[h],y=0;256>y;++y)c.push(256*u+y)}else c=d;h=0;for(u=c;h<u.length;h++)if(c=
u[h],y=b[c]){if(!a("stable-symbol-rendering")||e.has(c))t[c]={rect:y.rect,metrics:y.metrics,page:y.page}}else if((y=w.getGlyph(g,c))&&y.metrics){var C=q._recordGlyph(y,c);b[c]={rect:C,metrics:y.metrics,tileIDs:null,page:q._currentPage};if(!a("stable-symbol-rendering")||e.has(c))t[c]={rect:C,metrics:y.metrics,page:q._currentPage};q._dirties[q._currentPage]=!0}return t})};f.prototype._recordGlyph=function(g,d){var q=g.metrics;if(0===q.width)q=new k(0,0,0,0);else{d=q.width+6;var t=q.height+6,w=d%4?4-
d%4:4,x=t%4?4-t%4:4;1===w&&(w=5);1===x&&(x=5);q=this._binPack.allocate(d+w,t+x);q.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new p(this.width-4,this.height-4),q=this._binPack.allocate(d+w,t+x));w=this._glyphData[this._currentPage];g=g.bitmap;var z=x=void 0;if(g)for(var A=0;A<t;A++){x=d*A;z=
this.width*(q.y+A+1)+q.x;for(var B=0;B<d;B++)w[z+B+1]=g[x+B]}}return q};f.prototype._addDecorationGlyph=function(){for(var g=[117,149,181,207,207,181,149,117],d=[],q=0;q<g.length;q++)for(var t=g[q],w=0;11>w;w++)d.push(t);g={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(d)};this._recordGlyph(g,0)};f.prototype.bind=function(g,d,q,t){this._textures[q]||(this._textures[q]=new m(g,{pixelFormat:6406,dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));
var w=this._textures[q];w.setSamplingMode(d);this._dirties[q]&&w.setData(this._glyphData[q]);g.bindTexture(w,t);this._dirties[q]=!1};f.prototype.dispose=function(){this._binPack=null;for(var g=0,d=this._textures;g<d.length;g++){var q=d[g];q&&q.dispose()}this._textures.length=0;this._glyphData.length=0};return f}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/RectangleBinPack":function(){define(["require","exports","./Rect"],function(r,n,a){return function(){function l(k,p){this._height=this._width=
0;this._free=[];this._width=k;this._height=p;this._free.push(new a(0,0,k,p))}Object.defineProperty(l.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});l.prototype.allocate=function(k,p){if(k>this._width||p>this._height)return new a;for(var m=null,e=-1,f=0;f<this._free.length;++f){var g=this._free[f];k<=g.width&&p<=g.height&&(null===m||g.y<=m.y&&g.x<=m.x)&&
(m=g,e=f)}if(null===m)return new a;this._free.splice(e,1);m.width<m.height?(m.width>k&&this._free.push(new a(m.x+k,m.y,m.width-k,p)),m.height>p&&this._free.push(new a(m.x,m.y+p,m.width,m.height-p))):(m.width>k&&this._free.push(new a(m.x+k,m.y,m.width-k,m.height)),m.height>p&&this._free.push(new a(m.x,m.y+p,k,m.height-p)));return new a(m.x,m.y,k,p)};l.prototype.release=function(k){for(var p=0;p<this._free.length;++p){var m=this._free[p];if(m.y===k.y&&m.height===k.height&&m.x+m.width===k.x)m.width+=
k.width;else if(m.x===k.x&&m.width===k.width&&m.y+m.height===k.y)m.height+=k.height;else if(k.y===m.y&&k.height===m.height&&k.x+k.width===m.x)m.x=k.x,m.width+=k.width;else if(k.x===m.x&&k.width===m.width&&k.y+k.height===m.y)m.y=k.y,m.height+=k.height;else continue;this._free.splice(p,1);this.release(k)}this._free.push(k)};return l}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/GlyphSource":function(){define(["require","exports","../../../../request","../../../../core/pbf","../../../../core/promiseUtils"],
function(r,n,a,l,k){var p=function(){function e(f){this._metrics=[];for(this._bitmaps=[];f.next();)switch(f.tag()){case 1:for(var g=f.getMessage();g.next();)switch(g.tag()){case 3:for(var d=g.getMessage(),q=void 0,t=void 0,w=void 0,x=void 0,z=void 0,A=void 0,B=void 0;d.next();)switch(d.tag()){case 1:q=d.getUInt32();break;case 2:t=d.getBytes();break;case 3:w=d.getUInt32();break;case 4:x=d.getUInt32();break;case 5:z=d.getSInt32();break;case 6:A=d.getSInt32();break;case 7:B=d.getUInt32();break;default:d.skip()}q&&
(this._metrics[q]={width:w,height:x,left:z,top:A,advance:B},this._bitmaps[q]=t);break;default:g.skip()}break;default:f.skip()}}e.prototype.getMetrics=function(f){return this._metrics[f]};e.prototype.getBitmap=function(f){return this._bitmaps[f]};return e}(),m=function(){function e(){this._ranges=[]}e.prototype.getRange=function(f){return this._ranges[f]};e.prototype.addRange=function(f,g){this._ranges[f]=g};return e}();return function(){function e(f){this._glyphInfo={};this._baseURL=f}e.prototype.getRange=
function(f,g){var d=this._getFontStack(f);if(d.getRange(g))return k.resolve();var q=256*g,t=q+255;f=this._baseURL.replace("{fontstack}",f).replace("{range}",q+"-"+t);return a(f,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(w){d.addRange(g,new p(new l(new Uint8Array(w.data),new DataView(w.data))))})};e.prototype.getGlyph=function(f,g){if(f=this._getFontStack(f)){var d=Math.floor(g/256);if(!(256<d)&&(f=f.getRange(d)))return{metrics:f.getMetrics(g),bitmap:f.getBitmap(g)}}};
e.prototype._getFontStack=function(f){var g=this._glyphInfo[f];g||(g=this._glyphInfo[f]=new m);return g};return e}()})},"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(r,n,a,l,k){return function(p,m){p=l.mixin({},{url:p,failOk:!0},m);"array-buffer"===m.responseType?(p.handleAs="arraybuffer",delete p.responseType):m.responseType&&(p.handleAs=m.responseType,delete p.responseType);null!==m.query&&(p.content=p.query,delete p.query);
if(m.hasOwnProperty("allowImageDataAccess")){var e={allowImageDataAccess:m.allowImageDataAccess};delete p.allowImageDataAccess}var f=new k(function(){g.isFulfilled()||g.cancel()});var g=a(p,e).then(function(d){f.resolve({data:d})}).catch(function(d){d&&null!=d.httpCode&&(d.details=d.details||{},d.details.httpStatus=d.httpCode);f.reject(d)});return f.promise}})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B){function b(K){K=new p(K);return(K.host+(K.port?":"+K.port:"")).toLowerCase()}function h(K){return this._xhr?this._xhr.getResponseHeader(K):null}function c(K,V){var Q=q.objectToQuery(K.content);Q&&(K.url+=(-1===K.url.indexOf("?")?"?":"\x26")+Q);if(2E3<K.url.length){if("data:"!==K.url.toLowerCase().slice(0,5))return K=new l,K.reject(k.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),K;if(3E6<K.url.length)return K=
new l,K.reject(k.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),K}var W=new Image;V.allowImageDataAccess&&(W.crossOrigin=K.withCredentials?"use-credentials":"anonymous");var N=!1,I=new l(function(S){N=!0;W.onload=W.onerror=W.onabort=null;W.src=""});V=function(S){W.onload=W.onerror=W.onabort=null;N||I.reject(Error("Unable to load the resource"))};W.onload=function(){W.onload=W.onerror=W.onabort=null;N||I.resolve(this)};W.onerror=V;W.onabort=
V;W.alt="";W.src=K.url;return I}function v(K,V,Q,W){var N=!1,I=!1,S=!1;if(z.isDefined(V))if(k.isObject(V)){N=!!V.useProxy;I=!!V.usePost;S=!!V.returnProgress;var Z=V.crossOrigin}else N=!!V;K=k.mixin({},K);delete K._credential;K._ssl&&(K.url=K.url.replace(/^http:/i,"https:"));10>x("ie")&&!P.test(K.url)&&(K.url=encodeURI(K.url));var ca=K.content,fa=K.url,ha=Q&&K.form,na=J;Z=z.isDefined(Z)?Z:na.useCors;K.load=function(va){if(va){if(va.error){var Ma=k.mixin(Error(),va.error);Ma.log=!!a.isDebug}else"error"===
va.status&&(Ma=k.mixin(Error(),va),Ma.log=!!a.isDebug);Ma&&(K.failOk=!Ma.log,z.isDefined(Ma.httpCode)||(Ma.httpCode=Ma.code))}return Ma||va};K.error=function(va,Ma){Ma&&Ma.xhr&&Ma.xhr.abort();va instanceof Error||(va=k.mixin(Error(),va));va.log=!!a.isDebug;K.failOk=!va.log;na.errorHandler(va,Ma);return va};K._token&&(K.content=K.content||{},K.content.token=K._token);var ma=0;if(ca&&fa){var ra=q.objectToQuery(ca);ma=ra.length+fa.length+1;x("esri-url-encodes-apostrophe")&&(ma=ra.replace(/'/g,"%27").length+
fa.length+1)}K.timeout=z.isDefined(K.timeout)?K.timeout:na.timeout;K.handleAs=K.handleAs||"json";try{var sa=Z&&A.canUseXhr(K.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(K.url),ba=A.hasSameOrigin(K.url,window.location.href)||sa,ea=I||Q||ma>na.postLength?!0:!1,ja=ba||-1===K.handleAs.indexOf("json")||!K.callbackParamName||Q?!1:!0,oa=A.getProxyRule(K.url)||na.alwaysUseProxy||N||!("image"===K.handleAs&&!V.allowImageDataAccess||ja&&!ea||ba)?!0:!1;Q&&!x("esri-file-upload")&&!oa&&sa&&(oa=!0);
if(oa){var ka=A.getProxyUrl(fa,Z);var Ca=ka.path;ka._xo&&(sa=!0);!ea&&Ca.length+1+ma>na.postLength&&(ea=!0);K.url=Ca+"?"+fa;if(ea)K.content=k.mixin(ka.query||{},ca);else{var Y=q.objectToQuery(k.mixin(ka.query||{},ca));Y&&(K.url+="?"+Y);K.content=null}}if(!ja||ea||oa){var aa=K.headers;!sa||aa&&aa.hasOwnProperty("X-Requested-With")||(aa=K.headers=aa||{},aa["X-Requested-With"]=null);if(Q){var L=K.callbackParamName||"callback.html",la=K.callbackElementName||"textarea",ua,T,Ja=ha.elements?ha.elements.length:
0;if(ca=K.content)for(ua in ca.token&&-1<fa.toLowerCase().indexOf("/sharing/servers/")&&(fa+=(-1===fa.indexOf("?")?"?":"\x26")+"token\x3d"+ca.token,K.url=oa?Ca+"?"+fa:fa,delete ca.token),ca){var Ea=ca[ua];if(z.isDefined(Ea)){var ia=null;for(T=0;T<Ja;T++){var Fa=ha.elements[T];if(Fa.name===ua){ia=Fa;break}}ia?ia.value=Ea:W?ha.append(ua,Ea):ha.appendChild(d.create("input",{type:"hidden",name:ua,value:Ea}))}}if(x("esri-file-upload")){n.forEach(ha.elements,function(va){va.name===L&&ha.removeChild(va)});
var Ka=W?ha:new FormData(ha);if(11<=x("safari")&&"entries"in Ka&&"delete"in Ka){W=[];for(var pa=Ka.entries(),ya=pa.next();!ya.done;){var Ba=ya.value;Ba[1]instanceof File&&""===Ba[1].name&&W.push(Ba[0]);ya=pa.next()}W.forEach(function(va){Ka.delete(va)})}K.contentType=!1;K.postData=Ka;delete K.form}else{ha.enctype="multipart/form-data";9>x("ie")&&(ha.encoding="multipart/form-data");ha.method="post";n.some(ha.elements,function(va){return va.name===L})||ha.appendChild(d.create("input",{type:"hidden",
name:L,value:la}));if(-1!==fa.toLowerCase().indexOf("addattachment")||-1!==fa.toLowerCase().indexOf("updateattachment"))fa+=(-1===fa.indexOf("?")?"?":"\x26")+L+"\x3d"+la,K.url=oa?Ca+"?"+fa:fa;delete K.content}}if(sa&&!K.hasOwnProperty("withCredentials")&&"with-credentials"===J.useCors){fa=oa?Ca:fa;var Aa=A.canUseXhr(fa,!0),ta=-1<Aa?J.corsEnabledServers[Aa]:null;if(ta&&ta.hasOwnProperty("withCredentials"))ta.withCredentials&&(K.withCredentials=!0);else if(t.id){var za=t.id.findServerInfo(fa);za&&za.webTierAuth&&
(K.withCredentials=!0)}}K=G?G(K):K;if("image"===K.handleAs)return c(K,V);if(ea){if(Q&&!x("esri-file-upload")){var wa=new l(function(){Ia.cancel()});var Ia=g.post(K.url,K).then(function(va){wa.resolve(va)}).otherwise(function(va){wa.reject(va)});wa.addCallback(function(va){return K.load(va)});wa.addErrback(function(va){return K.error(va)});return wa}!oa&&x("safari")&&(K.url+=(-1===K.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+O++);if(S){K.uploadProgress=!0;K.data=K.postData;K.query=
K.content;wa=new l(function(){Ha.cancel()});var Ha=e.post(K.url,K).then(function(va){wa.resolve(va)},function(va){wa.reject(va)},function(va){wa.progress({transferType:va.transferType,loaded:va.loaded,total:va.total})});wa.addCallback(function(va){return K.load(va)});wa.addErrback(function(va){return K.error(va)});return wa}return m.post(K)}return m.get(K)}K=G?G(K):K;K.jsonp=K.callbackParamName;K.query=K.content;wa=new l(function(){La.cancel()});var La=f.get(K.url,K).then(function(va){wa.resolve(va)}).otherwise(function(va){wa.reject(va)});
wa.addCallback(function(va){return K.load(va)});wa.addErrback(function(va){return K.error(va)});return wa}catch(va){return wa=new l,wa.errback(K.error(va)),wa}}function u(K){var V=J.corsStatus,Q=A.canUseXhr(K,!0);-1<Q&&J.corsEnabledServers.splice(Q,1);var W=new l;W.reject({log:!!a.isDebug});V[b(K)]=W.promise;return Q}function y(K){var V=J.corsStatus;try{var Q=b(K);if(J.corsDetection&&J.useCors&&x("esri-cors")&&K&&-1!==K.toLowerCase().indexOf("/rest/services")&&!A.hasSameOrigin(K,window.location.href)&&
!A.canUseXhr(K)){if(V[Q]&&!V[Q].isCanceled())return V[Q];var W=new l(B._dfdCanceller);V[Q]=W.promise;var N=m.get({url:K.substring(0,K.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*J.corsDetectionTimeout});W._pendingDfd=N;N.then(function(I){I?(A.canUseXhr(K)||J.corsEnabledServers.push(Q),W.resolve()):W.reject()},function(I){W.reject(I)});return W.promise}}catch(I){}return U}function C(K){G=K}function D(K,V,Q,W){function N(ba){ba._pendingDfd=
v(Q,W,na,ha);if(!ba._pendingDfd){ba.ioArgs=ba._pendingDfd&&ba._pendingDfd.ioArgs;var ea=Error("Deferred object is missing");ea.log=!!a.isDebug;ba.errback(ea);ba._pendingDfd=null;return ba}ba._pendingDfd.addCallback(function(ja){if(!ja)return ja;var oa=ba._pendingDfd&&ba._pendingDfd.ioArgs&&ba._pendingDfd.ioArgs.xhr;if(!oa)return ja;if(oa=oa.getResponseHeader("Content-Type"))if(oa=oa.toLowerCase(),-1===oa.indexOf("text/plain")&&-1===oa.indexOf("application/json"))return ja;if(ja instanceof ArrayBuffer&&
750>=ja.byteLength)oa=new Blob([ja]);else if(ja instanceof Blob&&750>=ja.size)oa=ja;else return ja;var ka=new l,Ca=new FileReader;Ca.readAsText(oa);Ca.onloadend=function(){if(!Ca.error)try{var Y=JSON.parse(Ca.result);if(Y.error)var aa=Y.error}catch(L){}aa?(aa=k.mixin(Error(),aa),aa.log=!!a.isDebug,null==aa.httpCode&&(aa.httpCode=aa.code),ka.reject(aa)):ka.resolve(ja)};return ka.promise}).addCallback(function(ja){ba.ioArgs=ba._pendingDfd&&ba._pendingDfd.ioArgs;W.returnFullResponse&&(ja={data:ja,_xhr:ba.ioArgs&&
ba.ioArgs.xhr,getHeader:h});ba.callback(ja);ba._pendingDfd=null}).addErrback(function(ja){if(ja){var oa=ja.code;var ka=ja.subcode;var Ca=(Ca=ja.messageCode)&&Ca.toUpperCase()}if(ja&&403==oa&&(4==ka||ja.message&&-1<ja.message.toLowerCase().indexOf("ssl")&&-1===ja.message.toLowerCase().indexOf("permission"))){if(!Q._ssl){Q._ssl=Q._sslFromServer=!0;D(ba,!0,Q,W);return}}else if(ja&&415==ja.status){if(u(Q.url),!Q._err415){Q._err415=1;D(ba,!0,Q,W);return}}else if(t.id&&-1!==n.indexOf(t.id._errorCodes,oa)&&
!t.id._isPublic(Q.url)&&!S&&(403!=oa||-1===n.indexOf(R,Ca)&&(!z.isDefined(ka)||2==ka&&Q._token))){ba._pendingDfd=t.id.getCredential(Q.url,{token:Q._token,error:ja});ba._pendingDfd.addCallback(function(Y){Q._token=Y.token;Q._credential=Y;Q._ssl=Q._sslFromServer||Y.ssl;D(ba,!0,Q,W)}).addErrback(function(Y){ba.errback(Y);ba._pendingDfd=null});return}ba.ioArgs=ba._pendingDfd&&ba._pendingDfd.ioArgs;ba.isFulfilled()||ba.errback(ja);ba._pendingDfd=null}).then(null,null,function(ja){ba.progress(ja)})}var I=
Q.form,S=W.disableIdentityLookup,Z=W._preLookup,ca=!1;if(x("esri-workers")&&!1!==J.useWorkers)if(!0===W.useWorkers||!0===J.useWorkers)ca=!0;else if(W.workerOptions){var fa=W.workerOptions;if(fa.callback||fa.worker&&fa.worker.worker instanceof Worker)ca=!0}var ha=I&&x("esri-file-upload")&&I instanceof FormData,na=I&&(I.elements?n.some(I.elements,function(ba){return"file"===ba.type}):ha),ma=-1!==Q.url.toLowerCase().indexOf("token\x3d")||Q.content&&Q.content.token||na&&n.some(I.elements,function(ba){return"token"===
ba.name})?1:0;if(!V){K.addCallback(function(ba){if((/\/sharing\/rest\/accounts\/self/i.test(Q.url)||/\/sharing\/rest\/portals\/self/i.test(Q.url))&&!ma&&!Q._token&&ba.user&&ba.user.username){J.webTierAuthServers.push(b(Q.url));ba=J.corsEnabledServers;var ea=A.canUseXhr(Q.url,!0),ja={host:b(Q.url),withCredentials:!0};if(-1===ea)ba.push(ja);else{var oa=ba[ea];oa instanceof RegExp?(ja.host=oa,ba.splice(ea,1,ja)):"object"===typeof oa?oa.withCredentials=!0:ba.splice(ea,1,ja)}}if(ba=Q._credential)if(ea=
(ea=t.id.findServerInfo(ba.server))&&ea.owningSystemUrl)ea=ea.replace(/\/?$/,"/sharing"),(ba=t.id.findCredential(ea,ba.userId))&&-1===t.id._getIdenticalSvcIdx(ea,ba)&&ba.resources.splice(0,0,ea)});K.addBoth(function(ba){delete Q._credential;!ba||x("ie")&&ba.nodeType||(ba._ssl=Q._ssl)});var ra=Q.load,sa=Q.error;ra&&K.addCallback(function(ba){var ea=K._pendingDfd;ea=ea&&ea.ioArgs;return ra.call(ea&&ea.args,ba,ea)});sa&&K.addErrback(function(ba){var ea=K._pendingDfd;ea=ea&&ea.ioArgs;return sa.call(ea&&
ea.args,ba,ea)})}!t.id||ma||Q._token||t.id._isPublic(Q.url)||S&&!Z||!(V=t.id.findCredential(Q.url))||(Q._token=V.token,Q._ssl=V.ssl);ca?W.workerOptions&&W.workerOptions.worker?(F||(F=m),m=W.workerOptions.worker,N(K)):r(["./workers/RequestClient"],function(ba){F||(F=m);if(W.workerOptions){var ea=W.workerOptions;m=ba.getClient(ea.callback,ea.cbFunction)}else m=ba.getClient();N(K)}):(F&&(m=F,F=null),N(K));return K}function E(K,V){K.url=A.fixUrl(K.url);V=V||{};var Q=new l(B._dfdCanceller),W=y(K.url);
Q._pendingDfd=W;W.always(function(N){N&&"cancel"===N.dojoType?Q.reject(N):D(Q,!1,K,V)});return Q}var F=null,G,J=w.defaults.io,R=["COM_0056","COM_0057","SB_0008"],O=0,P=/%[0-9A-F]{2}/i,U=function(){var K=new l;K.resolve();return K.promise}();E._makeRequest=v;E._processRequest=D;E._disableCors=u;E._detectCors=y;E.setRequestPreCallback=C;t.request=E;t._makeRequest=v;t._processRequest=D;t._disableCors=u;t._detectCors=y;t.setRequestPreCallback=C;return E})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),
function(r,n,a,l,k,p){function m(){var A=document.createElement("iframe");A.name="esri_core_jsonp_iframe";A.style.display="none";A.setAttribute("sandbox","allow-scripts");if(!p("ff")&&"srcdoc"in A){var B=r.toUrl("dojo/dojo.js"),b=k.replace("../../../dojo/dojo.js",B);B=B.slice(0,-7);b=b.replace("../../../dojo/",B);A.srcdoc=b}else b=r.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===b.indexOf("https:")&&(b=b.replace("https:","http:")),A.src=b;document.body.appendChild(A);return A}function e(){var A=
new MessageChannel;A.port1.addEventListener("message",f);A.port1.start();return A}function f(A){var B=A.data;if("ready"===B){B=0;for(var b=x;B<b.length;B++)A=b[B],d(A,t);x=null}else if(A=z[B.id])delete z[B.id],B.isError?A.dfd.reject(Error(B.message)):A.dfd.resolve(B.response)}function g(A,B){A.addEventListener("load",function(){A.contentWindow.postMessage("init","*",[B.port2])})}function d(A,B){z[A.message.id]=A;B.port1.postMessage(A.message)}Object.defineProperty(n,"__esModule",{value:!0});var q,
t,w=0,x=[],z={};n.get=function(A,B){if(!p("esri-script-sandbox"))return l.get(A,B);var b=null;B&&(b={jsonp:B.jsonp,preventCache:B.preventCache,query:B.query,timeout:B.timeout});B=new a(function(){if(x){var c=x.indexOf(h);-1<c&&x.splice(c,1)}else h.message.id in z&&delete z[h.message.id]});var h={dfd:B,message:{id:"id"+(++w+Math.random()),url:A,options:b}};q||(q=m(),t=e(),g(q,t));x?x.push(h):d(h,t);return B.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d){function q(y,C){y.canDelete&&A._remove(y.id,C.options.frameDoc,!0)}function t(y){u&&u.length&&(k.forEach(u,function(C){A._remove(C.id,C.frameDoc);C.frameDoc=null}),u=[]);return y.options.jsonp?!y.data:!0}function w(y){return!!this.scriptLoaded}function x(y){return(y=y.options.checkString)&&eval("typeof("+y+') !\x3d\x3d "undefined"')}function z(y,C){if(this.canDelete){var D=this.response.options;u.push({id:this.id,frameDoc:D.ioArgs?D.ioArgs.frameDoc:D.frameDoc});D.ioArgs&&
(D.ioArgs.frameDoc=null);D.frameDoc=null}C?this.reject(C):this.resolve(y)}function A(y,C,D){var E=a.parseArgs(y,a.deepCopy({},C));y=E.url;C=E.options;var F=a.deferred(E,q,t,C.jsonp?null:C.checkString?x:w,z);p.mixin(F,{id:B+b++,canDelete:!1});C.jsonp&&((new RegExp("[?\x26]"+C.jsonp+"\x3d")).test(y)||(y+=(~y.indexOf("?")?"\x26":"?")+C.jsonp+"\x3d"+(C.frameDoc?"parent.":"")+B+"_callbacks."+F.id),F.canDelete=!0,v[F.id]=function(R){E.data=R;F.handleResponse(E)});a.notify&&a.notify.emit("send",E,F.promise.cancel);
if(!C.canAttach||C.canAttach(F)){var G=A._attach(F.id,y,C.frameDoc,function(R){if(!(R instanceof Error)){var O=Error("Error loading "+(R.target?R.target.src:"script"));O.source=R;R=O}F.reject(R);A._remove(F.id,C.frameDoc,!0)});if(!C.jsonp&&!C.checkString)var J=m(G,h,function(R){if("load"===R.type||c.test(G.readyState))J.remove(),F.scriptLoaded=R})}n(F);return D?F:F.promise}g.add("script-readystatechange",function(y,C){return"undefined"!==typeof C.createElement("script").onreadystatechange&&("undefined"===
typeof y.opera||"[object Opera]"!==y.opera.toString())});var B=r.id.replace(/[\/\.\-]/g,"_"),b=0,h=g("script-readystatechange")?"readystatechange":"load",c=/complete|loaded/,v=l.global[B+"_callbacks"]={},u=[];A.get=A;A._attach=function(y,C,D,E){D=D||d.doc;var F=D.createElement("script");if(E)m.once(F,"error",E);F.type="text/javascript";try{F.src=C}catch(G){E&&E(F)}F.id=y;F.async=!0;F.charset="utf-8";return D.getElementsByTagName("head")[0].appendChild(F)};A._remove=function(y,C,D){f.destroy(e.byId(y,
C));v[y]&&(D?v[y]=function(){delete v[y]}:delete v[y])};A._callbacksProperty=B+"_callbacks";return A})},"esri/core/sniff":function(){define(["../sniff"],function(r){return r})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),function(r,n,a,l,k,p,m,e,f,g,d,q){function t(c){return!this.isFulfilled()}function w(c){return!!this._finished}
function x(c,v){if(!v)try{var u=c.options,y=A.doc(A._frame),C=u.handleAs;if("html"!==C){if("xml"===C)if("html"===y.documentElement.tagName.toLowerCase()){e("a",y.documentElement).orphan();var D=y.documentElement.innerText||y.documentElement.textContent;D=D.replace(/>\s+</g,"\x3e\x3c");c.text=p.trim(D)}else c.data=y;else c.text=y.getElementsByTagName("textarea")[0].value;k(c)}else c.data=y}catch(E){v=E}v?this.reject(v):this._finished?this.resolve(c):this.reject(Error("Invalid dojo/request/iframe request state"))}
function z(c){this._callNext()}function A(c,v,u){var y=l.parseArgs(c,l.deepCreate(h,v),!0);c=y.url;v=y.options;if("GET"!==v.method&&"POST"!==v.method)throw Error(v.method+" not supported by dojo/request/iframe");A._frame||(A._frame=A.create(A._iframeName,b+"();"));c=l.deferred(y,null,t,w,x,z);c._callNext=function(){this._calledNext||(this._calledNext=!0,A._currentDfd=null,A._fireNextRequest())};c._legacy=u;A._dfdQueue.push(c);A._fireNextRequest();a(c);return u?c:c.promise}var B=r.id.replace(/[\/\.\-]/g,
"_"),b=B+"_onload";q.global[b]||(q.global[b]=function(){var c=A._currentDfd;if(c){var v=g.byId(c.response.options.form)||c._tmpForm;if(v){for(var u=c._contentToClean,y=0;y<u.length;y++)for(var C=u[y],D=0;D<v.childNodes.length;D++){var E=v.childNodes[D];if(E.name===C){d.destroy(E);break}}c._originalAction&&v.setAttribute("action",c._originalAction);c._originalMethod&&(v.setAttribute("method",c._originalMethod),v.method=c._originalMethod);c._originalTarget&&(v.setAttribute("target",c._originalTarget),
v.target=c._originalTarget)}c._tmpForm&&(d.destroy(c._tmpForm),delete c._tmpForm);c._finished=!0}else A._fireNextRequest()});var h={method:"POST"};A.create=function(c,v,u){if(q.global[c])return q.global[c];if(q.global.frames[c])return q.global.frames[c];u||(f("config-useXDomain")&&f("config-dojoBlankHtmlUrl"),u=f("config-dojoBlankHtmlUrl")||n.toUrl("dojo/resources/blank.html"));v=d.place('\x3ciframe id\x3d"'+c+'" name\x3d"'+c+'" src\x3d"'+u+'" onload\x3d"'+v+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',
q.body());return q.global[c]=v};A.doc=function(c){if(c.contentDocument)return c.contentDocument;var v=c.name;if(v){var u=q.doc.getElementsByTagName("iframe");if(c.document&&u[v].contentWindow&&u[v].contentWindow.document)return u[v].contentWindow.document;if(q.doc.frames[v]&&q.doc.frames[v].document)return q.doc.frames[v].document}return null};A.setSrc=function(c,v,u){c=q.global.frames[c.name];c.contentWindow&&(c=c.contentWindow);try{u?c.location.replace(v):c.location=v}catch(y){}};A._iframeName=
B+"_IoIframe";A._notifyStart=function(){};A._dfdQueue=[];A._currentDfd=null;A._fireNextRequest=function(){try{if(!A._currentDfd&&A._dfdQueue.length){do var c=A._currentDfd=A._dfdQueue.shift();while(c&&(c.canceled||c.isCanceled&&c.isCanceled())&&A._dfdQueue.length);if(!c||c.canceled||c.isCanceled&&c.isCanceled())A._currentDfd=null;else{var v=c.response,u=v.options,y=c._contentToClean=[],C=g.byId(u.form),D=l.notify,E=u.data||null;if(!c._legacy&&"POST"===u.method&&!C)C=c._tmpForm=d.create("form",{name:B+
"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},q.body());else if("GET"===u.method&&C&&-1<v.url.indexOf("?")){var F=v.url.slice(v.url.indexOf("?")+1);E=p.mixin(m.queryToObject(F),E)}if(C){if(!c._legacy){var G=C;do G=G.parentNode;while(G&&G!==q.doc.documentElement);G||(C.style.position="absolute",C.style.left="-1000px",C.style.top="-1000px",q.body().appendChild(C));C.name||(C.name=B+"_form")}if(E){G=function(V,Q){d.create("input",{type:"hidden",name:V,value:Q},C);y.push(V)};for(var J in E){var R=
E[J];if(p.isArray(R)&&1<R.length)for(F=0;F<R.length;F++)G(J,R[F]);else{var O=e("input[name\x3d'"+J+"']",C);-1==O.indexOf()?G(J,R):O.val(R)}}}var P=C.getAttributeNode("action"),U=C.getAttributeNode("method"),K=C.getAttributeNode("target");v.url&&(c._originalAction=P?P.value:null,P?P.value=v.url:C.setAttribute("action",v.url));c._legacy?U&&U.value||(U?U.value=u.method:C.setAttribute("method",u.method)):(c._originalMethod=U?U.value:null,U?U.value=u.method:C.setAttribute("method",u.method));c._originalTarget=
K?K.value:null;K?K.value=A._iframeName:C.setAttribute("target",A._iframeName);C.target=A._iframeName;D&&D.emit("send",v,c.promise.cancel);A._notifyStart(v);C.submit()}else u="",v.options.data&&(u=v.options.data,"string"!==typeof u&&(u=m.objectToQuery(u))),G=v.url+(-1<v.url.indexOf("?")?"\x26":"?")+u,D&&D.emit("send",v,c.promise.cancel),A._notifyStart(v),A.setSrc(A._frame,G,!0)}}}catch(V){c.reject(V)}};l.addCommonMethods(A,["GET","POST"]);return A})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),
function(r,n,a,l,k){function p(f){for(;f.childNodes[0]&&1==f.childNodes[0].nodeType;)f=f.childNodes[0];return f}function m(f,g){"string"==typeof f?(f=l.toDom(f,g&&g.ownerDocument),11==f.nodeType&&(f=f.childNodes[0])):1==f.nodeType&&f.parentNode&&(f=f.cloneNode(!1));return f}var e=r.NodeList;n.extend(e,{_placeMultiple:function(f,g){f="string"==typeof f||f.nodeType?r(f):f;for(var d=[],q=0;q<f.length;q++)for(var t=f[q],w=this.length,x=w-1,z;z=this[x];x--)0<q&&(z=this._cloneNode(z),d.unshift(z)),x==w-
1?l.place(z,t,g):t.parentNode.insertBefore(z,t),t=z;d.length&&(d.unshift(0),d.unshift(this.length-1),Array.prototype.splice.apply(this,d));return this},innerHTML:function(f){return arguments.length?this.addContent(f,"only"):this[0].innerHTML},text:function(f){if(arguments.length){for(var g=0,d;d=this[g];g++)1==d.nodeType&&k.set(d,"textContent",f);return this}var q="";for(g=0;d=this[g];g++)q+=k.get(d,"textContent");return q},val:function(f){if(arguments.length){for(var g=n.isArray(f),d=0,q;q=this[d];d++){var t=
q.nodeName.toUpperCase(),w=q.type,x=g?f[d]:f;if("SELECT"==t)for(t=q.options,w=0;w<t.length;w++){var z=t[w];z.selected=q.multiple?-1!=a.indexOf(f,z.value):z.value==x}else"checkbox"==w||"radio"==w?q.checked=q.value==x:q.value=x}return this}if((q=this[0])&&1==q.nodeType){f=q.value||"";if("SELECT"==q.nodeName.toUpperCase()&&q.multiple){f=[];t=q.options;for(w=0;w<t.length;w++)z=t[w],z.selected&&f.push(z.value);f.length||(f=null)}return f}},append:function(f){return this.addContent(f,"last")},appendTo:function(f){return this._placeMultiple(f,
"last")},prepend:function(f){return this.addContent(f,"first")},prependTo:function(f){return this._placeMultiple(f,"first")},after:function(f){return this.addContent(f,"after")},insertAfter:function(f){return this._placeMultiple(f,"after")},before:function(f){return this.addContent(f,"before")},insertBefore:function(f){return this._placeMultiple(f,"before")},remove:e.prototype.orphan,wrap:function(f){if(this[0]){f=m(f,this[0]);for(var g=0,d;d=this[g];g++){var q=this._cloneNode(f);d.parentNode&&d.parentNode.replaceChild(q,
d);p(q).appendChild(d)}}return this},wrapAll:function(f){if(this[0]){f=m(f,this[0]);this[0].parentNode.replaceChild(f,this[0]);f=p(f);for(var g=0,d;d=this[g];g++)f.appendChild(d)}return this},wrapInner:function(f){if(this[0]){f=m(f,this[0]);for(var g=0;g<this.length;g++){var d=this._cloneNode(f);this._wrap(n._toArray(this[g].childNodes),null,this._NodeListCtor).wrapAll(d)}}return this},replaceWith:function(f){f=this._normalize(f,this[0]);for(var g=0,d;d=this[g];g++)this._place(f,d,"before",0<g),d.parentNode.removeChild(d);
return this},replaceAll:function(f){f=r(f);for(var g=this._normalize(this,this[0]),d=0,q;q=f[d];d++)this._place(g,q,"before",0<d),q.parentNode.removeChild(q);return this},clone:function(){for(var f=[],g=0;g<this.length;g++)f.push(this._cloneNode(this[g]));return this._wrap(f,this,this._NodeListCtor)}});e.prototype.html||(e.prototype.html=e.prototype.innerHTML);return e})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(r,n,a){n={_dfdCanceller:function(l){l.canceled=
!0;var k=l._pendingDfd;if(!l.isFulfilled()&&k&&!k.isFulfilled()){k.cancel();var p=k.results&&k.results[1]}l._pendingDfd=null;return p},_fixDfd:function(l){var k=l.then;l.then=function(p,m,e){if(p){var f=p;p=function(g){return g&&g._argsArray?f.apply(null,g):f(g)}}return k.call(this,p,m,e)};return l},_resDfd:function(l,k,p){var m=k.length;1===m?p?l.errback(k[0]):l.callback(k[0]):1<m?(k._argsArray=!0,l.callback(k)):l.callback()}};r.mixin(a,n);return n})},"esri/layers/vectorTiles/core/pbf":function(){define(["require",
"exports"],function(r,n){return function(){function a(l,k,p,m){this._tag=0;this._dataType=99;this._data=l;this._dataView=k;this._pos=p||0;this._end=m||l.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};a.prototype.next=function(l){for(;;){if(this._pos===this._end)return!1;var k=this._decodeVarint();this._tag=k>>3;this._dataType=k&7;if(!l||l===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=
this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){var l=4294967295;l=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return l;l=(l|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return l;l=(l|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return l;l=(l|(this._data[this._pos]&127)<<21)>>>
0;if(128>this._data[this._pos++])return l;l=(l|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return l};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){var l=this.getUInt32();return l>>>1^-(l&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var l=0!==this._data[this._pos];this._skip(1);return l};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var l=
this._dataView,k=this._pos;l=l.getUint32(k,!0)+4294967296*l.getUint32(k+4,!0);this._skip(8);return l};a.prototype.getSFixed64=function(){var l=this._dataView,k=this._pos;l=l.getUint32(k,!0)+4294967296*l.getInt32(k+4,!0);this._skip(8);return l};a.prototype.getDouble=function(){var l=this._dataView.getFloat64(this._pos,!0);this._skip(8);return l};a.prototype.getFixed32=function(){var l=this._dataView.getUint32(this._pos,!0);this._skip(4);return l};a.prototype.getSFixed32=function(){var l=this._dataView.getInt32(this._pos,
!0);this._skip(4);return l};a.prototype.getFloat=function(){var l=this._dataView.getFloat32(this._pos,!0);this._skip(4);return l};a.prototype.getString=function(){var l=this._getLength(),k=this._pos;k=this._toString(this._data,k,k+l);this._skip(l);return k};a.prototype.getBytes=function(){var l=this._getLength(),k=this._pos;k=this._toBytes(this._data,k,k+l);this._skip(l);return k};a.prototype.getMessage=function(){var l=this._getLength(),k=this._pos;k=new a(this._data,this._dataView,k,k+l);this._skip(l);
return k};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(l){if(this._pos+l>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=l};a.prototype._decodeVarint=function(){var l=this._data,k=this._pos,p=0;if(10<=this._end-k){var m=l[k++];p|=m&127;if(0!==(m&128)&&(m=l[k++],p|=
(m&127)<<7,0!==(m&128)&&(m=l[k++],p|=(m&127)<<14,0!==(m&128)&&(m=l[k++],p|=(m&127)<<21,0!==(m&128)&&(m=l[k++],p+=268435456*(m&127),0!==(m&128)&&(m=l[k++],p+=34359738368*(m&127),0!==(m&128)&&(m=l[k++],p+=4398046511104*(m&127),0!==(m&128)&&(m=l[k++],p+=562949953421312*(m&127),0!==(m&128)&&(m=l[k++],p+=72057594037927936*(m&127),0!==(m&128)&&(m=l[k++],p+=0x7fffffffffffffff*(m&127),0!==(m&128)))))))))))throw Error("Varint too long!");}else{for(var e=1;k!==this._end;){m=l[k];if(0===(m&128))break;++k;p+=
(m&127)*e;e*=128}if(k===this._end)throw Error("Varint overrun!");++k;p+=m*e}this._pos=k;return p};a.prototype._decodeSVarint=function(){var l=this._decodeVarint();return l%2?-(l+1)/2:l/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(l,k,p){var m="",e="";for(p=Math.min(this._end,p);k<p;++k){var f=l[k];f&128?e+="%"+f.toString(16):(m+=decodeURIComponent(e)+String.fromCharCode(f),e="")}e.length&&
(m+=decodeURIComponent(e));return m};a.prototype._toBytes=function(l,k,p){p=Math.min(this._end,p);return new Uint8Array(l.buffer,k,p-k)};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/SpriteMosaic":function(){define("require exports ./GeometryUtils ./Rect ./RectangleBinPack ../../../webgl/Texture".split(" "),function(r,n,a,l,k,p){return function(){function m(e,f,g){void 0===g&&(g=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=
this._currentPage=this._maxItemSize=0;this._mosaicRects=new Map;this._spriteCopyQueue=[];this.pixelRatio=1;this._pageWidth=e;this._pageHeight=f;0<g&&(this._maxItemSize=g);this.pixelRatio=window.devicePixelRatio|1;this._binPack=new k(this._pageWidth,this._pageHeight);this._mosaicsData[0]=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}m.prototype.getWidth=function(e){return e>=
this._size.length?-1:this._size[e][0]};m.prototype.getHeight=function(e){return e>=this._size.length?-1:this._size[e][1]};m.prototype.getPage=function(e){return e<this._textures.length?this._textures[e]:null};m.prototype.has=function(e){return this._mosaicRects.has(e)};Object.defineProperty(m.prototype,"itemCount",{get:function(){return this._mosaicRects.size},enumerable:!0,configurable:!0});m.prototype.getSpriteItem=function(e){return this._mosaicRects.get(e)};m.prototype.addSpriteItem=function(e,
f,g,d,q,t){if(this._mosaicRects.has(e))return this._mosaicRects.get(e);var w=this._allocateImage(f[0],f[1]),x=w[0],z=w[1];w=w[2];if(0>=x.width||0>=x.height)return null;g={rect:x,width:f[0],height:f[1],anchorX:g[0],anchorY:g[1],sdf:t,pixelRatio:1,page:z};this._mosaicRects.set(e,g);this._copy({rect:x,spriteSize:f,spriteData:d,page:z,pageSize:w,repeat:q,sdf:t});return g};m.prototype.hasItemsToProcess=function(){return 0!==this._spriteCopyQueue.length};m.prototype.processNextItem=function(){var e=this._spriteCopyQueue.pop();
e&&this._copy(e)};m.prototype.getSpriteItems=function(e){for(var f={},g=0;g<e.length;g++){var d=e[g];f[d]=this.getSpriteItem(d)}return f};m.prototype.getMosaicItemPosition=function(e,f){f=(e=this.getSpriteItem(e))&&e.rect;if(!f)return null;f.width=e.width;f.height=e.height;return{size:[e.width,e.height],tl:[(f.x+1)/this._size[e.page][0],(f.y+1)/this._size[e.page][1]],br:[(f.x+1+e.width)/this._size[e.page][0],(f.y+1+e.height)/this._size[e.page][1]],page:e.page}};m.prototype.bind=function(e,f,g,d){void 0===
g&&(g=0);void 0===d&&(d=0);this._textures[g]||(this._textures[g]=new p(e,{pixelFormat:6408,dataType:5121,width:this._size[g][0],height:this._size[g][1]},new Uint8Array(this._mosaicsData[g].buffer)));var q=this._textures[g];q.setSamplingMode(f);this._dirties[g]&&(q.setData(new Uint8Array(this._mosaicsData[g].buffer)),q.generateMipmap());e.bindTexture(q,d);this._dirties[g]=!1};m._copyBits=function(e,f,g,d,q,t,w,x,z,A,B){var b=d*f+g;w=x*t+w;if(B)for(w-=t,B=-1;B<=A;B++,b=((B+A)%A+d)*f+g,w+=t)for(x=-1;x<=
z;x++)q[w+x]=e[b+(x+z)%z];else for(B=0;B<A;B++){for(x=0;x<z;x++)q[w+x]=e[b+x];b+=f;w+=t}};m.prototype._copy=function(e){e.page>=this._mosaicsData.length||(m._copyBits(e.spriteData,e.spriteSize[0],0,0,this._mosaicsData[e.page],e.pageSize[0],e.rect.x+1,e.rect.y+1,e.spriteSize[0],e.spriteSize[1],e.repeat),this._dirties[e.page]=!0)};m.prototype._allocateImage=function(e,f){e+=2;f+=2;var g=Math.max(e,f);if(this._maxItemSize&&this._maxItemSize<g){g=Math.pow(2,Math.ceil(a.log2(e)));var d=Math.pow(2,Math.ceil(a.log2(f)));
e=new l(0,0,e,f);this._mosaicsData.push(new Uint32Array(g*d));this._dirties.push(!0);this._size.push([g,d]);this._textures.push(void 0);return[e,this._mosaicsData.length-1,[g,d]]}g=this._binPack.allocate(e+(e%4?4-e%4:0),f+(f%4?4-f%4:0));return 0>=g.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,
this._pageHeight]),this._textures.push(void 0),this._binPack=new k(this._pageWidth,this._pageHeight),this._allocateImage(e,f)):[g,this._currentPage,[this._pageWidth,this._pageHeight]]};m.prototype.dispose=function(){this._binPack=null;for(var e=0,f=this._textures;e<f.length;e++){var g=f[e];g&&g.dispose()}this._textures.length=0;this._mosaicsData.length=0;this._mosaicRects.clear()};return m}()})},"esri/layers/vectorTiles/views/3d/support/imageUtils":function(){define(["require","exports","../../../request"],
function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});n.dataURItoBlob=function(l){var k=atob(l.split(",")[1]);l=l.split(",")[0].split(":")[1].split(";")[0];for(var p=new ArrayBuffer(k.length),m=new Uint8Array(p),e=0;e<k.length;e++)m[e]=k.charCodeAt(e);return new Blob([p],{type:l})};n.requestImage=function(l){return a(l,{responseType:"image",allowImageDataAccess:!0}).then(function(k){return k.data})}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SDFConverter":function(){define(["require",
"exports","../../../../core/promiseUtils","../../../../core/promiseUtils","./packingUtils"],function(r,n,a,l,k){Object.defineProperty(n,"__esModule",{value:!0});r=function(){function p(m){this.size=m;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=m;this.context=this.canvas.getContext("2d");this._gridOuter=new Float64Array(m*m);this._gridInner=new Float64Array(m*m);this._f=new Float64Array(m);this._d=new Float64Array(m);this._z=new Float64Array(m+1);this._v=new Int16Array(m);
m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("style","position: absolute;");m.setAttribute("width","0");m.setAttribute("height","0");document.body.appendChild(m);this._svg=m}p.prototype.draw=function(m,e,f){var g=this;void 0===f&&(f=31);var d=this._createSVGString(m);return a.create(function(q,t){var w=new Image;w.src="data:image/svg+xml; charset\x3dutf8, "+encodeURIComponent(d);w.onload=function(){g.context.clearRect(0,0,g.size,g.size);g.context.drawImage(w,0,0,g.size,
g.size);for(var z=g.context.getImageData(0,0,g.size,g.size),A=new Uint8Array(g.size*g.size*4),B=0;B<g.size*g.size;B++){var b=z.data[4*B+3]/255;g._gridOuter[B]=1===b?0:0===b?1E20:Math.pow(Math.max(0,.5-b),2);g._gridInner[B]=1===b?1E20:0===b?0:Math.pow(Math.max(0,b-.5),2)}g._edt(g._gridOuter,g.size,g.size);g._edt(g._gridInner,g.size,g.size);for(B=0;B<g.size*g.size;B++)k.packFloatRGBA(.5-(g._gridOuter[B]-g._gridInner[B])/(2*f),A,4*B);q(A)};var x=e&&e.signal;if(x)l.onAbort(x,function(){return t(l.createAbortError())})})};
p.prototype._createSVGString=function(m){var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",m);this._svg.appendChild(e);m=e.getBBox();var f=m.width/m.height,g=this.size/2,d;if(1<f){var q=d=g/m.width;var t=this.size/4;f=g-1/f*g/2}else d=q=g/m.height,t=g-g*f/2,f=this.size/4;e.setAttribute("style","transform: matrix("+d+", 0, 0, "+q+", "+(-m.x*d+t)+", "+(-m.y*q+f)+")");m='\x3csvg style\x3d"fill:red;" height\x3d"'+this.size+'" width\x3d"'+this.size+'" xmlns\x3d"http://www.w3.org/2000/svg"\x3e'+
this._svg.innerHTML+"\x3c/svg\x3e";this._svg.removeChild(e);return m};p.prototype._edt=function(m,e,f){for(var g=this._f,d=this._d,q=this._v,t=this._z,w=0;w<e;w++){for(var x=0;x<f;x++)g[x]=m[x*e+w];this._edt1d(g,d,q,t,f);for(x=0;x<f;x++)m[x*e+w]=d[x]}for(x=0;x<f;x++){for(w=0;w<e;w++)g[w]=m[x*e+w];this._edt1d(g,d,q,t,e);for(w=0;w<e;w++)m[x*e+w]=Math.sqrt(d[w])}};p.prototype._edt1d=function(m,e,f,g,d){f[0]=0;g[0]=-1E20;g[1]=1E20;for(var q=1,t=0;q<d;q++){for(var w=(m[q]+q*q-(m[f[t]]+f[t]*f[t]))/(2*q-
2*f[t]);w<=g[t];)t--,w=(m[q]+q*q-(m[f[t]]+f[t]*f[t]))/(2*q-2*f[t]);t++;f[t]=q;g[t]=w;g[t+1]=1E20}for(t=q=0;q<d;q++){for(;g[t+1]<q;)t++;e[q]=(q-f[t])*(q-f[t])+m[f[t]]}};return p}();n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/packingUtils":function(){define(["require","exports"],function(r,n){function a(m){return m-Math.floor(m)}Object.defineProperty(n,"__esModule",{value:!0});var l=[1,256,65536,16777216],k=[1/256,1/65536,1/16777216,1/4294967296],p=function(m,e){void 0===e&&(e=0);
for(var f=0,g=0;4>g;g++)f+=m[e+g]*k[g];return f}(new Uint8ClampedArray([255,255,255,255]));n.packFloatRGBA=function(m,e,f){void 0===f&&(f=0);m=0>m?0:m>p?p:m;for(var g=0;4>g;g++)e[f+g]=Math.floor(256*a(m*l[g]))}})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLRendererInfo":function(){define("require exports ../../../../core/screenUtils ../../../../geometry/support/scaleUtils ../../../../renderers/support/utils ./color ./Utils".split(" "),function(r,n,a,l,k,p,m){function e(f,g){var d=g.length;
if(f<g[0].value||1===d)return g[0].size;for(var q=1;q<d;q++)if(f<g[q].value)return g[q-1].size+(f-g[q-1].value)/(g[q].value-g[q-1].value)*(g[q].size-g[q-1].size);return g[d-1].size}return function(){function f(){this.symbolLevels=[];this.vvColorValues=new Float32Array(8);this.vvColors=new Float32Array(32);this.vvOpacityValues=new Float32Array(8);this.vvOpacities=new Float32Array(8);this.vvSizeMinMaxValue=new Float32Array(4);this.vvSizeFieldStopsValues=new Float32Array(6);this.vvSizeFieldStopsSizes=
new Float32Array(6);this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:"geographic",vvOpacityEnabled:!1};this.symbolLevels.push(0)}Object.defineProperty(f.prototype,"vvMaterialParameters",{get:function(){return this._vvMaterialParameters},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"heatmapParameters",{get:function(){return this._heatmapParameters},enumerable:!0,configurable:!0});f.prototype.updateHeatmapParameters=function(g){var d=
g.blurRadius,q=Math.round(4.5*g.blurRadius),t=2*q+1;this._heatmapParameters||(this._heatmapParameters={radius:d,blurRadius:q,kernelSize:t,refreshIntensityKernel:!0,intensityKernel:null,color:null,maxPixelIntensity:g.maxPixelIntensity,minPixelIntensity:g.minPixelIntensity});for(var w=this._heatmapParameters,x=g.colorStops,z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B,b=0;16>b;b++){var h=
x[Math.min(b,x.length-1)];z[b]=h.ratio;B=4*b;A[B+0]=h.color[0]/255;A[B+1]=h.color[1]/255;A[B+2]=h.color[2]/255;A[B+3]=1<h.color[3]?h.color[3]/255:h.color[3];p.premultiplyAlpha(A,B,!0)}w.color={values:z,colors:A,refreshColorRamp:!0};1E-6<Math.abs(w.radius-g.radius)&&(w.radius=d,w.blurRadius=q,w.kernelSize=t,w.refreshIntensityKernel=!0);w.maxPixelIntensity=g.maxPixelIntensity;w.minPixelIntensity=g.minPixelIntensity};f.prototype.updateVisualVariables=function(g,d){var q=this._vvMaterialParameters;q.vvOpacityEnabled=
!1;q.vvSizeEnabled=!1;q.vvColorEnabled=!1;q.vvRotationEnabled=!1;if(g){var t=g.size;if(t){q.vvSizeEnabled=!0;if(t.minMaxValue){var w=t.minMaxValue,x=void 0,z=void 0;m.isDefined(w.minSize)&&m.isDefined(w.maxSize)&&(m.isNumber(w.minSize)&&m.isNumber(w.maxSize)?(x=a.pt2px(w.minSize),z=a.pt2px(w.maxSize)):(z=d.scale,x=a.pt2px(e(z,w.minSize.stops)),z=a.pt2px(e(z,w.maxSize.stops))));this.vvSizeMinMaxValue.set([w.minDataValue,w.maxDataValue,x,z])}t.scaleStops&&(this.vvSizeScaleStopsValue=a.pt2px(e(d.scale,
t.scaleStops.stops)));t.unitValue&&(this.vvSizeUnitValueToPixelsRatio=l.getMetersPerUnitForSR(d.spatialReference)/k.meterIn[t.unitValue.unit]/d.resolution);t.fieldStops&&(this.vvSizeFieldStopsValues.set(t.fieldStops.values),this.vvSizeFieldStopsSizes.set(t.fieldStops.sizes))}if(d=g.color)q.vvColorEnabled=!0,this.vvColorValues.set(d.values),this.vvColors.set(d.colors);if(d=g.opacity)q.vvOpacityEnabled=!0,this.vvOpacityValues.set(d.values),this.vvOpacities.set(d.opacities);if(g=g.rotation)q.vvRotationEnabled=
!0,q.vvRotationType=g.type}};return f}()})},"esri/layers/vectorTiles/geometry/support/scaleUtils":function(){define(["require","exports","../../config","../../core/kebabDictionary","./WKIDUnitConversion"],function(r,n,a,l,k){function p(w){return t.fromJSON(w.toLowerCase())||null}function m(w){return e(w)||n.decDegToMeters}function e(w){if(w)if("object"===typeof w){var x=w.wkid;var z=w.wkt}else"number"===typeof w?x=w:"string"===typeof w&&(z=w);if(x)var A=q.values[q[x]];else z&&-1!==z.search(/^PROJCS/i)&&
(w=d.exec(z))&&w[1]&&(A=parseFloat(w[1].split(",")[1]));return A}function f(w){if(w)if("object"===typeof w){var x=w.wkid;var z=w.wkt}else"number"===typeof w?x=w:"string"===typeof w&&(z=w);if(x)var A=q.units[q[x]];else z&&-1!==z.search(/^PROJCS/i)&&(w=d.exec(z))&&w[1]&&(A=(w=/[\\"\\']{1}([^\\"\\']+)/.exec(w[1]))&&w[1]);return A?p(A):null}function g(w,x){x=m(x);return w/(x*n.inchesPerMeter*a.screenDPI)}Object.defineProperty(n,"__esModule",{value:!0});n.inchesPerMeter=39.37;n.decDegToMeters=20015077/
180;var d=/UNIT\[([^\]]+)\]\]$/i,q=k,t=l({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"},
{ignoreUnknown:!0});n.unitFromRESTJSON=p;n.unitToRESTJSON=function(w){return t.toJSON(w)||null};n.getMetersPerVerticalUnitForSR=function(w){w=m(w);return 1E5<w?1:w};n.getVerticalUnitStringForSR=function(w){return 1E5<m(w)?"meters":f(w)};n.getMetersPerUnitForSR=m;n.getMetersPerUnit=e;n.getUnitString=f;n.getScale=function(w,x){x=x||w.extent;w=w.width;var z=e(x&&x.spatialReference);return x&&w?x.width/w*(z||n.decDegToMeters)*n.inchesPerMeter*a.screenDPI:0};n.getResolutionForScale=g;n.getExtentForScale=
function(w,x){var z=w.extent;w=w.width;x=g(x,z.spatialReference);return z.clone().expand(x*w/z.width)}})},"esri/layers/vectorTiles/views/2d/layers/features/processors/SymbolProcessor":function(){define("require exports ../../../../../renderers ../../../../../core/executeAsync ../../../../../core/MapPool ../../../../../core/promiseUtils ../../../../../core/SetPool ../../../../../renderers/support/jsonUtils ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/Utils ../../../engine/webgl/mesh/factories/WGLMeshFactory".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d){function q(w,x){g.isMarkerSymbol(w)||g.isLineSymbol(w)?x.add(w):g.isFillSymbol(w)&&(x.add(w),w.outline&&"none"!==w.outline.style&&x.add(w.outline))}function t(w,x){x.has(w)||x.set(w,new Set);var z=w.text;w=x.get(w);x=z.length;for(var A=0;A<x;A++){var B=z.charCodeAt(A);w.add(B)}}Object.defineProperty(n,"__esModule",{value:!0});r=function(){function w(x){this.type="symbol";this._symbolToMosaicItemMap=new Map;this._symbolToMosaicItemMap.clear();this.configuration=x.configuration;
this.service=x.service;this.spatialReference=x.spatialReference;this.tileRenderer=x.tileRenderer}w.prototype.destroy=function(){this._symbolToMosaicItemMap.clear()};w.prototype.getMeshData=function(x,z){return z&&z.features&&0!==z.features.length?this._processFeatures(x,z.features).then(function(A){return{tileKey:x.id,data:A}}):p.resolve({tileKey:x.id,data:null})};w.prototype.setConfiguration=function(x){this.configuration=x;this.factory=this.renderer=this.rendererInfo=null};w.prototype.getFactory=
function(){this.factory||(this.factory=this._createFactory());return this.factory};w.prototype.getRenderer=function(){this.renderer||(this.renderer=this._createRenderer());return this.renderer};w.prototype.getRendererInfo=function(){this.rendererInfo||(this.rendererInfo=this._createRendererInfo());return this.rendererInfo};w.prototype._createFactory=function(){if(!this.configuration)return null;var x={fields:this.service.fields,typeIdField:this.service.typeIdField,types:this.service.types};return d.default.from(this.getRenderer(),
x,this._symbolToMosaicItemMap,this.service.geometryType,this.service.objectIdField,this.spatialReference,this.configuration.devicePixelRatio)};w.prototype._createRenderer=function(){return this.configuration?e.fromJSON(this.configuration.renderer):null};w.prototype._createRendererInfo=function(){return this.configuration?f.createRendererInfo(e.fromJSON(this.configuration.renderer),this.spatialReference,{fields:this.service.fields}):null};w.prototype._processFeatures=function(x,z){var A=this;return z&&
z.length?this._getMosaicItems(z).then(function(){return A._writeFeatures(x,z)}):p.resolve(null)};w.prototype._writeFeatures=function(x,z){var A=this,B=0,b=this.getFactory(),h=b.createMeshData(z.length),c={viewingMode:"",scale:x.scale};return l(function(){var v=z[B++],u=B===z.length;b.write(h,v,c);return u}).then(function(){return A._encodeDisplayData(h)})};w.prototype._encodeDisplayData=function(x){var z={};x.encode(z,[]);return z};w.prototype._getReturnCentroid=function(x){function z(A){if(!A)return!1;
A=A.type;return"simple-marker"===A||"picture-marker"===A||"text"===A}if("esriGeometryPolygon"!==this.service.geometryType)return!1;switch(x.type){case "simple":return z(x.symbol);case "unique-value":return z(x.defaultSymbol)||x.uniqueValueInfos.some(function(A){return z(A.symbol)});case "class-breaks":return z(x.defaultSymbol)||x.classBreakInfos.some(function(A){return z(A.symbol)});default:return!0}};w.prototype._getMosaicItems=function(x){x=m.acquire();for(var z=k.acquire(),A=this.getRenderer(),
B=0,b=A.getSymbols();B<b.length;B++){var h=b[B];g.isTextSymbol(h)?t(h,z):q(h,x)}(A instanceof a.UniqueValueRenderer||A instanceof a.ClassBreaksRenderer)&&(A=A.backgroundFillSymbol)&&q(A,x);var c=this._symbolToMosaicItemMap,v=k.acquire(),u=[],y=0;x.forEach(function(C){c.has(C.id)||(v.set(y,C),u.push({symbol:C.toJSON(),id:y}),y++)});z.forEach(function(C,D){if(c.has(D.id)){var E=c.get(D.id).glyphMosaicItems,F=[];C.forEach(function(J){if(E&&E.length<J||!E[J])F[J]=J});0<F.length&&(v.set(y,D),u.push({symbol:D.toJSON(),
id:y,glyphIds:F}),y++)}else{v.set(y,D);var G=[];C.forEach(function(J){return G.push(J)});u.push({symbol:D.toJSON(),id:y,glyphIds:G});y++}});if(0<u.length)return this.tileRenderer.getMaterialItems(u).then(function(C){for(var D=0;D<C.length;D++){var E=C[D],F=v.get(E.id);if(F)if(g.isTextSymbol(F))if(c.has(F.id)){if(F=c.get(F.id).glyphMosaicItems,E=E.mosaicItem.glyphMosaicItems)for(var G=0;G<E.length;G++)null!=E[G]&&(F[G]=E[G])}else c.set(F.id,E.mosaicItem);else c.set(F.id,E.mosaicItem)}k.release(v)});
m.release(x);k.release(z);return p.resolve()};return w}();n.SymbolProcessor=r})},"esri/layers/vectorTiles/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),function(r,n,a,l,k,p,m,e){Object.defineProperty(n,"__esModule",{value:!0});n.ClassBreaksRenderer=a;n.HeatmapRenderer=l;n.BaseRenderer=k;n.SimpleRenderer=p;n.UniqueValueRenderer=
m;n.isRenderer=function(f){return f instanceof n.BaseRenderer};n.fromJSON=e.fromJSON})},"esri/layers/vectorTiles/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error ../core/Logger ../core/accessorSupport/ensureType ../support/arcadeUtils ../symbols/Symbol ../symbols/PolygonSymbol3D ../symbols/support/jsonUtils ../symbols/support/typeUtils ./Renderer ./support/LegendOptions ./support/ClassBreakInfo".split(" "),function(r,n,a,l,k,p,m,
e,f,g,d,q,t,w){var x=k.getLogger("esri.renderers.ClassBreaksRenderer");t=t.LegendOptions;w=w.ClassBreakInfo;var z=a({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),A=p.ensureType(w),B=r(q,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{types:{base:e,key:"type",typeMap:{"simple-fill":d.types.typeMap["simple-fill"],"picture-fill":d.types.typeMap["picture-fill"],"polygon-3d":d.types.typeMap["polygon-3d"]}},
value:null,json:{origins:{"web-scene":{read:g.read,write:{target:{backgroundFillSymbol:{type:f}},writer:g.writeTarget}}},read:g.read,write:g.writeTarget}},classBreakInfos:{type:[w],json:{read:function(b,h,c){if(Array.isArray(b)){var v=h.minValue;return b.map(function(u){var y=new w;y.read(u,c);null==y.minValue&&(y.minValue=v);null==y.maxValue&&(y.maxValue=y.minValue);v=y.maxValue;return y})}},write:function(b,h,c,v){b=b.map(function(u){return u.write({},v)});this._areClassBreaksConsecutive()&&b.forEach(function(u){delete u.classMinValue});
h[c]=b}}},minValue:{type:Number,readOnly:!0,dependsOn:["classBreakInfos"],get:function(){return this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}},defaultLabel:{type:String,value:null,json:{write:!0}},defaultSymbol:{types:d.rendererTypes,value:null,json:{origins:{"web-scene":{read:g.read,write:{target:{defaultSymbol:{types:d.rendererTypes3D}},
writer:g.writeTarget}}},read:g.read,write:g.writeTarget}},valueExpression:{type:String,value:null,json:{write:!0}},valueExpressionTitle:{type:String,value:null,json:{write:!0}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return m.createFunction(this.valueExpression)}},legendOptions:{type:t,value:null,json:{write:!0}},field:{value:null,cast:function(b){return null==b?b:"function"===typeof b?b:p.ensureString(b)},json:{type:String,write:function(b,h,c,v){"string"===typeof b?h[c]=b:v&&
v.messages?v.messages.push(new l("property:unsupported","ClassBreaksRenderer.field set to a function cannot be written to JSON")):x.error(".field: cannot write field to JSON since it's not a string value")}}},isMaxInclusive:!0,normalizationField:{type:String,value:null,json:{write:!0}},normalizationTotal:{type:Number,value:null,json:{write:!0}},normalizationType:{type:String,value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var b=this._get("normalizationType"),h=!!this.normalizationField,
c=null!=this.normalizationTotal;if(h||c)b=h&&"field"||c&&"percent-of-total";else if("field"===b||"percent-of-total"===b)b=null;return b},json:{read:z.fromJSON,write:function(b,h){if(b=z.toJSON(b))h.normalizationType=b}}},requiredFields:{dependsOn:["field","normalizationField","valueExpression"]},type:{value:"class-breaks",json:{write:function(b,h){h.type="classBreaks"}}}},constructor:function(){this.classBreakInfos=[]},addClassBreakInfo:function(b,h,c){b="number"===typeof b?new w({minValue:b,maxValue:h,
symbol:c}):A(n.clone(b));this.classBreakInfos.push(b);1===this.classBreakInfos.length&&this.notifyChange("minValue")},removeClassBreakInfo:function(b,h){var c,v=this.classBreakInfos.length;for(c=0;c<v;c++){var u=[this.classBreakInfos[c].minValue,this.classBreakInfos[c].maxValue];if(u[0]==b&&u[1]==h){this.classBreakInfos.splice(c,1);break}}},getBreakIndex:function(b,h){var c=this.field,v=b.attributes,u=this.classBreakInfos.length,y=this.isMaxInclusive;if(this.valueExpression)b=m.executeFunction(this.compiledFunc,
m.createExecContext(b,m.getViewInfo(h)));else if("function"===typeof c)b=c(b);else if(b=parseFloat(v[c]),h=this.normalizationType)if(c=parseFloat(this.normalizationTotal),v=parseFloat(v[this.normalizationField]),"log"===h)b=Math.log(b)*Math.LOG10E;else if("percent-of-total"===h&&!isNaN(c))b=b/c*100;else if("field"===h&&!isNaN(v)){if(isNaN(b)||isNaN(v))return-1;b/=v}if(null!=b&&!isNaN(b)&&"number"===typeof b)for(v=0;v<u;v++)if(h=[this.classBreakInfos[v].minValue,this.classBreakInfos[v].maxValue],h[0]<=
b&&(y?b<=h[1]:b<h[1]))return v;return-1},getClassBreakInfo:function(b,h){b=this.getBreakIndex(b,h);return-1!==b?this.classBreakInfos[b]:null},getSymbol:function(b,h){b=this.getBreakIndex(b,h);return-1<b?this.classBreakInfos[b].symbol:this.defaultSymbol},getSymbols:function(){var b=[];this.classBreakInfos.forEach(function(h){h.symbol&&b.push(h.symbol)});this.defaultSymbol&&b.push(this.defaultSymbol);return b},clone:function(){return new B({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&
this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:n.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:n.clone(this.visualVariables),legendOptions:n.clone(this.legendOptions),
authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},collectRequiredFields:function(b){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(h){h&&(b[h]=!0)});this.valueExpression&&m.extractFieldNames(this.valueExpression).forEach(function(h){b[h]=!0})},_areClassBreaksConsecutive:function(){for(var b=this.classBreakInfos,h=1;h<b.length;h++)if(b[h-1].maxValue!==b[h].minValue)return!1;return!0}});return B})},"esri/layers/vectorTiles/symbols/PolygonSymbol3D":function(){define(["require",
"exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(r,n,a,l){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/Symbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol"],function(r,n,a,l){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B,b){function h(u,y,C){y=u?v[u.type]||null:null;if(y)return y=new y,y.read(u,C),y;C&&C.messages&&u&&C.messages.push(new l("symbol:unsupported","Symbols of type '"+(u.type||"unknown")+"' are not supported",{definition:u,context:C}));return null}function c(u,y,C){if(!u)return null;if(!C||"web-scene"!==C.origin||u.isInstanceOf(x)||u.isInstanceOf(A))return u.write(y,C);var D=b.to3D(u);if(D.symbol)return D.symbol.write(y,C);C.messages&&C.messages.push(new a("symbol:unsupported",
"Symbols of type '"+u.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:u,context:C,error:D.error}));return null}Object.defineProperty(n,"__esModule",{value:!0});var v={esriSMS:w,esriPMS:f,esriTS:z,esriSLS:t,esriSFS:q,esriPFS:e,PointSymbol3D:g,LineSymbol3D:p,PolygonSymbol3D:d,MeshSymbol3D:m,LabelSymbol3D:k,styleSymbolReference:A};n.read=h;n.writeTarget=function(u,y,C,D){(u=c(u,{},D))&&(y[C]=u)};n.write=c;n.fromJSON=function(u,
y){return h(u,null,y)};n.readCallout3D=function(u,y){if(!u||!u.type)return null;var C=null;switch(u.type){case "line":C=new B}C&&C.read(u,y);return C}})},"esri/layers/vectorTiles/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(r,n,a,l,k){r=function(p){function m(e,f,g){var d=p.call(this,e,f,g)||this;return d instanceof m?d:new m(e,f,g)}a(m,p);return m}(k);r.prototype.type="warning";return r})},"esri/layers/vectorTiles/symbols/LabelSymbol3D":function(){define(["require",
"exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(r,n,a,l){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/LineSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(r,n,a,l){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/MeshSymbol3D":function(){define(["require",
"exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(r,n,a,l){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/PictureFillSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./FillSymbol","./support/urlUtils"],function(r,n,a,l,k){var p={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},m=r(l,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill",
url:k.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:a.toPt,json:{write:!0}},height:{value:12,cast:a.toPt,json:{write:!0}},xoffset:{value:0,cast:a.toPt,json:{write:!0}},yoffset:{value:0,cast:a.toPt,json:{write:!0}},source:k.sourcePropertyDefinition},getDefaults:function(){return n.mixin(this.inherited(arguments),p)},normalizeCtorArgs:function(e,f,g,d){if(e&&"string"!==typeof e&&null==e.imageData)return e;var q={};e&&(q.url=e);f&&(q.outline=
f);null!=g&&(q.width=a.toPt(g));null!=d&&(q.height=a.toPt(d));return q},clone:function(){var e=new m({color:n.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});e._set("source",n.clone(this.source));return e}});m.defaultProps=p;return m})},"esri/layers/vectorTiles/symbols/FillSymbol":function(){define(["./Symbol","./SimpleLineSymbol"],function(r,n){return r.createSubclass({declaredClass:"esri.symbols.FillSymbol",
properties:{outline:{type:n,json:{read:{default:null},write:!0}},type:null}})})},"esri/layers/vectorTiles/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(r,n,a){function l(e,f,g){return f.imageData?a.makeData({mediaType:f.contentType||"image/png",isBase64:!0,data:f.imageData}):k(f.url,g)}function k(e,f){return!f||"service"!==f.origin&&"portal-item"!==f.origin||!f.layer||"feature"!==f.layer.type&&"stream"!==f.layer.type||a.isAbsolute(e)||!f.layer.parsedUrl?
a.read(e,f):a.join(f.layer.parsedUrl.path,"images",e)}function p(e,f,g,d){a.isDataProtocol(e)?(e=a.dataComponents(e),f.contentType=e.mediaType,f.imageData=e.data,g&&g.imageData===f.imageData&&g.url&&(f.url=m(g.url,d))):f.url=m(e,d)}function m(e,f){return a.write(e,f)}Object.defineProperty(n,"__esModule",{value:!0});n.readImageDataOrUrl=l;n.read=k;n.writeImageDataAndUrl=p;n.write=m;n.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:l},write:{writer:function(e,f,g,d){p(e,f,this.source,
d)}}}};n.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(e,f,g){e={};f.imageData&&(e.imageData=f.imageData);f.contentType&&(e.contentType=f.contentType);f.url&&(e.url=k(f.url,g));return e}}}}})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],function(r,n,a,l){function k(h){return a.normalize(h)}function p(h){return"data:"===h.slice(0,5)}function m(h){return e(h)||B.test(h)}function e(h){return h&&
"/"===h[0]&&"/"===h[1]}function f(h){return a.urlToObject(h)}function g(h){if("string"===typeof h)return new l(q(h));h.scheme||(h.scheme=n.appUrl.scheme);return h}function d(h){if(p(h))return null;var c=h.indexOf("://");if(-1===c&&e(h))c=2;else if(-1!==c)c+=3;else return null;c=h.indexOf("/",c);return-1===c?h:h.slice(0,c)}function q(h,c,v){void 0===c&&(c=n.appBaseUrl);if(e(h))return v&&v.preserveProtocolRelative?h:"http"===n.appUrl.scheme&&n.appUrl.authority===d(h).slice(2)?"http:"+h:"https:"+h;if(B.test(h))return h;
"/"===h[0]&&(v=c.indexOf("//"),v=c.indexOf("/",v+2),c=-1===v?c:c.slice(0,v));return w(c,h)}function t(h,c,v){void 0===v&&(v=!1);h=g(h);c=g(c);return v||h.scheme===c.scheme?h.host.toLowerCase()===c.host.toLowerCase()&&h.port===c.port:!1}function w(){for(var h=[],c=0;c<arguments.length;c++)h[c]=arguments[c];if(h&&h.length){c=[];if(m(h[0])){var v=h[0],u=v.indexOf("//");c.push(v.slice(0,u+1));A.test(h[0])&&(c[0]+="/");h[0]=v.slice(u+2)}else"/"===h[0][0]&&c.push("");h=h.reduce(function(y,C){return C?y.concat(C.split("/")):
y},[]);for(v=0;v<h.length;v++)u=h[v],".."===u&&0<c.length?c.pop():!u||"."===u&&0!==c.length||c.push(u);return c.join("/")}}function x(h,c,v){if(!(c&&v&&h&&m(h)))return h;var u=h.indexOf("//"),y=h.indexOf("/",u+2),C=h.indexOf(":",u+2);y=Math.min(0>y?h.length:y,0>C?h.length:C);if(h.slice(u+2,y).toLowerCase()!==c.toLowerCase())return h;c=h.slice(0,u+2);h=h.slice(y);return""+c+v+h}function z(h,c,v){void 0===c&&(c=n.appBaseUrl);if(!m(h))return h;var u=k(h),y=u.toLowerCase();c=k(c).toLowerCase().replace(/\/+$/,
"");if((v=v?k(v).toLowerCase().replace(/\/+$/,""):null)&&0!==c.indexOf(v))return h;for(var C=function(F,G,J){J=F.indexOf(G,J);return-1===J?F.length:J},D=C(y,"/",y.indexOf("//")+2),E=-1;y.slice(0,D+1)===c.slice(0,D)+"/";){E=D+1;if(D===y.length)break;D=C(y,"/",D+1)}if(-1===E||v&&E<v.length)return h;h=u.slice(E);u=c.slice(E-1).replace(/[^/]+/g,"").length;if(0<u)for(y=0;y<u;y++)h="../"+h;else h="./"+h;return h}Object.defineProperty(n,"__esModule",{value:!0});n.normalize=k;n.canUseXhr=function(h){return a.canUseXhr(h)};
n.removeTrailingSlash=function(h){return h.replace(/\/+$/,"")};r=Function("return this")();n.appUrl=new l(r.location);n.appBaseUrl=function(){var h=n.appUrl.path;h=h.substring(0,h.lastIndexOf(h.split("/")[h.split("/").length-1]));return n.appUrl.scheme+"://"+n.appUrl.host+(null!=n.appUrl.port?":"+n.appUrl.port:"")+h}();var A=/^\s*file:/i,B=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;n.isDataProtocol=p;n.isAbsolute=m;n.isProtocolRelative=e;n.urlToObject=f;n.getOrigin=d;n.makeAbsolute=q;n.hasSameOrigin=t;n.join=
w;n.removeFile=function(h){var c=0;if(m(h)){var v=h.indexOf("//");-1!==v&&(c=v+2)}v=h.lastIndexOf("/");return v<c?h:h.slice(0,v+1)};n.addProxy=function(h){return a.addProxy(h)};n.makeData=function(h){return h.isBase64?"data:"+h.mediaType+";base64,"+h.data:"data:"+h.mediaType+","+h.data};var b=/^data:(.*?)(;base64)?,(.*)$/;n.dataComponents=function(h){return(h=h.match(b))?{mediaType:h[1],isBase64:!!h[2],data:h[3]}:null};n.changeDomain=x;n.read=function(h,c){var v=c&&c.url&&c.url.path;h&&v&&(h=q(h,
v,{preserveProtocolRelative:!0}));(c=c&&c.portal)&&!c.isPortal&&c.urlKey&&c.customBaseUrl?(v=c.urlKey+"."+c.customBaseUrl,c=t(n.appUrl,n.appUrl.scheme+"://"+v)?x(h,c.portalHostname,v):x(h,v,c.portalHostname)):c=h;return c};n.write=function(h,c){if(!h)return h;!m(h)&&c&&c.blockedRelativeUrls&&c.blockedRelativeUrls.push(h);var v=q(h);if(c){var u=c.verifyItemRelativeUrls&&c.verifyItemRelativeUrls.rootPath||c.url&&c.url.path;u&&(v=z(v,u,u),v!==h&&c.verifyItemRelativeUrls&&c.verifyItemRelativeUrls.writtenUrls.push(v))}h=
v;v=(c=c&&c.portal)&&!c.isPortal&&c.urlKey&&c.customBaseUrl?x(h,c.urlKey+"."+c.customBaseUrl,c.portalHostname):h;return v};n.makeRelative=z;n.removeQueryParameters=function(h){h=f(h);Object.keys(h.query||{});return h.path}})},"esri/layers/vectorTiles/symbols/PictureMarkerSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./MarkerSymbol","./support/urlUtils"],function(r,n,a,l,k){var p={width:12,height:12,angle:0,xoffset:0,yoffset:0},m=r(l,{declaredClass:"esri.symbols.PictureMarkerSymbol",
properties:{color:{json:{write:!1}},type:"picture-marker",url:k.urlPropertyDefinition,source:k.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(e,f){return f.size||e}},write:!0},cast:a.toPt},width:{json:{read:{source:["width","size"],reader:function(e,f){return f.size||e}},write:!0},cast:a.toPt},size:{json:{write:!1}}},getDefaults:function(){return n.mixin(this.inherited(arguments),p)},normalizeCtorArgs:function(e,f,g){if(e&&"string"!==typeof e&&null==e.imageData)return e;
var d={};e&&(d.url=e);null!=f&&(d.width=a.toPt(f));null!=g&&(d.height=a.toPt(g));return d},clone:function(){var e=new m({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});e._set("source",n.clone(this.source));return e}});m.defaultProps=p;return m})},"esri/layers/vectorTiles/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(r,n,a){return r(a,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,
json:{read:function(l){return l&&-1*l},write:function(l,k){k.angle=l&&-1*l}}},type:{},xoffset:{value:0,cast:n.toPt,json:{write:!0}},yoffset:{value:0,cast:n.toPt,json:{write:!0}},size:{value:9,cast:function(l){return"auto"===l?l:n.toPt(l)},json:{write:!0}}}})})},"esri/layers/vectorTiles/symbols/PointSymbol3D":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3D"],function(r,n,a,l){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}
a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/SimpleFillSymbol":function(){define(["../core/declare","../core/lang","./FillSymbol","./SimpleLineSymbol"],function(r,n,a,l){var k={style:"solid",outline:new l,color:[0,0,0,.25]},p=r(a,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(m){return n.valueOf(this._styles,m)||void 0},write:function(m,e){e.style=this._styles[m]}}}},_styles:{solid:"esriSFSSolid",
none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return n.mixin(this.inherited(arguments),k)},normalizeCtorArgs:function(m,e,f){if(m&&"string"!==typeof m)return m;var g={};m&&(g.style=m);e&&(g.outline=e);f&&(g.color=f);return g},clone:function(){return new p({color:n.clone(this.color),outline:this.outline&&
this.outline.clone(),style:this.style})}});n.mixin(p,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});p.defaultProps=k;return p})},"esri/layers/vectorTiles/symbols/SimpleMarkerSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./MarkerSymbol","./SimpleLineSymbol"],function(r,n,
a,l,k){var p={style:"circle",color:[255,255,255,.25],outline:new k,size:12,angle:0,xoffset:0,yoffset:0},m=r(l,{declaredClass:"esri.symbols.SimpleMarkerSymbol",properties:{color:{json:{write:function(e,f){e&&"x"!==this.style&&"cross"!==this.style&&(f.color=e.toJSON())}}},type:"simple-marker",size:{value:12},style:{type:String,value:"circle",json:{read:function(e){return n.valueOf(this._styles,e)},write:function(e,f){f.style=this._styles[e]}}},path:{type:String,value:null,set:function(e){this.style=
"path";this._set("path",e)},json:{write:!0}},outline:{type:k,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return n.mixin(this.inherited(arguments),p)},normalizeCtorArgs:function(e,f,g,d){if(e&&"string"!==typeof e)return e;var q={};e&&(q.style=e);null!=f&&(q.size=a.toPt(f));g&&(q.outline=g);d&&(q.color=d);return q},clone:function(){return new m({angle:this.angle,color:n.clone(this.color),
outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},read:function d(f,g){return this.getInherited(d,arguments).call(this,n.mixin({outline:null},f),g)}});n.mixin(m,{STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"});m.defaultProps=p;return m})},"esri/layers/vectorTiles/symbols/TextSymbol":function(){define("../core/declare ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),
function(r,n,a,l,k,p){var m={text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},e=r(k,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:l,json:{write:!0}},borderLineColor:{type:l,json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:p,json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:l,json:{write:!0}},haloSize:{type:Number,
cast:a.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},rotated:{value:!1,json:{write:!0}},text:{type:String,json:{write:!0}},type:"text",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:a.toPt,json:{write:!0}},yoffset:{value:0,type:Number,cast:a.toPt,json:{write:!0}},angle:{type:Number,value:0,json:{read:function(f){return f&&-1*f},write:function(f,g){g.angle=f&&-1*f}}},width:{json:{write:!0}}},getDefaults:function(){return n.mixin(this.inherited(arguments),m)},
normalizeCtorArgs:function(f,g,d){if(f&&"string"!==typeof f)return f;var q={};f&&(q.text=f);g&&(q.font=g);d&&(q.color=d);return q},clone:function(){return new e({angle:this.angle,backgroundColor:n.clone(this.backgroundColor),borderLineColor:n.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:n.clone(this.color),font:this.font&&this.font.clone(),haloColor:n.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,
rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});n.mixin(e,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});e.defaultProps=m;return e})},"esri/layers/vectorTiles/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators ../core/accessorSupport/write".split(" "),
function(r,n,a,l,k,p,m,e){return function(f){function g(q){q=f.call(this)||this;q.decoration="none";q.family="sans-serif";q.size=9;q.style="normal";q.weight="normal";return q}a(g,f);var d=g;g.prototype.castSize=function(q){return p.toPt(q)};g.prototype.clone=function(){return new d({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};l([m.property({type:String,json:{write:{overridePolicy:e.disableWriteDefaultPolicy("none")}}})],g.prototype,"decoration",
void 0);l([m.property({type:String,json:{write:!0}})],g.prototype,"family",void 0);l([m.property({type:Number,json:{write:{overridePolicy:function(q,t,w){return{enabled:!w||!w.textSymbol3D}}}}})],g.prototype,"size",void 0);l([m.cast("size")],g.prototype,"castSize",null);l([m.property({type:String,json:{write:{overridePolicy:e.disableWriteDefaultPolicy("normal")}}})],g.prototype,"style",void 0);l([m.property({type:String,json:{write:{overridePolicy:e.disableWriteDefaultPolicy("normal")}}})],g.prototype,
"weight",void 0);return g=d=l([m.subclass("esri.symbols.Font")],g)}(m.declared(k))})},"esri/layers/vectorTiles/symbols/WebStyleSymbol":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol"],function(r,n,a,l){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/callouts/LineCallout3D":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","./Callout3D"],
function(r,n,a,l){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/callouts/Callout3D":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/JSONSupport"],function(r,n,a,l){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/support/symbolConversion":function(){define("require exports ../../Color ../../symbols ../../core/Error ../../core/lang ../FillSymbol3DLayer ../Font ../IconSymbol3DLayer ../LabelSymbol3D ../LineSymbol3D ../LineSymbol3DLayer ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../TextSymbol ../TextSymbol3DLayer ../WebStyleSymbol".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B,b,h,c){function v(y){var C=y.color?y.color.clone():new a([255,255,255]),D;if(y instanceof t){y.color&&0===y.color.r&&0===y.color.g&&0===y.color.b&&(C=new a([255,255,255]));var E={href:y.url};var F=y.width<=y.height?y.height:y.width}else E=y.style,E=E in u?u[E]:"circle",E={primitive:E},F=y.size,y.outline&&y.outline.color&&0<y.outline.width&&(D={size:y.outline.width,color:y.outline.color.clone()});return new w(new f({size:F,resource:E,material:{color:C},
outline:D}))}Object.defineProperty(n,"__esModule",{value:!0});var u={};u[B.STYLE_CIRCLE]="circle";u[B.STYLE_CROSS]="cross";u[B.STYLE_DIAMOND]="kite";u[B.STYLE_SQUARE]="square";u[B.STYLE_X]="x";n.to3D=function(y,C,D,E){void 0===C&&(C=!1);void 0===D&&(D=!1);void 0===E&&(E=!0);if(!y)return{symbol:null};if(l.isSymbol3D(y)||y instanceof c)E=y.clone();else if(y instanceof A)E=new d(new q({size:y.width||1,material:{color:y.color?y.color.clone():[255,255,255]}}));else if(y instanceof B)E=v(y);else if(y instanceof
t)E=v(y);else if(y instanceof z)E=new m({material:{color:y.color?y.color.clone():[255,255,255]}}),y.outline&&y.outline.color&&(E.outline={size:y.outline.width||0,color:y.outline.color}),E=new x(E);else if(y instanceof b){var F=y.haloColor;var G=y.haloSize;F=F&&0<G?{color:p.clone(F),size:G}:null;G=y.font?y.font.clone():new e;E=new (E?g:w)(new h({size:G.size,font:G,halo:F,material:{color:y.color.clone()},text:y.text}))}else return{error:new k("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+
(y.type||y.declaredClass)+"' is unsupported in 3D",{symbol:y})};C&&(E.id=y.id);if(D&&l.isSymbol3D(E))for(y=0;y<E.symbolLayers.length;++y)E.symbolLayers.getItemAt(y)._ignoreDrivers=!0;return{symbol:E}}})},"esri/layers/vectorTiles/symbols":function(){define("require exports ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/support/jsonUtils".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B,b,h,c,v,u,y,C,D,E,F){Object.defineProperty(n,"__esModule",{value:!0});n.ExtrudeSymbol3DLayer=a;n.BaseFillSymbol=l;n.FillSymbol3DLayer=k;n.Font=p;n.IconSymbol3DLayer=m;n.LabelSymbol3D=e;n.LineSymbol3D=f;n.LineSymbol3DLayer=g;n.BaseMarkerSymbol=d;n.MeshSymbol3D=q;n.ObjectSymbol3DLayer=t;n.PathSymbol3DLayer=w;n.PictureFillSymbol=x;n.PictureMarkerSymbol=z;n.PointSymbol3D=A;n.PolygonSymbol3D=B;n.SimpleFillSymbol=b;n.SimpleLineSymbol=h;n.SimpleMarkerSymbol=c;
n.BaseSymbol=v;n.BaseSymbol3D=u;n.BaseSymbol3DLayer=y;n.TextSymbol=C;n.TextSymbol3DLayer=D;n.WebStyleSymbol=E;n.fromJSON=F.fromJSON;n.isSymbol=function(G){return G instanceof n.BaseSymbol};n.isSymbol2D=function(G){if(!G)return!1;switch(G.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":return!0;default:return!1}};n.isSymbol3D=function(G){if(!G)return!1;switch(G.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;
default:return!1}}})},"esri/layers/vectorTiles/symbols/ExtrudeSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(r,n,a,l){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/Symbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","../core/JSONSupport"],function(r,n,a,l){return function(k){function p(){return null!==
k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/FillSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(r,n,a,l){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/IconSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(r,n,a,l){return function(k){function p(){return null!==
k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/LineSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(r,n,a,l){(function(k){function p(){return null!==k&&k.apply(this,arguments)||this}a(p,k);return p})(l);return l})},"esri/layers/vectorTiles/symbols/ObjectSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(r,n,a,l){return function(k){function p(){return null!==
k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/PathSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(r,n,a,l){return function(k){function p(){return null!==k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/TextSymbol3DLayer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Symbol3DLayer"],function(r,n,a,l){return function(k){function p(){return null!==
k&&k.apply(this,arguments)||this}a(p,k);return p}(l)})},"esri/layers/vectorTiles/symbols/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol ../TextSymbol ../WebStyleSymbol".split(" "),function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z){Object.defineProperty(n,"__esModule",
{value:!0});n.types={base:w,key:"type",typeMap:{"simple-fill":d,"picture-fill":m,"picture-marker":e,"simple-line":q,"simple-marker":t,text:x,"label-3d":l,"line-3d":k,"mesh-3d":p,"point-3d":f,"polygon-3d":g,"web-style":z}};n.rendererTypes={base:w,key:"type",typeMap:{"simple-fill":d,"picture-fill":m,"picture-marker":e,"simple-line":q,"simple-marker":t,text:x,"line-3d":k,"mesh-3d":p,"point-3d":f,"polygon-3d":g,"web-style":z}};n.labelTypes={base:w,key:"type",typeMap:{text:x,"label-3d":l}};n.types3D={base:w,
key:"type",typeMap:{"label-3d":l,"line-3d":k,"mesh-3d":p,"point-3d":f,"polygon-3d":g,"web-style":z}};n.rendererTypes3D={base:w,key:"type",typeMap:{"line-3d":k,"mesh-3d":p,"point-3d":f,"polygon-3d":g,"web-style":z}};n.labelTypes3D={base:w,key:"type",typeMap:{"label-3d":l}};n.ensureType=a.ensureOneOfType(n.types)})},"esri/layers/vectorTiles/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error ../support/arcadeUtils ../webdoc/support/opacityUtils ../Color ./support/utils ./support/AuthoringInfo".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q){var t=l({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),w=l({widthAndDepth:"width-and-depth"}),x=l({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});l({classedSize:"classed-size",classedColor:"classed-color",univariateColorSize:"univariate-color-size"});
l({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});l({percentTotal:"percent-of-total"});var z=Math.PI,A=f.opacityToTransparency,B=f.transparencyToOpacity;return r([n,a],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{type:q,value:null,json:{write:!0}},requiredFields:{dependsOn:["visualVariables"],get:function(){var b=Object.create(null);
this.collectRequiredFields(b);return Object.keys(b).sort()}},type:{type:String,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables","rotationType","rotationExpression"],reader:function(b,h){return this._readVariables(b,h)}},write:function(b,h,c,v){var u=[];b.forEach(function(y,C){"size"===y.type?u.push(this._writeSizeInfo(y,v,C)):"color"===y.type?u.push(this._writeColorInfo(y,v,C)):"opacity"===y.type?u.push(this._writeOpacityInfo(y,v,C)):"rotation"===
y.type&&u.push(this._writeRotationInfo(y,v,C))},this);h.visualVariables=u}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,_visualVariablesSetter:function(b){var h=this._cache;this.visualVariables&&this.visualVariables.forEach(function(c,v){h.hasOwnProperty(v)&&(h[v]=null)},this);b&&b.some(function(c){return!!c.target})&&b.sort(function(c,v){return c.target===v.target?0:c.target?1:-1});b&&b.forEach(function(c,v){"color"===
c.type?h[v]=this._processColorInfo(c):"opacity"===c.type?h[v]=this._processOpacityInfo(c):"size"===c.type?h[v]=this._processSizeInfo(c):"rotation"===c.type&&(h[v]=this._processRotationInfo(c))},this);this._set("visualVariables",b)},getSymbol:function(b,h){},getVisualVariableValues:function(b,h){var c=this.visualVariables,v;c&&(v=c.map(function(u){var y=u.type,C=y+"Info";h=p.mixin({},h);h[C]=u;switch(y){case "size":var D=this.getSize(b,h);break;case "color":D=this.getColor(b,h);break;case "opacity":D=
this.getOpacity(b,h);break;case "rotation":D=this.getRotationAngle(b,h)}return{variable:u,value:D}},this).filter(function(u){return null!=u.value},this));return v},hasVisualVariables:function(b,h){return b?!!this.getVisualVariablesForType(b,h):!!(this.getVisualVariablesForType("size",h)||this.getVisualVariablesForType("color",h)||this.getVisualVariablesForType("opacity",h)||this.getVisualVariablesForType("rotation",h))},getVisualVariablesForType:function(b,h){var c=this.visualVariables,v;c&&(v=c.filter(function(u){return u.type===
b&&("string"===typeof h?u.target===h:!1===h?!u.target:!0)}))&&0===v.length&&(v=void 0);return v},getSize:function(b,h){var c=this._getVarInfo(h&&h.sizeInfo,"size"),v=c.variable;c=this._cache[c.cacheKey];var u=null;if(v){var y=v.minSize;u=v.maxSize;y="object"===typeof y&&y?this._getSize(b,y,c&&c.minSize,h):y;u="object"===typeof u&&u?this._getSize(b,u,c&&c.maxSize,h):u;u=this._getSize(b,v,c&&c.root,h,[y,u])}return u},getSizeRangeAtScale:function(b,h){b=this._getVarInfo(b,"size");var c=this._cache[b.cacheKey],
v={scale:h};if((b=b.variable)&&h){h=b.minSize;var u=b.maxSize;b="object"===typeof h&&h?this._getSize({},h,c&&c.minSize,v):h;c="object"===typeof u&&u?this._getSize({},u,c&&c.maxSize,v):u;if(null!=b||null!=c){if(b>c){var y=c;c=b;b=y}y={minSize:b,maxSize:c}}}return y},getColor:function(b,h){var c=this._getVarInfo(h&&h.colorInfo,"color");return this._getColorComponent(b,c.variable,this._cache[c.cacheKey],h)},getOpacity:function(b,h){var c=this._getVarInfo(h&&h.opacityInfo,"opacity");return this._getColorComponent(b,
c.variable,this._cache[c.cacheKey],h,!0)},getRotationAngle:function(b,h){var c=this._getVarInfo(h&&h.rotationInfo,"rotation"),v=c.variable,u=this._cache[c.cacheKey],y=v.axis||"heading";c="heading"===y&&"arithmetic"===v.rotationType?90:0;y="heading"===y&&"arithmetic"===v.rotationType?-1:1;v=v.field;u=u&&u.compiledFunc;var C=b.attributes,D=0;if(v||u)u?D=e.executeFunction(u,e.createExecContext(b,e.getViewInfo(h))):"function"===typeof v?D=v.apply(this,arguments):C&&(D=C[v]||0),D="number"!==typeof D||
isNaN(D)?null:c+y*D;return D},collectRequiredFields:function(b){var h=[];this.visualVariables&&(h=h.concat(this.visualVariables));h.forEach(function(c){c&&(c.field&&(b[c.field]=!0),c.normalizationField&&(b[c.normalizationField]=!0),c.valueExpression&&e.extractFieldNames(c.valueExpression).forEach(function(v){b[v]=!0}))})},_getVarInfo:function(b,h){if(b&&b.type===h&&this.visualVariables){var c=this.visualVariables.indexOf(b);b=this.visualVariables[c]}else this.visualVariables&&(b=(b=this.getVisualVariablesForType(h))&&
b[0],c=this.visualVariables.indexOf(b));return{variable:b,cacheKey:c}},_readSizeInfo:function(b){b.axis&&(b.axis=w.fromJSON(b.axis));b.valueUnit&&(b.valueUnit=x.fromJSON(b.valueUnit));return b},_readColorInfo:function(b){b&&(b.colors&&b.colors.forEach(function(h,c){Array.isArray(h)?b.colors[c]=g.fromJSON(h):b.colors[c]=new g(h)}),b.stops&&b.stops.forEach(function(h,c){h.color&&Array.isArray(h.color)?b.stops[c].color=g.fromJSON(h.color):h.color&&(b.stops[c].color=new g(h.color))}));return b},_readOpacityInfo:function(b){if(b){var h=
p.mixin({},b);h.transparencyValues&&(h.opacityValues=h.transparencyValues.map(B),delete h.transparencyValues);h.stops&&(h.stops=h.stops.map(function(c){c=p.mixin({},c);c.opacity=B(c.transparency);delete c.transparency;return c}))}return h},_readVariables:function(b,h){b&&(b=b.map(function(v){v=p.clone(v);v.type=t.fromJSON(v.type);"size"===v.type?v=this._readSizeInfo(v):"color"===v.type?v=this._readColorInfo(v):"opacity"===v.type&&(v=this._readOpacityInfo(v));return v},this));var c=h.rotationType;
if(h=h.rotationExpression)c={type:"rotation",rotationType:c},(h=h.match(this._rotationRE))&&h[1]&&(c.field=h[1],b||(b=[]),b.push(c));return b},_createCache:function(b){var h=b&&b.valueExpression,c=e.createSyntaxTree(h);c=e.createFunction(c);var v=!(!b||!b.expression)||this._viewScaleRE.test(h);return{ipData:this._interpolateData(b),hasExpr:!!h,compiledFunc:c,isScaleDriven:v}},_processColorInfo:function(b){b&&(b.colors&&b.colors.forEach(function(h,c){h instanceof g||(b.colors[c]=new g(h))}),b.stops&&
b.stops.forEach(function(h,c){!h.color||h.color instanceof g||(b.stops[c].color=new g(h.color))}),this._sortStops(b.stops));return this._createCache(b)},_processOpacityInfo:function(b){this._sortStops(b&&b.stops);return this._createCache(b)},_processSizeInfo:function(b){b.stops&&Array.isArray(b.stops)?b.stops=this._processSizeInfoStops(b.stops):(b.minSize=b.minSize&&this._processSizeInfoSize(b.minSize),b.maxSize=b.maxSize&&this._processSizeInfoSize(b.maxSize));return{root:this._createCache(b),minSize:this._createCache(b.minSize),
maxSize:this._createCache(b.maxSize)}},_processSizeInfoSize:function(b){"object"===typeof b?b.stops=this._processSizeInfoStops(b.stops):b=k.toPt(b);return b},_processSizeInfoStops:function(b){b&&Array.isArray(b)&&(b.forEach(function(h){h.size=k.toPt(h.size)}),this._sortStops(b));return b},_sortStops:function(b){b&&Array.isArray(b)&&b.sort(function(h,c){return h.value-c.value})},_processRotationInfo:function(b){return this._createCache(b)},_getSize:function(b,h,c,v,u){var y=b.attributes,C=h.field,
D=h.stops,E=0,F=c&&c.hasExpr,G=c&&c.compiledFunc,J=c&&c.ipData,R=c&&c.isScaleDriven,O="number"===typeof b,P=O?b:null;if(C||R||F){var U=v&&v.scale,K=u?u[0]:h.minSize,V=u?u[1]:h.maxSize,Q=h.minDataValue,W=h.maxDataValue,N=h.valueUnit||"unknown",I=h.valueRepresentation;E=h.scaleBy;var S=h.normalizationField,Z=y?parseFloat(y[S]):void 0,ca=v&&v.shape;R?P=null==U?this._getAverageValue(h):U:"number"!==typeof P&&(F?P=e.executeFunction(G,e.createExecContext(b,e.getViewInfo(v))):"function"===typeof C?P=C.apply(this,
arguments):y&&(P=y[C]));if(null==P||S&&!O&&(isNaN(Z)||0===Z))return null;isNaN(Z)||O||(P/=Z);if(D)V=this._lookupData(P,J),P=V[0],K=V[1],P===K?E=D[P].size:(P=D[P].size,D=D[K].size,E=P+(D-P)*V[2]);else if(null!=K&&null!=V&&null!=Q&&null!=W)P<=Q?E=K:P>=W?E=V:(D=(P-Q)/(W-Q),"area"===E&&ca?(K=(P="circle"===ca)?z*Math.pow(K/2,2):K*K,D=K+D*((P?z*Math.pow(V/2,2):V*V)-K),E=P?2*Math.sqrt(D/z):Math.sqrt(D)):E=K+D*(V-K));else if("unknown"===N)null!=K&&null!=Q?(K&&Q?(D=P/Q,E="circle"===ca?2*Math.sqrt(D*Math.pow(K/
2,2)):"square"===ca||"diamond"===ca||"image"===ca?Math.sqrt(D*Math.pow(K,2)):D*K):E=P+(K||Q),E=E<K?K:E,null!=V&&E>V&&(E=V)):E=P;else{D=(v&&v.resolution?v.resolution:1)*d.meterIn[N];if("area"===I)E=Math.sqrt(P/z)/D,E*=2;else if(E=P/D,"radius"===I||"distance"===I)E*=2;null!=K&&E<K&&(E=K);null!=V&&E>V&&(E=V)}}else h&&(E=D&&D[0]&&D[0].size,null==E&&(E=h.minSize));return E=isNaN(E)?0:E},_getAverageValue:function(b){var h=b.stops;if(h){var c=h[0].value;b=h[h.length-1].value}else c=b.minDataValue||0,b=b.maxDataValue||
0;return(c+b)/2},_getColorComponent:function(b,h,c,v,u,y){var C=b.attributes,D=h&&h.field,E="number"===typeof b,F=E?b:null,G=c&&c.hasExpr,J=c&&c.compiledFunc,R=c&&c.ipData;if(D||G){var O=h.normalizationField,P=C?parseFloat(C[O]):void 0;"number"!==typeof F&&(G?F=e.executeFunction(J,e.createExecContext(b,e.getViewInfo(v))):"function"===typeof D?F=D.apply(this,arguments):C&&(F=C[D]));if(null!=F&&(!O||E||!isNaN(P)&&0!==P)){isNaN(P)||E||(F/=P);var U=u?this._getOpacity(F,h,R):this._getColor(F,h,R)}}else h&&
(C=h.stops,u?(U=C&&C[0]&&C[0].opacity,null==U&&(U=h.opacityValues&&h.opacityValues[0])):U=C&&C[0]&&C[0].color||h.colors&&h.colors[0]);y&&(y.data=F,y.value=U);return y||U},_interpolateData:function(b){if(b)if(b.colors||b.opacityValues){var h=(b.colors||b.opacityValues).length,c=b.minDataValue,v=(b.maxDataValue-c)/(h-1);var u=[];for(b=0;b<h;b++)u[b]=c+b*v}else b.stops&&(u=b.stops.map(function(y){return y.value||0}));return u},_getOpacity:function(b,h,c){b=this._lookupData(b,c);h=h||this.opacityInfo;
if(b){c=b[0];var v=b[1];c===v?v=this._getOpacValue(h,c):(c=this._getOpacValue(h,c),h=this._getOpacValue(h,v),v=c+(h-c)*b[2])}return v},_getOpacValue:function(b,h){return b.opacityValues?b.opacityValues[h]:b.stops[h].opacity},_getColor:function(b,h,c){b=this._lookupData(b,c);h=h||this.colorInfo;if(b){var v=b[0];c=b[1];v=v===c?this._getColorObj(h,v):g.blendColors(this._getColorObj(h,v),this._getColorObj(h,c),b[2]);v=new g(v)}return v},_getColorObj:function(b,h){return b.colors?b.colors[h]:b.stops[h].color},
_lookupData:function(b,h){if(h){var c=0,v=h.length-1;h.some(function(y,C){if(b<y)return v=C,!0;c=C;return!1});var u=[c,v,(b-h[c])/(h[v]-h[c])]}return u},_processForContext:function(b,h,c){if(h&&"web-scene"===h.origin){var v=null!=b.expression,u=null!=b.valueExpressionTitle&&"rotation"===b.type;h.messages&&(v&&h.messages.push(new m("property:unsupported",b.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+
".expression",context:h})),u&&h.messages.push(new m("property:unsupported",b.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".valueExpressionTitle",context:h})));v&&delete b.expression;u&&delete b.valueExpressionTitle}else"size"===b.type&&this._convertExpressionToArcade(b)},_writeRotationInfo:function(b,h,c){b&&(b=p.mixin({},b),this._processForContext(b,h,"visualVariables["+c+"]"),b.type=t.toJSON(b.type),
b=p.fixJson(b,!0));return b},_convertExpressionToArcade:function(b){b&&b.expression&&(b.valueExpression="$view.scale")},_writeSizeInfo:function(b,h,c){if(b){b=p.mixin({},b);this._processForContext(b,h,"string"===typeof c?c:"visualVariables["+c+"]");var v=b.minSize,u=b.maxSize;v&&(b.minSize="number"===typeof v?v:this._writeSizeInfo(v,h,"visualVariables["+c+"].minSize"));u&&(b.maxSize="number"===typeof u?u:this._writeSizeInfo(u,h,"visualVariables["+c+"].maxSize"));h=b.legendOptions;c=b.axis;b.type=
t.toJSON(b.type);c&&(b.axis=w.toJSON(c));h&&(b.legendOptions=p.mixin({},h),h=h.customValues)&&(b.legendOptions.customValues=h.slice(0));b.stops&&(b.stops=b.stops.map(function(y){y=p.mixin({},y);null===y.label&&delete y.label;return y}));b=p.fixJson(b,!0)}return b},_writeColorInfo:function(b,h,c){b&&(b=p.mixin({},b),this._processForContext(b,h,"visualVariables["+c+"]"),b.type=t.toJSON(b.type),b.colors&&(b.colors=b.colors.map(function(v){return g.toJSON(v)})),b.stops&&(b.stops=b.stops.map(function(v){v=
p.mixin({},v);v.color&&(v.color=g.toJSON(v.color));null==v.value&&(v.value=0);null===v.label&&delete v.label;return v})),b.legendOptions&&(b.legendOptions=p.mixin({},b.legendOptions)),b=p.fixJson(b,!0));return b},_writeOpacityInfo:function(b,h,c){if(b){var v=p.mixin({},b);this._processForContext(v,h,"visualVariables["+c+"]");v.type=t.toJSON(v.type);v.opacityValues&&(v.transparencyValues=v.opacityValues.map(A),delete v.opacityValues);v.stops&&(v.stops=v.stops.map(function(u){u=p.mixin({},u);u.transparency=
A(u.opacity);delete u.opacity;null===u.label&&delete u.label;return u}));v.legendOptions&&(v.legendOptions=p.mixin({},v.legendOptions));v=p.fixJson(v,!0)}return v}})})},"esri/layers/vectorTiles/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(r,n,a){Object.defineProperty(n,"__esModule",{value:!0});n.opacityToTransparency=function(l){l=a.ensureInteger(100*(1-l));return Math.max(0,Math.min(l,100))};n.transparencyToOpacity=function(l){return Math.max(0,
Math.min(1-l/100,1))}})},"esri/layers/vectorTiles/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ./AuthoringInfoVisualVariable".split(" "),function(r,n,a,l,k,p,m,e,f){var g=p({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",
esriClassifyStandardDeviation:"standard-deviation"}),d=p({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size"});return function(q){function t(x){x=q.call(this)||this;x.lengthUnit=null;x.visualVariables=null;return x}a(t,q);var w=t;Object.defineProperty(t.prototype,"classificationMethod",{get:function(){if("class-breaks-size"===this.type||"class-breaks-color"===this.type){var x=this._get("classificationMethod");return x?x:"manual"}return null},
set:function(x){this._set("classificationMethod",x)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"fields",{get:function(){return"predominance"===this.type?this._get("fields"):null},set:function(x){this._set("fields",x)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"field1",{get:function(){return"relationship"===this.type?this._get("field1"):null},set:function(x){this._set("field1",x)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"field2",
{get:function(){return"relationship"===this.type?this._get("field2"):null},set:function(x){this._set("field2",x)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"focus",{get:function(){return"relationship"===this.type?this._get("focus"):null},set:function(x){this._set("focus",x)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"numClasses",{get:function(){return"relationship"===this.type?this._get("numClasses"):null},set:function(x){this._set("numClasses",x)},
enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"standardDeviationInterval",{get:function(){return"standard-deviation"===this.classificationMethod?this._get("standardDeviationInterval"):null},set:function(x){this._set("standardDeviationInterval",x)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"type",{get:function(){return this._get("type")},set:function(x){var z=x;"classed-size"===x?z="class-breaks-size":"classed-color"===x&&(z="class-breaks-color");this._set("type",
z)},enumerable:!0,configurable:!0});t.prototype.clone=function(){return new w({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),field1:m.clone(this.field1),field2:m.clone(this.field2),focus:this.focus,numClasses:this.numClasses,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(x){return x.clone()})})};l([e.property({type:String,value:null,
dependsOn:["type"],json:{read:g.read,write:g.write}})],t.prototype,"classificationMethod",null);l([e.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"fields",null);l([e.property({value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"field1",null);l([e.property({value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"field2",null);l([e.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"focus",null);l([e.property({type:Number,
value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"numClasses",null);l([e.property({type:String,json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],t.prototype,"lengthUnit",void 0);l([e.property({type:Number,value:null,dependsOn:["classificationMethod"],json:{write:!0}})],t.prototype,"standardDeviationInterval",null);l([e.property({type:String,value:null,json:{read:d.read,write:d.write}})],t.prototype,"type",null);l([e.property({type:[f],json:{write:!0}})],t.prototype,"visualVariables",
void 0);return t=w=l([e.subclass("esri.renderers.support.AuthoringInfo")],t)}(e.declared(k))})},"esri/layers/vectorTiles/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),function(r,n,a,l,k,p,m,e){var f=p({percentTotal:"percent-of-total"}),g=p({sizeInfo:"size",
colorInfo:"color",transparencyInfo:"opacity"}),d={key:function(q){return"number"===typeof q?"number":"string"},typeMap:{number:Number,string:String},base:null};return function(q){function t(x){x=q.call(this)||this;x.endTime=null;x.field=null;x.maxSliderValue=null;x.minSliderValue=null;x.startTime=null;x.type=null;x.units=null;return x}a(t,q);var w=t;t.prototype.castEndTime=function(x){return"string"===typeof x||"number"===typeof x?x:null};t.prototype.castStartTime=function(x){return"string"===typeof x||
"number"===typeof x?x:null};Object.defineProperty(t.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(x){this._set("style",x)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(x){this._set("theme",x)},enumerable:!0,configurable:!0});t.prototype.clone=function(){return new w({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,
minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};l([m.property({types:d,json:{write:!0}})],t.prototype,"endTime",void 0);l([e.cast("endTime")],t.prototype,"castEndTime",null);l([m.property({type:String,json:{write:!0}})],t.prototype,"field",void 0);l([m.property({type:Number,json:{write:!0}})],t.prototype,"maxSliderValue",void 0);l([m.property({type:Number,json:{write:!0}})],t.prototype,"minSliderValue",void 0);l([m.property({types:d,
json:{write:!0}})],t.prototype,"startTime",void 0);l([e.cast("startTime")],t.prototype,"castStartTime",null);l([m.property({type:String,value:null,dependsOn:["type"],json:{read:f.read,write:f.write}})],t.prototype,"style",null);l([m.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"theme",null);l([m.property({type:String,json:{read:g.read,write:g.write}})],t.prototype,"type",void 0);l([m.property({type:String,json:{write:!0}})],t.prototype,"units",void 0);return t=
w=l([m.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],t)}(m.declared(k))})},"esri/layers/vectorTiles/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(r,n,a,l,k,p){Object.defineProperty(n,"__esModule",{value:!0});r=function(m){function e(){var g=null!==m&&m.apply(this,arguments)||this;g.title=null;return g}
a(e,m);var f=e;e.prototype.clone=function(){return new f({title:this.title})};l([p.property({type:String,json:{write:!0}})],e.prototype,"title",void 0);return e=f=l([p.subclass("esri.renderers.support.LegendOptions")],e)}(p.declared(k));n.LegendOptions=r;n.default=r})},"esri/layers/vectorTiles/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(r,n,a,l,k,p,m,e){Object.defineProperty(n,"__esModule",{value:!0});r=function(f){function g(){var q=null!==f&&f.apply(this,arguments)||this;q.description=null;q.label=null;q.minValue=null;q.maxValue=0;q.symbol=null;return q}a(g,f);var d=g;g.prototype.clone=function(){return new d({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};l([p.property({type:String,json:{write:!0}})],g.prototype,"description",
void 0);l([p.property({type:String,json:{write:!0}})],g.prototype,"label",void 0);l([p.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],g.prototype,"minValue",void 0);l([p.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],g.prototype,"maxValue",void 0);l([p.property({types:e.rendererTypes,json:{origins:{"web-scene":{read:m.read,write:{target:{symbol:{types:e.rendererTypes3D}},writer:m.writeTarget}}},read:m.read,
write:m.writeTarget}})],g.prototype,"symbol",void 0);return g=d=l([p.subclass("esri.renderers.support.ClassBreakInfo")],g)}(p.declared(k));n.ClassBreakInfo=r;n.default=r})},"esri/layers/vectorTiles/renderers/HeatmapRenderer":function(){define(["require","exports","../core/tsSupport/declareExtendsHelper","./Renderer"],function(r,n,a,l){return function(k){function p(){var m=null!==k&&k.apply(this,arguments)||this;m.type="heatmap";return m}a(p,k);return p}(l)})},"esri/layers/vectorTiles/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),
function(r,n,a,l,k,p,m,e,f){return function(g){function d(){var t=null!==g&&g.apply(this,arguments)||this;t.description=null;t.label=null;t.symbol=null;t.type="simple";return t}a(d,g);var q=d;d.prototype.writeSymbolWebScene=function(t,w,x,z){e.writeTarget(t,w,x,z)};d.prototype.writeSymbol=function(t,w,x,z){e.writeTarget(t,w,x,z)};d.prototype.readSymbol=function(t,w,x){return e.read(t,w,x)};d.prototype.getSymbol=function(t,w){return this.symbol};d.prototype.getSymbols=function(){return this.symbol?
[this.symbol]:[]};d.prototype.clone=function(){return new q({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:k.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};l([p.property({type:String,json:{write:!0}})],d.prototype,"description",void 0);l([p.property({type:String,json:{write:!0}})],d.prototype,"label",void 0);l([p.property({types:f.rendererTypes})],d.prototype,"symbol",void 0);l([p.writer("web-scene",
"symbol",{symbol:{types:f.rendererTypes3D}})],d.prototype,"writeSymbolWebScene",null);l([p.writer("symbol")],d.prototype,"writeSymbol",null);l([p.reader("symbol")],d.prototype,"readSymbol",null);return d=q=l([p.subclass("esri.renderers.SimpleRenderer")],d)}(p.declared(m))})},"esri/layers/vectorTiles/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../portal/Portal ./Renderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/styleUtils ../symbols/support/typeUtils".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B,b,h,c,v){var u=g.getLogger("esri.renderers.UniqueValueRenderer"),y=t.ensureType(B.default);return function(C){function D(F){F=C.call(this)||this;F._valueInfoMap={};F._isDefaultSymbolDerived=!1;F.type="unique-value";F.backgroundFillSymbol=null;F.field=null;F.field2=null;F.field3=null;F.valueExpression=null;F.valueExpressionTitle=null;F.legendOptions=null;F.defaultLabel=null;F.fieldDelimiter=null;F.portal=null;F.styleOrigin=null;F.diff={uniqueValueInfos:function(G,
J){if(G||J){if(!G||!J)return{type:"complete",oldValue:G,newValue:J};for(var R=!1,O={type:"collection",added:[],removed:[],changed:[],unchanged:[]},P=function(K){var V=m.find(G,function(Q){return Q.value===J[K].value});V?z.diff(V,J[K])?O.changed.push({type:"complete",oldValue:V,newValue:J[K]}):O.unchanged.push({oldValue:V,newValue:J[K]}):O.added.push(J[K]);R=!0},U=0;U<J.length;U++)P(U);P=function(K){m.find(J,function(V){return V.value===G[K].value})||(O.removed.push(G[K]),R=!0)};for(U=0;U<G.length;U++)P(U);
return R?O:void 0}}};F._set("uniqueValueInfos",[]);return F}a(D,C);var E=D;D.prototype.writeType=function(F,G,J,R){G.type="uniqueValue"};D.prototype.writeBackgroundFillSymbolWebScene=function(F,G,J,R){h.writeTarget(F,G,J,R)};D.prototype.castField=function(F){return null==F?F:"function"===typeof F?F:t.ensureString(F)};D.prototype.writeField=function(F,G,J,R){"string"===typeof F?G[J]=F:R&&R.messages?R.messages.push(new e("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):
u.error(".field: cannot write field to JSON since it's not a string value")};Object.defineProperty(D.prototype,"compiledFunc",{get:function(){return b.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(D.prototype,"defaultSymbol",{set:function(F){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",F)},enumerable:!0,configurable:!0});D.prototype.readDefaultSymbol=function(F,G,J){return h.read(F,G,J)};D.prototype.writeDefaultSymbolWebScene=function(F,G,
J,R){this._isDefaultSymbolDerived||h.writeTarget(F,G,J,R)};D.prototype.writeDefaultSymbol=function(F,G,J,R){this._isDefaultSymbolDerived||h.writeTarget(F,G,J,R)};D.prototype.readPortal=function(F,G,J){return J.portal||w.getDefault()};D.prototype.readStyleOrigin=function(F,G,J){if(G.styleName)return Object.freeze({styleName:G.styleName});if(G.styleUrl)return F=d.read(G.styleUrl,J),Object.freeze({styleUrl:F})};D.prototype.writeStyleOrigin=function(F,G,J,R){F.styleName?G.styleName=F.styleName:F.styleUrl&&
(G.styleUrl=d.write(F.styleUrl,R),d.isAbsolute(G.styleUrl)&&(G.styleUrl=d.normalize(G.styleUrl)))};Object.defineProperty(D.prototype,"uniqueValueInfos",{set:function(F){this.styleOrigin?u.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",F),this._updateValueInfoMap())},enumerable:!0,configurable:!0});D.prototype.addUniqueValueInfo=function(F,G){this.styleOrigin?u.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):
(F="object"===typeof F?y(F):new B.default({value:F,symbol:G}),this.uniqueValueInfos.push(F),this._valueInfoMap[F.value]=F)};D.prototype.removeUniqueValueInfo=function(F){if(this.styleOrigin)u.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var G=0;G<this.uniqueValueInfos.length;G++)if(this.uniqueValueInfos[G].value===F+""){delete this._valueInfoMap[F];this.uniqueValueInfos.splice(G,1);break}};D.prototype.getUniqueValueInfo=
function(F,G){var J=this.field,R=F.attributes;if(this.valueExpression)var O=b.executeFunction(this.compiledFunc,b.createExecContext(F,b.getViewInfo(G)));else"function"!==typeof J&&this.field2?(F=this.field2,G=this.field3,O=[],J&&O.push(R[J]),F&&O.push(R[F]),G&&O.push(R[G]),O=O.join(this.fieldDelimiter||"")):"function"===typeof J?O=J(F):J&&(O=R[J]);return this._valueInfoMap[O+""]};D.prototype.getSymbol=function(F,G){return(F=this.getUniqueValueInfo(F,G))&&F.symbol||this.defaultSymbol};D.prototype.getSymbols=
function(){for(var F=[],G=0,J=this.uniqueValueInfos;G<J.length;G++){var R=J[G];R.symbol&&F.push(R.symbol)}this.defaultSymbol&&F.push(this.defaultSymbol);return F};D.prototype.clone=function(){var F=new E({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:f.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:f.clone(this.visualVariables),legendOptions:f.clone(this.legendOptions),
authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:f.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(F._isDefaultSymbolDerived=!0);F._set("portal",this.portal);var G=f.clone(this.uniqueValueInfos);this.styleOrigin&&(F._set("styleOrigin",Object.freeze(f.clone(this.styleOrigin))),Object.freeze(G));F._set("uniqueValueInfos",G);F._updateValueInfoMap();return F};D.prototype.collectRequiredFields=function(F){this.inherited(arguments);[this.field,this.field2,
this.field3].forEach(function(G){G&&"string"===typeof G&&(F[G]=!0)});this.valueExpression&&b.extractFieldNames(this.valueExpression).forEach(function(G){F[G]=!0})};D.prototype.populateFromStyle=function(){var F=this;return c.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(G){var J=[];F._valueInfoMap={};G&&G.data&&Array.isArray(G.data.items)&&G.data.items.forEach(function(R){var O=new p.WebStyleSymbol({styleUrl:G.styleUrl,styleName:G.styleName,portal:F.portal,name:R.name});F.defaultSymbol||
R.name!==G.data.defaultItem||(F.defaultSymbol=O,F._isDefaultSymbolDerived=!0);O=new B.default({value:R.name,symbol:O});J.push(O);F._valueInfoMap[R.name]=O});F._set("uniqueValueInfos",Object.freeze(J));!F.defaultSymbol&&F.uniqueValueInfos.length&&(F.defaultSymbol=F.uniqueValueInfos[0].symbol,F._isDefaultSymbolDerived=!0);return F})};D.prototype._updateValueInfoMap=function(){var F=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(G){return F._valueInfoMap[G.value+""]=G})};D.fromPortalStyle=
function(F,G){var J=new E(G&&G.properties);J._set("styleOrigin",Object.freeze({styleName:F}));J._set("portal",G&&G.portal||w.getDefault());G=J.populateFromStyle();G.catch(function(R){u.error("#fromPortalStyle('"+F+"'[, ...])","Failed to create unique value renderer from style name",R)});return G};D.fromStyleUrl=function(F,G){G=new E(G&&G.properties);G._set("styleOrigin",Object.freeze({styleUrl:F}));G=G.populateFromStyle();G.catch(function(J){u.error("#fromStyleUrl('"+F+"'[, ...])","Failed to create unique value renderer from style URL",
J)});return G};l([q.property()],D.prototype,"type",void 0);l([q.writer("type")],D.prototype,"writeType",null);l([q.property({types:{base:p.BaseSymbol,key:"type",typeMap:{"simple-fill":v.rendererTypes.typeMap["simple-fill"],"picture-fill":v.rendererTypes.typeMap["picture-fill"],"polygon-3d":v.rendererTypes.typeMap["polygon-3d"]}},json:{read:h.read,write:h.writeTarget}})],D.prototype,"backgroundFillSymbol",void 0);l([q.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:p.PolygonSymbol3D}})],
D.prototype,"writeBackgroundFillSymbolWebScene",null);l([q.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],D.prototype,"field",void 0);l([q.cast("field")],D.prototype,"castField",null);l([q.writer("field")],D.prototype,"writeField",null);l([q.property({type:String,json:{write:!0}})],D.prototype,"field2",void 0);l([q.property({type:String,json:{write:!0}})],D.prototype,"field3",void 0);l([q.property({type:String,json:{write:!0}})],D.prototype,"valueExpression",void 0);
l([q.property({type:String,json:{write:!0}})],D.prototype,"valueExpressionTitle",void 0);l([q.property({dependsOn:["valueExpression"]})],D.prototype,"compiledFunc",null);l([q.property({type:A.default,json:{write:!0}})],D.prototype,"legendOptions",void 0);l([q.property({type:String,json:{write:!0}})],D.prototype,"defaultLabel",void 0);l([q.property({types:v.rendererTypes})],D.prototype,"defaultSymbol",null);l([q.reader("defaultSymbol")],D.prototype,"readDefaultSymbol",null);l([q.writer("web-scene",
"defaultSymbol",{defaultSymbol:{types:v.rendererTypes3D}})],D.prototype,"writeDefaultSymbolWebScene",null);l([q.writer("defaultSymbol")],D.prototype,"writeDefaultSymbol",null);l([q.property({type:String,json:{write:!0}})],D.prototype,"fieldDelimiter",void 0);l([q.property({type:w,readOnly:!0})],D.prototype,"portal",void 0);l([q.reader("portal",["styleName"])],D.prototype,"readPortal",null);l([q.property({readOnly:!0})],D.prototype,"styleOrigin",void 0);l([q.reader("styleOrigin",["styleName","styleUrl"])],
D.prototype,"readStyleOrigin",null);l([q.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],D.prototype,"writeStyleOrigin",null);l([q.property({type:[B.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],D.prototype,"uniqueValueInfos",null);l([q.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],D.prototype,"requiredFields",void 0);l([k(1,q.cast(v.ensureType))],D.prototype,"addUniqueValueInfo",null);
return D=E=l([q.subclass("esri.renderers.UniqueValueRenderer")],D)}(q.declared(x))})},"esri/layers/vectorTiles/core/tsSupport/paramHelper":function(){define([],function(){return function(r,n){return function(a,l){n(a,l,r)}}})},"esri/layers/vectorTiles/core/arrayUtils":function(){define(["require","exports"],function(r,n){function a(d,q,t){for(var w=d.length,x=0;x<w;x++)if(q.call(t,d[x],x,d))return x;return-1}function l(d,q,t,w){void 0===t&&(t=d.length);w=w||g;for(var x=Math.max(0,w.last-10),z=-1,
A=x;A<t;++A)if(d[A]===q){z=A;break}if(-1===z){for(A=0;A<x;++A)if(d[A]===q){z=A;break}if(-1===z)return}d[z]=d[t-1];d.pop();w.last=z;return q}function k(d,q,t,w){void 0===t&&(t=d.length);var x=[];q.forEach(function(z){void 0!==l(d,z,t,w)&&(x.push(z),--t)});return x}function p(d,q){return-1===d.indexOf(q)}function m(d,q,t){return!d.some(q.bind(null,t))}function e(d){return d}Object.defineProperty(n,"__esModule",{value:!0});n.findIndex=a;n.find=function(d,q,t){for(var w=d.length,x=0;x<w;x++){var z=d[x];
if(q.call(t,z,x,d))return z}};n.unique=function(d){return d.filter(function(q,t,w){return w.indexOf(q)===t})};n.equals=function(d,q,t){if(!d&&!q)return!0;if(!d||!q||d.length!==q.length)return!1;if(t)for(var w=0;w<d.length;w++){if(!t(d[w],q[w]))return!1}else for(w=0;w<d.length;w++)if(d[w]!==q[w])return!1;return!0};n.difference=function(d,q,t){if(t){var w=q.filter(m.bind(null,d,t));d=d.filter(m.bind(null,q,t))}else w=q.filter(p.bind(null,d)),d=d.filter(p.bind(null,q));return{added:w,removed:d}};n.intersect=
function(d,q,t){return d&&q?t?d.filter(function(w){return-1<a(q,function(x){return t(w,x)})}):d.filter(function(w){return-1<q.indexOf(w)}):[]};n.constant=function(d,q){for(var t=Array(d),w=0;w<d;w++)t[w]=q;return t};n.range=function(d,q){void 0===q&&(q=d,d=0);for(var t=Array(q-d),w=d;w<q;w++)t[w-d]=w;return t};n.binaryIndexOf=function(d,q,t){for(var w=d.length,x=0,z=w-1;x<z;){var A=x+Math.floor((z-x)/2);q>d[A]?x=A+1:z=A}z=d[x];return t?q>=d[w-1]?-1:z===q?x:x-1:z===q?x:-1};var f=function(){return function(){this.last=
0}}();n.RemoveHint=f;var g=new f;r=function(){return function(d){var q=this;this._array=d;this._hint=new f;this.remove=function(t){return l(q._array,t,q._array.length,q._hint)};this.removeMany=function(t){return k(q._array,t,q._array.length,q._hint)}}}();n.UnorderedRemover=r;n.removeUnordered=l;n.removeUnorderedMany=k;n.keysOfMap=function(d){var q=[];d.forEach(function(t,w){return q.push(w)});return q};n.keysOfSet=function(d,q){void 0===q&&(q=e);var t=[];d.forEach(function(w){return t.push(q(w))});
return t}})},"esri/layers/vectorTiles/portal/Portal":function(){define(["require","exports"],function(r,n){return function(){function a(){}a.getDefault=function(){return null};return a}()})},"esri/layers/vectorTiles/renderers/support/diffUtils":function(){define(["require","exports","../../core/Accessor","../../core/Collection","../../core/accessorSupport/utils"],function(r,n,a,l,k){function p(q){return q instanceof l?Object.keys(q.items):q instanceof a?k.getProperties(q).keys():q?Object.keys(q):
[]}function m(q,t){return q instanceof l?q.items[t]:q[t]}function e(q,t){return Array.isArray(q)&&Array.isArray(t)?q.length!==t.length:!1}function f(q){return q?q.declaredClass:null}function g(q,t){var w=q.diff;if(w&&"function"===typeof w)return w(q,t);var x=p(q),z=p(t);if(0!==x.length||0!==z.length){if(!x.length||!z.length||e(q,t))return{type:"complete",oldValue:q,newValue:t};var A=z.filter(function(C){return-1===x.indexOf(C)}),B=x.filter(function(C){return-1===z.indexOf(C)});A=x.filter(function(C){return-1<
z.indexOf(C)&&m(q,C)!==m(t,C)}).concat(A,B).sort();if((B=f(q))&&-1<d.indexOf(B)&&A.length)return{type:"complete",oldValue:q,newValue:t};B=q instanceof a&&t instanceof a;for(var b in A){var h=A[b],c=m(q,h),v=m(t,h),u=void 0;if((B||"function"!==typeof c&&"function"!==typeof v)&&c!==v&&(null!=c||null!=v)&&(u=w&&w[h]&&"function"===typeof w[h]?w[h](c,v):"object"===typeof c&&"object"===typeof v&&f(c)===f(v)?g(c,v):{type:"complete",oldValue:c,newValue:v})){var y=y||{type:"partial",diff:{}};y.diff[h]=u}}return y}}
Object.defineProperty(n,"__esModule",{value:!0});var d=["esri.Color","esri.portal.Portal"];n.diff=function(q,t){if("function"!==typeof q&&"function"!==typeof t&&(q||t))return!q||!t||"object"===typeof q&&"object"===typeof t&&f(q)!==f(t)?{type:"complete",oldValue:q,newValue:t}:g(q,t)}})},"esri/layers/vectorTiles/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t){function w(D){return D?D.isInstanceOf&&D.isInstanceOf(C):!1}function x(D){return D?w(D)?D.toArray():D.length?Array.prototype.slice.apply(D):[]:[]}function z(D){if(D&&D.length)return D[0]}function A(D,E,F,G){E&&E.forEach(function(J,R,O){D.push(J);A(D,F.call(G,J,R,O),F,G)})}r=function(){function D(){this.target=null;this.defaultPrevented=this.cancellable=!1}D.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};D.prototype.reset=function(E){this.defaultPrevented=
!1;this.item=E};return D}();var B=function(){},b=new g(r,!0,function(D){D.item=null;D.target=null}),h=new Set,c=new Set,v=new Set,u=new Map,y=0,C=function(D){function E(G){G=D.call(this,G)||this;G._boundDispatch=G._dispatchColChange.bind(G);G._chgListeners=[];G._notifications=null;G._timer=null;G.length=0;G._items=[];Object.defineProperty(G,"uid",{value:y++});return G}a(E,D);var F=E;E.ofType=function(G){if(!G)return F;if(u.has(G))return u.get(G);if("function"===typeof G)var J=G.prototype.declaredClass;
else if(G.base)J=G.base.prototype.declaredClass;else for(var R in G.typeMap){var O=G.typeMap[R].prototype.declaredClass;J=J?J+(" | "+O):O}J=F.createSubclass({declaredClass:"esri.core.Collection\x3c"+J+"\x3e"});R={Type:G,ensureType:"function"===typeof G?t.ensureType(G):t.ensureOneOfType(G)};Object.defineProperty(J.prototype,"itemType",{value:R});u.set(G,J);return J};E.prototype.normalizeCtorArgs=function(G){return G?Array.isArray(G)||w(G)?{items:G}:G:{}};Object.defineProperty(E.prototype,"items",{get:function(){return this._items},
set:function(G){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(x(G))),this._emitAfterChanges())},enumerable:!0,configurable:!0});E.prototype.on=function(G,J){var R;Array.isArray(G)?R=G:-1<G.indexOf(",")&&(R=G.split(/\s*,\s*/));if(R){var O=[];for(G=0;G<R.length;G++)O.push(this.on(R[G],J));O.remove=function(){for(var K=0;K<O.length;K++)O[K].remove()};return O}if("change"===G){var P=this._chgListeners,U={removed:!1,callback:J};P.push(U);this._notifications&&this._notifications.push({listeners:P.slice(),
items:this._items.slice(),changes:[]});return{remove:function(){this.remove=B;U.removed=!0;P.splice(P.indexOf(U),1)}}}return k.after(this,"on"+G,J,!0)};E.prototype.hasEventListener=function(G){return"change"===G?0<this._chgListeners.length:this.inherited(arguments)};E.prototype.add=function(G,J){if(this._emitBeforeChanges())return this;J=this.getNextIndex(J);this._splice(J,0,G);this._emitAfterChanges();return this};E.prototype.addMany=function(G,J){void 0===J&&(J=this._items.length);if(!G||!G.length||
this._emitBeforeChanges())return this;J=this.getNextIndex(J);this._splice.apply(this,[J,0].concat(x(G)));this._emitAfterChanges();return this};E.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var G=this._splice(0,this.length)||[];this._emitAfterChanges();return G};E.prototype.clone=function(){return this._createNewInstance({items:this._items.map(f.clone)})};E.prototype.concat=function(){for(var G=[],J=0;J<arguments.length;J++)G[J]=arguments[J];G=G.map(x);return this._createNewInstance({items:(R=
this._items).concat.apply(R,G)});var R};E.prototype.drain=function(G,J){if(this.length&&!this._emitBeforeChanges()){for(var R=this._splice(0,this.length),O=R.length,P=0;P<O;P++)G.call(J,R[P],P,R);this._emitAfterChanges()}};E.prototype.every=function(G,J){return this._items.every(G,J)};E.prototype.filter=function(G,J){var R=2===arguments.length?this._items.filter(G,J):this._items.filter(G);return this._createNewInstance({items:R})};E.prototype.find=function(G,J){if("function"!==typeof G)throw new TypeError(G+
" is not a function");for(var R=this._items,O=R.length,P=0;P<O;P++){var U=R[P];if(G.call(J,U,P,R))return U}};E.prototype.findIndex=function(G,J){if("function"!==typeof G)throw new TypeError(G+" is not a function");for(var R=this._items,O=R.length,P=0;P<O;P++)if(G.call(J,R[P],P,R))return P;return-1};E.prototype.flatten=function(G,J){var R=[];A(R,this,G,J);return new F(R)};E.prototype.forEach=function(G,J){for(var R=this._items,O=R.length,P=0;P<O;P++)G.call(J,R[P],P,R)};E.prototype.getItemAt=function(G){return this._items[G]};
E.prototype.getNextIndex=function(G){var J=this.length;G=null==G?J:G;0>G?G=0:G>J&&(G=J);return G};E.prototype.includes=function(G,J){void 0===J&&(J=0);return arguments.length?-1!==this._items.indexOf(G,J):!1};E.prototype.indexOf=function(G,J){void 0===J&&(J=0);return this._items.indexOf(G,J)};E.prototype.join=function(G){void 0===G&&(G=",");return this._items.join(G)};E.prototype.lastIndexOf=function(G,J){void 0===J&&(J=this.length-1);return this._items.lastIndexOf(G,J)};E.prototype.map=function(G,
J){G=this._items.map(G,J);return new F({items:G})};E.prototype.reorder=function(G,J){void 0===J&&(J=this.length-1);var R=this.indexOf(G);if(-1!==R){0>J?J=0:J>=this.length&&(J=this.length-1);if(R!==J){if(this._emitBeforeChanges())return G;this._splice(R,1);this._splice(J,0,G);this._emitAfterChanges()}return G}};E.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var G=z(this._splice(this.length-1,1));this._emitAfterChanges();return G}};E.prototype.push=function(){for(var G=[],J=
0;J<arguments.length;J++)G[J]=arguments[J];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(G));this._emitAfterChanges();return this.length};E.prototype.reduce=function(G,J){var R=this._items;return 2===arguments.length?R.reduce(G,J):R.reduce(G)};E.prototype.reduceRight=function(G,J){var R=this._items;return 2===arguments.length?R.reduceRight(G,J):R.reduceRight(G)};E.prototype.remove=function(G){return this.removeAt(this.indexOf(G))};E.prototype.removeAt=
function(G){if(!(0>G||G>=this.length||this._emitBeforeChanges()))return G=z(this._splice(G,1)),this._emitAfterChanges(),G};E.prototype.removeMany=function(G){if(!G||!G.length||this._emitBeforeChanges())return[];G=w(G)?G.toArray():G;for(var J=this._items,R=[],O=G.length,P=0;P<O;P++){var U=J.indexOf(G[P]);if(-1<U){for(var K=P+1,V=U+1,Q=Math.min(G.length-K,J.length-V),W=0;W<Q&&G[K+W]===J[V+W];)W++;K=1+W;(U=this._splice(U,K))&&0<U.length&&R.push.apply(R,U);P+=K-1}}this._emitAfterChanges();return R};E.prototype.reverse=
function(){if(this._emitBeforeChanges())return this;var G=this._splice(0,this.length);G&&(G.reverse(),this._splice.apply(this,[0,0].concat(G)));this._emitAfterChanges();return this};E.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var G=z(this._splice(0,1));this._emitAfterChanges();return G}};E.prototype.slice=function(G,J){void 0===G&&(G=0);void 0===J&&(J=this.length);return this._createNewInstance({items:this._items.slice(G,J)})};E.prototype.some=function(G,J){return this._items.some(G,
J)};E.prototype.sort=function(G){if(!this.length||this._emitBeforeChanges())return this;var J=this._splice(0,this.length);arguments.length?J.sort(G):J.sort();this._splice.apply(this,[0,0].concat(J));return this};E.prototype.splice=function(G,J){for(var R=[],O=2;O<arguments.length;O++)R[O-2]=arguments[O];if(this._emitBeforeChanges())return[];R=this._splice.apply(this,[G,J].concat(R))||[];this._emitAfterChanges();return R};E.prototype.toArray=function(){return this._items.slice()};E.prototype.toJSON=
function(){return this.toArray()};E.prototype.toLocaleString=function(){return this._items.toLocaleString()};E.prototype.toString=function(){return this._items.toString()};E.prototype.unshift=function(){for(var G=[],J=0;J<arguments.length;J++)G[J]=arguments[J];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(G));this._emitAfterChanges();return this.length};E.prototype._createNewInstance=function(G){return new this.constructor(G)};E.prototype._splice=function(G,
J){for(var R=[],O=2;O<arguments.length;O++)R[O-2]=arguments[O];O=this._items;var P=this.constructor.prototype.itemType;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=d.schedule(this._boundDispatch));if(J){var U=O.splice(G,J);if(this.hasEventListener("before-remove")){var K=b.acquire();K.target=this;K.cancellable=!0;for(var V=0,Q=U.length;V<Q;V++){var W=
U[V];K.reset(W);this.emit("before-remove",K);K.defaultPrevented&&(U.splice(V,1),O.splice(G,0,W),G+=1,--V,--Q)}b.release(K)}this.length=this._items.length;if(this.hasEventListener("after-remove")){W=b.acquire();W.target=this;W.cancellable=!1;Q=U.length;for(V=0;V<Q;V++)W.reset(U[V]),this.emit("after-remove",W);b.release(W)}}if(R&&R.length){if(P){V=[];for(Q=0;Q<R.length;Q++)W=R[Q],K=P.ensureType(W),null==K&&null!=W||V.push(K);R=V}P=this.hasEventListener("before-add");V=this.hasEventListener("after-add");
Q=G===this.length;if(P||V){W=b.acquire();W.target=this;W.cancellable=!0;K=b.acquire();K.target=this;K.cancellable=!1;for(var N=0,I=R;N<I.length;N++){var S=I[N];P?(W.reset(S),this.emit("before-add",W),W.defaultPrevented||(Q?O.push(S):O.splice(G++,0,S),this._set("length",O.length),V&&(K.reset(S),this.emit("after-add",K)))):(Q?O.push(S):O.splice(G++,0,S),this._set("length",O.length),K.reset(S),this.emit("after-add",K))}b.release(W)}else Q?O.push.apply(O,R):O.splice.apply(O,[G,0].concat(R)),this._set("length",
O.length)}(R&&R.length||U&&U.length)&&this._notifyChangeEvent(R,U);return U};E.prototype._emitBeforeChanges=function(){var G=!1;if(this.hasEventListener("before-changes")){var J=b.acquire();J.target=this;J.cancellable=!0;this.emit("before-changes",J);G=J.defaultPrevented;b.release(J)}return G};E.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var G=b.acquire();G.target=this;G.cancellable=!1;this.emit("after-changes",G);b.release(G)}};E.prototype._notifyChangeEvent=
function(G,J){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:G,removed:J})};E.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var G=this._notifications;this._notifications=null;for(var J=function(P){var U=P.changes;h.clear();c.clear();v.clear();for(var K=0;K<U.length;K++){var V=U[K],Q=V.added;V=V.removed;if(Q)if(0===v.size&&0===c.size)for(var W=0,N=Q;W<N.length;W++)Q=N[W],h.add(Q);
else for(W=0,N=Q;W<N.length;W++)Q=N[W],c.has(Q)?(v.add(Q),c.delete(Q)):v.has(Q)||h.add(Q);if(V)if(0===v.size&&0===h.size)for(W=0;W<V.length;W++)Q=V[W],c.add(Q);else for(W=0;W<V.length;W++)Q=V[W],h.has(Q)?h.delete(Q):(v.delete(Q),c.add(Q))}var I=m.acquire();h.forEach(function(ha){I.push(ha)});var S=m.acquire();c.forEach(function(ha){S.push(ha)});var Z=R._items,ca=P.items,fa=m.acquire();v.forEach(function(ha){ca.indexOf(ha)!==Z.indexOf(ha)&&fa.push(ha)});if(P.listeners&&(I.length||S.length||fa.length))for(U=
{target:R,added:I,removed:S,moved:fa},K=P.listeners.length,Q=0;Q<K;Q++)V=P.listeners[Q],V.removed||V.callback.call(R,U);m.release(I);m.release(S);m.release(fa)},R=this,O=0;O<G.length;O++)J(G[O]);h.clear();c.clear();v.clear()}};E.isCollection=w;l([q.property()],E.prototype,"length",void 0);l([q.property()],E.prototype,"items",null);return E=F=l([q.subclass("esri.core.Collection")],E)}(q.declared(p,e));return C})},"esri/layers/vectorTiles/core/Evented":function(){define(["require","exports","dojo/aspect",
"dojo/on"],function(r,n,a,l){function k(p,m,e,f){var g;Array.isArray(m)?g=m:-1<m.indexOf(",")&&(g=m.split(/\s*,\s*/));if(g){var d=[];for(m=0;m<g.length;m++)d.push(k(p,g[m],e,f));d.remove=function(){for(var q=0;q<d.length;q++)d[q].remove()};return d}return f(p,m)}return function(){function p(){}p.prototype.emit=function(m,e){if(this.hasEventListener(m))return e=e||{},e.target||(e.target=this),l.emit(this,m,e)};p.prototype.on=function(m,e){return k(this,m,e,function(f,g){return a.after(f,"on"+g,e,!0)})};
p.prototype.hasEventListener=function(m){m="on"+m;return!(!this[m]||!this[m].after)};return p}()})},"esri/layers/vectorTiles/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(r,n,a,l,k,p,m,e){Object.defineProperty(n,"__esModule",{value:!0});r=function(f){function g(){var q=
null!==f&&f.apply(this,arguments)||this;q.description=null;q.label=null;q.symbol=null;q.value=null;return q}a(g,f);var d=g;g.prototype.clone=function(){return new d({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};l([p.property({type:String,json:{write:!0}})],g.prototype,"description",void 0);l([p.property({type:String,json:{write:!0}})],g.prototype,"label",void 0);l([p.property({types:e.rendererTypes,json:{origins:{"web-scene":{read:m.read,
write:{target:{symbol:{types:e.rendererTypes3D}},writer:m.writeTarget}}},read:m.read,write:m.writeTarget}})],g.prototype,"symbol",void 0);l([p.property({type:String,json:{write:!0}})],g.prototype,"value",void 0);return g=d=l([p.subclass("esri.renderers.support.UniqueValueInfo")],g)}(p.declared(k));n.UniqueValueInfo=r;n.default=r})},"esri/layers/vectorTiles/symbols/support/styleUtils":function(){define(["require","exports","../../core/promiseUtils","../../core/Error"],function(r,n,a,l){Object.defineProperty(n,
"__esModule",{value:!0});n.fetchStyle=function(k,p){return a.reject(new l("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}})},"esri/layers/vectorTiles/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),function(r,n,a,l,k,p,m,e,f){function g(t,w,x){if(!t)return null;if(t&&(t.styleName||
t.styleUrl)&&"uniqueValue"!==t.type)return x&&x.messages&&x.messages.push(new k("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:x})),null;w=t?q[t.type]||null:null;if(w)return w=new w,w.read(t,x),w;x&&x.messages&&t&&x.messages.push(new k("renderer:unsupported","Renderers of type '"+(t.type||"unknown")+"' are not supported",{definition:t,context:x}));return null}function d(t,w,x){return t?x&&"web-scene"===x.origin&&"heatmap"===
t.type?(x.messages&&x.messages.push(new a("renderer:unsupported","Renderer of type '"+t.declaredClass+"' are not supported in scenes.",{renderer:t,context:x})),null):t.write(w,x):null}Object.defineProperty(n,"__esModule",{value:!0});var q={simple:e,uniqueValue:f,classBreaks:p,heatmap:m};n.read=g;n.writeTarget=function(t,w,x,z){(t=d(t,{},z))&&l.setDeepValue(x,t,w)};n.write=d;n.fromJSON=function(t,w){return g(t,null,w)}})},"esri/layers/vectorTiles/core/executeAsync":function(){define("require exports dojo/has ./nextTick ./now ./promiseUtils".split(" "),
function(r,n,a,l,k,p){function m(){var d=0===e.length;if(!d){for(var q=k();!d&&6>k()-q;){var t=e[g];if(t){if(!0===t()){var w=f.get(t);e[g]=null;f.delete(t);w()}g=(g+1)%e.length}else e.splice(g,1),g=(d=0===e.length)?0:g%e.length}d||l(m)}}var e=[],f=new Map,g=0;return function(d){return d?p.create(function(q){e.push(d);f.set(d,q);1===e.length&&l(m)},function(){e[e.indexOf(d)]=null;f.delete(d)}):p.reject(new TypeError("callback is not a function"))}})},"esri/layers/vectorTiles/core/MapPool":function(){define(["require",
"exports","./ObjectPool"],function(r,n,a){r=function(){function k(p,m){void 0===p&&(p=50);void 0===m&&(m=50);this._pool=new a(Map,!1,function(e){return e.clear()},m,p)}k.prototype.acquire=function(){return this._pool.acquire()};k.prototype.release=function(p){this._pool.release(p)};k.acquire=function(){return l.acquire()};k.release=function(p){return l.release(p)};return k}();var l=new r(100);return r})},"esri/layers/vectorTiles/core/SetPool":function(){define(["require","exports","./ObjectPool"],
function(r,n,a){r=function(){function k(p,m){void 0===p&&(p=50);void 0===m&&(m=50);this._pool=new a(Set,!1,function(e){return e.clear()},m,p)}k.prototype.acquire=function(){return this._pool.acquire()};k.prototype.release=function(p){this._pool.release(p)};k.acquire=function(){return l.acquire()};k.release=function(p){return l.release(p)};return k}();var l=new r(100);return r})},"esri/layers/vectorTiles/views/2d/engine/webgl/rendererInfoUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../Graphic ../../../../arcade/Feature ../../../../support/arcadeUtils ./enums ./visualVariablesUtils".split(" "),
function(r,n,a,l,k,p,m,e){function f(d,q,t){if(!d)return null;var w=0,x={};d=d.clone();var z=d.visualVariables,A=null;if("simple"!==d.type){var B=d.valueExpression;if(!d.field&&B){var b="$$fake"+w++,h=p.createFunction(B);x[b]=function(c,v){g.repurposeFromGraphicLikeObject(c.geometry,c.attributes,t);return p.executeFunction(h,{vars:{$feature:g,$view:p.getViewInfo(v)},spatialReference:q})};d.field=b;d.valueExpression=null;A=function(c,v){v.attributes[b]=x[b](v);return c.valueExpression?c.getSymbol(l.fromJSON(v)):
c.getSymbol(v)}}}z&&(d.visualVariables=z.map(function(c){if(c.normalizationField){var v=c.field,u=c.normalizationField,y="$$fake"+w++;x[y]=function(E,F){return E.attributes[v]/E.attributes[u]};c=a({},c);c.field=y;delete c.normalizationField;return c}if(c.valueExpression&&"$view.scale"!==c.valueExpression){var C=c.valueExpression;y="$$fake"+w++;var D=p.createFunction(C);x[y]=function(E,F){g.repurposeFromGraphicLikeObject(E.geometry,E.attributes,t);return p.executeFunction(D,{vars:{$feature:g,$view:p.getViewInfo(F)},
spatialReference:q})};c=a({},c);c.field=y;delete c.valueExpression;return c}return c}));return{renderer:d,normalizingFunctions:x,getSymbolFunction:A}}Object.defineProperty(n,"__esModule",{value:!0});var g=new k;n.createRendererInfo=function(d,q,t){var w=(q=f(d,q,t)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},q.normalizingFunctions),x=q&&q.getSymbolFunction;d=q&&q.renderer||d;q=e.convertVisualVariables(d.visualVariables);return{renderer:d,vvFields:q.vvFields,vvRanges:q.vvRanges,
getValue:function(z,A){var B=w[A];return B?B(z):z.attributes[A]},getSymbol:function(z){return x?x(this.renderer,z):this.renderer.getSymbol?this.renderer.getSymbol.call(this.renderer,z):null}}};n.getNormalizedRenderer=function(d,q,t){return(q=f(d,q,t)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},q.renderer)||d};n.getSymbol=function(d,q){return d.getSymbol(q)};n.isRendererWebGLCompatible=function(d){if(!d||-1===["simple","class-breaks","unique-value","heatmap"].indexOf(d.type))return!1;
if(d.visualVariables){var q=0;for(d=d.visualVariables;q<d.length;q++){var t=d[q];switch(t.type){case "color":case "opacity":if(t.stops&&8<t.stops.length)return!1;break;case "size":if(e.getTypeOfSizeVisualVariable(t)===m.WGLVVFlag.SIZE_FIELD_STOPS&&t.stops&&6<t.stops.length)return!1}}}return!0}})},"esri/layers/vectorTiles/views/2d/layers/features/tileRenderers/SymbolTileRenderer":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../renderers ../../../../../core/Accessor ../../../../../core/accessorSupport/decorators ../../../../../geometry/support/aaBoundingRect ../../../../../renderers/support/diffUtils ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/visualVariablesUtils ../../../engine/webgl/WGLFeatureView ../../../engine/webgl/WGLTile ./BaseTileRenderer".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w){function x(z){for(var A in z.diff){var B=z.diff[A];if("collection"===B.type){if(0!==B.changed.length||0!==B.added.length||0!==B.removed.length)return!0}else if("visualVariables"!==A&&"authoringInfo"!==A)return!0}return!1}Object.defineProperty(n,"__esModule",{value:!0});r=function(z){function A(B){return z.call(this)||this}a(A,z);A.prototype.initialize=function(){};A.prototype.createTile=function(B){var b=e.create();this.tileInfoView.getTileBounds(b,B);return new t(B,
b)};A.prototype.disposeTile=function(B){this._featuresView.removeChild(B)};A.prototype.highlight=function(B){return this._featuresView.highlight(B)};A.prototype.hitTest=function(B,b){return this._featuresView.hitTest(B,b)};A.prototype.supportsRenderer=function(B){return null!=B&&g.isRendererWebGLCompatible(B)&&-1!==["simple","class-breaks","unique-value"].indexOf(B.type)};A.prototype.getProcessorConfiguration=function(){var B=this.layer;return{type:"symbol",renderer:B.renderer.toJSON(),devicePixelRatio:window.devicePixelRatio||
1,definitionExpression:B.definitionExpression,outFields:B.outFields.slice().sort(),gdbVersion:B.gdbVersion,historicMoment:B.historicMoment&&B.historicMoment.getTime(),labelingInfo:B.labelingInfo&&B.labelingInfo.map(function(b){return b.toJSON()})}};A.prototype.needsProcessorReconfiguration=function(B){var b=this.configuration;if(!b||b.definitionExpression!==B.definitionExpression||b.outFields.join()!==B.outFields.join())return!0;b=this.configuration&&k.fromJSON(this.configuration.renderer)||null;
B=B&&k.fromJSON(B.renderer)||null;b=f.diff(b,B);if(!b)return!1;switch(b.type){case "complete":return!0;case "partial":if(x(b))return!0;if(b.diff.visualVariables){b=this._featuresView.visualVariablesInfo;var h=this.tileInfoView.tileInfo.spatialReference,c={fields:this.layer.fields.map(function(v){return v.toJSON()})};B=g.getNormalizedRenderer(B,h,c);B=d.convertVisualVariables(B.visualVariables).vvFields;return f.diff(b.vvFields,B)?!0:!1}}};A.prototype.applyConfiguration=function(B,b){var h=k.fromJSON(B.renderer),
c={fields:this.layer.fields.map(function(v){return v.toJSON()})};h=g.getNormalizedRenderer(h,this.tileInfoView.tileInfo.spatialReference,c);this.configuration=B;this._featuresView.visualVariablesInfo=d.convertVisualVariables(h.visualVariables);b&&this._featuresView.disposeWebGLResources()};A.prototype.install=function(B){var b=new q.default({highlightOptions:this.highlightOptions,tileInfoView:this.tileInfoView,layer:this.layer,layerView:this.layerView});this._featuresView=b;b.install(B)};A.prototype.uninstall=
function(B){this._featuresView.uninstall(B)};A.prototype.onTileData=function(B){var b=this.tiles.get(B.tileKey);b&&(this._featuresView.onTileData(b,B.data),this.requestUpdate())};A.prototype.onTileDataUpdate=function(B){var b=this.tiles.get(B.tileId);b&&(this._featuresView.onTileDataUpdate(b,B.data),this.requestUpdate())};A.prototype.onTileError=function(B){if(B=this.tiles.get(B.tileKey))this._featuresView.onTileError(B),this.requestUpdate()};A.prototype.getMaterialItems=function(B){return this._featuresView.getMaterialItems(B)};
return A=l([m.subclass()],A)}(m.declared(p,w.default));n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLTile":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/libs/gl-matrix/mat2d ../../../../core/libs/gl-matrix/mat4 ../../../../core/libs/gl-matrix/vec2 ../DisplayObject ./definitions ./DirtyMap ./DisplayRecordStore ./enums ./number ./Utils ./WGLBuffers ./WGLDisplayList ./WGLDisplayObject ../../tiling/enums ../../tiling/TileKey".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A,B){function b(h,c){return h.sortKey-c.sortKey}return function(h){function c(v,u){var y=h.call(this)||this;y.status=A.TileStatus.INITIALIZED;y._data=null;y.hlDisplayList=null;y._wglBuffers=null;y._dirtyMap=new f.default;y.coords=[0,0];y.bounds=[0,0,0,0];y.tileTransform={transform:Float32Array[16],screenTransform:Float32Array[16],displayCoord:Float32Array[2],screenCoord:Float32Array[2]};y._hasVisualVariables=!1;y._labelIndex=null;y.tileTransform.screenTransform=
l.create();y.tileTransform.transform=k.create();y.tileTransform.displayCoord=p.create();y.tileTransform.screenCoord=p.create();y.key=B.pool.acquire(v);y.coords[0]=u[0];y.coords[1]=u[3];y.bounds=u;return y}a(c,h);Object.defineProperty(c.prototype,"iconGeometry",{get:function(){return this.getGeometry(d.WGLGeometryType.MARKER)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"textGeometry",{get:function(){return this.getGeometry(d.WGLGeometryType.TEXT)},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"fillGeometry",{get:function(){return this.getGeometry(d.WGLGeometryType.FILL)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"lineGeometry",{get:function(){return this.getGeometry(d.WGLGeometryType.LINE)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"labelGeometry",{get:function(){return this.getGeometry(d.WGLGeometryType.LABEL)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"displayObjects",{get:function(){return this._data.tileDisplayData.displayObjects},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"canDisplay",{get:function(){return!!this.attached&&!!this._data},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isDirty",{get:function(){return this.status===A.TileStatus.MODIFIED},set:function(v){v&&this.status===A.TileStatus.READY?this.setStatus(A.TileStatus.MODIFIED):v||this.status!==A.TileStatus.MODIFIED||this.setStatus(A.TileStatus.READY);this.requestRender()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"hasData",{get:function(){return this.status===A.TileStatus.MODIFIED||this.status===A.TileStatus.READY},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"labelIndex",{get:function(){return this._labelIndex},enumerable:!0,configurable:!0});c.prototype.getGeometry=function(v){return this._wglBuffers&&this._wglBuffers.has(v)?this._wglBuffers.get(v):null};c.prototype.getDisplayList=function(v){switch(v){case d.WGLDrawPhase.HIGHLIGHT:return this.hlDisplayList;default:return this._data&&
this._data.tileDisplayData.displayList}};Object.defineProperty(c.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});c.prototype.setData=function(v,u,y){this._hasVisualVariables=u;v&&v.tileDisplayData?(this._dispRecStore=g.default.fromTileData(v,this._dirtyMap),this._data=v,v.tileBufferData.geometries[4].indexBuffer.length?(this.setStatus(y?A.TileStatus.MODIFIED:A.TileStatus.READY),this._rebuildLabelIndex()):this.setStatus(A.TileStatus.READY),this._dirtyMap.markAllDirty()):
(this.clear(),this.setStatus(A.TileStatus.NO_DATA))};c.prototype.patchData=function(v,u){this._data||(this.setData(v.addOrUpdate,this._hasVisualVariables,u),v.addOrUpdate=null);this._patchData(v)||(this._dirtyMap.markAllDirty(),this._data.reshuffle(),this._dispRecStore=g.default.fromTileData(this._data,this._dirtyMap));v.addOrUpdate.tileBufferData.geometries[4].indexBuffer.length?(this.setStatus(u?A.TileStatus.MODIFIED:A.TileStatus.READY),this._rebuildLabelIndex()):this.setStatus(A.TileStatus.READY)};
c.prototype.commitChanges=function(v){this._data&&this.status===A.TileStatus.READY&&(this._wglBuffers||(this._wglBuffers=new w.default(v.context,this._hasVisualVariables)),this._wglBuffers.upload(this._data.tileBufferData,this._dirtyMap),this._dirtyMap.markAllClean())};c.prototype.setVisibility=function(v,u){for(var y=this._data.tileBufferData.geometries.map(function(P){return{vertexFrom:void 0,vertexTo:void 0,geometry:P}}),C=0;C<v.length;C++)for(var D=v[C],E=0,F=this._data.tileDisplayData.displayObjectRegistry.get(D.id).displayRecords;E<
F.length;E++){var G=F[E];if(null==u||u===G.geometryType){var J=y[G.geometryType],R=J.geometry.vertexBuffer[t.C_VBO_VISIBILITY];if(R){J.vertexFrom=null==J.vertexFrom?G.vertexFrom:Math.min(J.vertexFrom,G.vertexFrom);J.vertexTo=null==J.vertexTo?G.vertexFrom+G.vertexCount:Math.max(J.vertexTo,G.vertexFrom+G.vertexCount);J=G.vertexFrom*R.stride/4;G=G.vertexCount*R.stride/4;for(var O=0;O<G;++O)R.data[J+O]=D.visibility?4294967295:0}}}u=!1;for(v=0;v<y.length;++v)J=y[v],null!=J.vertexFrom&&null!=J.vertexTo&&
(u=J.vertexTo?J.vertexTo-J.vertexFrom:0,this.setStatus(A.TileStatus.MODIFIED),this._dirtyMap.markDirtyVertices(v,t.C_VBO_VISIBILITY,J.vertexFrom,u),u=!0);u&&this.requestRender()};c.prototype.setVisibilityRange=function(v,u,y,C){y=q.i8888to32(y,C,y,C);var D=C=void 0,E=this._data.tileBufferData.geometries[d.WGLGeometryType.LABEL].vertexBuffer[t.C_VBO_VISIBILITY_RANGE];v=this._data.tileDisplayData.displayObjectRegistry.get(v);u=v.metrics[u];var F=u.range.from;for(u=F+u.range.count;F<u;++F){var G=v.displayRecords[F];
if(G.geometryType===d.WGLGeometryType.LABEL){C=null==C?G.vertexFrom:Math.min(C,G.vertexFrom);D=null==D?G.vertexFrom+G.vertexCount:Math.max(D,G.vertexFrom+G.vertexCount);var J=G.vertexFrom*E.stride/4;G=G.vertexCount*E.stride/4;for(var R=0;R<G;++R)E.data[J+R]=y}}this._dirtyMap.markDirtyVertices(d.WGLGeometryType.LABEL,t.C_VBO_VISIBILITY_RANGE,C,D?D-C:0)};c.prototype.setStatus=function(v){this.status=v;if(v===A.TileStatus.READY||v===A.TileStatus.NO_DATA)this.attached=!0};c.prototype.clear=function(){this._data=
null;this.setStatus(A.TileStatus.INVALID);this._wglBuffers&&(this._wglBuffers.dispose(),this._wglBuffers=null);this.hlDisplayList&&(this.hlDisplayList=null)};c.prototype.dispose=function(){this.clear()};c.prototype.attach=function(v){return this.canDisplay};c.prototype.detach=function(v){h.prototype.detach.call(this,v)};c.prototype.doRender=function(v){var u=this;this.attached&&(this.commitChanges(v),v.context.setStencilFunction(514,this.stencilRef,255),v.painter.getBrushes(v.drawPhase).forEach(function(y){return y.draw(v,
u)}))};c.prototype.buildHLList=function(v){var u=this;this.hlDisplayList=new x;v.forEach(function(y){u._addToHLDisplayList(u.hlDisplayList,y)})};c.prototype._addToHLDisplayList=function(v,u){if(this._data){var y=this._data.tileDisplayData.displayObjectRegistry.get(u);if(y){u=[];var C=0;for(y=y.displayRecords;C<y.length;C++){var D=y[C].copy();D.meshData=null;D.symbolLevel=0;D.zOrder=0;u.push(D)}u.sort(b);v.addToList(u)}}};c.prototype._rebuildLabelIndex=function(){this._labelIndex=this._initLabelIndex();
for(var v=0,u=this.displayObjects;v<u.length;v++)this._insertIntoLabelIndex(u[v])};c.prototype._insertIntoLabelIndex=function(v){var u=v.anchor;-1!==v.xBucket&&u&&this.labelIndex[v.yBucket][v.xBucket].push(v)};c.prototype._initLabelIndex=function(){for(var v=[],u=0;u<e.TILE_SIZE/e.COLLISION_BUCKET_SIZE;u++){v.push([]);for(var y=0;y<e.TILE_SIZE/e.COLLISION_BUCKET_SIZE;y++)v[u].push([])}return v};c.prototype._patchData=function(v){for(var u=!0,y=0,C=v.remove||[];y<C.length;y++){var D=C[y],E=this._data.tileDisplayData.displayObjectRegistry.get(D);
if(E){this._data.tileDisplayData.displayList.removeFromList(E.displayRecords);for(var F=0,G=E.displayRecords;F<G.length;F++)this._dispRecStore.delete(G[F]);this._data.tileDisplayData.displayObjectRegistry.delete(D);E=this._data.tileDisplayData.displayObjects.indexOf(E);this._data.tileDisplayData.displayObjects.splice(E,1)}}y=0;for(C=v.addOrUpdate&&v.addOrUpdate.tileDisplayData&&v.addOrUpdate.tileDisplayData.displayObjects||[];y<C.length;y++){D=C[y];if(E=this._data.tileDisplayData.displayObjectRegistry.get(D.id)){var J=
E.displayRecords.length;for(F=0;F<J;++F){G=E.displayRecords[F];var R=D.displayRecords[F];if(F>=D.displayRecords.length||G.geometryType!==R.geometryType||G.symbolLevel!==R.symbolLevel||G.zOrder!==R.zOrder||G.materialInfo.materialKey!==R.materialInfo.materialKey)this._dispRecStore.delete(E.displayRecords[F]),F<D.displayRecords.length&&(E.displayRecords[F]=void 0)}E.displayRecords.length=D.displayRecords.length}else E=new z(D.id),this._data.tileDisplayData.displayObjectRegistry.set(D.id,E),this._data.tileDisplayData.displayObjects.push(E);
J=D.displayRecords.length;for(F=0;F<J;++F){R=D.displayRecords[F];(G=E.displayRecords[F])?(G.meshData=R.meshData,G.materialInfo=R.materialInfo):(G=R.copy(),G.vertexFrom=void 0,G.indexFrom=void 0,E.displayRecords[F]=G);var O=v.addOrUpdate.tileBufferData.geometries[R.geometryType];u=this._dispRecStore.setMeshData(G,R,O.vertexBuffer,O.indexBuffer)&&u}}return u};return c}(m)})},"esri/layers/vectorTiles/views/2d/engine/webgl/DirtyMap":function(){define(["require","exports","./Utils"],function(r,n,a){function l(k,
p,m){k.allDirty||(null!=k.from&&null!=k.count?(k.from=Math.min(k.from,p),k.count=Math.max(k.from+k.count,p+m)-k.from):(k.from=p,k.count=m))}Object.defineProperty(n,"__esModule",{value:!0});r=function(){function k(){this._dirties=a.createGeometryData(void 0,function(p){return{indices:{from:null,count:null,allDirty:!1}}},function(p,m){return{vertices:{from:null,count:null,allDirty:!1}}})}k.prototype.markAllClean=function(){for(var p=0,m=this._dirties;p<m.length;p++){var e=m[p];e.data.indices.from=null;
e.data.indices.count=null;e.data.indices.allDirty=!1;for(var f in e.buffers)e.buffers[f].data.vertices.from=null,e.buffers[f].data.vertices.count=null,e.buffers[f].data.vertices.allDirty=!1}};k.prototype.markAllDirty=function(){for(var p=0,m=this._dirties;p<m.length;p++){var e=m[p];e.data.indices.allDirty=!0;for(var f in e.buffers)e.buffers[f].data.vertices.allDirty=!0}};k.prototype.forEach=function(p){for(var m=new Map,e=0;e<this._dirties.length;++e){var f=this._dirties[e],g=new Map,d;for(d in f.buffers){var q=
f.buffers[d].data.vertices;(q.allDirty||null!=q.from&&null!=q.count)&&g.set(d,q)}f=f.data.indices;q=void 0;q=f.allDirty||null!=f.from&&null!=f.count?{indices:f,vertices:g}:{indices:void 0,vertices:g};(q.indices||0<q.vertices.size)&&m.set(e,q)}m.forEach(function(t,w){p({indices:t.indices||null,vertices:0<t.vertices.size?t.vertices:null},w)})};k.prototype.markDirtyIndices=function(p,m,e){l(this._dirties[p].data.indices,m,e)};k.prototype.markDirtyVertices=function(p,m,e,f){l(this._dirties[p].buffers[m].data.vertices,
e,f)};return k}();n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/DisplayRecordStore":function(){define(["require","exports","dojo/has","./FreeList","./Utils"],function(r,n,a,l,k){function p(e){e=e.getStrides();var f={},g;for(g in e)f[m[g]]=e[g];return f}Object.defineProperty(n,"__esModule",{value:!0});var m=["FILL","LINE","MARKER","TEXT","LABEL"];r=function(){function e(f,g,d,q){this._strides=f;this._displayList=g;this._vertexAlignments={};this._freeListsAndStorage={};this._dirtyMap=
null;this._dirtyMap=d;for(var t in f){d=g=!1;this._freeListsAndStorage[t]={vtxFreeList:q?new l.FreeList(q):null,idxFreeList:q?new l.FreeList(q):null,vertexBuffers:{},indexBuffer:q?new Uint32Array(q):null};for(var w in f[t])this._freeListsAndStorage[t].vertexBuffers[w]={data:q?new Uint32Array(Math.floor(q*f[t][w]/4)):null,stride:f[t][w]},2===f[t][w]%4?g=!0:0!==f[t][w]%4&&(d=!0);this._vertexAlignments[t]=d?4:g?2:1}}e.fromTileData=function(f,g){var d=p(f),q=[0,0,0,0,0],t=[0,0,0,0,0],w=[];f.tileDisplayData.displayObjectRegistry.forEach(function(c){w.push(c)});
for(var x=0;x<w.length;x++)for(var z=0,A=w[x].displayRecords;z<A.length;z++){var B=A[z];q[B.geometryType]=Math.max(q[B.geometryType],B.vertexFrom+B.vertexCount);t[B.geometryType]=Math.max(t[B.geometryType],B.indexFrom+B.indexCount)}g=new e(d,f.tileDisplayData.displayList,g,null);for(d=0;d<f.tileBufferData.geometries.length;++d){x=q[d];B=t[d];A=f.tileBufferData.geometries[d];z=g._storageFor(m[d]);var b=f.tileBufferData.geometries[d].indexBuffer;z.indexBuffer=b;z.idxFreeList=new l.FreeList(b.length);
z.idxFreeList.allocate(B);B=void 0;for(var h in A.vertexBuffer)A=f.tileBufferData.geometries[d].vertexBuffer[h],z.vertexBuffers[h].data=A.data,z.vertexBuffers[h].stride=A.stride,B=4*A.data.length/A.stride;z.vtxFreeList=new l.FreeList(B);z.vtxFreeList.allocate(x)}return g};e.prototype.delete=function(f){var g=m[f.geometryType];this._freeVertices(g,f.vertexFrom,f.vertexCount);this._freeIndices(g,f.indexFrom,f.indexCount);this._displayList.removeFromList(f);f.vertexFrom=void 0;f.indexFrom=void 0};e.prototype.setMeshData=
function(f,g,d,q){var t=m[f.geometryType];f.meshData=null;var w=void 0,x=void 0;void 0===f.vertexFrom?(x=this._align(t,g.vertexCount),w=this._allocateVertices(t,x)):g.vertexCount>f.vertexCount?(this._freeVertices(t,f.vertexFrom,f.vertexCount),x=this._align(t,g.vertexCount),w=this._allocateVertices(t,x)):g.vertexCount===f.vertexCount?(w=f.vertexFrom,x=f.vertexCount):(this._freeVertices(t,f.vertexFrom+g.vertexCount,f.vertexCount-g.vertexCount),w=f.vertexFrom,x=g.vertexCount);var z=!0,A=void 0,B=void 0;
void 0===f.indexFrom?(B=g.indexCount,A=this._allocateIndices(t,B)):g.indexCount>f.indexCount?(this._displayList.removeFromList(f),this._freeIndices(t,f.indexFrom,f.indexCount),B=g.indexCount,A=this._allocateIndices(t,B)):g.indexCount===f.indexCount?(z=!1,A=f.indexFrom,B=f.indexCount):(this._displayList.removeFromList(f),this._freeIndices(t,f.indexFrom+g.indexCount,f.indexCount-g.indexCount),A=f.indexFrom,B=g.indexCount);if(-1!==w&&-1!==A){t=this._storageFor(t);k.copyMeshData(w,A,t.vertexBuffers,t.indexBuffer,
g,d,q);f.vertexFrom=w;f.indexFrom=A;f.vertexCount=g.vertexCount;f.indexCount=g.indexCount;if(this._dirtyMap){this._dirtyMap.markDirtyIndices(f.geometryType,f.indexFrom,f.indexCount);for(var b in d)this._dirtyMap.markDirtyVertices(f.geometryType,b,f.vertexFrom,f.vertexCount)}z&&this._displayList.addToList(f);return!0}-1!==w&&this._freeVertices(t,w,x);-1!==A&&this._freeIndices(t,A,B);f.setMeshDataFromBuffers(g,d,q);f.vertexFrom=void 0;f.vertexCount=0;f.indexFrom=void 0;f.indexCount=0;return!1};e.prototype._allocateVertices=
function(f,g){f=this._storageFor(f);g=f.vtxFreeList.allocate(g);return-1===g||.5<f.vtxFreeList.fragmentation?-1:g};e.prototype._freeVertices=function(f,g,d){var q=this._storageFor(f);q.vtxFreeList.free(g,d);if(a("esri-feature-tiles-debug"))for(var t in q.vertexBuffers){var w=q.vertexBuffers[t].data,x=this._stridesFor(f,t),z=g*x/4;x=d*x/4;for(var A=z;A<z+x;++A)w[A]=0}};e.prototype._freeIndices=function(f,g,d){f=this._storageFor(f);f.idxFreeList.free(g,d);if(a("esri-feature-tiles-debug")){f=f.indexBuffer;
for(var q=g;q<g+d;++q)f[q]=0}};e.prototype._align=function(f,g){var d=g%this._vertexAlignments[f];return 0===d?g:g+(this._vertexAlignments[f]-d)};e.prototype._allocateIndices=function(f,g){f=this._storageFor(f);g=f.idxFreeList.allocate(g);return-1===g||.5<f.idxFreeList.fragmentation?-1:g};e.prototype._storageFor=function(f){return this._freeListsAndStorage[f]};e.prototype._stridesFor=function(f,g){return this._strides[f][g]};return e}();n.default=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/FreeList":function(){define(["require",
"exports"],function(r,n){Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function l(k){this._largestRange=null;this._parent=k;this._updateLargestRange()}Object.defineProperty(l.prototype,"largestRange",{get:function(){return this._largestRange},enumerable:!0,configurable:!0});l.prototype.rangeCreated=function(k){if(!this._largestRange||k.count>this._largestRange.count)this._largestRange=k};l.prototype.rangeResized=function(k,p,m){if(k===this._largestRange)k.count<m&&this._updateLargestRange();
else if(!this._largestRange||k.count>this._largestRange.count)this._largestRange=k};l.prototype.findBestRange=function(k){for(var p=this._parent._freeHead,m=null;null!==p;)p.count>=k&&(!m||p.count-k<m.count-k)&&(m=p),p=p.next;return m};l.prototype.findAdjacentRanges=function(k,p){for(var m=!0,e=!1,f=null,g=this._parent._freeHead;m&&!e;){var d=null!==g?g.from:this._parent._size;k>=(null!==f?f.from+f.count:0)&&k+p<=d?(m=!1,e=!0):null!==g?(f=g,g=g.next):m=!1}return[f,g]};l.prototype._updateLargestRange=
function(){for(var k=null,p=this._parent._freeHead;null!==p;){if(!k||p.count>k.count)k=p;p=p.next}this._largestRange=k};return l}();r=function(){function l(k,p){this._allocated=0;this._size=k;this._freeHead=0<k?{from:0,count:k,prev:null,next:null}:null;this._bookKeeper=p||new a(this);this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}l.prototype.allocate=function(k){var p=this._bookKeeper.findBestRange(k);if(null===p)return-1;var m=p.from,e=p.count;p.from+=k;p.count-=k;this._bookKeeper.rangeResized(p,
m,e);this._allocated+=k;0===p.count&&(k=null!==p.prev?this._freeHead:p.next,l._removeRange(p),this._freeHead=k);return m};l.prototype.free=function(k,p){var m=this._bookKeeper.findAdjacentRanges(k,p),e=m[0];m=m[1];k={from:k,count:p,prev:e,next:m};null!==e&&(e.next=k);null!==m&&(m.prev=k);this._bookKeeper.rangeCreated(k);this._allocated-=p;if(null!==m&&k.from+k.count===m.from){p=k.from;var f=k.count;l._fuse(k,m);l._removeRange(m);this._bookKeeper.rangeResized(k,p,f);this._bookKeeper.rangeResized(m,
void 0,0)}null!==e&&e.from+e.count===k.from&&(p=e.from,f=e.count,l._fuse(e,k),l._removeRange(k),this._bookKeeper.rangeResized(e,p,f),this._bookKeeper.rangeResized(k,void 0,0));this._freeHead=null!==k.prev?this._freeHead:k};Object.defineProperty(l.prototype,"fragmentation",{get:function(){var k=this._size-this._allocated;return 0===k?0:1-this._bookKeeper.largestRange.count/k},enumerable:!0,configurable:!0});l._removeRange=function(k){null!==k.prev?null!==k.next?(k.prev.next=k.next,k.next.prev=k.prev):
k.prev.next=null:null!==k.next&&(k.next.prev=null)};l._fuse=function(k,p){k.count+=p.count;k.next=p.next;p.from+=p.count;p.count=0;null!==p.next&&(p.next.prev=k)};return l}();n.FreeList=r})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLBuffers":function(){define(["require","exports","./Utils","../../../webgl/BufferObject"],function(r,n,a,l){Object.defineProperty(n,"__esModule",{value:!0});r=function(){function k(p,m){this.geometryMap=a.createGeometryData(m,function(e){return{indexBuffer:l.createIndex(p,
35044),vao:null}},function(e,f){return{vertexBuffer:l.createVertex(p,a.C_VBO_INFO[f])}})}k.prototype.dispose=function(){for(var p in this.geometryMap){var m=this.geometryMap[p];m.data.vao&&m.data.vao.dispose(!1);m.data.indexBuffer&&m.data.indexBuffer.dispose();for(var e in m.buffers)m.buffers[e]&&m.buffers[e].data.vertexBuffer.dispose()}};k.prototype.get=function(p){var m=this.geometryMap[p];p={};for(var e in m.buffers)p[e]=m.buffers[e].data.vertexBuffer;return{indexBuffer:m.data.indexBuffer,get vao(){return m.data.vao},
set vao(f){m.data.vao=f},vertexBufferMap:p}};k.prototype.has=function(p){return null!=this.geometryMap[p]};k.prototype.upload=function(p,m){var e=this;m.forEach(function(f,g){f.indices&&(f.indices.allDirty?e._uploadIndices(p,g):null!=f.indices.from&&null!=f.indices.count&&e._uploadIndices(p,g,f.indices.from,f.indices.count));f.vertices&&f.vertices.forEach(function(d,q){d.allDirty?e._uploadVertices(p,g,q):null!=d.from&&null!=d.count&&e._uploadVertices(p,g,q,d.from,d.count)})})};k.prototype._uploadVertices=
function(p,m,e,f,g){var d=this.geometryMap[m];d&&(m=p.geometries[m].vertexBuffer[e])&&(p=m.stride,m=m.data.buffer,d.buffers[e]&&0<m.byteLength&&(null!=f&&null!=g?d.buffers[e].data.vertexBuffer.setSubData(m,f*p,f*p,(f+g)*p):d.buffers[e].data.vertexBuffer.setData(m)))};k.prototype._uploadIndices=function(p,m,e,f){var g=this.geometryMap[m];g&&(p=p.geometries[m].indexBuffer.buffer,g.data.indexBuffer&&0<p.byteLength&&(null!=e&&null!=f?g.data.indexBuffer.setSubData(p,4*e,4*e,4*(e+f)):g.data.indexBuffer.setData(p)))};
return k}();n.default=r})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(r,n,a){return function(){function l(k,p,m,e){this.set(k,p,m,e)}l.from=function(k,p,m,e){return l.pool.acquire(k,p,m,e)};l.getId=function(k,p,m,e){return"object"===typeof k?k.level+"/"+k.row+"/"+k.col+"/"+k.world:k+"/"+p+"/"+m+"/"+e};Object.defineProperty(l.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,
"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});l.prototype.equals=function(k){return this.level===k.level&&this.row===k.row&&this.col===k.col&&this.world===k.world};l.prototype.release=function(){this.world=this.col=this.row=this.level=0};l.prototype.set=function(k,p,m,e){null==k?this.world=this.col=this.row=this.level=0:"object"===typeof k?(this.level=k.level||0,this.row=k.row||0,this.col=k.col||0,this.world=k.world||0):"string"===typeof k?(k=k.split("/"),p=k[1],m=k[2],
e=k[3],this.level=parseFloat(k[0]),this.row=parseFloat(p),this.col=parseFloat(m),this.world=parseFloat(e)):(this.level=+k,this.row=+p,this.col=+m,this.world=+e||0);return this};l.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};l.prototype.getChildKeys=function(){var k=this.level+1,p=this.row<<1,m=this.col<<1,e=this.world;return[l.pool.acquire(k,p,m,e),l.pool.acquire(k,p,m+1,e),l.pool.acquire(k,p+1,m,e),l.pool.acquire(k,p+1,m+1,e)]};l.prototype._compare=function(k){return this.row<
k.row?-1:this.row>k.row?1:this.col<k.col?-1:this.col>k.col?1:0};l.sort=function(k){return k.map(function(p){return l.from(p)}).sort(function(p,m){return p._compare(m)}).map(function(p){return p.id})};l.pool=new a(l,!0,null,25,50);return l}()})},"esri/layers/vectorTiles/views/2d/layers/features/tileRenderers/BaseTileRenderer":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators ../../../tiling/enums".split(" "),
function(r,n,a,l,k,p,m,e){Object.defineProperty(n,"__esModule",{value:!0});r=function(f){function g(d){d=f.call(this)||this;d.tiles=new Map;d.layer=null;return d}a(g,f);g.prototype.destroy=function(){this.tiles.clear();this.layer=this.layerView=this.tileInfoView=this.highlightOptions=this.configuration=this.tiles=null};Object.defineProperty(g.prototype,"updating",{get:function(){return this.isUpdating()},enumerable:!0,configurable:!0});g.prototype.acquireTile=function(d){var q=this,t=this.createTile(d);
t.once("attach",function(){return q.notifyChange("updating")});this.tiles.set(d.id,t);return t};g.prototype.forEachTile=function(d){this.tiles.forEach(d)};g.prototype.releaseTile=function(d){this.tiles.delete(d.key.id);this.disposeTile(d)};g.prototype.isUpdating=function(){var d=!0;this.tiles.forEach(function(q){d=d&&q.status!==e.TileStatus.INITIALIZED});return!d};g.prototype.requestUpdate=function(){this.layerView.requestUpdate()};l([m.property()],g.prototype,"configuration",void 0);l([m.property()],
g.prototype,"highlightOptions",void 0);l([m.property()],g.prototype,"layer",void 0);l([m.property()],g.prototype,"layerView",void 0);l([m.property()],g.prototype,"tileInfoView",void 0);l([m.property()],g.prototype,"updating",null);return g=l([m.subclass()],g)}(m.declared(k,p));n.default=r})},"esri/layers/vectorTiles/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators".split(" "),
function(r,n,a,l,k,p,m){return function(e){function f(){var g=e.call(this)||this;g.handles=new p;return g}a(f,e);f.prototype.destroy=function(){this.handles.destroy()};l([m.property({readOnly:!0})],f.prototype,"handles",void 0);return f=l([m.subclass("esri.core.HandleOwner")],f)}(m.declared(k))})},"esri/layers/vectorTiles/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),
function(r,n,a,l,k,p,m){return function(e){function f(g){g=e.call(this)||this;g._groups=new Map;return g}a(f,e);f.prototype.destroy=function(){this.removeAll()};Object.defineProperty(f.prototype,"size",{get:function(){var g=0;this._groups.forEach(function(d){g+=d.length});return g},enumerable:!0,configurable:!0});f.prototype.add=function(g,d){if(!this._isHandle(g)&&!Array.isArray(g)&&!p.isCollection(g))return this;var q=this._getOrCreateGroup(d);Array.isArray(g)||p.isCollection(g)?g.forEach(function(t){return q.push(t)}):
q.push(g);this.notifyChange("size");return this};f.prototype.has=function(g){return this._groups.has(this._ensureGroupKey(g))};f.prototype.remove=function(g){if(Array.isArray(g)||p.isCollection(g))return g.forEach(this.remove,this),this;if(!this.has(g))return this;for(var d=this._getGroup(g),q=0;q<d.length;q++)d[q].remove();this._deleteGroup(g);this.notifyChange("size");return this};f.prototype.removeAll=function(){this._groups.forEach(function(g){for(var d=0;d<g.length;d++)g[d].remove()});this._groups.clear();
this.notifyChange("size");return this};f.prototype._isHandle=function(g){return g&&!!g.remove};f.prototype._getOrCreateGroup=function(g){if(this.has(g))return this._getGroup(g);var d=[];this._groups.set(this._ensureGroupKey(g),d);return d};f.prototype._getGroup=function(g){return this._groups.get(this._ensureGroupKey(g))};f.prototype._deleteGroup=function(g){return this._groups.delete(this._ensureGroupKey(g))};f.prototype._ensureGroupKey=function(g){return g||"_default_"};l([m.property({readOnly:!0})],
f.prototype,"size",null);return f=l([m.subclass("esri.core.Handles")],f)}(m.declared(k))})},"esri/layers/vectorTiles/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(r,n,a,l,k,p,m){return function(e){function f(){var g=null!==e&&e.apply(this,arguments)||this;g.color=new k([0,255,255]);g.haloOpacity=
1;g.fillOpacity=.5;return g}a(f,e);l([m.property({type:k})],f.prototype,"color",void 0);l([m.property()],f.prototype,"haloOpacity",void 0);l([m.property()],f.prototype,"fillOpacity",void 0);return f=l([m.subclass("esri.views.2d.support.HighlightOptions")],f)}(m.declared(p))})},"esri/layers/vectorTiles/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x){var z=e({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(A){function B(h){h=A.call(this)||this;h.dpi=96;h.format=null;h.origin=null;h.minScale=0;h.maxScale=0;h.size=null;h.spatialReference=null;return h}l(B,A);var b=B;B.create=function(h){void 0===h&&(h={size:256,spatialReference:p.SpatialReference.WebMercator});
var c=h.resolutionFactor||1,v=h.scales,u=h.size||256;h=h.spatialReference||p.SpatialReference.WebMercator;var y=t.getInfo(h);y=y?new p.Point(y.origin[0],y.origin[1],h):new p.Point(0,0,h);var C=1/(39.37*q.getMetersPerUnitForSR(h)*96),D=[];if(v)for(var E=0;E<v.length;E++){var F=v[E],G=F*C;D.push({level:E,scale:F,resolution:G})}else for(F=t.isGeographic(h)?512/u*1.47748799285417E8:256/u*5.91657527591555E8,v=Math.ceil(24/c),D.push({level:0,scale:F,resolution:F*C}),E=1;E<v;E++)F/=Math.pow(2,c),G=F*C,D.push({level:E,
scale:F,resolution:G});return new b({dpi:96,lods:D,origin:y,size:u,spatialReference:h})};Object.defineProperty(B.prototype,"isWrappable",{get:function(){var h=this.spatialReference,c=this.origin;if(h&&c){var v=t.getInfo(h);return h.isWrappable&&Math.abs(v.origin[0]-c.x)<=v.dx}return!1},enumerable:!0,configurable:!0});B.prototype.readOrigin=function(h,c){return p.Point.fromJSON(a({spatialReference:c.spatialReference},h))};Object.defineProperty(B.prototype,"lods",{set:function(h){var c=this,v=0,u=0,
y=[];this._levelToLOD={};h&&(v=-Infinity,u=Infinity,h.forEach(function(C){y.push(C.scale);v=C.scale>v?C.scale:v;u=C.scale<u?C.scale:u;c._levelToLOD[C.level]=C}));this._set("scales",y);this._set("minScale",v);this._set("maxScale",u);this._set("lods",h);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});B.prototype.readSize=function(h,c){return[c.cols,c.rows]};B.prototype.writeSize=function(h,c){c.cols=h[0];c.rows=h[0]};B.prototype.zoomToScale=function(h){var c=this.scales;if(0>=h)return c[0];
if(h>=c.length)return c[c.length-1];var v=Math.round(h);return c[v]+(v-h)*(c[Math.round(h-.5)]-c[v])};B.prototype.scaleToZoom=function(h){for(var c=this.scales,v=c.length-1,u=0;u<v;u++){var y=c[u],C=c[u+1];if(y<=h)break;if(C===h)return u+1;if(y>h&&C<h)return u+1-(h-C)/(y-C)}return u};B.prototype.snapScale=function(h,c){void 0===c&&(c=.95);h=this.scaleToZoom(h);return h%Math.floor(h)>=c?this.zoomToScale(Math.ceil(h)):this.zoomToScale(Math.floor(h))};B.prototype.tileAt=function(h,c,v,u){var y=this.lodAt(h);
if(!y)return null;if("number"===typeof c){var C=c;c=v}else{if(t.equals(c.spatialReference,this.spatialReference))C=c.x,c=c.y;else{u=w.project(c,this.spatialReference);if(!u)return null;C=u.x;c=u.y}u=v}v=y.resolution*this.size[0];y=y.resolution*this.size[1];u||(u={id:null,level:0,row:0,col:0,extent:d.create()});u.level=h;u.row=Math.floor((this.origin.y-c)/y+.001);u.col=Math.floor((C-this.origin.x)/v+.001);this.updateTileInfo(u);return u};B.prototype.updateTileInfo=function(h){var c=this.lodAt(h.level),
v=c.resolution*this.size[0];c=c.resolution*this.size[1];h.id=h.level+"/"+h.row+"/"+h.col;h.extent||(h.extent=d.create());h.extent[0]=this.origin.x+h.col*v;h.extent[1]=this.origin.y-(h.row+1)*c;h.extent[2]=h.extent[0]+v;h.extent[3]=h.extent[1]+c};B.prototype.upsampleTile=function(h){var c=this._upsampleLevels[h.level];if(!c||-1===c.parentLevel)return!1;h.level=c.parentLevel;h.row=Math.floor(h.row/c.factor+.001);h.col=Math.floor(h.col/c.factor+.001);this.updateTileInfo(h);return!0};B.prototype.getTileBounds=
function(h,c){var v=this.lodAt(c.level).resolution,u=v*this.size[0];v*=this.size[1];h[0]=this.origin.x+c.col*u;h[1]=this.origin.y-(c.row+1)*v;h[2]=h[0]+u;h[3]=h[1]+v;return h};B.prototype.lodAt=function(h){return this._levelToLOD&&this._levelToLOD[h]||null};B.prototype.clone=function(){return b.fromJSON(this.write({}))};B.prototype._initializeUpsampleLevels=function(){var h=this.lods;this._upsampleLevels=[];for(var c=null,v=0;v<h.length;v++){var u=h[v];this._upsampleLevels[u.level]={parentLevel:c?
c.level:-1,factor:c?c.resolution/u.resolution:0};c=u}};k([f.property({type:Number,json:{write:!0}})],B.prototype,"compressionQuality",void 0);k([f.property({type:Number,json:{write:!0}})],B.prototype,"dpi",void 0);k([f.property({type:String,json:{read:z.read,write:z.write}})],B.prototype,"format",void 0);k([f.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],B.prototype,"isWrappable",null);k([f.property({type:p.Point,json:{write:!0}})],B.prototype,"origin",void 0);k([f.reader("origin")],
B.prototype,"readOrigin",null);k([f.property({type:[x],value:null,json:{write:!0}})],B.prototype,"lods",null);k([f.property({readOnly:!0})],B.prototype,"minScale",void 0);k([f.property({readOnly:!0})],B.prototype,"maxScale",void 0);k([f.property({readOnly:!0})],B.prototype,"scales",void 0);k([f.property({cast:function(h){return Array.isArray(h)?h:"number"===typeof h?[h,h]:[256,256]}})],B.prototype,"size",void 0);k([f.reader("size",["rows","cols"])],B.prototype,"readSize",null);k([f.writer("size",
{cols:{type:g.Integer},rows:{type:g.Integer}})],B.prototype,"writeSize",null);k([f.property({type:p.SpatialReference,json:{write:!0}})],B.prototype,"spatialReference",void 0);return B=b=k([f.subclass("esri.layers.support.TileInfo")],B)}(f.declared(m))})},"esri/layers/vectorTiles/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
function(r,n,a,l,k,p,m){return function(e){function f(d){d=e.call(this,d)||this;d.level=0;d.levelValue=null;d.resolution=0;d.scale=0;return d}a(f,e);var g=f;f.prototype.clone=function(){return new g({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};l([p.property({type:m.Integer,json:{write:!0}})],f.prototype,"level",void 0);l([p.property({type:String,json:{write:!0}})],f.prototype,"levelValue",void 0);l([p.property({type:Number,json:{write:!0}})],f.prototype,
"resolution",void 0);l([p.property({type:Number,json:{write:!0}})],f.prototype,"scale",void 0);return f=g=l([p.subclass("esri.layers.support.LOD")],f)}(p.declared(k))})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(r,n,a,l,k,p,m){var e=new p("0/0/0/0"),f=function(){function d(q,t,w,x,z,A,B,b){this.x=q;this.ymin=t;this.ymax=w;this.invM=x;this.leftAdjust=
z;this.rightAdjust=A;this.leftBound=B;this.rightBound=b}d.create=function(q,t){if(q[1]>t[1]){var w=[t,q];q=w[0];t=w[1]}w=q[0];q=q[1];var x=t[0];t=t[1];var z=x-w,A=t-q;A=0!==A?z/A:0;var B=(Math.ceil(q)-q)*A,b=(Math.floor(q)-q)*A;return new d(w,Math.floor(q),Math.ceil(t),A,0>z?B:b,0>z?b:B,0>z?x:w,0>z?w:x)};d.prototype.incrRow=function(){this.x+=this.invM};d.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};d.prototype.getRightCol=function(){return Math.min(this.x+
this.rightAdjust,this.rightBound)};return d}(),g=[[0,0],[0,0],[0,0],[0,0]];return function(){function d(q,t){var w=this;this.tileInfo=q;this.fullExtent=t;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var x=q.lods.slice();x.sort(function(A,B){return B.scale-A.scale});var z=this._lodInfos=x.map(function(A){return l.create(q,A,t)});x.forEach(function(A,B){w._infoByLevel[A.level]=z[B];w._infoByScale[A.scale]=z[B];w.scales[B]=A.scale},this);this._wrap=q.isWrappable}d.prototype.getLODInfoAt=
function(q){return this._infoByLevel[q.level]};d.prototype.getTileBounds=function(q,t,w){void 0===w&&(w=!1);e.set(t);return(t=this._infoByLevel[e.level])?t.getTileBounds(q,e,w):q};d.prototype.getTileCoords=function(q,t,w){void 0===w&&(w=!1);e.set(t);return(t=this._infoByLevel[e.level])?t.getTileCoords(q,e,w):q};d.prototype.getTileCoverage=function(q,t,w){void 0===t&&(t=192);void 0===w&&(w="closest");w="closest"===w?this.getClosestInfoForScale(q.scale):this.getSmallestInfoForScale(q.scale);var x=k.pool.acquire(w),
z=this._wrap;var A=Infinity;var B=-Infinity,b=x.spans;g[0][0]=g[0][1]=g[1][1]=g[3][0]=-t;g[1][0]=g[2][0]=q.size[0]+t;g[2][1]=g[3][1]=q.size[1]+t;for(t=0;t<g.length;t++){var h=g[t];q.toMap(h,h);h[0]=w.getColumnForX(h[0]);h[1]=w.getRowForY(h[1])}q=[];h=3;for(t=0;4>t;t++){if(g[t][1]!==g[h][1]){var c=f.create(g[t],g[h]);A=Math.min(c.ymin,A);B=Math.max(c.ymax,B);void 0===q[c.ymin]&&(q[c.ymin]=[]);q[c.ymin].push(c)}h=t}if(null==A||null==B||100<B-A)return null;for(h=[];A<B;){null!=q[A]&&(h=h.concat(q[A]));
var v=Infinity;var u=-Infinity;for(t=h.length-1;0<=t;t--)c=h[t],v=Math.min(v,c.getLeftCol()),u=Math.max(u,c.getRightCol());v=Math.floor(v);u=Math.floor(u);if(A>=w.first[1]&&A<=w.last[1])if(z)if(w.size[0]<w.worldSize[0])for(c=Math.floor(u/w.worldSize[0]),t=Math.floor(v/w.worldSize[0]);t<=c;t++)b.push(new m(A,Math.max(w.getFirstColumnForWorld(t),v),Math.min(w.getLastColumnForWorld(t),u)));else b.push(new m(A,v,u));else v>w.last[0]||u<w.first[0]||(v=Math.max(v,w.first[0]),u=Math.min(u,w.last[0]),b.push(new m(A,
v,u)));A+=1;for(t=h.length-1;0<=t;t--)c=h[t],c.ymax>=A?c.incrRow():h.splice(t,1)}return x};d.prototype.getTileIdAtParent=function(q,t){t=p.pool.acquire(t);var w=this._infoByLevel[t.level];if(q.resolution<w.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+q.resolution+" is not a parent resolution of "+w.resolution);return q.resolution===w.resolution?t.id:p.getId(q.level,Math.floor(t.row*w.resolution/q.resolution+.01),Math.floor(t.col*w.resolution/q.resolution+.01),
t.world)};d.prototype.getTileParentId=function(q){q=p.pool.acquire(q);var t=this._lodInfos.indexOf(this._infoByLevel[q.level])-1;if(0>t)return p.pool.release(q),null;t=this.getTileIdAtParent(this._lodInfos[t],q);p.pool.release(q);return t};d.prototype.getTileResolution=function(q){return(q=this._infoByLevel[q.level])?q.resolution:-1};d.prototype.getTileScale=function(q){return(q=this._infoByLevel[q.level])?q.scale:-1};d.prototype.intersects=function(q,t){var w=p.pool.acquire(t);t=this._infoByLevel[w.level];
var x=q.lodInfo;if(x.resolution>t.resolution){var z=p.pool.acquire(this.getTileIdAtParent(x,w)),A=x.denormalizeCol(z.col,z.world);t=q.spans.some(function(C){return C.row===z.row&&C.colFrom<=A&&C.colTo>=A});p.pool.release(w);p.pool.release(z);return t}if(x.resolution<t.resolution){var B=q.spans.reduce(function(C,D){C[0]=Math.min(C[0],D.row);C[1]=Math.max(C[1],D.row);C[2]=Math.min(C[2],D.colFrom);C[3]=Math.max(C[3],D.colTo);return C},[Infinity,-Infinity,Infinity,-Infinity]);q=B[0];var b=B[1],h=B[2];
B=B[3];var c=t.denormalizeCol(w.col,w.world),v=x.getColumnForX(t.getXForColumn(c)),u=x.getRowForY(t.getYForRow(w.row));c=x.getColumnForX(t.getXForColumn(c+1))-1;t=x.getRowForY(t.getYForRow(w.row+1))-1;p.pool.release(w);return!(v>B||c<h||u>b||t<q)}var y=x.denormalizeCol(w.col,w.world);t=q.spans.some(function(C){return C.row===w.row&&C.colFrom<=y&&C.colTo>=y});p.pool.release(w);return t};d.prototype.normalizeBounds=function(q,t,w){q[0]=t[0];q[1]=t[1];q[2]=t[2];q[3]=t[3];this._wrap&&(t=a.getInfo(this.tileInfo.spatialReference),
w=-w*(t.valid[1]-t.valid[0]),q[0]+=w,q[2]+=w);return q};d.prototype.getSmallestInfoForScale=function(q){var t=this.scales;if(this._infoByScale[q])return this._infoByScale[q];if(q>t[0])return this._infoByScale[t[0]];for(var w=1;w<t.length-1;w++)if(q>t[w]+1E-6)return this._infoByScale[t[w-1]];return this._infoByScale[t[t.length-1]]};d.prototype.getClosestInfoForScale=function(q){var t=this.scales;this._infoByScale[q]||(q=t.reduce(function(w,x,z,A){return Math.abs(x-q)<Math.abs(w-q)?x:w},t[0]));return this._infoByScale[q]};
return d}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(r,n,a,l){function k(m,e,f){m[0]=e;m[1]=f;return m}var p=new l("0/0/0/0");return function(){function m(e,f,g,d,q,t,w,x,z,A,B,b){this.level=e;this.resolution=f;this.scale=g;this.origin=d;this.first=q;this.last=t;this.size=w;this.norm=x;this.worldStart=z;this.worldEnd=A;this.worldSize=B;this.wrap=b}m.create=function(e,f,g){var d=
a.getInfo(e.spatialReference),q=[e.origin.x,e.origin.y],t=[e.size[0]*f.resolution,e.size[1]*f.resolution],w=[-Infinity,-Infinity],x=[Infinity,Infinity],z=[Infinity,Infinity];g&&(k(w,Math.max(0,Math.floor((g.xmin-q[0])/t[0])),Math.max(0,Math.floor((q[1]-g.ymax)/t[1]))),k(x,Math.max(0,Math.floor((g.xmax-q[0])/t[0])),Math.max(0,Math.floor((q[1]-g.ymin)/t[1]))),k(z,x[0]-w[0]+1,x[1]-w[1]+1));if(e.isWrappable){e=[Math.ceil(Math.round(2*d.origin[1]/f.resolution)/e.size[0]),z[1]];d=[Math.floor((d.origin[0]-
q[0])/t[0]),w[1]];g=[e[0]+d[0]-1,x[1]];var A=!0}else d=w,g=x,e=z,A=!1;return new m(f.level,f.resolution,f.scale,q,w,x,z,t,d,g,e,A)};m.prototype.normalizeCol=function(e){if(!this.wrap)return e;var f=this.worldSize[0];return 0>e?f-1-Math.abs((e+1)%f):e%f};m.prototype.denormalizeCol=function(e,f){return this.wrap?this.worldSize[0]*f+e:e};m.prototype.getWorldForColumn=function(e){return this.wrap?Math.floor(e/this.worldSize[0]):0};m.prototype.getFirstColumnForWorld=function(e){return e*this.worldSize[0]+
this.first[0]};m.prototype.getLastColumnForWorld=function(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1};m.prototype.getColumnForX=function(e){return(e-this.origin[0])/this.norm[0]};m.prototype.getXForColumn=function(e){return this.origin[0]+e*this.norm[0]};m.prototype.getRowForY=function(e){return(this.origin[1]-e)/this.norm[1]};m.prototype.getYForRow=function(e){return this.origin[1]-e*this.norm[1]};m.prototype.getTileBounds=function(e,f,g){void 0===g&&(g=!1);p.set(f);var d=g?p.col:
this.denormalizeCol(p.col,p.world),q=p.row;f=this.getXForColumn(d);g=this.getYForRow(q+1);d=this.getXForColumn(d+1);q=this.getYForRow(q);e[0]=f;e[1]=g;e[2]=d;e[3]=q;return e};m.prototype.getTileCoords=function(e,f,g){void 0===g&&(g=!1);p.set(f);f=g?p.col:this.denormalizeCol(p.col,p.world);Array.isArray(e)?k(e,this.getXForColumn(f),this.getYForRow(p.row)):(e.x=this.getXForColumn(f),e.y=this.getYForRow(p.row));return e};return m}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require",
"exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(r,n,a,l,k){return function(){function p(m){this.lodInfo=m;this.spans=a.acquire()}p.prototype.release=function(){for(var m=0,e=this.spans;m<e.length;m++)k.pool.release(e[m]);a.release(this.spans)};p.prototype.forEach=function(m,e){var f=this.spans,g=this.lodInfo,d=g.level;if(0!==f.length)for(var q=0;q<f.length;q++){var t=f[q],w=t.row,x=t.colTo;for(t=t.colFrom;t<=x;t++)m.call(e,d,w,g.normalizeCol(t),g.getWorldForColumn(t))}};
p.pool=new l(p,!0);return p}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(r,n,a){return function(){function l(k,p,m){this.row=k;this.colFrom=p;this.colTo=m}l.pool=new a(l,!0);return l}()})},"esri/layers/OnDemandDrillMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred ../sniff ../kernel ../promiseList ./RenderMode ../geometry/Extent ../geometry/jsonUtils ../tasks/query ../tasks/FeatureSet ../tasks/support/pbfDeps ./vectorTiles/core/promiseUtils ./vectorTiles/core/SetPool ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x,z,A){var B=q.pbfQueryUtils,b=q.optimizedFeatures;l=l("esri-featurelayer-webgl");r=r([m],{declaredClass:"esri.layers._OnDemandDrillMode",featureLayer:null,graphics:null,maxDrillLevel:l&&l.maxDrillLevel,maxRecordCountFactor:l&&l.maxRecordCountFactor,enablePBFQuery:l&&l.enablePBFQuery,_graphicsVal:null,_reEvalGraphics:!1,_featureMap:null,_quantizationFactor:1,_wglRenderer:null,_tileInfo:null,_tileInfoView:null,_tileFetchQueue:null,_tileStrategy:null,_tileRequests:null,
constructor:function(h){this._graphicsVal=[];this._featureMap={};this.featureLayer=h},initialize:function(h){this.inherited(arguments);this._tileRequests=new Map},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var h=this.featureLayer;this._wglRenderer=h._div;this._tileInfo=this._wglRenderer._tileInfo;this._tileInfoView=this._wglRenderer._tileInfoView;this._tileRenderer=this._wglRenderer._tileRenderer;this._tileFetchQueue=new x({tileInfoView:this._tileInfoView,
process:this._getFeatureSet.bind(this)});this._tileStrategy=new z({cachePolicy:"purge",buffer:0,acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._isSuspendedAtStartup=h.suspended;this.start()}},propertyChangeHandler:function(h){this._init&&2>h&&this.start()},destroy:function(){this._tileFetchQueue&&this._tileFetchQueue.clear();this._tileStrategy&&this._tileStrategy.destroy();this._tileRequests&&this._tileRequests.clear();this.inherited(arguments)},
update:function(h){this._tileFetchQueue.pause();this._tileFetchQueue.state=h.state;h=this._tileStrategy.update(h);this._tileFetchQueue.resume();h?this.featureLayer._fireUpdateEnd():this.featureLayer._fireUpdateStart()},suspend:function(){this._init&&this.stop()},resume:function(){this._init&&this.start()},refresh:function(){this.start()},hasAllFeatures:function(){var h=!1;this._getVisibleTileRequests().forEach(function(c){c.hasPartialFeatures&&(h=!0)});return!h},hasUpdateError:function(){var h=!1;
this._getVisibleTileRequests().forEach(function(c){c.hasUpdateError&&(h=!0)});return h},start:function(){var h=this.featureLayer;!h.suspended&&h.isQueryable()&&(this._clearIIf(),this._tileFetchQueue.pause(),this._tileFetchQueue.clear(),this._tileStrategy.clear(),this._wglRenderer.start())},stop:function(){this._wglRenderer.stop()},_getVisibleTileRequests:function(){var h=this._tileStrategy.tileIndex;if(!h)return[];var c=[];this._tileRequests.forEach(function(v,u){(u=h.get(u))&&u.visible&&c.push(v)});
return c},_acquireTile:function(h){this.featureLayer._fireUpdateStart();var c=this._acquireRendererTile(h),v=c.key,u=v.id;h=this._tileInfo.lodAt(h.level);var y={id:u,key:v,bounds:this._tileInfo.getTileBounds([0,0,0,0],v),resolution:h.resolution,scale:h.scale};v=this._tileFetchQueue.push(v).then(function(C){return this._wglRenderer._symbolProcessor.getMeshData(y,C.featureSet).then(function(D){return{meshData:D.data,featureSet:C.featureSet,errors:C.errors,hasPartialFeatures:C.hasPartialFeatures}})}.bind(this)).then(function(C){this._tileRenderer.onTileData({tileKey:u,
data:C.meshData});this._addTile(u,C)}.bind(this)).otherwise(function(C){this._tileRenderer.onTileData({tileKey:u,data:null});this._tileError(u);return t.reject(C)}.bind(this));this._tileRequests.set(u,{tsTile:y,request:v,isFulfilled:!1,hasUpdateError:null,hasPartialFeatures:null,featureSet:null,graphics:[]});return c},_acquireRendererTile:function(h){h=this._tileRenderer.acquireTile(h);h.once("attach",function(){this._wglRenderer._scheduleUpdate()}.bind(this));return h},_releaseTile:function(h){this.featureLayer._fireUpdateStart();
this._tileRequests.get(h.key.id)&&(this._removeTile(h),this._wglRenderer._scheduleUpdate())},_addTile:function(h,c){this._reEvalGraphics=!0;var v=this._createGraphics(c.featureSet);this._registerGraphics(v);if(h=this._tileRequests.get(h))h.isFulfilled=!0,h.hasUpdateError=!!c.errors.length,h.hasPartialFeatures=c.hasPartialFeatures||h.hasUpdateError,h.featureSet=c.featureSet,h.graphics=v},_tileError:function(h){if(h=this._tileRequests.get(h))h.isFulfilled=!0,h.hasUpdateError=!0,h.hasPartialFeatures=
!0,h.graphics=[];this._wglRenderer._scheduleUpdate()},_removeTile:function(h){var c=h.key.id,v=this._tileRequests.get(c);v.request.isFulfilled()||v.request.cancel();this._tileRequests["delete"](c);this._wglRenderer._cancelRedraw(c);this._reEvalGraphics=!0;this._tileRenderer.releaseTile(h);this._unregisterGraphics(v.graphics)},_getFeatureSet:function(h){var c={hashes:new Set,drill:[],featureSet:{features:[],geometryType:this.featureLayer.geometryType,spatialReference:this.map.spatialReference.toJson(),
transform:null},hasPartialFeatures:!1,errors:[]},v=this.featureLayer._task,u=this._getResolutionParams(h),y=this._tileInfoView.getTileBounds([0,0,0,0],h);y=this._expandTileBounds(y,u);var C=w.acquire();return this._drillQuery(c,C,v,y,u,null,h).then(function(D){w.release(C);this._calculateCentroid(D);return D}.bind(this)).otherwise(function(D){w.release(C);throw D;})},_getResolutionParams:function(h){this._tileInfo.updateTileInfo(h);var c=this._tileInfo.lodAt(h.level);return{mode:"view",originPosition:"upperLeft",
tolerance:this._quantizationFactor*c.resolution,extent:new e(h.extent[0],h.extent[1],h.extent[2],h.extent[3],this.map.spatialReference)}},_expandTileBounds:function(h,c){var v=this.featureLayer.geometryType;c=("esriGeometryPoint"===v||"esriGeometryMultipoint"===v||this._wglRenderer._returnCentroid?20:0)*c.tolerance;h[0]-=c;h[1]-=c;h[2]+=c;h[3]+=c;return h},_calculateCentroid:function(h){if("esriGeometryPolygon"===h.featureSet.geometryType&&this._wglRenderer._returnCentroid){var c=0;var v=h.featureSet.spatialReference,
u=h.featureSet.transform,y={geometry:{x:null,y:null}},C=[y];h.featureSet.features.forEach(function(D){if(!D.centroid){var E=D.geometry;E&&(E=d.createPolygon(E,v,u),E=E.getCentroid())&&(y.geometry.x=E.x,y.geometry.y=E.y,f.quantize(C,"esriGeometryPoint",u),D.centroid={x:y.geometry.x,y:y.geometry.y},c++)}})}return c},_drillQuery:function(h,c,v,u,y,C,D,E){E=null!=E?E:0;h.drill.push(u);return this._query(v,u,y,C,D,E).then(function(F){this.featureLayer.supportsFormatPBF&&this.enablePBFQuery&&(F=b.convertToFeatureSet(B.parsePBFFeatureQuery(F)));
this._appendFeatures(h.featureSet.features,c,F.features);F.transform&&(h.featureSet.transform=F.transform);if(F.exceededTransferLimit){if(E<this.maxDrillLevel){E++;F=(u[2]-u[0])/2;var G=(u[3]-u[1])/2,J=[u[0]+F,u[1]+G,u[2],u[3]],R=[u[0],u[1],u[2]-F,u[3]-G],O=[u[0]+F,u[1],u[2],u[3]-G];return p([this._drillQuery(h,c,v,[u[0],u[1]+G,u[2]-F,u[3]],y,C,D,E),this._drillQuery(h,c,v,J,y,C,D,E),this._drillQuery(h,c,v,R,y,C,D,E),this._drillQuery(h,c,v,O,y,C,D,E)]).then(function(){return h})}h.hasPartialFeatures=
!0}return h}.bind(this)).otherwise(function(F){if(0<E)h.errors.push(F);else throw F;}.bind(this))},_appendFeatures:function(h,c,v){var u=h.length,y=v?v.length:0;h.length=u+y;var C=0,D,E=this.featureLayer.objectIdField;for(D=0;D<y;D++){var F=v[D];var G=F.attributes[E];c.has(G)||(h[u+C]=F,c.add(G),C++)}h.length-=y-C},_query:function(h,c,v,u,y,C){u=this.featureLayer;y=new g;var D=u.getOutFields();.75<=D.length/u.fields.length&&(D=["*"]);y.geometry=new e(c[0],c[1],c[2],c[3],this.map.spatialReference);
y.outFields=D;y.where=u.getDefinitionExpression();y.returnGeometry=!0;y.returnCentroid=this._wglRenderer._returnCentroid;y.timeExtent=u._getOffsettedTE(u._mapTimeExtent);u._ts&&(y._ts=Date.now());y.orderByFields=u.supportsAdvancedQueries?u.getOrderByFields():null;y.multipatchOption=u.multipatchOption;y.maxAllowableOffset="esriGeometryPolyline"===u.geometryType?v.tolerance:null;y.quantizationParameters=v;(c=u.advancedQueryCapabilities)&&c.supportsQueryWithResultType&&(y.resultType="tile");y.returnExceededLimitFeatures=
C===this.maxDrillLevel;c&&c.supportsMaxRecordCountFactor&&(y.maxRecordCountFactor=this.maxRecordCountFactor);return this._wrapInNewDeferred(h.rawExecute(y,u.supportsFormatPBF&&this.enablePBFQuery?{format:"pbf"}:null))},_wrapInNewDeferred:function(h){var c=new a(function(){h.isFulfilled()||h.cancel()});h.then(function(v){c.resolve(v)}).otherwise(function(v){c.reject(v)});return c.promise},_collectGraphics:function(){var h=this._featureMap,c=[],v;for(v in h)c.push(h[v]);return c},_createGraphics:function(h){return d.createGraphics(h)},
_registerGraphics:function(h){var c=this.featureLayer.objectIdField;h.forEach(function(v){var u=v.attributes&&v.attributes[c];this._registerFeature(u,v);this._incRefCount(u)}.bind(this))},_unregisterGraphics:function(h){var c=this.featureLayer.objectIdField;h.forEach(function(v){v=v.attributes&&v.attributes[c];this._decRefCount(v);this._unregisterFeature(v)}.bind(this))}});Object.defineProperty(r.prototype,"graphics",{get:function(){this._reEvalGraphics&&(this._reEvalGraphics=!1,this._graphicsVal=
this._collectGraphics());return this._graphicsVal}});n.setObject("layers._OnDemandDrillMode",r,k);return r})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(r,n,a){var l=r.forEach;return function(k){function p(w,x){d[x]=w;q.progress([w,x]);0===--t&&q.resolve(d)}var m,e;k instanceof Array?e=k:k&&"object"===typeof k&&(m=k);var f=[];if(m){e=[];for(var g in m)Object.hasOwnProperty.call(m,g)&&(f.push(g),e.push(m[g]));var d={}}else e&&(d=[]);if(!e||!e.length)return(new n).resolve(d);
var q=new n;q.promise.always(function(){d=f=null});var t=e.length;l(e,function(w,x){m||f.push(x);a(w,function(z){q.isFulfilled()||p(z,f[x])},function(z){q.isFulfilled()||p(z,f[x])})});return q.promise}})},"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(r,n,a,l,k){var p=!!l("esri-pbf");l=!!l("esri-featurelayer-pbf");r=r(null,{declaredClass:"esri.layers._RenderMode",enablePBFQuery:p&&l,initialize:function(m){this.map=
m;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(m){},destroy:function(){this._init=this._started=!1},drawFeature:function(m){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(m){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(m){(m=this._featureMap[m])&&m._count++},_decRefCount:function(m){(m=this._featureMap[m])&&m._count--},
_getFeature:function(m){return this._featureMap[m]},_addFeatureIIf:function(m,e){var f=this._featureMap,g=f[m],d=this.featureLayer;g||(f[m]=e,d._add(e),e._count=0);return g||e},_removeFeatureIIf:function(m){var e=this._featureMap[m],f=this.featureLayer;if(e){if(e._count)return;delete this._featureMap[m];f._remove(e)}return e},_registerFeature:function(m,e){var f=this._featureMap,g=f[m];g?(g.attributes=e.attributes,g.geometry=e.geometry):(f[m]=e,e._count=0,e._layer=e._graphicsLayer=e._sourceLayer=
this.featureLayer);return g||e},_unregisterFeature:function(m){var e=this._featureMap,f=e[m];f&&!f._count&&(delete e[m],f._graphicsLayer=null)},_clearIIf:function(){var m=this.featureLayer;var e=m.graphics,f=m._selectedFeatures,g=m.getSelectedFeatures().length,d=m.objectIdField;if(g)for(m=e.length-1;0<=m;m--){g=e[m];var q=g.attributes[d];q in f?g._count=1:(g._count=0,this._removeFeatureIIf(q))}else m.clear(),this._featureMap={}},_cancelPendingRequest:function(m){if(m)try{m.cancel()}catch(e){}},_toggleVisibility:function(m){var e=
this.featureLayer,f=e.graphics,g=m?"show":"hide",d,q=f.length;m=m&&e._ager;for(d=0;d<q;d++){var t=f[d];t[g]();m&&e._repaint(t)}},_applyTimeFilter:function(m){var e=this.featureLayer;if(e.timeInfo&&!e.suspended){m||e._fireUpdateStart();var f=e._trackManager;f&&f.clearTracks();var g=e.getTimeDefinition(),d=e._getOffsettedTE(e._mapTimeExtent);d?(d=e._getTimeOverlap(g,d))?(g=e._filterByTime(e.graphics,d.startTime,d.endTime),f&&f.addFeatures(g.match),a.forEach(g.match,function(q){var t=q._shape;q.visible||
(q.show(),(t=q._shape)&&t._moveToFront());e._ager&&t&&e._repaint(q)}),a.forEach(g.noMatch,function(q){q.visible&&q.hide()})):this._toggleVisibility(!1):(f&&f.addFeatures(e.graphics),this._toggleVisibility(!0));f&&(f.moveLatestToFront(),f.drawTracks());m||e._fireUpdateEnd()}}});n.setObject("layers._RenderMode",r,k);return r})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship ./QueryTask ./RelationshipQuery ./StatisticDefinition".split(" "),
function(r,n,a,l,k,p,m,e){var f=r(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=f.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,
resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(g){var d={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},q=g&&g.geometry||this.geometry,t=this.objectIds,w=this.outFields,x=this.outSpatialReference,z=this.groupByFieldsForStatistics,A=this.orderByFields,B=this.outStatistics;g=this.distance;q&&(d.geometry=q,d.geometryType=m.getJsonType(q),d.inSR=q.spatialReference.wkid||l.toJson(q.spatialReference.toJson()));t&&(d.objectIds=t.join(","));w&&(d.outFields=w.join(","));null!=this.returnCentroid&&(d.returnCentroid=this.returnCentroid);this.returnDistinctValues&&
(d.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(d.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(d.maxRecordCountFactor=this.maxRecordCountFactor);z&&(d.groupByFieldsForStatistics=z.join(","));A&&(d.orderByFields=A.join(","));if(B){var b=[];a.forEach(B,function(h){b.push(h.toJson())});d.outStatistics=l.toJson(b)}x?d.outSR=x.wkid||l.toJson(x.toJson()):q&&(d.outSR=q.spatialReference.wkid||l.toJson(q.spatialReference.toJson()));q=
this.timeExtent;d.time=q?q.toJson().join(","):null;(q=this.relationParam)&&this.spatialRelationship===f.SPATIAL_REL_RELATION&&(d.relationParam=q);g&&(d.distance=this.distance,this.hasOwnProperty("units")?d.units=this._units[this.units]||this._units.meters:d.units=this._units.meters);this.hasOwnProperty("start")&&(d.resultOffset=this.start,d.resultRecordCount=10,""===d.where&&(d.where="1\x3d1"));this.hasOwnProperty("num")&&(d.resultRecordCount=this.num);d.resultType=this.resultType;null!=this.cacheHint&&
(d.cacheHint=this.cacheHint);d.pixelSize=this.pixelSize?l.toJson(this.pixelSize.toJson()):null;d.multipatchOption=this.multipatchOption;this.quantizationParameters&&(d.quantizationParameters=l.toJson(this.quantizationParameters));d._ts=this._ts;return d}});n.mixin(f,e);n.setObject("tasks.Query",f,p);return f})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(r,n,a){n={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",
SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};r.setObject("tasks._SpatialRelationship",n,a);return n})},"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q,t,w,x){var z=f("esri-pbf"),A=n(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(b){this._handleSuccess=a.hitch(this,this._handleSuccess);this._handleError=a.hitch(this,this._handleError);a.mixin(this,b);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var b=new k(this._canceler);this._fetchDfd=b;this._result=null;this._sendRequest();
return b.promise},_canceler:function(b){var h=b._pendingRequest;if(!b.isFulfilled()&&h&&!h.isFulfilled()){h.cancel();var c=h.results&&h.results[1]}b._pendingRequest=null;return c},_sendRequest:function(b){var h=this.query;this.pagination&&(this._startPage=h.resultOffset=null==b?0:b,h.resultRecordCount=this.pageSize);b=this.requestOptions;this._fetchDfd._pendingRequest=g({url:this.url,content:h,handleAs:"pbf"===h.f?"arraybuffer":"json",callbackParamName:"callback",timeout:b&&b.timeout},b);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},
_handleSuccess:function(b){this.pagination?(b.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=this._result.features.concat(b.features):this._result=b,this._fetchDfd.progress(b),b.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(b),this._fetchDfd.resolve(b))},_handleError:function(b){this._fetchDfd.reject(b)}}),B=n(w,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],
"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(b,h){this._handler=a.hitch(this,this._handler);this._relationshipQueryHandler=a.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=a.hitch(this,this._executeForIdsHandler);this._countHandler=a.hitch(this,this._countHandler);this._extentHandler=a.hitch(this,this._extentHandler);this.source=h&&h.source;this.gdbVersion=h&&h.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",
c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(b,h,c,v,u){var y=
u.assembly;b=this._encode(a.mixin({},this._url.query,{f:v&&v.format||"json"},b.toJson(y&&y[0])));var C=this._handler,D=this._errorHandler;this.source&&(v={source:this.source.toJson()},b.layer=p.toJson(v));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);var E="pbf"===b.f;if(E){var F;z||(F="QueryTask.execute: 'pbf' format is not supported in your browser.");if(F)return b=new k,b.addErrback(function(G){D(G,c,u.dfd)}),b.reject(Error(F)),b}F=this.requestOptions;F=g({url:this._url.path+"/query",content:b,
callbackParamName:"callback",handleAs:E?"arraybuffer":"json",timeout:F&&F.timeout},F);b=[F];E&&b.push(B.loadPBFReader());(new m(b)).then(function(G){u.dfd.isFulfilled()||(G=G[0],G[0]?C(G[1],E,h,c,u.dfd):D(G[1],c,u.dfd))});return F},rawExecute:function(b,h,c){h=h||{};b=this._encode(a.mixin({},this._url.query,{f:h.format||"json"},b.toJson(c.assembly&&c.assembly[0])));this.source&&(b.layer=p.toJson({source:this.source.toJson()}));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);return(new A({url:this._url.path+
"/query",query:b,requestOptions:this.requestOptions,pagination:h.pagination,pageSize:h.pageSize})).execute().then(null,null,function(v){c.dfd.progress(v)}).then(a.hitch(this,function(v){this._successHandler([v],"onRawExecuteComplete",null,c.dfd)})).otherwise(a.hitch(this,function(v){this._errorHandler(v,null,c.dfd)}))},executeRelationshipQuery:function(b,h,c){b=this._encode(a.mixin({},this._url.query,{f:"json"},b.toJson()));var v=this._relationshipQueryHandler,u=this._errorHandler;this.gdbVersion&&
(b.gdbVersion=this.gdbVersion);var y=new k(d._dfdCanceller),C=this.requestOptions,D=this._url.path;this.source&&void 0!==this.source.mapLayerId&&null!==this.source.mapLayerId&&D.endsWith("/dynamicLayer")&&(D=D.slice(0,-13),D=D+"/"+this.source.mapLayerId);y._pendingDfd=g({url:D+"/queryRelatedRecords",content:b,callbackParamName:"callback",timeout:C&&C.timeout,load:function(E,F){v(E,F,h,c,y)},error:function(E){u(E,c,y)}},C);return y},executeForIds:function(b,h,c,v){var u=v.assembly;b=this._encode(a.mixin({},
this._url.query,{f:"json",returnIdsOnly:!0},b.toJson(u&&u[0])));var y=this._executeForIdsHandler,C=this._errorHandler;this.source&&(u={source:this.source.toJson()},b.layer=p.toJson(u));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);u=this.requestOptions;return g({url:this._url.path+"/query",content:b,callbackParamName:"callback",timeout:u&&u.timeout,load:function(D,E){y(D,E,h,c,v.dfd)},error:function(D){C(D,c,v.dfd)}},u)},executeForCount:function(b,h,c,v){var u=v.assembly;b=this._encode(a.mixin({},
this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},b.toJson(u&&u[0])));var y=this._countHandler,C=this._errorHandler;this.source&&(u={source:this.source.toJson()},b.layer=p.toJson(u));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);u=this.requestOptions;return g({url:this._url.path+"/query",content:b,callbackParamName:"callback",timeout:u&&u.timeout,load:function(D,E){y(D,E,h,c,v.dfd)},error:function(D){C(D,c,v.dfd)}},u)},executeForExtent:function(b,h,c,v){var u=v.assembly;b=this._encode(a.mixin({},
this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},b.toJson(u&&u[0])));var y=this._extentHandler,C=this._errorHandler;this.source&&(u={source:this.source.toJson()},b.layer=p.toJson(u));this.gdbVersion&&(b.gdbVersion=this.gdbVersion);u=this.requestOptions;return g({url:this._url.path+"/query",content:b,callbackParamName:"callback",timeout:u&&u.timeout,load:function(D,E){y(D,E,h,c,v.dfd)},error:function(D){C(D,c,v.dfd)}},u)},_handler:function(b,h,c,v,u){try{b&&h&&(b=B.pbfDeps.optimizedFeatures.convertToFeatureSet(B.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(b)));
var y=new x(b);this._successHandler([y],"onComplete",c,u)}catch(C){this._errorHandler(C,v,u)}},_relationshipQueryHandler:function(b,h,c,v,u){try{var y=b.geometryType,C=b.spatialReference,D={};l.forEach(b.relatedRecordGroups,function(E){var F={};F.geometryType=y;F.spatialReference=C;F.features=E.relatedRecords;F=new x(F);if(null!=E.objectId)D[E.objectId]=F;else for(var G in E)E.hasOwnProperty(G)&&"relatedRecords"!==G&&(D[E[G]]=F)});this._successHandler([D],"onExecuteRelationshipQueryComplete",c,u)}catch(E){this._errorHandler(E,
v,u)}},_executeForIdsHandler:function(b,h,c,v,u){try{this._successHandler([b.objectIds],"onExecuteForIdsComplete",c,u)}catch(y){this._errorHandler(y,v,u)}},_countHandler:function(b,h,c,v,u){try{var y=b.features,C=b.objectIds;if(C)var D=C.length;else{if(y)throw Error("Unable to perform query. Please check your parameters.");D=b.count}this._successHandler([D],"onExecuteForCountComplete",c,u)}catch(E){this._errorHandler(E,v,u)}},_extentHandler:function(b,h,c,v,u){try{b.extent&&(b.extent=new q(b.extent)),
this._successHandler([b],"onExecuteForExtentComplete",c,u)}catch(y){this._errorHandler(y,v,u)}}});B.loadPBFReader=function(){var b=new k;B.pbfDeps?b.resolve():r(["./support/pbfDeps"],function(h){B.pbfDeps=h;b.isFulfilled()||b.resolve()});return b.promise};t._createWrappers(B);a.setObject("tasks.QueryTask",B,e);return B})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(r,n,a){r.DeferredList=function(l,k,p,m,e){var f=[];n.call(this);var g=this;0!==
l.length||k||this.resolve([0,[]]);var d=0;a.forEach(l,function(q,t){function w(x,z){f[t]=[x,z];d++;d===l.length&&g.resolve(f)}q.then(function(x){k?g.resolve([t,x]):w(!0,x)},function(x){p?g.reject(x):w(!1,x);if(m)return null;throw x;})})};r.DeferredList.prototype=new n;r.DeferredList.prototype.gatherResults=function(l){l=new r.DeferredList(l,!1,!0,!1);l.addCallback(function(k){var p=[];a.forEach(k,function(m){p.push(m[1])});return p});return l};return r.DeferredList})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),
function(r,n,a,l,k,p,m,e,f,g,d,q){function t(y,C){return Math.ceil((y-C)/(2*C))}function w(y,C){var D=y.paths||y.rings,E,F,G=D.length;for(E=0;E<G;E++){var J=D[E].length;for(F=0;F<J;F++){var R=y.getPoint(E,F);y.setPoint(E,F,R.offset(C,0))}}return y}function x(y,C){if(!(y instanceof f||y instanceof g))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var D=y instanceof f,E=[],F;r.forEach(D?y.paths:y.rings,function(G){E.push(F=[]);F.push([G[0][0],G[0][1]]);var J,
R;for(J=0;J<G.length-1;J++){var O=G[J][0];var P=G[J][1];var U=G[J+1][0];var K=G[J+1][1];var V=Math.sqrt((U-O)*(U-O)+(K-P)*(K-P));var Q=(K-P)/V;var W=(U-O)/V;var N=V/C;if(1<N){for(R=1;R<=N-1;R++){var I=R*C;var S=W*I+O;I=Q*I+P;F.push([S,I])}R=(V+Math.floor(N-1)*C)/2;S=W*R+O;I=Q*R+P;F.push([S,I])}F.push([U,K])}});return D?new f({paths:E,spatialReference:y.spatialReference}):new g({rings:E,spatialReference:y.spatialReference})}function z(y,C,D){C&&(y=x(y,1E6),y=d.webMercatorToGeographic(y,!0));D&&(y=
w(y,D));return y}function A(y,C,D){var E=y.x||y[0];if(E>C){var F=t(E,C);y.x?y=y.offset(-2*F*C,0):y[0]=E+-2*F*C}else E<D&&(F=t(E,D),y.x?y=y.offset(-2*F*D,0):y[0]=E+-2*F*D);return y}function B(y,C){var D=-1;r.forEach(C.cutIndexes,function(E,F){var G=C.geometries[F];r.forEach(G.rings||G.paths,function(J,R){r.some(J,function(O){if(!(180>O[0])){O=0;var P,U=J.length;for(P=0;P<U;P++){var K=J[P][0];O=K>O?K:O}O=Number(O.toFixed(9));O=-360*t(O,180);U=J.length;for(P=0;P<U;P++)K=G.getPoint(R,P),G.setPoint(R,
P,K.offset(O,0))}return!0})});E===D?G.rings?r.forEach(G.rings,function(J){y[E]=y[E].addRing(J)}):r.forEach(G.paths,function(J){y[E]=y[E].addPath(J)}):(D=E,y[E]=G)});return y}function b(y,C,D,E){var F=new a;F.addCallbacks(D,E);C=C||p.defaults.geometryService;var G=[],J=[],R,O,P,U,K,V,Q,W,N=0;r.forEach(y,function(ca){if(ca)if(R||(R=ca.spatialReference,O=R._getInfo(),U=(P=R._isWebMercator())?2.0037508342788905E7:180,K=P?-2.0037508342788905E7:-180,V=P?102100:4326,Q=new f({paths:[[[U,K],[U,U]]],spatialReference:{wkid:V}}),
W=new f({paths:[[[K,K],[K,U]]],spatialReference:{wkid:V}})),O){var fa=q.fromJson(ca.toJson()),ha=ca.getExtent();"point"===ca.type?G.push(A(fa,U,K)):"multipoint"===ca.type?(fa.points=r.map(fa.points,function(na){return A(na,U,K)}),G.push(fa)):"extent"===ca.type?(fa=ha._normalize(null,null,O),G.push(fa.rings?new g(fa):fa)):ha?(ca=2*t(ha.xmin,K)*U,fa=0===ca?fa:w(fa,ca),ha=ha.offset(ca,0),ha.intersects(Q)&&ha.xmax!==U?(N=ha.xmax>N?ha.xmax:N,fa=z(fa,P),J.push(fa),G.push("cut")):ha.intersects(W)&&ha.xmin!==
K?(N=2*ha.xmax*U>N?2*ha.xmax*U:N,fa=z(fa,P,360),J.push(fa),G.push("cut")):G.push(fa)):G.push(fa)}else G.push(ca);else G.push(ca)});D=new f;E=t(N,U);for(var I=-90,S=E;0<E;){var Z=-180+360*E;D.addPath([[Z,I],[Z,-1*I]]);I*=-1;E--}0<J.length&&0<S?C?C.cut(J,D,function(ca){J=B(J,ca);var fa=[];r.forEach(G,function(ha,na){"cut"===ha&&(ha=J.shift(),y[na].rings&&1<y[na].rings.length&&ha.rings.length>=y[na].rings.length?(G[na]="simplify",fa.push(ha)):G[na]=!0===P?d.geographicToWebMercator(ha):ha)});0<fa.length?
C.simplify(fa,function(ha){r.forEach(G,function(na,ma){"simplify"===na&&(G[ma]=!0===P?d.geographicToWebMercator(ha.shift()):ha.shift())});F.callback(G)},function(ha){F.errback(ha)}):F.callback(G)},function(ca){F.errback(ca)}):F.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(r.forEach(G,function(ca,fa){"cut"===ca&&(ca=J.shift(),G[fa]=!0===P?d.geographicToWebMercator(ca):ca)}),F.callback(G));return F}function h(y,C,D,E){var F=!1,G;n.isObject(y)&&y&&
(n.isArray(y)?y.length&&((G=y[0]&&y[0].declaredClass)&&-1!==G.indexOf("Graphic")?(y=r.map(y,function(J){return J.geometry}),F=y.length?!0:!1):G&&-1!==G.indexOf("esri.geometry.")&&(F=!0)):(G=y.declaredClass)&&-1!==G.indexOf("FeatureSet")?(y=r.map(y.features||[],function(J){return J.geometry}),F=y.length?!0:!1):G&&-1!==G.indexOf("esri.geometry.")&&(F=!0));F&&C.push({index:D,property:E,value:y})}function c(y,C){var D=[];r.forEach(C,function(E){var F=E.i,G=y[F];E=E.p;var J;if(n.isObject(G)&&G)if(E)if("*"===
E[0])for(J in G)G.hasOwnProperty(J)&&h(G[J],D,F,J);else r.forEach(E,function(R){h(n.getObject(R,!1,G),D,F,R)});else h(G,D,F)});return D}function v(y,C){var D=0,E={};r.forEach(C,function(F){var G=F.index,J=F.property,R=F.value,O=R.length||1,P=y.slice(D,D+O);n.isArray(R)||(P=P[0]);D+=O;delete F.value;J?(E[G]=E[G]||{},E[G][J]=P):E[G]=P});return E}function u(y){for(var C=[],D=0,E=0,F=Math.min,G=Math.max,J=0;J<y.length;J++){for(var R=y[J],O=null,P=0;P<R.length;P++)O=R[P],C.push(O),0===P?E=D=O[0]:(D=F(D,
O[0]),E=G(E,O[0]));O&&C.push([(D+E)/2,0])}return C}l={normalizeCentralMeridian:b,_foldCutResults:B,_prepareGeometryForCut:z,_offsetMagnitude:t,_pointNormalization:A,_updatePolyGeometry:w,_straightLineDensify:x,_createWrappers:function(y){var C=n.isObject(y)?y.prototype:n.getObject(y+".prototype");r.forEach(C.__msigns,function(D){var E=C[D.n];C[D.n]=function(){var F=this,G=[],J,R=new a(m._dfdCanceller);D.f&&m._fixDfd(R);for(J=0;J<D.c;J++)G[J]=arguments[J];var O={dfd:R};G.push(O);var P=[],U;if(F.normalization&&
!F._isTable){var K=c(G,D.a);r.forEach(K,function(V){P=P.concat(V.value)});P.length&&(U=b(P))}U?(R._pendingDfd=U,U.addCallbacks(function(V){R.canceled||(O.assembly=v(V,K),R._pendingDfd=E.apply(F,G))},function(V){var Q=F.declaredClass;Q&&-1!==Q.indexOf("FeatureLayer")?F._resolve([V],null,G[D.e],R,!0):F._errorHandler(V,G[D.e],R)})):R._pendingDfd=E.apply(F,G);return R}})},_disassemble:c,_addToBucket:h,_reassemble:v,getDenormalizedExtent:function(y){if(!y)return null;var C=y.getExtent();if(!C)return null;
var D=y.spatialReference&&y.spatialReference._getInfo();if(!D)return C;var E=D.valid[0];D=D.valid[1];var F=2*D,G=C.getWidth(),J=C.xmax,R=C.xmin;if("extent"===y.type||0===G||G<=D||G>F||J<E||R>D)return C;switch(y.type){case "polygon":if(1<y.rings.length)var O=u(y.rings);else return C;break;case "polyline":if(1<y.paths.length)O=u(y.paths);else return C;break;case "multipoint":O=y.points}y=Math.min;E=Math.max;F=new e(C.toJson());for(var P=0;P<O.length;P++){var U=O[P][0];0>U?(U+=D,R=E(U,R)):(U-=D,J=y(U,
J))}F.xmin=J;F.xmax=R;return F.getWidth()<G?(F.xmin-=D,F.xmax-=D,F):C}};n.mixin(n.getObject("geometry",!0,k),l);return l})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(r,n,a,l,k,p,m,e){r=r(e,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(f,g){f&&n.isString(f)&&(this._url=m.urlToObject(this.url=f));g&&g.requestOptions&&(this.requestOptions=
g.requestOptions);this.normalization=!0;this._errorHandler=n.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var f=this._url,g=/^http:/i;this.url&&(this.url=this.url.replace(g,"https:"));f&&f.path&&(f.path=f.path.replace(g,"https:"))},_encode:function(f,g,d){var q={},t;for(t in f)if("declaredClass"!==t){var w=f[t];var x=typeof w;if(null!==w&&void 0!==w&&"function"!==x)if(n.isArray(w)){q[t]=[];var z=w.length;for(x=0;x<z;x++)q[t][x]=this._encode(w[x])}else"object"===
x?w.toJson&&(x=w.toJson(d&&d[t]),"esri.tasks.FeatureSet"===w.declaredClass&&x.spatialReference&&(x.sr=x.spatialReference,delete x.spatialReference),q[t]=g?x:a.toJson(x)):q[t]=w}return q},_successHandler:function(f,g,d,q){g&&this[g].apply(this,f);d&&d.apply(null,f);q&&p._resDfd(q,f)},_errorHandler:function(f,g,d){this.onError(f);g&&g(f);d&&d.errback(f)},setNormalization:function(f){this.normalization=f},onError:function(){}});return k.Task=r})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),
function(r,n,a,l,k,p){r=r([l],{declaredClass:"esri.Evented",registerConnectEvents:function(){var m=this.constructor,e=this.constructor._meta.parents,f=[{}],g={},d,q=function(w,x){n.isArray(w)||(w=[w]);for(var z=0;z<w.length;z++){var A=w[z];A._meta&&A._meta.parents&&q(A._meta.parents,x);A.prototype._eventMap&&x.push(n.mixin({},A.prototype._eventMap))}return x};if(!m._onMap){q(e,f);f.push(this._eventMap);e=n.mixin.apply(this,f);for(t in this)/^on\w/.test(t)&&n.isFunction(this[t])&&(f=this._hyphenLower(t).toLowerCase(),
e[f]||(g[f]={method:t}));for(d in e){var t=this._onCamelCase(d);g[d]={method:t,argKeys:e[d]}}m._onMap=g;return m._onMap}},on:function(m,e){if(-1<m.indexOf(",")){for(var f=m.split(/\s*,\s*/),g=f.length,d=[];g--;)d.push(this.on(f[g],e));d.remove=function(){for(var w=0;w<d.length;w++)d[w].remove()};return d}f=this.constructor._onMap||this.registerConnectEvents();g="string"==typeof m&&m.toLowerCase();var q=this._onCamelCase(g),t=f&&f[g];return(q=t&&t.method||this[q]&&n.isFunction(this[q])&&q)?t&&n.isArray(t.argKeys)?
(f=this._onArr2Obj(e,f[g].argKeys),a.after(this,q,f,!0)):a.after(this,q,function(w){w=w||{};w.target||(w.target=this);e.call(this,w)},!0):this.inherited(arguments)},emit:function(m,e){var f,g,d=m.toLowerCase();var q=this._onCamelCase(m);var t=this.constructor._onMap||this.registerConnectEvents();q=(g=t&&t[d]&&t[d].method||n.isFunction(this[q])&&q)&&this[g];g&&t&&t[d]&&this._onObj2Arr(function(){f=Array.prototype.slice.call(arguments)},t[d].argKeys)(e);e=e||{};e.target||(e.target=this);if(q){var w=
f&&f.length?f:[e];w=q.apply(this,w)}this.inherited(arguments,[m,e]);return w},_onObj2Arr:function(m,e){if(e){var f=this;return function(g){var d,q=[],t=e.length;for(d=0;d<t;d++)q[d]=g[e[d]];m.apply(f,q)}}return m},_onArr2Obj:function(m,e){if(e){var f=this;return function(){var g,d={},q=arguments.length;for(g=0;g<q;g++)d[e[g]]=arguments[g];d.target||(d.target=f);m.call(f,d)}}return m},_hyphenLower:function(m){return m.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(e,f){return(f?"-":"")+e.toLowerCase()})},
_onCamelCase:function(m){return"on"+m.substr(0,1).toUpperCase()+m.substr(1).replace(/\-([a-z])/g,function(e,f){return f.toUpperCase()})}});return p.Evented=r})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(r,n,a,l,k,p,m,e,f,g,d,q){r=r(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(t,
w){if(t){n.mixin(this,t);var x=this.features=this.features||[],z=t.spatialReference;z=this.spatialReference=d.createInstance(e.simpleConstructor,z);var A=d.getGeometryType(t.geometryType);this.geometryType=t.geometryType;t.fields&&(this.fields=t.fields);t=d.supportsLazyUnquantization(this.geometryType);var B=d.unquantizeFunction(this.geometryType,this.transform),b=!!(w&&t&&B),h=A&&(b?A.accessorConstructor:A.simpleConstructor);a.forEach(x,function(c,v){var u=d.createInstance(m.simpleConstructor),y=
c.geometry;if(A&&y){var C=u.geometry=d.createInstance(h,b?null:y);C.setSpatialReference(y.spatialReference?d.createInstance(e.simpleConstructor,y.spatialReference):z);b&&C.setupLazyUnquantization(B,y)}u.symbol=c.symbol?q.fromJson(c.symbol):null;u.attributes=c.attributes;x[v]=u});b||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(t){var w={};this.displayFieldName&&(w.displayFieldName=this.displayFieldName);this.fields&&
(w.fields=this.fields);this.spatialReference?w.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(w.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(w.geometryType=d.getJsonType(this.features[0].geometry)),w.features=f._encodeGraphics(this.features,t));w.geometryType=w.geometryType||this.geometryType;w.exceededTransferLimit=this.exceededTransferLimit;w.transform=this.transform;return p.fixJson(w)},
_hydrate:function(){d.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(t){if(!this.geometryType)return this.transform=null,this;var w=t.translate[0],x=t.translate[1],z=t.scale[0],A=t.scale[1],B=this.features,b=function(u,y,C){var D,E=[];var F=0;for(D=u.length;F<D;F++){var G=u[F];if(0<F){var J=y(G[0]);G=C(G[1]);if(J!==R||G!==O){E.push([J-R,G-O]);var R=J;var O=G}}else R=y(G[0]),O=C(G[1]),E.push([R,O])}return 0<E.length?E:null},h=function(u,y,C){if("esriGeometryPoint"===
u)return function(D){D.x=y(D.x);D.y=C(D.y);return D};if("esriGeometryPolyline"===u||"esriGeometryPolygon"===u)return function(D){var E;var F=D.rings||D.paths;var G=[];var J=0;for(E=F.length;J<E;J++){var R=F[J];(R=b(R,y,C))&&G.push(R)}return 0<G.length?(D.rings?D.rings=G:D.paths=G,D):null};if("esriGeometryMultipoint"===u)return function(D){var E=b(D.points,y,C);return 0<E.length?(D.points=E,D):null};if("esriGeometryEnvelope"===u)return function(D){return D}}(this.geometryType,function(u){return Math.round((u-
w)/z)},function(u){return Math.round((x-u)/A)}),c;var v=0;for(c=B.length;v<c;v++)B[v].geometry&&(h(B[v].geometry)||B[v].setGeometry(null));this.transform=t;return this}});r.createGraphics=function(t){var w=t.geometryType,x=d.createInstance(e.simpleConstructor,t.spatialReference),z=d.getGeometryType(w).accessorConstructor,A=d.unquantizeFunction(w,t.transform);return a.map(t.features,function(B,b){b=d.createInstance(m.simpleConstructor);var h=B.geometry;if(h){var c=b.geometry=d.createInstance(z);c.setSpatialReference(x);
c.setupLazyUnquantization(A,h)}b.attributes=B.attributes;return b})};r.createPolygon=function(t,w,x){if(t){var z=d.createInstance(g.accessorConstructor);z.setSpatialReference(w);w=d.unquantizeFunction("esriGeometryPolygon",x);z.setupLazyUnquantization(w,t)}return z};n.setObject("tasks.FeatureSet",r,k);return r})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(r,n,a,l,k){a={graphicsExtent:function(p){if(!p||!p.length)return null;
var m=null,e,f=p.length;for(e=0;e<f;e++){var g=p[e].geometry;if(g){var d=g.getExtent();d||"point"!==g.type||null==g.x||null==g.y||(d=new k(g.x,g.y,g.x,g.y,g.spatialReference));d&&(m=m?m.union(d):d)}}return 0>m.getWidth()&&0>m.getHeight()?null:m},getGeometries:function(p){return n.map(p,function(m){return m.geometry})},_encodeGraphics:function(p,m){return n.map(p,function(e,f){e=e.toJson();var g={};e.geometry&&(f=m&&m[f],g.geometry=f&&f.toJson()||e.geometry);e.attributes&&(g.attributes=e.attributes);
return g})}};r.mixin(l,a);return a})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","../kernel"],function(r,n,a,l,k){r=r(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var p={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,
maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},m=this.objectIds,e=this.outFields,f=this.outSpatialReference,g=this.orderByFields;m&&(p.objectIds=m.join(","));e&&(p.outFields=e.join(","));f&&(p.outSR=f.wkid||a.toJson(f.toJson()));g&&(p.orderByFields=g.join(","));p._ts=this._ts;return p}});n.setObject("tasks.RelationshipQuery",r,k);return r})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(r,
n,a,l){r=r(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});n.setObject("tasks.StatisticDefinition",r,l);return r})},"esri/tasks/support/pbfDeps":function(){define(["../../layers/vectorTiles/tasks/operations/pbfQueryUtils","../../layers/vectorTiles/layers/graphics/optimizedFeatures"],
function(r,n){return{pbfQueryUtils:r,optimizedFeatures:n}})},"esri/layers/vectorTiles/tasks/operations/pbfQueryUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../core/pbf ../../layers/graphics/optimizedFeatures".split(" "),function(r,n,a,l,k,p){function m(c){if(c>=b.length){var v=new a("query:parsing-pbf","Error while parsing FeatureSet PBF payload. Unknown GeometryType");z.error(v)}return b[c]}function e(c){var v,u=v||(v={});u[u.STRING=1]="STRING";u[u.FLOAT=2]="FLOAT";
u[u.DOUBLE=3]="DOUBLE";u[u.SINT32=4]="SINT32";u[u.UINT32=5]="UINT32";u[u.INT64=6]="INT64";u[u.UINT64=7]="UINT64";u[u.SINT64=8]="SINT64";for(u[u.BOOL=9]="BOOL";c.next();)switch(c.tag()){case v.STRING:return c.getString();case v.FLOAT:return c.getFloat();case v.DOUBLE:return c.getDouble();case v.SINT32:return c.getSInt32();case v.UINT32:return c.getUInt32();case v.INT64:return c.getInt64();case v.UINT64:return c.getUInt64();case v.SINT64:return c.getSInt64();case v.BOOL:return c.getBool();default:return c.skip(),
null}return null}function f(c){var v,u=v||(v={});u[u.NAME=1]="NAME";u[u.TYPE=2]="TYPE";u[u.ALIAS=3]="ALIAS";u[u.SQL_TYPE=4]="SQL_TYPE";u[u.DOMAIN=5]="DOMAIN";u[u.DEFAULT_VALUE=6]="DEFAULT_VALUE";for(u={type:A[0]};c.next();)switch(c.tag()){case v.NAME:u.name=c.getString();break;case v.TYPE:u.type=A[c.getEnum()];break;case v.ALIAS:u.alias=c.getString();break;case v.SQL_TYPE:u.sqlType=B[c.getEnum()];break;case v.DOMAIN:c.skip();break;case v.DEFAULT_VALUE:c.skip();break;default:c.skip()}return u}function g(c,
v){var u,y=u||(u={});y[y.ATTRIBUTES=1]="ATTRIBUTES";y[y.GEOMETRY=2]="GEOMETRY";y[y.CENTROID=4]="CENTROID";y=new p.OptimizedFeature;for(var C=0;c.next();)switch(c.tag()){case u.ATTRIBUTES:var D=c.getMessage(),E=v[C++].name;y.attributes[E]=e(D);break;case u.GEOMETRY:D=void 0;E=c.getMessage();var F=D||(D={});F[F.TYPE=1]="TYPE";F[F.LENGTHS=2]="LENGTHS";F[F.COORDS=3]="COORDS";F=new p.OptimizedGeometry;for(var G=F.coords,J=F.lengths;E.next();)switch(E.tag()){case D.LENGTHS:var R=E.getUInt32();for(R=E.pos()+
R;E.pos()<R;)J.push(E.getUInt32());break;case D.COORDS:R=E.getUInt32();R=E.pos()+R;for(var O=0;E.pos()<R;)G[O++]=E.getSInt64();break;default:E.skip()}y.geometry=F;break;case u.CENTROID:D=void 0;E=c.getMessage();F=D||(D={});F[F.TYPE=1]="TYPE";F[F.LENGTHS=2]="LENGTHS";F[F.COORDS=3]="COORDS";F=new p.OptimizedGeometry;for(G=F.coords;E.next();)switch(E.tag()){case D.COORDS:J=E.getUInt32();J=E.pos()+J;for(R=0;E.pos()<J;)G[R++]=E.getSInt64();break;default:E.skip()}y.centroid=F;break;default:c.skip()}return y}
function d(c){var v,u=v||(v={});u[u.X=1]="X";u[u.Y=2]="Y";u[u.M=3]="M";u[u.Z=4]="Z";for(u=[0,0];c.next();)switch(c.tag()){case v.X:u[0]=c.getDouble();break;case v.Y:u[1]=c.getDouble();break;case v.M:u.push(c.getDouble());break;case v.Z:u.push(c.getDouble());break;default:c.skip()}return u}function q(c){var v,u=v||(v={});u[u.X=1]="X";u[u.Y=2]="Y";u[u.M=3]="M";u[u.Z=4]="Z";for(u=[0,0];c.next();)switch(c.tag()){case v.X:u[0]=c.getDouble();break;case v.Y:u[1]=c.getDouble();break;case v.M:u.push(c.getDouble());
break;case v.Z:u.push(c.getDouble());break;default:c.skip()}return u}function t(c){var v,u=v||(v={});u[u.ORIGIN_POSTION=1]="ORIGIN_POSTION";u[u.SCALE=2]="SCALE";u[u.TRANSLATE=3]="TRANSLATE";u=h[0];for(var y,C;c.next();)switch(c.tag()){case v.ORIGIN_POSTION:u=h[c.getEnum()];break;case v.SCALE:y=d(c.getMessage());break;case v.TRANSLATE:C=q(c.getMessage());break;default:c.skip()}return{originPosition:u,scale:y,translate:C}}function w(c){var v,u=v||(v={});u[u.AREA_FIELD_NAME=1]="AREA_FIELD_NAME";u[u.LENGTH_FIELD_NAME=
2]="LENGTH_FIELD_NAME";u[u.UNITS=3]="UNITS";for(u={};c.next();)switch(c.tag()){case v.AREA_FIELD_NAME:u.shapeAreaFieldName=c.getString();break;case v.LENGTH_FIELD_NAME:u.shapeLengthFieldName=c.getString();break;case v.UNITS:u.units=c.getString();break;default:c.skip()}return u}function x(c){var v,u=v||(v={});u[u.WKID=1]="WKID";u[u.LASTEST_WKID=2]="LASTEST_WKID";u[u.VCS_WKID=3]="VCS_WKID";u[u.LATEST_VCS_WKID=4]="LATEST_VCS_WKID";u[u.WKT=5]="WKT";for(u={};c.next();)switch(c.tag()){case v.WKID:u.wkid=
c.getUInt32();break;case v.WKT:u.wkt=c.getString();break;default:c.skip()}return u}Object.defineProperty(n,"__esModule",{value:!0});var z=l.getLogger("esri.tasks.operations.pbfQueryUtils"),A="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),B="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
b=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],h=["upperLeft","lowerLeft"];n.parsePBFFeatureQuery=function(c){try{var v,u=v||(v={});u[u.QUERY_RESULT=2]="QUERY_RESULT";for(var y=new k(new Uint8Array(c),new DataView(c)),C;y.next();)switch(y.tag()){case v.QUERY_RESULT:c=void 0;var D=y.getMessage(),E=c||(c={});E[E.FEATURE_RESULT=1]="FEATURE_RESULT";for(u={};D.next();)switch(D.tag()){case c.FEATURE_RESULT:var F=void 0,G=D.getMessage(),J=F||(F={});J[J.OBJECT_ID_NAME=
1]="OBJECT_ID_NAME";J[J.UNIQUE_ID_NAME=2]="UNIQUE_ID_NAME";J[J.GLOBAL_ID_NAME=3]="GLOBAL_ID_NAME";J[J.GEOHASH_NAME=4]="GEOHASH_NAME";J[J.GEOMETRY_PROPERTIES=5]="GEOMETRY_PROPERTIES";J[J.SERVER_GENS=6]="SERVER_GENS";J[J.GEOMETRY_TYPE=7]="GEOMETRY_TYPE";J[J.SPATIAL_REFERENCE=8]="SPATIAL_REFERENCE";J[J.EXCEEDED_TRANSFER_LIMIT=9]="EXCEEDED_TRANSFER_LIMIT";J[J.HAS_Z=10]="HAS_Z";J[J.HAS_M=11]="HAS_M";J[J.TRANSFORM=12]="TRANSFORM";J[J.FIELDS=13]="FIELDS";J[J.FEATURES=15]="FEATURES";var R=new p.OptimizedFeatureSet;
for(R.geometryType=m(0);G.next();)switch(G.tag()){case F.OBJECT_ID_NAME:R.objectIdFieldName=G.getString();break;case F.GLOBAL_ID_NAME:R.globalIdFieldName=G.getString();break;case F.GEOHASH_NAME:R.geohashFieldName=G.getString();break;case F.GEOMETRY_PROPERTIES:R.geometryProperties=w(G.getMessage());break;case F.GEOMETRY_TYPE:R.geometryType=m(G.getEnum());break;case F.SPATIAL_REFERENCE:R.spatialReference=x(G.getMessage());break;case F.HAS_Z:R.hasZ=G.getBool();break;case F.HAS_M:R.hasM=G.getBool();break;
case F.TRANSFORM:var O=G.getMessage();R.transform=t(O);break;case F.EXCEEDED_TRANSFER_LIMIT:var P=G.getBool();R.exceededTransferLimit=P;break;case F.FIELDS:var U=G.getMessage();R.fields.push(f(U));break;case F.FEATURES:var K=G.getMessage();R.features.push(g(K,R.fields));break;default:G.skip()}var V=R;u.featureResult=V;break;default:D.skip()}C=u;break;default:y.skip()}return C.featureResult}catch(Q){return v=new a("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:Q}),z.error(v),
new p.OptimizedFeatureSet}}})},"esri/layers/vectorTiles/layers/graphics/optimizedFeatures":function(){define(["require","exports","../../core/Error","../../core/Logger"],function(r,n,a,l){function k(Q,W){return Math.round((W-Q.translate[0])/Q.scale[0])}function p(Q,W){return Math.round((Q.translate[1]-W)/Q.scale[1])}function m(Q,W){return W*Q.scale[0]+Q.translate[0]}function e(Q,W){return Q.translate[1]-W*Q.scale[1]}function f(Q){Q=Q.coords;return{x:Q[0],y:Q[1]}}function g(Q){var W=new K;W.coords[0]=
Q.x;W.coords[1]=Q.y;return W}function d(Q){Q=Q.coords;return{x:Q[0],y:Q[1],z:Q[2]}}function q(Q){var W=new K;W.coords[0]=Q.x;W.coords[1]=Q.y;W.coords[2]=Q.z;return W}function t(Q){Q=Q.coords;return{x:Q[0],y:Q[1],m:Q[2]}}function w(Q){var W=new K;W.coords[0]=Q.x;W.coords[1]=Q.y;W.coords[2]=Q.m;return W}function x(Q){Q=Q.coords;return{x:Q[0],y:Q[1],z:Q[2],m:Q[3]}}function z(Q){var W=new K;W.coords[0]=Q.x;W.coords[1]=Q.y;W.coords[2]=Q.z;W.coords[3]=Q.m;return W}function A(Q,W,N){for(var I=W?N?4:3:N?
3:2,S=[],Z=0;Z<Q.coords.length;Z+=I){for(var ca=[],fa=0;fa<I;fa++)ca.push(Q.coords[Z+fa]);S.push(ca)}return W?N?{points:S,hasZ:W,hasM:N}:{points:S,hasZ:W}:N?{points:S,hasM:N}:{points:S}}function B(Q,W,N){var I=W?N?4:3:N?3:2,S=Q.coords,Z=[],ca=0,fa=0;for(Q=Q.lengths;fa<Q.length;fa++){for(var ha=Q[fa],na=[],ma=0;ma<ha;ma++){for(var ra=[],sa=0;sa<I;sa++)ra.push(S[ca++]);na.push(ra)}Z.push(na)}return W?N?{paths:Z,hasZ:W,hasM:N}:{paths:Z,hasZ:W}:N?{paths:Z,hasM:N}:{paths:Z}}function b(Q,W,N){var I=W?N?
4:3:N?3:2,S=Q.coords,Z=[],ca=0,fa=0;for(Q=Q.lengths;fa<Q.length;fa++){for(var ha=Q[fa],na=[],ma=0;ma<ha;ma++){for(var ra=[],sa=0;sa<I;sa++)ra.push(S[ca++]);na.push(ra)}Z.push(na)}return W?N?{rings:Z,hasZ:W,hasM:N}:{rings:Z,hasZ:W}:N?{rings:Z,hasM:N}:{rings:Z}}function h(Q,W,N,I){if(!W)return[];switch(W){case "esriGeometryPoint":W=g;I&&N?W=z:I?W=q:N&&(W=w);N=[];for(I=0;I<Q.length;I++){var S=Q[I],Z=S.geometry;S=S.attributes;Z=Z?W(Z):void 0;N.push(new V(Z,S))}return N;case "esriGeometryMultipoint":W=
N?I?4:3:I?3:2;N=[];for(I=0;I<Q.length;I++){Z=Q[I];var ca=Z.geometry;Z=Z.attributes;S=void 0;if(ca){S=new K;S.lengths[0]=ca.points.length;var fa=S.coords,ha=0,na=0;for(ca=ca.points;na<ca.length;na++)for(var ma=ca[na],ra=0;ra<W;ra++)fa[ha++]=ma[ra]}N.push(new V(S,Z))}return N;case "esriGeometryPolyline":W=N?I?4:3:I?3:2;N=[];for(I=0;I<Q.length;I++){Z=Q[I];ma=Z.geometry;Z=Z.attributes;S=void 0;if(ma)for(S=new K,fa=S.lengths,ha=S.coords,ca=na=0,ma=ma.paths;ca<ma.length;ca++){ra=ma[ca];for(var sa=0,ba=
ra;sa<ba.length;sa++)for(var ea=ba[sa],ja=0;ja<W;ja++)ha[na++]=ea[ja];fa.push(ra.length)}N.push(new V(S,Z))}return N;case "esriGeometryPolygon":W=N?I?4:3:I?3:2;N=[];for(I=0;I<Q.length;I++){S=Q[I];ra=S.geometry;Z=S.centroid;S=S.attributes;fa=void 0;if(ra)for(fa=new K,ha=fa.lengths,na=fa.coords,ma=ca=0,ra=ra.rings;ma<ra.length;ma++){sa=ra[ma];ba=0;for(ea=sa;ba<ea.length;ba++){ja=ea[ba];for(var oa=0;oa<W;oa++)na[ca++]=ja[oa]}ha.push(sa.length)}Z?N.push(new V(fa,S,g(Z))):N.push(new V(fa,S))}return N;
default:return G.error("convertToFeatureSet:unknown-geometry",new a("Unable to parse unknown geometry type "+W)),[]}}function c(Q,W,N,I,S,Z){S=J[S];var ca=W.coords;W=W.lengths;var fa=N?I?4:3:I?3:2;N=N?I?P:O:I?O:R;Q.lengths.length=0;Q.coords.length=0;if(!ca.length)return Q;if(!W.length)return N(Q.coords,ca,0,0,k(Z,ca[0]),p(Z,ca[1])),Q.lengths.length=0,Q.coords.length=fa,Q;for(var ha,na,ma,ra=0,sa,ba=0,ea=0;ea<W.length;ea++){var ja=W[ea];if(!(ja<S)){var oa=0;sa=ba;na=I=k(Z,ca[ra]);ma=ha=p(Z,ca[ra+1]);
N(Q.coords,ca,sa,ra,na,ma);oa++;ra+=fa;sa+=fa;for(var ka=1;ka<ja;ka++,ra+=fa)if(na=k(Z,ca[ra]),ma=p(Z,ca[ra+1]),na!==I||ma!==ha)N(Q.coords,ca,sa,ra,na-I,ma-ha),sa+=fa,oa++,I=na,ha=ma;oa>=S&&(Q.lengths.push(oa),ba=sa)}}Q.coords.length=ba;return Q.coords.length?Q:null}function v(Q,W,N,I,S){var Z=W.coords;W=W.lengths;var ca=N?I?P:O:I?O:R;N=N?I?4:3:I?3:2;if(!Z.length)return Q.lengths.length=0,Q.coords.length=0,Q;if(!W.length)return ca(Q.coords,Z,0,0,m(S,Z[0]),e(S,Z[1])),Q.lengths.length=0,Q.coords.length=
N,Q;var fa=S.scale;I=fa[0];fa=fa[1];for(var ha=0,na=0;na<W.length;na++){var ma=W[na];Q.lengths[na]=ma;var ra=m(S,Z[ha]),sa=e(S,Z[ha+1]);ca(Q.coords,Z,ha,ha,ra,sa);ha+=N;for(var ba=1;ba<ma;ba++,ha+=N)ra+=Z[ha]*I,sa-=Z[ha+1]*fa,ca(Q.coords,Z,ha,ha,ra,sa)}Q.lengths.length=W.length;Q.coords.length=Z.length;return Q}function u(Q,W,N,I,S,Z){Z=S?Z?4:3:Z?3:2;var ca=N,fa=N+Z,ha=0,na=0,ma=N=0,ra=0,sa=0;for(--I;sa<I;sa++,ca+=Z,fa+=Z){var ba=W[ca],ea=W[ca+1],ja=W[ca+2],oa=W[fa],ka=W[fa+1],Ca=W[fa+2],Y=ba*ka-
oa*ea;ma+=Y;ha+=(ba+oa)*Y;na+=(ea+ka)*Y;S&&(Y=ba*Ca-oa*ja,N+=(ja+Ca)*Y,ra+=Y);ba<Q[0]&&(Q[0]=ba);ba>Q[1]&&(Q[1]=ba);ea<Q[2]&&(Q[2]=ea);ea>Q[3]&&(Q[3]=ea);S&&(ja<Q[4]&&(Q[4]=ja),ja>Q[5]&&(Q[5]=ja))}0<ma&&(ma*=-1);0<ra&&(ra*=-1);if(!ma)return null;Q=[ha,na,.5*ma];S&&(Q[3]=N,Q[4]=.5*ra);return Q}function y(Q,W,N,I,S){S=I?S?4:3:S?3:2;for(var Z=W,ca=W+S,fa=0,ha=0,na=0,ma=0,ra=0,sa=N-1;ra<sa;ra++,Z+=S,ca+=S){var ba=Q[Z],ea=Q[Z+1],ja=Q[Z+2],oa=Q[ca],ka=Q[ca+1],Ca=Q[ca+2],Y=I?D(ba,ea,ja,oa,ka,Ca):C(ba,ea,
oa,ka);Y&&(fa+=Y,I?(ba=F(ba,ea,ja,oa,ka,Ca),ha+=Y*ba[0],na+=Y*ba[1],ma+=Y*ba[2]):(ba=E(ba,ea,oa,ka),ha+=Y*ba[0],na+=Y*ba[1]))}return 0<fa?I?[ha/fa,na/fa,ma/fa]:[ha/fa,na/fa]:0<N?I?[Q[W],Q[W+1],Q[W+2]]:[Q[W],Q[W+1]]:null}function C(Q,W,N,I){Q=N-Q;W=I-W;return Math.sqrt(Q*Q+W*W)}function D(Q,W,N,I,S,Z){Q=I-Q;W=S-W;N=Z-N;return Math.sqrt(Q*Q+W*W+N*N)}function E(Q,W,N,I){return[Q+.5*(N-Q),W+.5*(I-W)]}function F(Q,W,N,I,S,Z){return[Q+.5*(I-Q),W+.5*(S-W),N+.5*(Z-N)]}Object.defineProperty(n,"__esModule",
{value:!0});var G=l.getLogger("esri.tasks.support.optimizedFeatureSet"),J={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},R=function(Q,W,N,I,S,Z){Q[N]=S;Q[N+1]=Z},O=function(Q,W,N,I,S,Z){Q[N]=S;Q[N+1]=Z;Q[N+2]=W[I+2]},P=function(Q,W,N,I,S,Z){Q[N]=S;Q[N+1]=Z;Q[N+2]=W[I+2];Q[N+3]=W[I+3]};n.quantizeX=k;n.quantizeY=p;n.hydrateX=m;n.hydrateY=e;var U=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=
this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1}}();n.OptimizedFeatureSet=U;var K=function(){return function(Q,W){void 0===Q&&(Q=[]);void 0===W&&(W=[]);this.lengths=Q;this.coords=W}}();n.OptimizedGeometry=K;var V=function(){return function(Q,W,N){void 0===Q&&(Q=null);void 0===W&&(W={});this.geometry=Q;this.attributes=W;N&&(this.centroid=N)}}();n.OptimizedFeature=V;n.convertToPoint=function(Q,
W,N){return W?N?x(Q):d(Q):N?t(Q):f(Q)};n.convertToMultipoint=A;n.convertToPolyline=B;n.convertToPolygon=b;n.convertFromFeatures=h;n.convertToFeatureSet=function(Q){var W=[],N=Q.objectIdFieldName,I=Q.spatialReference,S=Q.transform,Z=Q.fields,ca=Q.hasM,fa=Q.hasZ,ha=Q.features,na=Q.geometryType;Q=Q.exceededTransferLimit;switch(na){case "esriGeometryPoint":W=f;ca&&fa?W=x:ca?W=d:fa&&(W=t);for(var ma=[],ra=0;ra<ha.length;ra++){var sa=ha[ra],ba=sa.geometry;sa=sa.attributes;ba=ba?W(ba):null;ma.push({attributes:sa,
geometry:ba})}W=ma;break;case "esriGeometryMultipoint":W=[];for(ma=0;ma<ha.length;ma++)ba=ha[ma],ra=ba.geometry,ba=ba.attributes,sa=void 0,ra&&(sa=A(ra,fa,ca)),W.push({attributes:ba,geometry:sa});break;case "esriGeometryPolyline":W=[];for(ma=0;ma<ha.length;ma++)ba=ha[ma],ra=ba.geometry,ba=ba.attributes,sa=void 0,ra&&(sa=B(ra,fa,ca)),W.push({attributes:ba,geometry:sa});break;case "esriGeometryPolygon":W=[];for(ma=0;ma<ha.length;ma++){sa=ha[ma];ba=sa.geometry;ra=sa.attributes;var ea=sa.centroid;sa=
void 0;ba&&(sa=b(ba,fa,ca));ea?(ba=f(ea),W.push({attributes:ra,centroid:ba,geometry:sa})):W.push({attributes:ra,geometry:sa})}break;default:G.error("convertToFeatureSet:unknown-geometry",new a("Unable to parse unknown geometry type "+na))}N={features:W,fields:Z,geometryType:na,objectIdFieldName:N,spatialReference:I};S&&(N.transform=S);Q&&(N.exceededTransferLimit=Q);ca&&(N.hasM=ca);fa&&(N.hasZ=fa);return N};n.convertFromFeatureSet=function(Q){var W=new U,N=Q.hasM,I=Q.hasZ,S=Q.features,Z=Q.objectIdFieldName,
ca=Q.spatialReference,fa=Q.geometryType,ha=Q.exceededTransferLimit,na=Q.transform;W.fields=Q.fields;W.geometryType=fa;W.objectIdFieldName=Z;W.spatialReference=ca;W.features=h(S,fa,I,N);ha&&(W.exceededTransferLimit=ha);N&&(W.hasM=N);I&&(W.hasZ=I);na&&(W.transform=na);return W};n.hydrateOptimizedFeatureSet=function(Q){var W=Q.transform,N=Q.hasM,I=Q.hasZ;if(!W)return Q;for(var S=0,Z=Q.features;S<Z.length;S++){var ca=Z[S];v(ca.geometry,ca.geometry,N,I,W);ca.centroid&&v(ca.centroid,ca.centroid,N,I,W)}Q.transform=
null;return Q};n.quantizeOptimizedFeatureSet=function(Q,W){var N=W.geometryType,I=W.features,S=W.hasM,Z=W.hasZ;if("esriGeometryEnvelope"===N)return G.error(new a("optimized-features:invalid-geometry-type",'FeatureSet with geometry type "'+N+'" is not supported')),W;if(!Q)return W;for(var ca=0;ca<I.length;ca++){var fa=I[ca],ha=new V(new K,fa.attributes);c(ha.geometry,fa.geometry,S,Z,N,Q);fa.centroid&&(ha.centroid=new K,c(ha.centroid,fa.centroid,S,Z,"esriGeometryPoint",Q));I[ca]=ha}W.transform=Q;return W};
n.quantizeOptimizedGeometry=c;n.quantizeOptimizedGeometryRemoveCollinear=function(Q,W,N,I,S,Z){S=J[S];var ca=W.coords;W=W.lengths;var fa=N?I?4:3:I?3:2;N=N?I?P:O:I?O:R;Q.lengths.length=0;Q.coords.length=0;if(!ca.length)return Q;if(!W.length)return N(Q.coords,ca,0,0,k(Z,ca[0]),p(Z,ca[1])),Q.lengths.length=0,Q.coords.length=fa,Q;for(var ha,na,ma,ra=0,sa,ba=0,ea=0;ea<W.length;ea++){var ja=W[ea];if(!(ja<S)){var oa=0;sa=ba;I=ha=k(Z,ca[ra]);ma=na=p(Z,ca[ra+1]);N(Q.coords,ca,sa,ra,I,ma);oa++;ra+=fa;for(var ka=
!1,Ca=0,Y=0,aa=1;aa<ja;aa++,ra+=fa)if(I=k(Z,ca[ra]),ma=p(Z,ca[ra+1]),I!==ha||ma!==na)ha=I-ha,na=ma-na,ka&&(0===Ca&&0===ha||0===Y&&0===na)?(Ca+=ha,Y+=na):(ka=!0,Ca=ha,Y=na,sa+=fa,oa++),N(Q.coords,ca,sa,ra,Ca,Y),ha=I,na=ma;ka&&(sa+=fa,N(Q.coords,ca,sa,ra,Ca,Y));oa>=S&&(Q.lengths.push(oa),ba=sa)}}Q.coords.length=ba;return Q.coords.length?Q:null};n.getBoundsOptimizedGeometry=function(Q,W,N,I){N=N?I?4:3:I?3:2;W=W.coords;for(var S=I=Number.POSITIVE_INFINITY,Z=Number.NEGATIVE_INFINITY,ca=Number.NEGATIVE_INFINITY,
fa=0;fa<W.length;fa+=N){var ha=W[fa],na=W[fa+1];I=Math.min(I,ha);Z=Math.max(Z,ha);S=Math.min(S,na);ca=Math.max(ca,na)}Q[0]=I;Q[1]=S;Q[2]=Z;Q[3]=ca;return Q};n.getQuantizedBoundsOptimizedGeometry=function(Q,W,N,I){N=N?I?4:3:I?3:2;I=W.coords;var S=Number.POSITIVE_INFINITY,Z=Number.POSITIVE_INFINITY,ca=Number.NEGATIVE_INFINITY,fa=Number.NEGATIVE_INFINITY,ha=0,na=0;for(W=W.lengths;na<W.length;na++){var ma=W[na],ra=I[ha],sa=I[ha+1];S=Math.min(ra,S);Z=Math.min(sa,Z);ca=Math.max(ra,ca);fa=Math.max(sa,fa);
ha+=N;for(var ba=1;ba<ma;ba++,ha+=N){var ea=I[ha],ja=I[ha+1];ra+=ea;sa+=ja;0>ea&&(S=Math.min(S,ra));0<ea&&(ca=Math.max(ca,ra));0>ja?Z=Math.min(Z,sa):0<ja&&(fa=Math.max(fa,sa))}}Q[0]=S;Q[1]=Z;Q[2]=ca;Q[3]=fa;return Q};n.hydrateOptimizedGeometry=v;n.getCentroidOptimizedGeometry=function(Q,W,N,I){if(!W||!W.lengths.length)return null;Q.lengths.length=0;Q.coords.length=0;for(var S=Q.coords,Z=[],ca=N?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],fa=W.lengths,ha=W.coords,na=N?I?4:3:I?3:2,ma=0,ra=0;ra<fa.length;ra++){var sa=fa[ra],ba=u(ca,ha,ma,sa,N,I);ba&&Z.push(ba);ma+=sa*na}Z.sort(function(ea,ja){var oa=ea[2]-ja[2];0===oa&&N&&(oa=ea[4]-ja[4]);return oa});Z.length&&(na=6*Z[0][2],S[0]=Z[0][0]/na,S[1]=Z[0][1]/na,N&&(na=6*Z[0][4],S[2]=0!==na?Z[0][3]/na:0),S[0]<ca[0]||S[0]>ca[1]||S[1]<ca[2]||S[1]>ca[3]||N&&(S[2]<ca[4]||
S[2]>ca[5]))&&(S.length=0);if(!S.length)if(W=W.lengths[0]?y(ha,0,fa[0],N,I):null)S[0]=W[0],S[1]=W[1],N&&2<W.length&&(S[2]=W[2]);else return null;return Q};n.lineCentroid=y;n.getLength2D=C;n.getLength3D=D;n.getMidpoint2D=E;n.getMidpoint3D=F})},"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor","../libs/gl-matrix/vec2"],function(r,n,a,l){function k(f,g){f.length=0;g.forEach(function(d){return f.push(d)});return f}var p=new Set,m=
[],e=new Map;return function(){function f(g){var d=this;this._keysToRequests=new Map;this.tileInfoView=null;var q=g.strategy&&"scale-first"!==g.strategy?this._peekByCenterFirst.bind(this):this._peekByScaleFirst.bind(this);this.tileInfoView=g.tileInfoView;this._queues=g.tileServers&&0<g.tileServers.length?g.tileServers.map(function(t){return new a({concurrency:g.concurrency||6,process:function(w){w=d._keysToRequests.get(w);return g.process(w,t)},peeker:q})}):[new a({concurrency:g.concurrency||6,process:function(t){t=
d._keysToRequests.get(t);return g.process(t)},peeker:q})]}Object.defineProperty(f.prototype,"length",{get:function(){return this._queues.reduce(function(g,d){return g+d.length},0)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});f.prototype.clear=function(){for(var g=0,d=this._queues;g<d.length;g++)d[g].clear();this._keysToRequests.clear()};f.prototype.find=function(g,d){var q=this;d=
0;for(var t=this._queues;d<t.length;d++){var w=t[d].find(function(x){return g(q._keysToRequests.get(x).key)});if(w)return w}};f.prototype.get=function(g){g="string"===typeof g?g:g.id;for(var d=0,q=this._queues;d<q.length;d++){var t=q[d].get(g);if(t)return t}};f.prototype.getRequest=function(g){return this._keysToRequests.get("string"===typeof g?g:g.id)};f.prototype.has=function(g){return"string"===typeof g?this._keysToRequests.has(g):this._keysToRequests.has(g.id)};f.prototype.isOngoing=function(g){var d=
"string"===typeof g?g:g.id;return this.has(d)&&this._queues.some(function(q){return q.isOngoing(d)})};f.prototype.pause=function(){for(var g=0,d=this._queues;g<d.length;g++)d[g].pause()};f.prototype.push=function(g){var d=this,q=g.key.id,t=this._queues[g.key.row%this._queues.length].push(q);this._keysToRequests.set(q,g);t.then(function(){d._keysToRequests.delete(q)});t.catch(function(){d._keysToRequests.delete(q)});return t};f.prototype.reset=function(){for(var g=0,d=this._queues;g<d.length;g++)d[g].reset()};
f.prototype.resume=function(){for(var g=0,d=this._queues;g<d.length;g++)d[g].resume()};f.prototype._peekByScaleFirst=function(g){if(!this.state)return g[0];for(var d=this.tileInfoView,q=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,w=0;w<g.length;w++){var x=this._keysToRequests.get(g[w]),z=this.tileInfoView.getTileScale(x.key);e.has(z)||(e.set(z,[]),q=Math.max(z,q),t=Math.min(z,t));e.get(z).push(x.key);p.add(z)}var A=this.state.scale;e.has(A)||(k(m,p),m.sort(),A=m.reduce(function(c,v,u,y){return Math.abs(v-
A)<Math.abs(c-A)?v:c},m[0]));A=Math.min(A,q);A=Math.max(A,t);g=e.get(A);var B=d.getClosestInfoForScale(A),b=B.getColumnForX(this.state.center[0]),h=B.getRowForY(this.state.center[1]);g.sort(function(c,v){var u=B.denormalizeCol(c.col,c.world),y=B.denormalizeCol(v.col,v.world);return Math.sqrt((b-u)*(b-u)+(h-c.row)*(h-c.row))-Math.sqrt((b-y)*(b-y)+(h-v.row)*(h-v.row))});p.clear();e.clear();return g[0].id};f.prototype._peekByCenterFirst=function(g){if(!this.state)return g[0];for(var d=this.tileInfoView,
q=this.state.center,t=[0,0],w=Number.POSITIVE_INFINITY,x=null,z=0;z<g.length;z++){var A=this._keysToRequests.get(g[z]);d.getTileCoords(t,A.key);var B=l.distance(t,q);B<w&&(w=B,x=A.key)}return x.id};return f}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],function(r,n,a,l,k){return function(){function p(m){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=null;this.concurrency=
1;this.ordered=!1;m.concurrency&&(this.concurrency=m.concurrency);this.ordered=!!m.ordered;this._queue=new l(m.peeker?{peeker:m.peeker}:void 0);this.process=m.process}Object.defineProperty(p.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});p.prototype.clear=function(){this._queue.clear();var m=[];this._processingItems.forEach(function(e){return m.push(e.resultPromise)});this._processingItems.clear();m.forEach(function(e){return e.cancel()});
m.length=0;this._apiPromises.forEach(function(e){return m.push(e)});this._apiPromises.clear();m.forEach(function(e){return e.cancel()});this._cancelNext()};p.prototype.find=function(m,e){var f=this,g=void 0;this._apiPromises.forEach(function(d,q){m.call(e,q)&&(g=f._apiPromises.get(q).promise)});return g};p.prototype.get=function(m){return(m=this._apiPromises.get(m))&&m.promise||void 0};p.prototype.isOngoing=function(m){return this._processingItems.has(m)};p.prototype.has=function(m){return this._apiPromises.has(m)};
p.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};p.prototype.push=function(m){var e=this;if(this._apiPromises.has(m))return this._apiPromises.get(m).promise;var f=new a(function(g){var d=e._processingItems.get(m);d?d.resultPromise.cancel(g):(e._remove(m),e._scheduleNext())});this._add(m,f);this._scheduleNext();return f.promise};p.prototype.reset=function(){var m=[];this._processingItems.forEach(function(g){return m.push(g)});this._processingItems.clear();for(var e=
0;e<m.length;e++){var f=m[e];f.resultPromise.isFulfilled()?this._processReset(f):(f.isReset=!0,f.resultPromise.cancel())}};p.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};p.prototype._scheduleNext=function(){var m=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=k.schedule(function(){m._scheduledNextHandle=null;m._next()}))};p.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};
p.prototype._processResult=function(m,e){this._remove(m.item);this._scheduleNext();m.dfd.resolve(e)};p.prototype._processError=function(m,e){m.isReset?this._processReset(m):(this._remove(m.item),this._scheduleNext(),m.dfd.reject(e))};p.prototype._processReset=function(m){this._remove(m.item);this._add(m.item,m.dfd);this._scheduleNext()};p.prototype._processOrdered=function(m,e){var f=this,g=!1;if(m.isReset)this._processReset(m);else{m.result=e;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(q){g||
(q.result?f._itemsToProcess.push(q):g=!0)});m=0;for(e=this._itemsToProcess;m<e.length;m++){var d=e[m];!1===d.result.ok?this._processError(d,d.result.error):this._processResult(d,d.result.value)}this._itemsToProcess.length=0}};p.prototype._process=function(m){var e=this;if(null!=m){var f=this._apiPromises.get(m),g=this.process(m);if(g&&"function"===typeof g.then){var d={item:m,resultPromise:g,result:null,dfd:f,isReset:!1};this._processingItems.set(m,d);this.ordered?g.then(function(q){return e._processOrdered(d,
{ok:!0,value:q})},function(q){return e._processOrdered(d,{ok:!1,error:q})}):g.then(function(q){return e._processResult(d,q)},function(q){return e._processError(d,q)})}else f.resolve(g),this._remove(m)}};p.prototype._add=function(m,e){this._apiPromises.set(m,e);this._queue.push(m)};p.prototype._remove=function(m){this._queue.remove(m);this._apiPromises.delete(m);this._processingItems.delete(m)};p.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=
null)};return p}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(r,n){return function(){function a(l){this._items=[];this._itemSet=new Set;this._peeker=function(k){return k[0]};this._length=0;l&&l.peeker&&(this._peeker=l.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=function(){if(0!==
this._length)return this._peeker(this._items)};a.prototype.push=function(l){this.contains(l)||this._add(l)};a.prototype.contains=function(l){return 0<this._length&&this._itemSet.has(l)};a.prototype.pop=function(){if(0!==this._length){var l=this.peek();this._remove(l);return l}};a.prototype.remove=function(l){this.contains(l)&&this._remove(l)};a.prototype._add=function(l){this._items.push(l);this._itemSet.add(l);this._length++};a.prototype._remove=function(l){this._itemSet.delete(l);this._items.splice(this._items.indexOf(l),
1);this._length--};return a}()})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./enums","./TileKey"],function(r,n,a,l,k){var p=new k(0,0,0,0),m=new Map,e=[],f=[];return function(){function g(d){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=d.acquireTile;this.releaseTile=d.releaseTile;
this.tileInfoView=d.tileInfoView;d.cachePolicy&&(this.cachePolicy=d.cachePolicy);d.coveragePolicy&&(this.coveragePolicy=d.coveragePolicy);null!=d.buffer&&(this.buffer=d.buffer)}g.prototype.destroy=function(){this.clear()};g.prototype.update=function(d){var q=this,t=this.tileIndex,w=this.tileInfoView.getTileCoverage(d.state,this.buffer,this.coveragePolicy);if(w){var x=w.spans,z=w.lodInfo,A=z.level,B=d.state.resolution,b=!d.stationary&&B>this._previousResolution;this._previousResolution=B;t.forEach(function(E){return E.visible=
!0});this.tiles.length=0;m.clear();var h=0,c=0;if(0<x.length)for(var v=0;v<x.length;v++){d=x[v];for(var u=d.row,y=d.colTo,C=d.colFrom;C<=y;C++)h++,d=p.set(A,u,z.normalizeCol(C),z.getWorldForColumn(C)).id,t.has(d)?(B=t.get(d),B.status!==l.TileStatus.INITIALIZED&&c++,B.attached?m.set(d,B):B.attached||b||this._addParentTile(d,m)):(B=this.acquireTile(p),this.tileIndex.set(d,B),b||this._addParentTile(d,m))}var D=c===h;f.length=0;e.length=0;t.forEach(function(E,F){p.set(F);if(!m.has(F)){var G=q.tileInfoView.intersects(w,
p);!G||!b&&D?"purge"===q.cachePolicy&&E.status!==l.TileStatus.MODIFIED&&E.status!==l.TileStatus.READY?e.push(F):(p.level>A||!G)&&e.push(F):E.attached?f.push(F):p.level>A&&e.push(F)}});for(x=0;x<f.length;x++)d=f[x],(B=t.get(d))&&B.attached&&m.set(d,B);for(x=0;x<e.length;x++)d=e[x],B=t.get(d),this.releaseTile(B),t["delete"](d);m.forEach(function(E){return q.tiles.push(E)});t.forEach(function(E){m.has(E.key.id)||(E.visible=!1)});f.length=0;e.length=0;m.clear();return D}};g.prototype.clear=function(){var d=
this,q=this.tileIndex;q.forEach(function(t){d.releaseTile(t)});q.clear()};g.prototype._addParentTile=function(d,q){for(var t=null;;){d=this.tileInfoView.getTileParentId(d);if(!d)break;if(this.tileIndex.has(d)&&(t=this.tileIndex.get(d))&&t.attached){q.has(t.key.id)||q.set(t.key.id,t);break}}};return g}()})},"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform lowp vec4 u_color;\r\n    void main() {\r\n      gl_FragColor \x3d u_color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"bitblitVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    varying mediump vec2 v_uv;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"bitblitFS"\x3e\r\n  \x3c![CDATA[\r\n    \tuniform lowp sampler2D u_tex;\r\n      uniform lowp float u_opacity;\r\n\r\n      varying mediump vec2 v_uv;\r\n\r\n      void main() {\r\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n        // Note: output in pre-multiplied alpha for correct alpha compositing\r\n        gl_FragColor \x3d color *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"stencilVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"stencilFS"\x3e\r\n  \x3c![CDATA[\r\n    void main() {\r\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"tileInfoVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_depth;\r\n    uniform mediump float u_coord_ratio;\r\n    uniform mediump vec2 u_delta; // in tile coordinates\r\n    uniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main() {\r\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n      v_tex \x3d a_pos;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"tileInfoFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform mediump sampler2D u_texture;\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main(void) {\r\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n      gl_FragColor \x3d 0.75 * color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n      \r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n  #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x, a_color);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n      //  discard;\r\n      //}\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\r\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_vertexOffset;\r\n    attribute vec4 a_vertexTex;\r\n\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffset;\r\n      vec2 a_tex \x3d a_vertexTex.xy;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      float h \x3d getVVMinMaxSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      float h \x3d u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      float h \x3d getVVStopsSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      float h \x3d getVVUnitValue(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      // make sure to preserve the aspect ratio of the symbol\r\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\r\n      vec2 offset \x3d a_offset * size / a_size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d a_offset;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2float\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"labelVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n      attribute vec2 a_pos;                  // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_color;                // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset;         // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texAndSize;          // 4 (4 x unsigned byte) texture coordinatesm and font size. w is for the halo size\r\n      attribute vec4 a_refSymbolAndPlacementOffset; // 4 (4 x unsigned byte) the offset of the reference symbol of the feature (x,y) and the placement offset (z, w) all given in pixels\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      attribute mediump vec2 a_visibilityRange; // 2 x unsigned byte;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      // the curent zoom\r\n      uniform mediump float u_zoomLevel; // the current zoom level X 10\r\n      uniform lowp float u_mapRotation;\r\n      uniform lowp float u_mapAligned;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n       uniform mediump float u_fadeStep;\r\n       varying mediump float v_fadeStep;\r\n    #else\r\n       varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // clip the vertex if we are beyond the visibility range of the vertex\r\n        // please note: min value of 0 is regarded infinity. max value of 255 is regarded infinity\r\n        z +\x3d 1.0 + sign(a_visibilityRange.x - u_zoomLevel);\r\n        z +\x3d 1.0 + sign(u_zoomLevel - a_visibilityRange.y);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n        float fontSize \x3d a_texAndSize.z;\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        float mapRotation \x3d u_mapAligned * C_DEG_TO_RAD * -u_mapRotation;\r\n        float sinA \x3d sin(mapRotation);\r\n        float cosA \x3d cos(mapRotation);\r\n\r\n        mat4 mapRotationMat \x3d mat4(cosA, sinA, 0.0, 0.0,\r\n                                  -sinA, cosA, 0.0, 0.0,\r\n                                    0.0,  0.0, 1.0, 0.0,\r\n                                    0.0,  0.0, 0.0, 1.0);\r\n\r\n        vec4 refSymbolOffset \x3d mapRotationMat *  vec4(a_refSymbolAndPlacementOffset.xy, 0.0, 0.0);\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) +\r\n                      u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) +\r\n                      u_extrudeMatrix * vec4(refSymbolOffset.xy + a_refSymbolAndPlacementOffset.zw, 0.0, 0.0) +\r\n                      extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n        v_tex \x3d a_texAndSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.106 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texAndSize.w / fontScale / maxSdfDistance;\r\n\r\n        v_transparency \x3d u_opacity;\r\n\r\n      #ifdef ID\r\n        v_fadeStep \x3d u_fadeStep;\r\n      #else\r\n        v_color \x3d a_color;\r\n      #endif // ID\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"labelFS"\x3e\r\n   \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform mediump sampler2D u_referenceTex;\r\n      uniform mediump vec2 u_screenSize;\r\n      uniform mediump float u_pixelRatio;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n      varying mediump float v_fadeStep;\r\n    #else\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n    const vec3 epsilon \x3d vec3(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\r\n\r\n      void main()\r\n      {\r\n        mediump vec2 refTextPos \x3d gl_FragCoord.xy / (u_pixelRatio * u_screenSize.xy);\r\n        mediump vec4 referenceFragment \x3d texture2D(u_referenceTex, refTextPos);\r\n    #ifdef ID\r\n        mediump float alpha \x3d clamp(referenceFragment.a + v_fadeStep, 0.0, 1.0);\r\n        // fill the whole quad\r\n        gl_FragColor \x3d vec4(alpha);\r\n    #else\r\n        // read the fade alpha\r\n        lowp float fadeAlpha \x3d referenceFragment.a;\r\n\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float sdfAlpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d fadeAlpha * sdfAlpha * v_transparency * v_color;\r\n    #endif\r\n      }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"thinLineParams"\x3e\r\n     \x3c![CDATA[\r\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\r\n    float thinLineWidthFactor \x3d 1.1;\r\n     ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_zoomFactor;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n     const float scale \x3d 1.0 / 31.0;\r\n#ifdef SDF\r\n     const float widthFactor \x3d 2.0;\r\n#else\r\n     const float widthFactor \x3d 1.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n// we need to accumulated distance only if it is a pattern or an SDF line\r\n#if defined(PATTERN) || defined(SDF)\r\n     varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n      v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n#ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n#else\r\n      v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\r\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\r\n\r\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n       $thinLineParams\r\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\r\n       // is claped in line 221 above\r\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\r\n       // in a case of a thin line we move each vertex twice as far\r\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\r\n#endif // PATTERN || SDF\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n      uniform mediump float u_zoomFactor;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\r\n     const float widthFactor \x3d 2.0;\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n         $thinLineParams\r\n\r\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\r\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\r\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $textVVUniformsVS\r\n      $textVVFunctions\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n        // vv size override the original symbol\'s size\r\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n        float fontSize \x3d size.x;\r\n  #else // this generic case, no VV\r\n        float fontSize \x3d a_texFontSize.z;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n    #ifdef VV_ROTATION\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #else\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #endif // VV_ROTATION\r\n\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\r\n\r\n    #ifdef VV_OPACITY\r\n        v_transparency \x3d getVVOpacity(a_vv.z);\r\n    #else\r\n        v_transparency \x3d u_opacity;\r\n    #endif // VV_OPACITY\r\n\r\n    #ifdef VV_COLOR\r\n       // we don\'t want to override the halo color\r\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y, a_color);\r\n    #else\r\n        v_color \x3d a_color;\r\n    #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n        v_id \x3d a_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n  #ifdef ID\r\n      varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n  #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float estimateDistance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d estimateDistance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"*now":function(r){r(['dojo/i18n!*preload*esri/layers/support/nls/webglDeps*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});define("esri/layers/support/webglDeps",["./WebGLRenderer","../OnDemandDrillMode"],function(r,n){return{WebGLRenderer:r,OnDemandDrillMode:n}});