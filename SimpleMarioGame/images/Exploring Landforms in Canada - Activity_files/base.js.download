// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.35/esri/copyright.txt for details.
//>>built
/*
 @esri/arcgis-html-sanitizer - v2.2.0 - Tue Feb 04 2020 10:47:20 GMT-0800 (Pacific Standard Time)
 Copyright (c) 2020 - Environmental Systems Research Institute, Inc.
 Apache-2.0

 js-xss
 Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 http://ucdok.com
 MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details

 Lodash/isPlainObject
 Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
**************************************************************************** *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
**************************************************************************** @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   v4.2.8+1e68dce6
*/
require({cache:{"esri/main":function(){define(["./kernel","dojo/i18n!./nls/jsapi","./config","./sniff"],function(b,y){b.bundle=y;return b})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(b,y,r){b=function(){return this}();var a=b.location,k=a.pathname;r=a.protocol;a={version:"3.35",_appBaseUrl:r+"//"+a.host+k.substring(0,k.lastIndexOf(k.split("/")[k.split("/").length-1]))};y.noGlobals||(b.esri=a);(a.dijit=a.dijit||{})._arcgisUrl=("http:"===r||"https:"===
r?r:"http:")+"//www.arcgis.com/sharing/rest";return a})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(b,y,r,a){r=function(){return this}();var k={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,
zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:r.Worker&&!1,io:{errorHandler:function(e,g){y.publish("esri.Error",[e])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com",
"js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com",
"cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com",
"servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:r.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};a.config=k;b.noGlobals||(r.esriConfig=k);return k})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(b,y,r){var a=b("ff"),k=b("ie"),e=void 0===k&&7<=b("trident"),g=b("edge"),h=b("webkit"),m=b("opera"),l=b("chrome"),f=b("safari"),c=navigator.userAgent,d;(d=c.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&b.add("esri-iphone",parseFloat(d[2].replace("_",".")));(d=c.match(/Android\s+(\d+(\.\d+)*)/i))&&
b.add("esri-android",parseFloat(d[1]));(d=c.match(/Fennec\/(\d+\.\d+)/i))&&b.add("esri-fennec",parseFloat(d[1]));0<=c.indexOf("BlackBerry")&&0<=c.indexOf("WebKit")&&b.add("esri-blackberry",1);b.add("esri-touch",b("esri-iphone")||b("esri-android")||b("esri-blackberry")||6<=b("esri-fennec")||(a||h)&&(document.createTouch||"ontouchstart"in y||y.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(d=c.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&b.add("esri-mobile",!!d);b.add("esri-pointer",
!a&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!y.PointerEvent));r._getDOMAccessor=function(n){var t="";a?t="Moz":h?t="Webkit":k?t="ms":m&&(t="O");return t+n.charAt(0).toUpperCase()+n.substr(1)};b.add("esri-phonegap",!!y.cordova);b.add("esri-cors",b("esri-phonegap")||y.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);b.add("esri-file-upload",y.FormData&&y.FileList?!0:!1);b.add("esri-script-sandbox",function(){return"MessageChannel"in y&&"HTMLIFrameElement"in y&&"sandbox"in HTMLIFrameElement.prototype});
b.add("esri-secure-context",function(){if("isSecureContext"in y)return y.isSecureContext;if(y.location&&y.location.origin)return 0===y.location.origin.indexOf("https:")});b.add("esri-wasm","WebAssembly"in y);b.add("esri-workers",y.Worker?!0:!1);b.add("esri-featurelayer-webgl",!1);if(c=b("esri-featurelayer-webgl")){var u=b("esri-mobile");d=u?1:2;u=u?1:3;"object"===typeof c?(c.maxDrillLevel=null==c.maxDrillLevel?d:c.maxDrillLevel,c.maxRecordCountFactor=null==c.maxRecordCountFactor?u:c.maxRecordCountFactor,
c.enablePBFQuery=null==c.enablePBFQuery?!0:c.enablePBFQuery):b.add("esri-featurelayer-webgl",{maxDrillLevel:d,maxRecordCountFactor:u,enablePBFQuery:!0},null,!0)}b.add("esri-featurelayer-webgl-labeling",!1);b.add("esri-pbf",!k||10<=k);b.add("esri-featurelayer-pbf",!0);b.add("esri-transforms",e||g||9<=k||3.5<=a||4<=l||3.1<=f||10.5<=m||3.2<=b("esri-iphone")||2.1<=b("esri-android"));b.add("esri-transitions",e||g||10<=k||4<=a||4<=l||3.1<=f||10.5<=m||3.2<=b("esri-iphone")||2.1<=b("esri-android"));b.add("esri-transforms3d",
e||g||10<=a||12<=l||4<=f||3.2<=b("esri-iphone")||3<=b("esri-android"));b.add("esri-url-encodes-apostrophe",function(){if(!y.document)return!1;var n=y.document.createElement("a");n.href="?'";return-1<n.href.indexOf("?%27")});3>b("esri-android")&&(b.add("esri-transforms",!1,!1,!0),b.add("esri-transitions",!1,!1,!0),b.add("esri-transforms3d",!1,!1,!0));b.add("esri-will-change",b("esri-transforms")&&(52<=l||11.1<=f));r._css=function(n){var t=b("esri-transforms3d");void 0!==n&&null!==n?t=n:t&&(l||f&&!b("esri-iphone"))&&
(t=!1);var x=t?"translate3d(":"translate(",A=t?l?",-1px)":",0px)":")",B=t?"scale3d(":"scale(",F=t?",1)":")",w=t?"rotate3d(0,0,1,":"rotate(",D=t?"matrix3d(":"matrix(",q=t?",0,0,":",",v=t?",0,0,0,0,1,0,":",",z=t?",0,1)":")";return{names:{transition:h&&"-webkit-transition"||a&&"MozTransition"||m&&"OTransition"||k&&"msTransition"||"transition",transform:h&&"-webkit-transform"||a&&"MozTransform"||m&&"OTransform"||k&&"msTransform"||"transform",transformName:h&&"-webkit-transform"||a&&"-moz-transform"||
m&&"-o-transform"||k&&"-ms-transform"||"transform",origin:h&&"-webkit-transform-origin"||a&&"MozTransformOrigin"||m&&"OTransformOrigin"||k&&"msTransformOrigin"||"transformOrigin",endEvent:h&&"webkitTransitionEnd"||a&&"transitionend"||m&&"oTransitionEnd"||k&&"MSTransitionEnd"||"transitionend"},translate:function(C,E){return x+C+"px,"+E+"px"+A},scale:function(C){return B+C+","+C+F},rotate:function(C){return w+C+"deg)"},matrix:function(C){return D+C.xx+","+C.xy+q+C.yx+","+C.yy+v+C.dx.toFixed(10)+(a&&
59>=a?"px,":",")+C.dy.toFixed(10)+(a&&59>=a?"px":"")+z},getScaleFromMatrix:function(C){if(!C)return 1;C=C.toLowerCase();var E=-1<C.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(C.substring(E.length,C.indexOf(",")))}}};r.isiPhone=b("esri-iphone");r.isAndroid=b("esri-android");r.isFennec=b("esri-fennec");r.isBlackBerry=b("esri-blackberry");r.isTouchEnabled=b("esri-touch");r.isPointerEnabled=b("esri-pointer");r._hasCors=b("esri-cors");r._hasFileUpload=b("esri-file-upload");r._hasTransforms=
b("esri-transforms");r._hasTransitions=b("esri-transitions");r._has3DTransforms=b("esri-transforms3d");return b})},"esri/utils":function(){define("./domUtils ./lang ./urlUtils ./request ./tileUtils ./graphicsUtils ./deferredUtils ./layerUtils ./geometry/normalizeUtils".split(" "),function(){return{}})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(b,y,r,a,k){var e={show:function(g){if(g=e.getNode(g))g.style.display="block"},
getNode:function(g){return g&&g.domNode||g},hide:function(g){if(g=e.getNode(g))g.style.display="none"},toggle:function(g){if(g=e.getNode(g))g.style.display="none"===g.style.display?"block":"none"},documentBox:8>=k("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(g){if(g=this.getNode(g)){var h=0,m=0,l=0,f=0,c=0,d=0;return[y.connect(g,"ontouchstart",function(u){h=u.touches[0].screenX;m=u.touches[0].screenY;
l=g.scrollWidth;f=g.scrollHeight;c=g.clientWidth;d=g.clientHeight}),y.connect(g,"ontouchmove",function(u){u.preventDefault();var n=g.firstChild;n instanceof Text&&(n=g.childNodes[1]);var t=n._currentX||0,x=n._currentY||0;t+=u.touches[0].screenX-h;0<t?t=0:0>t&&Math.abs(t)+c>l&&(t=-1*(l-c));n._currentX=t;x+=u.touches[0].screenY-m;0<x?x=0:0>x&&Math.abs(x)+d>f&&(x=-1*(f-d));n._currentY=x;a.set(n,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+t+"px, "+x+"px)"});h=u.touches[0].screenX;
m=u.touches[0].screenY})]}}};r.mixin(b,e);return e})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(b,y,r,a,k,e,g,h,m){function l(A,B,F,w){(B=B&&B[A])?B={formatType:B.formatType,options:B}:w&&-1!==b.indexOf(w.properties||"",A)?B={formatType:w.formatter||"DateString",options:null}:F&&-1!==b.indexOf(F.properties||"",A)&&(B={formatType:F.formatter||"NumberFormat",options:null});
return B}function f(A,B,F){return[a.isString(A)?A.split(""):A,B||r.global,a.isString(F)?new Function("item","index","array",F):F]}function c(A){return void 0!==A&&null!==A}function d(A){return c(A)?A:""}function u(A,B,F,w){var D=F.match(/([^\(]+)(\([^\)]+\))?/i);F=a.trim(D[1]);var q=D[2]?a.trim(D[2]):null;D=B[A];w=w||(q?y.fromJson(q.replace(/^\(/,"({").replace(/\)$/,"})")):{});q=w.utcOffset;if(-1===b.indexOf(t,F))F=a.getObject(F),a.isFunction(F)&&(D=F(D,A,B,w));else if("number"===typeof D||"string"===
typeof D&&D&&!isNaN(Number(D)))switch(D=Number(D),F){case "NumberFormat":return g.format(D,w);case "DateString":A=new Date(D);if(w.local||w.systemLocale)return w.systemLocale?A.toLocaleDateString()+(w.hideTime?"":" "+A.toLocaleTimeString()):A.toDateString()+(w.hideTime?"":" "+A.toTimeString());A=A.toUTCString();w.hideTime&&(A=A.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return A;case "DateFormat":return A=new Date(D),c(q)&&(A=k.add(A,"minute",A.getTimezoneOffset()-q)),h.format(A,w)}return d(D)}
function n(A,B){var F;if(B)for(F in A)A.hasOwnProperty(F)&&(void 0===A[F]?delete A[F]:A[F]instanceof Object&&n(A[F],!0));else for(F in A)A.hasOwnProperty(F)&&void 0===A[F]&&delete A[F];return A}var t=["NumberFormat","DateString","DateFormat"],x=/<\/?[^>]+>/g;e={valueOf:function(A,B){for(var F in A)if(A[F]==B)return F;return null},stripTags:function(A){if(A){var B=typeof A;if("string"===B)A=A.replace(x,"");else if("object"===B)for(var F in A)(B=A[F])&&"string"===typeof B&&(B=B.replace(x,"")),A[F]=
B}return A},substitute:function(A,B,F){if(c(F))if(a.isObject(F)){var w=F.first;var D=F.dateFormat;var q=F.numberFormat;var v=F.format}else w=F;if(B&&"${*}"!==B)return a.replace(B,a.hitch({obj:A},function(C,E){var G=E.split(":");return 1<G.length?(E=G[0],G.shift(),(C=v&&v[G[0]])?G=C.formatType:(G=G.join(":"),C=null),u(E,this.obj,G,C)):(C=l(E,v,q,D))?u(E,this.obj,C.formatType,C.options):d(this.obj[E])}),/\$\{([^\}]+)\}/g);B=[];for(var z in A)if(F=(F=l(z,v,q,D))?u(z,A,F.formatType,F.options):A[z],B.push(z+
" \x3d "+d(F)+"\x3cbr/\x3e"),w)break;return B.join("")},filter:function(A,B,F){B=f(A,F,B);F={};var w;A=B[0];for(w in A)B[2].call(B[w],A[w],w,A)&&(F[w]=A[w]);return F},startsWith:function(A,B,F){F=F||0;return A.indexOf(B,F)===F},endsWith:function(A,B,F){if("number"!==typeof F||!isFinite(F)||Math.floor(F)!==F||F>A.length)F=A.length;F-=B.length;A=A.indexOf(B,F);return-1!==A&&A===F},isDefined:c,fixJson:n,isObject:function(A){return A&&"object"===typeof A},isString:function(A){return"string"===typeof A},
mixin:function(A,B){for(var F in B)B.hasOwnProperty(F)&&(A[F]=B[F]);return A},clone2DArray:function(A){if(A=A?A.slice(0):null){var B,F=A.length;for(B=0;B<F;B++)A[B]=A[B]?A[B].slice(0):null}return A},clone3DArray:function(A){if(A=A?A.slice(0):null){var B,F=A.length;for(B=0;B<F;B++){A[B]=A[B]?A[B].slice(0):null;var w=A[B];if(w){var D,q=w.length;for(D=0;D<q;D++)w[D]=w[D]?w[D].slice(0):null}}}return A}};a.mixin(m,e);m._isDefined=c;m._getParts=f;m._sanitize=n;return e})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(b,y,r,a,k,e,g,h,m,l){var f={},c=h.defaults.io,d=/^[a-z][a-z0-9\+\-\.]*:/i,u=/^\s*http:/i,n=/^\s*https:/i,t=/:\d+$/,x=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;f.isHTTP=function(B){var F=a.location.protocol;return null==B?"http:"===F||"https:"===F:B?"https:"===F:"http:"===F};f.getProtocolForWebResource=function(B){return f.isHTTP()?a.location.protocol:B?"https:":"http:"};f.urlToObject=function(B){var F={},w=new r(B),D=B.indexOf("?");null===w.query?F={path:B,query:null}:(F.path=B.substring(0,
D),F.query=k.queryToObject(w.query));w.fragment&&(F.hash=w.fragment,null===w.query&&(F.path=F.path.substring(0,F.path.length-(w.fragment.length+1))));return F};f.getProxyUrl=function(B,F){var w=b.isString(B)?0===b.trim(B).toLowerCase().indexOf("https:"):B,D=c.proxyUrl,q=l.io.proxyNotSet;b.isString(B)&&(B=f.getProxyRule(B))&&(D=B.proxyUrl);if(!D)throw Error(q);if(w&&!1!==F&&0!==a.location.href.toLowerCase().indexOf("https:")&&(F=D,0!==F.toLowerCase().indexOf("http")&&(F=f.getAbsoluteUrl(F)),F=F.replace(/^http:/i,
"https:"),f.canUseXhr(F))){D=F;var v=1}D=f.urlToObject(D);D._xo=v;return D};f.addProxy=function(B){var F=f.getProxyRule(B),w;F?w=f.urlToObject(F.proxyUrl):c.alwaysUseProxy&&(w=f.getProxyUrl());w&&(F=f.urlToObject(B),B=w.path+"?"+F.path,(w=k.objectToQuery(b.mixin(w.query||{},F.query)))&&(B+="?"+w));return B};f.addProxyRule=function(B){var F=B.urlPrefix=f.urlToObject(B.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),w=c.proxyRules,D,q=w.length,v=q;for(D=0;D<q;D++){var z=
w[D].urlPrefix;if(0===F.indexOf(z)){if(F.length===z)return-1;v=D;break}else 0===z.indexOf(F)&&(v=D+1)}w.splice(v,0,B);return v};f.getProxyRule=function(B){var F=c.proxyRules,w=F.length,D=f.urlToObject(B).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(B=0;B<w;B++)if(0===D.indexOf(F[B].urlPrefix)){var q=F[B];break}return q};f.hasSameOrigin=function(B,F,w){B=B.toLowerCase();F=F.toLowerCase();var D=a.location.href.toLowerCase();B=0===B.indexOf("http")?new r(B):D=new r(D);
F=0===F.indexOf("http")?new r(F):b.isString(D)?new r(D):D;return(w||B.scheme===F.scheme)&&B.host===F.host&&B.port===F.port};f.canUseXhr=function(B,F){var w=m("esri-phonegap")?!0:!1,D=f.hasSameOrigin,q=c.corsEnabledServers,v,z=-1;!w&&m("esri-cors")&&q&&q.length&&(w=y.some(q,function(C,E){C=!C||"object"!==typeof C||C instanceof RegExp?C:C.host;if(C instanceof RegExp){if(C.test(B))return z=E,!0}else if(C&&(v=0!==C.trim().toLowerCase().indexOf("http"),D(B,v?"http://"+C:C)||v&&D(B,"https://"+C)))return z=
E,!0;return!1}));return F?z:w};f.getAbsoluteUrl=function(B){var F=f.getProtocolForWebResource();return b.isString(B)&&!d.test(B)?0===B.indexOf("//")?F+B:0===B.indexOf("/")?F+"//"+a.location.host+B:e._appBaseUrl+B:B};f.fixUrl=function(B){B=b.trim(B);B=f.getAbsoluteUrl(B);B=f.normalizeSlashes(B);B=B.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");B=f.downgradeToHTTP(B);return B=f.upgradeToHTTPS(B)};f.normalize=function(B){return f.fixUrl(B)};f.normalizeSlashes=function(B){if(/^https?:\/\//i.test(B)){var F=
B.indexOf("?");if(-1<F){var w=B.slice(0,F);var D=B.slice(F+1)}else w=B;B=w.replace(/\/{2,}/g,"/");B=B.replace("/","//");D&&(B+="?"+D)}return B};f.downgradeToHTTP=function(B){return f.isHTTP(!1)&&n.test(B)&&f.hasSameOrigin(a.location.href,B,!0)&&!f.canUseXhr(B)?B.replace(n,"http:"):B};f.upgradeToHTTPS=function(B){var F=c.httpsDomains,w=f.isHTTP(!1),D=f.isHTTP(!0);if(!u.test(B))return B;B=b.trim(B);var q=B.indexOf("/",7);q=-1===q?B:B.slice(0,q);q=q.toLowerCase().slice(7);if(t.test(q))if(g.endsWith(q,
":80"))q=q.slice(0,-3),B=B.replace(":80","");else return B;if(w&&q===a.location.host&&(!x.test(B)||!f.canUseXhr(B)))return B;w=!1;if(D&&q===a.location.host)w=!0;else if(F)for(var v=0;v<F.length;v++){var z=F[v];if(q===z||g.endsWith(q,"."+z)){w=!0;break}}w||!D||c.alwaysUseProxy||f.getProxyRule(B)||(w=!0);w&&(B=B.replace(u,"https:"));return B};h=l.widgets.popup;var A=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:h.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:h.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:h.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:h.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:h.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:h.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:h.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:h.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:h.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:h.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:h.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:h.NLS_openLinkInApp}];f.getURIInfo=function(B){var F;y.some(A,function(w){w.pattern.test(B)&&(F=w);return!!F});return F};f.isKnownURI=function(B){return!!f.getURIInfo(B)};b.mixin(e,f);e._getProxyUrl=f.getProxyUrl;e._getProxiedUrl=f.addProxy;e._hasSameOrigin=f.hasSameOrigin;e._canDoXOXHR=f.canUseXhr;e._getAbsoluteUrl=f.getAbsoluteUrl;e.fixUrl=f.fixUrl;return f})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A){function B(O){O=new e(O);return(O.host+(O.port?":"+O.port:"")).toLowerCase()}function F(O){return this._xhr?this._xhr.getResponseHeader(O):null}function w(O,S){var L=c.objectToQuery(O.content);L&&(O.url+=(-1===O.url.indexOf("?")?"?":"\x26")+L);if(2E3<O.url.length){if("data:"!==O.url.toLowerCase().slice(0,5))return O=new a,O.reject(k.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),O;if(3E6<O.url.length)return O=
new a,O.reject(k.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),O}var Y=new Image;S.allowImageDataAccess&&(Y.crossOrigin=O.withCredentials?"use-credentials":"anonymous");var ca=!1,U=new a(function(X){ca=!0;Y.onload=Y.onerror=Y.onabort=null;Y.src=""});S=function(X){Y.onload=Y.onerror=Y.onabort=null;ca||U.reject(Error("Unable to load the resource"))};Y.onload=function(){Y.onload=Y.onerror=Y.onabort=null;ca||U.resolve(this)};Y.onerror=S;
Y.onabort=S;Y.alt="";Y.src=O.url;return U}function D(O,S,L,Y){var ca=!1,U=!1,X=!1;if(t.isDefined(S))if(k.isObject(S)){ca=!!S.useProxy;U=!!S.usePost;X=!!S.returnProgress;var Z=S.crossOrigin}else ca=!!S;O=k.mixin({},O);delete O._credential;O._ssl&&(O.url=O.url.replace(/^http:/i,"https:"));10>n("ie")&&!Q.test(O.url)&&(O.url=encodeURI(O.url));var N=O.content,aa=O.url,ka=L&&O.form,pa=K;Z=t.isDefined(Z)?Z:pa.useCors;O.load=function(Ha){if(Ha){if(Ha.error){var Ua=k.mixin(Error(),Ha.error);Ua.log=!!r.isDebug}else"error"===
Ha.status&&(Ua=k.mixin(Error(),Ha),Ua.log=!!r.isDebug);Ua&&(O.failOk=!Ua.log,t.isDefined(Ua.httpCode)||(Ua.httpCode=Ua.code))}return Ua||Ha};O.error=function(Ha,Ua){Ua&&Ua.xhr&&Ua.xhr.abort();Ha instanceof Error||(Ha=k.mixin(Error(),Ha));Ha.log=!!r.isDebug;O.failOk=!Ha.log;pa.errorHandler(Ha,Ua);return Ha};O._token&&(O.content=O.content||{},O.content.token=O._token);var ta=0;if(N&&aa){var Ba=c.objectToQuery(N);ta=Ba.length+aa.length+1;n("esri-url-encodes-apostrophe")&&(ta=Ba.replace(/'/g,"%27").length+
aa.length+1)}O.timeout=t.isDefined(O.timeout)?O.timeout:pa.timeout;O.handleAs=O.handleAs||"json";try{var Da=Z&&x.canUseXhr(O.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(O.url),oa=x.hasSameOrigin(O.url,window.location.href)||Da,ra=U||L||ta>pa.postLength?!0:!1,ya=oa||-1===O.handleAs.indexOf("json")||!O.callbackParamName||L?!1:!0,wa=x.getProxyRule(O.url)||pa.alwaysUseProxy||ca||!("image"===O.handleAs&&!S.allowImageDataAccess||ya&&!ra||oa)?!0:!1;L&&!n("esri-file-upload")&&!wa&&Da&&(wa=
!0);if(wa){var la=x.getProxyUrl(aa,Z);var Aa=la.path;la._xo&&(Da=!0);!ra&&Aa.length+1+ta>pa.postLength&&(ra=!0);O.url=Aa+"?"+aa;if(ra)O.content=k.mixin(la.query||{},N);else{var da=c.objectToQuery(k.mixin(la.query||{},N));da&&(O.url+="?"+da);O.content=null}}if(!ya||ra||wa){var fa=O.headers;!Da||fa&&fa.hasOwnProperty("X-Requested-With")||(fa=O.headers=fa||{},fa["X-Requested-With"]=null);if(L){var P=O.callbackParamName||"callback.html",xa=O.callbackElementName||"textarea",Fa,ba,Sa=ka.elements?ka.elements.length:
0;if(N=O.content)for(Fa in N.token&&-1<aa.toLowerCase().indexOf("/sharing/servers/")&&(aa+=(-1===aa.indexOf("?")?"?":"\x26")+"token\x3d"+N.token,O.url=wa?Aa+"?"+aa:aa,delete N.token),N){var Qa=N[Fa];if(t.isDefined(Qa)){var va=null;for(ba=0;ba<Sa;ba++){var R=ka.elements[ba];if(R.name===Fa){va=R;break}}va?va.value=Qa:Y?ka.append(Fa,Qa):ka.appendChild(f.create("input",{type:"hidden",name:Fa,value:Qa}))}}if(n("esri-file-upload")){y.forEach(ka.elements,function(Ha){Ha.name===P&&ka.removeChild(Ha)});var ia=
Y?ka:new FormData(ka);if(11<=n("safari")&&"entries"in ia&&"delete"in ia){Y=[];for(var ja=ia.entries(),T=ja.next();!T.done;){var ha=T.value;ha[1]instanceof File&&""===ha[1].name&&Y.push(ha[0]);T=ja.next()}Y.forEach(function(Ha){ia.delete(Ha)})}O.contentType=!1;O.postData=ia;delete O.form}else{ka.enctype="multipart/form-data";9>n("ie")&&(ka.encoding="multipart/form-data");ka.method="post";y.some(ka.elements,function(Ha){return Ha.name===P})||ka.appendChild(f.create("input",{type:"hidden",name:P,value:xa}));
if(-1!==aa.toLowerCase().indexOf("addattachment")||-1!==aa.toLowerCase().indexOf("updateattachment"))aa+=(-1===aa.indexOf("?")?"?":"\x26")+P+"\x3d"+xa,O.url=wa?Aa+"?"+aa:aa;delete O.content}}if(Da&&!O.hasOwnProperty("withCredentials")&&"with-credentials"===K.useCors){aa=wa?Aa:aa;var na=x.canUseXhr(aa,!0),qa=-1<na?K.corsEnabledServers[na]:null;if(qa&&qa.hasOwnProperty("withCredentials"))qa.withCredentials&&(O.withCredentials=!0);else if(d.id){var ua=d.id.findServerInfo(aa);ua&&ua.webTierAuth&&(O.withCredentials=
!0)}}O=H?H(O):O;if("image"===O.handleAs)return w(O,S);if(ra){if(L&&!n("esri-file-upload")){var za=new a(function(){Ea.cancel()});var Ea=l.post(O.url,O).then(function(Ha){za.resolve(Ha)}).otherwise(function(Ha){za.reject(Ha)});za.addCallback(function(Ha){return O.load(Ha)});za.addErrback(function(Ha){return O.error(Ha)});return za}!wa&&n("safari")&&(O.url+=(-1===O.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+J++);if(X){O.uploadProgress=!0;O.data=O.postData;O.query=O.content;za=new a(function(){Pa.cancel()});
var Pa=h.post(O.url,O).then(function(Ha){za.resolve(Ha)},function(Ha){za.reject(Ha)},function(Ha){za.progress({transferType:Ha.transferType,loaded:Ha.loaded,total:Ha.total})});za.addCallback(function(Ha){return O.load(Ha)});za.addErrback(function(Ha){return O.error(Ha)});return za}return g.post(O)}return g.get(O)}O=H?H(O):O;O.jsonp=O.callbackParamName;O.query=O.content;za=new a(function(){Oa.cancel()});var Oa=m.get(O.url,O).then(function(Ha){za.resolve(Ha)}).otherwise(function(Ha){za.reject(Ha)});
za.addCallback(function(Ha){return O.load(Ha)});za.addErrback(function(Ha){return O.error(Ha)});return za}catch(Ha){return za=new a,za.errback(O.error(Ha)),za}}function q(O){var S=K.corsStatus,L=x.canUseXhr(O,!0);-1<L&&K.corsEnabledServers.splice(L,1);var Y=new a;Y.reject({log:!!r.isDebug});S[B(O)]=Y.promise;return L}function v(O){var S=K.corsStatus;try{var L=B(O);if(K.corsDetection&&K.useCors&&n("esri-cors")&&O&&-1!==O.toLowerCase().indexOf("/rest/services")&&!x.hasSameOrigin(O,window.location.href)&&
!x.canUseXhr(O)){if(S[L]&&!S[L].isCanceled())return S[L];var Y=new a(A._dfdCanceller);S[L]=Y.promise;var ca=g.get({url:O.substring(0,O.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*K.corsDetectionTimeout});Y._pendingDfd=ca;ca.then(function(U){U?(x.canUseXhr(O)||K.corsEnabledServers.push(L),Y.resolve()):Y.reject()},function(U){Y.reject(U)});return Y.promise}}catch(U){}return V}function z(O){H=O}function C(O,S,L,
Y){function ca(oa){oa._pendingDfd=D(L,Y,pa,ka);if(!oa._pendingDfd){oa.ioArgs=oa._pendingDfd&&oa._pendingDfd.ioArgs;var ra=Error("Deferred object is missing");ra.log=!!r.isDebug;oa.errback(ra);oa._pendingDfd=null;return oa}oa._pendingDfd.addCallback(function(ya){if(!ya)return ya;var wa=oa._pendingDfd&&oa._pendingDfd.ioArgs&&oa._pendingDfd.ioArgs.xhr;if(!wa)return ya;if(wa=wa.getResponseHeader("Content-Type"))if(wa=wa.toLowerCase(),-1===wa.indexOf("text/plain")&&-1===wa.indexOf("application/json"))return ya;
if(ya instanceof ArrayBuffer&&750>=ya.byteLength)wa=new Blob([ya]);else if(ya instanceof Blob&&750>=ya.size)wa=ya;else return ya;var la=new a,Aa=new FileReader;Aa.readAsText(wa);Aa.onloadend=function(){if(!Aa.error)try{var da=JSON.parse(Aa.result);if(da.error)var fa=da.error}catch(P){}fa?(fa=k.mixin(Error(),fa),fa.log=!!r.isDebug,null==fa.httpCode&&(fa.httpCode=fa.code),la.reject(fa)):la.resolve(ya)};return la.promise}).addCallback(function(ya){oa.ioArgs=oa._pendingDfd&&oa._pendingDfd.ioArgs;Y.returnFullResponse&&
(ya={data:ya,_xhr:oa.ioArgs&&oa.ioArgs.xhr,getHeader:F});oa.callback(ya);oa._pendingDfd=null}).addErrback(function(ya){if(ya){var wa=ya.code;var la=ya.subcode;var Aa=(Aa=ya.messageCode)&&Aa.toUpperCase()}if(ya&&403==wa&&(4==la||ya.message&&-1<ya.message.toLowerCase().indexOf("ssl")&&-1===ya.message.toLowerCase().indexOf("permission"))){if(!L._ssl){L._ssl=L._sslFromServer=!0;C(oa,!0,L,Y);return}}else if(ya&&415==ya.status){if(q(L.url),!L._err415){L._err415=1;C(oa,!0,L,Y);return}}else if(d.id&&-1!==
y.indexOf(d.id._errorCodes,wa)&&!d.id._isPublic(L.url)&&!X&&(403!=wa||-1===y.indexOf(I,Aa)&&(!t.isDefined(la)||2==la&&L._token))){oa._pendingDfd=d.id.getCredential(L.url,{token:L._token,error:ya});oa._pendingDfd.addCallback(function(da){L._token=da.token;L._credential=da;L._ssl=L._sslFromServer||da.ssl;C(oa,!0,L,Y)}).addErrback(function(da){oa.errback(da);oa._pendingDfd=null});return}oa.ioArgs=oa._pendingDfd&&oa._pendingDfd.ioArgs;oa.isFulfilled()||oa.errback(ya);oa._pendingDfd=null}).then(null,null,
function(ya){oa.progress(ya)})}var U=L.form,X=Y.disableIdentityLookup,Z=Y._preLookup,N=!1;if(n("esri-workers")&&!1!==K.useWorkers)if(!0===Y.useWorkers||!0===K.useWorkers)N=!0;else if(Y.workerOptions){var aa=Y.workerOptions;if(aa.callback||aa.worker&&aa.worker.worker instanceof Worker)N=!0}var ka=U&&n("esri-file-upload")&&U instanceof FormData,pa=U&&(U.elements?y.some(U.elements,function(oa){return"file"===oa.type}):ka),ta=-1!==L.url.toLowerCase().indexOf("token\x3d")||L.content&&L.content.token||
pa&&y.some(U.elements,function(oa){return"token"===oa.name})?1:0;if(!S){O.addCallback(function(oa){if((/\/sharing\/rest\/accounts\/self/i.test(L.url)||/\/sharing\/rest\/portals\/self/i.test(L.url))&&!ta&&!L._token&&oa.user&&oa.user.username){K.webTierAuthServers.push(B(L.url));oa=K.corsEnabledServers;var ra=x.canUseXhr(L.url,!0),ya={host:B(L.url),withCredentials:!0};if(-1===ra)oa.push(ya);else{var wa=oa[ra];wa instanceof RegExp?(ya.host=wa,oa.splice(ra,1,ya)):"object"===typeof wa?wa.withCredentials=
!0:oa.splice(ra,1,ya)}}if(oa=L._credential)if(ra=(ra=d.id.findServerInfo(oa.server))&&ra.owningSystemUrl)ra=ra.replace(/\/?$/,"/sharing"),(oa=d.id.findCredential(ra,oa.userId))&&-1===d.id._getIdenticalSvcIdx(ra,oa)&&oa.resources.splice(0,0,ra)});O.addBoth(function(oa){delete L._credential;!oa||n("ie")&&oa.nodeType||(oa._ssl=L._ssl)});var Ba=L.load,Da=L.error;Ba&&O.addCallback(function(oa){var ra=O._pendingDfd;ra=ra&&ra.ioArgs;return Ba.call(ra&&ra.args,oa,ra)});Da&&O.addErrback(function(oa){var ra=
O._pendingDfd;ra=ra&&ra.ioArgs;return Da.call(ra&&ra.args,oa,ra)})}!d.id||ta||L._token||d.id._isPublic(L.url)||X&&!Z||!(S=d.id.findCredential(L.url))||(L._token=S.token,L._ssl=S.ssl);N?Y.workerOptions&&Y.workerOptions.worker?(G||(G=g),g=Y.workerOptions.worker,ca(O)):b(["./workers/RequestClient"],function(oa){G||(G=g);if(Y.workerOptions){var ra=Y.workerOptions;g=oa.getClient(ra.callback,ra.cbFunction)}else g=oa.getClient();ca(O)}):(G&&(g=G,G=null),ca(O));return O}function E(O,S){O.url=x.fixUrl(O.url);
S=S||{};var L=new a(A._dfdCanceller),Y=v(O.url);L._pendingDfd=Y;Y.always(function(ca){ca&&"cancel"===ca.dojoType?L.reject(ca):C(L,!1,O,S)});return L}var G=null,H,K=u.defaults.io,I=["COM_0056","COM_0057","SB_0008"],J=0,Q=/%[0-9A-F]{2}/i,V=function(){var O=new a;O.resolve();return O.promise}();E._makeRequest=D;E._processRequest=C;E._disableCors=q;E._detectCors=v;E.setRequestPreCallback=z;d.request=E;d._makeRequest=D;d._processRequest=C;d._disableCors=q;d._detectCors=v;d.setRequestPreCallback=z;return E})},
"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(b,y,r,a,k,e){function g(){var x=document.createElement("iframe");x.name="esri_core_jsonp_iframe";x.style.display="none";x.setAttribute("sandbox","allow-scripts");if(!e("ff")&&"srcdoc"in x){var A=b.toUrl("dojo/dojo.js"),B=k.replace("../../../dojo/dojo.js",A);A=A.slice(0,-7);B=B.replace("../../../dojo/",A);x.srcdoc=B}else B=b.toUrl("./iframe.html"),"http:"===
window.location.protocol&&0===B.indexOf("https:")&&(B=B.replace("https:","http:")),x.src=B;document.body.appendChild(x);return x}function h(){var x=new MessageChannel;x.port1.addEventListener("message",m);x.port1.start();return x}function m(x){var A=x.data;if("ready"===A){A=0;for(var B=n;A<B.length;A++)x=B[A],f(x,d);n=null}else if(x=t[A.id])delete t[A.id],A.isError?x.dfd.reject(Error(A.message)):x.dfd.resolve(A.response)}function l(x,A){x.addEventListener("load",function(){x.contentWindow.postMessage("init",
"*",[A.port2])})}function f(x,A){t[x.message.id]=x;A.port1.postMessage(x.message)}Object.defineProperty(y,"__esModule",{value:!0});var c,d,u=0,n=[],t={};y.get=function(x,A){if(!e("esri-script-sandbox"))return a.get(x,A);var B=null;A&&(B={jsonp:A.jsonp,preventCache:A.preventCache,query:A.query,timeout:A.timeout});A=new r(function(){if(n){var w=n.indexOf(F);-1<w&&n.splice(w,1)}else F.message.id in t&&delete t[F.message.id]});var F={dfd:A,message:{id:"id"+(++u+Math.random()),url:x,options:B}};c||(c=
g(),d=h(),l(c,d));n?n.push(F):f(F,d);return A.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(b,y,r,a,k,e,g,h,m,l,f){function c(v,z){v.canDelete&&x._remove(v.id,z.options.frameDoc,!0)}function d(v){q&&q.length&&(k.forEach(q,function(z){x._remove(z.id,z.frameDoc);z.frameDoc=null}),q=[]);return v.options.jsonp?!v.data:!0}function u(v){return!!this.scriptLoaded}
function n(v){return(v=v.options.checkString)&&eval("typeof("+v+') !\x3d\x3d "undefined"')}function t(v,z){if(this.canDelete){var C=this.response.options;q.push({id:this.id,frameDoc:C.ioArgs?C.ioArgs.frameDoc:C.frameDoc});C.ioArgs&&(C.ioArgs.frameDoc=null);C.frameDoc=null}z?this.reject(z):this.resolve(v)}function x(v,z,C){var E=r.parseArgs(v,r.deepCopy({},z));v=E.url;z=E.options;var G=r.deferred(E,c,d,z.jsonp?null:z.checkString?n:u,t);e.mixin(G,{id:A+B++,canDelete:!1});z.jsonp&&((new RegExp("[?\x26]"+
z.jsonp+"\x3d")).test(v)||(v+=(~v.indexOf("?")?"\x26":"?")+z.jsonp+"\x3d"+(z.frameDoc?"parent.":"")+A+"_callbacks."+G.id),G.canDelete=!0,D[G.id]=function(I){E.data=I;G.handleResponse(E)});r.notify&&r.notify.emit("send",E,G.promise.cancel);if(!z.canAttach||z.canAttach(G)){var H=x._attach(G.id,v,z.frameDoc,function(I){if(!(I instanceof Error)){var J=Error("Error loading "+(I.target?I.target.src:"script"));J.source=I;I=J}G.reject(I);x._remove(G.id,z.frameDoc,!0)});if(!z.jsonp&&!z.checkString)var K=g(H,
F,function(I){if("load"===I.type||w.test(H.readyState))K.remove(),G.scriptLoaded=I})}y(G);return C?G:G.promise}l.add("script-readystatechange",function(v,z){return"undefined"!==typeof z.createElement("script").onreadystatechange&&("undefined"===typeof v.opera||"[object Opera]"!==v.opera.toString())});var A=b.id.replace(/[\/\.\-]/g,"_"),B=0,F=l("script-readystatechange")?"readystatechange":"load",w=/complete|loaded/,D=a.global[A+"_callbacks"]={},q=[];x.get=x;x._attach=function(v,z,C,E){C=C||f.doc;
var G=C.createElement("script");if(E)g.once(G,"error",E);G.type="text/javascript";try{G.src=z}catch(H){E&&E(G)}G.id=v;G.async=!0;G.charset="utf-8";return C.getElementsByTagName("head")[0].appendChild(G)};x._remove=function(v,z,C){m.destroy(h.byId(v,z));D[v]&&(C?D[v]=function(){delete D[v]}:delete D[v])};x._callbacksProperty=A+"_callbacks";return x})},"esri/core/sniff":function(){define(["../sniff"],function(b){return b})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c){function d(w){return!this.isFulfilled()}function u(w){return!!this._finished}function n(w,D){if(!D)try{var q=w.options,v=x.doc(x._frame),z=q.handleAs;if("html"!==z){if("xml"===z)if("html"===v.documentElement.tagName.toLowerCase()){h("a",v.documentElement).orphan();var C=v.documentElement.innerText||v.documentElement.textContent;C=C.replace(/>\s+</g,"\x3e\x3c");w.text=e.trim(C)}else w.data=v;else w.text=v.getElementsByTagName("textarea")[0].value;k(w)}else w.data=
v}catch(E){D=E}D?this.reject(D):this._finished?this.resolve(w):this.reject(Error("Invalid dojo/request/iframe request state"))}function t(w){this._callNext()}function x(w,D,q){var v=a.parseArgs(w,a.deepCreate(F,D),!0);w=v.url;D=v.options;if("GET"!==D.method&&"POST"!==D.method)throw Error(D.method+" not supported by dojo/request/iframe");x._frame||(x._frame=x.create(x._iframeName,B+"();"));w=a.deferred(v,null,d,u,n,t);w._callNext=function(){this._calledNext||(this._calledNext=!0,x._currentDfd=null,
x._fireNextRequest())};w._legacy=q;x._dfdQueue.push(w);x._fireNextRequest();r(w);return q?w:w.promise}var A=b.id.replace(/[\/\.\-]/g,"_"),B=A+"_onload";c.global[B]||(c.global[B]=function(){var w=x._currentDfd;if(w){var D=l.byId(w.response.options.form)||w._tmpForm;if(D){for(var q=w._contentToClean,v=0;v<q.length;v++)for(var z=q[v],C=0;C<D.childNodes.length;C++){var E=D.childNodes[C];if(E.name===z){f.destroy(E);break}}w._originalAction&&D.setAttribute("action",w._originalAction);w._originalMethod&&
(D.setAttribute("method",w._originalMethod),D.method=w._originalMethod);w._originalTarget&&(D.setAttribute("target",w._originalTarget),D.target=w._originalTarget)}w._tmpForm&&(f.destroy(w._tmpForm),delete w._tmpForm);w._finished=!0}else x._fireNextRequest()});var F={method:"POST"};x.create=function(w,D,q){if(c.global[w])return c.global[w];if(c.global.frames[w])return c.global.frames[w];q||(m("config-useXDomain")&&m("config-dojoBlankHtmlUrl"),q=m("config-dojoBlankHtmlUrl")||y.toUrl("dojo/resources/blank.html"));
D=f.place('\x3ciframe id\x3d"'+w+'" name\x3d"'+w+'" src\x3d"'+q+'" onload\x3d"'+D+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',c.body());return c.global[w]=D};x.doc=function(w){if(w.contentDocument)return w.contentDocument;var D=w.name;if(D){var q=c.doc.getElementsByTagName("iframe");if(w.document&&q[D].contentWindow&&q[D].contentWindow.document)return q[D].contentWindow.document;if(c.doc.frames[D]&&c.doc.frames[D].document)return c.doc.frames[D].document}return null};
x.setSrc=function(w,D,q){w=c.global.frames[w.name];w.contentWindow&&(w=w.contentWindow);try{q?w.location.replace(D):w.location=D}catch(v){}};x._iframeName=A+"_IoIframe";x._notifyStart=function(){};x._dfdQueue=[];x._currentDfd=null;x._fireNextRequest=function(){try{if(!x._currentDfd&&x._dfdQueue.length){do var w=x._currentDfd=x._dfdQueue.shift();while(w&&(w.canceled||w.isCanceled&&w.isCanceled())&&x._dfdQueue.length);if(!w||w.canceled||w.isCanceled&&w.isCanceled())x._currentDfd=null;else{var D=w.response,
q=D.options,v=w._contentToClean=[],z=l.byId(q.form),C=a.notify,E=q.data||null;if(!w._legacy&&"POST"===q.method&&!z)z=w._tmpForm=f.create("form",{name:A+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},c.body());else if("GET"===q.method&&z&&-1<D.url.indexOf("?")){var G=D.url.slice(D.url.indexOf("?")+1);E=e.mixin(g.queryToObject(G),E)}if(z){if(!w._legacy){var H=z;do H=H.parentNode;while(H&&H!==c.doc.documentElement);H||(z.style.position="absolute",z.style.left="-1000px",z.style.top=
"-1000px",c.body().appendChild(z));z.name||(z.name=A+"_form")}if(E){H=function(S,L){f.create("input",{type:"hidden",name:S,value:L},z);v.push(S)};for(var K in E){var I=E[K];if(e.isArray(I)&&1<I.length)for(G=0;G<I.length;G++)H(K,I[G]);else{var J=h("input[name\x3d'"+K+"']",z);-1==J.indexOf()?H(K,I):J.val(I)}}}var Q=z.getAttributeNode("action"),V=z.getAttributeNode("method"),O=z.getAttributeNode("target");D.url&&(w._originalAction=Q?Q.value:null,Q?Q.value=D.url:z.setAttribute("action",D.url));w._legacy?
V&&V.value||(V?V.value=q.method:z.setAttribute("method",q.method)):(w._originalMethod=V?V.value:null,V?V.value=q.method:z.setAttribute("method",q.method));w._originalTarget=O?O.value:null;O?O.value=x._iframeName:z.setAttribute("target",x._iframeName);z.target=x._iframeName;C&&C.emit("send",D,w.promise.cancel);x._notifyStart(D);z.submit()}else q="",D.options.data&&(q=D.options.data,"string"!==typeof q&&(q=g.objectToQuery(q))),H=D.url+(-1<D.url.indexOf("?")?"\x26":"?")+q,C&&C.emit("send",D,w.promise.cancel),
x._notifyStart(D),x.setSrc(x._frame,H,!0)}}}catch(S){w.reject(S)}};a.addCommonMethods(x,["GET","POST"]);return x})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(b,y,r,a,k){function e(m){for(;m.childNodes[0]&&1==m.childNodes[0].nodeType;)m=m.childNodes[0];return m}function g(m,l){"string"==typeof m?(m=a.toDom(m,l&&l.ownerDocument),11==m.nodeType&&(m=m.childNodes[0])):1==m.nodeType&&m.parentNode&&(m=m.cloneNode(!1));
return m}var h=b.NodeList;y.extend(h,{_placeMultiple:function(m,l){m="string"==typeof m||m.nodeType?b(m):m;for(var f=[],c=0;c<m.length;c++)for(var d=m[c],u=this.length,n=u-1,t;t=this[n];n--)0<c&&(t=this._cloneNode(t),f.unshift(t)),n==u-1?a.place(t,d,l):d.parentNode.insertBefore(t,d),d=t;f.length&&(f.unshift(0),f.unshift(this.length-1),Array.prototype.splice.apply(this,f));return this},innerHTML:function(m){return arguments.length?this.addContent(m,"only"):this[0].innerHTML},text:function(m){if(arguments.length){for(var l=
0,f;f=this[l];l++)1==f.nodeType&&k.set(f,"textContent",m);return this}var c="";for(l=0;f=this[l];l++)c+=k.get(f,"textContent");return c},val:function(m){if(arguments.length){for(var l=y.isArray(m),f=0,c;c=this[f];f++){var d=c.nodeName.toUpperCase(),u=c.type,n=l?m[f]:m;if("SELECT"==d)for(d=c.options,u=0;u<d.length;u++){var t=d[u];t.selected=c.multiple?-1!=r.indexOf(m,t.value):t.value==n}else"checkbox"==u||"radio"==u?c.checked=c.value==n:c.value=n}return this}if((c=this[0])&&1==c.nodeType){m=c.value||
"";if("SELECT"==c.nodeName.toUpperCase()&&c.multiple){m=[];d=c.options;for(u=0;u<d.length;u++)t=d[u],t.selected&&m.push(t.value);m.length||(m=null)}return m}},append:function(m){return this.addContent(m,"last")},appendTo:function(m){return this._placeMultiple(m,"last")},prepend:function(m){return this.addContent(m,"first")},prependTo:function(m){return this._placeMultiple(m,"first")},after:function(m){return this.addContent(m,"after")},insertAfter:function(m){return this._placeMultiple(m,"after")},
before:function(m){return this.addContent(m,"before")},insertBefore:function(m){return this._placeMultiple(m,"before")},remove:h.prototype.orphan,wrap:function(m){if(this[0]){m=g(m,this[0]);for(var l=0,f;f=this[l];l++){var c=this._cloneNode(m);f.parentNode&&f.parentNode.replaceChild(c,f);e(c).appendChild(f)}}return this},wrapAll:function(m){if(this[0]){m=g(m,this[0]);this[0].parentNode.replaceChild(m,this[0]);m=e(m);for(var l=0,f;f=this[l];l++)m.appendChild(f)}return this},wrapInner:function(m){if(this[0]){m=
g(m,this[0]);for(var l=0;l<this.length;l++){var f=this._cloneNode(m);this._wrap(y._toArray(this[l].childNodes),null,this._NodeListCtor).wrapAll(f)}}return this},replaceWith:function(m){m=this._normalize(m,this[0]);for(var l=0,f;f=this[l];l++)this._place(m,f,"before",0<l),f.parentNode.removeChild(f);return this},replaceAll:function(m){m=b(m);for(var l=this._normalize(this,this[0]),f=0,c;c=m[f];f++)this._place(l,c,"before",0<f),c.parentNode.removeChild(c);return this},clone:function(){for(var m=[],
l=0;l<this.length;l++)m.push(this._cloneNode(this[l]));return this._wrap(m,this,this._NodeListCtor)}});h.prototype.html||(h.prototype.html=h.prototype.innerHTML);return h})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(b,y,r){y={_dfdCanceller:function(a){a.canceled=!0;var k=a._pendingDfd;if(!a.isFulfilled()&&k&&!k.isFulfilled()){k.cancel();var e=k.results&&k.results[1]}a._pendingDfd=null;return e},_fixDfd:function(a){var k=a.then;a.then=function(e,g,h){if(e){var m=
e;e=function(l){return l&&l._argsArray?m.apply(null,l):m(l)}}return k.call(this,e,g,h)};return a},_resDfd:function(a,k,e){var g=k.length;1===g?e?a.errback(k[0]):a.callback(k[0]):1<g?(k._argsArray=!0,a.callback(k)):a.callback()}};b.mixin(r,y);return y})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(b,y,r,a,k){y={_addFrameInfo:function(e,g){var h,m,l=2*g.origin[1],f=g.origin[0],c=e.origin.x,d=e.width,u;b.forEach(e.lods,
function(n){h=Math.round(l/n.resolution);m=Math.ceil(h/d);u=Math.floor((f-c)/(d*n.resolution));n._frameInfo||(n._frameInfo=[m,u,u+m-1,h])})},getContainingTileCoords:function(e,g,h){var m=e.origin;h=h.resolution;return{row:Math.floor((m.y-g.y)/(e.height*h)),col:Math.floor((g.x-m.x)/(e.width*h))}},getCandidateTileInfo:function(e,g,h){var m=e.width;var l=e.height,f=h.xmax-h.xmin,c=h.ymax-h.ymin,d=e.__tileInfo===g,u=d?e.getMinZoom():-1;d=d?e.getMaxZoom():-1;var n=-1,t=g.lods,x=Math.abs,A;d=-1<d?d:t.length-
1;for(u=-1<u?u:0;u<=d;u++)if(A=t[u]){var B=f>c?x(c-l*A.resolution):x(f-m*A.resolution);if(0>n||B<=n){var F=A;n=B}else break}m=F;F=m.resolution;l=(h.xmin+h.xmax)/2;f=(h.ymin+h.ymax)/2;c=e.width/2*F;F*=e.height/2;l=new k(l-c,f-F,l+c,f+F,h.spatialReference);h=new a(l.xmin,l.ymax,h.spatialReference);d=m.resolution;c=g.width;f=g.height;g=g.origin;e=e.__visibleDelta;F=Math.floor;t=c*d;x=f*d;d=F((g.y-h.y)/x);n=F((h.x-g.x)/t);u=g.y-d*x;g=F(Math.abs((h.x-(g.x+n*t))*c/t))+e.x;e=F(Math.abs((h.y-u)*f/x))+e.y;
return{tile:{point:h,coords:{row:d,col:n},offsets:{x:g,y:e}},lod:m,extent:l}},getTileExtent:function(e,g,h,m){var l=e.origin;g=e.lods[g].resolution;var f=e.width,c=e.height;return new k(m*g*f+l.x,l.y-(h+1)*g*c,(m+1)*g*f+l.x,l.y-h*g*c,e.spatialReference)}};return r.TileUtils=y})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(b,y,r,a,k,e,g,h){function m(u,n){89.99999<n?n=89.99999:
-89.99999>n&&(n=-89.99999);n*=.017453292519943;return[111319.49079327169*u,3189068.5*Math.log((1+Math.sin(n))/(1-Math.sin(n)))]}function l(u,n,t){u=u/6378137*57.29577951308232;return t?[u,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*n/6378137)))]:[u-360*Math.floor((u+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*n/6378137)))]}function f(){}function c(){}function d(u){var n=u._json;u._unquantizeFn?(n=u._unquantizeFn({x:n.x,y:n.y}),u._xVal=n.x,u._yVal=n.y,
u._unquantizeFn=null):(u._xVal=n.x,u._yVal=n.y);u._json=null}r={type:"point",x:0,y:0};b=b(g,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(u,n,t){y.isArray(u)?(this.x=u[0],this.y=u[1],this.spatialReference=n):k.isObject(u)?(k.mixin(this,u),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=h.createSpatialReference(this.spatialReference))):(this.x=u,this.y=n,this.spatialReference=t);
this.verifySR()},offset:function(u,n){return new this.constructor(this.x+u,this.y+n,this.spatialReference)},setX:function(u){this.x=u;this.clearCache();return this},setY:function(u){this.y=u;this.clearCache();return this},setLongitude:function(u){var n=this.spatialReference;n&&(n._isWebMercator()?this.setX(m(u,this.y)[0]):4326===n.wkid&&this.setX(u));return this},setLatitude:function(u){var n=this.spatialReference;n&&(n._isWebMercator()?this.setY(m(this.x,u)[1]):4326===n.wkid&&this.setY(u));return this},
getLongitude:function(){var u=this.spatialReference;if(u)if(u._isWebMercator())var n=l(this.x,this.y)[0];else 4326===u.wkid&&(n=this.x);return n},getLatitude:function(){var u=this.spatialReference;if(u)if(u._isWebMercator())var n=l(this.x,this.y)[1];else 4326===u.wkid&&(n=this.y);return n},update:function(u,n){this.x=u;this.y=n;this.clearCache();return this},normalize:function(){var u=this.x,n=this.spatialReference;if(n){var t=n._getInfo();t&&(u=this._normalizeX(u,t))}return new this.constructor(u,
this.y,n)},_normalizeX:function(u,n){var t=n.valid[0],x=n.valid[1];n=2*x;u>x?(t=Math.ceil(Math.abs(u-x)/n),u-=t*n):u<t&&(t=Math.ceil(Math.abs(u-t)/n),u+=t*n);return u},toJson:function(){var u={x:this.x,y:this.y},n=this.spatialReference;n&&(u.spatialReference=n.toJson());return u}});f.prototype=b.prototype;c.prototype=new f;Object.defineProperty(c.prototype,"x",{get:function(){this._json&&d(this);return this._xVal},set:function(u){this._xVal=u}});Object.defineProperty(c.prototype,"y",{get:function(){this._json&&
d(this);return this._yVal},set:function(u){this._yVal=u}});c.prototype.setupLazyUnquantization=function(u,n){this._unquantizeFn=u;this._json=n};b.simpleConstructor=f;b.accessorConstructor=c;b.lngLatToXY=m;b.xyToLngLat=l;b.defaultProps=r;b.metersPerDegree=6378137*Math.PI/180;y.setObject("geometry.Point",b,a);a.geometry.defaultPoint=r;return b})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(b,y,r,a,k){function e(){}r=[-2.0037508342788905E7,
2.0037508342788905E7];var g=[-2.0037508342787E7,2.0037508342787E7];b=b(null,{declaredClass:"esri.SpatialReference",constructor:function(h){h&&(k.isObject(h)?k.mixin(this,h):k.isString(h)?this.wkt=h:this.wkid=h)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:r,origin:g,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:r,origin:g,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:r,origin:g,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:r,origin:g,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==y.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==y.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(h){var m=!1;h&&(m=this.isWebMercator()&&4326===h.wkid||h.isWebMercator()&&4326===this.wkid);return m},isWebMercator:function(){return this._isWebMercator()},equals:function(h){var m=!1;h&&(this===h&&
(m=!0),this.wkid||h.wkid?m=this.wkid===h.wkid||this.isWebMercator()&&h.isWebMercator()||this.wkid===h.latestWkid||h.wkid===this.latestWkid:this.wkt&&h.wkt&&(m=this.wkt.toUpperCase()===h.wkt.toUpperCase()));return m},toJson:function(){var h=null;null!=this.wkid?h={wkid:this.wkid}:null!=this.wkt&&(h={wkt:this.wkt});h&&null!=this.latestWkid&&(h.latestWkid=this.latestWkid);return h}});e.prototype=b.prototype;b.simpleConstructor=e;return a.SpatialReference=b})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(b,y,r,a,k){b=b(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(e){this.spatialReference=e;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new k(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(e){return this.cache&&this.cache[e]},setCacheValue:function(e,g){this.cache||
(this.cache={});this.cache[e]=g}});y.setObject("geometry.Geometry",b,a);return b})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(b,y,r,a,k){function e(g){var h=!1;g&&(g.ics||g.icsid)&&(h=!0);return h}a={isICS:e,createSpatialReference:function(g){var h=null;g&&(h=e(g)?new y(g):new b(g));return h}};k.mixin(r,a);return a})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(b,y,r,a,k,e){b=b(e,{declaredClass:"esri.ImageSpatialReference",constructor:function(g){g&&y.isObject(g)&&y.mixin(this,g)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(g){var h=!1;if(g)if(this.icsid&&g.icsid){if(h=this.icsid===g.icsid,this.icsns||g.icsns)h=h&&this.icsns===g.icsns}else this.ics&&g.ics&&(h=this.ics===g.ics);return h},toJson:function(g){var h=null,m=k.isDefined;g=m(g)?g:!0;m(this.icsid)?(h={icsid:this.icsid},
m(this.icsns)&&(h.icsns=this.icsns)):m(this.ics)&&(h={ics:this.ics});m(this.url)&&m(h)&&g&&(h.url=this.url);return h}});return a.ImageSpatialReference=b})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c){function d(){}a={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var u=b(h,{declaredClass:"esri.geometry.Extent",
type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(n,t,x,A,B){e.isObject(n)?(e.mixin(this,n),this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference))):this.update(n,t,x,A,B);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new m((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new m(this.xmin,
this.ymax,this.spatialReference)},getTopRight:function(){return new m(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new m(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new m(this.xmax,this.ymin,this.spatialReference)},centerAt:function(n){var t=this.getCenter(),x=n.x-t.x;n=n.y-t.y;return new u(this.xmin+x,this.ymin+n,this.xmax+x,this.ymax+n,this.spatialReference)},update:function(n,t,x,A,B){this.xmin=n;this.ymin=t;this.xmax=x;this.ymax=
A;this.spatialReference=B;this.clearCache();return this},offset:function(n,t){return new u(this.xmin+n,this.ymin+t,this.xmax+n,this.ymax+t,this.spatialReference)},expand:function(n){var t=(1-n)/2;n=this.getWidth()*t;t*=this.getHeight();return new u(this.xmin+n,this.ymin+t,this.xmax-n,this.ymax-t,this.spatialReference)},intersects:function(n){if(!n)return!1;var t=n.type,x=this.spatialReference,A=n.spatialReference;x&&A&&!x.equals(A)&&x._canProject(A)&&(n=x.isWebMercator()?l.geographicToWebMercator(n):
l.webMercatorToGeographic(n,!0));switch(t){case "point":return this.contains(n);case "multipoint":return this._intersectsMultipoint(n);case "extent":return this._intersectsExtent(n);case "polygon":return this._intersectsPolygon(n);case "polyline":return this._intersectsPolyline(n)}},normalize:function(){var n=this._normalize(!1,!0);r.isArray(n)||(n=[n]);return n},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var n=this.spatialReference,t=n&&n._getInfo(),x=[],A=0;if(t&&
this._isOutOfBounds(t)){var B=this;A=B.xmin;var F=B.ymin,w=B.ymax,D=t.valid[0],q=t.valid[1];B.getWidth()>2*q&&(B=B.getCenter(),B=new u(B.x-q,F,B.x+q,w,new g(n.toJson())));A=B.xmin-A;var v=this._normalizeX(B.xmin,t);t=this._normalizeX(B.xmax,t);v.frameId===t.frameId?x.push(new u(v.x,F,t.x,w,new g(n.toJson()))):x.push(new u(v.x,F,q,w,new g(n.toJson())),new u(D,F,t.x,w,new g(n.toJson())))}else x.push(this.getExtent());return{extents:x,marginLeft:A}},_intersectsMultipoint:function(n){var t=n.points.length,
x;for(x=0;x<t;x++)if(this.contains(n.getPoint(x)))return!0;return!1},_intersectsExtent:function(n){var t,x,A=!1;if(this.xmin<=n.xmin){var B=n.xmin;this.xmax<B?A=!0:t=Math.min(this.xmax,n.xmax)-B}else B=this.xmin,n.xmax<B?A=!0:t=Math.min(this.xmax,n.xmax)-B;if(this.ymin<=n.ymin){var F=n.ymin;this.ymax<F?A=!0:x=Math.min(this.ymax,n.ymax)-F}else F=this.ymin,n.ymax<F?A=!0:x=Math.min(this.ymax,n.ymax)-F;return A?null:new u(B,F,B+t,F+x,this.spatialReference)},_intersectsPolygon:function(n){var t=[this.xmin,
this.ymax],x=[this.xmax,this.ymax],A=[this.xmin,this.ymin],B=[this.xmax,this.ymin],F=[t,x,A,B];t=[[A,t],[t,x],[x,B],[B,A]];A=n.rings;B=A.length;var w=new m(0,0,this.spatialReference);var D=F.length;for(x=0;x<D;x++)if(w.update(F[x][0],F[x][1]),n.contains(w))return!0;w.setSpatialReference(n.spatialReference);for(x=0;x<B;x++)if(F=A[x],D=F.length){var q=F[0];w.update(q[0],q[1]);if(this.contains(w))return!0;for(n=1;n<D;n++){var v=F[n];w.update(v[0],v[1]);if(this.contains(w)||this._intersectsLine([q,v],
t))return!0;q=v}}return!1},_intersectsPolyline:function(n){var t=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],x,A=n.paths,B=A.length,F,w=new m(0,0,n.spatialReference);for(n=0;n<B;n++){var D=A[n];if(F=D.length){var q=D[0];w.update(q[0],q[1]);if(this.contains(w))return!0;for(x=1;x<F;x++){var v=D[x];w.update(v[0],v[1]);if(this.contains(w)||this._intersectsLine([q,
v],t))return!0;q=v}}}return!1},_intersectsLine:function(n,t){var x=f._getLineIntersection2,A,B=t.length;for(A=0;A<B;A++)if(x(n,t[A]))return!0;return!1},contains:function(n){if(!n)return!1;var t=n.type;if("point"===t){var x=this.spatialReference,A=n.spatialReference;t=n.x;n=n.y;x&&A&&!x.equals(A)&&x._canProject(A)&&(n=x.isWebMercator()?m.lngLatToXY(t,n):m.xyToLngLat(t,n,!0),t=n[0],n=n[1]);return t>=this.xmin&&t<=this.xmax&&n>=this.ymin&&n<=this.ymax}return"extent"===t?this._containsExtent(n):!1},_containsExtent:function(n){var t=
n.xmin,x=n.ymin,A=n.xmax,B=n.ymax,F=n.spatialReference;n=new m(t,x,F);t=new m(t,B,F);B=new m(A,B,F);x=new m(A,x,F);return this.contains(n)&&this.contains(t)&&this.contains(B)&&this.contains(x)?!0:!1},union:function(n){return new u(Math.min(this.xmin,n.xmin),Math.min(this.ymin,n.ymin),Math.max(this.xmax,n.xmax),Math.max(this.ymax,n.ymax),this.spatialReference)},getExtent:function(){var n=this.spatialReference;return new u(this.xmin,this.ymin,this.xmax,this.ymax,n&&new g(n.toJson()))},_shiftCM:function(n){var t=
this.getCacheValue("_shifted");if(!t){t=new u(this.toJson());var x=t.spatialReference;if(n=n||x._getInfo()){var A=this._getCM(n);if(A){var B=x._isWebMercator()?l.webMercatorToGeographic(A):A;t.xmin-=A.x;t.xmax-=A.x;x._isWebMercator()||(B.x=this._normalizeX(B.x,n).x);t.setSpatialReference(new g(e.substitute({Central_Meridian:B.x},4326===x.wkid?n.altTemplate:n.wkTemplate)))}}this.setCacheValue("_shifted",t)}return t},_getCM:function(n){var t;this._isOutOfBounds(n)&&(t=this.getCenter());return t},_isOutOfBounds:function(n){var t=
n.valid[0];n=n.valid[1];var x=this.xmin,A=this.xmax;return!(x>=t&&x<=n&&A>=t&&A<=n)},_normalize:function(n,t,x){var A=new u(this.toJson()),B=A.spatialReference;if(B&&(x=x||B._getInfo())){var F=y.map(this._getParts(x),function(w){return w.extent});return 2<F.length?n?this._shiftCM(x):A.update(x.valid[0],A.ymin,x.valid[1],A.ymax,B):2===F.length?n?this._shiftCM(x):t?F:{rings:y.map(F,function(w){return[[w.xmin,w.ymin],[w.xmin,w.ymax],[w.xmax,w.ymax],[w.xmax,w.ymin],[w.xmin,w.ymin]]}),spatialReference:B}:
F[0]||A}return A},_getParts:function(n){var t=this.getCacheValue("_parts");if(!t){t=[];var x=this.xmin,A=this.xmax,B=this.ymin,F=this.ymax,w=this.spatialReference,D=this.getWidth(),q=x,v=A,z=0,C=0;n=n||w._getInfo();var E=n.valid[0];var G=n.valid[1];C=this._normalizeX(x,n);x=C.x;z=C.frameId;C=this._normalizeX(A,n);A=C.x;C=C.frameId;n=x===A&&0<D;if(D>2*G){D=new u(q<v?x:A,B,G,F,w);x=new u(E,B,q<v?A:x,F,w);G=new u(0,B,G,F,w);B=new u(E,B,0,F,w);w=[];E=[];D.contains(G)&&w.push(z);D.contains(B)&&E.push(z);
x.contains(G)&&w.push(C);x.contains(B)&&E.push(C);for(F=z+1;F<C;F++)w.push(F),E.push(F);t.push({extent:D,frameIds:[z]},{extent:x,frameIds:[C]},{extent:G,frameIds:w},{extent:B,frameIds:E})}else x>A||n?t.push({extent:new u(x,B,G,F,w),frameIds:[z]},{extent:new u(E,B,A,F,w),frameIds:[C]}):t.push({extent:new u(x,B,A,F,w),frameIds:[z]});this.setCacheValue("_parts",t)}return t},_normalizeX:function(n,t){var x=0,A=t.valid[0],B=t.valid[1];t=2*B;n>B?(x=Math.ceil(Math.abs(n-B)/t),n-=x*t):n<A&&(x=Math.ceil(Math.abs(n-
A)/t),n+=x*t,x=-x);return{x:n,frameId:x}},toJson:function(){var n={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},t=this.spatialReference;t&&(n.spatialReference=t.toJson());return n}});d.prototype=u.prototype;u.simpleConstructor=d;u.defaultProps=a;r.setObject("geometry.Extent",u,k);k.geometry.defaultExtent=a;return u})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(b,y,r,a,k,e){function g(m,
l,f,c){if("point"===m.type){var d=l(m.x,m.y,c);return new m.constructor(d[0],d[1],new k(f))}if("extent"===m.type){d=l(m.xmin,m.ymin,c);var u=l(m.xmax,m.ymax,c);return new m.constructor(d[0],d[1],u[0],u[1],new k(f))}if("polyline"===m.type||"polygon"===m.type){d="polyline"===m.type;var n=[],t;b.forEach(d?m.paths:m.rings,function(A){n.push(t=[]);b.forEach(A,function(B){t.push(l(B[0],B[1],c))})});return d?new m.constructor({paths:n,spatialReference:new k(f)}):new m.constructor({rings:n,spatialReference:new k(f)})}if("multipoint"===
m.type){var x=[];b.forEach(m.points,function(A){x.push(l(A[0],A[1],c))});return new m.constructor({points:x,spatialReference:new k(f)})}}function h(m,l){m=m&&(null!=m.wkid?m:m.spatialReference);l=l&&(null!=l.wkid?l:l.spatialReference);return m&&l?l.equals(m)?!0:l._canProject(m):!1}r={canProject:h,project:function(m,l){var f=m&&m.spatialReference;l=l&&(null!=l.wkid?l:l.spatialReference);f&&l?f.equals(l)?m=new m.constructor(m.toJson()):h(f,l)?l.isWebMercator()?m=g(m,e.lngLatToXY,{wkid:102100}):4326===
l.wkid&&(m=g(m,e.xyToLngLat,{wkid:4326})):m=null:m=null;return m},lngLatToXY:e.lngLatToXY,xyToLngLat:e.xyToLngLat,metersPerDegree:e.metersPerDegree,geographicToWebMercator:function(m){return g(m,e.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(m,l){return g(m,e.xyToLngLat,{wkid:4326},l)}};y.mixin(y.getObject("geometry",!0,a),r);return r})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(b,y,r,a){function k(h,m,l){return h instanceof
a?new a(h.x+l*(m.x-h.x),h.y+l*(m.y-h.y)):[h[0]+l*(m[0]-h[0]),h[1]+l*(m[1]-h[1])]}function e(h,m){return 1E-8>Math.abs(h-m)}function g(h,m,l,f){var c=e(h[0],m[0])?1E10:(h[1]-m[1])/(h[0]-m[0]),d=e(l[0],f[0])?1E10:(l[1]-f[1])/(l[0]-f[0]),u=h[1]-c*h[0],n=l[1]-d*l[0];if(e(c,d)){if(e(u,n)){if(e(h[0],m[0]))if(Math.min(h[1],m[1])<Math.max(l[1],f[1])||Math.max(h[1],m[1])>Math.min(l[1],f[1])){h=(h[1]+m[1]+l[1]+f[1]-Math.min(h[1],m[1],l[1],f[1])-Math.max(h[1],m[1],l[1],f[1]))/2;var t=(h-u)/c}else return null;
else if(Math.min(h[0],m[0])<Math.max(l[0],f[0])||Math.max(h[0],m[0])>Math.min(l[0],f[0]))t=(h[0]+m[0]+l[0]+f[0]-Math.min(h[0],m[0],l[0],f[0])-Math.max(h[0],m[0],l[0],f[0]))/2,h=c*t+u;else return null;return[t,h]}return null}e(c,1E10)?(t=h[0],h=d*t+n):e(d,1E10)?(t=l[0],h=c*t+u):(t=-(u-n)/(c-d),h=h[1]===m[1]?h[1]:l[1]===f[1]?l[1]:c*t+u);return[t,h]}y={getLength:function(h,m){var l=m.x-h.x;h=m.y-h.y;return Math.sqrt(l*l+h*h)},_getLength:function(h,m){var l=m[0]-h[0];h=m[1]-h[1];return Math.sqrt(l*l+
h*h)},getPointOnLine:k,getMidpoint:function(h,m){return k(h,m,.5)},_equals:e,_getLineIntersection:g,getLineIntersection:function(h,m,l,f,c){(h=g([h.x,h.y],[m.x,m.y],[l.x,l.y],[f.x,f.y]))&&(h=new a(h[0],h[1],c));return h},_getLineIntersection2:function(h,m){var l=h[0],f=h[1],c=m[0],d=m[1];m=l[0];l=l[1];h=f[0];f=f[1];var u=c[0],n=c[1];c=d[0]-u;u=m-u;var t=h-m;d=d[1]-n;n=l-n;var x=f-l,A=d*t-c*x;if(0===A)return!1;c=(c*n-d*u)/A;u=(t*n-x*u)/A;return 0<=c&&1>=c&&0<=u&&1>=u?[m+c*(h-m),l+c*(f-l)]:!1},_pointLineDistance:function(h,
m){var l=m[0],f=m[1];m=l[0];var c=l[1];l=h[0];h=h[1];var d=f[0]-m,u=f[1]-c,n=l-m,t=h-c;f=Math.sqrt;var x=Math.pow,A=f(x(d,2)+x(u,2));n=(n*d+t*u)/(A*A);c+=n*u;return f(x(l-(m+n*d),2)+x(h-c,2))}};b.mixin(b.getObject("geometry",!0,r),y);return y})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(b,y,r,a,k){r={graphicsExtent:function(e){if(!e||!e.length)return null;var g=null,h,m=e.length;for(h=0;h<m;h++){var l=e[h].geometry;
if(l){var f=l.getExtent();f||"point"!==l.type||null==l.x||null==l.y||(f=new k(l.x,l.y,l.x,l.y,l.spatialReference));f&&(g=g?g.union(f):f)}}return 0>g.getWidth()&&0>g.getHeight()?null:g},getGeometries:function(e){return y.map(e,function(g){return g.geometry})},_encodeGraphics:function(e,g){return y.map(e,function(h,m){h=h.toJson();var l={};h.geometry&&(m=g&&g[m],l.geometry=m&&m.toJson()||h.geometry);h.attributes&&(l.attributes=h.attributes);return l})}};b.mixin(a,r);return r})},"esri/layerUtils":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(b,y,r,a,k){a={_serializeLayerDefinitions:function(e,g){var h=[],m=/[:;]/;if(e&&(y.forEach(e,function(f,c){f&&(h.push([c,f]),!g&&m.test(f)&&(g=!0))}),0<h.length)){if(g){var l={};y.forEach(h,function(f){l[f[0]]=f[1]});l=r.toJson(l)}else l=[],y.forEach(h,function(f){l.push(f[0]+":"+f[1])}),l=l.join(";");return l}return null},_serializeTimeOptions:function(e,g){if(e){var h=[];y.forEach(e,function(m,l){m&&(m=m.toJson(),g&&-1!==y.indexOf(g,
l)&&(m.useTime=!1),h.push('"'+l+'":'+r.toJson(m)))});if(h.length)return"{"+h.join(",")+"}"}},_getVisibleLayers:function(e,g){var h=[],m;if(!e)return h;if(g)for(h=g.concat(),m=0;m<e.length;m++){g=e[m];var l=y.indexOf(e,g.id);g.subLayerIds&&-1<l&&(h.splice(l,1),h=h.concat(g.subLayerIds))}else h=this._getDefaultVisibleLayers(e);return h},_getDefaultVisibleLayers:function(e){var g=[],h;if(!e)return g;for(h=0;h<e.length;h++)0<=e[h].parentLayerId&&-1===y.indexOf(g,e[h].parentLayerId)&&y.some(e,function(m){return m.id===
e[h].parentLayerId})||e[h].defaultVisibility&&g.push(e[h].id);return g},_getLayersForScale:function(e,g){var h=[];if(0<e&&g){var m;for(m=0;m<g.length;m++)if(!(0<=g[m].parentLayerId&&-1===y.indexOf(h,g[m].parentLayerId)&&y.some(g,function(d){return d.id===g[m].parentLayerId}))&&0<=g[m].id){var l=!0,f=g[m].maxScale,c=g[m].minScale;if(0<f||0<c)0<f&&0<c?l=f<=e&&e<=c:0<f?l=f<=e:0<c&&(l=e<=c);l&&h.push(g[m].id)}}return h}};b.mixin(k,a);return a})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c){function d(v,z){return Math.ceil((v-z)/(2*z))}function u(v,z){var C=v.paths||v.rings,E,G,H=C.length;for(E=0;E<H;E++){var K=C[E].length;for(G=0;G<K;G++){var I=v.getPoint(E,G);v.setPoint(E,G,I.offset(z,0))}}return v}function n(v,z){if(!(v instanceof m||v instanceof l))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var C=v instanceof m,E=[],G;b.forEach(C?v.paths:v.rings,function(H){E.push(G=[]);G.push([H[0][0],H[0][1]]);var K,
I;for(K=0;K<H.length-1;K++){var J=H[K][0];var Q=H[K][1];var V=H[K+1][0];var O=H[K+1][1];var S=Math.sqrt((V-J)*(V-J)+(O-Q)*(O-Q));var L=(O-Q)/S;var Y=(V-J)/S;var ca=S/z;if(1<ca){for(I=1;I<=ca-1;I++){var U=I*z;var X=Y*U+J;U=L*U+Q;G.push([X,U])}I=(S+Math.floor(ca-1)*z)/2;X=Y*I+J;U=L*I+Q;G.push([X,U])}G.push([V,O])}});return C?new m({paths:E,spatialReference:v.spatialReference}):new l({rings:E,spatialReference:v.spatialReference})}function t(v,z,C){z&&(v=n(v,1E6),v=f.webMercatorToGeographic(v,!0));C&&
(v=u(v,C));return v}function x(v,z,C){var E=v.x||v[0];if(E>z){var G=d(E,z);v.x?v=v.offset(-2*G*z,0):v[0]=E+-2*G*z}else E<C&&(G=d(E,C),v.x?v=v.offset(-2*G*C,0):v[0]=E+-2*G*C);return v}function A(v,z){var C=-1;b.forEach(z.cutIndexes,function(E,G){var H=z.geometries[G];b.forEach(H.rings||H.paths,function(K,I){b.some(K,function(J){if(!(180>J[0])){J=0;var Q,V=K.length;for(Q=0;Q<V;Q++){var O=K[Q][0];J=O>J?O:J}J=Number(J.toFixed(9));J=-360*d(J,180);V=K.length;for(Q=0;Q<V;Q++)O=H.getPoint(I,Q),H.setPoint(I,
Q,O.offset(J,0))}return!0})});E===C?H.rings?b.forEach(H.rings,function(K){v[E]=v[E].addRing(K)}):b.forEach(H.paths,function(K){v[E]=v[E].addPath(K)}):(C=E,v[E]=H)});return v}function B(v,z,C,E){var G=new r;G.addCallbacks(C,E);z=z||e.defaults.geometryService;var H=[],K=[],I,J,Q,V,O,S,L,Y,ca=0;b.forEach(v,function(N){if(N)if(I||(I=N.spatialReference,J=I._getInfo(),V=(Q=I._isWebMercator())?2.0037508342788905E7:180,O=Q?-2.0037508342788905E7:-180,S=Q?102100:4326,L=new m({paths:[[[V,O],[V,V]]],spatialReference:{wkid:S}}),
Y=new m({paths:[[[O,O],[O,V]]],spatialReference:{wkid:S}})),J){var aa=c.fromJson(N.toJson()),ka=N.getExtent();"point"===N.type?H.push(x(aa,V,O)):"multipoint"===N.type?(aa.points=b.map(aa.points,function(pa){return x(pa,V,O)}),H.push(aa)):"extent"===N.type?(aa=ka._normalize(null,null,J),H.push(aa.rings?new l(aa):aa)):ka?(N=2*d(ka.xmin,O)*V,aa=0===N?aa:u(aa,N),ka=ka.offset(N,0),ka.intersects(L)&&ka.xmax!==V?(ca=ka.xmax>ca?ka.xmax:ca,aa=t(aa,Q),K.push(aa),H.push("cut")):ka.intersects(Y)&&ka.xmin!==O?
(ca=2*ka.xmax*V>ca?2*ka.xmax*V:ca,aa=t(aa,Q,360),K.push(aa),H.push("cut")):H.push(aa)):H.push(aa)}else H.push(N);else H.push(N)});C=new m;E=d(ca,V);for(var U=-90,X=E;0<E;){var Z=-180+360*E;C.addPath([[Z,U],[Z,-1*U]]);U*=-1;E--}0<K.length&&0<X?z?z.cut(K,C,function(N){K=A(K,N);var aa=[];b.forEach(H,function(ka,pa){"cut"===ka&&(ka=K.shift(),v[pa].rings&&1<v[pa].rings.length&&ka.rings.length>=v[pa].rings.length?(H[pa]="simplify",aa.push(ka)):H[pa]=!0===Q?f.geographicToWebMercator(ka):ka)});0<aa.length?
z.simplify(aa,function(ka){b.forEach(H,function(pa,ta){"simplify"===pa&&(H[ta]=!0===Q?f.geographicToWebMercator(ka.shift()):ka.shift())});G.callback(H)},function(ka){G.errback(ka)}):G.callback(H)},function(N){G.errback(N)}):G.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(b.forEach(H,function(N,aa){"cut"===N&&(N=K.shift(),H[aa]=!0===Q?f.geographicToWebMercator(N):N)}),G.callback(H));return G}function F(v,z,C,E){var G=!1,H;y.isObject(v)&&v&&(y.isArray(v)?
v.length&&((H=v[0]&&v[0].declaredClass)&&-1!==H.indexOf("Graphic")?(v=b.map(v,function(K){return K.geometry}),G=v.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&(G=!0)):(H=v.declaredClass)&&-1!==H.indexOf("FeatureSet")?(v=b.map(v.features||[],function(K){return K.geometry}),G=v.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&(G=!0));G&&z.push({index:C,property:E,value:v})}function w(v,z){var C=[];b.forEach(z,function(E){var G=E.i,H=v[G];E=E.p;var K;if(y.isObject(H)&&H)if(E)if("*"===E[0])for(K in H)H.hasOwnProperty(K)&&
F(H[K],C,G,K);else b.forEach(E,function(I){F(y.getObject(I,!1,H),C,G,I)});else F(H,C,G)});return C}function D(v,z){var C=0,E={};b.forEach(z,function(G){var H=G.index,K=G.property,I=G.value,J=I.length||1,Q=v.slice(C,C+J);y.isArray(I)||(Q=Q[0]);C+=J;delete G.value;K?(E[H]=E[H]||{},E[H][K]=Q):E[H]=Q});return E}function q(v){for(var z=[],C=0,E=0,G=Math.min,H=Math.max,K=0;K<v.length;K++){for(var I=v[K],J=null,Q=0;Q<I.length;Q++)J=I[Q],z.push(J),0===Q?E=C=J[0]:(C=G(C,J[0]),E=H(E,J[0]));J&&z.push([(C+E)/
2,0])}return z}a={normalizeCentralMeridian:B,_foldCutResults:A,_prepareGeometryForCut:t,_offsetMagnitude:d,_pointNormalization:x,_updatePolyGeometry:u,_straightLineDensify:n,_createWrappers:function(v){var z=y.isObject(v)?v.prototype:y.getObject(v+".prototype");b.forEach(z.__msigns,function(C){var E=z[C.n];z[C.n]=function(){var G=this,H=[],K,I=new r(g._dfdCanceller);C.f&&g._fixDfd(I);for(K=0;K<C.c;K++)H[K]=arguments[K];var J={dfd:I};H.push(J);var Q=[],V;if(G.normalization&&!G._isTable){var O=w(H,
C.a);b.forEach(O,function(S){Q=Q.concat(S.value)});Q.length&&(V=B(Q))}V?(I._pendingDfd=V,V.addCallbacks(function(S){I.canceled||(J.assembly=D(S,O),I._pendingDfd=E.apply(G,H))},function(S){var L=G.declaredClass;L&&-1!==L.indexOf("FeatureLayer")?G._resolve([S],null,H[C.e],I,!0):G._errorHandler(S,H[C.e],I)})):I._pendingDfd=E.apply(G,H);return I}})},_disassemble:w,_addToBucket:F,_reassemble:D,getDenormalizedExtent:function(v){if(!v)return null;var z=v.getExtent();if(!z)return null;var C=v.spatialReference&&
v.spatialReference._getInfo();if(!C)return z;var E=C.valid[0];C=C.valid[1];var G=2*C,H=z.getWidth(),K=z.xmax,I=z.xmin;if("extent"===v.type||0===H||H<=C||H>G||K<E||I>C)return z;switch(v.type){case "polygon":if(1<v.rings.length)var J=q(v.rings);else return z;break;case "polyline":if(1<v.paths.length)J=q(v.paths);else return z;break;case "multipoint":J=v.points}v=Math.min;E=Math.max;G=new h(z.toJson());for(var Q=0;Q<J.length;Q++){var V=J[Q][0];0>V?(V+=C,I=E(V,I)):(V-=C,K=v(V,K))}G.xmin=K;G.xmax=I;return G.getWidth()<
H?(G.xmin-=C,G.xmax-=C,G):z}};y.mixin(y.getObject("geometry",!0,k),a);return a})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(b,y,r,a,k,e,g,h,m,l,f){function c(){}function d(){}a={type:"polyline",paths:null};b=b(h,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(u){this.paths=[];this._path=0;u&&(r.isArray(u)?
this.paths=r.isArray(u[0][0])?u:[u]:u.paths?e.mixin(this,u):this.spatialReference=u,this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(u){this.clearCache();this._path=this.paths.length;this.paths[this._path]=[];r.isArray(u[0])?y.forEach(u,this._addPointArr,this):y.forEach(u,this._addPoint,this);return this},_addPointArr:function(u){this.paths[this._path].push(u)},_addPoint:function(u){this.paths[this._path].push([u.x,u.y])},
_insertPoints:function(u,n){this.clearCache();this._path=n;this.paths[this._path]||(this.paths[this._path]=[]);y.forEach(u,this._addPoint,this)},_validateInputs:function(u,n){return null!==u&&void 0!==u&&(0>u||u>=this.paths.length)||null!==n&&void 0!==u&&(0>n||n>=this.paths[u].length)?!1:!0},getPoint:function(u,n){if(this._validateInputs(u,n))return new m(this.paths[u][n],this.spatialReference)},setPoint:function(u,n,t){if(this._validateInputs(u,n))return this.clearCache(),this.paths[u][n]=[t.x,t.y],
this},insertPoint:function(u,n,t){if(this._validateInputs(u)&&null!=n&&0<=n&&n<=this.paths[u].length)return this.clearCache(),this.paths[u].splice(n,0,[t.x,t.y]),this},removePath:function(u){if(this._validateInputs(u,null)){this.clearCache();u=this.paths.splice(u,1)[0];var n,t=u.length,x=this.spatialReference;for(n=0;n<t;n++)u[n]=new m(u[n],x);return u}},removePoint:function(u,n){if(this._validateInputs(u,n))return this.clearCache(),new m(this.paths[u].splice(n,1)[0],this.spatialReference)},getExtent:function(){var u=
this.getCacheValue("_extent");var n=this.getCacheValue("_partwise");if(u)return u=new l(u),u._partwise=n,u;u=this.paths;var t=u.length;if(t&&u[0].length){var x,A,B,F,w=x=u[0][0][0],D=A=u[0][0][1],q=Math.min,v=Math.max,z=this.spatialReference;n=[];var C,E;for(B=0;B<t;B++){var G=u[B];var H=C=G[0]&&G[0][0];var K=E=G[0]&&G[0][1];var I=G.length;for(F=0;F<I;F++){var J=G[F];var Q=J[0];J=J[1];w=q(w,Q);D=q(D,J);x=v(x,Q);A=v(A,J);H=q(H,Q);K=q(K,J);C=v(C,Q);E=v(E,J)}n.push(new l({xmin:H,ymin:K,xmax:C,ymax:E,
spatialReference:z?z.toJson():null}))}u={xmin:w,ymin:D,xmax:x,ymax:A,spatialReference:z?z.toJson():null};n=1<n.length?n:null;this.setCacheValue("_extent",u);this.setCacheValue("_partwise",n);u=new l(u);u._partwise=n;return u}},toJson:function(){var u={paths:e.clone3DArray(this.paths)},n=this.spatialReference;n&&(u.spatialReference=n.toJson());return u}});c.prototype=b.prototype;d.prototype=new c;Object.defineProperty(d.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:e.clone3DArray(this._pathsVal)}).paths,
this._unquantizeFn=null);return this._pathsVal},set:function(u){this._pathsVal=u}});d.prototype.setupLazyUnquantization=function(u,n){this._unquantizeFn=u;this._pathsVal=n.paths};b.simpleConstructor=c;b.accessorConstructor=d;b.defaultProps=a;r.setObject("geometry.Polyline",b,k);k.geometry.defaultPolyline=a;return b})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c){function d(){}function u(){}a={type:"polygon",rings:null};var n=b(h,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(t){this.rings=[];this._ring=0;t&&(r.isArray(t)?this.rings=r.isArray(t[0][0])?t:[t]:t.rings?e.mixin(this,t):this.spatialReference=t,this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(t){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=
[];r.isArray(t[0])?y.forEach(t,this._addPointArr,this):y.forEach(t,this._addPoint,this);return this},_addPointArr:function(t){this.rings[this._ring].push(t)},_addPoint:function(t){this.rings[this._ring].push([t.x,t.y])},_insertPoints:function(t,x){this.clearCache();this._ring=x;this.rings[this._ring]||(this.rings[this._ring]=[]);y.forEach(t,this._addPoint,this)},_validateInputs:function(t,x){return null!==t&&void 0!==t&&(0>t||t>=this.rings.length)||null!==x&&void 0!==t&&(0>x||x>=this.rings[t].length)?
!1:!0},getPoint:function(t,x){if(this._validateInputs(t,x))return new m(this.rings[t][x],this.spatialReference)},setPoint:function(t,x,A){if(this._validateInputs(t,x))return this.clearCache(),this.rings[t][x]=[A.x,A.y],this},insertPoint:function(t,x,A){if(this._validateInputs(t)&&null!=x&&0<=x&&x<=this.rings[t].length)return this.clearCache(),this.rings[t].splice(x,0,[A.x,A.y]),this},removeRing:function(t){if(this._validateInputs(t,null)){this.clearCache();t=this.rings.splice(t,1)[0];var x,A=t.length,
B=this.spatialReference;for(x=0;x<A;x++)t[x]=new m(t[x],B);return t}},removePoint:function(t,x){if(this._validateInputs(t,x))return this.clearCache(),new m(this.rings[t].splice(x,1)[0],this.spatialReference)},getExtent:function(){var t=this.getCacheValue("_extent");var x=this.getCacheValue("_partwise");if(t)return t=new l(t),t._partwise=x,t;t=this.rings;var A=t.length;if(A&&t[0].length){var B,F,w,D,q=B=t[0][0][0],v=F=t[0][0][1],z=Math.min,C=Math.max,E=this.spatialReference;x=[];var G,H;for(w=0;w<
A;w++){var K=t[w];var I=G=K[0]&&K[0][0];var J=H=K[0]&&K[0][1];var Q=K.length;for(D=0;D<Q;D++){var V=K[D];var O=V[0];V=V[1];q=z(q,O);v=z(v,V);B=C(B,O);F=C(F,V);I=z(I,O);J=z(J,V);G=C(G,O);H=C(H,V)}x.push(new l({xmin:I,ymin:J,xmax:G,ymax:H,spatialReference:E?E.toJson():null}))}t={xmin:q,ymin:v,xmax:B,ymax:F,spatialReference:E?E.toJson():null};x=1<x.length?x:null;this.setCacheValue("_extent",t);this.setCacheValue("_partwise",x);t=new l(t);t._partwise=x;return t}},contains:function(t){var x=this.rings,
A=!1,B,F,w,D=x.length;var q=this.spatialReference;var v=t.spatialReference;var z=t.x;t=t.y;q&&v&&!q.equals(v)&&q._canProject(v)&&(t=q.isWebMercator()?m.lngLatToXY(z,t):m.xyToLngLat(z,t,!0),z=t[0],t=t[1]);for(w=0;w<D;w++){q=x[w];var C=q.length;for(F=B=0;F<C;F++){B++;B===C&&(B=0);v=q[F];var E=q[B];(v[1]<t&&E[1]>=t||E[1]<t&&v[1]>=t)&&v[0]+(t-v[1])/(E[1]-v[1])*(E[0]-v[0])<z&&(A=!A)}}return A},getCentroid:function(){var t=this.getCacheValue("_centroid");if(void 0!==t)return t;t=this.rings;var x,A,B=[],
F,w,D=Infinity,q=-Infinity,v=Infinity,z=-Infinity;y.forEach(t,function(G){C=x=A=0;y.forEach(G,function(H,K){K<G.length-1&&(F=G[K+1],w=H[0]*F[1]-F[0]*H[1],C+=(H[0]+F[0])*w,x+=(H[1]+F[1])*w,A+=w,H[0]<D&&(D=H[0]),H[0]>q&&(q=H[0]),H[1]<v&&(v=H[1]),H[1]>z&&(z=H[1]))});0<A&&(A*=-1);A&&B.push([C,x,A/2])});B.sort(function(G,H){return G[2]-H[2]});var C=x=void 0;if(B[0]){var E=6*B[0][2];C=B[0][0]/E;x=B[0][1]/E;if(C<D||C>q||x<v||x>z)C=x=void 0}if(void 0===C||void 0===x)if(t=t[0]&&t[0].length?this._getLineCentroid(t[0]):
null)C=t.x,x=t.y;t=isNaN(C)||isNaN(x)?null:new m(C,x,this.spatialReference);this.setCacheValue("_centroid",t);return t},_getLineCentroid:function(t){var x=0,A=0,B=0,F={x:0,y:0},w={x:0,y:0},D,q=t.length,v;for(D=0;D<q-1;D++){var z=t[D];var C=t[D+1];if(z&&C){F.x=z[0];F.y=z[1];w.x=C[0];w.y=C[1];var E=f.getLength(F,w);0<E&&(x+=E,z=f.getMidpoint(z,C),A+=E*z[0],B+=E*z[1])}}0<x?v={x:A/x,y:B/x}:t[0]&&(v={x:t[0][0],y:t[0][1]});return v},isClockwise:function(t){var x=0,A,B=t.length,F=r.isArray(t[0])?function(w,
D){return w[0]*D[1]-D[0]*w[1]}:function(w,D){return w.x*D.y-D.x*w.y};for(A=0;A<B;A++)x+=F(t[A],t[(A+1)%B]);return 0>=x/2},isSelfIntersecting:function(t){t=t||this;var x,A,B,F,w,D=t.rings.length;for(B=0;B<D;B++){for(x=0;x<t.rings[B].length-1;x++){var q=[[t.rings[B][x][0],t.rings[B][x][1]],[t.rings[B][x+1][0],t.rings[B][x+1][1]]];for(A=B+1;A<D;A++)for(F=0;F<t.rings[A].length-1;F++){var v=[[t.rings[A][F][0],t.rings[A][F][1]],[t.rings[A][F+1][0],t.rings[A][F+1][1]]];if((w=f._getLineIntersection2(q,v))&&
!(w[0]===q[0][0]&&w[1]===q[0][1]||w[0]===v[0][0]&&w[1]===v[0][1]||w[0]===q[1][0]&&w[1]===q[1][1]||w[0]===v[1][0]&&w[1]===v[1][1]))return!0}}F=t.rings[B].length;if(!(4>=F))for(x=0;x<F-3;x++){var z=F-1;0===x&&(z=F-2);q=[[t.rings[B][x][0],t.rings[B][x][1]],[t.rings[B][x+1][0],t.rings[B][x+1][1]]];for(A=x+2;A<z;A++)if(v=[[t.rings[B][A][0],t.rings[B][A][1]],[t.rings[B][A+1][0],t.rings[B][A+1][1]]],(w=f._getLineIntersection2(q,v))&&!(w[0]===q[0][0]&&w[1]===q[0][1]||w[0]===v[0][0]&&w[1]===v[0][1]||w[0]===
q[1][0]&&w[1]===q[1][1]||w[0]===v[1][0]&&w[1]===v[1][1]))return!0}}return!1},toJson:function(){var t={rings:e.clone3DArray(this.rings)},x=this.spatialReference;x&&(t.spatialReference=x.toJson());return t}});d.prototype=n.prototype;u.prototype=new d;Object.defineProperty(u.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:e.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(t){this._ringsVal=t}});u.prototype.setupLazyUnquantization=
function(t,x){this._unquantizeFn=t;this._ringsVal=x.rings};n.simpleConstructor=d;n.accessorConstructor=u;n.defaultProps=a;n.createEllipse=function(t){var x=t.center.x,A=t.center.y,B=t.longAxis,F=t.shortAxis,w=t.numberOfPoints,D=t.map,q;t=[];var v=2*Math.PI/w;for(q=0;q<w;q++){var z=Math.cos(q*v);var C=Math.sin(q*v);z=D.toMap({x:B*z+x,y:F*C+A});t.push(z)}t.push(t[0]);x=new n(D.spatialReference);x.addRing(t);return x};n.createCircle=function(t){return n.createEllipse({center:t.center,longAxis:t.r,shortAxis:t.r,
numberOfPoints:t.numberOfPoints,map:t.map})};n.fromExtent=function(t){var x=t.normalize();t=t.spatialReference;return new n({rings:y.map(x,function(A){return[[A.xmin,A.ymin],[A.xmin,A.ymax],[A.xmax,A.ymax],[A.xmax,A.ymin],[A.xmin,A.ymin]]}),spatialReference:t?t.toJson():null})};r.setObject("geometry.Polygon",n,k);k.geometry.defaultPolygon=a;k.geometry.createEllipse=n.createEllipse;k.geometry.createCircle=n.createCircle;k.geometry.isClockwise=n.prototype.isClockwise;k.geometry.polygonSelfIntersecting=
n.prototype.isSelfIntersecting;return n})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(b,y,r,a,k,e,g,h,m){function l(u,n,t){var x=u.rings||u.paths,A,B;var F=0;for(A=x.length;F<A;F++){var w=x[F];var D=0;for(B=w.length;D<B;D++){var q=w[D];if(0<D)v+=q[0],z+=q[1];else{var v=q[0];var z=q[1]}q[0]=n(v);q[1]=t(z)}}return u}var f={esriGeometryPoint:function(u,n,t){u.x=n(u.x);u.y=t(u.y);return u},
esriGeometryPolyline:l,esriGeometryPolygon:l,esriGeometryEnvelope:function(u,n,t){u.xmin=n(u.xmin);u.ymin=t(u.ymin);u.xmax=n(u.xmax);u.ymax=t(u.ymax);return u},esriGeometryMultipoint:function(u,n,t){var x=u.points,A;var B=0;for(A=x.length;B<A;B++){var F=x[B];if(0<B)w+=F[0],D+=F[1];else{var w=F[0];var D=F[1]}F[0]=n(w);F[1]=t(D)}return u}},c={esriGeometryPoint:function(u,n,t){u.x=n(u.x);u.y=t(u.y);return u}},d={createInstance:function(u,n){u=new u;n&&a.mixin(u,n);return u},fromJson:function(u){if(void 0!==
u.x&&void 0!==u.y)return new k(u);if(void 0!==u.paths)return new e(u);if(void 0!==u.rings)return new g(u);if(void 0!==u.points)return new h(u);if(void 0!==u.xmin&&void 0!==u.ymin&&void 0!==u.xmax&&void 0!==u.ymax)return new m(u)},getJsonType:function(u){return u instanceof k?"esriGeometryPoint":u instanceof e?"esriGeometryPolyline":u instanceof g?"esriGeometryPolygon":u instanceof m?"esriGeometryEnvelope":u instanceof h?"esriGeometryMultipoint":null},getGeometryType:function(u){return"esriGeometryPoint"===
u?k:"esriGeometryPolyline"===u?e:"esriGeometryPolygon"===u?g:"esriGeometryEnvelope"===u?m:"esriGeometryMultipoint"===u?h:null},supportsLazyUnquantization:function(u){return"esriGeometryPoint"===u||"esriGeometryPolyline"===u||"esriGeometryPolygon"===u||"esriGeometryMultipoint"===u},unquantizeFunction:function(u,n){if(u&&n){var t=n.translate[0],x=n.translate[1],A=n.scale[0],B=n.scale[1],F=function(q){return q*A+t},w=function(q){return x-q*B},D=f[u];return function(q){return q?D(q,F,w):null}}},unquantize:function(u,
n,t){if(n=d.unquantizeFunction(n,t)){var x=u.length;for(t=0;t<x;t++)n(u[t].geometry)}},quantizeFunction:function(u,n){if(u&&"esriGeometryPoint"===u&&n){var t=n.translate[0],x=n.translate[1],A=n.scale[0],B=n.scale[1],F=function(q){return Math.round((q-t)/A)},w=function(q){return Math.round((x-q)/B)},D=c[u];return function(q){return q?D(q,F,w):null}}},quantize:function(u,n,t){if(n=d.quantizeFunction(n,t)){var x=u.length;for(t=0;t<x;t++)n(u[t].geometry)}}};b.mixin(b.getObject("geometry",!0,r),d);return d})},
"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(b,y,r,a,k,e,g,h,m,l){function f(){}function c(){}r={type:"multipoint",points:null};b=b(g,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(d){this.points=[];d&&(d.points?k.mixin(this,d):this.spatialReference=d,this.spatialReference&&(this.spatialReference=l.createSpatialReference(this.spatialReference)));
this.verifySR()},addPoint:function(d){this.clearCache();y.isArray(d)?this.points.push(d):this.points.push([d.x,d.y]);return this},removePoint:function(d){if(this._validateInputs(d))return this.clearCache(),new h(this.points.splice(d,1)[0],this.spatialReference)},getExtent:function(){var d=this.getCacheValue("_extent");if(d)return new m(d);d=this.points;var u=d.length;if(u){var n=d[0],t,x,A=t=n[0],B=x=n[1],F=Math.min,w=Math.max,D=this.spatialReference,q;for(q=0;q<u;q++){n=d[q];var v=n[0];n=n[1];A=
F(A,v);B=F(B,n);t=w(t,v);x=w(x,n)}d={xmin:A,ymin:B,xmax:t,ymax:x,spatialReference:D?D.toJson():null};this.setCacheValue("_extent",d);return new m(d)}},_validateInputs:function(d){return null===d||0>d||d>=this.points.length?!1:!0},getPoint:function(d){if(this._validateInputs(d))return d=this.points[d],new h(d[0],d[1],this.spatialReference)},setPoint:function(d,u){if(this._validateInputs(d))return this.clearCache(),this.points[d]=[u.x,u.y],this},toJson:function(){var d={points:k.clone2DArray(this.points)},
u=this.spatialReference;u&&(d.spatialReference=u.toJson());return d}});f.prototype=b.prototype;c.prototype=new f;Object.defineProperty(c.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:k.clone2DArray(this._pointsVal)}).points,this._unquantizeFn=null);return this._pointsVal},set:function(d){this._pointsVal=d}});c.prototype.setupLazyUnquantization=function(d,u){this._unquantizeFn=d;this._pointsVal=u.points};b.simpleConstructor=f;b.accessorConstructor=
c;b.defaultProps=r;y.setObject("geometry.Multipoint",b,a);a.geometry.defaultMultipoint=r;return b})},"arcgisonline/init":function(){define(["dojo","dijit","dojox","dojo/require!dojo/DeferredList,arcgisonline/sharing/dijit/_Empty,esri/libs/sanitizer/Sanitizer,arcgisonline/pages/utils/organization"],function(b,y,r){b.provide("arcgisonline.init");b.require("dojo.DeferredList");b.require("arcgisonline.sharing.dijit._Empty");b.require("esri.libs.sanitizer.Sanitizer");b.require("arcgisonline.pages.utils.organization");
b.mixin(arcgisonline.init,{labels:null,feeds:[],currentFeed:null,allSSL:!1,isOrg:!1,isSingleTenant:!1,settings:null,galleryNodeMap:{},sanitizer:null,orgUtil:arcgisonline.pages.utils.organization,loadLabels:function(){var a=arcgisonline.init;a.labels=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(a.labels,b.i18n.getLocalization("arcgisonline","arcgisonline").homePage);b.mixin(a.labels,b.i18n.getLocalization("arcgisonline","arcgisonline").emptyStates);b.attr("viewerLink","innerHTML",
a.labels.viewerLink);b.attr("viewerDescription","innerHTML",a.labels.viewerDescription);b.attr("signUpLink","innerHTML",a.labels.signUpLink);b.attr("signUpDescription","innerHTML",a.labels.signUpDescription);b.attr("featuredVideosLink","innerHTML",a.labels.featuredVideosLink);b.attr("featuredVideosDescription","innerHTML",a.labels.featuredVideosDescription);b.attr("lnkExplore","innerHTML",a.labels.explorerLink);b.attr("pExplore","innerHTML",a.labels.explorerDescription);b.attr("signUpImg","alt",a.labels.signUpLink);
b.attr("signUpImg","title",a.labels.signUpLink);b.attr("mapImg","alt",a.labels.viewerLink);b.attr("mapImg","title",a.labels.viewerLink);b.attr("developersImg","alt",a.labels.explorerLink);b.attr("developersImg","title",a.labels.explorerLink);b.attr("videosImg","alt",a.labels.featuredVideosLink);b.attr("videosImg","title",a.labels.featuredVideosLink);b.attr("next","aria-label",esriGeowConfig.isRightToLeft?a.labels.previous:a.labels.next);b.attr("prev","aria-label",esriGeowConfig.isRightToLeft?a.labels.next:
a.labels.previous);b.attr("skipToContent","innerHTML",a.labels.skipToContent)},initialize:function(){var a=arcgisonline.init;esri.i18nBundle=b.i18n.getLocalization("arcgisonline","arcgisonline");a.loadLabels();a.initSanitizer();b.byId("logoImg")&&b.attr("logoImg","src",arcgisonline.sharing.util.relativeToExplicitUrl("images/logo-pod.jpg"));b.byId("featuredVideosLink").href=esriGeowConfig.learnArcGIS;a.isSingleTenant=void 0!==esriGeowConfig.isMultiTenant&&null!==esriGeowConfig.isMultiTenant&&!1===
esriGeowConfig.isMultiTenant;var k=arcgisonline.sharing.util.getUser();if(a.isSingleTenant||k&&k.accountId)a.isOrg=!0,(k=b.byId("headerTitle"))&&k.parentNode.removeChild(k);arcgisonline.sharing.geow.Account.getSelf(b.hitch(a,arcgisonline.init.initPage),b.hitch(arcgisonline.init,arcgisonline.init.initPage))},unhide:function(){document.body.classList.remove("hide")},initSanitizer:function(){var a=arcgisonline.init;a.sanitizer=new esri.libs.sanitizer.Sanitizer(a.orgUtil.orgSettingsSanitizerParams,!0);
a.sanitizer.sanitizeUrl=a.orgUtil.sanitizeUrlOrgOverride;a.orgUtil.adjustSanitizerForOrgSettingsUse(a.sanitizer)},overrideSettings:function(a){var k=arcgisonline.init;k.settings=a;k.isPortal=arcgisonline.sharing.util.isPortal();if(k.settings.id&&0<k.settings.id.length){k.isOrg=!0;var e=b.byId("headerTitle");e&&e.parentNode.removeChild(e)}k.isPortal&&k.getFederatedServers();a.allSSL&&(k.allSSL=a.allSSL);a.portalName&&(esriGeowConfig.portalName=a.portalName);a.portalHostname&&(esriGeowConfig.portalHostname=
a.portalHostname);a.portalHeaderImage&&(esriGeowConfig.portalHeaderImage=a.portalHeaderImage);a.homePageFeaturedContent?esriGeowConfig.homePageFeaturedContent=a.homePageFeaturedContent:k.isOrg&&(esriGeowConfig.homePageFeaturedContent=null);esri.isDefined(a.homePageFeaturedContentCount)&&(esriGeowConfig.homePageFeaturedContentCount=a.homePageFeaturedContentCount);if(a.rotatorPanels)if(k.isOrg){esriGeowConfig.rotatorPanels=a.rotatorPanels;e=esriGeowConfig.rotatorPanels;for(var g,h,m,l=0;l<e.length;l++)g=
e[l],k.isPortal&&"7443"===location.port&&-1===esriGeowConfig.self.portalHostname.indexOf(":7443")&&(h=new RegExp(esriGeowConfig.self.portalHostname,"gi"),h.test(g.innerHTML)&&(m=esriGeowConfig.self.portalHostname.split("/"),m[0]+=":7443",m[1]="arcgis",g.innerHTML=g.innerHTML.replace(h,m.join("/")))),e[l].innerHTML=g.innerHTML.replace(/CDN_SERVER/gi,esriGeowConfig.cdnServerUrl)}else b.create("div",{id:"homeCalciteBanner"},b.byId("matrixLayout")),b.addClass(b.byId("details"),"calcite_home calcite_home_details"),
b.addClass(b.byId("matrixLayout"),"calcite_home calcite_home_matrixLayout"),b.addClass(b.byId("homeCalciteBanner"),"calcite_home calcite_home_banner"),b.addClass(b.byId("featuredMaps"),"calcite_home calcite_home_featuredMaps"),b.addClass(b.byId("bottomContent"),"calcite_home calcite_home_bottomContent");else k.isOrg&&(esriGeowConfig.rotatorPanels=null);k=a.showHomePageDescription;esriGeowConfig.showHomePageDescription=void 0!==k&&null!==k?a.showHomePageDescription:!1},getFederatedServers:function(){var a=
arcgisonline.sharing.util.getUser();!esriGeowConfig.federatedServers&&a&&arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"portals/"+esriGeowConfig.self.id+"/servers"}).then(b.hitch(this,function(k){arcgisonline.sharing.util.setFederatedServers((k||{}).servers||[])}))},initOrganization:function(){var a=arcgisonline.init;esri.hide(b.byId("bottomSection"));if(esriGeowConfig.explorerOnline){var k="http://developers.arcgis.com",e=a.labels.explorerLink,g=a.labels.explorerDescription;a.isSingleTenant&&
(k=esriGeowConfig.explorerOnline,e=a.labels.explorerLinkPortal,g=a.labels.explorerDescriptionPortal);b.create("div",{id:"appOrgDiv",innerHTML:'\x3ch2 id\x3d"h2Explore"\x3e\x3ca id\x3d"lnkExplore" class\x3d"explorerLink" href\x3d"'+k+'" target\x3d"_blank" \x3e'+e+'\x3c/a\x3e\x3c/h2\x3e\x3cp id\x3d"pExplore"\x3e'+g+"\x3c/p\x3e"},b.byId("topRow2"))}k=a.settings.name;e=a.settings.description;g=esriGeowConfig.showHomePageDescription;g=void 0!==g&&null!==g&&!1===g?!1:!0;var h=esri.isDefined(e)&&"\x3cbr\x3e"!==
e&&"\x3cbr/\x3e"!==e&&"\x3cbr /\x3e"!==e&&""!==e;h&&g?(b.attr(b.byId("orgDetails"),"innerHTML",a.sanitizer.sanitize(e)),esri.show(b.byId("organizationSection"))):!arcgisonline.sharing.util.isPortal()||h||g||(e='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+(a.settings.helpBase+a.settings.helpMap.m["120000837"])+'" target\x3d"_blank"\x3e',b.attr(b.byId("orgDetails"),"innerHTML",esri.substitute({linkStart:e,linkEnd:"\x3c/a\x3e\x3c/span\x3e"},a.labels.portalDefaultDesc)),esri.show(b.byId("organizationSection")));
e=(e=arcgisonline.sharing.util.getToken())?"?token\x3d"+e:"";g=a.settings.backgroundImage;esri.isDefined(g)?"none"!==g?0===g.indexOf("images/")?b.query("body").addClass("defaultBackground"):(g=esriGeowConfig.restBaseUrl+"portals/self/resources/"+g+e,h=b.query("body.esri")[0],b.style(h,"backgroundImage","url('"+g+"')"),b.style(h,"backgroundPosition","top center"),b.style(h,"backgroundRepeat","repeat-x")):b.query("body").addClass("calciteBackground"):b.query("body").addClass("calciteBackground");if(esriGeowConfig.rotatorPanels){b.addClass(b.byId("matrixLayout"),
"matrixLayoutShort");b.addClass(b.byId("details"),"detailsShort");k=arcgisonline.sharing.util.getToken();g=esriGeowConfig.rotatorPanels;for(h=0;h<g.length;h++)e=g[h],e.id&&(e.innerHTML=a.allSSL||a.isPortal&&"https:"===location.protocol?e.innerHTML.replace(/http:/g,"https:"):e.innerHTML),e.innerHTML=e.innerHTML.replace(/CDN_SERVER/gi,esriGeowConfig.cdnServerUrl),e.innerHTML=e.innerHTML.replace("SECURITY_TOKEN",k?k:""),e.innerHTML=a.expandPredefinedImageUrls(e.innerHTML),e.innerHTML=a.expandProtocolAgnosticUrls(e.innerHTML),
e.innerHTML=a.sanitizer.sanitize(e.innerHTML);a.createRotator(g)}else g=esriGeowConfig.portalHeaderImage?esriGeowConfig.portalHeaderImage:arcgisonline.sharing.util.relativeToExplicitUrl("images/organizationSplash.jpg"),b.create("img",{id:"headerImage",src:g},b.byId("matrixLayout")),b.addClass(b.byId("headerImage"),"portalImage"),g=b.create("div",{id:"logoDisplay"},b.byId("matrixLayout")),h="",a.settings&&a.settings.thumbnail&&(h=esriGeowConfig.restBaseUrl+"portals/self/resources/"+a.settings.thumbnail+
e,b.create("img",{src:h,alt:k},g)),b.create("span",{innerHTML:k},g),b.addClass(b.byId("matrixLayout"),"matrixLayoutShort"),b.addClass(b.byId("details"),"detailsShort");a.unhide()},expandPredefinedImageUrls:function(a){var k=window.location.href.substring(0,window.location.href.lastIndexOf("/")+1);a=this.expandPredefinedImageUrl(a,"images/banner-1.jpg",k);a=this.expandPredefinedImageUrl(a,"images/banner-2.jpg",k);a=this.expandPredefinedImageUrl(a,"images/banner-3.jpg",k);a=this.expandPredefinedImageUrl(a,
"images/banner-4.jpg",k);a=this.expandPredefinedImageUrl(a,"images/banner-5.jpg",k);a=this.expandPredefinedImageUrl(a,"images/organizationSplash.jpg",k);return a=this.expandPredefinedImageUrl(a,"images/arcgis_background.jpg",k)},expandPredefinedImageUrl:function(a,k,e){return a.replace('src\x3d"'+k+'"','src\x3d"'+e+k+'"').replace("src\x3d'"+k+"'","src\x3d'"+e+k+"'")},expandProtocolAgnosticUrls:function(a){var k=window.location.protocol;return a.replace('src\x3d"//','src\x3d"'+k+"//").replace("src\x3d'//",
"src\x3d'"+k+"//")},initPage:function(a,k){k=arcgisonline.init;!a||a.code||a.message||k.overrideSettings(a);k.isOrg?document.title=k.settings.name:(document.title=esriGeowConfig.portalName||k.labels.arcgis,b.query("body").addClass("defaultBackground"),esriGeowConfig.portalHeaderImage?((a=b.byId("headerTitle"))&&a.parentNode.removeChild(a),b.create("img",{id:"headerImage",src:esriGeowConfig.portalHeaderImage},b.byId("matrixLayout")),b.addClass(b.byId("headerImage"),"portalImage")):k.createRotator(esriGeowConfig.rotatorPanels));
a="";(a=arcgisonline.sharing.util.getUser())&&!a.accountId?(b.attr("signUpLink","innerHTML",k.labels.readyToUse),b.attr("signUpDescription","innerHTML",k.labels.readyToUseDescription),b.query("#signUpLink").attr("href",location.protocol+"//www.esri.com/software/apps")):(-1===esriGeowConfig.signin.indexOf("http")?(a=esriGeowConfig.baseUrl+esriGeowConfig.signin,!1!==esriGeowConfig.useSSL&&(a=a.replace("http:","https:"))):a=esriGeowConfig.signin,b.query("#signUpLink").attr("href",a));esriGeowConfig.explorerOnline?
b.query(".explorerLink").attr("href","http://developers.arcgis.com"):(b.style(b.byId("bottom3Grid"),"display","none"),b.removeClass(b.byId("bottomRow2"),"middle"),b.addClass(b.byId("bottomRow2"),"last"),b.addClass(b.byId("bottom2Grid"),"grid_6"),b.addClass(b.byId("bottom1Grid"),"grid_6"));b.style("page-border","visibility","visible");esriGeowConfig.homePageFeaturedContent?k.getGroup(esriGeowConfig.homePageFeaturedContent):esri.hide(b.byId("featuredMaps"));k.isOrg?k.initOrganization():k.unhide()},
createRotator:function(a){var k=new r.widget.AutoRotator({transition:"dojox.widget.rotator.crossFade",duration:1E4,panes:a,autoStart:!0,pauseOnManualChange:!0,cycles:12,suspendOnHover:!0},b.byId("imgRotator"));new r.widget.rotator.Controller({rotator:k,commands:"#"},b.byId("categories"));a&&1===a.length&&b.style("categories","display","none")},getNextElementSibling:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(;a.nextSibling;){if(1===a.nextSibling.nodeType)return a.nextSibling;
a=a.nextSibling}},getGroup:function(a){a={q:a,f:"json",ts:(new Date).getTime()};arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/groups",content:a}).then(b.hitch(arcgisonline.init,arcgisonline.init.getGroupContent),b.hitch(arcgisonline.init,arcgisonline.init.getGroupContent))},getGroupContent:function(a){if(a&&a.results&&a.results[0]){for(var k=0,e=a.results[k];a.results.length>k+1&&!(-1<a.query.indexOf('"'+e.title+'"'));)k++,e=a.results[k];b.byId("galleryTitle").innerHTML=
e.title;0===esriGeowConfig.homePageFeaturedContentCount?this.showAllGroupItems(e):(a={q:"group:"+e.id+' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"',f:"json",num:esriGeowConfig.homePageFeaturedContentCount,sortField:e.sortField?e.sortField:"modified",sortOrder:e.sortOrder?e.sortOrder:"desc",ts:(new Date).getTime()},arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:a}).then(b.hitch(arcgisonline.init,
arcgisonline.init.createGallery),function(g){}))}else esri.hide(b.byId("featuredMaps"))},showAllGroupItems:function(a){var k={q:"group:"+a.id+' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"',f:"json",num:100,sortField:a.sortField?a.sortField:"modified",sortOrder:a.sortOrder?a.sortOrder:"desc",ts:(new Date).getTime()};arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:k}).then(b.hitch(this,
function(e){var g={results:e.results},h=0;h=0;if(0<e.nextStart){h=e.total-e.results.length;h=Math.ceil(h/100);var m=[];e=e.nextStart;for(var l=0;l<h;l++)k.start=e+100*l,m.push(arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:k}));(new b.DeferredList(m)).then(b.hitch(this,function(f){b.forEach(f,b.hitch(this,function(c){c[1]&&c[1].results&&(g.results=g.results.concat(c[1].results))}));this.createGallery(g)}),b.hitch(this,function(f){this.createGallery(g)}))}else this.createGallery(g)}),
function(e){})},createGallery:function(a,k){var e=a.results,g=new arcgisonline.sharing.dijit.Gallery({nodesPerPage:4,showThumbnailInDetails:!1,showToolTip:!1,showPageControls:!1,fadeOutOtherNodes:!0,noResultsMessage:b.string.substitute(arcgisonline.sharing.dijit._Empty,{message:arcgisonline.init.labels.noContentAvailable,width:96})},"gallery");b.connect(g,"onContentChange",function(){e.length<=g.nodesPerPage&&(esriGeowConfig.isRightToLeft?(b.removeClass("next","prevButtonEnabled"),b.addClass("next",
"prevButtonDisabled")):(b.removeClass("next","nextButtonEnabled"),b.addClass("next","nextButtonDisabled")))});g.set("items",e);esriGeowConfig.isRightToLeft?(b.connect(b.byId("prev"),"click, keyup",g,g.nextPage),b.connect(b.byId("next"),"click, keyup",g,g.prevPage),b.removeClass("next","nextButtonEnabled"),b.addClass("next","nextButtonDisabled")):(b.connect(b.byId("prev"),"click, keyup",g,g.prevPage),b.connect(b.byId("next"),"click, keyup",g,g.nextPage),b.removeClass("prev","prevButtonEnabled"),b.addClass("prev",
"prevButtonDisabled"));b.connect(g,"onPageChange",function(h){arcgisonline.init.galleryNodeMap={};esriGeowConfig.isRightToLeft?(1===h?(b.removeClass("next","nextButtonEnabled"),b.addClass("next","nextButtonDisabled")):(b.removeClass("next","nextButtonDisabled"),b.addClass("next","nextButtonEnabled")),h===g.pageCount?(b.removeClass("prev","prevButtonEnabled"),b.addClass("prev","prevuttonDisabled")):(b.removeClass("prev","prevButtonDisabled"),b.addClass("prev","prevButtonEnabled"))):(1===h?(b.removeClass("prev",
"prevButtonEnabled"),b.addClass("prev","prevButtonDisabled")):(b.removeClass("prev","prevButtonDisabled"),b.addClass("prev","prevButtonEnabled")),h===g.pageCount?(b.removeClass("next","nextButtonEnabled"),b.addClass("next","nextButtonDisabled")):(b.removeClass("next","nextButtonDisabled"),b.addClass("next","nextButtonEnabled")))});b.connect(g,"onNodeMouseEnter",function(h,m){var l=arcgisonline.init;h=h.currentTarget;var f=arcgisonline.sharing.util.getUser();b.query("a",h).forEach(function(c){if(!l.galleryNodeMap[m.id]){var d=
arcgisonline.sharing.util.getHomePageGalleryLinkInfo(m),u=!1;d.href&&-1<d.href.toLowerCase().indexOf("javascript")&&m.url&&("Web Mapping Application"===m.type||"Mobile Application"===m.type||"Document Link"===m.type||"Site Application"===m.type||"Hub Site Application"===m.type||"StoryMap"===m.type)&&(d.href=m.url,u=!0);if("CityEngine Web Scene"===m.type||"Dashboard"===m.type||"Operation View"===m.type)u=!0;if(d&&d.href&&"JavaScript:void(0)"===d.href&&d.onclick)b.connect(c,"onclick",d.onclick);else{if(!f&&
"self"!==m.contentOrigin&&"public"===m.access&&d.href){var n=d.href.indexOf("/apps/");0===n?d.href="https://"+esriGeowConfig.self.portalHostname+d.href:0<d.href.indexOf(window.location.host+arcgisonline.sharing.util.getHomeAppContext())&&0<n?d.href="https://"+esriGeowConfig.self.portalHostname+d.href.substring(n):-1<d.href.indexOf(".arcgis.com")&&(n=d.href.split(".arcgis.com"),d.href="https://"+esriGeowConfig.self.portalHostname+n[n.length-1])}b.attr(c,"href",d.href)}b.attr(c,"target",u?"_blank":
"");l.galleryNodeMap[m.id]=!0}})})}})})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(b,y,r){b.DeferredList=function(a,k,e,g,h){var m=[];y.call(this);var l=this;0!==a.length||k||this.resolve([0,[]]);var f=0;r.forEach(a,function(c,d){function u(n,t){m[d]=[n,t];f++;f===a.length&&l.resolve(m)}c.then(function(n){k?l.resolve([d,n]):u(!0,n)},function(n){e?l.reject(n):u(!1,n);if(g)return null;throw n;})})};b.DeferredList.prototype=new y;b.DeferredList.prototype.gatherResults=
function(a){a=new b.DeferredList(a,!1,!0,!1);a.addCallback(function(k){var e=[];r.forEach(k,function(g){e.push(g[1])});return e});return a};return b.DeferredList})},"arcgisonline/sharing/dijit/_Empty":function(){define(["dojo/text!./templates/_Empty.html"],function(b){return b})},"esri/libs/sanitizer/Sanitizer":function(){!function(b,y){"object"==typeof exports&&"undefined"!=typeof module?module.exports=y():"function"==typeof define&&define.amd?define(y):(b=b||self).Sanitizer=y()}(this,function(){function b(la,
Aa){return la(Aa={exports:{}},Aa.exports),Aa.exports}function y(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,
"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,
"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,
"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,
"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,
"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,
"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,
"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,
"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,
"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,
"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,
"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,
"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}function r(la){var Aa=la||{},da={},fa;for(fa in Aa)da[fa]=Aa[fa];(la=da).whiteList=la.whiteList||C.whiteList;la.onAttr=la.onAttr||C.onAttr;la.onIgnoreAttr=la.onIgnoreAttr||C.onIgnoreAttr;la.safeAttrValue=la.safeAttrValue||C.safeAttrValue;this.options=la}function a(la){return la.replace(S,"\x26lt;").replace(L,"\x26gt;")}function k(la){return la.replace(Y,"\x26quot;")}function e(la){return la.replace(ca,'"')}function g(la){return la.replace(U,
function(Aa,da){return"x"===da[0]||"X"===da[0]?String.fromCharCode(parseInt(da.substr(1),16)):String.fromCharCode(parseInt(da,10))})}function h(la){return la.replace(X,":").replace(Z," ")}function m(la){for(var Aa="",da=0,fa=la.length;da<fa;da++)Aa+=32>la.charCodeAt(da)?" ":la.charAt(da);return J(Aa)}function l(la){return la=m(la=h(la=g(la=e(la))))}function f(la){return la=a(la=k(la))}function c(la,Aa){for(;Aa<la.length;Aa++){var da=la[Aa];if(" "!==da)return"\x3d"===da?Aa:-1}}function d(la,Aa){for(;0<
Aa;Aa--){var da=la[Aa];if(" "!==da)return"\x3d"===da?Aa:-1}}function u(la){return'"'===la[0]&&'"'===la[la.length-1]||"'"===la[0]&&"'"===la[la.length-1]?la.substr(1,la.length-2):la}function n(la){var Aa=la||{},da={},fa;for(fa in Aa)da[fa]=Aa[fa];(la=da).stripIgnoreTag&&(la.onIgnoreTag=ta.onIgnoreTagStripAll);la.whiteList=la.whiteList||ta.whiteList;la.onTag=la.onTag||ta.onTag;la.onTagAttr=la.onTagAttr||ta.onTagAttr;la.onIgnoreTag=la.onIgnoreTag||ta.onIgnoreTag;la.onIgnoreTagAttr=la.onIgnoreTagAttr||
ta.onIgnoreTagAttr;la.safeAttrValue=la.safeAttrValue||ta.safeAttrValue;la.escapeHtml=la.escapeHtml||ta.escapeHtml;this.options=la;!1===la.css?this.cssFilter=!1:(la.css=la.css||{},this.cssFilter=new oa(la.css))}var t,x,A=Object.prototype,B=Function.prototype.toString,F=A.hasOwnProperty,w=B.call(Object),D=A.toString,q=(t=Object.getPrototypeOf,x=Object,function(la){return t(x(la))}),v=function(la){var Aa;if(!(Aa=!la||"object"!=typeof la||"[object Object]"!=D.call(la))&&(Aa=!1,null!=la&&"function"!=typeof la.toString))try{Aa=
!!(la+"")}catch(da){}if(Aa)return!1;la=q(la);if(null===la)return!0;la=F.call(la,"constructor")&&la.constructor;return"function"==typeof la&&la instanceof la&&B.call(la)==w},z=/javascript\s*:/gim,C={whiteList:y(),getDefaultWhiteList:y,onAttr:function(la,Aa,da){},onIgnoreAttr:function(la,Aa,da){},safeAttrValue:function(la,Aa){return z.test(Aa)?"":Aa}},E=function(la){return String.prototype.trim?la.trim():la.replace(/(^\s*)|(\s*$)/g,"")},G=function(la){return String.prototype.trimRight?la.trimRight():
la.replace(/(\s*$)/g,"")},H=function(la,Aa){function da(){if(!P){var Qa=E(la.slice(xa,Fa)),va=Qa.indexOf(":");if(-1!==va){var R=E(Qa.slice(0,va));va=E(Qa.slice(va+1));R&&(Qa=Aa(xa,ba.length,R,va,Qa))&&(ba+=Qa+"; ")}}xa=Fa+1}";"!==(la=G(la))[la.length-1]&&(la+=";");for(var fa=la.length,P=!1,xa=0,Fa=0,ba="";Fa<fa;Fa++){var Sa=la[Fa];if("/"===Sa&&"*"===la[Fa+1]){Sa=la.indexOf("*/",Fa+2);if(-1===Sa)break;xa=(Fa=Sa+1)+1;P=!1}else"("===Sa?P=!0:")"===Sa?P=!1:";"===Sa?P||da():"\n"===Sa&&da()}return E(ba)};
r.prototype.process=function(la){if(!(la=(la=la||"").toString()))return"";var Aa=this.options,da=Aa.whiteList,fa=Aa.onAttr,P=Aa.onIgnoreAttr,xa=Aa.safeAttrValue;return H(la,function(Fa,ba,Sa,Qa,va){var R=da[Sa],ia=!1;if(!0===R?ia=R:"function"==typeof R?ia=R(Qa):R instanceof RegExp&&(ia=R.test(Qa)),!0!==ia&&(ia=!1),Qa=xa(Sa,Qa)){var ja;Fa={position:ba,sourcePosition:Fa,source:va,isWhite:ia};return ia?null==(ja=fa(Sa,Qa,Fa))?Sa+":"+Qa:ja:null==(ja=P(Sa,Qa,Fa))?void 0:ja}})};A=b(function(la,Aa){for(var da in(Aa=
la.exports=function(fa,P){return(new r(P)).process(fa)}).FilterCSS=r,C)Aa[da]=C[da]});var K=(A.FilterCSS,function(la,Aa){var da;if(Array.prototype.indexOf)return la.indexOf(Aa);var fa=0;for(da=la.length;fa<da;fa++)if(la[fa]===Aa)return fa;return-1}),I=function(la,Aa,da){var fa;if(Array.prototype.forEach)return la.forEach(Aa,da);var P=0;for(fa=la.length;P<fa;P++)Aa.call(da,la[P],P,la)},J=function(la){return String.prototype.trim?la.trim():la.replace(/(^\s*)|(\s*$)/g,"")},Q=function(la){return(la=/\s|\n|\t/.exec(la))?
la.index:-1},V=A.getDefaultWhiteList,O=new A.FilterCSS,S=/</g,L=/>/g,Y=/"/g,ca=/&quot;/g,U=/&#([a-zA-Z0-9]*);?/gim,X=/&colon;?/gim,Z=/&newline;?/gim,N=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,aa=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,ka=/u\s*r\s*l\s*\(.*/gi,pa=/\x3c!--[\s\S]*?--\x3e/g,ta={whiteList:{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop",
"preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],
strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls loop preload src height width".split(" ")},getDefaultWhiteList:function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay",
"controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],
sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls loop preload src height width".split(" ")}},onTag:function(la,Aa,da){},onIgnoreTag:function(la,Aa,da){},onTagAttr:function(la,Aa,da){},onIgnoreTagAttr:function(la,Aa,da){},safeAttrValue:function(la,
Aa,da,fa){if(da=l(da),"href"===Aa||"src"===Aa){if("#"===(da=J(da)))return"#";if("http://"!==da.substr(0,7)&&"https://"!==da.substr(0,8)&&"mailto:"!==da.substr(0,7)&&"tel:"!==da.substr(0,4)&&"#"!==da[0]&&"/"!==da[0])return""}else if("background"===Aa){if(N.lastIndex=0,N.test(da))return""}else if("style"===Aa){if((aa.lastIndex=0,aa.test(da))||(ka.lastIndex=0,ka.test(da)&&(N.lastIndex=0,N.test(da))))return"";!1!==fa&&(da=(fa=fa||O).process(da))}return da=f(da)},escapeHtml:a,escapeQuote:k,unescapeQuote:e,
escapeHtmlEntities:g,escapeDangerHtml5Entities:h,clearNonPrintableCharacter:m,friendlyAttrValue:l,escapeAttrValue:f,onIgnoreTagStripAll:function(){return""},StripTagBody:function(la,Aa){"function"!=typeof Aa&&(Aa=function(){});var da=!Array.isArray(la),fa=[],P=!1;return{onIgnoreTag:function(xa,Fa,ba){return da||-1!==K(la,xa)?ba.isClosing?(fa.push([!1!==P?P:ba.position,ba.position+10]),P=!1,"[/removed]"):(P||(P=ba.position),"[removed]"):Aa(xa,Fa,ba)},remove:function(xa){var Fa="",ba=0;return I(fa,
function(Sa){Fa+=xa.slice(ba,Sa[0]);ba=Sa[1]}),Fa+=xa.slice(ba)}}},stripCommentTag:function(la){return la.replace(pa,"")},stripBlankChar:function(la){la=la.split("");return(la=la.filter(function(Aa){Aa=Aa.charCodeAt(0);return 127!==Aa&&(!(31>=Aa)||10===Aa||13===Aa)})).join("")},cssFilter:O,getDefaultCSSWhiteList:V},Ba=/[^a-zA-Z0-9_:\.\-]/gim,Da={parseTag:function(la,Aa,da){var fa="",P=0,xa=!1,Fa=!1,ba=0,Sa=la.length,Qa="",va="";for(ba=0;ba<Sa;ba++)va=la.charAt(ba),!1===xa?"\x3c"===va&&(xa=ba):!1===
Fa?"\x3c"===va?(fa+=da(la.slice(P,ba)),P=xa=ba):"\x3e"===va?(fa+=da(la.slice(P,xa)),P=va=la.slice(xa,ba+1),Qa=Q(P),P=-1===Qa?P.slice(1,-1):P.slice(1,Qa+1),Qa=("/"===(P=J(P).toLowerCase()).slice(0,1)&&(P=P.slice(1)),"/"===P.slice(-1)&&(P=P.slice(0,-1)),P),fa+=Aa(xa,fa.length,Qa,va,"\x3c/"===va.slice(0,2)),P=ba+1,xa=!1):'"'!==va&&"'"!==va||"\x3d"!==la.charAt(ba-1)||(Fa=va):va===Fa&&(Fa=!1);return P<la.length&&(fa+=da(la.substr(P))),fa},parseAttr:function(la,Aa){function da(Qa,va){1>(Qa=(Qa=J(Qa)).replace(Ba,
"").toLowerCase()).length||(Qa=Aa(Qa,va||""))&&P.push(Qa)}for(var fa=0,P=[],xa=!1,Fa=la.length,ba=0;ba<Fa;ba++){var Sa=la.charAt(ba);if(!1!==xa||"\x3d"!==Sa)if(!1===xa||ba!==fa||'"'!==Sa&&"'"!==Sa||"\x3d"!==la.charAt(ba-1))/\s|\n|\t/.test(Sa)&&((la=la.replace(/\s|\n|\t/g," "),!1===xa)?-1===(Sa=c(la,ba))?(da(J(la.slice(fa,ba))),xa=!1,fa=ba+1):ba=Sa-1:-1===(Sa=d(la,ba-1))&&(da(xa,u(J(la.slice(fa,ba)))),xa=!1,fa=ba+1));else{if(-1===(Sa=la.indexOf(Sa,ba+1)))break;da(xa,J(la.slice(fa+1,Sa)));xa=!1;fa=
(ba=Sa)+1}else xa=la.slice(fa,ba),fa=ba+1}return fa<la.length&&(!1===xa?da(la.slice(fa)):da(xa,u(J(la.slice(fa))))),J(P.join(" "))}},oa=A.FilterCSS,ra=Da.parseTag,ya=Da.parseAttr;n.prototype.process=function(la){if(!(la=(la=la||"").toString()))return"";var Aa=this.options,da=Aa.whiteList,fa=Aa.onTag,P=Aa.onIgnoreTag,xa=Aa.onTagAttr,Fa=Aa.onIgnoreTagAttr,ba=Aa.safeAttrValue,Sa=Aa.escapeHtml,Qa=this.cssFilter;Aa.stripBlankChar&&(la=ta.stripBlankChar(la));Aa.allowCommentTag||(la=ta.stripCommentTag(la));
var va=!1;Aa.stripIgnoreTagBody&&(va=ta.StripTagBody(Aa.stripIgnoreTagBody,P),P=va.onIgnoreTag);la=ra(la,function(R,ia,ja,T,ha){ia={sourcePosition:R,position:ia,isClosing:ha,isWhite:da.hasOwnProperty(ja)};if(null!=(R=fa(ja,T,ia)))return R;if(ia.isWhite){if(ia.isClosing)return"\x3c/"+ja+"\x3e";R=function(qa){var ua=Q(qa);if(-1===ua)return{html:"",closing:"/"===qa[qa.length-2]};ua="/"===(qa=J(qa.slice(ua+1,-1)))[qa.length-1];return ua&&(qa=J(qa.slice(0,-1))),{html:qa,closing:ua}}(T);var na=da[ja];ia=
ya(R.html,function(qa,ua){var za,Ea=-1!==K(na,qa);return null==(za=xa(ja,qa,ua,Ea))?Ea?(ua=ba(ja,qa,ua,Qa))?qa+'\x3d"'+ua+'"':qa:null==(za=Fa(ja,qa,ua,Ea))?void 0:za:za});T="\x3c"+ja;return ia&&(T+=" "+ia),R.closing&&(T+=" /"),T+="\x3e"}return null==(R=P(ja,T,ia))?Sa(T):R},Sa);return va&&(la=va.remove(la)),la};var wa=b(function(la,Aa){function da(P,xa){return(new n(xa)).process(P)}for(var fa in(Aa=la.exports=da).filterXSS=da,Aa.FilterXSS=n,ta)Aa[fa]=ta[fa];for(fa in Da)Aa[fa]=Da[fa];"undefined"!=
typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=la.exports)});wa.filterXSS;wa.FilterXSS;return function(){function la(Aa,da){var fa,P=this;this.arcgisWhiteList={a:["href","target","style"],img:"src width height border alt style".split(" "),video:"autoplay controls height loop muted poster preload width".split(" "),audio:["autoplay","controls","loop","muted","preload"],source:["media","src","type"],span:["style"],table:"width height cellpadding cellspacing border style".split(" "),
div:["style","align"],font:["size","color","style"],tr:["height","valign","align","style"],td:"height width valign align colspan rowspan nowrap style".split(" "),th:"height width valign align colspan rowspan nowrap style".split(" "),p:["style"],b:[],strong:[],i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]};this.allowedProtocols="http https mailto iform tel flow lfmobile arcgis-navigator arcgis-appstudio-player arcgis-survey123 arcgis-collector arcgis-workforce arcgis-explorer arcgis-trek2there mspbi comgooglemaps pdfefile pdfehttp pdfehttps boxapp boxemm awb awbs gropen radarscope".split(" ");
this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(xa,Fa,ba,Sa){return"a"===xa&&"href"===Fa||("img"===xa||"source"===xa)&&"src"===Fa?P.sanitizeUrl(ba):wa.safeAttrValue(xa,Fa,ba,Sa)}};Aa&&!da?fa=Aa:Aa&&da?(fa=Object.create(this.arcgisFilterOptions),Object.keys(Aa).forEach(function(xa){"whiteList"===xa?fa.whiteList=P._extendObjectOfArrays([P.arcgisWhiteList,Aa.whiteList||{}]):fa[xa]=Aa[xa]})):(fa=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList;this.xssFilterOptions=
fa;this._xssFilter=new wa.FilterXSS(fa)}return la.prototype.sanitize=function(Aa,da){switch(void 0===da&&(da={}),typeof Aa){case "number":return isNaN(Aa)||!isFinite(Aa)?null:Aa;case "boolean":return Aa;case "string":return this._xssFilter.process(Aa);case "object":return this._iterateOverObject(Aa,da);default:if(!da.allowUndefined||void 0!==Aa)return null}},la.prototype.sanitizeUrl=function(Aa){var da=this._trim(Aa.substring(0,Aa.indexOf(":")));return"/"===Aa||"#"===Aa||"#"===Aa[0]||-1<this.allowedProtocols.indexOf(da.toLowerCase())?
wa.escapeAttrValue(Aa):""},la.prototype.validate=function(Aa,da){void 0===da&&(da={});da=this.sanitize(Aa,da);return{isValid:Aa===da,sanitized:da}},la.prototype._extendObjectOfArrays=function(Aa){var da={};return Aa.forEach(function(fa){Object.keys(fa).forEach(function(P){Array.isArray(fa[P])&&Array.isArray(da[P])?da[P]=da[P].concat(fa[P]):da[P]=fa[P]})}),da},la.prototype._iterateOverObject=function(Aa,da){var fa=this;void 0===da&&(da={});try{var P=!1,xa=void 0;if(Array.isArray(Aa))xa=Aa.reduce(function(Fa,
ba){var Sa=fa.validate(ba,da);return Sa.isValid?Fa.concat([ba]):(P=!0,Fa.concat([Sa.sanitized]))},[]);else{if(!v(Aa))return da.allowUndefined&&void 0===Aa?void 0:null;xa=Object.keys(Aa).reduce(function(Fa,ba){var Sa=Aa[ba],Qa=fa.validate(Sa,da);return Qa.isValid?Fa[ba]=Sa:(P=!0,Fa[ba]=Qa.sanitized),Fa},{})}return P?xa:Aa}catch(Fa){return null}},la.prototype._trim=function(Aa){return String.prototype.trim?Aa.trim():Aa.replace(/(^\s*)|(\s*$)/g,"")},la}()})},"arcgisonline/pages/utils/organization":function(){define("require exports tslib esri/request dojo/Deferred dojo/cookie dojo/json dojo/string dojo/i18n!../../nls/arcgisonline dojo/io-query dojo/_base/kernel moment/moment ../../esriGeowConfig ./formatters ../utils/arrays ../../sharing/geow/Roles ../../sharing/util ../../sharing/geow/Geow".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);u=r.__importDefault(u);n=r.__importDefault(n);t=r.__importDefault(t);x=r.__importDefault(x);A=r.__importDefault(A);var B=b.toUrl("arcgisonline/sharing/dijit")+"/css/images/app-icons/";return function(){function F(){}F.isMobile=
function(){return 720>=window.innerWidth};F.getCompatibleUserTypes=function(w,D,q){var v=this,z=[];D.forEach(function(C){var E=!1,G=!1;w.isPro&&C.apps.forEach(function(J){J.isAppBundle||J.entitlements.forEach(function(Q){if(-1!==v._proKeys.indexOf(Q)){-1!==v._proKeys.indexOf(w.key)&&(G=!0);var V=null===q||void 0===q?void 0:q.filter(function(O){return O.key===Q})[0];V&&v.isProExtension(w.key)&&-1!==V.extNotSupported.indexOf(w.key)&&(E=!0)}})});var H=!1,K=!1,I=!1;C.apps.forEach(function(J){w.isAppBundle&&
J.isAppBundle&&J.id===w.itemId&&(H=!0);w.isAppBundle||J.isAppBundle||J.id!==w.itemId||-1===J.entitlements.indexOf(w.key)?!w.isAppBundle&&J.isAppBundle&&J.apps.some(function(V){return-1!==V.entitlements.indexOf(w.key)})&&(K=!0):K=!0;var Q=w.requiredListings;0<(null===Q||void 0===Q?void 0:Q.length)?J.isAppBundle?J.apps.some(function(V){return-1<Q.indexOf(V.id)})&&(I=!0):-1<Q.indexOf(J.id)&&(I=!0):I=!0});!(-1===w.allowedLevels.indexOf(C.level)&&0!==w.allowedLevels.length||E||G||H||K)&&0<C.maxUsers&&
I&&!C.supportsSignInOnlyFromUTApps&&z.push(C)});return z};F.userTypePassesRequired=function(w,D){var q=D.requiredListings;if(!q||0===q.length)return!0;var v=!1;return w.apps.some(function(z){z.isAppBundle?z.apps.some(function(C){return-1<q.indexOf(C.id)})&&(v=!0):-1<q.indexOf(z.id)&&(v=!0);return v})};F.checkPasswordStrength=function(w){return x.default.request({url:x.default.getSecureUrl(d.default.restBaseUrl+"portals/checkPasswordStrength"),content:{password:w}},{usePost:!0})};F.getSubscriptionInfo=
function(){return x.default.request({url:x.default.getSecureUrl(d.default.restBaseUrl+"portals/self/subscriptionInfo")})};F.filterRoles=function(w,D,q,v,z){var C=[],E=r.__spreadArrays(["portal:user:joinNonOrgGroup","portal:user:viewTracks"],D.privileges);"11"===v&&E.push("features:user:edit");w.forEach(function(G){if(q||!q&&D&&G.privileges&&!t.default.exceedsRolePrivileges(E,G.privileges))z?C.push(G):C.push({name:G.name,role:G.id,description:G.description})});return C};F.alreadyIncludedInUserType=
function(w,D){var q,v=0<w.apps.filter(function(z){return D.itemId===z.id}).length;w.apps.forEach(function(z){z.isAppBundle&&z.apps.forEach(function(C){C.id===D.itemId&&(v=!0)})});(null!==(q=w.extensions)&&void 0!==q?q:[]).some(function(z){(z=z.id===D.itemId)&&(v=!0);return z});return v};F.convertAppBundletoEntitlement=function(w){return w.map(function(D){return{key:D.appBundleItemId,itemId:D.appBundleItemId,title:D.name,used:D.assigned,total:D.maxUsers,isAppBundle:!0,apps:D.apps,allowedLevels:D.allowedLevels,
usernames:D.usernames}})};F.transformAppBundleApps=function(w,D,q){var v=this,z=[];w.forEach(function(C){var E,G,H;if(1>=(null===(E=C.entitlements)||void 0===E?void 0:E.length)){if(E=((null===(G=v._appSwitcherResponse)||void 0===G?void 0:G.apps)||[]).filter(function(K){return K.entitlement===C.entitlements[0]})[0],q||null===E||void 0===E||!E.hidden)E&&(C.title=E.shortLabel||E.title||C.title||""),z.push(C)}else null===(H=C.entitlements)||void 0===H?void 0:H.forEach(function(K){var I,J=((null===(I=
v._appSwitcherResponse)||void 0===I?void 0:I.apps)||[]).filter(function(Q){return K&&Q.entitlement===K})[0];(null===J||void 0===J?0:J.title)&&!J.hidden&&(I=r.__assign(r.__assign({},C),{title:J.shortLabel||J.title}),z.push(I))})});return z};F.initLicensesConfig=function(w){var D=this,q=new k.default;w||q.resolve();this.queryAppSwitcherItem(w).then(function(v){var z;0<(null===(z=v.items)||void 0===z?void 0:z.length)?(v=v.items[0],D.licensesConfigItem=v,D.getAppSwitcherConfig(v,w).then(function(){q.resolve()})):
q.resolve()});return q};F.clearLicensesConfigCache=function(){this._appSwitcherConfigDfd=this._appSwitcherResponse=this._appSwitcherSearchDfd=this._appSwitcherSearchResponse=void 0};F.queryAppSwitcherItem=function(w){var D=this,q=new k.default;this._appSwitcherSearchResponse?q.resolve(this._appSwitcherSearchResponse):this._appSwitcherSearchDfd?this._appSwitcherSearchDfd.then(function(v){q.resolve(v)}):(this._appSwitcherSearchDfd=q,w.queryItems(d.default.licensesItemQuery,!0).then(function(v){D._appSwitcherSearchResponse=
v;q.resolve(v)},function(v){D._appSwitcherSearchResponse={};q.resolve({})}));return q};F.getAppSwitcherConfig=function(w,D){var q=this,v=new k.default;this._appSwitcherResponse?v.resolve(this._appSwitcherResponse):this._appSwitcherConfigDfd?this._appSwitcherConfigDfd.then(function(z){v.resolve(z)}):(this._appSwitcherConfigDfd=v,a.default({url:w.itemDataUrl,content:{f:"json"}}).then(function(z){q._appSwitcherResponse=z;q.licensesConfig=z;z.appSwitcher&&(q._apps=z.appSwitcher.apps);v.resolve(z)},function(z){q._appSwitcherResponse=
{};v.resolve({})}));return v};F.isEntitlement=function(w){return void 0!==w.key||void 0!==w.itemId};F.getAppIconDir=function(){return B};F.getAppIcon=function(w,D){function q(V){G.imagePath="svg-app-icon.svg";G.abbr=V.title.substring(0,1);G.showAbbr=!0;G.abbrClass="";G.ordinal=1;G.shapeClass=""}function v(V){var O=J.filter(function(S){var L,Y;return S.entitlement&&1===(null===(L=V.entitlements)||void 0===L?void 0:L.length)&&S.entitlement===(null===(Y=V.entitlements)||void 0===Y?void 0:Y[0])||S.title&&
S.title===V.title||S.shortLabel&&S.shortLabel===V.title})[0];-1!==V.title.indexOf("ArcGIS Pro")?(G.imagePath="arcgis-pro.png",G.ordinal=0):(null===O||void 0===O?0:O.image)?(G.imagePath=""+Q+O.image,G.ordinal=0,H=!0):O&&!O.image?q(V):(G.imagePath="fieldmapsmobile"===V.id?B+"fieldmaps.png":I?""+Q+V.title.replace(/\s/g,"_")+"/icon.png":B+"generic-app.png",G.shapeClass="not-hex",H=!0)}function z(V){var O,S,L=J.filter(function(Y){return Y.entitlement&&Y.entitlement===V.key||Y.title&&Y.title===V.title||
Y.shortLabel&&Y.shortLabel===V.title})[0];V.isPro||-1!==V.title.indexOf("ArcGIS Pro")?(G.imagePath="arcgis-pro.png",G.ordinal=0):(null===L||void 0===L?0:L.image)?(G.imagePath=""+Q+L.image,G.ordinal=0,H=!0):L&&!L.image?q(V):(G.shapeClass="not-hex",V.icon?(G.imagePath=d.default.restBaseUrl+"portals/self/resources/"+V.icon+"?token\x3d"+d.default.userInfo.token,H=!0,G.ordinal=2):(null===(S=null===(O=V.properties)||void 0===O?void 0:O.appSwitcher)||void 0===S?0:S.image)?(G.imagePath="https://"+d.default.self.portalHostname+
"/sharing/rest/content/items/"+V.itemId+"/resources/"+V.properties.appSwitcher.image+"?token\x3d"+d.default.userInfo.token,H=!0,G.ordinal=2):"esri"===V.owner||"esri_apps"===V.owner||V.isAppBundle?(G.imagePath=I?""+Q+V.title.replace(/\s/g,"_")+"/icon.png":B+"generic-app.png",H=!0):(G.imagePath=D,G.showAbbr=!0,G.abbrClass="",G.ordinal=3))}var C,E,G={abbrClass:"hide",showAbbr:!1,abbr:"",shapeClass:""},H=!1;if("User License Type Extension"===w.type)return r.__assign(r.__assign({},G),{imagePath:B+"user-type-extension.png",
ordinal:0});if("Application SDK"===w.type)return r.__assign(r.__assign({},G),{imagePath:B+"runtime.png",ordinal:0});if(w.isExtension)return r.__assign(r.__assign({},G),{imagePath:B+"pro-extension.png",ordinal:0});var K=this._getAppSwitcherIcon(w,D),I=this.licensesConfigItem,J=(null===(C=this._appSwitcherResponse)||void 0===C?void 0:C.apps)||[];D&&0!==D.length||(D="svg-app-circle.svg");var Q=d.default.restBaseUrl+"content/items/"+(null===(E=this.licensesConfigItem)||void 0===E?void 0:E.id)+"/resources/";
K?G=K:this.isEntitlement(w)?z(w):v(w);H||(G.imagePath=B+G.imagePath);G.isAppBundle=w.isAppBundle;return G};F.getEmptyAppIcon=function(){return B+"svg-app-icon.svg"};F._getAppSwitcherIcon=function(w,D){var q=this;if(this._apps){D="svg-app-icon.svg";var v=this._apps.filter(function(C){var E=C.title&&C.title===w.title;q.isEntitlement(w)&&!E&&(E=C.itemId&&C.itemId===w.itemId);return E})[0];if(v){var z={};v.image?(z.imagePath=v.image,z.ordinal=0,z.abbrClass="hide",z.showAbbr=!1,z.abbr=""):(z.imagePath=
D,z.abbr=v.abbr,z.showAbbr=!0,z.abbrClass="",z.ordinal=1);z.shapeClass=""}return z}};F.getUserTypesContainingPro=function(w){return w.filter(function(D){return D.apps?D.apps.some(function(q){return"ArcGIS Pro"===q.title}):!1})};F.userTypeIncludesPro=function(w){var D;return null===(D=null===w||void 0===w?void 0:w.apps)||void 0===D?void 0:D.some(function(q){return"ArcGIS Pro"===q.title})};F.getProFromUserTypes=function(w){var D;w.forEach(function(q){q.apps&&(D=n.default.find(q.apps,function(v){if("ArcGIS Pro"===
v.title)return v}))});return D};F.getProFromAppBundles=function(w){var D;w.forEach(function(q){D=n.default.find(q.apps,function(v){if("ArcGIS Pro"===v.title)return v})});return D};F.getProExtensions=function(w){var D=this;return w.filter(function(q){return-1!==D._proExtensionKeys.indexOf(q.key)})};F.isProExtension=function(w){return-1!==this._proExtensionKeys.indexOf(w)};F.isProKey=function(w){return-1!==this._proKeys.indexOf(w)};F.filterOutProExtensions=function(w){var D=this;return w.filter(function(q){return-1===
D._proExtensionKeys.indexOf(q.key)})};F.getProEntitlements=function(w){var D=this;w=w.filter(function(q){return q.isPro&&-1<D._proKeys.indexOf(q.key)});w.forEach(function(q){"desktopBasicN"===q.key?q.ordinal=0:"desktopStdN"===q.key?q.ordinal=1:"desktopAdvN"===q.key&&(q.ordinal=2)});w.sort(function(q,v){return q.ordinal>v.ordinal?1:q.ordinal<v.ordinal?-1:0});return w};F.getUserRole=function(w){var D;return null!==(D=null===w||void 0===w?void 0:w.userRole)&&void 0!==D?D:{}};F.shouldShowMFA=function(w,
D){D=this.getUserRole(D).isAdmin();var q=!1;!w.isPortal&&w.subscriptionInfo?(q="trial developer"===w.subscriptionInfo.type.toLowerCase()||"developer subscription"===w.subscriptionInfo.type.toLowerCase(),q=D&&d.default.multiFactorEnabled&&w.mfaEnabled&&!q):q=w.isPortal&&w.supportsEmail&&D&&w.mfaEnabled;return q};F.canViewLastLogin=function(w){w=this.getUserRole(w);return w.isAdmin()||w.canViewUsers()};F.canLoadLicensesUI=function(w){w=this.getUserRole(w);return w.isAdmin()||w.canViewOrgUsers()&&w.canManageLicenses()};
F.canLoadMembersCard=function(w){w=this.getUserRole(w);return w.isAdmin()||w.canViewUsers()};F.canManageMembers=function(w){w=this.getUserRole(w);return w.isAdmin()||w.canViewUsers()&&(w.canUpdateUsers()||w.canDeleteUsers()||w.canChangeUserRoles()||w.canManageLicenses())};F.canGetUserTypes=function(w){w=this.getUserRole(w);return w.isAdmin()||w.canInviteUsers()||w.canManageRoles()||w.canManageLicenses()};F.canGetUsersGroups=function(w){w=this.getUserRole(w);return w.isAdmin()||w.canViewUsers()&&w.canViewOrgGroups()};
F.canGetLicenseTypes=function(w){w=this.getUserRole(w);return w.isAdmin()||w.canManageLicenses()||w.canInviteUsers()};F.canSelectMembers=function(w){w=this.getUserRole(w);return w.isAdmin()||w.canViewOrgUsers()&&(w.canDisableUsers()||w.canManageLicenses()||w.canAssignUsersToOrgGroups()||w.canReassignOrgItems())};F.canUseMemberActions=function(w){w=this.getUserRole(w);return w.isAdmin()||w.canUpdateUsers()||w.canDeleteUsers()||w.canDisableUsers()||w.canChangeUserRoles()};F.checkUserCultureSetting=
function(w,D){var q=new k.default,v=l.default.queryToObject(window.location.search.substring(1)),z=function(C){var E,G=-1<["hi"].indexOf(C);!C||f.default.locale===C.toLowerCase()||G||v.locale?q.resolve():(G=x.default.getCookie("esri_auth"),G.username=G.username||G.email,(null===G||void 0===G?void 0:G.username)===w.username&&(G.culture&&(null===(E=G.culture)||void 0===E?void 0:E.toLowerCase())===C.toLowerCase()||(G.culture=C.toLowerCase(),A.default.setAuthCookie(G),e.default("arcgisLocale",G.culture)),
q.resolve(),window.location.reload()))};D?x.default.request({url:d.default.restBaseUrl+"community/users/"+w.username}).then(function(C){return z(C.culture)},function(){return q.resolve()}):z(w.culture);return q};F.hasModernHomePageEnabled=function(w){var D,q,v;return w.isPortal?"modern"===(null===(q=w.portalProperties)||void 0===q?void 0:q.homePage)||"modernOnly"===(null===(v=w.portalProperties)||void 0===v?void 0:v.homePage):"modern"===(null===(D=w.portalProperties)||void 0===D?void 0:D.homePage)||
this.isOrgPastLegacyHomePageCutOffDate(w)};F.isOrgPastLegacyHomePageCutOffDate=function(w){var D=(new Date("June 30, 2020")).getTime();return w.isPortal?!1:w.created>=D};F.isEnterpriseSetToModernHomePageOnly=function(w){var D;return w.isPortal&&"modernOnly"===(null===(D=w.portalProperties)||void 0===D?void 0:D.homePage)};F.hasLegacyHomePageDefaults=function(w){var D,q=null===(D=w.rotatorPanels)||void 0===D?void 0:D[0];D=!w.homePageFeaturedContent;var v=!w.description;w=!w.backgroundImage;q=!q||"banner-2"===
(null===q||void 0===q?void 0:q.id)&&-1<q.innerHTML.indexOf('\x3cimg src\x3d"images/banner-2.jpg" style\x3d"border-radius:0 0 10px 10px; margin-top:0; width:960px;height:180px;" /\x3e\x3cdiv style\x3d"position: absolute; bottom: 80px; left:80px; max-height:65px; width: 660px; margin:0;"\x3e\x3cimg src\x3d"')&&-1<q.innerHTML.indexOf(' class\x3d"esriFloatLeading esriTrailingMargin025" style\x3d"margin-bottom:0;max-height:100px;" /\x3e\x3cspan style\x3d"position:absolute;bottom:0;margin-bottom:0;line-height:normal; font-family:HelveticaNeue,Verdana; font-weight:600;font-size:32px;color:#369;"\x3e')&&
-1<(null===q||void 0===q?void 0:q.innerHTML.indexOf("\x3c/span\x3e\x3c/div\x3e"));return v&&w&&q&&D};F.neverLoggedInLabel=function(w,D){return h.default.substitute(m.default.myOrganization.notYetTooltip,{date:D})};F.lastLoginDate=function(w){var D=c.default(new Date).diff(c.default(w),"days"),q=c.default(new Date).isSame(w,"day");return q?m.default.filters.today:!q&&2>D?m.default.myOrganization.membersTab.yesterday:0===w||-1===w||1E3===w?m.default.myOrganization.notYet:u.default.fullDate(w)};F.disabledStyle=
function(w){return w?"org-member-disabled":""};F.disabledStyleAllowEvents=function(w){return w?"org-member-disabled__allow-events":""};F.disabledLinkClass=function(w){return w?"org-member-disable-link":""};F.shouldShowOnboard=function(w,D){var q=x.default.getCookie("esri_onboard",!0)||{},v=x.default.isPortal(),z=!!d.default.isDebug;z=v||z?document.domain:".arcgis.com";D||(D=new Date("June 30, 2019"));var C=!q[w]&&new Date<D;!v&&q[w]&&new Date>=D&&(delete q[w],e.default("esri_onboard",g.default.stringify(q),
{expires:new Date((new Date).getTime()+31556926E3),path:"/",domain:z}));return C};F.createOnboardCookie=function(w){var D,q=x.default.getCookie("esri_onboard")||{},v=x.default.isPortal(),z=!!d.default.isDebug;v=v||z?document.domain:".arcgis.com";e.default("esri_onboard",g.default.stringify(r.__assign(r.__assign({},q),(D={},D[w]=!0,D))),{expires:new Date((new Date).getTime()+31556926E3),path:"/",domain:v})};F.createCookie=function(w,D,q,v){var z=x.default.isPortal(),C=!!d.default.isDebug;v=v||!d.default.self.urlKey?
".arcgis.com":d.default.self.urlKey+"."+d.default.self.customBaseUrl;z=z||C?document.domain:v;q*=864E5;e.default(w,g.default.stringify(r.__assign({},D)),{expires:new Date((new Date).getTime()+q),path:"/",domain:z})};F.isSearchTermValid=function(w,D){var q=/^[^%()';]+$/,v=/^[a-zA-Z0-9@._]+$/;return("username"===D?v:q).test(w)||0===w.length};F.generateSearchErrorMessage=function(w,D){return{firstname:m.default.myOrganization.restrictedFirstNameCharacters,lastname:m.default.myOrganization.restrictedLastNameCharacters,
username:m.default.createAccount.errors.restrictedCharacters,fullname:m.default.myOrganization.restrictedFullNameCharacters}[D]||m.default.controlBar.invalidSyntax};F.addBuiltInRolesAndTranslate=function(w,D){w=r.__spreadArrays(w,[{id:"org_publisher",name:m.default.myOrganization.formatters.rolePublisher},{id:"org_admin",name:m.default.myOrganization.formatters.roleAdmin},{id:"org_user",name:m.default.myOrganization.formatters.roleUser}]);w.forEach(function(q){var v=D.filter(function(z){return z.id===
q.id})[0];v&&(q.name=v.name)});return w};F.highlight=function(w,D){D&&(w=D.textContent.replace(new RegExp("("+w+")","ig"),'\x3cspan class\x3d"org-settings__search-highlight"\x3e$1\x3c/span\x3e'),D.innerHTML=w)};F.categorizeEntitlements=function(w){var D=this.getProExtensions(w);w=this.filterOutProExtensions(w);var q=this.getProEntitlements(w),v=[],z=[],C=[],E=[];w.forEach(function(G){"User License Type Extension"===G.type?C.push(G):"Application SDK"===G.type?E.push(G):G.type&&-1<G.type.indexOf("Application")?
v.push(G):G.type&&-1===G.type.indexOf("Applcation")&&z.push(G)});return{pro:q,proExtensions:D,apps:v,data:z,userTypeExtensions:C,runtime:E}};F.pickRandomHomePageStockImage=function(){return""+Math.floor(2*Math.random()+1)};F.getTitleColorBasedOnStockImage=function(w){return n.default.includes(["4","5","6"],w)?"black":"white"};F.isAdminRole=function(w){var D=!1;w.privileges?D=w.privileges.some(function(q){return-1<q.indexOf(":admin")}):"org_admin"===w.id&&(D=!0);return D};F.filterIncludedEntitlements=
function(w){var D;return w.entitlements&&null!==(D=w.licenseType)&&void 0!==D&&D.apps?w.entitlements.filter(function(q){var v,z=!1;z=null===(v=w.licenseType)||void 0===v?void 0:v.apps.some(function(C){return C.isAppBundle?C.apps.some(function(E){return-1<E.entitlements.indexOf(q)}):-1<C.entitlements.indexOf(q)});return!z}):w.entitlements};F.getAppTitle=function(w){var D,q=((null===(D=this._appSwitcherResponse)||void 0===D?void 0:D.apps)||[]).filter(function(v){return v.entitlement===w.entitlements[0]})[0];
return 1===w.entitlements.length?(null===q||void 0===q?void 0:q.title)||w.title||"":w.title||""};F.getClearEmptyFieldsStateForHelperService=function(w){return""===w?!0:void 0};F.adjustSanitizerForOrgSettingsUse=function(w){Object.keys(w._xssFilter.cssFilter.options.whiteList).forEach(function(D){w._xssFilter.cssFilter.options.whiteList[D]=!0});w._xssFilter.cssFilter.options.whiteList["-webkit-border-radius"]=!0;w._xssFilter.cssFilter.options.whiteList["-moz-border-radius"]=!0;w._xssFilter.cssFilter.options.whiteList["-o-border-radius"]=
!0};F.sanitizeUrlOrgOverride=function(w){return w};F._proKeys=["desktopBasicN","desktopStdN","desktopAdvN"];F._proExtensionKeys="spatialAnalystN 3DAnalystN networkAnalystN geostatAnalystN dataReviewerN workflowMgrN dataInteropN defenseN FMVN businessBasicN businessStdN roadsHighwaysN publisherN productionMapN schematicsN trackingN aviationN airportsN maritimeN bathymetryN smpNAmericaN smpEuropeN smpAsiaPacificN smpMidEAfricaN smpLAmericaN smpJapanN LocRefDesktopN imageAnalystN locateXTN".split(" ");
F.orgSettingsSanitizerParams={whiteList:{a:"id class role target rel title".split(" "),blockquote:["cite","style"],center:[],col:["span","style","width","height"],colgroup:["style"],div:["align","id","class","role"],font:["face","class"],h1:["id","style"],h2:["id","style"],h3:["id","style"],h4:["id","style"],h5:["id","style"],iframe:["class","height","width","src"],img:["class"],input:["id","checked","class","name","type"],li:["style"],link:["href","rel","type"],meta:["name","content","http-equiv",
"charset"],p:["id","class"],span:["id","class","role"],strike:[],strong:["style"],style:[],sub:[],sup:[],table:["id","background"],td:["background"],tdbody:[],thead:[],title:[],address:["id","class","style"],article:["id","class","style"],aside:["id","class","style"],details:["id","class","style"],figcaption:["id","class","style"],figure:["id","class","style"],footer:["id","class","style"],header:["id","class","style"],main:["id","class","style"],mark:["id","class","style"],nav:["id","class","style"],
section:["id","class","style"],summary:["id","class","style"],time:["id","class","style"]}};return F}()})},"tslib/tslib":function(){var b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F;(function(w){function D(v,z){v!==q&&("function"===typeof Object.create?Object.defineProperty(v,"__esModule",{value:!0}):v.__esModule=!0);return function(C,E){return v[C]=z?z(C,E):E}}var q="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",
["exports"],function(v){w(D(q,D(v)))}):"object"===typeof module&&"object"===typeof module.exports?w(D(q,D(module.exports))):w(D(q))})(function(w){var D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,v){q.__proto__=v}||function(q,v){for(var z in v)v.hasOwnProperty(z)&&(q[z]=v[z])};b=function(q,v){function z(){this.constructor=q}D(q,v);q.prototype=null===v?Object.create(v):(z.prototype=v.prototype,new z)};y=Object.assign||function(q){for(var v,z=1,C=arguments.length;z<C;z++){v=arguments[z];
for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&(q[E]=v[E])}return q};r=function(q,v){var z={},C;for(C in q)Object.prototype.hasOwnProperty.call(q,C)&&0>v.indexOf(C)&&(z[C]=q[C]);if(null!=q&&"function"===typeof Object.getOwnPropertySymbols){var E=0;for(C=Object.getOwnPropertySymbols(q);E<C.length;E++)0>v.indexOf(C[E])&&Object.prototype.propertyIsEnumerable.call(q,C[E])&&(z[C[E]]=q[C[E]])}return z};a=function(q,v,z,C){var E=arguments.length,G=3>E?v:null===C?C=Object.getOwnPropertyDescriptor(v,
z):C,H;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)G=Reflect.decorate(q,v,z,C);else for(var K=q.length-1;0<=K;K--)if(H=q[K])G=(3>E?H(G):3<E?H(v,z,G):H(v,z))||G;return 3<E&&G&&Object.defineProperty(v,z,G),G};k=function(q,v){return function(z,C){v(z,C,q)}};e=function(q,v){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(q,v)};g=function(q,v,z,C){return new (z||(z=Promise))(function(E,G){function H(J){try{I(C.next(J))}catch(Q){G(Q)}}function K(J){try{I(C["throw"](J))}catch(Q){G(Q)}}
function I(J){J.done?E(J.value):(new z(function(Q){Q(J.value)})).then(H,K)}I((C=C.apply(q,v||[])).next())})};h=function(q,v){function z(J){return function(Q){return C([J,Q])}}function C(J){if(G)throw new TypeError("Generator is already executing.");for(;E;)try{if(G=1,H&&(K=J[0]&2?H["return"]:J[0]?H["throw"]||((K=H["return"])&&K.call(H),0):H.next)&&!(K=K.call(H,J[1])).done)return K;if(H=0,K)J=[J[0]&2,K.value];switch(J[0]){case 0:case 1:K=J;break;case 4:return E.label++,{value:J[1],done:!1};case 5:E.label++;
H=J[1];J=[0];continue;case 7:J=E.ops.pop();E.trys.pop();continue;default:if(!(K=E.trys,K=0<K.length&&K[K.length-1])&&(6===J[0]||2===J[0])){E=0;continue}if(3===J[0]&&(!K||J[1]>K[0]&&J[1]<K[3]))E.label=J[1];else if(6===J[0]&&E.label<K[1])E.label=K[1],K=J;else if(K&&E.label<K[2])E.label=K[2],E.ops.push(J);else{K[2]&&E.ops.pop();E.trys.pop();continue}}J=v.call(q,E)}catch(Q){J=[6,Q],H=0}finally{G=K=0}if(J[0]&5)throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}var E={label:0,sent:function(){if(K[0]&1)throw K[1];
return K[1]},trys:[],ops:[]},G,H,K,I;return I={next:z(0),"throw":z(1),"return":z(2)},"function"===typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I};m=function(q,v){for(var z in q)v.hasOwnProperty(z)||(v[z]=q[z])};l=function(q){var v="function"===typeof Symbol&&q[Symbol.iterator],z=0;return v?v.call(q):{next:function(){q&&z>=q.length&&(q=void 0);return{value:q&&q[z++],done:!q}}}};f=function(q,v){var z="function"===typeof Symbol&&q[Symbol.iterator];if(!z)return q;q=z.call(q);var C,E=[];
try{for(;(void 0===v||0<v--)&&!(C=q.next()).done;)E.push(C.value)}catch(H){var G={error:H}}finally{try{C&&!C.done&&(z=q["return"])&&z.call(q)}finally{if(G)throw G.error;}}return E};c=function(){for(var q=[],v=0;v<arguments.length;v++)q=q.concat(f(arguments[v]));return q};d=function(){for(var q=0,v=0,z=arguments.length;v<z;v++)q+=arguments[v].length;q=Array(q);var C=0;for(v=0;v<z;v++)for(var E=arguments[v],G=0,H=E.length;G<H;G++,C++)q[C]=E[G];return q};u=function(q){return this instanceof u?(this.v=
q,this):new u(q)};n=function(q,v,z){function C(V){I[V]&&(J[V]=function(O){return new Promise(function(S,L){1<Q.push([V,O,S,L])||E(V,O)})})}function E(V,O){try{var S=I[V](O);S.value instanceof u?Promise.resolve(S.value.v).then(G,H):K(Q[0][2],S)}catch(L){K(Q[0][3],L)}}function G(V){E("next",V)}function H(V){E("throw",V)}function K(V,O){(V(O),Q.shift(),Q.length)&&E(Q[0][0],Q[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var I=z.apply(q,v||[]),J,Q=[];return J=
{},C("next"),C("throw"),C("return"),J[Symbol.asyncIterator]=function(){return this},J};t=function(q){function v(E,G){z[E]=q[E]?function(H){return(C=!C)?{value:u(q[E](H)),done:"return"===E}:G?G(H):H}:G}var z,C;return z={},v("next"),v("throw",function(E){throw E;}),v("return"),z[Symbol.iterator]=function(){return this},z};x=function(q){function v(G){E[G]=q[G]&&function(H){return new Promise(function(K,I){H=q[G](H);z(K,I,H.done,H.value)})}}function z(G,H,K,I){Promise.resolve(I).then(function(J){G({value:J,
done:K})},H)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=q[Symbol.asyncIterator],E;return C?C.call(q):(q="function"===typeof l?l(q):q[Symbol.iterator](),E={},v("next"),v("throw"),v("return"),E[Symbol.asyncIterator]=function(){return this},E)};A=function(q,v){Object.defineProperty?Object.defineProperty(q,"raw",{value:v}):q.raw=v;return q};B=function(q){if(q&&q.__esModule)return q;var v={};if(null!=q)for(var z in q)Object.hasOwnProperty.call(q,z)&&(v[z]=
q[z]);v["default"]=q;return v};F=function(q){return q&&q.__esModule?q:{"default":q}};w("__extends",b);w("__assign",y);w("__rest",r);w("__decorate",a);w("__param",k);w("__metadata",e);w("__awaiter",g);w("__generator",h);w("__exportStar",m);w("__values",l);w("__read",f);w("__spread",c);w("__spreadArrays",d);w("__await",u);w("__asyncGenerator",n);w("__asyncDelegator",t);w("__asyncValues",x);w("__makeTemplateObject",A);w("__importStar",B);w("__importDefault",F)})},"dojo/cookie":function(){define(["./_base/kernel",
"./regexp"],function(b,y){b.cookie=function(r,a,k){var e=document.cookie;if(1==arguments.length)var g=(g=e.match(new RegExp("(?:^|; )"+y.escapeString(r)+"\x3d([^;]*)")))?decodeURIComponent(g[1]):void 0;else{k=k||{};e=k.expires;if("number"==typeof e){var h=new Date;h.setTime(h.getTime()+864E5*e);e=k.expires=h}e&&e.toUTCString&&(k.expires=e.toUTCString());a=encodeURIComponent(a);e=r+"\x3d"+a;for(var m in k)e+="; "+m,h=k[m],!0!==h&&(e+="\x3d"+h);document.cookie=e}return g};b.cookie.isSupported=function(){"cookieEnabled"in
navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return b.cookie})},"moment/moment":function(){(function(b,y){"object"===typeof exports&&"undefined"!==typeof module?module.exports=y():"function"===typeof define&&define.amd?define(y):b.moment=y()})(this,function(){function b(){return Gc.apply(null,arguments)}function y(M){return M instanceof
Array||"[object Array]"===Object.prototype.toString.call(M)}function r(M){return null!=M&&"[object Object]"===Object.prototype.toString.call(M)}function a(M,W){return Object.prototype.hasOwnProperty.call(M,W)}function k(M){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(M).length;for(var W in M)if(a(M,W))return!1;return!0}function e(M){return void 0===M}function g(M){return"number"===typeof M||"[object Number]"===Object.prototype.toString.call(M)}function h(M){return M instanceof
Date||"[object Date]"===Object.prototype.toString.call(M)}function m(M,W){var ma=[],sa;for(sa=0;sa<M.length;++sa)ma.push(W(M[sa],sa));return ma}function l(M,W){for(var ma in W)a(W,ma)&&(M[ma]=W[ma]);a(W,"toString")&&(M.toString=W.toString);a(W,"valueOf")&&(M.valueOf=W.valueOf);return M}function f(M,W,ma,sa){return Oa(M,W,ma,sa,!0).utc()}function c(M){null==M._pf&&(M._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,
userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return M._pf}function d(M){if(null==M._isValid){var W=c(M),ma=Ia.call(W.parsedDateParts,function(sa){return null!=sa});ma=!isNaN(M._d.getTime())&&0>W.overflow&&!W.empty&&!W.invalidEra&&!W.invalidMonth&&!W.invalidWeekday&&!W.weekdayMismatch&&!W.nullInput&&!W.invalidFormat&&!W.userInvalidated&&(!W.meridiem||W.meridiem&&ma);M._strict&&(ma=ma&&0===W.charsLeftOver&&0===W.unusedTokens.length&&void 0===W.bigHour);
if(null!=Object.isFrozen&&Object.isFrozen(M))return ma;M._isValid=ma}return M._isValid}function u(M){var W=f(NaN);null!=M?l(c(W),M):c(W).userInvalidated=!0;return W}function n(M,W){var ma;e(W._isAMomentObject)||(M._isAMomentObject=W._isAMomentObject);e(W._i)||(M._i=W._i);e(W._f)||(M._f=W._f);e(W._l)||(M._l=W._l);e(W._strict)||(M._strict=W._strict);e(W._tzm)||(M._tzm=W._tzm);e(W._isUTC)||(M._isUTC=W._isUTC);e(W._offset)||(M._offset=W._offset);e(W._pf)||(M._pf=c(W));e(W._locale)||(M._locale=W._locale);
if(0<Ca.length)for(ma=0;ma<Ca.length;ma++){var sa=Ca[ma];var La=W[sa];e(La)||(M[sa]=La)}return M}function t(M){n(this,M);this._d=new Date(null!=M._d?M._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Ga&&(Ga=!0,b.updateOffset(this),Ga=!1)}function x(M){return M instanceof t||null!=M&&null!=M._isAMomentObject}function A(M,W){var ma=!0;return l(function(){null!=b.deprecationHandler&&b.deprecationHandler(null,M);if(ma){var sa=[],La,Va;for(La=0;La<arguments.length;La++){var Xa="";if("object"===
typeof arguments[La]){Xa+="\n["+La+"] ";for(Va in arguments[0])a(arguments[0],Va)&&(Xa+=Va+": "+arguments[0][Va]+", ");Xa=Xa.slice(0,-2)}else Xa=arguments[La];sa.push(Xa)}Array.prototype.slice.call(sa).join("");ma=!1}return W.apply(this,arguments)},W)}function B(M,W){null!=b.deprecationHandler&&b.deprecationHandler(M,W);Na[M]||(Na[M]=!0)}function F(M){return"undefined"!==typeof Function&&M instanceof Function||"[object Function]"===Object.prototype.toString.call(M)}function w(M,W){var ma=l({},M),
sa;for(sa in W)a(W,sa)&&(r(M[sa])&&r(W[sa])?(ma[sa]={},l(ma[sa],M[sa]),l(ma[sa],W[sa])):null!=W[sa]?ma[sa]=W[sa]:delete ma[sa]);for(sa in M)a(M,sa)&&!a(W,sa)&&r(M[sa])&&(ma[sa]=l({},ma[sa]));return ma}function D(M){null!=M&&this.set(M)}function q(M,W,ma){var sa=""+Math.abs(M);return(0<=M?ma?"+":"":"-")+Math.pow(10,Math.max(0,W-sa.length)).toString().substr(1)+sa}function v(M,W,ma,sa){var La=sa;"string"===typeof sa&&(La=function(){return this[sa]()});M&&(Ya[M]=La);W&&(Ya[W[0]]=function(){return q(La.apply(this,
arguments),W[1],W[2])});ma&&(Ya[ma]=function(){return this.localeData().ordinal(La.apply(this,arguments),M)})}function z(M){return M.match(/\[[\s\S]/)?M.replace(/^\[|\]$/g,""):M.replace(/\\/g,"")}function C(M){var W=M.match(Ka),ma;var sa=0;for(ma=W.length;sa<ma;sa++)W[sa]=Ya[W[sa]]?Ya[W[sa]]:z(W[sa]);return function(La){var Va="",Xa;for(Xa=0;Xa<ma;Xa++)Va+=F(W[Xa])?W[Xa].call(La,M):W[Xa];return Va}}function E(M,W){if(!M.isValid())return M.localeData().invalidDate();W=G(W,M.localeData());Wa[W]=Wa[W]||
C(W);return Wa[W](M)}function G(M,W){function ma(La){return W.longDateFormat(La)||La}var sa=5;for(Ra.lastIndex=0;0<=sa&&Ra.test(M);)M=M.replace(Ra,ma),Ra.lastIndex=0,--sa;return M}function H(M,W){var ma=M.toLowerCase();cb[ma]=cb[ma+"s"]=cb[W]=M}function K(M){return"string"===typeof M?cb[M]||cb[M.toLowerCase()]:void 0}function I(M){var W={},ma,sa;for(sa in M)a(M,sa)&&(ma=K(sa))&&(W[ma]=M[sa]);return W}function J(M){var W=[],ma;for(ma in M)a(M,ma)&&W.push({unit:ma,priority:Ta[ma]});W.sort(function(sa,
La){return sa.priority-La.priority});return W}function Q(M){return 0===M%4&&0!==M%100||0===M%400}function V(M){return 0>M?Math.ceil(M)||0:Math.floor(M)}function O(M){M=+M;var W=0;0!==M&&isFinite(M)&&(W=V(M));return W}function S(M,W){return function(ma){return null!=ma?(Y(this,M,ma),b.updateOffset(this,W),this):L(this,M)}}function L(M,W){return M.isValid()?M._d["get"+(M._isUTC?"UTC":"")+W]():NaN}function Y(M,W,ma){if(M.isValid()&&!isNaN(ma))if("FullYear"===W&&Q(M.year())&&1===M.month()&&29===M.date())ma=
O(ma),M._d["set"+(M._isUTC?"UTC":"")+W](ma,M.month(),ka(ma,M.month()));else M._d["set"+(M._isUTC?"UTC":"")+W](ma)}function ca(M,W,ma){tc[M]=F(W)?W:function(sa,La){return sa&&ma?ma:W}}function U(M,W){return a(tc,M)?tc[M](W._strict,W._locale):new RegExp(X(M))}function X(M){return Z(M.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(W,ma,sa,La,Va){return ma||sa||La||Va}))}function Z(M){return M.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function N(M,W){var ma,sa=W;"string"===
typeof M&&(M=[M]);g(W)&&(sa=function(La,Va){Va[W]=O(La)});for(ma=0;ma<M.length;ma++)uc[M[ma]]=sa}function aa(M,W){N(M,function(ma,sa,La,Va){La._w=La._w||{};W(ma,La._w,La,Va)})}function ka(M,W){if(isNaN(M)||isNaN(W))return NaN;var ma=(W%12+12)%12;return 1===ma?Q(M+(W-ma)/12)?29:28:31-ma%7%2}function pa(M,W){if(!M.isValid())return M;if("string"===typeof W)if(/^\d+$/.test(W))W=O(W);else if(W=M.localeData().monthsParse(W),!g(W))return M;var ma=Math.min(M.date(),ka(M.year(),W));M._d["set"+(M._isUTC?"UTC":
"")+"Month"](W,ma);return M}function ta(M){return null!=M?(pa(this,M),b.updateOffset(this,!0),this):L(this,"Month")}function Ba(){function M(Xa,hb){return hb.length-Xa.length}var W=[],ma=[],sa=[],La;for(La=0;12>La;La++){var Va=f([2E3,La]);W.push(this.monthsShort(Va,""));ma.push(this.months(Va,""));sa.push(this.months(Va,""));sa.push(this.monthsShort(Va,""))}W.sort(M);ma.sort(M);sa.sort(M);for(La=0;12>La;La++)W[La]=Z(W[La]),ma[La]=Z(ma[La]);for(La=0;24>La;La++)sa[La]=Z(sa[La]);this._monthsShortRegex=
this._monthsRegex=new RegExp("^("+sa.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+ma.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+W.join("|")+")","i")}function Da(M,W,ma,sa,La,Va,Xa){100>M&&0<=M?(W=new Date(M+400,W,ma,sa,La,Va,Xa),isFinite(W.getFullYear())&&W.setFullYear(M)):W=new Date(M,W,ma,sa,La,Va,Xa);return W}function oa(M){if(100>M&&0<=M){var W=Array.prototype.slice.call(arguments);W[0]=M+400;W=new Date(Date.UTC.apply(null,W));isFinite(W.getUTCFullYear())&&W.setUTCFullYear(M)}else W=
new Date(Date.UTC.apply(null,arguments));return W}function ra(M,W,ma){ma=7+W-ma;return-((7+oa(M,0,ma).getUTCDay()-W)%7)+ma-1}function ya(M,W,ma,sa,La){ma=(7+ma-sa)%7;sa=ra(M,sa,La);sa=1+7*(W-1)+ma+sa;0>=sa?(W=M-1,M=(Q(W)?366:365)+sa):sa>(Q(M)?366:365)?(W=M+1,M=sa-(Q(M)?366:365)):(W=M,M=sa);return{year:W,dayOfYear:M}}function wa(M,W,ma){var sa=ra(M.year(),W,ma);sa=Math.floor((M.dayOfYear()-sa-1)/7)+1;1>sa?(M=M.year()-1,W=sa+la(M,W,ma)):sa>la(M.year(),W,ma)?(W=sa-la(M.year(),W,ma),M=M.year()+1):(M=
M.year(),W=sa);return{week:W,year:M}}function la(M,W,ma){var sa=ra(M,W,ma);W=ra(M+1,W,ma);return((Q(M)?366:365)-sa+W)/7}function Aa(M,W){return M.slice(W,7).concat(M.slice(0,W))}function da(M,W,ma){var sa;M=M.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],sa=0;7>sa;++sa){var La=f([2E3,1]).day(sa);this._minWeekdaysParse[sa]=this.weekdaysMin(La,"").toLocaleLowerCase();this._shortWeekdaysParse[sa]=this.weekdaysShort(La,"").toLocaleLowerCase();
this._weekdaysParse[sa]=this.weekdays(La,"").toLocaleLowerCase()}if(ma)W="dddd"===W?wb.call(this._weekdaysParse,M):"ddd"===W?wb.call(this._shortWeekdaysParse,M):wb.call(this._minWeekdaysParse,M);else if("dddd"===W){W=wb.call(this._weekdaysParse,M);if(-1!==W)return W;W=wb.call(this._shortWeekdaysParse,M);if(-1!==W)return W;W=wb.call(this._minWeekdaysParse,M)}else if("ddd"===W){W=wb.call(this._shortWeekdaysParse,M);if(-1!==W)return W;W=wb.call(this._weekdaysParse,M);if(-1!==W)return W;W=wb.call(this._minWeekdaysParse,
M)}else{W=wb.call(this._minWeekdaysParse,M);if(-1!==W)return W;W=wb.call(this._weekdaysParse,M);if(-1!==W)return W;W=wb.call(this._shortWeekdaysParse,M)}return-1!==W?W:null}function fa(){function M(jb,xb){return xb.length-jb.length}var W=[],ma=[],sa=[],La=[],Va;for(Va=0;7>Va;Va++){var Xa=f([2E3,1]).day(Va);var hb=Z(this.weekdaysMin(Xa,""));var ob=Z(this.weekdaysShort(Xa,""));Xa=Z(this.weekdays(Xa,""));W.push(hb);ma.push(ob);sa.push(Xa);La.push(hb);La.push(ob);La.push(Xa)}W.sort(M);ma.sort(M);sa.sort(M);
La.sort(M);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+La.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+sa.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+ma.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+W.join("|")+")","i")}function P(){return this.hours()%12||12}function xa(M,W){v(M,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),W)})}function Fa(M,W){return W._meridiemParse}function ba(M){return M?
M.toLowerCase().replace("_","-"):M}function Sa(M){var W=null;if(void 0===sb[M]&&"undefined"!==typeof module&&module&&module.exports)try{W=gc._abbr;var ma=require;ma("./locale/"+M);Qa(W)}catch(sa){sb[M]=null}return sb[M]}function Qa(M,W){M&&(M=e(W)?R(M):va(M,W))&&(gc=M);return gc._abbr}function va(M,W){if(null!==W){var ma=xc;W.abbr=M;if(null!=sb[M])B("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
ma=sb[M]._config;else if(null!=W.parentLocale)if(null!=sb[W.parentLocale])ma=sb[W.parentLocale]._config;else if(ma=Sa(W.parentLocale),null!=ma)ma=ma._config;else return hc[W.parentLocale]||(hc[W.parentLocale]=[]),hc[W.parentLocale].push({name:M,config:W}),null;sb[M]=new D(w(ma,W));hc[M]&&hc[M].forEach(function(sa){va(sa.name,sa.config)});Qa(M);return sb[M]}delete sb[M];return null}function R(M){var W;M&&M._locale&&M._locale._abbr&&(M=M._locale._abbr);if(!M)return gc;if(!y(M)){if(W=Sa(M))return W;
M=[M]}a:{W=0;for(var ma,sa,La,Va;W<M.length;){Va=ba(M[W]).split("-");ma=Va.length;for(sa=(sa=ba(M[W+1]))?sa.split("-"):null;0<ma;){if(La=Sa(Va.slice(0,ma).join("-"))){M=La;break a}if(La=sa&&sa.length>=ma){b:{La=void 0;var Xa=Math.min(Va.length,sa.length);for(La=0;La<Xa;La+=1)if(Va[La]!==sa[La])break b;La=Xa}La=La>=ma-1}if(La)break;ma--}W++}M=gc}return M}function ia(M){var W;(W=M._a)&&-2===c(M).overflow&&(W=0>W[Nb]||11<W[Nb]?Nb:1>W[Kb]||W[Kb]>ka(W[Db],W[Nb])?Kb:0>W[yb]||24<W[yb]||24===W[yb]&&(0!==
W[Gb]||0!==W[Ob]||0!==W[Vb])?yb:0>W[Gb]||59<W[Gb]?Gb:0>W[Ob]||59<W[Ob]?Ob:0>W[Vb]||999<W[Vb]?Vb:-1,c(M)._overflowDayOfYear&&(W<Db||W>Kb)&&(W=Kb),c(M)._overflowWeeks&&-1===W&&(W=Hc),c(M)._overflowWeekday&&-1===W&&(W=Ic),c(M).overflow=W);return M}function ja(M){var W;var ma=M._i;var sa=Jc.exec(ma)||Kc.exec(ma);if(sa){c(M).iso=!0;ma=0;for(W=pc.length;ma<W;ma++)if(pc[ma][1].exec(sa[1])){var La=pc[ma][0];var Va=!1!==pc[ma][2];break}if(null==La)M._isValid=!1;else{if(sa[3]){ma=0;for(W=vc.length;ma<W;ma++)if(vc[ma][1].exec(sa[3])){var Xa=
(sa[2]||" ")+vc[ma][0];break}if(null==Xa){M._isValid=!1;return}}if(Va||null==Xa){if(sa[4])if(Lc.exec(sa[4]))var hb="Z";else{M._isValid=!1;return}M._f=La+(Xa||"")+(hb||"");ua(M)}else M._isValid=!1}}else M._isValid=!1}function T(M){var W=Mc.exec(M._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(W){var ma=W[3],sa=W[2],La=W[5],Va=W[6],Xa=W[7],hb=parseInt(W[4],10);ma=[49>=hb?2E3+hb:999>=hb?1900+hb:hb,yc.indexOf(ma),parseInt(sa,10),parseInt(La,10),
parseInt(Va,10)];Xa&&ma.push(parseInt(Xa,10));a:{if(Xa=W[1])if(Xa=zc.indexOf(Xa),sa=(new Date(ma[0],ma[1],ma[2])).getDay(),Xa!==sa){c(M).weekdayMismatch=!0;Xa=M._isValid=!1;break a}Xa=!0}Xa&&(M._a=ma,(Xa=W[8])?W=Nc[Xa]:W[9]?W=0:(W=parseInt(W[10],10),Xa=W%100,W=(W-Xa)/100*60+Xa),M._tzm=W,M._d=oa.apply(null,M._a),M._d.setUTCMinutes(M._d.getUTCMinutes()-M._tzm),c(M).rfc2822=!0)}else M._isValid=!1}function ha(M){var W=Oc.exec(M._i);null!==W?M._d=new Date(+W[1]):(ja(M),!1===M._isValid&&(delete M._isValid,
T(M),!1===M._isValid&&(delete M._isValid,M._strict?M._isValid=!1:b.createFromInputFallback(M))))}function na(M,W,ma){return null!=M?M:null!=W?W:ma}function qa(M){var W=[];if(!M._d){var ma=new Date(b.now());ma=M._useUTC?[ma.getUTCFullYear(),ma.getUTCMonth(),ma.getUTCDate()]:[ma.getFullYear(),ma.getMonth(),ma.getDate()];if(M._w&&null==M._a[Kb]&&null==M._a[Nb]){var sa=M._w;if(null!=sa.GG||null!=sa.W||null!=sa.E){var La=1;var Va=4;var Xa=na(sa.GG,M._a[Db],wa(Ha(),1,4).year);var hb=na(sa.W,1);var ob=na(sa.E,
1);if(1>ob||7<ob)var jb=!0}else if(La=M._locale._week.dow,Va=M._locale._week.doy,hb=wa(Ha(),La,Va),Xa=na(sa.gg,M._a[Db],hb.year),hb=na(sa.w,hb.week),null!=sa.d){if(ob=sa.d,0>ob||6<ob)jb=!0}else if(null!=sa.e){if(ob=sa.e+La,0>sa.e||6<sa.e)jb=!0}else ob=La;1>hb||hb>la(Xa,La,Va)?c(M)._overflowWeeks=!0:null!=jb?c(M)._overflowWeekday=!0:(jb=ya(Xa,hb,ob,La,Va),M._a[Db]=jb.year,M._dayOfYear=jb.dayOfYear)}if(null!=M._dayOfYear){jb=na(M._a[Db],ma[Db]);if(M._dayOfYear>(Q(jb)?366:365)||0===M._dayOfYear)c(M)._overflowDayOfYear=
!0;jb=oa(jb,0,M._dayOfYear);M._a[Nb]=jb.getUTCMonth();M._a[Kb]=jb.getUTCDate()}for(jb=0;3>jb&&null==M._a[jb];++jb)M._a[jb]=W[jb]=ma[jb];for(;7>jb;jb++)M._a[jb]=W[jb]=null==M._a[jb]?2===jb?1:0:M._a[jb];24===M._a[yb]&&0===M._a[Gb]&&0===M._a[Ob]&&0===M._a[Vb]&&(M._nextDay=!0,M._a[yb]=0);M._d=(M._useUTC?oa:Da).apply(null,W);W=M._useUTC?M._d.getUTCDay():M._d.getDay();null!=M._tzm&&M._d.setUTCMinutes(M._d.getUTCMinutes()-M._tzm);M._nextDay&&(M._a[yb]=24);M._w&&"undefined"!==typeof M._w.d&&M._w.d!==W&&(c(M).weekdayMismatch=
!0)}}function ua(M){if(M._f===b.ISO_8601)ja(M);else if(M._f===b.RFC_2822)T(M);else{M._a=[];c(M).empty=!0;var W=""+M._i,ma,sa,La=W.length,Va=0;var Xa=G(M._f,M._locale).match(Ka)||[];for(ma=0;ma<Xa.length;ma++){var hb=Xa[ma];if(sa=(W.match(U(hb,M))||[])[0]){var ob=W.substr(0,W.indexOf(sa));0<ob.length&&c(M).unusedInput.push(ob);W=W.slice(W.indexOf(sa)+sa.length);Va+=sa.length}if(Ya[hb]){if(sa?c(M).empty=!1:c(M).unusedTokens.push(hb),ob=M,null!=sa&&a(uc,hb))uc[hb](sa,ob._a,ob,hb)}else M._strict&&!sa&&
c(M).unusedTokens.push(hb)}c(M).charsLeftOver=La-Va;0<W.length&&c(M).unusedInput.push(W);12>=M._a[yb]&&!0===c(M).bigHour&&0<M._a[yb]&&(c(M).bigHour=void 0);c(M).parsedDateParts=M._a.slice(0);c(M).meridiem=M._meridiem;W=M._a;ma=yb;La=M._locale;Xa=M._a[yb];Va=M._meridiem;null!=Va&&(null!=La.meridiemHour?Xa=La.meridiemHour(Xa,Va):null!=La.isPM&&((La=La.isPM(Va))&&12>Xa&&(Xa+=12),La||12!==Xa||(Xa=0)));W[ma]=Xa;W=c(M).era;null!==W&&(M._a[Db]=M._locale.erasConvertYear(W,M._a[Db]));qa(M);ia(M)}}function za(M){if(!M._d){var W=
I(M._i);M._a=m([W.year,W.month,void 0===W.day?W.date:W.day,W.hour,W.minute,W.second,W.millisecond],function(ma){return ma&&parseInt(ma,10)});qa(M)}}function Ea(M){var W=M._i,ma=M._f;M._locale=M._locale||R(M._l);if(null===W||void 0===ma&&""===W)return u({nullInput:!0});"string"===typeof W&&(M._i=W=M._locale.preparse(W));if(x(W))return new t(ia(W));if(h(W))M._d=W;else if(y(ma)){var sa=!1;if(0===M._f.length)c(M).invalidFormat=!0,M._d=new Date(NaN);else{for(W=0;W<M._f.length;W++){ma=0;var La=!1;var Va=
n({},M);null!=M._useUTC&&(Va._useUTC=M._useUTC);Va._f=M._f[W];ua(Va);d(Va)&&(La=!0);ma+=c(Va).charsLeftOver;ma+=10*c(Va).unusedTokens.length;c(Va).score=ma;if(sa)ma<Xa&&(Xa=ma,hb=Va);else if(null==Xa||ma<Xa||La){var Xa=ma;var hb=Va;La&&(sa=!0)}}l(M,hb||Va)}}else ma?ua(M):Pa(M);d(M)||(M._d=null);return M}function Pa(M){var W=M._i;e(W)?M._d=new Date(b.now()):h(W)?M._d=new Date(W.valueOf()):"string"===typeof W?ha(M):y(W)?(M._a=m(W.slice(0),function(ma){return parseInt(ma,10)}),qa(M)):r(W)?za(M):g(W)?
M._d=new Date(W):b.createFromInputFallback(M)}function Oa(M,W,ma,sa,La){var Va={};if(!0===W||!1===W)sa=W,W=void 0;if(!0===ma||!1===ma)sa=ma,ma=void 0;if(r(M)&&k(M)||y(M)&&0===M.length)M=void 0;Va._isAMomentObject=!0;Va._useUTC=Va._isUTC=La;Va._l=ma;Va._i=M;Va._f=W;Va._strict=sa;M=new t(ia(Ea(Va)));M._nextDay&&(M.add(1,"d"),M._nextDay=void 0);return M}function Ha(M,W,ma,sa){return Oa(M,W,ma,sa,!1)}function Ua(M,W){var ma;1===W.length&&y(W[0])&&(W=W[0]);if(!W.length)return Ha();var sa=W[0];for(ma=1;ma<
W.length;++ma)if(!W[ma].isValid()||W[ma][M](sa))sa=W[ma];return sa}function bb(M){var W=I(M);M=W.year||0;var ma=W.quarter||0,sa=W.month||0,La=W.week||W.isoWeek||0,Va=W.day||0,Xa=W.hour||0,hb=W.minute||0,ob=W.second||0,jb=W.millisecond||0;a:{var xb,Ac=!1;for(xb in W)if(a(W,xb)&&(-1===wb.call(ic,xb)||null!=W[xb]&&isNaN(W[xb]))){W=!1;break a}for(xb=0;xb<ic.length;++xb)if(W[ic[xb]]){if(Ac){W=!1;break a}parseFloat(W[ic[xb]])!==O(W[ic[xb]])&&(Ac=!0)}W=!0}this._isValid=W;this._milliseconds=+jb+1E3*ob+6E4*
hb+36E5*Xa;this._days=+Va+7*La;this._months=+sa+3*ma+12*M;this._data={};this._locale=R();this._bubble()}function ab(M){return M instanceof bb}function gb(M){return 0>M?-1*Math.round(-1*M):Math.round(M)}function fb(M,W){v(M,0,0,function(){var ma=this.utcOffset(),sa="+";0>ma&&(ma=-ma,sa="-");return sa+q(~~(ma/60),2)+W+q(~~ma%60,2)})}function kb(M,W){M=(W||"").match(M);if(null===M)return null;M=((M[M.length-1]||[])+"").match(Pc)||["-",0,0];W=+(60*M[1])+O(M[2]);return 0===W?0:"+"===M[0]?W:-W}function ub(M,
W){return W._isUTC?(W=W.clone(),M=(x(M)||h(M)?M.valueOf():Ha(M).valueOf())-W.valueOf(),W._d.setTime(W._d.valueOf()+M),b.updateOffset(W,!1),W):Ha(M).local()}function pb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function eb(M,W){var ma=M,sa=null;ab(M)?ma={ms:M._milliseconds,d:M._days,M:M._months}:g(M)||!isNaN(+M)?(ma={},W?ma[W]=+M:ma.milliseconds=+M):(sa=Qc.exec(M))?(ma="-"===sa[1]?-1:1,ma={y:0,d:O(sa[Kb])*ma,h:O(sa[yb])*ma,m:O(sa[Gb])*ma,s:O(sa[Ob])*ma,ms:O(gb(1E3*sa[Vb]))*ma}):(sa=
Rc.exec(M))?(ma="-"===sa[1]?-1:1,ma={y:nb(sa[2],ma),M:nb(sa[3],ma),w:nb(sa[4],ma),d:nb(sa[5],ma),h:nb(sa[6],ma),m:nb(sa[7],ma),s:nb(sa[8],ma)}):null==ma?ma={}:"object"===typeof ma&&("from"in ma||"to"in ma)&&(sa=Ha(ma.from),ma=Ha(ma.to),sa.isValid()&&ma.isValid()?(ma=ub(ma,sa),sa.isBefore(ma)?ma=rb(sa,ma):(ma=rb(ma,sa),ma.milliseconds=-ma.milliseconds,ma.months=-ma.months),sa=ma):sa={milliseconds:0,months:0},ma={},ma.ms=sa.milliseconds,ma.M=sa.months);ma=new bb(ma);ab(M)&&a(M,"_locale")&&(ma._locale=
M._locale);ab(M)&&a(M,"_isValid")&&(ma._isValid=M._isValid);return ma}function nb(M,W){M=M&&parseFloat(M.replace(",","."));return(isNaN(M)?0:M)*W}function rb(M,W){var ma={};ma.months=W.month()-M.month()+12*(W.year()-M.year());M.clone().add(ma.months,"M").isAfter(W)&&--ma.months;ma.milliseconds=+W-+M.clone().add(ma.months,"M");return ma}function Lb(M,W){return function(ma,sa){if(null!==sa&&!isNaN(+sa)){B(W,"moment()."+W+"(period, number) is deprecated. Please use moment()."+W+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");
var La=ma;ma=sa;sa=La}ma=eb(ma,sa);Bb(this,ma,M);return this}}function Bb(M,W,ma,sa){var La=W._milliseconds,Va=gb(W._days);W=gb(W._months);M.isValid()&&(sa=null==sa?!0:sa,W&&pa(M,L(M,"Month")+W*ma),Va&&Y(M,"Date",L(M,"Date")+Va*ma),La&&M._d.setTime(M._d.valueOf()+La*ma),sa&&b.updateOffset(M,Va||W))}function zb(M){return"string"===typeof M||M instanceof String}function $b(M){var W=y(M),ma=!1;W&&(ma=0===M.filter(function(sa){return!g(sa)&&zb(M)}).length);return W&&ma}function vb(M,W){if(M.date()<W.date())return-vb(W,
M);var ma=12*(W.year()-M.year())+(W.month()-M.month()),sa=M.clone().add(ma,"months");0>W-sa?(M=M.clone().add(ma-1,"months"),W=(W-sa)/(sa-M)):(M=M.clone().add(ma+1,"months"),W=(W-sa)/(M-sa));return-(ma+W)||0}function Hb(M){if(void 0===M)return this._locale._abbr;M=R(M);null!=M&&(this._locale=M);return this}function Mb(){return this._locale}function Fb(M,W){return(M%W+W)%W}function Wb(M,W,ma){return 100>M&&0<=M?new Date(M+400,W,ma)-Bc:(new Date(M,W,ma)).valueOf()}function ac(M,W,ma){return 100>M&&0<=
M?Date.UTC(M+400,W,ma)-Bc:Date.UTC(M,W,ma)}function bc(M,W){return W.erasAbbrRegex(M)}function cc(){var M=[],W=[],ma=[],sa=[],La,Va=this.eras();var Xa=0;for(La=Va.length;Xa<La;++Xa)W.push(Z(Va[Xa].name)),M.push(Z(Va[Xa].abbr)),ma.push(Z(Va[Xa].narrow)),sa.push(Z(Va[Xa].name)),sa.push(Z(Va[Xa].abbr)),sa.push(Z(Va[Xa].narrow));this._erasRegex=new RegExp("^("+sa.join("|")+")","i");this._erasNameRegex=new RegExp("^("+W.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+M.join("|")+")","i");this._erasNarrowRegex=
new RegExp("^("+ma.join("|")+")","i")}function Xb(M,W){v(0,[M,M.length],0,W)}function jc(M,W,ma,sa,La){if(null==M)return wa(this,sa,La).year;var Va=la(M,sa,La);W>Va&&(W=Va);M=ya(M,W,ma,sa,La);M=oa(M.year,0,M.dayOfYear);this.year(M.getUTCFullYear());this.month(M.getUTCMonth());this.date(M.getUTCDate());return this}function qc(M,W){W[Vb]=O(1E3*("0."+M))}function Yb(M){return M}function Eb(M,W,ma,sa){var La=R();W=f().set(sa,W);return La[ma](W,M)}function kc(M,W,ma){g(M)&&(W=M,M=void 0);M=M||"";if(null!=
W)return Eb(M,W,ma,"month");var sa=[];for(W=0;12>W;W++)sa[W]=Eb(M,W,ma,"month");return sa}function dc(M,W,ma,sa){"boolean"!==typeof M&&(ma=W=M,M=!1);g(W)&&(ma=W,W=void 0);W=W||"";var La=R();M=M?La._week.dow:0;La=[];if(null!=ma)return Eb(W,(ma+M)%7,sa,"day");for(ma=0;7>ma;ma++)La[ma]=Eb(W,(ma+M)%7,sa,"day");return La}function lc(M,W,ma,sa){W=eb(W,ma);M._milliseconds+=sa*W._milliseconds;M._days+=sa*W._days;M._months+=sa*W._months;return M._bubble()}function mc(M){return 0>M?Math.floor(M):Math.ceil(M)}
function Ib(M){return function(){return this.as(M)}}function Pb(M){return function(){return this.isValid()?this._data[M]:NaN}}function Ab(M,W,ma,sa,La){return La.relativeTime(W||1,!!ma,M,sa)}function ea(M){return(0<M)-(0>M)||+M}function Ja(){if(!this.isValid())return this.localeData().invalidDate();var M=wc(this._milliseconds)/1E3,W=wc(this._days),ma=wc(this._months),sa=this.asSeconds();if(!sa)return"P0D";var La=V(M/60);var Va=V(La/60);M%=60;La%=60;var Xa=V(ma/12);ma%=12;var hb=M?M.toFixed(3).replace(/\.?0+$/,
""):"";var ob=0>sa?"-":"";var jb=ea(this._months)!==ea(sa)?"-":"";var xb=ea(this._days)!==ea(sa)?"-":"";sa=ea(this._milliseconds)!==ea(sa)?"-":"";return ob+"P"+(Xa?jb+Xa+"Y":"")+(ma?jb+ma+"M":"")+(W?xb+W+"D":"")+(Va||La||M?"T":"")+(Va?sa+Va+"H":"")+(La?sa+La+"M":"")+(M?sa+hb+"S":"")}var Ia=Array.prototype.some?Array.prototype.some:function(M){var W=Object(this),ma=W.length>>>0,sa;for(sa=0;sa<ma;sa++)if(sa in W&&M.call(this,W[sa],sa,W))return!0;return!1};var Ca=b.momentProperties=[],Ga=!1,Na={};b.suppressDeprecationWarnings=
!1;b.deprecationHandler=null;var Ma=Object.keys?Object.keys:function(M){var W,ma=[];for(W in M)a(M,W)&&ma.push(W);return ma};var Ka=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ra=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Wa={},Ya={},cb={},Ta={},db=/\d/,$a=/\d\d/,ib=/\d{3}/,Cb=/\d{4}/,Zb=/[+-]?\d{6}/,qb=/\d\d?/,nc=/\d\d\d\d?/,tb=/\d\d\d\d\d\d?/,
Qb=/\d{1,3}/,Jb=/\d{1,4}/,Tb=/[+-]?\d{1,6}/,ec=/\d+/,rc=/[+-]?\d+/,Sc=/Z|[+-]\d\d:?\d\d/gi,sc=/Z|[+-]\d\d(?::?\d\d)?/gi,oc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var tc={};var uc={},Db=0,Nb=1,Kb=2,yb=3,Gb=4,Ob=5,Vb=6,Hc=7,Ic=8;var wb=Array.prototype.indexOf?Array.prototype.indexOf:function(M){var W;for(W=0;W<this.length;++W)if(this[W]===M)return W;return-1};v("M",["MM",2],"Mo",function(){return this.month()+
1});v("MMM",0,0,function(M){return this.localeData().monthsShort(this,M)});v("MMMM",0,0,function(M){return this.localeData().months(this,M)});H("month","M");Ta.month=8;ca("M",qb);ca("MM",qb,$a);ca("MMM",function(M,W){return W.monthsShortRegex(M)});ca("MMMM",function(M,W){return W.monthsRegex(M)});N(["M","MM"],function(M,W){W[Nb]=O(M)-1});N(["MMM","MMMM"],function(M,W,ma,sa){sa=ma._locale.monthsParse(M,sa,ma._strict);null!=sa?W[Nb]=sa:c(ma).invalidMonth=M});var yc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
Cc=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;v("Y",0,0,function(){var M=this.year();return 9999>=M?q(M,4):"+"+M});v(0,["YY",2],0,function(){return this.year()%100});v(0,["YYYY",4],0,"year");v(0,["YYYYY",5],0,"year");v(0,["YYYYYY",6,!0],0,"year");H("year","y");Ta.year=1;ca("Y",rc);ca("YY",qb,$a);ca("YYYY",Jb,Cb);ca("YYYYY",Tb,Zb);ca("YYYYYY",Tb,Zb);N(["YYYYY","YYYYYY"],Db);N("YYYY",function(M,W){W[Db]=2===M.length?b.parseTwoDigitYear(M):O(M)});N("YY",function(M,W){W[Db]=b.parseTwoDigitYear(M)});N("Y",function(M,
W){W[Db]=parseInt(M,10)});b.parseTwoDigitYear=function(M){return O(M)+(68<O(M)?1900:2E3)};var Dc=S("FullYear",!0);v("w",["ww",2],"wo","week");v("W",["WW",2],"Wo","isoWeek");H("week","w");H("isoWeek","W");Ta.week=5;Ta.isoWeek=5;ca("w",qb);ca("ww",qb,$a);ca("W",qb);ca("WW",qb,$a);aa(["w","ww","W","WW"],function(M,W,ma,sa){W[sa.substr(0,1)]=O(M)});v("d",0,"do","day");v("dd",0,0,function(M){return this.localeData().weekdaysMin(this,M)});v("ddd",0,0,function(M){return this.localeData().weekdaysShort(this,
M)});v("dddd",0,0,function(M){return this.localeData().weekdays(this,M)});v("e",0,0,"weekday");v("E",0,0,"isoWeekday");H("day","d");H("weekday","e");H("isoWeekday","E");Ta.day=11;Ta.weekday=11;Ta.isoWeekday=11;ca("d",qb);ca("e",qb);ca("E",qb);ca("dd",function(M,W){return W.weekdaysMinRegex(M)});ca("ddd",function(M,W){return W.weekdaysShortRegex(M)});ca("dddd",function(M,W){return W.weekdaysRegex(M)});aa(["dd","ddd","dddd"],function(M,W,ma,sa){sa=ma._locale.weekdaysParse(M,sa,ma._strict);null!=sa?
W.d=sa:c(ma).invalidWeekday=M});aa(["d","e","E"],function(M,W,ma,sa){W[sa]=O(M)});var zc="Sun Mon Tue Wed Thu Fri Sat".split(" ");v("H",["HH",2],0,"hour");v("h",["hh",2],0,P);v("k",["kk",2],0,function(){return this.hours()||24});v("hmm",0,0,function(){return""+P.apply(this)+q(this.minutes(),2)});v("hmmss",0,0,function(){return""+P.apply(this)+q(this.minutes(),2)+q(this.seconds(),2)});v("Hmm",0,0,function(){return""+this.hours()+q(this.minutes(),2)});v("Hmmss",0,0,function(){return""+this.hours()+
q(this.minutes(),2)+q(this.seconds(),2)});xa("a",!0);xa("A",!1);H("hour","h");Ta.hour=13;ca("a",Fa);ca("A",Fa);ca("H",qb);ca("h",qb);ca("k",qb);ca("HH",qb,$a);ca("hh",qb,$a);ca("kk",qb,$a);ca("hmm",nc);ca("hmmss",tb);ca("Hmm",nc);ca("Hmmss",tb);N(["H","HH"],yb);N(["k","kk"],function(M,W,ma){M=O(M);W[yb]=24===M?0:M});N(["a","A"],function(M,W,ma){ma._isPm=ma._locale.isPM(M);ma._meridiem=M});N(["h","hh"],function(M,W,ma){W[yb]=O(M);c(ma).bigHour=!0});N("hmm",function(M,W,ma){var sa=M.length-2;W[yb]=
O(M.substr(0,sa));W[Gb]=O(M.substr(sa));c(ma).bigHour=!0});N("hmmss",function(M,W,ma){var sa=M.length-4,La=M.length-2;W[yb]=O(M.substr(0,sa));W[Gb]=O(M.substr(sa,2));W[Ob]=O(M.substr(La));c(ma).bigHour=!0});N("Hmm",function(M,W,ma){ma=M.length-2;W[yb]=O(M.substr(0,ma));W[Gb]=O(M.substr(ma))});N("Hmmss",function(M,W,ma){ma=M.length-4;var sa=M.length-2;W[yb]=O(M.substr(0,ma));W[Gb]=O(M.substr(ma,2));W[Ob]=O(M.substr(sa))});var Tc=S("Hours",!0),xc={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",
nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",
y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:yc,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:zc,meridiemParse:/[ap]\.?m?\.?/i},sb={},hc={},gc,Jc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
Kc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Lc=/Z|[+-]\d\d(?::?\d\d)?/,pc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",
/\d{6}/,!1],["YYYY",/\d{4}/,!1]],vc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Oc=/^\/?Date\((-?\d+)/i,Mc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,
Nc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};b.createFromInputFallback=A("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(M){M._d=new Date(M._i+(M._useUTC?" UTC":""))});b.ISO_8601=function(){};b.RFC_2822=function(){};
var Uc=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var M=Ha.apply(null,arguments);return this.isValid()&&M.isValid()?M<this?this:M:u()}),Vc=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var M=Ha.apply(null,arguments);return this.isValid()&&M.isValid()?M>this?this:M:u()}),ic="year quarter month week day hour minute second millisecond".split(" ");fb("Z",":");fb("ZZ",
"");ca("Z",sc);ca("ZZ",sc);N(["Z","ZZ"],function(M,W,ma){ma._useUTC=!0;ma._tzm=kb(sc,M)});var Pc=/([\+\-]|\d\d)/gi;b.updateOffset=function(){};var Qc=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Rc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;eb.fn=bb.prototype;eb.invalid=function(){return eb(NaN)};var Wc=Lb(1,"add"),Xc=Lb(-1,"subtract");b.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";
b.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ec=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(M){return void 0===M?this.localeData():this.locale(M)}),Bc=126227808E5;v("N",0,0,"eraAbbr");v("NN",0,0,"eraAbbr");v("NNN",0,0,"eraAbbr");v("NNNN",0,0,"eraName");v("NNNNN",0,0,"eraNarrow");v("y",["y",1],"yo","eraYear");v("y",["yy",2],0,"eraYear");v("y",["yyy",3],0,"eraYear");v("y",["yyyy",4],0,
"eraYear");ca("N",bc);ca("NN",bc);ca("NNN",bc);ca("NNNN",function(M,W){return W.erasNameRegex(M)});ca("NNNNN",function(M,W){return W.erasNarrowRegex(M)});N(["N","NN","NNN","NNNN","NNNNN"],function(M,W,ma,sa){(W=ma._locale.erasParse(M,sa,ma._strict))?c(ma).era=W:c(ma).invalidEra=M});ca("y",ec);ca("yy",ec);ca("yyy",ec);ca("yyyy",ec);ca("yo",function(M,W){return W._eraYearOrdinalRegex||ec});N(["y","yy","yyy","yyyy"],Db);N(["yo"],function(M,W,ma,sa){var La;ma._locale._eraYearOrdinalRegex&&(La=M.match(ma._locale._eraYearOrdinalRegex));
W[Db]=ma._locale.eraYearOrdinalParse?ma._locale.eraYearOrdinalParse(M,La):parseInt(M,10)});v(0,["gg",2],0,function(){return this.weekYear()%100});v(0,["GG",2],0,function(){return this.isoWeekYear()%100});Xb("gggg","weekYear");Xb("ggggg","weekYear");Xb("GGGG","isoWeekYear");Xb("GGGGG","isoWeekYear");H("weekYear","gg");H("isoWeekYear","GG");Ta.weekYear=1;Ta.isoWeekYear=1;ca("G",rc);ca("g",rc);ca("GG",qb,$a);ca("gg",qb,$a);ca("GGGG",Jb,Cb);ca("gggg",Jb,Cb);ca("GGGGG",Tb,Zb);ca("ggggg",Tb,Zb);aa(["gggg",
"ggggg","GGGG","GGGGG"],function(M,W,ma,sa){W[sa.substr(0,2)]=O(M)});aa(["gg","GG"],function(M,W,ma,sa){W[sa]=b.parseTwoDigitYear(M)});v("Q",0,"Qo","quarter");H("quarter","Q");Ta.quarter=7;ca("Q",db);N("Q",function(M,W){W[Nb]=3*(O(M)-1)});v("D",["DD",2],"Do","date");H("date","D");Ta.date=9;ca("D",qb);ca("DD",qb,$a);ca("Do",function(M,W){return M?W._dayOfMonthOrdinalParse||W._ordinalParse:W._dayOfMonthOrdinalParseLenient});N(["D","DD"],Kb);N("Do",function(M,W){W[Kb]=O(M.match(qb)[0])});var Fc=S("Date",
!0);v("DDD",["DDDD",3],"DDDo","dayOfYear");H("dayOfYear","DDD");Ta.dayOfYear=4;ca("DDD",Qb);ca("DDDD",ib);N(["DDD","DDDD"],function(M,W,ma){ma._dayOfYear=O(M)});v("m",["mm",2],0,"minute");H("minute","m");Ta.minute=14;ca("m",qb);ca("mm",qb,$a);N(["m","mm"],Gb);var Yc=S("Minutes",!1);v("s",["ss",2],0,"second");H("second","s");Ta.second=15;ca("s",qb);ca("ss",qb,$a);N(["s","ss"],Ob);var Zc=S("Seconds",!1);v("S",0,0,function(){return~~(this.millisecond()/100)});v(0,["SS",2],0,function(){return~~(this.millisecond()/
10)});v(0,["SSS",3],0,"millisecond");v(0,["SSSS",4],0,function(){return 10*this.millisecond()});v(0,["SSSSS",5],0,function(){return 100*this.millisecond()});v(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});v(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});v(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});v(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});H("millisecond","ms");Ta.millisecond=16;ca("S",Qb,db);ca("SS",Qb,$a);ca("SSS",Qb,ib);var Ub;
for(Ub="SSSS";9>=Ub.length;Ub+="S")ca(Ub,ec);for(Ub="S";9>=Ub.length;Ub+="S")N(Ub,qc);var $c=S("Milliseconds",!1);v("z",0,0,"zoneAbbr");v("zz",0,0,"zoneName");var Za=t.prototype;Za.add=Wc;Za.calendar=function(M,W){if(1===arguments.length)if(arguments[0]){var ma=arguments[0],sa;if(!(sa=x(ma)||h(ma)||zb(ma)||g(ma)||$b(ma))){sa=r(ma)&&!k(ma);var La=!1,Va="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),Xa;for(Xa=
0;Xa<Va.length;Xa+=1){var hb=Va[Xa];La=La||a(ma,hb)}sa=sa&&La}if(sa||null===ma||void 0===ma)M=arguments[0],W=void 0;else{ma=arguments[0];sa=r(ma)&&!k(ma);La=!1;Va="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(Xa=0;Xa<Va.length;Xa+=1)hb=Va[Xa],La=La||a(ma,hb);sa&&La&&(W=arguments[0],M=void 0)}}else W=M=void 0;ma=M||Ha();sa=ub(ma,this).startOf("day");sa=b.calendarFormat(this,sa)||"sameElse";La=W&&(F(W[sa])?W[sa].call(this,ma):W[sa]);return this.format(La||this.localeData().calendar(sa,
this,Ha(ma)))};Za.clone=function(){return new t(this)};Za.diff=function(M,W,ma){if(!this.isValid())return NaN;M=ub(M,this);if(!M.isValid())return NaN;var sa=6E4*(M.utcOffset()-this.utcOffset());W=K(W);switch(W){case "year":W=vb(this,M)/12;break;case "month":W=vb(this,M);break;case "quarter":W=vb(this,M)/3;break;case "second":W=(this-M)/1E3;break;case "minute":W=(this-M)/6E4;break;case "hour":W=(this-M)/36E5;break;case "day":W=(this-M-sa)/864E5;break;case "week":W=(this-M-sa)/6048E5;break;default:W=
this-M}return ma?W:V(W)};Za.endOf=function(M){M=K(M);if(void 0===M||"millisecond"===M||!this.isValid())return this;var W=this._isUTC?ac:Wb;switch(M){case "year":var ma=W(this.year()+1,0,1)-1;break;case "quarter":ma=W(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":ma=W(this.year(),this.month()+1,1)-1;break;case "week":ma=W(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":ma=W(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":ma=
W(this.year(),this.month(),this.date()+1)-1;break;case "hour":ma=this._d.valueOf();ma+=36E5-Fb(ma+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":ma=this._d.valueOf();ma+=6E4-Fb(ma,6E4)-1;break;case "second":ma=this._d.valueOf(),ma+=1E3-Fb(ma,1E3)-1}this._d.setTime(ma);b.updateOffset(this,!0);return this};Za.format=function(M){M||(M=this.isUtc()?b.defaultFormatUtc:b.defaultFormat);M=E(this,M);return this.localeData().postformat(M)};Za.from=function(M,W){return this.isValid()&&(x(M)&&
M.isValid()||Ha(M).isValid())?eb({to:this,from:M}).locale(this.locale()).humanize(!W):this.localeData().invalidDate()};Za.fromNow=function(M){return this.from(Ha(),M)};Za.to=function(M,W){return this.isValid()&&(x(M)&&M.isValid()||Ha(M).isValid())?eb({from:this,to:M}).locale(this.locale()).humanize(!W):this.localeData().invalidDate()};Za.toNow=function(M){return this.to(Ha(),M)};Za.get=function(M){M=K(M);return F(this[M])?this[M]():this};Za.invalidAt=function(){return c(this).overflow};Za.isAfter=
function(M,W){M=x(M)?M:Ha(M);if(!this.isValid()||!M.isValid())return!1;W=K(W)||"millisecond";return"millisecond"===W?this.valueOf()>M.valueOf():M.valueOf()<this.clone().startOf(W).valueOf()};Za.isBefore=function(M,W){M=x(M)?M:Ha(M);if(!this.isValid()||!M.isValid())return!1;W=K(W)||"millisecond";return"millisecond"===W?this.valueOf()<M.valueOf():this.clone().endOf(W).valueOf()<M.valueOf()};Za.isBetween=function(M,W,ma,sa){M=x(M)?M:Ha(M);W=x(W)?W:Ha(W);if(!(this.isValid()&&M.isValid()&&W.isValid()))return!1;
sa=sa||"()";return("("===sa[0]?this.isAfter(M,ma):!this.isBefore(M,ma))&&(")"===sa[1]?this.isBefore(W,ma):!this.isAfter(W,ma))};Za.isSame=function(M,W){M=x(M)?M:Ha(M);if(!this.isValid()||!M.isValid())return!1;W=K(W)||"millisecond";if("millisecond"===W)return this.valueOf()===M.valueOf();M=M.valueOf();return this.clone().startOf(W).valueOf()<=M&&M<=this.clone().endOf(W).valueOf()};Za.isSameOrAfter=function(M,W){return this.isSame(M,W)||this.isAfter(M,W)};Za.isSameOrBefore=function(M,W){return this.isSame(M,
W)||this.isBefore(M,W)};Za.isValid=function(){return d(this)};Za.lang=Ec;Za.locale=Hb;Za.localeData=Mb;Za.max=Vc;Za.min=Uc;Za.parsingFlags=function(){return l({},c(this))};Za.set=function(M,W){if("object"===typeof M){M=I(M);W=J(M);var ma;for(ma=0;ma<W.length;ma++)this[W[ma].unit](M[W[ma].unit])}else if(M=K(M),F(this[M]))return this[M](W);return this};Za.startOf=function(M){M=K(M);if(void 0===M||"millisecond"===M||!this.isValid())return this;var W=this._isUTC?ac:Wb;switch(M){case "year":var ma=W(this.year(),
0,1);break;case "quarter":ma=W(this.year(),this.month()-this.month()%3,1);break;case "month":ma=W(this.year(),this.month(),1);break;case "week":ma=W(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":ma=W(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":ma=W(this.year(),this.month(),this.date());break;case "hour":ma=this._d.valueOf();ma-=Fb(ma+(this._isUTC?0:6E4*this.utcOffset()),36E5);break;case "minute":ma=this._d.valueOf();ma-=Fb(ma,
6E4);break;case "second":ma=this._d.valueOf(),ma-=Fb(ma,1E3)}this._d.setTime(ma);b.updateOffset(this,!0);return this};Za.subtract=Xc;Za.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};Za.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};Za.toDate=function(){return new Date(this.valueOf())};Za.toISOString=
function(M){if(!this.isValid())return null;var W=(M=!0!==M)?this.clone().utc():this;return 0>W.year()||9999<W.year()?E(W,M?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):F(Date.prototype.toISOString)?M?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",E(W,"Z")):E(W,M?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};Za.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var M="moment",W="";
this.isLocal()||(M=0===this.utcOffset()?"moment.utc":"moment.parseZone",W="Z");M="["+M+'("]';var ma=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(M+ma+"-MM-DD[T]HH:mm:ss.SSS"+(W+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol.for&&(Za[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});Za.toJSON=function(){return this.isValid()?this.toISOString():null};Za.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};
Za.unix=function(){return Math.floor(this.valueOf()/1E3)};Za.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};Za.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};Za.eraName=function(){var M,W=this.localeData().eras();var ma=0;for(M=W.length;ma<M;++ma){var sa=this.clone().startOf("day").valueOf();if(W[ma].since<=sa&&sa<=W[ma].until||W[ma].until<=sa&&sa<=W[ma].since)return W[ma].name}return""};Za.eraNarrow=function(){var M,
W=this.localeData().eras();var ma=0;for(M=W.length;ma<M;++ma){var sa=this.clone().startOf("day").valueOf();if(W[ma].since<=sa&&sa<=W[ma].until||W[ma].until<=sa&&sa<=W[ma].since)return W[ma].narrow}return""};Za.eraAbbr=function(){var M,W=this.localeData().eras();var ma=0;for(M=W.length;ma<M;++ma){var sa=this.clone().startOf("day").valueOf();if(W[ma].since<=sa&&sa<=W[ma].until||W[ma].until<=sa&&sa<=W[ma].since)return W[ma].abbr}return""};Za.eraYear=function(){var M,W=this.localeData().eras();var ma=
0;for(M=W.length;ma<M;++ma){var sa=W[ma].since<=W[ma].until?1:-1;var La=this.clone().startOf("day").valueOf();if(W[ma].since<=La&&La<=W[ma].until||W[ma].until<=La&&La<=W[ma].since)return(this.year()-b(W[ma].since).year())*sa+W[ma].offset}return this.year()};Za.year=Dc;Za.isLeapYear=function(){return Q(this.year())};Za.weekYear=function(M){return jc.call(this,M,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};Za.isoWeekYear=function(M){return jc.call(this,M,this.isoWeek(),
this.isoWeekday(),1,4)};Za.quarter=Za.quarters=function(M){return null==M?Math.ceil((this.month()+1)/3):this.month(3*(M-1)+this.month()%3)};Za.month=ta;Za.daysInMonth=function(){return ka(this.year(),this.month())};Za.week=Za.weeks=function(M){var W=this.localeData().week(this);return null==M?W:this.add(7*(M-W),"d")};Za.isoWeek=Za.isoWeeks=function(M){var W=wa(this,1,4).week;return null==M?W:this.add(7*(M-W),"d")};Za.weeksInYear=function(){var M=this.localeData()._week;return la(this.year(),M.dow,
M.doy)};Za.weeksInWeekYear=function(){var M=this.localeData()._week;return la(this.weekYear(),M.dow,M.doy)};Za.isoWeeksInYear=function(){return la(this.year(),1,4)};Za.isoWeeksInISOWeekYear=function(){return la(this.isoWeekYear(),1,4)};Za.date=Fc;Za.day=Za.days=function(M){if(!this.isValid())return null!=M?this:NaN;var W=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=M){var ma=this.localeData();"string"===typeof M&&(isNaN(M)?(M=ma.weekdaysParse(M),M="number"===typeof M?M:null):M=parseInt(M,
10));return this.add(M-W,"d")}return W};Za.weekday=function(M){if(!this.isValid())return null!=M?this:NaN;var W=(this.day()+7-this.localeData()._week.dow)%7;return null==M?W:this.add(M-W,"d")};Za.isoWeekday=function(M){if(!this.isValid())return null!=M?this:NaN;if(null!=M){var W=this.localeData();M="string"===typeof M?W.weekdaysParse(M)%7||7:isNaN(M)?null:M;return this.day(this.day()%7?M:M-7)}return this.day()||7};Za.dayOfYear=function(M){var W=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/
864E5)+1;return null==M?W:this.add(M-W,"d")};Za.hour=Za.hours=Tc;Za.minute=Za.minutes=Yc;Za.second=Za.seconds=Zc;Za.millisecond=Za.milliseconds=$c;Za.utcOffset=function(M,W,ma){var sa=this._offset||0,La;if(!this.isValid())return null!=M?this:NaN;if(null!=M){if("string"===typeof M){if(M=kb(sc,M),null===M)return this}else 16>Math.abs(M)&&!ma&&(M*=60);!this._isUTC&&W&&(La=-Math.round(this._d.getTimezoneOffset()));this._offset=M;this._isUTC=!0;null!=La&&this.add(La,"m");sa!==M&&(!W||this._changeInProgress?
Bb(this,eb(M-sa,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,b.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?sa:-Math.round(this._d.getTimezoneOffset())};Za.utc=function(M){return this.utcOffset(0,M)};Za.local=function(M){this._isUTC&&(this.utcOffset(0,M),this._isUTC=!1,M&&this.subtract(-Math.round(this._d.getTimezoneOffset()),"m"));return this};Za.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var M=
kb(Sc,this._i);null!=M?this.utcOffset(M):this.utcOffset(0,!0)}return this};Za.hasAlignedHourOffset=function(M){if(!this.isValid())return!1;M=M?Ha(M).utcOffset():0;return 0===(this.utcOffset()-M)%60};Za.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};Za.isLocal=function(){return this.isValid()?!this._isUTC:!1};Za.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};Za.isUtc=pb;Za.isUTC=pb;Za.zoneAbbr=function(){return this._isUTC?
"UTC":""};Za.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};Za.dates=A("dates accessor is deprecated. Use date instead.",Fc);Za.months=A("months accessor is deprecated. Use month instead",ta);Za.years=A("years accessor is deprecated. Use year instead",Dc);Za.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(M,W){return null!=M?("string"!==typeof M&&(M=-M),this.utcOffset(M,W),this):-this.utcOffset()});
Za.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!e(this._isDSTShifted))return this._isDSTShifted;var M={};n(M,this);M=Ea(M);if(M._a){var W=M._isUTC?f(M._a):Ha(M._a);var ma;if(ma=this.isValid()){M=M._a;W=W.toArray();ma=Math.min(M.length,W.length);var sa=Math.abs(M.length-W.length),La=0,Va;for(Va=0;Va<ma;Va++)O(M[Va])!==O(W[Va])&&La++;ma=0<La+sa}this._isDSTShifted=ma}else this._isDSTShifted=!1;return this._isDSTShifted});
var mb=D.prototype;mb.calendar=function(M,W,ma){M=this._calendar[M]||this._calendar.sameElse;return F(M)?M.call(W,ma):M};mb.longDateFormat=function(M){var W=this._longDateFormat[M],ma=this._longDateFormat[M.toUpperCase()];if(W||!ma)return W;this._longDateFormat[M]=ma.match(Ka).map(function(sa){return"MMMM"===sa||"MM"===sa||"DD"===sa||"dddd"===sa?sa.slice(1):sa}).join("");return this._longDateFormat[M]};mb.invalidDate=function(){return this._invalidDate};mb.ordinal=function(M){return this._ordinal.replace("%d",
M)};mb.preparse=Yb;mb.postformat=Yb;mb.relativeTime=function(M,W,ma,sa){var La=this._relativeTime[ma];return F(La)?La(M,W,ma,sa):La.replace(/%d/i,M)};mb.pastFuture=function(M,W){M=this._relativeTime[0<M?"future":"past"];return F(M)?M(W):M.replace(/%s/i,W)};mb.set=function(M){var W;for(W in M)if(a(M,W)){var ma=M[W];F(ma)?this[W]=ma:this["_"+W]=ma}this._config=M;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};mb.eras=
function(M,W){var ma=this._eras||R("en")._eras;M=0;for(W=ma.length;M<W;++M){switch(typeof ma[M].since){case "string":var sa=b(ma[M].since).startOf("day");ma[M].since=sa.valueOf()}switch(typeof ma[M].until){case "undefined":ma[M].until=Infinity;break;case "string":sa=b(ma[M].until).startOf("day").valueOf(),ma[M].until=sa.valueOf()}}return ma};mb.erasParse=function(M,W,ma){var sa,La=this.eras();M=M.toUpperCase();var Va=0;for(sa=La.length;Va<sa;++Va){var Xa=La[Va].name.toUpperCase();var hb=La[Va].abbr.toUpperCase();
var ob=La[Va].narrow.toUpperCase();if(ma)switch(W){case "N":case "NN":case "NNN":if(hb===M)return La[Va];break;case "NNNN":if(Xa===M)return La[Va];break;case "NNNNN":if(ob===M)return La[Va]}else if(0<=[Xa,hb,ob].indexOf(M))return La[Va]}};mb.erasConvertYear=function(M,W){var ma=M.since<=M.until?1:-1;return void 0===W?b(M.since).year():b(M.since).year()+(W-M.offset)*ma};mb.erasAbbrRegex=function(M){a(this,"_erasAbbrRegex")||cc.call(this);return M?this._erasAbbrRegex:this._erasRegex};mb.erasNameRegex=
function(M){a(this,"_erasNameRegex")||cc.call(this);return M?this._erasNameRegex:this._erasRegex};mb.erasNarrowRegex=function(M){a(this,"_erasNarrowRegex")||cc.call(this);return M?this._erasNarrowRegex:this._erasRegex};mb.months=function(M,W){return M?y(this._months)?this._months[M.month()]:this._months[(this._months.isFormat||Cc).test(W)?"format":"standalone"][M.month()]:y(this._months)?this._months:this._months.standalone};mb.monthsShort=function(M,W){return M?y(this._monthsShort)?this._monthsShort[M.month()]:
this._monthsShort[Cc.test(W)?"format":"standalone"][M.month()]:y(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};mb.monthsParse=function(M,W,ma){var sa;if(this._monthsParseExact){a:{M=M.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],sa=0;12>sa;++sa){var La=f([2E3,sa]);this._shortMonthsParse[sa]=this.monthsShort(La,"").toLocaleLowerCase();this._longMonthsParse[sa]=this.months(La,"").toLocaleLowerCase()}if(ma)W=
"MMM"===W?wb.call(this._shortMonthsParse,M):wb.call(this._longMonthsParse,M);else if("MMM"===W){W=wb.call(this._shortMonthsParse,M);if(-1!==W)break a;W=wb.call(this._longMonthsParse,M)}else{W=wb.call(this._longMonthsParse,M);if(-1!==W)break a;W=wb.call(this._shortMonthsParse,M)}W=-1!==W?W:null}return W}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(sa=0;12>sa;sa++)if(La=f([2E3,sa]),ma&&!this._longMonthsParse[sa]&&(this._longMonthsParse[sa]=new RegExp("^"+
this.months(La,"").replace(".","")+"$","i"),this._shortMonthsParse[sa]=new RegExp("^"+this.monthsShort(La,"").replace(".","")+"$","i")),ma||this._monthsParse[sa]||(La="^"+this.months(La,"")+"|^"+this.monthsShort(La,""),this._monthsParse[sa]=new RegExp(La.replace(".",""),"i")),ma&&"MMMM"===W&&this._longMonthsParse[sa].test(M)||ma&&"MMM"===W&&this._shortMonthsParse[sa].test(M)||!ma&&this._monthsParse[sa].test(M))return sa};mb.monthsRegex=function(M){if(this._monthsParseExact)return a(this,"_monthsRegex")||
Ba.call(this),M?this._monthsStrictRegex:this._monthsRegex;a(this,"_monthsRegex")||(this._monthsRegex=oc);return this._monthsStrictRegex&&M?this._monthsStrictRegex:this._monthsRegex};mb.monthsShortRegex=function(M){if(this._monthsParseExact)return a(this,"_monthsRegex")||Ba.call(this),M?this._monthsShortStrictRegex:this._monthsShortRegex;a(this,"_monthsShortRegex")||(this._monthsShortRegex=oc);return this._monthsShortStrictRegex&&M?this._monthsShortStrictRegex:this._monthsShortRegex};mb.week=function(M){return wa(M,
this._week.dow,this._week.doy).week};mb.firstDayOfYear=function(){return this._week.doy};mb.firstDayOfWeek=function(){return this._week.dow};mb.weekdays=function(M,W){W=y(this._weekdays)?this._weekdays:this._weekdays[M&&!0!==M&&this._weekdays.isFormat.test(W)?"format":"standalone"];return!0===M?Aa(W,this._week.dow):M?W[M.day()]:W};mb.weekdaysMin=function(M){return!0===M?Aa(this._weekdaysMin,this._week.dow):M?this._weekdaysMin[M.day()]:this._weekdaysMin};mb.weekdaysShort=function(M){return!0===M?Aa(this._weekdaysShort,
this._week.dow):M?this._weekdaysShort[M.day()]:this._weekdaysShort};mb.weekdaysParse=function(M,W,ma){var sa;if(this._weekdaysParseExact)return da.call(this,M,W,ma);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(sa=0;7>sa;sa++){var La=f([2E3,1]).day(sa);ma&&!this._fullWeekdaysParse[sa]&&(this._fullWeekdaysParse[sa]=new RegExp("^"+this.weekdays(La,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[sa]=new RegExp("^"+
this.weekdaysShort(La,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[sa]=new RegExp("^"+this.weekdaysMin(La,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[sa]||(La="^"+this.weekdays(La,"")+"|^"+this.weekdaysShort(La,"")+"|^"+this.weekdaysMin(La,""),this._weekdaysParse[sa]=new RegExp(La.replace(".",""),"i"));if(ma&&"dddd"===W&&this._fullWeekdaysParse[sa].test(M)||ma&&"ddd"===W&&this._shortWeekdaysParse[sa].test(M)||ma&&"dd"===W&&this._minWeekdaysParse[sa].test(M)||!ma&&this._weekdaysParse[sa].test(M))return sa}};
mb.weekdaysRegex=function(M){if(this._weekdaysParseExact)return a(this,"_weekdaysRegex")||fa.call(this),M?this._weekdaysStrictRegex:this._weekdaysRegex;a(this,"_weekdaysRegex")||(this._weekdaysRegex=oc);return this._weekdaysStrictRegex&&M?this._weekdaysStrictRegex:this._weekdaysRegex};mb.weekdaysShortRegex=function(M){if(this._weekdaysParseExact)return a(this,"_weekdaysRegex")||fa.call(this),M?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=
oc);return this._weekdaysShortStrictRegex&&M?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};mb.weekdaysMinRegex=function(M){if(this._weekdaysParseExact)return a(this,"_weekdaysRegex")||fa.call(this),M?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=oc);return this._weekdaysMinStrictRegex&&M?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};mb.isPM=function(M){return"p"===(M+"").toLowerCase().charAt(0)};mb.meridiem=function(M,W,
ma){return 11<M?ma?"pm":"PM":ma?"am":"AM"};Qa("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(M){var W=M%10;W=1===O(M%100/10)?"th":1===W?"st":2===W?"nd":3===W?"rd":"th";return M+W}});b.lang=A("moment.lang is deprecated. Use moment.locale instead.",Qa);b.langData=A("moment.langData is deprecated. Use moment.localeData instead.",
R);var Rb=Math.abs,ad=Ib("ms"),bd=Ib("s"),cd=Ib("m"),dd=Ib("h"),ed=Ib("d"),fd=Ib("w"),gd=Ib("M"),hd=Ib("Q"),id=Ib("y"),jd=Pb("milliseconds"),kd=Pb("seconds"),ld=Pb("minutes"),md=Pb("hours"),nd=Pb("days"),od=Pb("months"),pd=Pb("years"),Sb=Math.round,fc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},wc=Math.abs,lb=bb.prototype;lb.isValid=function(){return this._isValid};lb.abs=function(){var M=this._data;this._milliseconds=Rb(this._milliseconds);this._days=Rb(this._days);this._months=Rb(this._months);M.milliseconds=
Rb(M.milliseconds);M.seconds=Rb(M.seconds);M.minutes=Rb(M.minutes);M.hours=Rb(M.hours);M.months=Rb(M.months);M.years=Rb(M.years);return this};lb.add=function(M,W){return lc(this,M,W,1)};lb.subtract=function(M,W){return lc(this,M,W,-1)};lb.as=function(M){if(!this.isValid())return NaN;var W=this._milliseconds;M=K(M);if("month"===M||"quarter"===M||"year"===M){var ma=this._days+W/864E5;ma=this._months+4800*ma/146097;switch(M){case "month":return ma;case "quarter":return ma/3;case "year":return ma/12}}else switch(ma=
this._days+Math.round(146097*this._months/4800),M){case "week":return ma/7+W/6048E5;case "day":return ma+W/864E5;case "hour":return 24*ma+W/36E5;case "minute":return 1440*ma+W/6E4;case "second":return 86400*ma+W/1E3;case "millisecond":return Math.floor(864E5*ma)+W;default:throw Error("Unknown unit "+M);}};lb.asMilliseconds=ad;lb.asSeconds=bd;lb.asMinutes=cd;lb.asHours=dd;lb.asDays=ed;lb.asWeeks=fd;lb.asMonths=gd;lb.asQuarters=hd;lb.asYears=id;lb.valueOf=function(){return this.isValid()?this._milliseconds+
864E5*this._days+this._months%12*2592E6+31536E6*O(this._months/12):NaN};lb._bubble=function(){var M=this._milliseconds,W=this._days,ma=this._months,sa=this._data;0<=M&&0<=W&&0<=ma||0>=M&&0>=W&&0>=ma||(M+=864E5*mc(146097*ma/4800+W),ma=W=0);sa.milliseconds=M%1E3;M=V(M/1E3);sa.seconds=M%60;M=V(M/60);sa.minutes=M%60;M=V(M/60);sa.hours=M%24;W+=V(M/24);M=V(4800*W/146097);ma+=M;W-=mc(146097*M/4800);M=V(ma/12);sa.days=W;sa.months=ma%12;sa.years=M;return this};lb.clone=function(){return eb(this)};lb.get=function(M){M=
K(M);return this.isValid()?this[M+"s"]():NaN};lb.milliseconds=jd;lb.seconds=kd;lb.minutes=ld;lb.hours=md;lb.days=nd;lb.weeks=function(){return V(this.days()/7)};lb.months=od;lb.years=pd;lb.humanize=function(M,W){if(!this.isValid())return this.localeData().invalidDate();var ma=!1,sa=fc;"object"===typeof M&&(W=M,M=!1);"boolean"===typeof M&&(ma=M);"object"===typeof W&&(sa=Object.assign({},fc,W),null!=W.s&&null==W.ss&&(sa.ss=W.s-1));M=this.localeData();W=!ma;var La=eb(this).abs(),Va=Sb(La.as("s")),Xa=
Sb(La.as("m")),hb=Sb(La.as("h")),ob=Sb(La.as("d")),jb=Sb(La.as("M")),xb=Sb(La.as("w"));La=Sb(La.as("y"));Va=Va<=sa.ss&&["s",Va]||Va<sa.s&&["ss",Va]||1>=Xa&&["m"]||Xa<sa.m&&["mm",Xa]||1>=hb&&["h"]||hb<sa.h&&["hh",hb]||1>=ob&&["d"]||ob<sa.d&&["dd",ob];null!=sa.w&&(Va=Va||1>=xb&&["w"]||xb<sa.w&&["ww",xb]);Va=Va||1>=jb&&["M"]||jb<sa.M&&["MM",jb]||1>=La&&["y"]||["yy",La];Va[2]=W;Va[3]=0<+this;Va[4]=M;W=Ab.apply(null,Va);ma&&(W=M.pastFuture(+this,W));return M.postformat(W)};lb.toISOString=Ja;lb.toString=
Ja;lb.toJSON=Ja;lb.locale=Hb;lb.localeData=Mb;lb.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ja);lb.lang=Ec;v("X",0,0,"unix");v("x",0,0,"valueOf");ca("x",rc);ca("X",/[+-]?\d+(\.\d{1,3})?/);N("X",function(M,W,ma){ma._d=new Date(1E3*parseFloat(M))});N("x",function(M,W,ma){ma._d=new Date(O(M))});b.version="2.29.1";var Gc=Ha;b.fn=Za;b.min=function(){var M=[].slice.call(arguments,0);return Ua("isBefore",M)};b.max=function(){var M=[].slice.call(arguments,
0);return Ua("isAfter",M)};b.now=function(){return Date.now?Date.now():+new Date};b.utc=f;b.unix=function(M){return Ha(1E3*M)};b.months=function(M,W){return kc(M,W,"months")};b.isDate=h;b.locale=Qa;b.invalid=u;b.duration=eb;b.isMoment=x;b.weekdays=function(M,W,ma){return dc(M,W,ma,"weekdays")};b.parseZone=function(){return Ha.apply(null,arguments).parseZone()};b.localeData=R;b.isDuration=ab;b.monthsShort=function(M,W){return kc(M,W,"monthsShort")};b.weekdaysMin=function(M,W,ma){return dc(M,W,ma,"weekdaysMin")};
b.defineLocale=va;b.updateLocale=function(M,W){if(null!=W){var ma=xc;if(null!=sb[M]&&null!=sb[M].parentLocale)sb[M].set(w(sb[M]._config,W));else{var sa=Sa(M);null!=sa&&(ma=sa._config);W=w(ma,W);null==sa&&(W.abbr=M);W=new D(W);W.parentLocale=sb[M];sb[M]=W}Qa(M)}else null!=sb[M]&&(null!=sb[M].parentLocale?(sb[M]=sb[M].parentLocale,M===Qa()&&Qa(M)):null!=sb[M]&&delete sb[M]);return sb[M]};b.locales=function(){return Ma(sb)};b.weekdaysShort=function(M,W,ma){return dc(M,W,ma,"weekdaysShort")};b.normalizeUnits=
K;b.relativeTimeRounding=function(M){return void 0===M?Sb:"function"===typeof M?(Sb=M,!0):!1};b.relativeTimeThreshold=function(M,W){if(void 0===fc[M])return!1;if(void 0===W)return fc[M];fc[M]=W;"s"===M&&(fc.ss=W-1);return!0};b.calendarFormat=function(M,W){M=M.diff(W,"days",!0);return-6>M?"sameElse":-1>M?"lastWeek":0>M?"lastDay":1>M?"sameDay":2>M?"nextDay":7>M?"nextWeek":"sameElse"};b.prototype=Za;b.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",
DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return b})},"arcgisonline/esriGeowConfig":function(){define([],function(){return window.esriGeowConfig||{}})},"arcgisonline/pages/utils/formatters":function(){define("require exports tslib ../pageUtil ./arrays ./icons dojo/i18n!../../nls/arcgisonline dojo/date/locale dojo/number dojo/text!../dijit/Card/_Owner.html dojo/text!../dijit/Card/_OwnerVerified.html dojo/string moment/moment".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);return function(){function u(){}u.timeFromPresent=function(n){return d.default.utc(n).fromNow()};u.fullDate=function(n){return n&&-1<n?h.default.format(new Date(n),{selector:"date",formatLength:"medium"}):""};u.timeOnly=function(n){return n&&
-1<n?h.default.format(new Date(n),{selector:"time",formatLength:"short"}):""};u.fullDateEnhanced=function(n){var t=d.default(new Date).diff(d.default(n),"days"),x=d.default(new Date).isSame(n,"day");return x?g.default.filters.today:!x&&2>t?g.default.myOrganization.membersTab.yesterday:15>t?c.default.substitute(g.default.myOrganization.membersTab.daysAgo,{num:t}):this.fullDate(n)};u.completeDate=function(n){return n&&-1<n?h.default.format(new Date(n),{formatLength:"long"}):""};u.capitalize=function(n){return n.charAt(0).toUpperCase()+
n.slice(1)};u.shortenNumber=function(n){return 1E6<=n?m.default.format(Math.round(n/1E5)/10)+"M":1E3<=n?m.default.format(Math.round(n/100)/10)+"K":""+n};u.empty=function(n){return null!==n&&void 0!==n?n:""};u.hide=function(n){return n?"":"hide"};u.show=function(n){return n?"hide":""};u.firstChar=function(n){var t;return null!==(t=null===n||void 0===n?void 0:n.charAt(0).toUpperCase())&&void 0!==t?t:""};u.stripHTML=function(n){var t,x;n=(new DOMParser).parseFromString(n,"text/html");return null!==(x=
n.body&&(null!==(t=n.body.textContent)&&void 0!==t?t:n.body.innerText))&&void 0!==x?x:""};u.formatCategoryChip=function(n){var t=n;"/"===(null===n||void 0===n?void 0:n[0])&&(t=n.slice(1));return t=t.split("/").join(" / ")};u.lowerCase=function(n){var t;return null!==(t=(null===n||void 0===n?void 0:n.toLowerCase)&&n.toLowerCase())&&void 0!==t?t:""};u.hyphenate=function(n){return(n||"").replace(/\s+/g,"-")};u.formatDisplayName=function(n,t,x){var A=(null===n||void 0===n?void 0:n.portal)&&n.portal.portalUser&&
n.portal.portalUser.userRole;A=n&&(n.isAdminView?A&&A.canUpdateOrgItems():n.canUpdate);var B="Data Store"===(null===n||void 0===n?void 0:n.type);n&&A&&t&&!n.isUtilityNetwork&&(n.isHostedService?x+=" ("+(n.isDataView?g.default.viewsWidget.hostedView:"Feature Service"===n.type?g.default.viewsWidget.hostedData:g.default.viewsWidget.hostedService)+")":n.isLocatorView?x+=" ("+g.default.viewsWidget.locatorView+")":n.isPhotoLocations&&(x+=" ("+g.default.viewsWidget.photoLocations+")"));B&&(x=a.default.formatDataStoreItem(x,
n.typeKeywords));return x};u.formatNumViews=function(n){return m.default.format(null!==n&&void 0!==n?n:0,{pattern:"#,###,###,##0"})};u.formatViewsLabel=function(n){n="file"!==n.classification||k.default.includes(n.types,"is-views")||k.default.includes(n.types,"is-pdf")?"viewsColon":"downloadsLbl";return g.default.viewsWidget[n]};u.formatOwnerText=function(n,t,x){var A,B,F;if(t)return null!==(B=null===(A=n.verified)||void 0===A?void 0:A.name)&&void 0!==B?B:n.owner;t=(null===(F=n.verified)||void 0===
F?void 0:F.name)&&n.verified.url;F=c.default.substitute(l.default,{item:n,i18n:g.default});return t?(n=c.default.substitute(f.default,{item:n,i18n:g.default}),x?'\x3cspan class\x3d"js-owner-section inline-block"\x3e'+n.replace("js-owner-section","")+' \x3c/span\x3e\x3cdiv class\x3d"item__managed-by-wrapper"\x3e'+g.default.itemProperties.managedByOwner+" "+F.replace("js-owner-section","")+"\x3c/div\x3e":n):F};u.getAccess=function(n){return g.default.itemSharingLabel[n]};u.getAccessIcon=function(n){return{private:e.default.lock["16"],
shared:e.default.users["16"],org:e.default.organization["16"],public:e.default.globe["16"]}[n]};u.getGroupAccess=function(n){return{public:g.default.groupsPage.everyone,private:g.default.groupsPage.groupMembers,org:g.default.groupsPage.organization}[n]};u.getGroupAccessIcon=function(n){return{public:e.default.inline.globe["16"],private:e.default.inline.lock["16"],org:e.default.inline.organization["16"]}[n]};return u}()})},"arcgisonline/pages/pageUtil":function(){define("require exports tslib ../esriGeowConfig ../map/core/canUseForPublish ./dijit/Alert ./utils/arrays ./utils/strings ./utils/dom ../sharing/util ../sharing/dijit/dialog/DownloadImageDlg dijit/registry dijit/Dialog dojo/_base/lang dojo/_base/kernel dojo/dom-attr dojo/dom-construct dojo/Deferred dojo/json dojo/on dojo/hash dojo/string dojo/number dojo/query dojo/sniff dojo/keys dojo/promise/all dojo/io-query esri/lang esri/arcgis/Portal esri/geometry/Point esri/tileUtils esri/urlUtils esri/tasks/Geoprocessor dojo/i18n!../nls/arcgisonline".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v,z,C,E,G,H,K,I,J,Q,V,O){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);u=r.__importDefault(u);n=r.__importDefault(n);t=r.__importDefault(t);x=r.__importDefault(x);A=r.__importDefault(A);B=r.__importDefault(B);F=r.__importDefault(F);w=r.__importDefault(w);D=r.__importDefault(D);
q=r.__importDefault(q);v=r.__importDefault(v);z=r.__importDefault(z);C=r.__importDefault(C);E=r.__importDefault(E);G=r.__importDefault(G);H=r.__importDefault(H);K=r.__importDefault(K);I=r.__importDefault(I);J=r.__importDefault(J);Q=r.__importDefault(Q);V=r.__importDefault(V);O=r.__importDefault(O);return function(){function S(){}S.editorDefaults=function(L){return{id:L,"aria-label":L,plugins:["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull",
"|","insertOrderedList","insertUnorderedList","indent","outdent","|","createEsriLink","unlink","insertEsriImage","removeFormat","|","undo","redo","|","viewsourcesanitize","|",{name:"dijit._editor.plugins.FontChoice",command:"fontSize",class:"dijitFontSizeWrap",custom:["2","3","4","5","6"]}],style:"font-family: '"+("vi"===(a.default.userInfo&&a.default.userInfo.culture)?"SST Vietnamese":"Avenir Next")+"', 'Avenir', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif; font-size: 15px;",height:"140px"}};
S.tagDefaults=function(L){return{id:L,minWidth:"100%",maxWidth:"100%",required:!0}};S.getQueryParams=function(){return G.default.queryToObject(window.location.search.slice(1))};S.setQueryParams=function(L,Y){S[Y?"pushCurrentLocation":"replaceCurrentLocation"](window.location.pathname+"?"+G.default.objectToQuery(L)+window.location.hash)};S.updateQueryParams=function(L,Y){S.setQueryParams(r.__assign(r.__assign({},S.getQueryParams()),L),Y)};S.removeQueryParams=function(L,Y){var ca=S.getQueryParams();
L.forEach(function(U){return delete ca[U]});S.setQueryParams(ca,Y)};S.clearAllQueryParams=function(){S.setQueryParams({})};S.replaceCurrentLocation=function(L){history&&history.replaceState&&history.replaceState({},document.title,L)};S.pushCurrentLocation=function(L){null===history||void 0===history?void 0:history.pushState({},document.title,L)};S.applyCSSClassToStringMatch=function(L,Y,ca){var U=Y.indexOf(L),X=Y.slice(0,U),Z=Y.slice(U,U+L.length),N=Y.slice(U+L.length);return-1<U?0===U?(L=Y.slice(0,
L.length),'\x3cspan class\x3d"'+ca+'"\x3e'+L+"\x3c/span\x3e"+N):X+'\x3cspan class\x3d"'+ca+'"\x3e'+Z+"\x3c/span\x3e"+N:Y};S.isEmptyObject=function(L){for(var Y in L)if(L.hasOwnProperty(Y))return!1;return!0};S.isJson=function(L){try{B.default.parse(L)}catch(Y){return!1}return!0};S.extentToString=function(L){return L=L instanceof Array&&2===L.length&&2===L[0].length&&2===L[1].length?[L[0].join(","),L[1].join(",")].join():L&&L+""||""};S.getClosestValue=function(L,Y,ca){return ca-L>=Y-ca?Y:L};S.findClosestValue=
function(L,Y){if(Y<=L[0])return L[0];if(Y>=L[L.length-1])return L[L.length-1];for(var ca=0,U=L.length,X=0;ca<U;){X=Math.floor((ca+U)/2);if(L[X]===Y)break;if(Y<L[X]){if(0<X&&Y>L[X-1])return S.getClosestValue(L[X-1],L[X],Y);U=X}else{if(X<L.length-1&&Y<L[X+1])return S.getClosestValue(L[X],L[X+1],Y);ca=X+1}}return L[X]};S.isFavorite=function(L){var Y=L.portal,ca=Y.getPortalUser();ca=ca&&ca.favGroupId;var U=new A.default;H.default.isDefined(L.isFavorite)?U.resolve(L.isFavorite):ca?(L.isFavorite=!1,Y.queryItems('(group:"'+
ca+'" AND id:"'+L.id+'")',!0).then(function(X){L.isFavorite=X&&0<X.total;U.resolve(L.isFavorite)},function(){U.resolve(!1)})):(L.isFavorite=!1,U.resolve(!1));return U};S.isConfigurableApplication=function(L){var Y=new A.default,ca=L.owner,U=L.itemData||{},X=L.itemControl&&-1<L.itemControl.indexOf("admin"),Z=L.typeKeywords||[],N=Z.some(function(aa){return aa.match(/(sourceId#).*/gi)});H.default.isDefined(L.isConfigurableApp)?Y.resolve(L.isConfigurableApp):L.portal.isPortal&&!L.isOwner&&X&&-1<ca.indexOf("esri_")?
(L.isConfigurableApp=!1,Y.resolve(!1)):L.type&&(0===L.type.indexOf("Hub")&&"Hub Initiative Template"!==L.type&&"Hub Event"!==L.type||"Site Application"===L.type)?(L.isConfigurableApp=L.canUpdate,Y.resolve(L.isConfigurableApp)):L.canUpdate&&"Web Mapping Application"===L.type?(L.isConfigurableApp=!1,g.default.includes(Z,"WABTemplate")?(L.isConfigurableApp=!1,Y.resolve(!1)):g.default.includes(Z,"selfConfigured")?(L.isConfigurableApp=U&&(U.source||l.default.isHostedTemplateItem(L.url)||!N),Y.resolve(L.isConfigurableApp)):
g.default.includes(Z,"configurableApp")?(L.isConfigurableApp=!0,Y.resolve(L.isConfigurableApp)):U&&U.source?l.default.request({url:L.portal.url+"content/items/"+U.source+"/data"}).then(function(aa){L.isConfigurableApp=!(!aa||!aa.configurationSettings);Y.resolve(L.isConfigurableApp)},function(){L.isConfigurableApp=!1;Y.resolve(L.isConfigurableApp)}):Y.resolve(!1)):(L.isConfigurableApp=!1,Y.resolve(!1));return Y};S.isFilePublishableByUser=function(L){var Y=new A.default,ca=L.portal,U=ca.getPortalUser(),
X=null===U||void 0===U?void 0:U.userRole,Z=ca.supportsHostedServices;U=ca.helperServices&&ca.helperServices.rasterAnalytics&&H.default.isDefined(ca.helperServices.rasterAnalytics.url);var N=X&&X.canCreateItem();N=(Z=Z&&N&&L.isAdmin)&&X.canPublishTiles();var aa=Z&&X.canPublishFeatures();X=Z&&X.canPublishScenes();var ka=L.resultData&&L.resultData.length||null;U=ca.isPortal&&Z&&U;ca=!ca.isPortal||ca.supportsSceneServices;ca=H.default.isDefined(L.canPublishFile)?L.canPublishFile:aa&&(g.default.includes(L.types,
"is-feature")||g.default.includes(L.types,"is-featureCollection")&&!ka&&!L.isMarkup)||N&&g.default.includes(L.types,"is-tile")||X&&ca&&g.default.includes(L.types,"is-scene-package")||N&&g.default.includes(L.types,"is-vector-tile")||U&&g.default.includes(L.types,"is-image-collection")||Z&&g.default.includes(L.typeKeywords,"Photo locations")||Z&&g.default.includes(L.types,"is-notebook")?!0:!1;L.canPublishFile=ca;Y.resolve(ca);return Y};S.isServicePublishableByUser=function(L,Y){var ca=new A.default,
U=L.portal.getPortalUser();U=(U=null===U||void 0===U?void 0:U.userRole)&&U.canCreateItem();var X=L.serviceInfo||{},Z=L.isSDS;Y=L.isTable&&!Y;var N=L.isLocationTrackingService;Y=!(L.isMultiServicesView||X.isMultiServicesView||!L.isHostedService||"Feature Service"!==L.type||!U||!Z||Y||N);L.canPublish=Y;ca.resolve(Y);return ca};S.canPublishTileServiceFromFeatureService=function(L){var Y=new A.default,ca=L.portal.getPortalUser();ca=null===ca||void 0===ca?void 0:ca.userRole;var U=S.isServicePublishableByUser(L)&&
L.isAdmin&&ca.canPublishTiles(),X=g.default.includes(L.typeKeywords,"Spatiotemporal"),Z=(L.resultData||[]).filter(function(aa){return"Map Service"===aa.type});ca=L.featureLayers;var N=L.isHostedService&&(ca||[]).every(function(aa){return S.canUseForPublish(L,aa,!0)});S.isServicePublishableByUser(L).then(function(aa){aa=!(!(aa&&U&&N)||X||Z&&Z.length);L.canPublishTiles=aa;Y.resolve(aa)});return Y};S.canPublishVectorTileServiceFromFeatureService=function(L){var Y=new A.default,ca=null===a.default||void 0===
a.default?void 0:a.default.publishVectorTilesFromFeaturesEnabled,U=(L.resultData||[]).filter(function(X){return"Vector Tile Service"===X.type});S.isServicePublishableByUser(L).then(function(X){X=!(!ca||!X||U&&U.length);L.canPublishVectorTiles=X;Y.resolve(X)});return Y};S.canPublishWFSServiceFromFeatureService=function(L){var Y=new A.default,ca=L.portal,U=ca.getPortalUser();U=null===U||void 0===U?void 0:U.userRole;var X=g.default.includes(L.typeKeywords,"View Service"),Z=!X||X&&!ca.isPortal,N=S.isServicePublishableByUser(L)&&
L.isAdmin&&U.canPublishFeatures(),aa=(L.resultData||[]).filter(function(pa){return"WFS"===pa.type}),ka=g.default.includes(L.typeKeywords,"Spatiotemporal");S.isServicePublishableByUser(L).then(function(pa){pa=!(!(pa&&Z&&N)||ka||aa&&aa.length);L.canPublishWFS=pa;Y.resolve(pa)});return Y};S.canPublishSceneServiceFromFeatureService=function(L){var Y=this,ca=new A.default,U=L.portal,X=U.getPortalUser();X=null===X||void 0===X?void 0:X.userRole;var Z=S.isServicePublishableByUser(L),N=U&&!U.isPortal&&Z&&
L.isAdmin&&X.canPublishScenes();U=L.featureLayers||[];var aa=L.isHostedService&&U.every(function(Da){return Y.canUseForPublish(L,Da,!0,"scene")}),ka=L.tables||[],pa=U.every(function(Da){return Da&&"esriGeometryPoint"===Da.geometryType}),ta=U.every(function(Da){return Da&&"esriGeometryMultiPatch"===Da.geometryType}),Ba=(L.resultData||[]).filter(function(Da){return"Scene Service"===Da.type});S.isServicePublishableByUser(L).then(function(Da){Da=!(!(Da&&N&&aa&&(pa||ta))||Ba&&Ba.length||ka.length||L.hasGeocodeReviewTable);
L.canPublishScenes=Da;ca.resolve(Da)});return ca};S.canPublishViewServiceFromFeatureService=function(L){var Y=new A.default,ca=L.portal||{},U=ca.getPortalUser();U=null===U||void 0===U?void 0:U.userRole;var X=L.isAdmin&&U.canPublishFeatures(),Z=S.isMultipatchFeatureService(L),N=L.isLocationTrackingService&&!ca.isPortal,aa=g.default.includes(L.typeKeywords,"View Service");S.isServicePublishableByUser(L,!0).then(function(ka){ka=Z||!ka||!X||aa||N?!1:!0;L.canPublishView=ka;Y.resolve(ka)});return Y};S.canPublishImageServiceAsTiled=
function(L){var Y,ca=new A.default,U=S.canPublishFromImageService(L),X=null===(Y=L.portal.getPortalUser())||void 0===Y?void 0:Y.userRole.canPublishTiledImagery();L.canPublishImageServiceAsTiled=U&&X&&!S.isTiledOnlyImageryService(L.serviceInfo);ca.resolve(L.canPublishImageServiceAsTiled);return ca};S.canPublishImageServiceAsDynamic=function(L){var Y,ca=new A.default,U=S.canPublishFromImageService(L),X=null===(Y=L.portal.getPortalUser())||void 0===Y?void 0:Y.userRole.canPublishDynamicImagery();L.canPublishImageServiceAsDynamic=
U&&X&&S.isTiledOnlyImageryService(L.serviceInfo);ca.resolve(L.canPublishImageServiceAsDynamic);return ca};S.canEnableAttachments=function(L){var Y=new A.default,ca=L.isDataView,U=L.isLocationTrackingService;ca=H.default.isDefined(L.canEnableAttachments)?L.canEnableAttachments:!(!L.isHostedService||ca||U||!L.canUpdate);L.canEnableAttachments=ca;Y.resolve(ca);return Y};S.canEditViewAttachments=function(L){H.default.isDefined(L.canEditViewAttachments)||(L.canEditViewAttachments=!!(L.isHostedService&&
L.isDataView&&L.canUpdate));return L.canEditViewAttachments};S.canAppendData=function(L){var Y=new A.default,ca=g.default.includes(L.typeKeywords,"View Service"),U=g.default.includes(L.typeKeywords,"Cloud Drive"),X=L.isLocationTrackingService;ca=!U&&!ca&&!X&&L.isAdmin&&L.isHostedService&&(L.portal.isPortal&&L.serviceInfo.supportsAppend||!L.portal.isPortal&&(L.layers||[]).some(function(Z){return Z.supportsAppend}));L.canAppendData=ca;Y.resolve(ca);return Y};S.canUseForPublish=function(L,Y,ca,U){L=
g.default.find(L.itemData&&L.itemData.layers||[],function(Z){return Z.id===Y.id});var X=u.default.clone(Y);L&&L.layerDefinition&&(X.drawingInfo=u.default.mixin(X.drawingInfo||{},L.layerDefinition.drawingInfo||{}));return k.default(u.default.mixin({},X),ca,U)};S.canPublishFromImageService=function(L){var Y,ca=L.portal,U=L.isAdmin,X=L.isOwner,Z=L.isHostedService,N=L.serviceInfo;L=L.type;var aa=null===(Y=ca.getPortalUser())||void 0===Y?void 0:Y.userRole;Y=Z&&!ca.isPortal;return"Image Service"===L&&(null===
N||void 0===N?void 0:N.bandCount)&&(U||X)&&Y&&(null===aa||void 0===aa?void 0:aa.canCreateItem())&&(null===aa||void 0===aa?void 0:aa.canPublishImageCollection())};S.isTiledOnlyImageryService=function(L){L=L.capabilities.split(",").map(function(Y){return Y.toLowerCase().trim()});return g.default.includes(L,"tilesonly")};S.isTiledImageryService=function(L){var Y=new A.default;L="Image Service"===L.type&&g.default.includesSome(L.typeKeywords,["Elevation 3D Layer","Tiled Imagery"]);Y.resolve(L);return Y};
S.isServiceEditableByUser=function(L){var Y=L.isOrgItem,ca=L.isHostedService,U=L.serviceInfo,X=L.canEditService,Z=L.portal,N=new A.default,aa=Z.getPortalUser();Z=(null===aa||void 0===aa?void 0:aa.userRole)&&(null===aa||void 0===aa?void 0:aa.userRole.canEditFeaturesFullControl());Y=aa&&Y;aa=-1<((null===U||void 0===U?void 0:U.capabilities)||"").indexOf("Editing");U=null===U||void 0===U?void 0:U.isMultiServicesView;H.default.isDefined(X)||(L.canEditService=!(!ca||U||!(L.canUpdate||aa&&Z&&Y)));N.resolve(L.canEditService);
return N};S.isExportableByUser=function(L){var Y,ca=L.portal,U=L.serviceInfo,X=L.isLocationTrackingService,Z=L.isHostedService,N=L.isAdmin,aa=L.type,ka=new A.default,pa=ca.getPortalUser();U=!!(-1<(null===(Y=null===U||void 0===U?void 0:U.capabilities)||void 0===Y?void 0:Y.indexOf("Extract")));Y=(null===pa||void 0===pa?void 0:pa.userRole)&&pa.userRole.canCreateItem();Y=pa&&U&&(!pa.isOrgUser||Y);H.default.isDefined(L.canExport)||(L.canExport=!(!Z||!pa||ca.isPortal&&(!ca.isPortal||X)||!("Feature Service"===
aa&&N||Y)));ka.resolve(L.canExport);return ka};S.isOverwriteableService=function(L,Y){var ca,U=L.type,X=L.serviceInfo,Z=L.adminServiceInfo,N=L.isPortal,aa=L.isSDS,ka=L.typeKeywords,pa=L.sourceData,ta=new A.default,Ba={shapefile:1,"file geodatabase":1,geojson:1};Z=null===(ca=N&&!aa?X:Z)||void 0===ca?void 0:ca.capabilities;ca=h.default.stringToArray(Z||"",",",!0);ca=g.default.includes(ca,"ChangeTracking");!Y&&g.default.includes(ka,"Cloud Drive")&&ta.resolve(!1);L.isHostedService&&"Feature Service"===
U&&L.serviceInfo&&!1===L.serviceInfo.sourceSchemaChangesAllowed&&ta.resolve(!1);!L.isAdmin||!L.isHostedService||"Feature Service"!==U||X.syncEnabled||L.isDataView||ca?ta.resolve(!1):pa&&pa.owner===L.owner&&(pa.type&&pa.type.toLowerCase())in Ba?ta.resolve(!0):!pa||"CSV"!==pa.type&&"Microsoft Excel"!==pa.type?ta.resolve(!1):S.fetchPublishParameters(L).then(function(Da){L.publishParameters=Da;ta.resolve(!!Da)});return ta};S.isOverwriteableCloudService=function(L){var Y=new A.default,ca=L.cloudProviderInfo,
U=L.sourceData;if(g.default.includes(L.typeKeywords,"Cloud Drive")&&ca&&ca.mimeType){var X=!U;L.sourceData=U||{type:-1!==ca.mimeType.indexOf("csv")?"CSV":"Microsoft Excel"};S.isOverwriteableService(L,!0).then(function(Z){X&&(L.sourceData=null);Y.resolve(!!Z)})}else Y.resolve(!1);return Y};S.isApplicationCreateableFromItem=function(L){var Y=new A.default,ca=L.portal.getPortalUser(),U=null===ca||void 0===ca?void 0:ca.userRole;U=U&&U.canCreateItem()||ca&&!ca.isOrgUser;var X=!1;if(H.default.isDefined(L.isApplicationCreateableFromItem))Y.resolve(L.isApplicationCreateableFromItem);
else{L.isApplicationCreateableFromItem=X;if(U)if(g.default.includes(L.types,"is-map")||g.default.includes(L.types,"is-scene"))L.isApplicationCreateableFromItem=!0,L.privileges.push("can-create-app"),g.default.includes(L.types,"is-map")&&a.default.showCreateDashboard&&ca&&ca.isOrgUser&&L.privileges.push("can-create-dashboard-item"),X=!0;else if(g.default.includes(L.typeKeywords,"Configurable")&&g.default.includes(L.typeKeywords,"createAppWithoutMap")&&!g.default.includes(L.typeKeywords,"Web AppBuilder for ArcGIS")||
g.default.includes(L.typeKeywords,"Web AppBuilder for ArcGIS")&&ca.isOrgUser)L.isApplicationCreateableFromItem=!0,L.types.push("is-hostedTemplate"),X=!0;Y.resolve(X)}return Y};S.isMultipatchFeatureService=function(L){var Y=L.isHostedService,ca=L.typeKeywords,U=L.serviceInfo;L="Feature Service"===L.type&&(Y||g.default.includes(ca,"Hosted"));U=((null===U||void 0===U?void 0:U.layers)||[]).some(function(X){return X&&X.geometryType&&"esriGeometryMultiPatch"===X.geometryType});return L&&U};S.registerItemActions=
function(L,Y,ca,U,X){v.default("[class*\x3djs-action-]",Y).forEach(function(Z){var N=t.default.get(Z,"data-action");ca[N]&&L.own(F.default(Z,"click",function(aa){aa.preventDefault();if(X&&X(N))aa.stopPropagation();else ca[N](u.default.mixin({},{evt:aa,item:L.item,user:L.portalUser,page:U,scope:L}))}))},L)};S.calculateExpectedTiles=function(L,Y,ca){var U=new I.default(Y.xmax,Y.ymin,Y.spatialReference);Y=new I.default(Y.xmin,Y.ymax,Y.spatialReference);Y=J.default.getContainingTileCoords(L,Y,ca);L=J.default.getContainingTileCoords(L,
U,ca);L=(L.row+1-Y.row)*(L.col+1-Y.col);return 0>=L?1:L};S.sizeInMB=function(L){var Y=L||0;0<L&&(Y=L/1048567);Y=Math.round(100*Y)/100;return q.default.format(Y)};S.getHashParts=function(){return w.default().split("/")};S.splitHashParts=function(L){return L?L.split("/"):[""]};S.removeUrlQueryParameter=function(L,Y){if(L){var ca=Q.default.urlToObject(L),U=ca.path,X=w.default()?"#"+w.default():"";if(!(Y&&ca.query&&ca.query[Y]))return L;delete ca.query[Y];L=0;for(var Z in ca.query)ca.query.hasOwnProperty(Z)&&
Z!==Y&&(U=""+U+(0===L?"?":"\x26")+Z+"\x3d"+encodeURIComponent(ca.query[Z]),L++);return U+X}return L};S.needsToken=function(L,Y){var ca=L.portal&&L.portal.getPortalUser(),U=L.serverToken||ca&&ca.token;return L&&"WFS"!==L.type&&ca&&((L.isServiceProxy||L.hasKMLItemData)&&"public"!==L.access||L.isHostedService&&(L.isAdmin||"public"!==L.access)||L.isFeatureCollection&&"public"!==L.access)?Y+(U?"?token\x3d"+U:""):Y};S.getNeededToken=function(L){var Y=L.portal&&L.portal.getPortalUser(),ca=L.serverToken||
Y&&Y.token;return L&&"WFS"!==L.type&&Y&&((L.isServiceProxy||L.hasKMLItemData)&&"public"!==L.access||L.isHostedService&&(L.isAdmin||"public"!==L.access)||L.isFeatureCollection&&"public"!==L.access)?ca:null};S.addToken=function(L){return(L=S.needsToken(L,L.url))&&-1<L.indexOf("?token\x3d")};S.needsSSL=function(L,Y){return L.portal.allSSL||-1<window.location.protocol.indexOf("https:")?l.default.getSecureUrl(L.url):Y};S.registerKeystrokeHandler=function(L,Y){return F.default(L,10>=z.default("ie")||7>
z.default("trident")?"keydown":"keyup",Y)};S.registerEnterSpaceKeystrokeHandler=function(L,Y){return F.default(L,"keyup",function(ca){ca.keyCode!==C.default.ENTER&&ca.keyCode!==C.default.SPACE||Y(ca)})};S.sendAllResources=function(L,Y,ca,U,X,Z){var N=new A.default;ca=u.default.clone(ca);var aa=[],ka=ca.splice(0,Y);for(H.default.isDefined(Z)||(Z=!0);ka&&0<ka.length;)aa.push(l.default.request({url:L,content:U(ka)},u.default.mixin({usePost:Z},X||{}))),ka=ca.splice(0,Y);E.default(aa).then(function(pa){return N.resolve(pa)},
function(pa){return N.reject(pa)});return N};S.sendAllResourcesWithDelay=function(L,Y,ca,U,X){function Z(){setTimeout(function(){(Da=aa.splice(0,Y))&&0<Da.length&&(l.default.request({url:L,content:U(Da)},{usePost:!0}).then(function(oa){ta++;ka.push(oa);ta>=N&&pa.resolve(ka)},function(oa){ta++;ta>=N&&pa.reject(oa)}),Ba++,Z())},0===Ba?0:X)}var N=Math.ceil(ca.length/Y),aa=u.default.clone(ca),ka=[],pa=new A.default,ta=0,Ba=0,Da;Z();return pa};S.sendAllResourcesSerially=function(L,Y,ca,U){function X(){(pa=
N.splice(0,Y))&&0<pa.length&&l.default.request({url:L,content:U(pa)},{usePost:!0}).then(function(Ba){ta++;aa.push(Ba);ta>=Z?ka.resolve(aa):X()},function(Ba){ta++;ta>=Z?ka.reject(Ba):X()})}var Z=Math.ceil(ca.length/Y),N=u.default.clone(ca),aa=[],ka=new A.default,pa,ta=0;X();return ka};S.fetchAllResources=function(L,Y,ca){var U=new A.default,X=1,Z=[],N=100,aa,ka,pa,ta;Y=Y||{};ca=ca||"results";Y.start=X;!Y.num||Y.num>N?Y.num=N:N=Y.num;l.default.request({url:L,content:Y}).then(function(Ba){if(Ba&&Ba[ca]){Z=
Z.concat(Ba[ca]);X=Ba.nextStart;aa=Ba.total-Z.length;ka=Math.ceil(aa/N);pa=[];if(-1<X)for(ta=0;ta<ka;ta++)Y.start=X+ta*N,pa.push(l.default.request({url:L,content:Y}));E.default(pa).then(function(Da){Da.forEach(function(oa){Z=Z.concat(oa[ca])});U.resolve(Z)},function(Da){return U.reject(Da)})}else U.resolve(Z)},function(Ba){return U.reject(Ba)});return U};S.deleteItem=function(L){var Y=L.userItemUrl+"/delete";if(L&&"Deep Learning Package"===L.type){var ca=new A.default;S.uninstallDeepLearningPackage(L).then(function(U){U&&
"uninstallFail"===U.messageCode?ca.resolve(U):l.default.request({url:Y},{usePost:!0}).then(function(X){return ca.resolve(X)})});return ca}return l.default.request({url:Y},{usePost:!0})};S.uninstallDeepLearningPackage=function(L){var Y=L.portal,ca=new A.default,U=Y.helperServices&&Y.helperServices.rasterAnalytics,X=(L.portal.getPortalUser()||{}).token,Z={messageCode:"uninstallFail"},N={messageCode:"uninstallSuccess"};if(Y&&Y.isPortal&&U&&H.default.isDefined(U.url)){Y={modelItemId:B.default.stringify({itemId:L.id})};
var aa=U.url+"/UninstallDeepLearningModel";ca=(new V.default(aa+(X?"?token\x3d"+X:""))).submitJob(Y).then(function(ka){var pa=ka&&ka.results&&ka.results.uninstallSucceed&&ka.results.uninstallSucceed.paramUrl;ka=ka.jobId;return pa&&ka?l.default.request({url:aa+"/jobs/"+ka+"/"+pa},{usePost:!0}).then(function(ta){return(ta=ta&&ta.value)&&ta===L.id?N:Z}):Z},function(){return Z})}else ca.resolve(N);return ca};S.getUserProfile=function(L){L="string"===typeof L?{username:L}:L;var Y=a.default.restBaseUrl+
"community/users/"+L.username,ca=l.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");return l.default.request({url:Y}).then(function(U){return u.default.mixin(U,{thumbnailUrl:U.thumbnail?K.default.PortalUtil.formatUrl(Y+"/info/"+U.thumbnail):ca},L)})};S.getItemSharing=function(L){var Y=new A.default,ca=L.portal,U=L.itemOwner,X=L.access,Z=L.canUpdate,N=L.isOwner,aa=L.userItemUrl,ka=ca.getPortalUser(),pa={access:X};Z&&(N||ka&&ka.canViewOthersOrgItems)?l.default.request({url:aa}).then(function(ta){var Ba=
(pa=ta.sharing)&&pa.groups;"shared"===pa.access&&Ba&&1===Ba.length&&Ba[0]===ka.favGroupId&&(pa={access:"private"});Ba&&(ta={userGroups:ka.getGroups(),ownerGroups:L.isOwner?null:U.getGroups()},E.default(ta).then(function(Da){(Da=(Da.userGroups||[]).concat(Da.ownerGroups||[]).filter(function(oa){return g.default.find(Ba,function(ra){return oa.id===ra})}).map(function(oa){return'id: "'+oa.id+'"'}))&&Da.length?ca.queryGroups({q:Da.join(" OR "),num:100},!0).then(function(oa){pa.groups=(oa.results||[]).sort(function(ra,
ya){return ya.title.localeCompare(ra.title)});pa.total=oa.total;L=u.default.mixin(L,{sharing:pa});Y.resolve(pa)}):(delete pa.groups,L=u.default.mixin(L,{sharing:pa}),Y.resolve(pa))}))}):(L=u.default.mixin(L,{sharing:pa}),Y.resolve(pa));return Y};S.protectItem=function(L){return l.default.request({url:L.userItemUrl+"/protect"},{usePost:!0})};S.unprotectItem=function(L){return l.default.request({url:L.userItemUrl+"/unprotect"},{usePost:!0})};S.protectGroup=function(L){return l.default.request({url:a.default.restBaseUrl+
"community/groups/"+L.id+"/protect"},{usePost:!0})};S.unprotectGroup=function(L){return l.default.request({url:a.default.restBaseUrl+"community/groups/"+L.id+"/unprotect"},{usePost:!0})};S.fetchPublishParameters=function(L){var Y=L.sourceData;L=L.itemUrl;var ca=new A.default;L+="/info/publishParameters.json";!Y||"CSV"!==Y.type&&"Microsoft Excel"!==Y.type?ca.resolve(!1):l.default.request({url:L}).then(function(U){return ca.resolve(U)},function(){return ca.resolve(!1)});return ca};S.fetchRegisteredAppInfo=
function(L){L=l.default.getSecureUrl(L.userItemUrl+"/registeredAppInfo");return l.default.request({url:L})};S.refreshAppSecret=function(L){L=l.default.getSecureUrl(a.default.restBaseUrl)+"oauth2/apps/"+L+"/resetSecret";return l.default.request({url:L},{usePost:!0})};S.registerApp=function(L,Y){Y=Y?"apps/"+L.client_id+"/update":"registerApp";Y=l.default.getSecureUrl(a.default.restBaseUrl)+"oauth2/"+Y;return l.default.request({url:Y,content:L},{usePost:!0})};S.unregisterApp=function(L){L=l.default.getSecureUrl(a.default.restBaseUrl)+
"oauth2/apps/"+L+"/unregister";return l.default.request({url:L},{usePost:!0})};S.enableAttachments=function(L,Y,ca){return l.default.request({url:L.adminUrl+"/"+Y.id+"/updateDefinition",content:{updateDefinition:B.default.stringify({hasAttachments:!!ca})}},{usePost:!0}).then(function(){return Y.hasAttachments=ca})};S.isItemListable=function(L){var Y=L.portal.getPortalUser().userRole,ca=Y&&Y.isCustom()&&Y.canManageMarketplace();Y=Y&&Y.isAdmin()||ca;ca=g.default.includes(L.typeKeywords,"Service Proxy")&&
L.sourceUrl&&(-1<L.sourceUrl.indexOf(".arcgis.com")||-1<L.sourceUrl.indexOf(".esri.com"));var U=a.default.self,X=U.canListApps;U=U.canListData;!L.listed&&a.default.self&&Y?U&&ca?(Y=new A.default,Y.resolve("Geoprocessing Service"===L.type)):X&&(g.default.includes(L.typeKeywords,"Registered App")||g.default.includes(["ArcGIS Pro Add In","AppBuilder Widget Package"],L.type))?(Y=new A.default,Y.resolve(!0)):U&&"Rule Package"===L.type?(Y=new A.default,Y.resolve(!0)):U?Y=S.isServiceListable(L):(Y=new A.default,
Y.resolve(!1)):(Y=new A.default,Y.resolve(!1));return Y};S.isServiceListable=function(L){var Y=a.default.restBaseUrl+"portals/isServerRegistered",ca=L.type?L.type.toLowerCase():"",U=L.url&&l.default.parseUrl(L.url);"web map"===ca?(L=new A.default,L.resolve(!0)):g.default.includes(["feature service","map service","image service","scene service"],ca)?l.default.isHostedServiceItem(L)?(L=new A.default,L.resolve(!0)):U&&H.default.isDefined(U.protocol)&&H.default.isDefined(U.host)?L=l.default.request({url:Y,
content:{serverUrl:U.protocol+"://"+U.host}}).then(function(X){return X.registered}):(L=new A.default,L.resolve(!1)):(L=new A.default,L.resolve(!1));return L};S.findLayer=function(L,Y){var ca=parseInt(L,10);if(H.default.isDefined(ca))return(Y||[]).filter(function(U){return U.id===ca}).shift()};S.getServiceNameFromUrl=function(L){var Y=L.url||"",ca=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer)).*/gi,
U=Y.replace(ca,"").replace(/^.*\//,"").replace(/\?.*$/,"");Y=Y.replace(/http.+\/(arcgis\/rest\/services|\/.*\/rest\/services|arcgis\/services)\/?/gi,"").match(ca);try{return Y?decodeURI(U):L.title}catch(X){return U}};S.getAppPurpose=function(L){L=L.typeKeywords;if(g.default.includes(L,"Ready To Use")||g.default.includes(L,"Ready to Use"))return O.default.itemProperties.readyToUse;if(g.default.includes(L,"selfConfigured"))return O.default.itemProperties.selfConfigurable;if(g.default.includes(L,"Configurable"))return O.default.itemProperties.configurable;
if(g.default.includes(L,"Code Sample"))return O.default.itemProperties.codeSample};S.getAppApi=function(L){var Y={"Windows Mobile":O.default.common.mobile,"ArcGIS for iPhone":O.default.common.ios,"ArcGIS for Windows Phone":O.default.common.windowsPhone,"ArcGIS for Windows Store":O.default.common.windowsStore,"ArcGIS for Windows Universal":O.default.common.windowsUniversal,"ArcGIS for Android":O.default.common.Android,Flex:O.default.common.Flex,JavaScript:O.default.common.JavaScript,Silverlight:O.default.common.Silverlight,
"Web ADF":O.default.common.WebADF,Other:O.default.common.other,Java:"Java",Qt:"Qt",".NET-Windows Desktop":".NET\u2013Windows Desktop",WPF:"WPF","OS X":"OS X"};return Object.keys(Y).reduce(function(ca,U){g.default.includes(L.typeKeywords,U)&&(ca=Y[U]);return ca},"")};S.linkify=function(L){L=l.default.htmlEncode(L);for(var Y=L.indexOf("http"),ca,U;-1<Y;){ca=L.substring(Y,Y+8);if(-1<ca.indexOf("http://")||-1<ca.indexOf("https://")){if(ca=!0,6<Y&&(U=L.substring(Y-6,Y-1),"href\x3d"===U.toLowerCase()&&
(ca=!1,Y=Y+L.toLowerCase().substring("/a",Y).length+1)),ca){ca=L.indexOf(" ",Y);-1===ca&&(ca=L.length);U=L.substring(Y,ca);var X='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+U+'" target\x3d"_blank"\x3e'+U+"\x3c/a\x3e\x3c/span\x3e";L=L.substring(0,Y)+X+L.substring(ca,L.length);Y=Y+X.length-U.length+5}}else Y+=1;Y=L.indexOf("http",Y)}return L};S.includeTimestampInRequest=function(L){if(10>=z.default("ie")||7>z.default("trident"))L.ts=(new Date).getTime();return L};S.fetchIDPConfig=function(){var L=
l.default.getSecureUrl(a.default.restBaseUrl)+"portals/self/idp";return l.default.request({url:L})};S.checkEnterpriseGroupStore=function(){var L=new A.default,Y=l.default.getPortalAdminBaseUrl()+"/security/config";l.default.request({url:Y}).then(function(ca){var U,X=null,Z=!1,N=null;X="ArcGISEnterpriseOnKubernetes"===(null===(U=a.default.self)||void 0===U?void 0:U.portalDeploymentType)?null===ca||void 0===ca?void 0:ca.roleStoreConfig:null===ca||void 0===ca?void 0:ca.groupStoreConfig;if(null===X||
void 0===X?0:X.type)N=null===X||void 0===X?void 0:X.type.toLowerCase(),"builtin"!==N&&"saml"!==N&&(Z=!0);L.resolve({storeType:N,supportsEnterpriseGroups:Z})},function(){L.resolve({supportsEnterpriseGroups:!1})});return L};S.enterpriseGroupMatches=function(L,Y){return!(!H.default.isDefined(L)||!H.default.isDefined(Y)||L.toLowerCase()!==Y.toLowerCase())};S.isAmazonBasedTileService=function(L){return!l.default.isPortal()&&/tiles[\s\S]*.arcgis.com\//gi.test(L)};S.createDialogWrapper=function(L,Y){var ca=
(new d.default(L)).placeAt(document.body);ca.setContent(Y);F.default.once(ca,"hide",function(){return ca.destroyRecursive()});return ca};S.createSpecifiedDialog=function(L,Y,ca){var U=Y?new L(Y):new L,X=U._dialog||U.dialog;if(X)F.default.once(X,"hide",function(){X.destroyRecursive();U.destroyRecursive();ca&&ca.focus&&ca.focus()});return U};S.showAlert=function(L,Y,ca,U){void 0===ca&&(ca="");void 0===U&&(U=!1);S.clearAlerts();return new e.default({type:L,text:Y,cssClasses:ca,preventAutoDimiss:U},x.default.create("div",
null,document.body))};S.clearAlerts=function(){m.default.forEachNode(document.querySelectorAll(".alert"),function(L){(L=c.default.byNode(L))&&L.destroy&&L.destroy()})};S.showAlertList=function(L,Y){Y=Y.reduce(function(ca,U){return ca+"\x3cli\x3e"+U+"\x3c/li\x3e"},"");return new e.default({type:L,text:"",listHTML:"\x3cul\x3e"+Y+"\x3c/ul\x3e"},x.default.create("div",null,document.body))};S.getPageRangeString=function(L,Y){var ca=n.default.locale?n.default.locale.substring(0,2):"en";Y=Y?Y:O.default.common.pageRange;
L.total&&1E4<=L.total&&(L.total="10000+");return D.default.substitute(Y["en"===ca?"en":"other"],L)};S.sortListByStrProp=function(L,Y,ca){L.sort(function(U,X){U=U[Y].toLowerCase();X=X[Y].toLowerCase();return ca?U<X?1:U>X?-1:0:U<X?-1:U>X?1:0})};S.formatDataStoreItem=function(L,Y){(Y||[]).length&&(Y.some(function(ca){return g.default.includes(ca.toLowerCase(),"cloud")})?L+=" ("+O.default.AddDatastoreDlg.cloud+")":-1!==Y.indexOf("egdb")?L+=" ("+O.default.AddDatastoreDlg.database+")":-1!==Y.indexOf("folder")&&
(L+=" ("+O.default.AddDatastoreDlg.folder+")"));return L};S.downloadImage=function(L){var Y;L=L.item;var ca=L.portal,U=new f.default,X=new A.default,Z=null===(Y=ca.helperServices)||void 0===Y?void 0:Y.rasterUtilities;Y=(L.portal.getPortalUser()||{}).token;if((null===ca||void 0===ca?0:ca.isPortal)&&(null===Z||void 0===Z?0:Z.url)){L={inputImageLayer:B.default.stringify({itemId:L.id})};var N=Z.url+"/DownloadRaster",aa=Y?"?token\x3d"+Y:"";X=(new V.default(N+aa)).submitJob(L,function(ka){var pa,ta="esriJobSucceeded"===
(null===ka||void 0===ka?void 0:ka.jobStatus)&&(null===(pa=ka.results)||void 0===pa?void 0:pa.outputRaster);ka=ka.jobId;U.updateMessage(O.default.downloadImageDlg.succeeded);return ta&&ka?(U.hide(),l.default.request({url:N+"/jobs/"+ka+"/results/outputRaster"},{usePost:!0}).then(function(Ba){var Da;return null===(Da=null===Ba||void 0===Ba?void 0:Ba.value)||void 0===Da?void 0:Da[0]})):""},function(ka){U.setCancelUrl(Z.url+"/DownloadRaster/jobs/"+ka.jobId+"/cancel"+aa)});U.show();U.updateMessage(O.default.downloadImageDlg.message)}else X.resolve("");
return X};S.cancelDownloadImage=function(L,Y){(new V.default(L)).cancelJob(Y,null,null)};S.goToPage=function(L,Y){var ca=Y.username;Y=Y.orgId;var U=l.default.getUser(),X=null===U||void 0===U?void 0:U.userRole,Z=(null===U||void 0===U?void 0:U.username)===ca;L=("groups"===L&&(null===X||void 0===X?0:X.canViewOrgGroups())||"content"===L&&(null===X||void 0===X?0:X.canManageItems())||(null===X||void 0===X?0:X.isAdmin())||Z)&&Y===U.orgId?""+a.default.baseUrl+L+".html"+(Z?"":"?user\x3d"+ca):a.default.baseUrl+
"search.html?q\x3downer:%22"+ca+"%22\x26t\x3d"+L+"\x26restrict\x3dfalse";window.open(L,"_blank")};return S}()})},"arcgisonline/map/core/canUseForPublish":function(){define(["dojo/_base/array"],function(b){function y(a,k){if("esriGeometryMultiPatch"===a.geometryType)return!1;var e=a.drawingInfo.renderer,g=a.drawingInfo.labelingInfo,h=a.featureReduction,m=a.fields;if("heatmap"===e.type||"esriGeometryPolygon"===a.geometryType&&e.uniqueValueInfos&&e.visualVariables&&b.some(e.visualVariables,function(f){if("sizeInfo"===
f.type&&!f.target)return!0}))return!1;var l=b.map(b.filter(m,function(f){return"esriFieldTypeDate"===f.type}),function(f){return f.name});return l.length&&(-1<b.indexOf(l,e.field)||-1<b.indexOf(l,e.field1)||e.visualVariables&&b.some(e.visualVariables,function(f){if(f.field&&-1<b.indexOf(l,f.field))return!0}))||h||!k&&g&&g.length?!1:!0}function r(a,k){var e=a.drawingInfo.renderer,g=a.drawingInfo.labelingInfo,h=a.featureReduction,m=a.fields;if(-1===b.indexOf(["esriGeometryPoint","esriGeometryMultiPatch"],
a.geometryType)||e.observationRenderer||e.latestObservationRenderer||"heatmap"===e.type||e.valueExpression&&e.valueExpression.length)return!1;if(e.visualVariables)for(a=0;a<e.visualVariables.length;a++)if(e.visualVariables[a].valueExpression&&e.visualVariables[a].valueExpression.length)return!1;var l=b.map(b.filter(m,function(f){return"esriFieldTypeDate"===f.type}),function(f){return f.name});return l.length&&(-1<b.indexOf(l,e.field)||-1<b.indexOf(l,e.field1)||e.visualVariables&&b.some(e.visualVariables,
function(f){if(f.field&&-1<b.indexOf(l,f.field))return!0}))||h||!k&&g&&g.length?!1:!0}return function(a,k,e){return"Feature Layer"===a.type&&a.drawingInfo?"scene"===e?r(a,k):y(a,k):!1}})},"arcgisonline/pages/dijit/Alert":function(){define("require exports tslib ../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/query dojo/text!./Alert/Alert.html dojo/i18n!../../nls/arcgisonline ../utils/icons dojo/_base/lang".split(" "),function(b,y,r,a,k,e,g,h,m,l,f){a=r.__importDefault(a);
k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);return function(){function c(d,u){this.templateString=h.default;this.i18n=m.default;this.icons=l.default;this.cssClasses="";this.preventAutoDimiss=!1}c.prototype.postMixInProperties=function(){"success"===this.type?(this.modifier="green",this.icon=l.default["check-circle"]["32"],this.iconAltText=m.default.GroupWidget.successIcon):"error"===
this.type?(this.modifier="red",this.icon=l.default["exclamation-mark-circle"]["32"],this.iconAltText=m.default.GroupWidget.errorIcon):"warning"===this.type?(this.modifier="yellow",this.icon=l.default["exclamation-mark-triangle"]["32"],this.iconAltText=m.default.GroupWidget.warningIcon):"info"===this.type&&(this.modifier="info",this.iconAltText=this.icon="")};c.prototype.postCreate=function(){var d=this;this.inherited(arguments);this.listHTML&&(this._listContainer.innerHTML=this.listHTML);this._addEventListeners();
"success"!==this.type||this.preventAutoDimiss||this._setAlertTimer();setTimeout(function(){d.domNode&&d.domNode.classList.add("is-active")},10)};c.prototype._addEventListeners=function(){"success"===this.type&&this.own(g.default(this.domNode).on("mouseover",f.default.hitch(this,this._clearAlertTimer)),g.default(this.domNode).on("mouseout",f.default.hitch(this,this._setAlertTimer)));this.own(g.default(".js-alert-close",this.domNode).on("click",f.default.hitch(this,this._dismiss)))};c.prototype._setAlertTimer=
function(){var d=this;this._timeout||(this._timeout=setTimeout(function(){d._dismiss()},4E3))};c.prototype._clearAlertTimer=function(){clearTimeout(this._timeout);this._timeout=null};c.prototype._dismiss=function(d){var u=this;d&&d.preventDefault();this.domNode&&this.domNode.classList.remove("is-active");setTimeout(function(){u.destroy()},300)};c.prototype.dismiss=function(){var d=this;this.domNode&&this.domNode.classList.remove("is-active");setTimeout(function(){d.destroy()},300)};return c=r.__decorate([a.default(k.default,
e.default)],c)}()})},"arcgisonline/tsutils/declareDecorator":function(){define(["require","exports","tslib","dojo/_base/declare"],function(b,y,r,a){Object.defineProperty(y,"__esModule",{value:!0});a=r.__importDefault(a);y.default=function(){for(var k=[],e=0;e<arguments.length;e++)k[e]=arguments[e];return function(g){return a.default(k,g.prototype)}}})},"arcgisonline/pages/utils/icons":function(){define(["require","exports","tslib","dojo/_base/kernel"],function(b,y,r,a){function k(m){var l,f,c=m.paths,
d=m.size,u=m.direction,n=m.rtl,t=m.title,x=m.titleId;m=m.inline?"icon-inline--on-"+(null!==u&&void 0!==u?u:"left"):"";u=null!==(f=null===(l=a.default.locale)||void 0===l?void 0:l.split("-")[0])&&void 0!==f?f:"en";l="icon-inline "+m+" "+(!0===n||n===u?"icon-inline--flip-rtl":"");c=Array.isArray(c)?e(c):'\x3cpath d\x3d"'+c+'"/\x3e';f=t&&x;return'\x3csvg viewBox\x3d"0 0 '+d+" "+d+'" width\x3d"'+d+'" height\x3d"'+d+'" class\x3d"'+l+'" '+(f?'aria-labelledby\x3d"'+x+'"':"")+"\x3e\n    "+(f?'\x3ctitle id\x3d"'+
x+'" \x3e'+t+"\x3c/title\x3e":"")+"\n    "+c+"\n  \x3c/svg\x3e"}function e(m){return m.reduce(function(l,f){return l+" \x3cpath "+(f.opacity?'opacity\x3d"'+f.opacity+'" ':"")+' d\x3d"'+f.d+'" /\x3e'},"")}a=r.__importDefault(a);var g={"app-launcher":{24:"M11.5 18.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 20h-1v-1h1zM3.5 2.05A1.45 1.45 0 104.95 3.5 1.45 1.45 0 003.5 2.05zM4 4H3V3h1zm7.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 12h-1v-1h1zm-8.5-1.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 12H3v-1h1zm-.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 20H3v-1h1zM19.5 4.95a1.45 1.45 0 10-1.45-1.45 1.45 1.45 0 001.45 1.45zM19 3h1v1h-1zm.5 7.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 12h-1v-1h1zm-8.5-9.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 4h-1V3h1zm7.5 14.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 20h-1v-1h1z"},
apps:{24:"M9.5 2h-6A1.502 1.502 0 0 0 2 3.5v6A1.502 1.502 0 0 0 3.5 11h6A1.502 1.502 0 0 0 11 9.5v-6A1.502 1.502 0 0 0 9.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 2h-6A1.502 1.502 0 0 0 13 3.5v6a1.502 1.502 0 0 0 1.5 1.5h6A1.502 1.502 0 0 0 22 9.5v-6A1.502 1.502 0 0 0 20.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM9.5 13h-6A1.502 1.502 0 0 0 2 14.5v6A1.502 1.502 0 0 0 3.5 22h6a1.502 1.502 0 0 0 1.5-1.5v-6A1.502 1.502 0 0 0 9.5 13zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 13h-6a1.502 1.502 0 0 0-1.5 1.5v6a1.502 1.502 0 0 0 1.5 1.5h6a1.502 1.502 0 0 0 1.5-1.5v-6a1.502 1.502 0 0 0-1.5-1.5zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5z",
32:"M13.25 3h-8.5A1.752 1.752 0 0 0 3 4.75v8.5A1.752 1.752 0 0 0 4.75 15h8.5A1.752 1.752 0 0 0 15 13.25v-8.5A1.752 1.752 0 0 0 13.25 3zM14 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5A.751.751 0 0 1 4.75 4h8.5a.751.751 0 0 1 .75.75zM27.25 3h-8.5A1.752 1.752 0 0 0 17 4.75v8.5A1.752 1.752 0 0 0 18.75 15h8.5A1.752 1.752 0 0 0 29 13.25v-8.5A1.752 1.752 0 0 0 27.25 3zM28 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM27.25 17h-8.5A1.752 1.752 0 0 0 17 18.75v8.5A1.752 1.752 0 0 0 18.75 29h8.5A1.752 1.752 0 0 0 29 27.25v-8.5A1.752 1.752 0 0 0 27.25 17zM28 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM13.25 17h-8.5A1.752 1.752 0 0 0 3 18.75v8.5A1.752 1.752 0 0 0 4.75 29h8.5A1.752 1.752 0 0 0 15 27.25v-8.5A1.752 1.752 0 0 0 13.25 17zM14 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75z"},
"arcgis-online":{24:"M24 13.226a4.785 4.785 0 01-3.523 4.658L18.962 17h.633A3.694 3.694 0 0023 13.226a4.173 4.173 0 00-2.895-3.977l-.595-.193-.086-.62A6.164 6.164 0 0013.482 3a5.988 5.988 0 00-5.254 3.265l-.373.703-.769-.206a2.966 2.966 0 00-.763-.116 2.473 2.473 0 00-2.532 2.319l-.041.563-.503.255A4.026 4.026 0 001 13.37 3.614 3.614 0 004.405 17H6v1H4.405A4.606 4.606 0 010 13.37a5.04 5.04 0 012.795-4.479 3.47 3.47 0 013.528-3.244 3.952 3.952 0 011.02.15A6.971 6.971 0 0113.483 2a7.131 7.131 0 016.933 6.297A5.186 5.186 0 0124 13.226zm-6.764 4.78l.846.494-4.534 2.645L9.014 18.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm0-3l.846.494-4.534 2.645L9.014 15.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm2.312-2.506l-6 3.5-6-3.5 6-3.5zm-6 2.645l4.534-2.645-4.534-2.645L9.014 12.5z",
32:"M32 14.704a6.28 6.28 0 0 1-4.862 6.248l-.942-.55.738-.43A5.29 5.29 0 0 0 31 14.703a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 1a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 14.897C2 17.521 4.157 20 6.438 20H9v1H6.437C3.592 21 1 18.092 1 14.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 0a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 14.704zm-7.591 6.74l1.12.654-7.075 4.128-7.074-4.128 1.188-.694-.794-.463-1.982 1.157 8.662 5.054 8.663-5.054-1.915-1.117zm-.123-3.542l1.31.765-7.075 4.128-7.074-4.128 1.31-.765-.793-.463-2.105 1.228 8.663 5.054 8.663-5.054-2.105-1.228zm2.899-2.849l-8.663 5.054-8.663-5.054L18.522 10zm-1.588 0l-7.076-4.127-7.074 4.128 7.074 4.127z"},
"arrow-left":{24:"M9.11 6.32L4.43 11H20v1H4.43l4.68 4.68-.707.707L2.517 11.5l5.886-5.887z"},"arrow-right":{16:"M2 8h10.26l-1.585-1.585.707-.707 2.81 2.81-2.81 2.808-.707-.707L12.295 9H2z",24:"M15.646 14.646L18.293 12H4v-1h14.293l-2.647-2.646.707-.707 3.854 3.853-3.854 3.854z"},"arrow-down":{32:"M16.5 27.207l-4.854-4.854.707-.707L16 25.293V5h1v20.293l3.646-3.646.707.707z"},attachment:{16:"M3.991 15.92a3.913 3.913 0 0 1-2.767-6.68L9.552.912a2.92 2.92 0 0 1 4.031 0 2.854 2.854 0 0 1 0 4.031l-8.001 7.998a1.833 1.833 0 0 1-2.527 0 1.789 1.789 0 0 1 0-2.526L8.72 4.751l.566.566-5.665 5.665a.985.985 0 0 0 0 1.394 1.009 1.009 0 0 0 1.395 0l8-7.998a2.05 2.05 0 0 0 0-2.899 2.098 2.098 0 0 0-2.898 0L1.79 9.805a3.11 3.11 0 0 0 0 4.403 3.186 3.186 0 0 0 4.403 0l6.555-6.555.566.567-6.554 6.554a3.905 3.905 0 0 1-2.77 1.146z"},
browser:{32:"M2 28h28V5H2zm27-1H8V11h21zM3 6h26v4H3zm0 5h4v16H3zm24-3h-1V7h1z"},calculator:{16:"M14.5 16h-13A1.502 1.502 0 0 1 0 14.5v-13A1.502 1.502 0 0 1 1.5 0h13A1.502 1.502 0 0 1 16 1.5v13a1.502 1.502 0 0 1-1.5 1.5zM1.5 1a.501.501 0 0 0-.5.5v13a.501.501 0 0 0 .5.5h13a.501.501 0 0 0 .5-.5v-13a.501.501 0 0 0-.5-.5zM2 6V2h12v4zm11-1V3H3v2zm0 9h-2a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1zm0-1V8h-2v5zm-5 1H7a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H7v1zm-4 1H3a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H3v1zm4-3H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H7v1zm-4 1H3a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H3v1z"},
calendar:{16:"M14 1v1h1v2H1V2h1V1H0v14h16V1zm1 13H1V5h14zM5 2V1h6v1zM4 0v2H3V0zm8 2V0h1v2z"},"caret-right":{16:"M5 1.5l7 7-7 7zm1 11.586L10.586 8.5 6 3.914z"},check:{16:"M2 8.689l.637-.636L5.5 10.727l8.022-7.87.637.637L5.5 12z",24:"M6.218 13.64l3.288 3.098 10.073-9.92.637.637L9.506 18.01 5.58 14.276z",32:"M12.5 22.142L6.59 16.42l.636-.636L12.5 20.87 25.721 7.8l.637.637L12.5 22.142"},"check-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM3.735 8.346l.738-.738 2.084 2.088 4.97-4.97.738.737-5.708 5.705z",
24:"M7 13.689l.637-.636 2.863 2.674 7.022-6.87.637.637L10.5 17zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"},"check-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM6.557 11.592L3.31 8.346l1.163-1.162L6.557 9.27l5.172-5.17 1.162 1.162z",
24:"M23 11.5A11.5 11.5 0 1 1 11.5 0 11.5 11.5 0 0 1 23 11.5zm-5.5-6.018l-8.5 8.5-3.5-3.5-2 2L9.018 18l.018-.018L11.018 16l8.5-8.5z",32:"M30 16A14 14 0 1 1 16 2a14 14 0 0 1 14 14zm-6.11-7.72L12.823 19.346 8.36 14.883l-2.486 2.486 6.95 6.95 13.554-13.553z"},"chevron-down":{16:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z",24:"M19 8.293v1.414l-7.5 7.5-7.5-7.5V8.293l7.5 7.5z"},"chevron-down-f":{16:"M14 4.217v2.766l-6 6-6-6V4.217l6 6z"},"chevron-left":{16:"M10.707 12H9.293l-4.5-4.5 4.5-4.5h1.414l-4.5 4.5z",
24:"M6.293 12l7-7h1.414l-7 7 7 7h-1.414z"},"chevron-right":{16:"M5.293 3h1.414l4.5 4.5-4.5 4.5H5.293l4.5-4.5z",24:"M8.293 5h1.414l7.5 7.5-7.5 7.5H8.293l7.5-7.5z"},"chevron-up":{24:"M11.5 8.207l-7.5 7.5v-1.414l7.5-7.5 7.5 7.5v1.414z"},clock:{16:"M8 7h3v1H7V3h1zm4.803 5.803a7.5 7.5 0 1 1 0-10.606 7.5 7.5 0 0 1 0 10.606zm-.636-9.97A6.591 6.591 0 0 0 .927 7H2v1H.927A6.567 6.567 0 0 0 7 14.073v-1.38h1v1.38a6.591 6.591 0 0 0 4.167-11.24z"},collection:{16:"M10 10V0H0v10zM9 9H6.416c.007-.188.011-.353.014-.453a1.206 1.206 0 0 0 .545-1.058 1.28 1.28 0 0 0 .092-.15 1.143 1.143 0 0 0 .163-.056A2.782 2.782 0 0 0 9 7.461zM1 9V1h5.098a1.276 1.276 0 0 0-.28 1.041 1.26 1.26 0 0 0-.206.466 1.256 1.256 0 0 0-.52 1.185.696.696 0 0 0-.06.062 1.236 1.236 0 0 0-1.175.418 1.352 1.352 0 0 0-1.779 1.571 1.235 1.235 0 0 0 .333 1.568 1.287 1.287 0 0 0 .568 1.34A2.11 2.11 0 0 0 2.962 9zm3.123-.857c0-.313-.595-.223-.688-.41-.234-.467.395-.587.395-.958 0-.09-.047-.277-.191-.293-.202-.021-.254.088-.454.088a.232.232 0 0 1-.25-.207c0-.22.174-.322.174-.543 0-.144-.06-.224-.06-.367 0-.36.397-.586.692-.06.19.342.808.176.808-.38a.271.271 0 0 1 .25-.28c.199 0 .272.205.47.205.327 0 .316-.432.604-.586.353-.192.25-.604.205-.823-.018-.1.165-.287.264-.281.41.031.236-.308.236-.469 0-.258.353-.302.353-.56 0-.158-.132-.235-.132-.397 0-.424.623-.42.78-.822H9v5.449c-.367.057-1.053.165-1.335-.082-.151-.13-.147-.396-.352-.396-.276 0-.297.412-.573.412-.125 0-.184-.088-.31-.088-.26 0-.22.206-.22.465 0 .242-.322.29-.322.535 0 .098.088.135.088.234 0 .33-.588.286-.588.617 0 .026.044.293.044.293 0 .052-.007.287-.019.56h-1.45c-.002-.341.16-.643.16-.856zM16 5v11H5v-1h10V5zm-3 8H2v-1h10V2h1z",
24:"M17 17V2H2v15zm-1-1h-4.874a8.585 8.585 0 0 0 .03-1.017 1.45 1.45 0 0 0 .897-1.63 1.557 1.557 0 0 0 .381-.659 1.376 1.376 0 0 0 .811-.3 3.207 3.207 0 0 0 2.755.42zM3 16V3h8.81a1.483 1.483 0 0 0-.194 1.43 1.461 1.461 0 0 0-.472 1.029 1.47 1.47 0 0 0-.826 1.501 3.333 3.333 0 0 1 .063.37 1.957 1.957 0 0 0-.602.616 1.417 1.417 0 0 0-1.99.87 1.577 1.577 0 0 0-2.517 1.76.033.033 0 0 0 .02-.016c-.609 1.132-.186 1.97.634 2.256a1.509 1.509 0 0 0 .944 2.189 2.551 2.551 0 0 0-.14.995zm5.001-1.447c0-.528-1.006-.378-1.164-.695-.393-.785.668-.987.668-1.612 0-.154-.08-.47-.323-.497-.338-.034-.426.15-.767.15a.39.39 0 0 1-.422-.348c0-.372.297-.545.297-.917 0-.243-.1-.38-.1-.62a.597.597 0 0 1 .57-.62c.312 0 .446.254.595.52.324.579 1.365.294 1.365-.644a.456.456 0 0 1 .422-.473c.334 0 .459.348.793.348.552 0 .532-.73 1.017-.99.596-.322.422-1.019.348-1.39-.033-.165.279-.483.446-.473.694.052.397-.518.397-.792 0-.435.596-.506.596-.943 0-.27-.224-.396-.224-.668 0-.33.4-.628.883-.889H16v8.782c-.29.075-.54.136-.584.136-.503 0-1.117.07-1.48-.249-.256-.22-.249-.669-.596-.669-.466 0-.501.696-.967.696-.21 0-.31-.151-.52-.151a.342.342 0 0 0-.372.305v.483c0 .409-.547.49-.547.9 0 .166.15.23.15.396 0 .559-.994.484-.994 1.042 0 .172.077.336.077.496 0 .103-.015.456-.043.833H7.73c-.003-.58.27-1.096.27-1.447zM20 20H5v-1h14V5h1zm3-12v15H8v-1h14V8z"},
"copy-to-clipboard":{16:"M16 10H8.767l1.558 1.558-.707.707-2.81-2.81 2.81-2.809.707.707L8.678 9H16zM7 6H3v1h4zm-2 4H3V9h2zm2 3H3v-1h4zm5-2v4H2V3h1v1h8V3h1v5h1V2h-2V1H8.723a1.984 1.984 0 0 0-3.446 0H3v1H1v14h12v-5zM4 2h2v-.318A.682.682 0 0 1 6.682 1h.636A.682.682 0 0 1 8 1.682V2h2v1H4z"},credits:{16:"M10.5 5.05a5.45 5.45 0 1 0 5.45 5.45 5.457 5.457 0 0 0-5.45-5.45zm0 10.05a4.6 4.6 0 1 1 4.6-4.6 4.605 4.605 0 0 1-4.6 4.6zm0-1.2a3.404 3.404 0 0 1-3.398-3.3h.8a2.6 2.6 0 0 0 5.196 0h.8a3.404 3.404 0 0 1-3.398 3.3zm1.597-3.5a1.6 1.6 0 0 0-3.194 0h-.801a2.4 2.4 0 0 1 4.796 0zm-8.19.253a5.397 5.397 0 1 1 6.747-6.747A2.698 2.698 0 0 0 10.5 3.9a6.505 6.505 0 0 0-.693.04A4.588 4.588 0 1 0 3.94 9.806a6.418 6.418 0 0 0-.04.694c0 .052.003.103.006.153zm.272-2.03A3.373 3.373 0 0 1 2.102 5.6h.8a2.583 2.583 0 0 0 1.55 2.274 6.55 6.55 0 0 0-.273.748zM3.102 5.4a2.396 2.396 0 0 1 4.59-.866 6.65 6.65 0 0 0-.708.386A1.585 1.585 0 0 0 5.5 3.9a1.602 1.602 0 0 0-1.597 1.5z"},
cube:{16:"M8.5 1.108L1 4.188v8.753L8.448 16h.104L16 12.94V4.189zM8 14.735l-6-2.464V5.197L8 7.65zM2.906 4.486L8.5 2.19l5.594 2.297L8.5 6.774zM15 12.271l-6 2.464V7.65l6-2.453z"},data:{24:"M11.5 2C5.702 2 1 3.566 1 5.5v12.808C1 20.346 5.702 22 11.5 22S22 20.346 22 18.308V5.5C22 3.566 17.298 2 11.5 2zm0 1C17.768 3 21 4.752 21 5.5S17.768 8 11.5 8 2 6.248 2 5.5 5.232 3 11.5 3zM2 6.983C3.676 8.173 7.294 9 11.5 9s7.824-.827 9.5-2.017V10.5c0 .748-3.232 2.5-9.5 2.5S2 11.248 2 10.5zM11.5 21C5.354 21 2 19.221 2 18.308v-6.325C3.676 13.173 7.294 14 11.5 14s7.824-.827 9.5-2.017v6.325C21 19.22 17.646 21 11.5 21z",
32:"M28.983 7.875C28.803 5.171 22.841 3 15.5 3S2.198 5.17 2.017 7.875H2v16.25C2 26.816 8.045 29 15.5 29S29 26.816 29 24.125V7.875zM28 24.125C28 25.705 23.13 28 15.5 28S3 25.705 3 24.125v-8.241C5.01 17.711 9.846 19 15.5 19s10.49-1.29 12.5-3.116zm0-9.24C25.99 16.71 21.154 18 15.5 18S5.01 16.71 3 14.884v-5C5.01 11.711 9.846 13 15.5 13S25.99 11.71 28 9.884zm-12.5-2.91C7.87 11.974 3 9.62 3 8s4.87-3.974 12.5-3.974S28 6.379 28 8s-4.87 3.974-12.5 3.974z"},download:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.563C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.438 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM17 28.278V14h-1v14.278l-4.332-4.332-.707.707 5.539 5.54 5.54-5.54-.708-.707z"},
"download-to":{16:"M12 13v1H3v-1zm-1.674-4.618l-.707-.707L8 9.295V1H7v8.26L5.415 7.675l-.707.707 2.81 2.81z",32:"M7 25h17v1H7zm13.354-8.646l-.707-.707L16 19.293V5h-1v14.293l-3.646-3.646-.707.707 4.853 4.853z"},drag:{16:"M5.95 1.5A1.45 1.45 0 1 1 4.5.05 1.45 1.45 0 0 1 5.95 1.5zM10.5.05a1.45 1.45 0 1 0 1.45 1.45A1.45 1.45 0 0 0 10.5.05zm-6 6A1.45 1.45 0 1 0 5.95 7.5 1.45 1.45 0 0 0 4.5 6.05zm6 0a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm-6 6a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm7.45 1.45a1.45 1.45 0 1 0-1.45 1.45 1.45 1.45 0 0 0 1.45-1.45z"},
edit:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},"ellipsis-f":{16:"M3.55 8A1.55 1.55 0 1 1 2 6.45 1.55 1.55 0 0 1 3.55 8zm6 0A1.55 1.55 0 1 0 8 9.55 1.55 1.55 0 0 0 9.55 8zm6 0A1.55 1.55 0 1 0 14 9.55 1.55 1.55 0 0 0 15.55 8z"},
envelope:{16:"M14 11.434l-4.52-4.52L14 3.301v8.133zM1.566 12L6.15 7.418l1.35 1.08 1.351-1.08L13.434 12H1.566zM1 3.3l4.52 3.614L1 11.434V3.3zM13.095 3L7.5 7.475 1.904 3h11.191zM14 2H1a1.002 1.002 0 0 0-1 1v9a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z",24:"M22.5 4h-20A1.504 1.504 0 0 0 1 5.5v14A1.5 1.5 0 0 0 2.5 21h20a1.5 1.5 0 0 0 1.5-1.5v-14A1.5 1.5 0 0 0 22.5 4zm-.071 1L12.5 12.94 2.571 5zM2.026 19.63A.482.482 0 0 1 2 19.5V5.568l7.829 6.26zm.763.37l7.67-7.67 2.041 1.633 2.042-1.632L22.21 20zM23 19.5a.483.483 0 0 1-.026.13l-7.803-7.803L23 5.568z"},
"exclamation-mark-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zm.994-3.576a1 1 0 0 1-2 0v-.048a1 1 0 0 1 2 0zM7.995 8h-.977V4h.977z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm0-5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM15 8h1v11h-1z"},"exclamation-mark-triangle":{16:"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z",
32:"M3.929 29h25.148a1.897 1.897 0 0 0 1.67-2.797L18.217 2.951a1.897 1.897 0 0 0-3.337-.005L2.261 26.198A1.897 1.897 0 0 0 3.93 29zm-.788-2.324L15.759 3.423a.896.896 0 0 1 1.577.002l12.531 23.253a.898.898 0 0 1-.79 1.322H3.93a.897.897 0 0 1-.788-1.324zM15.5 24.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1zM17 21h-1V10h1z"},"exclamation-mark-triangle-f":{16:"M14.894 12.552l-6-11.998a1 1 0 0 0-1.787 0l-6 11.998A.998.998 0 0 0 2 13.999h12a.998.998 0 0 0 .894-1.447zM9 12H7v-2h2zm0-3H7V4h2z",24:"M13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656 1.678 1.678 0 0 0 1.48.775H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656zM12 8h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z",
32:"M29.733 27.06L17.734 3.191a2 2 0 0 0-3.463 0L2.268 27.061a2.003 2.003 0 0 0 0 2.001 1.941 1.941 0 0 0 1.73.938H28a1.944 1.944 0 0 0 1.731-.938 2.008 2.008 0 0 0 .002-2.002zM17 25h-2v-2h2zm0-4h-2V11h2z"},file:{32:"M20.3 1H4v30h24V8.699zM27 30H5V2h14v8h8zM20 9V2l7 7z"},"file-image":{16:"M13 14H4v-1h9zm-9-2h9v-1.44l-1.527-1.472a.27.27 0 0 0-.37-.028l-1.224.824a.269.269 0 0 1-.35-.01L7.498 8.07a.27.27 0 0 0-.382.018L5.1 10.24a.27.27 0 0 1-.4 0 .27.27 0 0 0-.4 0l-.3.32zm1.752-1a1.38 1.38 0 0 0 .077-.076l1.534-1.636 1.501 1.334a1.267 1.267 0 0 0 1.64.041l.687-.458.809.78V11zM15 3.6V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3zm-3.5 3.06a.75.75 0 1 0 .75.75.75.75 0 0 0-.75-.75z",
24:"M18 20H6v-1h12zM6 18h12v-2.8l-2.035-2.035a.377.377 0 0 0-.493-.035l-1.633 1.225a.377.377 0 0 1-.468-.012l-2.706-2.256a.377.377 0 0 0-.509.023l-2.69 2.69a.377.377 0 0 1-.533 0 .377.377 0 0 0-.533 0l-.4.4zm1-1v-1.104a1.376 1.376 0 0 0 1.174-.389l2.287-2.287 2.27 1.89a1.375 1.375 0 0 0 1.708.044l1.2-.9L17 15.614V17zM21 6.709V23H3V1h12.29zM20 8h-6V2H4v20h16zm0-1.2L15.2 2H15v5h5zM14.021 12a.979.979 0 0 0 .979-.979A1.021 1.021 0 0 0 13.979 10a.979.979 0 0 0-.979.979v.043a.981.981 0 0 0 .979.978z"},
"file-magnifying-glass":{16:"M12.4 0H6v3.232a5.4 5.4 0 0 1 1 .395V1h4v4h4v7h-3.7l1 1H16V3.6zM15 4h-3V1h.31L15 3.69zm-5.233 6H12v1h-1.714a1.66 1.66 0 0 0-.707-.385A5.485 5.485 0 0 0 9.767 10zM14 9H9.95c.016-.167.05-.33.05-.501 0-.17-.034-.332-.049-.499H14zm0-2H9.768a5.404 5.404 0 0 0-.395-1H14zm-4.358 4.754a.672.672 0 0 0-.951 0l-.115.115L8 11.294A4.484 4.484 0 0 0 4.499 4a4.5 4.5 0 1 0 2.795 8.001l.575.575-.115.114a.672.672 0 0 0 0 .951l2.16 2.159a.672.672 0 0 0 .95 0l.936-.933a.672.672 0 0 0 .001-.951zm-7.617-.78a3.5 3.5 0 1 1 4.95 0 3.5 3.5 0 0 1-4.95 0zm8.365 3.887l-1.697-1.695.473-.473 1.696 1.698z"},
"file-text":{16:"M13 7H4V6h9zm0 2H4v1h9zm-2 3H4v1h7zm4-8.4V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3z"},folder:{16:"M7.3 3.002L5.98 2H3L1.7 3H0v11h15V3zM14 6H1V4h1.04l1.3-1h2.304l1.319 1H14zm0 7H1V7h13z"},"folder-move":{16:"M5 12H1V6h13v2.352l.007.005.993.994V2l-7.7.002L5.98 1H3L1.7 2H0v11h5zM1 3h1.04l1.3-1h2.304l1.319 1H14v2H1zm14.284 9.563l-2.79 2.79-.708-.706L13.433 13H7v-1h6.308l-1.522-1.521.707-.707z"},"folder-open":{16:"M14 6V3l-6.7.002L5.98 2H3L1.7 3H0v11h14l2-8zM1 4h1.041L3.34 3h2.304l1.319 1.002L13 4v2H9L7.7 7h-5L1 11.408zm2.387 4H8.04l1.3-1h5.379l-1.5 6H1.458z"},
"folder-plus":{16:"M14 9h1v5H0V3h1.7L3 2h2.981l1.04.79A1.966 1.966 0 0 0 7 3v1h-.037L5.644 3H3.34l-1.3 1H1v2h9v1H1v6h13zm-1-6V0h-1v3H9v1h3v3h1V4h3V3z"},globe:{16:"M8 0a8 8 0 1 0 8 8 7.999 7.999 0 0 0-8-8zm3.83 3.162c.067.24.01.47-.273.47a.669.669 0 0 0 .16-.55c.039.027.08.055.112.08zm-.372-.95l.207.072a.803.803 0 0 0-.428.158.406.406 0 0 1 .222-.23zM7.792 1.01a2.963 2.963 0 0 1 .638.012l-.054.083c-.123-.004-.54-.027-.653-.01.073-.074.015-.021.07-.085zM2.527 12.357a7.018 7.018 0 0 1-.414-.58 6.759 6.759 0 0 1 .58.405.918.918 0 0 0-.166.175zm7.606 2.31a6.986 6.986 0 0 1-7.058-1.695c-.003-.07 0-.08.059-.122 1-.692.512-1.033-1.055-2.047-.123-.084-.179-.132-.19-.165-.075-1.662-.082-.85-.662-2.313a2.123 2.123 0 0 0-.222-.427 6.967 6.967 0 0 1 1.911-4.701c.616.008.934.146 1.176-.473.015-.04.06-.16.073-.121.7.04.593.475 1.518-.9a1.156 1.156 0 0 0 .157-.36c.2-.065.405-.119.613-.166-.465.623-.137 1.095.319 1.095.141 0 .731-.33 1.07-.387.608.03.853.118 1.201-.337a2.112 2.112 0 0 1 .3-.416 6.936 6.936 0 0 1 1.548.498c-.508.388-.222.396-.56.838-.334.444-.017.803.425 1.138a2.056 2.056 0 0 0-.28.242.59.59 0 0 0-.223-.321.669.669 0 0 0-.735-.596.599.599 0 0 0-.147 1.122.573.573 0 0 0 .292.473c-.164.242-.081.414-.01.663-.052 0-.29-.069-.374-.069-.72 0-.785 1.215-.46 1.543-.79.68-.809.795-.917 1.017a1.921 1.921 0 0 0-1.248 1.686c0 .41-.25.36-.317.682-.102.485.146.728.435 1.006.32.311.152.587.628.973.572.477.863.374 1.603.268a2.339 2.339 0 0 1 1.257.134c.09.021.181.057.1.298a.596.596 0 0 0 .133.739.275.275 0 0 1 .11.19c.05.639-.197.474-.47 1.01zm.383-8.91l.2.098a.313.313 0 0 1 .255-.052c.37.233.57.424.93.066a2.055 2.055 0 0 1 .325.339.593.593 0 0 0 .914.493c.214.276.447.177.757.255a1.3 1.3 0 0 1 .088.284 1.486 1.486 0 0 1-.52.136c-.114-.03-.231-.125-.35-.125a.533.533 0 0 0-.656.356 1.398 1.398 0 0 1-.698-.416c.1-.693-.948-.767-1.63-.616.02-.025.108-.16.089-.185a.665.665 0 0 0 .094-.14.838.838 0 0 0 .315-.284zm-.996.222a.732.732 0 0 0-.064.138c0-.055.002-.102.005-.147l.059.01zm1.844 8.16a1.248 1.248 0 0 0-.241-1.173.955.955 0 0 0-.68-1.316c-.006-.002-.38-.081-.473-.113-1.052-.302-1.98.487-2.265-.484a2.546 2.546 0 0 0-.573-.79c.382-.424.237-.624.333-1.035.313-1.157.897-.378 1.276-1.376.017-.042.634-.564.768-.765.379.458.848.204 1.465.243.133.77 1.55 1.512 2.121.763.703.292 1.96-.216 1.646-1.118v.001a1.301 1.301 0 0 0-.112-.342.945.945 0 0 0-.935-.511.8.8 0 0 0-.72-.205c-.255-.554-.903-1.088-1.488-.733a.95.95 0 0 0-.705-.183.798.798 0 0 0-.36-.04 5.498 5.498 0 0 0-.033-.098.782.782 0 0 0 .065-.216.87.87 0 0 0 .691-.33c1.179.708 2.182-1.263.96-1.935.016 0 .03-.01.046-.011a6.994 6.994 0 0 1-.786 11.766z",
24:"M13.802 4.306a.683.683 0 01.708.76.528.528 0 01.357.467c.055.888-1.127.8-1.014-.09l-.005-.002a.575.575 0 01-.046-1.135zM11.5 23A11.5 11.5 0 010 11.5v-.021a11.738 11.738 0 012.057-6.534 12.15 12.15 0 014.12-3.637h.005A11.595 11.595 0 0113.618.202l.002.002a11.525 11.525 0 019.325 10.188v.004A11.497 11.497 0 0111.5 23zm9.795-7.748a7.604 7.604 0 01-.666-1.746 4.55 4.55 0 01-.651-1.655 1.383 1.383 0 01-.857-.063l-.332.46c-1.962 0-2.952-.953-3.048-1.636a2.144 2.144 0 00-.992.133l-.113.177-.794.021a2.538 2.538 0 01-.483-.213 7.396 7.396 0 00-.628.541 1.463 1.463 0 01-.941.97 1.544 1.544 0 00-.961 1.24 2.264 2.264 0 01-.449 1.34 2.446 2.446 0 01.811 1.108c.406 1.373 1.703.122 3.24.622.843.277 1.569.18 1.832 1.177a1.695 1.695 0 01.028.937 1.452 1.452 0 01-.025.098 2.11 2.11 0 01.327 1.883 10.447 10.447 0 004.702-5.394zm-1.709-7.096l.25.15c.058.072.16.194.208.265a1.699 1.699 0 011.517 2.251 3.648 3.648 0 01.435.592 10.477 10.477 0 00-3.824-8.016h-.103a1.768 1.768 0 01-1.938 2.838 4.716 4.716 0 01-.723.7 1.525 1.525 0 01.97.078l.183-.654a6.478 6.478 0 012.115 1.527c.295.369-.659 1.364.91.27zm2.17 5.578q.026-.121.049-.243a5.462 5.462 0 00-.843-1.825 18.554 18.554 0 00.793 2.068zM11.405 1.147c.155.004.424.03.574.029l.093-.147c-.189-.01-.375-.029-.566-.029a1.863 1.863 0 01-.102.147zm-8.209 16.74a1.557 1.557 0 01.244-.252c-.26-.196-.54-.372-.808-.545q.263.41.564.797zm11.737 3.525c.434-.81.812-.526.724-1.629a.802.802 0 00-.327-.551c-.2-.205-.155-.428-.051-.682.254-.64-.126-.81-.608-.914a3.809 3.809 0 00-2.22-.08 1.602 1.602 0 01-1.633-.391c-.608-.489-.383-.895-.91-1.416-1.3-1.218-.08-1.268-.08-2.268a2.63 2.63 0 011.416-2.11c.302-.106.437-.127.541-.427.236-.604.565-.578.988-1.055.145-.164.257-.285.48-.285a.723.723 0 01.384.135s.282.166.372.2l.074-.002a3.411 3.411 0 012.208-.269.557.557 0 01.432.7c.017.441 1.488 1.005 1.588.837a.745.745 0 00.066-.184.48.48 0 01.562-.362c.2.01.514.231.703.231a4.382 4.382 0 00.786-.238c.332-.095.21-.532.067-.847-.078-.207-.375-.237-.595-.237-.266.003-.498-.021-.616-.307a.433.433 0 00-.161-.218c.007.01-.022.034-.042.068a.52.52 0 01-.871.07c-.272-.394-.011-.289-.317-.67a3.283 3.283 0 00-.72-.63.545.545 0 01-.525.387c-.265 0-.36-.155-.594-.303-.245-.142-.625-.1-.929.324a2.663 2.663 0 01-.49.436c-.211.264-.036.313-.4.628-.342.317-.623.179-1.069.059-.477-.111-.42-.747-.347-1.246.078-.5.294-.712.802-.58.729.178.762.038.579-.475-.17-.378-.042-.636.215-.748.78-.317 1.183-1.443 1.906-1.125a.766.766 0 00.887-1.249.868.868 0 01-.316-.254.095.095 0 00-.07-.033c-.219 0-.155.495-.138.713a.492.492 0 01-.49.525c-.281 0-.753-.454-.953-.653-.385-.387-.119-.603.087-1.004a5.425 5.425 0 01.34-.69 1.71 1.71 0 01.588-.442 10.406 10.406 0 00-3.028-.996c-.332.335-.51.95-.954 1.01-.302.054-.912-.059-1.193-.006-.391.08-1.292.553-1.396.553-.57 0-.81-.74.197-1.574a10.398 10.398 0 00-1.884.475 7.258 7.258 0 01-1.042 1.57c-.299.372-.662.062-1.088.016-.565-.056-.325 1.011-1.198.915a5.775 5.775 0 00-.588-.039A10.467 10.467 0 001 11.5c0 .054.007.107.008.161.061.103.41.9.588 1.252.944 1.962.527 1.457.562 2.457.01.238.202.343.42.493a10.28 10.28 0 012.006 1.477.495.495 0 01.111.525c-.07.264-.346.34-.568.502a.431.431 0 00-.21.376 10.425 10.425 0 0011.017 2.669z"},
grid:{16:"M0 0v7h7V0zm6 6H1V1h5zm3-6v7h7V0zm6 6h-5V1h5zM0 9v7h7V9zm6 6H1v-5h5zm3-6v7h7V9zm6 6h-5v-5h5z",32:"M3 15h12V3H3zM4 4h10v10H4zm13 11h12V3H17zm1-11h10v10H18zM3 29h12V17H3zm1-11h10v10H4zm13 11h12V17H17zm1-11h10v10H18z"},home:{16:"M8 0L6 2V0H3v5L0 8h1v8h5v-6h4v6h5V7.978h1zm6 15h-3V9H5v6H2V7.414l2-2V1h1v3.414l3.001-3L14 7.395z"},image:{16:"M1 2v12h14V2zm13 11H2V3h12zm-1-1H3v-1h10zM3 8.678l.333-.356a.3.3 0 0 1 .445 0 .3.3 0 0 0 .444 0l2.242-2.39a.3.3 0 0 1 .423-.021l2.255 2.005a.299.299 0 0 0 .39.01l1.361-.915a.3.3 0 0 1 .41.032L13 8.678V10H3zM11.894 9l-.89-.859-.846.565a1.299 1.299 0 0 1-1.68-.043L6.732 7.11 4.958 9zm-.644-4.5a.75.75 0 1 1-.75-.75.75.75 0 0 1 .75.75z",
32:"M2 4v24h28V4zm27 23H3V5h26zm-9.5-17A1.5 1.5 0 1 1 21 8.5a1.502 1.502 0 0 1-1.5 1.5zm.5-1.5a.5.5 0 1 0-.5.5.5.5 0 0 0 .5-.5zM28 25H4v-1h24zM7.624 16.026l.827.39 5.138-4.267a.652.652 0 0 1 .857.013l.863.774c.864.771 2.71 2.382 3.845 3.357l2.923-2.748a.652.652 0 0 1 .926.033L28 19v4H4v-4.547l2.905-2.31a.642.642 0 0 1 .719-.117zM27 22v-2.61l-4.494-4.875-3.322 3.122-.682-.586a355.007 355.007 0 0 1-3.861-3.37l-.637-.573-5.4 4.487-1.184-.56L5 18.88V22z"},info:{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z",
24:"M11.5 1A10.5 10.5 0 1 0 22 11.5 10.499 10.499 0 0 0 11.5 1zm0 20.1a9.6 9.6 0 1 1 9.6-9.6 9.61 9.61 0 0 1-9.6 9.6zM13 18h-3v-1h1V8h1v9h1zM11.5 6.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM12 9h-2V8h2z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm1.5-6h-3v-1h1V11h1v11h1zM15.5 8.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM16 12h-2v-1h2z"},"information-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM9 12H7V6h2zm0-7H7V3h2z"},
key:{16:"M10.075 1A4.926 4.926 0 0 0 5.15 5.925a4.874 4.874 0 0 0 .51 2.141L0 13.726V16h3.222l.022-.01.756-.756V14h1.233L6 13.233V12h1.232l1.393-1.393a4.869 4.869 0 0 0 1.45.243 4.925 4.925 0 1 0 0-9.85zM6.818 11H5v1.82l-.18.18H3v1.82l-.18.18H1v-.86l5.204-5.204a4.918 4.918 0 0 0 1.434 1.244zm3.257-1.15A3.925 3.925 0 1 1 14 5.925a3.93 3.93 0 0 1-3.925 3.925zM11.5 3A1.5 1.5 0 1 0 13 4.5 1.5 1.5 0 0 0 11.5 3zm0 2a.5.5 0 1 1 .5-.5.501.501 0 0 1-.5.5z"},launch:{16:"M14 8h1v7H1V1h7v1H2v12h12zm-4-7v1h3.29L7.62 7.67l.71.71L14 2.71V6h1V1z",
24:"M13 2v1H3v18h18V11h1v11H2V2zm9 6V2h-6v1h4.3l-8.41 8.403.707.707L21 3.714V8z"},layer:{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.205 8.205 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.213 7.213 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363z"},
"layer-basemap":{32:"M31.603 27.899l-4-24s-6-2-11 0a13.388 13.388 0 0 1-11 0L1.61 27.865c.752.17 7.816 2.427 14.994.034 8.04-2.68 15.96.48 15 0zm-7.927-2.091a23.33 23.33 0 0 0-7.389 1.142 21.34 21.34 0 0 1-6.756 1.04 28.2 28.2 0 0 1-6.785-.864L6.39 5.266a13.201 13.201 0 0 0 4.553.8 16.268 16.268 0 0 0 6.032-1.238 12.652 12.652 0 0 1 4.703-.818 20.298 20.298 0 0 1 5.043.674l3.651 21.908a29.998 29.998 0 0 0-6.696-.784zM1.609 27.865l-.006.034c-.103-.052-.084-.055.006-.034zm23.36-21.53a18.501 18.501 0 0 0-2.209-.284l-.011-.001a15.46 15.46 0 0 0-1.071-.04 10.688 10.688 0 0 0-3.961.675 18.243 18.243 0 0 1-6.774 1.382 15.075 15.075 0 0 1-2.927-.282v.001l-.018-.002-2.966 17.79.02.003H5.05a25.156 25.156 0 0 0 4.495.414h.004c.039 0 .075-.005.115-.006a21.638 21.638 0 0 0 3.946-.4v-.005c2.635-.535 4.778-1.771 10.065-1.771a30.81 30.81 0 0 1 4.253.299v-.001h.002zm-3.04 16.538a36.78 36.78 0 0 0-1.061.083 1.708 1.708 0 0 0 .73-1.412 1.502 1.502 0 0 0-.18-.71l.072-.066a2.025 2.025 0 0 0 .82-1.55v-.25a1.794 1.794 0 0 0 .602.105 1.999 1.999 0 0 0 1.63-.97 2.347 2.347 0 0 0 .514.676 2.616 2.616 0 0 0 1.067.564l.603 3.614a31.59 31.59 0 0 0-3.05-.15c-.036 0-.07.004-.106.005a27.32 27.32 0 0 0-1.64.06zM20.693 8.326a2.143 2.143 0 0 0-1.254.76 1.592 1.592 0 0 0-.417 1.319l.023.112c.196.96.153 1.307-.186 1.49a3.217 3.217 0 0 0-1.239 1.38 2.399 2.399 0 0 1-.276.43c.032-.03-.06-.1-.128-.15a2.19 2.19 0 0 0-1.366-.537 1.864 1.864 0 0 0-1.813 1.907c0 .32-.32.815-.48.815a.556.556 0 0 1-.26-.038 2.364 2.364 0 0 0-2.032-1.539 2.151 2.151 0 0 0-2.099 2.196 3.19 3.19 0 0 0 .128.849 1.341 1.341 0 0 1 .062.344.94.94 0 0 1-.164.406 2.694 2.694 0 0 0-.408 1.363 1.746 1.746 0 0 0 1.812 1.667 2.718 2.718 0 0 0 1.043-.213 4.21 4.21 0 0 1-.377.41 2.41 2.41 0 0 0-.75 3.023 1.469 1.469 0 0 0 .58.61c-.35.028-.7.033-1.052.042-.17.004-.336.018-.508.018a23.876 23.876 0 0 1-3.329-.24L8.838 8.932a16.49 16.49 0 0 0 2.123.135 19.256 19.256 0 0 0 7.146-1.454 9.276 9.276 0 0 1 2.658-.57h.016q-.032.073-.058.15a1.815 1.815 0 0 0-.095.583 3.228 3.228 0 0 0 .064.549zm-5.354 15.778a16.56 16.56 0 0 1-2.06.523c-.577-.338-1.65-.315-1.872-.755-.755-1.509 1.29-1.896 1.29-3.103 0-.3-.154-.909-.621-.956-.653-.067-.823.287-1.48.287a.751.751 0 0 1-.812-.667c0-.718.572-1.052.572-1.769 0-.466-.19-.729-.19-1.193a1.15 1.15 0 0 1 1.098-1.196c.598 0 .86.49 1.146 1.004a1.19 1.19 0 0 0 1.147.573c.907 0 1.48-1.133 1.48-1.815a.875.875 0 0 1 .813-.907c.644 0 .883.669 1.528.669 1.062 0 1.022-1.405 1.958-1.912 1.146-.62.812-1.956.668-2.672-.062-.319.54-.932.861-.91 1.337.097.764-1 .764-1.528a.824.824 0 0 1 .042-.263 1.218 1.218 0 0 1 .355-.49A16.23 16.23 0 0 1 24.1 7.2l1.83 10.981a1.527 1.527 0 0 1-.22-.154c-.456-.4-.446-1.2-1.068-1.2-.835 0-.901 1.246-1.736 1.246-.379 0-.557-.268-.935-.268a.616.616 0 0 0-.667.546v.868c0 .733-.978.879-.978 1.614 0 .299.266.41.266.71 0 .934-1.528.893-1.739 1.692a24.652 24.652 0 0 0-3.514.869z"},
"layer-feature":{32:"M27 4a20.57 20.57 0 0 0-4.061-.793 3.177 3.177 0 0 1 .061.6v.412a20.975 20.975 0 0 1 3.117.565l3.614 21.686a20.65 20.65 0 0 0-5.842-.803 25.953 25.953 0 0 0-8.205 1.385 23.961 23.961 0 0 1-7.573 1.281 18.036 18.036 0 0 1-5.993-.957L5.804 5.26A22.899 22.899 0 0 0 9 5.793V4.787A20.657 20.657 0 0 1 5 4L1 28s6 3 15 0 15 0 15 0zm-5 .608v10.665l-6 5.996-6-5.996V4.608C10 2.455 12.258 0 16 0s6 2.455 6 4.608zm-6 15.247l5-4.996V4.607C21 3.095 19.262 1 16 1s-5 2.095-5 3.607V14.86zM19 7a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2z"},
"layer-graphics":{32:"M31 27.9c.96.48-6.96-2.68-15 0s-15.96-.48-15 0l4-24a13.388 13.388 0 0 0 11 0c5-2 11 0 11 0zm-15.316-.949a23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04zm1.543-17.28a12.423 12.423 0 0 1 4.305-.773 20.349 20.349 0 0 1 2.964.229l-.132-.791a17.556 17.556 0 0 0-3.29-.327 10.623 10.623 0 0 0-3.96.774 16.71 16.71 0 0 1-6.188 1.303 23.281 23.281 0 0 1-3.488-.273l-.16.96a26.752 26.752 0 0 0 3.219.202 19.531 19.531 0 0 0 6.73-1.303zm6.41 12.159A26.767 26.767 0 0 0 16 23v-7.828A26.697 26.697 0 0 1 23.637 14c.58 0 1.13.023 1.658.06l1.327 7.965a23.502 23.502 0 0 0-2.985-.195zM17 21.688a27.149 27.149 0 0 1 6.637-.858c.592 0 1.182.023 1.784.068l-.98-5.883Q24.047 15 23.636 15a25.363 25.363 0 0 0-6.637.927zm-8 2.2a3.757 3.757 0 0 1-4-3.445A3.757 3.757 0 0 1 9 17a3.757 3.757 0 0 1 4 3.443 3.757 3.757 0 0 1-4 3.446zm3-3.445A2.768 2.768 0 0 0 9 18a2.768 2.768 0 0 0-3 2.443 2.769 2.769 0 0 0 3 2.446 2.769 2.769 0 0 0 3-2.446z"},
"layer-imagery":{32:[{d:"M23.463 23.2a26.071 26.071 0 0 0-3.463.224v-5.076a34.065 34.065 0 0 1 5.302-.251l.861 5.191c-.9-.059-1.804-.088-2.7-.088zM13 8.705v4.258c.456-.124.916-.253 1.392-.389A46.427 46.427 0 0 1 19 11.432V7.347a16.922 16.922 0 0 0-2.396.56A22.646 22.646 0 0 1 13 8.705z",opacity:.25},{d:"M13 13.999a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-4.463 11.8A16.675 16.675 0 0 0 12 25.477v-5.1a15.064 15.064 0 0 1-3.463.395 20.464 20.464 0 0 1-2.259-.142l-.796 4.796a13.024 13.024 0 0 0 3.055.375z",
opacity:.5},{d:"M23.462 27.2A33.153 33.153 0 0 1 31 28L27 3.9a26.401 26.401 0 0 0-5.926-.689c-5.144 0-5.927 1.657-10.735 1.657A14.99 14.99 0 0 1 5 3.9L1 28a16.273 16.273 0 0 0 7.538 1.8c6.876 0 8.048-2.6 14.924-2.6zm-21.355.234L5.795 5.217a15.6 15.6 0 0 0 4.544.651 17.42 17.42 0 0 0 5.445-.847 16.628 16.628 0 0 1 5.29-.81 26.164 26.164 0 0 1 5.05.518l3.651 21.999a37.286 37.286 0 0 0-6.313-.528 22.381 22.381 0 0 0-7.77 1.348A20.422 20.422 0 0 1 8.539 28.8a15.989 15.989 0 0 1-6.43-1.366zM24.384 6.456a23.558 23.558 0 0 0-3.31-.245 14.762 14.762 0 0 0-4.738.733 19.402 19.402 0 0 1-5.996.924 18.182 18.182 0 0 1-2.92-.228L4.349 26.146a14.096 14.096 0 0 0 4.188.654 18.525 18.525 0 0 0 6.541-1.154 24.357 24.357 0 0 1 8.385-1.446c1.448 0 2.763.078 3.896.188zM20 12.29a26.155 26.155 0 0 1 4.29-.29l.845 5.097a35.442 35.442 0 0 0-5.135.242zm3.519-4.935l.604 3.643a27.235 27.235 0 0 0-4.123.276V7.246c.33-.02.68-.035 1.074-.035a21.744 21.744 0 0 1 2.445.143zm-6.915.553A16.922 16.922 0 0 1 19 7.347v4.085a46.427 46.427 0 0 0-4.608 1.142c-.475.136-.936.265-1.392.389V8.705a22.646 22.646 0 0 0 3.604-.798zM13 14a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-2.66-5.13c.603 0 1.146-.027 1.66-.065v4.414a13.823 13.823 0 0 1-4.56.414l.808-4.872a19.724 19.724 0 0 0 2.092.108zM12 19.344a15.286 15.286 0 0 1-5.558.299l.832-5.012c.407.04.808.066 1.198.066A15.487 15.487 0 0 0 12 14.241zm-6.518 6.08l.796-4.796a20.464 20.464 0 0 0 2.26.143A15.064 15.064 0 0 0 12 20.376v5.1a16.675 16.675 0 0 1-3.463.324 13.024 13.024 0 0 1-3.055-.375zm9.289-.73a39.72 39.72 0 0 1-1.771.537V20.12a49.66 49.66 0 0 0 1.587-.48A31.896 31.896 0 0 1 19 18.5v5.077a30.389 30.389 0 0 0-4.23 1.117zM20 23.423v-5.076a34.138 34.138 0 0 1 5.302-.25l.861 5.19c-.9-.059-1.804-.088-2.7-.088a26.071 26.071 0 0 0-3.463.224z"}]},
"layer-points":{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.204 8.204 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.212 7.212 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363zM4.5 5.5a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm6 3a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm-7 2a1 1 0 1 1 1 1 1 1 0 0 1-1-1z",
32:"M1.006 27.866L1 27.9c-.103-.051-.085-.055.006-.034zM16 27.9c-7.178 2.393-14.242.137-14.994-.034L5 3.9a13.387 13.387 0 0 0 11 0c5-2 11 0 11 0l4 24c.96.48-6.96-2.68-15 0zm13.769-1.307L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04 23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784zM12.5 10.5a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm9 4a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm-10 5a1 1 0 1 0 1 1 1 1 0 0 0-1-1z"},
"layer-tile":{32:"M31 28s-6-3-15 0-15 0-15 0l2.714-16.286.87.87-2.466 14.792a18.032 18.032 0 0 0 5.993.957 23.961 23.961 0 0 0 7.573-1.281 25.957 25.957 0 0 1 8.205-1.385 20.658 20.658 0 0 1 5.842.803L26.117 4.784a20.35 20.35 0 0 0-5.043-.673 12.939 12.939 0 0 0-4.286.677L16 4c5-2 11 0 11 0zM16 7h9v17H8v-9h8zM9 23h3.243l.04-.137a6.48 6.48 0 0 1 .546-1.23 3.236 3.236 0 0 0 .337-.757.575.575 0 0 0-.1-.327 1.52 1.52 0 0 1-.218-.787c0-1.236 1.963-2.573 2.619-2.573H16V16H9zm7 0v-4.812h-.533c-.347.075-1.62 1.022-1.62 1.574a.55.55 0 0 0 .1.313 1.545 1.545 0 0 1 .219.801 2.894 2.894 0 0 1-.454 1.227 6.684 6.684 0 0 0-.414.897zm8 0v-4.918a10.162 10.162 0 0 0-2.276.865c-1.58.79-3.622.08-4.724-.427V23zm0-7h-7v1.41c.751.388 2.867 1.345 4.276.643A10.442 10.442 0 0 1 24 17.058zm-7-1h7V8h-7zM6 14V5h9v9zm8-8H7v5.145a.824.824 0 0 0 .627-.21 2.075 2.075 0 0 0 .663-1.392 1.508 1.508 0 0 1 1.448-1.558 1.893 1.893 0 0 1 1.194.494 1.296 1.296 0 0 0 .467.255.517.517 0 0 0 .123.034c.316 0 .486-.183.738-.608.042-.07.08-.129.126-.212A2.776 2.776 0 0 1 14 6.428zm0 7V7.513a2.36 2.36 0 0 0-.743.926c-.334.592-.75 1.329-1.736 1.329a1.735 1.735 0 0 1-1.069-.403l-.124-.09a.997.997 0 0 0-.59-.29c-.257 0-.448.294-.448.558a2.6 2.6 0 0 1-.112.672 3.02 3.02 0 0 1-.908 1.487 1.854 1.854 0 0 1-1.205.46c-.021 0-.043-.005-.065-.006V13z"},
layers:{16:"M8.023 1.023l-8 4.5 8 4.5 8-4.5zm-5.96 4.5l5.96-3.352 5.96 3.352-5.96 3.353zm13.96 3l-8 4.5-8-4.5 1.02-.573 6.98 3.926 6.98-3.926zm-8 6.353l6.98-3.926 1.02.573-7.914 4.452a.175.175 0 0 1-.171 0L.023 11.523l1.02-.573z"},lightbulb:{24:"M16.337 3.055a6.057 6.057 0 0 0-4.675-2.051l-.162.002-.162-.002a6.057 6.057 0 0 0-4.675 2.05 6.46 6.46 0 0 0-1.63 4.802 11.406 11.406 0 0 0 2.014 4.465 6.703 6.703 0 0 1 .75 1.322 12.957 12.957 0 0 1 .113 1.333c.019.366.037.71.074.994a2.84 2.84 0 0 0 .704 1.576l-.525.458a.804.804 0 0 0 .066 1.264l.414.293-.364.263a.804.804 0 0 0-.333.689.794.794 0 0 0 .37.641l2.45 1.625a1.311 1.311 0 0 0 .723.22h.016a1.316 1.316 0 0 0 .73-.22l2.43-1.613a.803.803 0 0 0 .059-1.34l-.367-.265.418-.295a.806.806 0 0 0 .062-1.263l-.525-.458a2.87 2.87 0 0 0 .707-1.596c.034-.263.052-.607.07-.973a12.957 12.957 0 0 1 .114-1.333 6.703 6.703 0 0 1 .75-1.322 11.406 11.406 0 0 0 2.014-4.465 6.46 6.46 0 0 0-1.63-4.801zm-2.43 17.414l-2.225 1.476a.41.41 0 0 1-.185.053h-.002a.32.32 0 0 1-.177-.053L9.093 20.47l1.264-.923-1.35-.953.68-.594h3.626l.68.594-1.35.953zM12 17h-1v-3h1zm4.975-9.263a10.671 10.671 0 0 1-1.863 4.042 5.638 5.638 0 0 0-.895 1.7 13.401 13.401 0 0 0-.125 1.446c-.018.336-.033.65-.07.93A1.898 1.898 0 0 1 13.456 17H13v-3.421l1.075-3.325-.951-.309L12.136 13h-1.272l-.988-3.055-.951.309L10 13.579V17h-.456a1.93 1.93 0 0 1-.57-1.182c-.033-.243-.048-.557-.066-.893a13.401 13.401 0 0 0-.125-1.446 5.638 5.638 0 0 0-.895-1.7 10.671 10.671 0 0 1-1.863-4.042 5.49 5.49 0 0 1 1.386-4.02 5.083 5.083 0 0 1 3.927-1.713l.162.002.162-.002a5.083 5.083 0 0 1 3.927 1.714 5.49 5.49 0 0 1 1.386 4.02z"},
link:{16:"M5 9.5a4.505 4.505 0 0 0 .048.493c-.007-.007-.016-.011-.023-.018l-3-3a3.5 3.5 0 1 1 4.95-4.95l3 3a3.486 3.486 0 0 1-1.31 5.76l-.226-.225a1.484 1.484 0 0 1-.37-.631 2.495 2.495 0 0 0 1.199-4.197l-3-3a2.5 2.5 0 1 0-3.536 3.536L5.09 8.625A4.498 4.498 0 0 0 5 9.5zm11 3a3.475 3.475 0 0 0-1.025-2.475l-3-3c-.007-.007-.016-.011-.023-.018A4.505 4.505 0 0 1 12 7.5a4.498 4.498 0 0 1-.089.876l2.357 2.356a2.5 2.5 0 0 1-.009 3.544 2.561 2.561 0 0 1-3.527-.008l-3-3a2.5 2.5 0 0 1-.094-3.436 2.43 2.43 0 0 1 1.3-.74 1.485 1.485 0 0 0-.377-.652l-.222-.222a3.482 3.482 0 0 0-1.314 5.757l3 3a3.5 3.5 0 0 0 4.937.012l-.351-.355.352.355A3.476 3.476 0 0 0 16 12.5z",
24:"M7 14c0 .025.003.05.004.075l-3.54-3.54a5 5 0 0 1 7.072-7.07l4 4a4.992 4.992 0 0 1-1.713 8.187l-.237-.237a1.998 1.998 0 0 1-.413-.609 3.985 3.985 0 0 0 1.656-6.635l-4-4a4 4 0 0 0-5.369-.26l-.318-.387.318.386a4 4 0 0 0-.29 5.92l2.94 2.94A7.012 7.012 0 0 0 7 14zm16 4a4.97 4.97 0 0 0-1.464-3.536l-3.54-3.539c0 .025.004.05.004.075a7.087 7.087 0 0 1-.113 1.23l2.942 2.941a4 4 0 0 1-.128 5.78l.338.368-.338-.368a4 4 0 0 1-5.53-.122l-4-4a3.966 3.966 0 0 1 1.658-6.631 1.998 1.998 0 0 0-.415-.613l-.234-.234a5.004 5.004 0 0 0-1.907 1.315 5 5 0 0 0 .191 6.87l4 4A5 5 0 0 0 23 18z"},
list:{16:"M6 14h9v1H6zm-5-1h3v3H1zm1 2h1v-1H2zM6 2v1h9V2zm0 7h9V8H6zM1 1h3v3H1zm1 2h1V2H2zM1 7h3v3H1zm1 2h1V8H2z"},locator:{32:"M27 15h2l-4-4V3h-5v3l-4.5-4.5L2 15h2v14H2v1h27v-1h-2zM21 4h3v6l-3-3zm-5.5-1.086L26.586 14H4.414zM5 29V15h21v14zm4-4h13v-7H9zm12-6v5h-5v-5zm-11 0h5v5h-5z"},lock:{16:"M13 7V5A5 5 0 0 0 3 5v2a1.003 1.003 0 0 0-1 1v7a1.003 1.003 0 0 0 1 1h10a1.003 1.003 0 0 0 1-1V8a1.003 1.003 0 0 0-1-1zM4 5a4 4 0 0 1 8 0v2h-1V5a3 3 0 0 0-6 0v2H4zm6 2H6V5a2 2 0 0 1 4 0zm3 8H3V8h10zm-5-1H7V9h1v1h1v1H8v1h1v1H8z",
32:"M26 14h-2v-3.5a8.5 8.5 0 0 0-17 0V14H5a2.006 2.006 0 0 0-2 2v14a2.006 2.006 0 0 0 2 2h21a2.006 2.006 0 0 0 2-2V16a2.006 2.006 0 0 0-2-2zM8 10.5a7.5 7.5 0 0 1 15 0V14h-1v-3.5a6.5 6.5 0 0 0-13 0V14H8zM21 14H10v-3.5a5.5 5.5 0 0 1 11 0zm6 16a1.001 1.001 0 0 1-1 1H5a1.001 1.001 0 0 1-1-1V16a1.001 1.001 0 0 1 1-1h21a1.001 1.001 0 0 1 1 1zM16 19h1v1h-1zm-1 1h1v1h1v1h-1v1h1v1h-1v1h1v1h-1v1h-1z"},line:{16:"M6 5v1.293L9.707 10h.328L14 3.657V2h2v2h-1.035L11 10.343V12H9v-1.293L5.293 7h-.492L2 12.383V14H0v-2h1.073L4 6.374V5z",
24:"M21 6h.046l-5.25 9h-.944L10 9.455V7H7v2.926L1.862 18H0v3h3v-2.926L8.138 10h1.01L14 15.545V18h3v-3h-.046l5.25-9H24V3h-3zM8 8h1v1H8zM2 20H1v-1h1zm14-3h-1v-1h1zm7-13v1h-1V4z"},"magnifying-glass-plus":{16:"M15.805 13.918l-3.067-3.068a.668.668 0 0 0-.943 0l-.124.124-.968-.968a5.5 5.5 0 1 0-.69.69l.968.968-.13.129a.667.667 0 0 0 0 .943l3.068 3.067a.665.665 0 0 0 .943 0l.943-.942a.666.666 0 0 0 0-.943zM9.683 9.68A4.47 4.47 0 0 1 6.5 10.999a4.502 4.502 0 1 1 3.183-1.318zm4.708 5.18l-2.597-2.596.473-.473 2.595 2.598zM7 6h2v1H7v2H6V7H4V6h2V4h1z"},
map:{16:"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.498 1.498 0 0 0 .718-1.267 1.24 1.24 0 0 0-.053-.358 1.594 1.594 0 0 0 .326-.607c.03.002.062.003.093.003a1.415 1.415 0 0 0 .836-.266 1.517 1.517 0 0 0 .126.124 2.385 2.385 0 0 0 1.564.68H14v2h-3.183zM14 11h-.43a1.464 1.464 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375a1.545 1.545 0 0 0 .09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.619.619 0 0 1 .59-.643c.323 0 .464.264.618.54a.642.642 0 0 0 .617.308c.49 0 .798-.61.798-.977a.471.471 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823a.434.434 0 0 1 .022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.653.653 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44a1.496 1.496 0 0 0 .112.567 1.6 1.6 0 0 0-.422.643 1.428 1.428 0 0 0-.074.442 1.676 1.676 0 0 0-.536.43 1.317 1.317 0 0 0-.32 1.091 3.213 3.213 0 0 1 .066.414 1.987 1.987 0 0 0-.649.67 1.462 1.462 0 0 0-.674-.166 1.447 1.447 0 0 0-1.383 1.086 1.443 1.443 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.371 1.371 0 0 0 .984 1.29 1.583 1.583 0 0 0-.003 1.549c.143.286.636.774.534.774z",
24:"M22.82 15.995l-.02-.016V1.2H1.2v21.6h21.6v-6.78zM22 15.81a2.898 2.898 0 0 1-.749.147 2.476 2.476 0 0 1-.396.044c-.319 0-.746-.376-1.03-.625a1.32 1.32 0 0 1-.214-.39c-.145-.339-.39-.907-1.04-.907a1.585 1.585 0 0 0-1.062.414.625.625 0 0 1-.444.2.77.77 0 0 1-.237-.086 1.52 1.52 0 0 0-.66-.178 1.068 1.068 0 0 0-1.168.94v.752c0 .098-.05.161-.233.346a1.455 1.455 0 0 0-.526 1.055 1.146 1.146 0 0 0 .357.73c.036.042.086.1.11.105a1.85 1.85 0 0 1-.444.16c-.444.122-1.186.326-1.186 1.14a1.214 1.214 0 0 0 .318.73c.029.037.066.086.087.116-.048.124-.14.328-.235.547a15.9 15.9 0 0 0-.391.951h-2.58l-.002-.287a2.293 2.293 0 0 1 .184-.817l.053-.15a2.931 2.931 0 0 0 .186-.999c0-.871-.876-1.076-1.4-1.198-.172-.04-.432-.102-.464-.108-.174-.345-.088-.485.357-.93a1.925 1.925 0 0 0 .736-1.353 1.198 1.198 0 0 0-.951-1.267 1.626 1.626 0 0 0-.856.137.95.95 0 0 1-.39.091.28.28 0 0 1-.156-.039.974.974 0 0 1 .171-.475 1.898 1.898 0 0 0 .292-.955 2.3 2.3 0 0 0-.093-.608 1.337 1.337 0 0 1-.06-.355.434.434 0 0 1 .386-.464c.156 0 .246.118.488.55a1.44 1.44 0 0 0 1.363.721c1.035 0 1.696-1.164 1.696-1.965 0-.113.08-.232.157-.232.084 0 .157.049.315.169a1.468 1.468 0 0 0 .92.37 1.523 1.523 0 0 0 1.335-.997 1.485 1.485 0 0 1 .483-.607 2.175 2.175 0 0 0 .81-2.616c.049-.08.161-.199.152-.217a1.18 1.18 0 0 0 1.02-.32 1.325 1.325 0 0 0 .17-1.18 1.024 1.024 0 0 1-.03-.286 1.002 1.002 0 0 1 .282-.3 1.451 1.451 0 0 0 .637-1.114 1.487 1.487 0 0 0-.238-.764.583.583 0 0 1-.11-.276c0-.055.109-.404.996-.885.281-.152.445-.226.552-.274H22zM2 2h15.354a1.586 1.586 0 0 0-.634 1.16 1.488 1.488 0 0 0 .239.767.582.582 0 0 1 .11.272c0 .092-.069.165-.288.353a1.707 1.707 0 0 0-.58.743 1.173 1.173 0 0 0-.058.372 2.331 2.331 0 0 0 .053.419c.02.106.058.303.097.303h.001a.537.537 0 0 1-.235.012 1.244 1.244 0 0 0-.91.474 1.051 1.051 0 0 0-.293.94c.165.802.165 1.285-.304 1.538a2.313 2.313 0 0 0-.88.995c-.23.41-.305.488-.463.488-.085 0-.158-.049-.317-.169a1.462 1.462 0 0 0-.918-.37 1.197 1.197 0 0 0-1.157 1.232c0 .323-.3.965-.696.965-.375 0-.448-.134-.504-.233a1.569 1.569 0 0 0-1.347-1.038 1.428 1.428 0 0 0-1.386 1.464 2.3 2.3 0 0 0 .093.608 1.337 1.337 0 0 1 .06.355.974.974 0 0 1-.17.476 1.898 1.898 0 0 0-.293.954 1.103 1.103 0 0 0 1.156 1.04 1.936 1.936 0 0 0 .752-.16.874.874 0 0 1 .35-.09h.007a.537.537 0 0 1 .088.288c0 .19-.167.371-.442.646a1.645 1.645 0 0 0-.546 2.086 1.529 1.529 0 0 0 1.131.632c.199.046.568.132.628.225a1.957 1.957 0 0 1-.132.672l-.05.14a3.23 3.23 0 0 0-.24 1.154l.002.287H2zm11.927 20c.07-.168.156-.363.238-.55.297-.682.335-.775.335-.965a1.173 1.173 0 0 0-.31-.708c-.042-.054-.095-.141-.118-.127a1.528 1.528 0 0 1 .457-.17c.415-.115 1.188-.328 1.188-1.144a1.156 1.156 0 0 0-.359-.735c-.047-.054-.116-.132-.117-.08 0-.1.05-.165.235-.35A1.449 1.449 0 0 0 16 16.12v-.66a.498.498 0 0 1 .407.053 1.498 1.498 0 0 0 .658.178 1.587 1.587 0 0 0 1.063-.414.768.768 0 0 1 .4-.217 1.413 1.413 0 0 1 .165.32 1.965 1.965 0 0 0 .473.745 2.772 2.772 0 0 0 1.69.874 3.63 3.63 0 0 0 .551-.056 2.464 2.464 0 0 1 .395-.044.526.526 0 0 0 .198-.038V22z"},
"mega-phone":{32:"M28.97 4.36a2.06 2.06 0 0 0-2.06.002l-12.768 7.372a1.99 1.99 0 0 1-1 .267H4a2 2 0 0 0-2 2V18a2 2 0 0 0 2 2h4v3a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-1.083l9.91 5.722A2.06 2.06 0 0 0 30 25.857V6.144a2.06 2.06 0 0 0-1.03-1.784zM16 23a1.001 1.001 0 0 1-1 1h-5a1.001 1.001 0 0 1-1-1v-3h4.002a2.53 2.53 0 0 1 1.269.341L16 21.34zm13 2.856a1.06 1.06 0 0 1-1.59.916L14.641 19.4a3.015 3.015 0 0 0-1.5-.4H4a1 1 0 0 1-1-1v-4.01a1 1 0 0 1 1-.999h9.144a2.992 2.992 0 0 0 1.496-.4l12.77-7.362a1.067 1.067 0 0 1 .532-.144A1.06 1.06 0 0 1 29 6.145z"},
"minus-circle":{16:"M12 7v1H3V7zM7.5 0A7.5 7.5 0 1 0 15 7.5 7.5 7.5 0 0 0 7.5 0zm0 14A6.5 6.5 0 1 1 14 7.5 6.508 6.508 0 0 1 7.5 14z"},mobile:{16:"M10.983 0H6.017A2.017 2.017 0 0 0 4 2.017v11.966A2.017 2.017 0 0 0 6.017 16h4.966A2.017 2.017 0 0 0 13 13.983V2.017A2.017 2.017 0 0 0 10.983 0zM6.018 1h4.964a1.016 1.016 0 0 1 1.015 1H5.004a1.016 1.016 0 0 1 1.014-1zM12 13.983A1.018 1.018 0 0 1 10.982 15H9v-1H8v1H6.018A1.018 1.018 0 0 1 5 13.983V13h7zM12 12H5V3h7z",24:"M6 2.524v19.952A1.524 1.524 0 0 0 7.524 24h9.952A1.524 1.524 0 0 0 19 22.476V2.524A1.524 1.524 0 0 0 17.476 1H7.524A1.524 1.524 0 0 0 6 2.524zm12 19.953a.524.524 0 0 1-.524.523H14v-1h-3v1H7.524A.524.524 0 0 1 7 22.477V21h11zM18 20H7V4h11zm-.524-18a.524.524 0 0 1 .524.523V3H7v-.477A.524.524 0 0 1 7.524 2z"},
monitor:{16:"M15.167 1H.833A.834.834 0 0 0 0 1.833v10.334A.834.834 0 0 0 .833 13H6v1H5v1h6v-1h-1v-1h5.167a.834.834 0 0 0 .833-.834V1.834A.834.834 0 0 0 15.167 1zM9 14H7v-1h2zm6-2H1V2h14z",24:"M0 4v14a1.001 1.001 0 0 0 1 1h9v1H8v1h8v-1h-2v-1h9a1.001 1.001 0 0 0 1-1V4a1.001 1.001 0 0 0-1-1H1a1.001 1.001 0 0 0-1 1zm13 16h-2v-1h2zm10-2H1V4h22z"},notebook:{32:"M5 24H3v-1h1v-1h1zm0-5H4v1H3v1h2zm0 6H4v1H3v1h2zM28 2v28H4v-2h1v1h2V3H5v3H3V5h1V2zm-1 1H8v26h19zM5 13H4v1H3v1h2zm0 3H4v1H3v1h2zm0-6H4v1H3v1h2zm0-3H4v1H3v1h2zm10.5 14H13V11h2.5v-1H12v12h3.5zM23 10h-3.5v1H22v10h-2.5v1H23z"},
organization:{16:"M8 3V1H2v2H0v13h7v-4h1v4h7V3zm1 12v-4H6v4H1V4h2V2h4v2h7v11zM6 9h3V6H6zm1-2h1v1H7zm3-1v3h3V6zm2 2h-1V7h1zM2 9h3V6H2zm1-2h1v1H3z"},"pause-f":{16:"M5 14H2a1.003 1.003 0 0 1-1-1V2a1.003 1.003 0 0 1 1-1h3a1.003 1.003 0 0 1 1 1v11a1.003 1.003 0 0 1-1 1zm9-1V2a1.003 1.003 0 0 0-1-1h-3a1.003 1.003 0 0 0-1 1v11a1.003 1.003 0 0 0 1 1h3a1.003 1.003 0 0 0 1-1z"},pencil:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},
pin:{24:"M12 1C8.687 1 6 2.283 6 5.619v11.93l6 6.04 6-6.04V5.619C18 2.283 15.313 1 12 1zm5.1 16.238L12 22.37l-5.1-5.133V5.488c0-3.05 2.773-3.69 5.1-3.69s5.1.64 5.1 3.69zM15 8a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.003 2.003 0 0 0 2-2z"},plus:{16:"M14 8H9v5H8V8H3V7h5V2h1v5h5z",24:"M22 13h-9v9h-1v-9H3v-1h9V3h1v9h9z",32:"M16 17H8v-1h8V8h1v8h8v1h-8v8h-1z"},"plus-circle":{24:"M11.5 1.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 11.5 1.2zm0 19.6a9.3 9.3 0 1 1 9.3-9.3 9.31 9.31 0 0 1-9.3 9.3zM12 11h5v1h-5v5h-1v-5H6v-1h5V6h1z",
32:"M16.5 3.2a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm0 25.6a12.3 12.3 0 1 1 12.3-12.3 12.314 12.314 0 0 1-12.3 12.3zM17 16h7v1h-7v7h-1v-7H9v-1h7V9h1z"},"plus-f":{16:"M9 7h5v2H9v5H7V9H2V7h5V2h2z"},"plus-square":{16:"M13.071 1H1.93a.929.929 0 0 0-.93.929V13.07a.929.929 0 0 0 .929.929H13.07a.929.929 0 0 0 .929-.929V1.93a.929.929 0 0 0-.928-.93zM13 13H2V2h11zm-2-5H8v3H7V8H4V7h3V4h1v3h3z",24:"M19.719 2H3.28A1.281 1.281 0 0 0 2 3.281v16.437A1.282 1.282 0 0 0 3.281 21h16.437A1.282 1.282 0 0 0 21 19.718V3.281A1.281 1.281 0 0 0 19.719 2zM20 19.719a.281.281 0 0 1-.281.281H3.28a.281.281 0 0 1-.28-.281V3.28A.281.281 0 0 1 3.281 3H19.72a.281.281 0 0 1 .281.281zM12 11h6v1h-6v6h-1v-6H5v-1h6V5h1z"},
polygon:{16:"M15 1L6.833 7 1 4v11h14zm-1 13H2V5.639l4.927 2.534L14 2.976z",24:"M2 4.8V22h20V2l-11.538 8.4zm19-.835V21H3V6.661l7.489 4.956z"},point:{16:"M6 11h5V6H6zm1-4h3v3H7zm5 1h4v1h-4zM1 8h4v1H1zm8 8H8v-4h1zM9 5H8V1h1z",24:"M16 12h7v1h-7zM2 13h7v-1H2zm10 10h1v-7h-1zm0-14h1V2h-1zm-2 1h5v5h-5zm1 4h3v-3h-3z"},portal:{24:"M11.994 1.115L3.628 5.356A4.8 4.8 0 0 0 1 9.633v7.596A4.732 4.732 0 0 0 5.4 22h11.141A6.786 6.786 0 0 0 23 15.17V6.104zM22 15.17A5.775 5.775 0 0 1 16.541 21H5.401A3.724 3.724 0 0 1 2 17.229V9.633a3.777 3.777 0 0 1 2.08-3.385l7.939-4.024L22 6.748zm-7.686-2.152l2.537 1.4-4.849 2.676-4.85-2.676 2.537-1.4.932.514-1.606.886 2.987 1.648 2.987-1.648-1.607-.886zM12.002 7.8l-4.85 2.676 4.85 2.676 4.85-2.676zm0 4.324l-2.987-1.648 2.987-1.648 2.987 1.648z"},
promote:{48:"M13.147 22.954l-7.021 2.167-.236-.765 7.021-2.167zm.52 1.686l-7.021 2.167.236.764 7.021-2.166zm24.084-4.995l-1.812.56 3.706 12.01a1.861 1.861 0 0 1-1.262 2.31 1.85 1.85 0 0 1-1.416-.152 1.847 1.847 0 0 1-.894-1.11l-.45-1.457c-1.123-.63-9.406-5.06-16.124-2.985l-.917.283-2.128.657c.094.282.188.565.283.842a7.906 7.906 0 0 0 2.858 1.61 1.423 1.423 0 0 1 .616 2.372l-1.252 1.256a26.572 26.572 0 0 0 3.062 4.561l.6-.185a2.224 2.224 0 0 1 2.778 1.469l.128.414a2.223 2.223 0 0 1-1.468 2.78l-5.163 1.592-.17-.166a29.572 29.572 0 0 1-8.8-14.531l-.613.189a6.55 6.55 0 0 1-3.862-12.516l9.269-2.86.916-.283c6.721-2.073 11.068-10.401 11.64-11.552l-.452-1.466a1.86 1.86 0 0 1 1.26-2.315 1.865 1.865 0 0 1 2.31 1.261l3.64 11.799 1.812-.559a3.23 3.23 0 0 1 1.905 6.173zm-19.788 8.812l-3.39-10.986-8.886 2.741A5.749 5.749 0 1 0 9.077 31.2zm1.411 4.526a8.179 8.179 0 0 1-2.9-1.567 7.292 7.292 0 0 0 1.202 3.414 1.309 1.309 0 0 0 .616.547l1.353-1.356a.622.622 0 0 0-.271-1.038zm-3.685-2.986l-5 1.542a28.411 28.411 0 0 0 8.427 14.028l4.706-1.452a1.423 1.423 0 0 0 .942-1.779l-.128-.414a1.426 1.426 0 0 0-1.78-.94l-1.106.34-.17-.2a27.468 27.468 0 0 1-3.354-4.954 1.696 1.696 0 0 1-1.108-.75c-.905-1.154-1.74-3.717-1.32-4.58a.692.692 0 0 1 .125-.146q-.118-.345-.234-.695zm19.598.719L27.613 5.845c-1.316 2.454-5.463 9.288-11.74 11.225l-.535.164 3.39 10.988.535-.165c6.278-1.935 13.554 1.374 16.024 2.659zm3.59 1.727l-9.25-29.979a1.061 1.061 0 1 0-2.037.592l9.249 29.977a1.061 1.061 0 1 0 2.039-.59zM37.516 18.88a2.43 2.43 0 1 0-1.433-4.643l-1.812.559 1.433 4.643zM43.39 3.96l-.567-.565-4.17 4.17.567.566zM43.235 15.5l4.869-1.305-.207-.772-4.869 1.305zm-1.25 8.108l5.911 1.583.207-.772-5.91-1.584z"},
question:{rtl:"ar",16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 10.5a1 1 0 1 1-1 1 1 1 0 0 1 1-1zM8 9H7a3.046 3.046 0 0 1 1.282-2.51c.47-.462.736-.746.732-1.217a1.324 1.324 0 0 0-1.46-1.27 1.418 1.418 0 0 0-1.548 1.394h-1c0-3.09 5.009-3.154 5.008-.128a2.617 2.617 0 0 1-1.032 1.935C8.462 7.715 8 7.995 8 9z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm.5-9h-1c0-2.959 1.227-3.919 2.371-5.207.916-1.031 1.639-1.846 1.629-3.264C19 9.104 17.08 8 15.167 8 13.16 8 11 9.194 11 11.817h-1a4.523 4.523 0 0 1 1.648-3.628A5.549 5.549 0 0 1 15.168 7C17.637 7 20 8.555 20 11.525a5.598 5.598 0 0 1-1.881 3.932C17.043 16.668 16 17.421 16 20zm-.5 4.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},
refresh:{16:"M13.91 9h1.01A6.987 6.987 0 0 1 2 11.587V14H1v-4h4v1H2.812A5.99 5.99 0 0 0 13.91 9zM14 2v2.413A6.987 6.987 0 0 0 1.08 7h1.01a5.99 5.99 0 0 1 11.098-2H11v1h4V2z"},reset:{16:"M.146 6.854L4 10.707l3.854-3.853-.707-.707L4.232 9.06a5.48 5.48 0 1 1 3.65 3.697l-.293.956A6.501 6.501 0 1 0 3 7.5a6.58 6.58 0 0 0 .061.854L.854 6.146z"},"road-sign":{32:"M30.927 14.615L17.386 1.076a1.957 1.957 0 0 0-2.77-.002L1.073 14.615a1.96 1.96 0 0 0 0 2.77l13.543 13.542a1.957 1.957 0 0 0 2.768 0l13.543-13.542a1.96 1.96 0 0 0 0-2.77zm-.707 2.063L16.677 30.22a.957.957 0 0 1-1.354 0L1.78 16.678a.96.96 0 0 1 0-1.356l13.543-13.54a.957.957 0 0 1 1.354 0l13.543 13.54a.96.96 0 0 1 0 1.356zM19.354 9.646l3.853 3.855-3.852 3.853-.707-.707L21.293 14h-4.639a4.68 4.68 0 0 0-4.674 4.674v3.282h-1v-3.282A5.68 5.68 0 0 1 16.654 13h4.64l-2.648-2.647z"},
save:{16:"M14.707 3.293l-2-2A.995.995 0 0 0 12 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a.99.99 0 0 0-.293-.707zM9 2v2H8V2zM5 2h2v3h3V2h1v4H5zm6 12H5v-4h6zm3 0h-2V9H4v5H2V2l2 .001V6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V2l2 2z",24:"M22.969.844v21.312a.844.844 0 0 1-.844.844H5.25a.848.848 0 0 1-.506-.168L1.37 20.3a.847.847 0 0 1-.338-.676V.844A.845.845 0 0 1 1.875 0h20.25a.845.845 0 0 1 .844.844zM6 1v8h12V1zm3 21v-5H8v5zm9 0v-7H6v7h1v-6h3v6zm4-21h-3v9H5V1H2v18.548l3 2.278v-7.17A.769.769 0 0 1 5.844 14h12.312a.769.769 0 0 1 .844.656V22h3z"},
search:{16:"M9.85 9.153a5 5 0 1 0-.69.69l4.631 4.631.69-.69zm-1.02-.326A3.973 3.973 0 0 1 6 10a4.002 4.002 0 1 1 2.83-1.172z",24:"M21.995 21.288l-6.855-6.855a7.517 7.517 0 1 0-.707.707l6.855 6.855zm-17.092-7.19a6.501 6.501 0 1 1 9.6-.45l-.854.855a6.501 6.501 0 0 1-8.746-.405z"},"search-f":{24:"M22.289 20.91l-6.847-6.846a7.524 7.524 0 1 0-1.419 1.409l6.852 6.852zM4 9.5A5.5 5.5 0 1 1 9.5 15 5.506 5.506 0 0 1 4 9.5z"},"select-category":{16:"M5 8H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm7-5h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM13 0h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM5 0H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm-4.265 6.646l.738-.738.784.788L4.962 10l.738.738-2.443 2.43z"},
settings:{16:"M2.17 6.06L0 6.862l.009 2.333 2.179.789a6.153 6.153 0 0 0 .317.764l-.966 2.104 1.655 1.643 2.1-.983a6.105 6.105 0 0 0 .765.318L6.863 16l2.333-.008.789-2.18a6.162 6.162 0 0 0 .764-.317l2.104.966 1.643-1.656-.983-2.099a6.097 6.097 0 0 0 .318-.765L16 9.137l-.009-2.333-2.179-.789a6.149 6.149 0 0 0-.318-.764l.967-2.104-1.656-1.643-2.099.983a6.106 6.106 0 0 0-.765-.318L9.137 0 6.804.009l-.789 2.179a6.163 6.163 0 0 0-.764.317L3.147 1.54 1.504 3.195l.983 2.099a6.093 6.093 0 0 0-.318.765zm3.709 1.592a2.15 2.15 0 1 1 1.773 2.47 2.15 2.15 0 0 1-1.773-2.47zm.951 5.382l-.454-.151a5.436 5.436 0 0 1-.644-.268l-.43-.21-1.899.889-.664-.66.876-1.905-.216-.428a5.223 5.223 0 0 1-.265-.64l-.155-.453-1.973-.715-.003-.935 1.963-.728.151-.454a5.436 5.436 0 0 1 .268-.644l.21-.43-.889-1.899.66-.664 1.904.876.43-.216a5.223 5.223 0 0 1 .639-.265l.453-.155.715-1.973.934-.003.728 1.963.455.151a5.368 5.368 0 0 1 .644.268l.43.21 1.899-.889.664.66-.876 1.905.216.428a5.223 5.223 0 0 1 .265.64l.155.453 1.973.715.003.935-1.962.727-.152.454a5.45 5.45 0 0 1-.268.645l-.21.43.889 1.899-.66.664-1.905-.876-.428.216a5.223 5.223 0 0 1-.64.265l-.453.156-.715 1.972-.935.003zM7.998 4.85a3.154 3.154 0 1 0 .512.042 3.138 3.138 0 0 0-.512-.042z"},
share:{16:"M14 9h1v6H1V1h8v1H2v12h12zm-8-.31V11h1V8.69A3.7 3.7 0 0 1 10.6 5h2.68l-1.4 1.42.71.71 2.61-2.61-2.61-2.61-.71.71L13.28 4H10.6A4.67 4.67 0 0 0 6 8.69z"},"sign-out":{16:"M15 1v14H6v-5h1v4h7V2H7v5H6V1zm-4 7H2.773l1.58-1.581-.706-.707-2.81 2.81 2.81 2.808.706-.707L2.73 9H11z"},sliders:{16:"M3 8h1v1H3v7H2V9H1V8h1V0h1zm6-8H8v4H7v1h1v11h1V5h1V4H9zm6 12V0h-1v12h-1v1h1v3h1v-3h1v-1z"},"sort-descending":{rtl:!0,16:"M4 5h11v1H4zM1 2h14V1H1zm6 8h8V9H7zm3 4h5v-1h-5z"},"speech-bubble":{16:"M8.666 12h4.084A2.253 2.253 0 0 0 15 9.75v-5.5A2.253 2.253 0 0 0 12.75 2h-9.5A2.253 2.253 0 0 0 1 4.25v5.5A2.253 2.253 0 0 0 3.25 12H4v3.5zM3.25 11A1.251 1.251 0 0 1 2 9.75v-5.5A1.251 1.251 0 0 1 3.25 3h9.5A1.251 1.251 0 0 1 14 4.25v5.5A1.251 1.251 0 0 1 12.75 11H8.334L5 13.5V11zM12 6H4V5h8zm-2 3H4V8h6z"},
star:{16:"M15.977 6.016H9.883L7.998.2 6.112 6.016H-.023l4.97 3.586-1.893 5.813 4.944-3.597 4.943 3.597-1.894-5.813zm-7.979 4.566l-3.038 2.21 1.164-3.573-3.052-2.203h3.767l1.159-3.573 1.158 3.573h3.746l-3.03 2.206 1.162 3.569z"},"star-f":{16:"M7.998.2l1.885 5.816h6.094l-4.93 3.586 1.894 5.813-4.943-3.597-4.944 3.597 1.893-5.813-4.97-3.586h6.135z"},table:{16:"M16 15H0V1h16zM5 9H1v2h4zm1-3v2h4V6zM5 6H1v2h4zm5 8v-2H6v2zm0-5H6v2h4zm1-3v2h4V6zm-6 6H1v2h4zm6-1h4V9h-4zm0 3h4v-2h-4zm4-12H1v3h14z",32:"M2 5v21h27V5zm5 20H3v-4h4zm0-5H3v-4h4zm0-5H3v-4h4zm10 10H8v-4h9zm0-5H8v-4h9zm0-5H8v-4h9zm11 10H18v-4h10zm0-5H18v-4h10zm0-5H18v-4h10zm0-5H3V6h25z"},
tablet:{16:"M15 2H1a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zM1 3.25A.25.25 0 0 1 1.25 3H2v4H1zM1.25 12a.25.25 0 0 1-.25-.25V8h1v4zM3 12V3h10v9zm12-.25a.25.25 0 0 1-.25.25H14V3h.75a.25.25 0 0 1 .25.25z",24:"M22.75 4H1.25A1.25 1.25 0 0 0 0 5.25v13.5A1.25 1.25 0 0 0 1.25 20h21.5A1.25 1.25 0 0 0 24 18.75V5.25A1.25 1.25 0 0 0 22.75 4zM1.25 19a.25.25 0 0 1-.25-.25V13h1v-2H1V5.25A.25.25 0 0 1 1.25 5H3v14zM4 5h17v14H4zm19 13.75a.25.25 0 0 1-.25.25H22V5h.75a.25.25 0 0 1 .25.25z"},text:{24:"M22 5H12V4h10zm0 3h-8v1h8zm0 5v-1h-6v1zM2 17h20v-1H2zm0 4h20v-1H2zm.234-8L7.042 2.049h.916L12.766 13h-1.093L9.917 9H5.083l-1.756 4zm3.288-5h3.956L7.5 3.494z"},
trash:{16:"M2 4l1 12h9l1-12zm9.08 11H3.92L3.087 5h8.826zM5 6.4a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.512.512 0 0 1 1 0v7.2a.512.512 0 0 1-1 0zM11 2V0H4v2H1v1h13V2zm-1 0H5V1h5z"},upload:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.562C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.437 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM10.96 18.3l.708.707L16 14.674V29h1V14.674l4.332 4.332.707-.707-5.539-5.54z"},
"upload-to":{16:"M12 2v1H3V2zM4.708 7.618l.707.707L7 6.74V15h1V6.705l1.62 1.62.706-.707-2.808-2.81z",24:"M11 20V8.707l-2.646 2.647-.707-.707L11.5 6.793l3.854 3.854-.707.707L12 8.707V20zM5 4h13V3H5z",32:"M24 6H7V5h17zm-8.5 3.793l-4.854 4.854.707.707L15 11.707V26h1V11.707l3.646 3.646.707-.707z"},"urban-model":{32:"M13 29V7h2V3h1.455L18 5.568V14h-2v1h3v6h1v-7h-1V5.29L17.02 2H14v4h-2v15H9V11H4v3H2v16h12v-1zm-1 0H3V15h2v-3h3v9H6v1h6zm18-16v17h-4v-1h3V14h-4v7h-1v-8zm-5 9h-6v3h-4v5h10zm-1 7h-8v-3h4v-3h4zM8 24h2v1H8zm0 2h2v1H8z"},
user:{16:"M11 3a3 3 0 1 0-3 3 3 3 0 0 0 3-3zM8 5a2 2 0 1 1 2-2 2 2 0 0 1-2 2zm3 1H5a2 2 0 0 0-2 2v6a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1V8a2 2 0 0 0-2-2zm1 3v5h-1V9h-1v6H6V9H5v5H4V8a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"},"user-plus":{24:"M13 4a4 4 0 1 0-4 4 4 4 0 0 0 4-4zM9 7a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm4 16.25a.75.75 0 0 1-.75.75h-6.5a.75.75 0 0 1-.75-.75V21H3.5A1.5 1.5 0 0 1 2 19.5v-9.25A2.25 2.25 0 0 1 4.25 8h9.5A2.25 2.25 0 0 1 16 10.25V17h-1v-6.75A1.251 1.251 0 0 0 13.75 9h-9.5A1.251 1.251 0 0 0 3 10.25v9.25a.501.501 0 0 0 .5.5H5v-8h1v11h6V12h1m10 7v.999h-4V24h-1v-4.001h-4V19h4v-4h1v4z",
32:"M13.065 10a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm.002-9a4 4 0 1 1-4.002 4 4 4 0 0 1 4.002-4zM5 14v12a1 1 0 0 0 1 1h1V15h1v16h10V15h1v16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1v-3H6a2 2 0 0 1-2-2V14a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v10h-1V14a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2zm26 12v.999h-5V32h-1v-5.001h-5V26h5v-5h1v5z"},users:{16:"M8 1.998a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm-2 1a1 1 0 1 1 1-1 1.001 1.001 0 0 1-1 1zm-2 4h1v5a1 1 0 0 1-1-1H3a1 1 0 0 1-1-1v-4a2 2 0 0 1 2-2h3.78a3.05 3.05 0 0 0-.596 1H4a1 1 0 0 0-1 1v4h1zm8-1a2 2 0 1 0-2 2 2 2 0 0 0 2-2zm-2 1a1 1 0 1 1 1-1 1.001 1.001 0 0 1-1 1zm2 1H8a2 2 0 0 0-2 2v4a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1v-4a2 2 0 0 0-2-2zm1 3v3h-1v-3h-1v4H9v-4H8v3H7v-4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1z",
32:"M15 14.556a3.998 3.998 0 0 0-1 .826V13h1zM13 25v-1H8V13H7v7H6a1 1 0 0 1-1-1v-7a2 2 0 0 1 2-2h8a1.984 1.984 0 0 1 1.067.314 5.358 5.358 0 0 1 .246-1A2.968 2.968 0 0 0 15 9H7a3 3 0 0 0-3 3v7a2 2 0 0 0 2 2h1v3a1 1 0 0 0 1 1h5zM11 9a4 4 0 1 1 4-4 4 4 0 0 1-4 4zm3-4a3 3 0 1 0-2.998 3A3 3 0 0 0 14 5zm.9 16.25v3.171A.985.985 0 0 0 15 24v-2.75zM21 15a4 4 0 1 1 4-4 4 4 0 0 1-4 4zm3-4a3 3 0 1 0-2.998 3A3 3 0 0 0 24 11zm4 7v7a2 2 0 0 1-2 2h-1v3a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-3h-1a2 2 0 0 1-2-2v-7a3 3 0 0 1 3-3h8a3 3 0 0 1 3 3zm-1 0a2 2 0 0 0-2-2h-8a2 2 0 0 0-2 2v7a1 1 0 0 0 1 1h1v-7h1v11h6V19h1v7h1a1 1 0 0 0 1-1z"},
web:{24:"M11.5 0A11.5 11.5 0 1 0 23 11.5 11.513 11.513 0 0 0 11.5 0zM1.025 12h3.989a18.969 18.969 0 0 0 .753 5H2.573a10.415 10.415 0 0 1-1.548-5zM12 5V1.05c1.51.274 2.862 1.77 3.779 3.95zm4.15 1a17.518 17.518 0 0 1 .836 5H12V6zM11 1.05V5H7.221C8.138 2.82 9.491 1.324 11 1.05zM11 6v5H6.014a17.518 17.518 0 0 1 .836-5zm-5.986 5H1.025a10.415 10.415 0 0 1 1.548-5h3.194a18.969 18.969 0 0 0-.753 5zm1 1H11v5H6.85a17.518 17.518 0 0 1-.836-5zM11 18v3.95c-1.51-.274-2.862-1.77-3.779-3.95zm1 3.95V18h3.779c-.917 2.18-2.27 3.676-3.779 3.95zM12 17v-5.01h5a17.58 17.58 0 0 1-.85 5.01zm5.986-5.01h3.989A10.453 10.453 0 0 1 20.427 17h-3.194a19.046 19.046 0 0 0 .753-5.01zm0-.99a18.969 18.969 0 0 0-.753-5h3.194a10.415 10.415 0 0 1 1.548 5zm1.744-6h-2.837a9.988 9.988 0 0 0-2.119-3.47A10.528 10.528 0 0 1 19.73 5zM8.226 1.53A9.988 9.988 0 0 0 6.107 5H3.27a10.528 10.528 0 0 1 4.956-3.47zM3.27 18h2.837a9.988 9.988 0 0 0 2.119 3.47A10.528 10.528 0 0 1 3.27 18zm11.504 3.47A9.988 9.988 0 0 0 16.893 18h2.837a10.528 10.528 0 0 1-4.956 3.47z",
32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zM2.025 16h4.99a22.884 22.884 0 0 0 .898 6H3.669a13.424 13.424 0 0 1-1.644-6zM16 8V2.046C18.387 2.33 20.472 4.62 21.732 8zm6.07 1a22.167 22.167 0 0 1 .916 6H16V9zM15 2.046V8H9.268c1.26-3.38 3.345-5.669 5.732-5.954zM15 9v6H8.014a22.167 22.167 0 0 1 .916-6zm-7.985 6h-4.99A13.424 13.424 0 0 1 3.67 9h4.244a22.884 22.884 0 0 0-.898 6zm1 1H15v6H8.93a22.167 22.167 0 0 1-.916-6zM15 23v5.954C12.613 28.67 10.528 26.38 9.268 23zm1 5.954V23h5.732c-1.26 3.38-3.345 5.669-5.732 5.954zM16 22v-6h6.986a22.167 22.167 0 0 1-.916 6zm7.985-6h4.99a13.424 13.424 0 0 1-1.644 6h-4.244a22.884 22.884 0 0 0 .898-6zm0-1a22.884 22.884 0 0 0-.898-6h4.244a13.424 13.424 0 0 1 1.644 6zm2.739-7H22.76a12.808 12.808 0 0 0-3.455-5.447A13.52 13.52 0 0 1 26.724 8zm-15.03-5.447A12.808 12.808 0 0 0 8.239 8H4.276a13.52 13.52 0 0 1 7.418-5.447zM4.276 23H8.24a12.808 12.808 0 0 0 3.455 5.447A13.519 13.519 0 0 1 4.276 23zm15.03 5.447A12.808 12.808 0 0 0 22.761 23h3.963a13.519 13.519 0 0 1-7.418 5.447z"},
wrench:{32:"M23.875 8.884l-.938-2.327 4.145-3.224a.67.67 0 0 0 .264-.677l-.051-.215-.09-.11a.695.695 0 0 0-.441-.251 8.172 8.172 0 0 0-5.858 1.395 5.627 5.627 0 0 0-1.68 6.3l-.008.035a4.82 4.82 0 0 1-.769 1.144L3.124 24.33a3.957 3.957 0 0 0 .002 5.522A3.793 3.793 0 0 0 5.851 31a3.81 3.81 0 0 0 2.75-1.175L21.81 14.193a1.86 1.86 0 0 1 .771-.485 2.076 2.076 0 0 1 .366.022 5.244 5.244 0 0 0 5.196-.662 8.46 8.46 0 0 0 2.85-5.36.692.692 0 0 0-.126-.506l-.123-.138-.09-.054a.698.698 0 0 0-.786.056l-4.074 3.232zm5.992-.55a7.24 7.24 0 0 1-2.339 3.945 4.263 4.263 0 0 1-4.266.5l-.118-.031a3.31 3.31 0 0 0-.617-.038 2.616 2.616 0 0 0-1.435.79L7.862 29.152a2.803 2.803 0 0 1-2.01.848H5.85a2.802 2.802 0 0 1-2.012-.849 2.946 2.946 0 0 1-.03-4.093l15.354-13.409a5.294 5.294 0 0 0 1.018-1.57 1.989 1.989 0 0 0 .054-.288l.015-.118-.04-.112a4.648 4.648 0 0 1 1.31-5.297A6.938 6.938 0 0 1 25.627 3c.083 0 .166.001.25.004L22.321 5.77a.968.968 0 0 0-.306 1.105l.937 2.393a.904.904 0 0 0 .107.19.856.856 0 0 0 .195.193l1.938 1.446a.937.937 0 0 0 1.147-.018zM6.501 25H5.5a1.499 1.499 0 0 0-1.499 1.495L4 27.505a1.502 1.502 0 0 0 1.5 1.497l1.009-.001a1.503 1.503 0 0 0 1.495-1.504l-.003-1A1.5 1.5 0 0 0 6.501 25zm.005 3l-1.006.002a.5.5 0 0 1-.5-.5l.001-1.004A.5.5 0 0 1 5.5 26h1.001a.5.5 0 0 1 .5.5l.003.999a.502.502 0 0 1-.498.501z"},
x:{16:"M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",24:"M18.01 6.697L12.707 12l5.303 5.303-.707.707L12 12.707 6.697 18.01l-.707-.707L11.293 12 5.99 6.697l.707-.707L12 11.293l5.303-5.303z",32:"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z"},"x-circle":{32:"M25.753 5.247a14.5 14.5 0 1 0 0 20.506 14.5 14.5 0 0 0 0-20.506zm-.636 19.87a13.6 13.6 0 1 1 0-19.234 13.6 13.6 0 0 1 0 19.234zM21.864 9.843L16.207 15.5l5.657 5.657-.707.707-5.657-5.657-5.657 5.657-.707-.707 5.657-5.657-5.657-5.657.707-.707 5.657 5.657 5.657-5.657z",
24:"M17.45 8.257L13.207 12.5l4.243 4.243-.707.707-4.243-4.243-4.243 4.243-.707-.707 4.243-4.243L7.55 8.257l.707-.707 4.243 4.243 4.243-4.243zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"},"x-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zm4.95 11.386l-1.414 1.414L8 9.414 4.464 12.95 3.05 11.536 6.586 8 3.05 4.464 4.464 3.05 8 6.586l3.536-3.536 1.414 1.414L9.414 8z",24:"M19.632 3.368a11.5 11.5 0 1 0 0 16.264 11.5 11.5 0 0 0 0-16.264zM18.57 16.45l-2.12 2.12-4.95-4.95-4.95 4.95-2.12-2.12 4.95-4.95-4.95-4.95 2.12-2.12 4.95 4.95 4.95-4.95 2.12 2.12-4.95 4.95z",
32:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2zm9.192 20.364l-2.828 2.828L16 18.828l-6.364 6.364-2.828-2.828L13.172 16 6.808 9.636l2.828-2.828L16 13.172l6.364-6.364 2.828 2.828L18.828 16z"}},h={inline:{},"inline-end":{},getIconWithTitle:function(m,l,f,c){m=g[m];return k({paths:m[l],size:l,rtl:m.rtl,title:f,titleId:c})}};Object.keys(g).forEach(function(m){Object.keys(g[m]).filter(function(l){return"rtl"!==l}).forEach(function(l){var f,c,d,u=g[m],n=u.rtl;h[m]=null!==(f=h[m])&&void 0!==f?f:{};h.inline[m]=
null!==(c=h.inline[m])&&void 0!==c?c:{};h["inline-end"][m]=null!==(d=h["inline-end"][m])&&void 0!==d?d:{};h[m][l]=k({paths:u[l],size:l,rtl:n});h.inline[m][l]=k({paths:u[l],size:l,inline:!0,rtl:n});h["inline-end"][m][l]=k({paths:u[l],size:l,inline:!0,direction:"right",rtl:n})})});return h})},"arcgisonline/pages/utils/arrays":function(){define(["require","exports"],function(b,y){return function(){function r(){}r.includes=function(a,k){return-1<(null===a||void 0===a?void 0:a.indexOf(k))};r.find=function(a,
k){if(null===a||void 0===a?0:a.length)for(var e=void 0,g=0;g<a.length;g++)if(e=a[g],k(e))return e};r.findIndex=function(a,k){if(null===a||void 0===a?0:a.length)for(var e=0;e<a.length;e++)if(k(a[e]))return e;return-1};r.toArray=function(a){return Object.keys(a).map(function(k){return a[k]})};r.includesSome=function(a,k){return a&&(null===k||void 0===k?void 0:k.some(function(e){return-1<a.indexOf(e)}))};r.includesAll=function(a,k){return a&&(null===k||void 0===k?void 0:k.every(function(e){return-1<
a.indexOf(e)}))};r.filterOut=function(a,k){var e;return null!==(e=k&&(null===a||void 0===a?void 0:a.filter(function(g){return-1===k.indexOf(g)})))&&void 0!==e?e:[]};r.concatUnique=function(a,k){var e=[].concat(null!==a&&void 0!==a?a:[]);k&&k.forEach(function(g){g&&-1===e.indexOf(g)&&e.push(g)});return e};r.from=function(a){if(Array.from)return Array.from(a);for(var k=[],e=0;e<a.length;e++)k.push(a[e]);return k};r.batch=function(a,k){void 0===k&&(k=100);return(null!==a&&void 0!==a?a:[]).reduce(function(e,
g,h){0===h%k&&e.push(a.slice(h,h+k));return e},[])};return r}()})},"arcgisonline/pages/utils/strings":function(){define(["require","exports"],function(b,y){return function(){function r(){}r.isString=function(a){return(null===a||void 0===a?void 0:a.constructor)===String};r.startsWith=function(a,k){return k&&0===(null===a||void 0===a?void 0:a.indexOf(k))};r.endsWith=function(a,k){if(a&&k){var e=a.lastIndexOf(k);return-1<e&&a.length>=k.length&&e===a.length-k.length}return!1};r.includes=function(a,k){return k&&
-1<(null===a||void 0===a?void 0:a.indexOf(k))};r.isSet=function(a){return!!(0<(null===a||void 0===a?void 0:a.length))};r.areEqual=function(a,k){var e=this.isSet(a),g=this.isSet(k);return!e&&!g||e&&g&&a.trim()===k.trim()};r.replaceAll=function(a,k,e){return a.replace(new RegExp(this.escapeRegExp(k),"g"),e)};r.escapeRegExp=function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26")};r.escapeQuestionMarks=function(a){return a.replace(/[?\\]/g,"\\$\x26")};r.stringToArray=function(a,k,e){a=a instanceof
Array?a:a.split(k);return e?a.map(function(g){return g.trim()}):a};r.isValidHex=function(a){return/[0-9A-Fa-f]{6}/g.test(a)};r.stringToHex=function(a){for(var k=0,e=0;e<a.length;e++)k=a.charCodeAt(e)+((k<<5)-k);a="#";for(e=0;3>e;e++)a+=("00"+(k>>8*e&255).toString(16)).substr(-2);return a};r.hexToRgb=function(a){a=a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(k,e,g,h){return e+e+g+g+h+h});return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?{r:parseInt(a[1],16),g:parseInt(a[2],16),
b:parseInt(a[3],16)}:null};r.htmlDecode=function(a){var k=document.createElement("textarea");k.innerHTML=a;return k.value};r.encodeWhitespace=function(a){return a?a.replace(/\s/g,"%20"):""};r.encodeAngleBrackets=function(a){var k;return null!==(k=null===a||void 0===a?void 0:a.replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"))&&void 0!==k?k:""};r.decodeAngleBrackets=function(a){var k;return null!==(k=null===a||void 0===a?void 0:a.replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e"))&&void 0!==k?k:""};r.shouldStripHTML=
function(a){var k;if(!a)return!1;a=null!==(k=null===a||void 0===a?void 0:a.split("\x3c"))&&void 0!==k?k:[];return 1<a.length&&a.some(function(e){return-1<e.search(/^[A-Za-z\/]+.*[>]+.*$/m)})};r.stripHTML=function(a){if(!a)return"";var k=document.createElement("div");k.innerHTML=a;return k.textContent};r.addHyperlinks=function(a){return a.replace(/(https?:\/\/[^\s]+)/g,function(k){return'\x3ca href\x3d"'+k+'" target\x3d"_blank"\x3e'+k+"\x3c/a\x3e"})};r.escapeNewlines=function(a){return null===a||void 0===
a?void 0:a.replace(/(?:\r)/g,"\x26#10;").replace(/(?:\n)/g,"\x26#13;")};r.restoreNewlines=function(a){return null===a||void 0===a?void 0:a.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")};r.insertHTMLLineBreaks=function(a){return null===a||void 0===a?void 0:a.replace(/(?:"&#10;&#13;|&#10;|&#13;|\r\n|\r|\n")/g,"\x3cbr\x3e")};r.containsHTTPProtocol=function(a){var k;return-1<(null!==(k=null===a||void 0===a?void 0:a.toLowerCase())&&void 0!==k?k:"").indexOf("http://")};return r}()})},"arcgisonline/pages/utils/dom":function(){define(["require",
"exports","tslib","./strings","dojo/dom-style"],function(b,y,r,a,k){a=r.__importDefault(a);k=r.__importDefault(k);return function(){function e(){}e.addStylesheet=function(g){var h=document.createElement("link");h.rel="stylesheet";h.type="text/css";h.href=g;document.head.appendChild(h)};e.isHidden=function(g){var h=["none","none !important","none!important"],m=["hidden","hidden !important","hidden!important"],l=""+k.default.get(g,"visibility"),f=""+k.default.get(g,"display");return g&&(-1<h.indexOf(f)||
-1<m.indexOf(l))};e.hideNode=function(g){null===g||void 0===g?void 0:g.classList.add("hide")};e.hideNodes=function(g){if(g)if(g.forEach)g.forEach(this.hideNode);else for(var h=0;h<g.length;h++)this.hideNode(g[h])};e.showNode=function(g){null===g||void 0===g?void 0:g.classList.remove("hide")};e.showNodes=function(g){if(g)if(g.forEach)g.forEach(this.showNode);else for(var h=0;h<g.length;h++)this.showNode(g[h])};e.showHide=function(g,h){null===g||void 0===g?void 0:g.classList[h?"remove":"add"]("hide")};
e.showHideAll=function(g,h){var m=this;null===g||void 0===g?void 0:g.forEach(function(l){return m.showHide(l,h)})};e.addRemoveClass=function(g,h,m){null===g||void 0===g?void 0:g.classList[m?"add":"remove"](h)};e.addRemoveClassAll=function(g,h,m){var l=this;null===g||void 0===g?void 0:g.forEach(function(f){return l.addRemoveClass(f,h,m)})};e.setVisibility=function(g,h){null===g||void 0===g?void 0:g.classList[h?"remove":"add"]("visibility-hidden")};e.toggleHide=function(g){null===g||void 0===g?void 0:
g.classList.toggle("hide")};e.toggleHideAll=function(g){null===g||void 0===g?void 0:g.forEach(function(h){h.classList.toggle("hide")})};e.activateNode=function(g){null===g||void 0===g?void 0:g.classList.add("is-active")};e.deactivateNode=function(g){null===g||void 0===g?void 0:g.classList.remove("is-active")};e.canBeDisabled=function(g){return g instanceof HTMLInputElement||g instanceof HTMLButtonElement||g instanceof HTMLFieldSetElement||g instanceof HTMLOptGroupElement||g instanceof HTMLOptionElement||
g instanceof HTMLSelectElement||g instanceof HTMLTextAreaElement};e.isDisabled=function(g){var h;return null!==(h=null===g||void 0===g?void 0:g.disabled)&&void 0!==h?h:!1};e.disableNode=function(g,h){g&&(g.disabled=h)};e.disableNodes=function(g,h){var m=this;null===g||void 0===g?void 0:g.forEach(function(l){m.disableNode(l,h)})};e.isNodeVisible=function(g){return 0!==(null===g||void 0===g?void 0:g.offsetHeight)};e.isChecked=function(g){var h;return null!==(h=null===g||void 0===g?void 0:g.checked)&&
void 0!==h?h:!1};e.checkNode=function(g,h){g&&(g.checked=h)};e.selectOption=function(g,h){if(g)for(var m=0;m<g.length;m++){var l=g[m];if(a.default.areEqual(l.value,h)){l.selected=!0;break}}};e.getSelectedOption=function(g){if(g)for(var h=0;h<g.length;h++){var m=g[h];if(m.selected)return m}return null};e.addClasses=function(g,h){g&&(null===h||void 0===h?0:h.length)&&h.forEach(function(m){g.classList.add(m)})};e.removeClasses=function(g,h){g&&(null===h||void 0===h?0:h.length)&&h.forEach(function(m){g.classList.remove(m)})};
e.setModifierClass=function(g,h,m){var l,f=null===(l=g.className.match(new RegExp("(^| )"+h+"\\S+","g")))||void 0===l?void 0:l[0].replace(/ +/g,"");f&&g.classList.remove(f);g.classList.add(""+h+m)};e.appendChildren=function(g,h){var m=document.createDocumentFragment();null===g||void 0===g?void 0:g.forEach(function(l){m.appendChild(l)});null===h||void 0===h?void 0:h.appendChild(m)};e.forEachNode=function(g,h,m){for(var l=0;l<g.length;l++)null===h||void 0===h?void 0:h.call(m,g[l],l)};e.nodeListToArray=
function(g){return Array.prototype.slice.call(g)};e.querySelectorAllAsArray=function(g,h){return this.nodeListToArray(h.querySelectorAll(g))};return e}()})},"arcgisonline/sharing/util":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/dialog/GeneralDlg,arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg,dojo/request/xhr,arcgisonline/sharing/dijit/dialog/ConfirmDialog,esri/IdentityManager,esri/libs/sanitizer/Sanitizer,dojo/sniff,dojo/has,dojo/json,dojo/cookie"],
function(b,y,r){b.provide("arcgisonline.sharing.util");b.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");b.require("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");b.require("dojo.request.xhr");b.require("arcgisonline.sharing.dijit.dialog.ConfirmDialog");b.require("esri.IdentityManager");b.require("esri.libs.sanitizer.Sanitizer");b.require("dojo.sniff");b.require("dojo.has");b.require("dojo.json");b.require("dojo.cookie");arcgisonline.sharing.util={i18n:b.mixin({},b.i18n.getLocalization("arcgisonline",
"arcgisonline")),sanitizer:new esri.libs.sanitizer.Sanitizer,getSocialNetworkBadges:function(a,k){var e={},g=b.create,h=arcgisonline.sharing.util.socialNetworkTitle(a.title),m=unescape(window.location.href);if(!1===a.isOrganization||!0===a.isOrganization)m=arcgisonline.sharing.util.urlToObject(window.location.href).path+"?id\x3d"+a.id;esriGeowConfig.self&&esriGeowConfig.self.customBaseUrl&&!arcgisonline.sharing.util.isPortal()&&-1<m.indexOf(esriGeowConfig.self.customBaseUrl)&&(m=m.replace(location.host,
esriGeowConfig.self.portalHostname));var l=g("span",{"class":"esriItemLinks"}),f=encodeURI("socialnetwork.html?t\x3d"+h+"\x26n\x3dfb\x26u\x3d"+m),c=esri.i18nBundle.itemLinks.shareFacebook,d=g("a",{target:"_blank",onclick:b.partial(this._checkShare,a,"Facebook"),href:f,alt:c,title:c},l);g("span",{"class":"facebookBadge dijitInline"},d);f=g("a",{target:"_blank",onclick:b.partial(this._checkShare,a,"Facebook"),href:f,alt:c,title:c},l);g("span",{innerHTML:esri.i18nBundle.itemLinks.facebook},f);e.facebook=
l;l=g("span",{"class":"esriItemLinks"});f=encodeURI("socialnetwork.html?t\x3d"+h+"\x26n\x3dtw\x26u\x3d"+m);c=esri.i18nBundle.itemLinks.shareTwitter;d=g("a",{target:"_blank",onclick:b.partial(this._checkShare,a,"Twitter"),href:f,alt:c,title:c},l);g("span",{"class":"twitterBadge dijitInline"},d);f=g("a",{target:"_blank",onclick:b.partial(this._checkShare,a,"Twitter"),href:f,alt:c,title:c},l);g("span",{innerHTML:esri.i18nBundle.itemLinks.twitter},f);e.twitter=l;k(e)},socialNetworkTitle:function(a){100<
a.length&&(a=a.substring(0,97)+"...");return encodeURIComponent(a.replace(/ /g,"+"))},shortenUrl:function(a,k,e){var g=esriGeowConfig.bitlyUrl,h,m=new b.Deferred;this.request({url:g,content:{longUrl:a,format:"json"}}).then(function(l){(h=l&&l.data&&l.data.url||null)?k?k(h):m.resolve(h):e?e(l,args):m.reject(l,args)},function(l){e?e({},{}):m.reject(l)});return m},_checkShare:function(a,k,e){k=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();e=a&&esri.isDefined(a.isInvitationOnly);
a.access&&"public"!==a.access&&k.show({title:esri.i18nBundle.itemLinks[e?"shareGroup":"shareItem"],message:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks[e?"shareGroupMsg":"shareItemMsg"])})},checkSession:function(){var a=this.getCookie("esri_auth"),k=null;a&&(k=a);!k||k.error&&""!=k.error||(esriGeowConfig.userInfo=b.mixin(esriGeowConfig.userInfo||{},k))},isLoggedIn:function(){return null==this.getUser()?!1:!0},isSilverlightInstalled:function(){if(esriGeowConfig.isSilverlightInstalled)return esriGeowConfig.isSilverlightInstalled;
esriGeowConfig.isSilverlightInstalled=!1;if(b.isIE)try{new ActiveXObject("AgControl.AgControl"),esriGeowConfig.isSilverlightInstalled=!0}catch(a){}else navigator.plugins["Silverlight Plug-In"]&&(esriGeowConfig.isSilverlightInstalled=!0);return esriGeowConfig.isSilverlightInstalled},couldHaveArcGISDesktop:function(){return-1!=navigator.userAgent.indexOf("Windows")&&-1==navigator.userAgent.indexOf("Windows Phone")?!0:!1},requireAuthentication:function(){if(!0===this.isLoggedIn())return!0;var a="";-1==
esriGeowConfig.signin.indexOf("http")&&(a=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(a=arcgisonline.sharing.util.getSecureUrl(a)));a+=esriGeowConfig.signin;window.location!==a&&(a+="?returnUrl\x3d"+escape(window.location));window.location=a+"\x26error\x3d403";return!1},htmlHasText:function(a){if(a&&0<a.length){a=b.trim(a);for(var k=!1,e=0;e<a.length;e++){var g=a.charAt(e);if("\x3c"==g)k=!0;else if("\x3e"==g)k=!1;else if(!k&&""!==g)return!0}}return!1},endsWith:function(a,k){return null==a||
null==k?!1:a.toLowerCase().lastIndexOf(k.toLowerCase())==a.length-k.length},toFullDateString:function(a){a=new Date(parseFloat(a));return b.date.locale.format(a,{selector:"date",formatLength:"long"})},toDateTimeString:function(a){a=new Date(parseFloat(a));return b.date.locale.format(a,{formatLength:"medium"})},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()},getItemDetailsLinkInfo:function(a){var k=null,e=null,g=null;esri.isDefined(a.isInvitationOnly)?(k=esriGeowConfig.baseUrl+
"group.html?owner\x3d"+a.owner+"\x26title\x3d"+encodeURIComponent(a.title),e=esri.i18nBundle.itemLinks.details,g=esri.i18nBundle.itemLinks.viewGroupDetails):(k=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,g=esri.i18nBundle.itemLinks.viewDetails);return null!==k&&null!==e?{link:k,label:e,tip:g}:null},_isOperationsViewSupportedBrowser:function(a){var k=navigator.userAgent.toLowerCase(),e=/Chrome\/[.0-9]* (?!Mobile)/i,g=/Chrome\/[.0-9]* Mobile/i;g=b.has("iphone")||
b.has("ipod")||b.has("android")&&g.test(k)||-1<k.indexOf("android")&&-1<k.indexOf("mobile")||-1<k.indexOf("windows phone")||b.has("bb");a&&(g=g||k.match(/ipad/i)||b.has("android")&&e.test(k));return g?!1:void 0!==b.has("chrome")?(a=b.has("chrome"),!isNaN(a)&&19<=a):void 0!==b.has("ff")?4<=b.has("ff"):k.match(/fxios/i)?(a=parseFloat(k.split("fxios/")[1]),!isNaN(a)&&1<=a):void 0!==b.has("ie")?9<=b.has("ie"):void 0!==b.has("edge")?1<=b.has("edge"):void 0!==b.has("trident")?5<=b.has("trident"):void 0!==
b.has("safari")?(a=parseFloat(k.split("version/")[1]),k=parseFloat(k.split("crios/")[1]),isNaN(a)&&isNaN(k)||!isNaN(a)&&5.1>a||!isNaN(k)&&31>k?!1:!0):!1},_isPremiumService:function(a){return a.owner&&-1<a.owner.toLowerCase().indexOf("esri")&&(-1<b.indexOf(a.typeKeywords,"Requires Subscription")||-1<b.indexOf(a.typeKeywords,"Requires Credits"))},getGalleryMainLinkInfo:function(a){var k=a.type?a.type:"",e="",g="",h="",m=null;g=this.getUser();e=!1;e=null;esriGeowConfig.portalHostname&&(e=esriGeowConfig.portalHostname);
e&&(h=e.split("."),1<h.length&&(e=h[h.length-2]+"."+h[h.length-1]));if("Web Map"==k)e=!g&&this._isPremiumService(a),g='JavaScript:arcgisonline.map.mapUtil.openMap("'+a.id+'",'+e+")",h=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),e=esri.i18nBundle.itemLinks.open;else if("CityEngine Web Scene"===k)e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+a.id,g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,
"openPage",e),h=esri.i18nBundle.itemLinks.viewApp,e=esri.i18nBundle.itemLinks.open;else if("Web Scene"===k&&esriGeowConfig.sceneViewerEnabled)e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+a.id,g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPage",e,!0),h=esri.i18nBundle.itemLinks.openSceneViewer,e=esri.i18nBundle.itemLinks.open;else if("Scene Service"===k&&esriGeowConfig.sceneViewerEnabled)e=
window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,e,!0),h=esri.i18nBundle.itemLinks.addToSceneViewer,e=esri.i18nBundle.itemLinks.open;else if("Operation View"===k){e=window.location;k=arcgisonline.sharing.util.isPortal();g=e.protocol+"//"+(k?esriGeowConfig.self.portalHostname:e.host);e=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+a.id;h=-1<b.indexOf(a.typeKeywords,"TabletLayout");b.indexOf(a.typeKeywords,"DesktopLayout");var l=-1<b.indexOf(a.typeKeywords,"V2");this.couldHaveArcGISDesktop()&&!l?m=b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,g+(k?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+a.id):!l&&h&&this._isOperationsViewSupportedBrowser()&&(m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",
a.id,e,!1));g="JavaScript:void(0)";h=esri.i18nBundle.itemLinks.openOperationViewDesktop;e=esri.i18nBundle.itemLinks.open}else"Map Service"==k||"Feature Service"==k||"Image Service"==k||"KML"==k||"Feature Collection"==k||"Stream Service"==k||"Vector Tile Service"===k?(h=a&&a.extraUrlParams?!0:!1,e=!g&&this._isPremiumService(a),g='JavaScript:arcgisonline.map.mapUtil.addToMap("'+a.id+'",'+e+","+h+")",e=esri.i18nBundle.itemLinks.open,h=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},
esri.i18nBundle.itemLinks.addToViewer),esriGeowConfig.sceneViewerEnabled&&"Image Service"===k&&-1<b.indexOf(a.typeKeywords,"Elevation 3D Layer")&&(g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,h=esri.i18nBundle.itemLinks.addToSceneViewer,e=esri.i18nBundle.itemLinks.open)):"WMS"==k||"WFS"===k||"WMTS"===k?(g=a.noWebMercator?'JavaScript:arcgisonline.map.mapUtil.openOnGCSMap("'+a.id+'")':'JavaScript:arcgisonline.map.mapUtil.addToMap("'+
a.id+'")',e=esri.i18nBundle.itemLinks.open,h=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==k?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url+"?f\x3dlyr\x26v\x3d9.3"),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.openDesktop):this.couldHaveArcGISDesktop()&&("Map Package"==k||"Basemap Package"===k||"Mobile Map Package"==k||"Mobile Basemap Package"===
k||"Layer Package"==k||"Pro Map"==k||"Layout"==k||-1<b.indexOf(a.typeKeywords,"lyrx"))?a&&a.name.indexOf(".mmpk")&&a.name.indexOf(".bpk")&&-1===a.name.indexOf(".bpkx")&&-1===a.name.indexOf(".lpkx")&&-1===a.name.indexOf(".mpkx")&&-1===a.name.indexOf(".lyrx")&&-1===a.name.indexOf(".mapx")&&-1===a.name.indexOf(".pagx")?(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.openDesktop):(g="JavaScript:void(0)",m=b.hitch(this,
"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=k&&"Geoprocessing Service"!=k&&"Locator Package"!=k&&"Tile Package"!=k&&"Vector Tile Package"!=k&&"Scene Package"!==k?!this.couldHaveArcGISDesktop()||"Map Document"!=k&&"Published Map"!=k&&"Globe Document"!=k&&"Scene Document"!=k&&"Layer"!=k?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=k&&"ArcGIS Pro Add In"!==k?!this.isSilverlightInstalled()||
"Explorer Map"!=k&&"Explorer Layer"!=k&&"Explorer Add In"!=k?"File Geodatabase"===k||"CSV Collection"===k||"KML Collection"===k||"Rule Package"===k||"GeoJson"===k||"Shapefile"===k||"CSV"===k||"Map Template"===k||"Code Sample"===k||"Geoprocessing Sample"===k||"Service Definition"===k||"Workflow Manager Package"===k||"Windows Viewer Add-in"===k||"ArcPad Package"===k||"Operations Dashboard Addin"===k||"CAD Drawing"===k||"Microsoft Word"===k||"Raster function template"===k||"Microsoft PowerPoint"===k||
"Microsoft Powerpoint"===k||"Microsoft Excel"===k||"iWork Pages"===k||"iWork Keynote"===k||"iWork Numbers"===k||"Image"===k||"Visio Document"===k||"PDF"===k||"Desktop Application"===k||"Task File"===k||"Project Package"===k||"ArcGIS Pro Configuration"===k||"Project Template"===k||"Desktop Style"===k||"Native Application Installer"===k||"360 VR Experience"==k?(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.downloadArchive):
"Web Mapping Application"!=k&&"Application"!=k&&"Native Application"!==k&&"Native Application Template"!==k&&"Hub Initiative"!==k&&"Hub Page"!==k&&"Hub Site Application"!==k||-1!==b.indexOf(a.typeKeywords,"Web AppBuilder for ArcGIS")?"Desktop Application Template"==k?-1<b.indexOf(a.typeKeywords,"desktopApplicationTemplateUrl")&&a.url&&0<a.url.length?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),h=esri.i18nBundle.itemLinks.viewApp,e=esri.i18nBundle.itemLinks.open):
(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.downloadArchive):"Mobile Application"==k?a.url&&0<a.url.length?(esriGeowConfig.urlKey&&(-1<a.url.indexOf(esriGeowConfig.urlKey)||e&&-1<a.url.indexOf(e))&&(a.originalUrl=a.originalUrl||b.clone(a.url),a.url=esriGeowConfig.allSSL?a.url.replace("http:","https:"):a.url),g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),e=
esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.getApp):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,h=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==k?(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.download):"Document Link"===k?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),e=h=esri.i18nBundle.itemLinks.open):
"Form"===k&&g&&g.accountId?(g="arcgis-survey123://?itemId\x3d"+a.id+"\x26username\x3d"+g.username,h=esri.i18nBundle.itemLinks.openInSurvey123,e=esri.i18nBundle.itemLinks.open):"Workforce Project"===k?(g=(k=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",g=window.location.protocol+"//"+g+((k?"/apps/workforce/#":"")+("/projects/"+a.id+"/dispatch/assignments")),h=esri.i18nBundle.itemLinks.openWorkforce,e=esri.i18nBundle.itemLinks.open):
"Insights Workbook"===k||"Insights Page"===k||"Insights Model"===k?(g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",g="Insights Model"===k?g+("?model\x3d"+a.id):"Insights Page"===k?g+("view/"+a.id):g+a.id,h=esri.i18nBundle.itemLinks.openInsights,e=esri.i18nBundle.itemLinks.open):"Dashboard"===k?(m=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/opsdashboard/index.html#/"+
a.id,g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,m),h=esri.i18nBundle.itemLinks.dashboardView,e=esri.i18nBundle.itemLinks.open):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,h=esri.i18nBundle.itemLinks.viewDetails):(k=arcgisonline.sharing.util.isHostedTemplateItem(a.url),a.url&&0<a.url.length?(esriGeowConfig.urlKey&&(-1<a.url.indexOf(esriGeowConfig.urlKey)||e&&-1<a.url.indexOf(e))&&-1===a.url.indexOf(".opendata")&&(a.originalUrl=
a.originalUrl||b.clone(a.url),a.url=esriGeowConfig.allSSL?a.url.replace("http:","https:"):a.url),a.access&&"public"!==a.access&&k&&!arcgisonline.sharing.util.isPortal()&&(m=arcgisonline.sharing.util.parseUrl(a.url),a.url=a.url.replace(m.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&a.url&&0===a.url.indexOf("/")&&(m=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===a.url.indexOf(m)&&(a.url=m+a.url)),g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,
"openPageAndCount",a.id,a.url),h=esri.i18nBundle.itemLinks.viewApp,e=esri.i18nBundle.itemLinks.open):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,h=esri.i18nBundle.itemLinks.viewDetails)):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.openExplorer):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,
h=esri.i18nBundle.itemLinks.openDesktop):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.openDesktop):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a)),e=esri.i18nBundle.itemLinks.open,h="Task File"!==k?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:e,href:g,target:"",tip:h,onclick:m}},getHomePageGalleryLinkInfo:function(a){var k=
a.type?a.type:"",e="",g="",h="",m=null;e=this.getUser();g=!1;g=null;esriGeowConfig.portalHostname&&(g=esriGeowConfig.portalHostname);g&&(h=g.split("."),1<h.length&&(g=h[h.length-2]+"."+h[h.length-1]));if("Web Map"==k){h=esriGeowConfig.baseUrl+"webmap/viewer.html?webmap\x3d"+a.id;var l=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(h);g=(g=!e&&this._isPremiumService(a))?l:h;h=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer);e=esri.i18nBundle.itemLinks.open}else if("CityEngine Web Scene"===
k)g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+a.id,h=esri.i18nBundle.itemLinks.viewApp,e=esri.i18nBundle.itemLinks.open;else if("Web Scene"===k&&esriGeowConfig.sceneViewerEnabled)g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+a.id,h=esri.i18nBundle.itemLinks.openSceneViewer,e=esri.i18nBundle.itemLinks.open;
else if("Scene Service"===k&&esriGeowConfig.sceneViewerEnabled)g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,h=esri.i18nBundle.itemLinks.addToSceneViewer,e=esri.i18nBundle.itemLinks.open;else if("Operation View"===k){g=window.location;k=arcgisonline.sharing.util.isPortal();e=-1<b.indexOf(a.typeKeywords,"V2");g=g.protocol+"//"+(k?esriGeowConfig.self.portalHostname:g.host);h=window.location.protocol+"//"+
window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+a.id;l=this.couldHaveArcGISDesktop();if(e)return null;if(l)g=g+(k?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+a.id;else if(this._isOperationsViewSupportedBrowser())g=h;else return null;h=esri.i18nBundle.itemLinks.openOperationViewDesktop;e=esri.i18nBundle.itemLinks.open}else"Map Service"==k||"Feature Service"==k||"Image Service"==k||"KML"==k||"Stream Service"==
k||"Vector Tile Service"===k?(h=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+a.id,l=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(h),g=(g=!e&&this._isPremiumService(a))?l:h,e=esri.i18nBundle.itemLinks.open,h=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),esriGeowConfig.sceneViewerEnabled&&"Image Service"===k&&-1<b.indexOf(a.typeKeywords,"Elevation 3D Layer")&&(g=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,h=esri.i18nBundle.itemLinks.addToSceneViewer,e=esri.i18nBundle.itemLinks.open)):"WMS"==k||"WFS"===k||"WMTS"===k?(g=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+a.id,e=esri.i18nBundle.itemLinks.open,h=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==k?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,
"openPageAndCount",a.id,a.url+"?f\x3dlyr\x26v\x3d9.3"),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.openDesktop):this.couldHaveArcGISDesktop()&&("Map Package"==k||"Mobile Map Package"==k||"Basemap Package"===k||"Mobile Basemap Package"===k||"Layer Package"==k||"Pro Map"==k||"Layout"==k||-1<b.indexOf(a.typeKeywords,"lyrx"))?a&&-1===a.name.indexOf(".bpkx")&&-1===a.name.indexOf(".mmpk")&&-1===a.name.indexOf(".bpk")&&-1===a.name.indexOf(".lpkx")&&-1===a.name.indexOf(".mpkx")&&-1===a.name.indexOf(".lyrx")&&
-1===a.name.indexOf(".mapx")&&-1===a.name.indexOf(".pagx")?(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.openDesktop):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=k&&"Locator Package"!=k&&"Tile Package"!=k&&"Vector Tile Package"!=k?
!this.couldHaveArcGISDesktop()||"Map Document"!=k&&"Published Map"!=k&&"Globe Document"!=k&&"Scene Document"!=k&&"Layer"!=k?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=k&&"ArcGIS Pro Add In"!==k?!this.isSilverlightInstalled()||"Explorer Map"!=k&&"Explorer Layer"!=k&&"Explorer Add In"!=k?"File Geodatabase"===k||"CSV Collection"===k||"KML Collection"===k||"Rule Package"===k||"GeoJson"===k||"Shapefile"===k||"CSV"===k||"Map Template"===k||"Code Sample"===k||"Geoprocessing Sample"===k||"Service Definition"===
k||"Workflow Manager Package"===k||"Windows Viewer Add-in"===k||"ArcPad Package"===k||"Operations Dashboard Addin"===k||"Microsoft Word"===k||"CAD Drawing"===k||"Raster function template"===k||"Microsoft PowerPoint"===k||"Microsoft Powerpoint"===k||"Microsoft Excel"===k||"iWork Pages"===k||"iWork Keynote"===k||"iWork Numbers"===k||"Image"===k||"Visio Document"===k||"PDF"===k||"Desktop Application"===k||"Task File"===k||"Project Package"===k||"ArcGIS Pro Configuration"===k||"Project Template"===k||
"Desktop Style"===k||"Native Application Installer"===k||"360 VR Experience"==k?(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.downloadArchive):"Desktop Application Template"==k?-1<b.indexOf(a.typeKeywords,"desktopApplicationTemplateUrl")&&a.url&&0<a.url.length?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),e=h=esri.i18nBundle.itemLinks.open):(g="JavaScript:void(0)",
m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.downloadArchive):"Web Mapping Application"==k&&-1===b.indexOf(a.typeKeywords,"Web AppBuilder for ArcGIS")||"Hub Initiative"===k||"Hub Page"===k||"Hub Site Application"===k?(k=arcgisonline.sharing.util.isHostedTemplateItem(a.url),a.url&&0<a.url.length?(esriGeowConfig.urlKey&&(-1<a.url.indexOf(esriGeowConfig.urlKey)||g&&-1<a.url.indexOf(g))&&-1===a.url.indexOf(".opendata")&&(a.url=
esriGeowConfig.allSSL?a.url.replace("http:","https:"):a.url),a.access&&"public"!==a.access&&k&&!arcgisonline.sharing.util.isPortal()&&(m=arcgisonline.sharing.util.parseUrl(a.url),a.url=a.url.replace(m.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&a.url&&0===a.url.indexOf("/")&&(m=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===a.url.indexOf(m)&&(a.url=m+a.url)),g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",
a.id,a.url),h=esri.i18nBundle.itemLinks.viewApp,e=esri.i18nBundle.itemLinks.open):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,h=esri.i18nBundle.itemLinks.viewDetails)):"Mobile Application"==k?a.url&&0<a.url.length?(esriGeowConfig.urlKey&&(-1<a.url.indexOf(esriGeowConfig.urlKey)||g&&-1<a.url.indexOf(g))&&(a.url=esriGeowConfig.allSSL?a.url.replace("http:","https:"):a.url),g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),
e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.getApp):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,h=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==k?(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.download):"Document Link"===k?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),e=h=esri.i18nBundle.itemLinks.open):
"Form"===k&&(!e||e&&e.accountId)?(g=(esriGeowConfig.surveyUrl||"https://survey123.arcgis.com")+"/share/"+a.id+"?portalUrl\x3d"+(location.protocol+"//"+(esriGeowConfig.self.urlKey?esriGeowConfig.self.urlKey+"."+esriGeowConfig.self.customBaseUrl:esriGeowConfig.self.portalHostname)),h=esri.i18nBundle.itemLinks.openSurvey123,e=esri.i18nBundle.itemLinks.open):"Workforce Project"===k?(e=(k=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",
g=window.location.protocol+"//"+e+((k?"/apps/workforce/#":"")+("/projects/"+a.id+"/dispatch/assignments")),h=esri.i18nBundle.itemLinks.openWorkforce,e=esri.i18nBundle.itemLinks.open):"Insights Workbook"===k||"Insights Page"===k||"Insights Model"===k?(e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",g=e="Insights Model"===k?e+("?model\x3d"+a.id):"Insights Page"===k?e+("view/"+a.id):e+a.id,h=esri.i18nBundle.itemLinks.openInsights,
e=esri.i18nBundle.itemLinks.open):"Dashboard"===k?(g=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/opsdashboard/index.html#/"+a.id,h=esri.i18nBundle.itemLinks.dashboardView,e=esri.i18nBundle.itemLinks.open):"StoryMap"===k?(g="JavaScript:void(0)",m=b.hitch(arcgisonline.sharing.util,"openPageAndCount",a.id,a.url),e=h=esri.i18nBundle.itemLinks.open):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+a.id,e=esri.i18nBundle.itemLinks.details,h=esri.i18nBundle.itemLinks.viewDetails):
(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.openExplorer,h=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer)):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,h=esri.i18nBundle.itemLinks.openDesktop):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a)),e=esri.i18nBundle.itemLinks.open,
h=esri.i18nBundle.itemLinks.openDesktop):(g="JavaScript:void(0)",m=b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a)),e=esri.i18nBundle.itemLinks.open,h="Task File"!==k?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:e,href:g,target:"",tip:h,onclick:m}},getItemOpenLinkObjects:function(a,k){var e=this.isSilverlightInstalled(),g=[],h=a.type?a.type:"",m=this.getUser(),l=!1;if("Web Map"==h&&-1==b.indexOf(a.typeKeywords,"ArcGIS Online")&&e&&esriGeowConfig.explorerOnline)g.push({label:esri.substitute({appTitle:""},
esri.i18nBundle.itemLinks.openViewer),onClick:b.partial(arcgisonline.map.mapUtil.openMap,a.id,l)}),this.couldHaveArcGISDesktop()&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a))});else if("Web Map"==h)l=!m&&this._isPremiumService(a),g.push({label:esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),onClick:b.partial(arcgisonline.map.mapUtil.openMap,a.id,l)}),this.couldHaveArcGISDesktop()&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a))}),h=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/presentation/index.html?webmap\x3d"+a.id,-1<b.indexOf(a.typeKeywords,"Presentation Map")?(g.push({label:esri.i18nBundle.aboutPanel.viewPresentation,onClick:b.partial(arcgisonline.sharing.util.openPage,h)}),k&&g.push({label:esri.i18nBundle.aboutPanel.editPresentation,onClick:b.partial(arcgisonline.sharing.util.openPage,h+"\x26builder",
!0)})):k&&g.push({label:esri.i18nBundle.aboutPanel.createPresentation,onClick:b.partial(arcgisonline.sharing.util.openPage,h+"\x26builder",!0)});else if("Map Service"==h||"Vector Tile Service"===h)l=!m&&this._isPremiumService(a),g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:b.partial(arcgisonline.map.mapUtil.addToMap,a.id,l)}),g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),
onClick:b.partial(arcgisonline.map.mapUtil.openOnMap,a.id,l)}),esriGeowConfig.sceneViewerEnabled&&g.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,!0)}),"Vector Tile Service"!==h?(this.couldHaveArcGISDesktop()&&!arcgisonline.sharing.util.isHostedServiceItem(a)&&(-1<b.indexOf(a.typeKeywords,
"Hosted Service")&&arcgisonline.sharing.util.portalSupportsHostedServices()?g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))}):!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(a.url)||arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onFederatedServer(a.url)?g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))}):a.url&&-1!==
a.url.indexOf(".arcgis.com/")&&-1!==a.url.indexOf("//landscape")?g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))}):g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,a.url+"?f\x3dlyr\x26v\x3d9.3")})),this.couldHaveArcGISDesktop()&&arcgisonline.sharing.util.isHostedServiceItem(a)&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",
a,this.getPItemPath(a))})):(h=a.access&&"public"!==a.access&&m&&m.token?"\x26token\x3d"+m.token:"",m=(a&&a.hasResources?esriGeowConfig.restBaseUrl+"content/items/"+a.id:a.url)+"/resources/styles/root.json?f\x3dpjson",esri.isDefined(a.hasResources)&&(k&&a&&a.hasResources&&g.push({label:esri.i18nBundle.itemLinks.downloadStyle,onClick:b.partial(arcgisonline.sharing.util.openPage,m+"\x26download\x3dtrue"+h,!0)}),(k&&a&&a.hasResources||a.url&&-1<a.url.indexOf("/VectorTileServer"))&&g.push({label:esri.i18nBundle.itemLinks.viewStyle,
onClick:b.partial(arcgisonline.sharing.util.openPage,m+h,!1)})));else if(this.couldHaveArcGISDesktop()&&"Globe Service"==h)g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,a.url+"?f\x3dlyr\x26v\x3d9.3")});else if("Image Service"==h||"Feature Service"==h||"KML"==h||"Feature Collection"==h||"Stream Service"==h){k=a&&a.extraUrlParams?!0:!1;l=!m&&this._isPremiumService(a);if("Image Service"!==h||"Image Service"===h&&-1===b.indexOf(a.typeKeywords,
"Elevation 3D Layer"))g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:b.partial(arcgisonline.map.mapUtil.addToMap,a.id,l,k)}),g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:b.partial(arcgisonline.map.mapUtil.openOnMap,a.id,l,k)});if("KML"==h)this.couldHaveArcGISDesktop()&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,
"_fetchItemData",a,this.getPItemPath(a))}),g.push({label:esri.i18nBundle.itemLinks.download,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Image Service"===h||"Feature Service"===h)esriGeowConfig.sceneViewerEnabled&&-1===b.indexOf(a.typeKeywords,"Table")&&("Feature Service"===h&&-1===b.indexOf(a.typeKeywords,"HasOnlyMultipatchGeometries")||"Image Service"===h&&-1<b.indexOf(a.typeKeywords,"Elevation 3D Layer"))&&g.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,
onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,!0)}),this.couldHaveArcGISDesktop()&&"Image Service"===h&&(a.url&&-1!==a.url.indexOf(".arcgis.com/")||!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(a.url)||arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onFederatedServer(a.url)?g.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))}):g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,a.url+"?f\x3dlyr\x26v\x3d9.3")})),this.couldHaveArcGISDesktop()&&"Feature Service"===h&&this.couldHaveArcGISDesktop()&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))})}else if("Geoprocessing Service"===h&&this.couldHaveArcGISDesktop())g.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))});else if("WMS"==h||"WFS"===h||"WMTS"===h)a.noWebMercator?g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:b.partial(arcgisonline.map.mapUtil.openOnGCSMap,a.id)}):(g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:b.partial(arcgisonline.map.mapUtil.addToMap,a.id)}),g.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||
"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:b.partial(arcgisonline.map.mapUtil.openOnMap,a.id)})),esriGeowConfig.sceneViewerEnabled&&g.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,!0)}),this.couldHaveArcGISDesktop()&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:b.hitch(this,"_fetchItemData",a,this.getPItemPath(a))});else if("File Geodatabase"===h||"CSV Collection"===h||"KML Collection"===h||"Rule Package"==h||"CSV"==h||"GeoJson"===h||"Shapefile"==h||"Service Definition"==h||"ArcPad Package"===h||"Operations Dashboard Addin"===h)g.push({label:esri.i18nBundle.itemLinks.download,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Map Package"==h||"Mobile Map Package"===h||"Basemap Package"===h||"Mobile Basemap Package"===h||
"Layer Package"==h||"Pro Map"==h||"Layout"==h||-1<b.indexOf(a.typeKeywords,"lyrx"))this.couldHaveArcGISDesktop()&&a&&-1===a.name.indexOf(".bpkx")&&-1===a.name.indexOf(".mmpk")&&-1===a.name.indexOf(".bpk")&&-1===a.name.indexOf(".lpkx")&&-1===a.name.indexOf(".mpkx")&&-1===a.name.indexOf(".lyrx")&&-1===a.name.indexOf(".mapx")&&-1===a.name.indexOf(".pagx")&&g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a))}),g.push({label:esri.i18nBundle.itemLinks.download,
onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Geoprocessing Package"==h||"Locator Package"==h||"Tile Package"==h||"Vector Tile Package"==h||"Project Package"===h||"Project Template"===h)this.couldHaveArcGISDesktop()&&"Task File"!==h&&"Project Package"!==h&&"Project Template"!==h&&g.push({label:"Task File"!==h?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional,onClick:b.hitch(this,"_fetchItemData",a,this.getItemPkgPath(a))}),g.push({label:esri.i18nBundle.itemLinks.download,
onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Scene Package"==h)g.push({label:esri.i18nBundle.itemLinks.download,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if(!this.couldHaveArcGISDesktop()||"Map Document"!=h&&"Published Map"!=h&&"Globe Document"!=h&&"Scene Document"!=h&&"Layer"!=h)if(!this.couldHaveArcGISDesktop()||"Desktop Add In"!=h&&"ArcGIS Pro Add In"!==h)if("Explorer Layer"==h||"Explorer Add In"==h||"Explorer Map"==h)g.push({label:esri.i18nBundle.itemLinks.openExplorer,
onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Map Template"===h||"Code Sample"===h||"Geoprocessing Sample"===h||"Workflow Manager Package"===h||"Windows Viewer Add In"===h||"Microsoft Word"===h||"CAD Drawing"===h||"Raster function template"===h||"Microsoft PowerPoint"===h||"Microsoft Powerpoint"===h||"Microsoft Excel"===h||"iWork Pages"===h||"iWork Keynote"===h||"iWork Numbers"===h||"Image"===h||"Visio Document"===h||"PDF"===h||"Desktop Application"===h||"Task File"===
h||"Desktop Style"===h||"Native Application Installer"===h||"360 VR Experience"==h||"ArcGIS Pro Configuration"===h)g.push({label:"PDF"!==h?esri.i18nBundle.itemLinks.download:esri.i18nBundle.itemLinks.open,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Desktop Application Template"===h)(k=-1<b.indexOf(a.typeKeywords,"desktopApplicationTemplateUrl"))&&a.url&&a.url.length&&(k=!0,g.push({label:esri.i18nBundle.itemLinks.open,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,
a.id,a.url)})),k||g.push({label:esri.i18nBundle.itemLinks.download,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Web Mapping Application"==h&&-1===b.indexOf(a.typeKeywords,"Web AppBuilder for ArcGIS")||"Mobile Application"==h||"Application"==h||"Native Application"===h||"Native Application Template"===h||"Hub Initiative"===h||"Hub Page"===h||"Hub Site Application"===h)arcgisonline.sharing.util.isHostedTemplateItem(a.url),m=esri.i18nBundle.itemLinks.viewApp,"Mobile Application"==
h&&(m=esri.i18nBundle.itemLinks.getApp),arcgisonline.sharing.util.isPortal()&&a.url&&0===a.url.indexOf("/")&&(h=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===a.url.indexOf(h)&&(a.url=h+a.url)),a.url&&0<a.url.length&&g.push({label:m,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,a.url)}),-1<b.indexOf(a.typeKeywords,"Web AppBuilder")&&k&&(a=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+
"/apps/webappbuilder/index.html?id\x3d"+a.id,a="https:"===window.location.protocol?arcgisonline.sharing.util.getSecureUrl(a):arcgisonline.sharing.util.getHttpUrl(a),g.push({label:esri.i18nBundle.itemLinks.editApp,onClick:b.partial(arcgisonline.sharing.util.openPage,a,!0)}));else if("Windows Mobile Package"==h)g.push({label:esri.i18nBundle.itemLinks.download,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("CityEngine Web Scene"==h)h=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+a.id,g.push({label:esri.i18nBundle.itemLinks.viewApp,onClick:b.partial(arcgisonline.sharing.util.openPage,h)}),g.push({label:esri.i18nBundle.itemLinks.download,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else if("Web Scene"===h&&esriGeowConfig.sceneViewerEnabled)h=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+
a.id,g.push({label:esri.i18nBundle.itemLinks.openSceneViewer,onClick:b.partial(arcgisonline.sharing.util.openPage,h,!0)});else if("Scene Service"===h&&esriGeowConfig.sceneViewerEnabled)h=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+a.id,g.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,h,!0)});else if("Operation View"===h){h=window.location;
k=arcgisonline.sharing.util.isPortal();m=h.protocol+"//"+(k?esriGeowConfig.self.portalHostname:h.host);l=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+a.id;e=-1<b.indexOf(a.typeKeywords,"TabletLayout");b.indexOf(a.typeKeywords,"DesktopLayout");var f=-1<b.indexOf(a.typeKeywords,"V2"),c=this.couldHaveArcGISDesktop();h=this._isOperationsViewSupportedBrowser();c&&!f&&g.push({label:esri.i18nBundle.itemLinks.openOperationViewDesktop,
onClick:b.partial(arcgisonline.sharing.util.openPage,m+(k?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+a.id)});!f&&e&&h&&g.push({label:esri.i18nBundle.itemLinks.openOperationViewUrl,onClick:b.partial(arcgisonline.sharing.util.openPage,l,!1)})}else"Document Link"===h?g.push({label:esri.i18nBundle.itemLinks.open,onClick:b.partial(arcgisonline.sharing.util.openPageAndCount,a.id,a.url)}):"Form"===h&&m&&m.accountId?g.push({label:esri.i18nBundle.itemLinks.openSurvey123,
onClick:b.partial(arcgisonline.sharing.util.openPage,"arcgis-survey123://?itemId\x3d"+a.id+"\x26username\x3d"+m.username,!0)}):"Workforce Project"===h?(h=(k=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",g.push({label:esri.i18nBundle.itemLinks.openWorkforce,onClick:b.partial(arcgisonline.sharing.util.openPage,window.location.protocol+"//"+h+((k?"/apps/workforce/#":"")+("/projects/"+a.id+"/dispatch/assignments")),!0)})):
"Insights Workbook"===h||"Insights Page"===h||"Insights Model"===h?(k=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",k="Insights Model"===h?k+("?model\x3d"+a.id):"Insights Page"===h?k+("view/"+a.id):k+a.id,g.push({label:esri.i18nBundle.itemLinks.openInsights,onClick:b.partial(arcgisonline.sharing.util.openPage,k,!0)})):"Dashboard"===h&&(m=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+
"/apps/opsdashboard/index.html#/",h=this._isOperationsViewSupportedBrowser(!0),a=m+a.id,m=a+"?edit\x3dtrue",g.push({label:esri.i18nBundle.itemLinks.dashboardView,onClick:b.partial(arcgisonline.sharing.util.openPage,a,!1)}),k&&h&&g.push({label:esri.i18nBundle.itemLinks.dashboardEdit,onClick:b.partial(arcgisonline.sharing.util.openPage,m,!1)}));else g.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});else g.push({label:esri.i18nBundle.itemLinks.openDesktop,
onClick:b.hitch(this,"_fetchItemData",a,this.getItemDataPath(a))});return g},getGroupLinks:function(a){var k=b.create,e=k("span",{"class":"esriItemLinks",style:"white-space: nowrap"});k("a",{href:esriGeowConfig.baseUrl+"group.html?id\x3d"+a.id,innerHTML:esri.i18nBundle.itemLinks.details,title:esri.i18nBundle.itemLinks.viewGroupDetails,alt:esri.i18nBundle.itemLinks.viewGroupDetails},e);return e},getItemDataPath:function(a){var k=arcgisonline.sharing.util.getToken(),e=k?"?token\x3d"+k:"",g=esriGeowConfig.restBaseUrl+
"content/items/"+a.id+"/data";return"KML"==a.type&&(e="public"!==a.access&&k?"?token\x3d"+k:"",a.url&&-1===a.url.indexOf(g))?a.url+e:g+e},getItemPkgPath:function(a){var k=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/item.pkinfo"+(k?"?token\x3d"+k:"")},getPItemPath:function(a){var k=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/item.pitem"+(k?"?token\x3d"+k:"")},getItemZipPath:function(a){var k=arcgisonline.sharing.util.getToken();
return esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/data?f\x3dzip"+(k?"\x26token\x3d"+k:"")},getUser:function(){this.checkSession();return""===esriGeowConfig.userInfo?null:esriGeowConfig.userInfo},meetsPasswordStrength:function(a){return 8<=a.length&&a.match("^.*(?\x3d.*\\d)(?\x3d.*[a-zA-Z]).*$")},meetsPasswordPolicyStrength:function(a,k){var e={meetsRequirements:function(){return this.minLength&&this.minLetter&&this.minUpper&&this.minLower&&this.minDigit&&this.minOther},minLength:!0,minLetter:!0,
minUpper:!0,minLower:!0,minDigit:!0,minOther:!0};if(k&&0<k.length){a.minLength&&(e.minLength=k.length>=a.minLength);if(a.minLetter){var g=k.match(/[A-Za-z]/g);e.minLetter=!!(g&&g.length>=a.minLetter)}a.minUpper&&(g=k.match(/[A-Z]/g),e.minUpper=!!(g&&g.length>=a.minUpper));a.minLower&&(g=k.match(/[a-z]/g),e.minLower=!!(g&&g.length>=a.minLower));a.minDigit&&(g=k.match(/[0-9]/g),e.minDigit=!!(g&&g.length>=a.minDigit));a.minOther&&(k=k.match(/[\\!"#\$%&'\(\)\*\+,-\./:;<=>\?@\[\]\^_`\{\|}~]/g),e.minOther=
!!(k&&k.length>=a.minOther))}else a.minLength&&(e.minLength=!1),a.minLetter&&(e.minLetter=!1),a.minUpper&&(e.minUpper=!1),a.minLower&&(e.minLower=!1),a.minDigit&&(e.minDigit=!1),a.minOther&&(e.minOther=!1);return e},userPreferences:function(a,k,e){var g=b.cookie(k||"esri_prefs");if(a)g&&(a=b.mixin(b.json.parse(g),a)),b.cookie(k||"esri_prefs",b.json.stringify(a),{path:"/",expires:1E4}),a.contentMode&&e&&this.getUser()?(g=b.create,e=g("form",{method:"POST"},b.body()),g("input",{type:"hidden",name:"preferredView",
value:a.contentMode},e),g("input",{type:"hidden",name:"clearEmptyFields",value:"false"},e),arcgisonline.sharing.geow.Community.updateProfile(e,function(h){b.publish("esri/userPreferences"+(k||"user_prefs"),[a])})):b.publish("esri/userPreferences"+(k||"user_prefs"),[a]);else return e="contentModePrefs"===k?esriGeowConfig.userInfo&&esriGeowConfig.userInfo.preferredView:null,null!=g?b.json.parse(g):e?{contentMode:e}:{}},getToken:function(){return!1===this.isLoggedIn()?"":esriGeowConfig.userInfo.token},
callPage:function(a){window.location=arcgisonline.sharing.util.replaceSSL(esriGeowConfig.baseUrl+a)},openPageAndCount:function(a,k,e){a=esriGeowConfig.restBaseUrl+"content/items/"+a+"/data";var g=arcgisonline.sharing.util.getToken(),h={f:"json"};null!=g&&""!==g&&(h.token=g);esri.request({url:a,content:h,callbackParamName:"callback"});arcgisonline.sharing.util.openPage(k,"boolean"===typeof e?e:!1)},openPage:function(a,k){k?window.location=a:window.open(a)},fix:function(a){null!=a&&1==a.length&&null!=
a[0]&&0<a[0].length&&(a=a[0]);return a.replace(/&lt;/g,"\x3c")},stripHTML:function(a){return a?-1<a.indexOf("\x3c")&&-1<a.indexOf("\x3e")?a.replace(/<[^>]+>/g,""):a:a},urlToObject:function(a){a=esri.urlToObject(a);a.query=a.query||{};for(var k in a.query)a.query.hasOwnProperty(k)&&(Array.isArray(a.query[k])||(a.query[k]=a.query[k].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return a},linkifyText:function(a){a=a.split(" ");for(var k=0;k<a.length;k++)if(0===a[k].indexOf("http://")||0===a[k].indexOf("https://"))a[k]=
"\x3ca href\x3d'"+a[k]+"' target\x3d'_blank'\x3e"+a[k]+"\x3c/a\x3e";return a.join(" ")},removeHTMLTags:function(a){if(null==a)return"";a=a.replace(/&(lt|gt);/g,function(k,e){return"lt"==e?"\x3c":"\x3e"});return a.replace(/<\/?[^>]+(>|$)/g,"")},escapeHTML:function(a){var k={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;","/":"\x26#x2F;"};return String(a).replace(/[&<>"'\/]/g,function(e){return k[e]})},unescapeHTML:function(a){return String(a).replace("\x26lt;","\x3c").replace("\x26gt;",
"\x3e").replace("\x26quot;",'"').replace("\x26#39;","'").replace("\x26#x2F;","/").replace("\x26amp;","\x26")},getSnippet:function(a,k){if(null==a||0===a.length)k=arcgisonline.sharing.util.removeHTMLTags(k),a=180<k.length?k.substring(0,180)+" ...":k;return a},trimTags:function(a){for(;-1<a.indexOf("  ");)a=a.replace(/  /g," ");for(;-1<a.indexOf(",,");)a=a.replace(/,,/g,",");return a=b.trim(a.replace(/, ,/,",").replace(/^,/,"").replace(/,$/,""))},postProcessUri:function(a){a=0<=a.indexOf("?")?a+"\x26f\x3djson":
a+"?f\x3djson";var k=this.getToken();null!=k&&""!==k&&(a=a+"\x26token\x3d"+k);return this.useSSL(a)},replaceSSL:function(a){return!1===esriGeowConfig.useSSL?a:a.replace("http://","https://")},useSSL:function(a){return"https:"===window.location.protocol||esriGeowConfig.self&&!0===esriGeowConfig.self.allSSL?a.replace("http:","https:"):a},errorHandler:function(a,k,e,g){a&&a.code&&"IdentityManagerBase.5"===a.code&&(a.code=498);if(-1<e.indexOf(esriGeowConfig.restBaseUrl)&&a.code&&498==a.code||403==a.code||
400==a.code&&"Invalid account"==a.message)if(403==a.code&&!0===this.isLoggedIn())e&&-1<e.toLowerCase().indexOf("/generatetoken")?window.location.href=esriGeowConfig.baseUrl+"signin.html":e&&-1<e.indexOf("/invitations/")&&g?g(a,k):0>window.location.href.indexOf(esriGeowConfig.baseUrl+"error.html")&&("Request not made over ssl"==a.message?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dSSLRequired":arcgisonline.sharing.util.checkSubscriptionStatus(a)&&(window.location=esriGeowConfig.baseUrl+
"error.html?c\x3dAccessDeniedResource"));else{if(!(403===a.code&&!arcgisonline.sharing.util.checkSubscriptionStatus(a)||403===a.code&&!1===esriGeowConfig.isMultiTenant&&-1<b.indexOf(["COM_0056","COM_0057","SB_0008"],a.messageCode))){esriGeowConfig.userInfo=null;b.cookie("esri_auth",null,{expires:-1,path:"/",domain:document.domain});b.cookie("esri_auth",null,{expires:-1,path:"/",domain:".arcgis.com"});b.cookie("esri_auth",null,{expires:-1,path:"/",domain:".esri.com"});arcgisonline.sharing.util&&arcgisonline.sharing.util._cookies&&
arcgisonline.sharing.util._cookies.esri_auth&&delete arcgisonline.sharing.util._cookies.esri_auth;k="";-1==esriGeowConfig.signin.indexOf("http")&&(k=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(k=k.replace("http:","https:")));k+=esriGeowConfig.signin;e="";g=k+("?error\x3d"+a.code);var h=b.queryToObject(window.location.search.slice(1)).returnUrl;0>window.location.href.indexOf(g)?-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map&&arcgisonline.map.main&&arcgisonline.map.main.map&&
arcgisonline.map.main.mapInitialized?(arcgisonline.map.storage.saveMapInCookie(null,!1),e="\x26returnUrl\x3d"+encodeURIComponent(esriGeowConfig.baseUrl+esriGeowConfig.webmapViewerPath+"?useExisting\x3d1")):e="\x26returnUrl\x3d"+encodeURIComponent(h?h:window.location):h&&(e="\x26returnUrl\x3d"+encodeURIComponent(h));g+=e;0>window.location.href.indexOf(g)?window.location=g:"User not part of this account"===a.message&&(window.location=k+"?error\x3d400"+e)}}else g&&g(a,k)},checkSubscriptionStatus:function(a){return-1!==
b.indexOf(["SB_0001","SB_0002","SB_0003","SB_0004"],a.messageCode)?(arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().show(esriGeowConfig.self.subscriptionInfo),!1):-1!==b.indexOf(["SB_0005","SB_0006","SB_0007"],a.messageCode)?(arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().showOther(a.messageCode),!1):!0},isValidSubscriptionState:function(){var a=esriGeowConfig.self.subscriptionInfo,k=["cancelled","expired","suspended",
"restricted"];return!a||-1===k.indexOf(a.state)},checkError:function(a){var k;return-1!==b.indexOf("COM_0044 COM_0047 CONT_0046 CONT_0047 COM_1043 COM_1044 COM_1045 COM_1046".split(" "),a.messageCode)?(a=(k=b.mixin({},b.i18n.getLocalization("arcgisonline","arcgisonline").common))&&k.errors&&k.errors[a.messageCode]?{message:k.errors[a.messageCode]}:a,a=b.mixin(b.mixin({},k.errors.genericError),a),esriGeowConfig.hideDefaultCheckErrorMessage||(k=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),
k.show(a)),!1):!0},handler:function(a,k,e,g,h){a.error&&""!==a.error?arcgisonline.sharing.util.errorHandler(a.error,k,e,h):g&&g(a,k)},getJson:function(a,k,e){return arcgisonline.sharing.util._requestWithAppHandlers({url:a},{},k,e)},getJsonWithContent:function(a,k,e,g){return arcgisonline.sharing.util._requestWithAppHandlers({url:a,content:k},{},e,g)},postJson:function(a,k,e,g){return arcgisonline.sharing.util._requestWithAppHandlers({url:k,content:a},{usePost:!0},e,g)},postJsonCheckProxy:function(a,
k,e,g){return"http:"===window.location.protocol&&-1<k.indexOf("https://")?arcgisonline.sharing.util._requestWithAppHandlers({url:k,content:a},{usePost:!0,useProxy:!0},e,g):arcgisonline.sharing.util._requestWithAppHandlers({url:k,content:a},{usePost:!0},e,g)},postForm:function(a,k,e,g){return arcgisonline.sharing.util._requestWithAppHandlers({url:k,form:a},{usePost:!0},e,g)},_requestWithAppHandlers:function(a,k,e,g){var h=arcgisonline.sharing.util.request(a,k);h.then(function(m,l){arcgisonline.sharing.util.handler(m||
{},h.ioArgs,a.url,e,g);return m},function(m,l){arcgisonline.sharing.util.errorHandler(m||{},h.ioArgs,a.url,g);throw m;});return h},request:function(a,k){var e=a.url,g=a.content||{},h=arcgisonline.sharing.util.getToken();k=k||{};var m=arcgisonline.sharing.util.urlToObject(e).query||{};g.f||m.f||(g=b.mixin(g,{f:"json"}));h&&!g.token&&!1!==k.addToken?esri.isDefined(esriGeowConfig.isMultiTenant)&&!1===esriGeowConfig.isMultiTenant&&esriGeowConfig.searchArcGISOnlineEnabled&&"www.arcgis.com"===arcgisonline.sharing.util.getFullDomain(a.url)||
(g.token=h):!1===k.addToken&&delete g.token;a=b.mixin({},{url:!1===k.addSSL?e:arcgisonline.sharing.util.useSSL(e),content:g,form:a.form,callbackParamName:a.form?a.callbackParamName||null:a.callbackParamName||"callback",timeout:k&&k.timeout||0});var l=esri.request(a,k);l.addErrback(function(f){"IdentityManagerBase.1"===f.code&&(f.code=f.httpCode);arcgisonline.sharing.util.checkSoftwareAuthError(f,l);arcgisonline.sharing.util.checkSubscriptionStatus(f)||(l.canceled=!0);arcgisonline.sharing.util.isUnlicensed(f)&&
(l.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html"));arcgisonline.sharing.util.isInsufficientLevel(f)&&(l.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#insufficient_level"));arcgisonline.sharing.util.isExpiredLicense(f)&&(l.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#expired_license"));
arcgisonline.sharing.util.isOldLicense(f)&&(l.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#old_license"));arcgisonline.sharing.util.isInvalidUser(f)&&(l.canceled=!0,arcgisonline.sharing.geow.Geow.signout(esriGeowConfig.baseUrl+"index.html"));arcgisonline.sharing.util.isDisabledEnterpriseUser(f)&&(l.canceled=!0,-1===window.location.href.indexOf("error.html")&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dAccountDisabled"));
arcgisonline.sharing.util.checkError(f)||(l.canceled=!0);throw f;});return l},_fetchItemData:function(a,k){var e=this.getUser(),g=this.getItemDataPath(a);"admin"===a.itemControl||e&&e.email===a.owner?this.openPage(k,!0):this._canAccessUrl(g).then(b.hitch(this,function(){this.openPage(k,!0)}),b.hitch(this,function(h){h&&403===h.status?this._showError({title:this.i18n.viewer.error.noPermissionTitle,message:this.i18n.errorWidget.accessDeniedResource}):this.openPage(k,!0)}))},_canAccessUrl:function(a){var k=
new b.Deferred;b.xhr("HEAD",{url:a,handleAs:"text",headers:{"X-Requested-With":null},withCredentials:this.isPortal()?!0:!1}).then(function(e){k.resolve(!0)},function(e){k.reject(e)});return k},_showError:function(a){var k=new arcgisonline.sharing.dijit.dialog.ConfirmDialog({showCancel:!1,style:{width:"375px",height:"auto"}}),e=a||{};e.code=a.code||0;e=b.mixin({},this.i18n.common.errors.genericError,this.i18n.common.errors[a.code]||a);k.show(e).then(b.hitch(this,function(){k.hide()}))},checkSoftwareAuthError:function(a,
k){var e=["COM_0056","COM_0057"];!1===esriGeowConfig.isMultiTenant&&a.code&&403===a.code&&a.messageCode&&-1!==b.indexOf(e,a.messageCode)&&-1===window.location.href.indexOf("error.html")&&(k.canceled=!0,"COM_0056"===a.messageCode?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalCreateAccount":"COM_0057"===a.messageCode&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalSignIn"))},isExpiredLicense:function(a){return!1===esriGeowConfig.isMultiTenant&&a.code&&503===a.code&&a.messageCode&&
"GWM_0006"===a.messageCode},isInsufficientLevel:function(a){return!1===esriGeowConfig.isMultiTenant&&a.code&&503===a.code&&a.messageCode&&"GWM_0012"===a.messageCode},isUnlicensed:function(a){return!1===esriGeowConfig.isMultiTenant&&a.code&&503===a.code&&a.messageCode&&"GWM_0013"===a.messageCode},isOldLicense:function(a){return!1===esriGeowConfig.isMultiTenant&&a.code&&503===a.code&&a.messageCode&&"GWM_0014"===a.messageCode},isInvalidUser:function(a){return!1===esriGeowConfig.isMultiTenant&&a.code&&
404===a.code&&a.messageCode&&"POR_205244"===a.messageCode},isDisabledEnterpriseUser:function(a){return!1===esriGeowConfig.isMultiTenant&&a.code&&403===a.code&&a.messageCode&&"SB_0008"===a.messageCode},isNode:function(a){return"object"===typeof Node?a instanceof Node:a&&"object"===typeof a&&"number"===typeof a.nodeType&&"string"===typeof a.nodeName},isElement:function(a){return"object"===typeof HTMLElement?a instanceof HTMLElement:a&&"object"===typeof a&&1===a.nodeType&&"string"===typeof a.nodeName},
isHostedService:function(a){if(!a)return!1;var k=(new b._Url(esriGeowConfig.restBaseUrl)).authority,e=!1===esriGeowConfig.isMultiTenant,g=-1!==a.indexOf(".arcgis.com/"),h=-1!==a.indexOf("//services")||-1!==a.indexOf("//tiles")||-1!==a.indexOf("//features")||-1!==a.indexOf("//locationservices");a=esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.supportsHostedServices&&-1!==a.indexOf(k)&&!e;return g&&h||!g&&a},isHostedServiceItem:function(a){return arcgisonline.sharing.util.isHostedService(a.item)||
arcgisonline.sharing.util.isHostedService(a.url)},isHostedTemplateItem:function(a){a=a?a.split("?")[0]:"";var k=a.match(/http.+(arcgis.com\/apps)\/?/ig);a=a.match(/http.+(opendata)\/?/ig);return k&&k.length&&!a?!0:!1},isAgolService:function(a){return a?-1!==a.indexOf("/services.arcgisonline.com/")||-1!==a.indexOf("/server.arcgisonline.com/"):!1},supportsHttps:function(a){if(!a)return!1;var k=!1;b.forEach(esriGeowConfig.httpsDomains,function(g){if(-1<a.indexOf("."+g+"/")||-1<a.indexOf("/"+g+"/"))k=
!0});if(!k){var e=esriGeowConfig.self.portalHostname;-1<e.indexOf("/")&&(e=e.substring(0,e.indexOf("/")));-1<a.indexOf(e)&&(k=!0)}return k},isArcGISServer:function(a){var k=/http.+\/(arcgis\/rest\/services|arcgis\/services)\/?/ig,e=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer)).*/ig;return(a=(a=a&&a.split("?")[0])&&a.replace(k,"").match(e))&&a.length?a[0].split("/")[1]:null},getStaticImagesUrl:function(){var a=esriGeowConfig.staticImagesUrl||
esriGeowConfig.self&&esriGeowConfig.self.staticImagesUrl;return(esriGeowConfig.allSSL||"https:"===location.protocol)&&a?a.replace("http:","https:"):a},getRedSphereUrl:function(){return arcgisonline.sharing.util.getStaticImagesUrl()+"/Symbols/Basic/RedSphere.png"},doNothing:function(){},parseUrl:function(a){var k=document.createElement("a");k.href=a;for(var e=k.protocol.replace(":",""),g=k.hostname||window.location.host,h=k.port,m=k.search,l={},f=k.search.replace(/^\?/,"").split("\x26"),c=f.length,
d=0,u;d<c;d++)f[d]&&(u=f[d].split("\x3d"),l[u[0]]=u[1]);return{source:a,protocol:e,host:g,port:h,query:m,params:l,file:(k.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:k.hash.replace("#",""),path:k.pathname.replace(/^([^\/])/,"/$1"),relative:(k.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:k.pathname.replace(/^\//,"").split("/")}},getAbsoluteUrl:function(a){var k;return a?(k||(k=document.createElement("a")),k.href=a,k.href):a},ellipse:function(a,k){a&&a.length>k&&0<k-4&&(a=a.substring(0,
k-4)+"...");return a},appendTags:function(a,k){var e=a.get("value");k=e?k.split(",").concat(e.split(",")):k.split(",");a.set("value",arcgisonline.sharing.util.getUniqueArray(k).join(","));b.style(a.domNode,"color","#000000")},getUniqueArray:function(a){var k={};return b.filter(a,function(e){return k[e]?!1:k[e]=!0})},relativeToExplicitUrl:function(a){esriGeowConfig.cdnServerUrl=b.baseUrl.substring(0,b.baseUrl.indexOf("/js/"));return esriGeowConfig.cdnServerUrl.lastIndexOf("/")===esriGeowConfig.cdnServerUrl.length-
1?esriGeowConfig.cdnServerUrl+a:esriGeowConfig.cdnServerUrl+"/"+a},getCookie:function(a,k){var e=this._cookies&&this._cookies[a]||null;if(!e||k)(e=(e=b.cookie(a))?b.json.parse(e):-1)&&e.role&&(e.role=e.role?e.role.replace("org_","account_"):e.role),e&&(this._cookies||(this._cookies={}),this._cookies[a]=e);return-1===e||esriGeowConfig.ignoreCookie?null:e},canSharePublic:function(){return!esriGeowConfig.self||!0!==esriGeowConfig.self.canSharePublic&&!1!==esriGeowConfig.self.canSharePublic?!0:esriGeowConfig.self.canSharePublic},
getSecureUrl:function(a){a||(a=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpsPort?(location.port?(a=a.replace(location.port,esriGeowConfig.self.httpsPort),arcgisonline.sharing.util.isPortal()&&(a=a.replace(esriGeowConfig.self.httpPort,esriGeowConfig.self.httpsPort))):a=a.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpsPort),a=a.replace("http:","https:"),arcgisonline.sharing.util.cleanPorts(a)):
a.replace("http:","https:")},htmlEncode:function(a){return a?a.replace(/&/g,"\x26amp;").replace(/>/g,"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;"):a},htmlDecode:function(a){return a?a.replace(/&amp;/g,"\x26").replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&quot;/g,'"'):a},getHttpUrl:function(a){a||(a=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpPort?(location.port?
(a=a.replace(location.port,esriGeowConfig.self.httpPort),arcgisonline.sharing.util.isPortal()&&(a=a.replace(esriGeowConfig.self.httpsPort,esriGeowConfig.self.httpPort))):a=a.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpPort),a=a.replace("https:","http:"),arcgisonline.sharing.util.cleanPorts(a)):a.replace("https:","http:")},cleanPorts:function(a){return a.replace(/:80\//,"/").replace(/:443\//,"/")},usePortalSSL:function(){return(!1===esriGeowConfig.isMultiTenant||arcgisonline.sharing.util.isPortal())&&
esriGeowConfig.self&&esriGeowConfig.self.portalHostname&&!esriGeowConfig.self.portalHostname.match(/:7080\//)&&80!==esriGeowConfig.self.httpPort&&443!==esriGeowConfig.self.httpsPort&&"https:"===location.protocol},onAGOLFederatedServer:function(a){for(var k=!1,e=0;e<esriGeowConfig.httpsDomains.length;e++)if(a&&-1<a.indexOf(esriGeowConfig.httpsDomains[e])){k=!0;break}return k},onFederatedServer:function(a){var k=!1,e=!1;a&&0<a.length&&esriGeowConfig.federatedServers&&0<esriGeowConfig.federatedServers.length&&
(k=b.some(esriGeowConfig.federatedServers,b.hitch(this,function(g){var h=-1<a.indexOf(":6080")?a.replace("http:","https:").replace(":6080",":6443"):a,m=g.url?arcgisonline.sharing.util.getUrlWithoutScheme(g.url):g.url,l=g.adminUrl?arcgisonline.sharing.util.getUrlWithoutScheme(g.adminUrl):g.adminUrl;m=-1<m.indexOf(":")?g.url:m;l=-1<l.indexOf(":")?g.adminUrl:l;e=h!==a;return-1<a.indexOf(m)||-1<a.indexOf(l)||e&&(-1<h.indexOf(m)||-1<h.indexOf(l))})));return k},getUrlWithoutScheme:function(a){if(esri.isDefined(a)){if(0===
a.indexOf("http://"))return a.substring(7);if(0===a.indexOf("https://"))return a.substring(8)}return a},isPortal:function(){return esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.isPortal},portalSupportsHostedServices:function(){return arcgisonline.sharing.util.isPortal()&&esriGeowConfig.self.supportsHostedServices},getHomeAppContext:function(){if(arcgisonline.sharing.util.isPortal()){var a=window.location.pathname,k=a.indexOf("/home");if(0<k)return a.substring(0,k)}return""},normalizeOrgRole:function(a){return a?
a.replace("org_","account_"):a},checkForIAA:function(){var a=new b.Deferred,k=!!esriGeowConfig.isDebug,e=arcgisonline.sharing.util.getPortalAdminBaseUrl(),g=arcgisonline.sharing.util.getUser();b.xhrGet({url:e+"/",handleAs:"json",content:{f:"json",ts:(new Date).getTime()}}).then(b.hitch(this,function(h){h&&h.status&&"error"===h.status&&h.code&&503===h.code?a.resolve({hasIAA:!0,error:h}):h&&(!h.error&&!g||h.error&&h.error.code&&(!g&&499!==h.error.code&&498!==h.error.code||g&&499!==h.error.code&&498!==
h.error.code))?-1===window.location.href.indexOf("createadmin.html")?window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):a.resolve({hasIAA:!1}):a.resolve({hasIAA:!0})}),b.hitch(this,function(h){!k&&(h.status&&499!==h.status||h&&(!h.error&&!g||h.error&&h.error.code&&(!g&&499!==h.error.code&&498!==h.error.code||g&&499!==h.error.code&&498!==h.error.code)))?-1===window.location.href.indexOf("createadmin.html")?window.location=
arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):a.resolve({hasIAA:!1}):a.resolve({hasIAA:!0,error:h})}));return a},getBridgeUrl:function(a,k){a=esriGeowConfig.bridgeUrl+"?url\x3d"+encodeURIComponent(a);return k&&k.expires?a+"\x26exp\x3d"+Math.ceil((new Date(k.expires)-new Date)/1E3):a},getUserDisplayName:function(a){var k=a&&a.fullName||"";a=a.firstName||k;-1<k.indexOf("_")?a=k.split("_")[0]:-1<k.indexOf(",")?a=k.split(",").slice(1).join(" "):
-1<k.indexOf(" ")&&(a=k.split(" ")[0]);return a.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},isProApp:function(a){return a&&"ArcGIS Pro"===a.title&&"esri_apps"===a.owner&&a.tags&&-1<b.indexOf(a.tags,"pro")},findProListing:function(){var a=new b.Deferred,k=!1,e=!1,g;arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"portals/self/purchases"}).then(b.hitch(this,function(h){h.purchases?(b.forEach(h.purchases,b.hitch(this,function(m){!e&&m.listing&&"ArcGIS Pro"===m.listing.title&&
"esri_apps"===m.listing.owner&&"licenseByUser"===m.listing.licenseBy&&(k=b.some(m.listing.tags,b.hitch(this,function(l){return l&&"pro"===l.toLowerCase()})))&&(g=m,e=!0)})),a.resolve(e?g:null)):a.resolve(null)}),b.hitch(this,function(h){a.reject(h)}));return a},findLicenseByUserProducts:function(){var a=new b.Deferred,k=esriGeowConfig.restBaseUrl+"portals/self/purchases",e=!1,g=!1,h={pro:null,products:null};this.isPortal();var m=b.hitch(this,function(l){if(l.listing&&"licenseByUser"===l.listing.licenseBy)if(e=
!0,"ArcGIS Pro"===l.listing.title&&"esri_apps"===l.listing.owner){if(g=b.some(l.listing.tags,b.hitch(this,function(f){return f&&"pro"===f.toLowerCase()})))h.pro=l}else l&&l.provision&&(h.products?h.products.push(l):h.products=[l])});arcgisonline.sharing.util.request({url:k}).then(b.hitch(this,function(l){l.purchases||l.trials?(l.purchases&&b.forEach(l.purchases,m),l.trials&&b.forEach(l.trials,m),a.resolve(e?h:null)):a.resolve(null)}),b.hitch(this,function(l){a.reject(l)}));return a},isEsriWorldGeocoder:function(a){var k=
arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(a);a=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(a);return k||a},isEsriWorldGeocoderNoProxy:function(a){return(a=a.url||"")&&!!a.match(/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/ig)},isEsriWorldGeocoderThroughProxy:function(a){var k=a.url||"";return a.isAGOWorldLocator||k&&!!k.match(/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/ig)},filterBatchGeocoders:function(a,k){return b.filter(a,b.hitch(this,
function(e){var g=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(e),h=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(e);if(g||h)esri.isDefined(e.name)?"Esri World Geocoder"===e.name&&(e.name=esri.i18nBundle.common.esriWorldGeocoder):e.name=esri.i18nBundle.common.esriWorldGeocoder;return g&&(arcgisonline.sharing.util.isPortal()||k)?!1:esri.isDefined(e.batch)?!!e.batch:g||h}))},filterNonWorldGeocoders:function(a){return b.filter(a,b.hitch(this,function(k){var e=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(k),
g=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(k);return!e&&!g&&k.url}))},downloadWebMappingApp:function(a){var k="Mobile Application"!==a.type?"WMA2Code":"MobileApp2Code",e=esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/relatedItems";k=a.relatedItems||arcgisonline.sharing.util.request({url:e,content:{relationshipType:k}}).then(b.hitch(this,function(g){a.relatedItems=g&&g.relatedItems||[];return a.relatedItems}));return b.when(k,b.hitch(this,function(g){var h=g||[],m,l=b.filter(h,
function(f){return f&&null!==f.url});g=l&&l.length?l[0]:h&&0<h.length?h[0]:g;g.id&&(m=g.url||arcgisonline.sharing.util.getItemDataPath(g));g.url?window.open(m):window.location=m;y.byId("share-map-stack")&&y.byId("share-map-stack").selectChild(y.byId("share-map-application-help"))}),b.hitch(this,function(g){}))},loadUserTags:function(a){var k=new b.Deferred;a?arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+a+"/tags",content:{ts:(new Date).getTime()}}).then(b.hitch(this,
function(e){var g=[];e&&e.tags&&(g=e.tags);g=g.map(function(h){h.tag=arcgisonline.sharing.util.sanitizer.sanitize(h.tag);return h}.bind(this));k.resolve(g)}),b.hitch(this,function(e){k.resolve([])})):k.resolve([]);return k},loadUserProperties:function(a){return arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+a+"/properties"})},isValidEmailAddress:function(a){var k=/(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?\.)+[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/ig;
return!/(@.*@)|(\.\.)|(@\.)|(\.@)|(^\.)/.test(a)&&k.test(a)?!0:!1},groupUsedInOrgSettings:function(a){return(a=a?"id:"+a:null)&&esriGeowConfig.self&&(esriGeowConfig.self.basemapGalleryGroupQuery&&-1<esriGeowConfig.self.basemapGalleryGroupQuery.indexOf(a)||esriGeowConfig.self.colorSetsGroupQuery&&-1<esriGeowConfig.self.colorSetsGroupQuery.indexOf(a)||esriGeowConfig.self.featuredGroupsId&&-1<esriGeowConfig.self.featuredGroupsId.indexOf(a)||esriGeowConfig.self.featuredItemsGroupQuery&&-1<esriGeowConfig.self.featuredItemsGroupQuery.indexOf(a)||
esriGeowConfig.self.galleryTemplatesGroupQuery&&-1<esriGeowConfig.self.galleryTemplatesGroupQuery.indexOf(a)||esriGeowConfig.self.homePageFeaturedContent&&-1<esriGeowConfig.self.homePageFeaturedContent.indexOf(a)||esriGeowConfig.self.layerTemplatesGroupQuery&&-1<esriGeowConfig.self.layerTemplatesGroupQuery.indexOf(a)||esriGeowConfig.self.livingAtlasGroupQuery&&-1<esriGeowConfig.self.livingAtlasGroupQuery.indexOf(a)||esriGeowConfig.self.stylesGroupQuery&&-1<esriGeowConfig.self.stylesGroupQuery.indexOf(a)||
esriGeowConfig.self.symbolSetsGroupQuery&&-1<esriGeowConfig.self.symbolSetsGroupQuery.indexOf(a)||esriGeowConfig.self.templatesGroupQuery&&-1<esriGeowConfig.self.templatesGroupQuery.indexOf(a)||esriGeowConfig.self.analysisLayersGroupQuery&&-1<esriGeowConfig.self.analysisLayersGroupQuery.indexOf(a))},canShowSocialMediaLinks:function(){var a=arcgisonline.sharing.util.isPortal(),k=arcgisonline.sharing.util.canSharePublic(),e=!(!esriGeowConfig.self||!esriGeowConfig.self.portalProperties)&&esri.isDefined(esriGeowConfig.self.portalProperties.showSocialMediaLinks),
g=e&&!0===esriGeowConfig.self.portalProperties.showSocialMediaLinks;return esriGeowConfig.showSocialMediaLinks&&!0===esriGeowConfig.showSocialMediaLinks&&(a?k&&g:k&&(!e||g))},getPortalAdminBaseUrl:function(){return arcgisonline.sharing.util.getSecureUrl("ArcGISEnterpriseOnKubernetes"===(esriGeowConfig.self||{}).portalDeploymentType?esriGeowConfig.enterpriseAdminBaseUrl:esriGeowConfig.portalAdminBaseUrl)},formatPortalOrgUrl:function(a,k,e){return"ArcGISEnterpriseOnKubernetes"===(esriGeowConfig.self||
{}).portalDeploymentType?a+"/orgs/"+e+k:a+k},getLevelSpan:function(a,k){return'\x3cspan class\x3d"license-level-badge" aria-label\x3d"'+a+" "+k+'"\x3e'+k+"\x3c/span\x3e"},getLevelSpanProperties:function(a,k){return{"class":"license-level-badge",innerHTML:k,"aria-label":a+" "+k}},createLevelSpan:function(a,k,e,g){return b.create("span",b.mixin(arcgisonline.sharing.util.getLevelSpanProperties(a,k),g||{}),e)},createLevelSpanAndPlace:function(a,k,e,g,h){return b.create("span",b.mixin(arcgisonline.sharing.util.getLevelSpanProperties(a,
k),g||{}),e,h)},getFullDomain:function(a){a=a.match(/:\/\/([0-9]?\.)?(.[^/:]+)/i);return null!=a&&2<a.length&&"string"===typeof a[2]&&0<a[2].length?a[2]:null},isValidOnlineReturnUrl:function(a){var k=decodeURI(a),e=arcgisonline.sharing.util.parseUrl(window.location.href);a=arcgisonline.sharing.util.parseUrl(k);var g=(k=0===k.indexOf("http://")||0===k.indexOf("https://"))&&a.host?a.host.lastIndexOf(".arcgis.com"):-1,h=k&&a.host?a.host.lastIndexOf(".esri.com"):-1,m=k&&a.host?a.host.lastIndexOf(e.host):
-1;g=-1<g&&g+11-1===a.host.length-1;h=-1<h&&h+9-1===a.host.length-1;e=-1<m&&m+e.host.length-1===a.host.length-1;return k&&a.host&&(g||h||e)?!0:!1},isValidPortalReturnUrl:function(a){var k=decodeURI(a),e=arcgisonline.sharing.util.parseUrl(window.location.href);a=arcgisonline.sharing.util.parseUrl(k);k=0===k.indexOf("http://")||0===k.indexOf("https://");var g=a.host?a.host.lastIndexOf(e.host):-1;e=-1<g&&g+e.host.length-1===a.host.length-1;return k&&a.host&&e?!0:!1},isSameUrl:function(a,k,e){var g=a,
h=k;e&&a&&k&&(g=a.substring(a.indexOf("://")+3),h=k.substring(k.indexOf("://")+3));return g===h},overrideDojoAriaLabel:function(a,k){a&&(b.attr(a,"aria-label",k),a.removeAttribute("aria-labelledby"))},getStepProgressIndicatorProperties:function(a,k){return{"class":"stepProgressBar stepProgressBar--"+k+"-steps",innerHTML:'\x3cdiv class\x3d"stepProgressBar__value" style\x3d"width: '+Math.floor(a/k*100)+'%;"\x3e\x3c/div\x3e',"aria-hidden":"true"}},createStepProgressIndicatorAndPlace:function(a,k,e,g){e=
b.create("div",{"class":"progressBarContainer"},e,g);b.create("div",b.mixin(arcgisonline.sharing.util.getStepProgressIndicatorProperties(a,k)),e,"first");b.place('\x3cspan class\x3d"stepLabel"\x3e'+esri.i18nBundle.common.steppedProgress.step+"  "+a+"  "+esri.i18nBundle.common.steppedProgress.of+" "+k+"\x3c/span\x3e",e,"last");return e},clearProgressBars:function(){b.query(".progressBarContainer").forEach(function(a){b.destroy(a)})},isServiceProxyGeocoder:function(a){var k=(a||"").toLowerCase();a=
-1<k.indexOf("/geocodeserver")&&-1<k.indexOf("/servers/")&&-1<k.indexOf("/rest/services/");var e=arcgisonline.sharing.util.isPortal()&&-1<k.indexOf(esriGeowConfig.self.portalHostname);k=!arcgisonline.sharing.util.isPortal()&&k.indexOf("utility")&&-1<k.indexOf(".arcgis.com");return a&&(e||k)},applyChrome62ButtonRepaintFix:function(a){b.has&&61<b.has("chrome")&&a&&(b.style(a,"display","none"),setTimeout(function(){b.style(a,"display","")},1))},isValidUrl:function(a){return/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(a)},
setFederatedServers:function(a){esriGeowConfig.federatedServers=a},shouldUseProxy:function(a){return(((a||"").split("//")[1]||"").split("/")[0]||"").toLowerCase()!==window.location.host.toLowerCase()}}})},"arcgisonline/sharing/dijit/dialog/GeneralDlg":function(){define("require esri/declare esri/Evented dojo/_base/lang dijit/Dialog dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/query dojo/dom-style dojo/dom-attr dojo/on dojo/i18n!../../../nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u){var n=y("arcgisonline.sharing.dijit.dialog.GeneralDlg",[e,g,h,r],{baseClass:"esriThumbnailDlg",templateString:u,widgetsInTemplate:!0,onCancel:function(){},onHide:function(){},postMixInProperties:function(){this.inherited(arguments);this.i18n=a.mixin({},d.common,d.generalDlg)},postCreate:function(){this.loadConnections()},show:function(t){this.clear();this.setTitle(t.title);this.setMessage(t.message);this.setContent(t.content);this.key=t.key;t.hideTitleBar&&l.set(m(".dijitDialogTitleBar")[0],
"display","none");t.error&&m("#general-dialog-content").addClass("error");this._dialog.show()},showWide:function(t){l.set(this._dialog,"width","700px");this.show(t)},destroy:function(){this.inherited(arguments);n.prototype.statics._instance&&(n.prototype.statics._instance=null)},clear:function(){this.setTitle("");m("#general-dialog-content").attr("innerHTML","");m("#general-dialog-content").removeClass("error")},loadConnections:function(){m(".jevent").on("click",function(x){x.preventDefault()});m("#general-dialog .dijitDialogTitleBar .dijitDialogCloseIcon").forEach(a.hitch(this,
function(x){f.set(x,"title",this.i18n.close)}));var t=this._dialog;this.own(c(t,"cancel",a.hitch(this,function(x){x&&x instanceof Event&&x.preventDefault();this.onCancel()})),c(t,"hide",a.hitch(this,function(x){x&&x instanceof Event&&x.preventDefault();this.onHide()})))},setTitle:function(t){t&&this._dialog.set("title",t)},setMessage:function(t){t&&m("#general-dialog-content").attr("innerHTML","\x3cp style\x3d'word-wrap:break-word;'\x3e"+t+"\x3c/p\x3e")},setContent:function(t){t&&m("#general-dialog-content").attr("innerHTML",
t)},hideTitle:function(){this._dialog.titleNode.classList.add("hide")},setButtonLabel:function(t){this._okBtn.setLabel(t)},hide:function(){this._dialog.hide()},onOkClick:function(t){this._dialog.hide()}});n.prototype.statics={getInstance:function(){this._instance||(this._instance=new n);return this._instance}};return n})},"esri/declare":function(){define(["dojo/_base/declare","dojo/_base/lang","./extend"],function(b,y,r){return function(a,k,e){var g=y.isString(a);g?e.declaredClass=a:(e=k,k=a);k=b(k,
e);g&&r(a,k);return k}})},"esri/extend":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(b,y,r){return function(a,k){a=a.substring(a.indexOf(".")+1);b.setObject(a,k,r)}})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(b,y,r,a,k,e){b=b([a],{declaredClass:"esri.Evented",registerConnectEvents:function(){var g=this.constructor,h=this.constructor._meta.parents,m=[{}],l={},f,c=function(u,n){y.isArray(u)||
(u=[u]);for(var t=0;t<u.length;t++){var x=u[t];x._meta&&x._meta.parents&&c(x._meta.parents,n);x.prototype._eventMap&&n.push(y.mixin({},x.prototype._eventMap))}return n};if(!g._onMap){c(h,m);m.push(this._eventMap);h=y.mixin.apply(this,m);for(d in this)/^on\w/.test(d)&&y.isFunction(this[d])&&(m=this._hyphenLower(d).toLowerCase(),h[m]||(l[m]={method:d}));for(f in h){var d=this._onCamelCase(f);l[f]={method:d,argKeys:h[f]}}g._onMap=l;return g._onMap}},on:function(g,h){if(-1<g.indexOf(",")){for(var m=g.split(/\s*,\s*/),
l=m.length,f=[];l--;)f.push(this.on(m[l],h));f.remove=function(){for(var u=0;u<f.length;u++)f[u].remove()};return f}m=this.constructor._onMap||this.registerConnectEvents();l="string"==typeof g&&g.toLowerCase();var c=this._onCamelCase(l),d=m&&m[l];return(c=d&&d.method||this[c]&&y.isFunction(this[c])&&c)?d&&y.isArray(d.argKeys)?(m=this._onArr2Obj(h,m[l].argKeys),r.after(this,c,m,!0)):r.after(this,c,function(u){u=u||{};u.target||(u.target=this);h.call(this,u)},!0):this.inherited(arguments)},emit:function(g,
h){var m,l,f=g.toLowerCase();var c=this._onCamelCase(g);var d=this.constructor._onMap||this.registerConnectEvents();c=(l=d&&d[f]&&d[f].method||y.isFunction(this[c])&&c)&&this[l];l&&d&&d[f]&&this._onObj2Arr(function(){m=Array.prototype.slice.call(arguments)},d[f].argKeys)(h);h=h||{};h.target||(h.target=this);if(c){var u=m&&m.length?m:[h];u=c.apply(this,u)}this.inherited(arguments,[g,h]);return u},_onObj2Arr:function(g,h){if(h){var m=this;return function(l){var f,c=[],d=h.length;for(f=0;f<d;f++)c[f]=
l[h[f]];g.apply(m,c)}}return g},_onArr2Obj:function(g,h){if(h){var m=this;return function(){var l,f={},c=arguments.length;for(l=0;l<c;l++)f[h[l]]=arguments[l];f.target||(f.target=m);g.call(m,f)}}return g},_hyphenLower:function(g){return g.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(h,m){return(m?"-":"")+h.toLowerCase()})},_onCamelCase:function(g){return"on"+g.substr(0,1).toUpperCase()+g.substr(1).replace(/\-([a-z])/g,function(h,m){return m.toUpperCase()})}});return e.Evented=b})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v,z,C,E,G,H,K,I){function J(){}var Q=new k;Q.resolve(!0);D=a("dijit._DialogBase"+(t("dojo-bidi")?"_NoBidi":""),[v,C,E,z],{templateString:I,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:D.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(L){this._set("draggable",L)},maxRatio:.9,
closable:!0,_setClosableAttr:function(L){this.closeButtonNode.style.display=L?"":"none";this._set("closable",L)},postMixInProperties:function(){var L=f.getLocalization("dijit","common");d.mixin(this,L);this.inherited(arguments)},postCreate:function(){m.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);r.after(this,"onExecute",d.hitch(this,"hide"),!0);r.after(this,"onCancel",d.hitch(this,"hide"),!0);u(this.closeButtonNode,
x.press,function(L){L.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&O.isTop(this)&&(this._getFocusItems(),w.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();w.focus(this._firstFocusItem)},_endDrag:function(){var L=h.position(this.domNode),Y=A.getBox(this.ownerDocument);L.y=Math.min(Math.max(L.y,0),Y.h-L.h);L.x=Math.min(Math.max(L.x,0),Y.w-L.w);this._relativePosition=L;this._position()},_setup:function(){var L=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==t("ie")?F:B)(L,{handle:this.titleBar}),r.after(this._moveable,"onMoveStop",d.hitch(this,"_endDrag"),!0)):g.add(L,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":y.map(this["class"].split(/\s/),function(Y){return Y+"_underlay"}).join(" "),_onKeyDown:d.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!g.contains(this.ownerDocumentBody,"dojoMove")){var L=
this.domNode,Y=A.getBox(this.ownerDocument),ca=this._relativePosition,U=h.position(L);m.set(L,{left:Math.floor(Y.l+(ca?Math.min(ca.x,Y.w-U.w):(Y.w-U.w)/2))+"px",top:Math.floor(Y.t+(ca?Math.min(ca.y,Y.h-U.h):(Y.h-U.h)/2))+"px"})}},_onKey:function(L){if(L.keyCode==c.TAB){this._getFocusItems();var Y=L.target;this._firstFocusItem==this._lastFocusItem?(L.stopPropagation(),L.preventDefault()):Y==this._firstFocusItem&&L.shiftKey?(w.focus(this._lastFocusItem),L.stopPropagation(),L.preventDefault()):Y!=this._lastFocusItem||
L.shiftKey||(w.focus(this._firstFocusItem),L.stopPropagation(),L.preventDefault())}else this.closable&&L.keyCode==c.ESCAPE&&(this.onCancel(),L.stopPropagation(),L.preventDefault())},show:function(){if(this.open)return Q.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),O.hide(this));var L=A.get(this.ownerDocument);this._modalconnects.push(u(L,"scroll",d.hitch(this,"resize",null)));this._modalconnects.push(u(this.domNode,
"keydown",d.hitch(this,"_onKey")));m.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new k(d.hitch(this,function(){Y.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,J);L=this._fadeInDeferred.promise;var Y=l.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:d.hitch(this,function(){O.show(this,this.underlayAttrs)}),onEnd:d.hitch(this,function(){this.autofocus&&O.isTop(this)&&(this._getFocusItems(),
w.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return L},hide:function(){if(!this._alreadyInitialized||!this.open)return Q.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new k(d.hitch(this,function(){Y.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,J);this._fadeOutDeferred.then(d.hitch(this,"onHide"));var L=this._fadeOutDeferred.promise;var Y=l.fadeOut({node:this.domNode,duration:this.duration,
onEnd:d.hitch(this,function(){this.domNode.style.display="none";O.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var ca;ca=this._modalconnects.pop();)ca.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return L},resize:function(L){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!L){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),y.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(X){X&&m.set(X,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var Y=A.getBox(this.ownerDocument);Y.w*=this.maxRatio;Y.h*=this.maxRatio;var ca=h.position(this.domNode);this._shrunk=!1;ca.w>=Y.w&&(L={w:Y.w},h.setMarginBox(this.domNode,L),ca=h.position(this.domNode),
this._shrunk=!0);ca.h>=Y.h&&(L||(L={w:ca.w}),L.h=Y.h,this._shrunk=!0);L&&(L.w||(L.w=ca.w),L.h||(L.h=ca.h))}if(L){h.setMarginBox(this.domNode,L);Y=[];this.titleBar&&Y.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&Y.push({domNode:this.actionBarNode,region:"bottom"});ca={domNode:this.containerNode,region:"center"};Y.push(ca);var U=K.marginBox2contentBox(this.domNode,L);K.layoutChildren(this.domNode,U,Y);this._singleChild?(Y=K.marginBox2contentBox(this.containerNode,ca),this._singleChild.resize({w:Y.w,
h:Y.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();t("touch")||L||this._position()}},_layoutChildren:function(){y.forEach(this.getChildren(),function(L){L.resize&&L.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var L;L=this._modalconnects.pop();)L.remove();O.hide(this);this.inherited(arguments)}});t("dojo-bidi")&&
(D=a("dijit._DialogBase",D,{_setTitleAttr:function(L){this._set("title",L);this.titleNode.innerHTML=L;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(L){this._created&&this.textDir!=L&&(this._set("textDir",L),this.set("title",this.title))}}));var V=a("dijit.Dialog",[H,D],{});V._DialogBase=D;var O=V._DialogLevelManager={_beginZIndex:950,show:function(L,Y){S[S.length-1].focus=w.curNode;var ca=S[S.length-1].dialog?S[S.length-1].zIndex+2:V._DialogLevelManager._beginZIndex;m.set(L.domNode,
"zIndex",ca);G.show(Y,ca-1);S.push({dialog:L,underlayAttrs:Y,zIndex:ca})},hide:function(L){if(S[S.length-1].dialog==L){S.pop();var Y=S[S.length-1];1==S.length?G.hide():G.show(Y.underlayAttrs,Y.zIndex-1);if(L.refocus&&(L=Y.focus,!Y.dialog||L&&e.isDescendant(L,Y.dialog.domNode)||(Y.dialog._getFocusItems(),L=Y.dialog._firstFocusItem),L))try{L.focus()}catch(ca){}}else Y=y.indexOf(y.map(S,function(ca){return ca.dialog}),L),-1!=Y&&S.splice(Y,1)},isTop:function(L){return S[S.length-1].dialog==L}},S=V._dialogStack=
[{dialog:null,focus:null,underlayAttrs:null}];w.watch("curNode",function(L,Y,ca){L=S[S.length-1].dialog;if(ca&&L&&!L._fadeOutDeferred&&ca.ownerDocument==L.ownerDocument){do if(ca==L.domNode||g.contains(ca,"dijitPopup"))return;while(ca=ca.parentNode);L.focus()}});t("dijit-legacy-requires")&&n(0,function(){b(["dijit/TooltipDialog"])});return V})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(b,y){var r=y.prototype.onMove;return b("dojo.dnd.TimedMoveable",y,{timeout:40,
constructor:function(a,k){k||(k={});k.timeout&&"number"==typeof k.timeout&&0<=k.timeout&&(this.timeout=k.timeout)},onMoveStop:function(a){a._timer&&(clearTimeout(a._timer),r.call(this,a,a._leftTop));y.prototype.onMoveStop.apply(this,arguments)},onMove:function(a,k){a._leftTop=k;if(!a._timer){var e=this;a._timer=setTimeout(function(){a._timer=null;r.call(e,a,a._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(b,y,r,a,k,e){return y("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(g){var h=[];b.forEach(g||this.getChildren(),function(m){"value"in m?h.push(m):h=h.concat(this._getDescendantFormWidgets(m.getChildren()))},this);return h},reset:function(){b.forEach(this._getDescendantFormWidgets(),function(g){g.reset&&g.reset()})},validate:function(){var g=!1;return b.every(b.map(this._getDescendantFormWidgets(),function(h){h._hasBeenBlurred=!0;var m=h.disabled||!h.validate||
h.validate();m||g||(e.scrollIntoView(h.containerNode||h.domNode),h.focus(),g=!0);return m}),function(h){return h})},setValues:function(g){r.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",g)},_setValueAttr:function(g){var h={};b.forEach(this._getDescendantFormWidgets(),function(c){c.name&&(h[c.name]||(h[c.name]=[])).push(c)});for(var m in h)if(h.hasOwnProperty(m)){var l=h[m],f=a.getObject(m,!1,g);void 0!==f&&(f=[].concat(f),
"boolean"==typeof l[0].checked?b.forEach(l,function(c){c.set("value",-1!=b.indexOf(f,c._get("value")))}):l[0].multiple?l[0].set("value",f):b.forEach(l,function(c,d){c.set("value",f[d])}))}},getValues:function(){r.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var g={};b.forEach(this._getDescendantFormWidgets(),function(h){var m=h.name;if(m&&!h.disabled){var l=h.get("value");"boolean"==typeof h.checked?
/Radio/.test(h.declaredClass)?!1!==l?a.setObject(m,l,g):(l=a.getObject(m,!1,g),void 0===l&&a.setObject(m,null,g)):(h=a.getObject(m,!1,g),h||(h=[],a.setObject(m,h,g)),!1!==l&&h.push(l)):(h=a.getObject(m,!1,g),"undefined"!=typeof h?a.isArray(h)?h.push(l):a.setObject(m,[h,l],g):a.setObject(m,l,g))}});return g},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var g=b.map(this._descendants,function(h){return h.get("state")||""});return 0<=b.indexOf(g,"Error")?
"Error":0<=b.indexOf(g,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(g){this._descendants=this._getDescendantFormWidgets();b.forEach(this._descendants,function(h){h._started||h.startup()});g||this._onChildChange()},_onChildChange:function(g){g&&"state"!=g&&"disabled"!=g||this._set("state",this._getState());g&&"value"!=g&&"disabled"!=g&&"checked"!=g||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var g=this;this.own(k(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(h){h.target!=g.domNode&&g._onChildChange(h.type.replace("attrmodified-",""))}));this.watch("state",function(h,m,l){this.onValidStateChange(""==l)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(b,y){return b("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var r=y._getTabNavigable(this.domNode);this._firstFocusItem=r.lowest||r.first||this.closeButtonNode||this.domNode;this._lastFocusItem=r.last||r.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c){var d=b("dijit.DialogUnderlay",[h,m],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(u){a.set(this.node,"id",u+"_underlay");this._set("dialogId",u)},_setClassAttr:function(u){this.node.className="dijitDialogUnderlay "+u;this._set("class",u)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(e(this.domNode,"keydown",y.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var u=this.node.style,n=this.domNode.style;n.display="none";var t=g.getBox(this.ownerDocument);n.top=t.t+"px";n.left=t.l+"px";u.width=t.w+"px";u.height=t.h+"px";n.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new l(this.domNode);var u=g.get(this.ownerDocument);this._modalConnects=[f.on("resize",y.hitch(this,"layout")),e(u,"scroll",
y.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});d.show=function(u,n){var t=d._singleton;!t||t._destroyed?t=c._underlay=d._singleton=new d(u):u&&t.set(u);k.set(t.domNode,"zIndex",n);t.open||t.show()};d.hide=function(){var u=
d._singleton;u&&!u._destroyed&&u.hide()};return d})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t){return m("dijit.layout.ContentPane",[r,a,k],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:b._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(x,
A,B){var F=new B(x,A);return!F.href&&F._contentSetter&&F._contentSetter.parseDeferred&&!F._contentSetter.parseDeferred.isFulfilled()?F._contentSetter.parseDeferred.then(function(){return F}):F},create:function(x,A){if(!(x&&x.template||!A||"href"in x||"content"in x)){A=f.byId(A);for(var B=A.ownerDocument.createDocumentFragment();A.firstChild;)B.appendChild(A.firstChild);x=y.delegate(x,{content:B})}this.inherited(arguments,[x,A])},postMixInProperties:function(){this.inherited(arguments);var x=n.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=e.substitute(this.loadingMessage,x);this.errorMessage=e.substitute(this.errorMessage,x)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&h.forEach(this._contentSetter.parseResults,function(x){x._started||x._destroyed||!y.isFunction(x.startup)||(x.startup(),x._started=!0)},this)},_startChildren:function(){h.forEach(this.getChildren(),
function(x){x._started||x._destroyed||!y.isFunction(x.startup)||(x.startup(),x._started=!0)});this._contentSetter&&h.forEach(this._contentSetter.parseResults,function(x){x._started||x._destroyed||!y.isFunction(x.startup)||(x.startup(),x._started=!0)},this)},setHref:function(x){b.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",x)},_setHrefAttr:function(x){this.cancel();this.onLoadDeferred=new l(y.hitch(this,"cancel"));this.onLoadDeferred.then(y.hitch(this,
"onLoad"));this._set("href",x);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(x){b.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",x)},_setContentAttr:function(x){this._set("href","");this.cancel();this.onLoadDeferred=new l(y.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(y.hitch(this,"onLoad"));this._setContent(x||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(x){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new l(y.hitch(this,"cancel"));this.onLoadDeferred.then(y.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var x=this,A={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};y.isObject(this.ioArgs)&&y.mixin(A,this.ioArgs);var B=this._xhrDfd=(this.ioMethod||u.get)(A),F;B.then(function(w){F=w;try{return x._isDownloaded=!0,x._setContent(w,!1)}catch(D){x._onError("Content",
D)}},function(w){B.canceled||x._onError("Download",w);delete x._xhrDfd;return w}).then(function(){x.onDownloadEnd();delete x._xhrDfd;return F});delete this._hrefChanged},_onLoadHandler:function(x){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(x)}catch(A){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(x){}},destroyDescendants:function(x){this.isLoaded&&this._onUnloadHandler();var A=this._contentSetter;h.forEach(this.getChildren(),function(B){B.destroyRecursive?
B.destroyRecursive(x):B.destroy&&B.destroy(x);B._destroyed=!0});A&&(h.forEach(A.parseResults,function(B){B._destroyed||(B.destroyRecursive?B.destroyRecursive(x):B.destroy&&B.destroy(x),B._destroyed=!0)}),delete A.parseResults);x||d.empty(this.containerNode);delete this._singleChild},_setContent:function(x,A){x=this.preprocessContent(x);this.destroyDescendants();var B=this._contentSetter;B&&B instanceof g._ContentSetter||(B=this._contentSetter=new g._ContentSetter({node:this.containerNode,_onError:y.hitch(this,
this._onError),onContentError:y.hitch(this,function(D){D=this.onContentError(D);try{this.containerNode.innerHTML=D}catch(q){}})}));var F=y.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!x.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});F=B.set(y.isObject(x)&&x.domNode?x.domNode:x,F);var w=this;return t(F&&F.then?F:B.parseDeferred,function(){delete w._contentSetterParams;
A||(w._started&&(w._startChildren(),w._scheduleLayout()),w._onLoadHandler(x))})},preprocessContent:function(x){return x},_onError:function(x,A,B){this.onLoadDeferred.reject(A);x=this["on"+x+"Error"].call(this,A);B||x&&this._setContent(x,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(b,y,r,a,k,e,g,h,m,l){return y("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var f=this.getParent();this._childOfLayoutWidget=f&&f.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(m.on("resize",e.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var f=[],c=!1;g("\x3e *",this.containerNode).some(function(d){var u=
h.byNode(d);u&&u.resize?f.push(u):!/script|link|style/i.test(d.nodeName)&&d.offsetHeight&&(c=!0)});this._singleChild=1!=f.length||c?null:f[0];r.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(f,c){this._resizeCalled=!0;this._scheduleLayout(f,c)},_scheduleLayout:function(f,c){this._isShown()?this._layout(f,c):(this._needLayout=!0,this._changeSize=f,this._resultSize=c)},_layout:function(f,c){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
f&&a.setMarginBox(this.domNode,f);var d=this.containerNode;d===this.domNode?(c=c||{},e.mixin(c,f||{}),"h"in c&&"w"in c||(c=e.mixin(a.getMarginBox(d),c)),this._contentBox=l.marginBox2contentBox(d,c)):this._contentBox=a.getContentBox(d);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var f=this._contentBox||a.getContentBox(this.containerNode);this._singleChild.resize({w:f.w,h:f.h})}else{f=this.getChildren();for(var c,d=0;c=
f[d++];)c.resize&&c.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var f=this.domNode,c=this.domNode.parentNode;return"none"!=f.style.display&&"hidden"!=f.style.visibility&&!r.contains(f,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(b,y,r,a,k){function e(m){return m.substring(0,1).toUpperCase()+m.substring(1)}function g(m,l){var f=m.resize?m.resize(l):r.setMarginBox(m.domNode,l);f?k.mixin(m,f):(k.mixin(m,r.getMarginBox(m.domNode)),k.mixin(m,l))}var h={marginBox2contentBox:function(m,l){var f=a.getComputedStyle(m),c=r.getMarginExtents(m,f),d=r.getPadBorderExtents(m,f);return{l:a.toPixelValue(m,f.paddingLeft),t:a.toPixelValue(m,f.paddingTop),w:l.w-
(c.w+d.w),h:l.h-(c.h+d.h)}},layoutChildren:function(m,l,f,c,d){l=k.mixin({},l);y.add(m,"dijitLayoutContainer");f=b.filter(f,function(u){return"center"!=u.region&&"client"!=u.layoutAlign}).concat(b.filter(f,function(u){return"center"==u.region||"client"==u.layoutAlign}));b.forEach(f,function(u){var n=u.domNode,t=u.region||u.layoutAlign;if(!t)throw Error("No region setting for "+u.id);var x=n.style;x.left=l.l+"px";x.top=l.t+"px";x.position="absolute";y.add(n,"dijitAlign"+e(t));n={};c&&c==u.id&&(n["top"==
u.region||"bottom"==u.region?"h":"w"]=d);"leading"==t&&(t=u.isLeftToRight()?"left":"right");"trailing"==t&&(t=u.isLeftToRight()?"right":"left");"top"==t||"bottom"==t?(n.w=l.w,g(u,n),l.h-=u.h,"top"==t?l.t+=u.h:x.top=l.t+l.h+"px"):"left"==t||"right"==t?(n.h=l.h,g(u,n),l.w-=u.w,"left"==t?l.l+=u.w:x.left=l.l+l.w+"px"):"client"!=t&&"center"!=t||g(u,l)})}};k.setObject("dijit.layout.utils",h);return h})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(b,y,r,a,k,e,g){var h=0,m={_secureForInnerHtml:function(l){return l.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:e.empty,_setNodeContent:function(l,f){e.empty(l);if(f)if("number"==typeof f&&(f=f.toString()),"string"==typeof f&&(f=e.toDom(f,l.ownerDocument)),!f.nodeType&&y.isArrayLike(f))for(var c=f.length,d=0;d<f.length;d=c==f.length?d+1:0)e.place(f[d],l,"last");else e.place(f,l,"last");return l},_ContentSetter:a("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:b._scopeName,startup:!0,constructor:function(l,f){y.mixin(this,l||{});f=this.node=k.byId(this.node||f);this.id||(this.id=["Setter",f?f.id||f.tagName:"",h++].join("_"))},set:function(l,f){void 0!==l&&(this.content=l);"number"==typeof l&&(l=l.toString());f&&this._mixin(f);this.onBegin();this.setContent();return(l=this.onEnd())&&l.then?l:this.node},setContent:function(){var l=this.node;if(!l)throw Error(this.declaredClass+
": setContent given no node");try{l=m._setNodeContent(l,this.content)}catch(c){var f=this.onContentError(c);try{l.innerHTML=f}catch(d){}}this.node=l},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(r.forEach(this.parseResults,function(l){l.destroy&&l.destroy()}),delete this.parseResults);e.empty(this.node)},onBegin:function(){var l=this.content;if(y.isString(l)&&(this.cleanContent&&
(l=m._secureForInnerHtml(l)),this.extractContent)){var f=l.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);f&&(l=f[1])}this.empty();this.content=l;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(l){return"Error occurred setting content: "+l},onExecError:function(l){return"Error occurred executing scripts: "+l},_mixin:function(l){var f=
{},c;for(c in l)c in f||(this[c]=l[c])},_parse:function(){var l=this.node;try{var f={};r.forEach(["dir","lang","textDir"],function(d){this[d]&&(f[d]=this[d])},this);var c=this;this.parseDeferred=g.parse({rootNode:l,noStart:!this.startup,inherited:f,scope:this.parserScope}).then(function(d){return c.parseResults=d},function(d){c._onError("Content",d,"Error parsing in _ContentSetter#"+c.id)})}catch(d){this._onError("Content",d,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(l,f,c){l=
this["on"+l+"Error"].call(this,f);c||l&&m._setNodeContent(this.node,l,!0)}}),set:function(l,f,c){void 0==f&&(f="");"number"==typeof f&&(f=f.toString());return c?(new m._ContentSetter(y.mixin(c,{content:f,node:l}))).set():m._setNodeContent(l,f,!0)}};y.setObject("dojo.html",m);return m})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t){function x(D){return eval("("+D+")")}function A(D){var q=D._nameCaseMap,v=D.prototype;if(!q||q._extendCnt<F){q=D._nameCaseMap={};for(var z in v)"_"!==z.charAt(0)&&(q[z.toLowerCase()]=z);q._extendCnt=F}return q}function B(D,q){q||(q=b);var v=q._dojoParserCtorMap||(q._dojoParserCtorMap={}),z=D.join();if(!v[z]){for(var C=[],E=0,G=D.length;E<G;E++){var H=D[E];C[C.length]=v[H]=v[H]||r.getObject(H)||~H.indexOf("/")&&q(H)}D=C.shift();v[z]=C.length?D.createSubclass?
D.createSubclass(C):D.extend.apply(D,C):D}return v[z]}new Date("X");var F=0;m.after(r,"extend",function(){F++},!0);var w={_clearCache:function(){F++;_ctorMap={}},_functionFromScript:function(D,q){var v="",z="",C=D.getAttribute(q+"args")||D.getAttribute("args");q=D.getAttribute("with");C=(C||"").split(/\s*,\s*/);q&&q.length&&a.forEach(q.split(/\s*,\s*/),function(E){v+="with("+E+"){";z+="}"});return new Function(C,v+D.innerHTML+z)},instantiate:function(D,q,v){q=q||{};v=v||{};var z=(v.scope||y._scopeName)+
"Type",C="data-"+(v.scope||y._scopeName)+"-",E=C+"type",G=C+"mixins",H=[];a.forEach(D,function(K){var I=z in q?q[z]:K.getAttribute(E)||K.getAttribute(z);if(I){var J=K.getAttribute(G);I=J?[I].concat(J.split(/\s*,\s*/)):[I];H.push({node:K,types:I})}});return this._instantiate(H,q,v)},_instantiate:function(D,q,v,z){function C(E){q._started||v.noStart||a.forEach(E,function(G){"function"!==typeof G.startup||G._started||G.startup()});return E}D=a.map(D,function(E){var G=E.ctor||B(E.types,v.contextRequire);
if(!G)throw Error("Unable to resolve constructor for: '"+E.types.join()+"'");return this.construct(G,E.node,q,v,E.scripts,E.inherited)},this);return z?l(D).then(C):C(D)},construct:function(D,q,v,z,C,E){function G(aa){S&&r.setObject(S,aa);for(V=0;V<U.length;V++)m[U[V].advice||"after"](aa,U[V].method,r.hitch(aa,U[V].func),!0);for(V=0;V<X.length;V++)X[V].call(aa);for(V=0;V<Z.length;V++)aa.watch(Z[V].prop,Z[V].func);for(V=0;V<N.length;V++)n(aa,N[V].event,N[V].func);return aa}var H=D&&D.prototype;z=z||
{};var K={};z.defaults&&r.mixin(K,z.defaults);E&&r.mixin(K,E);if(d("dom-attributes-explicit"))var I=q.attributes;else d("dom-attributes-specified-flag")?I=a.filter(q.attributes,function(aa){return aa.specified}):(E=(/^input$|^img$/i.test(q.nodeName)?q:q.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),I=a.map(E.split(/\s+/),function(aa){var ka=aa.toLowerCase();return{name:aa,value:"LI"==q.nodeName&&"value"==aa||"enctype"==
ka?q.getAttribute(ka):q.getAttributeNode(ka).value}}));var J=z.scope||y._scopeName;E="data-"+J+"-";var Q={};"dojo"!==J&&(Q[E+"props"]="data-dojo-props",Q[E+"type"]="data-dojo-type",Q[E+"mixins"]="data-dojo-mixins",Q[J+"type"]="dojotype",Q[E+"id"]="data-dojo-id");var V=0,O;J=[];for(var S,L;O=I[V++];){var Y=O.name,ca=Y.toLowerCase();O=O.value;switch(Q[ca]||ca){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":L=O;break;case "data-dojo-id":case "jsid":S=O;break;
case "data-dojo-attach-point":case "dojoattachpoint":K.dojoAttachPoint=O;break;case "data-dojo-attach-event":case "dojoattachevent":K.dojoAttachEvent=O;break;case "class":K["class"]=q.className;break;case "style":K.style=q.style&&q.style.cssText;break;default:if(Y in H||(Y=A(D)[ca]||Y),Y in H)switch(typeof H[Y]){case "string":K[Y]=O;break;case "number":K[Y]=O.length?Number(O):NaN;break;case "boolean":K[Y]="false"!=O.toLowerCase();break;case "function":""===O||-1!=O.search(/[^\w\.]+/i)?K[Y]=new Function(O):
K[Y]=r.getObject(O,!1)||new Function(O);J.push(Y);break;default:ca=H[Y],K[Y]=ca&&"length"in ca?O?O.split(/\s*,\s*/):[]:ca instanceof Date?""==O?new Date(""):"now"==O?new Date:f.fromISOString(O):ca instanceof h?y.baseUrl+O:x(O)}else K[Y]=O}}for(I=0;I<J.length;I++)Q=J[I].toLowerCase(),q.removeAttribute(Q),q[Q]=null;if(L)try{L=x.call(z.propsThis,"{"+L+"}"),r.mixin(K,L)}catch(aa){throw Error(aa.toString()+" in data-dojo-props\x3d'"+L+"'");}r.mixin(K,v);C||(C=D&&(D._noScript||H._noScript)?[]:u("\x3e script[type^\x3d'dojo/']",
q));var U=[],X=[],Z=[],N=[];if(C)for(V=0;V<C.length;V++)Q=C[V],q.removeChild(Q),v=Q.getAttribute(E+"event")||Q.getAttribute("event"),z=Q.getAttribute(E+"prop"),L=Q.getAttribute(E+"method"),J=Q.getAttribute(E+"advice"),I=Q.getAttribute("type"),Q=this._functionFromScript(Q,E),v?"dojo/connect"==I?U.push({method:v,func:Q}):"dojo/on"==I?N.push({event:v,func:Q}):K[v]=Q:"dojo/aspect"==I?U.push({method:L,advice:J,func:Q}):"dojo/watch"==I?Z.push({prop:z,func:Q}):X.push(Q);D=(C=D.markupFactory||H.markupFactory)?
C(K,q,D):new D(K,q);return D.then?D.then(G):G(D)},scan:function(D,q){function v(ca){if(!ca.inherited){ca.inherited={};var U=ca.node,X=v(ca.parent);U={dir:U.getAttribute("dir")||X.dir,lang:U.getAttribute("lang")||X.lang,textDir:U.getAttribute(I)||X.textDir};for(var Z in U)U[Z]&&(ca.inherited[Z]=U[Z])}return ca.inherited}var z=[],C=[],E={},G=(q.scope||y._scopeName)+"Type",H="data-"+(q.scope||y._scopeName)+"-",K=H+"type",I=H+"textdir";H+="mixins";var J=D.firstChild,Q=q.inherited;if(!Q){Q=function Z(U,
X){return U.getAttribute&&U.getAttribute(X)||U.parentNode&&Z(U.parentNode,X)};Q={dir:Q(D,"dir"),lang:Q(D,"lang"),textDir:Q(D,I)};for(var V in Q)Q[V]||delete Q[V]}V={inherited:Q};for(var O,S;;)if(J)if(1!=J.nodeType)J=J.nextSibling;else if(O&&"script"==J.nodeName.toLowerCase())(Q=J.getAttribute("type"))&&/^dojo\/\w/i.test(Q)&&O.push(J),J=J.nextSibling;else if(S)J=J.nextSibling;else if(Q=J.getAttribute(K)||J.getAttribute(G),D=J.firstChild,Q||D&&(3!=D.nodeType||D.nextSibling)){S=null;if(Q){var L=J.getAttribute(H);
O=L?[Q].concat(L.split(/\s*,\s*/)):[Q];try{S=B(O,q.contextRequire)}catch(ca){}S||a.forEach(O,function(ca){~ca.indexOf("/")&&!E[ca]&&(E[ca]=!0,C[C.length]=ca)});L=S&&!S.prototype._noScript?[]:null;V={types:O,ctor:S,parent:V,node:J,scripts:L};V.inherited=v(V);z.push(V)}else V={node:J,scripts:O,parent:V};O=L;S=J.stopParser||S&&S.prototype.stopParser&&!q.template;J=D}else J=J.nextSibling;else{if(!V||!V.node)break;J=V.node.nextSibling;S=!1;V=V.parent;O=V.scripts}var Y=new c;C.length?(q.contextRequire||
b)(C,function(){Y.resolve(a.filter(z,function(ca){if(!ca.ctor)try{ca.ctor=B(ca.types,q.contextRequire)}catch(Z){}for(var U=ca.parent;U&&!U.types;)U=U.parent;var X=ca.ctor&&ca.ctor.prototype;ca.instantiateChildren=!(X&&X.stopParser&&!q.template);ca.instantiate=!U||U.instantiate&&U.instantiateChildren;return ca.instantiate}))}):Y.resolve(z);return Y.promise},_require:function(D,q){D=x("{"+D.innerHTML+"}");var v=[],z=[],C=new c;q=q&&q.contextRequire||b;for(var E in D)v.push(E),z.push(D[E]);q(z,function(){for(var G=
0;G<v.length;G++)r.setObject(v[G],arguments[G]);C.resolve(arguments)});return C.promise},_scanAmd:function(D,q){var v=new c,z=v.promise;v.resolve(!0);var C=this;u("script[type\x3d'dojo/require']",D).forEach(function(E){z=z.then(function(){return C._require(E,q)});E.parentNode.removeChild(E)});return z},parse:function(D,q){!D||"string"==typeof D||"nodeType"in D||(q=D,D=q.rootNode);var v=D?e.byId(D):g.body();q=q||{};var z=q.template?{template:!0}:{},C=[],E=this;D=this._scanAmd(v,q).then(function(){return E.scan(v,
q)}).then(function(G){return E._instantiate(G,z,q,!0)}).then(function(G){return C=C.concat(G)}).otherwise(function(G){throw G;});r.mixin(C,D);return C}};y.parser=w;k.parseOnLoad&&t(100,w,"parse");return w})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(b,y,r,a){var k=b.some;return function(e){var g,h;y.isArray(e)?h=e:e&&"object"===typeof e&&(g=e);var m=[];if(g){h=[];for(var l in g)Object.hasOwnProperty.call(g,l)&&(m.push(l),h.push(g[l]));
var f={}}else h&&(f=[]);if(!h||!h.length)return(new r).resolve(f);var c=new r;c.promise.always(function(){f=m=null});var d=h.length;k(h,function(u,n){g||m.push(n);a(u,function(t){c.isFulfilled()||(f[m[n]]=t,0===--d&&c.resolve(f))},c.reject);return c.isFulfilled()});return c.promise}})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(b,y,r,a,k){return r("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,
contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var e=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);k.parse(e,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(a.hitch(this,function(g){this._startupWidgets=g;for(var h=0;h<g.length;h++)this._processTemplateNode(g[h],
function(m,l){return m[l]},function(m,l,f){return l in m?m.connect(m,l,f):m.on(l,f,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(e,g,h){return g(e,"dojoType")||g(e,"data-dojo-type")?
!0:this.inherited(arguments)},startup:function(){b.forEach(this._startupWidgets,function(e){e&&!e._started&&e.startup&&e.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,dijit/_Widget,dijit/_Templated,dijit/form/Button,dojo/cookie"],function(b,y,r){b.provide("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");b.require("dijit.Dialog");b.require("dijit._Widget");
b.require("dijit._Templated");b.require("dijit.form.Button");b.require("dojo.cookie");b.declare("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg",[y._Widget,y._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent" \x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" id\x3d"subscription-status-dialog" dojoAttachPoint\x3d"subscriptionStatusDlg" title\x3d"" execute\x3d""\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"subscriptionStateDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"actionNeededDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing"\x3e\x3cbutton dojoAttachPoint\x3d"closeButton" dojoAttachEvent\x3d"onClick:onOkClick" class\x3d"jevent primary" dojoType\x3d"dijit.form.Button"\x3e${i18n.ok}\x3c/button\x3e\x3c/div\x3e\r\n    \x3cbr style\x3d"clear:both;"/\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg);return this._instance}},subscriptionStatusDlg:null,subscriptionStateDiv:null,actionNeededDiv:null,closeButton:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").subscriptionStatusDlg)},postCreate:function(){this.loadConnections()},
show:function(a){this.clear();this.setSubscriptionState(a);this.setActionMessage(a);this.subscriptionStatusDlg.show()},showOther:function(a){this.clear();this.setOtherSubscriptionStatus(a);b.style(this.actionNeededDiv,"display","none");this.subscriptionStatusDlg.show()},setSubscriptionState:function(a){if(a&&a.state){var k=this.i18n.subscriptionStatusExpiredMsg;a=a.state.toLowerCase();"expired"===a?k=this.i18n.subscriptionStatusExpiredMsg:"cancelled"===a?k=this.i18n.subscriptionStatusCancelledMsg:
"suspended"===a?k=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://doc.arcgis.com/en/arcgis-online/administer/view-status.htm' target\x3d'_blank'\x3e",linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.subscriptionStatusSuspendedMsg):"restricted"===a&&(k=this.i18n.subscriptionStatusRestrictedMsgNoLink);b.attr(this.subscriptionStateDiv,"innerHTML",k)}},setOtherSubscriptionStatus:function(a){this.subscriptionStatusDlg.set("title",this.i18n.errorTitle);var k=this.i18n.expiredStatus;
a&&("SB_0005"===a?k=this.i18n.suspendedStatus:"SB_0006"===a?k=this.i18n.cancelledStatus:"SB_0007"===a&&(k=this.i18n.expiredStatus));a=esri.substitute({subscriptionState:k},this.i18n.otherSubscriptionStatusMsg);b.attr(this.subscriptionStateDiv,"innerHTML",a)},setActionMessage:function(a){var k=this.getUser();k&&k.role&&("org_admin"===k.role||"account_admin"===k.role)?((a.type||"").toLowerCase(),a.state.toLowerCase(),a=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://www.esri.com/en-us/contact#c\x3dus\x26t\x3d3' target\x3d'_blank'\x3e",
linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.contactCustomerService),b.attr(this.actionNeededDiv,"innerHTML",a)):b.attr(this.actionNeededDiv,"innerHTML",this.i18n.nonAdminActionMsg)},loadConnections:function(){b.query(".jevent").connect("onclick",function(a){a.preventDefault()});b.connect(this.subscriptionStatusDlg,"onCancel",b.hitch(this,function(a){this.onCancel(a)}));b.connect(this.subscriptionStatusDlg,"hide",b.hitch(this,function(a){this.onHide(a)}))},clear:function(){this.subscriptionStatusDlg.set("title",
this.i18n.subscriptionStatusTitle);b.attr(this.subscriptionStateDiv,"innerHTML","");b.attr(this.actionNeededDiv,"innerHTML","");b.style(this.actionNeededDiv,"display","")},hide:function(){this.subscriptionStatusDlg.hide()},onOkClick:function(a){y.byId("subscription-status-dialog").hide()},getUser:function(){var a=b.cookie("esri_auth");return esriGeowConfig.userInfo||JSON.parse(a)||null},onCancel:function(){},onHide:function(){}})})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(b,y,r,a,k,e,g){e.extend(b,{waiRole:"",waiState:""});return k("dijit._Templated",[y,r],{constructor:function(){g.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(h,m){var l=this.inherited(arguments),f=m(h,"waiRole");f&&h.setAttribute("role",f);(f=m(h,"waiState"))&&a.forEach(f.split(/\s*,\s*/),function(c){-1!=c.indexOf("-")&&(c=c.split("-"),h.setAttribute("aria-"+c[0],c[1]))});
return l}})})},"arcgisonline/sharing/dijit/dialog/ConfirmDialog":function(){define(["dojo/_base/declare","dijit/Dialog","./_ConfirmDialogMixin"],function(b,y,r){return b("arcgisonline/sharing/dijit/dialog/ConfirmDialog",[y,r],{})})},"arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/query dojo/topic dojo/keys dijit/_WidgetsInTemplateMixin dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/actionBar.html dijit/form/Button".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u){return b("arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin",c,{actionBarTemplate:u,buttonOkLabel:d.common.ok,_setButtonOkLabelAttr:function(n){this.okButton.set("label",n)},buttonCancelLabel:d.common.cancel,_setButtonCancelLabelAttr:function(n){this.cancelButton.set("label",n)},busyMessage:d.common.pleaseWait,_setBusyMessageAttr:{node:"busyMessageSpan",attribute:"innerHTML"},_setShowCancelAttr:function(n){g.set(this.cancelButton.domNode,"display",n?"":"none")},
_setHelpLinkInfoAttr:function(n){var t=m(".dijitDialogTitle",this.domNode).shift();e.create("a",{className:"icon-ui-question margin-left-half font-size--1",title:n.title,href:n.url||"#",target:"_blank"},t)},onOk:function(){},onCancel:function(){},onHide:function(){},show:function(n){var t=new r;n&&n.message&&(this._messageNode||(this._messageNode=e.create("p",{innerHTML:n,"class":"esriMessageNode trailer-0"},m(".dijitDialogPaneContent",this.domNode)[0],"first")),this.set("title",n.title||""),k.set(this._messageNode,
"innerHTML",n.message||""));this.own(a(this,"hide",y.hitch(this,function(x){t.isResolved()||t.resolve("onCancel");this.destroyRecursive()})),a(this.okButton,"click",y.hitch(this,function(x){x.preventDefault();l.publish("/dlg/onOk");t.isResolved()||t.resolve("onOk");this.onOk()})),a(this.cancelButton,"click",y.hitch(this,function(x){x.preventDefault();l.publish("/dlg/onCancel");t.isResolved()||t.resolve("onCancel");this.onCancel();this.hide()})),a(this.domNode,"keypress",y.hitch(this,function(x){if(x&&
x.keyCode===f.ENTER)this.okButton.onClick(x)})),l.subscribe("/dlg/busyMessage",y.hitch(this,function(x){this.set("busyMessage",x)})),l.subscribe("/esri/disable",y.hitch(this,function(x,A){this.set("busyMessage",A||this.busyMessage||d.common.pleaseWait);this.set("disabled",x)})));this.inherited(arguments);return t},_setDisabledAttr:function(n){m(".dijitButton",this.actionBarNode).map(dijit.byNode).forEach(function(t){t.set("disabled",n)});dojo[n?"removeClass":"addClass"](this.busyMessageSpan,"hide")}})})},
"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(b,y,r,a){b=new b;y.id=a.safeMixin(b,r);return y.id})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t){y=y([n],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(x){k.mixin(this,x);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(x,A,B){this._nls||(this._nls=t.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var F=this._loginDialog,w=B&&B.error,D=B&&B.token,q=new a(function(){F.onCancel()});if(F.open)return x=Error("BUSY"),x.code="IdentityManager.1",x.log=!!r.isDebug,q.errback(x),q;d.hide(F.errMsg_);w&&403==w.code&&D&&(g.set(F.errMsg_,"innerHTML",this._nls.forbidden),d.show(F.errMsg_));F.dfd_=
q;F.serverInfo_=A;F.resUrl_=x;F.admin_=B&&B.isAdmin;g.set(F.resLink_,{title:x,innerHTML:"("+(this.getResourceName(x)||this._nls.lblItem)+")"});g.set(F.serverLink_,{title:A.server,innerHTML:(-1!==A.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":A.server)+" "});F.txtPwd_.set("value","");F.show();return q},_createLoginDialog:function(){var x=this._nls,A=c.substitute(x,this._dialogContent);A=c.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},A);var B=new l({title:x.title,content:A,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(F){F.charOrCode===h.ENTER&&this.execute_()},execute_:function(){var F=this.txtUser_.get("value"),w=this.txtPwd_.get("value"),D=this.dfd_,q=this;if(this.form_.validate()&&F&&w){this.btnSubmit_.set("label",x.lblSigning);var v=f.id.findCredential(q.resUrl_,F),z=function(C){q.btnSubmit_.set("label",
x.lblOk);q.btnSubmit_.set("disabled",!1);d.hide(q.errMsg_);q.hide();l._DialogLevelManager.hide(q);var E=q.serverInfo_;q.dfd_=q.serverInfo_=q.generateDfd_=q.resUrl_=null;var G=v;if(C){var H=C.token;var K=c.isDefined(C.expires)?Number(C.expires):null;var I=!!C.ssl;G?(G.userId=F,G.token=H,G.expires=K,G.validity=C.validity,G.ssl=I,G.creationTime=(new Date).getTime()):G=new u({userId:F,server:E.server,token:H,expires:K,ssl:I,isAdmin:q.admin_,validity:C.validity})}D.callback(G)};v&&!v._enqueued?z():(q.btnSubmit_.set("disabled",
!0),q.generateDfd_=f.id.generateToken(this.serverInfo_,{username:F,password:w},{isAdmin:this.admin_}).addCallback(z).addErrback(function(C){q.btnSubmit_.set("disabled",!1);q.generateDfd_=null;q.btnSubmit_.set("label",x.lblOk);g.set(q.errMsg_,"innerHTML",C&&C.code?x.invalidUser:x.noAuthService);d.show(q.errMsg_)}))}},cancel_:function(){B.generateDfd_&&B.generateDfd_.cancel();var F=B.dfd_,w=B.resUrl_,D=B.serverInfo_;B.btnSubmit_.set("disabled",!1);B.dfd_=B.serverInfo_=B.generateDfd_=B.resUrl_=null;
d.hide(B.errMsg_);l._DialogLevelManager.hide(B);B.esriIdMgr_.onDialogCancel({resourceUrl:w,serverInfo:D});w=Error("ABORTED");w.code="IdentityManager.2";w.log=!!r.isDebug;F.errback(w)}});A=B.domNode;B.form_=m.byNode(b.query(".esriIdForm",A)[0]);B.txtUser_=m.byNode(b.query(".esriIdUser",A)[0]);B.txtPwd_=m.byNode(b.query(".esriIdPwd",A)[0]);B.btnSubmit_=m.byNode(b.query(".esriIdSubmit",A)[0]);B.btnCancel_=m.byNode(b.query(".esriIdCancel",A)[0]);B.resLink_=b.query(".resLink",A)[0];B.serverLink_=b.query(".serverLink",
A)[0];B.errMsg_=b.query(".esriErrorMsg",A)[0];B.connect(B.txtUser_,"onKeyPress",B.keypressed_);B.connect(B.txtPwd_,"onKeyPress",B.keypressed_);B.connect(B.btnSubmit_,"onClick",B.execute_);B.connect(B.btnCancel_,"onClick",B.onCancel);B.connect(B,"onCancel",B.cancel_);return B}});return f.IdentityManagerDialog=f.IdentityManager=y})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(b,y,r,a){b=b(a.Credential,{});return r.Credential=b})},
"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/on dojo/regexp ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w){var D={},q=function(C){var E=(new e(C.owningSystemUrl)).host;C=(new e(C.server)).host;var G=/.+\.arcgis\.com$/i;
return G.test(E)&&G.test(C)},v=function(C,E){return!!(q(C)&&E&&a.some(E,function(G){return G.test(C.server)}))};g=b(B,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=r.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthHash();l(window,"pageshow",r.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,
normalizeWebTierAuth:!1,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",
tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],
_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,
_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(C){var E=this.serverInfos;E?(C=a.filter(C,function(G){return!this.findServerInfo(G.server)},this),this.serverInfos=E.concat(C)):this.serverInfos=C;a.forEach(C,function(G){G.owningSystemUrl&&this._portals.push(G.owningSystemUrl);if(G.hasPortal){this._portals.push(G.server);
var H=d.defaults.io.corsEnabledServers,K=this._getOrigin(G.tokenServiceUrl);t.canUseXhr(G.server)||H.push(G.server.replace(/^https?:\/\//i,""));t.canUseXhr(K)||H.push(K.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(C){var E=this.oAuthInfos;E?(C=a.filter(C,function(G){return!this.findOAuthInfo(G.portalUrl)},this),this.oAuthInfos=E.concat(C)):this.oAuthInfos=C},registerToken:function(C){C=u.mixin({},C);var E=this._sanitizeUrl(C.server),G=this.findServerInfo(E),H=!0,K;G||(G=new n,
G.server=this._getServerInstanceRoot(E),G.tokenServiceUrl=this._getTokenSvcUrl(E),G.hasPortal=!0,this.registerServers([G]));(K=this.findCredential(E,C.userId))?(delete C.server,r.mixin(K,C),H=!1):(K=new z({userId:C.userId,server:G.server,token:C.token,expires:C.expires,ssl:C.ssl,scope:this._isServerRsrc(E)?"server":"portal"}),K.resources=[E],this.credentials.push(K));K.onTokenChange(!1);H||K.refreshServerTokens()},toJson:function(){return u.fixJson({serverInfos:a.map(this.serverInfos,function(C){return C.toJson()}),
oAuthInfos:a.map(this.oAuthInfos,function(C){return C.toJson()}),credentials:a.map(this.credentials,function(C){return C.toJson()})})},initialize:function(C){if(C){r.isString(C)&&(C=JSON.parse(C));var E=C.serverInfos,G=C.oAuthInfos;C=C.credentials;if(E){var H=[];a.forEach(E,function(I){I.server&&I.tokenServiceUrl&&H.push(I.declaredClass?I:new n(I))});H.length&&this.registerServers(H)}if(G){var K=[];a.forEach(G,function(I){I.appId&&K.push(I.declaredClass?I:new w(I))});K.length&&this.registerOAuthInfos(K)}C&&
a.forEach(C,function(I){I.userId&&I.server&&I.token&&I.expires&&I.expires>(new Date).getTime()&&(I=I.declaredClass?I:new z(I),I.onTokenChange(),this.credentials.push(I))},this)}},findServerInfo:function(C){var E;C=this._sanitizeUrl(C);a.some(this.serverInfos,function(G){this._hasSameServerInstance(G.server,C)&&(E=G);return!!E},this);return E},findOAuthInfo:function(C){var E;C=this._sanitizeUrl(C);a.some(this.oAuthInfos,function(G){this._hasSameServerInstance(G.portalUrl,C)&&(E=G);return!!E},this);
return E},findCredential:function(C,E){var G;C=this._sanitizeUrl(C);var H=this._isServerRsrc(C)?"server":"portal";E?a.some(this.credentials,function(K){this._hasSameServerInstance(K.server,C)&&E===K.userId&&K.scope===H&&(G=K);return!!G},this):a.some(this.credentials,function(K){this._hasSameServerInstance(K.server,C)&&-1!==this._getIdenticalSvcIdx(C,K)&&K.scope===H&&(G=K);return!!G},this);return G},getCredential:function(C,E){var G=!0;if(u.isDefined(E))if(r.isObject(E)){var H=!!E.token;var K=E.error;
G=!1!==E.prompt}else H=E;C=this._sanitizeUrl(C);var I=new k(x._dfdCanceller),J=this._isAdminResource(C),Q=H&&this._doPortalSignIn(C)?this._getEsriAuthCookie():null;if((H=H?this.findCredential(C):null)&&K&&498===K.code)H.destroy(),Q&&Q.token===E.token&&(h("esri_auth",null,{expires:-1,path:"/",domain:document.domain}),u.endsWith(window.location.hostname,".arcgis.com")&&h("esri_auth",null,{expires:-1,path:"/",domain:"arcgis.com"}));else if(Q||H)return C=Error("You are currently signed in as: '"+(Q&&
Q.email||H&&H.userId)+"'. You do not have access to this resource: "+C),C.code="IdentityManagerBase.1",C.httpCode=K&&K.httpCode,C.messageCode=K?K.messageCode:null,C.subcode=K?K.subcode:null,C.details=K?K.details:null,C.log=!!y.isDebug,I.errback(C),I;if(K=this._findCredential(C,E))return I.callback(K),I;K=this.findServerInfo(C);if(K)!K.hasServer&&this._isServerRsrc(C)&&(K._restInfoDfd=this._getTokenSvcUrl(C,!0),K.hasServer=!0);else{Q=this._getTokenSvcUrl(C);if(!Q)return C=Error("Unknown resource - could not find token service endpoint."),
C.code="IdentityManagerBase.2",C.log=!!y.isDebug,I.errback(C),I;K=new n;K.server=this._getServerInstanceRoot(C);r.isString(Q)?(K.tokenServiceUrl=Q,K.hasPortal=!0):(K._restInfoDfd=Q,K.hasServer=!0);this.registerServers([K])}G&&K.hasPortal&&void 0===K._selfReq&&!this._findOAuthInfo(C)&&(K._selfReq={owningTenant:E&&E.owningTenant,selfDfd:this._getPortalSelf(K.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),C)});return this._enqueue(C,K,E,I,J)},getResourceName:function(C){return this._isRESTService(C)?
C.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(C)&&C.replace(this._gwUser,"$1")||this._gwItem.test(C)&&C.replace(this._gwItem,"$1")||this._gwGroup.test(C)&&C.replace(this._gwGroup,"$1")||""},generateToken:function(C,E,G){var H=this._rePortalTokenSvc.test(C.tokenServiceUrl),K=new e(window.location.href.toLowerCase()),I=this._getEsriAuthCookie(),J=!E;var Q=C.shortLivedTokenValidity;if(E){var V=c.id.tokenValidity||Q||c.id.defaultTokenValidity;V>Q&&(V=Q)}if(G){var O=
G.isAdmin;var S=G.serverUrl;var L=G.token;var Y=G.ssl;C.customParameters=G.customParameters}if(O)Q=C.adminTokenServiceUrl;else{Q=C.tokenServiceUrl;var ca=new e(Q.toLowerCase());if(I)var U=(U=I.auth_tier)&&U.toLowerCase();("web"===U||C.webTierAuth)&&G&&G.serverUrl&&!Y&&"http"===K.scheme&&(t.hasSameOrigin(K.uri,Q,!0)||"https"===ca.scheme&&K.host===ca.host&&"7080"===K.port&&"7443"===ca.port)&&(Q=Q.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));J&&H&&(Q=Q.replace(/\/rest/i,""))}O=r.mixin({url:Q,
content:r.mixin({request:"getToken",username:E&&E.username,password:E&&E.password,serverUrl:S,token:L,expiration:V,referer:O||H?window.location.host:null,client:O?"referer":null,f:"json"},C.customParameters),handleAs:"json",callbackParamName:J?"callback":void 0},G&&G.ioArgs);G={usePost:!J,disableIdentityLookup:!0,useProxy:this._useProxy(C,G)};H||(O.withCredentials=!1);H=A(O,G);H.addCallback(function(X){if(!X||!X.token)return X=Error("Unable to generate token"),X.code="IdentityManagerBase.3",X.log=
!!y.isDebug,X;var Z=C.server;D[Z]||(D[Z]={});E&&(D[Z][E.username]=E.password);X.validity=V;return X});H.addErrback(function(X){});return H},isBusy:function(){return!!this._busy},checkSignInStatus:function(C){var E=new k;this.checkAppAccess(C,"").then(function(G){E.resolve(G.credential)}).catch(function(G){E.reject(G)});return E},checkAppAccess:function(C,E,G){var H=this,K=!1;return this.getCredential(C,{prompt:!1}).then(function(I){var J={f:"json"};if("portal"===I.scope)if(E&&(H._doPortalSignIn(C,
!0)||G&&G.force)){var Q=I.server+"/sharing/rest/oauth2/validateAppAccess";J.client_id=E}else if(I.token)Q=I.server+"/sharing/rest";else return{credential:I};else if(I.token)Q=I.server+"/rest/services";else return{credential:I};I.token&&(J.token=I.token);return A({url:Q,content:J,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(V){if(!1===V.valid){var O=Error("You are currently signed in as: '"+I.userId+"'.  You do not have access to this app: '"+E+"'.");O.code="IdentityManagerBase.1";
O.log=!!y.isDebug;O.details=V;throw O;}K=!!V.viewOnlyUserTypeApp;return{credential:I}}).catch(function(V){if("IdentityManagerBase.1"===V.code||400===V.code)throw V;if(498===V.code)throw I.destroy(),V=Error("User is not signed in."),V.code="IdentityManagerBase.6",V.log=!!y.isDebug,V;return{credential:I}})}).then(function(I){return{credential:I.credential,viewOnly:K}})},setRedirectionHandler:function(C){this._redirectFunc=C},setProtocolErrorHandler:function(C){this._protocolFunc=C},signIn:function(){},
oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var C=this.credentials.slice();a.forEach(C,function(E){E.destroy()})}this.onCredentialsDestroy()},_getOAuthHash:function(){var C=window.location.hash;if(C){"#"===C.charAt(0)&&(C=C.substring(1));C=m.queryToObject(C);var E=!1;C.access_token&&C.expires_in&&C.state&&C.hasOwnProperty("username")?(C.state=JSON.parse(C.state),this._oAuthHash=C,E=!0):C.error&&C.error_description&&
"access_denied"===C.error&&(E=!0);E&&(window.location.hash=C.state&&C.state.hash||"")}},_pageShowHandler:function(C){C.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(C=Error("ABORTED"),C.code="IdentityManager.2",C.log=!!y.isDebug,this._errbackFunc(C))},_findCredential:function(C,E){var G=-1,H,K,I=E&&E.token;E=E&&E.resource;var J=this._isServerRsrc(C)?"server":"portal",Q=a.filter(this.credentials,function(L){return this._hasSameServerInstance(L.server,C)&&L.scope===J},this);C=E||C;if(Q.length)if(1===
Q.length){E=Q[0];var V=(H=(K=this.findServerInfo(E.server))&&K.owningSystemUrl)&&this.findCredential(H,E.userId);G=this._getIdenticalSvcIdx(C,E);if(I)-1!==G&&(E.resources.splice(G,1),this._removeResource(C,V));else return-1===G&&E.resources.push(C),this._addResource(C,V),E}else{var O,S;a.some(Q,function(L){S=this._getIdenticalSvcIdx(C,L);return-1!==S?(O=L,V=(H=(K=this.findServerInfo(O.server))&&K.owningSystemUrl)&&this.findCredential(H,O.userId),G=S,!0):!1},this);if(I)O&&(O.resources.splice(G,1),
this._removeResource(C,V));else if(O)return this._addResource(C,V),O}},_findOAuthInfo:function(C){var E=this.findOAuthInfo(C);E||a.some(this.oAuthInfos,function(G){this._isIdProvider(G.portalUrl,C)&&(E=G);return!!E},this);return E},_addResource:function(C,E){E&&-1===this._getIdenticalSvcIdx(C,E)&&E.resources.push(C)},_removeResource:function(C,E){var G=-1;E&&(G=this._getIdenticalSvcIdx(C,E),-1<G&&E.resources.splice(G,1))},_useProxy:function(C,E){return E&&E.isAdmin&&!t.hasSameOrigin(C.adminTokenServiceUrl,
window.location.href)||!this._isPortalDomain(C.tokenServiceUrl)&&10.1==C.currentVersion&&!t.hasSameOrigin(C.tokenServiceUrl,window.location.href)},_getOrigin:function(C){C=new e(C);return C.scheme+"://"+C.host+(u.isDefined(C.port)?":"+C.port:"")},_getServerInstanceRoot:function(C){var E=C.toLowerCase(),G=E.indexOf(this._agsRest);-1===G&&this._isAdminResource(C)&&(G=this._agsAdmin.test(C)?C.replace(this._agsAdmin,"$1").length:C.search(this._adminSvcs));-1===G&&(G=E.indexOf("/sharing"));-1===G&&"/"===
E.substr(-1)&&(G=E.length-1);return-1<G?C.substring(0,G):C},_hasSameServerInstance:function(C,E){"/"===C.substr(-1)&&(C=C.slice(0,-1));C=C.toLowerCase();E=this._getServerInstanceRoot(E).toLowerCase();C=this._normalizeAGOLorgDomain(C);E=this._normalizeAGOLorgDomain(E);C=C.substr(C.indexOf(":"));E=E.substr(E.indexOf(":"));return C===E},_normalizeAGOLorgDomain:function(C){var E=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,G=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,H=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;
E.test(C)?C=C.replace(E,"https://www.arcgis.com"):G.test(C)?C=C.replace(G,"https://devext.arcgis.com"):H.test(C)&&(C=C.replace(H,"https://qaext.arcgis.com"));return C},_sanitizeUrl:function(C){var E=(d.defaults.io.proxyUrl||"").toLowerCase(),G=E?C.toLowerCase().indexOf(E+"?"):-1;-1!==G&&(C=C.substring(G+E.length+1));C=t.normalize(C);return t.urlToObject(C).path},_isRESTService:function(C){return-1<C.indexOf(this._agsRest)},_isAdminResource:function(C){return this._agsAdmin.test(C)||this._adminSvcs.test(C)},
_isServerRsrc:function(C){return this._isRESTService(C)||this._isAdminResource(C)},_isIdenticalService:function(C,E){if(this._isRESTService(C)&&this._isRESTService(E)){C=this._getSuffix(C).toLowerCase();E=this._getSuffix(E).toLowerCase();var G=C===E;G||(G=/(.*)\/(MapServer|FeatureServer).*/ig,G=C.replace(G,"$1")===E.replace(G,"$1"))}else this._isAdminResource(C)&&this._isAdminResource(E)?G=!0:this._isServerRsrc(C)||this._isServerRsrc(E)||!this._isPortalDomain(C)||(G=!0);return G},_isPortalDomain:function(C){var E=
new e(C.toLowerCase()),G=this._portalConfig;C=a.some(this._gwDomains,function(H){return H.regex.test(E.uri)});!C&&G&&(C=this._hasSameServerInstance(this._getServerInstanceRoot(G.restBaseUrl),E.uri));C||(!this._arcgisUrl&&(G=r.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new e(G)).authority),this._arcgisUrl&&(C=this._arcgisUrl.toLowerCase()===E.authority));C||(C=a.some(this._portals,function(H){return this._hasSameServerInstance(H,E.uri)},this));return C=C||this._agsPortal.test(E.path)},
_isIdProvider:function(C,E){var G=-1,H=-1;a.forEach(this._gwDomains,function(Q,V){-1===G&&Q.regex.test(C)&&(G=V);-1===H&&Q.regex.test(E)&&(H=V)});var K=!1;if(-1<G&&-1<H)if(0===G||4===G){if(0===H||4===H)K=!0}else if(1===G){if(1===H||2===H)K=!0}else 2===G?2===H&&(K=!0):3===G&&3===H&&(K=!0);if(!K){var I=this.findServerInfo(E),J=I&&I.owningSystemUrl;J&&q(I)&&this._isPortalDomain(J)&&this._isIdProvider(C,J)&&(K=!0)}return K},_isPublic:function(C){C=this._sanitizeUrl(C);return a.some(this._publicUrls,function(E){return E.test(C)})},
_getIdenticalSvcIdx:function(C,E){var G=-1;a.some(E.resources,function(H,K){return this._isIdenticalService(C,H)?(G=K,!0):!1},this);return G},_getSuffix:function(C){return C.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(C){if(this._isRESTService(C)||this._isAdminResource(C)){var E=this._getServerInstanceRoot(C);var G=E+"/admin/generateToken";C=E+"/rest/info";E=A({url:C,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});E.adminUrl_=G;return E}if(this._isPortalDomain(C)){var H=
"";a.some(this._gwDomains,function(K){K.regex.test(C)&&(H=K.tokenServiceUrl);return!!H});H||a.some(this._portals,function(K){this._hasSameServerInstance(K,C)&&(H=K+this._gwTokenUrl);return!!H},this);H||(G=C.toLowerCase().indexOf("/sharing"),-1!==G&&(H=C.substring(0,G)+this._gwTokenUrl));H||(H=this._getOrigin(C)+this._gwTokenUrl);H&&(G=(new e(C)).port,/^http:\/\//i.test(C)&&"7080"===G&&(H=H.replace(/:7080/i,":7443")),H=H.replace(/http:/i,"https:"));return H}if(-1!==C.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},
_exchangeToken:function(C,E,G){return A({url:C+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:E,token:G}},{disableIdentityLookup:!0,usePost:!0}).then(function(H){return H.token})},_getPortalSelf:function(C,E){var G="";a.some(this._gwDomains,function(H){H.regex.test(C)&&(G=H.customBaseUrl);return!!G});if(G)return E=new k,E.resolve({allSSL:!0,currentVersion:"4.4",customBaseUrl:G,portalMode:"multitenant",supportsOAuth:!0}),E;"https:"===window.location.protocol?C=C.replace(/^http:/i,
"https:").replace(/:7080/i,":7443"):/^http:/i.test(E)&&(C=C.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return A({url:C,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var C=null;if(h.isSupported()){var E=this._getAllCookies("esri_auth"),G,H;for(H=0;H<E.length;H++){var K=JSON.parse(E[H]);if(K.portalApp){C=K;break}G?G.push(K):G=[K]}if(!C&&
G)for(H=0;H<G.length;H++)if(K=G[H],K.urlKey&&window.location.hostname===K.urlKey.toLowerCase()+"."+K.customBaseUrl){C=K;break}}C&&(E=null,C.expires&&("number"===typeof C.expires?E=C.expires:"string"===typeof C.expires&&(E=Date.parse(C.expires)),isNaN(E)&&(E=null),C.expires=E),E&&E<(new Date).getTime()&&(C=null));return C},_getAllCookies:function(C){var E=[],G=document.cookie.match(new RegExp("(?:^|; )"+f.escapeString(C)+"\x3d([^;]*)","g"));if(G)for(C=0;C<G.length;C++){var H=G[C],K=H.indexOf("\x3d");
-1<K&&(H=H.substring(K+1),E.push(decodeURIComponent(H)))}return E},_doPortalSignIn:function(C,E){if(h.isSupported()){var G=this._getEsriAuthCookie(),H=this._portalConfig,K=window.location.href,I=this.findServerInfo(C);if((E||this.useSignInPage)&&(H||this._isPortalDomain(K)||G)&&(I?I.hasPortal||I.owningSystemUrl&&this._isPortalDomain(I.owningSystemUrl):this._isPortalDomain(C))&&(this._isIdProvider(K,C)||H&&(this._hasSameServerInstance(this._getServerInstanceRoot(H.restBaseUrl),C)||this._isIdProvider(H.restBaseUrl,
C))||t.hasSameOrigin(K,C,!0)))return!0}return!1},_canUsePortalSignInWorkflow:function(C){return this._doPortalSignIn(C)&&(window===window.top||this._hasPortalSession())},_checkProtocol:function(C,E,G,H){var K=!0;H=H?E.adminTokenServiceUrl:E.tokenServiceUrl;0!==r.trim(H).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||d.defaults.io.useCors&&(t.canUseXhr(H)||t.canUseXhr(t.getProxyUrl(!0).path))||(K=this._protocolFunc?!!this._protocolFunc({resourceUrl:C,serverInfo:E}):
!1,K||(C=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),C.code="IdentityManagerBase.4",C.log=!!y.isDebug,G(C)));return K},_enqueue:function(C,E,G,H,K,I){H||(H=new k(x._dfdCanceller));H.resUrl_=C;H.sinfo_=E;H.options_=G;H.admin_=K;H.refresh_=I;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(C),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(H)):this._xoReqs.push(H):this._doSignIn(H);
return H},_doSignIn:function(C){this._busy=C;this._rejectOnPersistedPageShow=!1;var E=this,G=function(O){var S=C.options_&&C.options_.resource,L=C.resUrl_,Y=C.refresh_,ca=!1;-1===a.indexOf(E.credentials,O)&&(Y&&-1!==a.indexOf(E.credentials,Y)?(Y.userId=O.userId,Y.token=O.token,Y.expires=O.expires,Y.validity=O.validity,Y.ssl=O.ssl,Y.creationTime=O.creationTime,ca=!0,O=Y):E.credentials.push(O));O.resources||(O.resources=[]);O.resources.push(S||L);O.scope=E._isServerRsrc(L)?"server":"portal";O.onTokenChange();
S=E._soReqs;var U={};E._soReqs=[];a.forEach(S,function(X){if(!this._isIdenticalService(L,X.resUrl_)){var Z=this._getSuffix(X.resUrl_);U[Z]||(U[Z]=!0,O.resources.push(X.resUrl_))}},E);C.callback(O);a.forEach(S,function(X){this._hasSameServerInstance(this._getServerInstanceRoot(L),X.resUrl_)?X.callback(O):this._soReqs.push(X)},E);E._busy=C.resUrl_=C.sinfo_=C.refresh_=null;if(!ca)E.onCredentialCreate({credential:O});E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},
H=function(O){C.errback(O);E._busy=C.resUrl_=C.sinfo_=C.refresh_=null;E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},K=function(O,S,L,Y){var ca=C.sinfo_,U=!C.options_||!1!==C.options_.prompt,X=ca.hasPortal&&E._findOAuthInfo(C.resUrl_);if(E._canUsePortalSignInWorkflow(C.resUrl_))if(S=E._getEsriAuthCookie(),O=E._portalConfig,S){ca.webTierAuth||"web"!==(S.auth_tier&&S.auth_tier.toLowerCase())||(ca.webTierAuth=!0);var Z=new z({userId:S.email,server:ca.server,
token:ca.webTierAuth?null:S.token,expires:S.expires});Z.token?C._pendingDfd=E._exchangeToken(Z.server,X?X.appId:"arcgisonline",Z.token).then(function(aa){Z.token=aa;G(Z)}).catch(function(){G(Z)}):G(Z)}else U?(U="",X=window.location.href,U=E.signInPage?E.signInPage:O?O.baseUrl+O.signin:E._isIdProvider(X,C.resUrl_)?E._getOrigin(X)+"/home/signin.html":ca.tokenServiceUrl.replace(E._rePortalTokenSvc,"")+"/home/signin.html",U=U.replace(/http:/i,"https:"),O&&!1===O.useSSL&&(U=U.replace(/https:/i,"http:")),
0===X.toLowerCase().replace("https","http").indexOf(U.toLowerCase().replace("https","http"))?(ca=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+C.resUrl_),ca.code="IdentityManagerBase.5",ca.log=!!y.isDebug,H(ca)):(E._rejectOnPersistedPageShow=!0,E._redirectFunc?E._redirectFunc({signInPage:U,returnUrlParamName:"returnUrl",returnUrl:X,resourceUrl:C.resUrl_,serverInfo:ca}):window.location=U+"?returnUrl\x3d"+window.escape(X))):(ca=
Error("User is not signed in."),ca.code="IdentityManagerBase.6",ca.log=!!y.isDebug,H(ca));else if(O)G(new z({userId:O,server:ca.server,token:L,expires:u.isDefined(Y)?Number(Y):null,ssl:!!S}));else if(X){var N=X._oAuthCred;N||(O=new F(X,window.localStorage),S=new F(X,window.sessionStorage),O.isValid()&&S.isValid()?O.expires>S.expires?(N=O,S.destroy()):(N=S,O.destroy()):N=O.isValid()?O:S,X._oAuthCred=N);N.isValid()?(Z=new z({userId:N.userId,server:ca.server,token:N.token,expires:N.expires,ssl:N.ssl,
_oAuthCred:N}),X.appId!==N.appId&&E._doPortalSignIn(C.resUrl_,!0)?C._pendingDfd=E._exchangeToken(Z.server,X.appId,Z.token).then(function(aa){Z.token=aa;N.token=aa;N.save();G(Z)}).catch(function(){G(Z)}):G(Z)):E._oAuthHash&&E._oAuthHash.state.portalUrl===X.portalUrl?(U=E._oAuthHash,Z=new z({userId:U.username,server:ca.server,token:U.access_token,expires:(new Date).getTime()+1E3*Number(U.expires_in),ssl:"true"===U.ssl,oAuthState:U.state,_oAuthCred:N}),N.storage=U.persist?window.localStorage:window.sessionStorage,
N.token=Z.token,N.expires=Z.expires,N.userId=Z.userId,N.ssl=Z.ssl,N.save(),E._oAuthHash=null,G(Z)):U?C._pendingDfd=E.oAuthSignIn(C.resUrl_,ca,X,C.options_).addCallbacks(G,H):(ca=Error("User is not signed in."),ca.code="IdentityManagerBase.6",ca.log=!!y.isDebug,H(ca))}else U?E._checkProtocol(C.resUrl_,ca,H,C.admin_)&&(U=C.options_,C.admin_&&(U=U||{},U.isAdmin=!0),C._pendingDfd=E.signIn(C.resUrl_,ca,U).addCallbacks(G,H)):(ca=Error("User is not signed in."),ca.code="IdentityManagerBase.6",ca.log=!!y.isDebug,
H(ca))},I=function(){var O=C.sinfo_,S=O.owningSystemUrl,L=C.options_,Y;if(L){var ca=L.token;var U=L.error;var X=L.prompt}(Y=E._findCredential(S,{token:ca,resource:C.resUrl_}))||a.some(E.credentials,function(Z){this._isIdProvider(S,Z.server)&&(Y=Z);return!!Y},E);Y?(L=E.findCredential(C.resUrl_,Y.userId))?G(L):v(O,E._legacyFed)?(L=Y.toJson(),L.server=O.server,L.resources=null,G(new z(L))):(C._pendingDfd=E.generateToken(E.findServerInfo(Y.server),null,{serverUrl:C.resUrl_,token:Y.token,ssl:Y.ssl})).addCallbacks(function(Z){G(new z({userId:Y.userId,
server:O.server,token:Z.token,expires:u.isDefined(Z.expires)?Number(Z.expires):null,ssl:!!Z.ssl,isAdmin:C.admin_,validity:Z.validity}))},H):(E._busy=null,ca&&(C.options_.token=null),(C._pendingDfd=E.getCredential(S.replace(/\/?$/,"/sharing"),{resource:C.resUrl_,owningTenant:O.owningTenant,token:ca,error:U,prompt:X})).addCallbacks(function(Z){E._enqueue(C.resUrl_,C.sinfo_,C.options_,C,C.admin_)},function(Z){H(Z)}))};this._errbackFunc=H;var J=C.sinfo_.owningSystemUrl,Q=this._isServerRsrc(C.resUrl_),
V=C.sinfo_._restInfoDfd;V?V.addCallbacks(function(O){var S=C.sinfo_;S._restInfoDfd&&(S.adminTokenServiceUrl=S._restInfoDfd.adminUrl_,S._restInfoDfd=null,S.tokenServiceUrl=r.getObject("authInfo.tokenServicesUrl",!1,O)||r.getObject("authInfo.tokenServiceUrl",!1,O)||r.getObject("tokenServiceUrl",!1,O),S.shortLivedTokenValidity=r.getObject("authInfo.shortLivedTokenValidity",!1,O),S.currentVersion=O.currentVersion,S.owningTenant=O.owningTenant,(O=S.owningSystemUrl=O.owningSystemUrl)&&E._portals.push(O));
Q&&S.owningSystemUrl?I():K()},function(){C.sinfo_._restInfoDfd=null;var O=Error("Unknown resource - could not find token service endpoint.");O.code="IdentityManagerBase.2";O.log=!!y.isDebug;H(O)}):Q&&J?I():C.sinfo_._selfReq?C.sinfo_._selfReq.selfDfd.then(function(O){var S={};if(O){var L=O.user&&O.user.username;S.username=L;S.allSSL=O.allSSL;var Y=O.supportsOAuth;var ca=O.currentVersion;if("multitenant"===O.portalMode)var U=O.customBaseUrl}C.sinfo_.webTierAuth=!!L;return L&&E.normalizeWebTierAuth?
E.generateToken(C.sinfo_,null,{ssl:S.allSSL}).addBoth(function(X){S.portalToken=X&&X.token;S.tokenExpiration=X&&X.expires;return S}):!L&&Y&&4.4<=parseFloat(ca)&&!E._canUsePortalSignInWorkflow(C.resUrl_)?E._generateOAuthInfo({portalUrl:C.sinfo_.server,customBaseUrl:U,owningTenant:C.sinfo_._selfReq.owningTenant}).always(function(){return S}):S}).always(function(O){C.sinfo_._selfReq=null;O?K(O.username,O.allSSL,O.portalToken,O.tokenExpiration):K()}):K()},_generateOAuthInfo:function(C){var E=this,G=C.portalUrl,
H=C.customBaseUrl,K=C.owningTenant;if(C=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var I=window.location.href;var J=I.indexOf("?");-1<J&&(I=I.slice(0,J));J=I.search(/\/(apps|home)\//);I=-1<J?I.slice(0,J):null}C&&I?(this._hasTestedIfAppIsOnPortal=!0,C=A({url:I+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){E.defaultOAuthInfo=new w({appId:"arcgisonline",popup:!0,popupCallbackUrl:I+"/home/oauth-callback.html"})})):(C=new k,C.resolve(),
C=C.promise);return C.then(function(){if(E.defaultOAuthInfo)return G=G.replace(/^http:/i,"https:"),A({url:G+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:K,client_id:E.defaultOAuthInfo.appId,redirect_uri:t.getAbsoluteUrl(E.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(Q){if(Q.valid){var V=E.defaultOAuthInfo.clone();V.portalUrl=Q.urlKey&&H?"https://"+Q.urlKey.toLowerCase()+"."+H:G;E.oAuthInfos.push(V)}})})}});var z=b(B,{declaredClass:"esri.Credential",
tokenRefreshBuffer:2,constructor:function(C){r.mixin(this,C);this.resources=this.resources||[];u.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var C=this,E=this.resources&&this.resources[0],G=c.id.findServerInfo(this.server),H=G&&G.owningSystemUrl,K=!!H&&"server"===this.scope,I=K&&v(G,c.id._legacyFed),J=K&&c.id.findServerInfo(H),Q,V=(Q=G.webTierAuth)&&c.id.normalizeWebTierAuth,O=D[this.server];O=O&&O[this.userId];var S={username:this.userId,
password:O};if(!Q||V)if(K&&!J&&a.some(c.id.serverInfos,function(ca){c.id._isIdProvider(H,ca.server)&&(J=ca);return!!J}),Q=J&&c.id.findCredential(J.server,this.userId),!K||Q)if(I)Q.refreshToken();else{if(K)var L={serverUrl:E,token:Q&&Q.token,ssl:Q&&Q.ssl};else if(V)S=null,L={ssl:this.ssl};else if(O)this.isAdmin&&(L={isAdmin:!0});else{if(E){E=c.id._sanitizeUrl(E);this._enqueued=1;var Y=c.id._enqueue(E,G,null,null,this.isAdmin,this);Y.addCallback(function(){C._enqueued=0;C.refreshServerTokens()}).addErrback(function(){C._enqueued=
0})}return Y}return c.id.generateToken(K?J:G,K?null:S,L).addCallback(function(ca){C.token=ca.token;C.expires=u.isDefined(ca.expires)?Number(ca.expires):null;C.creationTime=(new Date).getTime();C.validity=ca.validity;C.onTokenChange();C.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&a.forEach(c.id.credentials,function(C){var E=c.id.findServerInfo(C.server),G=E&&E.owningSystemUrl;C!==this&&C.userId===this.userId&&G&&"server"===C.scope&&(c.id._hasSameServerInstance(this.server,
G)||c.id._isIdProvider(G,this.server))&&(v(E,c.id._legacyFed)?(C.token=this.token,C.expires=this.expires,C.creationTime=this.creationTime,C.validity=this.validity,C.onTokenChange()):C.refreshToken())},this)},onTokenChange:function(C){clearTimeout(this._refreshTimer);var E=this.server&&c.id.findServerInfo(this.server),G=(E=E&&E.owningSystemUrl)&&c.id.findServerInfo(E);!1!==C&&(!E||"portal"===this.scope||G&&G.webTierAuth&&!c.id.normalizeWebTierAuth)&&(u.isDefined(this.expires)||u.isDefined(this.validity))&&
this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var C=a.indexOf(c.id.credentials,this);-1<C&&c.id.credentials.splice(C,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var C=u.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,
validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),E=this.resources;E&&0<E.length&&(C.resources=E.slice());return C},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var C=6E4*this.tokenRefreshBuffer,E=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>E&&(E=0);this._refreshTimer=setTimeout(r.hitch(this,this.refreshToken),E>C?E-C:E)}});g.Credential=z;return c.IdentityManagerBase=g})},"esri/ServerInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","./kernel","./lang"],function(b,y,r,a,k){b=b(null,{declaredClass:"esri.ServerInfo",constructor:function(e){y.mixin(this,e)},toJson:function(){return k.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});
return a.ServerInfo=b})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare","dojo/has","dojo/json"],function(b,y,r,a){y=y(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,expires:null,ssl:null,token:null,userId:null,constructor:function(k,e){this.oAuthInfo=k;this.storage=e;this._init()},isValid:function(){var k=!1;if(this.oAuthInfo&&this.token&&this.userId){var e=(new Date).getTime();this.expires>e&&(this.expires-e)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&
(k=!0)}return k},save:function(){if(this.storage){var k=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){var g=k[e.authNamespace];g||(g=k[e.authNamespace]={});g[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",a.stringify(k))}catch(h){}}}},destroy:function(){var k=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){var g=e.portalUrl.replace(/^http:/i,
"https:")+"/sharing/rest/oauth2/revokeToken",h=new FormData;h.append("f","json");h.append("auth_token",this.token);h.append("client_id",e.appId);h.append("token_type_hint","access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(g,h);else{var m=new XMLHttpRequest;m.open("POST",g);m.send(h)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage&&(g=k[e.authNamespace])){delete g[e.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",a.stringify(k))}catch(l){}}e&&(this.oAuthInfo=e._oAuthCred=
null)},_init:function(){var k=this._load(),e=this.oAuthInfo;e&&e.authNamespace&&e.portalUrl&&(k=k[e.authNamespace])&&(k=k[e.portalUrl])&&(this.appId=k.appId,this.expires=k.expires,this.ssl=k.ssl,this.token=k.token,this.userId=k.userId)},_load:function(){var k={};if(this.storage){var e=this.storage.getItem("esriJSAPIOAuth");if(e)try{k=a.parse(e)}catch(g){}}return k}});return b.OAuthCredential=y})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang",
"dojo/has"],function(b,y,r,a,k){var e=r(null,{declaredClass:"esri.arcgis.OAuthInfo",constructor:function(g){a.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1},g)},_oAuthCred:null,toJson:function(){return y.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,
portalUrl:this.portalUrl,authNamespace:this.authNamespace,forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash})},clone:function(){return new e(this.toJson())}});a.setObject("arcgis.OAuthInfo",e,b);return e})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(b,y,r,a,k,e,g,h){return b("dijit.form.Form",[k,e,g,h],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(m){y.set(this.domNode,
"encType",m);a("ie")&&(this.domNode.encoding=m);this._set("encType",m)},reset:function(m){var l={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:m?m.target:this.domNode,target:m?m.target:this.domNode};!1!==this.onReset(l)&&l.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(m){this.reset(m);m.stopPropagation();m.preventDefault();return!1},_onSubmit:function(m){var l=this.constructor.prototype;if(this.execute!=
l.execute||this.onExecute!=l.onExecute)r.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(m)&&(m.stopPropagation(),m.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(n){this._oAuthRedirectFunc=n},oAuthSignIn:function(n,t,x,A){var B=this._oAuthDfd=new h;B.resUrl_=n;B.sinfo_=t;B.oinfo_=x;var F=!A||!1!==A.oAuthPopupConfirmation;if(!x.popup||!F)return this._doOAuthSignIn(n,t,x),B;this._nls||(this._nls=f.identity);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());n=this.oAuthDialog;x=A&&A.error;A=A&&A.token;y.hide(n.errMsg_);x&&403==x.code&&A&&(l.set(n.errMsg_,"innerHTML",this._nls.forbidden),y.show(n.errMsg_));l.set(n.serverLink_,
{title:t.server,innerHTML:-1!==t.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":t.server});n.show();return B},setOAuthResponseHash:function(n){var t=this._oAuthDfd;this._oAuthDfd=null;if(t&&n)if(clearInterval(this._oAuthIntervalId),"#"===n.charAt(0)&&(n=n.substring(1)),n=c.queryToObject(n),n.error)n=Error("access_denied"===n.error?"ABORTED":"OAuth: "+n.error+" - "+n.error_description),n.code="IdentityManagerBase.2",n.log=!!g.isDebug,t.errback(n);else{var x=t.oinfo_._oAuthCred,A=new b({userId:n.username,
server:t.sinfo_.server,token:n.access_token,expires:(new Date).getTime()+1E3*Number(n.expires_in),ssl:"true"===n.ssl,_oAuthCred:x});x.storage=n.persist?window.localStorage:window.sessionStorage;x.token=A.token;x.expires=A.expires;x.userId=A.userId;x.ssl=A.ssl;x.save();t.callback(A)}},_createOAuthDialog:function(){var n=this._nls,t=r.substitute(n,this._oAuthDialogContent);t=r.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},t);var x=new k({title:n.title,
content:t,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var A=x.esriIdMgr_._oAuthDfd;x.hide_();x.esriIdMgr_._doOAuthSignIn(A.resUrl_,A.sinfo_,A.oinfo_)},cancel_:function(){var A=x.esriIdMgr_._oAuthDfd;x.esriIdMgr_._oAuthDfd=null;x.hide_();var B=Error("ABORTED");B.code="IdentityManager.2";B.log=!!g.isDebug;A.errback(B)},hide_:function(){y.hide(x.errMsg_);x.hide();k._DialogLevelManager.hide(x)}});n=x.domNode;x.btnSubmit_=e.byNode(m.query(".esriIdSubmit",
n)[0]);x.btnCancel_=e.byNode(m.query(".esriIdCancel",n)[0]);x.serverLink_=m.query(".serverLink",n)[0];x.errMsg_=m.query(".esriErrorMsg",n)[0];x.connect(x.btnSubmit_,"onClick",x.execute_);x.connect(x.btnCancel_,"onClick",x.onCancel);x.connect(x,"onCancel",x.cancel_);return x},_doOAuthSignIn:function(n,t,x){var A=this,B={portalUrl:x.portalUrl};!x.popup&&x.preserveUrlHash&&window.location.hash&&(B.hash=window.location.hash);B={client_id:x.appId,response_type:"token",state:u.stringify(B),expiration:x.expiration,
locale:x.locale,redirect_uri:x.popup?a.getAbsoluteUrl(x.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};x.forceLogin&&(B.force_login=!0);var F=x.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",w=F+"?"+c.objectToQuery(B);if(x.popup){if(7===d("ie")){var D=window.open(x.popupCallbackUrl,"esriJSAPIOAuth",x.popupWindowFeatures);D.location=w}else D=window.open(w,"esriJSAPIOAuth",x.popupWindowFeatures);D?(D.focus(),this._oAuthDfd.oAuthWin_=D,this._oAuthIntervalId=setInterval(function(){if(D.closed){clearInterval(A._oAuthIntervalId);
var q=A._oAuthDfd;if(q){var v=Error("ABORTED");v.code="IdentityManager.2";v.log=!!g.isDebug;q.errback(v)}}},500)):(n=Error("ABORTED"),n.code="IdentityManager.2",n.log=!!g.isDebug,this._oAuthDfd.errback(n))}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:B,authorizeUrl:F,resourceUrl:n,serverInfo:t,oAuthInfo:x}):window.location=w}}})},"arcgisonline/sharing/dijit/dialog/DownloadImageDlg":function(){define("dojo/_base/declare dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/DownloadImageDlg.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../../util".split(" "),
function(b,y,r,a,k,e,g){return b([a,k,e],{templateString:r,widgetsInTemplate:!0,_i18nStrings:y,constructor:function(h,m){b.safeMixin(this,h)},show:function(){this.dialog.show();this.own(dojo.connect(this.dialog,"onHide",dojo.hitch(this,function(){this.hide()})))},updateMessage:function(h){this.message.innerHTML=h},setCancelUrl:function(h){this.cancelUrl=h;this._cancelBtn.set("disabled",!1)},_handleCancelButtonClick:function(){this.hide()},hide:function(){this.cancelUrl&&g.request({url:this.cancelUrl});
this.dialog.hide()}})})},"dojo/hash":function(){define("./_base/kernel require ./_base/config ./aspect ./_base/lang ./topic ./domReady ./sniff".split(" "),function(b,y,r,a,k,e,g,h){function m(B,F){F=B.indexOf(F);return 0<=F?B.substring(F+1):""}function l(){return m(location.href,"#")}function f(){e.publish("/dojo/hashchange",l())}function c(){l()!==n&&(n=l(),f())}function d(B){if(t)if(t.isTransitioning())setTimeout(k.hitch(null,d,B),A);else{var F=t.iframe.location.href,w=F.indexOf("?");t.iframe.location.replace(F.substring(0,
w)+"?"+B)}else F=location.href.replace(/#.*/,""),location.replace(F+"#"+B),!x&&c()}function u(){function B(){n=l();D=C?n:m(E.href,"?");q=!1;v=null}var F=document.createElement("iframe"),w=r.dojoBlankHtmlUrl||y.toUrl("./resources/blank.html");F.id="dojo-hash-iframe";F.src=w+"?"+l();F.style.display="none";document.body.appendChild(F);this.iframe=b.global["dojo-hash-iframe"];var D,q,v,z,C,E=this.iframe.location;this.isTransitioning=function(){return q};this.pollLocation=function(){if(!C)try{var G=m(E.href,
"?");document.title!=z&&(z=this.iframe.document.title=document.title)}catch(K){C=!0}var H=l();if(q&&n===H)if(C||G===v)B(),f();else{setTimeout(k.hitch(this,this.pollLocation),0);return}else if(n!==H||!C&&D!==G){if(n!==H){n=H;q=!0;v=H;F.src=w+"?"+v;C=!1;setTimeout(k.hitch(this,this.pollLocation),0);return}C||(location.href="#"+E.search.substring(1),B(),f())}setTimeout(k.hitch(this,this.pollLocation),A)};B();setTimeout(k.hitch(this,this.pollLocation),A)}b.hash=function(B,F){if(!arguments.length)return l();
"#"==B.charAt(0)&&(B=B.substring(1));F?d(B):location.hash="#"+B;return B};var n,t,x,A=r.hashPollFrequency||100;g(function(){"onhashchange"in b.global&&(!h("ie")||8<=h("ie")&&"BackCompat"!=document.compatMode)?x=a.after(b.global,"onhashchange",f,!0):document.addEventListener?(n=l(),setInterval(c,A)):document.attachEvent&&(t=new u)});return b.hash})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c){var d={options:{disableIdentityLookup:!0},requestParams:{f:"json"}},u=function(v){function z(C){v[C]||(v[C]=function(){var E=arguments;return a.when(v,function(G){Array.prototype.unshift.call(E,G.results||G);return u(k[C].apply(k,E))})})}if(!v)return v;v.then&&(v=y.delegate(v));v.total||(v.total=a.when(v,function(C){return m.isDefined(C.total)?C.total:C.length||0}));z("forEach");z("filter");z("map");z("some");z("every");return v},n={useSSL:function(v,z){var C=d&&
d.self||{};if(C&&!C.isPortal)return-1!==v.indexOf("https:")||C.allSSL?z.replace("http:","https:"):z;var E=n.getLocation(z);return-1<C.portalHostname.toLowerCase().indexOf(E.hostname.toLowerCase())&&E.port&&"80"!==E.port&&"443"!==E.port?(z=E.pathname,z=0===z.indexOf("/")?z:"/"+z,C.allSSL||-1<v.indexOf("https:")?"https://"+E.hostname+(C.httpsPort&&"443"!==C.httpsPort?":"+C.httpsPort:"")+z+E.search:"http://"+E.hostname+(C.httpPort&&"80"!==C.httpPort?":"+C.httpPort:"")+z+E.search):-1!==v.indexOf("https:")||
C.allSSL?z.replace("http:","https:"):z},formatUrl:function(v){var z=d.currentToken;return-1!==v.indexOf("null")?null:n.useSSL(window.location.protocol,z?v+(-1!==v.indexOf("?")?"\x26":"?")+("token\x3d"+z):v)},getLocation:function(v){var z=document.createElement("a");z.href=v;return{protocol:z.protocol,hostname:z.hostname,port:z.port,pathname:z.pathname,search:z.search,hash:z.hash,host:z.host}},resultsToTypedArray:function(v,z,C){C=C?C.listings||C.notifications||C.userInvitations||C.tags||C.items||
C.groups||C.comments||C.provisions||C.results||C:[];return k.map(C,function(E){E=y.mixin(E,z||{});return v?new v(E):E})},clearFieldsFromObject:function(v,z){var C,E=v.length;if(y.isArray(v))for(C=0;C<E;C++)delete z[v[C]];else for(C in v)delete z[C];return z},requestToTypedArray:function(v,z,C,E,G){return u(n.request(v,z,C).then(y.partial(n.resultsToTypedArray,E,G)))},request:function(v,z,C){z&&z.portal&&delete z.portal;if(z&&z.form){var E=z.form;delete z.form}z=y.mixin(y.mixin({},z||{}),d.requestParams);
C=y.mixin(C||{},d.options);return l({url:n.useSSL(window.location.protocol,v.url||v),content:z,callbackParamName:"callback",timeout:C&&C.timeout||0,form:E},C)},formatQueryParams:function(v,z,C){v=y.mixin(y.mixin({},v),y.isString(z)?{q:z}:z||{});v.q=!C&&d.extraQuery?"("+v.q+")"+d.extraQuery:v.q;return v}},t=b([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(v){y.mixin(this,v);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),
x=b([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(v){y.mixin(this,v);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),A=b([],{declaredClass:"esri.arcgis.PortalItem",constructor:function(v){y.mixin(this,v);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/","/content/users/"+this.owner+
(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=n.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=n.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var v=this.type;return{source:-1<
k.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===v?v:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},addComment:function(v){var z=y.isString(v)?{comment:v}:v;return n.request(this.itemUrl+"/addComment",z,{usePost:!0}).then(y.hitch(this,function(C){return new t(y.mixin(z,{id:C.commentId,item:this}))}))},updateComment:function(v){if(v&&v.url&&v.comment)return n.request(v.url+"/update",{comment:v.comment},
{usePost:!0}).then(function(z){v.id=z.commentId;return v});throw Error();},getComments:function(){return n.requestToTypedArray(this.itemUrl+"/comments",null,null,t,{item:this})},deleteComment:function(v){if(v&&v.url)return n.request(v.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(v){var z=y.isObject(v)?v:{rating:parseFloat(v)};return n.request(this.itemUrl+"/addRating",z,{usePost:!0}).then(y.hitch(this,function(C){return new x(y.mixin(z,{id:C.ratingId,item:this}))}))},getRating:function(){return n.request(this.itemUrl+
"/rating").then(y.hitch(this,function(v){return new x(y.mixin(v,{item:this}))}))},deleteRating:function(){return n.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},_getDisplayName:function(){var v=this.type,z=this.typeKeywords||[],C=v;"Feature Service"===v||"Feature Collection"===v?C=-1<k.indexOf(z,"Table")?"Table":-1<k.indexOf(z,"Route Layer")?"Route Layer":-1<k.indexOf(z,"Markup")?"Markup":"Feature Layer":"Image Service"===v?C=-1<k.indexOf(z,"Elevation 3D Layer")?"Elevation Layer":-1<k.indexOf(z,
"Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===v?C="Scene Layer":"Scene Package"===v?C="Scene Layer Package":"Stream Service"===v?C="Feature Layer":"Geoprocessing Service"===v&&this.portal&&this.portal.isPortal?C=-1<k.indexOf(z,"Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===v?C="GeoEnrichment Service":"Geocoding Service"===v?C="Locator":"Microsoft Powerpoint"===v?C="Microsoft PowerPoint":"GeoJson"===v?this.type=C="GeoJSON":"Globe Service"===v?C="Globe Layer":
"Vector Tile Service"===v?C="Tile Layer":"netCDF"===v?C="NetCDF":"Map Service"===v?C=-1===k.indexOf(z,"Spatiotemporal")&&(-1<k.indexOf(z,"Hosted Service")||-1<k.indexOf(z,"Tiled"))&&-1===k.indexOf(z,"Relational")?"Tile Layer":"Map Image Layer":v&&-1<v.toLowerCase().indexOf("add in")?C=v.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===v?C="Big Data File Share":"Compact Tile Package"===v?C="Tile Package (tpkx)":"Raster function template"===v&&(C="Raster Function Template");return C},_getIconUrl:function(){var v=
this.type&&this.type.toLowerCase()||"",z=this.typeKeywords||[],C=!1,E=!1,G=!1,H=!1,K=!1,I=!1;E=!1;0<v.indexOf("service")||"feature collection"===v||"kml"===v||"wms"===v||"wmts"===v||"wfs"===v?(C=-1<k.indexOf(z,"Hosted Service"),"feature service"===v||"feature collection"===v||"kml"===v||"wfs"===v?(H=-1<k.indexOf(z,"Table"),E=-1<k.indexOf(z,"Route Layer"),G=-1<k.indexOf(z,"Markup"),K=-1!==k.indexOf(z,"Spatiotemporal"),I=-1!==k.indexOf(z,"UtilityNetwork"),v=K&&H?"spatiotemporaltable":H?"table":E?"routelayer":
G?"markup":K?"spatiotemporal":I?"utilitynetwork":C?"featureshosted":"features"):"map service"===v||"wms"===v||"wmts"===v?(K=-1!==k.indexOf(z,"Spatiotemporal"),E=-1!==k.indexOf(z,"Relational"),v=K||E?"mapimages":C||-1<k.indexOf(z,"Tiled")||"wmts"===v?"maptiles":"mapimages"):v="scene service"===v?-1<k.indexOf(z,"Line")?"sceneweblayerline":-1<k.indexOf(z,"3DObject")?"sceneweblayermultipatch":-1<k.indexOf(z,"Point")?"sceneweblayerpoint":-1<k.indexOf(z,"IntegratedMesh")?"sceneweblayermesh":-1<k.indexOf(z,
"PointCloud")?"sceneweblayerpointcloud":-1<k.indexOf(z,"Polygon")?"sceneweblayerpolygon":-1<k.indexOf(z,"Building")?"sceneweblayerbuilding":"sceneweblayer":"image service"===v?-1<k.indexOf(z,"Elevation 3D Layer")?"elevationlayer":-1<k.indexOf(z,"Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===v?"streamlayer":"vector tile service"===v?"vectortile":"datastore catalog service"===v?"datastorecollection":"geocoding service"===v?"geocodeservice":"geoprocessing service"===v?-1<k.indexOf(z,
"Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"knowledge graph service"===v?"knowledgegraph":"layers"):v="web map"===v||"cityengine web scene"===v?"maps":"web scene"===v?-1<k.indexOf(z,"ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===v||"mobile application"===v||"application"===v||"operation view"===v||"desktop application"===v?"apps":"map document"===v||"map package"===v||"published map"===v||"scene document"===v||"globe document"===v||"basemap package"===
v||"mobile basemap package"===v||"mobile map package"===v||"project package"===v||"project template"===v||"pro map"===v||"layout"===v||"layer"===v&&-1<k.indexOf(z,"ArcGIS Pro")||"explorer map"===v&&k.indexOf(z,"Explorer Document")?"mapsgray":"service definition"===v||"csv"===v||"shapefile"===v||"cad drawing"===v||"geojson"===v||"360 vr experience"===v||"netcdf"===v||"administrative report"===v?"datafiles":"explorer add in"===v||"desktop add in"===v||"windows viewer add in"===v||"windows viewer configuration"===
v?"appsgray":"arcgis pro add in"===v||"arcgis pro configuration"===v?"addindesktop":"rule package"===v||"file geodatabase"===v||"sqlite geodatabase"===v||"csv collection"===v||"kml collection"===v||"windows mobile package"===v||"map template"===v||"desktop application template"===v||"gml"===v||"arcpad package"===v||"code sample"===v||"form"===v||"document link"===v||"operations dashboard add in"===v||"rules package"===v||"image"===v||"workflow manager package"===v||"explorer map"===v&&-1<k.indexOf(z,
"Explorer Mapping Application")||-1<k.indexOf(z,"Document")?"datafilesgray":"network analysis service"===v||"geoprocessing service"===v||"geodata service"===v||"geometry service"===v||"geoprocessing package"===v||"locator package"===v||"geoprocessing sample"===v||"workflow manager service"===v?"toolsgray":"layer"===v||"layer package"===v||"explorer layer"===v?"layersgray":"scene package"===v?"scenepackage":"mobile scene package"===v?"mobilescenepackage":"tile package"===v||"compact tile package"===
v?"tilepackage":"task file"===v?"taskfile":"report template"===v?"report-template":"statistical data collection"===v?"statisticaldatacollection":"insights workbook"===v?"workbook":"insights model"===v?"insightsmodel":"insights page"===v?"insightspage":"insights theme"===v?"insightstheme":"hub initiative"===v?"hubinitiative":"hub page"===v?"hubpage":"hub site application"===v?"hubsite":"hub event"===v?"hubevent":"relational database connection"===v?"relationaldatabaseconnection":"big data file share"===
v?"datastorecollection":"image collection"===v?"imagecollection":"desktop style"===v?"desktopstyle":"style"===v?"style":"dashboard"===v?"dashboard":"raster function template"===v?"rasterprocessingtemplate":"vector tile package"===v?"vectortilepackage":"ortho mapping project"===v?"orthomappingproject":"ortho mapping template"===v?"orthomappingtemplate":"solution"===v?"solutions":"geopackage"===v?"geopackage":"deep learning package"===v?"deeplearningpackage":"real time analytic"===v?"realtimeanalytics":
"big data analytic"===v?"bigdataanalytics":"feed"===v?"feed":"excalibur imagery project"===v?"excaliburimageryproject":"notebook"===v?"notebook":"storymap"===v?"storymap":"survey123 add in"===v?"survey123addin":"mission"===v?"mission":"mission report"===v?"missionreport":"quickcapture project"===v?"quickcaptureproject":"pro report"===v?"proreport":"urban model"===v?"urbanmodel":"web experience"===v?"experiencebuilder":"web experience template"===v?"webexperiencetemplate":"workflow"===v?"workflow":
"kernel gateway connection"===v?"kernelgatewayconnection":"insights script"===v?"insightsscript":"hub initiative template"===v?"hubinitiativetemplate":"storymap theme"===v?"storymaptheme":"maps";return v?g.toUrl("../css/images/item_type_icons/"+v+"16.png"):null},_getIsPremiumContent:function(){var v=this.typeKeywords,z=!1;if(-1<k.indexOf(v,"Requires Subscription")||-1<k.indexOf(v,"Requires Credits"))z=!0;return z},_getPremiumIconUrl:function(){var v=this.typeKeywords,z;this.isPremiumContent&&(z=-1<
k.indexOf(v,"Requires Credits")?"premiumcredits":"premiumitem");return z?g.toUrl("../css/images/item_type_icons/"+z+"16.png"):null},getThumbnailUrl:function(v){var z=this.thumbnailUrl;z&&v&&(z+=(-1===z.indexOf("?")?"?":"\x26")+"w\x3d"+v);return z}}),B=b([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(v){y.mixin(this,v);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";
this.created=this.created?new Date(this.created):null;this.banner=this.banner?n.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?n.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?n.formatUrl(this.url+"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",
trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var z in this.listingProperties)this[z]&&(this.listingProperties[z]=this[z]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=k.map(this.screenshots,y.hitch(this,function(C){return n.formatUrl(this.url+"/info/"+C)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?n.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+this.vendor.thumbnail):
n.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return n.requestToTypedArray(this.commentsUrl,null,null,t,{item:this})},getVendor:function(){return this.vendor}}),F=b([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(v){y.mixin(this,v);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;this.listing=v.listing?
new B(y.mixin(v.listing,{portal:this.portal})):null}}),w=b([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(v){y.mixin(this,v);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=n.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return n.request(this.url+"/users")},queryItems:function(v,z){v=n.formatQueryParams({},
v,z);v.q="group:"+this.id+(v.q?" "+v.q:"");return this.portal.queryItems(v)},getThumbnailUrl:function(v){var z=this.thumbnailUrl;z&&v&&(z+=(-1===z.indexOf("?")?"?":"\x26")+"w\x3d"+v);return z}}),D=b([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(v){y.mixin(this,v);this.url=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return n.requestToTypedArray(this.url,null,null,A,{portal:this.portal,
folderId:this.id})}}),q=b([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(v){y.mixin(this,v);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=this.thumbnail?n.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getGroups:function(){return u(n.request(this.url).then(y.hitch(this,
function(v){return n.resultsToTypedArray(w,{portal:this.portal},v.groups)})))},getNotifications:function(){return n.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return n.requestToTypedArray(this.url+"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return n.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return u(this.getContent(null,{num:1}).then(function(v){return v.folders}))},
getItems:function(v){return u(this.getContent(v).then(function(z){return z.items}))},getItem:function(v){return n.request(this.portal.portalUrl+"content/items/"+v).then(y.hitch(this,function(z){return new A(y.mixin(z,{portal:this.portal}))}))},getContent:function(v,z){var C=this.url.replace("/community/","/content/")+(v?"/"+v:"");return n.request(C,z).then(y.hitch(this,function(E){E.folders=n.resultsToTypedArray(D,{portal:this.portal},E.folders);E.items=n.resultsToTypedArray(A,{portal:this.portal,
folderId:v},E.items);return E}))},getThumbnailUrl:function(v){var z=this.thumbnailUrl;z&&v&&(z+=(-1===z.indexOf("?")?"?":"\x26")+"w\x3d"+v);return z}});b={Portal:b([c],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(v){v=y.isObject(v)?v:{url:v};this.registerConnectEvents();d={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};v.self?(d.self=v.self,y.mixin(this,{url:v.url||f.getProtocolForWebResource()+"//"+(v.self.urlKey?v.self.urlKey+"."+
v.self.customBaseUrl:v.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",v=v.self.user?this.signIn():this.init(this.url)):(v.url&&y.mixin(this,{url:v.url}),v=this.init(this.url));v.then(y.hitch(this,function(){this.emit("ready",this);this.onLoad(this)}))},init:function(v,z){v=(v||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==v.indexOf("/sharing")?v+"/":v+"/sharing/rest/";return this._getSelf(this.portalUrl).then(y.hitch(this,function(C){d.self=
y.mixin({},C);(C=C.user)&&z&&(d.currentToken=z&&z.token,d.loggedInUser=new q(y.mixin(C,{portal:this,credential:z})));d.self.id&&!1===d.self.canSearchPublic&&(d.extraQuery=" AND orgid:"+d.self.id);y.mixin(this,d.self);this.thumbnailUrl=n.formatUrl(this.portalUrl+"portals/self/resources/"+this.thumbnail);this.isOrganization=this.access&&this.access.length?!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),y.hitch(this,function(C){this.onError(C);
throw C;}))},signIn:function(){var v=new a,z=y.hitch(this,function(){this._onSignIn().then(y.hitch(this,function(){v.resolve(d.loggedInUser)}),y.hitch(this,function(C){v.reject(C)}))});if(d&&d.self)d&&d.loggedInUser?setTimeout(function(){v.resolve(d.loggedInUser)},0):z();else this.on("load",y.hitch(this,function(){z()}));return v},signOut:function(){d.loggedInUser.credential&&d.loggedInUser.credential.destroy();d.loggedInUser=null;d.options.disableIdentityLookup=!0;n.clearFieldsFromObject(d.self,
this);d.self=null;return this.init(this.url)},getPortalUser:function(){return d.loggedInUser},addResource:function(v,z){return n.request(this.portalUrl+"portals/self/addResource",{key:v,text:z},{usePost:!0})},update:function(v){return n.request(this.portalUrl+"portals/self/update",v,{usePost:!0})},queryGroups:function(v,z){return this._queryPortal(this.portalUrl+"community/groups",n.formatQueryParams({},v,z),w)},queryItems:function(v,z){return this._queryPortal(this.portalUrl+"search",n.formatQueryParams({},
v,z),A)},queryListings:function(v){v=n.formatQueryParams({},v,!0);var z="";v.q&&-1<v.q.toLowerCase().indexOf("mylistings:true")?(v.q=v.q.toLowerCase().replace("mylistings:true",""),z="?mylistings\x3dtrue"):v.q||(v.q='""');return this._queryPortal(this.portalUrl+"content/listings"+z,v,B)},queryCustomerList:function(v,z){v=n.formatQueryParams({},v,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",v)},getProvisions:function(){return this.getCustomers().then(y.hitch(this,function(v){return v.purchases}))},
getInterests:function(){return this.getCustomers().then(y.hitch(this,function(v){return v.interests}))},getTrials:function(){return this.getCustomers().then(y.hitch(this,function(v){return v.trials}))},getCustomers:function(v){return n.request(this.portalUrl+"portals/self/customers",{status:v||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(v){return v.purchases})},getMyInterests:function(){return this.getPurchases().then(function(v){return v.interests})},getPurchases:function(){return n.request(this.portalUrl+
"portals/self/purchases").then(y.hitch(this,function(v){v.interests=k.map(v.interests,function(z){return y.mixin(z.provision,{listing:z.listing})});v.purchases=k.map(v.purchases,function(z){return y.mixin(z.provision,{listing:z.listing})});v.trials=k.map(v.trials,function(z){return y.mixin(z.provision,{listing:z.listing})});v.interests=n.resultsToTypedArray(F,{portal:this},v.interests);v.trials=n.resultsToTypedArray(F,{portal:this},v.trials);v.purchases=n.resultsToTypedArray(F,{portal:this},v.purchases);
return v}))},queryUsers:function(v,z){return this._queryPortal(this.portalUrl+"community/users",n.formatQueryParams({sortField:"username"},v,z),q)},_onSignIn:function(){d.options.disableIdentityLookup=!1;d.self=null;return h.id.getCredential(this.portalUrl).then(y.hitch(this,"init",this.url)).then(function(){return d.loggedInUser},y.hitch(this,function(v){d.options.disableIdentityLookup=!0;this.onError(v);throw v;}))},_getSelf:function(v){v+="portals/self";if(d.self){var z=new a;setTimeout(function(){z.resolve(d.self)},
0)}else z=n.request(v,{culture:r.locale});return z},_queryPortal:function(v,z,C){var E=y.mixin({num:10,start:0,sortField:"title",sortOrder:"asc"},z),G=["start","query","num","nextStart"];v=n.request(v,E).then(y.hitch(this,function(H){H.results=n.resultsToTypedArray(C,{portal:this},H);H.queryParams=y.mixin({},E);H.nextQueryParams=y.mixin(E,{start:H.nextStart});return n.clearFieldsFromObject(G,H)}));v=y.delegate(v);v.queryParams=y.mixin({},E);v.nextQueryParams=a.when(v,function(H){return H.nextQueryParams});
return u(v)}}),PortalFolder:D,PortalGroup:w,PortalItem:A,PortalUser:q,PortalComment:t,PortalRating:x,PortalUtil:n,PortalResult:u,PortalListing:B};y.mixin(y.getObject("arcgis",!0,h),b);return b})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q){b=b(c,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(v){this._jobUpdateHandler=y.hitch(this,this._jobUpdateHandler);this._getJobStatus=y.hitch(this,this._getJobStatus);this._getResultDataHandler=
y.hitch(this,this._getResultDataHandler);this._getResultImageHandler=y.hitch(this,this._getResultImageHandler);this._executeHandler=y.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(v){this.updateDelay=v},setProcessSpatialReference:function(v){this.processSpatialReference=v},setOutputSpatialReference:function(v){this._setOutSR(v)},setOutSpatialReference:function(v){this._setOutSR(v)},
__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(v){this.outSpatialReference=this.outputSpatialReference=v},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(v,z,C){for(var E in v){var G=v[E];y.isArray(G)?v[E]=k.toJson(r.map(G,function(H){return this._gpEncode({item:H},!0).item},this)):G instanceof Date&&(v[E]=G.getTime())}return this._encode(v,z,C)},_decode:function(v){var z=v.dataType,
C=new F(v);if(-1!==r.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],z))return C;if("GPLinearUnit"===z)C.value=new t(C.value);else if("GPFeatureRecordSetLayer"===z||"GPRecordSet"===z)C.value=new d(C.value);else if("GPDataFile"===z)C.value=new x(C.value);else if("GPDate"===z)v=C.value,y.isString(v)?C.value=new B({date:v}):C.value=new Date(v);else if("GPRasterData"===z||"GPRasterDataLayer"===z)v=v.value.mapImage,C.value=v?new q(v):new A(C.value);else if(-1!==z.indexOf("GPMultiValue:")){var E=z.split(":")[1];
v=C.value;C.value=r.map(v,function(G){return this._decode({paramName:"_name",dataType:E,value:G}).value},this)}else C=null;return C},submitJob:function(v,z,C,E,G){var H=this._getOutSR(),K=G.assembly;v=this._gpEncode(y.mixin({},this._url.query,{f:"json","env:outSR":H?H.wkid||k.toJson(H.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||k.toJson(this.processSpatialReference.toJson()):null},v),null,K&&K[0]);var I=this._jobUpdateHandler,J=this._errorHandler;
return m({url:this._url.path+"/submitJob",content:v,callbackParamName:"callback",load:function(Q,V){I(Q,V,!1,z,C,G.dfd)},error:function(Q){J(Q,E,G.dfd)}})},_jobUpdateHandler:function(v,z,C,E,G,H){var K=v.jobId;z=new u(v);this._successHandler([z],"onStatusUpdate",G,C&&H);if(!C)switch(clearTimeout(this._updateTimers[K]),this._updateTimers[K]=null,H&&H.progress(z),v.jobStatus){case u.STATUS_SUBMITTED:case u.STATUS_EXECUTING:case u.STATUS_WAITING:case u.STATUS_NEW:var I=this._getJobStatus;this._updateTimers[K]=
setTimeout(function(){I(K,C,E,G,H)},this.updateDelay);break;default:this._successHandler([z],"onJobComplete",E,H)}},_getJobStatus:function(v,z,C,E,G){var H=this._jobUpdateHandler;m({url:this._url.path+"/jobs/"+v,content:y.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(K,I){H(K,I,z,C,E,G)},error:this._errorHandler})},_getResultDataHandler:function(v,z,C,E,G){try{var H=this._decode(v);this._successHandler([H],"onGetResultDataComplete",C,G)}catch(K){this._errorHandler(K,
E,G)}},getResultData:function(v,z,C,E){var G=this._getResultDataHandler,H=this._errorHandler,K=new a(l._dfdCanceller);K._pendingDfd=m({url:this._url.path+"/jobs/"+v+"/results/"+z,content:y.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(I,J){G(I,J,C,E,K)},error:function(I){H(I,E,K)}});return K},checkJobStatus:function(v,z,C){var E=this._jobUpdateHandler,G=this._errorHandler,H=new a(l._dfdCanceller);H._pendingDfd=m({url:this._url.path+"/jobs/"+v,content:y.mixin({},
this._url.query,{f:"json"}),callbackParamName:"callback",load:function(K,I){E(K,I,!0,null,z,H)},error:function(K){G(K,C,H)}});return H},cancelJob:function(v,z,C){var E=this._errorHandler,G=new a(l._dfdCanceller);G._pendingDfd=m({url:this._url.path+"/jobs/"+v+"/cancel",content:y.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:y.hitch(this,function(H,K){this._successHandler([H],"onJobCancel",z,G)}),error:function(H){E(H,C,G)}});return G},execute:function(v,z,C,E){var G=this._getOutSR(),
H=E.assembly;v=this._gpEncode(y.mixin({},this._url.query,{f:"json","env:outSR":G?G.wkid||k.toJson(G.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||k.toJson(this.processSpatialReference.toJson()):null},v),null,H&&H[0]);var K=this._executeHandler,I=this._errorHandler;return m({url:this._url.path+"/execute",content:v,callbackParamName:"callback",load:function(J,Q){K(J,Q,z,C,E.dfd)},error:function(J){I(J,C,E.dfd)}})},_executeHandler:function(v,z,C,E,G){try{var H=
v.results,K,I=v.messages;var J=0;for(K=H.length;J<K;J++)H[J]=this._decode(H[J]);J=0;for(K=I.length;J<K;J++)I[J]=new n(I[J]);this._successHandler([H,I],"onExecuteComplete",C,G)}catch(Q){this._errorHandler(Q,E,G)}},_getResultImageHandler:function(v,z,C,E,G){try{var H=this._decode(v);this._successHandler([H],"onGetResultImageComplete",C,G)}catch(K){this._errorHandler(K,E,G)}},getResultImage:function(v,z,C,E,G){var H=this._getResultImageHandler,K=this._errorHandler;C=this._gpEncode(y.mixin({},this._url.query,
{f:"json"},C.toJson()));var I=new a(l._dfdCanceller);I._pendingDfd=m({url:this._url.path+"/jobs/"+v+"/results/"+z,content:C,callbackParamName:"callback",load:function(J,Q){H(J,Q,E,G,I)},error:function(J){K(J,G,I)}});return I},cancelJobStatusUpdates:function(v){clearTimeout(this._updateTimers[v]);this._updateTimers[v]=null},getResultImageLayer:function(v,z,C,E){if(null==z){var G=this._url.path.indexOf("/GPServer/");v=this._url.path.substring(0,G)+"/MapServer/jobs/"+v}else v=this._url.path+"/jobs/"+
v+"/results/"+z;this._url.query&&(v+="?"+g.objectToQuery(this._url.query));z=null==z?new D(v,{imageParameters:C}):new w(v,{imageParameters:C},!0);this.onGetResultImageLayerComplete(z);E&&E(z);return z},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});f._createWrappers(b);y.setObject("tasks.Geoprocessor",b,h);return b})},
"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(b,y,r,a,k,e,g,h){b=b(h,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(m,l){m&&y.isString(m)&&(this._url=g.urlToObject(this.url=m));l&&l.requestOptions&&(this.requestOptions=l.requestOptions);this.normalization=!0;this._errorHandler=y.hitch(this,this._errorHandler);this.registerConnectEvents()},
_useSSL:function(){var m=this._url,l=/^http:/i;this.url&&(this.url=this.url.replace(l,"https:"));m&&m.path&&(m.path=m.path.replace(l,"https:"))},_encode:function(m,l,f){var c={},d;for(d in m)if("declaredClass"!==d){var u=m[d];var n=typeof u;if(null!==u&&void 0!==u&&"function"!==n)if(y.isArray(u)){c[d]=[];var t=u.length;for(n=0;n<t;n++)c[d][n]=this._encode(u[n])}else"object"===n?u.toJson&&(n=u.toJson(f&&f[d]),"esri.tasks.FeatureSet"===u.declaredClass&&n.spatialReference&&(n.sr=n.spatialReference,delete n.spatialReference),
c[d]=l?n:r.toJson(n)):c[d]=u}return c},_successHandler:function(m,l,f,c){l&&this[l].apply(this,m);f&&f.apply(null,m);c&&e._resDfd(c,m)},_errorHandler:function(m,l,f){this.onError(m);l&&l(m);f&&f.errback(m)},setNormalization:function(m){this.normalization=m},onError:function(){}});return k.Task=b})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c){b=b(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(d,u){if(d){y.mixin(this,d);var n=this.features=this.features||[],t=d.spatialReference;t=this.spatialReference=f.createInstance(h.simpleConstructor,t);var x=f.getGeometryType(d.geometryType);this.geometryType=d.geometryType;d.fields&&(this.fields=d.fields);d=f.supportsLazyUnquantization(this.geometryType);var A=f.unquantizeFunction(this.geometryType,this.transform),B=!!(u&&d&&A),F=x&&(B?x.accessorConstructor:
x.simpleConstructor);r.forEach(n,function(w,D){var q=f.createInstance(g.simpleConstructor),v=w.geometry;if(x&&v){var z=q.geometry=f.createInstance(F,B?null:v);z.setSpatialReference(v.spatialReference?f.createInstance(h.simpleConstructor,v.spatialReference):t);B&&z.setupLazyUnquantization(A,v)}q.symbol=w.symbol?c.fromJson(w.symbol):null;q.attributes=w.attributes;n[D]=q});B||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(d){var u=
{};this.displayFieldName&&(u.displayFieldName=this.displayFieldName);this.fields&&(u.fields=this.fields);this.spatialReference?u.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(u.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(u.geometryType=f.getJsonType(this.features[0].geometry)),u.features=m._encodeGraphics(this.features,d));u.geometryType=u.geometryType||this.geometryType;u.exceededTransferLimit=
this.exceededTransferLimit;u.transform=this.transform;return e.fixJson(u)},_hydrate:function(){f.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(d){if(!this.geometryType)return this.transform=null,this;var u=d.translate[0],n=d.translate[1],t=d.scale[0],x=d.scale[1],A=this.features,B=function(q,v,z){var C,E=[];var G=0;for(C=q.length;G<C;G++){var H=q[G];if(0<G){var K=v(H[0]);H=z(H[1]);if(K!==I||H!==J){E.push([K-I,H-J]);var I=K;var J=H}}else I=v(H[0]),
J=z(H[1]),E.push([I,J])}return 0<E.length?E:null},F=function(q,v,z){if("esriGeometryPoint"===q)return function(C){C.x=v(C.x);C.y=z(C.y);return C};if("esriGeometryPolyline"===q||"esriGeometryPolygon"===q)return function(C){var E;var G=C.rings||C.paths;var H=[];var K=0;for(E=G.length;K<E;K++){var I=G[K];(I=B(I,v,z))&&H.push(I)}return 0<H.length?(C.rings?C.rings=H:C.paths=H,C):null};if("esriGeometryMultipoint"===q)return function(C){var E=B(C.points,v,z);return 0<E.length?(C.points=E,C):null};if("esriGeometryEnvelope"===
q)return function(C){return C}}(this.geometryType,function(q){return Math.round((q-u)/t)},function(q){return Math.round((n-q)/x)}),w;var D=0;for(w=A.length;D<w;D++)A[D].geometry&&(F(A[D].geometry)||A[D].setGeometry(null));this.transform=d;return this}});b.createGraphics=function(d){var u=d.geometryType,n=f.createInstance(h.simpleConstructor,d.spatialReference),t=f.getGeometryType(u).accessorConstructor,x=f.unquantizeFunction(u,d.transform);return r.map(d.features,function(A,B){B=f.createInstance(g.simpleConstructor);
var F=A.geometry;if(F){var w=B.geometry=f.createInstance(t);w.setSpatialReference(n);w.setupLazyUnquantization(x,F)}B.attributes=A.attributes;return B})};b.createPolygon=function(d,u,n){if(d){var t=f.createInstance(l.accessorConstructor);t.setSpatialReference(u);u=f.unquantizeFunction("esriGeometryPolygon",n);t.setupLazyUnquantization(u,d)}return t};y.setObject("tasks.FeatureSet",b,k);return b})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),
function(b,y,r,a,k,e,g,h,m){function l(){}b=b(null,{declaredClass:"esri.Graphic",constructor:function(f,c,d,u){this._construct();f&&!f.declaredClass?(this.geometry=f.geometry?h.fromJson(f.geometry):null,this.symbol=f.symbol?m.fromJson(f.symbol):null,this.attributes=f.attributes||null,this.infoTemplate=f.infoTemplate?new g(f.infoTemplate):null):(this.geometry=f,this.symbol=c,this.attributes=d,this.infoTemplate=u)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,
_sourceLayer:null,_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(f){this._parentGraphic=f},setSize:function(f){this.size=f;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(f){this._aggregationSourceLayer=
f;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(f){this._aggregationInfo=f;return this},getChildGraphics:function(){var f=this.getAggregationSourceLayer();return f?f.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var f=[];this._shape&&f.push(this._shape);this._bgShape&&f.push(this._bgShape);return f},getNode:function(){var f=this._shape&&this._shape.getNode();
return f&&f.nodeType?f:null},getNodes:function(){var f=this.getShapes(),c,d,u=f.length,n=[];for(d=0;d<u;d++)(c=f[d]&&f[d].getNode())&&c.nodeType&&n.push(c);return n},getLayer:function(){return this._layer},getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var f=new this.constructor(this.toJson());f.visible=this.visible;f._layer=this._layer;f._sourceLayer=this._sourceLayer;f._aggregationSourceLayer=this._aggregationSourceLayer;f._aggregationInfo=this._aggregationInfo;
f._resolution=this._resolution;return f},draw:function(){var f=this._graphicsLayer;f&&f._draw(this,!0);return this},setGeometry:function(f){this.geometry=f;this._geomVersion++;var c=this._graphicsLayer;c&&(c._updateExtent(this),this.draw(),f&&"polyline"===f.type&&c._updateSVGMarkers());return this},setResolution:function(f){this._resolution=f;return this},getResolution:function(){return this._resolution},setSymbol:function(f,c){var d=this._graphicsLayer,u=this._shape;this.symbol=f;d&&(c&&u&&d._removeShape(this),
this.draw());return this},setAttributes:function(f){this.attributes=f;this.clearCache();return this},setInfoTemplate:function(f){this.infoTemplate=f;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var f=this.getLayer();return this.infoTemplate||f&&f.infoTemplate},getTitle:function(){var f=this.getInfoTemplate(),c=f&&f.title;if(y.isFunction(c))c=c.call(f,this);else if(y.isString(c)){var d=(f=this.getLayer())&&f._getDateOpts;c=e.substitute(this.attributes,
c,{first:!0,dateFormat:d&&d.call(f)})}return c},getContent:function(){var f=this.getInfoTemplate(),c=f&&f.content;if(y.isFunction(c))c=c.call(f,this);else if(y.isString(c)){var d=(f=this.getLayer())&&f._getDateOpts;c=e.substitute(this.attributes,c,{dateFormat:d&&d.call(f)})}return c},attr:function(f,c){null==c||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[f]=c,this._setDataAttr(f,c));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=
!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=!0;this.attr("data-hidden");var f;if(this.getShapes().length){var c=this.getNodes();var d=c.length;for(f=0;f<d;f++)k.show(c[f])}else this.draw();(c=this._graphicsLayer)&&c._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var f=this._graphicsLayer,c,d;if(f){if("canvas-2d"===f.surfaceType)f._removeShape(this);else{var u=this.getNodes();if(d=u.length)for(c=
0;c<d;c++)k.hide(u[c])}f._graphicVisibilityChanged(this)}return this},toJson:function(){var f={};this.geometry&&(f.geometry=this.geometry.toJson());this.attributes&&(f.attributes=y.mixin({},this.attributes));this.symbol&&(f.symbol=this.symbol.toJson());this.infoTemplate&&(f.infoTemplate=this.infoTemplate.toJson());return f},_setDataAttr:function(f,c){var d=this.getNodes(),u,n=d.length;for(u=0;u<n;u++)this._setDOMDataAttr(d[u],f,c)},_setDOMDataAttr:function(f,c,d){null==d?f.removeAttribute(c):f.setAttribute(c,
d)},_applyDataAttrs:function(){var f=this._dataAttrs;if(f){var c=this.getNodes(),d,u=c.length;for(d=0;d<u;d++)for(var n in f)this._setDOMDataAttr(c[d],n,f[n])}},_getViewInfo:function(f){return(f=(f=f||this.getLayer())&&f.getMap())&&f.getViewInfo()},evaluateExpression:function(f,c){return this._getDataValue(f._attributeDef,f._attributeCache,null,null,f,c)},_getDataValue:function(f,c,d,u,n,t){var x=c.id,A=this.attributes,B=f.field,F=c.isNumeric,w=null;if(x){var D=this._computedAttributes,q=this._computedVersion,
v=this._computedGeomVersion;u=this._getViewInfo(u);var z=!(!n||!n.async),C=t&&t.skipCache||z,E=!t||!1!==t.strictReturnType,G=c.dependsOnView||c.isJSFunc,H=c.dependsOnGeometry;D||(D=this._computedAttributes={});G&&!q&&(q=this._computedVersion={});H&&!v&&(v=this._computedGeomVersion={});var K=G&&q[x]!==u.version||H&&v[x]!==this._geomVersion;w=D[x];if(void 0===w||K||C)w=null,c.hasExpr?w=n?n.evaluate(t&&t.context):d.executeFunction(c.compiledFunc,d.createExecContext(this,u)):c.isJSFunc?w=B(this,f):A&&
(w=A[B],F&&this._isValidNumber(w)&&(c=f.normalizationType||"field",d=w,w=null,n=f.normalizationTotal,f=A[f.normalizationField],"log"===c&&0!==d?w=Math.log(d)*Math.LOG10E:"percent-of-total"===c&&this._isValidNumber(n)&&0!==n?w=d/n*100:"field"===c&&this._isValidNumber(f)&&0!==f&&(w=d/f))),E&&(z?F&&(this._construct(),w=w.then(this._sanitizeNumericValue)):w=this._sanitizeValue(w,F)),C||(D[x]=w,G&&(q[x]=u.version),H&&(v[x]=this._geomVersion))}else A&&(w=this._sanitizeValue(A[B],F));return w},_sanitizeValue:function(f,
c){c&&!this._isValidNumber(f)&&(f=null);return f},_sanitizeNumericValue:function(f){return this._sanitizeValue(f,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=y.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(f){return"number"===typeof f&&!isNaN(f)&&Infinity!==f&&-Infinity!==f},clearCache:function(f){if(null!=f){var c=this._computedAttributes,d=this._computedVersion,u=this._computedGeomVersion;c&&(c[f]=void 0);d&&(d[f]=void 0);u&&(u[f]=
void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});b.prototype.getShape=b.prototype.getDojoShape;l.prototype=b.prototype;b.simpleConstructor=l;return a.Graphic=b})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(b,y,r,a,k){b=b(null,{declaredClass:"esri.InfoTemplate",constructor:function(e,g){e&&y.isObject(e)&&!y.isFunction(e)?y.mixin(this,e):(this.title=e||"${*}",this.content=g||"${*}")},
setTitle:function(e){this.title=e;return this},setContent:function(e){this.content=e;return this},toJson:function(){return k.fixJson({title:this.title,content:this.content})}});return a.InfoTemplate=b})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(b,y,r,a,k,e,g,h,m,l,f){var c={createDefaultSymbol:function(d){switch(d){case "esriGeometryPoint":case "esriGeometryMultipoint":var u=
c.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":u=c.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":u=c.createDefaultFillSymbol()}return u},createDefaultMarkerSymbol:function(){return new k},createDefaultLineSymbol:function(){return new g},createDefaultFillSymbol:function(){return new m},getFirstSupportedSymbol:function(d){var u;y.some(d,function(n){n&&-1<c.supportedSymbolTypes.indexOf(n.type)&&(u=n);return!!u});
return u},isPointSymbol:function(d){return d?-1<c.supportedPointSymbolTypes.indexOf(d.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(d,u){var n=null;switch(d.type){case "esriSMS":n=new k(d);break;case "esriPMS":n=new e(d);break;case "esriTS":n=new f(d);break;case "esriSLS":n=void 0!==d.cap?new h(d):new g(d);break;case "esriCLS":n=new h(d);break;case "esriSFS":n=new m(d);break;
case "esriPFS":n=new l(d);break;default:n=(d=u&&u.geometryType)?c.createDefaultSymbol(d):null}return n},getShapeDescriptors:function(d){return d&&d.getShapeDescriptors?d.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};b.mixin(b.getObject("symbol",!0,a),c);return c})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(b,y,r,a,k,e,
g,h,m){var l={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},f={style:l.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};b=b(h,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},
constructor:function(c,d,u,n){c?y.isString(c)?(this.style=c,d&&(this.size=d),u&&(this.outline=u),n&&(this.color=n)):(this.style=g.valueOf(this._styles,this.style),c.outline&&(this.outline=new m(c.outline))):(y.mixin(this,f),this.size=k.pt2px(this.size),this.outline=new m(this.outline),this.color=new r(this.color));this.style||(this.style=l.STYLE_CIRCLE)},setStyle:function(c){this.style=c;return this},setPath:function(c){this.path=c;this.setStyle(l.STYLE_PATH);return this},setOutline:function(c){this.outline=
c;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(c,d,u){this._targetWidth=c;this._targetHeight=d;this._spikeSize=u},getShapeDescriptors:function(){var c,d=this.style,u=(this.size||k.pt2px(f.size))/2,n=0-u,t=0+u,x=0-u,A=0+u;switch(d){case l.STYLE_CIRCLE:var B={type:"circle",cx:0,cy:0,r:u};var F=this.getFill();if(c=this.getStroke())c.style=c.style||"Solid";break;case l.STYLE_CROSS:B={type:"path",path:"M "+n+",0 L "+
t+",0 M 0,"+x+" L 0,"+A+" E"};F=null;c=this.getStroke();break;case l.STYLE_DIAMOND:B={type:"path",path:"M "+n+",0 L 0,"+x+" L "+t+",0 L 0,"+A+" L "+n+",0 Z"};F=this.getFill();c=this.getStroke();break;case l.STYLE_SQUARE:B={type:"path",path:"M "+n+","+A+" L "+n+","+x+" L "+t+","+x+" L "+t+","+A+" L "+n+","+A+" Z"};F=this.getFill();c=this.getStroke();break;case l.STYLE_TRIANGLE:B={type:"path",path:"M "+n+","+A+" L 0,"+x+" L "+t+","+A+" L "+n+","+A+" Z"};F=this.getFill();c=this.getStroke();break;case l.STYLE_X:B=
{type:"path",path:"M "+n+","+A+" L "+t+","+x+" M "+n+","+x+" L "+t+","+A+" E"};F=null;c=this.getStroke();break;case l.STYLE_PATH:B={type:"path",path:this.path||""},F=this.getFill(),c=this.getStroke()}return{defaultShape:B,fill:F,stroke:c}},toJson:function(){var c=this.style,d=this.outline,u=y.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[c]||"esriSMSCircle"});d&&(u.outline=d.toJson());"x"===c||"cross"===c?delete u.color:"target"===c&&(u.style="esriSMSSquare",delete u.color,
0<this._targetHeight&&0<this._targetWidth&&(u.size=k.px2pt(Math.max(this._targetHeight,this._targetWidth))));u.path=this.path;return g.fixJson(u)}});y.mixin(b,l);b.defaultProps=f;y.setObject("symbol.SimpleMarkerSymbol",b,e);e.symbol.defaultSimpleMarkerSymbol=f;return b})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(b,y,r,a,k,e,g,h,m){var l=
y.getObject("dojox.gfx",!0),f=l._base={};l._hasClass=function(x,A){return(x=x.getAttribute("className"))&&0<=(" "+x+" ").indexOf(" "+A+" ")};l._addClass=function(x,A){var B=x.getAttribute("className")||"";(!B||0>(" "+B+" ").indexOf(" "+A+" "))&&x.setAttribute("className",B+(B?" ":"")+A)};l._removeClass=function(x,A){var B=x.getAttribute("className");B&&x.setAttribute("className",B.replace(new RegExp("(^|\\s+)"+A+"(\\s+|$)"),"$1$2"))};f._getFontMeasurements=function(){var x={"1em":0,"1ex":0,"100%":0,
"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},A;if(a("ie")){var B=k.doc.documentElement.style.fontSize||"";B||(k.doc.documentElement.style.fontSize="100%")}var F=h.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},k.body());for(A in x)F.style.fontSize=A,x[A]=16*Math.round(12*F.offsetHeight/16)/12/1E3;a("ie")&&(k.doc.documentElement.style.fontSize=
B);k.body().removeChild(F);return x};var c=null;f._getCachedFontMeasurements=function(x){if(x||!c)c=f._getFontMeasurements();return c};var d=null,u={};f._getTextBox=function(x,A,B){var F=arguments.length,w;d||(d=h.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},k.body()));var D=d;D.className="";var q=D.style;q.borderWidth="0";q.margin="0";q.padding="0";q.outline="0";if(1<F&&A)for(w in A)w in u||(q[w]=A[w]);2<F&&B&&(D.className=B);D.innerHTML=x;D.getBoundingClientRect?
(q=D.getBoundingClientRect(),q={l:q.left,t:q.top,w:q.width||q.right-q.left,h:q.height||q.bottom-q.top}):q=m.getMarginBox(D);D.innerHTML="";return q};f._computeTextLocation=function(x,A,B,F){var w={};switch(x.align){case "end":w.x=x.x-A;break;case "middle":w.x=x.x-A/2;break;default:w.x=x.x}w.y=x.y-B*(F?.75:1);return w};f._computeTextBoundingBox=function(x){if(!l._base._isRendered(x))return{x:0,y:0,width:0,height:0};var A=x.getShape();var B=x.getFont()||l.defaultFont;x=x.getTextWidth();B=l.normalizedLength(B.size);
A=f._computeTextLocation(A,x,B,!0);return{x:A.x,y:A.y,width:x,height:B}};f._isRendered=function(x){for(x=x.parent;x&&x.getParent;)x=x.parent;return null!==x};var n=0;f._getUniqueId=function(){do var x=b._scopeName+"xUnique"+ ++n;while(g.byId(x));return x};var t=a("pointer-events")?"touchAction":a("MSPointer")?"msTouchAction":null;f._fixMsTouchAction=t?function(x){x.rawNode.style[t]="none"}:function(){};y.mixin(l,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",
x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,
cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var x={};return function(A){var B=x[A];if(B)return new B;B=x[A]=
function(){};B.prototype=l["default"+A];return new B}}(),normalizeColor:function(x){return x instanceof r?x:new r(x)},normalizeParameters:function(x,A){var B;if(A){var F={};for(B in x)B in A&&!(B in F)&&(x[B]=A[B])}return x},makeParameters:function(x,A){var B=null;if(!A)return y.delegate(x);var F={};for(B in x)B in F||(F[B]=y.clone(B in A?A[B]:x[B]));return F},formatNumber:function(x,A){var B=x.toString();if(0<=B.indexOf("e"))B=x.toFixed(4);else{var F=B.indexOf(".");0<=F&&5<B.length-F&&(B=x.toFixed(4))}return 0>
x?B:A?" "+B:B},makeFontString:function(x){return x.style+" "+x.variant+" "+x.weight+" "+x.size+" "+x.family},splitFontString:function(x){var A=l.getDefault("Font");x=x.split(/\s+/);if(!(5>x.length)){A.style=x[0];A.variant=x[1];A.weight=x[2];var B=x[3].indexOf("/");A.size=0>B?x[3]:x[3].substring(0,B);var F=4;0>B&&("/"==x[4]?F=6:"/"==x[4].charAt(0)&&(F=5));F<x.length&&(A.family=x.slice(F).join(" "))}return A},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return l._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(x){return x*l.px_in_pt()},px2pt:function(x){return x/l.px_in_pt()},normalizedLength:function(x){if(0===x.length)return 0;if(2<x.length){var A=l.px_in_pt(),B=parseFloat(x);switch(x.slice(-2)){case "px":return B;case "pt":return B*A;case "in":return 72*B*A;case "pc":return 12*B*A;case "mm":return B*l.mm_in_pt*A;case "cm":return B*l.cm_in_pt*A}}return parseFloat(x)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(x,A){return x&&A&&x===A},switchTo:function(x){var A="string"==typeof x?l[x]:x;A&&(e.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(B){l[B]=A[B]}),"string"==typeof x?l.renderer=x:e.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(B){return l.renderer=l[B]&&l[B].Surface===l.Surface?B:null}))}});return l})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],
function(b,y,r){y.switchTo(r);return y})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(b,y,r,a,k){var e=null;r.add("vml",function(g,h,m){m.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';g="adj"in m.firstChild;m.innerHTML="";return g});return{load:function(g,h,m){function l(){h(["dojox/gfx/"+f],function(u){b.renderer=f;e=u;m(u)})}if(e&&"force"!=g)m(e);else{var f=k.forceGfxRenderer;g=!f&&(y.isString(k.gfxRenderer)?
k.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var c,d;!f&&g.length;)switch(g.shift()){case "svg":"SVGAngle"in a.global&&(f="svg");break;case "vml":r("vml")&&(f="vml");break;case "silverlight":try{r("ie")?(c=new ActiveXObject("AgControl.AgControl"),c.IsVersionSupported("1.0"))&&(d=!0):navigator.plugins["Silverlight Plug-In"]&&(d=!0)}catch(u){d=!1}finally{c=null}d&&(f="silverlight");break;case "canvas":a.global.CanvasRenderingContext2D&&(f="canvas")}"canvas"===f&&!1!==k.canvasEvents&&(f=
"canvasWithEvents");"svg"==f&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(l):l()}}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c){function d(v,z){return r.doc.createElementNS?r.doc.createElementNS(v,z):r.doc.createElement(z)}function u(v,z,C,E){return v.setAttributeNS?v.setAttributeNS(z,
C,E):v.setAttribute(C,E)}function n(v){return t.useSvgWeb?r.doc.createTextNode(v,!0):r.doc.createTextNode(v)}var t=l.svg={};t.useSvgWeb="undefined"!=typeof window.svgweb;var x=navigator.userAgent,A=y("ios"),B=y("android"),F=y("chrome")||B&&4<=B?"auto":"optimizeLegibility";t.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};t.getRef=function(v){return v&&"none"!=v?v.match(/^url\(#.+\)$/)?a.byId(v.slice(5,-1)):v.match(/^#dojoUnique\d+$/)?a.byId(v.slice(1)):null:null};t.dasharray=
{solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var w=0;t.Shape=k("dojox.gfx.svg.Shape",f.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var v=this.rawNode.getAttribute("fill");(v=t.getRef(v))&&v.parentNode.removeChild(v)}this.clip&&(v=this.rawNode.getAttribute("clip-path"))&&(v=a.byId(v.match(/gfx_clip[\d]+/)[0]))&&v.parentNode.removeChild(v);
f.Shape.prototype.destroy.apply(this,arguments)},setFill:function(v){if(!v)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var z=function(E){this.setAttribute(E,C[E].toFixed(8))};if("object"==typeof v&&"type"in v){switch(v.type){case "linear":var C=l.makeParameters(l.defaultLinearGradient,v);v=this._setFillObject(C,"linearGradient");e.forEach(["x1","y1","x2","y2"],z,v);break;case "radial":C=l.makeParameters(l.defaultRadialGradient,
v);v=this._setFillObject(C,"radialGradient");e.forEach(["cx","cy","r"],z,v);break;case "pattern":C=l.makeParameters(l.defaultPattern,v),v=this._setFillObject(C,"pattern"),e.forEach(["x","y","width","height"],z,v)}this.fillStyle=C;return this}this.fillStyle=C=l.normalizeColor(v);this.rawNode.setAttribute("fill",C.toCss());this.rawNode.setAttribute("fill-opacity",C.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(v){var z=this.rawNode;if(!v)return this.strokeStyle=
null,z.setAttribute("stroke","none"),z.setAttribute("stroke-opacity",0),this;if("string"==typeof v||b.isArray(v)||v instanceof m)v={color:v};v=this.strokeStyle=l.makeParameters(l.defaultStroke,v);v.color=l.normalizeColor(v.color);if(v){var C=0>v.width?0:v.width;z.setAttribute("stroke",v.color.toCss());z.setAttribute("stroke-opacity",v.color.a);z.setAttribute("stroke-width",C);z.setAttribute("stroke-linecap",v.cap);"number"==typeof v.join?(z.setAttribute("stroke-linejoin","miter"),z.setAttribute("stroke-miterlimit",
v.join)):z.setAttribute("stroke-linejoin",v.join);var E=v.style.toLowerCase();E in t.dasharray&&(E=t.dasharray[E]);if(E instanceof Array){E=b._toArray(E);var G;for(G=0;G<E.length;++G)E[G]*=C;if("butt"!=v.cap){for(G=0;G<E.length;G+=2)E[G]-=C,1>E[G]&&(E[G]=1);for(G=1;G<E.length;G+=2)E[G]+=C}E=E.join(",")}z.setAttribute("stroke-dasharray",E);z.setAttribute("dojoGfxStrokeStyle",v.style)}return this},_getParentSurface:function(){for(var v=this.parent;v&&!(v instanceof l.Surface);v=v.parent);return v},
_setFillObject:function(v,z){var C=t.xmlns.svg;this.fillStyle=v;var E=this._getParentSurface().defNode,G=this.rawNode.getAttribute("fill");if(G=t.getRef(G))if(G.tagName.toLowerCase()!=z.toLowerCase()){var H=G.id;G.parentNode.removeChild(G);G=d(C,z);G.setAttribute("id",H);E.appendChild(G)}else for(;G.childNodes.length;)G.removeChild(G.lastChild);else G=d(C,z),G.setAttribute("id",l._base._getUniqueId()),E.appendChild(G);if("pattern"==z)G.setAttribute("patternUnits","userSpaceOnUse"),C=d(C,"image"),
C.setAttribute("x",0),C.setAttribute("y",0),C.setAttribute("width",(0>v.width?0:v.width).toFixed(8)),C.setAttribute("height",(0>v.height?0:v.height).toFixed(8)),u(C,t.xmlns.xlink,"xlink:href",v.src),G.appendChild(C);else for(G.setAttribute("gradientUnits","userSpaceOnUse"),z=0;z<v.colors.length;++z){E=v.colors[z];H=d(C,"stop");var K=E.color=l.normalizeColor(E.color);H.setAttribute("offset",E.offset.toFixed(8));H.setAttribute("stop-color",K.toCss());H.setAttribute("stop-opacity",K.a);G.appendChild(H)}this.rawNode.setAttribute("fill",
"url(#"+G.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return G},_applyTransform:function(){if(this.matrix){var v=this.matrix;this.rawNode.setAttribute("transform","matrix("+v.xx.toFixed(8)+","+v.yx.toFixed(8)+","+v.xy.toFixed(8)+","+v.yy.toFixed(8)+","+v.dx.toFixed(8)+","+v.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(v){v=this.rawNode=v;"image"!=this.shape.type&&v.setAttribute("fill",
"none");v.setAttribute("fill-opacity",0);v.setAttribute("stroke","none");v.setAttribute("stroke-opacity",0);v.setAttribute("stroke-width",1);v.setAttribute("stroke-linecap","butt");v.setAttribute("stroke-linejoin","miter");v.setAttribute("stroke-miterlimit",4);v.__gfxObject__=this},setShape:function(v){this.shape=l.makeParameters(this.shape,v);for(var z in this.shape)if("type"!=z){v=this.shape[z];if("width"===z||"height"===z)v=0>v?0:v;this.rawNode.setAttribute(z,v)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);
return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(v){this.inherited(arguments);var z=v?"width"in v?"rect":"cx"in v?"ellipse":"points"in v?"polyline":"d"in v?"path":null:null;if(v&&!z)return this;"polyline"===z&&(v=b.clone(v),v.points=v.points.join(","));var C,E=h.get(this.rawNode,"clip-path");E&&(C=a.byId(E.match(/gfx_clip[\d]+/)[0]))&&C.removeChild(C.childNodes[0]);v?(C?(z=d(t.xmlns.svg,z),C.appendChild(z)):
(E="gfx_clip"+ ++w,this.rawNode.setAttribute("clip-path","url(#"+E+")"),C=d(t.xmlns.svg,"clipPath"),z=d(t.xmlns.svg,z),C.appendChild(z),this.rawNode.parentNode.insertBefore(C,this.rawNode),h.set(C,"id",E)),h.set(z,v)):(this.rawNode.removeAttribute("clip-path"),C&&C.parentNode.removeChild(C));return this},_removeClipNode:function(){var v,z=h.get(this.rawNode,"clip-path");z&&(v=a.byId(z.match(/gfx_clip[\d]+/)[0]))&&v.parentNode.removeChild(v);return v}});t.Group=k("dojox.gfx.svg.Group",t.Shape,{constructor:function(){f.Container._init.call(this)},
setRawNode:function(v){this.rawNode=v;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);t.Shape.prototype.destroy.apply(this,arguments)}});t.Group.nodeType="g";t.Rect=k("dojox.gfx.svg.Rect",[t.Shape,f.Rect],{setShape:function(v){this.shape=l.makeParameters(this.shape,v);this.bbox=null;for(var z in this.shape)if("type"!=z&&"r"!=z){v=this.shape[z];if("width"===z||"height"===z)v=0>v?0:v;this.rawNode.setAttribute(z,v)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),
this.rawNode.setAttribute("rx",this.shape.r));return this}});t.Rect.nodeType="rect";t.Ellipse=k("dojox.gfx.svg.Ellipse",[t.Shape,f.Ellipse],{});t.Ellipse.nodeType="ellipse";t.Circle=k("dojox.gfx.svg.Circle",[t.Shape,f.Circle],{});t.Circle.nodeType="circle";t.Line=k("dojox.gfx.svg.Line",[t.Shape,f.Line],{});t.Line.nodeType="line";t.Polyline=k("dojox.gfx.svg.Polyline",[t.Shape,f.Polyline],{setShape:function(v,z){v&&v instanceof Array?(this.shape=l.makeParameters(this.shape,{points:v}),z&&this.shape.points.length&&
this.shape.points.push(this.shape.points[0])):this.shape=l.makeParameters(this.shape,v);this.bbox=null;this._normalizePoints();v=[];z=this.shape.points;for(var C=0;C<z.length;++C)v.push(z[C].x.toFixed(8),z[C].y.toFixed(8));this.rawNode.setAttribute("points",v.join(" "));return this}});t.Polyline.nodeType="polyline";t.Image=k("dojox.gfx.svg.Image",[t.Shape,f.Image],{setShape:function(v){this.shape=l.makeParameters(this.shape,v);this.bbox=null;v=this.rawNode;for(var z in this.shape)if("type"!=z&&"src"!=
z){var C=this.shape[z];if("width"===z||"height"===z)C=0>C?0:C;v.setAttribute(z,C)}v.setAttribute("preserveAspectRatio","none");u(v,t.xmlns.xlink,"xlink:href",this.shape.src);v.__gfxObject__=this;return this}});t.Image.nodeType="image";t.Text=k("dojox.gfx.svg.Text",[t.Shape,f.Text],{setShape:function(v){this.shape=l.makeParameters(this.shape,v);this.bbox=null;v=this.rawNode;var z=this.shape;v.setAttribute("x",z.x);v.setAttribute("y",z.y);v.setAttribute("text-anchor",z.align);v.setAttribute("text-decoration",
z.decoration);v.setAttribute("rotate",z.rotated?90:0);v.setAttribute("kerning",z.kerning?"auto":0);v.setAttribute("text-rendering",F);v.firstChild?v.firstChild.nodeValue=z.text:v.appendChild(n(z.text));return this},getTextWidth:function(){var v=this.rawNode,z=v.parentNode;v=v.cloneNode(!0);v.style.visibility="hidden";var C=0,E=v.firstChild.nodeValue;z.appendChild(v);if(""!=E)for(;!C;)C=v.getBBox?parseInt(v.getBBox().width):68;z.removeChild(v);return C},getBoundingBox:function(){var v=null;if(this.getShape().text)try{v=
this.rawNode.getBBox()}catch(z){v={x:0,y:0,width:0,height:0}}return v}});t.Text.nodeType="text";t.Path=k("dojox.gfx.svg.Path",[t.Shape,c.Path],{_updateWithSegment:function(v){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(v){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});t.Path.nodeType="path";t.TextPath=k("dojox.gfx.svg.TextPath",
[t.Shape,c.TextPath],{_updateWithSegment:function(v){this.inherited(arguments);this._setTextPath()},setShape:function(v){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var v=this.rawNode;if(!v.firstChild){var z=d(t.xmlns.svg,"textPath"),C=n("");z.appendChild(C);v.appendChild(z)}z=(z=v.firstChild.getAttributeNS(t.xmlns.xlink,"href"))&&t.getRef(z);if(!z&&(C=this._getParentSurface())){C=C.defNode;z=d(t.xmlns.svg,"path");var E=l._base._getUniqueId();
z.setAttribute("id",E);C.appendChild(z);u(v.firstChild,t.xmlns.xlink,"xlink:href","#"+E)}z&&z.setAttribute("d",this.shape.path)}},_setText:function(){var v=this.rawNode;if(!v.firstChild){var z=d(t.xmlns.svg,"textPath"),C=n("");z.appendChild(C);v.appendChild(z)}v=v.firstChild;z=this.text;v.setAttribute("alignment-baseline","middle");switch(z.align){case "middle":v.setAttribute("text-anchor","middle");v.setAttribute("startOffset","50%");break;case "end":v.setAttribute("text-anchor","end");v.setAttribute("startOffset",
"100%");break;default:v.setAttribute("text-anchor","start"),v.setAttribute("startOffset","0%")}v.setAttribute("baseline-shift","0.5ex");v.setAttribute("text-decoration",z.decoration);v.setAttribute("rotate",z.rotated?90:0);v.setAttribute("kerning",z.kerning?"auto":0);v.firstChild.data=z.text}});t.TextPath.nodeType="text";var D=534<function(){var v=/WebKit\/(\d*)/.exec(x);return v?v[1]:0}();t.Surface=k("dojox.gfx.svg.Surface",f.Surface,{constructor:function(){f.Container._init.call(this)},destroy:function(){f.Container.clear.call(this,
!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(v,z){if(!this.rawNode)return this;v=0>v?0:v;z=0>z?0:z;this.rawNode.setAttribute("width",v);this.rawNode.setAttribute("height",z);D&&(this.rawNode.style.width=v,this.rawNode.style.height=z);return this},getDimensions:function(){return this.rawNode?{width:l.normalizedLength(this.rawNode.getAttribute("width")),height:l.normalizedLength(this.rawNode.getAttribute("height"))}:null}});t.createSurface=function(v,z,C){var E=new t.Surface;
E.rawNode=d(t.xmlns.svg,"svg");E.rawNode.setAttribute("overflow","hidden");z&&E.rawNode.setAttribute("width",0>z?0:z);C&&E.rawNode.setAttribute("height",0>C?0:C);z=d(t.xmlns.svg,"defs");E.rawNode.appendChild(z);E.defNode=z;E._parent=a.byId(v);E._parent.appendChild(E.rawNode);l._base._fixMsTouchAction(E);return E};y={_setFont:function(){var v=this.fontStyle;this.rawNode.setAttribute("font-style",v.style);this.rawNode.setAttribute("font-variant",v.variant);this.rawNode.setAttribute("font-weight",v.weight);
this.rawNode.setAttribute("font-size",v.size);this.rawNode.setAttribute("font-family",v.family)}};var q=f.Container;k=t.Container={openBatch:function(){if(!this._batch){var v=t.useSvgWeb?r.doc.createDocumentFragment(!0):r.doc.createDocumentFragment();this.fragment=v}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(v){this!=v.getParent()&&(this.fragment?
this.fragment.appendChild(v.rawNode):this.rawNode.appendChild(v.rawNode),q.add.apply(this,arguments),v.setClip(v.clip));return this},remove:function(v,z){this==v.getParent()&&(this.rawNode==v.rawNode.parentNode&&this.rawNode.removeChild(v.rawNode),this.fragment&&this.fragment==v.rawNode.parentNode&&this.fragment.removeChild(v.rawNode),v._removeClipNode(),q.remove.apply(this,arguments));return this},clear:function(){for(var v=this.rawNode;v.lastChild;)v.removeChild(v.lastChild);var z=this.defNode;
if(z){for(;z.lastChild;)z.removeChild(z.lastChild);v.appendChild(z)}return q.clear.apply(this,arguments)},getBoundingBox:q.getBoundingBox,_moveChildToFront:q._moveChildToFront,_moveChildToBack:q._moveChildToBack};c=t.Creator={createObject:function(v,z){if(!this.rawNode)return null;var C=new v;v=d(t.xmlns.svg,v.nodeType);C.setRawNode(v);C.setShape(z);this.add(C);return C}};b.extend(t.Text,y);b.extend(t.TextPath,y);b.extend(t.Group,k);b.extend(t.Group,f.Creator);b.extend(t.Group,c);b.extend(t.Surface,
k);b.extend(t.Surface,f.Creator);b.extend(t.Surface,c);t.fixTarget=function(v,z){v.gfxTarget||(v.gfxTarget=A&&v.target.wholeText?v.target.parentElement.__gfxObject__:v.target.__gfxObject__);return!0};t.useSvgWeb&&(t.createSurface=function(v,z,C){var E=new t.Surface;z=0>z?0:z;C=0>C?0:C;if(!z||!C){var G=g.position(v);z=z||G.w;C=C||G.h}v=a.byId(v);G=v.id?v.id+"_svgweb":l._base._getUniqueId();var H=d(t.xmlns.svg,"svg");H.id=G;H.setAttribute("width",z);H.setAttribute("height",C);svgweb.appendChild(H,v);
H.addEventListener("SVGLoad",function(){E.rawNode=this;E.isLoaded=!0;var K=d(t.xmlns.svg,"defs");E.rawNode.appendChild(K);E.defNode=K;if(E.onLoad)E.onLoad(E)},!1);E.isLoaded=!1;return E},t.Surface.extend({destroy:function(){var v=this.rawNode;svgweb.removeChild(v,v.parentNode)}}),y={connect:function(v,z,C){"on"===v.substring(0,2)&&(v=v.substring(2));C=2==arguments.length?z:b.hitch(z,C);this.getEventSource().addEventListener(v,C,!1);return[this,v,C]},disconnect:function(v){this.getEventSource().removeEventListener(v[1],
v[2],!1);delete v[0]}},b.extend(t.Shape,y),b.extend(t.Surface,y));return t})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(b,y,r,a,k,e,g,h,m,l){function f(d,u){for(var n=d.length-1;u<n;)d[u]=d[++u];d.length=n}var c=b.shape={};c.Shape=r("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=
this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(k("gfxRegistry")){var d=c.register(this);this.getUID=function(){return d}}},destroy:function(){k("gfxRegistry")&&c.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},
getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var d=this.getBoundingBox();if(!d)return null;var u=this._getRealMatrix();return[l.multiplyPoint(u,d.x,d.y),l.multiplyPoint(u,d.x+d.width,d.y),l.multiplyPoint(u,d.x+d.width,d.y+d.height),l.multiplyPoint(u,d.x,d.y+d.height)]},getEventSource:function(){return this.rawNode},setClip:function(d){this.clip=d},getClip:function(){return this.clip},setShape:function(d){this.shape=b.makeParameters(this.shape,d);this.bbox=null;
return this},setFill:function(d){if(!d)return this.fillStyle=null,this;var u=null;if("object"==typeof d&&"type"in d)switch(d.type){case "linear":u=b.makeParameters(b.defaultLinearGradient,d);break;case "radial":u=b.makeParameters(b.defaultRadialGradient,d);break;case "pattern":u=b.makeParameters(b.defaultPattern,d)}else u=b.normalizeColor(d);this.fillStyle=u;return this},setStroke:function(d){if(!d)return this.strokeStyle=null,this;if("string"==typeof d||y.isArray(d)||d instanceof m)d={color:d};d=
this.strokeStyle=b.makeParameters(b.defaultStroke,d);d.color=b.normalizeColor(d.color);return this},setTransform:function(d){this.matrix=l.clone(d?l.normalize(d):l.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var d=this.getParent();d&&(d._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var d=this.getParent();d&&(d._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},
applyRightTransform:function(d){return d?this.setTransform([this.matrix,d]):this},applyLeftTransform:function(d){return d?this.setTransform([d,this.matrix]):this},applyTransform:function(d){return d?this.setTransform([this.matrix,d]):this},removeShape:function(d){this.parent&&this.parent.remove(this,d);return this},_setParent:function(d,u){this.parent=d;return this._updateParentMatrix(u)},_updateParentMatrix:function(d){this.parentMatrix=d?l.clone(d):null;return this._applyTransform()},_getRealMatrix:function(){for(var d=
this.matrix,u=this.parent;u;)u.matrix&&(d=l.multiply(u.matrix,d)),u=u.parent;return d}});c._eventsProcessing={on:function(d,u){return e(this.getEventSource(),d,c.fixCallback(this,b.fixTarget,u))},connect:function(d,u,n){"on"==d.substring(0,2)&&(d=d.substring(2));return this.on(d,n?y.hitch(u,n):u)},disconnect:function(d){return d.remove()}};c.fixCallback=function(d,u,n,t){t||(t=n,n=null);if(y.isString(t)){n=n||a.global;if(!n[t])throw['dojox.gfx.shape.fixCallback: scope["',t,'"] is null (scope\x3d"',
n,'")'].join("");return function(x){return u(x,d)?n[t].apply(n,arguments||[]):void 0}}return n?function(x){return u(x,d)?t.apply(n,arguments||[]):void 0}:function(x){return u(x,d)?t.apply(n,arguments):void 0}};y.extend(c.Shape,c._eventsProcessing);c.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(d){var u=d.getParent();u&&u.remove(d,!0);this.children.push(d);return d._setParent(this,this._getRealMatrix())},
remove:function(d,u){for(var n=0;n<this.children.length;++n)if(this.children[n]==d){u||(d.parent=null,d.parentMatrix=null);f(this.children,n);break}return this},clear:function(d){for(var u,n=0;n<this.children.length;++n)u=this.children[n],u.parent=null,u.parentMatrix=null,d&&u.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var d=null;g.forEach(this.children,function(u){var n=u.getBoundingBox();n&&((u=u.getTransform())&&(n=l.multiplyRectangle(u,n)),d?(d.x=Math.min(d.x,
n.x),d.y=Math.min(d.y,n.y),d.endX=Math.max(d.endX,n.x+n.width),d.endY=Math.max(d.endY,n.y+n.height)):d={x:n.x,y:n.y,endX:n.x+n.width,endY:n.y+n.height})});d&&(d.width=d.endX-d.x,d.height=d.endY-d.y);return d}return null},_moveChildToFront:function(d){for(var u=0;u<this.children.length;++u)if(this.children[u]==d){f(this.children,u);this.children.push(d);break}return this},_moveChildToBack:function(d){for(var u=0;u<this.children.length;++u)if(this.children[u]==d){f(this.children,u);this.children.unshift(d);
break}return this}};c.Surface=r("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){g.forEach(this._nodes,h.destroy);this._nodes=[];g.forEach(this._events,function(d){d&&d.remove()});this._events=[];this.rawNode=null;if(k("ie"))for(;this._parent.lastChild;)h.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},
isLoaded:!0,onLoad:function(d){},whenLoaded:function(d,u){var n=y.hitch(d,u);if(this.isLoaded)n(this);else e.once(this,"load",function(t){n(t)})}});y.extend(c.Surface,c._eventsProcessing);c.Rect=r("dojox.gfx.shape.Rect",c.Shape,{constructor:function(d){this.shape=b.getDefault("Rect");this.rawNode=d},getBoundingBox:function(){return this.shape}});c.Ellipse=r("dojox.gfx.shape.Ellipse",c.Shape,{constructor:function(d){this.shape=b.getDefault("Ellipse");this.rawNode=d},getBoundingBox:function(){if(!this.bbox){var d=
this.shape;this.bbox={x:d.cx-d.rx,y:d.cy-d.ry,width:2*d.rx,height:2*d.ry}}return this.bbox}});c.Circle=r("dojox.gfx.shape.Circle",c.Shape,{constructor:function(d){this.shape=b.getDefault("Circle");this.rawNode=d},getBoundingBox:function(){if(!this.bbox){var d=this.shape;this.bbox={x:d.cx-d.r,y:d.cy-d.r,width:2*d.r,height:2*d.r}}return this.bbox}});c.Line=r("dojox.gfx.shape.Line",c.Shape,{constructor:function(d){this.shape=b.getDefault("Line");this.rawNode=d},getBoundingBox:function(){if(!this.bbox){var d=
this.shape;this.bbox={x:Math.min(d.x1,d.x2),y:Math.min(d.y1,d.y2),width:Math.abs(d.x2-d.x1),height:Math.abs(d.y2-d.y1)}}return this.bbox}});c.Polyline=r("dojox.gfx.shape.Polyline",c.Shape,{constructor:function(d){this.shape=b.getDefault("Polyline");this.rawNode=d},setShape:function(d,u){d&&d instanceof Array?(this.inherited(arguments,[{points:d}]),u&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[d]);return this},_normalizePoints:function(){var d=
this.shape.points,u=d&&d.length;if(u&&"number"==typeof d[0]){for(var n=[],t=0;t<u;t+=2)n.push({x:d[t],y:d[t+1]});this.shape.points=n}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var d=this.shape.points,u=d.length,n=d[0],t=n.x,x=n.y,A=n.x,B=n.y,F=1;F<u;++F)n=d[F],t>n.x&&(t=n.x),A<n.x&&(A=n.x),x>n.y&&(x=n.y),B<n.y&&(B=n.y);this.bbox={x:t,y:x,width:A-t,height:B-x}}return this.bbox}});c.Image=r("dojox.gfx.shape.Image",c.Shape,{constructor:function(d){this.shape=b.getDefault("Image");
this.rawNode=d},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});c.Text=r(c.Shape,{constructor:function(d){this.fontStyle=null;this.shape=b.getDefault("Text");this.rawNode=d},getFont:function(){return this.fontStyle},setFont:function(d){this.fontStyle="string"==typeof d?b.splitFontString(d):b.makeParameters(b.defaultFont,d);this._setFont();return this},getBoundingBox:function(){var d=null;this.getShape().text&&(d=b._base._computeTextBoundingBox(this));
return d}});c.Creator={createShape:function(d){switch(d.type){case b.defaultPath.type:return this.createPath(d);case b.defaultRect.type:return this.createRect(d);case b.defaultCircle.type:return this.createCircle(d);case b.defaultEllipse.type:return this.createEllipse(d);case b.defaultLine.type:return this.createLine(d);case b.defaultPolyline.type:return this.createPolyline(d);case b.defaultImage.type:return this.createImage(d);case b.defaultText.type:return this.createText(d);case b.defaultTextPath.type:return this.createTextPath(d)}return null},
createGroup:function(){return this.createObject(b.Group)},createRect:function(d){return this.createObject(b.Rect,d)},createEllipse:function(d){return this.createObject(b.Ellipse,d)},createCircle:function(d){return this.createObject(b.Circle,d)},createLine:function(d){return this.createObject(b.Line,d)},createPolyline:function(d){return this.createObject(b.Polyline,d)},createImage:function(d){return this.createObject(b.Image,d)},createText:function(d){return this.createObject(b.Text,d)},createPath:function(d){return this.createObject(b.Path,
d)},createTextPath:function(d){return this.createObject(b.TextPath,{}).setText(d)},createObject:function(d,u){return null}};return c})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(b,y){var r=b.matrix={},a={};r._degToRad=function(k){return a[k]||(a[k]=Math.PI*k/180)};r._radToDeg=function(k){return k/Math.PI*180};r.Matrix2D=function(k){if(k)if("number"==typeof k)this.xx=this.yy=k;else if(k instanceof Array){if(0<k.length){for(var e=r.normalize(k[0]),g=1;g<k.length;++g){var h=
e,m=r.normalize(k[g]);e=new r.Matrix2D;e.xx=h.xx*m.xx+h.xy*m.yx;e.xy=h.xx*m.xy+h.xy*m.yy;e.yx=h.yx*m.xx+h.yy*m.yx;e.yy=h.yx*m.xy+h.yy*m.yy;e.dx=h.xx*m.dx+h.xy*m.dy+h.dx;e.dy=h.yx*m.dx+h.yy*m.dy+h.dy}y.mixin(this,e)}}else y.mixin(this,k)};y.extend(r.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});y.mixin(r,{identity:new r.Matrix2D,flipX:new r.Matrix2D({xx:-1}),flipY:new r.Matrix2D({yy:-1}),flipXY:new r.Matrix2D({xx:-1,yy:-1}),translate:function(k,e){return 1<arguments.length?new r.Matrix2D({dx:k,dy:e}):
new r.Matrix2D({dx:k.x,dy:k.y})},scale:function(k,e){return 1<arguments.length?new r.Matrix2D({xx:k,yy:e}):"number"==typeof k?new r.Matrix2D({xx:k,yy:k}):new r.Matrix2D({xx:k.x,yy:k.y})},rotate:function(k){var e=Math.cos(k);k=Math.sin(k);return new r.Matrix2D({xx:e,xy:-k,yx:k,yy:e})},rotateg:function(k){return r.rotate(r._degToRad(k))},skewX:function(k){return new r.Matrix2D({xy:Math.tan(k)})},skewXg:function(k){return r.skewX(r._degToRad(k))},skewY:function(k){return new r.Matrix2D({yx:Math.tan(k)})},
skewYg:function(k){return r.skewY(r._degToRad(k))},reflect:function(k,e){1==arguments.length&&(e=k.y,k=k.x);var g=k*k,h=e*e,m=g+h,l=2*k*e/m;return new r.Matrix2D({xx:2*g/m-1,xy:l,yx:l,yy:2*h/m-1})},project:function(k,e){1==arguments.length&&(e=k.y,k=k.x);var g=k*k,h=e*e,m=g+h,l=k*e/m;return new r.Matrix2D({xx:g/m,xy:l,yx:l,yy:h/m})},normalize:function(k){return k instanceof r.Matrix2D?k:new r.Matrix2D(k)},isIdentity:function(k){return 1==k.xx&&0==k.xy&&0==k.yx&&1==k.yy&&0==k.dx&&0==k.dy},clone:function(k){var e=
new r.Matrix2D,g;for(g in k)"number"==typeof k[g]&&"number"==typeof e[g]&&e[g]!=k[g]&&(e[g]=k[g]);return e},invert:function(k){k=r.normalize(k);var e=k.xx*k.yy-k.xy*k.yx;return k=new r.Matrix2D({xx:k.yy/e,xy:-k.xy/e,yx:-k.yx/e,yy:k.xx/e,dx:(k.xy*k.dy-k.yy*k.dx)/e,dy:(k.yx*k.dx-k.xx*k.dy)/e})},_multiplyPoint:function(k,e,g){return{x:k.xx*e+k.xy*g+k.dx,y:k.yx*e+k.yy*g+k.dy}},multiplyPoint:function(k,e,g){k=r.normalize(k);return"number"==typeof e&&"number"==typeof g?r._multiplyPoint(k,e,g):r._multiplyPoint(k,
e.x,e.y)},multiplyRectangle:function(k,e){var g=r.normalize(k);e=e||{x:0,y:0,width:0,height:0};if(r.isIdentity(g))return{x:e.x,y:e.y,width:e.width,height:e.height};k=r.multiplyPoint(g,e.x,e.y);var h=r.multiplyPoint(g,e.x,e.y+e.height),m=r.multiplyPoint(g,e.x+e.width,e.y);e=r.multiplyPoint(g,e.x+e.width,e.y+e.height);g=Math.min(k.x,h.x,m.x,e.x);var l=Math.min(k.y,h.y,m.y,e.y);return{x:g,y:l,width:Math.max(k.x,h.x,m.x,e.x)-g,height:Math.max(k.y,h.y,m.y,e.y)-l}},multiply:function(k){for(var e=r.normalize(k),
g=1;g<arguments.length;++g){var h=e,m=r.normalize(arguments[g]);e=new r.Matrix2D;e.xx=h.xx*m.xx+h.xy*m.yx;e.xy=h.xx*m.xy+h.xy*m.yy;e.yx=h.yx*m.xx+h.yy*m.yx;e.yy=h.yx*m.xy+h.yy*m.yy;e.dx=h.xx*m.dx+h.xy*m.dy+h.dx;e.dy=h.yx*m.dx+h.yy*m.dy+h.dy}return e},_sandwich:function(k,e,g){return r.multiply(r.translate(e,g),k,r.translate(-e,-g))},scaleAt:function(k,e,g,h){switch(arguments.length){case 4:return r._sandwich(r.scale(k,e),g,h);case 3:return"number"==typeof g?r._sandwich(r.scale(k),e,g):r._sandwich(r.scale(k,
e),g.x,g.y)}return r._sandwich(r.scale(k),e.x,e.y)},rotateAt:function(k,e,g){return 2<arguments.length?r._sandwich(r.rotate(k),e,g):r._sandwich(r.rotate(k),e.x,e.y)},rotategAt:function(k,e,g){return 2<arguments.length?r._sandwich(r.rotateg(k),e,g):r._sandwich(r.rotateg(k),e.x,e.y)},skewXAt:function(k,e,g){return 2<arguments.length?r._sandwich(r.skewX(k),e,g):r._sandwich(r.skewX(k),e.x,e.y)},skewXgAt:function(k,e,g){return 2<arguments.length?r._sandwich(r.skewXg(k),e,g):r._sandwich(r.skewXg(k),e.x,
e.y)},skewYAt:function(k,e,g){return 2<arguments.length?r._sandwich(r.skewY(k),e,g):r._sandwich(r.skewY(k),e.x,e.y)},skewYgAt:function(k,e,g){return 2<arguments.length?r._sandwich(r.skewYg(k),e,g):r._sandwich(r.skewYg(k),e.x,e.y)}});b.Matrix2D=r.Matrix2D;return r})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(b,y,r,a,k){k=r("dojox.gfx.path.Path",k.Shape,{constructor:function(e){this.shape=y.clone(b.defaultPath);this.segments=
[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=e;this.segmented=!1},setAbsoluteMode:function(e){this._confirmSegmented();this.absolute="string"==typeof e?"absolute"==e:e;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();
if(this.tbbox)return this.tbbox;var e=this.bbox,g=this._getRealMatrix();this.bbox=null;for(var h=0,m=this.segments.length;h<m;++h)this._updateWithSegment(this.segments[h],g);g=this.bbox;this.bbox=e;return this.tbbox=g?[{x:g.l,y:g.t},{x:g.r,y:g.t},{x:g.r,y:g.b},{x:g.l,y:g.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(e,g,h){h&&(g=a.multiplyPoint(h,
e,g),e=g.x,g=g.y);this.bbox&&"l"in this.bbox?(this.bbox.l>e&&(this.bbox.l=e),this.bbox.r<e&&(this.bbox.r=e),this.bbox.t>g&&(this.bbox.t=g),this.bbox.b<g&&(this.bbox.b=g)):this.bbox={l:e,b:g,r:e,t:g}},_updateWithSegment:function(e,g){var h=e.args,m=h.length,l;switch(e.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(l=0;l<m;l+=2)this._updateBBox(h[l],h[l+1],g);this.last.x=h[m-2];this.last.y=h[m-1];this.absolute=!0;break;case "H":for(l=0;l<m;++l)this._updateBBox(h[l],this.last.y,g);
this.last.x=h[m-1];this.absolute=!0;break;case "V":for(l=0;l<m;++l)this._updateBBox(this.last.x,h[l],g);this.last.y=h[m-1];this.absolute=!0;break;case "m":l=0;"x"in this.last||(this._updateBBox(this.last.x=h[0],this.last.y=h[1],g),l=2);for(;l<m;l+=2)this._updateBBox(this.last.x+=h[l],this.last.y+=h[l+1],g);this.absolute=!1;break;case "l":case "t":for(l=0;l<m;l+=2)this._updateBBox(this.last.x+=h[l],this.last.y+=h[l+1],g);this.absolute=!1;break;case "h":for(l=0;l<m;++l)this._updateBBox(this.last.x+=
h[l],this.last.y,g);this.absolute=!1;break;case "v":for(l=0;l<m;++l)this._updateBBox(this.last.x,this.last.y+=h[l],g);this.absolute=!1;break;case "c":for(l=0;l<m;l+=6)this._updateBBox(this.last.x+h[l],this.last.y+h[l+1],g),this._updateBBox(this.last.x+h[l+2],this.last.y+h[l+3],g),this._updateBBox(this.last.x+=h[l+4],this.last.y+=h[l+5],g);this.absolute=!1;break;case "s":case "q":for(l=0;l<m;l+=4)this._updateBBox(this.last.x+h[l],this.last.y+h[l+1],g),this._updateBBox(this.last.x+=h[l+2],this.last.y+=
h[l+3],g);this.absolute=!1;break;case "A":for(l=0;l<m;l+=7)this._updateBBox(h[l+5],h[l+6],g);this.last.x=h[m-2];this.last.y=h[m-1];this.absolute=!0;break;case "a":for(l=0;l<m;l+=7)this._updateBBox(this.last.x+=h[l+5],this.last.y+=h[l+6],g);this.absolute=!1}e=[e.action];for(l=0;l<m;++l)e.push(b.formatNumber(h[l],!0));if("string"==typeof this.shape.path)this.shape.path+=e.join("");else for(l=0,m=e.length;l<m;++l)this.shape.path.push(e[l])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(e,
g){this.tbbox=null;var h=this._validSegments[e.toLowerCase()];"number"==typeof h&&(h?g.length>=h&&(e={action:e,args:g.slice(0,g.length-g.length%h)},this.segments.push(e),this._updateWithSegment(e)):(e={action:e,args:[]},this.segments.push(e),this._updateWithSegment(e)))},_collectArgs:function(e,g){for(var h=0;h<g.length;++h){var m=g[h];"boolean"==typeof m?e.push(m?1:0):"number"==typeof m?e.push(m):m instanceof Array?this._collectArgs(e,m):"x"in m&&"y"in m&&e.push(m.x,m.y)}},moveTo:function(){this._confirmSegmented();
var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"M":"m",e);return this},lineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"L":"l",e);return this},hLineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"H":"h",e);return this},vLineTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"V":"v",e);
return this},curveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"C":"c",e);return this},smoothCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"S":"s",e);return this},qCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"Q":"q",e);return this},qSmoothCurveTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,
arguments);this._pushSegment(this.absolute?"T":"t",e);return this},arcTo:function(){this._confirmSegmented();var e=[];this._collectArgs(e,arguments);this._pushSegment(this.absolute?"A":"a",e);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var e=this.shape.path;this.shape.path=[];this._setPath(e);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(e){e=y.isArray(e)?e:e.match(b.pathSvgRegExp);
this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(e){for(var g="",h=[],m=e.length,l=0;l<m;++l){var f=e[l],c=parseFloat(f);isNaN(c)?(g&&this._pushSegment(g,h),h=[],g=f):h.push(c)}this._pushSegment(g,h)}},setShape:function(e){this.inherited(arguments,["string"==typeof e?{path:e}:e]);this.segmented=!1;this.segments=[];b.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});r=r("dojox.gfx.path.TextPath",k,{constructor:function(e){"text"in this||(this.text=y.clone(b.defaultTextPath));
"fontStyle"in this||(this.fontStyle=y.clone(b.defaultFont))},getText:function(){return this.text},setText:function(e){this.text=b.makeParameters(this.text,"string"==typeof e?{text:e}:e);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(e){this.fontStyle="string"==typeof e?b.splitFontString(e):b.makeParameters(b.defaultFont,e);this._setFont();return this}});return b.path={Path:k,TextPath:r}})},"dojox/gfx/filters":function(){define(["dojo/_base/lang","dojo/_base/array"],
function(b,y){var r={},a={x:"0%",y:"0%",width:"100%",height:"100%"},k={};r.createFilter=function(c,d){c=b.mixin({},a,c);c.primitives||(c.primitives=[]);d&&Array.prototype.push.apply(c.primitives,d);return c};var e=function(c,d,u){d instanceof Array&&(u=d,d=null);d=b.mixin({},d);d.children=u;d.tag=c;return d};y.forEach("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feGaussianBlur feImage feMorphology feOffset feSpecularLighting feTile feTurbulence feDistantLight fePointLight feSpotLight feMergeNode feFuncA feFuncR feFuncG feFuncB".split(" "),
function(c){r[c]=function(d,u){return e(c,d,u)}});r.feMerge=function(c,d){if("string"===typeof c){for(var u=[],n=0;n<arguments.length;++n)u.push(r.feMergeNode({"in":arguments[n]}));return e("feMerge",{},u)}return e("feMerge",c,d)};var g=r.createFilter;k.convolutions=[g({_gfxName:"boxBlur3"},[r.feConvolveMatrix({"in":"SourceGraphic",order:3,divisor:9,kernelMatrix:"1,1,1,1,1,1,1,1,1"})]),g({_gfxName:"boxBlur5"},[r.feConvolveMatrix({"in":"SourceGraphic",order:5,divisor:25,kernelMatrix:"1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1"})]),
g({_gfxName:"verticalEdges",filterUnits:"objectBoundingBox"},[r.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 0 1 -1 0 1 -1 0 1"}),r.feComponentTransfer({"in":"kernel"},[r.feFuncA({type:"table",tableValues:"1,1"})])]),g({_gfxName:"horizontalEdges",filterUnits:"objectBoundingBox"},[r.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"1 1 1 0 0 0 -1 -1 -1"}),r.feComponentTransfer({"in":"kernel"},[r.feFuncA({type:"table",
tableValues:"1,1"})])]),g({_gfxName:"allEdges3",filterUnits:"objectBoundingBox"},[r.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 -1 -1 -1 8 -1 -1 -1 -1"}),r.feComponentTransfer({"in":"kernel"},[r.feFuncA({type:"table",tableValues:"1,1"})])]),g({_gfxName:"edgeEnhance",filterUnits:"objectBoundingBox"},[r.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:-1,kernelMatrix:"0 1 0 1 -5 1 0 1 0"}),r.feComponentTransfer({"in":"kernel"},[r.feFuncA({type:"table",
tableValues:"1,1"})])])];y.forEach(k.convolutions,function(c){b.mixin(c,a)});k.shadows=[g({_gfxName:"fastSmallDropShadow"},[r.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),r.feOffset({dx:3,dy:3,result:"offsetBlur"}),r.feMerge("offsetBlur","SourceGraphic")]),g({_gfxName:"fastDropShadow"},[r.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),
r.feOffset({dx:5,dy:5,result:"offsetBlur"}),r.feMerge("offsetBlur","SourceGraphic")]),g({_gfxName:"fastDropShadowLight"},[r.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.4,0"}),r.feOffset({dx:5,dy:5,result:"offsetBlur"}),r.feMerge("offsetBlur","SourceGraphic")]),g({_gfxName:"dropShadow"},[r.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4}),r.feOffset({dx:5,dy:5,result:"offsetBlur"}),r.feMerge("offsetBlur",
"SourceGraphic")]),g({_gfxName:"dropShadowLight"},[r.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4,result:"blur"}),r.feComponentTransfer({"in":"blur",result:"lessblur"},[r.feFuncA({type:"linear",slope:.5})]),r.feOffset({"in":"lessblur",dx:5,dy:5,result:"offsetBlur"}),r.feMerge("offsetBlur","SourceGraphic")]),g({_gfxName:"smallDropShadow"},[r.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3}),r.feOffset({dx:2,dy:2,result:"offsetBlur"}),r.feMerge("offsetBlur","SourceGraphic")]),g({_gfxName:"smallDropShadowLight"},
[r.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3,result:"blur"}),r.feComponentTransfer({"in":"blur",result:"lessblur"},[r.feFuncA({type:"linear",slope:.5})]),r.feOffset({"in":"lessblur",dx:2,dy:2,result:"offsetBlur"}),r.feMerge("offsetBlur","SourceGraphic")])];var h={x:"-10%",y:"-10%",width:"125%",height:"125%"};y.forEach(k.shadows,function(c){b.mixin(c,h)});k.blurs=[g({_gfxName:"blur1",x:"-5%",y:"-5%",width:"110%",height:"110%"},[r.feGaussianBlur({"in":"SourceGraphic",stdDeviation:1})]),g({_gfxName:"blur2",
x:"-15%",y:"-15%",width:"130%",height:"130%"},[r.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2})]),g({_gfxName:"blur4",x:"-15%",y:"-15%",width:"130%",height:"130%"},[r.feGaussianBlur({"in":"SourceGraphic",stdDeviation:4})]),g({_gfxName:"blur8",x:"-20%",y:"-20%",width:"140%",height:"140%"},[r.feGaussianBlur({"in":"SourceGraphic",stdDeviation:8})]),g({_gfxName:"glow",x:"-10%",y:"-10%",width:"120%",height:"120%"},[r.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2}),r.feComponentTransfer([r.feFuncA({type:"linear",
slope:10})])])];k.colors=[g({_gfxName:"negate"},[r.feComponentTransfer([r.feFuncR({type:"table",tableValues:"1,0"}),r.feFuncG({type:"table",tableValues:"1,0"}),r.feFuncB({type:"table",tableValues:"1,0"})])]),g({_gfxName:"sepia"},[r.feColorMatrix({result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"}),r.feComponentTransfer({"in":"grey"},[r.feFuncR({type:"linear",slope:.5,intercept:.5}),r.feFuncB({type:"table",tableValues:"0,0"})])]),g({_gfxName:"grayscale"},
[r.feColorMatrix({values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"})]),g({_gfxName:"showRed"},[r.feComponentTransfer([r.feFuncG({type:"table",tableValues:"0,0"}),r.feFuncB({type:"table",tableValues:"0,0"})])]),g({_gfxName:"showGreen"},[r.feComponentTransfer([r.feFuncR({type:"table",tableValues:"0,0"}),r.feFuncB({type:"table",tableValues:"0,0"})])]),g({_gfxName:"showBlue"},[r.feComponentTransfer([r.feFuncR({type:"table",tableValues:"0,0"}),r.feFuncG({type:"table",
tableValues:"0,0"})])]),g({_gfxName:"hueRotate60"},[r.feColorMatrix({type:"hueRotate",values:60})]),g({_gfxName:"hueRotate120"},[r.feColorMatrix({type:"hueRotate",values:120})]),g({_gfxName:"hueRotate180"},[r.feColorMatrix({type:"hueRotate",values:180})]),g({_gfxName:"hueRotate270"},[r.feColorMatrix({type:"hueRotate",values:270})])];y.forEach(k.colors,function(c){b.mixin(c,a)});k.miscs=[g({_gfxName:"thinEmbossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[r.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:1,result:"blur"}),r.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),r.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"specOut"},[r.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),r.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),r.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),r.feMerge("offsetBlur","litPaint")]),g({_gfxName:"embossDropShadow",
x:"-5%",y:"-5%",width:"120%",height:"120%"},[r.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"4",result:"blur"}),r.feOffset({"in":"blur",dx:4,dy:4,result:"offsetBlur"}),r.feSpecularLighting({"in":"blur",surfaceScale:5,specularConstant:.75,specularExponent:20,"lighting-color":"#bbbbbb",result:"specOut"},[r.fePointLight({x:-5E3,y:-1E4,z:2E4})]),r.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),r.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,
k2:1,k3:1,k4:0,result:"litPaint"}),r.feMerge("offsetBlur","litPaint")]),g({_gfxName:"largeEmbossDropShadow",x:"-20%",y:"-20%",width:"140%",height:"140%"},[r.feGaussianBlur({"in":"SourceAlpha",stdDeviation:5,result:"blur"}),r.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),r.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"spec"},[r.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),r.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),
r.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),r.feMerge("offsetBlur","litPaint")]),g({_gfxName:"thinEmbossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[r.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),r.feComponentTransfer({"in":"blur",result:"lessblur"},[r.feFuncA({type:"linear",slope:"0.5"})]),r.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),r.feSpecularLighting({"in":"lessblur",surfaceScale:8,
specularConstant:1,specularExponent:"12",result:"specOut"},[r.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),r.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),r.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0}),r.feMerge("offsetBlur","litPaint")]),g({_gfxName:"embossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[r.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),r.feComponentTransfer({"in":"blur",
result:"lessblur"},[r.feFuncA({type:"linear",slope:"0.5"})]),r.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),r.feSpecularLighting({"in":"lessblur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[r.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),r.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),r.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"}),r.feMerge("offsetBlur",
"litPaint")]),g({_gfxName:"largeEmbossDropShadowLight",x:"-20%",y:"-20%",width:"140%",height:"140%"},[r.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),r.feComponentTransfer({"in":"blur",result:"lessblur"},[r.feFuncA({type:"linear",slope:"0.5"})]),r.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),r.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"spec"},[r.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),r.feComposite({"in":"spec",
in2:"SourceGraphic",operator:"in",result:"specOut"}),r.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"}),r.feMerge("offsetBlur","litPaint")]),g({_gfxName:"fuzzy",x:"-10%",y:"-10%",width:"120%",height:"120%"},[r.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),r.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]),g({_gfxName:"veryFuzzy",
x:"-20%",y:"-20%",width:"140%",height:"140%"},[r.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),r.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"35",xChannelSelector:"R",yChannelSelector:"G"})]),g({_gfxName:"melting",x:"-10%",y:"-10%",width:"120%",height:"120%"},[r.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"2",result:"turb"}),r.feDisplacementMap({result:"bended","in":"SourceGraphic",in2:"turb",scale:"25",xChannelSelector:"R",
yChannelSelector:"G"}),r.feGaussianBlur({"in":"bended",stdDeviation:"1",result:"bb"}),r.feComponentTransfer({"in":"bb",result:"BendedSource"},[r.feFuncA({type:"linear",slope:10,intercept:"-1"})]),r.feComponentTransfer({"in":"BendedSource",result:"BendedAlpha"},[r.feFuncR({type:"linear",slope:"0",intercept:"0"}),r.feFuncG({type:"linear",slope:"0",intercept:"0"}),r.feFuncB({type:"linear",slope:"0",intercept:"0"}),r.feFuncA({type:"linear",slope:"1",intercept:"0"})]),r.feGaussianBlur({"in":"BendedAlpha",
stdDeviation:"1",result:"blur"}),r.feSpecularLighting({"in":"blur","lighting-color":"rgb(80%, 80%, 80%)",surfaceScale:"5",specularConstant:"1",specularExponent:"10",result:"specularOut"},[r.fePointLight({x:"-5000",y:"-10000",z:"20000"})]),r.feComposite({"in":"specularOut",in2:"BendedAlpha",operator:"in",result:"specularOut"}),r.feComposite({"in":"BendedSource",in2:"specularOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]),g({_gfxName:"impressionist",x:"0%",y:"0%",width:"100%",
height:"100%"},[r.feMorphology({"in":"SourceGraphic",operator:"dilate",radius:"2"})]),g({_gfxName:"holes",x:"0%",y:"0%",width:"100%",height:"100%"},[r.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),r.feComponentTransfer({"in":"texture",result:"holes"},[r.feFuncA({type:"discrete",tableValues:"0,1"})]),r.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})]),g({_gfxName:"holesComplement",x:"0%",y:"0%",width:"100%",height:"100%"},[r.feTurbulence({type:"fractalNoise",
baseFrequency:"0.1",numOctaves:"1",result:"texture"}),r.feComponentTransfer({"in":"texture",result:"holes"},[r.feFuncA({type:"discrete",tableValues:"1,0"})]),r.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})])];k.reliefs=[g({_gfxName:"bumpIn",x:"0%",y:"0%",width:"100%",height:"100%"},[r.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),r.feComponentTransfer({"in":"lumalpha",result:"invertedalpha"},[r.feFuncA({type:"table",tableValues:"1,0"})]),r.feDiffuseLighting({"in":"invertedalpha",
"lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[r.feDistantLight({azimuth:"135",elevation:"60"})]),r.feSpecularLighting({"in":"invertedalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[r.feDistantLight({azimuth:"135",elevation:"30"})]),r.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),g({_gfxName:"bumpOut",x:"0%",y:"0%",width:"100%",height:"100%"},[r.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),
r.feDiffuseLighting({"in":"lumalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[r.feDistantLight({azimuth:"135",elevation:"60"})]),r.feSpecularLighting({"in":"lumalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[r.feDistantLight({azimuth:"135",elevation:"30"})]),r.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),g({_gfxName:"thinEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[r.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:"1",result:"blur"}),r.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[r.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),r.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),r.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),g({_gfxName:"emboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[r.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",
result:"blur"}),r.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[r.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),r.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),r.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),g({_gfxName:"largeEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[r.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),
r.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[r.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),r.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),r.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})])];k.textures=[g({_gfxName:"paper",x:"0%",y:"0%",width:"100%",height:"100%"},[r.feTurbulence({type:"turbulence",baseFrequency:"0.01",numOctaves:"5",result:"texture"}),
r.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[r.feDistantLight({azimuth:"135",elevation:"60"})]),r.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),g({_gfxName:"swirl",x:"0%",y:"0%",width:"100%",height:"100%"},[r.feTurbulence({type:"turbulence",baseFrequency:"0.05",numOctaves:"1",result:"texture"}),r.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[r.feDistantLight({azimuth:"135",elevation:"60"})]),
r.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),g({_gfxName:"swirl2",x:"0%",y:"0%",width:"100%",height:"100%"},[r.feTurbulence({type:"turbulence",baseFrequency:"0.15",numOctaves:"1",result:"texture"}),r.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[r.feDistantLight({azimuth:"135",elevation:"60"})]),r.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),g({_gfxName:"gold",
x:"-5%",y:"-5%",width:"115%",height:"110%"},[r.feTurbulence({baseFrequency:"0.2",numOctaves:"1",type:"turbulence",result:"turb"}),r.feComposite({"in":"SourceGraphic",in2:"turb",operator:"arithmetic",k2:"0.6",k3:"0.4",result:"turb"}),r.feComposite({"in":"turb",in2:"SourceGraphic",operator:"in",result:"bump"}),r.feDiffuseLighting({"in":"turb",surfaceScale:"6.0","lighting-color":"rgb(60%, 50%, 0%)",diffuseConstant:"1.0",result:"diffuse"},[r.feDistantLight({azimuth:"135",elevation:"60"})]),r.feSpecularLighting({"in":"bump",
surfaceScale:"6.0",specularConstant:"1.0",specularExponent:"10.0",result:"specularOut"},[r.feDistantLight({azimuth:"135",elevation:"60"})]),r.feComposite({"in":"specularOut",in2:"SourceGraphic",operator:"in",result:"specularOut"}),r.feComposite({"in":"bump",in2:"diffuse",operator:"arithmetic",k1:"0.7",k2:"0.3",result:"litPaint"}),r.feComposite({"in":"litPaint",in2:"specularOut",operator:"arithmetic",k2:"1.0",k3:"0.7",result:"litPaint"})])];for(var m in k)if(k.hasOwnProperty(m)){r[m]={};for(var l=
k[m],f=0;f<l.length;++f)(function(){var c=l[f];r[m][c._gfxName]=function(d){return b.delegate(c,d)}})()}return r})},"dojox/gfx/svgext":function(){define(["dojo/dom","dojo/_base/array","dojo/_base/window","./_base","./svg"],function(b,y,r,a,k){function e(h,m){var l=m.ownerDocument.createElementNS(k.xmlns.svg,h.tag);m.appendChild(l);for(var f in h)f in g||l.setAttribute(f,h[f]);h.children&&y.forEach(h.children,function(c){e(c,l)});return l}r=a.svgext={};var g={primitives:null,tag:null,children:null};
k.Shape.extend({addRenderingOption:function(h,m){this.rawNode.setAttribute(h,m);return this},setFilter:function(h){if(!h)return this.rawNode.removeAttribute("filter"),this.filter=null,this;this.filter=h;h.id=h.id||a._base._getUniqueId();var m=b.byId(h.id);if(!m){m=this.rawNode.ownerDocument.createElementNS(k.xmlns.svg,"filter");m.setAttribute("filterUnits","userSpaceOnUse");for(var l in h)l in g||m.setAttribute(l,h[l]);y.forEach(h.primitives,function(f){e(f,m)});(l=this._getParentSurface())&&l.defNode.appendChild(m)}this.rawNode.setAttribute("filter",
"url(#"+h.id+")");return this},getFilter:function(){return this.filter}});return r})},"dojox/gfx/_gfxBidiSupport":function(){define("./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape ./path dojox/string/BidiEngine".split(" "),function(b,y,r,a,k,e,g,h,m,l){function f(u,n){var t=c(n);t&&b.utils.forEach(u,function(x){if(x instanceof b.Surface||x instanceof b.Group)x.textDir=t;x instanceof b.Text&&x.setShape({textDir:t});x instanceof b.TextPath&&x.setText({textDir:t})},
u);return u}function c(u){var n=["ltr","rtl","auto"];return u&&(u=u.toLowerCase(),0>e.indexOf(n,u))?null:u}y.getObject("dojox.gfx._gfxBidiSupport",!0);switch(b.renderer){case "vml":b.isVml=!0;break;case "svg":b.isSvg=!0;b.svg.useSvgWeb&&(b.isSvgWeb=!0);break;case "silverlight":b.isSilverlight=!0;break;case "canvas":case "canvasWithEvents":b.isCanvas=!0}var d=new l;y.extend(b.shape.Surface,{textDir:"",setTextDir:function(u){f(this,u)},getTextDir:function(){return this.textDir}});y.extend(b.Group,{textDir:"",
setTextDir:function(u){f(this,u)},getTextDir:function(){return this.textDir}});y.extend(b.Text,{textDir:"",formatText:function(u,n){if(n&&u&&1<u.length){var t="ltr";if("auto"==n){if(b.isVml)return u;n=d.checkContextual(u)}if(b.isVml)return t=d.checkContextual(u),n!=t?"rtl"==n?d.hasBidiChar(u)?"\u200f\u200f"+u:d.bidiTransform(u,"IRNNN","ILNNN"):"\u200e"+u:u;if(b.isSvgWeb)return"rtl"==n?d.bidiTransform(u,"IRNNN","ILNNN"):u;if(b.isSilverlight)return"rtl"==n?d.bidiTransform(u,"IRNNN","VLYNN"):d.bidiTransform(u,
"ILNNN","VLYNN");if(b.isCanvas)return"rtl"==n?"\u202b"+u+"\u202c":"\u202a"+u+"\u202c";if(b.isSvg)return 4>r("ff")?"rtl"==n?d.bidiTransform(u,"IRYNN","VLNNN"):d.bidiTransform(u,"ILYNN","VLNNN"):"\u200e"+("rtl"==n?"\u202b":"\u202a")+u+"\u202c"}return u},bidiPreprocess:function(u){return u}});y.extend(b.TextPath,{textDir:"",formatText:function(u,n){if(n&&u&&1<u.length){var t="ltr";if("auto"==n){if(b.isVml)return u;n=d.checkContextual(u)}if(b.isVml)return t=d.checkContextual(u),n!=t?"rtl"==n?d.hasBidiChar(u)?
"\u200f\u200f"+u:d.bidiTransform(u,"IRNNN","ILNNN"):"\u200e"+u:u;if(b.isSvgWeb)return"rtl"==n?d.bidiTransform(u,"IRNNN","ILNNN"):u;b.isSvg&&(u=r("opera")||4<=r("ff")?"\u200e"+("rtl"==n?"\u202b":"\u202a")+u+"\u202c":"rtl"==n?d.bidiTransform(u,"IRYNN","VLNNN"):d.bidiTransform(u,"ILYNN","VLNNN"))}return u},bidiPreprocess:function(u){u&&"string"==typeof u&&(this.origText=u,u=this.formatText(u,this.textDir));return u}});g=function(u,n,t,x){var A=u.prototype[n];u.prototype[n]=function(){var B;t&&(B=t.apply(this,
arguments));B=A.call(this,B);x&&(B=x.call(this,B,arguments));return B}};h=function(u){u&&(u.textDir&&(u.textDir=c(u.textDir)),u.text&&u.text instanceof Array&&(u.text=u.text.join(",")));!u||void 0==u.text&&!u.textDir||this.textDir==u.textDir&&u.text==this.origText||(this.origText=void 0!=u.text?u.text:this.origText,u.textDir&&(this.textDir=u.textDir),u.text=this.formatText(this.origText,this.textDir));return this.bidiPreprocess(u)};g(b.Text,"setShape",h,null);g(b.TextPath,"setText",h,null);h=function(u){(u=
y.clone(u))&&this.origText&&(u.text=this.origText);return u};g(b.Text,"getShape",null,h);g(b.TextPath,"getText",null,h);h=function(u,n){var t;n&&n[0]&&(t=c(n[0]));u.setTextDir(t?t:this.textDir);return u};g(b.Surface,"createGroup",null,h);g(b.Group,"createGroup",null,h);h=function(u){if(u){var n=u.textDir?c(u.textDir):this.textDir;n&&(u.textDir=n)}return u};g(b.Surface,"createText",h,null);g(b.Surface,"createTextPath",h,null);g(b.Group,"createText",h,null);g(b.Group,"createTextPath",h,null);b.createSurface=
function(u,n,t,x){n=b[b.renderer].createSurface(u,n,t);x=c(x);if(b.isSvgWeb)return n.textDir=x?x:k.style(a.byId(u),"direction"),n;if(b.isVml||b.isSvg||b.isCanvas)n.textDir=x?x:k.style(n.rawNode,"direction");b.isSilverlight&&(n.textDir=x?x:k.style(n._nodes[1],"direction"));return n};return b})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f){var c=r.utils={};y.mixin(c,{forEach:function(d,u,n){n=n||b.global;u.call(n,d);(d instanceof r.Surface||d instanceof r.Group)&&k.forEach(d.children,function(t){c.forEach(t,u,n)})},serialize:function(d){var u={},n;if((n=d instanceof r.Surface)||d instanceof r.Group){if(u.children=k.map(d.children,c.serialize),n)return u.children}else u.shape=d.getShape();d.getTransform&&(n=d.getTransform())&&(u.transform=n);d.getStroke&&(n=d.getStroke())&&(u.stroke=n);d.getFill&&(n=d.getFill())&&
(u.fill=n);d.getFont&&(n=d.getFont())&&(u.font=n);return u},toJson:function(d,u){return g.toJson(c.serialize(d),u)},deserialize:function(d,u){if(u instanceof Array)return k.map(u,y.hitch(null,c.deserialize,d));d="shape"in u?d.createShape(u.shape):d.createGroup();"transform"in u&&d.setTransform(u.transform);"stroke"in u&&d.setStroke(u.stroke);"fill"in u&&d.setFill(u.fill);"font"in u&&d.setFont(u.font);"children"in u&&k.forEach(u.children,y.hitch(null,c.deserialize,d));return d},fromJson:function(d,
u){return c.deserialize(d,g.fromJson(u))},toSvg:function(d){var u=new h;if("svg"===r.renderer)try{var n=c._cleanSvg(c._innerXML(d.rawNode));u.callback(n)}catch(x){u.errback(x)}else{c._initSvgSerializerDeferred||c._initSvgSerializer();var t=c.toJson(d);n=function(){try{var x=d.getDimensions(),A=x.width,B=x.height,F=c._gfxSvgProxy.document.createElement("div");c._gfxSvgProxy.document.body.appendChild(F);e.withDoc(c._gfxSvgProxy.document,function(){a.style(F,"width",A);a.style(F,"height",B)},this);c._gfxSvgProxy[dojox._scopeName].gfx.createSurface(F,
A,B).whenLoaded(null,function(w){try{c._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(w,t);var D=c._cleanSvg(F.innerHTML);w.clear();w.destroy();c._gfxSvgProxy.document.body.removeChild(F);u.callback(D)}catch(q){u.errback(q)}})}catch(w){u.errback(w)}};0<c._initSvgSerializerDeferred.fired?n():c._initSvgSerializerDeferred.addCallback(n)}return u},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){c._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!c._initSvgSerializerDeferred){c._initSvgSerializerDeferred=
new h;var d=e.doc.createElement("iframe");a.style(d,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var u;m("ie")?d.onreadystatechange=function(){"complete"==d.contentWindow.document.readyState&&(d.onreadystatechange=function(){},u=setInterval(function(){d.contentWindow[b.scopeMap.dojo[1]._scopeName]&&d.contentWindow[b.scopeMap.dojox[1]._scopeName].gfx&&d.contentWindow[b.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(u),d.contentWindow.parent[b.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
d.contentWindow,d.contentWindow.parent[b.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:d.onload=function(){d.onload=function(){};u=setInterval(function(){d.contentWindow[b.scopeMap.dojo[1]._scopeName]&&d.contentWindow[b.scopeMap.dojox[1]._scopeName].gfx&&d.contentWindow[b.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(u),d.contentWindow.parent[b.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=d.contentWindow,d.contentWindow.parent[b.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var n=f.dojoxGfxSvgProxyFrameUrl||l.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");d.setAttribute("src",n.toString());e.body().appendChild(d)}},_innerXML:function(d){return d.innerXML?d.innerXML:d.xml?d.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(d):null},_cleanSvg:function(d){d&&(-1==d.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(d=d.substring(4,d.length),d='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+d),-1==d.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&
(d=d.substring(4,d.length),d='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+d),-1===d.indexOf("xlink:href")&&(d=d.replace(/href\s*=/g,"xlink:href\x3d")),d=d.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),d=d.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),d=d.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),d=d.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),d=d.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return d}});return c})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dojo/Stateful"],function(b,y,r){function a(ja,T,ha,na,qa){var ua=ja;void 0===T&&(T=qa.defInFormat);void 0===ha&&(ha=qa.defOutFormat);void 0===na&&(na=qa.defSwap);if(T!==ha){var za=T.substring(0,1);var Ea=T.substring(1,4);var Pa=ha.substring(0,1),Oa=ha.substring(1,4);"C"===Ea.charAt(0)&&(Ea=k(ua),Ea="ltr"===Ea||"rtl"===Ea?Ea.toUpperCase():"L"===T.charAt(2)?"LTR":"RTL",T=za+Ea);"C"===Oa.charAt(0)&&(Ea=k(ua),"rtl"===Ea?Oa="RTL":"ltr"===Ea?(ua=ua.split(""),ua.reverse(),Ea=k(ua.join("")),
Oa=Ea.toUpperCase()):Oa="L"===ha.charAt(2)?"LTR":"RTL",ha=Pa+Oa)}if(T===ha)return ja;Pa=T.substring(0,1);ua=T.substring(1,4);za=ha.substring(0,1);Oa=ha.substring(1,4);qa.inFormat=T;qa.outFormat=ha;qa.swap=na;if("L"===Pa&&"VLTR"===ha){if("LTR"===ua)return qa.dir=v,e(ja,qa);if("RTL"===ua)return qa.dir=z,e(ja,qa)}if("V"===Pa&&"V"===za)return qa.dir="RTL"===ua?z:v,h(ja,qa);if("L"===Pa&&"VRTL"===ha)return qa.dir="LTR"===ua?v:z,ja=e(ja,qa),h(ja);if("VLTR"===T&&"LLTR"===ha)return qa.dir=v,e(ja,qa);if("V"===
Pa&&"L"===za&&ua!==Oa)return ja=h(ja),"RTL"===ua?a(ja,"LLTR","VLTR",na,qa):a(ja,"LRTL","VRTL",na,qa);if("VRTL"===T&&"LRTL"===ha)return a(ja,"LRTL","VRTL",na,qa);if("L"===Pa&&"L"===za)return T=qa.swap,qa.swap=T.substr(0,1)+"N","RTL"===ua?(qa.dir=z,ja=e(ja,qa),qa.swap="N"+T.substr(1,2),qa.dir=v,ja=e(ja,qa)):(qa.dir=v,ja=e(ja,qa),qa.swap="N"+T.substr(1,2),ja=a(ja,"VLTR","LRTL",qa.swap,qa)),ja}function k(ja){return(ja=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(ja))?
"z">=ja[0]?"ltr":"rtl":""}function e(ja,T){ja=ja.split("");var ha=[];g(ja,ha,T);if(0!==T.hiLevel&&T.swap.substr(0,1)!==T.swap.substr(1,2))for(var na=0;na<ja.length;na++)if(1===ha[na]){var qa=na;b:{var ua=void 0;for(var za=ja[na],Ea=0,Pa=G.length-1;Ea<=Pa;)if(ua=Math.floor((Ea+Pa)/2),za<G[ua][0])Pa=ua-1;else if(za>G[ua][0])Ea=ua+1;else{ua=G[ua][1];break b}ua=za}ja[qa]=ua}f(2,ja,ha,T);f(1,ja,ha,T);F=ha;return ja.join("")}function g(ja,T,ha){var na=ja.length,qa=ha.dir?Z:X,ua=null,za=null,Ea=null;ua=
0;za=za=null;var Pa=-1,Oa=za=null,Ha=[],Ua=[];ha.hiLevel=ha.dir;ha.lastArabic=!1;ha.hasUbatAl=!1;ha.hasUbatB=!1;ha.hasUbatS=!1;for(za=0;za<na;za++){Oa=za;Ea=ja[za].charCodeAt(0);var bb=R[Ea>>8];Ha[Oa]=bb<Aa?bb:ia[bb-Aa][Ea&255]}for(Oa=0;Oa<na;Oa++){Ua[Oa]=za=c(ja,Ha,Ua,Oa,ha);ua=qa[ua][za];za=ua&240;ua&=15;T[Oa]=Ea=qa[ua][D];if(0<za){if(16===za)for(za=Pa;za<Oa;za++)T[za]=1;Pa=-1}if(za=qa[ua][q])-1===Pa&&(Pa=Oa);else if(-1<Pa){for(za=Pa;za<Oa;za++)T[za]=Ea;Pa=-1}Ha[Oa]===Ba&&(T[Oa]=0);ha.hiLevel|=
Ea}if(ha.hasUbatS)for(ja=0;ja<na;ja++)if(Ha[ja]===Da)for(T[ja]=ha.dir,qa=ja-1;0<=qa;qa--)if(Ha[qa]===ra)T[qa]=ha.dir;else break}function h(ja,T){ja=ja.split("");if(T){var ha=[];g(ja,ha,T);F=ha}ja.reverse();A.reverse();return ja.join("")}function m(ja){for(var T=0;T<ca.length;T++)if(ja>=ca[T]&&ja<=U[T])return!0;return!1}function l(ja,T,ha,na){for(;T*ha<na&&u(ja[T]);)T+=ha;return T*ha<na&&m(ja[T])?!0:!1}function f(ja,T,ha,na){if(!(na.hiLevel<ja))if(1!==ja||na.dir!==z||na.hasUbatB){na=T.length;for(var qa=
0,ua,za,Ea;qa<na;){if(ha[qa]>=ja){for(ua=qa+1;ua<na&&ha[ua]>=ja;)ua++;for(za=ua-1;qa<za;qa++,za--)Ea=T[qa],T[qa]=T[za],T[za]=Ea,Ea=A[qa],A[qa]=A[za],A[za]=Ea;qa=ua}qa++}}else T.reverse(),A.reverse()}function c(ja,T,ha,na,qa){return{UBAT_L:function(){qa.lastArabic=!1;return N},UBAT_R:function(){qa.lastArabic=!1;return aa},UBAT_ON:function(){return ta},UBAT_AN:function(){return pa},UBAT_EN:function(){return qa.lastArabic?pa:ka},UBAT_AL:function(){qa.lastArabic=!0;qa.hasUbatAl=!0;return aa},UBAT_WS:function(){return ta},
UBAT_CS:function(){var ua,za;if(1>na||na+1>=T.length||(ua=ha[na-1])!==ka&&ua!==pa||(za=T[na+1])!==ka&&za!==pa)return ta;qa.lastArabic&&(za=pa);return za===ua?za:ta},UBAT_ES:function(){return(0<na?ha[na-1]:Ba)===ka&&na+1<T.length&&T[na+1]===ka?ka:ta},UBAT_ET:function(){if(0<na&&ha[na-1]===ka)return ka;if(qa.lastArabic)return ta;for(var ua=na+1,za=T.length;ua<za&&T[ua]===ya;)ua++;return ua<za&&T[ua]===ka?ka:ta},UBAT_NSM:function(){if("VLTR"===qa.inFormat){for(var ua=T.length,za=na+1;za<ua&&T[za]===
wa;)za++;if(za<ua&&(ua=ja[na],za=T[za],(1425<=ua&&2303>=ua||64286===ua)&&(za===aa||za===oa)))return aa}return 1>na||T[na-1]===Ba?ta:ha[na-1]},UBAT_B:function(){qa.lastArabic=!0;qa.hasUbatB=!0;return qa.dir},UBAT_S:function(){qa.hasUbatS=!0;return ta},UBAT_LRE:function(){qa.lastArabic=!1;return ta},UBAT_RLE:function(){qa.lastArabic=!1;return ta},UBAT_LRO:function(){qa.lastArabic=!1;return ta},UBAT_RLO:function(){qa.lastArabic=!1;return ta},UBAT_PDF:function(){qa.lastArabic=!1;return ta},UBAT_BN:function(){return ta}}[la[T[na]]]()}
function d(ja,T){for(var ha=0;ha<J.length;ha++)if(ja===J[ha])return T[ha];return ja}function u(ja){return"\u064b"<=ja&&"\u0655">=ja?!0:!1}function n(ja){if("L"===ja)return"LTR";if("R"===ja)return"RTL";if("C"===ja)return"CLR";if("D"===ja)return"CRL"}function t(ja,T){for(var ha=0;ha<H.length;ha++)if(ja===H[ha])return T[ha];return ja}function x(ja,T,ha,na){for(var qa=0;qa<ja.length;qa++)if(ja[qa]>T||!ha&&ja[qa]===T)ja[qa]+=na}b.getObject("string",!0,dojox);b=y("dojox.string.BidiEngine",r,{inputFormat:"ILYNN",
outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(ja,T,ha){this.sourceToTarget=[];this.targetToSource=[];if(!ja)return"";var na=this.sourceToTarget,qa=this.targetToSource,ua=ja.length;A=[];F=[];for(var za=0;za<ua;za++)na[za]=za,qa[za]=za,A[za]=za;if(!this.checkParameters(T,ha))return ja;T=this.inputFormat;ha=this.outputFormat;na=ja;na=w;za=n(T.charAt(1));qa=n(ha.charAt(1));var Ea="I"===T.charAt(0)?"L":T.charAt(0);ua="I"===ha.charAt(0)?"L":ha.charAt(0);za=Ea+
za;qa=ua+qa;ua=T.charAt(2)+ha.charAt(2);na.defInFormat=za;na.defOutFormat=qa;na.defSwap=ua;ja=a(ja,za,qa,ua,na);na=!1;if("R"===ha.charAt(1))na=!0;else if("C"===ha.charAt(1)||"D"===ha.charAt(1))na=this.checkContextual(ja);qa=this.sourceToTarget=A;ua=Array(qa.length);for(za=0;za<qa.length;za++)ua[qa[za]]=za;B=this.targetToSource=ua;if(T.charAt(3)===ha.charAt(3))na=ja;else if("S"===ha.charAt(3))if(T=na,ha=!0,0===ja.length)na=void 0;else{void 0===T&&(T=!0);void 0===ha&&(ha=!0);ja=String(ja);ja=ja.split("");
var Pa=0;qa=1;na=ja.length;T||(Pa=ja.length-1,qa=-1,na=1);ua=na;za=ha;var Oa=0;na=[];for(Ea=0;Pa*qa<ua;Pa+=qa)if(m(ja[Pa])||u(ja[Pa])){var Ha;if(Ha="\u0644"===ja[Pa])b:{for(var Ua=ja,bb=Pa+qa,ab=qa,gb=ua;bb*ab<gb&&u(Ua[bb]);)bb+=ab;Ha=" ";if(bb*ab<gb)for(Ha=Ua[bb],Ua=0;Ua<H.length;Ua++)if(H[Ua]===Ha){Ha=!0;break b}Ha=!1}if(Ha){ja[Pa]=0===Oa?t(ja[Pa+qa],K):t(ja[Pa+qa],I);Pa+=qa;Oa=ja;Ha=Pa;Ua=qa;for(bb=ua;Ha*Ua<bb&&u(Oa[Ha]);)Ha+=Ua;Ha*Ua<bb&&(Oa[Ha]=" ");za&&(na[Ea]=Pa,Ea++);Oa=0}else{Ha=ja[Pa];if(1===
Oa){Ua=Pa;if(l(ja,Pa+qa,qa,ua))b:for(bb=ja[Pa],ab=0;ab<J.length;ab++){if(bb===J[ab]){bb=O[ab];break b}}else bb=d(ja[Pa],V);ja[Ua]=bb}else!0===l(ja,Pa+qa,qa,ua)?ja[Pa]=d(ja[Pa],S):ja[Pa]=d(ja[Pa],Q);u(Ha)||(Oa=1);b:{for(Ua=0;Ua<L.length;Ua++)if(L[Ua]===Ha){Ha=!0;break b}Ha=!1}!0===Ha&&(Oa=0)}}else Oa=0;qa="";for(ua=0;ua<ja.length;ua++){if(za=ha){b:{for(za=0;za<na.length;za++)if(na[za]===ua)break b;za=-1}za=-1<za}za?(x(B,ua,!T,-1),A.splice(ua,1)):qa+=ja[ua]}na=qa}else if(T=ja,ha=na,ja=!0,0===T.length)na=
void 0;else for(void 0===ja&&(ja=!0),void 0===ha&&(ha=!0),T=String(T),na="",qa=[],qa=T.split(""),ua=0;ua<T.length;ua++)za=!1,"\ufe70"<=qa[ua]&&"\ufeff">qa[ua]?(Ea=T.charCodeAt(ua),"\ufef5"<=qa[ua]&&"\ufefc">=qa[ua]?(ha?(0<ua&&ja&&" "===qa[ua-1]?na=na.substring(0,na.length-1)+"\u0644":(na+="\u0644",za=!0),na+=H[(Ea-65269)/2]):(na+=H[(Ea-65269)/2],na+="\u0644",ua+1<T.length&&ja&&" "===qa[ua+1]?ua++:za=!0),za&&(x(B,ua,!0,1),A.splice(ua,0,A[ua]))):na+=Y[Ea-65136]):na+=qa[ua];this.sourceToTarget=A;this.targetToSource=
B;this.levels=F;return na},_inputFormatSetter:function(ja){if(!C.test(ja))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=ja},_outputFormatSetter:function(ja){if(!C.test(ja))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=ja},checkParameters:function(ja,T){ja?this.set("inputFormat",ja):ja=this.inputFormat;T?this.set("outputFormat",T):T=this.outputFormat;return ja===T?!1:!0},checkContextual:function(ja){ja=k(ja);if("ltr"!==
ja&&"rtl"!==ja){try{ja=document.dir.toLowerCase()}catch(T){}"ltr"!==ja&&"rtl"!==ja&&(ja="ltr")}return ja},hasBidiChar:function(ja){return E.test(ja)}});var A=[],B=[],F=[],w={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},D=5,q=6,v=0,z=1,C=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,E=/[\u0591-\u06ff\ufb1d-\ufefc]/,G=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]",
"["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],H=["\u0622","\u0623","\u0625","\u0627"],K=["\ufef5","\ufef7","\ufef9","\ufefb"],
I=["\ufef6","\ufef8","\ufefa","\ufefc"],J="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),Q="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
V="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),O="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
S="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),L="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),Y="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
ca=["\u0621","\u0641"],U=["\u063a","\u064a"],X=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Z=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N=0,aa=1,ka=2,pa=3,ta=4,Ba=5,Da=6,oa=7,ra=8,ya=11,wa=12,la="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),Aa=100;y=N;r=aa;var da=ka,fa=pa,P=ta,xa=Ba,Fa=Da,ba=oa,Sa=
ra,Qa=ya,va=wa,R=[Aa+0,y,y,y,y,Aa+1,Aa+2,Aa+3,r,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Aa+4,P,P,P,y,P,y,P,y,P,P,P,y,y,P,P,y,y,y,y,y,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,y,y,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,y,y,y,y,y,y,y,y,y,y,y,y,y,y,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,y,y,P,P,y,y,P,P,y,y,P,P,P,P,P,P,P,P,P,
P,P,P,P,P,P,P,P,P,P,P,P,P,P,y,y,y,Aa+5,ba,ba,Aa+6,Aa+7],ia=[[18,18,18,18,18,18,18,18,18,Fa,xa,Fa,Sa,xa,18,18,18,18,18,18,18,18,18,18,18,18,18,18,xa,xa,xa,Fa,Sa,P,P,Qa,Qa,Qa,P,P,P,P,P,10,9,10,9,9,da,da,da,da,da,da,da,da,da,da,9,P,P,P,P,P,P,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,P,P,P,P,P,P,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,P,P,P,P,18,18,18,18,18,18,xa,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,P,Qa,Qa,Qa,Qa,P,P,P,P,y,P,P,18,P,P,Qa,
Qa,da,da,P,y,P,P,P,da,y,P,P,P,P,P,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,P,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,P,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,P,P,P,P,P,P,P,P,P,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,P,P,y,y,y,y,y,y,y,P,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,P,y,P,P,P,P,P,P,P,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,
va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,r,va,r,va,va,r,va,va,r,va,P,P,P,P,P,P,P,P,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,P,P,P,P,P,r,r,r,r,r,P,P,P,P,P,P,P,P,P,P,P],[fa,fa,fa,fa,P,P,P,P,ba,Qa,Qa,ba,9,ba,P,P,va,va,va,va,va,va,va,va,va,va,va,ba,P,P,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,
va,fa,fa,fa,fa,fa,fa,fa,fa,fa,fa,Qa,fa,fa,ba,ba,ba,va,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,va,va,va,va,va,va,va,fa,P,va,va,va,va,va,va,ba,ba,va,va,P,va,va,va,va,ba,ba,da,da,da,da,da,da,da,da,da,da,ba,ba,ba,ba,ba,ba],[ba,ba,ba,ba,ba,ba,
ba,ba,ba,ba,ba,ba,ba,ba,P,ba,ba,va,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,P,P,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,va,va,va,va,va,va,va,va,
va,va,va,ba,P,P,P,P,P,P,P,P,P,P,P,P,P,P,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,va,va,va,va,va,va,va,va,va,r,r,P,P,P,P,r,P,P,P,P,P],[Sa,Sa,Sa,Sa,Sa,Sa,Sa,Sa,Sa,Sa,Sa,18,18,18,y,r,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,Sa,xa,13,14,15,16,17,9,Qa,Qa,Qa,Qa,Qa,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,9,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,Sa,18,18,18,18,18,P,P,P,P,P,18,18,18,18,18,18,da,y,P,P,da,da,da,da,da,da,10,10,P,P,P,y,da,da,da,da,da,da,da,
da,da,da,10,10,P,P,P,P,y,y,y,y,y,y,y,y,y,y,y,y,y,P,P,P,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,Qa,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,va,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P],[y,y,y,y,y,y,y,P,P,P,P,P,P,P,P,P,P,P,P,y,y,y,y,y,P,P,P,P,P,r,va,r,r,r,r,r,r,r,r,r,r,10,r,r,r,r,r,r,r,r,r,r,r,r,r,P,r,r,r,r,r,P,r,P,r,r,P,r,r,P,r,r,r,r,r,r,r,r,r,r,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,
ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba],[va,va,va,va,va,va,va,
va,va,va,va,va,va,va,va,va,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,va,va,va,va,va,va,va,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,9,P,9,P,P,9,P,P,P,P,P,P,P,P,P,Qa,P,P,10,10,P,P,P,P,P,Qa,Qa,P,P,P,P,P,ba,ba,ba,ba,ba,P,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,
ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,ba,P,P,18],[P,P,P,Qa,Qa,Qa,P,P,P,P,P,10,9,10,9,9,da,da,da,da,da,da,da,da,da,da,9,P,P,P,P,P,P,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,P,P,P,P,P,P,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,P,P,P,P,P,P,P,P,P,P,P,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,
y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,P,P,P,y,y,y,y,y,y,P,P,y,y,y,y,y,y,P,P,y,y,y,y,y,y,P,P,y,y,y,P,P,P,Qa,Qa,P,P,P,Qa,Qa,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P]];return b})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(b,y,r,a,k,e){b=b(e,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(g){g&&y.isObject(g)&&(this.size="auto"===
this.size?this.size:a.pt2px(this.size),this.xoffset=a.pt2px(this.xoffset),this.yoffset=a.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(g){this.angle=g;return this},setSize:function(g){this.size=g;return this},setOffset:function(g,h){this.xoffset=g;this.yoffset=h;return this},toJson:function(){var g=a.px2pt(this.size);g=isNaN(g)?void 0:g;var h=a.px2pt(this.xoffset);h=isNaN(h)?void 0:h;var m=a.px2pt(this.yoffset);m=isNaN(m)?void 0:m;return y.mixin(this.inherited("toJson",arguments),
{size:"auto"===this.size?this.size:g,angle:this.angle&&-1*this.angle,xoffset:h,yoffset:m})}});y.setObject("symbol.MarkerSymbol",b,k);return b})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(b,y,r,a,k,e){b=b(null,{declaredClass:"esri.symbol.Symbol",color:new e([0,0,0,1]),type:null,constructor:function(g){g&&y.isObject(g)&&(y.mixin(this,g),this.color&&k.isDefined(this.color[0])&&(this.color=e.toDojoColor(this.color)),
(g=this.type)&&0===g.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[g]))},setColor:function(g){this.color=g;return this},toJson:function(){return{color:e.toJsonColor(this.color)}}});y.setObject("symbol.Symbol",b,a);return b})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color",
"dojo/has","./kernel"],function(b,y,r,a){var k=b([y],{declaredClass:"esri.Color"});k.toJsonColor=function(e){return e&&[e.r,e.g,e.b,1<e.a?e.a:Math.round(255*e.a)]};k.toDojoColor=function(e){return e&&new k([e[0],e[1],e[2],e[3]/255])};r="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(b=0;b<r.length;b++)k[r[b]]=y[r[b]];return a.Color=k})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),
function(b,y,r,a,k,e,g,h){var m={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},l={color:[0,0,0,1],style:m.STYLE_SOLID,width:1};b=b(h,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",
dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(f,c,d){f?y.isString(f)?(this.style=f,c&&(this.color=c),d&&(this.width=d)):(this.style=g.valueOf(this._styles,f.style)||m.STYLE_SOLID,this.marker=
f.marker):(y.mixin(this,l),this.color=new r(this.color),this.width=k.pt2px(this.width))},setStyle:function(f){this.style=f;return this},setMarker:function(f){this.marker=f},getStroke:function(){return this.style===m.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return g.fixJson(y.mixin(this.inherited("toJson",
arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?y.clone(this.marker):void 0}))}});y.mixin(b,m);b.defaultProps=l;y.setObject("symbol.SimpleLineSymbol",b,e);e.symbol.defaultSimpleLineSymbol=l;return b})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(b,y,r,a,k,e){b=b(e,{declaredClass:"esri.symbol.LineSymbol",constructor:function(g){y.isObject(g)?this.width=a.pt2px(this.width):
this.width=12},setWidth:function(g){this.width=g;return this},toJson:function(){var g=a.px2pt(this.width);g=isNaN(g)?void 0:g;return y.mixin(this.inherited("toJson",arguments),{width:g})}});y.setObject("symbol.LineSymbol",b,k);return b})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(b,y,r,a,k,e,g,h){var m={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};b=
b(h,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(l,f,c){l?y.isString(l)?(this.url=l,f&&(this.width=f),c&&(this.height=c)):(this.width=a.pt2px(null==l.width?m.width:l.width),this.height=a.pt2px(null==l.height?m.height:l.height),f=l.imageData,9>r("ie")||!f||(c=this.url,this.url="data:"+(l.contentType||"image")+";base64,"+f,this.imageData=c)):(y.mixin(this,m),this.width=a.pt2px(this.width),this.height=a.pt2px(this.height))},getStroke:function(){return null},
getFill:function(){return null},setWidth:function(l){this.width=l;return this},setHeight:function(l){this.height=l;return this},setUrl:function(l){l!==this.url&&(delete this.imageData,delete this.contentType);this.url=l;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var l=this.url,f=this.imageData;if(0===l.indexOf("data:")){var c=
l;l=f;f=c.indexOf(";base64,")+8;f=c.substr(f)}!y.isString(l)||0!==l.indexOf("/")&&0!==l.indexOf("//")&&0!==l.indexOf("./")&&0!==l.indexOf("../")||(l=g.getAbsoluteUrl(l));c=a.px2pt(this.width);c=isNaN(c)?void 0:c;var d=a.px2pt(this.height);d=isNaN(d)?void 0:d;l=e.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:l,imageData:f,contentType:this.contentType,width:c,height:d}));delete l.color;delete l.size;l.imageData||delete l.imageData;return l}});b.defaultProps=m;y.setObject("symbol.PictureMarkerSymbol",
b,k);k.symbol.defaultPictureMarkerSymbol=m;return b})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(b,y,r,a,k,e,g,h){var m={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},l={color:[0,0,0,1],style:m.STYLE_SOLID,width:1,cap:m.CAP_BUTT,join:m.JOIN_MITER,miterLimit:10};b=b(h,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",
bevel:"esriLJSBevel"},constructor:function(f,c,d,u,n,t){f?y.isString(f)?(this.style=f,c&&(this.color=c),void 0!==d&&(this.width=d),u&&(this.cap=u),n&&(this.join=n),void 0!==t&&(this.miterLimit=t)):(this.cap=g.valueOf(this._caps,f.cap),this.join=g.valueOf(this._joins,f.join),this.width=k.pt2px(f.width),this.miterLimit=k.pt2px(f.miterLimit)):(y.mixin(this,l),this.color=new r(this.color),this.width=k.pt2px(this.width),this.miterLimit=k.pt2px(this.miterLimit))},setCap:function(f){this.cap=f;return this},
setJoin:function(f){this.join=f;return this},setMiterLimit:function(f){this.miterLimit=f;return this},getStroke:function(){return y.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===m.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var f=k.px2pt(this.miterLimit);f=isNaN(f)?void 0:f;return g.fixJson(y.mixin(this.inherited("toJson",
arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:f}))}});y.mixin(b,m);b.defaultProps=l;y.setObject("symbol.CartographicLineSymbol",b,e);e.symbol.defaultCartographicLineSymbol=l;return b})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(b,y,r,a,k,e,g,h,m,l){var f={STYLE_SOLID:"solid",STYLE_NULL:"none",
STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},c={style:f.STYLE_SOLID,color:[0,0,0,.25]};b=b(h,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",
vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(d,u,n){d?y.isString(d)?(this.style=d,void 0!==u&&(this.outline=u),void 0!==n&&(this.color=n)):this.style=g.valueOf(this._styles,d.style):(y.mixin(this,c),this.outline=new m(this.outline),this.color=new r(this.color))},setStyle:function(d){this.style=d;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},
getFill:function(){var d=this.style;return d===f.STYLE_NULL?null:d===f.STYLE_SOLID?this.color:y.mixin({},k.defaultPattern,{src:l.toUrl("../images/symbol/sfs/"+d+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return g.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});y.mixin(b,f);b.defaultProps=
c;y.setObject("symbol.SimpleFillSymbol",b,e);e.symbol.defaultSimpleFillSymbol=c;return b})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(b,y,r,a,k,e){b=b(k,{declaredClass:"esri.symbol.FillSymbol",constructor:function(g){g&&y.isObject(g)&&g.outline&&(this.outline=new e(g.outline))},setOutline:function(g){this.outline=g;return this},toJson:function(){var g=this.inherited("toJson",arguments);this.outline&&
(g.outline=this.outline.toJson());return g}});y.setObject("symbol.FillSymbol",b,a);return b})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(b,y,r,a,k,e,g,h){var m={xoffset:0,yoffset:0,width:12,height:12};b=b(h,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(l,f,c,d){l?y.isString(l)?(this.url=
l,void 0!==f&&(this.outline=f),void 0!==c&&(this.width=c),void 0!==d&&(this.height=d)):(this.xoffset=a.pt2px(l.xoffset),this.yoffset=a.pt2px(l.yoffset),this.width=a.pt2px(l.width),this.height=a.pt2px(l.height),f=l.imageData,9>r("ie")||!f||(c=this.url,this.url="data:"+(l.contentType||"image")+";base64,"+f,this.imageData=c)):(y.mixin(this,m),this.width=a.pt2px(this.width),this.height=a.pt2px(this.height))},setWidth:function(l){this.width=l;return this},setHeight:function(l){this.height=l;return this},
setOffset:function(l,f){this.xoffset=l;this.yoffset=f;return this},setUrl:function(l){l!==this.url&&(delete this.imageData,delete this.contentType);this.url=l;return this},setXScale:function(l){this.xscale=l;return this},setYScale:function(l){this.yscale=l;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return y.mixin({},a.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var l=this.url,f=this.imageData;if(0===l.indexOf("data:")){var c=l;l=f;f=c.indexOf(";base64,")+8;f=c.substr(f)}!y.isString(l)||0!==l.indexOf("/")&&0!==l.indexOf("//")&&0!==l.indexOf("./")&&0!==l.indexOf("../")||(l=g.getAbsoluteUrl(l));c=a.px2pt(this.width);c=isNaN(c)?void 0:c;var d=a.px2pt(this.height);d=isNaN(d)?void 0:d;var u=a.px2pt(this.xoffset);u=isNaN(u)?void 0:u;var n=a.px2pt(this.yoffset);
n=isNaN(n)?void 0:n;l=e.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:l,imageData:f,contentType:this.contentType,width:c,height:d,xoffset:u,yoffset:n,xscale:this.xscale,yscale:this.yscale}));l.imageData||delete l.imageData;return l}});b.defaultProps=m;y.setObject("symbol.PictureFillSymbol",b,k);k.symbol.defaultPictureFillSymbol=m;return b})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(b,y,r,a,k,e,g,h,m){var l={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:a.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},f={start:"left",middle:"center",end:"right"},c={left:"start",center:"middle",right:"end",justify:"start"},d={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},u=document.createElement("canvas");b=b(h,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(n,
t,x){y.mixin(this,l);this.font=new m(this.font);this.color=new g(this.color);n&&(y.isObject(n)?(y.mixin(this,n),this.color&&e.isDefined(this.color[0])&&(this.color=g.toDojoColor(this.color)),this.type="textsymbol",this.font=new m(this.font),this.xoffset=a.pt2px(this.xoffset),this.yoffset=a.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=a.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=g.toDojoColor(this.haloColor))):(this.text=n,t&&(this.font=t),x&&(this.color=
x)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(n){this.font=n;return this},setSize:function(n){this.font.size=n;return this},setAngle:function(n){this.angle=n;return this},setOffset:function(n,t){this.xoffset=n;this.yoffset=t;return this},setHaloColor:function(n){this.haloColor=n;return this},setHaloSize:function(n){this.haloSize=n;return this},setAlign:function(n){this.align=n;this.setHorizontalAlignment(n&&f[n.toLowerCase()]||"center");return this},setHorizontalAlignment:function(n){this.horizontalAlignment=
n;return this},getSVGAlign:function(){var n=this.horizontalAlignment;return n=n&&c[n.toLowerCase()]||"middle"},setVerticalAlignment:function(n){this.verticalAlignment=n;return this},getSVGBaseline:function(){var n=this.verticalAlignment;return n&&d[n.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(n){this.decoration=n;this.font||this.setFont(new m);this.font.setDecoration(n);return this},setRotated:function(n){this.rotated=
n;return this},setKerning:function(n){this.kerning=n;return this},setText:function(n){this.text=n;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var n=u&&u.getContext&&u.getContext("2d");if(n){var t=this.font;n.font=(t.style?t.style:a.defaultFont.style)+" "+(t.weight?t.weight:a.defaultFont.weight)+" "+(t.size?t.size:a.defaultFont.size)+"px "+(t.family?t.family:a.defaultFont.family);return n.measureText(this.text).width}n=this.getHeight();t=
0;var x;for(x=0;x<this.text.length;x++){var A=this.text.charAt(x);t=A==A.toUpperCase()?t+.7*n:t+.5*n}return t},getHeight:function(){return a.normalizedLength(this.font.size)},getShapeDescriptors:function(){var n=this.font;if(n){var t={};n.size&&(t.size=n.size);n.style&&(t.style=n.style);n.variant&&(t.variant=n.variant);n.decoration&&(t.decoration=n.decoration);n.weight&&(t.weight=n.weight);n.family&&(t.family=n.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||n&&n.decoration,rotated:this.rotated,kerning:this.kerning},font:t,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var n=a.px2pt(this.xoffset),t=a.px2pt(this.yoffset),x=a.px2pt(this.haloSize);n=isNaN(n)?void 0:n;t=isNaN(t)?void 0:t;x=isNaN(x)?void 0:x;return e.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:x,haloColor:this.haloColor&&
g.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:n,yoffset:t,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});y.mixin(b,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});b.defaultProps=
l;y.setObject("symbol.TextSymbol",b,k);k.symbol.defaultTextSymbol=l;return b})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(b,y,r,a,k,e){b=b(null,{declaredClass:"esri.symbol.Font",constructor:function(g,h,m,l,f){g?y.isObject(g)?y.mixin(this,g):(this.size=g,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==h&&(this.style=h),void 0!==m&&(this.variant=m),void 0!==l&&(this.weight=l),void 0!==f&&
(this.family=f)):y.mixin(this,a.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>r("ie")&&this.size&&y.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=a.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(g){this.size=this._convert2PxSize(g);return this},_convert2PxSize:function(g){var h;parseFloat(g)==g?h=g:y.isString(g)&&(-1<g.indexOf("pt")?h=a.pt2px(parseFloat(g)):-1<g.indexOf("px")?h=parseFloat(g):-1<g.indexOf("em")?h=
a.pt2px(12*parseFloat(g)):-1<g.indexOf("%")&&(h=a.pt2px(.12*parseFloat(g))));return h},setStyle:function(g){this.style=g;return this},setVariant:function(g){this.variant=g;return this},setWeight:function(g){this.weight=g;return this},setFamily:function(g){this.family=g;return this},setDecoration:function(g){this.decoration=g;return this},toJson:function(){return e.fixJson({size:a.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});y.mixin(b,{STYLE_NORMAL:"normal",
STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});y.setObject("symbol.Font",b,k);return b})},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(b,y,r,a,k){b=b(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(e){this.messages=[];y.mixin(this,e);e=this.messages;var g,h=e.length;
for(g=0;g<h;g++)e[g]=new k(e[g])},jobId:"",jobStatus:""});y.mixin(b,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});y.setObject("tasks.JobInfo",b,a);return b})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(k){y.mixin(this,k)}});y.mixin(b,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});
y.setObject("tasks.GPMessage",b,a);return b})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(k){k&&y.mixin(this,k)},distance:0,units:null,toJson:function(){var k={};this.distance&&(k.distance=this.distance);this.units&&(k.units=this.units);return k}});y.setObject("tasks.LinearUnit",b,a);return b})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.tasks.DataFile",constructor:function(k){k&&y.mixin(this,k)},url:null,itemID:null,toJson:function(){var k={};this.url&&(k.url=this.url);this.itemID&&(k.itemID=this.itemID);return k}});y.setObject("tasks.DataFile",b,a);return b})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.tasks.RasterData",constructor:function(k){k&&
y.mixin(this,k)},url:null,format:null,itemID:null,toJson:function(){var k={};this.url&&(k.url=this.url);this.format&&(k.format=this.format);this.itemID&&(k.itemID=this.itemID);return k}});y.setObject("tasks.RasterData",b,a);return b})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(b,y,r,a,k){b=b(null,{declaredClass:"esri.tasks.Date",constructor:function(e){e&&(e.format&&(this.format=e.format),this.date=r.parse(e.date,
{selector:"date",datePattern:this.format}))},date:new Date,format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return{date:r.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}});y.setObject("tasks.Date",b,k);return b})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(k){y.mixin(this,k)}});y.setObject("tasks.ParameterValue",
b,a);return b})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),function(b,y,r,a,k,e,g){b=b(g,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(h,m){m&&m.imageParameters&&m.imageParameters.extent&&(this.initialExtent=this.fullExtent=m.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=y.hitch(this,
this.getImageUrl);this.loaded=!0;this.onLoad(this)},getImageUrl:function(h,m,l,f){var c=h.spatialReference.wkid;f(this._url.path+"?"+k.objectToQuery(y.mixin(this._params,{f:"image",bbox:r.toJson(h.toJson()),bboxSR:c,imageSR:c,size:m+","+l})))}});y.setObject("tasks._GPResultImageLayer",b,e);return b})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../lang ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F){b=b([u,n],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(w,D,q){w=D&&D.imageParameters;var v=y.hitch;if(w){var z=w.layerDefinitions;z&&this.setLayerDefinitions(z);w.layerOption===A.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(w.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=v(this,this._setIsPNG32);this.dpi=w&&w.dpi||96;this.imageFormat=
w&&w.format||"png8";this.imageTransparency=w&&!1===w.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=D&&D.gdbVersion;this._params.gdbVersion=this.gdbVersion;z=w&&w.layerDefinitions;y.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},w?w.toJson():{});z&&(this._params.layerDefs=z);this.getImageUrl=v(this,this.getImageUrl);this._initLayer=v(this,this._initLayer);this._load=v(this,this._load);this.useMapImage=D?D.useMapImage:!1;this._loadCallback=
D&&D.loadCallback;(D=D&&D.resourceInfo)?this._initLayer(D):(void 0===q||!1===q)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(w,D){this.inherited(arguments);w.timeInfo&&(this.timeInfo=new t(w.timeInfo));this.loaded=!0;this.onLoad(this);var q=this._loadCallback;q&&(delete this._loadCallback,q(this))},getImageUrl:function(w,D,q,v){var z=this._url.path+"/export",C=this._params,E=C.token=this._getToken(),G=w.spatialReference.wkid||a.toJson(w.spatialReference.toJson()),
H=this._errorHandler;delete C._ts;y.mixin(C,{bbox:w.xmin+","+w.ymin+","+w.xmax+","+w.ymax,bboxSR:G,imageSR:G,size:D+","+q},this.disableClientCaching?{_ts:(new Date).getTime()}:{});C.layerDefs&&(w=c._serializeLayerDefinitions(C.layerDefs,10.5<=this.version),C=y.mixin({},C),delete C.layerDefs,C.layerDefs=w);w=f.addProxy(f.normalize(z)+"?"+e.objectToQuery(y.mixin({},C,{f:"image"})));w.length>h.defaults.io.postLength||this.useMapImage?this._jsonRequest=l({url:z,content:y.mixin(C,{f:"json"}),callbackParamName:"callback",
load:function(K){K.imageData?K="data:"+(K.contentType||"image")+";base64,"+K.imageData:(K=K.href,E&&(K+=-1===K.indexOf("?")?"?token\x3d"+E:"\x26token\x3d"+E),K=f.addProxy(K));v(K)},error:H}):v(w)},_setIsPNG32:function(){var w=this.imageFormat.toLowerCase(),D=k("ie");this.isPNG32=D&&6===D&&("png32"===w||"png24"===w)&&this.imageTransparency},_setTime:function(w){var D=this.timeInfo;w=this._params.time=w?w.toJson().join(","):null;if(10.02>this.version&&D)if(w)this._params.layerTimeOptions=c._serializeTimeOptions(this.layerTimeOptions);
else{var q=this.layerInfos;if(q){var v=this.layerTimeOptions,z=v?v.slice(0):[],C=[];r.forEach(q,function(E){E.subLayerIds||C.push(E.id)});C.length&&(r.forEach(C,function(E){if(!z[E]){var G=new x;G.useTime=!1;z[E]=G}}),this._params.layerTimeOptions=c._serializeTimeOptions(z,C))}}10.02<=this.version&&D&&!w&&!D.hasLiveData&&(this._params.time="null,null")},setDPI:function(w,D){this.dpi=this._params.dpi=w;D||this.refresh(!0)},setImageFormat:function(w,D){this.imageFormat=this._params.format=w;this._setIsPNG32();
D||this.refresh(!0)},setImageTransparency:function(w,D){this.imageTransparency=this._params.transparent=w;this._setIsPNG32();D||this.refresh(!0)},setVisibleLayers:function(w,D){this.visibleLayers=w;this._params.layers=A.LAYER_OPTION_SHOW+":"+(w.length?w.join():"-1");this._updateDynamicLayers();D||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(w){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;
this._updateDynamicLayers();w||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(w,D){this.layerDefinitions=w;this._params.layerDefs=w;this._updateDynamicLayers();D||this.refresh(!0)},setDefaultLayerDefinitions:function(w){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();w||this.refresh(!0)},setDisableClientCaching:function(w){this.disableClientCaching=w},setLayerTimeOptions:function(w,D){this.layerTimeOptions=w;this._params.layerTimeOptions=
c._serializeTimeOptions(w);this._updateDynamicLayers();D||this.refresh(!0)},refresh:function(w){if(w)this.inherited(arguments);else{var D=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=D}},setLayerDrawingOptions:function(w,D){this.layerDrawingOptions=w;this._updateDynamicLayers();D||this.refresh(!0)},setDynamicLayerInfos:function(w,D){w&&0<w.length?(this.dynamicLayerInfos=w,this.visibleLayers=c._getDefaultVisibleLayers(w),this.onVisibleLayersChange(this.visibleLayers)):
this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();D||this.refresh(!0)},createDynamicLayerInfosFromLayerInfos:function(){var w=[],D;r.forEach(this.layerInfos,function(q){D=new B(q.toJson());D.source=new F({mapLayerId:q.id});w.push(D)});return w},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){this.dynamicLayerInfos&&0!==this.dynamicLayerInfos.length||
(this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos());var w=this._map&&d.getScale(this._map);w=this._getDynLayerObjs(w);w=a.toJson(w);this._params.dynamicLayers&&this._params.dynamicLayers.length===w.length&&this._params.dynamicLayers===w||(this._params.dynamicLayers=w,this._onDynamicLayersChange(this._params.dynamicLayers))}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):this._params.dynamicLayers=null},_getDynLayerObjs:function(w){var D=
this.dynamicLayerInfos,q=[],v=this.visibleLayers,z=w?c._getLayersForScale(w,D):v;r.forEach(D,function(C){if(!C.subLayerIds){var E=C.id;if(-1!==r.indexOf(v,E)&&-1!==r.indexOf(z,E)){var G={id:E,name:C.name};G.source=C.source&&C.source.toJson();var H;this.layerDefinitions&&this.layerDefinitions[E]&&(H=this.layerDefinitions[E]);H&&(G.definitionExpression=H);var K;this.layerDrawingOptions&&this.layerDrawingOptions[E]&&(K=this.layerDrawingOptions[E]);K&&(H=K.toJson(),this._fixMarkerColor(H.renderer),G.drawingInfo=
H);var I;this.layerTimeOptions&&this.layerTimeOptions[E]&&(I=this.layerTimeOptions[E]);I&&(G.layerTimeOptions=I.toJson());G.minScale=C.minScale||0;G.maxScale=C.maxScale||0;q.push(G)}}},this);return q},_fixMarkerColor:function(w){r.forEach(this._getAllSimpleMarkerSymbols(w),function(D){if(!D.color){var q=[0,0,0,0],v=D.outline&&D.outline.color;"esriSMSX"!==D.style&&"esriSMSCross"!==D.style||!v||(q=v.slice(0));D.color=q}})},_getAllSimpleMarkerSymbols:function(w){return r.filter(this._getAllSymbols(w),
function(D){return"esriSMS"===D.type})},_getAllSymbols:function(w){var D=[];w&&(D.push(w.symbol),D.push(w.defaultSymbol),r.forEach(w.uniqueValueInfos||w.classBreakInfos,function(q){D.push(q.symbol)}),D=r.filter(D,m.isDefined));return D},_onExtentChangeHandler:function(w,D,q){q&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(w,D,q){this._map=w;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(w,D){this.gdbVersion=
w;this._params.gdbVersion=w;this.onGDBVersionChange();D||this.refresh(!0)},exportMapImage:function(w,D){var q=y.hitch(this,function(){var v=h.defaults.map,z=w&&w.layerDefinitions;w=w?w.toJson(this.normalization):{};z&&(w.layerDefs=z);w=y.mixin({size:v.width+","+v.height},this._params,w,{f:"json"});delete w._ts;w.layerDefs&&(v=c._serializeLayerDefinitions(w.layerDefs,10.5<=this.version),delete w.layerDefs,w.layerDefs=v);this._exportMapImage(this._url.path+"/export",w,D)});if(this.loaded)q();else this.on("load",
q)}});y.setObject("layers.ArcGISDynamicMapServiceLayer",b,g);return b})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(b,y,r,a,k){function e(c,d,u){return c&&d?c.getWidth()/d*(u||h)*39.37*m.screenDPI:0}function g(c,d,u,n,t){return c.expand(n*d/(39.37*((t?u:l.values[l[u]])||h)*m.screenDPI)/c.getWidth())}var h=6370997*Math.PI/180,m=a.defaults,l=k,f={getUnitValueForSR:function(c){return this.getUnitValue(c)||h},getUnitValue:function(c){if(c)if("object"===
typeof c){var d=c.wkid;var u=c.wkt}else"number"===typeof c?d=c:"string"===typeof c&&(u=c);if(d)var n=l.values[l[d]];else u&&-1!==u.search(/^PROJCS/i)&&(c=/UNIT\[([^\]]+)\]\]$/i.exec(u))&&c[1]&&(n=parseFloat(c[1].split(",")[1]));return n},getScale:function(c,d,u){if(1<arguments.length&&null!=d&&!d.declaredClass){var n=c;var t=d;d=null;var x=f.getUnitValue(u)}else n=d||c.extent,t=c.width,x=f.getUnitValue(n&&n.spatialReference);return e(n,t,x)},getExtentForScale:function(c,d,u){return g(u||c.extent,
c.width,f.getUnitValue(c.spatialReference),d,!0)}};b.mixin(b.getObject("geometry",!0,r),f);r.geometry._getScale=e;r.geometry._getExtentForScale=g;return f})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(b,y){var r={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9367:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,
24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,
31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,
102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,
103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,
103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,
103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(b=2E3;2045>=b;b++)r[b]=0;for(b=2056;2065>=b;b++)r[b]=0;for(b=2067;2135>=b;b++)r[b]=0;for(b=2137;2154>=
b;b++)r[b]=0;for(b=2161;2170>=b;b++)r[b]=0;for(b=2172;2193>=b;b++)r[b]=0;for(b=2195;2198>=b;b++)r[b]=0;for(b=2200;2203>=b;b++)r[b]=0;for(b=2205;2217>=b;b++)r[b]=0;for(b=2222;2224>=b;b++)r[b]=1;for(b=2225;2250>=b;b++)r[b]=2;for(b=2251;2253>=b;b++)r[b]=1;for(b=2257;2264>=b;b++)r[b]=2;for(b=2274;2279>=b;b++)r[b]=2;for(b=2280;2282>=b;b++)r[b]=1;for(b=2283;2289>=b;b++)r[b]=2;for(b=2290;2292>=b;b++)r[b]=0;for(b=2308;2313>=b;b++)r[b]=0;for(b=2315;2491>=b;b++)r[b]=0;for(b=2494;2866>=b;b++)r[b]=0;for(b=2867;2869>=
b;b++)r[b]=1;for(b=2870;2888>=b;b++)r[b]=2;for(b=2891;2895>=b;b++)r[b]=2;for(b=2896;2898>=b;b++)r[b]=1;for(b=2902;2908>=b;b++)r[b]=2;for(b=2915;2920>=b;b++)r[b]=2;for(b=2921;2923>=b;b++)r[b]=1;for(b=2924;2930>=b;b++)r[b]=2;for(b=2931;2962>=b;b++)r[b]=0;for(b=2964;2968>=b;b++)r[b]=2;for(b=2969;2973>=b;b++)r[b]=0;for(b=2975;2991>=b;b++)r[b]=0;for(b=2995;3051>=b;b++)r[b]=0;for(b=3054;3079>=b;b++)r[b]=0;for(b=3081;3088>=b;b++)r[b]=0;for(b=3092;3101>=b;b++)r[b]=0;for(b=3106;3138>=b;b++)r[b]=0;for(b=3146;3151>=
b;b++)r[b]=0;for(b=3153;3166>=b;b++)r[b]=0;for(b=3168;3172>=b;b++)r[b]=0;for(b=3174;3203>=b;b++)r[b]=0;for(b=3294;3358>=b;b++)r[b]=0;for(b=3367;3403>=b;b++)r[b]=0;for(b=3408;3416>=b;b++)r[b]=0;for(b=3417;3438>=b;b++)r[b]=2;for(b=3441;3446>=b;b++)r[b]=2;for(b=3447;3450>=b;b++)r[b]=0;for(b=3451;3459>=b;b++)r[b]=2;for(b=3460;3478>=b;b++)r[b]=0;for(b=3554;3559>=b;b++)r[b]=0;for(b=3560;3570>=b;b++)r[b]=2;for(b=3571;3581>=b;b++)r[b]=0;for(b=3594;3597>=b;b++)r[b]=0;for(b=3601;3604>=b;b++)r[b]=0;for(b=3637;3639>=
b;b++)r[b]=0;for(b=3665;3667>=b;b++)r[b]=0;for(b=3693;3695>=b;b++)r[b]=0;for(b=3701;3727>=b;b++)r[b]=0;for(b=3728;3739>=b;b++)r[b]=2;for(b=3740;3751>=b;b++)r[b]=0;for(b=3753;3760>=b;b++)r[b]=2;for(b=3761;3773>=b;b++)r[b]=0;for(b=3775;3777>=b;b++)r[b]=0;for(b=3779;3781>=b;b++)r[b]=0;for(b=3783;3785>=b;b++)r[b]=0;for(b=3788;3791>=b;b++)r[b]=0;for(b=3797;3802>=b;b++)r[b]=0;for(b=3814;3816>=b;b++)r[b]=0;for(b=3825;3829>=b;b++)r[b]=0;for(b=3832;3841>=b;b++)r[b]=0;for(b=3844;3852>=b;b++)r[b]=0;for(b=3873;3885>=
b;b++)r[b]=0;for(b=3890;3893>=b;b++)r[b]=0;for(b=3907;3912>=b;b++)r[b]=0;for(b=3942;3950>=b;b++)r[b]=0;for(b=3968;3970>=b;b++)r[b]=0;for(b=3973;3976>=b;b++)r[b]=0;for(b=3986;3989>=b;b++)r[b]=0;for(b=3994;3997>=b;b++)r[b]=0;for(b=4048;4051>=b;b++)r[b]=0;for(b=4056;4063>=b;b++)r[b]=0;for(b=4093;4096>=b;b++)r[b]=0;for(b=4390;4398>=b;b++)r[b]=0;for(b=4399;4413>=b;b++)r[b]=2;for(b=4418;4433>=b;b++)r[b]=2;for(b=4455;4457>=b;b++)r[b]=2;for(b=4484;4489>=b;b++)r[b]=0;for(b=4491;4554>=b;b++)r[b]=0;for(b=4568;4589>=
b;b++)r[b]=0;for(b=4652;4656>=b;b++)r[b]=0;for(b=4766;4800>=b;b++)r[b]=0;for(b=5014;5016>=b;b++)r[b]=0;for(b=5069;5072>=b;b++)r[b]=0;for(b=5105;5130>=b;b++)r[b]=0;for(b=5173;5188>=b;b++)r[b]=0;for(b=5253;5259>=b;b++)r[b]=0;for(b=5269;5275>=b;b++)r[b]=0;for(b=5292;5311>=b;b++)r[b]=0;for(b=5329;5331>=b;b++)r[b]=0;for(b=5343;5349>=b;b++)r[b]=0;for(b=5355;5357>=b;b++)r[b]=0;for(b=5387;5389>=b;b++)r[b]=0;for(b=5459;5463>=b;b++)r[b]=0;for(b=5479;5482>=b;b++)r[b]=0;for(b=5518;5520>=b;b++)r[b]=0;for(b=5530;5539>=
b;b++)r[b]=0;for(b=5550;5552>=b;b++)r[b]=0;for(b=5562;5583>=b;b++)r[b]=0;for(b=5623;5625>=b;b++)r[b]=2;for(b=5631;5639>=b;b++)r[b]=0;for(b=5649;5653>=b;b++)r[b]=0;for(b=5663;5680>=b;b++)r[b]=0;for(b=5682;5685>=b;b++)r[b]=0;for(b=5875;5877>=b;b++)r[b]=0;for(b=5896;5899>=b;b++)r[b]=0;for(b=5921;5940>=b;b++)r[b]=0;for(b=6050;6125>=b;b++)r[b]=0;for(b=6244;6275>=b;b++)r[b]=0;for(b=6328;6348>=b;b++)r[b]=0;for(b=6350;6356>=b;b++)r[b]=0;for(b=6366;6372>=b;b++)r[b]=0;for(b=6381;6387>=b;b++)r[b]=0;for(b=6393;6404>=
b;b++)r[b]=0;for(b=6480;6483>=b;b++)r[b]=0;for(b=6511;6514>=b;b++)r[b]=0;for(b=6579;6581>=b;b++)r[b]=0;for(b=6619;6624>=b;b++)r[b]=0;for(b=6625;6627>=b;b++)r[b]=2;for(b=6628;6632>=b;b++)r[b]=0;for(b=6634;6637>=b;b++)r[b]=0;for(b=6669;6692>=b;b++)r[b]=0;for(b=6707;6709>=b;b++)r[b]=0;for(b=6720;6723>=b;b++)r[b]=0;for(b=6732;6738>=b;b++)r[b]=0;for(b=6931;6933>=b;b++)r[b]=0;for(b=6956;6959>=b;b++)r[b]=0;for(b=7005;7007>=b;b++)r[b]=0;for(b=7057;7070>=b;b++)r[b]=2;for(b=7074;7082>=b;b++)r[b]=0;for(b=7109;7118>=
b;b++)r[b]=0;for(b=7119;7127>=b;b++)r[b]=1;for(b=7374;7376>=b;b++)r[b]=0;for(b=7528;7586>=b;b++)r[b]=0;for(b=7587;7645>=b;b++)r[b]=2;for(b=7692;7696>=b;b++)r[b]=0;for(b=7755;7787>=b;b++)r[b]=0;for(b=7791;7795>=b;b++)r[b]=0;for(b=7799;7801>=b;b++)r[b]=0;for(b=7803;7805>=b;b++)r[b]=0;for(b=7825;7831>=b;b++)r[b]=0;for(b=7845;7859>=b;b++)r[b]=0;for(b=8013;8032>=b;b++)r[b]=0;for(b=8065;8068>=b;b++)r[b]=1;for(b=8518;8529>=b;b++)r[b]=2;for(b=8533;8536>=b;b++)r[b]=2;for(b=8538;8540>=b;b++)r[b]=2;for(b=8677;8679>=
b;b++)r[b]=0;for(b=8836;8840>=b;b++)r[b]=0;for(b=8857;8859>=b;b++)r[b]=0;for(b=8908;8910>=b;b++)r[b]=0;for(b=9154;9159>=b;b++)r[b]=0;for(b=9205;9218>=b;b++)r[b]=0;for(b=9271;9273>=b;b++)r[b]=0;for(b=9295;9297>=b;b++)r[b]=0;for(b=20002;20032>=b;b++)r[b]=0;for(b=20062;20092>=b;b++)r[b]=0;for(b=20135;20138>=b;b++)r[b]=0;for(b=20248;20258>=b;b++)r[b]=0;for(b=20348;20358>=b;b++)r[b]=0;for(b=20436;20440>=b;b++)r[b]=0;for(b=20822;20824>=b;b++)r[b]=0;for(b=20934;20936>=b;b++)r[b]=0;for(b=21035;21037>=b;b++)r[b]=
0;for(b=21095;21097>=b;b++)r[b]=0;for(b=21148;21150>=b;b++)r[b]=0;for(b=21413;21423>=b;b++)r[b]=0;for(b=21453;21463>=b;b++)r[b]=0;for(b=21473;21483>=b;b++)r[b]=0;for(b=21780;21782>=b;b++)r[b]=0;for(b=21891;21894>=b;b++)r[b]=0;for(b=21896;21899>=b;b++)r[b]=0;for(b=22171;22177>=b;b++)r[b]=0;for(b=22181;22187>=b;b++)r[b]=0;for(b=22191;22197>=b;b++)r[b]=0;for(b=22234;22236>=b;b++)r[b]=0;for(b=22521;22525>=b;b++)r[b]=0;for(b=22991;22994>=b;b++)r[b]=0;for(b=23028;23038>=b;b++)r[b]=0;for(b=23830;23853>=
b;b++)r[b]=0;for(b=23866;23872>=b;b++)r[b]=0;for(b=23877;23884>=b;b++)r[b]=0;for(b=23886;23894>=b;b++)r[b]=0;for(b=23946;23948>=b;b++)r[b]=0;for(b=24311;24313>=b;b++)r[b]=0;for(b=24342;24347>=b;b++)r[b]=0;for(b=24370;24374>=b;b++)r[b]=10;for(b=24375;24381>=b;b++)r[b]=0;for(b=24718;24721>=b;b++)r[b]=0;for(b=24817;24821>=b;b++)r[b]=0;for(b=24877;24882>=b;b++)r[b]=0;for(b=24891;24893>=b;b++)r[b]=0;for(b=25391;25395>=b;b++)r[b]=0;for(b=25828;25838>=b;b++)r[b]=0;for(b=26191;26195>=b;b++)r[b]=0;for(b=26391;26393>=
b;b++)r[b]=0;for(b=26701;26722>=b;b++)r[b]=0;for(b=26729;26799>=b;b++)r[b]=2;for(b=26801;26803>=b;b++)r[b]=2;for(b=26811;26813>=b;b++)r[b]=2;for(b=26847;26870>=b;b++)r[b]=2;for(b=26891;26899>=b;b++)r[b]=0;for(b=26901;26923>=b;b++)r[b]=0;for(b=26929;26946>=b;b++)r[b]=0;for(b=26948;26998>=b;b++)r[b]=0;for(b=27037;27040>=b;b++)r[b]=0;for(b=27205;27232>=b;b++)r[b]=0;for(b=27258;27260>=b;b++)r[b]=0;for(b=27391;27398>=b;b++)r[b]=0;for(b=27561;27564>=b;b++)r[b]=0;for(b=27571;27574>=b;b++)r[b]=0;for(b=27581;27584>=
b;b++)r[b]=0;for(b=27591;27594>=b;b++)r[b]=0;for(b=28191;28193>=b;b++)r[b]=0;for(b=28348;28358>=b;b++)r[b]=0;for(b=28402;28432>=b;b++)r[b]=0;for(b=28462;28492>=b;b++)r[b]=0;for(b=29118;29122>=b;b++)r[b]=0;for(b=29168;29172>=b;b++)r[b]=0;for(b=29177;29185>=b;b++)r[b]=0;for(b=29187;29195>=b;b++)r[b]=0;for(b=29900;29903>=b;b++)r[b]=0;for(b=30161;30179>=b;b++)r[b]=0;for(b=30491;30494>=b;b++)r[b]=0;for(b=30729;30732>=b;b++)r[b]=0;for(b=31251;31259>=b;b++)r[b]=0;for(b=31265;31268>=b;b++)r[b]=0;for(b=31275;31279>=
b;b++)r[b]=0;for(b=31281;31297>=b;b++)r[b]=0;for(b=31461;31469>=b;b++)r[b]=0;for(b=31491;31495>=b;b++)r[b]=0;for(b=31917;31922>=b;b++)r[b]=0;for(b=31965;32E3>=b;b++)r[b]=0;for(b=32001;32003>=b;b++)r[b]=2;for(b=32005;32031>=b;b++)r[b]=2;for(b=32033;32060>=b;b++)r[b]=2;for(b=32064;32067>=b;b++)r[b]=2;for(b=32074;32077>=b;b++)r[b]=2;for(b=32081;32086>=b;b++)r[b]=0;for(b=32107;32130>=b;b++)r[b]=0;for(b=32133;32158>=b;b++)r[b]=0;for(b=32164;32167>=b;b++)r[b]=2;for(b=32180;32199>=b;b++)r[b]=0;for(b=32201;32260>=
b;b++)r[b]=0;for(b=32301;32360>=b;b++)r[b]=0;for(b=32601;32662>=b;b++)r[b]=0;for(b=32664;32667>=b;b++)r[b]=2;for(b=32701;32761>=b;b++)r[b]=0;for(b=53001;53004>=b;b++)r[b]=0;for(b=53008;53019>=b;b++)r[b]=0;for(b=53021;53032>=b;b++)r[b]=0;for(b=53034;53037>=b;b++)r[b]=0;for(b=53042;53046>=b;b++)r[b]=0;for(b=53074;53080>=b;b++)r[b]=0;for(b=54001;54004>=b;b++)r[b]=0;for(b=54008;54019>=b;b++)r[b]=0;for(b=54021;54032>=b;b++)r[b]=0;for(b=54034;54037>=b;b++)r[b]=0;for(b=54042;54046>=b;b++)r[b]=0;for(b=54048;54053>=
b;b++)r[b]=0;for(b=54074;54080>=b;b++)r[b]=0;for(b=54098;54101>=b;b++)r[b]=0;for(b=102001;102040>=b;b++)r[b]=0;for(b=102042;102063>=b;b++)r[b]=0;for(b=102065;102067>=b;b++)r[b]=0;for(b=102070;102117>=b;b++)r[b]=0;for(b=102122;102216>=b;b++)r[b]=0;for(b=102221;102377>=b;b++)r[b]=0;for(b=102382;102388>=b;b++)r[b]=0;for(b=102389;102398>=b;b++)r[b]=2;for(b=102399;102444>=b;b++)r[b]=0;for(b=102445;102447>=b;b++)r[b]=2;for(b=102448;102458>=b;b++)r[b]=0;for(b=102459;102468>=b;b++)r[b]=2;for(b=102469;102499>=
b;b++)r[b]=0;for(b=102500;102519>=b;b++)r[b]=1;for(b=102520;102524>=b;b++)r[b]=0;for(b=102525;102529>=b;b++)r[b]=2;for(b=102530;102588>=b;b++)r[b]=0;for(b=102590;102598>=b;b++)r[b]=0;for(b=102601;102603>=b;b++)r[b]=0;for(b=102605;102628>=b;b++)r[b]=0;for(b=102629;102646>=b;b++)r[b]=2;for(b=102648;102700>=b;b++)r[b]=2;for(b=102701;102703>=b;b++)r[b]=0;for(b=102707;102730>=b;b++)r[b]=2;for(b=102733;102758>=b;b++)r[b]=2;for(b=102767;102900>=b;b++)r[b]=0;for(b=102965;102969>=b;b++)r[b]=0;for(b=102971;102973>=
b;b++)r[b]=0;for(b=102975;102989>=b;b++)r[b]=0;for(b=102990;102992>=b;b++)r[b]=1;for(b=102997;103002>=b;b++)r[b]=0;for(b=103003;103008>=b;b++)r[b]=2;for(b=103009;103011>=b;b++)r[b]=0;for(b=103012;103014>=b;b++)r[b]=2;for(b=103019;103021>=b;b++)r[b]=0;for(b=103022;103024>=b;b++)r[b]=2;for(b=103029;103031>=b;b++)r[b]=0;for(b=103032;103034>=b;b++)r[b]=2;for(b=103065;103068>=b;b++)r[b]=0;for(b=103074;103076>=b;b++)r[b]=0;for(b=103077;103079>=b;b++)r[b]=1;for(b=103080;103082>=b;b++)r[b]=0;for(b=103083;103085>=
b;b++)r[b]=2;for(b=103090;103093>=b;b++)r[b]=0;for(b=103097;103099>=b;b++)r[b]=0;for(b=103100;103102>=b;b++)r[b]=2;for(b=103107;103109>=b;b++)r[b]=0;for(b=103110;103112>=b;b++)r[b]=2;for(b=103113;103116>=b;b++)r[b]=0;for(b=103117;103120>=b;b++)r[b]=2;for(b=103153;103157>=b;b++)r[b]=0;for(b=103158;103162>=b;b++)r[b]=2;for(b=103163;103165>=b;b++)r[b]=0;for(b=103166;103168>=b;b++)r[b]=1;for(b=103169;103171>=b;b++)r[b]=2;for(b=103186;103188>=b;b++)r[b]=0;for(b=103189;103191>=b;b++)r[b]=2;for(b=103192;103195>=
b;b++)r[b]=0;for(b=103196;103199>=b;b++)r[b]=2;for(b=103200;103224>=b;b++)r[b]=0;for(b=103225;103227>=b;b++)r[b]=1;for(b=103232;103237>=b;b++)r[b]=0;for(b=103238;103243>=b;b++)r[b]=2;for(b=103244;103246>=b;b++)r[b]=0;for(b=103247;103249>=b;b++)r[b]=2;for(b=103254;103256>=b;b++)r[b]=0;for(b=103257;103259>=b;b++)r[b]=2;for(b=103264;103266>=b;b++)r[b]=0;for(b=103267;103269>=b;b++)r[b]=2;for(b=103300;103375>=b;b++)r[b]=0;for(b=103381;103383>=b;b++)r[b]=0;for(b=103384;103386>=b;b++)r[b]=1;for(b=103387;103389>=
b;b++)r[b]=0;for(b=103390;103392>=b;b++)r[b]=2;for(b=103397;103399>=b;b++)r[b]=0;for(b=103400;103471>=b;b++)r[b]=2;for(b=103476;103478>=b;b++)r[b]=0;for(b=103479;103481>=b;b++)r[b]=2;for(b=103486;103488>=b;b++)r[b]=0;for(b=103489;103491>=b;b++)r[b]=2;for(b=103492;103495>=b;b++)r[b]=0;for(b=103496;103499>=b;b++)r[b]=2;for(b=103528;103543>=b;b++)r[b]=0;for(b=103544;103548>=b;b++)r[b]=2;for(b=103549;103551>=b;b++)r[b]=0;for(b=103552;103554>=b;b++)r[b]=1;for(b=103555;103557>=b;b++)r[b]=2;for(b=103558;103560>=
b;b++)r[b]=0;for(b=103571;103573>=b;b++)r[b]=0;for(b=103574;103576>=b;b++)r[b]=2;for(b=103577;103580>=b;b++)r[b]=0;for(b=103581;103583>=b;b++)r[b]=2;for(b=103595;103694>=b;b++)r[b]=0;for(b=103696;103699>=b;b++)r[b]=0;for(b=103700;103793>=b;b++)r[b]=2;for(b=103794;103872>=b;b++)r[b]=0;for(b=103900;103971>=b;b++)r[b]=2;return y.WKIDUnitConversion=r})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d){var u=h.defaults.map.zoomDuration;b=b(c,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},constructor:function(n,t){this.useMapTime=t&&t.hasOwnProperty("useMapTime")?!!t.useMapTime:!0;this.extentProcessor=t&&t.extentProcessor;n=r.hitch;this._exportMapImageHandler=n(this,this._exportMapImageHandler);this._imgSrcFunc=n(this,this._imgSrcFunc);this._divAlphaImageFunc=n(this,this._divAlphaImageFunc);this._tileLoadHandler=
n(this,this._tileLoadHandler);this._tileErrorHandler=n(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(n,t,x){this.inherited(arguments);this._map=n;var A=this._div=a.create("div",null,t),B=g._css.names,F={position:"absolute",width:n.width+"px",height:n.height+"px",overflow:"visible",opacity:this.opacity},w=m("ie"),D=y.connect,q=n.__visibleDelta;8===w&&delete F.opacity;"css-transforms"===n.navigationMode?(this._isChildLayer||(F[B.transform]=g._css.translate(q.x,
q.y),k.set(A,F)),this._left=q.x,this._top=q.y):(F.left="0px",F.top="0px",k.set(A,F),this._left=this._top=0);k.set(A,F);this._onResizeHandler_connect=D(n,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=D(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!n.loaded)var v=y.connect(n,"onLoad",this,function(){y.disconnect(v);v=null;this.evaluateSuspension()});this.extentProcessor&&(this._panEndEvalHandle=
y.connect(n,"onPanEnd",this,this.evaluateSuspension),this._zoomEndEvalHandle=y.connect(n,"onZoomEnd",this,this.evaluateSuspension));return A},_unsetMap:function(n,t){this._img&&this._clearEventListeners(this._img);this._img_loading&&this._clearEventListeners(this._img_loading);a.destroy(this._div);this._map=this._div=this._img=this._img_loading=null;var x=y.disconnect;x(this._onResizeHandler_connect);x(this._opacityChangeHandler_connect);x(this._panEndEvalHandle);x(this._zoomEndEvalHandle);this._panEndEvalHandle=
this._zoomEndEvalHandle=this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(n,t,x){k.set(this._div,{width:t+"px",height:x+"px"});this._onExtentChangeHandler(n)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();f.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=
null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var n=this._map;this._toggleTime();"css-transforms"===n.navigationMode&&(n=n.__visibleDelta,this._left=n.x,this._top=n.y,this._isChildLayer||k.set(this._div,g._css.names.transform,g._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(r.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},canResume:function(){var n=
this.inherited(arguments);if(n){var t=this._map.extent;this.extentProcessor&&t&&(n=!!this.extentProcessor({layer:this,extent:t,width:this._map.width}).extent)}return n},_enableDrawConnectors:function(){var n=y.connect,t=this._map;t&&(this._onPanHandler_connect=n(t,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=n(t,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===t.navigationMode?this._onScaleHandler_connect=n(t,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=
n(t,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var n=y.disconnect;n(this._onPanHandler_connect);n(this._onExtentChangeHandler_connect);n(this._onZoomHandler_connect);n(this._onScaleHandler_connect);this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var n=this._map;this.timeInfo&&this.useMapTime&&n&&!this.suspended?(this._timeConnect||(this._timeConnect=y.connect(n,"onTimeExtentChange",
this,this._onTimeExtentChangeHandler)),this._setTime(n.timeExtent)):(y.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(n){this._params&&(this._params.time=n?n.toJson().join(","):null)},_onPanHandler:function(n,t){this._panDx=t.x;this._panDy=t.y;n=this._dragOrigin;var x=this._map.__visibleDelta,A=this._img;A&&("css-transforms"===this._map.navigationMode?(this._left=x.x+t.x,this._top=x.y+t.y,this._isChildLayer||k.set(this._div,g._css.names.transform,g._css.translate(this._left,
this._top))):k.set(A,{left:n.x+t.x+"px",top:n.y+t.y+"px"}))},_onExtentChangeHandler:function(n,t,x){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var A=this._map,B=this._img,F=B&&B.style,w=this._dragOrigin;!t||x||!B||t.x===this._panDx&&t.y===this._panDy||("css-transforms"===A.navigationMode?(t=A.__visibleDelta,this._left=t.x,this._top=t.y,this._isChildLayer||k.set(this._div,g._css.names.transform,g._css.translate(this._left,this._top))):k.set(B,{left:w.x+t.x+"px",top:w.y+
t.y+"px"}));B?(w.x=parseInt(F.left,10),w.y=parseInt(F.top,10)):w.x=w.y=0;"css-transforms"===A.navigationMode&&x&&B&&(k.set(B,g._css.names.transition,"none"),B._multiply=B._multiply?e.multiply(B._matrix,B._multiply):B._matrix);this._fireUpdateStart();if(x=this._img_loading)if(this._clearEventListeners(x),a.destroy(x),this._img_loading=null,x=this._jsonRequest){try{x.cancel()}catch(G){}this._jsonRequest=null}var D=A.width;x=A.height;t=D;var q=0;10<=this.version&&A.wrapAround180&&(n=n._normalize(!0));
this.extentProcessor&&(q=this.extentProcessor({layer:this,extent:n,width:t}),n=q.extent,t=q.width,q=q.marginLeft||0);if(this.isPNG32)B=this._img_loading=a.create("div"),B.id=A.id+"_"+this.id+"_"+(new Date).getTime(),k.set(B,{position:"absolute",left:"0px",top:"0px",width:t+"px",height:x+"px"}),A=B.appendChild(a.create("div")),k.set(A,{opacity:0,width:t+"px",height:x+"px"}),this.getImageUrl(n,t,x,this._divAlphaImageFunc),B=null;else{var v=this._img_loading=a.create("img"),z=g._css.names,C=m("ie"),
E={position:"absolute",width:t+"px",height:x+"px"};v.setAttribute("decoding","sync");8===C&&(E.opacity=this.opacity);null!=q&&0!==q&&(E.marginLeft=q+"px");"css-transforms"===A.navigationMode?(E[z.transform]=g._css.translate(-this._left,-this._top),v._tdx=-this._left,v._tdy=-this._top,E[z.transition]=z.transformName+" "+u+"ms ease",this.extentProcessor&&(E[z.origin]=D/2-q+"px "+x/2+"px")):(E.left="0px",E.top="0px");v.id=A.id+"_"+this.id+"_"+(new Date).getTime();k.set(v,E);v._onload_connect=y.connect(v,
"onload",this,"_onLoadHandler");v._onerror_connect=y.connect(v,"onerror",this,"_onErrorHandler");v._onabort_connect=y.connect(v,"onabort",this,"_onErrorHandler");this._startRect={left:w.x,top:w.y,width:B?parseInt(F.width,10):t,height:B?parseInt(F.height,10):x,marginLeft:B?parseInt(F.marginLeft||"0",10):q,zoom:F&&F.zoom?parseFloat(F.zoom):1};this.getImageUrl(n,t,x,this._imgSrcFunc);v=null}}},_onTimeExtentChangeHandler:function(n){this.suspended||(this._setTime(n),this.refresh(!0))},getImageUrl:function(n,
t,x,A){},_imgSrcFunc:function(n){this._img_loading.src=n},_divAlphaImageFunc:function(n){k.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+n+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},_onLoadHandler:function(n){n=n.currentTarget;var t=this._map;this._clearEventListeners(n);!t||t.__panning||t.__zooming?a.destroy(n):(this._img&&this._div.removeChild(this._img),this._img=n,t=n.style,this._startRect={left:0,top:0,
width:parseInt(t.width,10),height:parseInt(t.height,10),marginLeft:parseInt(t.marginLeft||"0",10),zoom:1},this._div.appendChild(n),this.suspended||f.show(this._div),this._img_loading=null,n=this._dragOrigin,n.x=n.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(n){n=n.currentTarget;k.set(n,"visibility","hidden");this._clearEventListeners(n);n=Error("Unable to load image: "+n.src);this.onError(n);this._fireUpdateEnd(n)},_clearEventListeners:function(n){y.disconnect(n._onload_connect);
y.disconnect(n._onerror_connect);y.disconnect(n._onabort_connect);n._onload_connect=n._onerror_connect=n._onabort_connect=null},setUseMapTime:function(n,t){this.useMapTime=n;this._toggleTime();t||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},_onScaleHandler:function(n,t){var x={},A=g._css.names,B=this._img;if(B){k.set(B,A.transition,t?"none":A.transformName+" "+u+"ms ease");B._matrix=n;n=B._multiply?e.multiply(n,B._multiply):n;if(B._tdx||B._tdy)n=e.multiply(n,
{xx:1,xy:0,yx:0,yy:1,dx:B._tdx,dy:B._tdy});x[A.transform]=g._css.matrix(n);k.set(B,x)}},_onZoomHandler:function(n,t,x){n=this._startRect;var A=n.width*t,B=n.height*t,F=n.marginLeft*t,w=this._img,D=m("ie");w&&(D&&8>D?k.set(w,{left:n.left-(A-n.width)*(x.x-n.left)/n.width+"px",top:n.top-(B-n.height)*(x.y-n.top)/n.height+"px",zoom:t*n.zoom}):k.set(w,{left:n.left-(A-n.width)*(x.x-n.left)/n.width+"px",top:n.top-(B-n.height)*(x.y-n.top)/n.height+"px",width:A+"px",height:B+"px"}),null!=F&&0!==F&&k.set(w,
{marginLeft:F+"px"}))},_exportMapImage:function(n,t,x){var A=this._exportMapImageHandler;t.token=this._getToken();l({url:n,content:t,callbackParamName:"callback",load:function(B,F){A(B,F,x)},error:h.defaults.io.errorHandler})},_exportMapImageHandler:function(n,t,x){n=new d(n);this.onMapImageExport(n);x&&x(n)},onMapImageExport:function(){},setOpacity:function(n){if(this.opacity!=n)this.onOpacityChange(this.opacity=n)},onOpacityChange:function(){},_opacityChangeHandler:function(n){var t=8===m("ie")?
this._img:this._div;k.set(t,"opacity",n)}});r.setObject("layers.DynamicMapServiceLayer",b,g);return b})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n){var t=b([h],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],
"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(x,A){this._attrs={};x&&a.isString(x)?this._url=d.urlToObject(this.url=d.normalize(x)):(this.url=this._url=null,(A=A||x)&&(A.layerDefinition||A.query)&&(A=null));this.spatialReference=new u(4326);this.initialExtent=new n(-180,-90,180,90,new u(4326));this._map=this._div=null;this.normalization=!0;A&&(A.id&&(this.id=A.id),this.arcgisProps=A.arcgisProps,this.parentLayer=A.parentLayer,!1===A.visible&&
(this.visible=!1),l.isDefined(A.opacity)&&(this.opacity=A.opacity),l.isDefined(A.minScale)&&this.setMinScale(A.minScale),l.isDefined(A.maxScale)&&this.setMaxScale(A.maxScale),this.attributionDataUrl=A.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,l.isDefined(A.showAttribution)&&(this.showAttribution=A.showAttribution),this.className=A.className,this.refreshInterval=A.refreshInterval||0);this._errorHandler=a.hitch(this,this._errorHandler);this._scheduledRefresh=a.hitch(this,
this._scheduledRefresh);this.refresh=a.hitch(this,this.refresh);if(this.managedSuspension){var B=this._setMap;this._setMap=function(F){var w=B.apply(this,arguments);this._fireAttach(F);this.evaluateSuspension();if(this.suspended&&!F.loaded)var D=r.connect(F,"onLoad",this,function(){r.disconnect(D);D=null;this.evaluateSuspension()});return w}}this.registerConnectEvents()},id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",
hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(x){this.loaded||(this.loadError=x);this.onError(x)},_setMap:function(x,A,B,F){this._map=x;this._lyrZEHandle=r.connect(x,"onZoomEnd",this,this._processMapScale);if(x.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var w=r.connect(x,"onLoad",this,function(){r.disconnect(w);w=null;this._processMapScale()})},_unsetMap:function(x,A){r.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=
void 0;this.suspended=!0;this._fireDetach(x)},_fireAttach:function(x){this.attached=!0;this.onAttach({map:x})},_fireDetach:function(x){this.attached=!1;this.onDetach({map:x})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(x,A){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(x,A),this._map&&
this._map._decr())},_getToken:function(){var x=this._url,A=this.credential;return x&&x.query&&x.query.token||A&&A.token||void 0},_findCredential:function(){this.credential=m.id&&this._url&&m.id.findCredential(this._url.path)},_useSSL:function(){var x=this._url,A=/^http:/i;this.url&&(this.url=this.url.replace(A,"https:"));x&&x.path&&(x.path=x.path.replace(A,"https:"))},refresh:function(){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(x){this.setScaleRange(x)},
setMaxScale:function(x){this.setScaleRange(null,x)},setScaleRange:function(x,A){var B=l.isDefined(x),F=l.isDefined(A);this.loaded||(this._hasMin=this._hasMin||B,this._hasMax=this._hasMax||F);var w=this.minScale,D=this.maxScale;this.minScale=(B?x:this.minScale)||0;this.maxScale=(F?A:this.maxScale)||0;if(w!==this.minScale||D!==this.maxScale)this.onScaleRangeChange(),this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},
canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1;this.attr("data-suspended");var x=void 0===this._resumedOnce,A=this.className,B=this._attrs,F=this.getNode(),
w;if(x){this._resumedOnce=!0;if(A&&F){var D=F.getAttribute("class")||"";(new RegExp("(^|\\s)"+A+"(\\s|$)","i")).test(D)||F.setAttribute("class",D+((D?" ":"")+A))}if(B&&F)for(w in B)B.hasOwnProperty(w)&&F.setAttribute(w,B[w])}this._refreshRT();this.onResume({firstOccurrence:x});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var x=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();x!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},
isVisibleAtScale:function(x){return x?t.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(x,A){if(!(x||this._map&&this._map.loaded))return!1;var B=this._map;x=x||B.getScale();var F=this.minScale,w=this.maxScale,D=!F,q=!w,v;A&&(v=B.width>B.height?B.width:B.height);D||(x<=F?D=!0:A&&(D=Math.abs(F-x)/F<1/v));q||(x>=w?q=!0:A&&(q=Math.abs(w-x)/w<1/v));return D&&q},getAttributionData:function(){var x=this.attributionDataUrl,A=new k(c._dfdCanceller);this.hasAttributionData&&
x?(A._pendingDfd=f({url:x,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),A._pendingDfd.then(function(B){A.callback(B)},function(B){A.errback(B)})):(x=Error("Layer does not have attribution data"),x.log=!!y.isDebug,A.errback(x));return A},getResourceInfo:function(){var x=this.resourceInfo;return a.isString(x)?e.fromJson(x):a.clone(x)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(x,A){var B=this.getNode();if("data-reference"===x&&11>g("ie"))return this;
B&&(null==A?B.removeAttribute(x):B.setAttribute(x,A));this._attrs&&(null==A?delete this._attrs[x]:this._attrs[x]=A);return this},setRefreshInterval:function(x){var A=this.refreshInterval;this.refreshInterval=x;this._toggleRT(!1);x&&this._toggleRT(!0);if(A!==x)this.onRefreshIntervalChange();return this},_toggleRT:function(x){x&&this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),
this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(x){var A=this._refreshTS;A&&(x=this._reCheckTS.test(x)?x.replace(this._reReplaceTS,"$$$1"+A):x+((-1===x.indexOf("?")?"?":"\x26")+"_ts\x3d"+A));return x},setNormalization:function(x){this.normalization=
x},setVisibility:function(x){this.visible!==x&&(this.visible=x,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",x?null:"")},onLoad:function(){},onAttach:function(x){},onDetach:function(x){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},
onError:function(){}});a.setObject("layers.Layer",t,m);return t})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),function(b,y,r,a,k,e,g){b=b(null,{declaredClass:"esri.layers.MapImage",constructor:function(h){y.mixin(this,h);this.extent=new g(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=
!0;var h=this._node,m=this._layer,l;if(h){if(l=m&&m._div)m.suspended||m._setPos(h,l._left,l._top),(m._active||l).appendChild(h);e.show(h)}}},hide:function(){if(this.visible){this.visible=!1;var h=this._node;h&&(e.hide(h),h.parentNode&&h.parentNode.removeChild(h))}},setOpacity:function(h){var m=this._node;this.opacity=h;m&&r.set(m,"opacity",h)}});y.setObject("layers.MapImage",b,k);return b})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),
function(b,y,r,a,k,e,g,h,m,l){b=b(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(f,c){this.layerInfos=[];c&&(this.infoTemplates=c.infoTemplates||null);f=this._params={};if(c=this._url.query?this._url.query.token:null)f.token=c},setInfoTemplates:function(f){this.infoTemplates=f},_load:function(){g({url:this._url.path,content:y.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,
initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(f,c){try{this._findCredential();(this.credential&&this.credential.ssl||f&&f._ssl)&&this._useSSL();this.description=f.description;this.copyright=f.copyrightText;this.spatialReference=f.spatialReference&&new h(f.spatialReference);this.initialExtent=f.initialExtent&&new m(f.initialExtent);this.fullExtent=f.fullExtent&&new m(f.fullExtent);this.units=f.units;this.maxRecordCount=f.maxRecordCount;this.maxImageHeight=f.maxImageHeight;
this.maxImageWidth=f.maxImageWidth;this.supportsDynamicLayers=f.supportsDynamicLayers;var d=this.layerInfos=[],u=f.layers,n=this._defaultVisibleLayers=[];r.forEach(u,function(t,x){d[x]=new l(t);t.defaultVisibility&&n.push(t.id)});this.visibleLayers||(this.visibleLayers=n);this.version=f.currentVersion;this.cimVersion=f.cimVersion;this.version||(this.version="capabilities"in f||"tables"in f?10:"supportedImageFormatTypes"in f?9.31:9.3);this.capabilities=f.capabilities;e.isDefined(f.minScale)&&!this._hasMin&&
this.setMinScale(f.minScale);e.isDefined(f.maxScale)&&!this._hasMax&&this.setMaxScale(f.maxScale)}catch(t){this._errorHandler(t)}}});y.setObject("layers.ArcGISMapServiceLayer",b,k);return b})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(b,y,r,a,k){b=b(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(e){y.mixin(this,e)},toJson:function(){return k.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,
maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});y.setObject("layers.LayerInfo",b,a);return b})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),function(b,y,r,a,k,e,g){b=b(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(h){null!==h&&(y.mixin(this,h),h.exportOptions&&(this.exportOptions=new g(h.exportOptions)),
this.timeExtent=null,h.timeExtent&&2===h.timeExtent.length&&(this.timeExtent=new k(h.timeExtent)),this.timeReference=new e(h.timeReference))}});y.mixin(b,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",
UNIT_YEARS:"esriTimeUnitsYears"});y.setObject("layers.TimeInfo",b,a);return b})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(b,y,r,a){var k=b(null,{declaredClass:"esri.TimeExtent",constructor:function(e){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(e)if(y.isArray(e)){var g=e[0],h=e[1];this.startTime=null===g||"null"===g?null:new Date(g);this.endTime=null===h||"null"===h?null:new Date(h)}else e instanceof Date&&
this._create(e,null)},offset:function(e,g){var h=new k,m=this.startTime,l=this.endTime;m&&(h.startTime=this._getOffsettedDate(m,e,g));l&&(h.endTime=this._getOffsettedDate(l,e,g));return h},intersection:function(e){return this._intersection(this,e)},toJson:function(){var e=[],g=this.startTime;e.push(g?g.getTime():"null");g=this.endTime;e.push(g?g.getTime():"null");return e},_create:function(e,g){this.startTime=e?new Date(e.getTime()):null;this.endTime=g?new Date(g.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",
setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},
esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(e,g){if(e&&g){var h=e.startTime;e=e.endTime;var m=g.startTime;g=g.endTime;h=h?h.getTime():-Infinity;m=m?m.getTime():-Infinity;e=e?e.getTime():Infinity;g=g?g.getTime():Infinity;var l,f;m>=h&&m<=e?l=m:h>=m&&h<=g&&(l=h);e>=m&&
e<=g?f=e:g>=h&&g<=e&&(f=g);if(isNaN(l)||isNaN(f))return null;h=new k;h.startTime=-Infinity===l?null:new Date(l);h.endTime=Infinity===f?null:new Date(f);return h}return null},_getOffsettedDate:function(e,g,h){var m=this._refData;e=new Date(e.getTime());g&&h&&(m=m[h],e[m.setter](e[m.getter]()+g*m.multiplier));return e}});return a.TimeExtent=k})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.layers.TimeReference",
constructor:function(k){k&&y.mixin(this,k)}});y.setObject("layers.TimeReference",b,a);return b})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(b,y,r,a,k){b=b(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(e){e&&y.mixin(this,e)},toJson:function(){return k.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});
y.setObject("layers.LayerTimeOptions",b,a);return b})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),function(b,y,r,a,k,e,g,h){y=y(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,
layerTimeOptions:null,toJson:function(m){this.bbox&&b.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var l=this.bbox||this.extent;l=l&&m&&l._normalize(!0);m=this.layerOption;var f=l?l.spatialReference.wkid||a.toJson(l.spatialReference.toJson()):null,c=this.imageSpatialReference;l={dpi:this.dpi,format:this.format,transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:l?l.xmin+","+l.ymin+","+l.xmax+","+l.ymax:
null,bboxSR:f,layers:m?m+":"+this.layerIds.join(","):null,imageSR:c?c.wkid||a.toJson(c.toJson()):f};l.layerDefs=h._serializeLayerDefinitions(this.layerDefinitions);m=this.timeExtent;l.time=m?m.toJson().join(","):null;l.layerTimeOptions=h._serializeTimeOptions(this.layerTimeOptions);return g.filter(l,function(d){if(null!==d)return!0})}});r.mixin(y,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});r.setObject("layers.ImageParameters",
y,e);return y})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(b,y,r,a,k,e,g,h){b=b(e,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(m){m&&(m.source?m="mapLayer"===m.source.type?new g(m.source):new h(m.source):(m=new g,m.mapLayerId=this.id),this.source=m)},toJson:function(){var m=this.inherited(arguments);
m.source=this.source&&this.source.toJson();return k.fixJson(m)}});y.setObject("layers.DynamicLayerInfo",b,a);return b})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(b,y,r,a,k,e){b=b(e,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return k.fixJson({type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});y.setObject("layers.LayerMapSource",b,a);return b})},
"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(k){k&&y.mixin(this,k)},toJson:function(){}});y.setObject("layers.LayerSource",b,a);return b})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),
function(b,y,r,a,k,e,g,h,m,l){b=b(e,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(f){if(f&&f.dataSource){switch(f.dataSource.type){case "table":f=new g(f.dataSource);break;case "queryTable":f=new h(f.dataSource);break;case "joinTable":f=new m(f.dataSource);break;case "raster":f=new l(f.dataSource);break;default:f=f.dataSource}this.dataSource=f}},toJson:function(){var f={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return k.fixJson(f)}});
y.setObject("layers.LayerDataSource",b,a);return b})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(b,y,r,a,k,e){b=b(e,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return k.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});y.setObject("layers.TableDataSource",b,a);return b})},"esri/layers/DataSource":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.layers.DataSource",constructor:function(k){k&&y.mixin(this,k)},toJson:function(){}});y.setObject("layers.DataSource",b,a);return b})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),function(b,y,r,a,k,e,g){b=b(e,{declaredClass:"esri.layers.QueryDataSource",constructor:function(h){h&&(h.oidFields&&y.isString(h.oidFields)&&
(this.oidFields=h.oidFields.split(",")),h.spatialReference&&(this.spatialReference=new g(h.spatialReference)))},toJson:function(){var h={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var m="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?
"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;h.geometryType=m}return k.fixJson(h)}});y.setObject("layers.QueryDataSource",b,a);return b})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),function(b,y,r,a,k,e,g,h,m,l){var f=b(e,{declaredClass:"esri.layers.JoinDataSource",constructor:function(c){c&&
(c.leftTableSource&&(this.leftTableSource=this._createLayerSource(c.leftTableSource)),c.rightTableSource&&(this.rightTableSource=this._createLayerSource(c.rightTableSource)))},_createLayerSource:function(c){if("mapLayer"===c.type)var d=new g(c);else{d={type:"dataLayer"};switch(c.dataSource.type){case "table":var u=new h(c.dataSource);break;case "queryTable":u=new m(c.dataSource);break;case "joinTable":u=new f(c.dataSource);break;case "raster":u=new l(c.dataSource);break;default:u=c.dataSource}d.dataSource=
u;d.toJson=function(){var n={type:"dataLayer",dataSource:u.toJson()};return k.fixJson(n)}}return d},toJson:function(){var c={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var d="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;
c.joinType=d;return k.fixJson(c)}});y.setObject("layers.JoinDataSource",f,a);return f})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(b,y,r,a,k,e){b=b(e,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return k.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});y.setObject("layers.RasterDataSource",b,a);return b})},"arcgisonline/sharing/geow/Roles":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/promise/all".split(" "),
function(b,y,r,a,k,e,g){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);return function(){function h(){this.declaredClass="arcgisonline.sharing.geow.Roles"}h.exceedsRolePrivileges=function(m,l){l=l||[];var f;for(f=0;f<l.length;f++){var c=l[f];if(-1===m.indexOf(c))return!0}return!1};h.prototype.createRole=function(m,l){return k.default.request({url:a.default.restBaseUrl+"portals/self/createRole",content:{name:m,description:l}},{usePost:!0})};h.prototype.updateRole=
function(m,l,f){return k.default.request({url:a.default.restBaseUrl+"portals/self/roles/"+m+"/update",content:{name:l,description:f}},{usePost:!0})};h.prototype.deleteRole=function(m){return k.default.request({url:a.default.restBaseUrl+"portals/self/roles/"+m+"/delete"},{usePost:!0})};h.prototype.setPrivileges=function(m,l){var f=a.default.restBaseUrl+"portals/self/roles/"+m+"/setPrivileges";m={id:m,privileges:JSON.stringify({privileges:l})};return k.default.request({url:f,content:m},{usePost:!0})};
h.prototype.getPrivileges=function(m){return k.default.request({url:a.default.restBaseUrl+"portals/self/roles/"+m+"/privileges"})};h.prototype.getAllUsersForRole=function(m){var l=this,f=new e.default,c=[],d=[],u=1,n,t,x;l.getUsersForRole(1,100,m).then(function(A){if(A&&A.users){d=d.concat(A.users);u=A.nextStart;n=A.total-d.length;t=Math.ceil(n/100);for(x=0;x<t;x++)c.push(l.getUsersForRole(u+100*x,100,m));g.default(c).then(function(B){B.forEach(function(F){d=d.concat(F.users)});f.resolve(d)},function(){f.resolve(d)})}},
function(){f.resolve(d)});return f};h.prototype.getUsersForRole=function(m,l,f){return k.default.request({url:a.default.restBaseUrl+"portals/self/users",content:{start:m,num:l,role:f}})};h.prototype.getAllRoles=function(m){var l=this,f=new e.default,c=[],d=1,u=[],n,t,x;l.getRoles(d,100,m).then(function(A){if(A&&A.roles){u=u.concat(A.roles);d=A.nextStart;n=A.total-u.length;t=Math.ceil(n/100);for(x=0;x<t;x++)c.push(l.getRoles(d+100*x,100,m));g.default(c).then(function(B){B.forEach(function(F){u=u.concat(F.roles)});
f.resolve(u)},function(){f.resolve(u)})}},function(){f.resolve(u)});return f};h.prototype.getRoles=function(m,l,f){var c=a.default.restBaseUrl+"portals/self/roles";m={start:m,num:l,returnPrivileges:null};f&&(m.returnPrivileges=f);return k.default.request({url:c,content:m})};h.prototype.getRole=function(m){return k.default.request({url:a.default.restBaseUrl+"portals/self/roles/"+m})};h.prototype.containsPrivilegesOutsideRole=function(m,l,f){var c=new e.default;m={roleResult:this.getPrivileges(m),compareResult:this.getPrivileges(l)};
var d=!1,u,n;g.default(m).then(function(t){u=t.roleResult&&t.roleResult.privileges||[];n=t.compareResult&&t.compareResult.privileges||[];f&&f instanceof Array?u=u.concat(f):f&&f instanceof String&&u.push(f);d=h.exceedsRolePrivileges(u,n);c.resolve(d)},function(){c.resolve(d)});return c};return h}()})},"arcgisonline/sharing/geow/Geow":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util,arcgisonline/map/utils/deleteMapStorageNoFeedback,arcgisonline/telemetry,arcgisonline/sharing/geow/Community"],
function(b,y,r){b.provide("arcgisonline.sharing.geow.Geow");b.require("arcgisonline.sharing.util");b.require("arcgisonline.map.utils.deleteMapStorageNoFeedback");b.require("arcgisonline.telemetry");b.require("arcgisonline.sharing.geow.Community");arcgisonline.sharing.geow.Geow={util:arcgisonline.sharing.util,generatetoken:function(a,k,e){var g=esriGeowConfig.restBaseUrl.replace("http:","https:")+"generatetoken",h=document.domain,m=h.split(".");1<m.length&&(h=m[m.length-2]+"."+m[m.length-1]);a.referer=
h;this._tokenExpiration=a.expiration;this.util.postJson(a,g,k,e)},signup:function(a,k,e){var g=esriGeowConfig.restBaseUrl+"community/signup",h=document.domain,m=h.split(".");1<m.length&&(h=m[m.length-2]+"."+m[m.length-1]);a.referer=h;this.util.postJson(a,g,k,e)},signin:function(a,k,e){this.generatetoken(a,b.hitch(arcgisonline.sharing.geow.Geow,"signInHandler",a.username,k,e),e)},setAuthCookie:function(a,k){var e=document.domain,g={path:"/"},h=esriGeowConfig.self||{};a.persistent&&(g.expires=new Date(a.expires));
"https:"===window.location.protocol&&(a.allSSL||h.allSSL)&&(g.secure=!0);a.portalApp&&delete a.portalApp;esriGeowConfig.isDebug||h.isPortal||!h.urlKey?esriGeowConfig.isDebug||h.isPortal?k&&(h.isPortal||b.cookie("esri_auth",b.json.stringify(a),b.mixin(g,{domain:"arcgis.com"}))):(a.customBaseUrl=h.portalHostname||window.location.hostname,b.cookie("esri_auth",b.json.stringify(a),b.mixin(g,{domain:"arcgis.com"}))):(a.urlKey=h.urlKey,a.customBaseUrl=h.customBaseUrl||h.portalHostname||window.location.hostname,
b.cookie("esri_auth",b.json.stringify(a),b.mixin(g,{domain:"arcgis.com"})));b.cookie("esri_auth",b.json.stringify(b.mixin({portalApp:!0},a)),b.mixin(g,{domain:e}));(a=arcgisonline.sharing.util._cookies)&&a.esri_auth&&(a.esri_auth=null,arcgisonline.sharing.util.getCookie("esri_auth"))},signInHandler:function(a,k,e,g,h){var m=new Date,l=new Date(m.setMinutes(m.getMinutes()+(this._tokenExpiration||120)));m=b.hitch(this,function(f,c){f.culture&&(f.culture=f.culture.toLowerCase());c={email:f.username,
privacy:f.privacy,token:g.token,ssl:g.ssl,culture:f.culture,region:f.region,expires:l.getTime()};f.orgId&&f.role&&(c.accountId=f.orgId,c.role=f.role);this.setAuthCookie(c);if(f.preferredView&&null!==f.preferredView)this.util.userPreferences({contentMode:f.preferredView},esriGeowConfig.contentModeCookieName);else{var d=this.util.userPreferences(null,esriGeowConfig.contentModeCookieName);if(d&&d.contentMode){var u=b.create,n=u("form",{method:"POST"},b.body());u("input",{type:"hidden",name:"preferredView",
value:d.contentMode},n);u("input",{type:"hidden",name:"clearEmptyFields",value:"false"},n);arcgisonline.sharing.geow.Community.updateProfile(n,function(t){})}}c=b.mixin(c,f);k&&k(c,h);b.publish("onSignIn",[c])});this.util.getJson(this.util.useSSL(esriGeowConfig.restBaseUrl+"community/users/"+a+"?token\x3d"+g.token),b.hitch(this,m),e)},signInHandler2:function(a){var k=esriGeowConfig.restBaseUrl+"community/users/"+a.username+"?token\x3d"+a.token,e=new Date,g=Number(a.expires_in),h=new Date(e.setSeconds(e.getSeconds()+
Number(g))),m=a&&!!a.ssl;return this.util.getJson(this.util.useSSL(k)).then(b.hitch(this,"_hasSecurityQuestion")).then(b.hitch(this,function(l){var f={email:l.username,privacy:l.privacy,token:a.token,culture:l.culture&&l.culture.toLowerCase()||"",region:l.region,expires:h&&h.getTime()||null,persistent:a.persist?!0:void 0,allSSL:m};l.orgId&&l.role&&(f.accountId=l.orgId,f.role=l.role);l.preferredView&&this.util.userPreferences({contentMode:l.preferredView},esriGeowConfig.contentModeCookieName);this.setAuthCookie(f);
f=b.mixin(f,l);b.publish("onSignIn",[f]);return f}))},_hasSecurityQuestion:function(a){var k=new b.Deferred;a.validateUserProfile=!0;!a||a.idpUsername||"arcgisonly"!==a.userType&&"both"!==a.userType||!a.validateUserProfile?k.resolve(a):k=this.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+a.username+"/forgotPassword",content:{}},{}).then(b.hitch(this,function(e){e&&"enterprise"!==e.provider&&-1===e.securityQuestionIdx&&(a.noSecurityQuestion=!0);return a}));return k},signout:function(a){var k=
this.util.getCookie("esri_auth"),e=esriGeowConfig.self||{};esriGeowConfig.userInfo=null;esriGeowConfig.userPreferences=null;e.isPortal||b.cookie("esri_auth",null,{expires:-1,path:"/",domain:document.domain});arcgisonline.map.utils.deleteMapStorageNoFeedback().then(function(){b.publish("onSignOut",[])});var g;a&&(g=b.mixin({},{client_id:"arcgisonline",redirect_uri:a}));k&&k.token&&esriGeowConfig.self&&esriGeowConfig.self.user&&"enterprise"===esriGeowConfig.self.user.provider&&(g=b.mixin(g||{},{token:k.token}));
a=a||window.location.href;window.location=arcgisonline.sharing.util.getSecureUrl(esriGeowConfig.restBaseUrl+"oauth2/signout")+(g?"?"+b.objectToQuery(g):"")},checkSharedCookie:function(){var a=this.util.getCookie("esri_auth"),k=!1;a&&!a.portalApp&&!a.urlKey&&location.hostname.match(/\.+maps.*\..+\..+/i)&&(k=!0);(esriGeowConfig.self||{}).isPortal||k||!a||a.portalApp||!a.customBaseUrl||-1!==document.domain.toLowerCase().indexOf(a.customBaseUrl.toLowerCase())||-1!==a.customBaseUrl.toLowerCase().indexOf(document.domain.toLowerCase())||
(k=!0);!k&&a&&!a.portalApp&&a.urlKey&&-1===window.location.hostname.toLowerCase().indexOf(a.urlKey.toLowerCase()+".")&&(k=!0);k&&(b.cookie("esri_auth",null,{expires:-1,path:"/",domain:".arcgis.com"}),arcgisonline.sharing.util&&arcgisonline.sharing.util._cookies&&arcgisonline.sharing.util._cookies.esri_auth&&delete arcgisonline.sharing.util._cookies.esri_auth,esriGeowConfig.userInfo=null,esriGeowConfig.userRole=null);return k},getSharedCookie:function(){var a=esri.id,k={};a&&(k=(a=(a._getAllCookies("esri_auth")||
[]).map(function(e){return JSON.parse(e)}).filter(function(e){return!e.portalApp}))&&a.length?a.shift():{});return k},_logCookieChange:function(a,k){a=arcgisonline.telemetry.default.init({config:a});!this._cookieChangeLogged&&a&&a.logEvent&&(this._cookieChangeLogged=!0,a.logEvent({category:"cookie",label:"Organization changed",details:k?"Yes":"No"}))},setCookies:function(a){var k=this.util.getCookie("esri_auth");if(!a.isPortal&&k){if(!esriGeowConfig.isDebug){var e=this.getSharedCookie();this._logCookieChange(a,
k.urlKey!==e.urlKey)}!esriGeowConfig.isDebug&&a.urlKey&&-1===window.location.hostname.toLowerCase().indexOf(a.urlKey.toLowerCase())?(a=window.location.href.replace(window.location.hostname,a.urlKey+"."+a.customBaseUrl),window.location=this.util.getBridgeUrl(a,k)):k.portalApp?k.portalApp&&(esriGeowConfig.isDebug||this.setAuthCookie(k)):(delete k.urlKey,delete k.customBaseUrl,this.setAuthCookie(k))}}}})},"arcgisonline/map/utils/deleteMapStorageNoFeedback":function(){define(["dojo/Deferred"],function(b){return function(){var y=
new b;sessionStorage.removeItem("Esri_webmap");y.resolve(!0);return y}})},"arcgisonline/telemetry":function(){define(["require","exports","tslib","./esriGeowConfig","telemetry/telemetry.dojo.min"],function(b,y,r,a,k){Object.defineProperty(y,"__esModule",{value:!0});a=r.__importDefault(a);k=r.__importDefault(k);b=function(){function e(){}e.init=function(g,h){var m;if(this._instance)return this._instance;this._envCredentials=JSON.parse(atob(a.default.telemetryConfig||"Int9Ig\x3d\x3d"));if(JSON.stringify(this._envCredentials)!==
JSON.stringify("{}"))return h=new k.default({disabled:!(a.default.usageTrackingEnabled&&!g.disabled&&!g.config.isPortal),portal:g.config,amazon:this._getAmazonCredentials(g)}),"logPageView"in g&&!0!==g.logPageView||h.logPageView(null===(m=null===window||void 0===window?void 0:window.location)||void 0===m?void 0:m.href),this._instance=h};e._getAmazonCredentials=function(g){var h=this._getEnvironment(g.config.portalHostname);return{userPoolID:this._envCredentials[h].userPoolID,app:{name:g.name||"Arcgis Online",
id:this._envCredentials[h].appId,version:g.config.currentVersion||"5.2"}}};e._getEnvironment=function(g){g=g.replace("www.","");return"arcgis.com"===g&&"production"||"qaext.arcgis.com"===g&&"qa"||"dev"};return e}();y.default=b})},"telemetry/telemetry.dojo.min":function(){define(function(){function b(X,Z){var N=new XMLHttpRequest;N.addEventListener("load",function(){Z(N.responseText)});N.open(X.method,X.url);Object.keys(X.headers).forEach(function(aa){N.setRequestHeader(aa,X.headers[aa])});N.send(X.body)}
function y(X,Z){var N=w.get(C);if(N&&Date.now()/1E3<N.Expiration)return Z(N);r(X,function(aa){w.set(C,aa);Z(aa)})}function r(X,Z){var N=z({},E);N.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetId";N.body=JSON.stringify({IdentityPoolId:X});b(N,function(aa){a(JSON.parse(aa),Z)})}function a(X,Z){var N=z({},E);N.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetCredentialsForIdentity";N.body=JSON.stringify({IdentityId:X.IdentityId});b(N,function(aa){aa=JSON.parse(aa);Z(aa.Credentials)})}function k(){var X=
void 0,Z=w.get(H);var N=((!Z||Date.now()>Z.expiration)&&(X=!0,Z={id:Math.floor(17592186044416*(1+Math.random())).toString(16),startTimestamp:(new Date).toISOString()}),Z.expiration=Date.now()+G,w.set(H,Z),X&&(Z.new=!0),Z);Z=w.get(K);X=(Z||(Z=e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e(),w.set(K,Z)),Z);return{session:N,id:X}}function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function g(X,Z){var N={host:Z.uri.host,"content-type":X.config.defaultContentType,accept:X.config.defaultAcceptType,
"x-amz-date":m(Z.signDate)};Z.request.method=Z.request.method.toUpperCase();Z.request.body?Z.payload=Z.request.body:Z.request.data&&X.payloadSerializer?Z.payload=X.payloadSerializer(Z.request.data):delete N["content-type"];Z.request.headers=l(N,Object.keys(Z.request.headers||{}).reduce(function(aa,ka){return aa[ka.toLowerCase()]=Z.request.headers[ka],aa},{}));Z.sortedHeaderKeys=Object.keys(Z.request.headers).sort();Z.request.headers["content-type"]&&(Z.request.headers["content-type"]=Z.request.headers["content-type"].split(";")[0]);
"object"===D(Z.request.params)&&l(Z.uri.queryParams,Z.request.params)}function h(X,Z){Z.signedHeaders=Z.sortedHeaderKeys.map(function(N){return N.toLowerCase()}).join(";");Z.canonicalRequest=String(Z.request.method).toUpperCase()+"\n"+encodeURI(Z.uri.path)+"\n"+Object.keys(Z.uri.queryParams).sort().map(function(N){return encodeURIComponent(N)+"\x3d"+encodeURIComponent(Z.uri.queryParams[N])}).join("\x26")+"\n"+Z.sortedHeaderKeys.map(function(N){return N.toLocaleLowerCase()+":"+Z.request.headers[N]}).join("\n")+
"\n\n"+Z.signedHeaders+"\n"+X.hasher.hash(Z.payload?Z.payload:"")}function m(X,Z){X=X.toISOString().replace(/[:\-]|\.\d{3}/g,"").substr(0,17);return Z?X.substr(0,8):X}function l(X){return[].slice.call(arguments,1).forEach(function(Z){Z&&"object"===(void 0===Z?"undefined":D(Z))&&Object.keys(Z).forEach(function(N){var aa=Z[N];void 0!==aa&&(null!==aa&&"object"===(void 0===aa?"undefined":D(aa))?(X[N]=Array.isArray(aa)?[]:{},l(X[N],aa)):X[N]=aa)})}),X}function f(X){var Z=1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{},N=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},aa=k().session;return{eventType:"pageView",timestamp:(new Date).toISOString(),session:{id:aa.id,startTimestamp:aa.startTimestamp},attributes:z({referrer:document.referrer,hostname:window.location.hostname,path:X||window.location.pathname,pageUrl:X||window.location.pathname,pageName:document.title,previousPageUrl:Z.pageUrl,previousPageName:Z.pageName},c(N)),metrics:d(N)}}function c(X){var Z=z({},X);return delete Z.workflow,
V.forEach(function(N){return delete Z[N]}),Object.keys(Z).forEach(function(N){Z[N]="json"===N?Z[N]?JSON.stringify(Z[N]):"null":void 0!==Z[N]?Z[N].toString():"null"}),Z}function d(X){var Z={};return V.forEach(function(N){X[N]&&(Z[N]=X[N])}),Z}function u(){var X=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},Z=arguments[1];return(new Q({region:"us-east-1",service:"mobileanalytics",accessKeyId:X.AccessKeyId,secretAccessKey:X.SecretKey,sessionToken:X.SessionToken})).sign(Z)}function n(X,Z,
N){var aa=k();X=Array.isArray(X)?X:[X];var ka=t(X);y(Z,function(pa){try{ka.headers=u(pa,ka),ka.headers["x-amz-Client-Context"]=JSON.stringify({client:{client_id:aa.id,app_title:N.name,app_version_name:N.version||"unknown"},services:{mobile_analytics:{app_id:N.id}}})}catch(ta){return}b(ka,function(ta){})})}function t(X){return{url:1<arguments.length&&void 0!==arguments[1]?arguments[1]:O,method:"POST",body:JSON.stringify({events:X})}}function x(X){window.ga&&window.ga(function(){X(window.ga.getAll())})}
function A(X,Z){return F({hitType:"pageview",page:X||window.location.pathname},Z,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},3<arguments.length&&void 0!==arguments[3]?arguments[3]:{})}function B(X){return F({hitType:"event",eventCategory:X.category||"none",eventAction:X.action,eventLabel:X.label},X,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}function F(X,Z,N,aa){return Object.keys(N).forEach(function(ka){X["dimension"+
N[ka]]=Z[ka]}),Object.keys(aa).forEach(function(ka){X["metric"+aa[ka]]=Z[ka]}),X}var w={storage:{},memory:!0,get:function(X){var Z=void 0;try{Z=window.localStorage&&window.localStorage.getItem(X)||this.storage[X]}catch(N){Z=this.storage[X]}if(Z)try{return JSON.parse(Z)}catch(N){}},set:function(X,Z){Z=JSON.stringify(Z);try{window.localStorage.setItem(X,Z)}catch(N){this.memory||(this.memory=!0),this.storage[X]=Z}},delete:function(X){try{window.localStorage.removeItem(X)}catch(Z){this.memory||(this.memory=
!0),delete this.storage[X]}}},D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(X){return typeof X}:function(X){return X&&"function"==typeof Symbol&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},q=function(X,Z){if(!(X instanceof Z))throw new TypeError("Cannot call a class as a function");},v=function(){function X(Z,N){for(var aa=0;aa<N.length;aa++){var ka=N[aa];ka.enumerable=ka.enumerable||!1;ka.configurable=!0;"value"in ka&&(ka.writable=!0);Object.defineProperty(Z,
ka.key,ka)}}return function(Z,N,aa){return N&&X(Z.prototype,N),aa&&X(Z,aa),Z}}(),z=Object.assign||function(X){for(var Z=1;Z<arguments.length;Z++){var N=arguments[Z],aa;for(aa in N)Object.prototype.hasOwnProperty.call(N,aa)&&(X[aa]=N[aa])}return X},C="TELEMETRY_COGNITO_CREDENTIALS",E={method:"POST",url:"https://cognito-identity.us-east-1.amazonaws.com/",headers:{"Content-type":"application/x-amz-json-1.1"}},G=18E5,H="TELEMETRY_SESSION",K="TELEMETRY_CLIENT_ID",I=function(X,Z){Z={};var N=Z.lib={},aa=
function(){},ka=N.Base={extend:function(wa){aa.prototype=this;var la=new aa;return wa&&la.mixIn(wa),la.hasOwnProperty("init")||(la.init=function(){la.$super.init.apply(this,arguments)}),la.init.prototype=la,la.$super=this,la},create:function(){var wa=this.extend();return wa.init.apply(wa,arguments),wa},init:function(){},mixIn:function(wa){for(var la in wa)wa.hasOwnProperty(la)&&(this[la]=wa[la]);wa.hasOwnProperty("toString")&&(this.toString=wa.toString)},clone:function(){return this.init.prototype.extend(this)}},
pa=N.WordArray=ka.extend({init:function(wa,la){wa=this.words=wa||[];this.sigBytes=void 0!=la?la:4*wa.length},toString:function(wa){return(wa||Ba).stringify(this)},concat:function(wa){var la=this.words,Aa=wa.words,da=this.sigBytes;if(wa=wa.sigBytes,this.clamp(),da%4)for(var fa=0;fa<wa;fa++)la[da+fa>>>2]|=(Aa[fa>>>2]>>>24-fa%4*8&255)<<24-(da+fa)%4*8;else if(65535<Aa.length)for(fa=0;fa<wa;fa+=4)la[da+fa>>>2]=Aa[fa>>>2];else la.push.apply(la,Aa);return this.sigBytes+=wa,this},clamp:function(){var wa=
this.words,la=this.sigBytes;wa[la>>>2]&=4294967295<<32-la%4*8;wa.length=X.ceil(la/4)},clone:function(){var wa=ka.clone.call(this);return wa.words=this.words.slice(0),wa},random:function(wa){for(var la=[],Aa=0;Aa<wa;Aa+=4)la.push(4294967296*X.random()|0);return new pa.init(la,wa)}}),ta=Z.enc={},Ba=ta.Hex={stringify:function(wa){var la=wa.words;wa=wa.sigBytes;for(var Aa=[],da=0;da<wa;da++){var fa=la[da>>>2]>>>24-da%4*8&255;Aa.push((fa>>>4).toString(16));Aa.push((15&fa).toString(16))}return Aa.join("")},
parse:function(wa){for(var la=wa.length,Aa=[],da=0;da<la;da+=2)Aa[da>>>3]|=parseInt(wa.substr(da,2),16)<<24-da%8*4;return new pa.init(Aa,la/2)}},Da=ta.Latin1={stringify:function(wa){var la=wa.words;wa=wa.sigBytes;for(var Aa=[],da=0;da<wa;da++)Aa.push(String.fromCharCode(la[da>>>2]>>>24-da%4*8&255));return Aa.join("")},parse:function(wa){for(var la=wa.length,Aa=[],da=0;da<la;da++)Aa[da>>>2]|=(255&wa.charCodeAt(da))<<24-da%4*8;return new pa.init(Aa,la)}},oa=ta.Utf8={stringify:function(wa){try{return decodeURIComponent(escape(Da.stringify(wa)))}catch(la){throw Error("Malformed UTF-8 data");
}},parse:function(wa){return Da.parse(unescape(encodeURIComponent(wa)))}},ra=N.BufferedBlockAlgorithm=ka.extend({reset:function(){this._data=new pa.init;this._nDataBytes=0},_append:function(wa){"string"==typeof wa&&(wa=oa.parse(wa));this._data.concat(wa);this._nDataBytes+=wa.sigBytes},_process:function(wa){var la=this._data,Aa=la.words,da=la.sigBytes,fa=this.blockSize,P=da/(4*fa);P=wa?X.ceil(P):X.max((0|P)-this._minBufferSize,0);if(wa=P*fa,da=X.min(4*wa,da),wa){for(var xa=0;xa<wa;xa+=fa)this._doProcessBlock(Aa,
xa);xa=Aa.splice(0,wa);la.sigBytes-=da}return new pa.init(xa,da)},clone:function(){var wa=ka.clone.call(this);return wa._data=this._data.clone(),wa},_minBufferSize:0});N.Hasher=ra.extend({cfg:ka.extend(),init:function(wa){this.cfg=this.cfg.extend(wa);this.reset()},reset:function(){ra.reset.call(this);this._doReset()},update:function(wa){return this._append(wa),this._process(),this},finalize:function(wa){return wa&&this._append(wa),this._doFinalize()},blockSize:16,_createHelper:function(wa){return function(la,
Aa){return(new wa.init(Aa)).finalize(la)}},_createHmacHelper:function(wa){return function(la,Aa){return(new ya.HMAC.init(wa,Aa)).finalize(la)}}});var ya=Z.algo={};return Z}(Math);!function(X){var Z=I.lib,N=Z.WordArray,aa=Z.Hasher;Z=I.algo;for(var ka=[],pa=[],ta=function(la){return 4294967296*(la-(0|la))|0},Ba=2,Da=0;64>Da;){a:{var oa=Ba;for(var ra=X.sqrt(oa),ya=2;ya<=ra;ya++)if(!(oa%ya)){oa=!1;break a}oa=!0}oa&&(8>Da&&(ka[Da]=ta(X.pow(Ba,.5))),pa[Da]=ta(X.pow(Ba,1/3)),Da++);Ba++}var wa=[];Z=Z.SHA256=
aa.extend({_doReset:function(){this._hash=new N.init(ka.slice(0))},_doProcessBlock:function(la,Aa){for(var da=this._hash.words,fa=da[0],P=da[1],xa=da[2],Fa=da[3],ba=da[4],Sa=da[5],Qa=da[6],va=da[7],R=0;64>R;R++){if(16>R)wa[R]=0|la[Aa+R];else{var ia=wa[R-15],ja=wa[R-2];wa[R]=((ia<<25|ia>>>7)^(ia<<14|ia>>>18)^ia>>>3)+wa[R-7]+((ja<<15|ja>>>17)^(ja<<13|ja>>>19)^ja>>>10)+wa[R-16]}ia=va+((ba<<26|ba>>>6)^(ba<<21|ba>>>11)^(ba<<7|ba>>>25))+(ba&Sa^~ba&Qa)+pa[R]+wa[R];ja=((fa<<30|fa>>>2)^(fa<<19|fa>>>13)^(fa<<
10|fa>>>22))+(fa&P^fa&xa^P&xa);va=Qa;Qa=Sa;Sa=ba;ba=Fa+ia|0;Fa=xa;xa=P;P=fa;fa=ia+ja|0}da[0]=da[0]+fa|0;da[1]=da[1]+P|0;da[2]=da[2]+xa|0;da[3]=da[3]+Fa|0;da[4]=da[4]+ba|0;da[5]=da[5]+Sa|0;da[6]=da[6]+Qa|0;da[7]=da[7]+va|0},_doFinalize:function(){var la=this._data,Aa=la.words,da=8*this._nDataBytes,fa=8*la.sigBytes;return Aa[fa>>>5]|=128<<24-fa%32,Aa[14+(fa+64>>>9<<4)]=X.floor(da/4294967296),Aa[15+(fa+64>>>9<<4)]=da,la.sigBytes=4*Aa.length,this._process(),this._hash},clone:function(){var la=aa.clone.call(this);
return la._hash=this._hash.clone(),la}});I.SHA256=aa._createHelper(Z);I.HmacSHA256=aa._createHmacHelper(Z)}(Math);(function(){var X=I.enc.Utf8;I.algo.HMAC=I.lib.Base.extend({init:function(Z,N){Z=this._hasher=new Z.init;"string"==typeof N&&(N=X.parse(N));var aa=Z.blockSize,ka=4*aa;N.sigBytes>ka&&(N=Z.finalize(N));N.clamp();Z=this._oKey=N.clone();N=this._iKey=N.clone();for(var pa=Z.words,ta=N.words,Ba=0;Ba<aa;Ba++)pa[Ba]^=1549556828,ta[Ba]^=909522486;Z.sigBytes=N.sigBytes=ka;this.reset()},reset:function(){var Z=
this._hasher;Z.reset();Z.update(this._iKey)},update:function(Z){return this._hasher.update(Z),this},finalize:function(Z){var N=this._hasher;return Z=N.finalize(Z),N.reset(),N.finalize(this._oKey.clone().concat(Z))}})})();var J={region:"eu-west-1",service:"execute-api",defaultContentType:"application/json",defaultAcceptType:"application/json",payloadSerializerFactory:function(){return function(X){return JSON.stringify(X)}},uriParserFactory:function(){function X(N){return/^\??(.*)$/.exec(N)[1].split("\x26").reduce(function(aa,
ka){return ka=/^(.+)=(.*)$/.exec(ka),ka&&(aa[ka[1]]=ka[2]),aa},{})}var Z=document?document.createElement("a"):{};return function(N){return Z.href=N,{protocol:Z.protocol,host:Z.host.replace(/^(.*):((80)|(443))$/,"$1"),path:("/"!==Z.pathname.charAt(0)?"/":"")+Z.pathname,queryParams:X(Z.search)}}},hasherFactory:function(){return{hash:function(X,Z){Z=l({hexOutput:!0,textInput:!0},Z);X=I.SHA256(X);return Z.hexOutput?X.toString(I.enc.Hex):X},hmac:function(X,Z,N){N=l({hexOutput:!0,textInput:!0},N);X=I.HmacSHA256(Z,
X,{asBytes:!0});return N.hexOutput?X.toString(I.enc.Hex):X}}}},Q=function(){function X(Z){q(this,X);this.config=l({},J,Z);this.payloadSerializer=this.config.payloadSerializer||this.config.payloadSerializerFactory();this.uriParser=this.config.uriParserFactory();this.hasher=this.config.hasherFactory();Z=this.config.accessKeyId;if(void 0===Z||!Z)throw Error("AwsSigner requires AWS AccessKeyID");Z=this.config.secretAccessKey;if(void 0===Z||!Z)throw Error("AwsSigner requires AWS SecretAccessKey");}return v(X,
[{key:"sign",value:function(Z,N){Z={request:l({},Z),signDate:N||new Date,uri:this.uriParser(Z.url)};g(this,Z);h(this,Z);Z.credentialScope=[m(Z.signDate,!0),this.config.region,this.config.service,"aws4_request"].join("/");Z.stringToSign="AWS4-HMAC-SHA256\n"+m(Z.signDate)+"\n"+Z.credentialScope+"\n"+this.hasher.hash(Z.canonicalRequest);N=this.hasher.hmac;var aa=N(N(N(N("AWS4"+this.config.secretAccessKey,m(Z.signDate,!0),{hexOutput:!1}),this.config.region,{hexOutput:!1,textInput:!1}),this.config.service,
{hexOutput:!1,textInput:!1}),"aws4_request",{hexOutput:!1,textInput:!1});Z.signature=N(aa,Z.stringToSign,{textInput:!1});Z.authorization="AWS4-HMAC-SHA256 Credential\x3d"+this.config.accessKeyId+"/"+Z.credentialScope+", SignedHeaders\x3d"+Z.signedHeaders+", Signature\x3d"+Z.signature;return{Accept:Z.request.headers.accept,Authorization:Z.authorization,"Content-Type":Z.request.headers["content-type"],"x-amz-date":Z.request.headers["x-amz-date"],"x-amz-security-token":this.config.sessionToken||void 0}}}]),
X}(),V=["size","duration","position","number","count"],O="https://mobileanalytics.us-east-1.amazonaws.com/2014-06-05/events",S=function(){function X(Z){q(this,X);this.name="amazon";z(this,Z);k().session.new&&!Z.test&&this.logEvent({eventType:"_session.start"})}return v(X,[{key:"logPageView",value:function(Z,N){Z=f(Z,this.previousPage,N);n(Z,this.userPoolID,this.app);this.previousPage=Z.attributes}},{key:"logEvent",value:function(Z){var N=k().session;Z={eventType:Z.eventType||"other",timestamp:(new Date).toISOString(),
session:{id:N.id,startTimestamp:N.startTimestamp},attributes:z({referrer:document.referrer,hostname:window.location.hostname,path:window.location.pathname},c(Z)),metrics:d(Z)};n(Z,this.userPoolID,this.app)}}]),X}(),L=function(){function X(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};q(this,X);this.name="google";z(this,Z)}return v(X,[{key:"logPageView",value:function(Z,N){var aa=A(Z,N,this.dimensions,this.metrics);x(function(ka){ka.forEach(function(pa){pa.send(aa)})})}},{key:"logEvent",
value:function(Z){var N=B(Z,this.dimensions,this.metrics);x(function(aa){aa.forEach(function(ka){ka.send(N)})})}}]),X}(),Y=function(X){if(X)return I.SHA256(X).toString(I.enc.Hex)},ca="esri.com esriuk.com esri.de esri.ca esrifrance.fr esri.nl esri-portugal.pt esribulgaria.com esri.fi esri.kr esrimalaysia.com.my esri.es esriaustralia.com.au esri-southafrica.com esri.cl esrichina.com.cn esri.co esriturkey.com.tr geodata.no esriitalia.it esri.pl".split(" "),U=function(){var X=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:{},Z=X.portal||{};return!X.disabled&&"1"!==navigator.doNotTrack&&"1"!==window.doNotTrack&&(void 0===Z.eueiEnabled||!1!==Z.eueiEnabled)&&(!(!Z.eueiEnabled||!Z.user||Z.user.orgId!==Z.id)||!(!Z.user||Z.user.orgId||"US"!==Z.ipCntryCode)||!Z.user&&"US"===Z.ipCntryCode||!(0<Object.keys(Z).length))};return function(){function X(Z){q(this,X);try{(this.trackers=[],this.workflows={},this.test=Z.test,this.debug=Z.debug,this.disabled=!U(Z),Z.portal&&Z.portal.user)?this.setUser(Z.portal.user,
(Z.portal.subscriptionInfo||{}).type):Z.user&&this.setUser(Z.user),this.disabled||this._initTrackers(Z)}catch(N){this.disabled=!0}}return v(X,[{key:"_initTrackers",value:function(Z){if(Z.amazon){var N=new S(Z.amazon);this.trackers.push(N)}Z.google&&(Z=new L(Z.google),this.trackers.push(Z))}},{key:"setUser",value:function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},N=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Public";this.user=Z="string"==typeof Z?{username:Z}:Z;
this.user.accountType=N;var aa=void 0;if(Z.email&&Z.email.split){var ka=Z.email.split("@")[1];aa=0<ca.filter(function(pa){return ka===pa}).length}(aa||-1<["In House","Demo and Marketing"].indexOf(N))&&(this.user.internalUser=!0)}},{key:"logPageView",value:function(Z){var N=this.preProcess(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return this.debug||!this.test||this.disabled?!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(aa){try{aa.logPageView(Z,N)}catch(ka){}}),
!0):N}},{key:"logEvent",value:function(){var Z=this.preProcess(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return!this.debug&&this.test?Z:!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(N){try{N.logEvent(Z)}catch(aa){}}),!0)}},{key:"logError",value:function(){var Z=z({eventType:"error"},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});this.logEvent(Z)}},{key:"startWorkflow",value:function(Z){var N=1<arguments.length&&void 0!==arguments[1]?arguments[1]:
{},aa={name:Z,start:Date.now(),steps:[],workflowId:Math.floor(17592186044416*(1+Math.random())).toString(16)};this._saveWorkflow(aa);N=z({name:Z,step:"start"},N);return this._logWorkflow(N),aa}},{key:"stepWorkflow",value:function(Z,N){var aa=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};aa=z({name:Z,step:N,details:"string"==typeof options?aa:aa.details},aa);this._logWorkflow(aa)}},{key:"endWorkflow",value:function(Z){var N=z({name:Z,step:"finish"},1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{});this._logWorkflow(N)}},{key:"cancelWorkflow",value:function(Z){var N=z({name:Z,step:"cancel"},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});this._logWorkflow(N)}},{key:"getWorkflow",value:function(Z){if(Z=w.get("TELEMETRY-WORKFLOW:"+Z)){if(18E5>Date.now()-Z.start)return Z;this._deleteWorkflow(Z)}}},{key:"_saveWorkflow",value:function(Z){w.set("TELEMETRY-WORKFLOW:"+Z.name,Z)}},{key:"_deleteWorkflow",value:function(Z){w.delete("TELEMETRY-WORKFLOW:"+Z.name)}},{key:"_logWorkflow",
value:function(){var Z=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Z=this.preProcess(Z);var N=this.getWorkflow(Z.name);N||(this.startWorkflow(Z.name),N=this.getWorkflow(Z.name));N.steps.push(Z.step);N.duration=(Date.now()-N.start)/1E3;-1<["cancel","finish"].indexOf(Z.step)?this._deleteWorkflow(N):this._saveWorkflow(N);Z=z(Z,{eventType:"workflow",category:Z.name,action:Z.step,label:Z.details,duration:N.duration,workflowId:N.workflowId});this.logEvent(Z)}},{key:"preProcess",value:function(){var Z=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},N={};return this.user&&(N={user:Y(this.user.username),orgId:Y(this.user.orgId),lastLogin:this.user.lastLogin,userSince:this.user.created,internalUser:this.user.internalUser||!1,accountType:this.user.accountType}),z({},Z,N)}}]),X}()})},"arcgisonline/sharing/geow/Community":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util"],function(b,y,r){b.provide("arcgisonline.sharing.geow.Community");b.require("arcgisonline.sharing.util");
arcgisonline.sharing.geow.Community={util:arcgisonline.sharing.util,i18n:function(){if(this._i18n)return this._i18n;this._i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this._i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").community);return this._i18n},getProfile:function(a,k,e){if(null===a)return b.publish("globalMessage",[{message:this.i18n().noUser,type:"error",duration:0}]),null;this.util.getJson(esriGeowConfig.restBaseUrl+"community/users/"+a,k,null)},getProfileThumbnailUrl:function(a,
k){if(null!==a.thumbnail){var e=this.util.getToken();return k?(k=esriGeowConfig.restBaseUrl,esriGeowConfig.useDefaultIdentityStore&&(k=!1!==esriGeowConfig.useSSL?this.util.getSecureUrl(k):k),k+"community/users/"+a.username+"/info/"+a.thumbnail+(null===e||0===e.length?"":"?token\x3d"+e)):esriGeowConfig.restBaseUrl+"community/users/"+a.username+"/info/"+a.thumbnail+(null===e||0===e.length?"":"?token\x3d"+e)}return null},updateProfile:function(a,k,e){e=this.util.getUser();null==e&&b.publish("globalMessage",
[{message:this.i18n().mustLogIn,type:"error",duration:0}]);e=e.username||e.email;e=this.util.getSecureUrl(esriGeowConfig.restBaseUrl)+"community/users/"+e+"/update";this.util.postForm(a,e,k)},updateProfileByUser:function(a,k,e){null!=this.util.getUser()&&(e=this.util.getSecureUrl(esriGeowConfig.restBaseUrl)+"community/users/"+a.username.value+"/update",this.util.postForm(a,e,k))},getUserGroups:function(a,k){var e=this.util.getUser();(e=e&&(e.username||e.email))?a=this.getUserGroupsByUser(e,a,k):(a=
new b.Deferred,a.resolve());return a},getUserGroupsByUser:function(a,k,e){a=esriGeowConfig.restBaseUrl+"community/users/"+a;var g=new b.Deferred;this.util.request({url:a}).then(b.hitch(this,function(h){g.resolve(h);k&&k(h)}),b.hitch(this,function(h){g.reject(h);e&&e(h)}));return g},getGroup:function(a,k,e){this.util.getJson(esriGeowConfig.restBaseUrl+"community/groups/"+a,k,e)},createGroup:function(a,k,e){null!=this.util.getUser()&&this.util.postForm(a,esriGeowConfig.restBaseUrl+"community/createGroup",
k,e)},updateGroup:function(a,k,e,g){null!=this.util.getUser()&&this.util.postForm(k,esriGeowConfig.restBaseUrl+"community/groups/"+a+"/update",e,g)},deleteGroup:function(a,k,e){null!=this.util.getUser()&&this.util.postJson("",esriGeowConfig.restBaseUrl+"community/groups/"+a.id+"/delete",k,e)},reassignGroup:function(a,k,e,g){null!=this.util.getUser()&&this.util.postJson({targetUsername:k},esriGeowConfig.restBaseUrl+"community/groups/"+a.id+"/reassign",e,g)},leaveGroup:function(a,k,e){this.util.postJson("",
esriGeowConfig.restBaseUrl+"community/groups/"+a.id+"/leave",k,e)},inviteToGroup:function(a,k,e){null!=this.util.getUser()&&this.util.globalMessage("TODO: not implemented in rest","error",0)},searchGroups:function(a,k,e){this.util.getJson(esriGeowConfig.restBaseUrl+"community/groups?q\x3d"+a,k)},searchToStore:function(a){var k=[];b.forEach(a.results,function(e,g){e={id:g,title:this._getGroupTitleLink(e),owner:e.owner,description:e.description,imageUrl:e.imageUrl,tags:e.keywords,created:e.created};
k[g]=e},this);return new b.data.ItemFileReadStore({data:{identifier:"id",label:"item",items:k}})},_getGroupTitleLink:function(a){return"\x3ca href\x3d'group.html?owner\x3d"+a.owner+"\x26title\x3d"+encodeURIComponent(a.title)+'\' class\x3d"esriGroupTitle" alt\x3d'+this.i18n().viewGroupDetails+" title\x3d"+this.i18n().viewGroupDetails+"\x3e"+a.title+"\x3c/a\x3e"},getNotifications:function(){arcgisonline.sharing.dijit.dialog.NotificationsDlg.prototype.statics.getInstance().show()},getNotificationsCount:function(){var a=
this.util.getUser();if(null!=a){var k=function(g,h){b.publish("onNotificationCount",[g.notifications.length])},e;this.util.getJson(esriGeowConfig.restBaseUrl+"community/users/"+(a.username||a.email)+"/notifications").then(b.hitch(this,function(g){e=(g&&g.notifications||[]).filter(function(h){return h&&"message_received"!==h.type});k({notifications:e})}))}},deleteNotifictation:function(a){var k=this.util.getUser();null!=k&&this.util.postJson("",esriGeowConfig.restBaseUrl+"community/users/"+(k.username||
k.email)+"/notifications/"+a+"/delete",b.hitch(this,function(e,g){b.publish("onNotificationDelete",[""])}))},updateUserSecure:function(a,k,e,g){g=esriGeowConfig.restBaseUrl;esriGeowConfig.useDefaultIdentityStore&&(g=!1!==esriGeowConfig.useSSL?this.util.getSecureUrl(g):g);this.util.postForm(k,g+"community/users/"+a+"/update",e)},getProvisionedListings:function(a,k,e){return this.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+a+"/provisionedListings",content:{start:k||1,num:e||100}})}}})},
"arcgisonline/sharing/dijit/SiteHeader":function(){define(["dojo","dijit","dojox","dojo/require!dijit/_Widget,dijit/_Templated,arcgisonline/sharing/util,arcgisonline/sharing/geow/Account,arcgisonline/sharing/geow/Geow,arcgisonline/agoNav,dojo/topic"],function(b,y,r){b.provide("arcgisonline.sharing.dijit.SiteHeader");b.require("dijit._Widget");b.require("dijit._Templated");b.require("arcgisonline.sharing.util");b.require("arcgisonline.sharing.geow.Account");b.require("arcgisonline.sharing.geow.Geow");
b.require("arcgisonline.agoNav");b.require("dojo.topic");b.declare("arcgisonline.sharing.dijit.SiteHeader",[y._Widget,y._Templated],{util:arcgisonline.sharing.util,geow:arcgisonline.sharing.geow.Geow,acct:arcgisonline.sharing.geow.Account,agoNav:arcgisonline.agoNav,widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent siteHeader" id\x3d"header" dojoAttachPoint\x3d"containerNode"\x3e\r\n    \x3cdiv class\x3d"esri-header-barrier"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',postMixInProperties:function(){this.inherited(arguments);
this._logCookieChange(this.geow.checkSharedCookie());this.i18n=b.mixin({},b.i18n.getLocalization("arcgisonline","arcgisonline").common);b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").siteHeader);this.webLabel=this.i18n.webOnly;this.webDescription=this.i18n.webDesc;this.desktopLabel=this.i18n.allContent;this.desktopDescription=this.i18n.allDesc;this.relativePath=esriGeowConfig.baseUrl||"./"},postCreate:function(){var a=window.location.pathname.toLowerCase();this.isSignInPage=
-1!==a.indexOf(esriGeowConfig.signin);this.isSignUpPage=-1!==a.indexOf(esriGeowConfig.signup);this.isJoinPage=-1!==a.indexOf(esriGeowConfig.join);this.isSetupPage=-1!==a.indexOf(esriGeowConfig.setup);this.isIEPage=-1!==a.indexOf("ie6.html");this.isTroubleshootPage=-1!==a.indexOf("troubleshoot.html");this._account=arcgisonline.sharing.geow.Account;7>b.isIE&&!this.isIEPage&&(window.location="ie6.html");document.getElementById("page-border")&&b.attr("page-border","onClick","")},startup:function(){this.inherited(arguments);
esri.config.defaults.io.corsEnabledServers.push("http://"+location.host);esri.config.defaults.io.corsEnabledServers.push("https://"+location.host);esri.config.defaults.io.proxyUrl=esriGeowConfig.proxyServer;return this._fetchSelf()},_generateGlobalNav:function(a){this._agoNavIsLoaded||window.require(["arcgisonline/agoNav"],function(k){this.agoNav=k;this.agoNav.init({config:esriGeowConfig.self,legacy:this.legacy,relativePath:this.relativePath});this._agoNavIsLoaded=!0}.bind(this))},_logCookieChange:function(a){var k=
this.telemetry;a&&k&&k.logEvent&&k.logEvent({category:"cookie",label:"Organization changed",detail:"Yes"})},_fetchSelf:function(){var a=new b.Deferred;this._account.getSelf(b.hitch(this,function(k){this._finishStartup(k);a.resolve(k);b.topic.publish("OnFetchSelf",k)}),b.hitch(this,function(k){this._finishStartup();throw k;}));return a},_finishStartup:function(a){this.geow.setCookies(a||{});if(a&&!a.code&&!a.message){if(a.httpsPort){esriGeowConfig.httpsPort=a.httpsPort;var k=esri.config.defaults.io.corsEnabledServers.pop()}if(a.httpPort){esriGeowConfig.httpPort=
a.httpPort;var e=esri.config.defaults.io.corsEnabledServers.pop()}e&&esri.config.defaults.io.corsEnabledServers.push(arcgisonline.sharing.util.getHttpUrl("http://"+location.host).replace(/:80$/,""));k&&esri.config.defaults.io.corsEnabledServers.push(arcgisonline.sharing.util.getSecureUrl("http://"+location.host).replace(/:443$/,""));if(a.authorizedCrossOriginDomains&&0<a.authorizedCrossOriginDomains.length)for(k=0;k<a.authorizedCrossOriginDomains.length;k++)e=a.authorizedCrossOriginDomains[k],esri.isDefined(e)&&
0<e.length&&esri.config.defaults.io.corsEnabledServers.push({host:e,withCredentials:!0});this._generateGlobalNav({user:a.user});this.isLoggedIn=this.util.isLoggedIn();a.isPortal&&arcgisonline.sharing.util._cookies&&-1===arcgisonline.sharing.util._cookies.esri_auth&&delete arcgisonline.sharing.util._cookies.esri_auth;k=b.locale;a.user&&a.user.culture?k=a.user.culture:a.culture&&(k=a.culture);e=arcgisonline.sharing.util.getUser();var g=b.queryToObject(window.location.search.substring(1));var h=-1<["hi"].indexOf(k);
if(a.culture&&!e)a.culture=a.culture.toLowerCase(),b.cookie("arcgisLocale",a.culture),-1!==a.culture.indexOf("ar")?esriGeowConfig.isRightToLeft=!0:esriGeowConfig.isRightToLeft=!1,b.locale.toLowerCase()!==a.culture.toLowerCase()&&window.location.reload();else if(!a.culture&&!e)b.cookie("arcgisLocale")&&(b.cookie("arcgisLocale",null,{expires:-1}),window.location.reload());else if(e&&k&&b.locale!==k.toLowerCase()&&!h&&!g.locale){var m=arcgisonline.sharing.util.getCookie("esri_auth");if(m&&(m.username=
m.username||m.email,m&&m.username===a.user.username)){9>b.isIE&&m.auth_tier&&"web"===m.auth_tier&&(g=new Date,m.expires=new Date(g.setSeconds(g.getSeconds()+Number(7200))));if(!m.culture||m.culture&&m.culture!==k.toLowerCase())m.culture=k.toLowerCase(),arcgisonline.sharing.geow.Geow.setAuthCookie(m),b.cookie("arcgisLocale",m.culture.toLowerCase());window.location.reload()}}if(e&&esri.isDefined(e.auth_tier)&&"web"===e.auth_tier)if(e.username=e.username||e.email,e&&e.culture.toLowerCase()!==k.toLowerCase()&&
!h){h=arcgisonline.sharing.util.getCookie("esri_auth")||{};9>b.isIE&&(g=new Date,h.expires=new Date(g.setSeconds(g.getSeconds()+Number(7200))));if(!e.culture||e.culture&&e.culture.toLowerCase()!==k.toLowerCase())e.culture=k.toLowerCase(),h.culture=e.culture,a.allSSL&&(h.allSSL=!0,h.secure=!0),arcgisonline.sharing.geow.Geow.setAuthCookie(h),e=b.mixin(e,h);window.location.reload()}else e&&e.culture.toLowerCase()===k.toLowerCase()&&b.locale.toLowerCase()!==k.toLowerCase()&&!h&&window.location.reload();
a.allSSL&&(this.allSSL=esriGeowConfig.allSSL=a.allSSL);esri.isDefined(esriGeowConfig.allSSL)&&esriGeowConfig.allSSL&&"http:"===location.protocol&&(window.location=arcgisonline.sharing.util.getSecureUrl(location.href));a.helpBase&&(esriGeowConfig.help=a.helpBase,esriGeowConfig.helpBase=a.helpBase,k=esriGeowConfig.self&&esriGeowConfig.self.helpBase||"support.html",this.util.isPortal()&&(k=location.protocol+"//"+location.host+a.helpBase,k=this.allSSL||arcgisonline.sharing.util.usePortalSSL()?arcgisonline.sharing.util.getSecureUrl(k):
arcgisonline.sharing.util.getHttpUrl(k)));a.helpMap&&a.helpMap.m&&(esriGeowConfig.helpMap=a.helpMap.m);a.portalHostname&&(esriGeowConfig.portalHostname=a.portalHostname);a.urlKey&&(esriGeowConfig.urlKey=a.urlKey);a.staticImagesUrl&&(esriGeowConfig.staticImagesUrl=a.staticImagesUrl);k=!1===esriGeowConfig.isMultiTenant;k||(g=window.location.host,g===a.portalHostname||-1===g.indexOf(a.customBaseUrl)||a.access||a.name||(window.location=window.location.href.replace(g,a.portalHostname)),!e||"account_admin"!==
e.role&&"org_admin"!==e.role||!a.id||a.urlKey||this.isSetupPage||(window.location=esriGeowConfig.baseUrl+"setup.html"));k?(!a.access||"private"!==a.access||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||this.isSignUpPage||(window.location=arcgisonline.sharing.util.getSecureUrl()+esriGeowConfig.signin+"?returnUrl\x3d"+encodeURIComponent(window.location)),!a.isPortal||"singletenant"!==a.portalMode||"7080"!==location.port&&"7443"!==location.port||arcgisonline.sharing.util.checkForIAA().then(b.hitch(this,
function(l){if(l&&l.hasIAA&&(a.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location=arcgisonline.sharing.util.getHttpUrl(esriGeowConfig.baseUrl)+"error.html?c\x3dWebAdaptorRequired"),!a.portalHostname.match(/:7080\//)&&80!==esriGeowConfig.httpPort&&443!==esriGeowConfig.httpsPort&&"http:"===location.protocol&&-1===location.href.indexOf("error.html"))){l=new b._Url(location.href);var f=l.path.indexOf("/home/");f=l.path.substring(f+
6);l=esri.isDefined(l.query)?"?"+l.query:"";window.location=arcgisonline.sharing.util.getHttpUrl("http://"+a.portalHostname)+"/home/"+f+l}}))):a.id||!a.urlKey||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||(window.location=esriGeowConfig.baseUrl.replace("http:","https:")+esriGeowConfig.signin+"?returnUrl\x3d"+encodeURIComponent(window.location))}},updateEsriAccessLinks:function(a){esriGeowConfig.self.user.userType=a;window.require(["arcgisonline/agoNav"],function(k){this.agoNav=
k;k.updateHeaderComponent({config:esriGeowConfig.self})}.bind(this))}})})},"arcgisonline/sharing/geow/Account":function(){define("dijit/registry dojo/_base/lang dojo/Deferred dojo/dom-class dojo/dom-construct dojo/json dojo/promise/all dojo/query dojo/request/iframe dojo/sniff dojo/data/ItemFileReadStore dojo/data/util/sorter dojo/when esri/config esri/lang esri/IdentityManager ../../pages/utils/promises ../../esriGeowConfig ../util ./Geow ../dijit/Role ../dijit/dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q){return{displayedPortalNonSSLNotice:!1,getCurrentUserInfo:function(v,z){z=B.getUser();null!==z&&B.getJson(A.restBaseUrl+"community/users/"+(z.username||z.email),v.bind(this))},i18n:function(){return this._i18n?this._i18n:this._i18n=q.common},loadMapSettings:function(v){F.checkSharedCookie();this.getSelf(dojo.hitch(this,function(z,C){if(z){F.setCookies(z);z.allSSL&&(A.allSSL=z.allSSL);n.isDefined(A.allSSL)&&A.allSSL&&"http:"===location.protocol&&
(window.location=B.getSecureUrl(location.href));z.basemapGalleryGroupQuery&&(A.basemapGalleryGroupQuery=z.basemapGalleryGroupQuery);z.templatesGroupQuery&&(A.templatesGroupQuery=z.templatesGroupQuery);z.defaultBasemap&&(A.defaultBasemap=z.defaultBasemap);z.defaultExtent&&(A.defaultExtent=z.defaultExtent);z.symbolSetsGroupQuery&&(A.symbolSetsGroupQuery=z.symbolSetsGroupQuery);z.staticImagesUrl&&(A.staticImagesUrl=z.staticImagesUrl);z.layerTemplatesGroupQuery&&(A.layerTemplatesGroupQuery=z.layerTemplatesGroupQuery);
z.colorSetsGroupQuery&&(A.colorSetsGroupQuery=z.colorSetsGroupQuery);z.helpBase&&(A.help=z.helpBase,A.helpBase=z.helpBase);z.helpMap&&z.helpMap.m&&(A.helpMap=z.helpMap.m);z.urlKey&&(A.urlKey=z.urlKey);if(z.authorizedCrossOriginDomains&&0<z.authorizedCrossOriginDomains.length)for(C=0;C<z.authorizedCrossOriginDomains.length;C++){var E=z.authorizedCrossOriginDomains[C];n.isDefined(E)&&0<E.length&&u.defaults.io.corsEnabledServers.push({host:E,withCredentials:!0})}z.isPortal&&B._cookies&&-1===B._cookies.esri_auth&&
delete B._cookies.esri_auth;C=!1===A.isMultiTenant;var G=(E=B.getUser())?!0:!1,H=window.location.pathname.toLowerCase(),K=-1!=H.indexOf(A.signin),I=-1!=H.indexOf("troubleshoot.html");H=-1!=H.indexOf("setup.html");C||!E||"account_admin"!==E.role&&"org_admin"!==E.role||!z.id||z.urlKey||H||(window.location=A.baseUrl+"setup.html");if(C){!z.access||"private"!==z.access||G||K||I||(window.location=B.getSecureUrl()+A.signin+"?returnUrl\x3d"+encodeURIComponent(window.location));E=h(".esriLogoIcon");for(C=
0;C<E.length;C++)a.replace(E[C],"esriLogoIcon esriOrgIcon");z.isPortal&&"singletenant"===z.portalMode&&("7080"===location.port||"7443"===location.port)&&B.checkForIAA().then(function(J){if(J&&J.hasIAA&&(z.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location=B.getHttpUrl(A.baseUrl)+"error.html?c\x3dWebAdaptorRequired"),!z.portalHostname.match(/:7080\//)&&80!==A.self.httpPort&&443!==A.self.httpsPort&&"http:"===location.protocol&&-1===
location.href.indexOf("error.html"))){J=new dojo._Url(location.href);var Q=J.path.indexOf("/home/");Q=J.path.substring(Q+6);J=n.isDefined(J.query)?"?"+J.query:"";window.location=B.getHttpUrl("http://"+z.portalHostname)+"/home/"+Q+J}}.bind(this))}else if(!z.id&&z.urlKey&&!G)K||I||(window.location=A.baseUrl.replace("http:","https:")+A.signin+"?returnUrl\x3d"+encodeURIComponent(window.location));else if(z.id&&z.urlKey&&!G)for(E=h(".esriLogoIcon"),C=0;C<E.length;C++)a.replace(E[C],"esriLogoIcon esriOrgIcon")}v&&
v(z)}))},getAccountResource:function(v,z,C,E){B.getJson(A.restBaseUrl+"portals/self/resources/"+z,C.bind(this),E.bind(this))},uploadAccountResource:function(v,z,C,E){B.postJson(z,A.restBaseUrl+"portals/self/addResource",C.bind(this),E.bind(this))},deleteAccountResource:function(v,z,C,E){B.postJson({key:z},A.restBaseUrl+"portals/self/removeResource",C.bind(this),E.bind(this))},getAccountSettings:function(v,z){v=function(E){z&&z(E)}.bind(this);var C=function(E){z&&z({})}.bind(this);B.getJson(A.restBaseUrl+
"portals/self/resources/accountSettings",v,C)},getSelf:function(v,z,C){if(this._isRequestingSelf)setTimeout(this.getSelf.bind(this,v,z),75);else{var E=A.restBaseUrl+"/portals/helpmap?culture\x3d"+dojo.locale,G=A.restBaseUrl+"portals/self?culture\x3d"+dojo.locale;C&&(E+="\x26token\x3d"+C,G+="\x26token\x3d"+C);C=A&&A.self||x.eachAlways({helpMapResult:B._requestWithAppHandlers({url:E}),selfResult:B._requestWithAppHandlers({url:G})}).then(function(H){if(H.selfResult&&H.selfResult.error)throw H.selfResult.error;
var K=H.selfResult.value;H.helpMapResult&&H.helpMapResult.value&&(K.helpMap=H.helpMapResult.value.helpMap);if(K.user)return t.checkAppAccess(A.restBaseUrl,this.getAppClientId()).always(function(I){this.setupAfterSelf(K,!(!I||!I.viewOnly));this._isRequestingSelf=!1;10>=l("ie")&&this.throwawayIEPostFix();return K}.bind(this));this.setupAfterSelf(K);this._isRequestingSelf=!1;10>=l("ie")&&this.throwawayIEPostFix();return K}.bind(this),function(H){throw H;}.bind(this));this._isRequestingSelf=!A.self;return d(C,
v,z)}},getAppClientId:function(){return-1<window.location.href.indexOf("webmap/viewer.html")?"arcgisWebApps":"arcgisonline"},setupAfterSelf:function(v,z){A.self=v;A.userInfo=v.user&&y.mixin(A.userInfo||{},v.user);v.user&&v.user.username&&(A.userInfo.email=v.user&&v.user.username);v.user&&v.user.role&&(A.userRole=new w({id:v.user.roleId?v.user.roleId:v.user.role,role:v.user.role,privileges:v.user.privileges?v.user.privileges:void 0,viewOnly:z}),z&&(A.self.user.role=A.userInfo.role=v.user.role=A.userRole.baseRole,
A.self.user.roleId=A.userInfo.roleId=v.user.roleId=A.userRole.id,A.self.user.privileges=A.userInfo.privileges=v.user.privileges=A.userRole.privileges,A.self.user.level=A.userInfo.level=v.user.level="1"));this.normalizeOrgIdAndRole()},normalizeOrgIdAndRole:function(){n.isDefined(A.self.user)&&(n.isDefined(A.self.user.orgId)&&(A.self.user.accountId=A.self.user.orgId),n.isDefined(A.self.user.role)&&(A.self.user.role=B.normalizeOrgRole(A.self.user.role)));n.isDefined(A.userInfo)&&(n.isDefined(A.userInfo.orgId)&&
(A.userInfo.accountId=A.userInfo.orgId),n.isDefined(A.userInfo.role)&&(A.userInfo.role=B.normalizeOrgRole(A.userInfo.role)))},throwawayIEPostFix:function(){var v=k.create("form",{encoding:"multipart/form-data",method:"POST"});k.create("input",{type:"hidden",name:"f",value:"json"},v);k.create("input",{type:"hidden",name:"q",value:"*"},v);k.create("input",{type:"hidden",name:"callback.html",value:"textarea"},v);m.post(A.restBaseUrl+"community/users",{form:v,handleAs:"json"}).then(function(){}.bind(this)).otherwise(function(){}.bind(this))},
activateAccount:function(v,z,C,E){null!==B.getUser()&&(v={code:v},E&&(v.userLicenseType=E),B.postJson(v,A.restBaseUrl+"portals/activate",z,C))},getAccount:function(v,z,C){null!==B.getUser()&&B.getJson(A.restBaseUrl+"portals/self",z.bind(this))},updateAccount:function(v,z,C){if(null!==B.getUser()){var E="";v.defaultBasemap&&(E=e.stringify(v.defaultBasemap));var G=v.metadataFormats&&0<v.metadataFormats.length?v.metadataFormats.join(","):"",H=!!A.userRole,K=A.userRole.isAdmin(),I=A.self&&(A.self.canListApps||
A.self.canListData),J=H&&(K||A.userRole.canManageCredits()),Q=H&&(K||A.userRole.canManageSecurity()),V=H&&(K||A.userRole.canManageWebsite());I=I&&H&&(K||A.userRole.canManageMarketplace());H=H&&(K||A.userRole.canManageUtilityServices());K=V||Q||H||J;J={clearEmptyFields:!0};V&&(J.name=v.name,J.description=v.description,J.culture=v.culture,J.cultureFormat=v.cultureFormat,J.region=v.region,J.featuredItemsGroupQuery=v.featuredItemsGroupQuery,J.thumbnail=v.thumbnail,J.basemapGalleryGroupQuery=v.basemapGalleryGroupQuery,
J.defaultBasemap=E,J.defaultExtent=v.defaultExtent?e.stringify(v.defaultExtent):"",J.featuredGroups=e.stringify(v.featuredGroups),J.homePageFeaturedContent=v.homePageFeaturedContent,J.homePageFeaturedContentCount=v.homePageFeaturedContentCount,J.rotatorPanels=e.stringify(v.rotatorPanels),J.showHomePageDescription=v.showHomePageDescription,J.templatesGroupQuery=v.templatesGroupQuery,J.analysisLayersGroupQuery=v.analysisLayersGroupQuery,J.galleryTemplatesGroupQuery=v.galleryTemplatesGroupQuery,J.stylesGroupQuery=
v.stylesGroupQuery,J.bingKey=v.bingKey,J.canShareBingPublic=v.canShareBingPublic,J.backgroundImage=v.backgroundImage,J.units=v.units,J.metadataEditable=v.metadataEditable,J.metadataFormats=G,J.useVectorBasemaps=v.useVectorBasemaps);H&&v.helperServices&&(J.geocodeService=e.stringify(v.helperServices.geocode),J.printServiceTask=e.stringify(v.helperServices.printTask),J.geometryService=e.stringify(v.helperServices.geometry),J.routeServiceLayer=e.stringify(v.helperServices.route),n.isDefined(v.helperServices.asyncRoute)&&
(J.asyncRouteService=e.stringify(v.helperServices.asyncRoute)),n.isDefined(v.helperServices.closestFacility)&&(J.closestFacilityService=e.stringify(v.helperServices.closestFacility)),n.isDefined(v.helperServices.asyncClosestFacility)&&(J.asyncClosestFacilityService=e.stringify(v.helperServices.asyncClosestFacility)),n.isDefined(v.helperServices.serviceArea)&&(J.serviceAreaService=e.stringify(v.helperServices.serviceArea)),n.isDefined(v.helperServices.asyncServiceArea)&&(J.asyncServiceAreaService=
e.stringify(v.helperServices.asyncServiceArea)),n.isDefined(v.helperServices.syncVRP)&&(J.syncVRPService=e.stringify(v.helperServices.syncVRP)),n.isDefined(v.helperServices.asyncVRP)&&(J.asyncVRPService=e.stringify(v.helperServices.asyncVRP)),n.isDefined(v.helperServices.asyncLocationAllocation)&&(J.asyncLocationAllocationService=e.stringify(v.helperServices.asyncLocationAllocation)),n.isDefined(v.helperServices.routingUtilities)&&(J.routingUtilitiesService=e.stringify(v.helperServices.routingUtilities)),
n.isDefined(v.helperServices.traffic)&&(J.trafficService=e.stringify(v.helperServices.traffic)),n.isDefined(v.helperServices.asyncODCostMatrix)&&(J.asyncODCostMatrixService=e.stringify(v.helperServices.asyncODCostMatrix)),B.isPortal()&&(n.isDefined(v.helperServices.analysis)&&(J.analysisService=e.stringify(v.helperServices.analysis)),n.isDefined(v.helperServices.asyncGeocode)&&(J.asyncGeocodeService=e.stringify(v.helperServices.asyncGeocode)),n.isDefined(v.helperServices.geoenrichment)&&(J.geoenrichmentService=
e.stringify(v.helperServices.geoenrichment)),n.isDefined(v.helperServices.hydrology)&&(J.hydrologyService=e.stringify(v.helperServices.hydrology)),n.isDefined(v.helperServices.orthomappingElevation)&&(J.orthomappingElevationService=e.stringify(v.helperServices.orthomappingElevation)),n.isDefined(v.helperServices.elevation)&&(J.elevationService=e.stringify(v.helperServices.elevation)),n.isDefined(v.helperServices.elevationSync)&&(J.elevationSyncService=e.stringify(v.helperServices.elevationSync)),
n.isDefined(v.helperServices.defaultElevationLayers)&&(J.elevation3DService=e.stringify(v.helperServices.defaultElevationLayers))));I&&(J.orgUrl=v.orgUrl,J.orgEmail=v.orgEmail,J.orgPhone=v.orgPhone);Q&&(J.access=v.access,J.allSSL=v.allSSL,J.commentsEnabled=v.commentsEnabled,J.canSharePublic=v.canSharePublic,J.canSearchPublic=v.canSearchPublic,J.urlKey=v.urlKey,J.canSignInIDP=v.canSignInIDP,J.canSignInArcGIS=v.canSignInArcGIS,J.useStandardizedQuery=v.useStandardizedQuery,J.mfaEnabled=v.mfaEnabled,
J.mfaAdmins=e.stringify(v.mfaAdmins),J.authorizedCrossOriginDomains=e.stringify(v.authorizedCrossOriginDomains),J.allowedOrigins=v.allowedOrigins,J.allowedRedirectUris=e.stringify(v.allowedRedirectUris),J.updateUserProfileDisabled=v.updateUserProfileDisabled,J.eueiEnabled=v.eueiEnabled,J.contacts=e.stringify(v.contacts||[]));K&&(J.portalProperties=e.stringify(v.portalProperties));v=Object.keys(J);1===v.length&&"clearEmptyFields"===v[0]?z():B.request({url:B.getSecureUrl(A.restBaseUrl)+"portals/self/update",
content:J},{usePost:!0}).then(z.bind(this),C.bind(this))}},getAccountGroups:function(v,z,C,E){if(null!==B.getUser()){E=1;var G=10;null!==z.start&&(E=z.start);null!==z.num&&(G=z.num);v="(orgid:"+v+" AND (access:org OR access:public)";B.isPortal()&&(v+=' -owner:"esri_nav" -owner:"esri_livingatlas" -owner:"esri_boundaries" -owner:"esri_demographics"');v=A.restBaseUrl+"community/groups?q\x3d"+encodeURIComponent(v+")")+"\x26sortField\x3dtitle\x26sortOrder\x3dasc\x26start\x3d"+E+"\x26num\x3d"+G;B.getJson(v,
C.bind(this))}},checkUsernames:function(v,z,C){v=v&&0<v.length?v.join(","):"";B.postJson({usernames:v},A.restBaseUrl+"community/checkUsernames",z,C)},inviteUsers:function(v,z,C){null!==B.getUser()&&B.postJson(v,A.restBaseUrl+"portals/self/invite",z,C)},inviteAccountUsersByEmail:function(v,z,C,E){null!==B.getUser()&&B.postJson(z,A.restBaseUrl+"portals/self/inviteByEmail",C.bind(this),E.bind(this))},getPendingAccountUsers:function(v,z,C,E){if(null!==B.getUser()){v=1;E=10;var G;n.isDefined(z.start)&&
(v=z.start);n.isDefined(z.num)&&(E=z.num);if(n.isDefined(z.sortField))var H=z.sortField;if(n.isDefined(z.sortOrder))var K=z.sortOrder;n.isDefined(z.type)&&(G=z.type);z=A.restBaseUrl+"portals/self/invitations?start\x3d"+v+"\x26num\x3d"+E;H&&(z+="\x26sortField\x3d"+H);K&&(z+="\x26sortOrder\x3d"+K);G&&(z+="\x26type\x3d"+G);B.getJson(z,C.bind(this))}},retrieveInvitations:function(v,z,C){v=A.restBaseUrl+"portals/self/invitations?start\x3d"+v+"\x26num\x3d"+z;C&&(v+="\x26type\x3d"+C);return B.request({url:v})},
getInvitation:function(v,z,C){null!==B.getUser()&&B.getJson(A.restBaseUrl+"community/invitations/"+v,z.bind(this),C)},acceptInvitation:function(v,z,C){null!==B.getUser()&&B.postJson({invitationId:v},A.restBaseUrl+"community/invitations/"+v+"/accept",z.bind(this),C.bind(this))},declineInvitation:function(v,z,C){null!==B.getUser()&&B.postJson({},A.restBaseUrl+"community/invitations/"+v+"/decline",z.bind(this))},approvePendingInvitation:function(v,z,C,E){null!==B.getUser()&&B.postJson({},A.restBaseUrl+
"portals/self/invitations/"+z+"/approve",C.bind(this))},removePendingInvitation:function(v,z,C,E){null!==B.getUser()&&B.postJson({},A.restBaseUrl+"portals/self/invitations/"+z+"/delete",C.bind(this))},getAccountUsers:function(v,z,C,E){if(null!==B.getUser()){v=1;E=10;n.isDefined(z.start)&&(v=z.start);n.isDefined(z.num)&&(E=z.num);if(n.isDefined(z.sortField))var G=z.sortField;if(n.isDefined(z.sortOrder))var H=z.sortOrder;if(n.isDefined(z.adminOnly))var K=z.adminOnly;if(n.isDefined(z.excludeSystemUsers))var I=
z.excludeSystemUsers;z=A.restBaseUrl+"portals/self/users?start\x3d"+v+"\x26num\x3d"+E;G&&(z+="\x26sortField\x3d"+G);H&&(z+="\x26sortOrder\x3d"+H);K&&(z+="\x26role\x3dorg_admin");I&&(z+="\x26excludeSystemUsers\x3dtrue");B.getJson(z,C.bind(this))}},searchAccountUsers:function(v,z,C,E){null!==B.getUser()&&(v=1,E=10,n.isDefined(z.start)&&(v=z.start),n.isDefined(z.num)&&(E=z.num),v=A.restBaseUrl+"portals/self/users?start\x3d"+v+"\x26num\x3d"+E,n.isDefined(z.sortField)&&(v+="\x26sortField\x3d"+z.sortField),
n.isDefined(z.sortOrder)&&(v+="\x26sortOrder\x3d"+z.sortOrder),n.isDefined(z.role)&&(v+="\x26role\x3d"+z.role),n.isDefined(z.username)&&(v+="\x26username\x3d"+z.username),n.isDefined(z.fullname)&&(v+="\x26fullname\x3d"+z.fullname),n.isDefined(z.lastname)&&(v+="\x26lastname\x3d"+z.lastname),n.isDefined(z.firstname)&&(v+="\x26firstname\x3d"+z.firstname),n.isDefined(z.excludeSystemUsers)&&(v+="\x26excludeSystemUsers\x3dtrue"),B.getJson(v,C.bind(this)))},searchAccountGroups:function(v,z,C,E,G){if(null!==
B.getUser()){var H=1,K=10;null!==C.start&&(H=C.start);null!=C.num&&(K=C.num);v=A.restBaseUrl+"community/groups?q\x3d"+encodeURIComponent("("+z+" orgid:"+v+")")+"\x26start\x3d"+H+"\x26num\x3d"+K+"\x26sortField\x3dtitle\x26sortOrder\x3dasc";B.getJson(v,E.bind(this),G.bind(this))}},updateUserRole:function(v,z,C,E){var G=null,H=B.getUser();if(null!==H){G=H.accountId;var K=H.username||H.email;null!==G&&(K===v&&"account_admin"===H.role&&"account_admin"!==z?(v=new D,v.onOkClick=function(){b.byId("general-dialog").hide();
C(null)},v.show({title:"Account Administrator",message:"You are an account administrator and cannot remove yourself from the administrator role. Another account administrator must change your role."})):B.postJson({user:v,role:z},A.restBaseUrl+"portals/self/updateUserRole",C.bind(this),E.bind(this)))}},deleteUser:function(v,z,C){null!==B.getUser()&&B.postJson({},A.restBaseUrl+"community/users/"+v+"/delete",z.bind(this),C.bind(this))},blankUserStore:function(){return new f({data:{identifier:"username",
label:"fullName",items:[]}})},caseInsensitiveComparator:function(v,z){v&&(v=v.toLowerCase());z&&(z=z.toLowerCase());return c.basicComparator(v,z)},lastLoginComparator:function(v,z){var C=0===v||-1===v?void 0:v,E=0===z||-1===z?void 0:z,G=-1;A.self&&A.self.isPortal||!1===A.isMultiTenant?G=c.basicComparator(C,E):C==E?G=v==z?0:v<z?-1:1:C&&E&&v>z?G=1:C&&!E?G=1:!C&&E&&(G=-1);return G},pendingUsersToStore:function(v,z){var C=[];v.forEach(function(E,G){C[G]={id:E.id,fromUsername:E.fromUsername,email:E.email,
username:E.username,role:B.normalizeOrgRole(E.role),targetId:E.targetId,type:E.type,targetType:E.targetType,mustApprove:E.mustApprove,accepted:E.accepted,dateAccepted:E.dateAccepted,expiration:E.expiration,created:E.created,culture:z}},this);v=new f({data:{identifier:"id",label:"fullName",items:C}});v.comparatorMap={email:this.caseInsensitiveComparator,username:this.caseInsensitiveComparator};return v},usersToStore:function(v,z){var C=[];v.forEach(function(E,G){C[G]={email:E.email,fullName:E.fullName,
username:E.username,created:E.created,storageUsage:E.storageUsage,role:B.normalizeOrgRole(E.role),lastLogin:E.lastLogin,culture:z,disabled:E.disabled,idpUsername:E.idpUsername,userType:E.userType,mfaEnabled:E.mfaEnabled,availableCredits:E.availableCredits,assignedCredits:E.assignedCredits,level:E.level||"2"}},this);v=new f({data:{identifier:"username",label:"fullName",items:C}});v.comparatorMap={fullName:this.caseInsensitiveComparator,username:this.caseInsensitiveComparator,lastLogin:this.lastLoginComparator};
return v},groupsToStore:function(v){var z=[];v.forEach(function(C,E){z[E]={id:C.id,title:C.title}},this);return new ItemFileWriteStore({data:{identifier:"id",label:"group",items:z}})},getSupportedLanguages:function(v,z){return esri.request({url:A.restBaseUrl+"portals/languages",content:{f:"json"},load:v,callbackParamName:"callback",error:z})},getSupportedRegions:function(v,z){return esri.request({url:A.restBaseUrl+"portals/regions",content:{f:"json",culture:dojo.locale},load:v,callbackParamName:"callback",
error:z})},getSupportedLanguagesAndRegions:function(){var v=new r;g({languages:this.getSupportedLanguages(null,null),regions:this.getSupportedRegions(null,null)}).then(function(z){v.resolve({languages:z.languages,regions:z.regions})}.bind(this),function(z){v.resolve(z)}.bind(this));return v}}})},"arcgisonline/pages/utils/promises":function(){define(["require","exports","tslib","dojo/Deferred","dojo/promise/all"],function(b,y,r,a,k){a=r.__importDefault(a);k=r.__importDefault(k);return{isPromise:function(e){return e&&
"function"===typeof e.then},resolve:function(e){var g=new a.default;g.resolve(e);return g.promise},reject:function(e){var g=new a.default;g.reject(e);return g.promise},when:function(e){return this.isPromise(e)?e:this.resolve(e)},create:function(e,g,h){var m=this,l=new a.default(h);e(function(f){return m.when(f).then(l.resolve,l.reject)});return l.promise},all:k.default,filter:function(e,g){var h=e.slice();return this.all(e.map(function(m,l){return g(m,l)})).then(function(m){return h.filter(function(l,
f){return m[f]})})},eachAlways:function(e){if(e){if("function"!==typeof e.forEach){var g=Object.keys(e),h=g.map(function(m){return e[m]});return this.eachAlways(h).then(function(m){var l={};g.forEach(function(f,c){l[f]=m[c]});return l})}return this.create(function(m){var l=[],f=e.length;0===f&&m(l);e.forEach(function(c){var d={promise:c};l.push(d);c.then(function(u){d.value=u}).catch(function(u){d.error=u}).then(function(){--f;0===f&&m(l)})})},function(m){e.forEach(function(l){l.cancel(m)})})}},eachAlwaysValues:function(e){return this.eachAlways(e).then(function(g){return g.filter(function(h){return h.value}).map(function(h){return h.value})})},
after:function(e,g){var h=this,m=0;return this.create(function(l){m=setTimeout(function(){h.resolve(g)},e)},function(){m&&(clearTimeout(m),m=0)})},timeout:function(e,g,h){var m=0,l=new a.default(e.cancel);e.then(function(f){l.isFulfilled()||(l.resolve(f),m&&(clearTimeout(m),m=0))});e.catch(function(f){l.isFulfilled()||(l.reject(f),m&&(clearTimeout(m),m=0))});m=setTimeout(function(){l.reject(h||Error("promiseUtils:timeout\n          The wrapped promise did not resolve within "+g+"ms"))},g);return l.promise}}})},
"arcgisonline/sharing/dijit/Role":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/arrays ./_LevelAwareMixin ../../tsutils/declareDecorator dojo/i18n!../../nls/arcgisonline dojo/json esri/lang".split(" "),function(b,y,r,a,k,e,g,h,m,l){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);return function(){function f(c){this.declaredClass="arcgisonline.sharing.dijit.Role";
this.description=this.name=this.baseRole=this.id=null;this.privileges=[];this.privilegeObj={portal:{admin:{inviteUsers:!1,disableUsers:!1,viewUsers:!1,updateUsers:!1,deleteUsers:!1,changeUserRoles:!1,viewGroups:!1,updateGroups:!1,deleteGroups:!1,reassignGroups:!1,assignToGroups:!1,manageEnterpriseGroups:!1,viewItems:!1,updateItems:!1,deleteItems:!1,reassignItems:!1,manageLicenses:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,createUpdateCapableGroup:!1,updateItemCategorySchema:!1,manageCollaborations:!1,
manageSecurity:!1,manageWebsite:!1,manageRoles:!1,manageServers:!1,manageUtilityServices:!1,manageCredits:!1},publisher:{publishFeatures:!1,publishTiles:!1,publishScenes:!1,publishTiledImagery:!1,publishDynamicImagery:!1,publishServerServices:!1,publishServerGPServices:!1,registerDataStores:!1,bulkPublishFromDataStores:!1,enumerateDataStores:!1},user:{createGroup:!1,joinGroup:!1,joinNonOrgGroup:!1,createItem:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,shareGroupToOrg:!1,shareGroupToPublic:!1,
viewOrgUsers:!1,viewOrgItems:!1,viewOrgGroups:!1,viewTracks:!1}},features:{user:{edit:!1,fullEdit:!1,manageVersions:!1}},opendata:{user:{openDataAdmin:!1,designateGroup:!1}},premium:{user:{geocode:!1,networkanalysis:!1,spatialanalysis:!1,geoenrichment:!1,demographics:!1,featurereport:!1},publisher:{geoanalytics:!1,rasteranalysis:!1,createNotebooks:!1,scheduleNotebooks:!1,publishNotebooks:!1,createAdvancedNotebooks:!1}},marketplace:{admin:{manage:!1,purchase:!1,startTrial:!1}}};this.VIEWER_ROLE_ID=
"iAAAAAAAAAAAAAAA";this.VIEWER_ROLE_PRIVILEGES="portal:user:joinGroup portal:user:viewOrgGroups portal:user:viewOrgItems portal:user:viewOrgUsers premium:user:demographics premium:user:elevation premium:user:featurereport premium:user:geocode premium:user:networkanalysis".split(" ");c=c||{};var d=c.portalUser;d?(this.id=d.roleId?d.roleId:d.role,this.baseRole=d.role,this.setPrivileges(d.privileges)):(this.id=c.id,this.baseRole=c.role,this.name=c.name,this.description=c.description,c.privileges&&this.setPrivileges(c.privileges));
c.viewOnly&&this.setViewOnly()}f.prototype.setViewOnly=function(){var c=this;this.baseRole="org_user";this.id=this.VIEWER_ROLE_ID;var d=this._buildPrivilegesArray().filter(function(u){return k.default.includes(c.VIEWER_ROLE_PRIVILEGES,u)});this.setPrivileges(d)};f.prototype.isViewer=function(){return l.default.isDefined(this.id)&&this.id===this.SYSTEM_ROLES.VIEWER};f.prototype.isUser=function(){return l.default.isDefined(this.id)&&("org_user"===this.id||"account_user"===this.id)};f.prototype.isPublisher=
function(){return l.default.isDefined(this.id)&&("org_publisher"===this.id||"account_publisher"===this.id)};f.prototype.isAdmin=function(){return l.default.isDefined(this.id)&&("org_admin"===this.id||"account_admin"===this.id)};f.prototype.isBasedOnUser=function(){return this.isUser()||l.default.isDefined(this.baseRole)&&("org_user"===this.baseRole||"account_user"===this.baseRole)};f.prototype.isBasedOnPublisher=function(){return this.isPublisher()||l.default.isDefined(this.baseRole)&&("org_publisher"===
this.baseRole||"account_publisher"===this.baseRole)};f.prototype.isBasedOnAdmin=function(){return this.isAdmin()||l.default.isDefined(this.baseRole)&&("org_admin"===this.baseRole||"account_admin"===this.baseRole)};f.prototype.isCustom=function(){return!this.isUser()&&!this.isPublisher()&&!this.isAdmin()&&l.default.isDefined(this.id)&&0<this.id.length};f.prototype.canInviteUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.inviteUsers};f.prototype.canDisableUsers=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.disableUsers};f.prototype.canViewUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.viewUsers};f.prototype.canUpdateUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.updateUsers};f.prototype.canDeleteUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.deleteUsers};f.prototype.canChangeUserRoles=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.changeUserRoles};f.prototype.canViewOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.viewGroups};f.prototype.canUpdateOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.updateGroups};f.prototype.canDeleteOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.deleteGroups};f.prototype.canReassignOrgGroups=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.reassignGroups};f.prototype.canAssignUsersToOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.assignToGroups};f.prototype.canManageEnterpriseGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageEnterpriseGroups};f.prototype.canViewOrgItems=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.viewItems};
f.prototype.canUpdateOrgItems=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.updateItems};f.prototype.canDeleteOrgItems=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.deleteItems};f.prototype.canReassignOrgItems=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.reassignItems};f.prototype.canManageItems=function(){return this.isAdmin()||this.canViewUsers()&&this.canViewOrgItems()&&(this.canUpdateOrgItems()||
this.canDeleteOrgItems()||this.canReassignOrgItems())};f.prototype.canManageLicenses=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageLicenses};f.prototype.canShareOthersItemsToGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.shareToGroup};f.prototype.canShareOthersItemsToOrg=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.shareToOrg};f.prototype.canShareOthersItemsToPublic=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.shareToPublic};f.prototype.canCreateUpdateCapableGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.createUpdateCapableGroup};f.prototype.canUpdateItemCategories=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.updateItemCategorySchema};f.prototype.canManageCollaborations=function(){var c;return null===(c=this.privilegeObj)||void 0===
c?void 0:c.portal.admin.manageCollaborations};f.prototype.canManageSecurity=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageSecurity};f.prototype.canManageWebsite=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageWebsite};f.prototype.canManageRoles=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageRoles};f.prototype.canManageServers=function(){var c;return null===(c=this.privilegeObj)||
void 0===c?void 0:c.portal.admin.manageServers};f.prototype.canManageUtilityServices=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageUtilityServices};f.prototype.canManageCredits=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageCredits};f.prototype.canCreateGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.createGroup};f.prototype.canJoinOrgGroup=function(){var c;return null===
(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.joinGroup};f.prototype.canJoinNonOrgGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.joinNonOrgGroup};f.prototype.canPublishFeatures=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishFeatures};f.prototype.canPublishTiles=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishTiles};f.prototype.canPublishScenes=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishScenes};f.prototype.canPublishTiledImagery=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishTiledImagery};f.prototype.canPublishDynamicImagery=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishDynamicImagery};f.prototype.canPublishServerServices=function(){var c;return null===(c=this.privilegeObj)||void 0===
c?void 0:c.portal.publisher.publishServerServices};f.prototype.canPublishServerGPServices=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishServerGPServices};f.prototype.canPublishVectorTiles=function(){return!0};f.prototype.canPublishImageCollection=function(){var c=a.default.self&&a.default.self.isPortal,d=this.canPublishDynamicImagery()||this.canPublishTiledImagery();return c?this.canPublishServerServices():this._allowImageryBetaFeatures()&&d};f.prototype.canCreateItem=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.createItem};f.prototype.canShareItemToGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareToGroup};f.prototype.canShareItemToOrg=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareToOrg};f.prototype.canShareItemToPublic=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareToPublic};f.prototype.canShareGroupToOrg=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareGroupToOrg};f.prototype.canShareGroupToPublic=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareGroupToPublic};f.prototype.canViewOrgUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.viewOrgUsers};f.prototype.canViewOrgUserContent=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.viewOrgItems};
f.prototype.canViewOrgUserGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.viewOrgGroups};f.prototype.canViewTracks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.viewTracks};f.prototype.canEditFeatures=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.features.user.edit};f.prototype.canEditFeaturesFullControl=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.features.user.fullEdit};
f.prototype.canManageVersions=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.features.user.manageVersions};f.prototype.canManageOpenData=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.opendata.user.openDataAdmin};f.prototype.canDesignateOpenDataGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.opendata.user.designateGroup};f.prototype.canUseGeocode=function(){var c;return null===(c=this.privilegeObj)||void 0===c?
void 0:c.premium.user.geocode};f.prototype.canUseNetworkAnalysis=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.networkanalysis};f.prototype.canUseSpatialAnalysis=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.spatialanalysis};f.prototype.canUseGeoenrichment=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.geoenrichment};f.prototype.canUseDemographics=function(){var c;return null===
(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.demographics};f.prototype.canUseFeatureReport=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.featurereport};f.prototype.canUseGeoanalytics=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.geoanalytics};f.prototype.canUseRasterAnalysis=function(){var c,d=a.default.self&&a.default.self.isPortal,u=null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.rasteranalysis;
return d?this.canPublishServerServices():u&&this._allowImageryBetaFeatures()};f.prototype.canPurchaseMarketplace=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.marketplace.admin.purchase};f.prototype.canManageMarketplace=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.marketplace.admin.manage};f.prototype.canTrialMarketplace=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.marketplace.admin.startTrial};f.prototype.canCreateNotebooks=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.createNotebooks};f.prototype.canScheduleNotebooks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.scheduleNotebooks};f.prototype.canPublishNotebooks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.publishNotebooks};f.prototype.canCreateAdvancedNotebooks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:
c.premium.publisher.createAdvancedNotebooks};f.prototype.canBulkPublishFromDataStores=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.bulkPublishFromDataStores};f.prototype.canEnumerateDataStores=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.enumerateDataStores};f.prototype.canRegisterDataStores=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.registerDataStores};f.prototype.setPrivileges=
function(c){this.privileges=c;this._initPrivilegesObject();l.default.isDefined(c)&&this._readPrivileges(c)};f.prototype.stringify=function(){return m.default.stringify({id:this.id,name:this.name,description:this.description,privileges:this._buildPrivilegesArray()})};f.prototype.stringifyRole=function(){return m.default.stringify({id:this.id,name:this.name,description:this.description})};f.prototype.stringifyPrivileges=function(){return m.default.stringify({privileges:this._buildPrivilegesArray()})};
f.prototype.stringifyPretty=function(){return m.default.stringify({id:this.id,name:this.name,description:this.description,privileges:this._buildPrivilegesArray()},null,"  ")};f.prototype.summarize=function(){var c=[],d=a.default.self&&a.default.self.isPortal,u=a.default.self&&a.default.self.portalProperties&&a.default.self.portalProperties.openData&&!0===a.default.self.portalProperties.openData.enabled,n=this.privilegeObj;n.portal.user.viewOrgUsers&&c.push(d?h.default.customRoles.users.canViewOrgUsersSumPortal:
h.default.customRoles.users.canViewOrgUsersSum);n.portal.user.createGroup&&c.push(h.default.customRoles.groups.canCreateSum);n.portal.user.joinGroup&&c.push(d?h.default.customRoles.groups.canJoinIntSumPortal:h.default.customRoles.groups.canJoinIntSum);n.portal.user.joinNonOrgGroup&&c.push(h.default.customRoles.groups.canJoinExt);n.portal.user.viewOrgGroups&&c.push(d?h.default.customRoles.groups.canViewOrgGroupsPortal:h.default.customRoles.groups.canViewOrgGroups);n.portal.user.createItem&&c.push(h.default.customRoles.items.canCreateSum);
n.portal.publisher.publishFeatures&&c.push(h.default.customRoles.items.canPublishFeatures);n.portal.publisher.publishTiles&&c.push(h.default.customRoles.items.canPublishTiles);n.portal.publisher.publishScenes&&c.push(h.default.customRoles.items.canPublishScenes);n.portal.publisher.publishTiledImagery&&c.push(h.default.customRoles.items.canPublishTiledImagery);n.portal.publisher.publishDynamicImagery&&c.push(h.default.customRoles.items.canPublishDynamicImagery);d&&n.portal.publisher.publishServerServices&&
c.push(h.default.customRoles.items.canPublishServerServices);d&&n.portal.publisher.registerDataStores&&c.push(h.default.customRoles.items.canRegisterDataStore);n.portal.user.viewOrgItems&&c.push(d?h.default.customRoles.items.canViewOrgItemsPortal:h.default.customRoles.items.canViewOrgItems);n.portal.user.viewTracks&&c.push(h.default.customRoles.items.canViewTracks);n.portal.user.shareToGroup&&c.push(h.default.customRoles.itemSharing.canShareGroupsSum);n.portal.user.shareToOrg&&c.push(d?h.default.customRoles.itemSharing.canShareOrgSumPortal:
h.default.customRoles.itemSharing.canShareOrgSum);n.portal.user.shareToPublic&&c.push(h.default.customRoles.itemSharing.canSharePublicSum);n.portal.user.shareGroupToOrg&&c.push(d?h.default.customRoles.groupSharing.canShareOrgPortal:h.default.customRoles.groupSharing.canShareOrg);n.portal.user.shareGroupToPublic&&c.push(h.default.customRoles.groupSharing.canSharePublic);u&&n.opendata.user.openDataAdmin&&c.push(h.default.customRoles.openData.canAdmin);n.premium.user.geocode&&c.push(h.default.customRoles.geoservices.canUseGeocoding);
n.premium.user.networkanalysis&&c.push(h.default.customRoles.geoservices.canUseNA);n.premium.user.spatialanalysis&&c.push(h.default.customRoles.geoservices.canUseSA);n.premium.user.geoenrichment&&c.push(h.default.customRoles.geoservices.canUseGeoenrichment);n.premium.user.demographics&&c.push(h.default.customRoles.geoservices.canUseDemographics);n.premium.user.featurereport&&c.push(h.default.customRoles.geoservices.canUseFeatureReport);d&&(n.premium.publisher.geoanalytics&&c.push(h.default.customRoles.geoservices.canUseGeoanalytics),
n.premium.publisher.rasteranalysis&&c.push(h.default.customRoles.geoservices.canUseRasterAnalysis));n.features.user.edit&&c.push(h.default.customRoles.features.canEditSum);n.features.user.fullEdit&&c.push(h.default.customRoles.features.canManageSum);n.features.user.manageVersions&&c.push(h.default.customRoles.versioning.canManage);u&&n.opendata.user.designateGroup&&c.push(h.default.customRoles.openData.canDesignate);n.portal.admin.viewUsers&&c.push(d?h.default.customRoles.userAdmin.canViewSumPortal:
h.default.customRoles.userAdmin.canViewSum);n.portal.admin.updateUsers&&c.push(d?h.default.customRoles.userAdmin.canUpdateSumPortal:h.default.customRoles.userAdmin.canUpdateSum);n.portal.admin.deleteUsers&&c.push(d?h.default.customRoles.userAdmin.canDeleteSumPortal:h.default.customRoles.userAdmin.canDeleteSum);n.portal.admin.inviteUsers&&c.push(d?h.default.customRoles.userAdmin.canAddSum:h.default.customRoles.userAdmin.canInviteSum);n.portal.admin.disableUsers&&c.push(d?h.default.customRoles.userAdmin.canDisableSumPortal:
h.default.customRoles.userAdmin.canDisableSum);n.portal.admin.changeUserRoles&&c.push(d?h.default.customRoles.userAdmin.canChangeRolesSumPortal:h.default.customRoles.userAdmin.canChangeRolesSum);n.portal.admin.manageLicenses&&c.push(d?h.default.customRoles.userAdmin.canManageLicensesSumPortal:h.default.customRoles.userAdmin.canManageLicensesSum);n.portal.admin.viewGroups&&c.push(d?h.default.customRoles.groupAdmin.canViewSumPortal:h.default.customRoles.groupAdmin.canViewSum);n.portal.admin.updateGroups&&
c.push(d?h.default.customRoles.groupAdmin.canUpdateSumPortal:h.default.customRoles.groupAdmin.canUpdateSum);n.portal.admin.deleteGroups&&c.push(d?h.default.customRoles.groupAdmin.canDeleteSumPortal:h.default.customRoles.groupAdmin.canDeleteSum);n.portal.admin.reassignGroups&&c.push(d?h.default.customRoles.groupAdmin.canReassignSumPortal:h.default.customRoles.groupAdmin.canReassignSum);n.portal.admin.assignToGroups&&c.push(d?h.default.customRoles.groupAdmin.canAssignSumPortal:h.default.customRoles.groupAdmin.canAssignSum);
n.portal.admin.manageEnterpriseGroups&&c.push(h.default.customRoles.groupAdmin.canLink);n.portal.admin.createUpdateCapableGroup&&c.push(h.default.customRoles.groupAdmin.canCreateUpdateCapable);n.portal.admin.viewItems&&c.push(d?h.default.customRoles.itemAdmin.canViewSumPortal:h.default.customRoles.itemAdmin.canViewSum);n.portal.admin.updateItems&&c.push(d?h.default.customRoles.itemAdmin.canUpdateSumPortal:h.default.customRoles.itemAdmin.canUpdateSum);n.portal.admin.deleteItems&&c.push(d?h.default.customRoles.itemAdmin.canDeleteSumPortal:
h.default.customRoles.itemAdmin.canDeleteSum);n.portal.admin.reassignItems&&c.push(d?h.default.customRoles.itemAdmin.canReassignSumPortal:h.default.customRoles.itemAdmin.canReassignSum);n.portal.admin.updateItemCategorySchema&&c.push(h.default.customRoles.itemAdmin.canManageItemCategories);n.portal.admin.manageCollaborations&&c.push(d?h.default.customRoles.settingsAdmin.canManageCollabPortalSum:h.default.customRoles.settingsAdmin.canManageCollabSum);n.portal.admin.manageSecurity&&c.push(d?h.default.customRoles.settingsAdmin.canManageSecurityPortalSum:
h.default.customRoles.settingsAdmin.canManageSecuritySum);n.portal.admin.manageWebsite&&c.push(d?h.default.customRoles.settingsAdmin.canManageWebsitePortalSum:h.default.customRoles.settingsAdmin.canManageWebsiteSum);n.portal.admin.manageRoles&&c.push(d?h.default.customRoles.settingsAdmin.canManageRolesPortalSum:h.default.customRoles.settingsAdmin.canManageRolesSum);n.portal.admin.manageServers&&c.push(h.default.customRoles.settingsAdmin.canManageServersSum);n.portal.admin.manageUtilityServices&&c.push(d?
h.default.customRoles.settingsAdmin.canManageUtilityServicesPortalSum:h.default.customRoles.settingsAdmin.canManageUtilityServicesSum);n.portal.admin.manageCredits&&c.push(h.default.customRoles.settingsAdmin.canManageCreditsSum);d&&n.portal.publisher.publishServerGPServices&&c.push(h.default.customRoles.items.canPublishServerGPServices);n.portal.admin.shareToGroup&&c.push(d?h.default.customRoles.itemAdmin.canShareToGroupSumPortal:h.default.customRoles.itemAdmin.canShareToGroupSum);n.portal.admin.shareToOrg&&
c.push(d?h.default.customRoles.itemAdmin.canShareToOrgSumPortal:h.default.customRoles.itemAdmin.canShareToOrgSum);n.portal.admin.shareToPublic&&c.push(d?h.default.customRoles.itemAdmin.canShareToPublicSumPortal:h.default.customRoles.itemAdmin.canShareToPublicSum);d||(n.marketplace.admin.manage&&c.push(h.default.customRoles.marketplace.canAdminSum),n.marketplace.admin.purchase&&c.push(h.default.customRoles.marketplace.canPurchaseSum),n.marketplace.admin.startTrial&&c.push(h.default.customRoles.marketplace.canTrialSum));
n.premium.publisher.createAdvancedNotebooks&&c.push(h.default.customRoles.geoservices.canUseAdvancedNotebooks);n.premium.publisher.createNotebooks&&c.push(h.default.customRoles.items.canCreateNotebooks);n.premium.publisher.publishNotebooks&&c.push(h.default.customRoles.items.canPublishNotebooks);n.premium.publisher.scheduleNotebooks&&c.push(h.default.customRoles.itemAdmin.canScheduleNotebooks);return c};f.prototype._initPrivilegesObject=function(){this._applyToAll(!1)};f.prototype._readPrivileges=
function(c){var d=this;l.default.isDefined(c)&&c instanceof Array&&c.forEach(function(u){d._readPrivilege(u)})};f.prototype._readPrivilege=function(c){this._applyEffectToAction(!0,c)};f.prototype._allowImageryBetaFeatures=function(){var c;return k.default.includes(null===(c=a.default.self)||void 0===c?void 0:c.allowedBetaFeatures,"imagery")};f.prototype._applyEffectToAction=function(c,d){switch(d){case "portal:admin:inviteUsers":this.privilegeObj.portal.admin.inviteUsers=c;break;case "portal:admin:disableUsers":this.privilegeObj.portal.admin.disableUsers=
c;break;case "portal:admin:viewUsers":this.privilegeObj.portal.admin.viewUsers=c;break;case "portal:admin:updateUsers":this.privilegeObj.portal.admin.updateUsers=c;break;case "portal:admin:deleteUsers":this.privilegeObj.portal.admin.deleteUsers=c;break;case "portal:admin:changeUserRoles":this.privilegeObj.portal.admin.changeUserRoles=c;break;case "portal:admin:viewGroups":this.privilegeObj.portal.admin.viewGroups=c;break;case "portal:admin:updateGroups":this.privilegeObj.portal.admin.updateGroups=
c;break;case "portal:admin:deleteGroups":this.privilegeObj.portal.admin.deleteGroups=c;break;case "portal:admin:reassignGroups":this.privilegeObj.portal.admin.reassignGroups=c;break;case "portal:admin:assignToGroups":this.privilegeObj.portal.admin.assignToGroups=c;break;case "portal:admin:manageEnterpriseGroups":this.privilegeObj.portal.admin.manageEnterpriseGroups=c;break;case "portal:admin:viewItems":this.privilegeObj.portal.admin.viewItems=c;break;case "portal:admin:updateItems":this.privilegeObj.portal.admin.updateItems=
c;break;case "portal:admin:deleteItems":this.privilegeObj.portal.admin.deleteItems=c;break;case "portal:admin:reassignItems":this.privilegeObj.portal.admin.reassignItems=c;break;case "portal:admin:manageLicenses":this.privilegeObj.portal.admin.manageLicenses=c;break;case "portal:admin:shareToGroup":this.privilegeObj.portal.admin.shareToGroup=c;break;case "portal:admin:shareToOrg":this.privilegeObj.portal.admin.shareToOrg=c;break;case "portal:admin:shareToPublic":this.privilegeObj.portal.admin.shareToPublic=
c;break;case "portal:admin:createUpdateCapableGroup":this.privilegeObj.portal.admin.createUpdateCapableGroup=c;break;case "portal:admin:updateItemCategorySchema":this.privilegeObj.portal.admin.updateItemCategorySchema=c;break;case "portal:admin:manageCollaborations":this.privilegeObj.portal.admin.manageCollaborations=c;break;case "portal:admin:manageSecurity":this.privilegeObj.portal.admin.manageSecurity=c;break;case "portal:admin:manageWebsite":this.privilegeObj.portal.admin.manageWebsite=c;break;
case "portal:admin:manageRoles":this.privilegeObj.portal.admin.manageRoles=c;break;case "portal:admin:manageServers":this.privilegeObj.portal.admin.manageServers=c;break;case "portal:admin:manageUtilityServices":this.privilegeObj.portal.admin.manageUtilityServices=c;break;case "portal:admin:manageCredits":this.privilegeObj.portal.admin.manageCredits=c;break;case "portal:publisher:publishFeatures":this.privilegeObj.portal.publisher.publishFeatures=c;break;case "portal:publisher:publishTiles":this.privilegeObj.portal.publisher.publishTiles=
c;break;case "portal:publisher:publishScenes":this.privilegeObj.portal.publisher.publishScenes=c;break;case "portal:publisher:publishTiledImagery":this.privilegeObj.portal.publisher.publishTiledImagery=c;break;case "portal:publisher:publishDynamicImagery":this.privilegeObj.portal.publisher.publishDynamicImagery=c;break;case "portal:publisher:publishServerServices":this.privilegeObj.portal.publisher.publishServerServices=c;break;case "portal:publisher:publishServerGPServices":this.privilegeObj.portal.publisher.publishServerGPServices=
c;break;case "portal:publisher:bulkPublishFromDataStores":this.privilegeObj.portal.publisher.bulkPublishFromDataStores=c;break;case "portal:publisher:enumerateDataStores":this.privilegeObj.portal.publisher.enumerateDataStores=c;break;case "portal:publisher:registerDataStores":this.privilegeObj.portal.publisher.registerDataStores=c;break;case "portal:user:createGroup":this.privilegeObj.portal.user.createGroup=c;break;case "portal:user:joinGroup":this.privilegeObj.portal.user.joinGroup=c;break;case "portal:user:joinNonOrgGroup":this.privilegeObj.portal.user.joinNonOrgGroup=
c;break;case "portal:user:createItem":this.privilegeObj.portal.user.createItem=c;break;case "portal:user:shareToGroup":this.privilegeObj.portal.user.shareToGroup=c;break;case "portal:user:shareToOrg":this.privilegeObj.portal.user.shareToOrg=c;break;case "portal:user:shareToPublic":this.privilegeObj.portal.user.shareToPublic=c;break;case "portal:user:shareGroupToOrg":this.privilegeObj.portal.user.shareGroupToOrg=c;break;case "portal:user:shareGroupToPublic":this.privilegeObj.portal.user.shareGroupToPublic=
c;break;case "portal:user:viewOrgUsers":this.privilegeObj.portal.user.viewOrgUsers=c;break;case "portal:user:viewOrgItems":this.privilegeObj.portal.user.viewOrgItems=c;break;case "portal:user:viewOrgGroups":this.privilegeObj.portal.user.viewOrgGroups=c;break;case "portal:user:viewTracks":this.privilegeObj.portal.user.viewTracks=c;break;case "features:user:edit":this.privilegeObj.features.user.edit=c;break;case "features:user:fullEdit":this.privilegeObj.features.user.fullEdit=c;break;case "features:user:manageVersions":this.privilegeObj.features.user.manageVersions;
break;case "opendata:user:openDataAdmin":this.privilegeObj.opendata.user.openDataAdmin=c;break;case "opendata:user:designateGroup":this.privilegeObj.opendata.user.designateGroup=c;break;case "premium:user:geocode":this.privilegeObj.premium.user.geocode=c;break;case "premium:user:networkanalysis":this.privilegeObj.premium.user.networkanalysis=c;break;case "premium:user:spatialanalysis":this.privilegeObj.premium.user.spatialanalysis=c;break;case "premium:user:geoenrichment":this.privilegeObj.premium.user.geoenrichment=
c;break;case "premium:user:demographics":this.privilegeObj.premium.user.demographics=c;break;case "premium:user:featurereport":this.privilegeObj.premium.user.featurereport=c;break;case "premium:publisher:geoanalytics":this.privilegeObj.premium.publisher.geoanalytics=c;break;case "premium:publisher:rasteranalysis":this.privilegeObj.premium.publisher.rasteranalysis=c;break;case "marketplace:admin:purchase":this.privilegeObj.marketplace.admin.purchase=c;break;case "marketplace:admin:manage":this.privilegeObj.marketplace.admin.manage=
c;break;case "marketplace:admin:startTrial":this.privilegeObj.marketplace.admin.startTrial=c;break;case "premium:publisher:createNotebooks":this.privilegeObj.premium.publisher.createNotebooks=c;break;case "premium:publisher:scheduleNotebooks":this.privilegeObj.premium.publisher.scheduleNotebooks=c;break;case "premium:publisher:publishNotebooks":this.privilegeObj.premium.publisher.publishNotebooks=c;break;case "premium:publisher:createAdvancedNotebooks":this.privilegeObj.premium.publisher.createAdvancedNotebooks=
c}};f.prototype._applyToAll=function(c){this.privilegeObj.portal.admin.inviteUsers=c;this.privilegeObj.portal.admin.disableUsers=c;this.privilegeObj.portal.admin.viewUsers=c;this.privilegeObj.portal.admin.updateUsers=c;this.privilegeObj.portal.admin.deleteUsers=c;this.privilegeObj.portal.admin.changeUserRoles=c;this.privilegeObj.portal.admin.viewGroups=c;this.privilegeObj.portal.admin.updateGroups=c;this.privilegeObj.portal.admin.deleteGroups=c;this.privilegeObj.portal.admin.reassignGroups=c;this.privilegeObj.portal.admin.assignToGroups=
c;this.privilegeObj.portal.admin.manageEnterpriseGroups=c;this.privilegeObj.portal.admin.viewItems=c;this.privilegeObj.portal.admin.updateItems=c;this.privilegeObj.portal.admin.deleteItems=c;this.privilegeObj.portal.admin.reassignItems=c;this.privilegeObj.portal.admin.manageLicenses=c;this.privilegeObj.portal.admin.shareToGroup=c;this.privilegeObj.portal.admin.shareToOrg=c;this.privilegeObj.portal.admin.shareToPublic=c;this.privilegeObj.portal.admin.createUpdateCapableGroup=c;this.privilegeObj.portal.admin.updateItemCategorySchema=
c;this.privilegeObj.portal.admin.manageCollaborations=c;this.privilegeObj.portal.admin.manageSecurity=c;this.privilegeObj.portal.admin.manageWebsite=c;this.privilegeObj.portal.admin.manageRoles=c;this.privilegeObj.portal.admin.manageServers=c;this.privilegeObj.portal.admin.manageUtilityServices=c;this.privilegeObj.portal.admin.manageCredits=c;this.privilegeObj.portal.publisher.publishFeatures=c;this.privilegeObj.portal.publisher.publishTiles=c;this.privilegeObj.portal.publisher.publishScenes=c;this.privilegeObj.portal.publisher.publishServerServices=
c;this.privilegeObj.portal.publisher.publishServerGPServices=c;this.privilegeObj.portal.user.createGroup=c;this.privilegeObj.portal.user.joinGroup=c;this.privilegeObj.portal.user.joinNonOrgGroup=c;this.privilegeObj.portal.user.createItem=c;this.privilegeObj.portal.user.shareToGroup=c;this.privilegeObj.portal.user.shareToOrg=c;this.privilegeObj.portal.user.shareToPublic=c;this.privilegeObj.portal.user.shareGroupToOrg=c;this.privilegeObj.portal.user.shareGroupToPublic=c;this.privilegeObj.portal.user.viewOrgUsers=
c;this.privilegeObj.portal.user.viewOrgItems=c;this.privilegeObj.portal.user.viewOrgGroups=c;this.privilegeObj.portal.user.viewTracks=c;this.privilegeObj.features.user.edit=c;this.privilegeObj.opendata.user.openDataAdmin=c;this.privilegeObj.opendata.user.designateGroup=c;this.privilegeObj.premium.user.geocode=c;this.privilegeObj.premium.user.networkanalysis=c;this.privilegeObj.premium.user.spatialanalysis=c;this.privilegeObj.premium.user.geoenrichment=c;this.privilegeObj.premium.user.demographics=
c;this.privilegeObj.premium.user.featurereport=c;this.privilegeObj.premium.publisher.geoanalytics=c;this.privilegeObj.premium.publisher.rasteranalysis=c;this.privilegeObj.marketplace.admin.purchase=c;this.privilegeObj.marketplace.admin.manage=c;this.privilegeObj.marketplace.admin.startTrial=c;this.privilegeObj.premium.publisher.createNotebooks=c;this.privilegeObj.premium.publisher.scheduleNotebooks=c;this.privilegeObj.premium.publisher.publishNotebooks=c;this.privilegeObj.premium.publisher.createAdvancedNotebooks=
c};f.prototype._buildPrivilegesArray=function(){var c=[];!0===this.privilegeObj.portal.admin.inviteUsers&&c.push("portal:admin:inviteUsers");!0===this.privilegeObj.portal.admin.disableUsers&&c.push("portal:admin:disableUsers");!0===this.privilegeObj.portal.admin.viewUsers&&c.push("portal:admin:viewUsers");!0===this.privilegeObj.portal.admin.updateUsers&&c.push("portal:admin:updateUsers");!0===this.privilegeObj.portal.admin.deleteUsers&&c.push("portal:admin:deleteUsers");!0===this.privilegeObj.portal.admin.changeUserRoles&&
c.push("portal:admin:changeUserRoles");!0===this.privilegeObj.portal.admin.viewGroups&&c.push("portal:admin:viewGroups");!0===this.privilegeObj.portal.admin.updateGroups&&c.push("portal:admin:updateGroups");!0===this.privilegeObj.portal.admin.deleteGroups&&c.push("portal:admin:deleteGroups");!0===this.privilegeObj.portal.admin.reassignGroups&&c.push("portal:admin:reassignGroups");!0===this.privilegeObj.portal.admin.assignToGroups&&c.push("portal:admin:assignToGroups");!0===this.privilegeObj.portal.admin.manageEnterpriseGroups&&
c.push("portal:admin:manageEnterpriseGroups");!0===this.privilegeObj.portal.admin.viewItems&&c.push("portal:admin:viewItems");!0===this.privilegeObj.portal.admin.updateItems&&c.push("portal:admin:updateItems");!0===this.privilegeObj.portal.admin.deleteItems&&c.push("portal:admin:deleteItems");!0===this.privilegeObj.portal.admin.reassignItems&&c.push("portal:admin:reassignItems");!0===this.privilegeObj.portal.admin.manageLicenses&&c.push("portal:admin:manageLicenses");!0===this.privilegeObj.portal.admin.shareToGroup&&
c.push("portal:admin:shareToGroup");!0===this.privilegeObj.portal.admin.shareToOrg&&c.push("portal:admin:shareToOrg");!0===this.privilegeObj.portal.admin.shareToPublic&&c.push("portal:admin:shareToPublic");!0===this.privilegeObj.portal.admin.createUpdateCapableGroup&&c.push("portal:admin:createUpdateCapableGroup");!0===this.privilegeObj.portal.admin.updateItemCategorySchema&&c.push("portal:admin:updateItemCategorySchema");!0===this.privilegeObj.portal.admin.manageCollaborations&&c.push("portal:admin:manageCollaborations");
!0===this.privilegeObj.portal.admin.manageSecurity&&c.push("portal:admin:manageSecurity");!0===this.privilegeObj.portal.admin.manageWebsite&&c.push("portal:admin:manageWebsite");!0===this.privilegeObj.portal.admin.manageRoles&&c.push("portal:admin:manageRoles");!0===this.privilegeObj.portal.admin.manageServers&&c.push("portal:admin:manageServers");!0===this.privilegeObj.portal.admin.manageUtilityServices&&c.push("portal:admin:manageUtilityServices");!0===this.privilegeObj.portal.admin.manageCredits&&
c.push("portal:admin:manageCredits");!0===this.privilegeObj.portal.publisher.publishFeatures&&c.push("portal:publisher:publishFeatures");!0===this.privilegeObj.portal.publisher.publishTiles&&c.push("portal:publisher:publishTiles");!0===this.privilegeObj.portal.publisher.publishScenes&&c.push("portal:publisher:publishScenes");!0===this.privilegeObj.portal.publisher.publishTiledImagery&&c.push("portal:publisher:publishTiledImagery");!0===this.privilegeObj.portal.publisher.publishDynamicImagery&&c.push("portal:publisher:publishDynamicImagery");
!0===this.privilegeObj.portal.publisher.publishServerServices&&c.push("portal:publisher:publishServerServices");!0===this.privilegeObj.portal.publisher.publishServerGPServices&&c.push("portal:publisher:publishServerGPServices");!0===this.privilegeObj.portal.publisher.bulkPublishFromDataStores&&c.push("portal:publisher:bulkPublishFromDataStores");!0===this.privilegeObj.portal.publisher.enumerateDataStores&&c.push("portal:publisher:enumerateDataStores");!0===this.privilegeObj.portal.publisher.registerDataStores&&
c.push("portal:publisher:registerDataStores");!0===this.privilegeObj.portal.user.createGroup&&c.push("portal:user:createGroup");!0===this.privilegeObj.portal.user.joinGroup&&c.push("portal:user:joinGroup");!0===this.privilegeObj.portal.user.joinNonOrgGroup&&c.push("portal:user:joinNonOrgGroup");!0===this.privilegeObj.portal.user.createItem&&c.push("portal:user:createItem");!0===this.privilegeObj.portal.user.shareToGroup&&c.push("portal:user:shareToGroup");!0===this.privilegeObj.portal.user.shareToOrg&&
c.push("portal:user:shareToOrg");!0===this.privilegeObj.portal.user.shareToPublic&&c.push("portal:user:shareToPublic");!0===this.privilegeObj.portal.user.shareGroupToOrg&&c.push("portal:user:shareGroupToOrg");!0===this.privilegeObj.portal.user.shareGroupToPublic&&c.push("portal:user:shareGroupToPublic");!0===this.privilegeObj.portal.user.viewOrgUsers&&c.push("portal:user:viewOrgUsers");!0===this.privilegeObj.portal.user.viewOrgItems&&c.push("portal:user:viewOrgItems");!0===this.privilegeObj.portal.user.viewOrgGroups&&
c.push("portal:user:viewOrgGroups");!0===this.privilegeObj.portal.user.viewTracks&&c.push("portal:user:viewTracks");!0===this.privilegeObj.features.user.edit&&c.push("features:user:edit");!0===this.privilegeObj.features.user.fullEdit&&c.push("features:user:fullEdit");!0===this.privilegeObj.features.user.manageVersions&&c.push("features:user:manageVersions");!0===this.privilegeObj.opendata.user.openDataAdmin&&c.push("opendata:user:openDataAdmin");!0===this.privilegeObj.opendata.user.designateGroup&&
c.push("opendata:user:designateGroup");!0===this.privilegeObj.premium.user.geocode&&c.push("premium:user:geocode");!0===this.privilegeObj.premium.user.networkanalysis&&c.push("premium:user:networkanalysis");!0===this.privilegeObj.premium.user.spatialanalysis&&c.push("premium:user:spatialanalysis");!0===this.privilegeObj.premium.user.geoenrichment&&c.push("premium:user:geoenrichment");!0===this.privilegeObj.premium.user.demographics&&c.push("premium:user:demographics");!0===this.privilegeObj.premium.user.featurereport&&
c.push("premium:user:featurereport");!0===this.privilegeObj.premium.publisher.geoanalytics&&c.push("premium:publisher:geoanalytics");!0===this.privilegeObj.premium.publisher.rasteranalysis&&c.push("premium:publisher:rasteranalysis");!0===this.privilegeObj.marketplace.admin.purchase&&c.push("marketplace:admin:purchase");!0===this.privilegeObj.marketplace.admin.manage&&c.push("marketplace:admin:manage");!0===this.privilegeObj.marketplace.admin.startTrial&&c.push("marketplace:admin:startTrial");!0===
this.privilegeObj.premium.publisher.createNotebooks&&c.push("premium:publisher:createNotebooks");!0===this.privilegeObj.premium.publisher.scheduleNotebooks&&c.push("premium:publisher:scheduleNotebooks");!0===this.privilegeObj.premium.publisher.publishNotebooks&&c.push("premium:publisher:publishNotebooks");!0===this.privilegeObj.premium.publisher.createAdvancedNotebooks&&c.push("premium:publisher:createAdvancedNotebooks");return c};return f=r.__decorate([g.default(e.default)],f)}()})},"arcgisonline/sharing/dijit/_LevelAwareMixin":function(){define(["require",
"exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.LevelAwareInfo=void 0;y.LevelAwareInfo={SYSTEM_ROLES:{VIEWER:"iAAAAAAAAAAAAAAA",DATA_EDITOR:"iBBBBBBBBBBBBBBB"},LICENSE_LEVELS:{ONE:"1",ONE_PLUS_EDIT:"11",TWO:"2"}};b=function(){return function(){this.SYSTEM_ROLES=y.LevelAwareInfo.SYSTEM_ROLES;this.LICENSE_LEVELS=y.LevelAwareInfo.LICENSE_LEVELS}}();y.default=b})},"arcgisonline/agoNav":function(){define("esri-global-nav/esri-global-nav dojo/promise/all dojo/debounce dojo/string dojo/cookie dojo/topic dojo/query dojo/io-query dojo/_base/lang dojo/Deferred dojo/on dojo/dom-construct ./sharing/geow/Account ./sharing/geow/Geow ./sharing/dijit/Webworker/_AppLauncher ./sharing/dijit/InfoBanner ./sharing/util ./pages/utils/notebook ./pages/utils/dom esri/arcgis/Portal esri/request esri/IdentityManager ./esriGeowConfig ./pages/utils/notifications ./pages/portal/PortalItem ./pages/portal/PortalUser ./pages/portal/LicenseInfo ./pages/organization/widgets/GroupIcon ./pages/utils/icons arcgis-components/wrappers/InfoBanner dojo/i18n!arcgisonline/nls/arcgisonline".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v,z,C,E,G,H,K,I){return{declaredClass:"arcgisonline.agoNav",init:function(J){this.legacy=J.legacy;this.getOrgSettings().then(function(Q){if(Q.anonymousAccessNotice&&Q.anonymousAccessNotice.enabled&&!k("ago_conditions_accepted"))return window.location.href=q.baseUrl+"pages/Account/accept_conditions.html#client_id\x3darcgisonline\x26redirect_url\x3d"+window.location.href;Q.informationalBanner&&Q.informationalBanner.enabled&&this.createClassificationBanner(Q.informationalBanner)}.bind(this));
this.relativePath=J.relativePath||"./";q.self=J.config;this.customNavStructure=J.customNavStructure;this.isOrgUser=q.userInfo&&q.userInfo.orgId;this.userIsSignedIn=!(!q.userInfo||!q.userInfo.email&&!q.userInfo.username);this.createPortalInstance().then(function(){var Q=h.queryToObject(window.location.search.slice(1));(-1<window.location.pathname.indexOf("user.html")||-1<window.location.pathname.indexOf("userprofile.html"))&&Q&&Q.hideNav?(document.body.classList.add("is-embedded"),Q=document.querySelector(".esri-header-barrier"),
Q.parentNode.removeChild(Q)):(this.navLinks=this.buildNavLinks(this,q),this.createGlobalNav(q.userInfo,J.customNavStructure));esri&&!esri.i18nBundle&&(esri.i18nBundle=I)}.bind(this));e.subscribe("account-menu/close",this.closeAccountMenu.bind(this));e.subscribe("portal-helpBase/update",this.updateHelpUrl.bind(this));e.subscribe("top-nav/update",this.updateMenu.bind(this))},closeAccountMenu:function(){this.updateComponent("header:menu:close",document.getElementById("esri-header-account-menu"))},updateHelpUrl:function(J){this.updateHeaderComponent({config:J})},
updateMenu:function(J){var Q=q.self.portalProperties||{};Q.topNav=J;q.self.portalProperties=Q;this.navLinks=this.buildNavLinks(this,q);J=this.getNavStructure(q.userInfo,this.customNavStructure);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-desktop"),J.header.menus);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-mobile"),J.header.menus)},createClassificationBanner:function(J){var Q=document.createElement("div"),V=document.createElement("div");
document.body.insertBefore(Q,document.body.childNodes[0]);document.body.appendChild(V);new K.InfoBanner({bannerConfig:J,topContainer:Q,bottomContainer:V});setTimeout(function(){var O=document.getElementById("esri-header-menus-content-mobile");O&&(O.style.height="calc(var(--esri-vh) - "+(56+Q.clientHeight)+"px)")},1E3)},createPortalInstance:function(){var J=new l;(this.portal=q&&q.portal)?J.resolve(!0):d.getSelf(function(Q){this.portal=new F.Portal({url:q.restBaseUrl.replace("http://","https://"),
self:m.clone(Q)});f.once(this.portal,"load",function(V){this.portal.portalUser=this.portal.getPortalUser();E.isOrgUser=this.isOrgUser;E.portal=this.portal;E.getLicenseInfo().then(function(O){q.userInfo&&(q.userInfo=m.mixin(q.userInfo,E));this.portal.portalUser?D.checkAppAccess(this.portal.portalUrl,"arcgisonline").always(function(S){if(S=!(!S||!S.viewOnly))this.portal.portalUser=new C(m.mixin(this.portal.user,{cookie:this.getUserCookie(),credential:this.portal.portalUser.credential,portal:this.portal,
viewOnly:S}));J.resolve(!0)}.bind(this)):J.resolve(!0)}.bind(this))}.bind(this))}.bind(this));return J},createGlobalNav:function(J,Q){Q=this.getNavStructure(J,Q);b.createHeader({targetElm:".esri-header-barrier",menuData:Q});this.setupInlineSearch();this.userIsSignedIn?(this.setupAccountSwitcherLink(),this.setupSignOutLink(),this.setupNotifications(J),this.isOrgUser&&(q.self.isPortal||q.self.subscriptionInfo&&"active"===q.self.subscriptionInfo.state)&&(q.self.isPortal||(this.defaultNavStructure.header.apps=
this._getAppsLoadingJson(),this.updateAppLauncherComponent()),this.createAppLauncher())):this.setupSignInLink();this.addLegacyClasses()},addLegacyClasses:function(){if(this.legacy){var J=window.location.pathname.toLowerCase();if(-1!==J.indexOf("index.html")||-1===J.indexOf(".html"))g(".siteHeader").addClass("top-nav"),g(".-desktop .esri-header-menus-link,.esri-header-brand-text,.esri-header-menus-toggle,.esri-header-notifications-control,.esri-header-inlineSearch-control,.esri-header-account-control,.esri-header-apps-control").addClass("top-nav-link"),
g(".top-nav-link.-is-active").removeClass("-is-active").addClass("is-active")}},getNavStructure:function(J,Q){J=(this.userCookie=this.userIsSignedIn&&this.getUserCookie())?this.getSignedInNavStructure(J,this.userCookie):this.getSignedOutNavStructure();return m.mixin(q.self.isPortal?this.modifyStructureForPortal(J):J,Q||{})},getSignedOutNavStructure:function(){var J=this.showProductLinks()?["ArcGIS","pricing","map","scene","help"]:["home_link","gallery","map","scene","groups"];this.defaultNavStructure.header.menus=
[this.filterAndCreateLinks(J,I.siteHeader)];this.defaultNavStructure.header.brand.href=this.relativePath+(q.self.isPortal?"index.html":"../features/features.html");return this.defaultNavStructure},getSignedInNavStructure:function(J,Q){J={name:J.fullName,id:J.username,group:"",image:this.getUserProfileImage(J.username,J.thumbnail,Q.token)};Q=this.isPublicAccount()?"ArcGIS overview pricing map scene groups myContent".split(" "):"home_link gallery map scene notebook groups myContent myAccount".split(" ");
this.defaultNavStructure.header.account.user=J;this.defaultNavStructure.header.menus=[this.filterAndCreateLinks(Q,I.siteHeader)];this.defaultNavStructure.header.account.menus=this.filterAndCreateLinks("myProfile mySettings myEsri training trialDownload esriCommunity arcgisBlog help".split(" "),I.siteHeader);this.defaultNavStructure.header.brand.href=this.relativePath+(q.self.isPortal?"index.html":"../features/features.html");this.userIsSignedIn&&(this.defaultNavStructure.header.notifications=this._getDefaultNotifications());
return this.defaultNavStructure},modifyStructureForPortal:function(J){J.header.search.dialog.queryLabel=I.siteHeader.searchAgoEnterprise;return J},getFooterLinks:function(){this.i18n=m.mixin(I.siteFooter,I.common,I.supportPage.helpLabel);var J=q.footerLinks.reduce(function(Q,V){var O=V.title.indexOf("${");O=-1<O?this._evalString(V.title,O):V.title;return"ArcGIS Marketplace"===V.title?q.self&&this.userIsSignedIn?Q.concat({label:O,href:q.marketplaceUrl.replace("http://","https://")}):Q:"contactUs"===
V.type?Q.concat({label:O,href:this._constructContactUsUrl(V)}):"reportAbuse"===V.type?Q.concat({label:O,href:this._constructReportAbuseUrl(V)}):V.url?Q.concat({label:O,href:V.url}):Q}.bind(this),[]);q.self&&q.self.portalProperties&&q.self.portalProperties.links&&q.self.portalProperties.links.contactUs&&q.self.portalProperties.links.contactUs.visible&&J.push({label:this.i18n.customContactUs,href:q.self.portalProperties.links.contactUs.url});return J},updateComponent:function(J,Q,V){var O=document.createEvent("CustomEvent");
O.initCustomEvent(J,!0,!0,V);Q.dispatchEvent(O)},updateAppLauncherComponent:function(J){this.updateComponent("header:update:apps",document.querySelector(".esri-header-apps"),this._appsJson(J))},updateHeaderComponent:function(J){q.self=J.config;this.navLinks=this.buildNavLinks(this,q);J=this.getNavStructure(q.userInfo,J.customNavStructure);this.updateComponent("header:update:account",document.querySelector(".esri-header-client").lastChild,J.header.account)},updateNotificationsComponent:function(J){this.defaultNavStructure.header.notifications.messages=
J;this.updateComponent("header:update:notifications",document.querySelector(".esri-header-notifications"),this._getDefaultNotifications(J));0===J.length&&this.updateComponent("header:menu:close",document.querySelector(".esri-header-notifications"))},updateSearchComponent:function(J,Q){this.updateComponent("header:search:update:suggestions",document.querySelector(".esri-header-inlineSearch"),this._searchJson(J,Q))},createAppLauncher:function(){this.portal.token=this.userCookie.token;this.appLauncher=
new n(this.portal);this.appLauncher.getApps({noStrings:!0}).then(function(J){if(J.primary.length||J.secondary.length)this.fixRelativeAppUrls(J.primary),this.fixRelativeAppUrls(J.secondary),this.updateAppLauncherComponent(J),document.querySelector(".esri-header-barrier").addEventListener("header:apps:reorder",function(Q){this.appLauncher.setApps(JSON.stringify(Q.detail.icons),!0)}.bind(this)),e.subscribe("appLauncher/app/updated",this._restartAppLauncherApp.bind(this)),e.subscribe("appLauncher/app/deleted",
this._restartAppLauncherApp.bind(this)),e.subscribe("appLauncher/restart",this._restartAppLauncherApp.bind(this,!0)),this.addLegacyClasses()}.bind(this))},fixRelativeAppUrls:function(J){if(-1!==location.pathname.indexOf("/home/notebook/")){var Q=window.location.protocol+"//"+window.location.host+x.getHomeAppContext()+"/";(J||[]).forEach(function(V){V.url=(V.url||"").replace("../",Q)})}},_restartAppLauncherApp:function(J){this.appLauncher&&this.appLauncher.refreshApps(J).then(function(Q){this.updateAppLauncherComponent(Q)}.bind(this))},
_appsJson:function(J){return m.mixin({label:I.appSwitcher.appLauncher,disableDragDrop:!1,loading:!J,text:{title:I.appSwitcher.appLauncher,confirm:I.appSwitcher.gotIt,dragAppsHere:I.appSwitcher.dragAppsHere,intro:I.appSwitcher.dragAndDropIntroText,removed:I.appSwitcher.noLongerAvailable,removedMessage:I.appSwitcher.removedApp,showMore:I.appSwitcher.showMore}},J)},_getAppsLoadingJson:function(J){return{label:I.appSwitcher.appLauncher,disableDragDrop:!1,loading:J}},_searchJson:function(J,Q){return Q&&
Q.results.length?{minIconWidth:"44",suggestions:[this._generateSuggestionsSection({searchTerm:J,category:"item",data:Q.results})]}:{suggestions:[]}},_disabledSearchJson:function(){return{minIconWidth:"44",disabled:!0,suggestions:[{hideHR:!0,links:[{text:I.search.error.wildCardSearchError,secondary:null,href:null,htmlIcon:'\x3cspan class\x3d"esri-header-inlineSearch-suggestion-error-icon"\x3e'+H["exclamation-mark-circle"]["16"]+"\x3c/span\x3e"}]}]}},_generateSuggestionsSection:function(J){return{hideHR:!0,
links:J.data.map(this._generateSuggestionLink.bind(this,J.category))}},_generateSuggestionLink:function(J,Q,V){return m.mixin({text:Q.title,secondary:this._getSecondaryOwnerText(J,Q),href:this.relativePath+(J+".html?id\x3d")+Q.id,iconSize:"group"===J?"28":"22"},Q.icon||"group"!==J?{icon:Q.icon}:{htmlIcon:this._getGroupIcon(Q)})},_getGroupIcon:function(J){return(new G({portal:this.portal,group:J,size:"28",letterSize:"1",tooltipClass:"",cssClasses:"org-member-card__group-title esri-header-inlineSearch-suggestion-icon"})).domNode.outerHTML},
_getSecondaryOwnerText:function(J,Q){return"item"===J?a.substitute(I.siteHeader.itemTypeBy,{itemType:Q.type,owner:Q.owner}):a.substitute(I.siteHeader.groupOwner,{owner:Q.owner})},_generateSearchLink:function(J){return this._constructSecureBaseUrl("search.html?start\x3d1\x26sortOrder\x3dtrue\x26sortField\x3drelevance\x26"+J)},_constructSearchQ:function(J,Q){return J+(Q&&q.userInfo&&q.userInfo.orgId?" orgid:"+q.userInfo.orgId:"")},_getSuggestFilters:function(){return(q.self.id?'accountid:"'+q.self.id+
'"':"")+(q.viewQueries.none||"")},fetchSuggestionResults:function(J){J=J.substring(0,409).replace(/(\/)/g,"\\/").replace(/(\?)/g,"\\?");return w({url:q.restBaseUrl.replace("http://","https://")+"search/suggest",content:{suggest:J,filters:this._getSuggestFilters(),searchFields:"title",f:"json"},handleAs:"json",callbackParamName:"callback"})},fetchItemSearchResults:function(J){return w({url:q.restBaseUrl.replace("http://","https://")+"search",content:{q:this._constructSearchQ(J,!0),start:1,num:3,f:"json"},
handleAs:"json",callbackParamName:"callback"})},fetchGroupSearchResults:function(J){return w({url:q.restBaseUrl.replace("http://","https://")+"/community/groups",content:{q:this._constructSearchQ(J,!1),start:1,num:3,f:"json"},handleAs:"json",callbackParamName:"callback"})},mixinItemIcon:function(J){this.portal.portalUser&&!this.portal.portalUser.userRole&&(this.portal.portalUser.userRole=q.userRole);var Q=new z(dojo.mixin(J,{portal:this.portal}));return m.mixin(J,{type:Q.displayName,icon:q.baseUrl+
Q.svgIconUrl32})},mixinGroupIcon:function(J){return m.mixin(J,{icon:J.thumbnail?this._constructRestUrlWithToken("community/groups/"+J.id+"/info/"+J.thumbnail):null})},_constructRestUrlWithToken:function(J){return this.portal.portalUrl+J+(this.userCookie?"?token\x3d"+this.userCookie.token:"")},_constructSecureBaseUrl:function(J){return q.baseUrl.replace("http://","https://")+J},buildNavLinks:function(J,Q){var V=window.location.pathname.toLowerCase(),O=q.self&&q.self.portalProperties&&q.self.portalProperties.topNav||
{},S=O.gallery,L=O.map,Y=O.scene;O=O.groups;var ca=this.isOrgUser&&q.self&&q.userInfo.orgId===q.self.id,U=q.notebookLandingEnabled?"notebookhome.html":"notebook.html";return{myProfile:{href:this.relativePath+"user.html"},mySettings:{href:this.relativePath+"user.html#settings"},pricing:{href:this.relativePath+"../features/plans/pricing.html"},overview:{href:this.relativePath+"../features/features.html"},ArcGIS:{href:this.relativePath+(J.isPublicAccount()?"index.html":"../features/features.html")},
groups:{show:!O||"all"===O||"members"===O&&ca,href:this.relativePath+"groups.html",active:-1<V.indexOf("groups.html")},myContent:{href:this.relativePath+"content.html",active:-1<V.indexOf("content.html")},map:{show:E.isLicensed("arcgisWebApps")&&(!L||"all"===L||"members"===L&&ca||"mapCreators"===L&&ca&&q.userRole.canCreateItem()),href:this.relativePath+"webmap/viewer.html?useExisting\x3d1"},help:{href:J._getHelpUrl.bind(J),openInNewTab:!0},gallery:{show:"noOne"!==S&&(!S||"all"===S||"members"===S&&
ca)&&q.self.id,href:this.relativePath+"gallery.html",active:-1<V.indexOf("gallery.html")},home_link:{show:!J.isPublicAccount(),href:this.relativePath+"index.html",active:-1<V.indexOf("index.html")||0>V.indexOf(".html")},scene:{show:Q.sceneViewerEnabled&&E.isLicensed("arcgisWebApps")&&(!Y||"all"===Y||"members"===Y&&ca||"sceneCreators"===Y&&ca&&q.userRole.canCreateItem()),href:this.relativePath+"webscene/viewer.html"},notebook:{show:A.notebookServerConfigured()&&q.userRole&&q.userRole.canCreateNotebooks(),
href:this.relativePath+"notebook/"+U,openInNewTab:!q.notebookLandingEnabled},myAccount:{show:J.canViewOrgUsers()&&J.orgPageRestrictionsDoNotApply(),href:this.relativePath+"organization.html",active:-1<V.indexOf("organization.html")},marketplace:{show:!J.isPublicAccount(),href:J._getMarketplaceUrl.bind(J)},features:{show:J.isPublicAccount()&&!q.self.isPortal,href:this.relativePath+"../features/features.html"},esriCommunity:{show:J.showEsriLinks(),href:J._getEsriCommunityUrl.bind(J),openInNewTab:!0},
myEsri:{show:J.showEsriLinks(),href:J._getMyEsriUrl.bind(J),openInNewTab:!0},arcgisBlog:{show:J.showEsriLinks(),href:"https://www.esri.com/arcgis-blog/arcgis-online/",openInNewTab:!0},training:{show:J.showEsriLinks(),href:J._getEsriTrainingUrl.bind(J),openInNewTab:!0},trialDownload:{show:J.subscriptionIsTrial(),href:J._getTrialDownloadUrl.bind(J),openInNewTab:!0}}},GlobalNavLink:{init:function(J,Q){this.label=J;this.href=Q.href?"function"===typeof Q.href?Q.href():Q.href:"#";Q.data&&(this.data=Q.data);
Q.active&&(this.active=Q.active);Q.openInNewTab&&(this.newContext=Q.openInNewTab);return this}},filterAndCreateLinks:function(J,Q){linkArr=[];J.forEach(function(V){var O=this.navLinks[V];!O||"show"in O&&!O.show||linkArr.push(this.createGlobalNavLink(Q[V]||V,O))},this);return linkArr},createGlobalNavLink:function(J,Q){return Object.create(this.GlobalNavLink).init(J,Q)},getUserProfileImage:function(J,Q,V){return Q?q.restBaseUrl.replace("http://","https://")+"community/users/"+J+"/info/"+Q+"?token\x3d"+
V:this.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")},getUserCookie:function(){return q.userInfo||null},getOrgSettings:function(){return x.request({url:q.restBaseUrl+"portals/self/settings",content:{f:"json"}})},setupSignInLink:function(){if(this.hideSignInLink())return g(".esri-header-account-control--signin")[0].classList.add("hide");g(".esri-header-account-control--signin").on("click",function(J){-1<window.location.href.indexOf("item.html")?window.location.href=q.baseUrl+
"signin.html?useLandingPage\x3dfalse\x26returnUrl\x3d"+window.location.href:window.location.href=q.baseUrl+"signin.html?useLandingPage\x3dtrue"})},setupSignOutAndAccountSwitcherLinks:function(){q.showAccountSwitcher&&dojo.addClass(g(".esri-header-account-signin-control.-switch"),"hide");g(".esri-header-account-control-logout").on("click",function(J){this._selectLogOut(J)}.bind(this));g(".esri-header-account-control.-switch").on("click",function(J){this._openSwitchAccounts(J)}.bind(this))},setupSignOutLink:function(){var J=
k("esri_auth");if((J=J?JSON.parse(J):{})&&"auth_tier"in J&&"web"===J.auth_tier.toLowerCase())return g(".esri-header-account-signin-control.-logout")[0].classList.add("hide");g(".esri-header-account-signin-control.-logout").on("click",function(Q){this._selectLogOut(Q)}.bind(this))},setupAccountSwitcherLink:function(){if("showAccountSwitcher"in q&&!q.showAccountSwitcher)return g(".esri-header-account-signin-control.-switch")[0].classList.add("hide");g(".esri-header-account-signin-control.-switch").on("click",
function(J){this._openSwitchAccounts(J)}.bind(this))},setupInlineSearch:function(){document.querySelector(".esri-header-barrier").addEventListener("header::search:typing",r(function(J){-1<J.detail.indexOf("*")?this.updateComponent("header:search:update:suggestions",document.querySelector(".esri-header-inlineSearch"),this._disabledSearchJson()):2<=J.detail.length&&this.fetchSuggestionResults(J.detail).then(m.hitch(this,function(Q){Q.results=Q.results.map(this.mixinItemIcon.bind(this));this.updateSearchComponent(J.detail,
Q)}))}.bind(this),280))},setupNotifications:function(J){v.fetchNotifications(J,this.portal).then(this.updateNotificationsComponent.bind(this));document.addEventListener("header:click:notifications:dismiss",function(Q){v.deleteNotifications(J,Q.detail).then(function(V){var O=V.filter(function(S){return S.success}).map(function(S){return S.notificationId});V=(this.defaultNavStructure.header.notifications.messages||[]).filter(function(S){return 0>O.indexOf(S.id)});this.updateNotificationsComponent(V)}.bind(this))}.bind(this))},
_getDefaultNotifications:function(J){return{label:I.notifications.label,dismissAllLabel:I.notifications.dismissAllLabel,dismissLabel:I.notifications.dismissLabel,emptyMessage:{image:{path:["M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"],viewBox:"0 0 32 32"},text:I.notifications.noNotifications},messages:J||[]}},_evalString:function(J,Q){var V=J.indexOf("}",
Q),O=J.substring(Q+2,V);return J.substring(0,Q)+eval("this."+O)+J.substring(V+1,J.length)},_constructContactUsUrl:function(J){J="mailto:"+J.email;J+="?subject\x3d"+a.substitute({appTitle:q.portalName||"ArcGIS.com"},"A comment about ${appTitle}");return J+="\x26body\x3d"+a.substitute("I have the following comment about the ${appTitle} Web site. %0AReferring page: ${referringPage} %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)",
{appTitle:q.portalName||"ArcGIS.com",referringPage:window.encodeURIComponent(location.href)})},_constructReportAbuseUrl:function(J){J="mailto:"+J.email+"?subject\x3dConcerns about an item";return J+="\x26body\x3d"+a.substitute("I have concerns about the following. %0AReferring page: ${referringPage} %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)",
{referringPage:window.encodeURIComponent(location.href)})},_selectLogOut:function(J){J.preventDefault();q.self.isPortal?this._standardLogOut():this._agolLogOut()},_agolLogOut:function(){k("esri_webmap","",{expires:-1,path:"/"});var J=(q.isDebug?q.baseUrl:q.baseUrl.replace("http://","https://"))+"pages/Account/manage_accounts.html#client_id\x3darcgisonline\x26signout\x3dtrue";window.location.href=J},_standardLogOut:function(){k("esri_webmap","",{expires:-1,path:"/"});var J=arcgisonline.sharing.util.getHttpUrl()+
"index.html";"private"===q.self.access&&(J=arcgisonline.sharing.util.getSecureUrl()+q.signin);"public"===q.self.access&&(J=(q.self.allSSL||this.usePortalSSL()?arcgisonline.sharing.util.getSecureUrl():arcgisonline.sharing.util.getHttpUrl())+"index.html");u.signout(J)},_openSwitchAccounts:function(){window.open(q.baseUrl+"pages/Account/manage_accounts.html#client_id\x3darcgisonline","_blank").focus()},relativeToExplicitUrl:function(J){q.cdnServerUrl=dojo.baseUrl.substring(0,dojo.baseUrl.indexOf("/js/"));
return q.cdnServerUrl.lastIndexOf("/")===q.cdnServerUrl.length-1?q.cdnServerUrl+J:q.cdnServerUrl+"/"+J},_getHelpUrl:function(){return q.self.isPortal?this._getPortalHelpUrl():q.self&&q.self.helpBase||"support.html"},_getPortalHelpUrl:function(){if(-1<q.self.helpBase.indexOf("enterprise.arcgis.com"))return q.self.helpBase+"portal/";var J=q.self.helpBase;return q.self.allSSL||"https:"===location.protocol||this.usePortalSSL()||"7443"===location.port?arcgisonline.sharing.util.getSecureUrl(location.protocol+
"//"+location.host)+J:J},_getEsriTrainingUrl:function(){return this.generateEsriLoginHandlerUrl(window.location.protocol+"//www.esri.com/training/arcgis-online-training")},_getMyEsriUrl:function(){return this.generateEsriLoginHandlerUrl(q.myEsriLink)},_getEsriCommunityUrl:function(){return this.generateEsriLoginHandlerUrl(q.esriCommunityLink)},_getMarketplaceUrl:function(){var J=this.getDevEnviroment();return location.protocol+"//marketplace"+(J?J+"ext":"")+".arcgis.com"},_getTrialDownloadUrl:function(){var J=
{"pt-br":1,"pt-pt":1,"zh-cn":1,"zh-hk":1,"zh-tw":1},Q=(q.userInfo&&q.userInfo.culture||q.self&&q.self.culture||dojoConfig.locale||"en").toLowerCase();J={nl:1}[Q]?"en":Q in J?Q:Q.split("-")[0].toLowerCase();return q.learnArcGIS+"/"+J+"/trial"},generateEsriLoginHandlerUrl:function(J){var Q=this.getDevEnviroment();Q="https://accounts"+(Q?"dev"===Q?"-dev":"-stg":"")+".esri.com/";var V="\x26authBaseUrl\x3d"+x.getSecureUrl(q.restBaseUrl.replace("/sharing/rest/",""));return Q+"LoginHandler/switchuser?username\x3d"+
(q.userInfo.username+"\x26redirect_uri\x3d"+J+V)},getDevEnviroment:function(){var J=q.self.portalHostname;return-1!==J.indexOf("dev")?"dev":-1!==J.indexOf("qa")?"qa":null},_getOriginOfUrl:function(J){var Q=window.location;J=J?J+":":Q.protocol;return J+"//"+Q.hostname+(Q.port?":"+Q.port:"")+"/"},hideSignInLink:function(){return q.self.isPortal&&"singletenant"===q.self.portalMode&&k("esri_auth_guest")&&"7443"!==location.port},showProductLinks:function(){return!q.self.id&&!q.self.access&&!q.self.isPortal},
isPublicAccount:function(){return!q.self.urlKey&&!q.self.isPortal&&!!q.userInfo},canViewOrgUsers:function(){return q.userRole&&q.userRole.canViewOrgUsers()},orgPageRestrictionsDoNotApply:function(){var J=q.userInfo;return q.restrictOrganizationPageToAdmin?!J.accountId||J.role&&"account_admin"===J.role&&!J.roleId:!0},showEsriLinks:function(){return!q.self.isPortal&&q.userInfo&&"both"===q.userInfo.userType},subscriptionIsTrial:function(){return!q.self.isPortal&&q.self.subscriptionInfo&&("Trial"===q.self.subscriptionInfo.type||
"Trial Press"===q.self.subscriptionInfo.type)},usePortalSSL:function(){return(!1===q.isMultiTenant||arcgisonline.sharing.util.isPortal())&&q.self&&q.self.portalHostname&&!q.self.portalHostname.match(/:7080\//)&&80!==q.self.httpPort&&443!==q.self.httpsPort&&"https:"===location.protocol},defaultNavStructure:{header:{theme:"web",brand:{label:"ArcGIS Online",href:"../features/features.html",brandText:"ArcGIS"},menus:[[{label:"Features",href:"../features/features.html"},{label:"Plans",href:"../features/plans/pricing.html"},
{label:"Map",href:this.relativePath+"webmap/viewer.html?useExisting\x3d1"},{label:"Scene",href:"webscene/viewer.html"},{label:"Help",href:"http://doc.arcgis.com/en/arcgis-online/"}]],search:{label:I.common.search,hide:"search.html"===location.pathname.split("/")[2],inline:!0,dialog:{prefix:"esri-header-search-dialog",action:q.baseUrl+"search.html",label:"ArcGIS Online",submitLabel:I.common.search,cancelLabel:I.common.cancel,queryLabel:I.siteHeader.searchAgo}},account:{label:I.siteHeader.yourProfile,
controls:{signin:I.siteHeader.signIn,signout:I.siteHeader.signOut,switch:I.siteHeader.switchAccounts},menus:[{label:"profile \x26 settings",href:this.relativePath+"user.html"},{label:"my esri",href:"#",data:{agoMethod:"goMyesri"}},{label:"training",href:"#",data:{agoMethod:"goTraining"}},{label:"community \x26 forums",href:"#",data:{agoMethod:"goEsriCommunity"}},{label:"help",href:"http://doc.arcgis.com/en/arcgis-online/"}]}}}}})},"dojo/debounce":function(){define([],function(){return function(b,
y){var r;return function(){r&&clearTimeout(r);var a=this,k=arguments;r=setTimeout(function(){b.apply(a,k)},y)}}})},"arcgisonline/sharing/dijit/Webworker/_AppLauncher":function(){define("arcgisonline/esriGeowConfig dojo/_base/declare dojo/on dojo/_base/lang dojo/Deferred dojo/promise/all dojo/json dojo/sniff esri/request arcgisonline/pages/portal/LicenseInfo arcgisonline/pages/components/ManageBlockedApps/blocked-apps-service require".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c){return y("arcgisonline.sharing.dijit.Webworker._AppLauncher",
null,{appIconPath:"/css/images/app-icons/",basePath:c.toUrl("arcgisonline/sharing/dijit"),_browserIsEdge:!1,constructor:function(d){this.inherited(arguments);this._portal=d;this._portalUser=this._portal.portalUser||this._portal.user;this._self=b.self||d;this.userToken=d.token;b.userInfo&&b.userInfo.isLicensed||this.fetchAndSetupLicenseInfo();this.imgDir=this.basePath+this.appIconPath;this.appSwitcherInConfig=b.appSwitcherConfigItemQuery?!0:null;this.__displayIntro=!1},getApps:function(d){d&&d.noStrings||
!dojo.i18n||!dojo.i18n.getLocalization("arcgisonline","arcgisonline")||(this.i18n=dojo.i18n.getLocalization("arcgisonline","arcgisonline").appSwitcher,this._clearText=dojo.i18n.getLocalization("arcgisonline","arcgisonline").configAGOLUtilServices.clear);return this.queryItems().then(a.hitch(this,function(u){this.appSwitcherConfig=u.results[0];return this.refreshApps()}))},refreshApps:function(d){return this._queryItemsAndInitApps(this.appSwitcherConfig,null,null,d).then(a.hitch(this,function(u){return(new k).resolve({provisionedListings:u.provisionedListings,
willQueryForItems:u.willQueryForItems})})).then(a.hitch(this,function(u){return this._init(u.provisionedListings,u.willQueryForItems)}))},setApps:function(d){if("string"===typeof d)try{d=JSON.parse(d)}catch(n){return(new k).resolve({success:!1})}if(this._appArraysAreValid(d.primaryApps,d.secondaryApps)){var u=d.revisions||{};return this._saveAppOrderToUserProperties(this.populateDataIdAttributes(d.primaryApps,u.targetUid,u.isNew&&"isNew",u.targetValue||!1),this.populateDataIdAttributes(d.secondaryApps))}return(new k).resolve({success:!1})},
_appArraysAreValid:function(d,u){return d&&u&&Array.isArray(d)&&Array.isArray(u)?d.length+u.length>=this._minNumberOfAppsToSave:!1},fetchAndSetupLicenseInfo:function(){var d=new k;l.isOrgUser=this._portalUser&&this._portalUser.orgId;l.portal=this._portal;l.portal.user=l.portal.user||this._portalUser;return l.getLicenseInfo().then(function(){this._portalUser&&(b.userInfo=a.mixin(this._portalUser,l));return d.resolve(!0)}.bind(this))},queryItems:function(d,u){return this.portalQueryItems(b.appSwitcherConfigItemQuery,
1)},_queryItemsAndInitApps:function(d,u,n,t){d.itemDataUrl=this.formatUrlWithToken(this._portal.portalUrl+"content/items/"+d.id+"/data");this._browserInUse=this._getBrowserInUse();this.__changedApp=u&&n?u:null;var x=!this._cookieForQueryingItemsExists(),A=new k;if(this._portalUser&&this._portalUser.orgId)return e({config:m({url:d.itemDataUrl,content:{f:"json"}}),marketplace:this._getMarketPlaceProvisionedListings(t),preferences:this._getUserProperties(),customOrgApps:this._getApprovedApps()}).then(a.hitch(this,
function(B){this.userProperties=B.preferences.properties||{};this.userApps=B.config.appSwitcher;this._self.isPortal||this.userApps.apps.unshift(this._getAgoApp());this.approvedApps=B.customOrgApps.approvedApps||[];this.userProperties.appLauncher||(x=!1,this.__displayIntro=!0);return A.resolve({provisionedListings:B.marketplace,willQueryForItems:x})}))},_filterBlockedApps:function(d){return d.filter(function(u){return!(this._blockedApps&&this._blockedApps.some(function(n){return u.itemId&&u.itemId===
n.itemid||u.title&&u.title===n.title}))}.bind(this))},_init:function(d,u,n,t){return this._getBlockedApps().then(function(){return this._getLicensedApps(d,u)}.bind(this)).then(a.hitch(this,function(x){this._appDictionary=x[1];var A=new k;if(this.userProperties.appLauncher&&this.userProperties.appLauncher.primary&&this.userProperties.appLauncher.secondary)return this._queryAppItemsForChanges(this.approvedApps,u).then(a.hitch(this,function(){this._newAppDictionary=a.clone(this._appDictionary);this.primaryApps=
this.userProperties.appLauncher.primary.reduce(this._populateAppIdentifiers.bind(this),[]);this.secondaryApps=this.userProperties.appLauncher.secondary.reduce(this._populateAppIdentifiers.bind(this),[]);this.primaryApps=this._filterBlockedApps(this.primaryApps);this.secondaryApps=this._filterBlockedApps(this.secondaryApps);for(var B in this._newAppDictionary)this._newAppDictionary[B].canAccess&&(this._newAppDictionary[B].isNew=!0,this._appDictionary[B]=this._newAppDictionary[B],this.primaryApps.push(this._newAppDictionary[B]));
this._minNumberOfAppsToSave=this.primaryApps.concat(this.secondaryApps).filter(function(F){return F.canAccess}).length;return A.resolve(this._getResponseObject(this))}));this.primaryApps=x[0].slice().sort(function(B,F){return B.label<F.label?-1:1});this.primaryApps=this._filterBlockedApps(this.primaryApps);this.secondaryApps=[];this._minNumberOfAppsToSave=this.primaryApps.filter(function(B){return B.canAccess}).length;return A.resolve(this._getResponseObject(this))}))},_getResponseObject:function(){return a.mixin(this.i18n?
{text:this.getAppLauncherStrings()}:{},{primary:this.primaryApps,secondary:this.secondaryApps,ieVersion:this._browserInUse,highContrast:h("highcontrast"),displayIntro:this.__displayIntro})},getAppLauncherStrings:function(d){return{clear:this._clearText,confirm:this.i18n.gotIt,intro:this.i18n.dragAndDropIntroText,dragAppsHere:this.i18n.dragAppsHere,removed:this.i18n.noLongerAvailable,removedMessage:this.i18n.removedApp,showMore:this.i18n.showMore}},_initFromLocalStorage:function(d){this.primaryApps=
d.primaryApps;this.secondaryApps=d.secondaryApps;this._initAppSwitcher();this._refreshAppSwitcherIcons()},_getBlockedApps:function(){return e({blockedApps:f.default.getBlockedApps(this._portal),blockedConfig:this._portal.queryItems(b.blockedAppsConfigItemQuery,!0)}).then(function(d){if(d.blockedConfig&&d.blockedConfig.results&&d.blockedConfig.results.length){var u=this.formatUrlWithToken(this._portal.portalUrl+"content/items/"+d.blockedConfig.results[0].id+"/data");return m({url:u,content:{f:"json"}}).then(function(n){if(n){var t=
n.blockedApps||[];n=d.blockedApps||[];this._blockedApps=[];n.forEach(function(x){var A=t.filter(function(B){return B.clientid===x})[0];A&&this._blockedApps.push(A)}.bind(this))}return this._blockedApps}.bind(this))}return[]}.bind(this))},_getLicensedApps:function(d,u){for(var n={},t={},x=this._getAppExceptions(),A=this._getExcludedProvisionedListings(),B=[],F=new k,w=this.userApps.apps.length,D=0;D<w;D++){var q=this.userApps.apps[D],v=q.itemId||q.title,z=!0,C=this._blockedApps&&this._blockedApps.some(function(E){return q.itemId&&
q.itemId===E.itemid||q.title&&q.title===E.title});n[v]=1;t[v]=q;if(!(C||"ArcGISEnterpriseOnKubernetes"===this._portal.portalDeploymentType&&!1===q.supportsKubernetes||x[q.title]&&!x[q.title].hasAccess(q.title)))if(q.privileges&&0!==q.privileges.length||q.isLicensed)if(this._portalUser.userLicenseTypeId&&"storytellerut"===this._portalUser.userLicenseTypeId.toLowerCase()&&q.label&&"storymaps"===q.label.toLowerCase())t[v].canAccess=!0,B.push(this._modifySystemAppForView(q,v));else{if(q.privileges&&0<
q.privileges.length&&this._portalUser.privileges){for(C=0;C<q.privileges.length;C++)if(0>this._portalUser.privileges.indexOf(q.privileges[C])){z=!1;break}if(!q.isLicensed&&z){t[v].canAccess=!0;B.push(this._modifySystemAppForView(q,v));continue}}if(q.isLicensed&&z)for(z=0;z<d.length;z++)if(v===d[z].itemId||v===d[z].title){t[v].canAccess=!0;B.push(this._modifySystemAppForView(q,v));break}}else t[v].canAccess=!0,B.push(this._modifySystemAppForView(q,v))}d.forEach(a.hitch(this,function(E){"Web Mapping Application"===
E.type&&!A[E.clientId]&&!n[E.itemId]&&E.url&&E.title&&!n[E.title]&&0>E.typeKeywords.indexOf("hideFromAppSwitcher")&&(E=this._modifyPartnerAppForView(E),t[E.itemId]=E,B.push(E))}));return F.resolve([this.approvedApps.map(a.hitch(this,function(E){var G=a.mixin(E.appProperties,{itemId:E.itemId,webMappingApp:!0,approvedApp:!0,canAccess:!u});t[E.itemId]=G;return this._modifyWebAppForView(G)})).concat(B),t])},_getApprovedApps:function(d){return this.requestWithAuth(b.restBaseUrl.replace("http://","https://")+
"portals/"+this._portalUser.orgId+"/approvedApps",{f:"json",returnAllApps:d})},_populateAppIdentifiers:function(d,u,n){(n=Object.keys(this._appDictionary).map(function(t){return this._appDictionary[t]}.bind(this)).filter(function(t){return t.itemId===u.uid||t.title===u.uid})[0])&&!this._appDictionary[u.uid]&&(u.uid=n.itemId||n.title);if(n&&n.hasBeenPopulated)return d;n?((u.hasChanged||n.hasChanged||!n.canAccess&&!n.ignoreNoAccess)&&this._isAdmin()&&(u.hasChanged||u.ignoreNoAccess||(this.__saveOnLoad=
!0),this._appDictionary[u.uid].hasChanged=!0,this._appDictionary[u.uid].ignoreNoAccess=u.ignoreNoAccess),u.isNew&&(this._appDictionary[u.uid].isNew=!0),delete this._newAppDictionary[u.uid]):(n=u,n.canAccess=!1,n.itemId=u.uid,this._appDictionary[u.uid]=n);this._appDictionary[u.uid].hasBeenPopulated=!0;d.push(n);return d},populateDataIdAttributes:function(d,u,n,t){return d.map(function(x,A){var B=this._appDictionary[x],F={label:B.label,uid:x};B.isNew&&(F.isNew=!0);B.hasChanged&&!B.ignoreNoAccess&&(F.hasChanged=
!0);u&&x===u&&(d[A-1]===x&&(this.__duplicateValueIndex=A),t?(this._appDictionary[x][n]=t,F[n]=t):(delete this._appDictionary[x][n],delete F[n]));B.canAccess&&B.ignoreNoAccess&&delete F.ignoreNoAccess;return F},this)},_getImgSrcForWebMappingApp:function(d){return d.icon?b.restBaseUrl+"portals/self/resources/"+d.icon+"?token\x3d"+this.userToken:"https://"+this._self.portalHostname+"/sharing/rest/content/items/"+d.itemId+"/resources/"+d.appSwitcher.image+"?token\x3d"+this.userToken},_modifySystemAppForView:function(d,
u){d.image?d.image=this.imgDir+d.image:d.placeHolderIcon=this.imgDir+"svg-app-icon.svg";d.url&&0===d.url.indexOf("../")&&(d.url=location.protocol+"//"+(this._portal.urlKey?this._portal.urlKey+"."+this._portal.customBaseUrl:this._self.portalHostname)+d.url.substring(2,d.url.length));delete d.isLicensed;delete d.privileges;d.itemId=u;return d},_modifyWebAppForView:function(d){d.appSwitcher&&d.appSwitcher.image||d.icon?d.image=this._getImgSrcForWebMappingApp(d):d.placeHolderIcon=this.imgDir+"svg-app-circle.svg";
d.abbr=d.appSwitcher&&d.appSwitcher.abbr||d.abbreviation;delete d.abbreviation;delete d.appSwitcher;delete d.approvedApp;delete d.webMappingApp;return d},_modifyPartnerAppForView:function(d){d.appSwitcher=d.properties&&d.properties.appSwitcher;return{abbr:d.appSwitcher&&d.appSwitcher.abbr||d.abbreviation,itemId:d.itemId,canAccess:!0,webMappingApp:!0,image:d.appSwitcher&&d.appSwitcher.image||d.icon?this._getImgSrcForWebMappingApp(d):null,label:d.title||d.label,url:d.url,placeHolderIcon:d.placeHolderIcon||
this.imgDir+"svg-app-circle.svg"}},_saveAppOrderToUserProperties:function(d,u){this.userProperties.appLauncher||(this.userProperties.appLauncher={});if(JSON.stringify(this.userProperties.appLauncher.primary)!==JSON.stringify(d)||JSON.stringify(this.userProperties.appLauncher.secondary)!==JSON.stringify(u))return this.userProperties.appLauncher.primary=d,this.userProperties.appLauncher.secondary=u,this._updateUserProperties(this.userProperties)},_getUserProperties:function(){return this.requestWithAuth(b.restBaseUrl+
"community/users/"+this._portalUser.username+"/properties",{f:"json"})},_getMarketPlaceProvisionedListings:function(d){var u=new k;return!d&&b.userInfo&&b.userInfo.provisionedListings?u.resolve(b.userInfo.provisionedListings):this.fetchAllResources(this._portal.portalUrl+"community/users/"+this._portalUser.username+"/provisionedListings",{returnAppClientIds:!0,returnAllProvisions:!0},"provisionedListings")},_updateUserProperties:function(d){d=a.mixin({f:"json",properties:g.stringify(d)},this._portalUser?
{token:this.userToken}:{});return m({url:b.restBaseUrl+"community/users/"+this._portalUser.username+"/setProperties",content:d},{usePost:!0})},_getExcludedProvisionedListings:function(){var d={opsdashboard:1,arcgisWebApps:1,Workforce:1,geoplanner:1,webappbuilder:1,HubforArcGIS:1,appstudio:1,survey123:1,storymaps:1,mapsForOffice:1,mapsForO365:1,mapsForSharePoint:1};this._self.isPortal&&(d.arcgisonline=1);return d},_getAppExceptions:function(){return{"Open Data":{hasAccess:this._userHasAccessToOpenData.bind(this)},
AppStudio:{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},"ArcGIS Velocity":{hasAccess:this._userHasAccessToAnalyticsForIoT.bind(this)},"ArcGIS Hub":{hasAccess:this._hasLicense.bind(this,"HubforArcGIS")},"ArcGIS Enterprise Sites":{hasAccess:this._userHasAccessToSites.bind(this)},"ArcGIS Experience Builder":{hasAccess:function(d){return this._isInPortalConfig(d)}.bind(this)},"ArcGIS StoryMaps":{hasAccess:function(d){return this._isInPortalConfig(d)}.bind(this)},"ArcGIS QuickCapture Web Designer":{hasAccess:function(d){return this._isInPortalConfig(d)&&
this._hasLicense("arcgisWebApps")}.bind(this)},"ArcGIS Collector":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Field Maps":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Dashboards":{hasAccess:function(d){return b.showCreateDashboard&&this._isInPortalConfig(d)&&this._hasLicense("opsdashboard")}.bind(this)},"ArcGIS Workforce":{hasAccess:function(d){return!this._self.isPortal||this._isInPortalConfig(d)}.bind(this)},"Map Viewer Beta":{hasAccess:function(){return b.newMapViewerEnabled&&
this._hasLicense("arcgisWebApps")}.bind(this)},"Ortho Maker":{hasAccess:this._userHasAccessToOrthoMaker.bind(this)},Notebook:{hasAccess:this._hasAccessToNotebooks.bind(this)},"Story Maps":{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},Survey123:{hasAccess:this._hasLicense.bind(this,"survey123")},"Track Viewer":{hasAccess:this._userHasAccessToTrackViewer.bind(this)}}},_hasAccessToNotebooks:function(d){return this._notebookServerConfigured()&&this._isInPortalConfig(d)&&this._canCreateNotebooks()},
_notebookServerConfigured:function(){return this._self.isPortal?b.notebookServerEnabled&&this._self.supportsHostedNotebooks:b.notebookServerEnabled},_canCreateNotebooks:function(){return(this._portalUser.privileges||[]).length?this._portalUser.privileges.some(function(d){return"premium:publisher:createNotebooks"===d}):!1},_isInPortalConfig:function(d){return!this._self.isPortal||b.showInAppLauncher&&-1!==b.showInAppLauncher.indexOf(d)},_userHasAccessToOpenData:function(){return this._self&&this._self.portalProperties&&
(!this._self.portalProperties.openData||this._self.portalProperties.openData&&!this._self.portalProperties.openData.enabled)?!1:this._hasLicense("HubforArcGIS")},_userHasAccessToAnalyticsForIoT:function(){var d=["portal:publisher:publishFeeds","portal:publisher:publishRealTimeAnalytics","portal:publisher:publishBigDataAnalytics"],u=(this._portalUser.privileges||[]).some(function(t){return-1<d.indexOf(t)}),n=this._hasLicense("analytics4IoT");return u&&n},_userHasAccessToSites:function(d){return this._isInPortalConfig(d)&&
this._hasLicense("HubforArcGIS")},_userHasAccessToCollectorWeb:function(d){return this._isInPortalConfig(d)},_userHasAccessToOrthoMaker:function(){return this._self&&this._self.helperServices&&this._self.helperServices.rasterAnalytics&&this._self.helperServices.orthoMapping&&this._isInPortalConfig("Ortho Maker")},_userHasAccessToTrackViewer:function(){return this._self&&this._self.helperServices&&this._self.helperServices.locationTracking&&b.trackViewerEnabled&&this._isInPortalConfig("Track Viewer")},
_hasLicense:function(d){return b.userInfo&&b.userInfo.isLicensed?b.userInfo.isLicensed(d):!0},_getAgoApp:function(){return{image:"arcgis-online.png",label:"ArcGIS Online",title:"ArcGIS Online",url:this.userProperties.landingPage?b.baseUrl+this.userProperties.landingPage.url:this._portalUser.isOrgAdmin?"organization.html":"index.html"}},_getOriginOfUrl:function(d){d=d||window.location;return d.protocol+"//"+d.hostname+(d.port?":"+d.port:"")},_getNewAppIconFromAppIdAndProperties:function(d,u){if(!this._appDictionary[d])return u=
a.mixin(JSON.parse(u),{itemId:d,webMappingApp:!0,approvedApp:!0,canAccess:!0,isNew:!0}),this._appDictionary[d]=u},_queryAppItemsForChanges:function(d,u){var n=new k,t=b.restBaseUrl+"search?";if(!u||!d||!d.length)return n.resolve({success:!0});t=t+"f\x3djson\x26num\x3d100\x26q\x3d id:("+(d.map(function(x){return'"'+x.itemId+'"'}).join(" OR ")+")");return this.requestWithAuth(t,{f:"json"}).then(a.hitch(this,function(x){x.results&&0<x.results.length&&x.results.forEach(function(A){var B=this._appDictionary[A.id];
B.canAccess=1;B.hasChanged=B.url!==A.url?A.url:0},this);return n.resolve({success:!0})}))},_getAppsFromLocalStorage:function(){if(!this.__localStorageIsAvailable)return!1;var d=localStorage.getItem("APSW-primary"),u=localStorage.getItem("APSW-secondary");return d?{primaryApps:d,secondaryApps:u}:!1},_saveApssToLocalStorage:function(d,u){this.__localStorageIsAvailable&&(localStorage.setItem("APSW-primary",JSON.stringify(d)),localStorage.setItem("APSW-secondary",JSON.stringify(u)))},_cookieForQueryingItemsExists:function(){var d=
dojo.cookie("APSW-query")&&JSON.parse(dojo.cookie("APSW-query"));if(d&&d.expires>(new Date).setHours((new Date).getHours()))return!0;d=JSON.stringify({expires:(new Date).setHours((new Date).getHours()+5)});dojo.cookie("APSW-query",d,{path:"/",domain:document.domain});return!1},requestWithAuth:function(d,u){return m({url:d,content:this.userToken?a.mixin(u,{token:this.userToken}):u})},fetchAllResources:function(d,u,n){var t=new k,x=1,A=[],B,F,w,D;u=u?a.mixin(u,{f:"json",token:this.userToken}):{f:"json",
token:this.userToken};n=n||"results";u.start=x;u.num||(u.num=100);m({url:d,content:u}).then(function(q){if(q&&q[n]){A=A.concat(q[n]);x=q.nextStart;B=q.total-A.length;F=Math.ceil(B/100);w=[];for(D=0;D<F;D++)u.start=x+100*D,w.push(util.request({url:d,content:u}));e(w).then(function(v){v.forEach(function(z){A=A.concat(z[n])});t.resolve(A)},function(v){t.reject(v)})}else t.resolve(A)},function(q){t.reject(q)});return t},_isAdmin:function(){return this._portalUser.role&&("org_admin"===this._portalUser.role||
"account_admin"===this._portalUser.role)},portalQueryItems:function(d,u){d={num:u||10,start:0,sortField:"title",sortOrder:"asc",f:"json",q:d};u="";u=this._portal.urlKey?"https://"+this._portal.urlKey+"."+this._portal.customBaseUrl+"/sharing/rest/search":this._portal.url+"search";return this.requestWithAuth(u,d)},useSSL:function(d,u){if(this._self.isPortal){var n=this.getLocation(u);if(-1<this._self.portalHostname.toLowerCase().indexOf(n.hostname.toLowerCase())&&n.port&&"80"!==n.port&&"443"!==n.port)return u=
n.pathname,u=0===u.indexOf("/")?u:"/"+u,this._self.allSSL||-1<d.indexOf("https:")?"https://"+n.hostname+(this._self.httpsPort&&"443"!==this._self.httpsPort?":"+this._self.httpsPort:"")+u+n.search:"http://"+n.hostname+(this._self.httpPort&&"80"!==this._self.httpPort?":"+this._self.httpPort:"")+u+n.search}return-1!==d.indexOf("https:")||this._self.allSSL?u.replace("http:","https:"):u},getLocation:function(d){var u=document.createElement("a");u.href=d;return{protocol:u.protocol,hostname:u.hostname,port:u.port,
pathname:u.pathname,search:u.search,hash:u.hash,host:u.host}},formatUrlWithToken:function(d){var u=this.userToken;return-1!==d.indexOf("null")?null:this.useSSL(window.location.protocol,u?d+(-1!==d.indexOf("?")?"\x26":"?")+("token\x3d"+u):d)},_checkIfLocalStorageIsAvailable:function(){if("object"===typeof localStorage)try{return localStorage.setItem("testLocalStorage",1),localStorage.removeItem("testLocalStorage"),!0}catch(d){return!1}},_getBrowserInUse:function(){return 10>=h("ie")||6<h("trident")?
"ie11":h("edge")?"edge":null}})})},"arcgisonline/pages/portal/LicenseInfo":function(){define("require exports tslib ../utils/organization ../../sharing/geow/Licenses dojo/Deferred".split(" "),function(b,y,r,a,k,e){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);return{_licensesAPI:new k.default,licenses:{arcgiswebapps:{valid:!1,className:"web-apps-not-licensed"},arcgisinsights:{valid:!1,className:"insights-not-licensed"},hubforarcgis:{valid:!1},orthomaker:{valid:!1,className:"orthomaker-not-licensed"},
opsdashboard:{valid:!1,className:"web-dashboard-not-licensed"},workforce:{valid:!1,className:"workforce-not-licensed"},survey123:{valid:!1,className:"survey123-not-licensed"},arcgisurban:{valid:!1,className:"arcgisUrban-not-licensed"},analytics4iot:{valid:!1,isCapability:!0}},getLicenseInfo:function(){var g=this,h=new e.default,m=this.licenses||{};this._getSubscriptionInfo().then(function(){return g._getProvisionedListings()}).then(function(){return h.resolve(m)});return h},_getSubscriptionInfo:function(){var g=
this,h=new e.default,m=this.licenses||{};this.portal.user&&this.isOrgUser?a.default.getSubscriptionInfo().then(function(l){var f;g.orgCapabilities=null!==(f=null===l||void 0===l?void 0:l.orgCapabilities)&&void 0!==f?f:[];g.orgCapabilities.forEach(function(c){return g._addCapabilityInfo(c)});h.resolve(m)}):h.resolve(m);return h},_addCapabilityInfo:function(g){var h,m,l=this.licenses||{},f=(null===(h=g.id)||void 0===h?void 0:h.toLowerCase())||null;g&&(h=null!==(m=l[f])&&void 0!==m?m:{},l[f]=r.__assign(r.__assign(r.__assign({},
h),g),{title:g.id,valid:!0}))},_getProvisionedListings:function(){var g=this,h=new e.default,m=this.portal.user,l={returnAppClientIds:!0,returnAllProvisions:!0},f=this.licenses||{};m&&this.isOrgUser?this._licensesAPI.getUserProvisionedListings(m.username,l).then(function(c){g.provisionedListings=null!==c&&void 0!==c?c:[];g.provisionedListings.forEach(function(d){return g._addListingInfo(d)});h.resolve(f)},function(){h.resolve([])}):(Object.keys(f).forEach(function(c){f[c].isCapability||(f[c].valid=
!0)}),h.resolve(f));return h},_addListingInfo:function(g){var h,m=this.licenses||{},l=(null===(h=g.clientId)||void 0===h?void 0:h.toLowerCase())||null;l&&(m[l]=r.__assign(r.__assign({},m[l]||{}),{valid:!0,itemId:g.itemId,clientId:g.clientId}))},isLicensed:function(g){var h,m,l;g=null!==(h=null===g||void 0===g?void 0:g.toLowerCase())&&void 0!==h?h:"";h=this.licenses||{};return null!==(l=null===(m=null===h||void 0===h?void 0:h[g])||void 0===m?void 0:m.valid)&&void 0!==l?l:!1}}})},"arcgisonline/sharing/geow/Licenses":function(){define("require exports tslib dojo/Deferred dojo/string dojo/i18n!../../nls/arcgisonline esri/lang ../../esriGeowConfig ../../pages/pageUtil ../../pages/utils/organization ../../pages/utils/promises ../../pages/components/ManageBlockedApps/blocked-apps-service ../util".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);return function(){function u(){this.proEntitlements=[];this._productListings=[];this.productEntitlements={};this._remainingProEntitlements={};this._remainingProductEntitlements={};this.appUserCounts=[];this._userEntitlementsUrl=h.default.restBaseUrl+
"content/listings/${itemId}/userEntitlements";this._userEntitlementUrl=this._userEntitlementsUrl+"/${username}";this._userSessionsUrl=h.default.restBaseUrl+"content/listings/${itemId}/users/${username}/sessions"}u.terminateUserSession=function(n,t,x){var A=d.default.getSecureUrl(h.default.restBaseUrl);return d.default.request({url:A+"content/listings/"+n+"/terminateUserSession",content:{username:t,sessionId:x}},{usePost:!0})};u.prototype.provisionUserEntitlements=function(n,t,x){return m.default.sendAllResourcesSerially(h.default.restBaseUrl+
"content/listings/"+n+"/provisionUserEntitlements",25,t.users,function(A){return{userEntitlements:JSON.stringify({users:A,entitlements:t.entitlements}),suppressCustomerEmail:!x}})};u.prototype.retrieveProvisionedUserEntitlement=function(n,t){n=k.default.substitute(this._userEntitlementUrl,{itemId:n,username:t});return d.default.request({url:n})};u.prototype.retrieveProvisionedUserEntitlements=function(n,t,x){n=k.default.substitute(this._userEntitlementsUrl,{itemId:n});return d.default.request({url:n,
content:{start:t?t:1,num:x?x:10}})};u.prototype.retrieveSessionInformation=function(n,t){n=k.default.substitute(this._userSessionsUrl,{itemId:n,username:t});return d.default.request({url:n})};u.prototype.provisionUserAppBundle=function(n,t,x){var A=new a.default,B=new a.default;x?B.resolve():this.getAppBundles(!0).then(function(F){F=F.appBundles.filter(function(w){return w.appBundleItemId===n})[0];F.maxUsers-F.assigned>=t.length?B.resolve():A.reject()});B.then(function(){m.default.sendAllResourcesWithDelay(h.default.restBaseUrl+
"content/listings/"+n+"/provisionUserAppBundle",25,t,function(F){return{users:JSON.stringify(F),revoke:x}},500).then(function(F){A.resolve(F)},function(F){A.reject(F)})});return A};u.prototype.updateUserLicenseType=function(n,t){var x=new a.default;m.default.sendAllResourcesSerially(h.default.restBaseUrl+"portals/self/updateUserLicenseType",25,n,function(A){return{users:JSON.stringify(A),userLicenseType:t}}).then(function(A){x.resolve(A)},function(){x.reject()});return x};u.prototype.getUserCounts=
function(n){return d.default.request({url:h.default.restBaseUrl+"portals/self/users/counts?type\x3d"+n})};u.prototype.getUserLicenseType=function(n){var t=this,x=new a.default,A;c.default.getBlockedAppsWithInfo().then(function(B){A=B;return d.default.request({url:h.default.restBaseUrl+"/community/users/"+n+"/userLicenseType"})}).then(function(B){B.apps.forEach(function(F){F.isAppBundle?F.apps.forEach(function(w){w.blocked=c.default.isBlocked(A,w)}):F.blocked=c.default.isBlocked(A,F)});t.addFieldMapsMobileToUserType(B);
x.resolve(B)},function(){x.resolve()});return x};u.prototype.getUserAppBundles=function(n){return m.default.fetchAllResources(h.default.restBaseUrl+"/community/users/"+n+"/appBundles",{num:10},"appBundles")};u.prototype.getUserProvisionedListings=function(n,t){var x=t||{},A;return c.default.getBlockedAppsWithInfo().then(function(B){A=B;return m.default.fetchAllResources(h.default.restBaseUrl+"/community/users/"+n+"/provisionedListings",x,"provisionedListings")}).then(function(B){l.default.licensesConfig&&
B.forEach(function(F){var w=l.default.licensesConfig.apps.filter(function(D){return D.title===F.title})[0];w&&w.label&&(F.title=w.label);F.blocked=c.default.isBlocked(A,F)});return B})};u.prototype.getUserEntitlements=function(n,t){return d.default.request({url:h.default.restBaseUrl+"/content/listings/"+n+"/userEntitlements/"+t})};u.prototype.getLicenseTypes=function(n){var t=this,x=new a.default,A;c.default.getBlockedAppsWithInfo().then(function(B){A=B;return m.default.fetchAllResources(h.default.restBaseUrl+
"portals/self/userLicenseTypes",{num:10},"userLicenseTypes")}).then(function(B){(null===A||void 0===A?0:A.length)&&B.forEach(function(F){F.apps.forEach(function(w){w.isAppBundle?w.apps.forEach(function(D){D.blocked=A.some(function(q){var v;return q.itemid&&q.itemid===D.id||q.title===D.title||(null===(v=q.related)||void 0===v?void 0:v.some(function(z){return z.itemid&&z.itemid===D.id||z.title===D.title}))})}):w.blocked=A.some(function(D){var q;return D.itemid&&D.itemid===w.id||D.title===w.title||(null===
(q=D.related)||void 0===q?void 0:q.some(function(v){return v.itemid&&v.itemid===w.id||v.title===w.title}))})})});t.getUserCounts("userLicenseType").then(function(F){B.forEach(function(D){var q=F.results.filter(function(v){return v.key===D.id})[0];D.assigned=q?q.count:0;t.addFieldMapsMobileToUserType(D)});var w=B.filter(function(D){return n||0!==D.assigned||0!==D.maxUsers});m.default.sortListByStrProp(w,"name");x.resolve({userLicenseTypes:w})})});return x};u.prototype.getAppBundles=function(n){var t=
this,x=new a.default,A;c.default.getBlockedAppsWithInfo().then(function(B){A=B;return d.default.request({url:h.default.restBaseUrl+"portals/self/appBundles"})}).then(function(B){B.appBundles.forEach(function(F){"Field Apps"===F.name&&F.apps.push({id:"fieldmapsmobile",title:"ArcGIS Field Maps",type:"Mobile Application",entitlements:["fieldmapsmobile"]});F.apps.forEach(function(w){w.blocked=A.some(function(D){var q;return D.itemid&&D.itemid===w.id||D.title===w.title||(null===(q=D.related)||void 0===
q?void 0:q.some(function(v){return v.itemid&&v.itemid===w.id||v.title===w.title}))})})});t.getUserCounts("appBundle").then(function(F){B.appBundles.forEach(function(w){var D=F.results.filter(function(q){return q.key===w.appBundleItemId})[0];w.assigned=D?D.count:0});B.appBundles=B.appBundles.filter(function(w){return 0!==w.maxUsers||0!==w.assigned});m.default.sortListByStrProp(B.appBundles,"name");n?x.resolve(B):f.default.eachAlways(B.appBundles.map(function(w){return t.getUsersForAppBundle(w.appBundleItemId)})).then(function(w){w.forEach(function(D,
q){B.appBundles[q].usernames=D.value.results.map(function(v){return v.username})});f.default.eachAlways(B.appBundles.map(function(D){return t.getAppBundleListing(D.appBundleItemId)})).then(function(D){B.appBundles.forEach(function(q,v){q.allowedLevels=D[v].value.allowedUserLevels?D[v].value.allowedUserLevels.split(",").map(function(z){return z.trim()}):[]});x.resolve(B)})})})});return x};u.prototype.getAppBundleListing=function(n){return d.default.request({url:d.default.getSecureUrl(h.default.restBaseUrl)+
"content/listings/"+n})};u.prototype.getUsersForAppBundle=function(n){return d.default.request({url:h.default.restBaseUrl+"portals/self/users/search",content:{q:"appbundle: "+n}})};u.prototype.getLicensedEntitlements=function(){var n=this,t=new a.default,x;l.default.initLicensesConfig(h.default.portal).then(function(){return c.default.getBlockedAppsWithInfo()}).then(function(A){x=A;return n.retrieveProductListings()}).then(function(){n._retrieveUserEntitlements().then(function(){var A;n._hasNegativeLicenses();
var B=[];if(n._hasProListing()){var F={};n.appUserCounts.forEach(function(v){v.key!==n._proListing.listing.itemId||F[v.secondaryKey]||(F[v.secondaryKey]={num:0})});var w=!(n._proListing.provision.orgEntitlements&&n._proListing.provision.orgEntitlements.entitlements),D=[];var q=w?F:n._proListing.provision.orgEntitlements.entitlements;w||Object.keys(F).forEach(function(v){q[v]||(q[v]=F[v],D.push(v))});Object.keys(q).forEach(function(v){var z;w||(w=-1!==D.indexOf(v));var C=(null===(z=n.appUserCounts.filter(function(I){return I.key===
n._proListing.listing.itemId&&I.secondaryKey===v})[0])||void 0===z?void 0:z.count)||0;z=q[v].num;var E=z-C,G=n.proEntitlements.filter(function(I){return-1!==I.entitlements.indexOf(v)}),H=-1===["desktopBasicN","desktopStdN","desktopAdvN"].indexOf(v),K=n._isLicenseExpired(n._proListing.provision.endDate,w,z,C);C={title:u.getProEntitlementTitle(v),key:v,total:z,used:C,remaining:E,status:k.default.substitute(u.i18n.licensesUsed,{used:C,total:z}),isPro:!0,proEntitlements:n.proEntitlements,allowedLevels:["2"],
itemId:n._proListing.listing.itemId,usernames:G.map(function(I){return I.username}),extNotSupported:u.getExtNotSupported(v),expiration:n._proListing.provision.endDate,isExpired:K,isExtension:H,trial:n._proListing.provision.trial};B.push(C)})}null===(A=n._productListings)||void 0===A?void 0:A.forEach(function(v){var z=v.listing,C=z.itemId,E={},G=!(v.provision.orgEntitlements&&v.provision.orgEntitlements.entitlements),H=z.title,K=n.appUserCounts.filter(function(I){return I.key===C})[0];K&&(E[K.secondaryKey]=
{num:0});q=G?E:v.provision.orgEntitlements.entitlements;Object.keys(q).forEach(function(I){var J;if(l.default.licensesConfig){var Q=l.default.licensesConfig.apps.filter(function(L){return L.entitlement===I})[0];Q&&(H=Q.label||Q.title)}Q=(null===K||void 0===K?void 0:K.count)||0;var V=q[I].num,O=V-Q,S=n._isLicenseExpired(v.provision.endDate,G,V,Q);Q={title:H,key:I,total:V,used:Q,remaining:O,status:k.default.substitute(u.i18n.licensesUsed,{used:Q,total:V}),icon:z.icon,properties:z.properties,itemId:C,
type:z.type,allowedLevels:z.allowedUserLevels?z.allowedUserLevels.split(",").map(function(L){return L.trim()}):[],usernames:n.productEntitlements[C]?n.productEntitlements[C].map(function(L){return L.username}):[],expiration:v.provision.endDate,isExpired:S,trial:v.provision.trial,requiredListings:z.requiredListings,dependentListings:z.dependentListings,owner:z.owner,blocked:x.some(function(L){var Y;return L.itemid&&L.itemid===C||L.title===H||(null===(Y=L.related)||void 0===Y?void 0:Y.some(function(ca){return ca.itemid&&
ca.itemid===C||ca.title===H}))})};"ArcGIS for Power BI"===Q.title&&(null===(J=l.default.licensesConfig)||void 0===J?0:J.hidePowerBI)||B.push(Q)})});m.default.sortListByStrProp(B,"title");t.resolve(B)})});return t};u.prototype.getProListing=function(){return this._hasProListing()?this._proListing:void 0};u.prototype.getDisconnectSettingForListing=function(n){n=d.default.getSecureUrl(h.default.restBaseUrl)+"content/listings/"+n+"/disconnectSettings";return d.default.request({url:n})};u.prototype.updateDisconnectSettingForListing=
function(n,t,x){n=d.default.getSecureUrl(h.default.restBaseUrl)+"content/listings/"+n+"/setDisconnectSettings";var A=new a.default;t={canDisconnect:t};g.default.isDefined(x)&&(t.maxDisconnectTime=x);d.default.request({url:n,content:t},{usePost:!0}).then(function(B){B&&B.code&&B.messageCode?A.resolve({error:!0,messageCode:B.messageCode}):A.resolve(B)},function(B){var F={error:!0,messageCode:void 0};B&&B.messageCode&&(F.messageCode=B.messageCode);A.resolve(F)});return A};u.getExtNotSupported=function(n){return this._extNotSupported[n]};
u.getProEntitlementTitle=function(n){switch(n){case "desktopBasicN":return u.i18n.licenseTypes.agsProLabel+" "+u.i18n.licenseTypes.basicLabel;case "desktopStdN":return u.i18n.licenseTypes.agsProLabel+" "+u.i18n.licenseTypes.standardLabel;case "desktopAdvN":return u.i18n.licenseTypes.agsProLabel+" "+u.i18n.licenseTypes.advancedLabel;case "spatialAnalystN":return u.i18n.licenseTypes.spatialAnalyst;case "3DAnalystN":return u.i18n.licenseTypes.threeDAnalyst;case "networkAnalystN":return u.i18n.licenseTypes.networkAnalyst;
case "geostatAnalystN":return u.i18n.licenseTypes.geostatisticalAnalyst;case "dataReviewerN":return u.i18n.licenseTypes.dataReviewer;case "workflowMgrN":return u.i18n.licenseTypes.workflowManager;case "dataInteropN":return u.i18n.licenseTypes.dataInterop;case "defenseN":return u.i18n.licenseTypes.defenseMapping;case "FMVN":return u.i18n.licenseTypes.fullMotionVideo;case "businessBasicN":return u.i18n.licenseTypes.businessBasic;case "businessStdN":return u.i18n.licenseTypes.businessStd;case "roadsHighwaysN":return u.i18n.licenseTypes.roadsHighways;
case "publisherN":return u.i18n.licenseTypes.publisher;case "productionMapN":return u.i18n.licenseTypes.productionMapping;case "schematicsN":return u.i18n.licenseTypes.schematics;case "trackingN":return u.i18n.licenseTypes.tracking;case "aviationN":return u.i18n.licenseTypes.aviation;case "airportsN":return u.i18n.licenseTypes.airports;case "maritimeN":return u.i18n.licenseTypes.maritime;case "bathymetryN":return u.i18n.licenseTypes.bathymetry;case "smpNAmericaN":return u.i18n.licenseTypes.streetMapNA;
case "smpEuropeN":return u.i18n.licenseTypes.streetMapEU;case "smpAsiaPacificN":return u.i18n.licenseTypes.streetMapAPAC;case "smpMidEAfricaN":return u.i18n.licenseTypes.streetMapMEA;case "smpLAmericaN":return u.i18n.licenseTypes.streetMapLA;case "smpJapanN":return u.i18n.licenseTypes.streetMapJA;case "LocRefDesktopN":return u.i18n.licenseTypes.locationRef;case "imageAnalystN":return u.i18n.licenseTypes.imageAnalyst;case "locateXTN":return u.i18n.licenseTypes.locateXT;default:return""}};u.prototype._hasNegativeLicenses=
function(){var n=this,t={},x=!1,A=!1;this._proListing&&(this._proListing.provision.orgEntitlements&&this._proListing.provision.orgEntitlements.entitlements&&(t=this._convertOrgEntitlementsToPurchaseMap(this._proListing.provision.orgEntitlements.entitlements)),this._remainingProEntitlements=r.__assign({},t),this.proEntitlements.forEach(function(B){B.entitlements.forEach(function(F){n._remainingProEntitlements[F]||(n._remainingProEntitlements[F]=0);--n._remainingProEntitlements[F];0>n._remainingProEntitlements[F]&&
(x=!0)})}));this._productListings&&0<this._productListings.length&&(this._remainingProductEntitlements={},this._productListings.forEach(function(B){t={};var F=B.listing.itemId;B.provision.orgEntitlements&&B.provision.orgEntitlements.entitlements&&(t=n._convertOrgEntitlementsToPurchaseMap(B.provision.orgEntitlements.entitlements));n._remainingProductEntitlements[F]=r.__assign({},t);n.productEntitlements[F]&&n.productEntitlements[F].forEach(function(w){w.entitlements.forEach(function(D){n._remainingProductEntitlements[F]||
(n._remainingProductEntitlements[F]={});n._remainingProductEntitlements[F][D]||(n._remainingProductEntitlements[F][D]=0);--n._remainingProductEntitlements[F][D];0>n._remainingProductEntitlements[F][D]&&(A=!0)})})}));return x||A};u.prototype._convertOrgEntitlementsToPurchaseMap=function(n){var t={};if(n)for(var x in n)n[x]&&g.default.isDefined(n[x].num)?t[x]=n[x].num:t[x]=n[x];return t};u.prototype._hasProListing=function(){var n=this;return!!(this._proListing&&this._proListing.provision&&(this._proListing.provision.orgEntitlements&&
!m.default.isEmptyObject(this._proListing.provision.orgEntitlements)||this.appUserCounts.some(function(t){var x;return t.key===(null===(x=n._proListing.listing)||void 0===x?void 0:x.itemId)})))};u.prototype._isLicenseExpired=function(n,t,x,A){var B=g.default.isDefined(n),F=-1===n;n=n<Date.now();return B&&!F&&n||t||0===x&&0<A};u.prototype.retrieveProductListings=function(){var n=this,t=new a.default;d.default.findLicenseByUserProducts().then(function(x){x&&x.pro&&(n._proListing=r.__assign({},x.pro));
x&&x.products&&(n._productListings=r.__spreadArrays(x.products));t.resolve()},function(){n._proListing=void 0;n._productListings=void 0;t.resolve()});return t};u.prototype.retrieveUserEntitlementsForListing=function(n){n=k.default.substitute(this._userEntitlementsUrl,{itemId:n});return m.default.fetchAllResources(n,{},"userEntitlements")};u.prototype.getAppUserCounts=function(){var n=this;return m.default.fetchAllResources(h.default.restBaseUrl+"portals/self/users/counts?type\x3dapp").then(function(t){n.appUserCounts=
t})};u.prototype._retrieveUserEntitlements=function(){var n=new a.default;this.getAppUserCounts().then(function(){n.resolve()},function(){n.resolve()});return n};u.prototype.addFieldMapsMobileToUserType=function(n){n.apps.forEach(function(t){t.isAppBundle&&"Field Apps Bundle"===t.title&&t.apps.push({id:"fieldmapsmobile",title:"ArcGIS Field Maps",type:"Mobile Application",entitlements:["fieldmapsmobile"]})})};u.prototype._retrieveProUserEntitlements=function(){var n=k.default.substitute(this._userEntitlementsUrl,
{itemId:this._proListing.listing.itemId});return m.default.fetchAllResources(n,{},"userEntitlements")};u.prototype._retrieveProductUserEntitlements=function(){var n=this,t={};this._productListings.forEach(function(x){x=x.listing.itemId;var A=k.default.substitute(n._userEntitlementsUrl,{itemId:x});t[x]=m.default.fetchAllResources(A,{},"userEntitlements")});return t};u.i18n=r.__assign({},e.default.manageLicenses);u._extNotSupported={desktopBasicN:"defenseN roadsHighwaysN productionMapN aviationN airportsN maritimeN bathymetryN LocRefDesktopN".split(" "),
desktopStdN:["aviationN","maritimeN"],desktopAdvN:[]};return u}()})},"arcgisonline/pages/components/ManageBlockedApps/blocked-apps-service":function(){define("require exports tslib dojo/Deferred dojo/promise/all arcgisonline/sharing/util arcgisonline/esriGeowConfig".split(" "),function(b,y,r,a,k,e,g){Object.defineProperty(y,"__esModule",{value:!0});a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);var h,m=function(){return e.default.request({url:g.default.restBaseUrl+
"portals/self/signinSettings"}).then(function(f){return null===f||void 0===f?void 0:f.blockedApps})},l=function(){var f=new a.default;if(h)return f.resolve(h),f;e.default.request({url:g.default.restBaseUrl+"search",content:{num:10,start:0,sortField:"title",sortOrder:"asc",q:g.default.blockedAppsConfigItemQuery}}).then(function(c){var d;if(c=null===(d=c.results)||void 0===d?void 0:d[0])return e.default.request({url:g.default.restBaseUrl+"content/items/"+c.id+"/data"})},function(){f.resolve(h)}).then(function(c){h=
(null===c||void 0===c?void 0:c.blockedApps)||[];f.resolve(h)},function(){f.resolve(h)});return f};y.default={updateBlockedApps:function(f){f=r.__assign({blockedApps:f.length?JSON.stringify(f):""},!f.length&&{clearEmptyFields:!0});return e.default.request({url:g.default.restBaseUrl+"portals/self/setSigninSettings",content:f},{usePost:!0})},getBlockedApps:m,getBlockableApps:l,getBlockedAppsWithInfo:function(){var f=new a.default;k.default({blockable:l(),clientIds:m()}).then(function(c){var d=c.blockable,
u=c.clientIds;(null===d||void 0===d?0:d.length)&&u||f.resolve([]);f.resolve((d||[]).filter(function(n){return-1<(null===u||void 0===u?void 0:u.indexOf(n.clientid))}))},function(){f.resolve([])});return f},isBlocked:function(f,c){return f.some(function(d){var u;return d.itemid&&(d.itemid===c.id||d.itemid===c.itemId)||d.title===c.title||(null===(u=d.related)||void 0===u?void 0:u.some(function(n){return n.itemid&&(n.itemid===c.id||n.itemid===c.itemId)||n.title===c.title}))})},extractClientIds:function(f){var c=
[];f.forEach(function(d){var u,n;c.push(d.clientid);null===(n=null===(u=d.related)||void 0===u?void 0:u.forEach)||void 0===n?void 0:n.call(u,function(t){c.push(t.clientid)})});return c}}})},"arcgisonline/sharing/dijit/InfoBanner":function(){define("require exports tslib dijit/_WidgetBase arcgis-components/wrappers/InfoBanner arcgisonline/tsutils/declareDecorator".split(" "),function(b,y,r,a,k,e){a=r.__importDefault(a);e=r.__importDefault(e);return function(){function g(h,m){}g.prototype.postCreate=
function(){this.inherited(arguments);var h={bannerConfig:this.banner};"bottom"===this.region?h.bottomContainer=this.domNode:h.topContainer=this.domNode;new k.InfoBanner(h)};return g=r.__decorate([e.default(a.default)],g)}()})},"arcgis-components/wrappers/InfoBanner":function(){define(["../Component","../InfoBanner/index"],function(b,y){return function(r){function a(e){if(k[e])return k[e].exports;var g=k[e]={i:e,l:!1,exports:{}};return r[e].call(g.exports,g,g.exports,a),g.l=!0,g.exports}var k={};return a.m=
r,a.c=k,a.d=function(e,g,h){a.o(e,g)||Object.defineProperty(e,g,{enumerable:!0,get:h})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,g){if((1&g&&(e=a(e)),8&g)||4&g&&"object"==typeof e&&e&&e.__esModule)return e;var h=Object.create(null);if(a.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:e}),2&g&&"string"!=typeof e)for(var m in e)a.d(h,m,function(l){return e[l]}.bind(null,
m));return h},a.n=function(e){var g=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(g,"a",g),g},a.o=function(e,g){return Object.prototype.hasOwnProperty.call(e,g)},a.p="",a(a.s=825)}({0:function(r,a,k){function e(u,n){function t(){this.constructor=u}c(u,n);u.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}function g(u,n){var t={},x;for(x in u)Object.prototype.hasOwnProperty.call(u,x)&&0>n.indexOf(x)&&(t[x]=u[x]);if(null!=u&&"function"==typeof Object.getOwnPropertySymbols){var A=
0;for(x=Object.getOwnPropertySymbols(u);A<x.length;A++)0>n.indexOf(x[A])&&Object.prototype.propertyIsEnumerable.call(u,x[A])&&(t[x[A]]=u[x[A]])}return t}function h(u,n,t,x){var A,B=arguments.length,F=3>B?n:null===x?x=Object.getOwnPropertyDescriptor(n,t):x;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)F=Reflect.decorate(u,n,t,x);else for(var w=u.length-1;0<=w;w--)(A=u[w])&&(F=(3>B?A(F):3<B?A(n,t,F):A(n,t))||F);return 3<B&&F&&Object.defineProperty(n,t,F),F}function m(u,n,t,x){return new (t||
(t=Promise))(function(A,B){function F(q){try{D(x.next(q))}catch(v){B(v)}}function w(q){try{D(x.throw(q))}catch(v){B(v)}}function D(q){var v;q.done?A(q.value):(v=q.value,v instanceof t?v:new t(function(z){z(v)})).then(F,w)}D((x=x.apply(u,n||[])).next())})}function l(u,n){function t(D){return function(q){return function(v){if(x)throw new TypeError("Generator is already executing.");for(;w;)try{if(x=1,A&&(B=2&v[0]?A.return:v[0]?A.throw||((B=A.return)&&B.call(A),0):A.next)&&!(B=B.call(A,v[1])).done)return B;
switch(A=0,B&&(v=[2&v[0],B.value]),v[0]){case 0:case 1:B=v;break;case 4:return w.label++,{value:v[1],done:!1};case 5:w.label++;A=v[1];v=[0];continue;case 7:v=w.ops.pop();w.trys.pop();continue;default:if(!(B=w.trys,(B=0<B.length&&B[B.length-1])||6!==v[0]&&2!==v[0])){w=0;continue}if(3===v[0]&&(!B||v[1]>B[0]&&v[1]<B[3]))w.label=v[1];else if(6===v[0]&&w.label<B[1])w.label=B[1],B=v;else if(B&&w.label<B[2])w.label=B[2],w.ops.push(v);else{B[2]&&w.ops.pop();w.trys.pop();continue}}v=n.call(u,w)}catch(z){v=
[6,z],A=0}finally{x=B=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([D,q])}}var x,A,B,F,w={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return F={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(F[Symbol.iterator]=function(){return this}),F}function f(){for(var u=0,n=0,t=arguments.length;n<t;n++)u+=arguments[n].length;u=Array(u);var x=0;for(n=0;n<t;n++)for(var A=arguments[n],B=0,F=A.length;B<F;B++,x++)u[x]=A[B];return u}k.d(a,"d",function(){return e});
k.d(a,"a",function(){return d});k.d(a,"f",function(){return g});k.d(a,"c",function(){return h});k.d(a,"b",function(){return m});k.d(a,"e",function(){return l});k.d(a,"g",function(){return f});var c=function(u,n){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,x){t.__proto__=x}||function(t,x){for(var A in x)x.hasOwnProperty(A)&&(t[A]=x[A])})(u,n)},d=function(){return(d=Object.assign||function(u){for(var n,t=1,x=arguments.length;t<x;t++)for(var A in n=arguments[t])Object.prototype.hasOwnProperty.call(n,
A)&&(u[A]=n[A]);return u}).apply(this,arguments)}},10:function(r,a){r.exports=b},128:function(r,a){a=function(){return this}();try{a=a||(new Function("return this"))()}catch(k){"object"==typeof window&&(a=window)}r.exports=a},145:function(r,a){function k(){throw Error("setTimeout has not been defined");}function e(){throw Error("clearTimeout has not been defined");}function g(A){if(c===setTimeout)return setTimeout(A,0);if((c===k||!c)&&setTimeout)return c=setTimeout,setTimeout(A,0);try{return c(A,
0)}catch(B){try{return c.call(null,A,0)}catch(F){return c.call(this,A,0)}}}function h(){t&&u&&(t=!1,u.length?n=u.concat(n):x=-1,n.length&&m())}function m(){if(!t){var A=g(h);t=!0;for(var B=n.length;B;){u=n;for(n=[];++x<B;)u&&u[x].run();x=-1;B=n.length}u=null;t=!1;(function(F){if(d===clearTimeout)return clearTimeout(F);if((d===e||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(F);try{d(F)}catch(w){try{return d.call(null,F)}catch(D){return d.call(this,F)}}})(A)}}function l(A,B){this.fun=A;this.array=
B}function f(){}r=r.exports={};try{var c="function"==typeof setTimeout?setTimeout:k}catch(A){c=k}try{var d="function"==typeof clearTimeout?clearTimeout:e}catch(A){d=e}!0;var u,n=[],t=!1,x=-1;r.nextTick=function(A){var B=Array(arguments.length-1);if(1<arguments.length)for(var F=1;F<arguments.length;F++)B[F-1]=arguments[F];n.push(new l(A,B));1!==n.length||t||g(m)};l.prototype.run=function(){this.fun.apply(null,this.array)};r.title="browser";r.browser=!0;r.env={};r.argv=[];r.version="";r.versions={};
r.on=f;r.addListener=f;r.once=f;r.off=f;r.removeListener=f;r.removeAllListeners=f;r.emit=f;r.prependListener=f;r.prependOnceListener=f;r.listeners=function(A){return[]};r.binding=function(A){throw Error("process.binding is not supported");};r.cwd=function(){return"/"};r.chdir=function(A){throw Error("process.chdir is not supported");};r.umask=function(){return 0}},22:function(r,a,k){(function(e,g){r.exports=function(){function h(){var X=setTimeout;return function(){return X(m,1)}}function m(){for(var X=
0;X<q;X+=2)(0,I[X])(I[X+1]),I[X]=void 0,I[X+1]=void 0;q=0}function l(X,Z){var N=this,aa=new this.constructor(c);void 0===aa[L]&&w(aa);var ka=N._state;if(ka){var pa=arguments[ka-1];C(function(){return F(ka,aa,pa,N._result)})}else A(N,aa,X,Z);return aa}function f(X){if(X&&"object"==typeof X&&X.constructor===this)return X;var Z=new this(c);return u(Z,X),Z}function c(){}function d(X,Z,N){Z.constructor===X.constructor&&N===l&&Z.constructor.resolve===f?function(aa,ka){1===ka._state?t(aa,ka._result):2===
ka._state?x(aa,ka._result):A(ka,void 0,function(pa){return u(aa,pa)},function(pa){return x(aa,pa)})}(X,Z):void 0===N?t(X,Z):"function"==typeof N?function(aa,ka,pa){C(function(ta){var Ba=!1,Da=function(oa,ra,ya,wa){try{oa.call(ra,ya,wa)}catch(la){return la}}(pa,ka,function(oa){Ba||(Ba=!0,ka!==oa?u(ta,oa):t(ta,oa))},function(oa){Ba||(Ba=!0,x(ta,oa))},ta._label);!Ba&&Da&&(Ba=!0,x(ta,Da))},aa)}(X,Z,N):t(X,Z)}function u(X,Z){if(X===Z)x(X,new TypeError("You cannot resolve a promise with itself"));else if(aa=
typeof(N=Z),null===N||"object"!==aa&&"function"!==aa)t(X,Z);else{N=void 0;try{N=Z.then}catch(ka){return void x(X,ka)}d(X,Z,N)}var N,aa}function n(X){X._onerror&&X._onerror(X._result);B(X)}function t(X,Z){void 0===X._state&&(X._result=Z,X._state=1,0!==X._subscribers.length&&C(B,X))}function x(X,Z){void 0===X._state&&(X._state=2,X._result=Z,C(n,X))}function A(X,Z,N,aa){var ka=X._subscribers,pa=ka.length;X._onerror=null;ka[pa]=Z;ka[pa+1]=N;ka[pa+2]=aa;0===pa&&X._state&&C(B,X)}function B(X){var Z=X._subscribers,
N=X._state;if(0!==Z.length){for(var aa=void 0,ka=void 0,pa=X._result,ta=0;ta<Z.length;ta+=3)aa=Z[ta],ka=Z[ta+N],aa?F(N,aa,ka,pa):ka(pa);X._subscribers.length=0}}function F(X,Z,N,aa){var ka="function"==typeof N,pa=void 0,ta=void 0,Ba=!0;if(ka){try{pa=N(aa)}catch(Da){Ba=!1,ta=Da}if(Z===pa)return void x(Z,new TypeError("A promises callback cannot return that same promise."))}else pa=aa;void 0!==Z._state||(ka&&Ba?u(Z,pa):!1===Ba?x(Z,ta):1===X?t(Z,pa):2===X&&x(Z,pa))}function w(X){X[L]=Y++;X._state=void 0;
X._result=void 0;X._subscribers=[]}var D=Array.isArray?Array.isArray:function(X){return"[object Array]"===Object.prototype.toString.call(X)},q=0,v=void 0,z=void 0,C=function(X,Z){I[q]=X;I[q+1]=Z;2===(q+=2)&&(z?z(m):S())},E="undefined"!=typeof window?window:void 0,G=E||{};G=G.MutationObserver||G.WebKitMutationObserver;var H="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),K="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,
I=Array(1E3),J,Q,V,O,S=void 0;H?S=function(){return e.nextTick(m)}:G?(Q=0,V=new G(m),O=document.createTextNode(""),V.observe(O,{characterData:!0}),S=function(){O.data=Q=++Q%2}):K?((J=new MessageChannel).port1.onmessage=m,S=function(){return J.port2.postMessage(0)}):S=void 0===E?function(){try{var X=Function("return this")().require("vertx");return void 0!==(v=X.runOnLoop||X.runOnContext)?function(){v(m)}:h()}catch(Z){return h()}}():h();var L=Math.random().toString(36).substring(2),Y=0,ca=function(){function X(Z,
N){this._instanceConstructor=Z;this.promise=new Z(c);this.promise[L]||w(this.promise);D(N)?(this.length=N.length,this._remaining=N.length,this._result=Array(this.length),0===this.length?t(this.promise,this._result):(this.length=this.length||0,this._enumerate(N),0===this._remaining&&t(this.promise,this._result))):x(this.promise,Error("Array Methods must be provided an Array"))}return X.prototype._enumerate=function(Z){for(var N=0;void 0===this._state&&N<Z.length;N++)this._eachEntry(Z[N],N)},X.prototype._eachEntry=
function(Z,N){var aa=this._instanceConstructor,ka=aa.resolve;if(ka===f){var pa=ka=void 0,ta=!1;try{ka=Z.then}catch(Ba){ta=!0,pa=Ba}ka===l&&void 0!==Z._state?this._settledAt(Z._state,N,Z._result):"function"!=typeof ka?(this._remaining--,this._result[N]=Z):aa===U?(aa=new aa(c),ta?x(aa,pa):d(aa,Z,ka),this._willSettleAt(aa,N)):this._willSettleAt(new aa(function(Ba){return Ba(Z)}),N)}else this._willSettleAt(ka(Z),N)},X.prototype._settledAt=function(Z,N,aa){var ka=this.promise;void 0===ka._state&&(this._remaining--,
2===Z?x(ka,aa):this._result[N]=aa);0===this._remaining&&t(ka,this._result)},X.prototype._willSettleAt=function(Z,N){var aa=this;A(Z,void 0,function(ka){return aa._settledAt(1,N,ka)},function(ka){return aa._settledAt(2,N,ka)})},X}(),U=function(){function X(Z){this[L]=Y++;this._result=this._state=void 0;this._subscribers=[];if(c!==Z){if("function"!=typeof Z)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof X)(function(N,aa){try{aa(function(ka){u(N,
ka)},function(ka){x(N,ka)})}catch(ka){x(N,ka)}})(this,Z);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}return X.prototype.catch=function(Z){return this.then(null,Z)},X.prototype.finally=function(Z){var N=this.constructor;return"function"==typeof Z?this.then(function(aa){return N.resolve(Z()).then(function(){return aa})},function(aa){return N.resolve(Z()).then(function(){throw aa;})}):this.then(Z,
Z)},X}();return U.prototype.then=l,U.all=function(X){return(new ca(this,X)).promise},U.race=function(X){var Z=this;return D(X)?new Z(function(N,aa){for(var ka=X.length,pa=0;pa<ka;pa++)Z.resolve(X[pa]).then(N,aa)}):new Z(function(N,aa){return aa(new TypeError("You must pass an array to race."))})},U.resolve=f,U.reject=function(X){var Z=new this(c);return x(Z,X),Z},U._setScheduler=function(X){z=X},U._setAsap=function(X){C=X},U._asap=C,U.polyfill=function(){var X=void 0;if(void 0!==g)X=g;else if("undefined"!=
typeof self)X=self;else try{X=Function("return this")()}catch(aa){throw Error("polyfill failed because global object is unavailable in this environment");}var Z=X.Promise;if(Z){var N=null;try{N=Object.prototype.toString.call(Z.resolve())}catch(aa){}if("[object Promise]"===N&&!Z.cast)return}X.Promise=U},U.Promise=U,U}()}).call(this,k(145),k(128))},26:function(r,a,k){function e(H){return H.reduce(function(K,I){return I&&I.relatedItems?K.concat(I.relatedItems.map(function(J){return J})):K},[])}function g(H,
K,I){return H(K,{query:Object(l.a)({f:"json"},I)}).then(function(J){return J.data})}function h(H,K){void 0===K&&(K=100);for(var I=[],J=0;J<Math.ceil(H.length/K);J++)I.push(H.slice(J*K,(J+1)*K));return I.filter(function(Q){return 0<Q.length})}function m(H){var K=H.itemIds,I=H.request,J=H.groupIds,Q=H.portal.restUrl+"/content/itemsgroups";return new f.Promise(function(V,O){I(Q,{method:"get",query:{f:"json",items:K,groups:J}}).then(function(S){V(S.data)},O)})}k.d(a,"s",function(){return c});k.d(a,"n",
function(){return d});k.d(a,"h",function(){return u});k.d(a,"e",function(){return n});k.d(a,"f",function(){return t});k.d(a,"j",function(){return x});k.d(a,"l",function(){return A});k.d(a,"k",function(){return B});k.d(a,"m",function(){return F});k.d(a,"c",function(){return w});k.d(a,"d",function(){return D});k.d(a,"p",function(){return q});k.d(a,"q",function(){return v});k.d(a,"r",function(){return z});k.d(a,"g",function(){return C});k.d(a,"o",function(){return E});k.d(a,"t",function(){return g});
k.d(a,"a",function(){return h});k.d(a,"i",function(){return m});k.d(a,"b",function(){return G});var l=k(0),f=k(22),c=function(H){return function(K,I){return H({url:K,content:I.query},{usePost:"post"===I.method}).then(function(J){return{data:J}})}},d=function(H,K,I){return g(H,K.restUrl+"/portals/self",{culture:I,default:!0})},u=function(H,K,I){return g(H,K.restUrl+"/content/items/"+I+"/data")},n=function(H,K,I,J){return g(H,K.restUrl+"/community/groups",Object(l.a)({q:I},J))},t=function(H,K,I){return g(H,
K.restUrl+"/community/groups/"+I+"/categorySchema")},x=function(H,K,I){return g(H,K.restUrl+"/portals/"+(I||K.id)+"/categorySchema")},A=function(H,K,I,J){return H(K.restUrl+"/portals/"+(I||K.id)+"/collaborationsSummary",J)},B=function(H,K,I,J){return H(K.restUrl+"/portals/"+(I||K.id)+"/collaboratedItems",J)},F=function(H,K,I){return g(H,location.protocol+"//"+K.portalHostname+"/sharing/rest/portals/"+(I||"self"))},w=function(H,K,I){return H(K.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+
K.id+" AND access:public",num:100,start:I||1,sortField:"title",sortOrder:"asc"}}).then(function(J){return J.data.total>J.data.start+J.data.num?w(H,K,J.data.start+J.data.num).then(function(Q){return Object(l.a)(Object(l.a)({},Q),{data:Object(l.a)(Object(l.a)({},Q.data),{results:J.data.results.concat(Q.data.results)})})}):J})},D=function(H,K,I,J){return H(K.restUrl+"/community/users/"+I+"/provisionedListings",{query:{f:"json",num:100,start:J||1}}).then(function(Q){var V=f.Promise.all(Q.data.provisionedListings.filter(function(S){return S.itemId}).map(function(S){return(new f.Promise(function(L,
Y){H(K.restUrl+"/content/items/"+S.itemId,{method:"get",query:{f:"json"}}).then(function(ca){L(ca.data)},Y)})).catch(function(L){return 0})})),O=Q.data.provisionedListings.map(function(S){return g(H,K.restUrl+"/content/items/"+(S.id||S.itemId)+"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward").then(function(L){return L},function(L){})});return Q.data.total>Q.data.start+Q.data.num?D(H,K,I,Q.data.start+Q.data.num).then(function(S){return f.Promise.all([V].concat(O)).then(function(L){return L[0].results.concat(e(L.slice(1))).concat(S)})}):
f.Promise.all([V].concat(O)).then(function(S){return S[0].filter(function(L){return void 0!==L}).concat(e(S.slice(1)))})})},q=function(H,K,I){return g(H,K.restUrl+"/community/users/"+(I||K.user.username))},v=function(H,K,I){return g(H,K.restUrl+"/content/users/"+(I||K.user.username),{num:1})},z=function(H,K,I){return g(H,K.restUrl+"/content/groups/"+I)},C=function(H,K,I){return g(H,K.restUrl+"/community/groups",I)},E=function(H,K){return g(H,K.restUrl+"/portals/self/settings")},G=function(H,K){return void 0===
K&&(K=","),H.map(function(I){return I.id}).join(K)}},610:function(r,a){r.exports=y},825:function(r,a,k){k.r(a);k.d(a,"InfoBanner",function(){return l});var e=k(0),g=k(10);r=k(610);var h=k.n(r),m=k(26),l=function(){function f(c){var d=this;this.options=c;var u=c.bottomContainer;(this.topContainer=c.topContainer,this.bottomContainer=u,c.bannerConfig)?this.setupBanners(c.bannerConfig):c.request&&c.portal&&c.apiVersion&&(u=4===c.apiVersion?c.request:this.shimmedRequest.bind(this),c=4===c.apiVersion?c.portal:
Object(e.a)(Object(e.a)({},c.portal),{restUrl:c.portal.portalUrl.slice(0,-1),credential:c.portal.user&&c.portal.user.credential?c.portal.user.credential:void 0}),Object(m.o)(u,c).then(function(n){d.setupBanners(n.informationalBanner)}))}return f.prototype.destroy=function(){this.topContainer&&(this.topProjector.stop(),this.topContainer.remove?this.topContainer.remove():this.topContainer.parentNode&&this.topContainer.parentNode.removeChild(this.topContainer));this.bottomContainer&&(this.bottomProjector.stop(),
this.bottomContainer.remove?this.bottomContainer.remove():this.bottomContainer.parentNode&&this.bottomContainer.parentNode.removeChild(this.bottomContainer))},f.prototype.setupBanners=function(c){c&&c.enabled&&(this.topContainer&&(this.topProjector=this.createProjector(this.topContainer,"top-info-banner","top",c)),this.bottomContainer&&(this.bottomProjector=this.createProjector(this.bottomContainer,"bottom-info-banner","bottom",c)))},f.prototype.createProjector=function(c,d,u,n){var t={key:d,position:u,
bannerConfig:n};return this.store=Object(g.createStore)(function(x,A){A.type;A.payload;return Object(e.a)({},t)},t),Object(g.createProjector)(this.store,function(x){return x(h.a,Object(e.a)({},t))},c)},f.prototype.shimmedRequest=function(c,d){var u=Object(e.a)({},d.query);return this.options.portal&&this.options.portal.user&&this.options.portal.user.credential&&-1<c.indexOf(this.options.portal.restUrl)&&(u.token=this.options.portal.user.credential.token),this.options.request({url:c,content:d.query},
{usePost:"post"===d.method}).then(function(n){return{data:n}})},f}()}})})},"arcgis-components/Component":function(){define(function(){return function(b){function y(a){if(r[a])return r[a].exports;var k=r[a]={i:a,l:!1,exports:{}};return b[a].call(k.exports,k,k.exports,y),k.l=!0,k.exports}var r={};return y.m=b,y.c=r,y.d=function(a,k,e){y.o(a,k)||Object.defineProperty(a,k,{enumerable:!0,get:e})},y.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},y.t=function(a,k){if((1&k&&(a=y(a)),8&k)||4&k&&"object"==typeof a&&a&&a.__esModule)return a;var e=Object.create(null);if(y.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:a}),2&k&&"string"!=typeof a)for(var g in a)y.d(e,g,function(h){return a[h]}.bind(null,g));return e},y.n=function(a){var k=a&&a.__esModule?function(){return a.default}:function(){return a};return y.d(k,"a",k),k},y.o=function(a,k){return Object.prototype.hasOwnProperty.call(a,
k)},y.p="",y(y.s=677)}({0:function(b,y,r){function a(c,d){function u(){this.constructor=c}l(c,d);c.prototype=null===d?Object.create(d):(u.prototype=d.prototype,new u)}function k(c,d){var u={},n;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&0>d.indexOf(n)&&(u[n]=c[n]);if(null!=c&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(n=Object.getOwnPropertySymbols(c);t<n.length;t++)0>d.indexOf(n[t])&&Object.prototype.propertyIsEnumerable.call(c,n[t])&&(u[n[t]]=c[n[t]])}return u}function e(c,
d,u,n){var t,x=arguments.length,A=3>x?d:null===n?n=Object.getOwnPropertyDescriptor(d,u):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)A=Reflect.decorate(c,d,u,n);else for(var B=c.length-1;0<=B;B--)(t=c[B])&&(A=(3>x?t(A):3<x?t(d,u,A):t(d,u))||A);return 3<x&&A&&Object.defineProperty(d,u,A),A}function g(c,d,u,n){return new (u||(u=Promise))(function(t,x){function A(w){try{F(n.next(w))}catch(D){x(D)}}function B(w){try{F(n.throw(w))}catch(D){x(D)}}function F(w){var D;w.done?t(w.value):
(D=w.value,D instanceof u?D:new u(function(q){q(D)})).then(A,B)}F((n=n.apply(c,d||[])).next())})}function h(c,d){function u(F){return function(w){return function(D){if(n)throw new TypeError("Generator is already executing.");for(;B;)try{if(n=1,t&&(x=2&D[0]?t.return:D[0]?t.throw||((x=t.return)&&x.call(t),0):t.next)&&!(x=x.call(t,D[1])).done)return x;switch(t=0,x&&(D=[2&D[0],x.value]),D[0]){case 0:case 1:x=D;break;case 4:return B.label++,{value:D[1],done:!1};case 5:B.label++;t=D[1];D=[0];continue;case 7:D=
B.ops.pop();B.trys.pop();continue;default:if(!(x=B.trys,(x=0<x.length&&x[x.length-1])||6!==D[0]&&2!==D[0])){B=0;continue}if(3===D[0]&&(!x||D[1]>x[0]&&D[1]<x[3]))B.label=D[1];else if(6===D[0]&&B.label<x[1])B.label=x[1],x=D;else if(x&&B.label<x[2])B.label=x[2],B.ops.push(D);else{x[2]&&B.ops.pop();B.trys.pop();continue}}D=d.call(c,B)}catch(q){D=[6,q],t=0}finally{n=x=0}if(5&D[0])throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}([F,w])}}var n,t,x,A,B={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},
trys:[],ops:[]};return A={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A}function m(){for(var c=0,d=0,u=arguments.length;d<u;d++)c+=arguments[d].length;c=Array(c);var n=0;for(d=0;d<u;d++)for(var t=arguments[d],x=0,A=t.length;x<A;x++,n++)c[n]=t[x];return c}r.d(y,"d",function(){return a});r.d(y,"a",function(){return f});r.d(y,"f",function(){return k});r.d(y,"c",function(){return e});r.d(y,"b",function(){return g});r.d(y,"e",function(){return h});
r.d(y,"g",function(){return m});var l=function(c,d){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,n){u.__proto__=n}||function(u,n){for(var t in n)n.hasOwnProperty(t)&&(u[t]=n[t])})(c,d)},f=function(){return(f=Object.assign||function(c){for(var d,u=1,n=arguments.length;u<n;u++)for(var t in d=arguments[u])Object.prototype.hasOwnProperty.call(d,t)&&(c[t]=d[t]);return c}).apply(this,arguments)}},12:function(b,y,r){function a(e){return function h(){for(var m=this,l=[],f=0;f<
arguments.length;f++)l[f]=arguments[f];return l.length>=e.length?e.call.apply(e,Object(k.g)([this],l)):function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return h.call.apply(h,Object(k.g)([m],l,c))}}}r.d(y,"a",function(){return a});var k=r(0)},3:function(b,y,r){function a(c){return 0===Object.keys(c).length&&c.constructor===Object}function k(c){return null!=c}function e(c,d){return l.apply(null,arguments)}function g(c,d){return f.apply(null,arguments)}r.d(y,"b",function(){return a});
r.d(y,"a",function(){return k});r.d(y,"e",function(){return m});r.d(y,"c",function(){return e});r.d(y,"d",function(){return g});var h=r(0);b=r(12);var m=Object(b.a)(function(c,d){d=Object(h.a)({},d);return delete d[c],d}),l=Object(b.a)(function(c,d){return Object.keys(d).reduce(function(u,n){return u[n]=c(d[n],n,d),u},{})}),f=Object(b.a)(function(c,d){return Object.keys(d).reduce(function(u,n){return c(d[n],n,d)&&(u[n]=d[n]),u},{})})},355:function(b,y,r){!function(a){var k=[],e=function(C,E){var G=
{};return Object.keys(C).forEach(function(H){G[H]=C[H]}),E&&Object.keys(E).forEach(function(H){G[H]=E[H]}),G},g=function(C,E){return C.vnodeSelector===E.vnodeSelector&&(C.properties&&E.properties?C.properties.key===E.properties.key&&C.properties.bind===E.properties.bind:!C.properties&&!E.properties)},h=function(C){if("string"!=typeof C)throw Error("Style values must be strings");},m=function(C,E,G,H){var K=C[E];if(""!==K.vnodeSelector){var I=K.properties;if(!(I&&(void 0===I.key?I.bind:I.key)))for(I=
0;I<C.length;I++)if(I!==E&&g(C[I],K))throw Error(G.vnodeSelector+" had a "+K.vnodeSelector+" child "+("added"===H?H:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.");}},l=[],f=!1,c=function(C){(C.children||[]).forEach(c);C.properties&&C.properties.afterRemoved&&C.properties.afterRemoved.apply(C.properties.bind||C.properties,[C.domNode])},d=function(){f=!1;l.forEach(c);l.length=0},u=function(C){l.push(C);f||(f=!0,"undefined"!=typeof window&&
"requestIdleCallback"in window?window.requestIdleCallback(d,{timeout:16}):setTimeout(d,16))},n=function(C){var E=C.domNode;if(C.properties){var G=C.properties.exitAnimation;if(G)return E.style.pointerEvents="none",void G(E,function(){E.parentNode&&(E.parentNode.removeChild(E),u(C))},C.properties)}E.parentNode&&(E.parentNode.removeChild(E),u(C))},t=function(C,E,G){!function(H,K,I){if(K)for(var J=0;J<K.length;J++)x(K[J],H,void 0,I)}(C,E.children,G);E.text&&(C.textContent=E.text);(function(H,K,I){if(K)for(var J=
I.eventHandlerInterceptor,Q=Object.keys(K),V=Q.length,O=function(L){var Y,ca=Q[L];L=K[ca];if("className"===ca)throw Error('Property "className" is not supported, use "class".');if("class"===ca)A(H,L,!0);else if("classes"===ca){var U=Object.keys(L),X=U.length;for(ca=0;ca<X;ca++){var Z=U[ca];L[Z]&&H.classList.add(Z)}}else if("styles"===ca)for(U=Object.keys(L),X=U.length,ca=0;ca<X;ca++){Z=U[ca];var N=L[Z];N&&(h(N),I.styleApplyer(H,Z,N))}else"key"!==ca&&null!=L&&(U=typeof L,"function"===U?0===ca.lastIndexOf("on",
0)&&(J&&(L=J(ca,L,H,K)),"oninput"===ca&&(Y=L,L=function(aa){Y.apply(this,[aa]);aa.target["oninput-value"]=aa.target.value}),H[ca]=L):"http://www.w3.org/2000/svg"===I.namespace?"href"===ca?H.setAttributeNS("http://www.w3.org/1999/xlink",ca,L):H.setAttribute(ca,L):"string"===U&&"value"!==ca&&"innerHTML"!==ca?H.setAttribute(ca,L):H[ca]=L)},S=0;S<V;S++)O(S)})(C,E.properties,G);E.properties&&E.properties.afterCreate&&E.properties.afterCreate.apply(E.properties.bind||E.properties,[C,G,E.vnodeSelector,E.properties,
E.children])},x=function(C,E,G,H){var K=0,I=C.vnodeSelector,J=E.ownerDocument;if(""===I){var Q=C.domNode=J.createTextNode(C.text);void 0!==G?E.insertBefore(Q,G):E.appendChild(Q)}else{for(var V=0;V<=I.length;++V){var O=I.charAt(V);if(V===I.length||"."===O||"#"===O)O=I.charAt(K-1),K=I.slice(K,V),"."===O?Q.classList.add(K):"#"===O?Q.id=K:("svg"===K&&(H=e(H,{namespace:"http://www.w3.org/2000/svg"})),void 0!==H.namespace?Q=C.domNode=J.createElementNS(H.namespace,K):(Q=C.domNode=C.domNode||J.createElement(K),
"input"===K&&C.properties&&void 0!==C.properties.type&&Q.setAttribute("type",C.properties.type)),void 0!==G?E.insertBefore(Q,G):Q.parentNode!==E&&E.appendChild(Q)),K=V+1}t(Q,C,H)}},A=function(C,E,G){E&&E.split(" ").forEach(function(H){H&&C.classList.toggle(H,G)})};var B=function(C,E,G){var H=C.domNode,K=!1;if(C===E)return!1;var I=!1;if(""===E.vnodeSelector){if(E.text!==C.text)return C=H.ownerDocument.createTextNode(E.text),H.parentNode.replaceChild(C,H),E.domNode=C,K=!0;E.domNode=H}else 0===E.vnodeSelector.lastIndexOf("svg",
0)&&(G=e(G,{namespace:"http://www.w3.org/2000/svg"})),C.text!==E.text&&(I=!0,void 0===E.text?H.removeChild(H.firstChild):H.textContent=E.text),E.domNode=H,I=function(J,Q,V,O,S){if(V===O)return!1;O=O||k;for(var L,Y=(V=V||k).length,ca=O.length,U=L=0,X=!1;U<ca;){var Z=L<Y?V[L]:void 0,N=O[U];if(void 0!==Z&&g(Z,N))X=B(Z,N,S)||X,L++;else{a:{Z=V;var aa=N;if(""!==aa.vnodeSelector)for(var ka=L+1;ka<Z.length;ka++)if(g(Z[ka],aa)){Z=ka;break a}Z=-1}if(0<=Z){for(;L<Z;L++)n(V[L]),m(V,L,J,"removed");X=B(V[Z],N,
S)||X;L=Z+1}else x(N,Q,L<Y?V[L].domNode:void 0,S),N.properties&&(Z=N.properties.enterAnimation)&&Z(N.domNode,N.properties),m(O,U,J,"added")}U++}if(Y>L)for(;L<Y;L++)n(V[L]),m(V,L,J,"removed");return X}(E,H,C.children,E.children,G)||I,I=function(J,Q,V,O){if(V){for(var S=!1,L=Object.keys(V),Y=L.length,ca=0;ca<Y;ca++){var U=L[ca],X=V[U],Z=Q[U];if("class"===U)Z!==X&&(A(J,Z,!1),A(J,X,!0));else if("classes"===U){var N=J.classList,aa=Object.keys(X),ka=aa.length;for(U=0;U<ka;U++){var pa=aa[U],ta=!!X[pa];ta!==
!!Z[pa]&&(S=!0,ta?N.add(pa):N.remove(pa))}}else if("styles"===U)for(N=Object.keys(X),aa=N.length,U=0;U<aa;U++)ka=N[U],pa=X[ka],pa!==Z[ka]&&(S=!0,pa?(h(pa),O.styleApplyer(J,ka,pa)):O.styleApplyer(J,ka,""));else(X||"string"!=typeof Z||(X=""),"value"===U)?(N=J[U],N!==X&&(J["oninput-value"]?N===J["oninput-value"]:X!==Z)&&(J[U]=X,J["oninput-value"]=void 0),X!==Z&&(S=!0)):X!==Z&&(Z=typeof X,"function"===Z&&O.eventHandlerInterceptor||("http://www.w3.org/2000/svg"===O.namespace?"href"===U?J.setAttributeNS("http://www.w3.org/1999/xlink",
U,X):J.setAttribute(U,X):"string"===Z&&"innerHTML"!==U?"role"===U&&""===X?J.removeAttribute(U):J.setAttribute(U,X):J[U]!==X&&(J[U]=X),S=!0))}return S}}(H,C.properties,E.properties,G)||I,E.properties&&E.properties.afterUpdate&&E.properties.afterUpdate.apply(E.properties.bind||E.properties,[H,G,E.vnodeSelector,E.properties,E.children]);return I&&E.properties&&E.properties.updateAnimation&&E.properties.updateAnimation(H,E.properties,C.properties),K};var F=function(C,E){return{getLastRender:function(){return C},
update:function(G){if(C.vnodeSelector!==G.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var H=C;C=G;B(H,G,E)},domNode:C.domNode}},w={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(C,E,G){C.style[E]=G}},D={create:function(C,E){return E=e(w,E),x(C,document.createElement("div"),void 0,E),F(C,E)},append:function(C,E,G){return G=e(w,G),x(E,C,void 0,
G),F(E,G)},insertBefore:function(C,E,G){return G=e(w,G),x(E,C.parentNode,C,G),F(E,G)},merge:function(C,E,G){return G=e(w,G),E.domNode=C,t(C,E,G),F(E,G)},replace:function(C,E,G){return G=e(w,G),x(E,C.parentNode,C,G),C.parentNode.removeChild(C),F(E,G)}},q=function(C,E,G){for(var H=0,K=E.length;H<K;H++){var I=E[H];Array.isArray(I)?q(C,I,G):null!=I&&!1!==I&&("string"==typeof I&&(I={vnodeSelector:"",properties:void 0,children:void 0,text:I.toString(),domNode:null}),G.push(I))}};var v=Array.prototype.find?
function(C,E){return C.find(E)}:function(C,E){return C.filter(E)[0]};var z=function(C,E){var G=C;return E.forEach(function(H){G=G&&G.children?v(G.children,function(K){return K.domNode===H}):void 0}),G};a.createCache=function(){var C,E;return{invalidate:function(){C=E=void 0},result:function(G,H){if(C)for(var K=0;K<G.length;K++)C[K]!==G[K]&&(E=void 0);return E||(E=H(),C=G),E}}};a.createMapping=function(C,E,G){var H=[],K=[];return{results:K,map:function(I){for(var J=I.map(C),Q=K.slice(),V=0,O=0;O<I.length;O++){var S=
I[O],L=J[O];if(L===H[V])K[O]=Q[V],G(S,Q[V],O),V++;else{for(var Y=!1,ca=1;ca<H.length+1;ca++){var U=(V+ca)%H.length;if(H[U]===L){K[O]=Q[U];G(I[O],Q[U],O);V=U+1;Y=!0;break}}Y||(K[O]=E(S,O))}}K.length=I.length;H=J}}};a.createProjector=function(C){var E,G,H=e(w,C),K=H.performanceLogger,I=!0,J=!1,Q=[],V=[],O=function(L,Y,ca){H.eventHandlerInterceptor=function(X,Z,N){var aa=function(ka){N("domEvent",ka);for(var pa=Z(),ta=ka.currentTarget,Ba=pa.domNode,Da=[];ta&&ta!==Ba;)Da.push(ta),ta=ta.parentNode;Da.reverse();
var oa;pa=z(pa.getLastRender(),Da);return X.scheduleRender(),pa&&(oa=pa.properties["on"+ka.type].apply(pa.properties.bind||this,arguments)),N("domEventProcessed",ka),oa};return function(ka,pa,ta,Ba){return aa}}(E,function(){return U},K);var U=L(Y,ca(),H);Q.push(U);V.push(ca)},S=function(){if(G=void 0,I){I=!1;K("renderStart",void 0);for(var L=0;L<Q.length;L++){var Y=V[L]();K("rendered",void 0);Q[L].update(Y);K("patched",void 0)}K("renderDone",void 0);I=!0}};return E={renderNow:S,scheduleRender:function(){G||
J||(G=requestAnimationFrame(S))},stop:function(){G&&(cancelAnimationFrame(G),G=void 0);J=!0},resume:function(){J=!1;I=!0;E.scheduleRender()},append:function(L,Y){O(D.append,L,Y)},insertBefore:function(L,Y){O(D.insertBefore,L,Y)},merge:function(L,Y){O(D.merge,L,Y)},replace:function(L,Y){O(D.replace,L,Y)},detach:function(L){for(var Y=0;Y<V.length;Y++)if(V[Y]===L)return V.splice(Y,1),Q.splice(Y,1)[0];throw Error("renderFunction was not found");}}};a.dom=D;a.h=function(C,E,G){if(Array.isArray(E))G=E,
E=void 0;else if(E&&("string"==typeof E||E.hasOwnProperty("vnodeSelector"))||G&&("string"==typeof G||G.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");var H,K;return G&&1===G.length&&"string"==typeof G[0]?H=G[0]:G&&(q(C,G,K=[]),0===K.length&&(K=void 0)),{vnodeSelector:C,properties:E,children:K,text:""===H?void 0:H,domNode:null}};Object.defineProperty(a,"__esModule",{value:!0})}(y)},51:function(b,y,r){function a(){for(var k=[],e=0;e<arguments.length;e++)k[e]=arguments[e];
return function(g){return k.reduceRight(function(h,m){return m(h)},g)}}r.d(y,"a",function(){return a})},677:function(b,y,r){function a(A,B,F,w){var D=new t({key:"root"},B);A&&(D.store=A);var q=Object(c.createProjector)(w);B=Object(f.a)(Object(f.a)({},q),{append:function(v){return q.append(v,function(){return D.render.bind(D)(D.tsx.bind(D))})}});return B.append(F),A&&A.subscribe(function(){return q.scheduleRender()}),B}function k(A,B){return function(F){return function(w,D){return function(q,v){return D(F,
Object(f.a)(Object(f.a)(Object(f.a)({},w),A(v(),w)),B(q,w)))}}}}function e(){for(var A=[],B=0;B<arguments.length;B++)A[B]=arguments[B];return function(F){return function(w,D){var q=F(w,D);w=d.a;var v=q.dispatch;D=A.map(function(z){return z({dispatch:function(C){return v(C)},getState:q.getState})});return v=w.apply(void 0,D)(q.dispatch),Object(f.a)(Object(f.a)({},q),{dispatch:v})}}}function g(A){return function(B){return function(F,w){return B(function(D,q){if("@@shunt/SETSTATE"===q.type)return q.payload;
D=F(D,q);return-1===q.type.indexOf("@@component/INIT")&&A(q,D),D},w)}}}function h(A){return function(B){B.dispatch;var F=B.getState;return function(w){return function(D){var q=w(D);return A(D,F()),q}}}}function m(A){var B=Object(u.d)(function(F){return"function"==typeof F},A);return function(F,w){return void 0===F&&(F={}),Object(u.c)(function(D,q){return D(F[q],w)},B)}}function l(A,B){var F=B,w=[];B={dispatch:function(D){return F=A(F,D),w.forEach(function(q){return q()}),D},subscribe:function(D){return w.push(D),
function(){w.splice(w.indexOf(D),1)}},getState:function(){return F}};return B.dispatch({type:"@@component/INIT"+Math.random().toString(36).substring(7)}),B}r.r(y);r.d(y,"createProjector",function(){return a});r.d(y,"Component",function(){return n});r.d(y,"RootComponent",function(){return t});r.d(y,"connect",function(){return k});r.d(y,"applyMiddleware",function(){return e});r.d(y,"shunt",function(){return g});r.d(y,"thunk",function(){return x});r.d(y,"addListener",function(){return h});r.d(y,"combineReducers",
function(){return m});r.d(y,"createStore",function(){return l});var f=r(0),c=r(355),d=r(51),u=r(3),n=function(){function A(B){this.childComponents={};this.state={};this.props=B}return A.prototype.componentDidConnect=function(){},A.prototype.componentWillReceiveProps=function(B){},A.prototype.setState=function(B){this.state=Object(f.a)(Object(f.a)({},this.state),B);this.store&&this.store.dispatch({type:this.props.key+"_COMPONENT_STATE_UPDATE"})},A.prototype.tsx=function(B,F,w){var D=Array.prototype.slice.call(arguments).slice(2);
if("string"==typeof B)var q=c.h.apply(this,[B,F,D]);else if(B.prototype&&B.prototype.constructor.name){var v=B;D=Object(f.a)(Object(f.a)({},F),{children:D});var z=this.childComponents[D.key];z?(z.componentWillReceiveProps(D),z.props=D,q=z.render(z.tsx.bind(z))):((z=this.childComponents[D.key]=new v(D)).store=this.store,z.componentDidConnect(),q=z.render(z.tsx.bind(z)))}else q=(v=B)(Object(f.a)(Object(f.a)({},F),{children:D}),this.tsx.bind(this));return"function"==typeof q?q(this.store.dispatch,this.store.getState):
q},A}(),t=function(A){function B(F,w){F=A.call(this,F)||this;return F.renderRoot=w,F}return Object(f.d)(B,A),B.prototype.render=function(F){var w=this;return F(function(D,q){return w.renderRoot(q)})},B}(n);void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var A=/function\s([^(]{1,})\(/.exec(this.toString());return A&&1<A.length?A[1].trim():""},set:function(A){}});var x=function(A){var B=A.dispatch,F=A.getState;return function(w){return function(D){return"function"==
typeof D?D(B,F):w(D)}}}}})})},"arcgis-components/InfoBanner/index":function(){define(["../Component"],function(b){return function(y){function r(k){if(a[k])return a[k].exports;var e=a[k]={i:k,l:!1,exports:{}};return y[k].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var a={};return r.m=y,r.c=a,r.d=function(k,e,g){r.o(k,e)||Object.defineProperty(k,e,{enumerable:!0,get:g})},r.r=function(k){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"});Object.defineProperty(k,
"__esModule",{value:!0})},r.t=function(k,e){if((1&e&&(k=r(k)),8&e)||4&e&&"object"==typeof k&&k&&k.__esModule)return k;var g=Object.create(null);if(r.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:k}),2&e&&"string"!=typeof k)for(var h in k)r.d(g,h,function(m){return k[m]}.bind(null,h));return g},r.n=function(k){var e=k&&k.__esModule?function(){return k.default}:function(){return k};return r.d(e,"a",e),e},r.o=function(k,e){return Object.prototype.hasOwnProperty.call(k,e)},r.p="",r(r.s=
724)}({0:function(y,r,a){function k(d,u){function n(){this.constructor=d}f(d,u);d.prototype=null===u?Object.create(u):(n.prototype=u.prototype,new n)}function e(d,u){var n={},t;for(t in d)Object.prototype.hasOwnProperty.call(d,t)&&0>u.indexOf(t)&&(n[t]=d[t]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(t=Object.getOwnPropertySymbols(d);x<t.length;x++)0>u.indexOf(t[x])&&Object.prototype.propertyIsEnumerable.call(d,t[x])&&(n[t[x]]=d[t[x]])}return n}function g(d,u,n,t){var x,
A=arguments.length,B=3>A?u:null===t?t=Object.getOwnPropertyDescriptor(u,n):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(d,u,n,t);else for(var F=d.length-1;0<=F;F--)(x=d[F])&&(B=(3>A?x(B):3<A?x(u,n,B):x(u,n))||B);return 3<A&&B&&Object.defineProperty(u,n,B),B}function h(d,u,n,t){return new (n||(n=Promise))(function(x,A){function B(D){try{w(t.next(D))}catch(q){A(q)}}function F(D){try{w(t.throw(D))}catch(q){A(q)}}function w(D){var q;D.done?x(D.value):(q=D.value,
q instanceof n?q:new n(function(v){v(q)})).then(B,F)}w((t=t.apply(d,u||[])).next())})}function m(d,u){function n(w){return function(D){return function(q){if(t)throw new TypeError("Generator is already executing.");for(;F;)try{if(t=1,x&&(A=2&q[0]?x.return:q[0]?x.throw||((A=x.return)&&A.call(x),0):x.next)&&!(A=A.call(x,q[1])).done)return A;switch(x=0,A&&(q=[2&q[0],A.value]),q[0]){case 0:case 1:A=q;break;case 4:return F.label++,{value:q[1],done:!1};case 5:F.label++;x=q[1];q=[0];continue;case 7:q=F.ops.pop();
F.trys.pop();continue;default:if(!(A=F.trys,(A=0<A.length&&A[A.length-1])||6!==q[0]&&2!==q[0])){F=0;continue}if(3===q[0]&&(!A||q[1]>A[0]&&q[1]<A[3]))F.label=q[1];else if(6===q[0]&&F.label<A[1])F.label=A[1],A=q;else if(A&&F.label<A[2])F.label=A[2],F.ops.push(q);else{A[2]&&F.ops.pop();F.trys.pop();continue}}q=u.call(d,F)}catch(v){q=[6,v],x=0}finally{t=A=0}if(5&q[0])throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}([w,D])}}var t,x,A,B,F={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],
ops:[]};return B={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B}function l(){for(var d=0,u=0,n=arguments.length;u<n;u++)d+=arguments[u].length;d=Array(d);var t=0;for(u=0;u<n;u++)for(var x=arguments[u],A=0,B=x.length;A<B;A++,t++)d[t]=x[A];return d}a.d(r,"d",function(){return k});a.d(r,"a",function(){return c});a.d(r,"f",function(){return e});a.d(r,"c",function(){return g});a.d(r,"b",function(){return h});a.d(r,"e",function(){return m});
a.d(r,"g",function(){return l});var f=function(d,u){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var x in t)t.hasOwnProperty(x)&&(n[x]=t[x])})(d,u)},c=function(){return(c=Object.assign||function(d){for(var u,n=1,t=arguments.length;n<t;n++)for(var x in u=arguments[n])Object.prototype.hasOwnProperty.call(u,x)&&(d[x]=u[x]);return d}).apply(this,arguments)}},10:function(y,r){y.exports=b},724:function(y,r,a){a.r(r);var k=a(0);y=function(e){function g(h){return e.call(this,
h)||this}return Object(k.d)(g,e),g.prototype.render=function(h){var m=this.props.position,l=this.props.bannerConfig;return h("div",{classes:{"info-banner":!0,"info-banner--top":"top"===m,"info-banner--bottom":"bottom"===m},style:"background-color: "+l.bgColor+"; color: "+l.fontColor},h("p",{class:"info-banner-text"},l.text))},g}(a(10).Component);r.default=y}})})},"arcgisonline/pages/utils/notebook":function(){define("require exports tslib ../../esriGeowConfig esri/lang esri/urlUtils ../../sharing/util dojo/Deferred dojo/request dojo/promise/all dojo/on dojo/string dojo/dom-construct dojo/dom-class dojo/dom-attr arcgisonline/pages/pageUtil arcgisonline/sharing/dijit/dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);u=r.__importDefault(u);n=r.__importDefault(n);t=r.__importDefault(t);x=r.__importDefault(x);A=r.__importDefault(A);return function(){function B(){}B.notebookServerConfigured=function(){var F,w;if(a.default.self&&a.default.self.isPortal)return a.default.notebookServerEnabled&&
a.default.self.supportsHostedNotebooks?!0:!1;var D=-1!==["Trial Developer","Trial","Trial Press","Developer Subscription"].indexOf(null===(F=a.default.self.subscriptionInfo)||void 0===F?void 0:F.type);return a.default.notebookServerEnabled&&(!D||-1!==((null===(w=a.default.self)||void 0===w?void 0:w.allowedBetaFeatures)||[]).indexOf("notebooks"))};B.getNotebookServer=function(){var F=new h.default;(a.default.portal||a.default.self).isPortal?a.default.userInfo?a.default.portal.getFederatedServers().then(function(w){k.default.isDefined(w)&&
k.default.isDefined(w.servers)&&k.default.isDefined(w.servers.length)?(w=w.servers.filter(function(D){return"ARCGIS_NOTEBOOK_SERVER"===D.serverType&&"NotebookServer"===D.serverFunction}),w.length?(w=w[0],w.adminContext="/admin",F.resolve(w)):F.resolve(null)):F.resolve(null)},function(w){F.resolve(null)}):F.resolve(null):g.default.request({url:a.default.restBaseUrl+"/portals/self/urls"}).then(function(w){var D,q;(w=null===(q=null===(D=null===w||void 0===w?void 0:w.urls)||void 0===D?void 0:D.notebooks)||
void 0===q?void 0:q.https)?F.resolve({url:"https://"+w,adminContext:""}):F.resolve(null)},function(w){F.resolve(null)});return F};B.notebooksBetaFormatter=function(F){return F};B.buildSelfSignedErrorMessage=function(F,w,D){F.messageHTML="\n      \x3ch4\x3e\n        "+(D?A.default.notebookViewer.openNotebookServerCertificateError:A.default.notebookViewer.openNotebookCertificateError)+"\n      \x3c/h4\x3e\n      \x3cp\x3e\n        "+A.default.notebookViewer.openNotebookCertificateErrorDescription+"\n      \x3c/p\x3e\n      \x3col\x3e\n        \x3cli\x3e\n          "+
A.default.notebookViewer.openNotebookCertificateErrorStep1+'\n          \x3ca href\x3d"'+(w.url+w.adminContext)+'" target\x3d"_blank" \x3e\n            '+(w.url+w.adminContext)+"\n          \x3c/a\x3e\n        \x3c/li\x3e\n        \x3cli\x3e"+A.default.notebookViewer.openNotebookCertificateErrorStep2+"\x3c/li\x3e\n        \x3cli\x3e"+A.default.notebookViewer.openNotebookCertificateErrorStep3+"\x3c/li\x3e\n      \x3c/ol\x3e"};B.getNotebookServerMachines=function(F){var w=new h.default,D=[],q={useJsonFormatParam:!0,
useCredentials:!0};B.notebookRequest(F+"/admin/machines/","GET",null,q).then(function(v){v=(null===v||void 0===v?void 0:v.machines)||[];v.length?(v.forEach(function(z){var C=new h.default;l.default({hardware:B.getNotebookServerMachineHardware(F,z,q),health:B.getNotebookServerMachineHealth(F,z,q)}).then(function(E){C.resolve({machineName:z.machineName,hardware:E.hardware,health:E.health})});D.push(C)}),l.default(D).then(function(z){w.resolve(z)})):w.resolve([])});return w};B.getNotebookServerMachineHardware=
function(F,w,D){var q=new h.default;B.notebookRequest(F+"/admin/machines/"+w.machineName+"/hardware","GET",null,D).then(function(v){q.resolve(v)},function(v){q.resolve({error:v})});return q};B.getNotebookServerMachineHealth=function(F,w,D){var q=new h.default;B.notebookRequest(F+"/admin/machines/"+w.machineName+"/status","GET",null,D).then(function(v){q.resolve(v)},function(v){q.resolve({error:v})});return q};B.getNotebookServerOS=function(F){var w=new h.default,D={useJsonFormatParam:!0,useCredentials:!0};
B.notebookRequest(F+"/admin/machines/","GET",null,D).then(function(q){((null===q||void 0===q?void 0:q.machines)||[]).length?B.notebookRequest(F+"/admin/machines/"+q.machines[0].machineName+"/hardware","GET",null,D).then(function(v){v=-1!==(v.os||"").toLowerCase().indexOf("windows")?"windows":"linux";w.resolve(v)},function(v){w.reject(v)}):w.reject()});return w};B.getNotebookRuntimes=function(F){var w=new h.default;B.getNotebookServer().then(function(D){null!==D?B.getNotebookRuntimesBase(D.url).then(function(q){F?
w.resolve({runtimes:q.runtimes,server:D}):w.resolve(q.runtimes)},function(q){w.reject(q)}):w.reject()});return w};B.getNotebookRuntimesBase=function(F){return B.notebookRequest(F+"/admin/notebooks/runtimes","GET",null,{useJsonFormatParam:!0,useCredentials:!0})};B.getNotebookRuntimeInfo=function(F,w){var D=this,q=new h.default;F&&w?this.getNotebookRuntimes(!0).then(function(v){var z=v.runtimes.filter(function(C){return C.name.toLowerCase()===F.toLowerCase()&&C.version.toLowerCase()===w.toLowerCase()});
1!==z.length?q.reject():D.notebookRequest(v.server.url+"/admin/notebooks/runtimes/"+z[0].id+"/manifest","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(C){q.resolve(C)},function(C){q.reject(C)})},function(v){q.reject(v)}):q.reject();return q};B.startNotebookServerPoller=function(){setInterval(function(){B.getNotebookServerInfo()},6E5)};B.getNotebookServerInfo=function(){var F=new h.default;B.getNotebookServer().then(function(w){null!==w?B.pingNotebookServer(w.url).then(function(D){F.resolve(D)},
function(D){F.reject(D)}):F.reject()});return F};B.pingNotebookServer=function(F){var w=new h.default;B.notebookRequest(F+"/rest/info","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){w.resolve(D)},function(D){w.reject(D)});return w};B.getSampleNotebooksGroup=function(){var F=new h.default,w=a.default.self&&a.default.self.isPortal?"esri sample notebooks":"arcgis sample notebooks";g.default.request({url:a.default.restBaseUrl+"community/groups",content:{q:"title:("+w+') AND owner:"esri_notebook"'}}).then(function(D){D=
(D.results||[]).filter(function(q){return(q.title||"").toLowerCase()===w});1===D.length?F.resolve({id:D[0].id}):F.resolve({id:null})},function(D){F.resolve({id:null})});return F};B.getSampleNotebooksUrl=function(){var F=new h.default;B.getSampleNotebooksGroup().then(function(w){w.id&&F.resolve(a.default.baseUrl+"group.html?id\x3d"+w.id+"#content")});return F};B.getSampleNotebooks=function(){var F=new h.default;B.getSampleNotebooksGroup().then(function(w){w.id?g.default.request({url:a.default.restBaseUrl+
"content/groups/"+w.id}).then(function(D){F.resolve({items:(D.items||[]).filter(function(q){return"notebook"===(q.type||"").toLowerCase()})})},function(D){F.resolve({items:[]})}):F.resolve({items:[]})});return F};B.getAllNotebooks=function(F){var w=new h.default;B.notebookRequest(F+"/admin/notebooks","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){w.resolve(D)},function(D){w.reject({error:D})});return w};B.getNotebookServerDirectories=function(F){var w=new h.default;B.notebookRequest(F+
"/admin/system/directories","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(D){w.resolve(D)},function(D){w.resolve({error:D})});return w};B.deleteDataDirectory=function(F,w){var D=new h.default;B.notebookRequest(F+"/admin/system/directories/"+w+"/unregister","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(q){D.resolve(q)},function(q){D.resolve({error:q})});return D};B.deleteNotebookRuntime=function(F,w){var D=new h.default;B.notebookRequest(F+"/admin/notebooks/runtimes/"+
w+"/unregister","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(q){D.resolve(q)},function(q){D.resolve({error:q})});return D};B.getAllContainers=function(F){var w=new h.default,D={allUsers:a.default.userRole.isAdmin()};B.notebookRequest(F+"/admin/system/containers","GET",D,{useJsonFormatParam:!0,useCredentials:!0}).then(function(q){w.resolve(q)},function(q){w.resolve({error:q})});return w};B.terminateContainer=function(F,w){var D=new h.default;B.notebookRequest(F+"/admin/system/containers/"+
w+"/terminateContainer","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(q){D.resolve(q)},function(q){D.resolve({error:q})});return D};B.getNotebookServerLogs=function(F,w){var D=new h.default;B.notebookRequest(F+"/admin/logs/query","GET",w,{useJsonFormatParam:!0,useCredentials:!0}).then(function(q){D.resolve(q)},function(q){D.resolve({error:q})});return D};B.deleteNotebookServerLogs=function(F){var w=new h.default;B.notebookRequest(F+"/admin/logs/clean","POST",null,{useJsonFormatParam:!0,
useCredentials:!0}).then(function(D){w.resolve(D)},function(D){w.reject({error:D})});return w};B.createNotebookRuntimeProperties=function(F,w,D){void 0===D&&(D=null);D=D||w.value;F=F.filter(function(q){return q.id===D})[0];return JSON.stringify({notebookRuntimeName:F.name,notebookRuntimeVersion:F.version})};B.formatNotebookRuntimeVersion=function(F){return{"10.7":"1.0","10.7.0":"1.0","10.7.1":"2.0","10.8":"3.0","10.8.0":"3.0","10.8.1":"4.0"}[F]||F};B.showRuntimeInfo=function(F,w,D){var q=D.target;
"runtime-button"===(null===q||void 0===q?void 0:q.name)&&(q.disabled=!0);D.stopPropagation();D.preventDefault();F=F||n.default.get(D.currentTarget,"data-runtime-name");w=w||n.default.get(D.currentTarget,"data-runtime-version");var v=F+(w?" - "+B.formatNotebookRuntimeVersion(w):""),z=t.default.createSpecifiedDialog(x.default);u.default.add(z._dialog.domNode,"notebook__runtime-info-dialog");B.getNotebookRuntimeInfo(F,w).then(function(C){C=B.buildRuntimeInfoTable(C,v);z.show({title:v,content:C})},function(C){z.show({title:A.default.generalDlg.errorDlgTitle,
message:A.default.notebookViewer.tabContent.info.runtimeInfoError})});f.default.once(z,"hide",function(){z.destroyRecursive();"runtime-button"===(null===q||void 0===q?void 0:q.name)&&(q.disabled=!1)})};B.buildRuntimeInfoTable=function(F,w){var D=d.default.create("div",null);if((F.libraries||[]).length){d.default.create("p",{innerHTML:c.default.substitute(A.default.notebookViewer.tabContent.info.runtimeMessage,[w])},D);w=d.default.create("table",{class:"table"},D);var q=d.default.create("thead",null,
w);q=d.default.create("tr",null,q);d.default.create("th",{innerHTML:A.default.notebookViewer.tabContent.info.name},q);d.default.create("th",{innerHTML:A.default.notebookViewer.tabContent.info.version},q);var v=d.default.create("tbody",null,w);F.libraries.forEach(function(z){var C=d.default.create("tr",null,v);d.default.create("td",{innerHTML:z.name},C);d.default.create("td",{innerHTML:z.version},C)})}else d.default.create("p",{innerHTML:c.default.substitute(A.default.notebookViewer.tabContent.info.runtimeMessageNoManifest,
[w])},D);return D.outerHTML};B.getContainerLogs=function(F,w){return B.notebookRequest(F+"/admin/system/containers/"+w+"/logs","POST",null,{useJsonFormatParam:!0,useCredentials:!0})};B.getContainerInformation=function(F,w){var D=new h.default,q={useJsonFormatParam:!0,useCredentials:!0};l.default({containerInfo:B.notebookRequest(F+"/admin/system/containers/"+w,"GET",null,q),containerStats:B.notebookRequest(F+"/admin/system/containers/"+w+"/statistics","GET",null,q)}).then(function(v){D.resolve(v)},
function(v){D.reject(v)});return D};B.createRuntimeSelect=function(F,w,D){F=F||[];F.sort(function(z,C){return C.esriProvidedRuntime-z.esriProvidedRuntime});var q=a.default.userRole.canCreateAdvancedNotebooks();q||(F=F.filter(function(z){return!z.requiresAdvancedPrivileges}));var v={esriProvided:0,custom:0};F.forEach(function(z){var C={value:z.id,innerHTML:z.name+(z.version?" - "+B.formatNotebookRuntimeVersion(z.version):"")};B.formatNotebookRuntimeVersion(w)!==B.formatNotebookRuntimeVersion(z.version)&&
z.esriProvidedRuntime||(z.esriProvidedRuntime?(v.esriProvided++,q?z.requiresAdvancedPrivileges&&!z.supportsGPU&&(C.selected=""):C.selected=""):v.custom++,d.default.create("option",C,D))});return v};B.showNotebookPreview=function(F,w,D){var q=new h.default;w=a.default.restBaseUrl+"content/items/"+w+"/resources/"+D;D=e.default.hasSameOrigin(w,window.location.href);g.default.request({url:w,content:{"request.preventCache":+new Date}},{useProxy:!D}).then(function(v){if(v.html){var z=F.contentWindow.document;
z.open();z.write(v.html);z.close();q.resolve({success:!0})}else q.resolve({success:!1,error:v.error})}.bind(this),function(v){q.resolve({success:!1,error:v})}.bind(this));return q};B.canScheduleNotebooks=function(F,w){var D=new h.default,q="Notebook"===(null===w||void 0===w?void 0:w.type),v=B.notebookServerConfigured();q&&v&&!a.default.hideTasks&&B.getNotebookRuntimes().then(function(z){var C,E,G,H=null===(C=w.properties)||void 0===C?void 0:C.notebookRuntimeName,K=B.formatNotebookRuntimeVersion(null===
(E=w.properties)||void 0===E?void 0:E.notebookRuntimeVersion);z=(z||[]).some(function(I){return I.esriProvidedRuntime&&H===I.name&&K===B.formatNotebookRuntimeVersion(I.version)&&"1.0"!==K&&"2.0"!==K});(null===(G=null===F||void 0===F?void 0:F.userRole)||void 0===G?0:G.canScheduleNotebooks())&&(null===w||void 0===w?0:w.isOwner)&&z&&document.body.classList.add("can-schedule-notebooks");D.resolve(!0)},function(z){D.resolve(!1)});return D};B.notebookRequest=function(F,w,D,q){q=q||{};var v={},z={"X-Requested-With":null},
C=a.default.userInfo?a.default.userInfo.token:null;q.useJsonFormatParam&&(v.f="json");"GET"===w&&(v=r.__assign(r.__assign({},v),D));q.bypassCustomHeaders||(z["X-Esri-Authorization"]="Bearer "+C,q.useJsonBody&&(z["Content-Type"]="application/json"));q.contentType&&(z["Content-Type"]=q.contentType);v={data:q.useJsonBody?D?JSON.stringify(D):null:D,method:w,handleAs:"json",headers:Object.keys(z).length?z:null,query:Object.keys(v).length?v:null,preventCache:!1===q.preventCache?!1:!0,withCredentials:q.bypassCustomHeaders?
!1:!0};z={url:F};"multipart/form-data"===q.contentType?z.form=D:z.content=D;return q.useProxy?g.default.request(z,{usePost:"POST"===w,useProxy:q.useProxy}):m.default(F,v)};return B}()})},"arcgisonline/pages/utils/notifications":function(){define("require exports tslib moment/moment dojo/promise/all dojo/Deferred dojo/string ../../esriGeowConfig ../../sharing/util dojo/i18n!../../nls/arcgisonline".split(" "),function(b,y,r,a,k,e,g,h,m,l){function f(c){return m.default.request({url:h.default.restBaseUrl+
"community/users/"+c.username+"/notifications/"+c.id+"/delete"},{usePost:!0})}a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);return{fetchNotifications:function(c,d){c=c.username||c.email;return c?m.default.request({url:h.default.restBaseUrl+"community/users/"+c+"/notifications"}).then(function(u){return(u.notifications||[]).map(function(n){if(n&&n.received&&n.id){var t={date:a.default(n.received).fromNow(),
id:n.id,text:""};"webapp_not_copied"===n.type&&d.isPortal&&(n.type="webapp_not_copied_portal");l.default.notifications.types[n.type]&&(n.data.baseUrl=h.default.baseUrl,t.text=g.default.substitute(l.default.notifications.types[n.type],n.data));"message_received"===n.type&&n.data&&n.data.message&&(t.text=n.data.message);n=t.text&&t}else n=null;return n}).filter(function(n){return n})}):(c=new e.default,c.resolve([]),c)},deleteNotifications:function(c,d){d=d.map(function(u){return{username:c.username,
id:u}}).map(f);return k.default(d)}}})},"arcgisonline/pages/portal/PortalItem":function(){define("require exports tslib ../pageUtil ../getThumbnail ./CommentsUtil ../item/_Info ../utils/arrays ../utils/item ../utils/socialMedia ../../sharing/util ../../esriGeowConfig ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/promise/all dojo/Stateful esri/lang esri/arcgis/Portal ../utils/url".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w){a=
r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);u=r.__importDefault(u);n=r.__importDefault(n);t=r.__importDefault(t);x=r.__importDefault(x);A=r.__importDefault(A);B=r.__importDefault(B);return function(){function D(v){var z,C,E,G,H,K;this.portalUser=null!==(C=null===(z=this.portal)||void 0===z?void 0:z.getPortalUser())&&
void 0!==C?C:null;this.title=null!==(E=this.title)&&void 0!==E?E:"";this.snippet=null!==(G=this.snippet)&&void 0!==G?G:"";this.type=this.type||"Unknown";this.displayName=null!==(H=this.displayName)&&void 0!==H?H:"";this.commentsInfo={sortField:"created",sortOrder:"desc",start:0,num:5,comments:[],item:this};this.screenshots=(null===(K=this.screenshots)||void 0===K?0:K.length)?this.screenshots:null;this.thumbnailUrl="Image"!==this.type||this.thumbnail?this.thumbnailUrl:this.itemDataUrl;this.sourceLabel=
this._getSourceLabel();this.scoreCompleteness=this.setScoreCompleteness(this.scoreCompleteness);this.url=this._getAdjustedUrl();this._setAdminFlags();this.setTypeKeywordFlags();this.tags instanceof Array&&-1<this.tags.length&&(this.tags=this.tags.join(","));this.size=this._getAdjustedSize();t.default.mixin(this,{extent:a.default.extentToString(this.extent)});t.default.mixin(this,g.default.getItemInfo(this))}var q=D;D.prototype.postscript=function(){};D.prototype.getOwnerProfile=function(v,z){var C=
this,E=this.owner,G=new u.default;this.ownerProfile?G.resolve(this.ownerProfile):(this.isOwner?(E=new u.default,E.resolve(this.portalUser)):E=this.portal.getUserProfile(E),E.then(function(H){C.isOwner||H.orgId===C.portal.id||(z=v=!1);x.default({folders:C.isAdmin&&z?H.getFolders():null,tags:C.isAdmin&&v?H.getTags():null,contentTags:C.isAdmin&&v?H.getContentTags():null}).then(function(K){t.default.mixin(C,{ownerProfile:H,itemOwner:H});C._setAdminFlags();G.resolve(H)},function(K){t.default.mixin(C,{ownerProfile:H,
itemOwner:H});C._setAdminFlags();G.resolve(H)})}));return G};D.prototype.getComments=function(v,z){var C=this,E=new u.default;this.commentsEnabled&&this.numComments?e.default.fetchComments(v,z,this.commentsInfo).then(function(G){C.commentsInfo=t.default.mixin(C.commentsInfo,G.commentsInfo);C.comments=C.commentsInfo.comments;E.resolve(C.comments)}):E.resolve([]);return E};D.prototype.getRelatedItems=function(v,z){var C=this,E={WMA2Code:1,MobileApp2Code:1},G,H,K=new u.default;this.relatedItems=this.relatedItems||
{};B.default.isDefined(this.relatedItems[v+"_"+z])?K.resolve(this.relatedItems[v+"_"+z].slice(0)):f.default.request({url:this.itemUrl+"/relatedItems",content:{relationshipType:v,direction:z}}).then(function(I){G=(null===I||void 0===I?0:I.relatedItems)?I.relatedItems:null!==I&&void 0!==I?I:[];G=G.map(function(J){return new q(r.__assign(r.__assign({},J),{portal:C.portal}))});H=v in E?(G||[]).shift():G||[];C.relatedItems[v+"_"+z]=H;K.resolve((null===H||void 0===H?0:H.length)?H.slice(0):H)},function(I){K.reject(I)});
return K};D.prototype.getSourceData=function(){var v=this,z=new u.default,C="Scene Service"===this.type||"Map Service"===this.type||"WFS"===this.type,E="Map Service"===this.type,G=C?"Service2Service":this.isRouteLayer?"Service2Route":"Service2Data",H="Service2Service"===G||"Service2Route"===G?"reverse":"forward",K;-1<this.typeKeywords.indexOf("Bulk Published Service")&&(G="DataStore2BPService",H="reverse");this.sourceData?z.resolve(this.sourceData):this.getRelatedItems(G,H).then(function(I){K=(null===
I||void 0===I?0:I.length)?I.shift():null;C?E&&!v._isView(K)||!K?v.getRelatedItems("Service2Data","forward").then(function(J){J=(null===J||void 0===J?0:J.length)?J.shift():K;z.resolve(J)}):z.resolve(K):z.resolve(K)},function(I){z.reject(I)});return z};D.prototype._isView=function(v){return v&&h.default.includes(v.typeKeywords,"View Service")||!1};D.prototype.getResultData=function(){var v=new u.default,z=this.isHostedService?"Service2Service":"Service2Data";this.getRelatedItems(z,"Service2Service"===
z?"forward":"reverse").then(function(C){return v.resolve((null===C||void 0===C?0:C.length)?C:null)});return v};D.prototype.getThumbnail=function(v){var z=this,C=new u.default;this._fetchingThumbnail?setTimeout(function(){z.getThumbnail(!1).then(function(E){return C.resolve(E)})},50):(this._fetchingThumbnail=!0,k.default(this,v).then(function(E){delete z._fetchingThumbnail;E.dataURL?z._updateThumbnail(E).then(function(G){z.set("thumbnailUrl",G);C.resolve(G)}):(z.set("thumbnailUrl",E),C.resolve(E))}));
return C};D.prototype.getData=function(){var v=new u.default;f.default.request({url:this.itemDataUrl}).then(function(z){return v.resolve(z)});return v};D.prototype.canBeDeleted=function(){var v=new u.default;f.default.request({url:this.userItemUrl+"/canDelete"}).then(function(z){return v.resolve(z)},function(z){return v.resolve(z)});return v};D.prototype.setTypeKeywordFlags=function(){var v,z,C,E,G=this.typeKeywords;this.isViewOnly=h.default.includes(G,"useOnly");this.isOfflineEnabled=h.default.includes(G,
"Offline");this.isHostedService=h.default.includes(G,"Hosted Service")&&"Insights Workbook"!==this.type&&"Insights Page"!==this.type;this.isServiceProxy=h.default.includes(G,"Service Proxy");this.isAppProxy=h.default.includes(G,"App Proxy");this.isAppCollector=h.default.includes(["Web Map","Web Scene"],this.type);this.useInCollector=h.default.includes(G,"Collector");this.disableInCollector=h.default.includes(G,"CollectorDisabled");this.isFeatureCollection="Feature Collection"===this.type||h.default.includes(G,
"Feature Collection");this.isMapNotes="Feature Collection"===this.type&&h.default.includes(G,"Map Notes");this.isTable=h.default.includes(G,"Table");this.hasMetadata=h.default.includes(G,"Metadata");this.isSDS=!this.portal.isPortal||this.portal.isPortal&&h.default.includes(G,"providerSDS");this.isBDS=this.portal.isPortal&&h.default.includes(G,"providerBDS");this.isRegisteredApp=h.default.includes(G,"Registered App");this.hasGeocodeReviewTable=h.default.includes(G,"Involved Lookup");this.isHostedTemplate=
h.default.includes(G,"configurableApp")||h.default.includes(G,"Configurable")&&h.default.includes(G,"createAppWithoutMap");this.isPremium=-1<this.owner.toLowerCase().indexOf("esri")&&this.isPremiumContent;this.requiresCredits=h.default.includes(this.typeKeywords,"Requires Credits");this.typeInfo=t.default.mixin({},this.getTypeInfo(),{premiumTitle:n.default.common[(this.requiresCredits?"premiumcontentcreditstitle":"premiumcontenttitle")+(this.portal.isPortal?"portal":"")],premiumLabel:n.default.common[this.requiresCredits?
"premiumcontent":"subscriptioncontent"]});this.hasKMLItemData="KML"===this.type&&-1<(null===(v=this.url)||void 0===v?void 0:v.indexOf("rest/content/items/"+this.id+"/data"));this.isDataView=h.default.includes(G,"View Service");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(z=this.portalUser)||void 0===z?void 0:z.userRole.canDeleteOrgItems())||!1;this.isLocatorView=this.isServiceProxy&&h.default.includes(G,"Geocoding filter");this.isRouteLayer=h.default.includes(G,"Route Layer");
this.isSpatiotemporal=h.default.includes(G,"Spatiotemporal");this.isMarkup=h.default.includes(G,"Markup");this.isMultiServicesView=h.default.includes(G,"Multi Services View");this.isPhotoLocations="Image Collection"===this.type&&h.default.includes(G,"Photo locations");this.isLocationTrackingView=(this.isLocationTrackingService="Feature Service"===this.type&&h.default.includes(G,"Location Tracking Service"))&&h.default.includes(G,"Location Tracking View");this.canShowSocialMediaLinks=l.default.canShowSocialMediaLinksOnItems(this.portal);
this.isVectorTileService=h.default.includes(G,"Vector Tile Service");this.isUtilityNetwork="Feature Service"===this.type&&h.default.includes(this.typeKeywords,"UtilityNetwork");v=g.default[this.type];z=B.default.isDefined(c.default.newMapViewerEnabled)&&!0===c.default.newMapViewerEnabled;G=!c.default.self.portalProperties||!B.default.isDefined(c.default.self.portalProperties.newMapViewerEnabled)||!0===c.default.self.portalProperties.newMapViewerEnabled;z&&G&&(this.canOpenInNewMapViewer=-1<(null===
(C=null===v||void 0===v?void 0:v.openIn)||void 0===C?void 0:C.indexOf("mapViewer")));this.userItemUrl=null===(E=this.itemUrl)||void 0===E?void 0:E.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/")};D.prototype.addBlockClasses=function(v){var z=this,C,E,G,H;this.blockedApps||(this.blockedApps=null===(C=this.portal)||void 0===C?void 0:C.blockedApps);if(null!==(E=this.blockedApps)&&void 0!==E&&E.length&&(-1<this.blockedApps.indexOf("survey123")&&v.some(function(K){return-1<
["is-surveyForm","is-surveyFormBrowser"].indexOf(K)})&&-1===v.indexOf("survey-blocked")&&v.push("survey-blocked"),-1<this.blockedApps.indexOf("webappbuilder"))){v.some(function(K){return"can-edit-wab"===K})&&-1===v.indexOf("wab-blocked")&&v.push("wab-blocked");if(["Web AppBuilder","WABTemplate"].some(function(K){return z.typeKeywords.some(function(I){return I===K})})||-1<(null===(G=this.url)||void 0===G?void 0:G.indexOf("webappviewer")))C=v.indexOf("has-url"),-1<C&&v.splice(C,1);-1<(null===(H=this.configureUrl)||
void 0===H?void 0:H.indexOf("webappviewer"))&&(v=this.privileges.indexOf("can-configure"),-1<v&&this.privileges.splice(v,1))}};D.prototype.removeBlockedTypes=function(v){var z=this,C;if((null===v||void 0===v?0:v.length)||(null===(C=this.blockedApps)||void 0===C?0:C.length)){(null===v||void 0===v?0:v.length)?this.blockedApps=v:v=this.blockedApps;var E={arcgisInsights:{types:["is-insights"],blockedType:"insights-blocked",texts:[n.default.itemLinks.openInsights],openIn:["insightsViewer"]},arcgisstorymaps:{types:["is-published-storymap",
"is-editable-storymap"],blockedType:"storymap-blocked",openIn:["storyMapViewer","configureStoryMap"]},experienceBuilder:{types:["is-published-webExperience","is-published-webExperienceTemplate"],blockedType:"exp-builder-blocked",openIn:["webExperienceViewer"]},HubforArcGIS:{types:["is-hubInitiative","is-hubEvent"],blockedType:"hub-blocked",texts:[n.default.itemLinks.viewInHub,n.default.itemLinks.openHubInitiative],openIn:["hubEventViewer","hubInitiative"]},opsdashboard:{types:["is-dashboard"],blockedType:"dashboard-blocked",
texts:[n.default.itemLinks.dashboardView],openIn:["dashboard"]},survey123:{types:["is-surveyForm","is-surveyFormBrowser"],blockedType:"survey-blocked",openIn:["surveyViewer"],texts:[n.default.itemLinks.openSurvey123]},webappbuilder:{types:["can-edit-wab"],blockedType:"wab-blocked"},Workforce:{types:["is-workforceProject"],blockedType:"workforce-blocked",texts:[n.default.itemLinks.openWorkforce],openIn:["workforceViewer"]}};Object.keys(E).forEach(function(G){var H;if(-1<v.indexOf(G)){var K=E[G],I=
K.types,J=K.blockedType,Q=K.texts;K=K.openIn;"arcgisstorymaps"===G&&"StoryMap"===z.type&&(z.defaultOpenText=void 0);I&&(z.types.some(function(V){return I.some(function(O){return O===V})})||(null===(H=z.privileges)||void 0===H?0:H.some(function(V){return I.some(function(O){return O===V})})))&&-1===z.types.indexOf(J)&&(z.types=r.__spreadArrays(z.types,[J]));if(null===Q||void 0===Q?0:Q.some(function(V){return V===z.defaultOpenText}))z.defaultOpenText=z.defaultOpenIcon=void 0;K&&K.forEach(function(V){V=
z.openIn.indexOf(V);-1<V&&z.openIn.splice(V,1)})}});-1<v.indexOf("webappbuilder")&&-1<this.typeKeywords.indexOf("Web AppBuilder")&&(this.defaultOpenText=void 0,this.openIn=[])}};D.prototype._getAdjustedSize=function(){var v=this.isHostedService&&"Feature Service"===this.type&&0<=this.subInfo,z=this.isHostedService&&"Image Service"===this.type&&!h.default.includes(this.typeKeywords,"Tiled Imagery Layer")&&!h.default.includes(this.typeKeywords,"Elevation 3D Layer")&&0<=this.subInfo;return this.size&&
(v||z)?this.size-this.subInfo:this.size};D.prototype._getAdjustedUrl=function(){if(this.url){var v=/^(?:[a-z]+:)?\/\//i.test(this.url)||-1!==this.url.indexOf("../");if(!this.portal.isPortal){var z=void 0;try{z=f.default.parseUrl(this.url)}catch(C){z=this.url}if("public"!==this.access&&f.default.isHostedTemplateItem(this.url))return this.url.replace(z.host,window.location.hostname);if("KML"===this.type)return this.itemDataUrl&&this.itemDataUrl.replace(z.host,this.portal.portalHostname),this.url.replace(z.host,
this.portal.portalHostname)}return this.portal.isPortal&&!v&&(v=f.default.getHomeAppContext(),-1===this.url.indexOf(v))?v+this.url:w.sanitizeServerURL(this.url)}return null};D.prototype._getSourceLabel=function(){var v=this.type,z=this.typeKeywords,C=h.default.includes(z,"Service")||"Feature Collection"===v?n.default.itemProperties.source+" ":"";return"Web Scene"===v?h.default.includes(z,"ViewingMode-Local")?n.default.common.localWebScene:n.default.common.globalWebScene:C?C+v:v};D.prototype._setAdminFlags=
function(){var v,z,C,E,G;this.isOwnedByMyOrg=this.isOwner||(null===(v=this.itemOwner)||void 0===v?void 0:v.orgId)===this.portal.id||this.portalUser&&(null===(z=this.itemOwner)||void 0===z?void 0:z.orgId)&&this.portal&&this.portalUser.orgId===this.portal.id||!1;v=this.isAdminView||(null===(E=null===(C=this.portal)||void 0===C?void 0:C.portalUser)||void 0===E?void 0:E.isOrgAdmin)&&this.isOwnedByMyOrg;this.isOwner=this.portalUser&&this.owner===this.portalUser.username;this.canUpdate=(this.isAdmin=this.portalUser?
this.isOwner||m.default.isItemAdmin(this,this.portal)||v:!1)||this.itemControl&&-1<this.itemControl.indexOf("update");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(G=this.portalUser)||void 0===G?void 0:G.userRole.canDeleteOrgItems())||!1};D.prototype._setContentStatusTo=function(v){return f.default.request({url:this.itemUrl+"/setContentStatus",content:{status:v,clearEmptyFields:!v}},{usePost:!0})};D.prototype.setScoreCompleteness=function(v){v=parseInt(v,10);return this.scoreCompleteness=
10*Math.ceil(v/10)};D.prototype._updateThumbnail=function(v){var z=this,C=new u.default,E=this.itemUrl,G;f.default.request({url:this.userItemUrl+"/updateThumbnail",content:{data:v.dataURL,filename:"ago_downloaded.png"}},{usePost:!0}).then(function(){f.default.request({url:E}).then(function(H){G=new q(r.__assign(r.__assign({},H),{portal:z.portal}));C.resolve(G.thumbnailUrl)})});return C};return D=q=r.__decorate([d.default(F.PortalItem,A.default)],D)}()})},"arcgisonline/pages/getThumbnail":function(){define("require exports tslib dojo/Deferred dojo/_base/lang ../map/core/buildExportCall ../map/thumbnail/buildThumbnailURLFromKMLItem ../map/thumbnail/buildThumbnailURLFromFSItem ../map/thumbnail/createHiddenMap ../sharing/util ./utils/arrays".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f){function c(u,n,t){var x=new a.default;u=e.default(u,n,"4326",null,"800,532",null,"json",null,t||null);l.default.request({url:u},{addToken:!1}).then(function(A){x.resolve(A)},function(){x.resolve(l.default.getAbsoluteUrl("images/transparent.gif"))});return x}function d(u){return 2===(null===u||void 0===u?void 0:u.length)&&2===u[0].length&&2===u[1].length?Math.round(1E3*u[0][0])/1E3+","+Math.round(1E3*u[0][1])/1E3+","+Math.round(1E3*u[1][0])/1E3+","+Math.round(1E3*u[1][1])/
1E3:null}Object.defineProperty(y,"__esModule",{value:!0});a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);y.default=function(u,n){var t,x,A=new a.default,B=u.portal,F=B.getPortalUser();F=(null===F||void 0===F?0:F.token)?"?token\x3d"+F.token:"";var w=l.default.getAbsoluteUrl("images/transparent.gif"),D=l.default.getAbsoluteUrl("images/arcgis-transparent-background-div.png"),
q=l.default.getStaticImagesUrl(),v=u.itemUrl||u.url,z=u.itemDataUrl,C=u.serviceInfo||{},E=u.itemData||{},G=u.type.toLowerCase(),H=u.typeKeywords||[],K=-1===(null===(t=u.thumbnail)||void 0===t?void 0:t.indexOf("thumbnail/ago_downloaded."));t=f.default.includes(H,"Tiled Imagery");var I="image service"===G&&!t;n=n&&("Feature Service"===u.type&&!K||"Vector Tile Service"===u.type&&!K);K=k.default.isArray(u.extent)?d(u.extent):u.extent||"-180,-90,180,90";var J;u||A.resolve(D);u.thumbnail&&!n||"Image"===
u.type||u.thumbnailUrl&&!n?A.resolve(u.thumbnail?v+"/info/"+u.thumbnail+F:u.thumbnailUrl):u.isAdmin&&("image service"===G&&!t||"map service"===G)?"image service"!==G&&u.isHostedService?u.getSourceData().then(function(Q){(J=null===Q||void 0===Q?void 0:Q.thumbnailUrl)?(u.thumbnail=J,A.resolve(J)):(u.thumbnail=q+"/desktopapp.png",A.resolve(u.thumbnail))},function(){u.thumbnail=q+"/desktopapp.png";A.resolve(u.thumbnail)}):c(v,K,C).then(function(Q){A.resolve(Q&&Q.href||D)}):u.isLocationTrackingService?
(u.thumbnail=q+"/locationtrackingservice.png",A.resolve(u.thumbnail)):u.isAdmin&&"feature service"===G?u.isTable?(u.thumbnail=q+"/desktopapp.png",A.resolve(u.thumbnail)):h.default(u,null,E.layers).then(function(Q){A.resolve(Q)},function(){A.resolve(w)}):"vector tile service"===G?(B=[[-180,-90],[180,90]],F=void 0,"string"===typeof u.extent?(F=u.extent.split(","),B=[[parseFloat(F[0]),parseFloat(F[1])],[parseFloat(F[2]),parseFloat(F[3])]]):0<(null===(x=u.extent)||void 0===x?void 0:x.length)&&(B=u.extent),
m.default({operationalLayers:[],baseMap:{baseMapLayers:[{id:u.id,type:"VectorTileLayer",layerType:"VectorTileLayer",title:u.title,styleUrl:u.itemUrl+"/resources/styles/root.json",visibility:!0,opacity:1}],title:"Topographic"},spatialReference:{wkid:102100,latestWkid:3857},authoringApp:"WebMapViewer",authoringAppVersion:"5.3",version:"2.10"},B,function(Q){(Q=Q.layerIds.map(Q.getLayer.bind(Q)).shift())?Q.takeScreenshot({format:"png",width:800,height:532}).then(function(V){(null===V||void 0===V?0:V.dataURL)?
A.resolve(V):A.resolve(w)},function(){A.resolve(w)}):A.resolve(w)},function(){return A.resolve(w)})):u.isAdmin&&"kml"===G?g.default(u).then(function(Q){return A.resolve(Q)}):"web mapping application"===G?A.resolve(q+"/webapp.png"):"mobile application"===G?A.resolve(q+"/mobileapp.png"):"image"===G?(x=2097134<u.size?l.default.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):z,A.resolve(x)):"workforce project"===G?A.resolve(q+"/workforceproject.png"):"hub initiative"===
G?A.resolve(q+"/hubinitiative.png"):"hub page"===G?A.resolve(q+"/hubpage.png"):"hub site application"===G?A.resolve(q+"/hubsite.png"):"hub event"===G?A.resolve(q+"/hubevent.png"):"dashboard"===G?(x=f.default.includes(H,"ArcGIS Dashboards"),A.resolve(q+(x?"/dashboards.png":"/opsdashboard.png"))):"geoprocessing service"===G&&(null===B||void 0===B?0:B.isPortal)?A.resolve(q+"/webtool.png"):"web scene"===G||"scene service"===G?A.resolve(q+"/scene.png"):"ortho mapping project"===G?A.resolve(q+"/orthomappingproject.png"):
"ortho mapping template"===G?A.resolve(q+"/orthomappingtemplate.png"):"insights theme"===G?A.resolve(q+"/insightstheme.png"):"solution"===G?A.resolve(q+"/solution.png"):"mobile scene package"===G?A.resolve(q+"/mobilescenepackage.png"):"deep learning package"===G?A.resolve(q+"/deeplearningpackage.png"):"big data analytic"===G?A.resolve(q+"/bigdataanalytic.png"):"real time analytic"===G?A.resolve(q+"/realtimeanalytic.png"):"feed"===G?A.resolve(q+"/feed.png"):"excalibur imagery project"===G?A.resolve(q+
"/excaliburimageryproject.png"):"notebook"===G?A.resolve(l.default.relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png")):"storymap"===G?A.resolve(q+"/storymap.png"):"survey123 add in"===G?A.resolve(q+"/survey123addin.png"):"mission"===G?A.resolve(q+"/mission.png"):"quickcapture project"===G?A.resolve(q+"/quickcaptureproject.png"):"pro report"===G?A.resolve(q+"/proreport.png"):"urban model"===G?A.resolve(q+"/urbanmodel.png"):"web experience"===G?A.resolve(q+"/webexperience.png"):
"web experience template"===G?A.resolve(q+"/webexperiencetemplate.png"):"workflow"===G?A.resolve(q+"/workflow.png"):"insights script"===G?A.resolve(q+"/insightsscript.png"):"kernel gateway connection"===G?A.resolve(q+"/kernelgatewayconnection.png"):"hub initiative template"===G?A.resolve(q+"/hubinitiativetemplate.png"):t?A.resolve(q+"/tiledimagerylayer.png"):I?A.resolve(q+"/imagerylayer.png"):"mission report"===G?A.resolve(q+"/missionreport.png"):"administrative report"===G?A.resolve(q+"/administrativereport.png"):
"storymap theme"===G?A.resolve(q+"/storymaptheme.png"):"knowledge graph service"===G?A.resolve(q+"/knowledgegraph.png"):A.resolve(q+"/desktopapp.png");return A}})},"arcgisonline/map/core/buildExportCall":function(){define([],function(){return function(b,y,r,a,k,e,g,h,m){if(!h&&-1<b.indexOf("/MapServer/")){e=b.indexOf("/MapServer/");var l=b.indexOf("?");-1<l?(h=b.substring(e+11,l),b=b.substring(0,e+10)+b.substring(l)):(h=b.substring(e+11),b=b.substring(0,e+10))}l=-1<b.indexOf("/MapServer");!l&&m&&
(l=m.capabilities?-1<m.capabilities.toLowerCase().indexOf("map"):m.supportedImageFormatTypes);e=b.indexOf("?");if(-1==e)if(l)b+="/export?";else{if("undefined"!==typeof m.currentVersion&&10.1<=m.currentVersion)return b+"/info/thumbnail";b+="/exportImage?"}else if(l)b=b.substring(0,e)+"/export"+b.substring(e,b.length)+"\x26";else{if("undefined"!==typeof m.currentVersion&&10.1<=m.currentVersion)return b=b.substring(0,e)+"/info/thumbnail"+b.substring(e,b.length);b=b.substring(0,e)+"/exportImage"+b.substring(e,
b.length)+"\x26"}b+="size\x3d"+k+"\x26bbox\x3d"+y;null!==r&&0<r.length&&(b+="\x26bboxSR\x3d"+r);null!==a&&0<a.length&&(b+="\x26imageSR\x3d"+a);b=l&&m&&m.supportedImageFormatTypes&&-1<m.supportedImageFormatTypes.indexOf("PNG32")?b+("\x26format\x3dpng32\x26f\x3d"+g):l?b+("\x26format\x3dpng24\x26f\x3d"+g):b+("\x26format\x3djpgpng\x26f\x3d"+g);l?null!==h&&0<h.length&&(b+="\x26layers\x3dshow:"+h):b+="\x26interpolation\x3dRSP_NearestNeighbor\x26bandIds\x3dnull";return b}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromKMLItem":function(){define("dojo/Deferred dojo/_base/url dojo/_base/lang arcgisonline/sharing/util esri/SpatialReference arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap".split(" "),
function(b,y,r,a,k,e){var g=window.esriGeowConfig;return function(h,m){var l={};l.baseMap=g.defaultBasemap||g.self.defaultBasemap;l.baseMap.title="basemap";l.operationalLayers=[];var f=h.url;f||"KML"!==h.type||(f=g.restBaseUrl+"content/items/"+h.id+"/data");var c=(new y(g.restBaseUrl)).authority;-1<f.indexOf(c)&&(c=a.getToken())&&(f+="?token\x3d"+c);l.operationalLayers.push({url:f,id:"KML_"+Math.random(),opacity:1,title:h.title,visibility:!0,type:"KML"});var d=new b;m||("string"==typeof h.extent?
(h=h.extent.split(","),m=[[parseFloat(h[0]),parseFloat(h[1])],[parseFloat(h[2]),parseFloat(h[3])]]):m=h.extent&&0<h.extent.length?h.extent:[[-180,-90],[180,90]]);e(l,m,new k({wkid:4326}),r.hitch(this,function(u){d.resolve(u)}),r.hitch(this,function(u){d.reject(u)}));return d}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap":function(){define(["dojo/json","dojo/_base/lang","dojo/_base/array","esri/tasks/Geoprocessor"],function(b,y,r,a){var k=window.esriGeowConfig;return function(e,g,
h,m,l){e=y.clone(e);r.forEach(e.baseMap.baseMapLayers,function(f){delete f.resourceInfo});e.mapOptions={showAttribution:!1,extent:{xmin:g[0][0],ymin:g[0][1],xmax:g[1][0],ymax:g[1][1],spatialReference:{wkid:4326}},spatialReference:h};e.exportOptions={dpi:96,outputSize:[600,400]};e.layoutOptions={};g=new a(k.self.helperServices.printTask.url);h={Web_Map_as_JSON:b.stringify(e),Format:"PNG32",Layout_Template:"MAP_ONLY"};g.execute(h).then(y.hitch(this,function(f){if(f){for(var c=!1,d=0;d<f.length;d++)if("Output_File"==
f[d].paramName){m(f[d].value.url);c=!0;break}!c&&l&&l()}else l&&l()}),y.hitch(this,function(f){l&&l()}))}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromFSItem":function(){define("dojo/on dojo/Deferred dojo/DeferredList dojo/_base/connect dojo/_base/array dojo/_base/lang esri/kernel esri/layers/FeatureLayer esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap arcgisonline/map/thumbnail/getExtentWithFeatures arcgisonline/map/thumbnail/getItemData arcgisonline/map/layer/getServiceInfo".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u){return function(n,t,x){var A={};A.baseMap=e.clone(esriGeowConfig.defaultBasemap||esriGeowConfig.self.defaultBasemap);A.baseMap.title="basemap";for(var B=A.baseMap.baseMapLayers.length,F=!1===n.itemData?{}:n.itemData,w=0;w<B;w++){var D=A.baseMap.baseMapLayers[w];if(!D.isReference){!esriGeowConfig.allSSL&&"https:"!=location.protocol||!l.isHostedService(D.url)&&!l.supportsHttps(D.url)||(D.url=D.url.replace("http:","https:"));D.visibility=!1;A.baseMap.baseMapLayers=
[D];break}}A.operationalLayers=[];var q=new y;B=function(v,z){z?v&&k.forEach(v,function(E){k.forEach(z,function(G,H){G.id===E.id&&(G[H]=E)})}):z=[];v=function(E,G){G=E&&E.layers||[];for(E=G.length-1;0<=E;E--){var H=G[E],K=g.id.findCredential(l.urlToObject(n.url).path);K={url:n.url+"/"+H.id+(K?"?token\x3d"+K.token:""),id:(n.id||Math.random())+"_"+H.id,opacity:1,title:(n.title||"title")+"_"+H.id,visibility:!0};for(var I=!1,J=0;J<G.length;J++)if(G[J].id===H.id){I=!0;K.layerDefinition=G[J].layerDefinition;
break}(!G.length||G.length&&I)&&A.operationalLayers.push(K)}var Q=function(Y){q.resolve(Y)},V=function(Y){q.reject(Y)},O=[[-180,-90],[180,90]];"string"==typeof n.extent?(E=n.extent.split(","),O=[[parseFloat(E[0]),parseFloat(E[1])],[parseFloat(E[2]),parseFloat(E[3])]]):n.extent&&0<n.extent.length&&(O=n.extent);if(1===A.operationalLayers.length)K=new h(A.operationalLayers[0].url),b(K,"load",e.hitch(this,function(Y){Y.layer&&(Y=Y.layer);c({layer:Y},t||O).then(e.hitch(this,function(ca,U){f(ca,U,e.hitch(this,
Q),e.hitch(this,V))},A))}));else{E=t||n.extent;O=new m(E[0][0],E[0][1],E[1][0],E[1][1]);var S=function(Y,ca){var U=20015077/180,X=g.config.defaults,Z=g.WKIDUnitConversion,N=Y.spatialReference;if(N){var aa=N.wkid;var ka=N.wkt}N=null;aa?N=Z.values[Z[aa]]:ka&&-1!==ka.search(/^PROJCS/i)&&(Z=/UNIT\[([^\]]+)\]\]$/i.exec(ka))&&Z[1]&&(N=parseFloat(Z[1].split(",")[1]));return Y.getWidth()/ca*(N||U)*39.37*X.screenDPI}(O,200),L=[];G=[];for(E=0;E<A.operationalLayers.length;E++)K=A.operationalLayers[E],H=new y,
G.push(H),K=new h(K.url),L.push(K),a.connect(K,"onLoad",e.hitch(this,function(Y,ca){ca.minScale<=S&&ca.maxScale>S?Y.resolve(!0):Y.resolve(!1)},H));(new r(G)).addCallback(function(Y){for(var ca=!1,U=0;U<Y.length;U++)if(!0===Y[U][1]){ca=!0;break}ca?f(A,t||n.extent,e.hitch(this,Q),e.hitch(this,V)):c({layer:L[L.length-1]},t||n.extent).then(e.hitch(this,function(X,Z){f(X,Z,e.hitch(this,Q),e.hitch(this,V))},A))})}};var C=function(E){q.reject(E)};n.serviceInfo?v(n.serviceInfo):u(n.url,"",e.hitch(this,v),
e.hitch(this,C))};x?F?B(x,F):d(n.id,e.hitch(this,B,x),e.hitch(this,B)):n.id?F?B(null,F):d(n.id,e.hitch(this,B,null),e.hitch(this,B)):B();return q}})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/global dojo/promise/all ../sniff ../kernel ../lang ../request ../config ../deferredUtils ../promiseList ../SpatialReference ../urlUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../support/expressionUtils ../arcadeProfiles/labelingProfile ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./TimeReference ./FeatureType ./FeatureTemplate ./FeatureSubtype ./FeatureEditResult ./LabelClass ./support/domainUtils ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./GridLayout ./TrackManager ./HeatmapManager ./clustering/ClusterManager dojo/i18n!../nls/jsapi ./agscommon".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v,z,C,E,G,H,K,I,J,Q,V,O,S,L,Y,ca,U,X,Z,N,aa,ka,pa,ta,Ba,Da,oa,ra,ya,wa,la,Aa,da,fa,P,xa,Fa){var ba=F.defaults,Sa=!!t("esri-pbf"),Qa=!!t("esri-featurelayer-pbf"),va=r(Z,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reSQLCurrentTimestamp:/current_timestamp|current_date|current_time/i,reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,
maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error",
"info"]},constructor:function(R,ia){this._preventInit||this._initFeatureLayer(R,ia)},_initFeatureLayer:function(R,ia){ia=ia||{};this._tileWidth=ia.tileWidth||512;this._tileHeight=ia.tileHeight||512;this.i18n=Fa;this._featureReduction=this._featureReduction||ia.featureReduction;this._featureReductionEnabled=null!=ia.featureReductionEnabled?ia.featureReductionEnabled:!0;this._featureUpdatesCheckEnabled=null!=ia.featureUpdatesCheckEnabled?ia.featureUpdatesCheckEnabled:!0;this.showLabels=null!=ia.showLabels?
ia.showLabels:!0;this._outFields=ia.outFields;this._defnExpr=ia.definitionExpression;this._loadCallback=ia.loadCallback;this._trackIdField=ia.trackIdField;this.objectIdField=ia.objectIdField;var ja=null!=ia.resolution,T=null!=ia.maxAllowableOffset;this._maxOffset=this._optMaxOffset=ja||T?ja?ia.resolution:ia.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=ia.quantize?ia.quantize:!0;this._optEditable=ia.editable;this._optAutoGen=ia.autoGeneralize;this.editSummaryCallback=ia.editSummaryCallback;
this.userId=ia.userId;this.userIsAdmin=ia.userIsAdmin;this.useMapTime=ia.hasOwnProperty("useMapTime")?!!ia.useMapTime:!0;this.source=ia.source;this.gdbVersion=ia.gdbVersion;this.orderByFields=ia.orderByFields;this.maxPointCountForAuto=null!=ia.maxPointCountForAuto?ia.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=ia.maxRecordCountForAuto?ia.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=ia.maxVertexCountForAuto?ia.maxVertexCountForAuto:
this.maxVertexCountForAuto;this.generalizeForScale=null!=ia.generalizeForScale?ia.generalizeForScale:this.generalizeForScale;this.queryPagination=this._optQueryPagination=null!=ia.queryPagination?ia.queryPagination:!0;this.multipatchOption=ia.multipatchOption;this.subtypeSublayerInfo=ia.subtypeSublayerInfo;this._selectedFeatures={};this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();ja=A.isDefined(ia.mode)?ia.mode:va.MODE_ONDEMAND;this._isStream&&(ja=va.MODE_STREAM);this.mode=
ja;switch(ja){case va.MODE_SNAPSHOT:this.currentMode=va.MODE_SNAPSHOT;this._mode=new ya(this);break;case va.MODE_ONDEMAND:case va.MODE_AUTO:this.currentMode=va.MODE_ONDEMAND;this._mode=new wa(this);this.latticeTiling=ia.latticeTiling;break;case va.MODE_SELECTION:this.currentMode=va.MODE_SELECTION;this._mode=new la(this);this._isSelOnly=!0;break;case va.MODE_STREAM:this.currentMode=va.MODE_STREAM,this._mode=new Aa(this),this._isStream=!0}this._initLayer=k.hitch(this,this._initLayer);this._selectHandler=
k.hitch(this,this._selectHandler);this._editable=!1;if(k.isObject(R)&&R.layerDefinition)return this._collection=!0,this.mode=this._isStream?va.MODE_STREAM:va.MODE_SNAPSHOT,this._isStream||this._outFields||(this._outFields=["*"]),this._initLayer(R),this;this.source&&(R={source:this.source.toJson()},this._url.query=k.mixin(this._url.query,{layer:g.toJson(R)}));this.gdbVersion&&(this._url.query=k.mixin(this._url.query,{gdbVersion:this.gdbVersion}));this._task=new V(this.url,{source:this.source,gdbVersion:this.gdbVersion});
R=this._url.path;this._fserver=!1;-1!==R.search(/\/FeatureServer\//i)&&(this._fserver=!0);this._checkFeatureLimit();(ia=ia.resourceInfo)?this._initLayer(ia):B({url:R,content:k.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},_initLayer:function(R,ia){if(R||ia){this._json=R;ia=this.subtypeSublayerInfo;this._findCredential();if(this.credential&&this.credential.ssl||R&&R._ssl)this._useSSL(),this._task._useSSL();
this._collection&&(this._isStream||(this.currentMode=va.MODE_SNAPSHOT,this._mode=new ya(this)),this._featureSet=R.featureSet,this._nextId=R.nextObjectId,R=R.layerDefinition);this.version=R.currentVersion;this.version||(this.version="capabilities"in R||"drawingInfo"in R||"hasAttachments"in R||"htmlPopupType"in R||"relationships"in R||"timeInfo"in R||"typeIdField"in R||"types"in R?10:9.3);this.geometryType=R.geometryType;R.bandCount&&R.fields&&1<R.fields.length&&(this.geometryType="esriGeometryPolygon",
this._isImageService=!0);"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&(this.multipatchOption="xyFootprint");if(R.hasOwnProperty("capabilities")){var ja=this.capabilities=R.capabilities;ja&&-1!==ja.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);A.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=
!1);this._isImageService&&(this._editable=!1);this._json=g.toJson(this._json);this.isEditable()?this._setMaxOffset(null):this._canAutoGeneralize()&&(this._autoGeneralize=A.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===va.MODE_ONDEMAND||this.mode===va.MODE_AUTO,delete this._optAutoGen);ja=R.effectiveMinScale||R.minScale;var T=R.effectiveMaxScale||R.maxScale;!this._hasMin&&ja&&this.setMinScale(ja);!this._hasMax&&T&&this.setMaxScale(T);this.layerId=R.id;this.name=ia&&ia.title||R.name;this.description=
R.description;this.copyright=R.copyrightText;this.type=R.type;this.displayField=R.displayField;this.defaultDefinitionExpression=R.definitionExpression||(R.isView?R.viewDefinitionQuery:R.definitionQuery);this.fullExtent=new Y(R.extent);this.initialExtent=new Y(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new q(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=R.defaultVisibility;this.editingInfo=R.editingInfo;this.supportsLastEditDate=!(!this.editingInfo||
null==this.editingInfo.lastEditDate);if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=R.hasM||!1;this.hasZ=R.hasZ||!1;this.indexedFields=R.indexedFields;this.indexes=R.indexes;this.maxRecordCount=R.maxRecordCount;this.canModifyLayer=R.canModifyLayer;this.supportsStatistics=R.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:R.supportsAdvancedQueries;this.supportsCalculate=R.supportsCalculate;this.supportsASyncCalculate=
R.supportsASyncCalculate;this.supportsAttachmentsByUploadId=R.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=R.supportsCoordinatesQuantization;this.supportsQuantizationEditMode=R.supportsQuantizationEditMode;this.supportsFieldDescription=R.supportsFieldDescriptionProperty;this.supportsFormatPBF=R.supportedQueryFormats?-1!==e.map(R.supportedQueryFormats.toLowerCase().split(","),k.trim).indexOf("pbf"):!1;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=
R.hasLabels;this.canScaleSymbols=R.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=R.supportsRollbackOnFailure;this.syncCanReturnChanges=R.syncCanReturnChanges;this.isDataVersioned=R.isDataVersioned;this.editFieldsInfo=R.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=R.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=R.relationships;
this.allowGeometryUpdates=A.isDefined(R.allowGeometryUpdates)?R.allowGeometryUpdates:!0;this.allowUpdateWithoutMValues=!!R.allowUpdateWithoutMValues;this.enableZDefaults=!!R.enableZDefaults;this.zDefault=A.isDefined(R.zDefault)?R.zDefault:null;this.advancedQueryCapabilities=R.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.geometryProperties=R.hasGeometryProperties&&R.geometryProperties||
null;this.url&&(this.advancedQueryCapabilities.supportsPagination=this.advancedQueryCapabilities.supportsPagination&&(this.reHostedFS.test(this.url)||10.3<this.version));this.queryPagination=this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination;this.useStandardizedQueries=R.useStandardizedQueries;this.tileMaxRecordCount=R.tileMaxRecordCount;this.standardMaxRecordCount=R.standardMaxRecordCount;if(ja=R.dateFieldsTimeReference)this.dateFieldsTimeReference=new ka(ja);this._setMaxOffset(this._maxOffset,
!0);this._isTable="Table"===this.type;T=R.fields;this._createFields(T);if(!this.objectIdField&&(this.objectIdField=R.objectIdField,!this.objectIdField))for(T=R.fields,ja=0;ja<T.length;ja++){var ha=T[ja];if("esriFieldTypeOID"===ha.type){this.objectIdField=ha.name;break}}if(!A.isDefined(this._nextId)){T=this.objectIdField;ha=-1;if(this._collection&&T){var na=(ja=this._featureSet)&&ja.features,qa=na?na.length:0;for(ja=0;ja<qa;ja++){var ua=(ua=na[ja].attributes)&&ua[T];ua>ha&&(ha=ua)}}this._nextId=ha+
1}this.globalIdField=R.globalIdField;if(ja=this.typeIdField=R.typeIdField)if(ja=!this._getField(ja)&&this._getField(ja,!0))this.typeIdField=ja.name;this.visibilityField=R.visibilityField;if(T=R.defaultSymbol)this.defaultSymbol=G.fromJson(T);var za=this.types=[],Ea=R.types;ha=(ja=this.editFieldsInfo)&&ja.creatorField;na=ja&&ja.editorField;ua=ha||na;qa=[];if(Ea)for(ja=0;ja<Ea.length;ja++){var Pa=new pa(Ea[ja]);var Oa=Pa.templates;ua&&Oa&&Oa.length&&(qa=qa.concat(Oa));za.push(Pa)}Ea=R.templates;Pa=this.templates=
[];if(Ea)for(ja=0;ja<Ea.length;ja++)za=new ta(Ea[ja]),ua&&qa.push(za),Pa.push(za);for(ja=0;ja<qa.length;ja++)if(ua=k.getObject("prototype.attributes",!1,qa[ja]))ha&&delete ua[ha],na&&delete ua[na];if(ja=R.subtypeField)this.subtypeField=(ja=this.getField(ja))?ja.name:null;this.defaultSubtypeCode=R.defaultSubtypeCode;this.subtypes=e.map(R.subtypes,function(fb){return new Ba(fb)});this._applySTSublayerInfo(ia);if(ia=R.timeInfo)this.timeInfo=new aa(ia),this._startTimeField=ia.startTimeField,this._endTimeField=
ia.endTimeField,this._startTimeField&&this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?ia.trackIdField=this._trackIdField:this._trackIdField=ia.trackIdField;this.hasAttachments=!this._collection&&R.hasAttachments?!0:!1;this.htmlPopupType=R.htmlPopupType;ia=R.drawingInfo;(ja=ia&&ia.labelingInfo)&&!this.labelingInfo&&(this.labelingInfo=e.map(ja,function(fb){return new oa(fb)}),this._fixLabelExpr());if(!this.renderer)if(ia&&ia.renderer){var Ha=ia.renderer;this.setRenderer(I.fromJson(Ha,
{geometryType:this.geometryType}));"classBreaks"===Ha.type&&this.renderer.setMaxInclusive(!0);if(!this._collection){var Ua=Ha.type;ja=[];Ha=this.renderer;switch(Ua){case "simple":ja.push(Ha.symbol);break;case "uniqueValue":case "classBreaks":ja.push(Ha.defaultSymbol),ja=ja.concat(e.map(Ha.infos,function(fb){return fb.symbol}))}ja=e.filter(ja,A.isDefined);var bb=this._url.path+"/images/",ab=this._getToken();e.forEach(ja,function(fb){var kb=fb.url;kb&&(-1===kb.search(/https?:/)&&-1===kb.indexOf("data:")&&
(fb.url=bb+kb),ab&&-1!==fb.url.search(/https?:/)&&(fb.url+="?token\x3d"+ab))})}}else if(T)Ea=this.types,0<Ea.length?(Ha=new K(this.defaultSymbol,this.typeIdField),e.forEach(Ea,function(fb){Ha.addValue(fb.id,fb.symbol)})):Ha=new H(this.defaultSymbol),this.setRenderer(Ha);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":Ua=new z;break;case "esriGeometryPolyline":Ua=new C;break;case "esriGeometryPolygon":Ua=new E;break;default:this.hasXYFootprint()&&
(Ua=new E)}this.setRenderer(Ua?new H(Ua):null)}Ua=ia&&ia.transparency||0;!this.hasOwnProperty("opacity")&&0<Ua&&(this.opacity=1-Ua/100);(t("ie")||7<=t("trident")||t("safari"))&&this.isEditable()&&10.02>this.version&&(this._ts=!0);this.statistics=R.statistics;this._fixRendererFields();this._updateRequiredFieldsFromLabelingInfo();this._checkFields();this._updateCaps();var gb=function(){null==this._maxOffset||this._isFractionalOffsetAllowed()||this._setMaxOffset(this._maxOffset);this.loaded=!0;this.setFeatureReduction(this.getFeatureReduction());
this.currentMode!==va.MODE_SNAPSHOT&&(this.queryPagination=!1);this.onLoad(this);var fb=this._loadCallback;fb&&(delete this._loadCallback,fb(this))};R=[];this._collection?(Ua=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new S(Ua)),this._fcAdded=!0):(R.push(this._forceIdentity()),this._limitPromise&&R.push(this._limitPromise));R.push(this._evalArcadeSupport());R.length?D(R).then(k.hitch(this,function(){gb.call(this)})):gb.call(this)}},_applySTSublayerInfo:function(R){R&&this.subtypeField&&
(this.subtypeCode=R.subtypeCode,this._applySTSublayerDefinitionExpression(R),this._filterSubtypes(R),this._applySTTemplates(R),this._applySTFieldOverrides(R))},_applySTSublayerDefinitionExpression:function(R){var ia=[],ja=this.getDefinitionExpression();ja&&ia.push(ja);ia.push(this.subtypeField+" \x3d "+this.subtypeCode);(R=R.layerDefinition&&R.layerDefinition.definitionExpression)&&ia.push(R);ia=e.map(ia,function(T){return"("+T+")"});this.setDefinitionExpression(ia.join(" AND "))},_applySTTemplates:function(R){if(R=
R.layerDefinition&&R.layerDefinition.templates)this.templates=e.map(R,function(ia){return new ta(ia)})},_filterSubtypes:function(){this.subtypes&&(this.subtypes=e.filter(this.subtypes,function(R){return R.code===this.subtypeCode},this))},_applySTFieldOverrides:function(R){var ia=R.layerDefinition&&R.layerDefinition.fieldOverrides;if(ia){this.fields=e.filter(this.fields,function(T){return e.some(ia,function(ha){return ha.name===T.name})});var ja=this.getSubtypeByCode(this.subtypeCode).domains;this.fields.forEach(function(T){var ha=
e.filter(ia,function(na){return na.name===T.name})[0];ha.alias&&(T.alias=ha.alias);if(!1===ha.editable||T.name===this.subtypeField)T.editable=!1;ja&&(ha=ja[T.name])&&"inherited"!==ha.type&&(T.domain=ra.fromJson(ha.toJson()))},this)}},setShowLabels:function(R){var ia=this.showLabels;this.showLabels=R;ia!==this.showLabels&&(this._evalSurfaceType(),this.onShowLabelsChange())},onShowLabelsChange:function(){},onRendererChange:function(R){this.inherited(arguments);var ia=this._map;this._ager=!!(R&&R.observationAger&&
R.observationRenderer);R&&"colors"in R&&"blurRadius"in R&&"maxPixelIntensity"in R?(this._evalSurfaceType(!0),"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&ia&&(this._heatmapManager=new P(this),this._heatmapManager.initialize(ia))):this.renderer&&this.renderer.getRendererInfo?e.some(this.renderer.rendererInfos,function(ha){return ha.renderer&&"colors"in ha.renderer&&"blurRadius"in ha.renderer})||(this._heatmapManager=null):this._heatmapManager=null;this.timeInfo&&ia&&(R&&(R.latestObservationRenderer||
R.trackRenderer)?this._trackManager||(this._trackManager=new fa(this),this._trackManager.initialize(ia),this._childLayer=this._trackManager.container,this._mode._applyTimeFilter()):this._trackManager&&!this._isStream&&(this._trackManager.destroy(),this._trackManager=null));if(R){var ja=[];ia=e.filter([R,R.observationRenderer,R.latestObservationRenderer,R.trackRenderer],A.isDefined);var T=function(ha){return null!=ha&&"function"!=typeof ha&&ha};e.forEach(ia,function(ha){var na=T(ha.attributeField),
qa=T(ha.attributeField2);ha=T(ha.attributeField3);!1!==na&&ja.push(na);!1!==qa&&ja.push(qa);!1!==ha&&ja.push(ha)});this._requiredFields=ja}else this._requiredFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._requiredFields),this._collection&&(this._typesDirty=!0))},setFeatureReduction:function(R){R&&(R=k.mixin({},R),null!=R.clusterSize&&null==R.clusterRadius&&(R.clusterRadius=R.clusterSize),delete R.clusterSize);this.loaded?this._isFeatureReductionSupported(R)?this._featureReduction=
R:this._featureReduction=null:this._featureReduction=R;this._evalFeatureReduction(this._featureReduction)},hasFeatureReduction:function(){return!!this._featureReduction},getFeatureReduction:function(){var R=this._featureReduction;if(R){R=k.mixin({},R);var ia=this._clusterManager;if(ia=ia&&ia.aggregationInfo)R.clusterRadius=ia.clusterRadius,R.infoTemplate=ia.infoTemplate}return R},isFeatureReductionActive:function(){var R=this._clusterManager;return!!(R&&R.isClusteringEnabled()&&R.isClusteringActive())},
isFeatureReductionEnabled:function(){return this._featureReductionEnabled},enableFeatureReduction:function(){this._featureReductionEnabled||(this._featureReductionEnabled=!0,this._evalFeatureReduction(this._featureReduction))},disableFeatureReduction:function(){this._featureReductionEnabled&&(this._featureReductionEnabled=!1,this._evalFeatureReduction(this._featureReduction))},isFeatureReductionApplied:function(){return this.hasFeatureReduction()&&this.isFeatureReductionEnabled()&&this._canCluster(this.getFeatureReduction())},
getAggregateGraphics:function(){return this._clusterManager?this._clusterManager.getAggregateGraphics():[]},getChildGraphics:function(R){return this._clusterManager?this._clusterManager.getFeaturesInCluster(R):[]},getSingleGraphics:function(){return this._clusterManager?this._clusterManager.getSingleGraphics():[]},getFeatureReductionRenderer:function(){return this.isFeatureReductionActive()?this._clusterManager.getClusterRenderer():null},getFeatureReductionLayer:function(){return this._clusterManager?
this._clusterManager.container:null},getFeatureReductionField:function(R){var ia,ja=this._clusterManager?this._clusterManager.getClusterFields():null;R=R?R.toLowerCase():"";e.some(ja,function(T){R===T.name.toLowerCase()&&(ia=T);return!!ia});return ia},_isFeatureReductionSupported:function(R){return R&&"cluster"===R.type&&"esriGeometryPoint"===this.geometryType&&(this._collection||this._isStream||this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination)},_isReductionCompatibleRenderer:function(R){R=
R&&R.declaredClass||"";R=R.toLowerCase();return-1<R.indexOf("simplerenderer")||-1<R.indexOf("classbreaksrenderer")||-1<R.indexOf("uniquevaluerenderer")},_evalFeatureReduction:function(R){this.loaded&&this.getMap()&&(R=R||this.getFeatureReduction(),this._evalModeFromFReduction(R),R&&this.isFeatureReductionEnabled()?this._canCluster(R)?this._clusterManager?this._updateClusterManager(R):(this._clusterManager=this._createClusterManager(R),this.onFeatureReductionChange()):this._destroyClusterManager():
this._destroyClusterManager())},_canCluster:function(R){var ia=this._map;if(!ia)return!1;ia=ia.spatialReference;return this._isFeatureReductionSupported(R)&&this._isReductionCompatibleRenderer(this.renderer)&&(ia.isWebMercator()||4326===ia.wkid)},_createClusterManager:function(R){R=new xa({layer:this,aggregationInfo:R});this._clusterHandles=[R.on("renderer-change",k.hitch(this,function(){this.onFeatureReductionRendererChange()}))];R.initialize(this._map);return R},_updateClusterManager:function(R){var ia=
this._clusterManager;ia&&ia.setAggregationInfo(R)},_destroyClusterManager:function(R){e.forEach(this._clusterHandles,function(ia){ia.remove()});this._clusterHandles=null;this._clusterManager&&(this._clusterManager.destroy(R),this._clusterManager=null,this.onFeatureReductionChange())},redraw:function(){this.inherited(arguments);this._clusterManager&&this._clusterManager.redraw();this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(R){this.inherited(arguments);
var ia=this._getRenderer();this._ager=!!(ia&&ia.observationAger&&ia.observationRenderer);this._trackManager&&this._trackManager.container&&this._trackManager.container.setRenderer(ia&&ia.trackRenderer);R&&this._evalFeatureReduction()},_graphicVisibilityChanged:function(R){this._clusterManager?this._clusterManager.toggleFeatureVisibility(R):this._heatmapManager&&this._heatmapManager.redraw()},setWebGLFetchOptions:function(R){this._hasOnDemandDrillMode()&&(R=R||{},null!=R.maxDrillLevel&&(this._mode.maxDrillLevel=
R.maxDrillLevel),null!=R.maxRecordCountFactor&&(this._mode.maxRecordCountFactor=R.maxRecordCountFactor),null!=R.enablePBFQuery&&(this._mode.enablePBFQuery=R.enablePBFQuery))},_isWebGLCompatible:function(){return this.loaded&&!this.isEditable()&&!this.isFeatureReductionApplied()&&(!this.labelingInfo||!1===this.showLabels)&&!this._isGeometryOperationsUsed()&&this._isRendererSupportedInWebGL()&&this.supportsCoordinatesQuantization&&("esriGeometryPolygon"!==this.geometryType||this.advancedQueryCapabilities.supportsReturningGeometryCentroid)&&
this.currentMode===va.MODE_ONDEMAND&&(!this._preSurfaceChangeState||this._preSurfaceChangeState.currentMode===va.MODE_ONDEMAND)},_isRendererSupportedInWebGL:function(){if(!this.renderer)return!1;var R=this.renderer,ia=R.declaredClass?R.declaredClass.toLowerCase():"";return(-1<ia.indexOf("simplerenderer")||-1<ia.indexOf("classbreaksrenderer")||-1<ia.indexOf("uniquevaluerenderer"))&&this._hasWebGLCompatibleSymbols(R)&&this._hasWebGLCompatibleVVs(R)},_hasWebGLCompatibleSymbols:function(R){R=this._getAllSymbolsInRenderer(R);
return!(this._hasSLSWithMarker(R)||this._hasIncompatibleSMSStyles(R)||this._hasGIFMarker(R))},_hasWebGLCompatibleVVs:function(R){return!e.some(R&&R.visualVariables,function(ia){var ja=ia.type;return("colorInfo"===ja||"opacityInfo"===ja)&&ia.stops&&8<ia.stops.length||"sizeInfo"===ja&&(ia.field||ia.valueExpression&&"$view.scale"!==ia.valueExpression||ia.expression&&"view.scale"!==ia.expression)&&ia.stops&&6<ia.stops.length?!0:!1})},_hasSLSWithMarker:function(R){return e.some(R,function(ia){return ia&&
"simplelinesymbol"===ia.type&&!!ia.marker})},_hasIncompatibleSMSStyles:function(R){var ia=void 0===t("ie")&&7==t("trident");return e.some(R,function(ja){return ja&&"simplemarkersymbol"===ja.type&&("triangle"===ja.style||"path"===ja.style&&ia)})},_hasGIFMarker:function(R){var ia=/\.gif$/,ja=/^image\/gif$/;return e.some(R,function(T){return T&&"picturemarkersymbol"===T.type?ia.test(T.url)||ja.test(T.contentType):!1})},_getAllSymbolsInRenderer:function(R){var ia=[];R&&(ia.push(R.symbol),ia.push(R.defaultSymbol),
e.forEach(R.infos,function(ja){ia.push(ja.symbol)}),ia=e.filter(ia,function(ja){return!!ja}));return ia},_setMap:function(R){var ia=this.inherited(arguments),ja=this._mode,T=this;ja&&R.loaded&&ja.initialize(R);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(ha){ha=ha.graphic.attributes;(ha=T._selectedFeatures[ha&&ha[T.objectIdField]])&&ha.attr("data-selected","")});return ia},_unsetMap:function(R){this._suspendImpl(!0);
this._destroyClusterManager(!1);this._trackManager&&(this._trackManager.destroy(),this._trackManager=null);a.disconnect(this._zoomConnect);a.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this.inherited("_unsetMap",arguments)},onAttach:function(){this._evalModeFromSurface()},onRefreshTick:function(){this.isFeatureUpdatesCheckActive()&&this._evalFeatureUpdates()},refresh:function(R){!this._needsRefresh&&R&&R.scheduled&&this.isFeatureUpdatesCheckActive()||(this._needsRefresh=!1,
(R=this._mode)&&R.refresh())},setFeatureUpdatesCheckEnabled:function(R){this._featureUpdatesCheckEnabled=R},isFeatureUpdatesCheckEnabled:function(){return!!this._featureUpdatesCheckEnabled},isFeatureUpdatesCheckActive:function(){return this.supportsLastEditDate&&this.isFeatureUpdatesCheckEnabled()&&!!this.refreshInterval&&!!k.getObject("onFeatureUpdatesResult.after",!1,this)},hasFeatureUpdates:function(){var R=new h;if(!this.supportsLastEditDate)return R.reject(Error("FeatureLayer does not support supportsLastEditDate")),
R.promise;if(!this._fetchMetadataPromise||this._fetchMetadataPromise.isFulfilled())this._fetchMetadataPromise=B({url:this._url.path,content:k.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(k.hitch(this,function(ia){ia=ia.editingInfo.lastEditDate;var ja=this.editingInfo.lastEditDate!==ia;this.editingInfo.lastEditDate=ia;return ja}));this._fetchMetadataPromise.then(function(ia){R.isFulfilled()||R.resolve(ia)}).otherwise(function(ia){R.isFulfilled()||R.reject(ia)});return R.promise},
hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},getOutFields:function(){return e.filter(this._getOutFields(),function(R){return"*"===R||!!this._getField(R)},this)},getField:function(R){return this._getField(R,!0)},isOutField:function(R){R=this.getField(R);if(!R)return!1;var ia=this.getOutFields();return-1<e.indexOf(ia,"*")||-1<e.indexOf(ia,R.name)},getFieldLabel:function(R){var ia=this.infoTemplate;ia=ia&&ia.getFieldInfo&&ia.getFieldInfo(R);
R=k.isFunction(R)?null:this.getField(R);var ja=ia||R,T="";ja&&(T=ia&&ia.label||R&&R.alias||ja.name||ja.fieldName);return T},getDomain:function(R,ia){var ja,T,ha=(ia=ia&&ia.feature)&&this.typeIdField&&ia.attributes&&ia.attributes[this.typeIdField];null!=ha&&e.some(this.types,function(na){return na.id==ha?((ja=na.domains&&na.domains[R])&&"inherited"===ja.type&&(ja=this._getLayerDomain(R),T=!0),!0):!1},this);T||ja||(ja=this._getLayerDomain(R));return ja},_getLayerDomain:function(R){this._createFieldsIndex();
var ia=this._fieldsIndex;if(ia)return ia=ia.caseSensitive,(ia=ia.get(R))?ia.domain:null;var ja;e.some(this.fields,function(T){T.name===R&&(ja=T.domain);return!!ja});return ja},getType:function(R){return this.getTypeById(R&&this.typeIdField&&R.attributes&&R.attributes[this.typeIdField])},getTypeById:function(R){var ia;e.some(this.types,function(ja){ja.id==R&&(ia=ja);return!!ia});return ia},getSubtypeByCode:function(R){var ia;e.some(this.subtypes,function(ja){ja.code==R&&(ia=ja);return!!ia});return ia},
setEditable:function(R){if(!this._collection||this._isImageService)return this;if(!this.loaded)return this._optEditable=R,this;var ia=this._editable;this._editable=R;this._updateCaps();if(ia!==R)this.onCapabilitiesChange();return this},getEditCapabilities:function(R){var ia={canCreate:!1,canUpdate:!1,canDelete:!1,canUpdateGeometry:!1};if(!this.loaded||!this.isEditable())return ia;var ja=R&&R.feature;R=R&&R.userId||this.getUserId();var T=e.map(this.capabilities?this.capabilities.toLowerCase().split(","):
[],k.trim),ha=(ia=-1<e.indexOf(T,"editing"))&&-1<e.indexOf(T,"create"),na=ia&&-1<e.indexOf(T,"update");T=ia&&-1<e.indexOf(T,"delete");var qa=this.ownershipBasedAccessControlForFeatures,ua=this.editFieldsInfo,za=ua&&ua.creatorField;ua=ua&&ua.realm;ja=(ja=ja&&ja.attributes)&&za?ja[za]:void 0;var Ea=!!this.userIsAdmin;za=!qa||Ea||!(!qa.allowOthersToUpdate&&!qa.allowUpdateToOthers);var Pa=!qa||Ea||!(!qa.allowOthersToDelete&&!qa.allowDeleteToOthers),Oa=!qa||Ea||!qa.hasOwnProperty("allowAnonymousToUpdate")||
qa.allowAnonymousToUpdate;qa=!qa||Ea||!qa.hasOwnProperty("allowAnonymousToDelete")||qa.allowAnonymousToDelete;R&&ua&&(R=R+"@"+ua);if(Ea||ia&&!(ha||na||T))ha=na=T=!0;ia={canCreate:ha,canUpdate:na,canDelete:T,canUpdateGeometry:Ea||this.allowGeometryUpdates};R||(ia.canUpdate=ia.canUpdate&&Oa,ia.canDelete=ia.canDelete&&qa);null===ja?(ia.canUpdate=ia.canUpdate&&za,ia.canDelete=ia.canDelete&&Pa):""!==ja&&ja&&R.toLowerCase()!==ja.toLowerCase()&&(ia.canUpdate=ia.canUpdate&&za,ia.canDelete=ia.canDelete&&Pa);
return ia},getUserId:function(){var R;this.loaded&&(R=this.credential&&this.credential.userId||this.userId||"");return R},setUserIsAdmin:function(R){this.userIsAdmin=R},setEditSummaryCallback:function(R){this.editSummaryCallback=R},getEditSummary:function(R,ia,ja){ja=A.isDefined(ja)?ja:(new Date).getTime();var T="";ja=this.getEditInfo(R,ia,ja);(ia=ia&&ia.callback||this.editSummaryCallback)&&(ja=ia(R,ja)||"");if(k.isString(ja))T=ja;else{if(ja){R=ja.action;ia=ja.userId;var ha=ja.timeValue,na=0;R&&na++;
ia&&na++;A.isDefined(ha)&&na++;1<na&&(T=("edit"===R?"edit":"create")+(ia?"User":"")+(A.isDefined(ha)?ja.displayPattern:""))}T=T&&A.substitute(ja,this.i18n.layers.FeatureLayer[T])}return T},getEditInfo:function(R,ia,ja){if(this.loaded){ja=A.isDefined(ja)?ja:(new Date).getTime();ia=ia&&ia.action||"last";var T=this.editFieldsInfo,ha=T&&T.creatorField,na=T&&T.creationDateField,qa=T&&T.editorField;T=T&&T.editDateField;qa=(R=R&&R.attributes)&&qa?R[qa]:void 0;T=R&&T?R[T]:null;ha=this._getEditData(R&&ha?
R[ha]:void 0,R&&na?R[na]:null,ja);ja=this._getEditData(qa,T,ja);switch(ia){case "creation":var ua=ha;break;case "edit":ua=ja;break;case "last":ua=ja||ha}ua&&(ua.action=ua===ja?"edit":"creation");return ua}},_getEditData:function(R,ia,ja){if(A.isDefined(ia)){var T=ja-ia;var ha=0>T?"Full":6E4>T?"Seconds":12E4>T?"Minute":36E5>T?"Minutes":72E5>T?"Hour":864E5>T?"Hours":6048E5>T?"WeekDay":"Full"}if(void 0!==R||ha){var na=na||{};na.userId=R;ha&&(R=m.format,ja=new Date(ia),na.minutes=Math.floor(T/6E4),na.hours=
Math.floor(T/36E5),na.weekDay=R(ja,{datePattern:"EEEE",selector:"date"}),na.formattedDate=R(ja,{selector:"date"}),na.formattedTime=R(ja,{selector:"time"}),na.displayPattern=ha,na.timeValue=ia)}return na},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},isQueryable:function(){var R=e.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],k.trim);return this._isStream||this.userIsAdmin||this._collection||-1!==e.indexOf(R,"query")||-1!==e.indexOf(R,"catalog")},setResolution:function(R){return this.setMaxAllowableOffset(R)},
setMaxAllowableOffset:function(R){this.isEditable()||(this._optMaxOffset=R,this._setMaxOffset(R,!0));return this},_resetMaxAllowableOffset:function(){this.setMaxAllowableOffset(this._optMaxOffset);this._prevScale=null;this._refreshMaxAllowableOffset()},_refreshMaxAllowableOffset:function(){this._calcMaxOffsetForAutoSnapshot();this._updateMaxOffset();this._needsRefresh=!1},getResolution:function(){return this.getMaxAllowableOffset()},getMaxAllowableOffset:function(){var R=this._quantizationParameters?
this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?this._maxOffset:R},_setMaxOffset:function(R,ia){if(null==R)return delete this._maxOffset,delete this._quantizationParameters,this;this.quantize&&this.supportsCoordinatesQuantization?("esriGeometryPolyline"===this.geometryType?this._maxOffset=R:delete this._maxOffset,this._quantizationParameters=R?{mode:"view",originPosition:"upperLeft",tolerance:R,extent:this.fullExtent}:null):(this._isFractionalOffsetAllowed()&&ia||(R=Math.floor(R)),
isNaN(R)||0===R?delete this._maxOffset:this._maxOffset=R,delete this._quantizationParameters);return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(R){R=(R=R&&R.split("-"))&&R[0]&&R[0].toLowerCase();return-1!==e.indexOf(this._langsWithDot,R)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(R){this.loaded?this._canAutoGeneralize()&&
((this._autoGeneralize=R)?(this._isAutoSnapshotMode()&&(this._prevScale=null),this._updateMaxOffset()):this._setMaxOffset(null)):this._optAutoGen=R;return this},_canAutoGeneralize:function(){return!this.isEditable()&&this.mode!==va.MODE_SNAPSHOT},setGDBVersion:function(R){this._collection||R===this.gdbVersion||!R&&!this.gdbVersion||(this.gdbVersion=R,this._task.gdbVersion=R,this._url.query=k.mixin(this._url.query,{gdbVersion:R}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange());
return this},hasAllFeatures:function(){return this._mode?this._mode.hasAllFeatures():!0},hasUpdateError:function(){return this._mode?this._mode.hasUpdateError():!1},setDefinitionExpression:function(R){this._defnExpr=R;this._hasPendingLimitQuery()||((R=this._checkFeatureLimit())?this._evalModeAndApplyDefnExpr(R):this._applyDefnExpr());return this},_applyDefnExpr:function(){var R=this._mode;R&&R.propertyChangeHandler(1)},_evalModeAndApplyDefnExpr:function(R){R.then(k.hitch(this,function(ia){ia&&(ia instanceof
Error||!ia.modeChanged)&&this._applyDefnExpr()}))},getDefinitionExpression:function(){return this._defnExpr},hasDefinitionExpressionWithCurrentTimestamp:function(){return this.reSQLCurrentTimestamp.test(this.getDefinitionExpression())},setTimeDefinition:function(R){this._isSnapshotMode()&&(this._timeDefn=R,(R=this._mode)&&R.propertyChangeHandler(2));return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(R,ia){this._timeOffset=R;this._timeOffsetUnits=ia;(R=this._mode)&&
R.propertyChangeHandler(0);return this},setUseMapTime:function(R){this.useMapTime=R;this._toggleTime(!this.suspended);(R=this._mode)&&R.propertyChangeHandler(0)},selectFeatures:function(R,ia,ja,T){ia=ia||va.SELECTION_NEW;this._hasSelectionError=this._hasPartialSelectedFeatures=!1;R=this._getShallowClone(R);var ha=this._map,na=this,qa=w._fixDfd(new h(w._dfdCanceller));R.outFields=this.getOutFields();R.returnGeometry=!0;R.multipatchOption=this.multipatchOption;ha&&(R.outSpatialReference=new q(ha.spatialReference.toJson()));
if(!this._applyQueryFilters(R,!0)){var ua={features:[]};this._selectHandler(ua,ia,ja,T,qa);return qa}if(ha=this._canDoClientSideQuery(R))qa._pendingDfd=d(this._doQuery(R,ha)),qa._pendingDfd.then(function(Ea){ua={features:Ea};na._selectHandler(ua,ia,ja,T,qa)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,T,qa,!0),qa;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,T,
qa,!0),qa;var za=this;this._ts&&(R._ts=(new Date).getTime());ha=this._canFetchPBFForQuery(R);this._enableEditModeQuantization(R,ha);(qa._pendingDfd=this._task.execute(R,null,null,ha?{format:"pbf"}:null)).addCallbacks(function(Ea){za._selectHandler(Ea,ia,ja,T,qa)},function(Ea){za._hasPartialSelectedFeatures=!0;za._hasSelectionError=!0;za._resolve([Ea],null,T,qa,!0)})}return qa},getSelectedFeatures:function(){var R=this._selectedFeatures,ia=[],ja;for(ja in R)R.hasOwnProperty(ja)&&ia.push(R[ja]);return ia},
clearSelection:function(R){var ia=this._selectedFeatures,ja=this._mode,T;for(T in ia)ia.hasOwnProperty(T)&&(this._unSelectFeatureIIf(T,ja),ja._removeFeatureIIf(T));this._selectedFeatures={};this._isSelOnly&&ja._applyTimeFilter(!0);if(!R)this.onSelectionClear();return this},setSelectionSymbol:function(R){if(this._selectionSymbol=R){var ia=this._selectedFeatures,ja;for(ja in ia)ia.hasOwnProperty(ja)&&ia[ja].setSymbol(R)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(R){R?
(this.labelingInfo=R,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this._evalSurfaceType();this.onLabelingInfoChange()},_fixLabelExpr:function(){var R=/\[([^\[\]]+)\]/ig,ia,ja=this,T=function(ha,na){ha=ja._getField(na,!0);return"["+(ha&&ha.name||na)+"]"};e.forEach(this.labelingInfo,function(ha){if(ia=ha.labelExpression)ha.labelExpression=ia.replace(R,T)})},_updateRequiredFieldsFromLabelingInfo:function(){var R=[];e.forEach(this.labelingInfo,function(ia){var ja=
ia.labelExpressionInfo;if(ia.labelExpression){var T=/[\[\]]/ig;ia=ia.labelExpression.match(/\[[^\[\]]+\]/ig);(ia=e.map(ia,function(na){return na.replace(T,"")}))&&(R=R.concat(ia))}if(ja){if(ja.value){var ha=/[\{\}]/ig;ia=ja.value.match(/\{[^\{\}]+\}/ig);(ia=e.map(ia,function(na){return na.replace(ha,"")}))&&(R=R.concat(ia))}ja.expression&&(R=R.concat(J.extractFieldNames(ja.expression)))}});R=e.map(R,function(ia){var ja=this.getField(ia);return ja?ja.name:ia},this);this._requiredFields&&(this._requiredFields=
this._requiredFields.concat(R))},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(R,ia,ja,T,ha,na){var qa=na.assembly,ua=na.dfd;this._applyNormalized(R,qa&&qa[0]);this._applyNormalized(ia,qa&&qa[1]);this.onBeforeApplyEdits(R,ia,ja);var za={},Ea=this.objectIdField;qa={f:"json"};var Pa=!1;if(this._collection)na={},na.addResults=R?e.map(R,function(){Pa=!0;return{objectId:this._nextId++,success:!0}},this):null,na.updateResults=ia?e.map(ia,function(Ua){Pa=!0;var bb=Ua.attributes[Ea];
za[bb]=Ua;return{objectId:bb,success:!0}},this):null,na.deleteResults=ja?e.map(ja,function(Ua){Pa=!0;return{objectId:Ua.attributes[Ea],success:!0}},this):null,Pa?this._editHandler(na,R,za,T,ha,ua):this._resolve([na.addResults,na.updateResults,na.deleteResults],null,T,ua);else{R&&0<R.length&&(qa.adds=this._convertFeaturesToJson(R,0,1),Pa=!0);if(ia&&0<ia.length){for(na=0;na<ia.length;na++){var Oa=ia[na];za[Oa.attributes[Ea]]=Oa}qa.updates=this._convertFeaturesToJson(ia,0,0,1);Pa=!0}if(ja&&0<ja.length){ia=
[];for(na=0;na<ja.length;na++)ia.push(ja[na].attributes[Ea]);qa.deletes=ia.join(",");Pa=!0}if(Pa){var Ha=this;return B({url:this._url.path+"/applyEdits",content:k.mixin(qa,this._url.query),callbackParamName:"callback",load:function(Ua){Ha._editHandler(Ua,R,za,T,ha,ua)},error:function(Ua){Ha._resolve([Ua],null,ha,ua,!0)}},{usePost:!0})}this._resolve([],null,T,ua)}},queryFeatures:function(R,ia,ja,T){return this._query("execute","onQueryFeaturesComplete",R,ia,ja,T)},queryRelatedFeatures:function(R,ia,
ja){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",R,ia,ja)},queryIds:function(R,ia,ja,T){return this._query("executeForIds","onQueryIdsComplete",R,ia,ja,T)},queryCount:function(R,ia,ja,T){return this._query("executeForCount","onQueryCountComplete",R,ia,ja,T)},queryExtent:function(R,ia,ja,T){return this._query("executeForExtent","onQueryExtentComplete",R,ia,ja,T)},queryAttachmentInfos:function(R,ia,ja){var T=this._url.path+"/"+R+"/attachments",ha=new h(w._dfdCanceller),
na=this;T=v.normalize(T);ha._pendingDfd=B({url:T,content:k.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(qa){qa=qa.attachmentInfos;var ua;e.forEach(qa,function(za){ua=l.objectToQuery({gdbVersion:na._url.query&&na._url.query.gdbVersion,layer:na._url.query&&na._url.query.layer,token:na._getToken()});za.url=T+"/"+za.id+(ua?"?"+ua:"");za.objectId=R});na._resolve([qa],"onQueryAttachmentInfosComplete",ia,ha)},error:function(qa){na._resolve([qa],null,ja,ha,!0)}});return ha},
addAttachment:function(R,ia,ja,T){return this._sendAttachment("add",R,ia,ja,T)},updateAttachment:function(R,ia,ja,T,ha){ja.appendChild(f.create("input",{type:"hidden",name:"attachmentId",value:ia}));return this._sendAttachment("update",R,ja,T,ha)},deleteAttachments:function(R,ia,ja,T){var ha=this._url.path+"/"+R+"/deleteAttachments",na=new h(w._dfdCanceller),qa=this;ia={f:"json",attachmentIds:ia.join(",")};na._pendingDfd=B({url:ha,content:k.mixin(ia,this._url.query),callbackParamName:"callback",load:k.hitch(this,
function(ua){ua=ua.deleteAttachmentResults;ua=e.map(ua,function(za){za=new Da(za);za.attachmentId=za.objectId;za.objectId=R;return za});qa._resolve([ua],"onDeleteAttachmentsComplete",ja,na)}),error:function(ua){qa._resolve([ua],null,T,na,!0)}},{usePost:!0});return na},addType:function(R){var ia=this.types;if(ia){if(e.some(ia,function(ja){return ja.id==R.id?!0:!1}))return!1;ia.push(R)}else this.types=[R];return this._typesDirty=!0},deleteType:function(R){if(this._collection){var ia=this.types;if(ia){var ja=
-1;e.some(ia,function(T,ha){return T.id==R?(ja=ha,!0):!1});if(-1<ja)return this._typesDirty=!0,ia.splice(ja,1)[0]}}},toJson:function(){var R=this._json;if(R=k.isString(R)?g.fromJson(R):k.clone(R)){R=R.layerDefinition?R:{layerDefinition:R};var ia=R.layerDefinition,ja=this._collection;if(ja&&this._typesDirty){ia.types=e.map(this.types||[],function(qa){return qa.toJson()});var T=this.renderer,ha=this.labelingInfo,na=ia.drawingInfo;!T&&!ha||na||(na=ia.drawingInfo={});na&&T&&-1===T.declaredClass.indexOf("TemporalRenderer")&&
(na.renderer=T.toJson());ha&&(na.labelingInfo=e.map(ha,function(qa){return qa.toJson()}))}T=null;if(!ja||this._fcAdded)T={geometryType:ia.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};R.featureSet=k.mixin({},R.featureSet||{},T);R.featureSet.transform&&(ha=R.featureSet.transform,delete R.featureSet.transform,T=new S(R.featureSet),T.quantize(ha),R.featureSet=T.toJson());ja&&(R.nextObjectId=this._nextId,ia.capabilities=this.capabilities);return R}},onSelectionComplete:function(){},
onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},
onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},onFeatureReductionRendererChange:function(){},onFeatureReductionChange:function(){},onFeatureUpdatesResult:function(){},_evalFeatureUpdates:function(){if(!this._featureUpdatesPromise||this._featureUpdatesPromise.isFulfilled())this._featureUpdatesPromise=this.hasFeatureUpdates().otherwise(function(R){return!(R&&"cancel"===R.dojoType)}).always(k.hitch(this,function(R){this._featureUpdatesPromise=null;this.onFeatureUpdatesResult({hasUpdates:R})}))},
_evalRefresh:function(R){(R.hasUpdates||this.hasDefinitionExpressionWithCurrentTimestamp())&&this.refresh()},_evalArcadeSupport:function(){var R=new h;setTimeout(k.hitch(this,function(){this._initializeArcadeEngine().always(function(){R.resolve()})}),0);return R.promise},_initializeArcadeEngine:function(){var R=[],ia=this.infoTemplate;ia&&ia.initializeArcadeEngine&&R.push(ia.initializeArcadeEngine());(ia=this.renderer)&&ia.initializeArcadeEngine&&R.push(ia.initializeArcadeEngine());var ja=[];e.forEach(this.labelingInfo,
function(T){(T=T.labelExpressionInfo)&&T.expression&&ja.push(T.expression)});R.push(Q.initialize(ja));return D(R)},_isGeometryOperationsUsed:function(){var R=this.infoTemplate,ia=this.renderer,ja=this.labelingInfo;return R&&R.hasGeometryOperations&&R.hasGeometryOperations()||ia&&ia.hasGeometryOperations&&ia.hasGeometryOperations()||e.some(ja,function(T){return J.hasGeometryOperations(T.labelExpressionInfo&&T.labelExpressionInfo.expression)})?!0:!1},_forceIdentity:function(){var R=new h,ia=this,ja=
this._url&&this._url.path;var T=ja&&ja.toLowerCase().indexOf("/rest/services");var ha=this.editFieldsInfo;ha=ha&&(ha.creatorField||ha.editorField);(this.userIsAdmin||ha)&&!this._getToken()&&-1<T&&x.id?(T=ja.substring(0,T)+"/rest/info",B({url:T,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(na){if(na.owningSystemUrl)return x.id.checkSignInStatus(na.owningSystemUrl+"/sharing")}).then(function(na){if(na)return x.id.getCredential(ja)}).then(function(na){na&&ia._findCredential()}).always(function(){R.resolve()})):
R.resolve();return R.promise},_isSnapshotMode:function(){return this._mode?this._mode.isInstanceOf(ya):!1},_isOnDemandMode:function(){return this._mode?this._mode.isInstanceOf(wa):!1},_isAutoSnapshotMode:function(){return this._isAutoModeEnabled()&&this.currentMode===va.MODE_SNAPSHOT},_getMaxFeaturesForAutoSnapshotMode:function(){var R=this.geometryType;if("esriGeometryPolyline"===R||"esriGeometryPolygon"===R||"esriGeometryMultipoint"===R||this.hasXYFootprint())var ia=this.maxRecordCountForAuto;else"esriGeometryPoint"===
R&&(ia=this.maxPointCountForAuto);return ia},getLastExceedsLimitResult:function(){return this._lastExceedsLimitResult},_canUseSnapshotMode:function(R){this._lastExceedsLimitResult=R=(R=R&&R.features&&R.features[0])&&R.attributes&&R.attributes.exceedslimit;return!(this.mode!==va.MODE_AUTO||this.isEditable()||0!==R||!(this._isPaginationAllowed()||this.maxRecordCount>=this._getMaxFeaturesForAutoSnapshotMode()))},_evalModeFromFLimit:function(R){this._canUseSnapshotMode(R)?this._enableAutoSnapshotMode():
this._enableAutoOnDemandMode()},_enableAutoSnapshotMode:function(){var R=va.MODE_SNAPSHOT;this.isFeatureReductionApplied()?this._updatePreFReductionState(R):this._preSurfaceChangeState?(this._updatePreSurfaceChangeState(R),this._evalSurfaceType(!0)):this.currentMode!==R&&this._setFetchMode(va.MODE_AUTO,R)},_enableAutoOnDemandMode:function(){var R=va.MODE_ONDEMAND;this.isFeatureReductionApplied()?this._updatePreFReductionState(R):this._preSurfaceChangeState?this._updatePreSurfaceChangeState(R):this.currentMode!==
R&&(this._setFetchMode(va.MODE_AUTO,R),this._evalSurfaceType())},_evalModeFromFReduction:function(R){this.loaded&&(R&&this.isFeatureReductionEnabled()&&this._canCluster(R)?this._enableFReductionMode():this._disableFReductionMode())},_enableFReductionMode:function(){this._evalSurfaceType(!0);if(!this._preFReductionState){var R=this.currentMode;R!==va.MODE_SNAPSHOT&&R!==va.MODE_STREAM&&R!==va.MODE_SELECTION&&(this._preFReductionState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===
va.MODE_AUTO?va.MODE_AUTO:va.MODE_SNAPSHOT,va.MODE_SNAPSHOT))}},_disableFReductionMode:function(){var R=this._preFReductionState;this._preFReductionState=null;!R||R.mode===this.mode&&R.currentMode===this.currentMode||(this._setFetchMode(R.mode,R.currentMode),this._evalSurfaceType())},_updatePreFReductionState:function(R){this._preFReductionState=this._preFReductionState||{};this._preFReductionState.mode=va.MODE_AUTO;this._preFReductionState.currentMode=R},_evalModeFromSurface:function(){this.hasWebGLSurface()?
this._enableWebGLSurfaceMode():this._disableWebGLSurfaceMode()},_enableWebGLSurfaceMode:function(){this._preSurfaceChangeState||(this._preSurfaceChangeState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===va.MODE_AUTO?va.MODE_AUTO:va.MODE_ONDEMAND,va.MODE_ONDEMAND,this.webglDeps.OnDemandDrillMode))},_disableWebGLSurfaceMode:function(){var R=this._preSurfaceChangeState;R&&(this._preSurfaceChangeState=null,this._setFetchMode(R.mode,R.currentMode))},_updatePreSurfaceChangeState:function(R){this._preSurfaceChangeState=
this._preSurfaceChangeState||{};this._preSurfaceChangeState.mode=va.MODE_AUTO;this._preSurfaceChangeState.currentMode=R},_setFetchMode:function(R,ia,ja){this.clearSelection();this._mode.suspend();this._mode.destroy();this.mode=R;this.currentMode=ia;ja=ja||this._getModeConstructor(ia);this._mode=new ja(this);this.queryPagination=ia===va.MODE_ONDEMAND&&-1===ja.prototype.declaredClass.toLowerCase().indexOf("ondemanddrillmode")?!1:this._isPaginationAllowed();(R=this.getMap())&&R.loaded&&(this._resetMaxAllowableOffset(),
this._mode.initialize(R),this._mode.startup())},_isPaginationAllowed:function(){return!(!this._optQueryPagination||this.loaded&&!this.advancedQueryCapabilities.supportsPagination)},_getModeConstructor:function(R){var ia;R===va.MODE_SNAPSHOT?ia=ya:R===va.MODE_ONDEMAND&&(ia=wa);return ia},_hasOnDemandDrillMode:function(){var R=this._mode;R=R&&R.declaredClass;return!!(R&&-1<R.toLowerCase().indexOf("ondemanddrillmode"))},_checkFeatureLimit:function(){this._limitPromise&&(this._limitPromise.cancel(),this._limitPromise=
null);var R=this._queryLimit();R&&(this._lastExceedsLimitResult=null,this._limitPromise=R.then(k.hitch(this,function(ia){var ja=this.currentMode;this._evalModeFromFLimit(ia);return{modeChanged:this.currentMode!==ja}})).always(k.hitch(this,function(ia){this._limitPromise=null;return ia})));return this._limitPromise},_hasPendingLimitQuery:function(){return!!this._exceedsLimitTimer},_queryLimit:function(){if(this._isAutoModeEnabled()){var R,ia,ja=new h(function(){clearTimeout(R);R=null;ia&&!ia.isFulfilled()&&
ia.cancel();ia=null});this._exceedsLimitTimer=R=setTimeout(k.hitch(this,function(){this._exceedsLimitTimer=null;var T=new O,ha=new L;ha.statisticType="exceedslimit";ha.maxPointCount=this.maxPointCountForAuto;ha.maxRecordCount=this.maxRecordCountForAuto;ha.maxVertexCount=this.maxVertexCountForAuto;ha.outStatisticFieldName="exceedslimit";T.outStatistics=[ha];ia=this.queryFeatures(T).promise.then(function(na){ja.resolve(na)}).otherwise(function(na){ja.reject(na)})}),0);return ja.promise}},_isAutoModeEnabled:function(){return this.mode===
va.MODE_AUTO&&this.reHostedFS.test(this.url)},_updateCaps:function(){var R=this._editable,ia=k.trim(this.capabilities||""),ja=e.map(ia?ia.split(","):[],k.trim),T=e.map(ia?ia.toLowerCase().split(","):[],k.trim);ia=e.indexOf(T,"editing");var ha;T={Create:e.indexOf(T,"create"),Update:e.indexOf(T,"update"),Delete:e.indexOf(T,"delete")};if(R&&-1===ia)ja.push("Editing");else if(!R&&-1<ia){R=[ia];for(ha in T)-1<T[ha]&&R.push(T[ha]);R.sort();for(ha=R.length-1;0<=ha;ha--)ja.splice(R[ha],1)}this.capabilities=
ja.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(R){this._toggleTime(!1);this._refreshHandle&&(this._refreshHandle.remove(),this._refreshHandle=null);var ia=this._mode;ia&&(ia.suspend(),R&&ia.destroy())},onResume:function(R){this.inherited(arguments);this._toggleTime(!0);this._refreshHandle=this.on("feature-updates-result",k.hitch(this,this._evalRefresh));var ia=this._map,
ja=this._getRenderer();if(R.firstOccurrence){if(this._fixRendererFields(),this._updateRequiredFieldsFromLabelingInfo(),this._checkFields(),this.clearSelection(),this._evalFeatureReduction(),this.timeInfo&&!this._trackManager&&(this._trackIdField||ja&&(ja.latestObservationRenderer||ja.trackRenderer))&&(this._trackManager=new fa(this),this._trackManager.initialize(ia),this._childLayer=this._trackManager.container),ja&&"colors"in ja&&"blurRadius"in ja&&"maxPixelIntensity"in ja&&"esriGeometryPoint"==
this.geometryType&&!this._heatmapManager&&(this._heatmapManager=new P(this),this._heatmapManager.initialize(ia)),this._zoomConnect=a.connect(ia,"onZoomEnd",this,this._zoomEndHandler),this._refreshMaxAllowableOffset(),ja=this._mode)ja._init||ja.initialize(ia),ja.startup()}else this._zoomEndHandler(),this._mode&&this._mode.resume()},_zoomEndHandler:function(){var R=this._map;this._updateMaxOffset();this._prevScale=R.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var R=
this._map;R&&R.loaded&&this._autoGeneralize&&(this._isAutoSnapshotMode()?(R=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=R!=this.getMaxAllowableOffset())):this._setMaxOffset(R.extent.getWidth()/R.width,!R.extent.spatialReference.isWebMercator()))},_getMaxOffsetForScale:function(){if(this._map){var R=this._map.getScale(),ia=this._calculatedScale,ja=this._calcMaxOffset,T=this._prevScale;return R>=ia&&(null==T||T<ia)?ja:R<ia&&
(null==T||T>=ia)?null:this.getMaxAllowableOffset()}},_calcMaxOffsetForAutoSnapshot:function(){var R=this._map;if(R&&this._canAutoGeneralize()&&this._isAutoSnapshotMode()&&this._autoGeneralize&&null==this.getMaxAllowableOffset()){var ia=this.generalizeForScale;this._calculatedScale=ia=this.maxScale?this.maxScale:this.minScale?Math.min(ia,this.minScale):Math.min(ia,X.getScale(R,this.initialExtent));this._calcMaxOffset=R.extent.getWidth()/R.width/R.getScale()*ia}else this._calculatedScale=this._calcMaxOffset=
void 0},_toggleTime:function(R){var ia=this._map;R&&this.timeInfo&&this.useMapTime&&ia?(this._mapTimeExtent=ia.timeExtent,this._timeConnect||(this._timeConnect=a.connect(ia,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,a.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(R){this._mapTimeExtent=R;(R=this._mode)&&R.propertyChangeHandler(0)},_getOffsettedTE:function(R){var ia=this._timeOffset,ja=this._timeOffsetUnits;return R&&ia&&ja?R.offset(-1*
ia,ja):R},_getTimeOverlap:function(R,ia){return R&&ia?R.intersection(ia):R||ia},_getTimeFilter:function(R){var ia=this.getTimeDefinition();if(ia){var ja=this._getTimeOverlap(ia,null);if(!ja)return[!1]}if(R){if(R=ja?this._getTimeOverlap(R,ja):R,!R)return[!1]}else R=ja;return[!0,R]},_getAttributeFilter:function(R){var ia=this.getDefinitionExpression();return R?ia?"("+ia+") AND ("+R+")":R:ia},_applyQueryFilters:function(R,ia){R.where=this._getAttributeFilter(R.where);R.returnGeometry&&null==R.maxAllowableOffset&&
!R.quantizationParameters&&(R.maxAllowableOffset=this._maxOffset,R.quantizationParameters=this._quantizationParameters);ia&&this.supportsAdvancedQueries&&(R.orderByFields=R.orderByFields||this.getOrderByFields());if(this.timeInfo)if(ia=this._getTimeFilter(R.timeExtent),ia[0])R.timeExtent=ia[1];else return!1;return!0},_add:function(R){var ia=this._selectionSymbol,ja=R.attributes,T=this.visibilityField;ia&&this._isSelOnly&&R.setSymbol(ia);if(T&&ja&&ja.hasOwnProperty(T))R[ja[T]?"show":"hide"]();return this.add.apply(this,
arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(R,ia){var ja=[],T=this._map,ha;if((this._collection||!this._isTable&&T)&&!(R.text||R.where&&R.where!==this.getDefinitionExpression()||R.orderByFields&&R.orderByFields.length&&(ha=this.getOrderByFields()||[])&&R.orderByFields.join()!==ha.join()||R.outStatistics||R.returnDistinctValues)){ha=this._isSnapshotMode();var na=this._isSelOnly;ia=ha?null:ia?this._getExtentOfTiles(T.extent):T.extent;if(T=
R.geometry){if(na||R.spatialRelationship!==O.SPATIAL_REL_INTERSECTS||"extent"!==T.type||!ha&&!ia.contains(T))return;ja.push(1)}if(ia=R.objectIds)if(ha)ja.push(2);else{T=ia.length;var qa=this._mode,ua=0,za;for(za=0;za<T;za++)qa._getFeature(ia[za])&&ua++;if(ua===T)ja.push(2);else return}if(this.timeInfo)if(R=R.timeExtent,ia=this._mapTimeExtent,ha)R&&ja.push(3);else if(na){if(R)return}else if(ia)if(-1!==e.indexOf(ja,2))R&&ja.push(3);else if(-1!==e.indexOf(ja,1))R==ia&&ja.push(3);else return;else if(0<
ja.length)R&&ja.push(3);else if(R)return;return 0<ja.length?ja:null}},_getAbsMid:function(R){return b.toAbsMid?b.toAbsMid(R):y.id.replace(/\/[^\/]*$/ig,"/")+R},_doQuery:function(R,ia,ja){var T=[],ha=this.objectIdField,na=this,qa=new h,ua=new h,za=this.graphics;if(-1!==e.indexOf(ia,1)){var Ea=this.spatialIndex||this._map&&this._map.spatialIndex,Pa,Oa=R.geometry._normalize(null,!0);null==Ea&&ba.autoSpatialIndexing?Pa=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(k.hitch(this,
k.partial(this._getFromIndex,Oa,Ea)),function(Ha){ua.resolve(k.hitch(this,k.partial(this._filterByExtent,za,Oa)))}):Ea&&(Pa=this._getFromIndex(Oa,Ea));Pa?Pa.then(function(Ha){for(var Ua=0;Ua<Ha.length;Ua++)Ha[Ua].results&&(T=T.concat(Ha[Ua].results));ua.resolve(T)}).otherwise(function(Ha){ua.reject(Ha)}):ua.resolve(this._filterByExtent(za,Oa))}else ua.resolve(za);ua.then(function(Ha){T=Ha;if(-1!==e.indexOf(ia,2)){var Ua=R.objectIds;T=e.filter(T,function(bb){return-1<e.indexOf(Ua,bb.attributes[ha])})}-1!==
e.indexOf(ia,3)&&na.timeInfo&&(Ha=R.timeExtent,T=na._filterByTime(T,Ha.startTime,Ha.endTime).match);ja&&(T=e.map(T,function(bb){return bb.attributes[ha]},this));qa.resolve(T)});return qa},_getFromIndex:function(R,ia){ia=ia||this.spatialIndex||this._map.spatialIndex;R instanceof Array||(R=[R]);var ja=this.id;return n(e.map(R,function(T){return ia.intersects(T,ja)}))},_filterByExtent:function(R,ia){for(var ja=[],T=0,ha=R.length;T<ha;T++){var na=R[T],qa=na.geometry;qa&&(this.normalization&&ia.length?
(ia[0].intersects(qa)||ia[1].intersects(qa))&&ja.push(na):ia.intersects(qa)&&ja.push(na))}return ja},_filterByTime:function(R,ia,ja){var T=this._startTimeField,ha=this._endTimeField,na;this._twoTimeFields||(na=T||ha);var qa=A.isDefined,ua=[],za=[],Ea,Pa=R.length;ia=ia?ia.getTime():-Infinity;ja=ja?ja.getTime():Infinity;if(na)for(Ea=0;Ea<Pa;Ea++){var Oa=R[Ea];var Ha=Oa.attributes;T=Ha[na];T>=ia&&T<=ja?ua.push(Oa):za.push(Oa)}else for(Ea=0;Ea<Pa;Ea++)Oa=R[Ea],Ha=Oa.attributes,na=Ha[T],Ha=Ha[ha],na=qa(na)?
na:-Infinity,Ha=qa(Ha)?Ha:Infinity,na>=ia&&na<=ja||Ha>=ia&&Ha<=ja||ia>=na&&ja<=Ha?ua.push(Oa):za.push(Oa);return{match:ua,noMatch:za}},_getSizeVariables:function(R){return R&&e.filter(R.getVisualVariablesForType("sizeInfo",!1),function(ia){return!(!ia.field&&!ia.valueExpression)})},_needClientSideSorting:function(R){return this._collection?!(!R||!R.length):e.some(R,function(ia){return!!ia.valueExpression})},_sortFeatures:function(R){var ia=this.renderer,ja=this._getSizeVariables(ia);if(R&&1<R.length&&
this._needClientSideSorting(ja)){var T=ja[0],ha=this;R.sort(function(na,qa){na._layer||(na._layer=ha);qa._layer||(qa._layer=ha);na=ia._getDataValue(na,T,"sizeInfo");qa=ia._getDataValue(qa,T,"sizeInfo");return null==na?-1:null==qa?1:qa-na})}return R},_resolve:function(R,ia,ja,T,ha){ia&&this[ia].apply(this,R);ja&&ja.apply(null,R);T&&w._resDfd(T,R,ha)},_getShallowClone:function(R){var ia=new O,ja;for(ja in R)R.hasOwnProperty(ja)&&(ia[ja]=R[ja]);return ia},_canFetchPBF:function(){return!!(Sa&&Qa&&this.supportsFormatPBF)},
_canFetchPBFForQuery:function(R){return!(!this._canFetchPBF()||!this._isCacheHintEnabled(R)&&this._isAutoSnapshotMode()||!(R.quantizationParameters||!this.isEditable()&&this.supportsQuantizationEditMode)||R.outStatistics)},_enableEditModeQuantization:function(R,ia){R&&ia&&!R.quantizationParameters&&(R.quantizationParameters={mode:"edit"})},_enableCacheHint:function(R,ia){var ja=this.advancedQueryCapabilities;ja&&ja.supportsQueryWithCacheHint?null==R.cacheHint&&(R.cacheHint=!0):ja&&ja.supportsQueryWithResultType&&
this.reHostedFS.test(this.url)&&!R.resultType&&(R.resultType=ia||"coherent")},_isCacheHintSupported:function(){var R=this.advancedQueryCapabilities;return R?!!(R.supportsQueryWithCacheHint||R.supportsQueryWithResultType&&this.reHostedFS.test(this.url)):!1},_isCacheHintEnabled:function(R){var ia=this.advancedQueryCapabilities;return R&&ia?!!(ia.supportsQueryWithCacheHint&&R.cacheHint||ia.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&("coherent"===R.resultType||"tile"===R.resultType)):
!1},_query:function(R,ia,ja,T,ha,na){var qa=this,ua=this._map;na=na&&na.snapToTiles;var za=new h(w._dfdCanceller),Ea=ja,Pa,Oa,Ha;if("executeRelationshipQuery"!==R){Ea=this._getShallowClone(ja);var Ua=this.getOutFields();Ea.outFields||(Ea.outFields=Ua);Ea.outFields&&Ea.outFields.length&&(Oa=-1<e.indexOf(Ua,"*")?!1:!e.every(Ea.outFields,function(ab){return-1<e.indexOf(Ua,ab)}));Ea.returnGeometry=ja.hasOwnProperty("returnGeometry")?ja.returnGeometry:!ja.outStatistics;Ea.returnGeometry&&(Ea.multipatchOption=
this.multipatchOption,null!=Ea.maxAllowableOffset||Ea.quantizationParameters)&&(ja=null!=Ea.maxAllowableOffset?Ea.maxAllowableOffset:Ea.quantizationParameters.tolerance,null!=ja&&ja!==this.getMaxAllowableOffset()&&(Ha=!0));ua&&(ua=ua&&ua.spatialReference,(ja=Ea.outSpatialReference)?Pa=!ja.equals(ua):Ea.outSpatialReference=new q(ua.toJson()));na&&(ua=Ea.geometry)&&"extent"===ua.type&&(Ea.geometry=this._getExtentOfTiles(ua),ua!==Ea.geometry&&this._enableCacheHint(Ea));if(!this._applyQueryFilters(Ea,
"execute"===R&&!Ea.outStatistics)){switch(R){case "execute":var bb=new S({features:[]});break;case "executeForIds":bb=[];break;case "executeForCount":bb=0;break;case "executeForExtent":bb={}}this._resolve([bb],ia,T,za);return za}if(na="executeForExtent"!==R&&!Pa&&!Oa&&!Ha&&this._canDoClientSideQuery(Ea,na))return za._pendingDfd=d(this._doQuery(Ea,na,"executeForIds"===R||"executeForCount"===R)),za._pendingDfd.then(function(ab){switch(R){case "execute":bb=new S;bb.features=ab;break;case "executeForIds":bb=
ab;break;case "executeForCount":bb=ab.length}qa._resolve([bb],ia,T,za)}),za}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,ha,za,!0),za;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,ha,za,!0),za;this._ts&&(Ea._ts=(new Date).getTime());na="execute"===R&&this._canFetchPBFForQuery(Ea);this._enableEditModeQuantization(Ea,na);(za._pendingDfd=this._task[R](Ea,null,null,na?{format:"pbf"}:
null)).addCallbacks(function(ab){var gb=!!Ea.outStatistics||Pa||Oa||Ha;if("execute"===R||"executeRelationshipQuery"===R)if("execute"===R){var fb=ab.features;var kb=fb.length;for(--kb;0<=kb;kb--)if(fb[kb]._layer=qa,!gb&&!qa._isTable){var ub=qa._mode._getFeature(fb[kb].attributes[qa.objectIdField]);ub&&fb.splice(kb,1,ub)}}else for(ub in ab)if(ab.hasOwnProperty(ub))for(fb=ab[ub].features,kb=fb.length,--kb;0<=kb;kb--)fb[kb]._layer=qa;qa._resolve([ab],ia,T,za)},function(ab){qa._resolve([ab],null,ha,za,
!0)});return za},_getExtentOfTiles:function(R){var ia=this._isOnDemandMode()&&this._mode._gridLayer||da.createFromFeatureLayer({layer:this}),ja=this.getMap();ja=ja&&ja.getTargetExtent(R);return ia&&ja&&ia.getExtentOfIntersectingCells(ja)||R},_convertFeaturesToJson:function(R,ia,ja,T){var ha=[],na=this._selectionSymbol,qa=this.visibilityField,ua,za=this.objectIdField;this.loaded&&(ja||T)&&(ua=e.filter(this.fields,function(bb){return!1===bb.editable&&(!T||bb.name!==za)}));for(ja=0;ja<R.length;ja++){var Ea=
R[ja],Pa={},Oa=Ea.geometry,Ha=Ea.attributes,Ua=Ea.symbol;!Oa||T&&this.loaded&&!this.allowGeometryUpdates||(Pa.geometry=Oa.toJson());qa?(Pa.attributes=Ha=k.mixin({},Ha),Ha[qa]=Ea.visible?1:0):Ha&&(Pa.attributes=k.mixin({},Ha));Pa.attributes&&ua&&ua.length&&e.forEach(ua,function(bb){delete Pa.attributes[bb.name]});Ua&&Ua!==na&&(Pa.symbol=Ua.toJson());ha.push(Pa)}return ia?ha:g.toJson(ha)},_selectHandler:function(R,ia,ja,T,ha){switch(ia){case va.SELECTION_NEW:this.clearSelection(!0);var na=!0;break;
case va.SELECTION_ADD:na=!0;break;case va.SELECTION_SUBTRACT:na=!1}T=R.features;var qa=this._mode,ua=[],za=this.objectIdField;if(na)for(na=0;na<T.length;na++){var Ea=T[na];var Pa=Ea.attributes[za];Ea=qa._addFeatureIIf(Pa,Ea);ua.push(Ea);this._selectFeatureIIf(Pa,Ea,qa)}else for(na=0;na<T.length;na++)Ea=T[na],Pa=Ea.attributes[za],this._unSelectFeatureIIf(Pa,qa),Pa=qa._removeFeatureIIf(Pa),ua.push(Pa||Ea);this._isSelOnly&&qa._applyTimeFilter(!0);this._isImageService&&10.7>this.version&&void 0===R.exceededTransferLimit&&
(R.exceededTransferLimit=T.length===this.maxRecordCount);this._hasPartialSelectedFeatures=!!R.exceededTransferLimit;this._resolve([ua,ia,R.exceededTransferLimit?{queryLimitExceeded:!0}:null],"onSelectionComplete",ja,ha);if(R.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(R,ia,ja){var T=this._selectedFeatures,ha=T[R];ha||(ja._incRefCount(R),T[R]=ia,this._isTable||(this._setSelectSymbol(ia),ia.attr("data-selected","")));return ha||ia},_unSelectFeatureIIf:function(R,ia){var ja=
this._selectedFeatures[R];ja&&(ia._decRefCount(R),delete this._selectedFeatures[R],this._isTable||(this._setUnSelectSymbol(ja),ja.attr("data-selected")));return ja},_setSelectSymbol:function(R){var ia=this._selectionSymbol;ia&&!this._isSelOnly&&R.setSymbol(ia)},_setUnSelectSymbol:function(R){var ia=this._selectionSymbol;ia&&!this._isSelOnly&&ia===R.symbol&&R.setSymbol(null,!0)},_getOutFields:function(){var R=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,
this._trackIdField].concat(this._requiredFields).concat(this.dataAttributes);R=e.filter(R,function(ja,T,ha){return!!ja&&e.indexOf(ha,ja)===T});var ia=k.clone(this._outFields);if(ia){if(-1!==e.indexOf(ia,"*"))return ia;e.forEach(R,function(ja){-1===e.indexOf(ia,ja)&&ia.push(ja)});return ia}return R},_checkFields:function(R){var ia=R||this._getOutFields();e.forEach(ia,function(ja){"*"!==ja&&this._getField(ja)},this);R||this._isTable||this._fserver||this._collection||this._isStream||e.some(this.fields,
function(ja){return ja&&"esriFieldTypeGeometry"===ja.type?!0:!1})},_fixFieldCase:function(R,ia,ja){var T=R&&R[ia],ha;if(T&&!k.isFunction(T)){if(ha=!this._getField(T)&&this._getField(T,!0))T=R[ia]=ha.name;ja&&ja.push(T)}return T},_fixRendererFields:function(){var R=this.renderer;this._orderBy=null;this._requiredFields=[];if(R&&0<this.fields.length){var ia=[],ja;R=e.filter([R,R.observationRenderer,R.latestObservationRenderer,R.trackRenderer],A.isDefined);var T=[].concat(R);e.forEach(R,function(ha){e.forEach(ha.rendererInfos,
function(na){na.renderer&&T.push(na.renderer)})});e.forEach(T,function(ha){this._fixFieldCase(ha,"attributeField",ia);this._fixFieldCase(ha,"attributeField2",ia);this._fixFieldCase(ha,"attributeField3",ia);this._fixFieldCase(ha.rotationInfo,"field",ia);(ja=this._fixFieldCase(ha.sizeInfo,"field",ia))&&!this._orderBy&&(this._orderBy=[ja+" DESC"]);this._fixFieldCase(ha.sizeInfo,"normalizationField",ia);this._fixFieldCase(ha.colorInfo,"field",ia);this._fixFieldCase(ha.colorInfo,"normalizationField",ia);
this._fixFieldCase(ha.field,"field",ia);this._fixFieldCase(ha.opacityInfo,"field",ia);this._fixFieldCase(ha.opacityInfo,"normalizationField",ia);e.forEach(ha.visualVariables,function(qa){ja=this._fixFieldCase(qa,"field",ia);"sizeInfo"===qa.type&&ja&&!this._orderBy&&(this._orderBy=[ja+" DESC"]);this._fixFieldCase(qa,"normalizationField",ia)},this);var na=e.map(ha.getFieldsUsedInExpressions(),function(qa){var ua=this.getField(qa);return ua?ua.name:qa},this);ia=ia.concat(na);this._orderBy||!ha.addBreak||
k.isFunction(ha.attributeField)||!ha.backgroundFillSymbol&&!this._hasSizeDiff(ha)||(this._orderBy=[ha.attributeField+" DESC"])},this);this._requiredFields=e.filter(ia,A.isDefined)}},_hasSizeDiff:function(R){var ia=Number.MAX_VALUE,ja=-Number.MAX_VALUE,T,ha;e.forEach(R.infos,function(na){if(ha=na.symbol){T=0;switch(ha.type){case "simplemarkersymbol":T=ha.size;break;case "picturemarkersymbol":T=(ha.width+ha.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":T=ha.width;break;case "simplefillsymbol":case "picturefillsymbol":T=
ha.outline&&ha.outline.width}T&&(ia=Math.min(ia,T),ja=Math.max(ja,T))}});return ia!==Number.MAX_VALUE&&ja!==-Number.MAX_VALUE&&1<Math.abs(ja-ia)},getOrderByFields:function(){var R=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&R?e.filter(R,function(ia){ia=ia.split(" ")[0];return!!this._getField(ia,!0)},this):null},_createFields:function(R){var ia=R?R.length:0,ja,T=[];for(ja=0;ja<ia;ja++)T.push(new N(R[ja]));this.fields=T},_createFieldsIndex:function(){if(this._fieldsIndexDirty){var R=
this.fields,ia=R?R.length:0;if(50<ia&&this._canUseFieldsIndex()){var ja=new Map;for(var T=new Map,ha=0;ha<ia;ha++){var na=R[ha];ja.set(na.name,na);T.set(na.name.toLowerCase(),na)}ja={caseSensitive:ja,caseInsensitive:T}}this._fieldsIndex=ja;this._fieldsIndexDirty=!1}},_canUseFieldsIndex:function(){var R=u.Map;return!("function"!==typeof u.Proxy||"function"!==typeof u.Proxy.revocable||"function"!==typeof R||!R.prototype||"function"!==typeof R.prototype.set)},_getField:function(R,ia){var ja=this.fields;
if(!ja||0===ja.length)return null;ia&&(R=R.toLowerCase());this._createFieldsIndex();var T=this._fieldsIndex;if(T)return T=ia?T.caseInsensitive:T.caseSensitive,T.get(R);var ha;e.some(ja,function(na){var qa=!1;(qa=ia?na&&na.name.toLowerCase()===R?!0:!1:na&&na.name===R?!0:!1)&&(ha=na);return qa});return ha},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:e.map(e.filter(this.fields,function(R){return!(!R||"esriFieldTypeDate"!==R.type)}),function(R){return R.name})});return this._dtOpts},
_applyNormalized:function(R,ia){R&&ia&&e.forEach(R,function(ja,T){ja&&ia[T]&&ja.setGeometry(ia[T])})},_editHandler:function(R,ia,ja,T,ha,na){ha=R.addResults;var qa=R.updateResults;R=R.deleteResults;var ua,za=this.objectIdField,Ea=this._mode,Pa=this._isTable;var Oa=this.editFieldsInfo;var Ha=this.getOutFields()||[];var Ua=Oa&&Oa.creatorField,bb=Oa&&Oa.creationDateField,ab=Oa&&Oa.editorField,gb=Oa&&Oa.editDateField;Oa=Oa&&Oa.realm;-1===e.indexOf(Ha,"*")&&(Ua&&-1===e.indexOf(Ha,Ua)&&(Ua=null),bb&&-1===
e.indexOf(Ha,bb)&&(bb=null),ab&&-1===e.indexOf(Ha,ab)&&(ab=null),gb&&-1===e.indexOf(Ha,gb)&&(gb=null));var fb=bb||gb?(new Date).getTime():null,kb=Ua||ab?this.getUserId():void 0;kb&&Oa&&(kb=kb+"@"+Oa);if(ha){var ub=this.globalIdField;for(Oa=0;Oa<ha.length;Oa++)if(ha[Oa]=new Da(ha[Oa]),!Pa){var pb=ha[Oa];if(pb.success){var eb=pb.objectId;Ha=ia[Oa];(ua=Ha._graphicsLayer)&&ua!==this&&ua.remove(Ha);ua=Ha.attributes||{};ua[za]=eb;eb=pb.globalId;ub&&eb&&(ua[ub]=eb);Ua&&(ua[Ua]=kb);ab&&(ua[ab]=kb);bb&&(ua[bb]=
fb);gb&&(ua[gb]=fb);Ha.setAttributes(ua);Ea._init&&Ea.drawFeature(Ha)}}}if(qa)for(Oa=0;Oa<qa.length;Oa++)if(qa[Oa]=new Da(qa[Oa]),!Pa&&(pb=qa[Oa],pb.success)){eb=pb.objectId;Ha=ja[eb];if(ia=Ea._getFeature(eb))ia.geometry!==Ha.geometry&&Ha.geometry&&ia.setGeometry(ca.fromJson(Ha.geometry.toJson())),ia.attributes!==Ha.attributes&&Ha.attributes&&ia.setAttributes(k.mixin(ia.attributes,Ha.attributes)),this._repaint(ia,eb);Ha=ia||Ha;ua=Ha.attributes||{};ab&&(ua[ab]=kb);gb&&(ua[gb]=fb);Ha.setAttributes(ua)}if(R){ja=
[];for(Oa=0;Oa<R.length;Oa++)if(R[Oa]=new Da(R[Oa]),!Pa&&(pb=R[Oa],pb.success&&(eb=pb.objectId,Ha=Ea._getFeature(eb))))this._unSelectFeatureIIf(eb,Ea)&&ja.push(Ha),Ha._count=0,Ea._removeFeatureIIf(eb);if(0<ja.length)this.onSelectionComplete(ja,va.SELECTION_SUBTRACT)}this._resolve([ha,qa,R],"onEditsComplete",T,na)},_sendAttachment:function(R,ia,ja,T,ha){var na=this;return B({url:this._url.path+"/"+ia+"/"+("add"===R?"addAttachment":"updateAttachment"),form:ja,content:k.mixin(this._url.query,{f:"json",
token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(qa){var ua="add"===R?"onAddAttachmentComplete":"onUpdateAttachmentComplete";qa=new Da(qa["add"===R?"addAttachmentResult":"updateAttachmentResult"]);qa.attachmentId=qa.objectId;qa.objectId=ia;na._resolve([qa],ua,T);return qa}).addErrback(function(qa){na._resolve([qa],null,ha,null,!0)})},_repaint:function(R,ia,ja){ia=A.isDefined(ia)?ia:R.attributes[this.objectIdField];ia in this._selectedFeatures&&
this._selectionSymbol||R.setSymbol(R.symbol,ja)},_getKind:function(R){var ia=this._trackManager;return ia?ia.isLatestObservation(R)?1:0:0}});k.mixin(va,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});U._createWrappers(va);Object.defineProperty(va.prototype,"graphics",{get:function(){return this._hasOnDemandDrillMode()?
this._mode.graphics:this._graphicsVal},set:function(R){this._graphicsVal=R}});Object.defineProperty(va.prototype,"name",{get:function(){return this.arcgisProps&&this.arcgisProps.title?this.arcgisProps.title:this._name},set:function(R){this._name=R;this.loaded&&this.arcgisProps&&(this.arcgisProps.title=null)}});Object.defineProperty(va.prototype,"fields",{get:function(){return this._fields},set:function(R){R&&this._canUseFieldsIndex()&&(R=new Proxy(R,{set:k.hitch(this,function(ia,ja,T){if(ja)if("length"===
ja)this._fieldsIndexDirty=!0;else{var ha=Number(ja);"number"!==typeof ha||isNaN(ha)||(this._fieldsIndexDirty=!0)}ia[ja]=T;return!0})}));this._fields=R;this._fieldsIndexDirty=!0}});k.setObject("layers.FeatureLayer",va,x);return va})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(b,y,r){var a=b.forEach;return function(k){function e(u,n){f[n]=u;c.progress([u,n]);0===--d&&c.resolve(f)}var g,h;k instanceof Array?h=k:k&&"object"===typeof k&&(g=k);var m=[];
if(g){h=[];for(var l in g)Object.hasOwnProperty.call(g,l)&&(m.push(l),h.push(g[l]));var f={}}else h&&(f=[]);if(!h||!h.length)return(new y).resolve(f);var c=new y;c.promise.always(function(){f=m=null});var d=h.length;a(h,function(u,n){g||m.push(n);r(u,function(t){c.isFulfilled()||e(t,m[n])},function(t){c.isFulfilled()||e(t,m[n])})});return c.promise}})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),
function(b,y,r,a,k,e,g){b=b(g,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(h,m){if(h&&!h.declaredClass){var l=h;this.symbol=(h=l.symbol)&&(h.declaredClass?h:e.fromJson(h,m));this.label=l.label;this.description=l.description}else this.symbol=h},getSymbol:function(h){return this.symbol},toJson:function(){var h=y.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return k.fixJson(h)}});y.setObject("renderer.SimpleRenderer",
b,a);return b})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),function(b,y,r,a,k,e,g,h,m,l){var f=Math.PI;b=b(null,{declaredClass:"esri.renderer.Renderer",constructor:function(c){this._cache={};if(c&&!c.declaredClass){this.rotationInfo=c.rotationInfo;if(!this.rotationInfo){var d=c.rotationType,
u=c.rotationExpression;if(d||u)this.rotationInfo={type:d,expression:u}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(c.sizeInfo));this.setColorInfo(this._readColorInfo(c.colorInfo));this.setOpacityInfo(this._readOpacityInfo(c.transparencyInfo));this.setVisualVariables(this._readVariables(c.visualVariables));this.setAuthoringInfo(c.authoringInfo)}this.getSymbol=y.hitch(this,this.getSymbol)},getSymbol:function(c){},_readSizeInfo:function(c){if(c){var d=c.minSize,u=c.maxSize;
d&&(c.minSize="number"===typeof d?k.pt2px(d):this._readSizeInfo(d));u&&(c.maxSize="number"===typeof u?k.pt2px(u):this._readSizeInfo(u));c.stops&&r.forEach(c.stops,function(n){n.size&&"number"===typeof n.size&&(n.size=k.pt2px(n.size))})}return c},_readColorInfo:function(c){c&&(r.forEach(c.colors,function(d,u){y.isArray(d)&&(c.colors[u]=g.toDojoColor(d))}),r.forEach(c.stops,function(d,u){d.color&&y.isArray(d.color)&&(c.stops[u].color=g.toDojoColor(d.color))}));return c},_readOpacityInfo:function(c){if(c){var d=
y.mixin({},c);d.transparencyValues&&(d.opacityValues=r.map(d.transparencyValues,function(u){return 1-u/100}),delete d.transparencyValues);d.stops&&(d.stops=r.map(d.stops,function(u){u=y.mixin({},u);u.opacity=1-u.transparency/100;delete u.transparency;return u}))}return d},_readVariables:function(c){c&&(c=r.map(c,function(d){"sizeInfo"===d.type?d=this._readSizeInfo(d):"colorInfo"===d.type?d=this._readColorInfo(d):"transparencyInfo"===d.type&&(d=this._readOpacityInfo(d),d.type="opacityInfo");return d},
this));return c},setAuthoringInfo:function(c){this.authoringInfo=c},setRotationInfo:function(c){if(c=this.rotationInfo="string"===typeof c?{field:c}:c){if(c.expression&&!y.isFunction(c.expression)&&!c.field){var d=c.expression.match(this.rotationRE);d&&d[1]&&(c.field=d[1])}c.rotationType=c.type}this._cache.rotationInfo=this._processRotationInfo(c);return this},rotationRE:/^\[([^\]]+)\]$/i,_processRotationInfo:function(c){c&&!c.rotationType&&(c.rotationType="geographic");return this._createCache(c)},
getRotationAngle:function(c,d){var u=this._getVarInfo(d&&d.rotationInfo,"rotationInfo");d=u.variable;u=this._cache[u.cacheKey];var n="arithmetic"===this._getRotationType(d),t=u&&u.hasExpr,x=null;if(d.field||t)x=this._getDataValue(c,d,null,u),null!=x&&(x=(x+(n?-90:0))*(n?-1:1));return x},_getRotationType:function(c){return c&&("rotationInfo"===c.type?c.rotationType:c.type)},_getDataValue:function(c,d,u,n,t){n||(n=this._getVarInfo(d,u),d=n.variable,n=this._cache[n.cacheKey],"sizeInfo"===u&&(n=n.root));
return c._getDataValue(d,n,m,t)},setVisualVariables:function(c){var d=this._cache;r.forEach(this.visualVariables,function(u,n){d.hasOwnProperty(n)&&(d[n]=null)},this);this.visualVariables=c;r.some(c,function(u){return!!u.target})&&c.sort(function(u,n){return u.target===n.target?0:u.target?1:-1});r.forEach(c,function(u,n){"colorInfo"===u.type?d[n]=this._processColorInfo(u):"opacityInfo"===u.type?d[n]=this._processOpacityInfo(u):"sizeInfo"===u.type?d[n]=this._processSizeInfo(u):"rotationInfo"===u.type&&
(d[n]=this._processRotationInfo(u))},this);return this},getVisualVariableValues:function(c){var d=this.visualVariables,u;d&&(u=r.map(d,function(n){switch(n.type){case "sizeInfo":var t=this.getSize(c,{sizeInfo:n});break;case "colorInfo":t=this.getColor(c,{colorInfo:n});break;case "opacityInfo":t=this.getOpacity(c,{opacityInfo:n});break;case "rotationInfo":t=this.getRotationAngle(c,{rotationInfo:n})}return{variable:n,value:t}},this));return u},getFieldsUsedInExpressions:function(){var c=[];r.forEach(this._getCacheObjects(),
function(d){d.syntaxTree&&(c=c.concat(m.extractFieldNames(d.syntaxTree)))});c.sort();return r.filter(c,function(d,u){return 0===u||c[u-1]!==d})},hasGeometryOperations:function(){return r.some(this._getCacheObjects(),function(c){return c.syntaxTree?m.hasGeometryOperations(c.syntaxTree):!1})},initializeArcadeEngine:function(){var c=[];r.forEach(this._getCacheObjects(),function(d){d.syntaxTree&&c.push(d.syntaxTree)});return l.initialize(c)},hasVisualVariables:function(c,d){return c?!!this.getVisualVariablesForType(c,
d):!!(this.getVisualVariablesForType("sizeInfo",d)||this.getVisualVariablesForType("colorInfo",d)||this.getVisualVariablesForType("opacityInfo",d)||this.getVisualVariablesForType("rotationInfo",d))},getVisualVariablesForType:function(c,d){var u=this.visualVariables;if(!d&&this[c]){"rotationInfo"===c&&(this[c].rotationType=this[c].type);var n=[this[c]]}else u&&(n=r.filter(u,function(t){return t.type===c&&("string"===typeof d?t.target===d:!1===d?!t.target:!0)}))&&0===n.length&&(n=void 0);return n},
setSizeInfo:function(c){this.sizeInfo=this.proportionalSymbolInfo=c;this._cache.sizeInfo=this._processSizeInfo(c);return this},_processSizeInfo:function(c){return c&&{root:this._createCache(c),minSize:this._createCache(c.minSize),maxSize:this._createCache(c.maxSize)}},_convertExpressionToArcade:function(c){c&&c.expression&&(c.valueExpression="$view.scale")},_getVarInfo:function(c,d){if(c&&c.type===d){var u=r.indexOf(this.visualVariables,c);c=this.visualVariables[u]}else u=d,c=this[d];return{variable:c,
cacheKey:u}},setProportionalSymbolInfo:function(c){this.setSizeInfo(c);return this},getSize:function(c,d){var u=this._getVarInfo(d&&d.sizeInfo,"sizeInfo"),n=u.variable;u=this._cache[u.cacheKey];var t=null;if(n){var x=n.minSize;t=n.maxSize;x="object"===typeof x&&x?this._getSize(c,x,u&&u.minSize,d):x;t="object"===typeof t&&t?this._getSize(c,t,u&&u.maxSize,d):t;t=this._getSize(c,n,u&&u.root,d,[x,t])}return t},_getSize:function(c,d,u,n,t){var x=d.stops,A=0,B=u&&u.hasExpr,F=u&&u.ipData,w=u&&u.isScaleDriven,
D="object"===typeof c&&!!c,q="number"===typeof c?c:null;if(d.field||w||B){var v=n&&n.scale;B=t?t[0]:d.minSize;t=t?t[1]:d.maxSize;var z=d.minDataValue,C=d.maxDataValue,E=d.valueUnit||"unknown",G=d.valueRepresentation,H=d.scaleBy,K=n&&n.shape;w?q=v:"number"!==typeof q&&D&&(q=this._getDataValue(c,d,null,u));if(!this._isValidNumber(q))return null;if(x)B=this._lookupData(q,F),q=B[0],t=B[1],q===t?A=x[q].size:(q=x[q].size,x=x[t].size,A=q+(x-q)*B[2]);else if(null!=B&&null!=t&&null!=z&&null!=C)q<=z?A=B:q>=
C?A=t:(x=(q-z)/(C-z),"area"===H&&K?(B=(q="circle"===K)?f*Math.pow(B/2,2):B*B,x=B+x*((q?f*Math.pow(t/2,2):t*t)-B),A=q?2*Math.sqrt(x/f):Math.sqrt(x)):A=B+x*(t-B));else if("unknown"===E)null!=B&&null!=z&&(B&&z?(x=q/z,A="circle"===K?2*Math.sqrt(x*Math.pow(B/2,2)):"square"===K||"diamond"===K||"image"===K?Math.sqrt(x*Math.pow(B,2)):x*B):A=q+(B||z),A=A<B?B:A,null!=t&&A>t&&(A=t));else{x=(n&&n.resolution?n.resolution:1)*this._meterIn[E];if("area"===G)A=Math.sqrt(q/f)/x,A*=2;else if(A=q/x,"radius"===G||"distance"===
G)A*=2;null!=B&&A<B&&(A=B);null!=t&&A>t&&(A=t)}}else A=x&&x[0]&&x[0].size,null==A&&(A=d.minSize);return A=isNaN(A)?0:A},getSizeRangeAtScale:function(c,d){c=this._getVarInfo(c,"sizeInfo");var u=this._cache[c.cacheKey],n={scale:d};if((c=c.variable)&&d){var t=c.minSize;d=c.maxSize;var x=c.stops;x&&x.length?(c=x[0].size,u=x[x.length-1].size):(c="object"===typeof t&&t?this._getSize({},t,u&&u.minSize,n):t,u="object"===typeof d&&d?this._getSize({},d,u&&u.maxSize,n):d);if(null!=c||null!=u){if(c>u){var A=
u;u=c;c=A}A={minSize:c,maxSize:u}}}return A},setColorInfo:function(c){this.colorInfo=c;this._cache.colorInfo=this._processColorInfo(c);return this},_createCache:function(c,d){if(d=h.createAttributeCache(c,d))d.ipData=this._interpolateData(c);return d},_getCacheObjects:function(c){var d;c=c||this._cache;var u=[];for(d in c){var n=c[d];c.hasOwnProperty(d)&&n&&"object"===typeof n&&(n.hasOwnProperty("idSource")?u.push(n):u=u.concat(this._getCacheObjects(n)))}return u},_processColorInfo:function(c){c&&
(r.forEach(c.colors,function(d,u){y.isArray(d)&&(c.colors[u]=new g(d))}),r.forEach(c.stops,function(d,u){d.color&&y.isArray(d.color)&&(c.stops[u].color=new g(d.color))}));return this._createCache(c)},getColor:function(c,d){d=this._getVarInfo(d&&d.colorInfo,"colorInfo");return this._getColorComponent(c,d.variable,this._cache[d.cacheKey])},setOpacityInfo:function(c){this.opacityInfo=c;this._cache.opacityInfo=this._processOpacityInfo(c);return this},_processOpacityInfo:function(c){return this._createCache(c)},
getOpacity:function(c,d){d=this._getVarInfo(d&&d.opacityInfo,"opacityInfo");return this._getColorComponent(c,d.variable,this._cache[d.cacheKey],!0)},_getColorComponent:function(c,d,u,n,t){var x="number"===typeof c?c:null,A=u&&u.hasExpr,B=u&&u.ipData,F;d&&d.field||A?("number"!==typeof x&&"object"===typeof c&&c&&(x=this._getDataValue(c,d,null,u)),this._isValidNumber(x)||(x=null),null!=x&&(F=n?this._getOpacity(x,d,B):this._getColor(x,d,B))):d&&(c=d.stops,n?(F=c&&c[0]&&c[0].opacity,null==F&&(F=d.opacityValues&&
d.opacityValues[0])):F=c&&c[0]&&c[0].color||d.colors&&d.colors[0]);t&&(t.data=x,t.value=F);return t||F},_isValidNumber:function(c){return"number"===typeof c&&!isNaN(c)&&Infinity!==c&&-Infinity!==c},_interpolateData:function(c){if(c)if(c.colors||c.opacityValues){var d=(c.colors||c.opacityValues).length,u=c.minDataValue,n=(c.maxDataValue-u)/(d-1);var t=[];for(c=0;c<d;c++)t[c]=u+c*n}else c.stops&&(t=r.map(c.stops,function(x){return x.value}));return t},_getOpacity:function(c,d,u){c=this._lookupData(c,
u);d=d||this.opacityInfo;if(c){u=c[0];var n=c[1];u===n?n=this._getOpacValue(d,u):(u=this._getOpacValue(d,u),d=this._getOpacValue(d,n),n=u+(d-u)*c[2])}return n},_getOpacValue:function(c,d){return c.opacityValues?c.opacityValues[d]:c.stops[d].opacity},_getColor:function(c,d,u){c=this._lookupData(c,u);d=d||this.colorInfo;if(c){var n=c[0];u=c[1];n=n===u?this._getColorObj(d,n):g.blendColors(this._getColorObj(d,n),this._getColorObj(d,u),c[2])}return n},_getColorObj:function(c,d){return c.colors?c.colors[d]:
c.stops[d].color},_lookupData:function(c,d){if(d){var u=0,n=d.length-1;r.some(d,function(x,A){if(c<x)return n=A,!0;u=A;return!1});var t=[u,n,(c-d[u])/(d[n]-d[u])]}return t},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},_writeSizeInfo:function(c){if(c){c=y.mixin({},c);this._convertExpressionToArcade(c);var d=c.minSize,u=c.maxSize;d&&(c.minSize="number"===
typeof d?k.px2pt(d):this._writeSizeInfo(d));u&&(c.maxSize="number"===typeof u?k.px2pt(u):this._writeSizeInfo(u));if(d=c.legendOptions)if(c.legendOptions=y.mixin({},d),d=d.customValues)c.legendOptions.customValues=d.slice(0);c.stops&&(c.stops=r.map(c.stops,function(n){n=y.mixin({},n);n.size&&"number"===typeof n.size&&(n.size=k.px2pt(n.size));return n}))}return c},_writeColorInfo:function(c){c&&(c=y.mixin({},c),c.colors&&(c.colors=r.map(c.colors,function(d){return g.toJsonColor(d)})),c.stops&&(c.stops=
r.map(c.stops,function(d){d=y.mixin({},d);d.color&&(d.color=g.toJsonColor(d.color));return d})),c.legendOptions&&(c.legendOptions=y.mixin({},c.legendOptions)));return c},_writeOpacityInfo:function(c){if(c){var d=y.mixin({},c);d.opacityValues&&(d.transparencyValues=r.map(d.opacityValues,function(u){return 100*(1-u)}),delete d.opacityValues);d.stops&&(d.stops=r.map(d.stops,function(u){u=y.mixin({},u);u.transparency=100*(1-u.opacity);delete u.opacity;return u}));d.legendOptions&&(d.legendOptions=y.mixin({},
d.legendOptions))}return d},toJson:function(c){var d=this.visualVariables,u=y.clone(this.authoringInfo),n=c&&c.useLegacyRotationProperties,t=(c=(c=this.getVisualVariablesForType("rotationInfo",!1))&&c[0])&&c.field,x;c&&(c===this.rotationInfo||n)&&(x=c.expression||t&&(y.isFunction(t)?t:"["+t+"]"));d&&(d=r.map(d,function(A){"sizeInfo"===A.type?A=this._writeSizeInfo(A):"colorInfo"===A.type?A=this._writeColorInfo(A):"opacityInfo"===A.type?(A=this._writeOpacityInfo(A),A.type="transparencyInfo"):"rotationInfo"===
A.type&&(A=n?null:y.mixin({},A));return A},this),d=r.filter(d,function(A){return null!=A}));u&&r.forEach(u.visualVariables,function(A){"opacityInfo"===A.type&&(A.type="transparencyInfo")});return{rotationType:x&&(this._getRotationType(c)||"geographic"),rotationExpression:x,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:d,authoringInfo:u}}});y.setObject("renderer.Renderer",b,e);return b})},
"esri/layers/support/attributeUtils":function(){define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(b,y,r,a,k,e){var g={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(h){return"string"===typeof h?a(h,r.outputTypes.Hex):null},getAttributeIdSource:function(h){if(!h)return null;var m=h.field,l=h.valueExpression,f=null;if(l)f=l;else if(b.isFunction(m))f=m.toString();else if(m){var c=
(l=h.normalizationField)?"field":h.normalizationType;h=parseFloat(h.normalizationTotal);c&&(c=c.toLowerCase(),f=m.toLowerCase()+",norm:"+c,l?f+=","+l.toLowerCase():"percent-of-total"===c&&(m=h,"number"===typeof m&&!isNaN(m)&&Infinity!==m&&-Infinity!==m&&0!==h||(h=null),f+=","+h))}return f},createAttributeCache:function(h,m){if(!h)return null;var l=h.valueExpression,f=e.createSyntaxTree(l),c=g.getAttributeIdSource(h);return{attributeInfo:h,isNumeric:!m,idSource:c,id:g.getAttributeId(c),hasExpr:!!l,
compiledFunc:e.createFunction(f),syntaxTree:f,isScaleDriven:!!h.expression||g.viewScaleRE.test(l),dependsOnView:f?e.dependsOnView(f):!1,dependsOnGeometry:f?e.hasGeometryOperations(f):!1,isJSFunc:b.isFunction(h.field)}}};b.setObject("layers.support.attributeUtils",g,k);return g})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],function(b){b=b.getObject("dojox.encoding.digests",!0);b.outputTypes={Base64:0,Hex:1,String:2,Raw:3};b.addWords=function(y,r){var a=(y&65535)+(r&65535);
return(y>>16)+(r>>16)+(a>>16)<<16|a&65535};b.stringToWord=function(y){for(var r=[],a=0,k=8*y.length;a<k;a+=8)r[a>>5]|=(y.charCodeAt(a/8)&255)<<a%32;return r};b.wordToString=function(y){for(var r=[],a=0,k=32*y.length;a<k;a+=8)r.push(String.fromCharCode(y[a>>5]>>>a%32&255));return r.join("")};b.wordToHex=function(y){for(var r=[],a=0,k=4*y.length;a<k;a++)r.push("0123456789abcdef".charAt(y[a>>2]>>a%4*8+4&15)+"0123456789abcdef".charAt(y[a>>2]>>a%4*8&15));return r.join("")};b.wordToBase64=function(y){for(var r=
[],a=0,k=4*y.length;a<k;a+=3)for(var e=(y[a>>2]>>a%4*8&255)<<16|(y[a+1>>2]>>(a+1)%4*8&255)<<8|y[a+2>>2]>>(a+2)%4*8&255,g=0;4>g;g++)8*a+6*g>32*y.length?r.push("\x3d"):r.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>6*(3-g)&63));return r.join("")};b.stringToUtf8=function(y){for(var r="",a=-1,k,e;++a<y.length;)k=y.charCodeAt(a),e=a+1<y.length?y.charCodeAt(a+1):0,55296<=k&&56319>=k&&56320<=e&&57343>=e&&(k=65536+((k&1023)<<10)+(e&1023),a++),127>=k?r+=String.fromCharCode(k):
2047>=k?r+=String.fromCharCode(192|k>>>6&31,128|k&63):65535>=k?r+=String.fromCharCode(224|k>>>12&15,128|k>>>6&63,128|k&63):2097151>=k&&(r+=String.fromCharCode(240|k>>>18&7,128|k>>>12&63,128|k>>>6&63,128|k&63));return r};return b})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(b){function y(h,m){return h<<m|h>>>32-m}function r(h,m,l,f,c,d){return b.addWords(y(b.addWords(b.addWords(m,h),b.addWords(f,d)),c),l)}function a(h,m,l,f,c,d,u){return r(m&l|~m&f,h,m,c,d,u)}function k(h,
m,l,f,c,d,u){return r(m&f|l&~f,h,m,c,d,u)}function e(h,m,l,f,c,d,u){return r(l^(m|~f),h,m,c,d,u)}function g(h,m){h[m>>5]|=128<<m%32;h[(m+64>>>9<<4)+14]=m;m=1732584193;for(var l=-271733879,f=-1732584194,c=271733878,d=0;d<h.length;d+=16){var u=m,n=l,t=f,x=c;m=a(m,l,f,c,h[d+0],7,-680876936);c=a(c,m,l,f,h[d+1],12,-389564586);f=a(f,c,m,l,h[d+2],17,606105819);l=a(l,f,c,m,h[d+3],22,-1044525330);m=a(m,l,f,c,h[d+4],7,-176418897);c=a(c,m,l,f,h[d+5],12,1200080426);f=a(f,c,m,l,h[d+6],17,-1473231341);l=a(l,f,
c,m,h[d+7],22,-45705983);m=a(m,l,f,c,h[d+8],7,1770035416);c=a(c,m,l,f,h[d+9],12,-1958414417);f=a(f,c,m,l,h[d+10],17,-42063);l=a(l,f,c,m,h[d+11],22,-1990404162);m=a(m,l,f,c,h[d+12],7,1804603682);c=a(c,m,l,f,h[d+13],12,-40341101);f=a(f,c,m,l,h[d+14],17,-1502002290);l=a(l,f,c,m,h[d+15],22,1236535329);m=k(m,l,f,c,h[d+1],5,-165796510);c=k(c,m,l,f,h[d+6],9,-1069501632);f=k(f,c,m,l,h[d+11],14,643717713);l=k(l,f,c,m,h[d+0],20,-373897302);m=k(m,l,f,c,h[d+5],5,-701558691);c=k(c,m,l,f,h[d+10],9,38016083);f=
k(f,c,m,l,h[d+15],14,-660478335);l=k(l,f,c,m,h[d+4],20,-405537848);m=k(m,l,f,c,h[d+9],5,568446438);c=k(c,m,l,f,h[d+14],9,-1019803690);f=k(f,c,m,l,h[d+3],14,-187363961);l=k(l,f,c,m,h[d+8],20,1163531501);m=k(m,l,f,c,h[d+13],5,-1444681467);c=k(c,m,l,f,h[d+2],9,-51403784);f=k(f,c,m,l,h[d+7],14,1735328473);l=k(l,f,c,m,h[d+12],20,-1926607734);m=r(l^f^c,m,l,h[d+5],4,-378558);c=r(m^l^f,c,m,h[d+8],11,-2022574463);f=r(c^m^l,f,c,h[d+11],16,1839030562);l=r(f^c^m,l,f,h[d+14],23,-35309556);m=r(l^f^c,m,l,h[d+1],
4,-1530992060);c=r(m^l^f,c,m,h[d+4],11,1272893353);f=r(c^m^l,f,c,h[d+7],16,-155497632);l=r(f^c^m,l,f,h[d+10],23,-1094730640);m=r(l^f^c,m,l,h[d+13],4,681279174);c=r(m^l^f,c,m,h[d+0],11,-358537222);f=r(c^m^l,f,c,h[d+3],16,-722521979);l=r(f^c^m,l,f,h[d+6],23,76029189);m=r(l^f^c,m,l,h[d+9],4,-640364487);c=r(m^l^f,c,m,h[d+12],11,-421815835);f=r(c^m^l,f,c,h[d+15],16,530742520);l=r(f^c^m,l,f,h[d+2],23,-995338651);m=e(m,l,f,c,h[d+0],6,-198630844);c=e(c,m,l,f,h[d+7],10,1126891415);f=e(f,c,m,l,h[d+14],15,-1416354905);
l=e(l,f,c,m,h[d+5],21,-57434055);m=e(m,l,f,c,h[d+12],6,1700485571);c=e(c,m,l,f,h[d+3],10,-1894986606);f=e(f,c,m,l,h[d+10],15,-1051523);l=e(l,f,c,m,h[d+1],21,-2054922799);m=e(m,l,f,c,h[d+8],6,1873313359);c=e(c,m,l,f,h[d+15],10,-30611744);f=e(f,c,m,l,h[d+6],15,-1560198380);l=e(l,f,c,m,h[d+13],21,1309151649);m=e(m,l,f,c,h[d+4],6,-145523070);c=e(c,m,l,f,h[d+11],10,-1120210379);f=e(f,c,m,l,h[d+2],15,718787259);l=e(l,f,c,m,h[d+9],21,-343485551);m=b.addWords(m,u);l=b.addWords(l,n);f=b.addWords(f,t);c=b.addWords(c,
x)}return[m,l,f,c]}b.MD5=function(h,m){m=m||b.outputTypes.Base64;h=g(b.stringToWord(h),8*h.length);switch(m){case b.outputTypes.Raw:return h;case b.outputTypes.Hex:return b.wordToHex(h);case b.outputTypes.String:return b.wordToString(h);default:return b.wordToBase64(h)}};b.MD5._hmac=function(h,m,l){l=l||b.outputTypes.Base64;var f=b.stringToWord(m);16<f.length&&(f=g(f,8*m.length));var c=[];m=[];for(var d=0;16>d;d++)c[d]=f[d]^909522486,m[d]=f[d]^1549556828;h=g(c.concat(b.stringToWord(h)),512+8*h.length);
h=g(m.concat(h),640);switch(l){case b.outputTypes.Raw:return h;case b.outputTypes.Hex:return b.wordToHex(h);case b.outputTypes.String:return b.wordToString(h);default:return b.wordToBase64(h)}};return b.MD5})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(b,y,r,a,k,e,g){var h={vars:{$feature:"any",$view:"any"}},m=/^\$feature\./i,l={_getSyntaxTree:function(f){return"string"===
typeof f?l.createSyntaxTree(f):f},createSyntaxTree:function(f){try{var c=f?e.parseScript(f):null}catch(d){c=null}return c},createFunction:function(f,c){c=c||b.clone(h);f=l._getSyntaxTree(f);try{var d=f?e.compileScript(f,c):null}catch(u){d=null}return d},createExecContext:function(f,c){return{vars:{$feature:f?g.createFromGraphic(f):new g,$view:c&&c.view},spatialReference:c&&c.sr}},evalSyntaxTree:function(f,c){try{var d=e.executeScript(f,c)}catch(u){d=null}return d},executeFunction:function(f,c){try{var d=
f?f(c):null}catch(u){d=null}return d},executeAsyncFunction:function(f,c){try{var d=f?f(c):(new a).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(u){d=(new a).reject(u)}return d},extractFieldNames:function(f){f=l._getSyntaxTree(f);f=e.extractFieldLiterals(f);var c=[];y.forEach(f,function(d){m.test(d)&&(d=d.replace(m,""),c.push(d))});c.sort();return y.filter(c,function(d,u){return 0===u||c[u-1]!==d})},dependsOnView:function(f){return l.hasVariable(f,
"$view")},hasGeometryOperations:function(f){return(f=l._getSyntaxTree(f))?e.scriptUsesGeometryEngine(f):!1},enableGeometryOperations:function(){return e.enableGeometrySupport()},hasVariable:function(f,c){return(f=l._getSyntaxTree(f))?e.referencesMember(f,c):!1},hasFunction:function(f,c){return(f=l._getSyntaxTree(f))?e.referencesFunction(f,c):!1},createFeatureSetFromLayer:function(f,c){c=c||{};var d=e.featureSetUtils();return d?d.constructFeatureSet(f,c.spatialReference,c.outFields,c.returnGeometry,
c.cache):null},createFeatureSetFromLayerUrl:function(f,c){c=c||{};var d=e.featureSetUtils();return d?d.constructFeatureSetFromUrlRaw(f,c.spatialReference,c.outFields,c.returnGeometry,c.cache):null},createFeatureSetCollectionFromMap:function(f,c){var d=e.featureSetUtils();return d?d.createFeatureSetCollectionFromMap(f,f.spatialReference,c&&c.cache):null},createFeatureSetCollectionFromServiceUrl:function(f,c){c=c||{};var d=e.featureSetUtils();return d?d.createFeatureSetCollectionFromService(f,c.spatialReference,
c.cache):null},hasFeatureSetOperations:function(f){return(f=l._getSyntaxTree(f))?e.scriptUsesFeatureSet(f):!1},enableFeatureSetOperations:function(){return e.enableFeatureSetSupport().then(function(){var f=e.featureSetUtils();f&&f.initialiseMetaDataCache()})},enableAsyncOperations:function(){return e.enableAsyncSupport()}};b.setObject("support.expressionUtils",l,k);return l})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils ../moment".split(" "),
function(b,y,r,a,k,e,g,h,m,l){function f(I,J){if(null===z)throw Error("Async Arcade must be enabled for this script");return h("csp-restrictions")||!1===D?function(Q){return z.executeScript(I,Q)}:r.compileScript(I,J,!0)}function c(I,J){void 0===J&&(J=[]);return e.parseScript(I,J)}function d(I,J){if(!0===J.useAsync||!0===I.isAsync){if(null===z)throw Error("Async Arcade must be enabled for this script");return z.executeScript(I,J)}return a.executeScript(I,J)}function u(I,J){return a.referencesMember(I,
J)}function n(I,J){void 0===J&&(J=[]);void 0===I.usesGeometry&&g.findScriptDependencies(I,J);return!0===I.usesGeometry}function t(){return E?E:E=m.create(function(I,J){b(["../geometry/geometryEngine","./functions/geomsync"],function(Q,V){v=!0;V.setGeometryEngine(Q);I(!0)},function(Q){J(Q)})})}function x(){return null!==G?G:G=r.enableAsyncSupport().then(function(){return m.create(function(I,J){b(["./arcadeAsyncRuntime"],function(Q){try{z=Q;Q=0;for(var V=C;Q<V.length;Q++){var O=V[Q];z.extend(O);r.extend(O,
"async")}C=null;I(!0)}catch(S){J(S)}},J)})})}function A(){return z?!0:!1}function B(){return H?H:H=x().then(function(){return m.create(function(I,J){b(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(Q,V,O,S,L){try{K=Q,z.extend([V,O,S,L]),r.extend([V,O,S,L],"async"),q=!0,I(!0)}catch(Y){J(Y)}},J)})})}function F(I,J){void 0===J&&(J=[]);void 0===I.usesFeatureSet&&g.findScriptDependencies(I,J);return!0===
I.usesFeatureSet}function w(I,J){if(J)for(var Q=0;Q<J.length;Q++)if(u(I,J[Q]))return!0;return!1}Object.defineProperty(y,"__esModule",{value:!0});y.featureSetUtils=y.scriptTouchesGeometry=y.loadScriptDependencies=y.scriptIsAsync=y.scriptUsesFeatureSet=y.enableFeatureSetSupport=y.isGeometryEnabled=y.isAsyncEnabled=y.isFeatureSetSupportEnabled=y.enableAsyncSupport=y.enableGeometrySupport=y.scriptUsesGeometryEngine=y.extractFieldLiterals=y.referencesFunction=y.referencesMember=y.executeScript=y.parseAndExecuteScript=
y.scriptCheck=y.validateScript=y.parseScript=y.extend=y.compileScript=void 0;var D=function(){if(h("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(I){return!1}}(),q=!1,v=!1,z=null,C=[];y.compileScript=function(I,J){return!0===J.useAsync||!0===I.isAsync?f(I,J):h("csp-restrictions")?function(Q){return a.executeScript(I,Q)}:r.compileScript(I,J)};y.extend=function(I){a.extend(I);r.extend(I,"sync");null===z?C.push(I):(r.extend(I,"async"),z.extend(I))};
y.parseScript=c;y.validateScript=function(I,J,Q){void 0===Q&&(Q="");return e.validateScript(I,J,Q)};y.scriptCheck=function(I,J,Q,V){void 0===V&&(V="");return e.scriptCheck(I,J,Q,V)};y.parseAndExecuteScript=function(I,J,Q){void 0===Q&&(Q=[]);I=e.parseScript(I,Q);return d(I,J)};y.executeScript=d;y.referencesMember=u;y.referencesFunction=function(I,J){return a.referencesFunction(I,J)};y.extractFieldLiterals=function(I,J){void 0===J&&(J=!1);return e.extractFieldLiterals(I,J)};y.scriptUsesGeometryEngine=
n;var E=null;y.enableGeometrySupport=t;var G=null;y.enableAsyncSupport=x;y.isFeatureSetSupportEnabled=function(){return q};y.isAsyncEnabled=A;y.isGeometryEnabled=function(){return v};var H=null;y.enableFeatureSetSupport=B;y.scriptUsesFeatureSet=F;y.scriptIsAsync=function(I,J){void 0===J&&(J=[]);void 0===I.isAsync&&g.findScriptDependencies(I,J);return!0===I.isAsync};y.loadScriptDependencies=function(I,J,Q,V){void 0===Q&&(Q=[]);void 0===V&&(V=!1);return m.create(function(O,S){var L="string"===typeof I?
c(I):I,Y=[];L&&(!1===v&&(n(L)||V)&&Y.push(t()),!1===A()&&(!0===L.isAsync||J)&&Y.push(x()),!1===q&&(F(L)||w(L,Q))&&Y.push(B()));Y?m.all(Y).then(function(){O(!0)},S):O(!0)})};y.scriptTouchesGeometry=function(I){if(n(I))return!0;I=g.findFunctionCalls(I);return-1<I.indexOf("geometry")||-1<I.indexOf("feature")?!0:!1};var K=null;y.featureSetUtils=function(){return K};k.MomentLibrary.Moment=l})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v,z){function C(da,fa,P){try{return P(da,null,fa)}catch(xa){throw xa;}}function E(da){return da instanceof Error?A.reject(da):A.reject(Error(da))}function G(da,fa){try{switch(fa.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return Q(da,fa);case "VariableDeclaration":for(var P=[],xa=0;xa<fa.declarations.length;xa++)P.push(G(da,fa.declarations[xa]));return P.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";
case "BlockStatement":return J(da,fa);case "FunctionDeclaration":var Fa=fa.id.name.toLowerCase(),ba={isAsync:da.isAsync,spatialReference:da.spatialReference,console:da.console,lrucache:da.lrucache,services:da.services,symbols:da.symbols,mangleMap:da.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:da.depthCounter+1,globalScope:da.globalScope};if(64<ba.depthCounter)throw Error("Exceeded maximum function depth");P="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(xa=0;xa<fa.params.length;xa++){var Sa=fa.params[xa].name.toLowerCase(),Qa=Z(da);ba.localScope._SymbolsMap[Sa]=Qa;ba.mangleMap[Sa]=Qa;P+="lscope['"+Qa+"']\x3darguments["+xa.toString()+"];\n"}!0===da.isAsync?(P=P+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(J(ba,fa.body)+"\n return lastStatement; "),P+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(P+=J(ba,fa.body)+"\n return lastStatement; }, runtimeCtx))",P+="\n lastStatement \x3d lc.voidOperation; \n");
if(void 0!==da.globalScope[Fa])var va="gscope['"+Fa+"']\x3d"+P;else void 0!==da.globalScope._SymbolsMap[Fa]?va="gscope['"+da.globalScope._SymbolsMap[Fa]+"']\x3d"+P:(Qa=Z(da),da.globalScope._SymbolsMap[Fa]=Qa,da.mangleMap[Fa]=Qa,va="gscope['"+Qa+"']\x3d"+P);return va;case "ReturnStatement":var R=null===fa.argument?"return lc.voidOperation":"return "+G(da,fa.argument);return R;case "IfStatement":if("AssignmentExpression"===fa.test.type||"UpdateExpression"===fa.test.type)throw Error(l.nodeErrorMessage(fa.test,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ia=G(da,fa.test),ja=N(da),T="var "+ja+" \x3d "+ia+";\n if ("+ja+" \x3d\x3d\x3d true) {\n"+I(da,fa.consequent)+"\n }\n";T=null!==fa.alternate?T+("else if ("+ja+"\x3d\x3d\x3dfalse)   { \n"+I(da,fa.alternate)+"}\n"):T+("else if ("+ja+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return T+="else { lang.error({type: '"+fa.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var ha="AssignmentExpression"===
fa.expression.type?"lastStatement \x3d lc.voidOperation; "+G(da,fa.expression)+"; \n ":"lastStatement \x3d "+G(da,fa.expression)+"; ";return ha;case "AssignmentExpression":return K(da,fa);case "UpdateExpression":return H(da,fa);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var na=[];Fa=va=0;for(xa=fa.quasis;Fa<xa.length;Fa++){var qa=xa[Fa];na.push(qa.value?JSON.stringify(qa.value.cooked):JSON.stringify(""));!1===qa.tail&&(na.push(fa.expressions[va]?
"lang.castString(lang.aCheck("+G(da,fa.expressions[va])+", 'TemplateLiteral'))":""),va++)}P="(["+na.join(",")+"]).join('')"}catch(rb){throw rb;}return P;case "TemplateElement":return JSON.stringify(fa.value?fa.value.cooked:"");case "ForStatement":P="lastStatement \x3d lc.voidOperation; \n";null!==fa.init&&(P+=G(da,fa.init)+"; ");var ua=N(da),za=N(da);P+="var "+ua+" \x3d true; \n do { ";null!==fa.update&&(P+=" if ("+ua+"\x3d\x3d\x3dfalse) {\n "+G(da,fa.update)+"  \n}\n "+ua+"\x3dfalse; \n");null!==
fa.test&&(P+="var "+za+" \x3d "+G(da,fa.test)+"; ",P+="if ("+za+"\x3d\x3d\x3dfalse) { break; } else if ("+za+"!\x3d\x3dtrue) { lang.error({type: '"+fa.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");P+=G(da,fa.body);null!==fa.update&&(P+="\n "+G(da,fa.update));return P+("\n"+ua+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Ea=N(da),Pa=N(da),Oa=N(da),Ha="var "+Ea+" \x3d "+G(da,fa.right)+";\n";"VariableDeclaration"===fa.left.type&&
(Ha+=G(da,fa.left));var Ua="VariableDeclaration"===fa.left.type?fa.left.declarations[0].id.name:fa.left.name;Ua=Ua.toLowerCase();P="";null!==da.localScope&&(void 0!==da.localScope[Ua]?P="lscope['"+Ua+"']":void 0!==da.localScope._SymbolsMap[Ua]&&(P="lscope['"+da.localScope._SymbolsMap[Ua]+"']"));""===P&&(void 0!==da.globalScope[Ua]?P="gscope['"+Ua+"']":void 0!==da.globalScope._SymbolsMap[Ua]&&(P="gscope['"+da.globalScope._SymbolsMap[Ua]+"']"));Ha=Ha+("if ("+Ea+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Ea+") || lc.isString("+Ea+")) {var ")+(Pa+"\x3d"+Ea+".length; \nfor(var ")+(Oa+"\x3d0; "+Oa+"\x3c"+Pa+"; "+Oa+"++) {\n");Ha+=P+"\x3d"+Oa+";\n";Ha+=G(da,fa.body);Ha+="\n}\n";Ha+=" lastStatement \x3d lc.voidOperation; \n";Ha+=" \n}\n";Ha+="else if (lc.isImmutableArray("+Ea+")) {";Ha=Ha+("var "+Pa+"\x3d"+Ea+".length(); \nfor(var ")+(Oa+"\x3d0; "+Oa+"\x3c"+Pa+"; "+Oa+"++) {\n");Ha+=P+"\x3d"+Oa+";\n";Ha+=G(da,fa.body);Ha+="\n}\n";Ha+=" lastStatement \x3d lc.voidOperation; \n";Ha+=" \n}\n";Ha+="else if (( "+
Ea+" instanceof lang.Dictionary) || ( "+Ea+" instanceof lang.Feature)) {";Ha=Ha+("var "+Pa+"\x3d"+Ea+".keys(); \nfor(var ")+(Oa+"\x3d0; "+Oa+"\x3c"+Pa+".length; "+Oa+"++) {\n");Ha+=P+"\x3d"+Pa+"["+Oa+"];\n";Ha+=G(da,fa.body);Ha+="\n}\n";Ha+=" lastStatement \x3d lc.voidOperation; \n";Ha+=" \n}\n";da.isAsync&&(Ha+="else if (lc.isFeatureSet("+Ea+")) {",Ha=Ha+("var "+Pa+"\x3d"+Ea+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Oa+"\x3dlang. graphicToFeature( yield "+Pa+".next(),"+Ea+"); "+Oa+"!\x3dnull; "+
Oa+"\x3dlang. graphicToFeature( yield "+Pa+".next(),"+Ea+")) {\n")+(P+"\x3d"+Oa+";\n"),Ha+=G(da,fa.body),Ha+="\n}\n",Ha+=" lastStatement \x3d lc.voidOperation; \n",Ha+=" \n}\n");return Ha+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return O(da,fa);case "MemberExpression":try{P=void 0;P=!0===fa.computed?G(da,fa.property):"'"+fa.property.name+"'";var bb="lang.member("+G(da,fa.object)+","+P+")"}catch(rb){throw rb;}return bb;case "Literal":return null===fa.value||void 0===fa.value?
"null":JSON.stringify(fa.value);case "ThisExpression":throw Error(l.nodeErrorMessage(fa,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==fa.callee.type)throw Error(l.nodeErrorMessage(fa,"RUNTIME","ONLYNODESSUPPORTED"));var ab=fa.callee.name.toLowerCase();P="";null!==da.localScope&&(void 0!==da.localScope[ab]?P="lscope['"+ab+"']":void 0!==da.localScope._SymbolsMap[ab]&&(P="lscope['"+da.localScope._SymbolsMap[ab]+"']"));""===P&&(void 0!==da.globalScope[ab]?P="gscope['"+ab+"']":
void 0!==da.globalScope._SymbolsMap[ab]&&(P="gscope['"+da.globalScope._SymbolsMap[ab]+"']"));if(""!==P){xa="[";for(qa=0;qa<fa.arguments.length;qa++)0<qa&&(xa+=", "),xa+=G(da,fa.arguments[qa]);xa+="]";na=da.isAsync?"(yield lang.callfunc("+P+","+xa+",runtimeCtx) )":"lang.callfunc("+P+","+xa+",runtimeCtx)"}else throw Error(l.nodeErrorMessage(fa,"RUNTIME","NOTFOUND"));}catch(rb){throw rb;}return na;case "UnaryExpression":try{var gb="lang.unary("+G(da,fa.argument)+",'"+fa.operator+"')"}catch(rb){throw rb;
}return gb;case "BinaryExpression":try{var fb="lang.binary("+G(da,fa.left)+","+G(da,fa.right)+",'"+fa.operator+"')"}catch(rb){throw rb;}return fb;case "LogicalExpression":try{if("AssignmentExpression"===fa.left.type||"UpdateExpression"===fa.left.type)throw Error(l.nodeErrorMessage(fa.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===fa.right.type||"UpdateExpression"===fa.right.type)throw Error(l.nodeErrorMessage(fa.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
if("\x26\x26"===fa.operator||"||"===fa.operator)var kb="(lang.logicalCheck("+G(da,fa.left)+") "+fa.operator+" lang.logicalCheck("+G(da,fa.right)+"))";else throw Error(l.nodeErrorMessage(fa,"RUNTIME","ONLYORORAND"));}catch(rb){throw rb;}return kb;case "ConditionalExpression":throw Error(l.nodeErrorMessage(fa,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{P=[];for(xa=0;xa<fa.elements.length;xa++)"Literal"===fa.elements[xa].type?P.push(G(da,fa.elements[xa])):P.push("lang.aCheck("+G(da,fa.elements[xa])+
",'ArrayExpression')");var ub="["+P.join(",")+"]"}catch(rb){throw rb;}return ub;case "ObjectExpression":P="lang.dictionary([";for(xa=0;xa<fa.properties.length;xa++){var pb=fa.properties[xa],eb="Identifier"===pb.key.type?"'"+pb.key.name+"'":G(da,pb.key),nb=G(da,pb.value);0<xa&&(P+=",");P+="lang.strCheck("+eb+",'ObjectExpression'),lang.aCheck("+nb+", 'ObjectExpression')"}return P+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(l.nodeErrorMessage(fa,"RUNTIME","NOTSUPPORTED"));
default:throw Error(l.nodeErrorMessage(fa,"RUNTIME","UNREOGNISED"));}}catch(rb){throw rb;}}function H(da,fa){var P=null,xa="";if("MemberExpression"===fa.argument.type)return P=G(da,fa.argument.object),xa=!0===fa.argument.computed?G(da,fa.argument.property):"'"+fa.argument.property.name+"'","lang.memberupdate("+P+","+xa+",'"+fa.operator+"',"+fa.prefix+")";P=fa.argument.name.toLowerCase();if(null!==da.localScope){if(void 0!==da.localScope[P])return"lang.update(lscope, '"+P+"','"+fa.operator+"',"+fa.prefix+
")";if(void 0!==da.localScope._SymbolsMap[P])return"lang.update(lscope, '"+da.localScope._SymbolsMap[P]+"','"+fa.operator+"',"+fa.prefix+")"}if(void 0!==da.globalScope[P])return"lang.update(gscope, '"+P+"','"+fa.operator+"',"+fa.prefix+")";if(void 0!==da.globalScope._SymbolsMap[P])return"lang.update(gscope, '"+da.globalScope._SymbolsMap[P]+"','"+fa.operator+"',"+fa.prefix+")";throw Error("Variable not recognised");}function K(da,fa){var P=G(da,fa.right),xa=null,Fa="";if("MemberExpression"===fa.left.type)return xa=
G(da,fa.left.object),Fa=!0===fa.left.computed?G(da,fa.left.property):"'"+fa.left.property.name+"'","lang.assignmember("+xa+","+Fa+",'"+fa.operator+"',"+P+")";xa=fa.left.name.toLowerCase();if(null!==da.localScope){if(void 0!==da.localScope[xa])return"lscope['"+xa+"']\x3dlang.assign("+P+",'"+fa.operator+"', lscope['"+xa+"'])";if(void 0!==da.localScope._SymbolsMap[xa])return"lscope['"+da.localScope._SymbolsMap[xa]+"']\x3dlang.assign("+P+",'"+fa.operator+"', lscope['"+da.localScope._SymbolsMap[xa]+"'])"}if(void 0!==
da.globalScope[xa])return"gscope['"+xa+"']\x3dlang.assign("+P+",'"+fa.operator+"', gscope['"+xa+"'])";if(void 0!==da.globalScope._SymbolsMap[xa])return"gscope['"+da.globalScope._SymbolsMap[xa]+"']\x3dlang.assign("+P+",'"+fa.operator+"', gscope['"+da.globalScope._SymbolsMap[xa]+"'])";throw Error("Variable not recognised");}function I(da,fa){return"BlockStatement"===fa.type?G(da,fa):"ReturnStatement"===fa.type||"BreakStatement"===fa.type||"ContinueStatement"===fa.type?G(da,fa)+"; ":"UpdateExpression"===
fa.type?"lastStatement \x3d "+G(da,fa)+"; ":"ExpressionStatement"===fa.type?G(da,fa):"ObjectExpression"===fa.type?"lastStatement \x3d "+G(da,fa)+"; ":G(da,fa)+"; "}function J(da,fa){for(var P="",xa=0;xa<fa.body.length;xa++)P="ReturnStatement"===fa.body[xa].type?P+(G(da,fa.body[xa])+"; \n"):"BreakStatement"===fa.body[xa].type?P+(G(da,fa.body[xa])+"; \n"):"ContinueStatement"===fa.body[xa].type?P+(G(da,fa.body[xa])+"; \n"):"UpdateExpression"===fa.body[xa].type?P+("lastStatement \x3d "+G(da,fa.body[xa])+
"; \n"):"ObjectExpression"===fa.body[xa].type?P+("lastStatement \x3d "+G(da,fa.body[xa])+"; \n"):P+(G(da,fa.body[xa])+" \n");return P}function Q(da,fa){var P=null===fa.init?null:G(da,fa.init);P===m.voidOperation&&(P=null);fa=fa.id.name.toLowerCase();if(null!==da.localScope){if(void 0!==da.localScope[fa])return"lscope['"+fa+"']\x3d"+P+"; ";if(void 0!==da.localScope._SymbolsMap[fa])return"lscope['"+da.localScope._SymbolsMap[fa]+"']\x3d"+P+"; ";var xa=Z(da);da.localScope._SymbolsMap[fa]=xa;da.mangleMap[fa]=
xa;return"lscope['"+xa+"']\x3d"+P+"; "}if(void 0!==da.globalScope[fa])return"gscope['"+fa+"']\x3d"+P+"; ";if(void 0!==da.globalScope._SymbolsMap[fa])return"gscope['"+da.globalScope._SymbolsMap[fa]+"']\x3d"+P+"; ";xa=Z(da);da.globalScope._SymbolsMap[fa]=xa;da.mangleMap[fa]=xa;return"gscope['"+xa+"']\x3d"+P+"; "}function V(da,fa,P){fa=fa.toLowerCase();switch(fa){case "hasz":return da=da.hasZ,void 0===da?!1:da;case "hasm":return da=da.hasM,void 0===da?!1:da;case "spatialreference":return fa=da.spatialReference._arcadeCacheId,
void 0===fa&&(P=!0,Object.freeze&&Object.isFrozen(da.spatialReference)&&(P=!1),P&&(Ba++,fa=da.spatialReference._arcadeCacheId=Ba)),da=new k({wkt:da.spatialReference.wkt,wkid:da.spatialReference.wkid}),void 0!==fa&&(da._arcadeCacheId="SPREF"+fa.toString()),da}switch(da.type){case "extent":switch(fa){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return da=da[fa],void 0!==da?da:null;case "type":return"Extent"}break;case "polygon":switch(fa){case "rings":return fa=
da.getCacheValue("_arcadeCacheId"),void 0===fa&&(Ba++,fa=Ba,da.setCacheValue("_arcadeCacheId",fa)),da=new g(da.rings,da.spatialReference,!0===da.hasZ,!0===da.hasM,fa);case "type":return"Polygon"}break;case "point":switch(fa){case "x":case "y":case "z":case "m":return void 0!==da[fa]?da[fa]:null;case "type":return"Point"}break;case "polyline":switch(fa){case "paths":return fa=da.getCacheValue("_arcadeCacheId"),void 0===fa&&(Ba++,fa=Ba,da.setCacheValue("_arcadeCacheId",fa)),da=new g(da.paths,da.spatialReference,
!0===da.hasZ,!0===da.hasM,fa);case "type":return"Polyline"}break;case "multipoint":switch(fa){case "points":return fa=da.getCacheValue("_arcadeCacheId"),void 0===fa&&(Ba++,fa=Ba,da.setCacheValue("_arcadeCacheId",fa)),da=new h(da.points,da.spatialReference,!0===da.hasZ,!0===da.hasM,fa,1);case "type":return"Multipoint"}}throw Error(l.nodeErrorMessage(P,"RUNTIME","PROPERTYNOTFOUND"));}function O(da,fa){try{var P=fa.name.toLowerCase();if(null!==da.localScope){if(void 0!==da.localScope[P])return"lscope['"+
P+"']";if(void 0!==da.localScope._SymbolsMap[P])return"lscope['"+da.localScope._SymbolsMap[P]+"']"}if(void 0!==da.globalScope[P])return"gscope['"+P+"']";if(void 0!==da.globalScope._SymbolsMap[P])return"gscope['"+da.globalScope._SymbolsMap[P]+"']";throw Error(l.nodeErrorMessage(fa,"RUNTIME","VARIABLENOTFOUND"));}catch(xa){throw xa;}}function S(da){return null===da?"":m.isArray(da)||m.isImmutableArray(da)?"Array":m.isDate(da)?"Date":m.isString(da)?"String":m.isBoolean(da)?"Boolean":m.isNumber(da)?"Number":
da instanceof a?"Attachment":da instanceof r?"Portal":da instanceof k?"Dictionary":da instanceof e?"Feature":da instanceof D?"Point":da instanceof q?"Polygon":da instanceof v?"Polyline":da instanceof w?"Multipoint":da instanceof B?"Extent":m.isFunctionParameter(da)?"Function":m.isFeatureSet(da)?"FeatureSet":m.isFeatureSetCollection(da)?"FeatureSetCollection":da===m.voidOperation?"":"number"===typeof da&&isNaN(da)?"Number":"Unrecognised Type"}function L(da,fa,P,xa){try{if(m.equalityTest(fa[P],xa))return fa[P+
1];var Fa=fa.length-P;return 1===Fa?fa[P]:2===Fa?null:3===Fa?fa[P+2]:L(da,fa,P+2,xa)}catch(ba){throw ba;}}function Y(da,fa,P,xa){try{if(!0===xa)return fa[P+1];if(3===fa.length-P)return fa[P+2];var Fa=fa[P+2];if(!1===m.isBoolean(Fa))throw Error("WHEN needs boolean test conditions");return Y(da,fa,P+2,Fa)}catch(ba){throw ba;}}function ca(da,fa){var P=da.length,xa=Math.floor(P/2);if(0===P)return[];if(1===P)return[da[0]];var Fa=ca(da.slice(0,xa),fa);da=ca(da.slice(xa,P),fa);for(P=[];0<Fa.length||0<da.length;)0<
Fa.length&&0<da.length?(xa=fa(Fa[0],da[0]),isNaN(xa)&&(xa=0),0>=xa?(P.push(Fa[0]),Fa=Fa.slice(1)):(P.push(da[0]),da=da.slice(1))):0<Fa.length?(P.push(Fa[0]),Fa=Fa.slice(1)):0<da.length&&(P.push(da[0]),da=da.slice(1));return P}function U(da,fa){try{var P=da.length,xa=Math.floor(P/2);if(0===P)return A.resolve([]);if(1===P)return A.resolve([da[0]]);var Fa=[U(da.slice(0,xa),fa),U(da.slice(xa,P),fa)];return A.all(Fa).then(function(ba){return X(ba[0],ba[1],fa,[])})}catch(ba){return A.reject(ba)}}function X(da,
fa,P,xa){return A.create(function(Fa,ba){0<da.length||0<fa.length?0<da.length&&0<fa.length?P(da[0],fa[0]).then(function(Sa){try{isNaN(Sa)&&(Sa=1),0>=Sa?(xa.push(da[0]),da=da.slice(1)):(xa.push(fa[0]),fa=fa.slice(1)),X(da,fa,P,xa).then(function(Qa){Fa(Qa)},ba)}catch(Qa){ba(Qa)}},ba):0<da.length?(xa.push(da[0]),da=da.slice(1),X(da,fa,P,xa).then(function(Sa){Fa(Sa)},ba)):0<fa.length&&(xa.push(fa[0]),fa=fa.slice(1),X(da,fa,P,xa).then(function(Sa){Fa(Sa)},ba)):Fa(xa)})}function Z(da){da.symbols.symbolCounter++;
return"_T"+da.symbols.symbolCounter.toString()}function N(da){da.symbols.symbolCounter++;return"_Tvar"+da.symbols.symbolCounter.toString()}function aa(da,fa,P){var xa={};da||(da={});P||(P={});xa._SymbolsMap={};xa.textformatting=1;xa.infinity=1;xa.pi=1;for(var Fa in fa)xa[Fa]=1;for(Fa in P)xa[Fa]=1;for(Fa in da)xa[Fa]=1;return xa}function ka(da,fa){for(var P={mode:fa,compiled:!0,functions:{},signatures:[],failDefferred:E,standardFunction:C,standardFunctionAsync:C,evaluateIdentifier:pa},xa=0;xa<da.length;xa++)da[xa].registerFunctions(P);
if("sync"===fa){for(var Fa in P.functions)Da[Fa]=new m.NativeFunction(P.functions[Fa]),ya.prototype[Fa]=Da[Fa];for(xa=0;xa<P.signatures.length;xa++)l.addFunctionDeclaration(P.signatures[xa],"sync")}else{for(Fa in P.functions)oa[Fa]=new m.NativeFunction(P.functions[Fa]),wa.prototype[Fa]=oa[Fa];for(xa=0;xa<P.signatures.length;xa++)l.addFunctionDeclaration(P.signatures[xa],"async")}}function pa(da,fa){fa=fa.name;if("_SymbolsMap"===fa)throw"Illegal";if(0<da.localStack.length){if("_t"!==fa.substr(0,2).toLowerCase()&&
void 0!==da.localStack[da.localStack.length-1][fa])return da.localStack[da.localStack.length-1][fa];var P=da.mangleMap[fa];if(void 0!==P&&void 0!==da.localStack[da.localStack.length-1][P])return da.localStack[da.localStack.length-1][P]}if("_t"!==fa.substr(0,2).toLowerCase()&&void 0!==da.globalScope[fa]||1===da.globalScope._SymbolsMap[fa])return da.globalScope[fa];fa=da.mangleMap[fa];if(void 0!==fa)return da.globalScope[fa]}function ta(da){}Object.defineProperty(y,"__esModule",{value:!0});y.enableAsyncSupport=
y.compileScript=y.referencesFunction=y.referencesMember=y.validateScript=y.extractFieldLiterals=y.executeScript=y.extend=y.functionHelper=void 0;var Ba=0,Da={};f.registerFunctions(Da,C);c.registerFunctions(Da,C);x.registerFunctions(Da,C);n.registerFunctions(Da,C);d.registerFunctions(Da,C);t.registerFunctions(Da,C);Da["typeof"]=function(da,fa){return C(da,fa,function(P,xa,Fa){m.pcCheck(Fa,1,1);P=S(Fa[0]);if("Unrecognised Type"===P)throw Error("Unrecognised Type");return P})};Da.iif=function(da,fa){try{return C(da,
fa,function(P,xa,Fa){m.pcCheck(Fa,3,3);if(!1===m.isBoolean(Fa[0]))throw Error("IF Function must have a boolean test condition");return Fa[0]?Fa[1]:Fa[2]})}catch(P){throw P;}};Da.decode=function(da,fa){try{return C(da,fa,function(P,xa,Fa){if(2>Fa.length)throw Error("Missing Parameters");if(2===Fa.length)return Fa[1];if(0===(Fa.length-1)%2)throw Error("Must have a default value result.");return L(da,Fa,1,Fa[0])})}catch(P){throw P;}};Da.when=function(da,fa){try{return C(da,fa,function(P,xa,Fa){if(3>
Fa.length)throw Error("Missing Parameters");if(0===Fa.length%2)throw Error("Must have a default value result.");P=Fa[0];if(!1===m.isBoolean(P))throw Error("WHEN needs boolean test conditions");return Y(da,Fa,0,P)})}catch(P){throw P;}};Da.top=function(da,fa){return C(da,fa,function(P,xa,Fa){m.pcCheck(Fa,2,2);if(m.isArray(Fa[0]))return m.toNumber(Fa[1])>=Fa[0].length?Fa[0].slice(0):Fa[0].slice(0,m.toNumber(Fa[1]));if(m.isImmutableArray(Fa[0]))return m.toNumber(Fa[1])>=Fa[0].length()?Fa[0].slice(0):
Fa[0].slice(0,m.toNumber(Fa[1]));throw Error("Top cannot accept this parameter type");})};Da.first=function(da,fa){return C(da,fa,function(P,xa,Fa){m.pcCheck(Fa,1,1);return m.isArray(Fa[0])?0===Fa[0].length?null:Fa[0][0]:m.isImmutableArray(Fa[0])?0===Fa[0].length()?null:Fa[0].get(0):null})};Da.sort=function(da,fa){return C(da,fa,function(P,xa,Fa){m.pcCheck(Fa,1,2);xa=Fa[0];m.isImmutableArray(xa)&&(xa=xa.toArray());if(!1===m.isArray(xa))throw Error("Illegal Argument");if(1<Fa.length){if(!1===m.isFunctionParameter(Fa[1]))throw Error("Illegal Argument");
var ba=function(ia,ja){return Aa.callfunc(Fa[1],[ia,ja],P)};return da.isAsync?U(xa,ba):xa=ca(xa,function(ia,ja){return ba(ia,ja)})}if(0===xa.length)return[];for(var Sa={},Qa=0;Qa<xa.length;Qa++){var va=S(xa[Qa]);""!==va&&(Sa[va]=!0)}if(!0===Sa.Array||!0===Sa.Dictionary||!0===Sa.Feature||!0===Sa.Point||!0===Sa.Polygon||!0===Sa.Polyline||!0===Sa.Multipoint||!0===Sa.Extent||!0===Sa.Function)return xa.slice(0);Qa=0;va="";for(var R in Sa)Qa++,va=R;return xa=1<Qa||"String"===va?ca(xa,function(ia,ja){if(null===
ia||void 0===ia||ia===m.voidOperation)return null===ja||void 0===ja||ja===m.voidOperation?0:1;if(null===ja||void 0===ja||ja===m.voidOperation)return-1;ia=m.toString(ia);ja=m.toString(ja);return ia<ja?-1:ia===ja?0:1}):"Number"===va?ca(xa,function(ia,ja){return ia-ja}):"Boolean"===va?ca(xa,function(ia,ja){return ia===ja?0:ja?-1:1}):"Date"===va?ca(xa,function(ia,ja){return ja-ia}):xa.slice(0)})};var oa={},ra;for(ra in Da)oa[ra]=new m.NativeFunction(Da[ra]);u.registerFunctions(Da,C);for(ra in Da)Da[ra]=
new m.NativeFunction(Da[ra]);var ya=function(){};ya.prototype=Da;var wa=function(){};wa.prototype=oa;y.functionHelper={fixSpatialReference:m.fixSpatialReference,parseArguments:function(da,fa){for(var P=[],xa=0;xa<fa.arguments.length;xa++)P.push(G(da,fa.arguments[xa]));return P},standardFunction:C};y.extend=ka;y.executeScript=function(da,fa){return da(fa)};y.extractFieldLiterals=function(da,fa){void 0===fa&&(fa=!1);return l.findFieldLiterals(da)};y.validateScript=function(da,fa){return l.validateScript(da,
fa,"sync")};y.referencesMember=function(da,fa){return l.referencesMember(da,fa)};y.referencesFunction=function(da,fa){return l.referencesFunction(da,fa)};var la=0,Aa={error:function(da,fa,P){throw Error(l.nodeErrorMessage(da,fa,P));},__awaiter:function(da,fa,P,xa){return A.create(function(Fa,ba){function Sa(R){try{va(xa.next(R))}catch(ia){ba(ia)}}function Qa(R){try{va(xa["throw"](R))}catch(ia){ba(ia)}}function va(R){R.done?Fa(R.value):R.value&&R.value.then?R.value.then(Sa,Qa):(la++,0===la%100?setTimeout(function(){la=
0;Sa(R.value)},0):Sa(R.value))}va((xa=xa.apply(da,fa||[])).next())})},functionDepthchecker:function(da,fa){return function(){fa.depthCounter++;fa.localStack.push([]);if(64<fa.depthCounter)throw Error("Exceeded maximum function depth");var P=da.apply(this,arguments);if(A.isPromiseLike(P))return P.then(function(xa){fa.depthCounter--;--fa.localStack.length;return xa});fa.depthCounter--;--fa.localStack.length;return P}},castString:function(da){return m.toString(da)},aCheck:function(da,fa){if(m.isFunctionParameter(da))throw Error(l.nodeErrorMessage({type:fa},
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return da===m.voidOperation?null:da},Dictionary:k,Feature:e,dictionary:function(da){for(var fa={},P=0;P<da.length;P+=2){if(m.isFunctionParameter(da[P+1]))throw Error("Illegal Argument");if(!1===m.isString(da[P]))throw Error("Illegal Argument");fa[da[P].toString()]=da[P+1]===m.voidOperation?null:da[P+1]}da=new k(fa);da.immutable=!1;return da},strCheck:function(da){if(!1===m.isString(da))throw Error("Illegal Argument");return da},unary:function(da,fa){if(m.isBoolean(da)){if("!"===
fa)return!da;if("-"===fa)return-1*m.toNumber(da);if("+"===fa)return 1*m.toNumber(da);if("~"===fa)return~m.toNumber(da);throw Error(l.nodeErrorMessage({type:"UnaryExpression",operator:fa,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===fa)return-1*m.toNumber(da);if("+"===fa)return 1*m.toNumber(da);if("~"===fa)return~m.toNumber(da);throw Error(l.nodeErrorMessage({type:"UnaryExpression",operator:fa,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(da){if(!1===
m.isBoolean(da))throw Error(l.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return da},logical:function(da,fa,P){if(m.isBoolean(da)&&m.isBoolean(fa))switch(P){case "||":return da||fa;case "\x26\x26":return da&&fa}throw Error(l.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(da,fa,P){switch(P){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return m.binaryOperator(m.toNumber(da),
m.toNumber(fa),P);case "\x3d\x3d":return m.equalityTest(da,fa);case "\x3d":return m.equalityTest(da,fa);case "!\x3d":return!m.equalityTest(da,fa);case "\x3c":return m.greaterThanLessThan(da,fa,P);case "\x3e":return m.greaterThanLessThan(da,fa,P);case "\x3c\x3d":return m.greaterThanLessThan(da,fa,P);case "\x3e\x3d":return m.greaterThanLessThan(da,fa,P);case "+":return m.isString(da)||m.isString(fa)?m.toString(da)+m.toString(fa):m.toNumber(da)+m.toNumber(fa);case "-":return m.toNumber(da)-m.toNumber(fa);
case "*":return m.toNumber(da)*m.toNumber(fa);case "/":return m.toNumber(da)/m.toNumber(fa);case "%":return m.toNumber(da)%m.toNumber(fa);default:throw Error(l.nodeErrorMessage({type:"BinaryExpression",operator:P,left:da,right:fa},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(da,fa,P){switch(fa){case "\x3d":return da===m.voidOperation?null:da;case "/\x3d":return m.toNumber(P)/m.toNumber(da);case "*\x3d":return m.toNumber(P)*m.toNumber(da);case "-\x3d":return m.toNumber(P)-m.toNumber(da);
case "+\x3d":return m.isString(P)||m.isString(da)?m.toString(P)+m.toString(da):m.toNumber(P)+m.toNumber(da);case "%\x3d":return m.toNumber(P)%m.toNumber(da);default:throw Error(l.nodeErrorMessage({type:"AssignmentExpression",operator:fa,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(da,fa,P,xa){var Fa=m.toNumber(da[fa]);da[fa]="++"===P?Fa+1:Fa-1;return!1===xa?Fa:"++"===P?Fa+1:Fa-1},graphicToFeature:function(da,fa){return null===da?null:e.createFromGraphicLikeObject(da.geometry,
da.attributes,fa)},memberupdate:function(da,fa,P,xa){if(m.isArray(da))if(m.isNumber(fa)){0>fa&&(fa=da.length+fa);if(0>fa||fa>=da.length)throw Error("Assignment outside of array bounds");var Fa=m.toNumber(da[fa]);da[fa]="++"===P?Fa+1:Fa-1}else throw Error("Invalid Parameter");else if(da instanceof k){if(!1===m.isString(fa))throw Error("Dictionary accessor must be a string");if(!0===da.hasField(fa))Fa=m.toNumber(da.field(fa)),da.setField(fa,"++"===P?Fa+1:Fa-1);else throw Error("Invalid Parameter");
}else if(da instanceof e){if(!1===m.isString(fa))throw Error("Feature accessor must be a string");if(!0===da.hasField(fa))Fa=m.toNumber(da.field(fa)),da.setField(fa,"++"===P?Fa+1:Fa-1);else throw Error("Invalid Parameter");}else{if(m.isImmutableArray(da))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===xa?Fa:"++"===P?Fa+1:Fa-1},assignmember:function(da,fa,P,xa){if(m.isArray(da))if(m.isNumber(fa)){0>fa&&(fa=da.length+fa);if(0>fa||fa>da.length)throw Error("Assignment outside of array bounds");
if(fa===da.length&&"\x3d"!==P)throw Error("Invalid Parameter");da[fa]=this.assign(xa,P,da[fa])}else throw Error("Invalid Parameter");else if(da instanceof k){if(!1===m.isString(fa))throw Error("Dictionary accessor must be a string");if(!0===da.hasField(fa))da.setField(fa,this.assign(xa,P,da.field(fa)));else{if("\x3d"!==P)throw Error("Invalid Parameter");da.setField(fa,this.assign(xa,P,null))}}else if(da instanceof e){if(!1===m.isString(fa))throw Error("Feature accessor must be a string");if(!0===
da.hasField(fa))da.setField(fa,this.assign(xa,P,da.field(fa)));else{if("\x3d"!==P)throw Error("Invalid Parameter");da.setField(fa,this.assign(xa,P,null))}}else{if(m.isImmutableArray(da))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(da,fa){if(null===da)throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(da instanceof k||da instanceof e){if(m.isString(fa))return da.field(fa);throw Error(l.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(da instanceof F){if(m.isString(fa))return V(da,fa,"MemberExpression");throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(m.isArray(da)){if(m.isNumber(fa)&&isFinite(fa)&&Math.floor(fa)===fa){0>fa&&(fa=da.length+fa);if(fa>=da.length||0>fa)throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));
return da[fa]}throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(m.isString(da)){if(m.isNumber(fa)&&isFinite(fa)&&Math.floor(fa)===fa){0>fa&&(fa=da.length+fa);if(fa>=da.length||0>fa)throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return da[fa]}throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME",
"INVALIDTYPE"));}if(m.isImmutableArray(da)&&m.isNumber(fa)&&isFinite(fa)&&Math.floor(fa)===fa){0>fa&&(fa=da.length()+fa);if(fa>=da.length()||0>fa)throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return da.get(fa)}throw Error(l.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(da,fa,P){return da instanceof m.NativeFunction?da.fn(P,fa):da instanceof
m.SizzleFunction?da.fn.apply(this,fa):da.apply(this,fa)}};y.compileScript=function(da,fa,P){void 0===fa&&(fa=null);void 0===P&&(P=!1);null===fa&&(fa={vars:{},customfunctions:{}});fa={isAsync:P,globalScope:aa(fa.vars,P?oa:Da,fa.customfunctions),localScope:null,mangleMap:{},console:ta,lrucache:fa.lrucache,services:fa.services,symbols:{symbolCounter:0}};da=G(fa,da.body[0].body);""===da&&(da="lc.voidOperation; ");fa={lc:m,lang:Aa,mangles:fa.mangleMap,postProcess:function(xa){xa instanceof m.ReturnResult&&
(xa=xa.value);xa instanceof m.ImplicitResult&&(xa=xa.value);xa===m.voidOperation&&(xa=null);if(xa===m.breakResult)throw Error("Cannot return BREAK");if(xa===m.continueResult)throw Error("Cannot return CONTINUE");if(m.isFunctionParameter(xa))throw Error("Cannot return FUNCTION");return xa},prepare:function(xa,Fa){var ba=xa.spatialReference;if(null===ba||void 0===ba)ba=new z({wkid:102100});var Sa=xa.vars,Qa=xa.customfunctions,va=Fa?new wa:new ya;Sa||(Sa={});Qa||(Qa={});var R=new k({newline:"\n",tab:"\t",
singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});R.immutable=!1;va._SymbolsMap={textformatting:1,infinity:1,pi:1};va.textformatting=R;va.infinity=Number.POSITIVE_INFINITY;va.pi=Math.PI;for(var ia in Qa)va[ia]=Qa[ia],va._SymbolsMap[ia]=1;for(ia in Sa)va._SymbolsMap[ia]=1,va[ia]=Sa[ia]&&"esri.Graphic"===Sa[ia].declaredClass?e.createFromGraphic(Sa[ia]):Sa[ia];return{localStack:[],isAsync:Fa,mangleMap:this.mangles,spatialReference:ba,globalScope:va,abortSignal:void 0===xa.abortSignal||
null===xa.abortSignal?{aborted:!1}:xa.abortSignal,localScope:null,services:xa.services,console:xa.console?xa.console:ta,lrucache:xa.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",P?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
da+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+da+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(fa)};y.enableAsyncSupport=function(){return A.create(function(da,fa){b(["./functions/geomasync"],function(P){ka([P],"async");da(!0)},
function(P){fa(P)})})}})},"esri/arcade/ArcadePortal":function(){var b=this&&this.__extends||function(){var y=function(r,a){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var g in e)e.hasOwnProperty(g)&&(k[g]=e[g])};return y(r,a)};return function(r,a){function k(){this.constructor=r}y(r,a);r.prototype=null===a?Object.create(a):(k.prototype=a.prototype,new k)}}();define(["require","exports","./Dictionary"],function(y,r,a){return function(k){function e(g){var h=
k.call(this)||this;h.immutable=!1;h.setField("url",g);h.immutable=!0;return h}b(e,k);return e}(a)})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(b,y,r,a,k){function e(h){var m=null;if(null!==h)if(a.isNumber(h))m=a.toNumber(h);else if(a.isBoolean(h))m=a.toBoolean(h);else if(a.isString(h))m=a.toString(h);else if(a.isDate(h))m=a.toDate(h);else if(a.isArray(h)){m=[];for(var l=0;l<h.length;l++)m.push(e(h[l]))}else{if(0===
Object.keys(h).length)return null;m=new g;m.immutable=!1;l=0;for(var f=Object.keys(h);l<f.length;l++){var c=f[l],d=h[c];void 0!==d&&m.setField(c,e(d))}m.immutable=!0}return m}var g=function(){function h(m){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=m instanceof h?m.attributes:void 0===m?{}:null===m?{}:m}h.prototype.field=function(m){var l=m.toLowerCase(),f=this.attributes[m];if(void 0!==f)return f;for(var c in this.attributes)if(c.toLowerCase()===
l)return this.attributes[c];throw Error("Field not Found : "+m);};h.prototype.setField=function(m,l){if(this.immutable)throw Error("Dictionary is Immutable");var f=m.toLowerCase();if(void 0===this.attributes[m])for(var c in this.attributes)if(c.toLowerCase()===f){this.attributes[c]=l;return}this.attributes[m]=l};h.prototype.hasField=function(m){var l=m.toLowerCase();if(void 0!==this.attributes[m])return!0;for(var f in this.attributes)if(f.toLowerCase()===l)return!0;return!1};h.prototype.keys=function(){var m=
[],l;for(l in this.attributes)m.push(l);return m=m.sort()};h.prototype.castToText=function(){var m="",l;for(l in this.attributes){""!==m&&(m+=",");var f=this.attributes[l];null==f?m+=JSON.stringify(l)+":null":a.isBoolean(f)||a.isNumber(f)||a.isString(f)?m+=JSON.stringify(l)+":"+JSON.stringify(f):f instanceof k?m+=JSON.stringify(l)+":"+a.toStringExplicit(f):f instanceof r?m+=JSON.stringify(l)+":"+a.toStringExplicit(f):f instanceof Array?m+=JSON.stringify(l)+":"+a.toStringExplicit(f):f instanceof Date?
m+=JSON.stringify(l)+":"+JSON.stringify(f):null!==f&&"object"===typeof f&&void 0!==f.castToText&&(m+=JSON.stringify(l)+":"+f.castToText())}return"{"+m+"}"};h.convertObjectToArcadeDictionary=function(m){var l=new h;l.immutable=!1;for(var f in m){var c=m[f];void 0!==c&&l.setField(f.toString(),e(c))}l.immutable=!0;return l};return h}();return g})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(b,y){return function(){function r(a){void 0===a&&(a=[]);this._elements=a}r.prototype.length=
function(){return this._elements.length};r.prototype.get=function(a){return this._elements[a]};r.prototype.toArray=function(){for(var a=[],k=0;k<this.length();k++)a.push(this.get(k));return a};return r}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline dojo/number".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u){function n(U,X,Z){return""===X||null===X||void 0===X||X===Z||X===Z?U:U=U.split(X).join(Z)}function t(U){return U instanceof L||U instanceof r||U instanceof Y}function x(U){return A(U)||F(U)||q(U)||B(U)||null===U||U===y.voidOperation||"number"===typeof U?!0:!1}function A(U){return"string"===typeof U||U instanceof String}function B(U){return"boolean"===typeof U}function F(U){return"number"===typeof U}function w(U){return U instanceof Array}function D(U){return U instanceof
a}function q(U){return U instanceof Date}function v(U,X){if(!1===isNaN(U)){if(void 0===X||null===X||""===X)return U.toString();X=n(X,"\u2030","");X=n(X,"\u00a4","");return u.format(U,{pattern:X})}return U.toString()}function z(U,X){U=y.MomentLibrary.Moment(U);return void 0===X||null===X||""===X?U.format():U.format(C(X))}function C(U){return U.replace(/(LTS)|L|l/g,function(X){return"["+X+"]"})}function E(U,X,Z){switch(Z){case "\x3e":return U>X;case "\x3c":return U<X;case "\x3e\x3d":return U>=X;case "\x3c\x3d":return U<=
X}return!1}function G(U,X){if(U===X||null===U&&X===y.voidOperation||null===X&&U===y.voidOperation)return!0;if(q(U)&&q(X))return U.getTime()===X.getTime();if(U instanceof k||U instanceof e)return U.equalityTest(X);if(U instanceof f&&X instanceof f){var Z=void 0,N=void 0;Z=U.getCacheValue("_arcadeCacheId");N=X.getCacheValue("_arcadeCacheId");if(void 0!==Z&&null!==Z)return Z===N}return void 0!==U&&void 0!==X&&null!==U&&null!==X&&"object"===typeof U&&"object"===typeof X&&(U._arcadeCacheId===X._arcadeCacheId&&
void 0!==U._arcadeCacheId&&null!==U._arcadeCacheId||U._underlyingGraphic===X._underlyingGraphic&&void 0!==U._underlyingGraphic&&null!==U._underlyingGraphic)?!0:!1}function H(U,X){if(A(U))return U;if(null===U)return"";if(F(U))return v(U,X);if(B(U))return U.toString();if(q(U))return z(U,X);if(U instanceof m)return JSON.stringify(U.toJson());if(w(U)){X=[];for(var Z=0;Z<U.length;Z++)X[Z]=I(U[Z]);return"["+X.join(",")+"]"}if(U instanceof a){X=[];for(Z=0;Z<U.length();Z++)X[Z]=I(U.get(Z));return"["+X.join(",")+
"]"}return null!==U&&"object"===typeof U&&void 0!==U.castToText?U.castToText():t(U)?"object, Function":""}function K(U,X){if(A(U))return U;if(null===U)return"";if(F(U))return v(U,X);if(B(U))return U.toString();if(q(U))return z(U,X);if(U instanceof m)return U instanceof h?'{"xmin":'+U.xmin.toString()+',"ymin":'+U.ymin.toString()+","+(U.hasZ?'"zmin":'+U.zmin.toString()+",":"")+(U.hasM?'"mmin":'+U.mmin.toString()+",":"")+'"xmax":'+U.xmax.toString()+',"ymax":'+U.ymax.toString()+","+(U.hasZ?'"zmax":'+
U.zmax.toString()+",":"")+(U.hasM?'"mmax":'+U.mmax.toString()+",":"")+'"spatialReference":'+V(U.spatialReference)+"}":V(U.toJson(),function(N,aa){return N.key===aa.key?0:"spatialReference"===N.key?1:"spatialReference"===aa.key||N.key<aa.key?-1:N.key>aa.key?1:0});if(w(U)){X=[];for(var Z=0;Z<U.length;Z++)X[Z]=I(U[Z]);return"["+X.join(",")+"]"}if(U instanceof a){X=[];for(Z=0;Z<U.length();Z++)X[Z]=I(U.get(Z));return"["+X.join(",")+"]"}return null!==U&&"object"===typeof U&&void 0!==U.castToText?U.castToText():
t(U)?"object, Function":""}function I(U){return null===U?"null":B(U)||F(U)||A(U)?JSON.stringify(U):U instanceof m||U instanceof a||U instanceof Array?K(U):U instanceof Date?JSON.stringify(z(U,"")):null!==U&&"object"===typeof U&&void 0!==U.castToText?U.castToText():"null"}function J(U,X){return F(U)?U:null===U||""===U?0:q(U)?NaN:B(U)?U?1:0:w(U)||""===U||void 0===U?NaN:void 0!==X&&A(U)?(X=n(X,"\u2030",""),X=n(X,"\u00a4",""),u.parse(U,{pattern:X})):U===y.voidOperation?0:Number(U)}function Q(U,X){var Z;
X.fields.some(function(N){N.name===U&&(Z=N.domain);return!!Z});return Z}function V(U,X){X||(X={});"function"===typeof X&&(X={cmp:X});var Z="boolean"===typeof X.cycles?X.cycles:!1,N=X.cmp&&function(ka){return function(pa){return function(ta,Ba){return ka({key:ta,value:pa[ta]},{key:Ba,value:pa[Ba]})}}}(X.cmp),aa=[];return function ta(pa){pa&&pa.toJson&&"function"===typeof pa.toJson&&(pa=pa.toJson());if(void 0!==pa){if("number"===typeof pa)return isFinite(pa)?""+pa:"null";if("object"!==typeof pa)return JSON.stringify(pa);
var Ba;if(Array.isArray(pa)){var Da="[";for(Ba=0;Ba<pa.length;Ba++)Ba&&(Da+=","),Da+=ta(pa[Ba])||"null";return Da+"]"}if(null===pa)return"null";if(-1!==aa.indexOf(pa)){if(Z)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var oa=aa.push(pa)-1,ra=Object.keys(pa).sort(N&&N(pa));Da="";for(Ba=0;Ba<ra.length;Ba++){var ya=ra[Ba],wa=ta(pa[ya]);wa&&(Da&&(Da+=","),Da+=JSON.stringify(ya)+":"+wa)}aa.splice(oa,1);return"{"+Da+"}"}}(U)}function O(U,X){if(X instanceof
f)U.push([X.x,X.y]);else throw Error("Invalid Argument");}Object.defineProperty(y,"__esModule",{value:!0});y.binaryOperator=y.MomentLibrary=y.tick=y.toStringArray=y.autoCastArrayOfPointsToMultiPoint=y.autoCastArrayOfPointsToPolyline=y.autoCastArrayOfPointsToPolygon=y.autoCastFeatureToGeometry=y.stableStringify=y.getDomain=y.getDomainCode=y.getDomainValue=y.fixNullGeometry=y.fixSpatialReference=y.toBoolean=y.toDateM=y.toDate=y.toNumber=y.toStringExplicit=y.toNumberArray=y.toString=y.equalityTest=y.greaterThanLessThan=
y.standardiseDateFormat=y.formatDate=y.formatNumber=y.generateUUID=y.pcCheck=y.isDate=y.isImmutableArray=y.isFeatureSetCollection=y.isFeatureSet=y.isArray=y.isInteger=y.isNumber=y.isBoolean=y.isString=y.defaultUndefined=y.isSimpleType=y.isFunctionParameter=y.multiReplace=y.continueResult=y.breakResult=y.voidOperation=y.SizzleFunction=y.ReturnResult=y.ImplicitResult=y.NativeFunction=y.SizzleFunctionE=y.NativeFunctionE=y.ImplicitResultE=y.ReturnResultE=void 0;b=function(){return function(U){this.value=
U}}();y.ReturnResultE=b;var S=function(){return function(U){this.value=U}}();y.ImplicitResultE=S;var L=function(){return function(U){this.fn=U}}();y.NativeFunctionE=L;var Y=function(){return function(U){this.fn=U}}();y.SizzleFunctionE=Y;y.NativeFunction=L;y.ImplicitResult=S;y.ReturnResult=b;y.SizzleFunction=Y;y.voidOperation={type:"VOID"};y.breakResult={type:"BREAK"};y.continueResult={type:"CONTINUE"};y.multiReplace=n;y.isFunctionParameter=t;y.isSimpleType=x;y.defaultUndefined=function(U,X){return void 0===
U?X:U};y.isString=A;y.isBoolean=B;y.isNumber=F;y.isInteger=function(U){return"number"===typeof U&&isFinite(U)&&Math.floor(U)===U};y.isArray=w;y.isFeatureSet=function(U){return!0===(U&&U.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===U.declaredRootClass)};y.isFeatureSetCollection=function(U){return!0===(U&&U.declaredRootClass&&"esri.arcade.featureSetCollection"===U.declaredRootClass)};y.isImmutableArray=D;y.isDate=q;y.pcCheck=function(U,X,Z){if(U.length<X||U.length>Z)throw Error("Function called with wrong number of Parameters");
};y.generateUUID=function(){var U=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(X){var Z=(U+16*Math.random())%16|0;U=Math.floor(U/16);return("x"===X?Z:Z&3|8).toString(16)})};y.formatNumber=v;y.formatDate=z;y.standardiseDateFormat=C;y.greaterThanLessThan=function(U,X,Z){if(null===U){if(null===X||X===y.voidOperation)return E(null,null,Z);if(F(X))return E(0,X,Z);if(A(X)||B(X))return E(0,J(X),Z);if(q(X))return E(0,X.getTime(),Z)}if(U===y.voidOperation){if(null===
X||X===y.voidOperation)return E(null,null,Z);if(F(X))return E(0,X,Z);if(A(X)||B(X))return E(0,J(X),Z);if(q(X))return E(0,X.getTime(),Z)}else if(F(U)){if(F(X))return E(U,X,Z);if(B(X))return E(U,J(X),Z);if(null===X||X===y.voidOperation)return E(U,0,Z);if(A(X))return E(U,J(X),Z);if(q(X))return E(U,X.getTime(),Z)}else if(A(U)){if(A(X))return E(H(U),H(X),Z);if(q(X))return E(J(U),X.getTime(),Z);if(F(X))return E(J(U),X,Z);if(null===X||X===y.voidOperation)return E(J(U),0,Z);if(B(X))return E(J(U),J(X),Z)}else if(q(U)){if(q(X))return E(U,
X,Z);if(null===X||X===y.voidOperation)return E(U.getTime(),0,Z);if(F(X))return E(U.getTime(),X,Z);if(B(X)||A(X))return E(U.getTime(),J(X),Z)}else if(B(U)){if(B(X))return E(U,X,Z);if(F(X))return E(J(U),J(X),Z);if(q(X))return E(J(U),X.getTime(),Z);if(null===X||X===y.voidOperation)return E(J(U),0,Z);if(A(X))return E(J(U),J(X),Z)}return!G(U,X)||"\x3c\x3d"!==Z&&"\x3e\x3d"!==Z?!1:!0};y.equalityTest=G;y.toString=H;y.toNumberArray=function(U){var X=[];if(!1===w(U))return null;if(U instanceof a){for(var Z=
0;Z<U.length();Z++)X[Z]=J(U.get(Z));return X}for(Z=0;Z<U.length;Z++)X[Z]=J(U[Z]);return X};y.toStringExplicit=K;y.toNumber=J;y.toDate=function(U,X){return q(U)?U:A(U)&&(U=y.MomentLibrary.Moment(U,[void 0===X||null===X||""===X?y.MomentLibrary.Moment.ISO_8601:X]),U.isValid())?U.toDate():null};y.toDateM=function(U,X){return q(U)?y.MomentLibrary.Moment(U):A(U)&&(U=y.MomentLibrary.Moment(U,[void 0===X||null===X||""===X?y.MomentLibrary.Moment.ISO_8601:X]),U.isValid())?U:null};y.toBoolean=function(U){return B(U)?
U:A(U)?(U=U.toLowerCase(),"true"===U?!0:!1):F(U)?0===U||isNaN(U)?!1:!0:!1};y.fixSpatialReference=function(U,X){if(null===U||void 0===U)return null;if(null===U.spatialReference||void 0===U.spatialReference)U.spatialReference=X;return U};y.fixNullGeometry=function(U){if(null===U)return null;if(U instanceof f)return"NaN"===U.x||null===U.x||isNaN(U.x)?null:U;if(U instanceof c){if(0===U.rings.length)return null;for(var X=0,Z=U.rings;X<Z.length;X++){var N=Z[X];if(0<N.length)return U}return null}if(U instanceof
d){if(0===U.paths.length)return null;X=0;for(Z=U.paths;X<Z.length;X++)if(N=Z[X],0<N.length)return U;return null}return U instanceof l?0===U.points.length?null:U:U instanceof h?"NaN"===U.xmin||null===U.xmin||isNaN(U.xmin)?null:U:null};y.getDomainValue=function(U,X){if(!U||!U.domain)return X;var Z=null;if("string"===U.field.type||"esriFieldTypeString"===U.field.type)X=H(X);else{if(null===X||void 0===X)return null;if(""===X)return X;X=J(X)}for(var N=0;N<U.domain.codedValues.length;N++){var aa=U.domain.codedValues[N];
aa.code===X&&(Z=aa)}return null===Z?X:Z.name};y.getDomainCode=function(U,X){if(!U||!U.domain)return X;var Z=null;X=H(X);for(var N=0;N<U.domain.codedValues.length;N++){var aa=U.domain.codedValues[N];aa.name===X&&(Z=aa)}return null===Z?X:Z.code};y.getDomain=function(U,X,Z,N){void 0===Z&&(Z=null);if(!X||!X.fields)return null;for(var aa=null,ka=0;ka<X.fields.length;ka++){var pa=X.fields[ka];pa.name.toLowerCase()===U.toString().toLowerCase()&&(aa=pa)}if(null===aa)throw Error("Field not found");var ta,
Ba;N||(N=Z&&X.typeIdField&&Z._field(X.typeIdField));null!=N&&X.types.some(function(Da){return Da.id===N?((ta=Da.domains&&Da.domains[aa.name])&&"inherited"===ta.type&&(ta=Q(aa.name,X),Ba=!0),!0):!1});Ba||ta||(ta=Q(U,X));return{field:aa,domain:ta}};y.stableStringify=V;y.autoCastFeatureToGeometry=function(U){if(null===U)return null;for(var X=[],Z=0;Z<U.length;Z++){var N=U[Z];N&&(N.declaredClass&&"esri.arcade.Feature"===N.declaredClass||"FeatureSetReader"===N.type)?X.push(N.geometry()):X.push(N)}return X};
y.autoCastArrayOfPointsToPolygon=function(U,X){if(w(U)||D(U)){var Z=!1,N=!1,aa=[];if(w(U)){for(var ka=0;ka<U.length;ka++){var pa=U[ka];O(aa,pa)}0<aa.length&&(X=U[0].spatialReference,Z=U[0].hasZ,N=U[0].hasM)}else if(U instanceof e)aa=U._elements,0<aa.length&&(Z=U._hasZ,N=U._hasM,X=U.get(0).spatialReference);else if(D(U)){ka=0;for(var ta=U.toArray();ka<ta.length;ka++)pa=ta[ka],O(aa,pa);0<aa.length&&(X=U.get(0).spatialReference,Z=!0===U.get(0).hasZ,N=!0===U.get(0).hasM)}else throw Error("Invalid Argument");
if(0===aa.length)return null;!1===(new c({rings:[],spatialReference:{wkid:4326}})).isClockwise(aa)&&(aa=aa.slice(0).reverse());return new c({rings:[aa],spatialReference:X,hasZ:Z,hasM:N})}return U};y.autoCastArrayOfPointsToPolyline=function(U,X){if(w(U)||D(U)){var Z=!1,N=!1,aa=[];if(w(U)){for(var ka=0;ka<U.length;ka++){var pa=U[ka];O(aa,pa)}0<aa.length&&(X=U[0].spatialReference,Z=!0===U[0].hasZ,N=!0===U[0].hasM)}else if(U instanceof e)aa=U._elements,0<aa.length&&(Z=U._hasZ,N=U._hasM,X=U.get(0).spatialReference);
else if(D(U)){ka=0;for(var ta=U.toArray();ka<ta.length;ka++)pa=ta[ka],O(aa,pa);0<aa.length&&(X=U.get(0).spatialReference,Z=!0===U.get(0).hasZ,N=!0===U.get(0).hasM)}return 0===aa.length?null:new d({paths:[aa],spatialReference:X,hasZ:Z,hasM:N})}return U};y.autoCastArrayOfPointsToMultiPoint=function(U,X){if(w(U)||D(U)){var Z=!1,N=!1,aa=[];if(w(U)){for(var ka=0;ka<U.length;ka++){var pa=U[ka];O(aa,pa)}0<aa.length&&(X=U[0].spatialReference,Z=!0===U[0].hasZ,N=!0===U[0].hasM)}else if(U instanceof e)aa=U._elements,
0<aa.length&&(Z=U._hasZ,N=U._hasM,X=U.get(0).spatialReference);else if(D(U)){ka=0;for(var ta=U.toArray();ka<ta.length;ka++)pa=ta[ka],O(aa,pa);0<aa.length&&(X=U.get(0).spatialReference,Z=!0===U.get(0).hasZ,N=!0===U.get(0).hasM)}return 0===aa.length?null:new l({points:aa,spatialReference:X,hasZ:Z,hasM:N})}return U};y.toStringArray=function(U,X){void 0===X&&(X=!1);var Z=[];if(null===U)return Z;if(!0===w(U)){for(var N=0;N<U.length;N++){var aa=H(U[N]);""===aa&&!0!==X||Z.push(aa)}return Z}if(U instanceof
a){for(N=0;N<U.length();N++)aa=H(U.get(N)),""===aa&&!0!==X||Z.push(aa);return Z}return x(U)?(aa=H(U),""===aa&&!0!==X||Z.push(aa),Z):[]};var ca=0;y.tick=function(U){ca++;return 0===ca%100?(ca=0,g.create(function(X){setTimeout(function(){X(U)},0)})):U};y.MomentLibrary={Moment:null};y.binaryOperator=function(U,X,Z){switch(Z){case "\x26":return U&X;case "|":return U|X;case "^":return U^X;case "\x3c\x3c":return U<<X;case "\x3e\x3e":return U>>X;case "\x3e\x3e\x3e":return U>>>X}}})},"esri/arcade/FunctionWrapper":function(){define(["require",
"exports"],function(b,y){return function(){return function(r,a){this.context=this.definition=null;this.definition=r;this.context=a}}()})},"esri/arcade/ImmutablePathArray":function(){var b=this&&this.__extends||function(){var y=function(r,a){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var g in e)e.hasOwnProperty(g)&&(k[g]=e[g])};return y(r,a)};return function(r,a){function k(){this.constructor=r}y(r,a);r.prototype=null===a?Object.create(a):
(k.prototype=a.prototype,new k)}}();define(["require","exports","./ImmutableArray","./ImmutablePointArray"],function(y,r,a,k){return function(e){function g(h,m,l,f,c){h=e.call(this,h)||this;h._lazyPath=[];h._hasZ=!1;h._hasM=!1;h._hasZ=l;h._hasM=f;h._spRef=m;h._cacheId=c;return h}b(g,e);g.prototype.get=function(h){if(void 0===this._lazyPath[h]){var m=this._elements[h];if(void 0===m)return;this._lazyPath[h]=new k(m,this._spRef,this._hasZ,this._hasM,this._cacheId,h)}return this._lazyPath[h]};g.prototype.equalityTest=
function(h){return h===this?!0:null===h||!1===h instanceof g?!1:h.getUniqueHash()===this.getUniqueHash()};g.prototype.getUniqueHash=function(){return this._cacheId.toString()};return g}(a)})},"esri/arcade/ImmutablePointArray":function(){var b=this&&this.__extends||function(){var y=function(r,a){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var g in e)e.hasOwnProperty(g)&&(k[g]=e[g])};return y(r,a)};return function(r,a){function k(){this.constructor=
r}y(r,a);r.prototype=null===a?Object.create(a):(k.prototype=a.prototype,new k)}}();define(["require","exports","./ImmutableArray","../geometry/Point"],function(y,r,a,k){return function(e){function g(h,m,l,f,c,d){h=e.call(this,h)||this;h._lazyPt=[];h._hasZ=!1;h._hasM=!1;h._spRef=m;h._hasZ=l;h._hasM=f;h._cacheId=c;h._partId=d;return h}b(g,e);g.prototype.get=function(h){if(void 0===this._lazyPt[h]){var m=this._elements[h];if(void 0===m)return;var l=this._hasZ,f=this._hasM,c=null;c=l&&!f?new k(m[0],m[1],
m[2],void 0,this._spRef):f&&!l?new k(m[0],m[1],void 0,m[2],this._spRef):l&&f?new k(m[0],m[1],m[2],m[3],this._spRef):new k(m[0],m[1],this._spRef);c.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+h.toString());this._lazyPt[h]=c}return this._lazyPt[h]};g.prototype.equalityTest=function(h){return h===this?!0:null===h||!1===h instanceof g?!1:h.getUniqueHash()===this.getUniqueHash()};g.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};
return g}(a)})},"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(b,y,r,a){function k(m,l){var f=new r(l);m(function(c){return h(c).then(f.resolve)},f.reject);return f.promise}function e(m){if(m){if("function"!==typeof m.forEach){var l=Object.keys(m),f=l.map(function(d){return m[d]});return e(f).then(function(d){var u={};l.forEach(function(n,t){return u[n]=d[t]});return u})}var c=null;return k(function(d,u){var n=[],t=m.length;
0===t&&d(n);m.forEach(function(x){var A={promise:x};n.push(A);x.then(function(B){A.value=B}).catch(function(B){A.error=B}).then(function(){--t;0===t&&(c?u(Error("AbortError")):d(n))})})},function(d){c=d||"Invocation cancellation";m.forEach(function(u){return u.cancel(d)})})}}function g(m){void 0===m&&(m=void 0);var l=new r;l.resolve(m);return l.promise}function h(m){return m&&"function"===typeof m.then?m:g(m)}Object.defineProperty(y,"__esModule",{value:!0});y.createResolver=y.when=y.isPromiseLike=
y.wrapCallback=y.timeout=y.after=y.resolve=y.reject=y.first=y.eachAlwaysValues=y.eachAlways=y.createDeferred=y.create=y.filter=y.all=void 0;y.all=function(m){return a(m)};y.filter=function(m,l){var f=m.slice();return a(m.map(function(c,d){return l(c,d)})).then(function(c){return f.filter(function(d,u){return c[u]})})};y.create=k;y.createDeferred=function(m){var l=null;m=k(function(f,c){l={resolve:f,reject:c}},m);l.promise=m;l.cancel=function(){l.reject(Error("AbortError"))};return l};y.eachAlways=
e;y.eachAlwaysValues=function(m){return e(m).then(function(l){return l.filter(function(f){return!!f.value}).map(function(f){return f.value})})};y.first=function(m){return m&&m.length?k(function(l,f){for(var c=0;c<m.length;c++)m[c].then(l,f)}):g()};y.reject=function(m){var l=new r;l.reject(m);return l.promise};y.resolve=g;y.after=function(m,l){void 0===l&&(l=void 0);var f=0;return k(function(c){f=setTimeout(function(){c(l)},m)},function(){f&&(clearTimeout(f),f=0)})};y.timeout=function(m,l,f){var c=
0,d=new r(m.cancel);m.then(function(u){d.isFulfilled()||(d.resolve(u),c&&(clearTimeout(c),c=0))});m.catch(function(u){d.isFulfilled()||(d.reject(u),c&&(clearTimeout(c),c=0))});c=setTimeout(function(){d.reject(f||Error("promiseUtils:timeout"))},l);return d.promise};y.wrapCallback=function(m){var l=!1;return k(function(){m(function(f){l||g(f)})},function(){return l=!0})};y.isPromiseLike=function(m){return m&&"function"===typeof m.then};y.when=h;y.createResolver=function(m){var l,f;m=k(function(d,u){l=
d;f=u},m);var c=function(d){l(d)};c.resolve=function(d){return l(d)};c.reject=function(d){return f(d)};c.promise=m;return c}})},"esri/arcade/Attachment":function(){var b=this&&this.__extends||function(){var y=function(r,a){y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,e){k.__proto__=e}||function(k,e){for(var g in e)e.hasOwnProperty(g)&&(k[g]=e[g])};return y(r,a)};return function(r,a){function k(){this.constructor=r}y(r,a);r.prototype=null===a?Object.create(a):(k.prototype=a.prototype,
new k)}}();define(["require","exports","./Dictionary"],function(y,r,a){return function(k){function e(g,h,m,l,f){var c=k.call(this)||this;c.attachmentUrl=f;c.immutable=!1;c.setField("id",g);c.setField("name",h);c.setField("contenttype",m);c.setField("size",l);c.immutable=!0;return c}b(e,k);return e}(a)})},"esri/arcade/Feature":function(){var b=this&&this.__assign||function(){b=Object.assign||function(y){for(var r,a=1,k=arguments.length;a<k;a++){r=arguments[a];for(var e in r)Object.prototype.hasOwnProperty.call(r,
e)&&(y[e]=r[e])}return y};return b.apply(this,arguments)};define("require exports ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "),function(y,r,a,k,e,g,h,m,l){return function(){function f(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._adapter=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}f.createFromGraphic=function(c){var d=
new f;d._geometry=c.geometry?c.geometry:null;d.attributes=void 0===c.attributes?{}:null===c.attributes?{}:c.attributes;c._sourceLayer?(d._layer=c._sourceLayer,d._datesfixed=!1):c._layer?(d._layer=c._layer,d._datesfixed=!1):c.layer?(d._layer=c.layer,d._datesfixed=!1):c.sourceLayer&&(d._layer=c.sourceLayer,d._datesfixed=!1);return d};f.createFromArcadeFeature=function(c){var d=new f;d._datesfixed=c._datesfixed;d.attributes=c.attributes;d._geometry=c._geometry;c._layer&&(d._layer=c._layer);return d};
f.createFromArcadeDictionary=function(c){var d=new f;d.attributes=c.field("attributes");null!==d.attributes?d.attributes instanceof a?(d.attributes=d.attributes.attributes,null===d.attributes&&(d.attributes={})):d.attributes={}:d.attributes={};d._geometry=c.field("geometry");null!==d._geometry&&(d._geometry instanceof a?d._geometry=f.parseGeometryFromDictionary(d._geometry):d._geometry instanceof g||(d._geometry=null));return d};f.createFromGraphicLikeObject=function(c,d,u){void 0===u&&(u=null);var n=
new f;null===d&&(d={});n.attributes=d;n._geometry=c?c:null;n._layer=u;n._layer&&(n._datesfixed=!1);n._adapter=null;return n};f.prototype.repurposeFromGraphicLikeObject=function(c,d,u){void 0===u&&(u=null);null===d&&(d={});this.attributes=d;this._geometry=c?c:null;this._datesfixed=(this._layer=u)?!1:!0};f.prototype.castToText=function(){if(this._adapter)return this._adapter.castToText();var c="";!1===this._datesfixed&&this._fixDates();for(var d in this.attributes){""!==c&&(c+=",");var u=this.attributes[d];
null==u?c+=JSON.stringify(d)+":null":e.isBoolean(u)||e.isNumber(u)||e.isString(u)?c+=JSON.stringify(d)+":"+JSON.stringify(u):u instanceof g?c+=JSON.stringify(d)+":"+e.toStringExplicit(u):u instanceof k?c+=JSON.stringify(d)+":"+e.toStringExplicit(u):u instanceof Array?c+=JSON.stringify(d)+":"+e.toStringExplicit(u):u instanceof Date?c+=JSON.stringify(d)+":"+JSON.stringify(u):null!==u&&"object"===typeof u&&void 0!==u.castToText&&(c+=JSON.stringify(d)+":"+u.castToText())}return'{"geometry":'+(null===
this.geometry()?"null":e.toStringExplicit(this.geometry()))+',"attributes":{'+c+"}}"};f.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var c=[],d=0;d<this._layer.fields.length;d++){var u=this._layer.fields[d];"date"!==u.type&&"esriFieldTypeDate"!==u.type||c.push(u.name)}this._datefields=c;0<c.length&&this._fixDateFields(c)}this._datesfixed=!0};f.prototype._fixDateFields=function(c){this.attributes=b({},this.attributes);
for(var d=0;d<c.length;d++){var u=this.attributes[c[d]];if(null!==u)if(void 0===u)for(var n in this.attributes){if(n.toLowerCase()===c[d].toLowerCase()){u=this.attributes[n];null===u||u instanceof Date||(this.attributes[n]=new Date(u));break}}else u instanceof Date||(this.attributes[c[d]]=new Date(u))}};f.prototype.geometry=function(){if(this._adapter)return this._adapter.geometry();if(null===this._geometry)return this._geometry;this._geometry instanceof g||(this._geometry=m.fromJson(this._geometry));
return this._geometry};f.prototype.field=function(c){if(this._adapter)return this._adapter.field(c);!1===this._datesfixed&&this._fixDates();var d=this.attributes[c];if(void 0!==d)return d;d=c.toLowerCase();for(var u in this.attributes)if(u.toLowerCase()===d)return this.attributes[u];if(this._hasFieldDefinition(d))return null;throw Error("Field not Found : "+c);};f.prototype._hasFieldDefinition=function(c){if(null===this._layer)return!1;for(var d=0;d<this._layer.fields.length;d++)if(this._layer.fields[d].name.toLowerCase()===
c)return!0;return!1};f.prototype._field=function(c){var d;if(this._adapter)return null!==(d=this._adapter.field(c))&&void 0!==d?d:null;!1===this._datesfixed&&this._fixDates();d=c.toLowerCase();c=this.attributes[c];if(void 0!==c)return c;for(var u in this.attributes)if(u.toLowerCase()===d)return this.attributes[u];return null};f.prototype.setField=function(c,d){if(this.immutable)throw Error("Feature is Immutable");if(!1===e.isSimpleType(d))throw Error("Illegal Value Assignment to Feature");if(this._adapter)this._adapter.setField(c,
d);else{var u=c.toLowerCase();if(void 0===this.attributes[c])for(var n in this.attributes)if(n.toLowerCase()===u){this.attributes[n]=d;return}this.attributes[c]=d}};f.prototype.hasField=function(c){if(this._adapter)return this._adapter.hasField(c);var d=c.toLowerCase();if(void 0!==this.attributes[c])return!0;for(var u in this.attributes)if(u.toLowerCase()===d)return!0;return this._hasFieldDefinition(d)?!0:!1};f.prototype.keys=function(){if(this._adapter)return this._adapter.keys();var c=[],d={},u;
for(u in this.attributes)c.push(u),d[u.toLowerCase()]=1;if(null!==this._layer)for(u=0;u<this._layer.fields.length;u++){var n=this._layer.fields[u];1!==d[n.name.toLowerCase()]&&c.push(n.name)}return c=c.sort()};f.parseGeometryFromDictionary=function(c){c=f.convertDictionaryToJson(c,!0);void 0!==c.hasm&&(c.hasM=c.hasm,delete c.hasm);void 0!==c.hasz&&(c.hasZ=c.hasz,delete c.hasz);void 0!==c.spatialreference&&(c.spatialReference=c.spatialreference,delete c.spatialreference);void 0!==c.rings&&(c.rings=
this.fixPathArrays(c.rings,!0===c.hasZ,!0===c.hasZ));void 0!==c.paths&&(c.paths=this.fixPathArrays(c.paths,!0===c.hasZ,!0===c.hasM));void 0!==c.points&&(c.points=this.fixPointArrays(c.points,!0===c.hasZ,!0===c.hasM));return m.fromJson(c)};f.fixPathArrays=function(c,d,u){var n=[];if(c instanceof Array)for(var t=0;t<c.length;t++)n.push(this.fixPointArrays(c[t],d,u));else if(c instanceof k)for(t=0;t<c.length();t++)n.push(this.fixPointArrays(c.get(t),d,u));return n};f.fixPointArrays=function(c,d,u){var n=
[];if(c instanceof Array)for(var t=0;t<c.length;t++){var x=c[t];x instanceof h?d&&u?n.push([x.x,x.y,x.z,x.m]):d?n.push([x.x,x.y,x.z]):u?n.push([x.x,x.y,x.m]):n.push([x.x,x.y]):x instanceof k?n.push(x.toArray()):n.push(x)}else if(c instanceof k)for(t=0;t<c.length();t++)x=c.get(t),x instanceof h?d&&u?n.push([x.x,x.y,x.z,x.m]):d?n.push([x.x,x.y,x.z]):u?n.push([x.x,x.y,x.m]):n.push([x.x,x.y]):x instanceof k?n.push(x.toArray()):n.push(x);return n};f.convertDictionaryToJson=function(c,d){void 0===d&&(d=
!1);var u={},n;for(n in c.attributes){var t=c.attributes[n];t instanceof a&&(t=f.convertDictionaryToJson(t));d?u[n.toLowerCase()]=t:u[n]=t}return u};f.parseAttributesFromDictionary=function(c){var d={},u;for(u in c.attributes){var n=c.attributes[u];if(e.isSimpleType(n))d[u]=n;else throw Error("Illegal Argument");}return d};f.fromJson=function(c){var d=null;null!==c.geometry&&void 0!==c.geometry&&(d=m.fromJson(c.geometry));var u={};if(null!==c.attributes&&void 0!==c.attributes)for(var n in c.attributes){var t=
c.attributes[n];if(null===t)u[n]=t;else if(e.isString(t)||e.isNumber(t)||e.isBoolean(t)||e.isDate(t))u[n]=t;else throw Error("Illegal Argument");}return f.createFromGraphicLikeObject(d,u,null)};f.prototype.fullDomain=function(c,d){return null!==this._layer&&this._layer.fields?e.getDomain(c,this._layer,this,d):null};f.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(function(c){return{name:c.name,
code:c.id}}):[]}:null:null};f.prototype.domainValueLookup=function(c,d,u){if(null===this._layer||!this._layer.fields)return null;u=e.getDomain(c,this._layer,this,u);if(void 0===d)try{d=this.field(c)}catch(n){return null}return e.getDomainValue(u,d)};f.prototype.gdbVersion=function(){if(null===this._layer)return"";var c=this._layer.gdbVersion;return void 0===c?"":""===c&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":c};f.prototype.domainCodeLookup=function(c,d,u){if(null===
this._layer||!this._layer.fields)return null;if(void 0===d){try{d=this.field(c)}catch(n){return null}return d}c=e.getDomain(c,this._layer,this,u);return e.getDomainCode(c,d)};f.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;for(var c=[],d=0,u=this._layer.fields;d<u.length;d++)c.push(l.esriFieldToJson(u[d]));return{objectIdField:this._layer.objectIdField,globalIdField:this._layer.globalIdField,geometryType:void 0===l.layerGeometryEsriRestConstants[this._layer.geometryType]?
"":l.layerGeometryEsriRestConstants[this._layer.geometryType],fields:c}};return f}()})},"esri/arcade/featureset/support/shared":function(){var b=this&&this.__assign||function(){b=Object.assign||function(y){for(var r,a=1,k=arguments.length;a<k;a++){r=arguments[a];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(y[e]=r[e])}return y};return b.apply(this,arguments)};define(["require","exports","../../polyfill/promiseUtils","../../../geometry/Extent","../../../layers/Field"],function(y,r,a,k,
e){function g(m){var l=null;m.domain&&(l="range"===m.domain.type?{type:"range",range:[m.domain.minValue,m.domain.maxValue]}:{type:"codedValue",codedValues:m.domain.toJson().codedValues});return b(b({name:m.name,type:m.type,alias:m.alias},void 0!==m.length?{length:m.length}:{}),{editable:!0===m.editable,nullable:!0===m.nullable,domain:l})}function h(m){return m instanceof Date}Object.defineProperty(r,"__esModule",{value:!0});r.stableStringify=r.extractServiceUrl=r.reduceArrayWithPromises=r.toEsriGeometryType=
r.layerFieldEsriConstants=r.layerGeometryEsriRestConstants=r.layerGeometryEsriConstants=r.callback=r.errback=r.defaultMaxRecords=r.sameGeomType=r.convertLinearUnitsToCode=r.shapeExtent=r.convertSquareUnitsToCode=r.cloneAttributes=r.equalityTest=r.isDate=r.isArray=r.isNumber=r.isBoolean=r.isString=r.IdState=r.esriFieldToJson=r.cloneField=r.FeatureServiceDatabaseType=void 0;(function(m){m[m.Standardised=0]="Standardised";m[m.StandardisedNoInterval=1]="StandardisedNoInterval";m[m.SqlServer=2]="SqlServer";
m[m.Oracle=3]="Oracle";m[m.Postgres=4]="Postgres";m[m.PGDB=5]="PGDB";m[m.FILEGDB=6]="FILEGDB";m[m.NotEvaluated=7]="NotEvaluated"})(r.FeatureServiceDatabaseType||(r.FeatureServiceDatabaseType={}));r.cloneField=function(m){return new e(g(m))};r.esriFieldToJson=g;(function(m){m[m.InFeatureSet=0]="InFeatureSet";m[m.NotInFeatureSet=1]="NotInFeatureSet";m[m.Unknown=2]="Unknown"})(r.IdState||(r.IdState={}));r.isString=function(m){return"string"===typeof m||m instanceof String};r.isBoolean=function(m){return"boolean"===
typeof m};r.isNumber=function(m){return"number"===typeof m};r.isArray=function(m){return m instanceof Array};r.isDate=h;r.equalityTest=function(m,l){return m===l?!0:h(m)&&h(l)?m.getTime()===l.getTime():!1};r.cloneAttributes=function(m){var l={},f;for(f in m)l[f]=m[f];return l};r.convertSquareUnitsToCode=function(m){if(void 0===m)return null;if("number"===typeof m)return m;switch(m.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};
r.shapeExtent=function(m){if(null===m)return null;switch(m.type){case "polygon":case "multipoint":case "polyline":return m.getExtent();case "point":return new k({xmin:m.x,ymin:m.y,xmax:m.x,ymax:m.y,spatialReference:m.spatialReference});case "extent":return m}return null};r.convertLinearUnitsToCode=function(m){if(void 0===m)return null;if("number"===typeof m||"number"===typeof m)return m;switch(m.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};
r.sameGeomType=function(m,l){return m===l||"point"===m&&"esriGeometryPoint"===l||"polyline"===m&&"esriGeometryPolyline"===l||"polygon"===m&&"esriGeometryPolygon"===l||"extent"===m&&"esriGeometryEnvelope"===l||"multipoint"===m&&"esriGeometryMultipoint"===l||"point"===l&&"esriGeometryPoint"===m||"polyline"===l&&"esriGeometryPolyline"===m||"polygon"===l&&"esriGeometryPolygon"===m||"extent"===l&&"esriGeometryEnvelope"===m||"multipoint"===l&&"esriGeometryMultipoint"===m?!0:!1};r.defaultMaxRecords=1E3;
r.errback=function(m){return function(l){m.reject(l)}};r.callback=function(m,l){return function(){try{m.apply(null,arguments)}catch(f){l.reject(f)}}};r.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};r.layerGeometryEsriRestConstants={point:"esriGeometryPoint",
polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};r.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",
single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",
esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};r.toEsriGeometryType=function(m){switch(m){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";
case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};r.reduceArrayWithPromises=function(m,l){return a.create(function(f,c){var d=a.resolve(!0);m.reduce(function(u,n,t,x){return u.then(function(A){try{return l(A,n,t,x)}catch(B){return a.reject(B)}},function(A){return a.reject(A)})},d).then(f,c)})};r.extractServiceUrl=function(m){if(void 0===m)return"";m=m.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");m=m.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return m=m.split("?")[0]};
r.stableStringify=function(m,l){l||(l={});"function"===typeof l&&(l={cmp:l});var f="boolean"===typeof l.cycles?l.cycles:!1,c=l.cmp&&function(u){return function(n){return function(t,x){return u({key:t,value:n[t]},{key:x,value:n[x]})}}}(l.cmp),d=[];return function t(n){n&&n.toJson&&"function"===typeof n.toJson&&(n=n.toJson());if(void 0!==n){if("number"===typeof n)return isFinite(n)?""+n:"null";if("object"!==typeof n)return JSON.stringify(n);var x;if(Array.isArray(n)){var A="[";for(x=0;x<n.length;x++)x&&
(A+=","),A+=t(n[x])||"null";return A+"]"}if(null===n)return"null";if(-1!==d.indexOf(n)){if(f)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var B=d.push(n)-1,F=Object.keys(n).sort(c&&c(n));A="";for(x=0;x<F.length;x++){var w=F[x],D=t(n[w]);D&&(A&&(A+=","),A+=JSON.stringify(w)+":"+D)}d.splice(B,1);return"{"+A+"}"}}(m)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),
function(b,y,r,a,k,e,g){b=b(null,{declaredClass:"esri.layers.Field",constructor:function(h){if(h&&y.isObject(h)&&(this.name=h.name,this.type=h.type,this.alias=h.alias,this.length=h.length,this.editable=h.editable,this.nullable=h.nullable,this.defaultValue=h.defaultValue,this.description=h.description?JSON.parse(h.description):null,this.isViewOverride=!!h.isViewOverride,(h=h.domain)&&y.isObject(h)))switch(h.type){case "range":this.domain=new e(h);break;case "codedValue":this.domain=new g(h)}},toJson:function(){return k.fixJson({name:this.name,
type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});y.setObject("layers.Field",b,a);return b})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(b,
y,r,a,k,e){b=b([e],{declaredClass:"esri.layers.RangeDomain",constructor:function(g){g&&y.isObject(g)&&(this.minValue=g.range[0],this.maxValue=g.range[1])},toJson:function(){var g=this.inherited(arguments);g.range=[this.minValue,this.maxValue];return k.fixJson(g)}});y.setObject("layers.RangeDomain",b,a);return b})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(b,y,r,a,k){b=b(null,{declaredClass:"esri.layers.Domain",constructor:function(e){e&&
y.isObject(e)&&(this.name=e.name,this.type=e.type)},toJson:function(){return k.fixJson({name:this.name,type:this.type})}});y.setObject("layers.Domain",b,a);return b})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(b,y,r,a,k,e,g){b=b([g],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(h){h&&y.isObject(h)&&(this.codedValues=h.codedValues)},getName:function(h){var m;r.some(this.codedValues,
function(l){l.code==h&&(m=l.name);return!!m});return m},toJson:function(){var h=this.inherited(arguments);h.codedValues=y.clone(this.codedValues);return e.fixJson(h)}});y.setObject("layers.CodedValueDomain",b,k);return b})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(b,y){function r(w,D){return"0"!==w.min&&D.length<Number(w.min)||"*"!==w.max&&D.length>Number(w.max)?-2:1}function a(w,D,q){if(null!==q.localScope&&void 0!==q.localScope[w.toLowerCase()]){var v=q.localScope[w.toLowerCase()];
if("FormulaFunction"===v.type||"any"===v.type)return void 0===v.signature&&(v.signature={min:"0",max:"*"}),r(v.signature,D)}return void 0!==q.globalScope[w.toLowerCase()]&&(v=q.globalScope[w.toLowerCase()],"FormulaFunction"===v.type||"any"===v.type)?(void 0===v.signature&&(v.signature={min:"0",max:"*"}),r(v.signature,D)):-1}function k(w,D){if(w)for(var q=0;q<w.length;q++)e(w[q],D)}function e(w,D){if(w&&!1!==D(w))switch(w.type){case "ArrayExpression":k(w.elements,D);break;case "AssignmentExpression":case "BinaryExpression":e(w.left,
D);e(w.right,D);break;case "BlockStatement":k(w.body,D);break;case "CallExpression":e(w.callee,D);k(w.arguments,D);break;case "ConditionalExpression":e(w.test,D);e(w.alternate,D);e(w.consequent,D);break;case "ExpressionStatement":e(w.expression,D);break;case "ForInStatement":e(w.left,D);e(w.right,D);e(w.body,D);break;case "ForStatement":e(w.init,D);e(w.test,D);e(w.update,D);e(w.body,D);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":e(w.id,D);k(w.params,D);e(w.body,
D);break;case "IfStatement":e(w.test,D);e(w.consequent,D);e(w.alternate,D);break;case "LogicalExpression":e(w.left,D);e(w.right,D);break;case "MemberExpression":e(w.object,D);e(w.property,D);break;case "ObjectExpression":k(w.properties,D);break;case "Program":k(w.body,D);break;case "Property":e(w.key,D);e(w.value,D);break;case "ReturnStatement":e(w.argument,D);break;case "UnaryExpression":e(w.argument,D);break;case "UpdateExpression":e(w.argument,D);break;case "VariableDeclaration":k(w.declarations,
D);break;case "VariableDeclarator":e(w.id,D);e(w.init,D);break;case "TemplateLiteral":k(w.expressions,D),k(w.quasis,D)}}function g(w,D){void 0===D&&(D=!0);var q=d(w,"SYNTAX","UNREOGNISED");try{switch(w.type){case "VariableDeclarator":return null!==w.init&&"FunctionExpression"===w.init.type?d(w,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==w.id.type?d(w,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==w.init?g(w.init,!1):"";case "VariableDeclaration":for(var v=0;v<w.declarations.length;v++)if(q=
g(w.declarations[v],D),""!==q)return q;return"";case "ForInStatement":q=g(w.left,D);if(""!==q)break;if("VariableDeclaration"===w.left.type){if(1<w.left.declarations.length)return d(w,"SYNTAX","ONLY1VAR");if(null!==w.left.declarations[0].init)return d(w,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==w.left.type)return d(w,"SYNTAX","LEFTNOTVAR");q=g(w.right,D);if(""!==q)break;q=g(w.body,D);if(""!==q)break;return"";case "ForStatement":if(null!==w.test&&(q=g(w.test,D),""!==q))break;if(null!==w.init&&
(q=g(w.init,D),""!==q))break;if(null!==w.update&&(q=g(w.update,D),""!==q))break;if(null!==w.body&&(q=g(w.body,D),""!==q))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":q=g(w.test,D);if(""!==q)break;if(null!==w.consequent&&(q=g(w.consequent,!1),""!==q))break;if(null!==w.alternate&&(q=g(w.alternate,!1),""!==q))break;return"";case "BlockStatement":var z=[];for(v=0;v<w.body.length;v++)"EmptyStatement"!==w.body[v].type&&
z.push(w.body[v]);w.body=z;for(v=0;v<w.body.length;v++)if(q=g(w.body[v],D),""!==q)return q;return"";case "FunctionDeclaration":return!1===D?d(w,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==w.id.type?d(w,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):g(w.body,!1);case "ReturnStatement":return null!==w.argument?g(w.argument,D):"";case "UpdateExpression":return"Identifier"!==w.argument.type&&"MemberExpression"!==w.argument.type?d(w,"SYNTAX","ASSIGNMENTTOVARSONLY"):g(w.argument,D);case "AssignmentExpression":if("Identifier"!==
w.left.type&&"MemberExpression"!==w.left.type)return d(w,"SYNTAX","ASSIGNMENTTOVARSONLY");q=g(w.left,D);if(""!==q)break;switch(w.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return d(w,"SYNTAX","OPERATORNOTRECOGNISED")}return g(w.right,!1);case "ExpressionStatement":return g(w.expression,!1);case "Identifier":q="";break;case "MemberExpression":q=g(w.object,D);if(""!==q)break;return!0===w.computed?g(w.property,D):"";case "Literal":return"";case "TemplateElement":return"";
case "CallExpression":if("Identifier"!==w.callee.type)return d(w,"SYNTAX","ONLYNODESSUPPORTED");q="";for(v=0;v<w.arguments.length;v++)if(q=g(w.arguments[v],D),""!==q)return q;return"";case "UnaryExpression":q=g(w.argument,D);break;case "BinaryExpression":q=g(w.left,D);if(""!==q)break;q=g(w.right,D);if(""!==q)break;switch(w.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return d(w,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":q=g(w.left,D);if(""!==q)break;q=g(w.right);if(""!==q)break;switch(w.operator){case "\x26\x26":case "||":break;default:return d(w,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return d(w,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":q="";for(v=0;v<w.elements.length&&(q=g(w.elements[v],D),""===q);v++);break;case "TemplateLiteral":q="";for(v=0;v<w.quasis.length;v++)if(q=g(w.quasis[v],D),
""!==q)return q;for(v=0;v<w.expressions.length&&(q=g(w.expressions[v],D),""===q);v++);break;case "ObjectExpression":q="";for(v=0;v<w.properties.length;v++){q="";if(null!==w.properties[v].key&&("Literal"!==w.properties[v].key.type&&"Identifier"!==w.properties[v].key.type&&(q=d(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===w.properties[v].key.type)){z=w.properties[v].key;var C="value"in z?z.value:null;"string"===typeof C||C instanceof String||(q=d(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===
q&&(q=g(w.properties[v],D));if(""!==q)break}break;case "Property":if("Literal"!==w.key.type&&"Identifier"!==w.key.type)return d(w,"SYNTAX","ONLYLITERAL");if("Identifier"!==w.key.type&&(q=g(w.key,D),""!==q))break;q=g(w.value,D)}return q}catch(E){throw E;}}function h(w,D){var q=d(w,"SYNTAX","UNREOGNISED"),v=null,z="";try{switch(w.type){case "VariableDeclarator":if(null!==w.init&&"FunctionExpression"===w.init.type)return d(w,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var C=null===w.init?"":h(w.init,D);if(""!==
C)return C;"Identifier"===w.id.type&&(null===D.localScope?D.globalScope[w.id.name.toLowerCase()]={type:"any"}:D.localScope[w.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":v=l(w.id.name.toLowerCase(),w);z=f(w,D);if(""!==z)return z;if(null!==D.localScope)return d(w,"SYNTAX","GLOBALFUNCTIONSONLY");v.isnative=!1;D.globalScope[w.id.name.toLowerCase()]={type:"FormulaFunction",signature:[v]};return"";case "VariableDeclaration":q="";for(var E=0;E<w.declarations.length&&(q=h(w.declarations[E],
D),""===q);E++);break;case "IfStatement":q=h(w.test,D);if(""!==q)break;if("AssignmentExpression"===w.test.type||"UpdateExpression"===w.test.type)return d(w.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==w.consequent&&(q=h(w.consequent,D),""!==q))break;if(null!==w.alternate&&(q=h(w.alternate,D),""!==q))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(E=0;E<w.body.length;E++)if(q=h(w.body[E],D),""!==q)return q;return"";case "ReturnStatement":return null!==w.argument?
h(w.argument,D):"";case "ForInStatement":if("VariableDeclaration"===w.left.type){if(1<w.left.declarations.length)return d(w,"SYNTAX","ONLY1VAR");if(null!==w.left.declarations[0].init)return d(w,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==w.left.type)return d(w,"SYNTAX","LEFTNOTVAR");q=h(w.left,D);if(""!==q)break;q=h(w.right,D);if(""!==q)break;q=h(w.body,D);if(""!==q)break;return"";case "ForStatement":if(null!==w.init&&(q=h(w.init,D),""!==q))break;if(null!==w.test&&(q=h(w.test,D),""!==q))break;
if(null!==w.body&&(q=h(w.body,D),""!==q))break;if(null!==w.update&&(q=h(w.update,D),""!==q))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==w.argument.type&&"MemberExpression"!==w.argument.type)return d(w,"SYNTAX","ASSIGNMENTTOVARSONLY");var G=!1;if("MemberExpression"===w.argument.type)return h(w.argument,D);null!==D.localScope&&void 0!==D.localScope[w.argument.name.toLowerCase()]&&(G=!0);void 0!==D.globalScope[w.argument.name.toLowerCase()]&&
(G=!0);return!1===G?"Identifier "+w.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==w.left.type&&"MemberExpression"!==w.left.type)return d(w,"SYNTAX","ASSIGNMENTTOVARSONLY");var H=h(w.right,D);if(""!==H)return H;G=!1;if("MemberExpression"===w.left.type)return H=h(w.left,D),""!==H?H:"";null!==D.localScope&&void 0!==D.localScope[w.left.name.toLowerCase()]&&(G=!0);void 0!==D.globalScope[w.left.name.toLowerCase()]&&(G=!0);return!1===G?"Identifier "+w.left.name+
" has not been declared.":"";case "ExpressionStatement":return h(w.expression,D);case "Identifier":var K=w.name.toLowerCase();if(null!==D.localScope&&void 0!==D.localScope[K])return"";q=void 0!==D.globalScope[K]?"":d(w,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":q=h(w.object,D);if(""!==q)break;return!0===w.computed?h(w.property,D):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==w.callee.type)return d(w,"SYNTAX","ONLYNODESSUPPORTED");
q="";for(E=0;E<w.arguments.length;E++)if(q=h(w.arguments[E],D),""!==q)return q;var I=a(w.callee.name,w.arguments,D);-1===I&&(q=d(w,"SYNTAX","NOTFOUND"));-2===I&&(q=d(w,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":q=h(w.argument,D);break;case "BinaryExpression":q=h(w.left,D);if(""!==q)break;q=h(w.right,D);if(""!==q)break;return"";case "LogicalExpression":q=h(w.left,D);if(""!==q)break;if("AssignmentExpression"===w.left.type||"UpdateExpression"===w.left.type)return d(w.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
q=h(w.right,D);if(""!==q)break;return"AssignmentExpression"===w.right.type||"UpdateExpression"===w.right.type?d(w.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return d(w,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":q="";for(E=0;E<w.elements.length&&(q=h(w.elements[E],D),""===q);E++);break;case "TemplateLiteral":q="";for(E=0;E<w.quasis.length;E++)if(q=h(w.quasis[E],D),""!==q)return q;for(E=0;E<w.expressions.length&&(q=h(w.expressions[E],D),""===q);E++);break;
case "ObjectExpression":q="";for(E=0;E<w.properties.length;E++){q="";if(null!==w.properties[E].key&&("Literal"!==w.properties[E].key.type&&"Identifier"!==w.properties[E].key.type&&(q=d(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===w.properties[E].key.type)){var J=w.properties[E].key,Q="value"in J?J.value:null;"string"===typeof Q||Q instanceof String||(q=d(w,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===q&&(q=h(w.properties[E],D));if(""!==q)break}break;case "Property":if("Literal"!==w.key.type&&
"Identifier"!==w.key.type)return d(w,"SYNTAX","ONLYLITERAL");if("Identifier"!==w.key.type&&(q=h(w.key,D),""!==q))break;q=h(w.value,D)}return q}catch(V){throw V;}}function m(w,D){var q=!1,v=D.toLowerCase();e(w,function(z){if(q)return!1;"Identifier"===z.type&&z.name&&z.name.toLowerCase()===v&&(q=!0);return!0});return q}function l(w,D){var q=[];if(void 0!==D.params&&null!==D.params)for(var v=0;v<D.params.length;v++)q.push("any");return{name:w,return:"any",params:q}}function f(w,D){D={globalScope:D.globalScope,
localScope:{}};for(var q=0;q<w.params.length;q++)D.localScope[w.params[q].name.toLowerCase()]={type:"any"};return h(w.body,D)}function c(w,D,q,v){var z={};if(void 0===w||null===w)w={};if(void 0===q||null===q)q={};z.infinity={type:"any"};z.textformatting={type:"any"};z.pi={type:"any"};for(var C in D)"sync"===v&&void 0!==D[C].min?z[C]={type:"FormulaFunction",signature:{min:D[C].min,max:D[C].max}}:"sync"!==v&&void 0!==D[C].fmin&&(z[C]={type:"FormulaFunction",signature:{min:D[C].fmin,max:D[C].fmax}});
for(D=0;D<q.length;D++)C=q[D],z[C.name]={type:"FormulaFunction",signature:C};for(C in w)z[C]=w[C],z[C].type="any";return z}function d(w,D,q){var v="";switch(D){case "SYNTAX":v="Syntax Error: ";break;case "RUNTIME":v="Runtime Error: ";break;default:v="Syntax Error: "}try{switch(w.type){case "IfStatement":switch(q){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":v+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":v+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(q){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":v+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":v+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":v+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(q){case "GLOBALFUNCTIONSONLY":v+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":v+=" Function Definition must have an identifier"}break;case "VariableDeclaration":v+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(q){case "FUNCTIONVARIABLEDECLARATOR":v+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":v+=" Variable Definition must have an identifier"}break;case "Identifier":v+=" Identifier Not Found. ";v+=w.name;break;case "ObjectExpression":switch(q){case "OBJECTPROPERTYMUSTBESTRING":v+=" Property name must be a string"}break;case "ForStatement":switch(q){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":v+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(q){case "ONLY1VAR":v+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":v+=" Can only declare value for use with IN";break;case "LEFTNOVAR":v+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":v+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":v+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(q){case "PROPERTYNOTFOUND":v+="Cannot find member property. ";v+=
!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "OUTOFBOUNDS":v+="Out of Bounds. ";v+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "NOTFOUND":v+="Cannot call member method on null. ";v+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":"";break;case "INVALIDTYPE":v+="Cannot call member property on object of this type. ",v+=!1===w.computed?"Identifier"===w.property.type?w.property.name:"":""}break;case "Property":switch(q){case "ONLYLITERAL":v+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(q){case "WRONGSIGNATURE":v+="Function signature does not match: ";v+="Identifier"===w.callee.type?w.callee.name:"";break;case "ONLYNODESUPPORTED":v+="Functions must be declared.";v+="Identifier"===w.callee.type?w.callee.name:"";break;case "NOTAFUNCTION":v+="Not a Function: ";v+="Identifier"===w.callee.type?w.callee.name:"";break;case "NOTFOUND":v+="Function Not Found: "+("Identifier"===w.callee.type?
w.callee.name:"")}break;case "UnaryExpression":switch(q){case "NOTSUPPORTEDUNARYOPERATOR":v+="Operator "+w.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":v+="Unary operator "+w.operator+" cannot be used with this argument."}case "BinaryExpression":switch(q){case "OPERATORNOTRECOGNISED":v+="Binary Operator not recognised "+w.operator}break;case "LogicalExpression":switch(q){case "ONLYBOOLEAN":v+="Operator "+w.operator+" cannot be used. Only || or \x26\x26 are allowed values";
break;case "ONLYORORAND":v+="Logical Expression "+w.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":v+="Conditional statements not supported.";break;case "ArrayExpression":switch(q){case "FUNCTIONCONTEXTILLEGAL":v+=" Cannot Put Function inside Array."}break;default:v+="Expression contains unrecognised code structures."}}catch(z){throw z;}return v}function u(w,D,q){return{line:w.loc.start.line,character:w.loc.start.column,reason:d(w,D,q)}}function n(w,
D,q,v){D={globalScope:D.globalScope,localScope:{}};for(var z=0;z<w.params.length;z++)D.localScope[w.params[z].name.toLowerCase()]={type:"any"};t(w.body,D,q,v,!1)}function t(w,D,q,v,z){void 0===z&&(z=!0);if(null===w)throw Error("Unnexpexted Expression Syntax");var C=null;try{switch(w.type){case "VariableDeclarator":if(null!==w.init&&"FunctionExpression"===w.init.type){v.push(u(w,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==w.id.type?v.push(u(w,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):
(w.id.name.toLowerCase(),null===D.localScope?D.globalScope[w.id.name.toLowerCase()]={type:"any"}:D.localScope[w.id.name.toLowerCase()]={type:"any"});null!==w.init&&t(w.init,D,q,v,z);break;case "FunctionDeclaration":!1===z&&v.push(u(w,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==w.id.type&&v.push(u(w,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));C=l("",w);n(w,D,q,v);null!==D.localScope&&v.push(u(w,"SYNTAX","GLOBALFUNCTIONSONLY"));C.isnative=!1;"Identifier"===w.id.type&&(D.globalScope[w.id.name.toLowerCase()]=
{type:"FormulaFunction",signature:[C]});break;case "VariableDeclaration":for(var E=0;E<w.declarations.length;E++)t(w.declarations[E],D,q,v,z);break;case "IfStatement":null!==w.test&&(t(w.test,D,q,v,z),"AssignmentExpression"!==w.test.type&&"UpdateExpression"!==w.test.type||v.push(u(w.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==w.consequent&&t(w.consequent,D,q,v,z);null!==w.alternate&&t(w.alternate,D,q,v,z);break;case "EmptyStatement":break;case "BlockStatement":if(null!==w.body)for(E=
0;E<w.body.length;E++)t(w.body[E],D,q,v,z);break;case "ReturnStatement":null!==w.argument&&t(w.argument,D,q,v,z);break;case "ForInStatement":"VariableDeclaration"===w.left.type?(1<w.left.declarations.length&&v.push(u(w,"SYNTAX","ONLY1VAR")),null!==w.left.declarations[0].init&&v.push(u(w,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==w.left.type&&v.push(u(w,"SYNTAX","LEFTNOTVAR"));t(w.left,D,q,v,z);t(w.right,D,q,v,z);t(w.body,D,q,v,z);break;case "ForStatement":null!==w.init&&t(w.init,D,q,v,z);null!==
w.test&&t(w.test,D,q,v,z);null!==w.body&&t(w.body,D,q,v,z);null!==w.update&&t(w.update,D,q,v,z);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==w.argument.type&&"MemberExpression"!==w.argument.type)v.push(u(w,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===w.argument.type){var G=!1;!1===q&&(null!==D.localScope&&void 0!==D.localScope[w.argument.name.toLowerCase()]&&(G=!0),void 0!==D.globalScope[w.argument.name.toLowerCase()]&&(G=!0),
!1===G&&v.push({line:null===w?0:w.loc.start.line,character:null===w?0:w.loc.start.column,reason:"Identifier "+w.argument.name+" has not been declared."}))}"MemberExpression"===w.argument.type&&t(w.argument,D,q,v,z)}break;case "AssignmentExpression":"Identifier"!==w.left.type&&"MemberExpression"!==w.left.type&&v.push(u(w,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(w.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:v.push(u(w,"SYNTAX","OPERATORNOTRECOGNISED"))}t(w.right,
D,q,v,z);G=!1;"Identifier"===w.left.type&&(null!==D.localScope&&void 0!==D.localScope[w.left.name.toLowerCase()]&&(G=!0),void 0!==D.globalScope[w.left.name.toLowerCase()]&&(G=!0),!1===q&&!1===G&&v.push({line:null===w?0:w.loc.start.line,character:null===w?0:w.loc.start.column,reason:"Identifier "+w.left.name+" has not been declared."}));"MemberExpression"===w.left.type&&t(w.left,D,q,v,z);break;case "ExpressionStatement":t(w.expression,D,q,v,z);break;case "Identifier":var H=w.name.toLowerCase();if(null!==
D.localScope&&void 0!==D.localScope[H]||void 0!==D.globalScope[H])break;!1===q&&v.push(u(w,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":t(w.object,D,q,v,z);!0===w.computed&&t(w.property,D,q,v,z);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==w.callee.type&&v.push(u(w,"SYNTAX","ONLYNODESSUPPORTED"));for(E=0;E<w.arguments.length;E++)t(w.arguments[E],D,q,v,z);if("Identifier"===w.callee.type){var K=a(w.callee.name,w.arguments,D);!1===q&&-1===
K&&v.push(u(w,"SYNTAX","NOTFOUND"));-2===K&&v.push(u(w,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":t(w.argument,D,q,v,z);break;case "BinaryExpression":t(w.left,D,q,v,z);t(w.right,D,q,v,z);switch(w.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:v.push(u(w,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(w.operator){case "\x26\x26":case "||":break;
default:v.push(u(w,"SYNTAX","OPERATORNOTRECOGNISED"))}t(w.left,D,q,v,z);"AssignmentExpression"!==w.left.type&&"UpdateExpression"!==w.left.type||v.push(u(w,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));t(w.right,D,q,v,z);"AssignmentExpression"!==w.right.type&&"UpdateExpression"!==w.right.type||v.push(u(w,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":v.push(u(w,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(E=0;E<w.elements.length;E++)t(w.elements[E],
D,q,v,z);break;case "TemplateLiteral":for(E=0;E<w.quasis.length;E++)t(w.quasis[E],D,q,v,z);for(E=0;E<w.expressions.length;E++)t(w.expressions[E],D,q,v,z);break;case "ObjectExpression":for(E=0;E<w.properties.length;E++)t(w.properties[E],D,q,v,z);break;case "Property":"Literal"!==w.key.type&&"Identifier"!==w.key.type&&v.push(u(w,"SYNTAX","ONLYLITERAL"));"Literal"===w.key.type&&t(w.key,D,q,v,z);t(w.value,D,q,v,z);break;default:v.push(u(w,"SYNTAX","UNRECOGNISED"))}}catch(I){v.push({line:null===w?0:w.loc.start.line,
character:null===w?0:w.loc.start.column,reason:"Unnexpected Syntax"})}}function x(w){var D=[];e(w,function(q){"CallExpression"===q.type&&"Identifier"===q.callee.type&&D.push(q.callee.name.toLowerCase());return!0});return D}Object.defineProperty(y,"__esModule",{value:!0});y.scriptUsesFeatureSet=y.findScriptDependencies=y.findFunctionCalls=y.checkScript=y.extractAllIssues=y.extractAllIssuesInFunction=y.makeError=y.nodeErrorMessage=y.validateLanguage=y.validateScript=y.constructGlobalScope=y.validateFunction=
y.extractFunctionDeclaration=y.findFieldLiterals=y.referencesFunction=y.referencesMember=y.testValidityOfExpression=y.validateLanguageNode=y.walk=y.findFunction=y.checkFunctionSignature=y.addFunctionDeclaration=y.functionDecls=void 0;y.functionDecls={concatenate:{min:"0",max:"*"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",
max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",
max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",
max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",
max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},
boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",
max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",
max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},schema:{min:"1",max:"1"}};for(var A in y.functionDecls)y.functionDecls[A].fmin=y.functionDecls[A].min,y.functionDecls[A].fmax=y.functionDecls[A].max;var B="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl attachments featuresetbyportalitem".split(" "),
F="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");y.addFunctionDeclaration=function(w,D){var q=y.functionDecls[w.name.toLowerCase()];void 0===q?"sync"===D?y.functionDecls[w.name.toLowerCase()]={min:w.min,max:w.max}:y.functionDecls[w.name.toLowerCase()]=
{fmin:w.min,fmax:w.max}:"sync"===D?(q.min=w.min,q.max=w.max):(q.fmin=w.min,q.fmax=w.max)};y.checkFunctionSignature=r;y.findFunction=a;y.walk=e;y.validateLanguageNode=g;y.testValidityOfExpression=h;y.referencesMember=m;y.referencesFunction=function(w,D){var q=!1,v=D.toLowerCase();e(w,function(z){return q?!1:"CallExpression"===z.type&&"Identifier"===z.callee.type&&z.callee.name&&z.callee.name.toLowerCase()===v?(q=!0,!1):!0});return q};y.findFieldLiterals=function(w){var D=[];e(w,function(q){if("MemberExpression"!==
q.type||"Identifier"!==q.object.type)return!0;!1===q.computed&&q.object&&q.object.name&&q.property&&"Identifier"===q.property.type&&q.property.name?D.push(q.object.name.toLowerCase()+"."+q.property.name.toLowerCase()):q.object&&q.object.name&&q.property&&"Literal"===q.property.type&&"string"===typeof q.property.value&&D.push(q.object.name.toLowerCase()+"."+q.property.value.toString().toLowerCase());return!1});return D};y.extractFunctionDeclaration=l;y.validateFunction=f;y.constructGlobalScope=c;y.validateScript=
function(w,D,q,v){void 0===q&&(q="async");void 0===v&&(v=y.functionDecls);D={globalScope:c(D.vars,v,D.customFunctions,q),localScope:null};return h(w.body[0].body,D)};y.validateLanguage=function(w){return"BlockStatement"!==w.body[0].body.type?"Invalid formula content.":g(w.body[0].body)};y.nodeErrorMessage=d;y.makeError=u;y.extractAllIssuesInFunction=n;y.extractAllIssues=t;y.checkScript=function(w,D,q,v,z){void 0===v&&(v="async");void 0===z&&(z=y.functionDecls);var C=[];if("BlockStatement"!==w.body[0].body.type)return[{line:0,
character:0,reason:"Invalid Body"}];if(null===D||void 0===D)D={vars:{},customFunctions:[]};D={globalScope:c(D.vars,z,D.customFunctions,v),localScope:null};try{t(w.body[0].body,D,q,C)}catch(E){}return C};y.findFunctionCalls=x;y.findScriptDependencies=function(w,D){void 0===D&&(D=[]);var q=null;if(void 0===w.usesFeatureSet){null===q&&(q=x(w));w.usesFeatureSet=!1;for(var v=0;v<q.length;v++)-1<B.indexOf(q[v])&&(w.usesFeatureSet=!0,w.isAsync=!0);if(!1===w.usesFeatureSet&&D&&0<D.length)for(v=0;v<D.length;v++)if(m(w,
D[v])){w.usesFeatureSet=!0;w.isAsync=!0;break}}if(void 0===w.usesGeometry)for(w.usesGeometry=!1,null===q&&(q=x(w)),v=0;v<q.length;v++)-1<F.indexOf(q[v])&&(w.usesGeometry=!0)};y.scriptUsesFeatureSet=function(w){w=x(w);for(var D=0;D<w.length;D++)if(-1<B.indexOf(w[D]))return!0;return!1}})},"esri/arcade/functions/array":function(){define(["require","exports","../languageUtils"],function(b,y,r){Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(a,k){a.array=
function(e,g){return k(e,g,function(h,m,l){r.pcCheck(l,1,2);h=r.toNumber(l[0]);if(isNaN(h)||!1===r.isInteger(h))throw Error("Invalid Parameter");l=r.defaultUndefined(l[1],null);h=Array(h);h.fill(l);return h})};a.front=function(e,g){return k(e,g,function(h,m,l){r.pcCheck(l,1,1);if(r.isImmutableArray(l[0])){if(0>=l[0].length())throw Error("Array is empty");return l[0].get(0)}if(r.isArray(l[0])){if(0>=l[0].length)throw Error("Array is empty");return l[0][0]}throw Error("Invalid Parameter");})};a.back=
function(e,g){return k(e,g,function(h,m,l){r.pcCheck(l,1,1);if(r.isImmutableArray(l[0])){if(0>=l[0].length())throw Error("Array is empty");return l[0].get(l[0].length()-1)}if(r.isArray(l[0])){if(0>=l[0].length)throw Error("Array is empty");return l[0][l[0].length-1]}throw Error("Invalid Parameter");})};a.push=function(e,g){return k(e,g,function(h,m,l){r.pcCheck(l,1,2);if(r.isArray(l[0]))return l[0][l[0].length]=l[1],l[0].length;throw Error("Invalid Parameter");})};a.pop=function(e,g){return k(e,g,
function(h,m,l){r.pcCheck(l,1,1);if(r.isArray(l[0])){if(0>=l[0].length)throw Error("Array is empty");h=l[0][l[0].length-1];--l[0].length;return h}throw Error("Invalid Parameter");})};a.erase=function(e,g){return k(e,g,function(h,m,l){r.pcCheck(l,2,2);if(r.isArray(l[0])){h=r.toNumber(l[1]);if(isNaN(h)||!1===r.isInteger(h))throw Error("Invalid Parameter");l=l[0];if(0>=l.length)throw Error("Array is empty");0>h&&(h=l.length+h);if(0>h)throw Error("Element not found");if(h>=l.length)throw Error("Index is greater than array");
l.splice(h,1);return r.voidOperation}throw Error("Invalid Parameter");})};a.insert=function(e,g){return k(e,g,function(h,m,l){r.pcCheck(l,3,3);if(r.isArray(l[0])){h=r.toNumber(l[1]);if(isNaN(h)||!1===r.isInteger(h))throw Error("Invalid Parameter");m=l[2];l=l[0];if(h>l.length)throw Error("Index is greater than array");if(0>h&&h<-1*l.length)throw Error("Index is greater than array");if(h===l.length)return l[h]=m,r.voidOperation;l.splice(h,0,m);return r.voidOperation}throw Error("Invalid Parameter");
})};a.resize=function(e,g){return k(e,g,function(h,m,l){r.pcCheck(l,2,3);if(r.isArray(l[0])){m=r.toNumber(l[1]);if(isNaN(m)||!1===r.isInteger(m))throw Error("Invalid Parameter");if(0>m)throw Error("Size cannot be negative");h=r.defaultUndefined(l[2],null);l=l[0];if(l.length>=m)return l.length=m,r.voidOperation;var f=l.length;l.length=m;for(m=f;m<l.length;m++)l[m]=h;return r.voidOperation}throw Error("Invalid Parameter");})};a.includes=function(e,g){return k(e,g,function(h,m,l){r.pcCheck(l,2,2);if(r.isArray(l[0])){var f=
l[1];h=l[0];return-1<h.findIndex(function(d){return r.equalityTest(d,f)})?!0:!1}if(r.isImmutableArray(l[0])){var c=l[1];h=l[0].toArray();return-1<h.findIndex(function(d){return r.equalityTest(d,c)})?!0:!1}throw Error("Invalid Parameter");})};a.slice=function(e,g){return k(e,g,function(h,m,l){r.pcCheck(l,1,3);if(r.isArray(l[0])){h=r.toNumber(r.defaultUndefined(l[1],0));m=r.toNumber(r.defaultUndefined(l[2],l[0].length));if(isNaN(h)||!1===r.isInteger(h))throw Error("Invalid Parameter");if(isNaN(m)||
!1===r.isInteger(m))throw Error("Invalid Parameter");var f=l[0];return f.slice(h,m)}if(r.isImmutableArray(l[0])){f=l[0];h=r.toNumber(r.defaultUndefined(l[1],0));m=r.toNumber(r.defaultUndefined(l[2],f.length()));if(isNaN(h)||!1===r.isInteger(h))throw Error("Invalid Parameter");if(isNaN(m)||!1===r.isInteger(m))throw Error("Invalid Parameter");return f.toArray().slice(h,m)}throw Error("Invalid Parameter");})};a.splice=function(e,g){return k(e,g,function(h,m,l){h=[];for(m=0;m<l.length;m++)r.isArray(l[m])?
h.push.apply(h,l[m]):r.isImmutableArray(l[m])?h.push.apply(h,l[m].toArray()):h.push(l[m]);return h})}}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils"],function(b,y,r){function a(g){g=new Date(g.getTime());var h=g.getFullYear(),m=new Date(0);m.setFullYear(h+1,0,4);m.setHours(0,0,0,0);m=k(m);var l=new Date(0);l.setFullYear(h,0,4);l.setHours(0,0,0,0);l=k(l);return g.getTime()>=m.getTime()?h+1:g.getTime()>=l.getTime()?h:h-1}function k(g){g=new Date(g.getTime());
var h=g.getDay();h=(1>h?7:0)+h-1;g.setDate(g.getDate()-h);g.setHours(0,0,0,0);return g}function e(g){return null===g?g:isNaN(g.getTime())?null:g}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(g,h){g.today=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,0,0);f=new Date;f.setHours(0,0,0,0);return f})};g.now=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,0,0);return new Date})};g.timestamp=function(m,l){return h(m,l,function(f,
c,d){r.pcCheck(d,0,0);f=new Date;return f=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds())})};g.toutc=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);return null===f?null:new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds())})};g.tolocal=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);
return null===f?null:r.MomentLibrary.Moment.utc([f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds()]).toDate()})};g.day=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);return null===f?NaN:f.getDate()})};g.month=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);return null===f?NaN:f.getMonth()})};g.year=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);return null===
f?NaN:f.getFullYear()})};g.hour=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);return null===f?NaN:f.getHours()})};g.second=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);return null===f?NaN:f.getSeconds()})};g.millisecond=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);return null===f?NaN:f.getMilliseconds()})};g.minute=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);return null===
f?NaN:f.getMinutes()})};g.weekday=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);return null===f?NaN:f.getDay()})};g.isoweekday=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);if(null===f)return NaN;f=f.getDay();0===f&&(f=7);return f})};g.isomonth=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);return null===f?NaN:f.getMonth()+1})};g.isoweek=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);c=r.toDate(d[0]);
if(null===c)return NaN;f=k(c).getTime();c=a(c);d=new Date(0);d.setFullYear(c,0,4);d.setHours(0,0,0,0);c=k(d);f-=c.getTime();return Math.round(f/6048E5)+1})};g.isoyear=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,1,1);f=r.toDate(d[0]);return null===f?NaN:a(f)})};g.date=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,0,7);if(3===d.length)return e(new Date(r.toNumber(d[0]),r.toNumber(d[1]),r.toNumber(d[2]),0,0,0,0));if(4===d.length)return e(new Date(r.toNumber(d[0]),r.toNumber(d[1]),
r.toNumber(d[2]),r.toNumber(d[3]),0,0,0));if(5===d.length)return e(new Date(r.toNumber(d[0]),r.toNumber(d[1]),r.toNumber(d[2]),r.toNumber(d[3]),r.toNumber(d[4]),0,0));if(6===d.length)return e(new Date(r.toNumber(d[0]),r.toNumber(d[1]),r.toNumber(d[2]),r.toNumber(d[3]),r.toNumber(d[4]),r.toNumber(d[5]),0));if(7===d.length)return e(new Date(r.toNumber(d[0]),r.toNumber(d[1]),r.toNumber(d[2]),r.toNumber(d[3]),r.toNumber(d[4]),r.toNumber(d[5]),r.toNumber(d[6])));if(2===d.length){f=r.toString(d[1]);if(""===
f)return null;f=r.standardiseDateFormat(f);d=r.MomentLibrary.Moment(r.toString(d[0]),f,!0);return!0===d.isValid()?d.toDate():null}if(1===d.length){if(r.isString(d[0])){if(""===d[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(d[0]))return r.toDate(d[0]+"-01-01")}f=r.toNumber(d[0]);return!1===isNaN(f)?e(new Date(f)):r.toDate(d[0])}if(0===d.length)return new Date})};g.datediff=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,2,3);f=r.toDateM(d[0]);
c=r.toDateM(d[1]);if(null===f||null===c)return NaN;switch(r.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return f.diff(c,"days",!0);case "months":case "month":return f.diff(c,"months",!0);case "minutes":case "minute":case "m":return"M"===d[2]?f.diff(c,"months",!0):f.diff(c,"minutes",!0);case "seconds":case "second":case "s":return f.diff(c,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return f.diff(c);case "hours":case "hour":case "h":return f.diff(c,"hours",!0);
case "years":case "year":case "y":return f.diff(c,"years",!0);default:return f.diff(c)}})};g.dateadd=function(m,l){return h(m,l,function(f,c,d){r.pcCheck(d,2,3);f=r.toDateM(d[0]);if(null===f)return null;c="milliseconds";switch(r.toString(d[2]).toLowerCase()){case "days":case "day":case "d":c="days";break;case "months":case "month":c="months";break;case "minutes":case "minute":case "m":c="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":c="seconds";break;case "milliseconds":case "millisecond":case "ms":c=
"milliseconds";break;case "hours":case "hour":case "h":c="hours";break;case "years":case "year":case "y":c="years"}f.add(r.toNumber(d[1]),c);return f.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(b,y,r,
a,k,e,g,h,m,l,f,c,d,u){Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(n,t){n.ringisclockwise=function(x,A){return t(x,A,function(B,F,w){e.pcCheck(w,1,1);B=[];if(null===w[0])return!1;if(e.isArray(w[0])){var D=0;for(w=w[0];D<w.length;D++)if(F=w[D],F instanceof l)B.push([F.x,F.y]);else throw Error("Invalid Argument");}else if(w[0]instanceof k)B=w[0]._elements;else if(e.isImmutableArray(w[0])){D=0;for(var q=w[0].toArray();D<q.length;D++)if(F=q[D],
F instanceof l)B.push([F.x,F.y]);else throw Error("Invalid Argument");0<B.length&&(w[0].get(0),w[0].get(0))}else throw Error("Invalid Argument");return 3>B.length?!1:(new f({rings:[],spatialReference:{wkid:4326}})).isClockwise(B)})};n.polygon=function(x,A){return t(x,A,function(B,F,w){e.pcCheck(w,1,1);B=null;if(w[0]instanceof r){if(B=e.fixSpatialReference(a.parseGeometryFromDictionary(w[0]),x.spatialReference),!1===B instanceof f)throw Error("Illegal Parameter");}else B=w[0]instanceof f?u.fromJson(w[0].toJson()):
e.fixSpatialReference(new f(JSON.parse(w[0])),x.spatialReference);if(null!==B&&!1===B.spatialReference.equals(x.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(B)})};n.polyline=function(x,A){return t(x,A,function(B,F,w){e.pcCheck(w,1,1);B=null;if(w[0]instanceof r){if(B=e.fixSpatialReference(a.parseGeometryFromDictionary(w[0]),x.spatialReference),!1===B instanceof c)throw Error("Illegal Parameter");
}else B=w[0]instanceof c?u.fromJson(w[0].toJson()):e.fixSpatialReference(new c(JSON.parse(w[0])),x.spatialReference);if(null!==B&&!1===B.spatialReference.equals(x.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(B)})};n.point=function(x,A){return t(x,A,function(B,F,w){e.pcCheck(w,1,1);B=null;if(w[0]instanceof r){if(B=e.fixSpatialReference(a.parseGeometryFromDictionary(w[0]),x.spatialReference),
!1===B instanceof l)throw Error("Illegal Parameter");}else B=w[0]instanceof l?u.fromJson(w[0].toJson()):e.fixSpatialReference(new l(JSON.parse(w[0])),x.spatialReference);if(null!==B&&!1===B.spatialReference.equals(x.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(B)})};n.multipoint=function(x,A){return t(x,A,function(B,F,w){e.pcCheck(w,1,1);B=null;if(w[0]instanceof r){if(B=e.fixSpatialReference(a.parseGeometryFromDictionary(w[0]),
x.spatialReference),!1===B instanceof m)throw Error("Illegal Parameter");}else B=w[0]instanceof m?u.fromJson(w[0].toJson()):e.fixSpatialReference(new m(JSON.parse(w[0])),x.spatialReference);if(null!==B&&!1===B.spatialReference.equals(x.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(B)})};n.extent=function(x,A){return t(x,A,function(B,F,w){w=e.autoCastFeatureToGeometry(w);e.pcCheck(w,1,1);B=null;
w[0]instanceof r?B=e.fixSpatialReference(a.parseGeometryFromDictionary(w[0]),x.spatialReference):w[0]instanceof l?(B={xmin:w[0].x,ymin:w[0].y,xmax:w[0].x,ymax:w[0].y,spatialReference:w[0].spatialReference.toJson()},w=w[0],w.hasZ?(B.zmin=w.z,B.zmax=w.z):w.hasM&&(B.mmin=w.m,B.mmax=w.m),B=u.fromJson(B)):B=w[0]instanceof f?u.fromJson(w[0].getExtent().toJson()):w[0]instanceof c?u.fromJson(w[0].getExtent().toJson()):w[0]instanceof m?u.fromJson(w[0].getExtent().toJson()):w[0]instanceof g?u.fromJson(w[0].toJson()):
e.fixSpatialReference(new g(JSON.parse(w[0])),x.spatialReference);if(null!==B&&!1===B.spatialReference.equals(x.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(B)})};n.geometry=function(x,A){return t(x,A,function(B,F,w){e.pcCheck(w,1,1);B=null;B=w[0]instanceof a?e.fixSpatialReference(w[0].geometry(),x.spatialReference):w[0]instanceof r?e.fixSpatialReference(a.parseGeometryFromDictionary(w[0]),
x.spatialReference):e.fixSpatialReference(u.fromJson(JSON.parse(w[0])),x.spatialReference);if(null!==B&&!1===B.spatialReference.equals(x.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e.fixNullGeometry(B)})};n.setgeometry=function(x,A){return t(x,A,function(B,F,w){e.pcCheck(w,2,2);if(w[0]instanceof a){if(!0===w[0].immutable)throw Error("Feature is Immutable");if(w[1]instanceof h||null===w[1])w[0]._geometry=w[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return e.voidOperation})};n.feature=function(x,A){return t(x,A,function(B,F,w){if(0===w.length)throw Error("Missing Parameters");B=null;if(1===w.length)if(e.isString(w[0]))B=a.fromJson(JSON.parse(w[0]));else if(w[0]instanceof a)B=a.createFromArcadeFeature(w[0]);else if(w[0]instanceof h)B=a.createFromGraphicLikeObject(w[0],null,null);else if(w[0]instanceof r)B=w[0].hasField("geometry")?w[0].field("geometry"):null,F=w[0].hasField("attributes")?
w[0].field("attributes"):null,null!==B&&B instanceof r&&(B=a.parseGeometryFromDictionary(B)),null!==F&&(F=a.parseAttributesFromDictionary(F)),B=a.createFromGraphicLikeObject(B,F,null);else throw Error("Illegal Argument");else{if(2===w.length){F=B=null;if(null!==w[0])if(w[0]instanceof h)B=w[0];else if(B instanceof r)B=a.parseGeometryFromDictionary(w[0]);else throw Error("Illegal Argument");if(null!==w[1])if(w[1]instanceof r)F=a.parseAttributesFromDictionary(w[1]);else throw Error("Illegal Argument");
}else{B=null;F={};if(null!==w[0])if(w[0]instanceof h)B=w[0];else if(B instanceof r)B=a.parseGeometryFromDictionary(w[0]);else throw Error("Illegal Argument");for(var D=1;D<w.length;D+=2){var q=e.toString(w[D]),v=w[D+1];if(null===v||void 0===v||e.isString(v)||isNaN(v)||e.isDate(v)||e.isNumber(v)||e.isBoolean(v)){if(e.isFunctionParameter(v)||!1===e.isSimpleType(v))throw Error("Illegal Argument");F[q]=v===e.voidOperation?null:v}else throw Error("Illegal Argument");}}B=a.createFromGraphicLikeObject(B,
F,null)}B._geometry=e.fixSpatialReference(B.geometry(),x.spatialReference);B.immutable=!1;return B})};n.dictionary=function(x,A){return t(x,A,function(B,F,w){if(0===w.length)return w=new r,w.immutable=!1,w;if(1===w.length&&e.isString(w[0]))try{var D=JSON.parse(w[0]),q=r.convertObjectToArcadeDictionary(D);q.immutable=!1;return q}catch(v){throw Error("Missing Parameters or Illegal Json");}if(0!==w.length%2)throw Error("Missing Parameters");B={};for(F=0;F<w.length;F+=2)if(D=e.toString(w[F]),q=w[F+1],
null===q||void 0===q||e.isString(q)||isNaN(q)||e.isDate(q)||e.isNumber(q)||e.isBoolean(q)||e.isArray(q)||e.isImmutableArray(q)){if(e.isFunctionParameter(q))throw Error("Illegal Argument");B[D]=q===e.voidOperation?null:q}else throw Error("Illegal Argument");w=new r(B);w.immutable=!1;return w})};n.haskey=function(x,A){return t(x,A,function(B,F,w){e.pcCheck(w,2,2);B=e.toString(w[1]);if(w[0]instanceof a||w[0]instanceof r)return w[0].hasField(B);throw Error("Illegal Argument");})};n.indexof=function(x,
A){return t(x,A,function(B,F,w){e.pcCheck(w,2,2);B=w[1];if(e.isArray(w[0])){for(F=0;F<w[0].length;F++)if(e.equalityTest(B,w[0][F]))return F;return-1}if(e.isImmutableArray(w[0])){var D=w[0].length();for(F=0;F<D;F++)if(e.equalityTest(B,w[0].get(F)))return F;return-1}throw Error("Illegal Argument");})};n.angle=function(x,A){return t(x,A,function(B,F,w){w=e.autoCastFeatureToGeometry(w);e.pcCheck(w,2,3);if(!(w[0]instanceof l))throw Error("Illegal Argument");if(!(w[1]instanceof l))throw Error("Illegal Argument");
if(2<w.length&&!(w[2]instanceof l))throw Error("Illegal Argument");return 2===w.length?d.angle2D(w[0],w[1]):d.angleBetween2D(w[0],w[1],w[2])})};n.bearing=function(x,A){return t(x,A,function(B,F,w){w=e.autoCastFeatureToGeometry(w);e.pcCheck(w,2,3);if(!(w[0]instanceof l))throw Error("Illegal Argument");if(!(w[1]instanceof l))throw Error("Illegal Argument");if(2<w.length&&!(w[2]instanceof l))throw Error("Illegal Argument");return 2===w.length?d.bearing2D(w[0],w[1]):d.bearingBetween2D(w[0],w[1],w[2])})};
n.isselfintersecting=function(x,A){return t(x,A,function(B,F,w){w=e.autoCastFeatureToGeometry(w);e.pcCheck(w,1,1);B=w[0];if(B instanceof f)return B.isSelfIntersecting(B);if(B instanceof c)return B=B.paths,d.pathsSelfIntersecting(B);if(B instanceof m)for(F=B.points,w=0;w<F.length;w++)for(var D=0;D<F.length;D++)if(D!==w){for(var q=!0,v=0;v<F[w].length;v++)if(F[w][v]!==F[D][v]){q=!1;break}if(!0===q)return!0}return e.isArray(B)||e.isImmutableArray(B)?(B=e.autoCastArrayOfPointsToPolyline(B,x.spatialReference),
null!==B&&(B=B.paths),d.pathsSelfIntersecting(B)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(b,y,r){function a(f,c,d){var u={x:0,y:0};c&&(u.z=0);d&&(u.m=0);for(var n=0,t=f[0],x=0;x<f.length;x++){var A=f[x];a:if(A.length!==t.length)var B=!1;else{for(B=0;B<A.length;B++)if(A[B]!==t[B]){B=!1;break a}B=!0}if(!1===B){B=k(t,A,c);var F=A,w=c,D=d,q={x:(t[0]+F[0])/2,y:(t[1]+F[1])/2};w&&(q.z=(t[2]+F[2])/2);w&&D?q.m=(t[3]+F[3])/2:D&&(q.m=
(t[2]+F[2])/2);t=q;t.x*=B;t.y*=B;u.x+=t.x;u.y+=t.y;c&&(t.z*=B,u.z+=t.z);d&&(t.m*=B,u.m+=t.m);n+=B;t=A}}0<n?(u.x/=n,u.y/=n,c&&(u.z/=n),d&&(u.m/=n)):(u.x=f[0][0],u.y=f[0][1],c&&(u.z=f[0][2]),d&&c?u.m=f[0][3]:d&&(u.m=f[0][2]));return u}function k(f,c,d){var u=c[0]-f[0];f=c[1]-f[1];return d?(c=c[2]-c[2],Math.sqrt(u*u+f*f+c*c)):Math.sqrt(u*u+f*f)}function e(f,c,d){for(void 0===d&&(d=0);f<d;)f+=c;for(d+=c;f>=d;)f-=c;return f}function g(f,c){return Math.atan2(c.y-f.y,c.x-f.x)}function h(f,c,d){var u=f.x-
c.x;f=f.y-c.y;var n=d.x-c.x;c=d.y-c.y;return Math.atan2(u*c-n*f,u*n+f*c)}function m(f,c,d,u,n){var t=f[0];f=f[1];var x=c[0];c=c[1];var A=d[0],B=d[1];d=u[0]-A;A=t-A;var F=x-t;u=u[1]-B;B=f-B;var w=c-f,D=u*F-d*w;if(0===D)return!1;d=(d*B-u*A)/D;A=(F*B-w*A)/D;return 0<=d&&1>=d&&0<=A&&1>=A?(n&&(n[0]=t+d*(x-t),n[1]=f+d*(c-f)),!0):!1}Object.defineProperty(y,"__esModule",{value:!0});y.pathsSelfIntersecting=y.bearingBetween2D=y.angleBetween2D=y.angleBetweenRad=y.bearing2D=y.angle2D=y.angleRad=y.centroidMultiPoint=
y.centroidPolyline=void 0;y.centroidPolyline=function(f){for(var c={x:0,y:0,spatialReference:f.spatialReference.toJson()},d={x:0,y:0,spatialReference:f.spatialReference.toJson()},u=0,n=0,t=0;t<f.paths.length;t++)if(0!==f.paths[t].length){var x=f.paths[t];var A=!0===f.hasZ;if(1>=x.length)x=0;else{for(var B=0,F=1;F<x.length;F++)B+=k(x[F-1],x[F],A);x=B}0===x?(A=a(f.paths[t],!0===f.hasZ,!0===f.hasM),c.x+=A.x,c.y+=A.y,!0===f.hasZ&&(c.z+=A.z),!0===f.hasM&&(c.m+=A.m),++u):(A=a(f.paths[t],!0===f.hasZ,!0===
f.hasM),d.x+=A.x*x,d.y+=A.y*x,!0===f.hasZ&&(d.z+=A.z*x),!0===f.hasM&&(d.m+=A.m*x),n+=x)}return 0<n?(d.x/=n,d.y/=n,!0===f.hasZ&&(d.z/=n),!0===f.hasM&&(d.m/=n),new r(d)):0<u?(c.x/=u,c.y/=u,!0===f.hasZ&&(d.z/=u),!0===f.hasM&&(c.m/=u),new r(c)):null};y.centroidMultiPoint=function(f){if(0===f.points.length)return null;for(var c=0,d=0,u=0,n=0,t=0;t<f.points.length;t++){var x=f.getPoint(t);!0===x.hasZ&&(u+=x.z);!0===x.hasM&&(n+=x.m);c+=x.x;d+=x.y;n+=x.m}c={x:c/f.points.length,y:d/f.points.length,spatialReference:null};
c.spatialReference=f.spatialReference.toJson();!0===f.hasZ&&(c.z=u/f.points.length);!0===f.hasM&&(c.m=n/f.points.length);return new r(c)};y.angleRad=g;y.angle2D=function(f,c){return e(g(f,c),2*Math.PI)*(180/Math.PI)};y.bearing2D=function(f,c){return e(Math.PI/2-g(f,c),2*Math.PI)*(180/Math.PI)};y.angleBetweenRad=h;y.angleBetween2D=function(f,c,d){return e(h(f,c,d),2*Math.PI)*(180/Math.PI)};y.bearingBetween2D=function(f,c,d){return e(-1*h(f,c,d),2*Math.PI)*(180/Math.PI)};var l=[0,0];y.pathsSelfIntersecting=
function(f){for(var c=0;c<f.length;c++){for(var d=f[c],u=0;u<d.length-1;u++)for(var n=d[u],t=d[u+1],x=c+1;x<f.length;x++)for(var A=0;A<f[x].length-1;A++){var B=f[x][A],F=f[x][A+1],w=m(n,t,B,F,l);if(w&&!(l[0]===n[0]&&l[1]===n[1]||l[0]===B[0]&&l[1]===B[1]||l[0]===t[0]&&l[1]===t[1]||l[0]===F[0]&&l[1]===F[1]))return!0}A=d.length;if(!(3>A))for(u=0;u<=A-2;u++)for(n=d[u],t=d[u+1],x=u+2;x<=A-2;x++)if(B=d[x],F=d[x+1],(w=m(n,t,B,F,l))&&!(l[0]===n[0]&&l[1]===n[1]||l[0]===B[0]&&l[1]===B[1]||l[0]===t[0]&&l[1]===
t[1]||l[0]===F[0]&&l[1]===F[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d){function u(t){return 0===r.version.indexOf("4.")?f.fromExtent(t):new f({spatialReference:t.spatialReference,rings:[[[t.xmin,
t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=y.setGeometryEngine=void 0;var n=null;y.setGeometryEngine=function(t){n=t};y.registerFunctions=function(t,x){function A(B){k.pcCheck(B,2,2);if(!(B[0]instanceof h&&B[1]instanceof h||B[0]instanceof h&&null===B[1]||B[1]instanceof h&&null===B[0]||null===B[0]&&null===B[1]))throw Error("Illegal Argument");}t.disjoint=function(B,F){return x(B,F,function(w,D,q){q=
k.autoCastFeatureToGeometry(q);A(q);return null===q[0]||null===q[1]?!0:n.disjoint(q[0],q[1])})};t.intersects=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);A(q);return null===q[0]||null===q[1]?!1:n.intersects(q[0],q[1])})};t.touches=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);A(q);return null===q[0]||null===q[1]?!1:n.touches(q[0],q[1])})};t.crosses=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);A(q);return null===
q[0]||null===q[1]?!1:n.crosses(q[0],q[1])})};t.within=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);A(q);return null===q[0]||null===q[1]?!1:n.within(q[0],q[1])})};t.contains=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);A(q);return null===q[0]||null===q[1]?!1:n.contains(q[0],q[1])})};t.overlaps=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);A(q);return null===q[0]||null===q[1]?!1:n.overlaps(q[0],q[1])})};t.equals=
function(B,F){return x(B,F,function(w,D,q){k.pcCheck(q,2,2);return q[0]===q[1]?!0:q[0]instanceof h&&q[1]instanceof h?n.equals(q[0],q[1]):k.isDate(q[0])&&k.isDate(q[1])?q[0].getTime()===q[1].getTime():!1})};t.relate=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,3,3);if(q[0]instanceof h&&q[1]instanceof h)return n.relate(q[0],q[1],k.toString(q[2]));if(q[0]instanceof h&&null===q[1]||q[1]instanceof h&&null===q[0]||null===q[0]&&null===q[1])return!1;throw Error("Illegal Argument");
})};t.intersection=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);A(q);return null===q[0]||null===q[1]?null:n.intersect(q[0],q[1])})};t.union=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);w=[];if(0===q.length)throw Error("Function called with wrong number of Parameters");if(1===q.length)if(k.isArray(q[0]))for(q=k.autoCastFeatureToGeometry(q[0]),D=0;D<q.length;D++){if(null!==q[D]){if(!(q[D]instanceof h))throw Error("Illegal Argument");w.push(q[D])}}else if(k.isImmutableArray(q[0]))for(q=
k.autoCastFeatureToGeometry(q[0].toArray()),D=0;D<q.length;D++){if(null!==q[D]){if(!(q[D]instanceof h))throw Error("Illegal Argument");w.push(q[D])}}else{if(q[0]instanceof h)return k.fixSpatialReference(a.cloneGeometry(q[0]),B.spatialReference);if(null===q[0])return null;throw Error("Illegal Argument");}else for(D=0;D<q.length;D++)if(null!==q[D]){if(!(q[D]instanceof h))throw Error("Illegal Argument");w.push(q[D])}return 0===w.length?null:n.union(w)})};t.difference=function(B,F){return x(B,F,function(w,
D,q){q=k.autoCastFeatureToGeometry(q);A(q);return null!==q[0]&&null===q[1]?a.cloneGeometry(q[0]):null===q[0]?null:n.difference(q[0],q[1])})};t.symmetricdifference=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);A(q);return null===q[0]&&null===q[1]?null:null===q[0]?a.cloneGeometry(q[1]):null===q[1]?a.cloneGeometry(q[0]):n.symmetricDifference(q[0],q[1])})};t.clip=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,2,2);if(!(q[1]instanceof
g)&&null!==q[1])throw Error("Illegal Argument");if(null===q[0])return null;if(!(q[0]instanceof h))throw Error("Illegal Argument");return null===q[1]?null:n.clip(q[0],q[1])})};t.cut=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,2,2);if(!(q[1]instanceof c)&&null!==q[1])throw Error("Illegal Argument");if(null===q[0])return[];if(!(q[0]instanceof h))throw Error("Illegal Argument");return null===q[1]?[a.cloneGeometry(q[0])]:n.cut(q[0],q[1])})};t.area=function(B,
F){return x(B,F,function(w,D,q){k.pcCheck(q,1,2);q=k.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(k.isArray(q[0])||k.isImmutableArray(q[0]))return w=k.autoCastArrayOfPointsToPolygon(q[0],B.spatialReference),null===w?0:n.planarArea(w,a.convertSquareUnitsToCode(k.defaultUndefined(q[1],-1)));if(!(q[0]instanceof h))throw Error("Illegal Argument");return n.planarArea(q[0],a.convertSquareUnitsToCode(k.defaultUndefined(q[1],-1)))})};t.areageodetic=function(B,F){return x(B,F,function(w,D,q){k.pcCheck(q,
1,2);q=k.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(k.isArray(q[0])||k.isImmutableArray(q[0]))return w=k.autoCastArrayOfPointsToPolygon(q[0],B.spatialReference),null===w?0:n.geodesicArea(w,a.convertSquareUnitsToCode(k.defaultUndefined(q[1],-1)));if(!(q[0]instanceof h))throw Error("Illegal Argument");return n.geodesicArea(q[0],a.convertSquareUnitsToCode(k.defaultUndefined(q[1],-1)))})};t.length=function(B,F){return x(B,F,function(w,D,q){k.pcCheck(q,1,2);q=k.autoCastFeatureToGeometry(q);
if(null===q[0])return 0;if(k.isArray(q[0])||k.isImmutableArray(q[0]))return w=k.autoCastArrayOfPointsToPolyline(q[0],B.spatialReference),null===w?0:n.planarLength(w,a.convertLinearUnitsToCode(k.defaultUndefined(q[1],-1)));if(!(q[0]instanceof h))throw Error("Illegal Argument");return n.planarLength(q[0],a.convertLinearUnitsToCode(k.defaultUndefined(q[1],-1)))})};t.lengthgeodetic=function(B,F){return x(B,F,function(w,D,q){k.pcCheck(q,1,2);q=k.autoCastFeatureToGeometry(q);if(null===q[0])return 0;if(k.isArray(q[0])||
k.isImmutableArray(q[0]))return w=k.autoCastArrayOfPointsToPolyline(q[0],B.spatialReference),null===w?0:n.geodesicLength(w,a.convertLinearUnitsToCode(k.defaultUndefined(q[1],-1)));if(!(q[0]instanceof h))throw Error("Illegal Argument");return n.geodesicLength(q[0],a.convertLinearUnitsToCode(k.defaultUndefined(q[1],-1)))})};t.distance=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,2,3);w=q[0];if(k.isArray(q[0])||k.isImmutableArray(q[0]))w=k.autoCastArrayOfPointsToMultiPoint(q[0],
B.spatialReference);D=q[1];if(k.isArray(q[1])||k.isImmutableArray(q[1]))D=k.autoCastArrayOfPointsToMultiPoint(q[1],B.spatialReference);if(!(w instanceof h))throw Error("Illegal Argument");if(!(D instanceof h))throw Error("Illegal Argument");return n.distance(w,D,a.convertLinearUnitsToCode(k.defaultUndefined(q[2],-1)))})};t.distancegeodetic=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,2,3);w=q[0];D=q[1];if(!(w instanceof l))throw Error("Illegal Argument");
if(!(D instanceof l))throw Error("Illegal Argument");var v=new c({paths:[],spatialReference:w.spatialReference});v.addPath([w,D]);return n.geodesicLength(v,a.convertLinearUnitsToCode(k.defaultUndefined(q[2],-1)))})};t.densify=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,2,3);if(null===q[0])return null;if(!(q[0]instanceof h))throw Error("Illegal Argument");w=k.toNumber(q[1]);if(isNaN(w))throw Error("Illegal Argument");if(0>=w)throw Error("Illegal Argument");
return q[0]instanceof f||q[0]instanceof c?n.densify(q[0],w,a.convertLinearUnitsToCode(k.defaultUndefined(q[2],-1))):q[0]instanceof g?n.densify(u(q[0]),w,a.convertLinearUnitsToCode(k.defaultUndefined(q[2],-1))):q[0]})};t.densifygeodetic=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,2,3);if(null===q[0])return null;if(!(q[0]instanceof h))throw Error("Illegal Argument");w=k.toNumber(q[1]);if(isNaN(w))throw Error("Illegal Argument");if(0>=w)throw Error("Illegal Argument");
return q[0]instanceof f||q[0]instanceof c?n.geodesicDensify(q[0],w,a.convertLinearUnitsToCode(k.defaultUndefined(q[2],-1))):q[0]instanceof g?n.geodesicDensify(u(q[0]),w,a.convertLinearUnitsToCode(k.defaultUndefined(q[2],-1))):q[0]})};t.generalize=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,2,4);if(null===q[0])return null;if(!(q[0]instanceof h))throw Error("Illegal Argument");w=k.toNumber(q[1]);if(isNaN(w))throw Error("Illegal Argument");return n.generalize(q[0],
w,k.toBoolean(k.defaultUndefined(q[2],!0)),a.convertLinearUnitsToCode(k.defaultUndefined(q[3],-1)))})};t.buffer=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,2,3);if(null===q[0])return null;if(!(q[0]instanceof h))throw Error("Illegal Argument");w=k.toNumber(q[1]);if(isNaN(w))throw Error("Illegal Argument");return 0===w?a.cloneGeometry(q[0]):n.buffer(q[0],w,a.convertLinearUnitsToCode(k.defaultUndefined(q[2],-1)))})};t.buffergeodetic=function(B,F){return x(B,
F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,2,3);if(null===q[0])return null;if(!(q[0]instanceof h))throw Error("Illegal Argument");w=k.toNumber(q[1]);if(isNaN(w))throw Error("Illegal Argument");return 0===w?a.cloneGeometry(q[0]):n.geodesicBuffer(q[0],w,a.convertLinearUnitsToCode(k.defaultUndefined(q[2],-1)))})};t.offset=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,2,6);if(null===q[0])return null;if(!(q[0]instanceof f||q[0]instanceof c))throw Error("Illegal Argument");
w=k.toNumber(q[1]);if(isNaN(w))throw Error("Illegal Argument");D=k.toNumber(k.defaultUndefined(q[4],10));if(isNaN(D))throw Error("Illegal Argument");var v=k.toNumber(k.defaultUndefined(q[5],0));if(isNaN(v))throw Error("Illegal Argument");return n.offset(q[0],w,a.convertLinearUnitsToCode(k.defaultUndefined(q[2],-1)),k.toString(k.defaultUndefined(q[3],"round")).toLowerCase(),D,v)})};t.rotate=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,2,3);w=q[0];if(null===
w)return null;if(!(w instanceof h))throw Error("Illegal Argument");w instanceof g&&(w=f.fromExtent(w));D=k.toNumber(q[1]);if(isNaN(D))throw Error("Illegal Argument");q=k.defaultUndefined(q[2],null);if(null===q)return n.rotate(w,D);if(q instanceof l)return n.rotate(w,D,q);throw Error("Illegal Argument");})};t.centroid=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,1,1);if(null===q[0])return null;w=q[0];if(k.isArray(q[0])||k.isImmutableArray(q[0]))w=k.autoCastArrayOfPointsToMultiPoint(q[0],
B.spatialReference);if(null===w)return null;if(!(w instanceof h))throw Error("Illegal Argument");return w instanceof l?k.fixSpatialReference(a.cloneGeometry(q[0]),B.spatialReference):w instanceof f?w.getCentroid():w instanceof c?e.centroidPolyline(w):w instanceof m?e.centroidMultiPoint(w):w instanceof g?w.getCenter():null})};t.multiparttosinglepart=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,1,1);D=[];if(null===q[0])return null;if(!(q[0]instanceof h))throw Error("Illegal Argument");
if(q[0]instanceof l||q[0]instanceof g)return[k.fixSpatialReference(a.cloneGeometry(q[0]),B.spatialReference)];w=n.simplify(q[0]);if(w instanceof f){D=[];var v=[];for(q=0;q<w.rings.length;q++)if(w.isClockwise(w.rings[q])){var z=d.fromJson({rings:[w.rings[q]],hasZ:!0===w.hasZ,hasM:!0===w.hasM,spatialReference:w.spatialReference.toJson()});D.push(z)}else v.push({ring:w.rings[q],pt:w.getPoint(q,0)});for(w=0;w<v.length;w++)for(q=0;q<D.length;q++)if(D[q].contains(v[w].pt)){D[q].addRing(v[w].ring);break}return D}if(w instanceof
c){D=[];for(q=0;q<w.paths.length;q++)v=d.fromJson({paths:[w.paths[q]],hasZ:!0===w.hasZ,hasM:!0===w.hasM,spatialReference:w.spatialReference.toJson()}),D.push(v);return D}if(q[0]instanceof m){w=k.fixSpatialReference(a.cloneGeometry(q[0]),B.spatialReference);for(q=0;q<w.points.length;q++)D.push(w.getPoint(q));return D}return null})};t.issimple=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,1,1);if(null===q[0])return!0;if(!(q[0]instanceof h))throw Error("Illegal Argument");
return n.isSimple(q[0])})};t.simplify=function(B,F){return x(B,F,function(w,D,q){q=k.autoCastFeatureToGeometry(q);k.pcCheck(q,1,1);if(null===q[0])return null;if(!(q[0]instanceof h))throw Error("Illegal Argument");return n.simplify(q[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(b,y,r,a){Object.defineProperty(y,"__esModule",{value:!0});y.cloneGeometry=y.sameGeomType=y.convertLinearUnitsToCode=y.shapeExtent=y.convertSquareUnitsToCode=
void 0;y.convertSquareUnitsToCode=function(k){if(void 0===k)return null;if("number"===typeof k)return k;switch(k.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};y.shapeExtent=function(k){if(null===k)return null;switch(k.type){case "polygon":case "multipoint":case "polyline":return k.extent;case "point":return new r({xmin:k.x,
ymin:k.y,xmax:k.x,ymax:k.y,spatialReference:k.spatialReference});case "extent":return k}return null};y.convertLinearUnitsToCode=function(k){if(void 0===k)return null;if("number"===typeof k||"number"===typeof k)return k;switch(k.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};y.sameGeomType=function(k,e){return k===e||"point"===k&&"esriGeometryPoint"===e||"polyline"===k&&"esriGeometryPolyline"===e||"polygon"===k&&"esriGeometryPolygon"===e||"extent"===k&&"esriGeometryEnvelope"===e||"multipoint"===k&&"esriGeometryMultipoint"===
e||"point"===e&&"esriGeometryPoint"===k||"polyline"===e&&"esriGeometryPolyline"===k||"polygon"===e&&"esriGeometryPolygon"===k||"extent"===e&&"esriGeometryEnvelope"===k||"multipoint"===e&&"esriGeometryMultipoint"===k?!0:!1};y.cloneGeometry=function(k){if(null===k)return null;var e=a.fromJson(k.toJson());k.getCacheValue("_geVersion")&&e.setCacheValue("_geVersion",k.getCacheValue("_geVersion"));return e}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","dojo/number"],
function(b,y,r,a){function k(e,g,h){if("undefined"===typeof h||0===+h)return Math[e](g);g=+g;h=+h;if(isNaN(g)||"number"!==typeof h||0!==h%1)return NaN;g=g.toString().split("e");g=Math[e](+(g[0]+"e"+(g[1]?+g[1]-h:-h)));g=g.toString().split("e");return+(g[0]+"e"+(g[1]?+g[1]+h:h))}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(e,g){function h(m,l,f){m=r.toNumber(m);return isNaN(m)?m:isNaN(l)||isNaN(f)||l>f?NaN:m<l?l:m>f?f:m}e.number=function(m,
l){return g(m,l,function(f,c,d){r.pcCheck(d,1,2);f=d[0];return r.isNumber(f)?f:null===f?0:r.isDate(f)||r.isBoolean(f)?Number(f):r.isArray(f)?NaN:""===f||void 0===f?Number(f):r.isString(f)?void 0!==d[1]?(d=r.multiReplace(d[1],"\u2030",""),d=r.multiReplace(d,"\u00a4",""),a.parse(f,{pattern:d})):Number(f.trim()):Number(f)})};e.abs=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,1);return Math.abs(r.toNumber(d[0]))})};e.acos=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,1);return Math.acos(r.toNumber(d[0]))})};
e.asin=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,1);return Math.asin(r.toNumber(d[0]))})};e.atan=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,1);return Math.atan(r.toNumber(d[0]))})};e.atan2=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,2,2);return Math.atan2(r.toNumber(d[0]),r.toNumber(d[1]))})};e.ceil=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,2);return 2===d.length?(f=r.toNumber(d[1]),isNaN(f)&&(f=0),k("ceil",r.toNumber(d[0]),-1*f)):Math.ceil(r.toNumber(d[0]))})};
e.round=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,2);return 2===d.length?(f=r.toNumber(d[1]),isNaN(f)&&(f=0),k("round",r.toNumber(d[0]),-1*f)):Math.round(r.toNumber(d[0]))})};e.floor=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,2);return 2===d.length?(f=r.toNumber(d[1]),isNaN(f)&&(f=0),k("floor",r.toNumber(d[0]),-1*f)):Math.floor(r.toNumber(d[0]))})};e.cos=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,1);return Math.cos(r.toNumber(d[0]))})};e.isnan=function(m,
l){return g(m,l,function(f,c,d){r.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};e.exp=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,1);return Math.exp(r.toNumber(d[0]))})};e.log=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,1);return Math.log(r.toNumber(d[0]))})};e.pow=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,2,2);return Math.pow(r.toNumber(d[0]),r.toNumber(d[1]))})};e.random=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,0,0);return Math.random()})};
e.sin=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,1);return Math.sin(r.toNumber(d[0]))})};e.sqrt=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,1);return Math.sqrt(r.toNumber(d[0]))})};e.tan=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,1);return Math.tan(r.toNumber(d[0]))})};e.defaultvalue=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,2,2);return null===d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};e.isempty=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,
1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};e["boolean"]=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,1,1);return r.toBoolean(d[0])})};e.constrain=function(m,l){return g(m,l,function(f,c,d){r.pcCheck(d,3,3);f=r.toNumber(d[1]);c=r.toNumber(d[2]);if(r.isArray(d[0])){var u=[],n=0;for(d=d[0];n<d.length;n++)u.push(h(d[n],f,c));return u}if(r.isImmutableArray(d[0])){u=[];for(n=0;n<d[0].length();n++)u.push(h(d[0].get(n),f,c));return u}return h(d[0],f,c)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(b,y,r,a){function k(e,g,h,m){if(1===m.length){if(r.isArray(m[0]))return a.calculateStat(e,m[0],-1);if(r.isImmutableArray(m[0]))return a.calculateStat(e,m[0].toArray(),-1)}return a.calculateStat(e,m,-1)}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(e,g){e.stdev=function(h,m){return g(h,m,function(l,f,c){return k("stdev",l,f,c)})};e.variance=function(h,m){return g(h,m,function(l,f,c){return k("variance",
l,f,c)})};e.average=function(h,m){return g(h,m,function(l,f,c){return k("mean",l,f,c)})};e.mean=function(h,m){return g(h,m,function(l,f,c){return k("mean",l,f,c)})};e.sum=function(h,m){return g(h,m,function(l,f,c){return k("sum",l,f,c)})};e.min=function(h,m){return g(h,m,function(l,f,c){return k("min",l,f,c)})};e.max=function(h,m){return g(h,m,function(l,f,c){return k("max",l,f,c)})};e.distinct=function(h,m){return g(h,m,function(l,f,c){return k("distinct",l,f,c)})};e.count=function(h,m){return g(h,
m,function(l,f,c){r.pcCheck(c,1,1);if(r.isArray(c[0])||r.isString(c[0]))return c[0].length;if(r.isImmutableArray(c[0]))return c[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(b,y,r){function a(e){for(var g=0,h=0;h<e.length;h++)g+=e[h];return g/e.length}function k(e){for(var g=a(e),h=0,m=0;m<e.length;m++)h+=Math.pow(g-e[m],2);return h/e.length}Object.defineProperty(y,"__esModule",
{value:!0});y.calculateStat=y.decodeStatType=void 0;y.decodeStatType=function(e){switch(e.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};y.calculateStat=function(e,g,h){void 0===h&&(h=1E3);switch(e.toLowerCase()){case "distinct":a:{e=h;h=[];for(var m={},l=[],f=0;f<g.length;f++){if(void 0!==
g[f]&&null!==g[f]&&g[f]!==r.voidOperation){var c=g[f];if(r.isNumber(c)||r.isString(c))void 0===m[c]&&(h.push(c),m[c]=1);else{for(var d=!1,u=0;u<l.length;u++)!0===r.equalityTest(l[u],c)&&(d=!0);!1===d&&(l.push(c),h.push(c))}}if(h.length>=e&&-1!==e){g=h;break a}}g=h}return g;case "avg":case "mean":return a(r.toNumberArray(g));case "min":return Math.min.apply(Math,r.toNumberArray(g));case "sum":g=r.toNumberArray(g);for(h=e=0;h<g.length;h++)e+=g[h];return e;case "max":return Math.max.apply(Math,r.toNumberArray(g));
case "stdev":case "stddev":return Math.sqrt(k(r.toNumberArray(g)));case "var":case "variance":return k(r.toNumberArray(g));case "count":return g.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Attachment ../Dictionary ../Feature ../languageUtils ../featureset/support/shared ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),function(b,
y,r,a,k,e,g,h,m,l,f,c,d,u,n){function t(x,A,B){if(null===x)A.updateUint8Array([0,139]);else if(g.isArray(x)){A.updateUint8Array([61]);if(B.map.has(x))x=B.map.get(x),A.updateIntArray([x^61237541]);else{B.map.set(x,B.currentLength++);for(var F=0;F<x.length;F++){var w=x[F];t(w,A,B)}B.map.delete(x);B.currentLength--}A.updateUint8Array([199])}else if(g.isImmutableArray(x)){A.updateUint8Array([61]);if(B.map.has(x))x=B.map.get(x),A.updateIntArray([x^61237541]);else{B.map.set(x,B.currentLength++);F=0;for(var D=
x.toArray();F<D.length;F++)w=D[F],t(w,A,B);B.map.delete(x);B.currentLength--}A.updateUint8Array([199])}else if(g.isDate(x))A.updateIntArray([x.getTime()]),A.updateUint8Array([241]);else if(g.isString(x))A.updateIntArray([x.length]),A.updateWithString(x),A.updateUint8Array([41]);else if(g.isBoolean(x))A.updateUint8Array([!0===x?1:0,113]);else if(g.isNumber(x))A.updateFloatArray([x]),A.updateUint8Array([173]);else{if(x instanceof a)throw Error("Type not supported in Hash");if(x instanceof r)throw Error("Type not supported in Hash");
if(x instanceof k){A.updateUint8Array([223]);if(B.map.has(x))x=B.map.get(x),A.updateIntArray([x^61237541]);else{B.map.set(x,B.currentLength++);F=0;for(D=x.keys();F<D.length;F++)w=D[F],A.updateIntArray([w.length]),A.updateWithString(w),A.updateUint8Array([251]),w=x.field(w),t(w,A,B),A.updateUint8Array([239]);B.map.delete(x);B.currentLength--}A.updateUint8Array([73])}else{if(x instanceof e)throw Error("Type not supported in Hash");if(x instanceof c)A.updateIntArray([3833836621]),A.updateIntArray([0]),
A.updateFloatArray([x.x]),A.updateIntArray([1]),A.updateFloatArray([x.y]),A.updateIntArray([3765347959]),t(x.spatialReference.wkid,A,B);else if(x instanceof d){A.updateIntArray([1266616829]);for(F=0;F<x.rings.length;F++){D=x.rings[F];var q=[],v=null,z=null;for(w=0;w<D.length;w++){var C=x.getPoint(F,w);if(0===w)v=C;else if(z.x===C.x&&z.y===C.y)continue;z=C;w===D.length-1&&v.x===C.x&&v.y===C.y||q.push(C)}A.updateIntArray([1397116793,q.length]);for(w=0;w<q.length;w++)C=q[w],A.updateIntArray([3962308117,
w]),t(C,A,B),A.updateIntArray([2716288009]);A.updateIntArray([2278822459])}A.updateIntArray([3878477243]);t(x.spatialReference.wkid,A,B)}else if(x instanceof u){A.updateIntArray([4106883559]);for(F=0;F<x.paths.length;F++){D=x.paths[F];A.updateIntArray([1397116793,D.length]);for(w=0;w<D.length;w++)A.updateIntArray([3962308117,w]),t(x.getPoint(F,w),A,B),A.updateIntArray([2716288009]);A.updateIntArray([2278822459])}A.updateIntArray([2568784753]);t(x.spatialReference.wkid,A,B)}else if(x instanceof f){A.updateIntArray([588535921,
x.points.length]);for(w=0;w<x.points.length;w++)F=x.getPoint(w),A.updateIntArray([w]),t(F,A,B);A.updateIntArray([1700171621]);t(x.spatialReference.wkid,A,B)}else if(x instanceof l)A.updateIntArray([3483648373]),A.updateIntArray([0]),A.updateFloatArray([x.xmax]),A.updateIntArray([1]),A.updateFloatArray([x.xmin]),A.updateIntArray([2]),A.updateFloatArray([x.ymax]),A.updateIntArray([3]),A.updateFloatArray([x.ymin]),A.updateIntArray([3622027469]),t(x.spatialReference.wkid,A,B);else if(x instanceof n)A.updateIntArray([14]),
void 0!==x.wkid&&null!==x.wkid&&A.updateIntArray([x.wkid]),x.wkt&&A.updateWithString(x.wkt);else{if(g.isFunctionParameter(x))throw Error("Type not supported in Hash");if(g.isFeatureSet(x))throw Error("Type not supported in Hash");g.isFeatureSetCollection(x);throw Error("Type not supported in Hash");}}}}Object.defineProperty(y,"__esModule",{value:!0});y.registerFunctions=void 0;y.registerFunctions=function(x,A){x.portal=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,1);return new r(g.toString(q[0]))})};
x.trim=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,1);return g.toString(q[0]).trim()})};x.tohex=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,1);w=g.toNumber(q[0]);return isNaN(w)?w:w.toString(16)})};x.upper=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,1);return g.toString(q[0]).toUpperCase()})};x.proper=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,2);w=1;2===q.length&&"firstword"===g.toString(q[1]).toLowerCase()&&(w=2);D=/\s/;q=g.toString(q[0]);for(var v=
"",z=!0,C=0;C<q.length;C++){var E=q[C];D.test(E)?1===w&&(z=!0):E.toUpperCase()!==E.toLowerCase()&&(z?(E=E.toUpperCase(),z=!1):E=E.toLowerCase());v+=E}return v})};x.lower=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,1);return g.toString(q[0]).toLowerCase()})};x.guid=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,0,1);if(0<q.length)switch(g.toString(q[0]).toLowerCase()){case "digits":return g.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return g.generateUUID();
case "digits-hyphen-parentheses":return"("+g.generateUUID()+")"}return"{"+g.generateUUID()+"}"})};x.console=function(B,F){return A(B,F,function(w,D,q){0!==q.length&&(1===q.length?B.console(g.toString(q[0])):B.console(g.toString(q)));return g.voidOperation})};x.mid=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,2,3);w=g.toNumber(q[1]);if(isNaN(w))return"";0>w&&(w=0);if(2===q.length)return g.toString(q[0]).substr(w);D=g.toNumber(q[2]);if(isNaN(D))return"";0>D&&(D=0);return g.toString(q[0]).substr(w,
D)})};x.find=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,2,3);w=0;if(2<q.length){w=g.toNumber(g.defaultUndefined(q[2],0));if(isNaN(w))return-1;0>w&&(w=0)}return g.toString(q[1]).indexOf(g.toString(q[0]),w)})};x.left=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,2,2);w=g.toNumber(q[1]);if(isNaN(w))return"";0>w&&(w=0);return g.toString(q[0]).substr(0,w)})};x.right=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,2,2);w=g.toNumber(q[1]);if(isNaN(w))return"";0>w&&(w=0);return g.toString(q[0]).substr(-1*
w,w)})};x.split=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,2,4);w=g.toNumber(g.defaultUndefined(q[2],-1));D=g.toBoolean(g.defaultUndefined(q[3],!1));-1===w||null===w||!0===D?q=g.toString(q[0]).split(g.toString(q[1])):(isNaN(w)&&(w=-1),-1>w&&(w=-1),q=g.toString(q[0]).split(g.toString(q[1]),w));if(!1===D)return q;D=[];for(var v=0;v<q.length&&!(-1!==w&&D.length>=w);v++)""!==q[v]&&void 0!==q[v]&&D.push(q[v]);return D})};x.text=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,2);return g.toStringExplicit(q[0],
q[1])})};x.concatenate=function(B,F){return A(B,F,function(w,D,q){w=[];if(1>q.length)return"";if(g.isArray(q[0])){D=g.defaultUndefined(q[2],"");for(var v=0;v<q[0].length;v++)w[v]=g.toStringExplicit(q[0][v],D);return 1<q.length?w.join(q[1]):w.join("")}if(g.isImmutableArray(q[0])){D=g.defaultUndefined(q[2],"");for(v=0;v<q[0].length();v++)w[v]=g.toStringExplicit(q[0].get(v),D);return 1<q.length?w.join(q[1]):w.join("")}for(v=0;v<q.length;v++)w[v]=g.toStringExplicit(q[v]);return w.join("")})};x.reverse=
function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,1);if(g.isArray(q[0]))return w=q[0].slice(0),w.reverse(),w;if(g.isImmutableArray(q[0]))return w=q[0].toArray().slice(0),w.reverse(),w;throw Error("Invalid Parameter");})};x.replace=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,3,4);w=g.toString(q[0]);D=g.toString(q[1]);var v=g.toString(q[2]);return(4===q.length?g.toBoolean(q[3]):1)?g.multiReplace(w,D,v):w.replace(D,v)})};x.schema=function(B,F){return A(B,F,function(w,D,q){if(q[0]instanceof
e)return(w=q[0].schema())?k.convertObjectToArcadeDictionary(w):null;throw Error("Invalid Parameter");})};x.subtypes=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,1);if(q[0]instanceof e)return(w=q[0].subtypes())?k.convertObjectToArcadeDictionary(w):null;throw Error("Invalid Parameter");})};x.subtypecode=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,1);if(q[0]instanceof e){D=q[0].subtypes();if(!D)return null;if(D.subtypeField&&q[0].hasField(D.subtypeField))for(q=q[0].field(D.subtypeField),
w=0,D=D.subtypes;w<D.length;w++){var v=D[w];if(v.code===q)return v.code}return null}throw Error("Invalid Parameter");})};x.subtypename=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,1);if(q[0]instanceof e){D=q[0].subtypes();if(!D)return"";if(D.subtypeField&&q[0].hasField(D.subtypeField))for(q=q[0].field(D.subtypeField),w=0,D=D.subtypes;w<D.length;w++){var v=D[w];if(v.code===q)return v.name}return""}throw Error("Invalid Parameter");})};x.gdbversion=function(B,F){return A(B,F,function(w,D,
q){g.pcCheck(q,1,1);if(q[0]instanceof e)return q[0].gdbVersion();throw Error("Invalid Parameter");})};x.domain=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,2,3);if(q[0]instanceof e)return(w=q[0].fullDomain(g.toString(q[1]),void 0===q[2]?void 0:g.toNumber(q[2])))&&w.domain?"coded-value"===w.domain.type||"codedValue"===w.domain.type?k.convertObjectToArcadeDictionary({type:"codedValue",name:w.domain.name,dataType:h.layerFieldEsriConstants[w.field.type],codedValues:w.domain.codedValues.map(function(v){return{name:v.name,
code:v.code}})}):k.convertObjectToArcadeDictionary({type:"range",name:w.domain.name,dataType:h.layerFieldEsriConstants[w.field.type],min:w.domain.min,max:w.domain.max}):null;throw Error("Invalid Parameter");})};x.domainname=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,2,4);if(q[0]instanceof e)return q[0].domainValueLookup(g.toString(q[1]),q[2],void 0===q[3]?void 0:g.toNumber(q[3]));throw Error("Invalid Parameter");})};x.domaincode=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,2,
4);if(q[0]instanceof e)return q[0].domainCodeLookup(g.toString(q[1]),q[2],void 0===q[3]?void 0:g.toNumber(q[3]));throw Error("Invalid Parameter");})};x.urlencode=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,1);if(null===q[0])return"";if(q[0]instanceof k){w="";D=0;for(var v=q[0].keys();D<v.length;D++){var z=v[D],C=q[0].field(z);""!==w&&(w+="\x26");w=null===C?w+(encodeURIComponent(z)+"\x3d"):w+(encodeURIComponent(z)+"\x3d"+encodeURIComponent(C))}return w}return encodeURIComponent(g.toString(q[0]))})};
x.hash=function(B,F){return A(B,F,function(w,D,q){g.pcCheck(q,1,1);w=new m.XXH(0);t(q[0],w,{map:new Map,currentLength:0});return w.digest()})}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(b,y){function r(a){for(var k=[],e=0,g=a.length;e<g;e++){var h=a.charCodeAt(e);128>h?k.push(h):2048>h?k.push(192|h>>6,128|h&63):55296>h||57344<=h?k.push(224|h>>12,128|h>>6&63,128|h&63):(e++,h=65536+((h&1023)<<10|a.charCodeAt(e)&1023),k.push(240|h>>18,128|h>>12&63,128|h>>6&63,128|
h&63))}return new Uint8Array(k)}Object.defineProperty(y,"__esModule",{value:!0});y.XXH=void 0;b=function(){function a(k){this.seed=k;this.totallen=0;this.bufs=[];this.init()}a.prototype.init=function(){this.bufs=[];this.totallen=0;return this};a.prototype.updateFloatArray=function(k){for(var e=[],g=0;g<k.length;g++){var h=k[g];isNaN(h)?e.push("NaN"):Infinity===h?e.push("Infinity"):-Infinity===h?e.push("-Infinity"):0===h?e.push("0"):e.push(h.toString(16))}this.update(r(e.join("")))};a.prototype.updateIntArray=
function(k){k=Int32Array.from(k);this.update(new Uint8Array(k.buffer))};a.prototype.updateUint8Array=function(k){this.update(Uint8Array.from(k))};a.prototype.updateWithString=function(k){return this.update(r(k))};a.prototype.update=function(k){this.bufs.push(k);this.totallen+=k.length;return this};a.prototype.digest=function(){for(var k=new Uint8Array(this.totallen),e=0,g=0,h=this.bufs;g<h.length;g++){var m=h[g];k.set(m,e);e+=m.length}this.init();return this.xxHash32(k,this.seed)};a.prototype.xxHash32=
function(k,e){void 0===e&&(e=0);var g=e+374761393&4294967295,h=0;if(16<=k.length){g=[e+2654435761+2246822519&4294967295,e+2246822519&4294967295,e+0&4294967295,e-2654435761&4294967295];var m=k.length-16;for(h=e=0;(h&4294967280)<=m;h+=4){var l=h,f=k[l+0]+(k[l+1]<<8);l=k[l+2]+(k[l+3]<<8);f=g[e]+(2246822519*f+(2246822519*l<<16))&4294967295;f=f<<13|f>>>19;g[e]=2654435761*(f&65535)+(2654435761*(f>>>16)<<16)&4294967295;e=e+1&3}g=(g[0]<<1|g[0]>>>31)+(g[1]<<7|g[1]>>>25)+(g[2]<<12|g[2]>>>20)+(g[3]<<18|g[3]>>>
14)&4294967295}g=g+k.length&4294967295;for(e=k.length-4;h<=e;h+=4)l=h,f=k[l+0]+(k[l+1]<<8),l=k[l+2]+(k[l+3]<<8),g=g+(3266489917*f+(3266489917*l<<16))&4294967295,g=g<<17|g>>>15,g=668265263*(g&65535)+(668265263*(g>>>16)<<16)&4294967295;for(;h<k.length;++h)e=k[h],g+=374761393*e,g=g<<11|g>>>21,g=2654435761*(g&65535)+(2654435761*(g>>>16)<<16)&4294967295;g^=g>>>15;g=(2246822519*(g&65535)&4294967295)+(2246822519*(g>>>16)<<16);g^=g>>>13;g=(3266489917*(g&65535)&4294967295)+(3266489917*(g>>>16)<<16);g^=g>>>
16;return 0>g?g+4294967296:g};return a}();y.XXH=b})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v,z){function C(oa,ra){for(var ya=[],wa=0;wa<ra.arguments.length;wa++)ya.push(G(oa,ra.arguments[wa]));return ya}function E(oa,ra,ya){try{return ya(oa,ra,C(oa,ra))}catch(wa){throw wa;}}function G(oa,ra){try{switch(ra.type){case "EmptyStatement":return l.voidOperation;case "VariableDeclarator":var ya=null===ra.init?null:G(oa,ra.init);ya===l.voidOperation&&(ya=null);if("Identifier"!==ra.id.type)throw Error("Can only assign a regular variable");var wa=
ra.id.name.toLowerCase();null!==oa.localScope?oa.localScope[wa]={value:ya,valueset:!0,node:ra.init}:oa.globalScope[wa]={value:ya,valueset:!0,node:ra.init};return l.voidOperation;case "VariableDeclaration":for(var la=0;la<ra.declarations.length;la++)G(oa,ra.declarations[la]);return l.voidOperation;case "BlockStatement":a:{var Aa=l.voidOperation;for(la=0;la<ra.body.length;la++)if(Aa=G(oa,ra.body[la]),Aa instanceof l.ReturnResult||Aa===l.breakResult||Aa===l.continueResult){var da=Aa;break a}da=Aa}return da;
case "FunctionDeclaration":var fa=ra.id.name.toLowerCase();oa.globalScope[fa]={valueset:!0,node:null,value:new g(ra,oa)};return l.voidOperation;case "ReturnStatement":if(null===ra.argument)var P=new l.ReturnResult(l.voidOperation);else{var xa=G(oa,ra.argument);P=new l.ReturnResult(xa)}return P;case "IfStatement":if("AssignmentExpression"===ra.test.type||"UpdateExpression"===ra.test.type)throw Error(f.nodeErrorMessage(ra.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var Fa=G(oa,ra.test);if(!0===
Fa)var ba=G(oa,ra.consequent);else if(!1===Fa)ba=null!==ra.alternate?G(oa,ra.alternate):l.voidOperation;else throw Error(f.nodeErrorMessage(ra,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return ba;case "ExpressionStatement":if("AssignmentExpression"===ra.expression.type||"UpdateExpression"===ra.expression.type)var Sa=G(oa,ra.expression);else{var Qa=G(oa,ra.expression);Sa=Qa===l.voidOperation?l.voidOperation:new l.ImplicitResult(Qa)}return Sa;case "AssignmentExpression":var va=G(oa,ra.right);
la=null;var R="";if("MemberExpression"===ra.left.type){la=G(oa,ra.left.object);!0===ra.left.computed?R=G(oa,ra.left.property):"Identifier"===ra.left.property.type&&(R=ra.left.property.name);if(l.isArray(la))if(l.isNumber(R)){0>R&&(R=la.length+R);if(0>R||R>la.length)throw Error("Assignment outside of array bounds");if(R===la.length&&"\x3d"!==ra.operator)throw Error("Invalid Parameter");la[R]=K(va,ra.operator,la[R],ra)}else throw Error("Invalid Parameter");else if(la instanceof k){if(!1===l.isString(R))throw Error("Dictionary accessor must be a string");
if(!0===la.hasField(R))la.setField(R,K(va,ra.operator,la.field(R),ra));else{if("\x3d"!==ra.operator)throw Error("Invalid Parameter");la.setField(R,K(va,ra.operator,null,ra))}}else if(la instanceof e){if(!1===l.isString(R))throw Error("Feature accessor must be a string");if(!0===la.hasField(R))la.setField(R,K(va,ra.operator,la.field(R),ra));else{if("\x3d"!==ra.operator)throw Error("Invalid Parameter");la.setField(R,K(va,ra.operator,null,ra))}}else{if(l.isImmutableArray(la))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var ia=l.voidOperation}else if(la=ra.left.name.toLowerCase(),null!==oa.localScope&&void 0!==oa.localScope[la])oa.localScope[la]={value:K(va,ra.operator,oa.localScope[la].value,ra),valueset:!0,node:ra.right},ia=l.voidOperation;else if(void 0!==oa.globalScope[la])oa.globalScope[la]={value:K(va,ra.operator,oa.globalScope[la].value,ra),valueset:!0,node:ra.right},ia=l.voidOperation;else throw Error("Variable not recognised");return ia;case "UpdateExpression":la=null;R=
"";if("MemberExpression"===ra.argument.type){la=G(oa,ra.argument.object);!0===ra.argument.computed?R=G(oa,ra.argument.property):"Identifier"===ra.argument.property.type&&(R=ra.argument.property.name);if(l.isArray(la))if(l.isNumber(R)){0>R&&(R=la.length+R);if(0>R||R>=la.length)throw Error("Assignment outside of array bounds");var ja=l.toNumber(la[R]);la[R]="++"===ra.operator?ja+1:ja-1}else throw Error("Invalid Parameter");else if(la instanceof k){if(!1===l.isString(R))throw Error("Dictionary accessor must be a string");
if(!0===la.hasField(R))ja=l.toNumber(la.field(R)),la.setField(R,"++"===ra.operator?ja+1:ja-1);else throw Error("Invalid Parameter");}else if(la instanceof e){if(!1===l.isString(R))throw Error("Feature accessor must be a string");if(!0===la.hasField(R))ja=l.toNumber(la.field(R)),la.setField(R,"++"===ra.operator?ja+1:ja-1);else throw Error("Invalid Parameter");}else{if(l.isImmutableArray(la))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var T=!1===ra.prefix?ja:"++"===ra.operator?
ja+1:ja-1}else{la="Identifier"===ra.argument.type?ra.argument.name.toLowerCase():"";if(!la)throw Error("Invalid identifier");if(null!==oa.localScope&&void 0!==oa.localScope[la])ja=l.toNumber(oa.localScope[la].value),oa.localScope[la]={value:"++"===ra.operator?ja+1:ja-1,valueset:!0,node:ra},T=!1===ra.prefix?ja:"++"===ra.operator?ja+1:ja-1;else if(void 0!==oa.globalScope[la])ja=l.toNumber(oa.globalScope[la].value),oa.globalScope[la]={value:"++"===ra.operator?ja+1:ja-1,valueset:!0,node:ra},T=!1===ra.prefix?
ja:"++"===ra.operator?ja+1:ja-1;else throw Error("Variable not recognised");}return T;case "BreakStatement":return l.breakResult;case "ContinueStatement":return l.continueResult;case "TemplateElement":return ra.value?ra.value.cooked:"";case "TemplateLiteral":var ha="",na=0;ia=0;for(la=ra.quasis;ia<la.length;ia++)if(R=la[ia],ha+=R.value?R.value.cooked:"",!1===R.tail){var qa=ra.expressions[na]?l.toString(G(oa,ra.expressions[na])):"";ha+=qa;na++}return ha;case "ForStatement":null!==ra.init&&G(oa,ra.init);
na={testResult:!0,lastAction:l.voidOperation};do b:{la=oa;R=ra;qa=na;if(null!==R.test){qa.testResult=G(la,R.test);if(!1===qa.testResult)break b;if(!0!==qa.testResult)throw Error(f.nodeErrorMessage(R,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}qa.lastAction=G(la,R.body);qa.lastAction===l.breakResult?qa.testResult=!1:qa.lastAction instanceof l.ReturnResult?qa.testResult=!1:null!==R.update&&G(la,R.update)}while(!0===na.testResult);ha=na.lastAction instanceof l.ReturnResult?na.lastAction:l.voidOperation;
return ha;case "ForInStatement":return H(oa,ra);case "Identifier":return S(oa,ra);case "MemberExpression":return J(oa,ra);case "Literal":return ra.value;case "CallExpression":return L(oa,ra);case "UnaryExpression":return Q(oa,ra);case "BinaryExpression":return V(oa,ra);case "LogicalExpression":return O(oa,ra);case "ConditionalExpression":throw Error(f.nodeErrorMessage(ra,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(la=[],R=0;R<ra.elements.length;R++){var ua=G(oa,ra.elements[R]);if(l.isFunctionParameter(ua))throw Error(f.nodeErrorMessage(ra,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));ua===l.voidOperation?la.push(null):la.push(ua)}}catch(Pa){throw Pa;}return la;case "ObjectExpression":la={};for(R=0;R<ra.properties.length;R++){var za=G(oa,ra.properties[R]);if(l.isFunctionParameter(za.value))throw Error("Illegal Argument");if(!1===l.isString(za.key))throw Error("Illegal Argument");la[za.key.toString()]=za.value===l.voidOperation?null:za.value}var Ea=new k(la);Ea.immutable=!1;return Ea;case "Property":return{key:"Identifier"===ra.key.type?ra.key.name:
G(oa,ra.key),value:G(oa,ra.value)};default:throw Error(f.nodeErrorMessage(ra,"RUNTIME","UNREOGNISED"));}}catch(Pa){throw Pa;}}function H(oa,ra){var ya=G(oa,ra.right);"VariableDeclaration"===ra.left.type&&G(oa,ra.left);var wa=null,la="";if("VariableDeclaration"===ra.left.type){var Aa=ra.left.declarations[0].id;"Identifier"===Aa.type&&(la=Aa.name)}else"Identifier"===ra.left.type&&(la=ra.left.name);if(!la)throw Error(f.nodeErrorMessage(ra,"RUNTIME","INVALIDVARIABLE"));la=la.toLowerCase();null!==oa.localScope&&
void 0!==oa.localScope[la]&&(wa=oa.localScope[la]);null===wa&&void 0!==oa.globalScope[la]&&(wa=oa.globalScope[la]);if(null===wa)throw Error(f.nodeErrorMessage(ra,"RUNTIME","VARIABLENOTDECLARED"));if(l.isArray(ya)||l.isString(ya)){ya=ya.length;for(Aa=0;Aa<ya;Aa++){wa.value=Aa;la=G(oa,ra.body);if(la===l.breakResult)break;if(la instanceof l.ReturnResult)return la}return l.voidOperation}if(l.isImmutableArray(ya)){for(Aa=0;Aa<ya.length();Aa++){wa.value=Aa;la=G(oa,ra.body);if(la===l.breakResult)break;if(la instanceof
l.ReturnResult)return la}return l.voidOperation}if(ya instanceof k||ya instanceof e)for(ya=ya.keys(),Aa=0;Aa<ya.length;Aa++){wa.value=ya[Aa];la=G(oa,ra.body);if(la===l.breakResult)break;if(la instanceof l.ReturnResult)return la}else return l.voidOperation}function K(oa,ra,ya,wa){switch(ra){case "\x3d":return oa===l.voidOperation?null:oa;case "/\x3d":return l.toNumber(ya)/l.toNumber(oa);case "*\x3d":return l.toNumber(ya)*l.toNumber(oa);case "-\x3d":return l.toNumber(ya)-l.toNumber(oa);case "+\x3d":return l.isString(ya)||
l.isString(oa)?l.toString(ya)+l.toString(oa):l.toNumber(ya)+l.toNumber(oa);case "%\x3d":return l.toNumber(ya)%l.toNumber(oa);default:throw Error(f.nodeErrorMessage(wa,"RUNTIME","OPERATORNOTRECOGNISED"));}}function I(oa,ra,ya){ra=ra.toLowerCase();switch(ra){case "hasz":return oa=oa.hasZ,void 0===oa?!1:oa;case "hasm":return oa=oa.hasM,void 0===oa?!1:oa;case "spatialreference":return ra=oa.spatialReference._arcadeCacheId,void 0===ra&&(ya=!0,Object.freeze&&Object.isFrozen(oa.spatialReference)&&(ya=!1),
ya&&(pa++,ra=oa.spatialReference._arcadeCacheId=pa)),oa=new k({wkt:oa.spatialReference.wkt,wkid:oa.spatialReference.wkid}),void 0!==ra&&(oa._arcadeCacheId="SPREF"+ra.toString()),oa}switch(oa.type){case "extent":switch(ra){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return oa=oa[ra],void 0!==oa?oa:null;case "type":return"Extent"}break;case "polygon":switch(ra){case "rings":return ra=oa.getCacheValue("_arcadeCacheId"),void 0===ra&&(pa++,ra=pa,oa.setCacheValue("_arcadeCacheId",
ra)),oa=new h(oa.rings,oa.spatialReference,!0===oa.hasZ,!0===oa.hasM,ra);case "type":return"Polygon"}break;case "point":switch(ra){case "x":case "y":case "z":case "m":return void 0!==oa[ra]?oa[ra]:null;case "type":return"Point"}break;case "polyline":switch(ra){case "paths":return ra=oa.getCacheValue("_arcadeCacheId"),void 0===ra&&(pa++,ra=pa,oa.setCacheValue("_arcadeCacheId",ra)),oa=new h(oa.paths,oa.spatialReference,!0===oa.hasZ,!0===oa.hasM,ra);case "type":return"Polyline"}break;case "multipoint":switch(ra){case "points":return ra=
oa.getCacheValue("_arcadeCacheId"),void 0===ra&&(pa++,ra=pa,oa.setCacheValue("_arcadeCacheId",ra)),oa=new m(oa.points,oa.spatialReference,!0===oa.hasZ,!0===oa.hasM,ra,1);case "type":return"Multipoint"}}throw Error(f.nodeErrorMessage(ya,"RUNTIME","PROPERTYNOTFOUND"));}function J(oa,ra){try{var ya=G(oa,ra.object);if(null===ya)throw Error(f.nodeErrorMessage(ra,"RUNTIME","NOTFOUND"));if(!1===ra.computed){if("Identifier"===ra.property.type){if(ya instanceof k||ya instanceof e)return ya.field(ra.property.name);
if(ya instanceof F)return I(ya,ra.property.name,ra)}throw Error(f.nodeErrorMessage(ra,"RUNTIME","INVALIDTYPE"));}var wa=G(oa,ra.property);if(ya instanceof k||ya instanceof e){if(l.isString(wa))return ya.field(wa);throw Error(f.nodeErrorMessage(ra,"RUNTIME","INVALIDTYPE"));}if(ya instanceof F){if(l.isString(wa))return I(ya,wa,ra);throw Error(f.nodeErrorMessage(ra,"RUNTIME","INVALIDTYPE"));}if(l.isArray(ya)){if(l.isNumber(wa)&&isFinite(wa)&&Math.floor(wa)===wa){0>wa&&(wa=ya.length+wa);if(wa>=ya.length||
0>wa)throw Error(f.nodeErrorMessage(ra,"RUNTIME","OUTOFBOUNDS"));return ya[wa]}throw Error(f.nodeErrorMessage(ra,"RUNTIME","INVALIDTYPE"));}if(l.isString(ya)){if(l.isNumber(wa)&&isFinite(wa)&&Math.floor(wa)===wa){0>wa&&(wa=ya.length+wa);if(wa>=ya.length||0>wa)throw Error(f.nodeErrorMessage(ra,"RUNTIME","OUTOFBOUNDS"));return ya[wa]}throw Error(f.nodeErrorMessage(ra,"RUNTIME","INVALIDTYPE"));}if(l.isImmutableArray(ya)&&l.isNumber(wa)&&isFinite(wa)&&Math.floor(wa)===wa){0>wa&&(wa=ya.length()+wa);if(wa>=
ya.length()||0>wa)throw Error(f.nodeErrorMessage(ra,"RUNTIME","OUTOFBOUNDS"));return ya.get(wa)}throw Error(f.nodeErrorMessage(ra,"RUNTIME","INVALIDTYPE"));}catch(la){throw la;}}function Q(oa,ra){try{var ya=G(oa,ra.argument);if(l.isBoolean(ya)){if("!"===ra.operator)return!ya;if("-"===ra.operator)return-1*l.toNumber(ya);if("+"===ra.operator)return 1*l.toNumber(ya);if("~"===ra.operator)return~l.toNumber(ya);throw Error(f.nodeErrorMessage(ra,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===ra.operator)return~l.toNumber(ya);
if("-"===ra.operator)return-1*l.toNumber(ya);if("+"===ra.operator)return 1*l.toNumber(ya);throw Error(f.nodeErrorMessage(ra,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(wa){throw wa;}}function V(oa,ra){try{var ya=[G(oa,ra.left),G(oa,ra.right)],wa=ya[0],la=ya[1];switch(ra.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return l.binaryOperator(l.toNumber(wa),l.toNumber(la),ra.operator);case "\x3d\x3d":return l.equalityTest(wa,la);case "!\x3d":return!l.equalityTest(wa,
la);case "\x3c":return l.greaterThanLessThan(wa,la,ra.operator);case "\x3e":return l.greaterThanLessThan(wa,la,ra.operator);case "\x3c\x3d":return l.greaterThanLessThan(wa,la,ra.operator);case "\x3e\x3d":return l.greaterThanLessThan(wa,la,ra.operator);case "+":return l.isString(wa)||l.isString(la)?l.toString(wa)+l.toString(la):l.toNumber(wa)+l.toNumber(la);case "-":return l.toNumber(wa)-l.toNumber(la);case "*":return l.toNumber(wa)*l.toNumber(la);case "/":return l.toNumber(wa)/l.toNumber(la);case "%":return l.toNumber(wa)%
l.toNumber(la);default:throw Error(f.nodeErrorMessage(ra,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(Aa){throw Aa;}}function O(oa,ra){try{if("AssignmentExpression"===ra.left.type||"UpdateExpression"===ra.left.type)throw Error(f.nodeErrorMessage(ra.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===ra.right.type||"UpdateExpression"===ra.right.type)throw Error(f.nodeErrorMessage(ra.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ya=G(oa,ra.left);if(l.isBoolean(ya))switch(ra.operator){case "||":if(!0===
ya)return ya;var wa=G(oa,ra.right);if(l.isBoolean(wa))return wa;throw Error(f.nodeErrorMessage(ra,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===ya)return ya;wa=G(oa,ra.right);if(l.isBoolean(wa))return wa;throw Error(f.nodeErrorMessage(ra,"RUNTIME","ONLYORORAND"));default:throw Error(f.nodeErrorMessage(ra,"RUNTIME","ONLYORORAND"));}throw Error(f.nodeErrorMessage(ra,"RUNTIME","ONLYBOOLEAN"));}catch(la){throw la;}}function S(oa,ra){try{var ya=ra.name.toLowerCase();if(null!==oa.localScope&&void 0!==
oa.localScope[ya]){var wa=oa.localScope[ya];if(!0===wa.valueset)return wa.value;wa.value=G(oa,wa.node);wa.valueset=!0;return wa.value}if(void 0!==oa.globalScope[ya]){wa=oa.globalScope[ya];if(!0===wa.valueset)return wa.value;wa.value=G(oa,wa.node);wa.valueset=!0;return wa.value}throw Error(f.nodeErrorMessage(ra,"RUNTIME","VARIABLENOTFOUND"));}catch(la){throw la;}}function L(oa,ra){try{if("Identifier"!==ra.callee.type)throw Error(f.nodeErrorMessage(ra,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==oa.localScope&&
void 0!==oa.localScope[ra.callee.name.toLowerCase()]){var ya=oa.localScope[ra.callee.name.toLowerCase()];if(ya.value instanceof l.NativeFunction)return ya.value.fn(oa,ra);if(ya.value instanceof g)return N(oa,ra,ya.value.definition);throw Error(f.nodeErrorMessage(ra,"RUNTIME","NOTAFUNCTION"));}if(void 0!==oa.globalScope[ra.callee.name.toLowerCase()]){ya=oa.globalScope[ra.callee.name.toLowerCase()];if(ya.value instanceof l.NativeFunction)return ya.value.fn(oa,ra);if(ya.value instanceof g)return N(oa,
ra,ya.value.definition);throw Error(f.nodeErrorMessage(ra,"RUNTIME","NOTAFUNCTION"));}throw Error(f.nodeErrorMessage(ra,"RUNTIME","NOTFOUND"));}catch(wa){throw wa;}}function Y(oa){return null==oa?"":l.isArray(oa)||l.isImmutableArray(oa)?"Array":l.isDate(oa)?"Date":l.isString(oa)?"String":l.isBoolean(oa)?"Boolean":l.isNumber(oa)?"Number":oa instanceof a?"Attachment":oa instanceof r?"Portal":oa instanceof k?"Dictionary":oa instanceof e?"Feature":oa instanceof D?"Point":oa instanceof q?"Polygon":oa instanceof
v?"Polyline":oa instanceof w?"Multipoint":oa instanceof B?"Extent":l.isFunctionParameter(oa)?"Function":l.isFeatureSet(oa)?"FeatureSet":l.isFeatureSetCollection(oa)?"FeatureSetCollection":oa===l.voidOperation?"":"number"===typeof oa&&isNaN(oa)?"Number":"Unrecognised Type"}function ca(oa,ra,ya,wa){try{var la=G(oa,ra.arguments[ya]);if(l.equalityTest(la,wa))return G(oa,ra.arguments[ya+1]);var Aa=ra.arguments.length-ya;return 1===Aa?G(oa,ra.arguments[ya]):2===Aa?null:3===Aa?G(oa,ra.arguments[ya+2]):ca(oa,
ra,ya+2,wa)}catch(da){throw da;}}function U(oa,ra,ya,wa){try{if(!0===wa)return G(oa,ra.arguments[ya+1]);if(3===ra.arguments.length-ya)return G(oa,ra.arguments[ya+2]);var la=G(oa,ra.arguments[ya+2]);if(!1===l.isBoolean(la))throw Error("WHEN needs boolean test conditions");return U(oa,ra,ya+2,la)}catch(Aa){throw Aa;}}function X(oa,ra){var ya=oa.length,wa=Math.floor(ya/2);if(0===ya)return[];if(1===ya)return[oa[0]];var la=X(oa.slice(0,wa),ra);oa=X(oa.slice(wa,ya),ra);for(ya=[];0<la.length||0<oa.length;)0<
la.length&&0<oa.length?(wa=ra(la[0],oa[0]),isNaN(wa)&&(wa=0),0>=wa?(ya.push(la[0]),la=la.slice(1)):(ya.push(oa[0]),oa=oa.slice(1))):0<la.length?(ya.push(la[0]),la=la.slice(1)):0<oa.length&&(ya.push(oa[0]),oa=oa.slice(1));return ya}function Z(oa,ra,ya){try{var wa=oa.body;if(ya.length!==oa.params.length)throw Error("Invalid Parameter calls to function.");for(var la=0;la<ya.length;la++)ra.localScope[oa.params[la].name.toLowerCase()]={value:ya[la],valueset:!0,node:null};var Aa=G(ra,wa);if(Aa instanceof
l.ReturnResult)return Aa.value;if(Aa===l.breakResult)throw Error("Cannot Break from a Function");if(Aa===l.continueResult)throw Error("Cannot Continue from a Function");return Aa instanceof l.ImplicitResult?Aa.value:Aa}catch(da){throw da;}}function N(oa,ra,ya){return E(oa,ra,function(wa,la,Aa){wa={spatialReference:oa.spatialReference,globalScope:oa.globalScope,depthCounter:oa.depthCounter+1,console:oa.console,lrucache:oa.lrucache,localScope:{}};if(64<wa.depthCounter)throw Error("Exceeded maximum function depth");
return Z(ya,wa,Aa)})}function aa(oa){return function(){var ra={spatialReference:oa.context.spatialReference,console:oa.context.console,lrucache:oa.context.lrucache,localScope:{},depthCounter:oa.context.depthCounter+1,globalScope:oa.context.globalScope};if(64<ra.depthCounter)throw Error("Exceeded maximum function depth");return Z(oa.definition,ra,arguments)}}function ka(oa){}Object.defineProperty(y,"__esModule",{value:!0});y.findFunctionCalls=y.referencesFunction=y.referencesMember=y.validateScript=
y.extractFieldLiterals=y.executeScript=y.extend=y.functionHelper=void 0;var pa=0,ta={};c.registerFunctions(ta,E);d.registerFunctions(ta,E);A.registerFunctions(ta,E);t.registerFunctions(ta,E);u.registerFunctions(ta,E);x.registerFunctions(ta,E);n.registerFunctions(ta,E);ta["typeof"]=function(oa,ra){return E(oa,ra,function(ya,wa,la){l.pcCheck(la,1,1);ya=Y(la[0]);if("Unrecognised Type"===ya)throw Error("Unrecognised Type");return ya})};ta.iif=function(oa,ra){try{l.pcCheck(null===ra.arguments?[]:ra.arguments,
3,3);var ya=G(oa,ra.arguments[0]);if(!1===l.isBoolean(ya))throw Error("IF Function must have a boolean test condition");var wa=G(oa,ra.arguments[1]),la=G(oa,ra.arguments[2]);return!0===ya?wa:la}catch(Aa){throw Aa;}};ta.decode=function(oa,ra){try{if(2>ra.arguments.length)throw Error("Missing Parameters");if(2===ra.arguments.length)return G(oa,ra.arguments[1]);if(0===(ra.arguments.length-1)%2)throw Error("Must have a default value result.");var ya=G(oa,ra.arguments[0]);return ca(oa,ra,1,ya)}catch(wa){throw wa;
}};ta.when=function(oa,ra){try{if(3>ra.arguments.length)throw Error("Missing Parameters");if(0===ra.arguments.length%2)throw Error("Must have a default value result.");var ya=G(oa,ra.arguments[0]);if(!1===l.isBoolean(ya))throw Error("WHEN needs boolean test conditions");return U(oa,ra,0,ya)}catch(wa){throw wa;}};ta.top=function(oa,ra){return E(oa,ra,function(ya,wa,la){l.pcCheck(la,2,2);if(l.isArray(la[0]))return l.toNumber(la[1])>=la[0].length?la[0].slice(0):la[0].slice(0,l.toNumber(la[1]));if(l.isImmutableArray(la[0]))return l.toNumber(la[1])>=
la[0].length()?la[0].slice(0):la[0].slice(0,l.toNumber(la[1]));throw Error("Top cannot accept this parameter type");})};ta.first=function(oa,ra){return E(oa,ra,function(ya,wa,la){l.pcCheck(la,1,1);return l.isArray(la[0])?0===la[0].length?null:la[0][0]:l.isImmutableArray(la[0])?0===la[0].length()?null:la[0].get(0):null})};ta.sort=function(oa,ra){return E(oa,ra,function(ya,wa,la){l.pcCheck(la,1,2);ya=la[0];l.isImmutableArray(ya)&&(ya=ya.toArray());if(!1===l.isArray(ya))throw Error("Illegal Argument");
if(1<la.length){if(!1===l.isFunctionParameter(la[1]))throw Error("Illegal Argument");var Aa=aa(la[1]);return ya=X(ya,function(P,xa){return Aa(P,xa)})}if(0===ya.length)return[];la={};for(wa=0;wa<ya.length;wa++){var da=Y(ya[wa]);""!==da&&(la[da]=!0)}if(!0===la.Array||!0===la.Dictionary||!0===la.Feature||!0===la.Point||!0===la.Polygon||!0===la.Polyline||!0===la.Multipoint||!0===la.Extent||!0===la.Function)return ya.slice(0);wa=0;da="";for(var fa in la)wa++,da=fa;return ya=1<wa||"String"===da?X(ya,function(P,
xa){if(null===P||void 0===P||P===l.voidOperation)return null===xa||void 0===xa||xa===l.voidOperation?0:1;if(null===xa||void 0===xa||xa===l.voidOperation)return-1;P=l.toString(P);xa=l.toString(xa);return P<xa?-1:P===xa?0:1}):"Number"===da?X(ya,function(P,xa){return P-xa}):"Boolean"===da?X(ya,function(P,xa){return P===xa?0:xa?-1:1}):"Date"===da?X(ya,function(P,xa){return xa-P}):ya.slice(0)})};for(var Ba in ta)ta[Ba]={value:new l.NativeFunction(ta[Ba]),valueset:!0,node:null};var Da=function(){};Da.prototype=
ta;Da.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};Da.prototype.pi={value:Math.PI,valueset:!0,node:null};y.functionHelper={fixSpatialReference:l.fixSpatialReference,parseArguments:C,standardFunction:E};y.extend=function(oa){for(var ra={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:E,evaluateIdentifier:S,arcadeCustomFunctionHandler:aa},ya=0;ya<oa.length;ya++)oa[ya].registerFunctions(ra);for(var wa in ra.functions)ta[wa]={value:new l.NativeFunction(ra.functions[wa]),
valueset:!0,node:null},Da.prototype[wa]=ta[wa];for(ya=0;ya<ra.signatures.length;ya++)f.addFunctionDeclaration(ra.signatures[ya],"async")};y.executeScript=function(oa,ra){var ya=ra.spatialReference;if(null===ya||void 0===ya)ya=new z({wkid:102100});var wa=ra.vars,la=ra.customfunctions,Aa=new Da;wa||(wa={});la||(la={});var da=new k({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});da.immutable=!1;Aa.textformatting={value:da,valueset:!0,node:null};for(var fa in la)Aa[fa]=
{value:new l.NativeFunction(la[fa]),native:!0,valueset:!0,node:null};for(fa in wa)Aa[fa]=wa[fa]&&"esri.Graphic"===wa[fa].declaredClass?{value:e.createFromGraphic(wa[fa]),valueset:!0,node:null}:{value:wa[fa],valueset:!0,node:null};oa=G({spatialReference:ya,globalScope:Aa,localScope:null,console:ra.console?ra.console:ka,lrucache:ra.lrucache,depthCounter:1},oa.body[0].body);oa instanceof l.ReturnResult&&(oa=oa.value);oa instanceof l.ImplicitResult&&(oa=oa.value);oa===l.voidOperation&&(oa=null);if(oa===
l.breakResult)throw Error("Cannot return BREAK");if(oa===l.continueResult)throw Error("Cannot return CONTINUE");if(oa instanceof g)throw Error("Cannot return FUNCTION");if(oa instanceof l.NativeFunction)throw Error("Cannot return FUNCTION");return oa};y.extractFieldLiterals=function(oa,ra){void 0===ra&&(ra=!1);return f.findFieldLiterals(oa)};y.validateScript=function(oa,ra){return f.validateScript(oa,ra,"simple")};y.referencesMember=function(oa,ra){return f.referencesMember(oa,ra)};y.referencesFunction=
function(oa,ra){return f.referencesFunction(oa,ra)};y.findFunctionCalls=function(oa){return f.findFunctionCalls(oa)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(b,y,r,a){Object.defineProperty(y,"__esModule",{value:!0});y.referencesFunction=y.referencesMember=y.validateScript=y.extractFieldLiterals=y.scriptCheck=y.parseScript=void 0;y.parseScript=function(k,e){void 0===e&&(e=[]);k=a.parse("function _() { "+k+"\n}");if(null===k.body||void 0===
k.body)throw Error("No formula provided.");if(0===k.body.length)throw Error("No formula provided.");if(0===k.body.length)throw Error("No formula provided.");if("BlockStatement"!==k.body[0].body.type)throw Error("Invalid formula content.");var g=r.validateLanguage(k);if(""!==g)throw Error(g);r.findScriptDependencies(k,e);return k};y.scriptCheck=function(k,e,g,h,m){var l=[];k="function _() { \n"+k+"\n}";try{var f=a.parse(k,{tolerant:!0,loc:!0,range:!0}),c=f.errors;if(0<c.length)for(var d=0;d<c.length;d++)l.push({line:c[d].lineNumber-
2,character:c[d].column,reason:c[d].description});var u=r.checkScript(f,e,g,h,m);for(e=0;e<u.length;e++)u[e].line-=2,u[e].range&&(u[e].range=[u[e][0]-15,u[e][1]-15]),u[e].loc&&(u[e].loc.start.line-=2,u[e].loc.end.line-=2),l.push(u[e])}catch(t){try{if("Unexpected token }"===t.description){var n=k.split("\n").length;t.lineNumber===n?(t.index=k.length-1,l.push({line:t.lineNumber-4,character:t.column,reason:"Unexpected end of script"})):(t.index=k.length-1,l.push({line:t.lineNumber-2,character:t.column,
reason:"Unexpected end of script"}))}else l.push({line:t.lineNumber-2,character:t.column,reason:t.description})}catch(x){}}return l};y.extractFieldLiterals=function(k,e){void 0===e&&(e=!1);return r.findFieldLiterals(k)};y.validateScript=function(k,e,g){return r.validateScript(k,e,g)};y.referencesMember=function(k,e){return r.referencesMember(k,e)};y.referencesFunction=function(k,e){return r.referencesFunction(k,e)}})},"esri/arcade/lib/esprima":function(){define("require exports ./comment-handler ./parser ./tokenizer ./syntax".split(" "),
function(b,y,r,a,k,e){function g(h,m,l){var f=null,c=function(t,x){l&&l(t,x);f&&f.visit(t,x)},d="function"===typeof l?c:null,u=!1;if(m){u="boolean"===typeof m.comment&&m.comment;var n="boolean"===typeof m.attachComment&&m.attachComment;if(u||n)f=new r.CommentHandler,f.attach=n,m.comment=!0,d=c}h=new a.Parser(h,m,d);m=h.parseScript();u&&f&&(m.comments=f.comments);h.config.tokens&&(m.tokens=h.tokens);h.config.tolerant&&(m.errors=h.errorHandler.errors);return m}Object.defineProperty(y,"__esModule",{value:!0});
y.version=y.tokenize=y.parseScript=y.parse=void 0;y.parse=g;y.parseScript=function(h,m,l){m=m||{};m.sourceType="script";return g(h,m,l)};y.tokenize=function(h,m,l){h=new k.Tokenizer(h,m);m=[];try{for(;;){var f=h.getNextToken();if(!f)break;l&&(f=l(f));m.push(f)}}catch(c){h.errorHandler.tolerate(c)}h.errorHandler.tolerant&&(m.errors=h.errors());return m};Object.defineProperty(y,"Syntax",{enumerable:!0,get:function(){return e.Syntax}});y.version="4.0.0-dev"})},"esri/arcade/lib/comment-handler":function(){define(["require",
"exports","./syntax"],function(b,y,r){Object.defineProperty(y,"__esModule",{value:!0});y.CommentHandler=void 0;b=function(){function a(){this.attach=!1;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}a.prototype.insertInnerComments=function(k,e){if(k.type===r.Syntax.BlockStatement&&0===k.body.length){for(var g=[],h=this.leading.length-1;0<=h;--h){var m=this.leading[h];e.end.offset>=m.start&&(g.unshift(m.comment),this.leading.splice(h,1),this.trailing.splice(h,1))}g.length&&(k.innerComments=
g)}};a.prototype.findTrailingComments=function(k){var e=[];if(0<this.trailing.length){for(var g=this.trailing.length-1;0<=g;--g){var h=this.trailing[g];h.start>=k.end.offset&&e.unshift(h.comment)}this.trailing.length=0;return e}(g=this.stack[this.stack.length-1])&&g.node.trailingComments&&(h=g.node.trailingComments[0])&&h.range[0]>=k.end.offset&&(e=g.node.trailingComments,delete g.node.trailingComments);return e};a.prototype.findLeadingComments=function(k){for(var e=[],g;0<this.stack.length;){var h=
this.stack[this.stack.length-1];if(h&&h.start>=k.start.offset)g=h.node,this.stack.pop();else break}if(g){for(var m=(g.leadingComments?g.leadingComments.length:0)-1;0<=m;--m)h=g.leadingComments[m],h.range[1]<=k.start.offset&&(e.unshift(h),g.leadingComments.splice(m,1));g.leadingComments&&0===g.leadingComments.length&&delete g.leadingComments;return e}for(m=this.leading.length-1;0<=m;--m)h=this.leading[m],h.start<=k.start.offset&&(e.unshift(h.comment),this.leading.splice(m,1));return e};a.prototype.visitNode=
function(k,e){if(!(k.type===r.Syntax.Program&&0<k.body.length)){this.insertInnerComments(k,e);var g=this.findTrailingComments(e),h=this.findLeadingComments(e);0<h.length&&(k.leadingComments=h);0<g.length&&(k.trailingComments=g);this.stack.push({node:k,start:e.start.offset})}};a.prototype.visitComment=function(k,e){var g="L"===k.type[0]?"Line":"Block",h={type:g,value:k.value};k.range&&(h.range=k.range);k.loc&&(h.loc=k.loc);this.comments.push(h);this.attach&&(e={comment:{type:g,value:k.value,range:[e.start.offset,
e.end.offset]},start:e.start.offset},k.loc&&(e.comment.loc=k.loc),k.type=g,this.leading.push(e),this.trailing.push(e))};a.prototype.visit=function(k,e){"LineComment"===k.type?this.visitComment(k,e):"BlockComment"===k.type?this.visitComment(k,e):this.attach&&this.visitNode(k,e)};return a}();y.CommentHandler=b})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.Syntax=void 0;y.Syntax={AssignmentExpression:"AssignmentExpression",
AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",
Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",
VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement"}})},"esri/arcade/lib/parser":function(){define("require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(b,y,r,a,k,e,g,h,m){Object.defineProperty(y,"__esModule",{value:!0});y.Parser=void 0;b=function(){function l(f,c,d){void 0===c&&(c={});this.config={range:"boolean"===typeof c.range&&c.range,loc:"boolean"===typeof c.loc&&c.loc,source:null,tokens:"boolean"===typeof c.tokens&&
c.tokens,comment:"boolean"===typeof c.comment&&c.comment,tolerant:"boolean"===typeof c.tolerant&&c.tolerant};this.config.loc&&c.source&&null!==c.source&&(this.config.source=String(c.source));this.delegate=d;this.errorHandler=new a.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new g.Scanner(f,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,
"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={isModule:!1,allowIn:!0,allowStrictDirective:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1};this.tokens=[];this.startMarker=
{index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}l.prototype.throwError=function(f){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];var u=c.slice();c=f.replace(/%(\d)/g,function(n,t){r.assert(t<u.length,"Message reference must be in range");return u[t]});throw this.errorHandler.createError(this.lastMarker.index,
this.lastMarker.line,this.lastMarker.column+1,c);};l.prototype.tolerateError=function(f){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];var u=c.slice();c=f.replace(/%(\d)/g,function(n,t){r.assert(t<u.length,"Message reference must be in range");return u[t]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,c)};l.prototype.unexpectedTokenError=function(f,c){var d=c||k.Messages.UnexpectedToken;f?(c||(d=2===f.type?k.Messages.UnexpectedEOS:
3===f.type?k.Messages.UnexpectedIdentifier:6===f.type?k.Messages.UnexpectedNumber:8===f.type?k.Messages.UnexpectedString:10===f.type?k.Messages.UnexpectedTemplate:k.Messages.UnexpectedToken,4===f.type&&(this.scanner.isFutureReservedWord(f.value)?d=k.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(f.value)&&(d=k.Messages.StrictReservedWord))),c=f.value):c="ILLEGAL";d=d.replace("%0",c);if(f&&"number"===typeof f.lineNumber){c=f.start;var u=f.lineNumber;f=f.start-
(this.lastMarker.index-this.lastMarker.column)+1;return this.errorHandler.createError(c,u,f,d)}c=this.lastMarker.index;u=this.lastMarker.line;f=this.lastMarker.column+1;return this.errorHandler.createError(c,u,f,d)};l.prototype.throwUnexpectedToken=function(f,c){throw this.unexpectedTokenError(f,c);};l.prototype.tolerateUnexpectedToken=function(f,c){this.errorHandler.tolerate(this.unexpectedTokenError(f,c))};l.prototype.collectComments=function(){if(this.config.comment){var f=this.scanner.scanComments();
if(0<f.length&&this.delegate)for(var c=0;c<f.length;++c){var d=f[c],u={type:d.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(d.slice[0],d.slice[1])};this.config.range&&(u.range=d.range);this.config.loc&&(u.loc=d.loc);this.delegate(u,{start:{line:d.loc.start.line,column:d.loc.start.column,offset:d.range[0]},end:{line:d.loc.end.line,column:d.loc.end.column,offset:d.range[1]}})}}else this.scanner.scanComments()};l.prototype.getTokenRaw=function(f){return this.scanner.source.slice(f.start,
f.end)};l.prototype.convertToken=function(f){var c={type:m.TokenName[f.type],value:this.getTokenRaw(f)};this.config.range&&(c.range=[f.start,f.end]);this.config.loc&&(c.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});9===f.type&&(c.regex={pattern:f.pattern,flags:f.flags});return c};l.prototype.nextToken=function(){var f=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=
this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var c=this.scanner.lex();this.hasLineTerminator=f.lineNumber!==c.lineNumber;c&&this.context.strict&&3===c.type&&this.scanner.isStrictModeReservedWord(c.value)&&(c.type=4);this.lookahead=c;
this.config.tokens&&2!==c.type&&this.tokens.push(this.convertToken(c));return f};l.prototype.nextRegexToken=function(){this.collectComments();var f=this.scanner.scanRegExp();this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(f)));this.lookahead=f;this.nextToken();return f};l.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};l.prototype.startNode=function(f,c){void 0===c&&(c=0);var d=f.start-f.lineStart,
u=f.lineNumber;0>d&&(d+=c,u--);return{index:f.start,line:u,column:d}};l.prototype.finalize=function(f,c){this.config.range&&(c.range=[f.index,this.lastMarker.index]);this.config.loc&&(c.loc={start:{line:f.line,column:f.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(c.loc.source=this.config.source));this.delegate&&this.delegate(c,{start:{line:f.line,column:f.column,offset:f.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});
return c};l.prototype.expect=function(f){var c=this.nextToken();7===c.type&&c.value===f||this.throwUnexpectedToken(c)};l.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var f=this.lookahead;7===f.type&&","===f.value?this.nextToken():7===f.type&&";"===f.value?(this.nextToken(),this.tolerateUnexpectedToken(f)):this.tolerateUnexpectedToken(f,k.Messages.UnexpectedToken)}else this.expect(",")};l.prototype.expectKeyword=function(f){var c=this.nextToken();4===c.type&&c.value.toLowerCase()===
f.toLowerCase()||this.throwUnexpectedToken(c)};l.prototype.match=function(f){return 7===this.lookahead.type&&this.lookahead.value===f};l.prototype.matchKeyword=function(f){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===f.toLowerCase()};l.prototype.matchContextualKeyword=function(f){return 3===this.lookahead.type&&this.lookahead.value===f};l.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var f=this.lookahead.value;return"\x3d"===f||"*\x3d"===f||"**\x3d"===
f||"/\x3d"===f||"%\x3d"===f||"+\x3d"===f||"-\x3d"===f||"\x3c\x3c\x3d"===f||"\x3e\x3e\x3d"===f||"\x3e\x3e\x3e\x3d"===f||"\x26\x3d"===f||"^\x3d"===f||"|\x3d"===f};l.prototype.isolateCoverGrammar=function(f){var c=this.context.isBindingElement,d=this.context.isAssignmentTarget,u=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;f=f.call(this);null!==this.context.firstCoverInitializedNameError&&
this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=c;this.context.isAssignmentTarget=d;this.context.firstCoverInitializedNameError=u;return f};l.prototype.inheritCoverGrammar=function(f){var c=this.context.isBindingElement,d=this.context.isAssignmentTarget,u=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;f=f.call(this);this.context.isBindingElement=
this.context.isBindingElement&&c;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&d;this.context.firstCoverInitializedNameError=u||this.context.firstCoverInitializedNameError;return f};l.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)};
l.prototype.parsePrimaryExpression=function(){var f=this.createNode();switch(this.lookahead.type){case 3:f=this.finalize(f,new e.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,k.Messages.StrictOctalLiteral);this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var c=this.nextToken();var d=this.getTokenRaw(c);f=this.finalize(f,new e.Literal(c.value,d));break;case 1:this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;c=this.nextToken();d=this.getTokenRaw(c);f=this.finalize(f,new e.Literal("true"===c.value.toLowerCase(),d));break;case 5:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;c=this.nextToken();d=this.getTokenRaw(c);f=this.finalize(f,new e.Literal(null,d));break;case 10:f=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;f=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":f=
this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":f=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:f=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;f=this.matchKeyword("function")?this.parseFunctionExpression():this.throwUnexpectedToken(this.nextToken());break;default:f=this.throwUnexpectedToken(this.nextToken())}return f};l.prototype.parseArrayInitializer=function(){var f=this.createNode(),
c=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),c.push(null)):(c.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(f,new e.ArrayExpression(c))};l.prototype.parsePropertyMethod=function(f){this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var c=this.context.strict,d=this.context.allowStrictDirective;this.context.allowStrictDirective=f.simple;var u=this.isolateCoverGrammar(this.parseFunctionSourceElements);
this.context.strict&&f.firstRestricted&&this.tolerateUnexpectedToken(f.firstRestricted,f.message);this.context.strict&&f.stricted&&this.tolerateUnexpectedToken(f.stricted,f.message);this.context.strict=c;this.context.allowStrictDirective=d;return u};l.prototype.parsePropertyMethodFunction=function(){var f=this.createNode(),c=this.parseFormalParameters(),d=this.parsePropertyMethod(c);return this.finalize(f,new e.FunctionExpression(null,c.params,d,!1))};l.prototype.parseObjectPropertyKey=function(){var f=
this.createNode(),c=this.nextToken();switch(c.type){case 8:case 6:this.context.strict&&c.octal&&this.tolerateUnexpectedToken(c,k.Messages.StrictOctalLiteral);var d=this.getTokenRaw(c);f=this.finalize(f,new e.Literal(c.value,d));break;case 3:case 1:case 5:case 4:f=this.finalize(f,new e.Identifier(c.value));break;case 7:"["===c.value?(f=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):f=this.throwUnexpectedToken(c);break;default:f=this.throwUnexpectedToken(c)}return f};l.prototype.isPropertyKey=
function(f,c){return f.type===h.Syntax.Identifier&&f.name===c||f.type===h.Syntax.Literal&&f.value===c};l.prototype.parseObjectProperty=function(f){var c=this.createNode(),d=this.lookahead,u=null,n=null,t=!1,x=!1,A=!1,B=!1;if(3===d.type){var F=d.value;this.nextToken();t=this.match("[");u=(B=!this.hasLineTerminator&&"async"===F&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","))?this.parseObjectPropertyKey():this.finalize(c,new e.Identifier(F))}else this.match("*")?this.nextToken():
(t=this.match("["),u=this.parseObjectPropertyKey());u||this.throwUnexpectedToken(this.lookahead);this.match(":")&&!B?(!t&&this.isPropertyKey(u,"__proto__")&&(f.value&&this.tolerateError(k.Messages.DuplicateProtoProperty),f.value=!0),this.nextToken(),n=this.inheritCoverGrammar(this.parseAssignmentExpression)):this.match("(")?(n=this.parsePropertyMethodFunction(),x=!0):3===d.type?(F=this.finalize(c,new e.Identifier(d.value)),this.match("\x3d")?(this.context.firstCoverInitializedNameError=this.lookahead,
this.nextToken(),A=!0,f=this.isolateCoverGrammar(this.parseAssignmentExpression),n=this.finalize(c,new e.AssignmentPattern(F,f))):(A=!0,n=F)):this.throwUnexpectedToken(this.nextToken());return this.finalize(c,new e.Property("init",u,t,n,x,A))};l.prototype.parseObjectInitializer=function(){var f=this.createNode();this.expect("{");for(var c=[],d={value:!1};!this.match("}");)c.push(this.parseObjectProperty(d)),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(f,new e.ObjectExpression(c))};
l.prototype.parseTemplateHead=function(){r.assert(this.lookahead.head,"Template literal must start with a template head");var f=this.createNode(),c=this.nextToken();return this.finalize(f,new e.TemplateElement({raw:c.value,cooked:c.cooked},c.tail))};l.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var f=this.createNode(),c=this.nextToken();return this.finalize(f,new e.TemplateElement({raw:c.value,cooked:c.cooked},c.tail))};l.prototype.parseTemplateLiteral=
function(){var f=this.createNode(),c=[],d=[],u=this.parseTemplateHead();for(d.push(u);!u.tail;)c.push(this.parseExpression()),u=this.parseTemplateElement(),d.push(u);return this.finalize(f,new e.TemplateLiteral(d,c))};l.prototype.reinterpretExpressionAsPattern=function(f){switch(f.type){case h.Syntax.ArrayExpression:f.type=h.Syntax.ArrayPattern;for(var c=0;c<f.elements.length;c++)null!==f.elements[c]&&this.reinterpretExpressionAsPattern(f.elements[c]);break;case h.Syntax.ObjectExpression:f.type=h.Syntax.ObjectPattern;
for(c=0;c<f.properties.length;c++)this.reinterpretExpressionAsPattern(f.properties[c].value);break;case h.Syntax.AssignmentExpression:f.type=h.Syntax.AssignmentPattern,delete f.operator,this.reinterpretExpressionAsPattern(f.left)}};l.prototype.parseGroupExpression=function(){this.expect("(");if(this.match(")")){this.nextToken();this.match("\x3d\x3e")||this.expect("\x3d\x3e");var f={type:"ArrowParameterPlaceHolder",params:[],async:!1}}else{var c=this.lookahead,d=!1;this.context.isBindingElement=!0;
f=this.inheritCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var u=[];this.context.isAssignmentTarget=!1;for(u.push(f);2!==this.lookahead.type&&this.match(",");){this.nextToken();if(this.match(")")){this.nextToken();for(d=0;d<u.length;d++)this.reinterpretExpressionAsPattern(u[d]);d=!0;f={type:"ArrowParameterPlaceHolder",params:u,async:!1}}else u.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(d)break}d||(f=this.finalize(this.startNode(c),new e.SequenceExpression(u)))}if(!d){this.expect(")");
if(this.match("\x3d\x3e")&&(f.type===h.Syntax.Identifier&&"yield"===f.name&&(d=!0,f={type:"ArrowParameterPlaceHolder",params:[f],async:!1}),!d)){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead);if(f.type===h.Syntax.SequenceExpression)for(d=0;d<f.expressions.length;d++)this.reinterpretExpressionAsPattern(f.expressions[d]);else this.reinterpretExpressionAsPattern(f);f={type:"ArrowParameterPlaceHolder",params:f.type===h.Syntax.SequenceExpression?f.expressions:[f],async:!1}}this.context.isBindingElement=
!1}}return f};l.prototype.parseArguments=function(){this.expect("(");var f=[];if(!this.match(")"))for(;;){var c=this.isolateCoverGrammar(this.parseAssignmentExpression);f.push(c);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return f};l.prototype.isIdentifierName=function(f){return 3===f.type||4===f.type||1===f.type||5===f.type};l.prototype.parseIdentifierName=function(){var f=this.createNode(),c=this.nextToken();this.isIdentifierName(c)||this.throwUnexpectedToken(c);
return this.finalize(f,new e.Identifier(c.value))};l.prototype.parseLeftHandSideExpressionAllowCall=function(){var f=this.lookahead,c=this.context.allowIn;this.context.allowIn=!0;var d;for(d=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect(".");var u=this.parseIdentifierName();d=this.finalize(this.startNode(f),new e.StaticMemberExpression(d,u))}else if(this.match("("))this.context.isBindingElement=
!1,this.context.isAssignmentTarget=!1,u=this.parseArguments(),d=this.finalize(this.startNode(f),new e.CallExpression(d,u));else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),u=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),d=this.finalize(this.startNode(f),new e.ComputedMemberExpression(d,u));else break;this.context.allowIn=c;return d};l.prototype.parseLeftHandSideExpression=function(){r.assert(this.context.allowIn,"callee of new expression always allow in keyword.");
for(var f=this.startNode(this.lookahead),c=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var d=this.isolateCoverGrammar(this.parseExpression);this.expect("]");c=this.finalize(f,new e.ComputedMemberExpression(c,d))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),d=this.parseIdentifierName(),c=this.finalize(f,new e.StaticMemberExpression(c,
d));else break;return c};l.prototype.parseUpdateExpression=function(){var f=this.lookahead;if(this.match("++")||this.match("--")){f=this.startNode(f);var c=this.nextToken();var d=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.strict&&d.type===h.Syntax.Identifier&&this.scanner.isRestrictedWord(d.name)&&this.tolerateError(k.Messages.StrictLHSPrefix);this.context.isAssignmentTarget||this.tolerateError(k.Messages.InvalidLHSInAssignment);d=this.finalize(f,new e.UpdateExpression(c.value,
d,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else d=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||7!==this.lookahead.type||!this.match("++")&&!this.match("--")||(this.context.strict&&d.type===h.Syntax.Identifier&&this.scanner.isRestrictedWord(d.name)&&this.tolerateError(k.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(k.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=
!1,c=this.nextToken().value,d=this.finalize(this.startNode(f),new e.UpdateExpression(c,d,!1)));return d};l.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var f=this.startNode(this.lookahead),c=this.nextToken();var d=this.inheritCoverGrammar(this.parseUnaryExpression);d=this.finalize(f,new e.UnaryExpression(c.value,d));this.context.strict&&"delete"===
d.operator&&d.argument.type===h.Syntax.Identifier&&this.tolerateError(k.Messages.StrictDelete);this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else d=this.parseUpdateExpression();return d};l.prototype.parseExponentiationExpression=function(){var f=this.lookahead,c=this.inheritCoverGrammar(this.parseUnaryExpression);if(c.type!==h.Syntax.UnaryExpression&&this.match("**")){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var d=this.isolateCoverGrammar(this.parseExponentiationExpression);
c=this.finalize(this.startNode(f),new e.BinaryExpression("**",c,d))}return c};l.prototype.binaryPrecedence=function(f){var c=f.value;return 7===f.type?this.operatorPrecedence[c]||0:4===f.type?"instanceof"===c||this.context.allowIn&&"in"===c?7:0:0};l.prototype.parseBinaryExpression=function(){var f=this.lookahead,c=this.inheritCoverGrammar(this.parseExponentiationExpression),d=this.lookahead,u=this.binaryPrecedence(d);if(0<u){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=
!1;f=[f,this.lookahead];var n=this.isolateCoverGrammar(this.parseExponentiationExpression);d=[c,d.value,n];for(var t=[u];;){u=this.binaryPrecedence(this.lookahead);if(0>=u)break;for(;2<d.length&&u<=t[t.length-1];){n=d.pop();var x=d.pop();t.pop();c=d.pop();f.pop();var A=f[f.length-1],B=this.startNode(A,A.lineStart);d.push(this.finalize(B,new e.BinaryExpression(x,c,n)))}d.push(this.nextToken().value);t.push(u);f.push(this.lookahead);d.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}u=
d.length-1;c=d[u];for(x=f.pop();1<u;)A=f.pop(),B=this.startNode(A,x&&x.lineStart),x=d[u-1],c=this.finalize(B,new e.BinaryExpression(x,d[u-2],c)),u-=2,x=A}return c};l.prototype.parseConditionalExpression=function(){var f=this.lookahead,c=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var d=this.context.allowIn;this.context.allowIn=!0;var u=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=d;this.expect(":");d=this.isolateCoverGrammar(this.parseAssignmentExpression);
c=this.finalize(this.startNode(f),new e.ConditionalExpression(c,u,d));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}return c};l.prototype.checkPatternParam=function(f,c){switch(c.type){case h.Syntax.Identifier:this.validateParam(f,c,c.name);break;case h.Syntax.AssignmentPattern:this.checkPatternParam(f,c.left);break;case h.Syntax.ArrayPattern:for(var d=0;d<c.elements.length;d++)null!==c.elements[d]&&this.checkPatternParam(f,c.elements[d]);break;case h.Syntax.ObjectPattern:for(d=
0;d<c.properties.length;d++)this.checkPatternParam(f,c.properties[d].value)}f.simple=f.simple&&c instanceof e.Identifier};l.prototype.reinterpretAsCoverFormalsList=function(f){var c=[f],d={simple:!0,paramSet:{}};switch(f.type){case h.Syntax.Identifier:break;default:return null}for(f=0;f<c.length;++f){var u=c[f];this.checkPatternParam(d,u);c[f]=u}d.message===k.Messages.StrictParamDupe&&this.throwUnexpectedToken(this.context.strict?d.stricted:d.firstRestricted,d.message);return{simple:d.simple,params:c,
stricted:d.stricted,firstRestricted:d.firstRestricted,message:d.message}};l.prototype.parseAssignmentExpression=function(){var f=this.lookahead,c=f;var d=this.parseConditionalExpression();if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(k.Messages.InvalidLHSInAssignment);if(this.context.strict&&d.type===h.Syntax.Identifier){var u=d;this.scanner.isRestrictedWord(u.name)&&this.tolerateUnexpectedToken(c,k.Messages.StrictLHSAssignment);this.scanner.isStrictModeReservedWord(u.name)&&
this.tolerateUnexpectedToken(c,k.Messages.StrictReservedWord)}this.match("\x3d")?this.reinterpretExpressionAsPattern(d):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);c=this.nextToken();c=c.value;u=this.isolateCoverGrammar(this.parseAssignmentExpression);d=this.finalize(this.startNode(f),new e.AssignmentExpression(c,d,u));this.context.firstCoverInitializedNameError=null}return d};l.prototype.parseExpression=function(){var f=this.lookahead,c=this.isolateCoverGrammar(this.parseAssignmentExpression);
if(this.match(",")){var d=[];for(d.push(c);2!==this.lookahead.type&&this.match(",");)this.nextToken(),d.push(this.isolateCoverGrammar(this.parseAssignmentExpression));c=this.finalize(this.startNode(f),new e.SequenceExpression(d))}return c};l.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(4===this.lookahead.type)switch(this.lookahead.value){case "function":var f=this.parseFunctionDeclaration();break;default:f=this.parseStatement()}else f=
this.parseStatement();return f};l.prototype.parseBlock=function(){var f=this.createNode();this.expect("{");for(var c=[];!this.match("}");)c.push(this.parseStatementListItem());this.expect("}");return this.finalize(f,new e.BlockStatement(c))};l.prototype.parseBlockOrObjectInitialiser=function(){var f=this.createNode();this.expect("{");if(3===this.lookahead.type||8===this.lookahead.type){var c=this.scanner.saveState();this.scanner.scanComments();var d=this.scanner.lex();this.scanner.restoreState(c);
if(7===d.type&&":"===d.value){c=[];for(d={value:!1};!this.match("}");)c.push(this.parseObjectProperty(d)),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(f,new e.ObjectExpression(c))}}for(c=[];!this.match("}");)c.push(this.parseStatementListItem());this.expect("}");return this.finalize(f,new e.BlockStatement(c))};l.prototype.parseLexicalBinding=function(f,c){var d=this.createNode();f=this.parsePattern([],f);this.context.strict&&f.type===h.Syntax.Identifier&&this.scanner.isRestrictedWord(f.name)&&
this.tolerateError(k.Messages.StrictVarName);var u=null;if(!c.inFor&&f.type!==h.Syntax.Identifier||this.match("\x3d"))this.expect("\x3d"),u=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize(d,new e.VariableDeclarator(f,u))};l.prototype.parseBindingList=function(f,c){for(var d=[this.parseLexicalBinding(f,c)];this.match(",");)this.nextToken(),d.push(this.parseLexicalBinding(f,c));return d};l.prototype.parseArrayPattern=function(f,c){var d=this.createNode();this.expect("[");
for(var u=[];!this.match("]");)this.match(",")?(this.nextToken(),u.push(null)):(u.push(this.parsePatternWithDefault(f,c)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(d,new e.ArrayPattern(u))};l.prototype.parsePropertyPattern=function(f,c){var d=this.createNode(),u=!1,n=!1;if(3===this.lookahead.type){var t=this.lookahead;var x=this.parseVariableIdentifier();var A=this.finalize(d,new e.Identifier(t.value));this.match("\x3d")?(f.push(t),n=!0,this.nextToken(),f=this.parseAssignmentExpression(),
t=this.finalize(this.startNode(t),new e.AssignmentPattern(A,f))):this.match(":")?(this.expect(":"),t=this.parsePatternWithDefault(f,c)):(f.push(t),n=!0,t=A)}else u=this.match("["),x=this.parseObjectPropertyKey(),this.expect(":"),t=this.parsePatternWithDefault(f,c);return this.finalize(d,new e.Property("init",x,u,t,!1,n))};l.prototype.parseObjectPattern=function(f,c){var d=this.createNode(),u=[];for(this.expect("{");!this.match("}");)u.push(this.parsePropertyPattern(f,c)),this.match("}")||this.expect(",");
this.expect("}");return this.finalize(d,new e.ObjectPattern(u))};l.prototype.parsePattern=function(f,c){this.match("[")?f=this.parseArrayPattern(f,c):this.match("{")?f=this.parseObjectPattern(f,c):(!this.matchKeyword("let")||"const"!==c&&"let"!==c||this.tolerateUnexpectedToken(this.lookahead,k.Messages.LetInLexicalBinding),f.push(this.lookahead),f=this.parseVariableIdentifier(c));return f};l.prototype.parsePatternWithDefault=function(f,c){var d=this.lookahead;f=this.parsePattern(f,c);this.match("\x3d")&&
(this.nextToken(),c=this.isolateCoverGrammar(this.parseAssignmentExpression),f=this.finalize(this.startNode(d),new e.AssignmentPattern(f,c)));return f};l.prototype.parseVariableIdentifier=function(f){var c=this.createNode(),d=this.nextToken();3!==d.type&&(this.context.strict&&4===d.type&&this.scanner.isStrictModeReservedWord(d.value)?this.tolerateUnexpectedToken(d,k.Messages.StrictReservedWord):(this.context.strict||"let"!==d.value||"var"!==f)&&this.throwUnexpectedToken(d));return this.finalize(c,
new e.Identifier(d.value))};l.prototype.parseVariableDeclaration=function(f){var c=this.createNode(),d=this.parsePattern([],"var");this.context.strict&&d.type===h.Syntax.Identifier&&this.scanner.isRestrictedWord(d.name)&&this.tolerateError(k.Messages.StrictVarName);var u=null;this.match("\x3d")?(this.nextToken(),u=this.isolateCoverGrammar(this.parseAssignmentExpression)):d.type===h.Syntax.Identifier||f.inFor||this.expect("\x3d");return this.finalize(c,new e.VariableDeclarator(d,u))};l.prototype.parseVariableDeclarationList=
function(f){f={inFor:f.inFor};var c=[];for(c.push(this.parseVariableDeclaration(f));this.match(",");)this.nextToken(),c.push(this.parseVariableDeclaration(f));return c};l.prototype.parseVariableStatement=function(){var f=this.createNode();this.expectKeyword("var");var c=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(f,new e.VariableDeclaration(c,"var"))};l.prototype.parseEmptyStatement=function(){var f=this.createNode();this.expect(";");return this.finalize(f,
new e.EmptyStatement)};l.prototype.parseExpressionStatement=function(){var f=this.createNode(),c=this.parseExpression();this.consumeSemicolon();return this.finalize(f,new e.ExpressionStatement(c))};l.prototype.parseIfClause=function(){this.context.strict&&this.matchKeyword("function")&&this.tolerateError(k.Messages.StrictFunction);return this.parseStatement(!0)};l.prototype.parseIfStatement=function(){var f=this.createNode(),c=null;this.expectKeyword("if");this.expect("(");var d=this.parseExpression();
if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var u=this.finalize(this.createNode(),new e.EmptyStatement)}else this.expect(")"),u=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),c=this.parseIfClause());return this.finalize(f,new e.IfStatement(d,u,c))};l.prototype.parseForStatement=function(){var f=null,c=null,d=null,u=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){f=
this.createNode();this.nextToken();var n=this.context.allowIn;this.context.allowIn=!1;var t=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=n;if(1===t.length&&this.matchKeyword("in")){var x=t[0];x.init&&(x.id.type===h.Syntax.ArrayPattern||x.id.type===h.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(k.Messages.ForInOfLoopInitializer,"for-in");f=this.finalize(f,new e.VariableDeclaration(t,"var"));this.nextToken();x=f;var A=this.parseExpression();f=null}else 1===t.length&&
null===t[0].init&&this.matchContextualKeyword("of")?(f=this.finalize(f,new e.VariableDeclaration(t,"var")),this.nextToken(),x=f,A=this.parseAssignmentExpression(),f=null):(f=this.finalize(f,new e.VariableDeclaration(t,"var")),this.expect(";"))}else{t=this.lookahead;var B=this.context.isBindingElement,F=this.context.isAssignmentTarget,w=this.context.firstCoverInitializedNameError;n=this.context.allowIn;this.context.allowIn=!1;f=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=
n;if(this.matchKeyword("in"))this.context.isAssignmentTarget&&f.type!==h.Syntax.AssignmentExpression||this.tolerateError(k.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(f),x=f,A=this.parseExpression(),f=null;else{this.context.isBindingElement=B;this.context.isAssignmentTarget=F;this.context.firstCoverInitializedNameError=w;if(this.match(",")){for(f=[f];this.match(",");)this.nextToken(),f.push(this.isolateCoverGrammar(this.parseAssignmentExpression));f=this.finalize(this.startNode(t),
new e.SequenceExpression(f))}this.expect(";")}}"undefined"===typeof x&&(this.match(";")||(c=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(d=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),n=this.finalize(this.createNode(),new e.EmptyStatement)):(this.expect(")"),t=this.context.inIteration,this.context.inIteration=!0,n=this.isolateCoverGrammar(this.parseStatementBlockAllowed),
this.context.inIteration=t);return"undefined"===typeof x?this.finalize(u,new e.ForStatement(f,c,d,n)):this.finalize(u,new e.ForInStatement(x,A,n))};l.prototype.parseContinueStatement=function(){var f=this.createNode();this.expectKeyword("continue");var c=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var d=this.parseVariableIdentifier();c=d;Object.prototype.hasOwnProperty.call(this.context.labelSet,"$"+d.name)||this.throwError(k.Messages.UnknownLabel,d.name)}this.consumeSemicolon();null!==
c||this.context.inIteration||this.throwError(k.Messages.IllegalContinue);return this.finalize(f,new e.ContinueStatement(c))};l.prototype.parseBreakStatement=function(){var f=this.createNode();this.expectKeyword("break");var c=null;3!==this.lookahead.type||this.hasLineTerminator||(c=this.parseVariableIdentifier(),Object.prototype.hasOwnProperty.call(this.context.labelSet,"$"+c.name)||this.throwError(k.Messages.UnknownLabel,c.name));this.consumeSemicolon();null!==c||this.context.inIteration||this.context.inSwitch||
this.throwError(k.Messages.IllegalBreak);return this.finalize(f,new e.BreakStatement(c))};l.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(k.Messages.IllegalReturn);var f=this.createNode();this.expectKeyword("return");var c=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();this.consumeSemicolon();return this.finalize(f,new e.ReturnStatement(c))};
l.prototype.parseLabelledStatement=function(){var f=this.createNode(),c=this.parseExpression();this.consumeSemicolon();c=new e.ExpressionStatement(c);return this.finalize(f,c)};l.prototype.parseStatementBlockAllowed=function(){return this.parseStatement(!0)};l.prototype.parseStatement=function(f){void 0===f&&(f=!1);switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:f=this.parseExpressionStatement();break;case 7:var c=this.lookahead.value;f="{"===c?f?this.parseBlockOrObjectInitialiser():
this.parseObjectInitializer():"("===c?this.parseExpressionStatement():";"===c?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:f=this.parseLabelledStatement();break;case 4:switch(this.lookahead.value.toLowerCase()){case "break":f=this.parseBreakStatement();break;case "continue":f=this.parseContinueStatement();break;case "for":f=this.parseForStatement();break;case "function":f=this.parseFunctionDeclaration();break;case "if":f=this.parseIfStatement();break;case "return":f=this.parseReturnStatement();
break;case "var":f=this.parseVariableStatement();break;default:f=this.parseExpressionStatement()}break;default:f=this.throwUnexpectedToken(this.lookahead)}return f};l.prototype.parseFunctionSourceElements=function(){var f=this.createNode();this.expect("{");var c=[],d=this.context.labelSet,u=this.context.inIteration,n=this.context.inSwitch,t=this.context.inFunctionBody;this.context.labelSet={};this.context.inIteration=!1;this.context.inSwitch=!1;for(this.context.inFunctionBody=!0;2!==this.lookahead.type&&
!this.match("}");)c.push(this.parseStatementListItem());this.expect("}");this.context.labelSet=d;this.context.inIteration=u;this.context.inSwitch=n;this.context.inFunctionBody=t;return this.finalize(f,new e.BlockStatement(c))};l.prototype.validateParam=function(f,c,d){var u="$"+d;this.context.strict?(this.scanner.isRestrictedWord(d)&&(f.stricted=c,f.message=k.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(f.paramSet,u)&&(f.stricted=c,f.message=k.Messages.StrictParamDupe)):f.firstRestricted||
(this.scanner.isRestrictedWord(d)?(f.firstRestricted=c,f.message=k.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(d)?(f.firstRestricted=c,f.message=k.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(f.paramSet,u)&&(f.stricted=c,f.message=k.Messages.StrictParamDupe));"function"===typeof Object.defineProperty?Object.defineProperty(f.paramSet,u,{value:!0,enumerable:!0,writable:!0,configurable:!0}):f.paramSet[u]=!0};l.prototype.parseFormalParameter=function(f){for(var c=
[],d=this.parsePatternWithDefault(c),u=0;u<c.length;u++)this.validateParam(f,c[u],c[u].value);f.simple=f.simple&&d instanceof e.Identifier;f.params.push(d)};l.prototype.parseFormalParameters=function(f){f={simple:!0,params:[],firstRestricted:f};this.expect("(");if(!this.match(")"))for(f.paramSet={};2!==this.lookahead.type;){this.parseFormalParameter(f);if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return{simple:f.simple,params:f.params,stricted:f.stricted,firstRestricted:f.firstRestricted,
message:f.message}};l.prototype.parseFunctionDeclaration=function(f){var c=this.createNode();this.expectKeyword("function");var d=null,u=null;if(!f||!this.match("("))if(f=this.lookahead,d=this.parseVariableIdentifier(),this.context.strict)this.scanner.isRestrictedWord(f.value)&&this.tolerateUnexpectedToken(f,k.Messages.StrictFunctionName);else if(this.scanner.isRestrictedWord(f.value)){u=f;var n=k.Messages.StrictFunctionName}else this.scanner.isStrictModeReservedWord(f.value)&&(u=f,n=k.Messages.StrictReservedWord);
var t=this.parseFormalParameters(u);f=t.params;var x=t.stricted;u=t.firstRestricted;t.message&&(n=t.message);var A=this.context.strict,B=this.context.allowStrictDirective;this.context.allowStrictDirective=t.simple;t=this.parseFunctionSourceElements();this.context.strict&&u&&this.throwUnexpectedToken(u,n);this.context.strict&&x&&this.tolerateUnexpectedToken(x,n);this.context.strict=A;this.context.allowStrictDirective=B;return this.finalize(c,new e.FunctionDeclaration(d,f,t,!1))};l.prototype.parseFunctionExpression=
function(){var f=this.createNode();this.expectKeyword("function");var c=null;if(!this.match("(")){var d=this.lookahead;c=this.parseVariableIdentifier();if(this.context.strict)this.scanner.isRestrictedWord(d.value)&&this.tolerateUnexpectedToken(d,k.Messages.StrictFunctionName);else if(this.scanner.isRestrictedWord(d.value)){var u=d;var n=k.Messages.StrictFunctionName}else this.scanner.isStrictModeReservedWord(d.value)&&(u=d,n=k.Messages.StrictReservedWord)}var t=this.parseFormalParameters(u);d=t.params;
var x=t.stricted;u=t.firstRestricted;t.message&&(n=t.message);var A=this.context.strict,B=this.context.allowStrictDirective;this.context.allowStrictDirective=t.simple;t=this.parseFunctionSourceElements();this.context.strict&&u&&this.throwUnexpectedToken(u,n);this.context.strict&&x&&this.tolerateUnexpectedToken(x,n);this.context.strict=A;this.context.allowStrictDirective=B;return this.finalize(f,new e.FunctionExpression(c,d,t,!1))};l.prototype.qualifiedPropertyName=function(f){switch(f.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;
case 7:return"["===f.value}return!1};l.prototype.isStartOfExpression=function(){var f=!0,c=this.lookahead.value;switch(this.lookahead.type){case 7:f="["===c||"("===c||"{"===c||"+"===c||"-"===c||"!"===c||"~"===c||"++"===c||"--"===c||"/"===c||"/\x3d"===c;break;case 4:f="class"===c||"delete"===c||"function"===c||"let"===c||"new"===c||"super"===c||"this"===c||"typeof"===c||"void"===c||"yield"===c}return f};l.prototype.parseScript=function(){for(var f=this.createNode(),c=[];2!==this.lookahead.type;)c.push(this.parseStatementListItem());
return this.finalize(f,new e.Script(c))};return l}();y.Parser=b})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.assert=void 0;y.assert=function(r,a){if(!r)throw Error("ASSERT: "+a);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.ErrorHandler=void 0;b=function(){function r(){this.errors=[];this.tolerant=!1}r.prototype.recordError=
function(a){this.errors.push(a)};r.prototype.tolerate=function(a){if(this.tolerant)this.recordError(a);else throw a;};r.prototype.constructError=function(a,k){a=Error(a);try{throw a;}catch(e){Object.create&&Object.defineProperty&&(a=Object.create(e),Object.defineProperty(a,"column",{value:k}))}return a};r.prototype.createError=function(a,k,e,g){e=this.constructError("Line "+k+": "+g,e);e.index=a;e.lineNumber=k;e.description=g;return e};r.prototype.throwError=function(a,k,e,g){throw this.createError(a,
k,e,g);};r.prototype.tolerateError=function(a,k,e,g){a=this.createError(a,k,e,g);if(this.tolerant)this.recordError(a);else throw a;};return r}();y.ErrorHandler=b})},"esri/arcade/lib/messages":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.Messages=void 0;y.Messages={BadImportCallArity:"Unexpected token",BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",
ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token \x3d",DefaultRestProperty:"Unexpected token \x3d",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",
GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",
InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",
NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",PropertyAfterRestProperty:"Unexpected token",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",
StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",
UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}})},"esri/arcade/lib/nodes":function(){define(["require","exports","./syntax"],function(b,y,r){Object.defineProperty(y,"__esModule",{value:!0});y.VariableDeclarator=y.VariableDeclaration=y.UpdateExpression=y.UnaryExpression=y.TemplateLiteral=y.TemplateElement=y.StaticMemberExpression=y.SequenceExpression=y.Script=y.ReturnStatement=
y.Property=y.ObjectPattern=y.ObjectExpression=y.Module=y.MethodDefinition=y.Literal=y.IfStatement=y.Identifier=y.FunctionExpression=y.FunctionDeclaration=y.ForStatement=y.ForInStatement=y.ExpressionStatement=y.EmptyStatement=y.ContinueStatement=y.ConditionalExpression=y.ComputedMemberExpression=y.CallExpression=y.BreakStatement=y.BlockStatement=y.BinaryExpression=y.AssignmentPattern=y.AssignmentExpression=y.ArrayPattern=y.ArrayExpression=void 0;b=function(){return function(a){this.type=r.Syntax.ArrayExpression;
this.elements=a}}();y.ArrayExpression=b;b=function(){return function(a){this.type=r.Syntax.ArrayPattern;this.elements=a}}();y.ArrayPattern=b;b=function(){return function(a,k,e){this.type=r.Syntax.AssignmentExpression;this.operator=a;this.left=k;this.right=e}}();y.AssignmentExpression=b;b=function(){return function(a,k){this.type=r.Syntax.AssignmentPattern;this.left=a;this.right=k}}();y.AssignmentPattern=b;b=function(){return function(a,k,e){this.type="||"===a||"\x26\x26"===a?r.Syntax.LogicalExpression:
r.Syntax.BinaryExpression;this.operator=a;this.left=k;this.right=e}}();y.BinaryExpression=b;b=function(){return function(a){this.type=r.Syntax.BlockStatement;this.body=a}}();y.BlockStatement=b;b=function(){return function(a){this.type=r.Syntax.BreakStatement;this.label=a}}();y.BreakStatement=b;b=function(){return function(a,k){this.type=r.Syntax.CallExpression;this.callee=a;this.arguments=k}}();y.CallExpression=b;b=function(){return function(a,k){this.type=r.Syntax.MemberExpression;this.computed=
!0;this.object=a;this.property=k}}();y.ComputedMemberExpression=b;b=function(){return function(a,k,e){this.type=r.Syntax.ConditionalExpression;this.test=a;this.consequent=k;this.alternate=e}}();y.ConditionalExpression=b;b=function(){return function(a){this.type=r.Syntax.ContinueStatement;this.label=a}}();y.ContinueStatement=b;b=function(){return function(){this.type=r.Syntax.EmptyStatement}}();y.EmptyStatement=b;b=function(){return function(a){this.type=r.Syntax.ExpressionStatement;this.expression=
a}}();y.ExpressionStatement=b;b=function(){return function(a,k,e){this.type=r.Syntax.ForInStatement;this.left=a;this.right=k;this.body=e;this.each=!1}}();y.ForInStatement=b;b=function(){return function(a,k,e,g){this.type=r.Syntax.ForStatement;this.init=a;this.test=k;this.update=e;this.body=g}}();y.ForStatement=b;b=function(){return function(a,k,e,g){this.type=r.Syntax.FunctionDeclaration;this.id=a;this.params=k;this.body=e;this.generator=g;this.async=this.expression=!1}}();y.FunctionDeclaration=b;
b=function(){return function(a,k,e,g){this.type=r.Syntax.FunctionExpression;this.id=a;this.params=k;this.body=e;this.generator=g;this.async=this.expression=!1}}();y.FunctionExpression=b;b=function(){return function(a){this.type=r.Syntax.Identifier;this.name=a}}();y.Identifier=b;b=function(){return function(a,k,e){this.type=r.Syntax.IfStatement;this.test=a;this.consequent=k;this.alternate=e}}();y.IfStatement=b;b=function(){return function(a,k){this.type=r.Syntax.Literal;this.value=a;this.raw=k}}();
y.Literal=b;b=function(){return function(a,k,e,g,h){this.type=r.Syntax.MethodDefinition;this.key=a;this.computed=k;this.value=e;this.kind=g;this.static=h}}();y.MethodDefinition=b;b=function(){return function(a){this.type=r.Syntax.Program;this.body=a;this.sourceType="module"}}();y.Module=b;b=function(){return function(a){this.type=r.Syntax.ObjectExpression;this.properties=a}}();y.ObjectExpression=b;b=function(){return function(a){this.type=r.Syntax.ObjectPattern;this.properties=a}}();y.ObjectPattern=
b;b=function(){return function(a,k,e,g,h,m){this.type=r.Syntax.Property;this.key=k;this.computed=e;this.value=g;this.kind=a;this.method=h;this.shorthand=m}}();y.Property=b;b=function(){return function(a){this.type=r.Syntax.ReturnStatement;this.argument=a}}();y.ReturnStatement=b;b=function(){return function(a){this.type=r.Syntax.Program;this.body=a;this.sourceType="script"}}();y.Script=b;b=function(){return function(a){this.type=r.Syntax.SequenceExpression;this.expressions=a}}();y.SequenceExpression=
b;b=function(){return function(a,k){this.type=r.Syntax.MemberExpression;this.computed=!1;this.object=a;this.property=k}}();y.StaticMemberExpression=b;b=function(){return function(a,k){this.type=r.Syntax.TemplateElement;this.value=a;this.tail=k}}();y.TemplateElement=b;b=function(){return function(a,k){this.type=r.Syntax.TemplateLiteral;this.quasis=a;this.expressions=k}}();y.TemplateLiteral=b;b=function(){return function(a,k){this.type=r.Syntax.UnaryExpression;this.operator=a;this.argument=k;this.prefix=
!0}}();y.UnaryExpression=b;b=function(){return function(a,k,e){this.type=r.Syntax.UpdateExpression;this.operator=a;this.argument=k;this.prefix=e}}();y.UpdateExpression=b;b=function(){return function(a,k){this.type=r.Syntax.VariableDeclaration;this.declarations=a;this.kind=k}}();y.VariableDeclaration=b;b=function(){return function(a,k){this.type=r.Syntax.VariableDeclarator;this.id=a;this.init=k}}();y.VariableDeclarator=b})},"esri/arcade/lib/scanner":function(){define(["require","exports","./assert",
"./character","./messages"],function(b,y,r,a,k){Object.defineProperty(y,"__esModule",{value:!0});y.Scanner=void 0;b=function(){function e(g,h){this.source=g;this.errorHandler=h;this.isModule=this.trackComment=!1;this.length=g.length;this.index=0;this.lineNumber=0<g.length?1:0;this.lineStart=0;this.curlyStack=[]}e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};e.prototype.restoreState=function(g){this.index=
g.index;this.lineNumber=g.lineNumber;this.lineStart=g.lineStart;this.curlyStack=g.curlyStack};e.prototype.eof=function(){return this.index>=this.length};e.prototype.throwUnexpectedToken=function(g){void 0===g&&(g=k.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,g)};e.prototype.tolerateUnexpectedToken=function(g){void 0===g&&(g=k.Messages.UnexpectedTokenIllegal);this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-
this.lineStart+1,g)};e.prototype.skipSingleLineComment=function(g){var h=[];if(this.trackComment){h=[];var m=this.index-g;var l={start:{line:this.lineNumber,column:this.index-this.lineStart-g},end:{}}}for(;!this.eof();){var f=this.source.charCodeAt(this.index);++this.index;if(a.Character.isLineTerminator(f))return this.trackComment&&(l.end={line:this.lineNumber,column:this.index-this.lineStart-1},g={multiLine:!1,slice:[m+g,this.index-1],range:[m,this.index-1],loc:l},h.push(g)),13===f&&10===this.source.charCodeAt(this.index)&&
++this.index,++this.lineNumber,this.lineStart=this.index,h}this.trackComment&&(l.end={line:this.lineNumber,column:this.index-this.lineStart},g={multiLine:!1,slice:[m+g,this.index],range:[m,this.index],loc:l},h.push(g));return h};e.prototype.skipMultiLineComment=function(){var g=[];if(this.trackComment){g=[];var h=this.index-2;var m={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}}}for(;!this.eof();){var l=this.source.charCodeAt(this.index);if(a.Character.isLineTerminator(l))13===
l&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===l&&47===this.source.charCodeAt(this.index+1))return this.index+=2,this.trackComment&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},h={multiLine:!0,slice:[h+2,this.index-2],range:[h,this.index],loc:m},g.push(h)),g;++this.index}}this.trackComment&&(m.end={line:this.lineNumber,column:this.index-this.lineStart},h={multiLine:!0,slice:[h+2,this.index],range:[h,
this.index],loc:m},g.push(h));this.tolerateUnexpectedToken();return g};e.prototype.scanComments=function(){var g;this.trackComment&&(g=[]);for(var h=0===this.index;!this.eof();){var m=this.source.charCodeAt(this.index);if(a.Character.isWhiteSpace(m))++this.index;else if(a.Character.isLineTerminator(m))++this.index,13===m&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,h=!0;else if(47===m)if(m=this.source.charCodeAt(this.index+1),47===m)this.index+=
2,m=this.skipSingleLineComment(2),this.trackComment&&(g=g.concat(m)),h=!0;else if(42===m)this.index+=2,m=this.skipMultiLineComment(),this.trackComment&&(g=g.concat(m));else break;else if(h&&45===m)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,m=this.skipSingleLineComment(3),this.trackComment&&(g=g.concat(m));else break;else if(60!==m||this.isModule)break;else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,m=this.skipSingleLineComment(4),
this.trackComment&&(g=g.concat(m));else break}return g};e.prototype.isFutureReservedWord=function(g){return!1};e.prototype.isStrictModeReservedWord=function(g){return!1};e.prototype.isRestrictedWord=function(g){return!1};e.prototype.isKeyword=function(g){g=g.toLowerCase();switch(g.length){case 2:return"if"===g||"in"===g;case 3:return"var"===g||"for"===g;case 4:return"else"===g;case 5:return"break"===g;case 6:return"return"===g;case 8:return"function"===g||"continue"===g;default:return!1}};e.prototype.codePointAt=
function(g){var h=this.source.charCodeAt(g);55296<=h&&56319>=h&&(g=this.source.charCodeAt(g+1),56320<=g&&57343>=g&&(h=1024*(h-55296)+g-56320+65536));return h};e.prototype.scanHexEscape=function(g){g="u"===g?4:2;for(var h=0,m=0;m<g;++m)if(!this.eof()&&a.Character.isHexDigit(this.source.charCodeAt(this.index)))h=16*h+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(h)};e.prototype.scanUnicodeCodePointEscape=function(){var g=this.source[this.index],
h=0;for("}"===g&&this.throwUnexpectedToken();!this.eof();){g=this.source[this.index++];if(!a.Character.isHexDigit(g.charCodeAt(0)))break;h=16*h+"0123456789abcdef".indexOf(g.toLowerCase())}(1114111<h||"}"!==g)&&this.throwUnexpectedToken();return a.Character.fromCodePoint(h)};e.prototype.getIdentifier=function(){for(var g=this.index++;!this.eof();){var h=this.source.charCodeAt(this.index);if(92===h||55296<=h&&57343>h)return this.index=g,this.getComplexIdentifier();if(a.Character.isIdentifierPart(h))++this.index;
else break}return this.source.slice(g,this.index)};e.prototype.getComplexIdentifier=function(){var g=this.codePointAt(this.index),h=a.Character.fromCodePoint(g);this.index+=h.length;if(92===g){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var m=this.scanUnicodeCodePointEscape()}else m=this.scanHexEscape("u"),null!==m&&"\\"!==m&&a.Character.isIdentifierStart(m.charCodeAt(0))||this.throwUnexpectedToken();h=m}for(;!this.eof();){g=
this.codePointAt(this.index);if(!a.Character.isIdentifierPart(g))break;m=a.Character.fromCodePoint(g);h+=m;this.index+=m.length;92===g&&(h=h.substr(0,h.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,m=this.scanUnicodeCodePointEscape()):(m=this.scanHexEscape("u"),null!==m&&"\\"!==m&&a.Character.isIdentifierPart(m.charCodeAt(0))||this.throwUnexpectedToken()),h+=m)}return h};e.prototype.octalToDecimal=function(g){var h=
"0"!==g,m="01234567".indexOf(g);!this.eof()&&a.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(h=!0,m=8*m+"01234567".indexOf(this.source[this.index++]),0<="0123".indexOf(g)&&!this.eof()&&a.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(m=8*m+"01234567".indexOf(this.source[this.index++])));return{code:m,octal:h}};e.prototype.scanIdentifier=function(){var g=this.index,h=92===this.source.charCodeAt(g)?this.getComplexIdentifier():this.getIdentifier();var m=1===h.length?3:this.isKeyword(h)?
4:"null"===h.toLowerCase()?5:"true"===h.toLowerCase()||"false"===h.toLowerCase()?1:3;if(3!==m&&g+h.length!==this.index){var l=this.index;this.index=g;this.tolerateUnexpectedToken(k.Messages.InvalidEscapedReservedWord);this.index=l}return{type:m,value:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.scanPunctuator=function(){var g=this.index,h=this.source[this.index];switch(h){case "(":case "{":"{"===h&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;
"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,h="...");break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:h=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===h?this.index+=4:(h=h.substr(0,3),"\x3d\x3d\x3d"===h||"!\x3d\x3d"===h||"\x3e\x3e\x3e"===h||"\x3c\x3c\x3d"===h||"\x3e\x3e\x3d"===h||"**\x3d"===h?this.index+=3:(h=h.substr(0,2),"\x26\x26"===h||"||"===h||"\x3d\x3d"===
h||"!\x3d"===h||"+\x3d"===h||"-\x3d"===h||"*\x3d"===h||"/\x3d"===h||"++"===h||"--"===h||"\x3c\x3c"===h||"\x3e\x3e"===h||"\x26\x3d"===h||"|\x3d"===h||"^\x3d"===h||"%\x3d"===h||"\x3c\x3d"===h||"\x3e\x3d"===h||"\x3d\x3e"===h||"**"===h?this.index+=2:(h=this.source[this.index],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(h)&&++this.index)))}this.index===g&&this.throwUnexpectedToken();return{type:7,value:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.scanHexLiteral=
function(g){for(var h="";!this.eof()&&a.Character.isHexDigit(this.source.charCodeAt(this.index));)h+=this.source[this.index++];0===h.length&&this.throwUnexpectedToken();a.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseInt("0x"+h,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.scanBinaryLiteral=function(g){for(var h="",m;!this.eof();){m=this.source[this.index];if("0"!==m&&"1"!==m)break;
h+=this.source[this.index++]}0===h.length&&this.throwUnexpectedToken();this.eof()||(m=this.source.charCodeAt(this.index),(a.Character.isIdentifierStart(m)||a.Character.isDecimalDigit(m))&&this.throwUnexpectedToken());return{type:6,value:parseInt(h,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.scanOctalLiteral=function(g,h){var m="",l=!1;a.Character.isOctalDigit(g.charCodeAt(0))?(l=!0,m="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&a.Character.isOctalDigit(this.source.charCodeAt(this.index));)m+=
this.source[this.index++];l||0!==m.length||this.throwUnexpectedToken();(a.Character.isIdentifierStart(this.source.charCodeAt(this.index))||a.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:6,value:parseInt(m,8),octal:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};e.prototype.scanNumericLiteral=function(){var g=this.index,h=this.source[g];r.assert(a.Character.isDecimalDigit(h.charCodeAt(0))||"."===h,"Numeric literal must start with a decimal digit or a decimal point");
var m="";if("."!==h){m=this.source[this.index++];h=this.source[this.index];if("0"===m){if("x"===h||"X"===h)return++this.index,this.scanHexLiteral(g);if("b"===h||"B"===h)return++this.index,this.scanBinaryLiteral(g);if("o"===h||"O"===h)return this.scanOctalLiteral(h,g)}for(;a.Character.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];h=this.source[this.index]}if("."===h){for(m+=this.source[this.index++];a.Character.isDecimalDigit(this.source.charCodeAt(this.index));)m+=
this.source[this.index++];h=this.source[this.index]}if("e"===h||"E"===h){m+=this.source[this.index++];h=this.source[this.index];if("+"===h||"-"===h)m+=this.source[this.index++];if(a.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;a.Character.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];else this.throwUnexpectedToken()}a.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(m),
lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.scanStringLiteral=function(){var g=this.index,h=this.source[g];r.assert("'"===h||'"'===h,"String literal must starts with a quote");++this.index;for(var m=!1,l="";!this.eof();){var f=this.source[this.index++];if(f===h){h="";break}if("\\"===f)if((f=this.source[this.index++])&&a.Character.isLineTerminator(f.charCodeAt(0)))++this.lineNumber,"\r"===f&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;
else switch(f){case "u":"{"===this.source[this.index]?(++this.index,l+=this.scanUnicodeCodePointEscape()):(f=this.scanHexEscape(f),null===f&&this.throwUnexpectedToken(),l+=f);break;case "x":f=this.scanHexEscape(f);null===f&&this.throwUnexpectedToken(k.Messages.InvalidHexEscapeSequence);l+=f;break;case "n":l+="\n";break;case "r":l+="\r";break;case "t":l+="\t";break;case "b":l+="\b";break;case "f":l+="\f";break;case "v":l+="\x0B";break;case "8":case "9":l+=f;this.tolerateUnexpectedToken();break;default:f&&
a.Character.isOctalDigit(f.charCodeAt(0))?(f=this.octalToDecimal(f),m=f.octal||m,l+=String.fromCharCode(f.code)):l+=f}else if(a.Character.isLineTerminator(f.charCodeAt(0)))break;else l+=f}""!==h&&(this.index=g,this.throwUnexpectedToken());return{type:8,value:l,octal:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.scanTemplate=function(){var g="",h=!1,m=this.index,l="`"===this.source[m],f=!1,c=2;for(++this.index;!this.eof();){var d=this.source[this.index++];
if("`"===d){c=1;h=f=!0;break}if("$"===d){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;h=!0;break}g+=d}else if("\\"===d)if(d=this.source[this.index++],a.Character.isLineTerminator(d.charCodeAt(0)))++this.lineNumber,"\r"===d&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(d){case "n":g+="\n";break;case "r":g+="\r";break;case "t":g+="\t";break;case "u":if("{"===this.source[this.index])++this.index,g+=this.scanUnicodeCodePointEscape();else{var u=
this.index,n=this.scanHexEscape(d);null!==n?g+=n:(this.index=u,g+=d)}break;case "x":d=this.scanHexEscape(d);null===d&&this.throwUnexpectedToken(k.Messages.InvalidHexEscapeSequence);g+=d;break;case "b":g+="\b";break;case "f":g+="\f";break;case "v":g+="\v";break;default:"0"===d?(a.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(k.Messages.TemplateOctalLiteral),g+="\x00"):a.Character.isOctalDigit(d.charCodeAt(0))?this.throwUnexpectedToken(k.Messages.TemplateOctalLiteral):
g+=d}else a.Character.isLineTerminator(d.charCodeAt(0))?(++this.lineNumber,"\r"===d&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,g+="\n"):g+=d}h||this.throwUnexpectedToken();l||this.curlyStack.pop();return{type:10,value:this.source.slice(m+1,this.index-c),cooked:g,head:l,tail:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}};e.prototype.testRegExp=function(g,h){var m=this,l=g;0<=h.indexOf("u")&&(l=l.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,
function(f,c,d){f=parseInt(c||d,16);1114111<f&&m.throwUnexpectedToken(k.Messages.InvalidRegExp);return 65535>=f?String.fromCharCode(f):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"\uffff"));try{RegExp(l)}catch(f){this.throwUnexpectedToken(k.Messages.InvalidRegExp)}try{return new RegExp(g,h)}catch(f){return null}};e.prototype.scanRegExpBody=function(){var g=this.source[this.index];r.assert("/"===g,"Regular expression literal must start with a slash");for(var h=this.source[this.index++],m=
!1,l=!1;!this.eof();)if(g=this.source[this.index++],h+=g,"\\"===g)g=this.source[this.index++],a.Character.isLineTerminator(g.charCodeAt(0))&&this.throwUnexpectedToken(k.Messages.UnterminatedRegExp),h+=g;else if(a.Character.isLineTerminator(g.charCodeAt(0)))this.throwUnexpectedToken(k.Messages.UnterminatedRegExp);else if(m)"]"===g&&(m=!1);else{if("/"===g){l=!0;break}"["===g&&(m=!0)}l||this.throwUnexpectedToken(k.Messages.UnterminatedRegExp);return h.substr(1,h.length-2)};e.prototype.scanRegExpFlags=
function(){for(var g="";!this.eof();){var h=this.source[this.index];if(!a.Character.isIdentifierPart(h.charCodeAt(0)))break;++this.index;if("\\"!==h||this.eof())g+=h;else{h=this.source[this.index];if("u"===h){++this.index;h=this.index;var m=this.scanHexEscape("u");if(null!==m)for(g+=m;h<this.index;++h);else this.index=h,g+="u"}this.tolerateUnexpectedToken()}}return g};e.prototype.scanRegExp=function(){var g=this.index,h=this.scanRegExpBody(),m=this.scanRegExpFlags(),l=this.testRegExp(h,m);return{type:9,
value:"",pattern:h,flags:m,regex:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:g,end:this.index}};e.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var g=this.source.charCodeAt(this.index);return a.Character.isIdentifierStart(g)?this.scanIdentifier():40===g||41===g||59===g?this.scanPunctuator():39===g||34===g?this.scanStringLiteral():46===g?a.Character.isDecimalDigit(this.source.charCodeAt(this.index+
1))?this.scanNumericLiteral():this.scanPunctuator():a.Character.isDecimalDigit(g)?this.scanNumericLiteral():96===g||125===g&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=g&&57343>g&&a.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return e}();y.Scanner=b})},"esri/arcade/lib/character":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.Character=void 0;var r=
/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
a=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
y.Character={fromCodePoint:function(k){return 65536>k?String.fromCharCode(k):String.fromCharCode(55296+(k-65536>>10))+String.fromCharCode(56320+(k-65536&1023))},isWhiteSpace:function(k){return 32===k||9===k||11===k||12===k||160===k||5760<=k&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(k)},isLineTerminator:function(k){return 10===k||13===k||8232===k||8233===k},isIdentifierStart:function(k){return 36===k||95===k||65<=k&&90>=k||97<=k&&122>=k||92===k||
128<=k&&r.test(y.Character.fromCodePoint(k))},isIdentifierPart:function(k){return 36===k||95===k||65<=k&&90>=k||97<=k&&122>=k||48<=k&&57>=k||92===k||128<=k&&a.test(y.Character.fromCodePoint(k))},isDecimalDigit:function(k){return 48<=k&&57>=k},isHexDigit:function(k){return 48<=k&&57>=k||65<=k&&70>=k||97<=k&&102>=k},isOctalDigit:function(k){return 48<=k&&55>=k}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(b,y){Object.defineProperty(y,"__esModule",{value:!0});y.TokenName=
y.Token=void 0;b=y.Token||(y.Token={});b[b.BooleanLiteral=1]="BooleanLiteral";b[b.EOF=2]="EOF";b[b.Identifier=3]="Identifier";b[b.Keyword=4]="Keyword";b[b.NullLiteral=5]="NullLiteral";b[b.NumericLiteral=6]="NumericLiteral";b[b.Punctuator=7]="Punctuator";b[b.StringLiteral=8]="StringLiteral";b[b.RegularExpression=9]="RegularExpression";b[b.Template=10]="Template";y.TokenName={};y.TokenName[1]="Boolean";y.TokenName[2]="\x3cend\x3e";y.TokenName[3]="Identifier";y.TokenName[4]="Keyword";y.TokenName[5]=
"Null";y.TokenName[6]="Numeric";y.TokenName[7]="Punctuator";y.TokenName[8]="String";y.TokenName[9]="RegularExpression";y.TokenName[10]="Template"})},"esri/arcade/lib/tokenizer":function(){define(["require","exports","./error-handler","./scanner","./token"],function(b,y,r,a,k){Object.defineProperty(y,"__esModule",{value:!0});y.Tokenizer=void 0;var e=function(){function g(){this.values=[];this.curly=this.paren=-1}g.prototype.beforeFunctionExpression=function(h){return 0<="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d **\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * ** / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ").indexOf(h)};
g.prototype.isRegexStart=function(){var h=this.values[this.values.length-1],m=null!==h;switch(h){case "this":case "]":m=!1;break;case ")":h=this.values[this.paren-1];m="if"===h||"while"===h||"for"===h||"with"===h;break;case "}":m=!0,"function"===this.values[this.curly-3]?m=(h=this.values[this.curly-4])?!this.beforeFunctionExpression(h):!1:"function"===this.values[this.curly-4]&&(m=(h=this.values[this.curly-5])?!this.beforeFunctionExpression(h):!0)}return m};g.prototype.push=function(h){7===h.type||
4===h.type?("{"===h.value?this.curly=this.values.length:"("===h.value&&(this.paren=this.values.length),this.values.push(h.value)):this.values.push(null)};return g}();b=function(){function g(h,m){this.errorHandler=new r.ErrorHandler;this.errorHandler.tolerant=m?"boolean"===typeof m.tolerant&&m.tolerant:!1;this.scanner=new a.Scanner(h,this.errorHandler);this.scanner.trackComment=m?"boolean"===typeof m.comment&&m.comment:!1;this.trackRange=m?"boolean"===typeof m.range&&m.range:!1;this.trackLoc=m?"boolean"===
typeof m.loc&&m.loc:!1;this.buffer=[];this.reader=new e}g.prototype.errors=function(){return this.errorHandler.errors};g.prototype.getNextToken=function(){if(0===this.buffer.length){var h=this.scanner.scanComments();if(this.scanner.trackComment)for(var m=0;m<h.length;++m){var l=h[m],f=this.scanner.source.slice(l.slice[0],l.slice[1]);f={type:l.multiLine?"BlockComment":"LineComment",value:f};this.trackRange&&(f.range=l.range);this.trackLoc&&(f.loc=l.loc);this.buffer.push(f)}if(!this.scanner.eof()){h=
void 0;this.trackLoc&&(h={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});m=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){l=this.scanner.saveState();try{m=this.scanner.scanRegExp()}catch(c){this.scanner.restoreState(l),m=this.scanner.lex()}}else m=this.scanner.lex();this.reader.push(m);l={type:k.TokenName[m.type],value:this.scanner.source.slice(m.start,m.end)};this.trackRange&&(l.range=[m.start,m.end]);this.trackLoc&&
(h.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},l.loc=h);9===m.type&&(l.regex={pattern:m.pattern,flags:m.flags});this.buffer.push(l)}}return this.buffer.shift()};return g}();y.Tokenizer=b})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(b,y,r){return r})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(b,y,r,a){Object.defineProperty(y,"__esModule",{value:!0});var k=
{ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-in":1,"en-nz":1,"en-sg":1,es:1,"es-do":1,"es-mx":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,hu:1,id:1,it:1,"it-ch":1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-mo":1,"zh-tw":1};y.load=function(e,g,h){e=r.locale;var m=
e in k;if(!m){var l=e.split("-");1<l.length&&l[0]in k&&(e=l[0],m=!0)}m?g(["moment/locale/"+e],function(){h(a)}):h(a)}})},"esri/arcadeProfiles/visualizationProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),function(b,y,r,a,k,e,g){b=new (b(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",initialize:function(h){var m=[];g.hasGeometryOperations(h)&&m.push(e.enableGeometryOperations());return k(m)}}));
y.setObject("arcadeProfiles.visualizationProfile",b,a);return b})},"esri/arcadeProfiles/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../support/expressionUtils"],function(b,y,r,a,k){var e=/(\/(MapServer|FeatureServer)).*/ig;r={hasGeometryOperations:function(g){return y.some(g,function(h){return h.hasGeometryOperations?h.hasGeometryOperations():k.hasGeometryOperations(h)})},hasFeatureSetOperations:function(g){return y.some(g,function(h){return h.hasFeatureSetOperations?
h.hasFeatureSetOperations():k.hasFeatureSetOperations(h)})},hasVariables:function(g,h){return y.some(g,function(m){return y.some(h,function(l){return m.hasVariable?m.hasVariable(l):k.hasVariable(m,l)})})},isAsync:function(g){return y.some(g,function(h){return h.async})},getServiceUrl:function(g){return e.test(g)?g.replace(e,"$1"):null}};b.setObject("arcadeProfiles.utils",r,a);return r})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(b,y,r,a,k,e,g,h,m){b=b(h,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(l,f,c,d,u,n){this.values=[];this._symbols={};this.infos=[];l&&!l.declaredClass?(f=l,c=n&&n.geometryType,this.defaultSymbol=(l=f.defaultSymbol)&&(l.declaredClass?l:g.fromJson(l,n)),this.attributeField=f.field1,this.attributeField2=f.field2,this.attributeField3=f.field3,this.fieldDelimiter=f.fieldDelimiter,this.defaultLabel=f.defaultLabel,this.setValueExpression(f.valueExpression),this.valueExpressionTitle=
f.valueExpressionTitle,this.legendOptions=f.legendOptions,f.backgroundFillSymbol&&(this.backgroundFillSymbol=g.fromJson(f.backgroundFillSymbol,c?{geometryType:"esriGeometryPolygon"}:null)),"esriGeometryPolygon"===c&&this.hasVisualVariables("sizeInfo",!1)&&(n={geometryType:"esriGeometryPoint"}),y.forEach(f.uniqueValueInfos,function(t){this._addValueInfo(t,n)},this)):(this.defaultSymbol=l,this.attributeField=f,this.attributeField2=c,this.attributeField3=d,this.fieldDelimiter=u);this._multiple=!!this.attributeField2},
addValue:function(l,f){l=r.isObject(l)?l:{value:l,symbol:f};this._addValueInfo(l)},removeValue:function(l){var f=y.indexOf(this.values,l);-1!==f&&(this.values.splice(f,1),this._hasNullKeyword=this._evalNullKeyword(this.values),delete this._symbols[l],this.infos.splice(f,1))},getUniqueValueInfo:function(l){var f=this.attributeField,c=l.attributes;if(this.valueExpression)f=this._getDataValue(l,this._uvInfo,null,this._cache.uvInfo),f=this._normalizeNullValue(f);else if(this._multiple){l=this.attributeField2;
var d=this.attributeField3,u=[];f&&u.push(this._normalizeNullValue(c[f]));l&&u.push(this._normalizeNullValue(c[l]));d&&u.push(this._normalizeNullValue(c[d]));f=u.join(this.fieldDelimiter||"")}else f=r.isFunction(f)?f(l):c[f],f=this._normalizeNullValue(f);return this._symbols[f]},setValueExpression:function(l){this.valueExpression=l;this._uvInfo={valueExpression:l};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(){var l=this.inherited(arguments);this.valueExpression&&
(l=l.concat(m.extractFieldNames(this.valueExpression)));l.sort();return y.filter(l,function(f,c){return 0===c||l[c-1]!==f})},getSymbol:function(l){return(l=this.getUniqueValueInfo(l))&&l.symbol||this.defaultSymbol},_addValueInfo:function(l,f){var c=l.value;this.values.push(c);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(l);var d=l.symbol;d&&!d.declaredClass&&(l.symbol=g.fromJson(d,f));this._symbols[c]=l},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(l){return this._hasNullKeyword&&
null==l?this._nullCode:l},_evalNullKeyword:function(l){var f=this.fieldDelimiter||"",c=new RegExp("(^|"+f+")("+this._nullCode+")("+f+"|$)");return y.some(l,function(d){return c.test(d)})},toJson:function(){var l=e.fixJson;var f={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:r.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&
this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:y.map(this.infos||[],function(c){c=r.mixin({},c);c.symbol=c.symbol&&c.symbol.toJson();c.value+="";return l(c)})};this.backgroundFillSymbol&&(f.backgroundFillSymbol=this.backgroundFillSymbol.toJson());f=r.mixin(this.inherited(arguments),f);return l(f)}});r.setObject("renderer.UniqueValueRenderer",b,k);return b})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer ./StretchRenderer ./ShadedReliefRenderer ./ColormapRenderer".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F){var w={createDefaultRenderer:function(D){D=g.createDefaultSymbol(D);return new h(D)},fromJson:function(D,q){switch(D.type||""){case "simple":D=new h(D,q);break;case "uniqueValue":D=new m(D,null,null,null,null,q);break;case "classBreaks":D=new l(D,null,q);break;case "vectorField":D=new f(D);break;case "scaleDependent":D=this._scaleDependentFromJson(D);break;case "dotDensity":D=D.attributes?w.createDefaultRenderer("esriGeometryPolygon"):this._dotDensityFromJson(D);
break;case "temporal":D=this._temporalFromJson(D,q);break;case "heatmap":D=this._heatmapFromJson(D);break;case "rasterStretch":D=new A(D);break;case "rasterShadedRelief":D=new B(D);break;case "rasterColormap":D=new F(D);break;default:D=(D=q&&q.geometryType)?w.createDefaultRenderer(D):null}return D},_scaleDependentFromJson:function(D){var q={},v=D.minScale;q.rendererInfos=b.map(D.rendererInfos,function(z){var C=z.maxScale;z={minScale:v,maxScale:C,renderer:z.renderer&&this.fromJson(z.renderer)};v=C;
return z},this);return new d(q)},_dotDensityFromJson:function(D){D.backgroundColor&&y.isArray(D.backgroundColor)&&(D.backgroundColor=e.toDojoColor(D.backgroundColor));0<D.dotSize&&(D.dotSize=a.pt2px(D.dotSize));D.fields&&b.forEach(D.fields,function(q){q&&y.isArray(q.color)&&(q.color=e.toDojoColor(q.color))});D.legendOptions&&(D.legendOptions.backgroundColor&&y.isArray(D.legendOptions.backgroundColor)&&(D.legendOptions.backgroundColor=e.toDojoColor(D.legendOptions.backgroundColor)),D.legendOptions.outline&&
(D.legendOptions.outline=g.fromJson(D.legendOptions.outline)));D.outline&&(D.outline=g.fromJson(D.outline));return new c(D)},_temporalFromJson:function(D,q){var v=q&&q.geometryType;D=D||{};var z=this.fromJson(D.observationRenderer,q);q=D.latestObservationRenderer?this.fromJson(D.latestObservationRenderer,q):null;v=D.trackRenderer?this.fromJson(D.trackRenderer,v?{geometryType:"esriGeometryPolyline"}:null):null;D=this._agerFromJson(D.observationAger);return new t(z,q,v,D)},_agerFromJson:function(D){var q;
D=D||{};D.colorRange||D.sizeRange||D.alphaRange?q=this._timeRampFromJson(D):D.agerClassBreakInfos&&(q=this._timeClassBreaksFromJson(D));return q},_timeRampFromJson:function(D){var q,v,z;D.colorRange&&1<D.colorRange.length&&(q=[e.toDojoColor(D.colorRange[0]),e.toDojoColor(D.colorRange[1])]);D.sizeRange&&1<D.sizeRange.length&&(v=[D.sizeRange[0],D.sizeRange[1]]);D.alphaRange&&1<D.alphaRange.length&&(z=[D.alphaRange[0]/255,D.alphaRange[1]/255]);return new n(q,v,z)},_timeClassBreaksFromJson:function(D){var q=
D.agerClassBreakInfos,v=[],z;var C=u.UNIT_DAYS;switch(D.timeUnits){case "esriTimeUnitsSeconds":C=u.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":C=u.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":C=u.UNIT_HOURS;break;case "esriTimeUnitsMinutes":C=u.UNIT_MINUTES;break;case "esriTimeUnitsMonths":C=u.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":C=u.UNIT_WEEKS;break;case "esriTimeUnitsYears":C=u.UNIT_YEARS}for(z=0;z<q.length;z+=1){D=q[z];var E={minAge:0,maxAge:D.oldestAge||Infinity};D.color&&
(E.color=e.toDojoColor(D.color));D.alpha&&(E.alpha=D.alpha/255);E.size=D.size;v[z]=E}return new u(v,C)},_heatmapFromJson:function(D){var q=D.colorStops;q&&q instanceof Array&&b.forEach(q,function(v){v.color=e.toDojoColor(v.color)});return new x(D)}};y.mixin(y.getObject("renderer",!0,k),w);return w})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(b,y,r,a,k,e,g,h,m){b=b(h,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(l,f,c){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(l&&!l.declaredClass){var d=l;f=c&&c.geometryType;this.attributeField=d.field;this.setValueExpression(d.valueExpression);this.valueExpressionTitle=d.valueExpressionTitle;this.legendOptions=d.legendOptions;this.defaultSymbol=(l=d.defaultSymbol)&&(l.declaredClass?l:g.fromJson(l,c));this.backgroundFillSymbol=(l=d.backgroundFillSymbol)&&
(l.declaredClass?l:g.fromJson(l,f?{geometryType:"esriGeometryPolygon"}:null));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],d,this);var u=d.minValue;(l=d.classBreakInfos)&&l[0]&&e.isDefined(l[0].classMaxValue)&&y.forEach(l,function(n){var t=n.classMaxValue;n.minValue=u;u=n.maxValue=t},this);"esriGeometryPolygon"===f&&(this.hasVisualVariables("sizeInfo",!1)||g.isPointSymbol(g.getFirstSupportedSymbol(y.map(l,function(n){return n.symbol}))))&&
(c={geometryType:"esriGeometryPoint"});y.forEach(l,function(n){this._addBreakInfo(n,c)},this)}else this.defaultSymbol=l,this.attributeField=f},addBreak:function(l,f,c){l=r.isObject(l)?l:{minValue:l,maxValue:f,symbol:c};this._addBreakInfo(l)},removeBreak:function(l,f){var c=this.breaks,d,u=c.length,n=this._symbols;for(d=0;d<u;d++){var t=c[d];if(t[0]==l&&t[1]==f){c.splice(d,1);delete n[l+"-"+f];this.infos.splice(d,1);break}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(l){var f=
this.attributeField,c=l.attributes,d=this.breaks,u=d.length,n=this.isMaxInclusive;if(this.valueExpression)l=this._getDataValue(l,this._cbInfo,null,this._cache.cbInfo);else if(r.isFunction(f))l=f(l);else if(l=parseFloat(c[f]),f=this.normalizationType,f){var t=parseFloat(this.normalizationTotal);c=parseFloat(c[this.normalizationField]);if("log"===f)l=Math.log(l)*Math.LOG10E;else if("percent-of-total"===f&&!isNaN(t))l=l/t*100;else if("field"===f){if(isNaN(l)||isNaN(c))return-1;l/=c}}if(null!=l&&!isNaN(l)&&
"number"===typeof l)for(c=0;c<u;c++)if(f=d[c],f[0]<=l&&(n?l<=f[1]:l<f[1]))return c;return-1},getBreakInfo:function(l){l=this.getBreakIndex(l);return-1!==l?this.infos[l]:null},getSymbol:function(l){return(l=this.breaks[this.getBreakIndex(l)])?this._symbols[l[0]+"-"+l[1]]:this.defaultSymbol},setMaxInclusive:function(l){this.isMaxInclusive=l},setValueExpression:function(l){this.valueExpression=l;this._cbInfo={valueExpression:l};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(){var l=
this.inherited(arguments);this.valueExpression&&(l=l.concat(m.extractFieldNames(this.valueExpression)));l.sort();return y.filter(l,function(f,c){return 0===c||l[c-1]!==f})},isContinuousRenderer:function(){var l=!1;if(this.infos&&1===this.infos.length){var f=this.attributeField,c=this.normalizationField,d=this.valueExpression;l=this.getVisualVariablesForType("colorInfo",!1)||[];var u=this.getVisualVariablesForType("sizeInfo",!1)||[],n=this.getVisualVariablesForType("opacityInfo",!1)||[];l=l.concat(u).concat(n);
l=y.some(l,function(t){return(t.field===f||t.valueExpression===d)&&t.normalizationField==c})}return l},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],
["defined-interval","esriClassifyDefinedInterval"]],_copy:function(l,f,c){y.forEach(l,function(d){var u=d.split(":");if(1<u.length){d=u[0];var n=this["_"+d+"Enums"];if("rest"===u[1]){var t="1";var x="0"}else"sdk"===u[1]&&(t="0",x="1")}u=f[d];if(void 0!==u&&(c[d]=u,n&&t)){var A,B=n.length;for(A=0;A<B;A++)if(n[A][t]===u){c[d]=n[A][x];break}}},this)},_addBreakInfo:function(l,f){var c=l.minValue,d=l.maxValue;this.breaks.push([c,d]);this.infos.push(l);var u=l.symbol;u&&!u.declaredClass&&(l.symbol=g.fromJson(u,
f));this._symbols[c+"-"+d]=l.symbol},toJson:function(){var l=this.infos||[],f=e.fixJson,c=l[0]&&l[0].minValue,d=this.backgroundFillSymbol;l=r.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:r.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:d&&d.toJson(),minValue:-Infinity===c?-Number.MAX_VALUE:c,classBreakInfos:y.map(l,
function(u){u=r.mixin({},u);u.symbol=u.symbol&&u.symbol.toJson();u.classMaxValue=Infinity===u.maxValue?Number.MAX_VALUE:u.maxValue;delete u.minValue;delete u.maxValue;return f(u)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,l);l.hasOwnProperty("normalizationType")&&!l.normalizationType&&delete l.normalizationType;l.hasOwnProperty("classificationMethod")&&!l.classificationMethod&&delete l.classificationMethod;return f(l)}});
r.setObject("renderer.ClassBreaksRenderer",b,k);return b})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d,u){var n=b(h,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",
constructor:function(t){e.isDefined(t)||(t={});t.attributeField=t.attributeField||"Magnitude";t.rotationInfo=t.rotationInfo||this._getRotationInfo(t);b.safeMixin(this,t);this.setRotationInfo(this.rotationInfo);this.style=this.style||n.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:d.fromJson(this.singleArrowSymbol));this.renderer=new m(this._getDefaultSymbol(),t.attributeField);this._updateRenderer(this.style);this.flowRepresentation=
this.flowRepresentation||this.FLOW_FROM},getSymbol:function(t){return this.renderer&&this.renderer.getSymbol(t)},setVisualVariables:function(t){t=a.filter(t,function(x){if("sizeInfo"===x.type)return e.isDefined(this._updateSizeInfo(x))},this);this.inherited(arguments);return this},setSizeInfo:function(t){this._updateSizeInfo(t);this.inherited(arguments);return this},setProportionalSymbolInfo:function(t){this.setSizeInfo(t);return this},setColorInfo:function(t){return this},_updateRenderer:function(t){return e.isDefined(this.renderer)?
t===n.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():t===n.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():t===n.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():t===n.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():t===n.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():t===n.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():t===n.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():t===n.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():t===
n.STYLE_SCALAR?this._createSimpleScalarRenderer():t===n.STYLE_WIND_BARBS?this._createWindBarbsRenderer():this._createClassifiedArrowRenderer():Error("Invalid Renderer!")},_updateSizeInfo:function(t){return t&&e.isDefined(t.minSize)&&e.isDefined(t.maxSize)&&e.isDefined(t.minDataValue)&&e.isDefined(t.maxDataValue)?(this.style===n.STYLE_WIND_BARBS&&(t.minSize=t.maxSize),t.field=t.field||"Magnitude",t.type="sizeInfo",this.minDataValue=t.minDataValue,this.maxDataValue=t.maxDataValue,t):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=
this._getDefaultSymbol(new g([56,168,0]));var t=[0,1E-6,3.5,7,10.5,14];if(e.isDefined(this.minDataValue)&&e.isDefined(this.maxDataValue)){var x=(this.maxDataValue-this.minDataValue)/5;t=[];var A;var B=this.minDataValue;for(A=0;6>A;A++)t[A]=B,B+=x}this._addBreaks(t,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=
this._getDefaultSymbol(new g([214,47,39]));this._addBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new g([214,47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],
[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];a.forEach(t,function(x,A){t[A]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new g([214,47,39]));this._addBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,
21]])},_createBeaufortMilesRenderer:function(){var t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];a.forEach(t,function(x,A){t[A]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new g([214,47,39]));this._addBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,
28.6,32.7];a.forEach(t,function(x,A){t[A]*=3.6});this.renderer.defaultSymbol=this._getDefaultSymbol(new g([214,47,39]));this._addBreaks(t,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new g([177,177,177]));this._addBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},
_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new g([177,177,177]));this._addBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new f({url:u.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var t=[],x;for(x=0;150>=x;x+=5)t.push(x);
var A="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var B=new f({url:u.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=B;for(x=0;x<t.length-1;x++)0===x?this.renderer.addBreak({minValue:t[x],maxValue:t[x+1],symbol:B}):this.renderer.addBreak({minValue:t[x],maxValue:t[x+1],symbol:(new l).setPath(A[x]).setOutline((new c).setWidth(1.5)).setSize(20).setColor(new g([0,0,0,255]))})},_getDefaultSymbol:function(t){return(new l).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new c).setWidth(0)).setSize(20).setColor(t||
new g([0,92,230]))},_getRotationInfo:function(t){var x=t&&t.flowRepresentation||n.FLOW_FROM,A=t&&t.rotationField||"Direction",B=n.FLOW_FROM;return{field:function(F){F=F.attributes[A];return x===B?F:F+180},type:"geographic"}},_addBreaks:function(t,x){if(!e.isDefined(this.renderer))return Error("Invalid Renderer!");if(!(t&&x&&t.length&&x.length&&t.length>=x.length))return Error("AddBreaks: Input arguments break values and colors not valid");var A;for(A=0;A<x.length;A++)this.renderer.addBreak({minValue:t[A],
maxValue:t[A+1],symbol:this._getDefaultSymbol(new g(x[A]))})},toJson:function(){var t=y.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,inputUnit:this.inputUnit,outputUnit:this.outputUnit});this.renderer&&this.renderer.defaultSymbol&&this.style===n.STYLE_SINGLE_ARROW&&(t.singleArrowSymbol=this.renderer.defaultSymbol.toJson());return e.fixJson(t)}});y.mixin(n,{STYLE_WIND_BARBS:"wind_speed",STYLE_SINGLE_ARROW:"single_arrow",
STYLE_CLASSIFIED_ARROW:"classified_arrow",STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});y.setObject("renderer.VectorFieldRenderer",n,k);return n})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d){b=b(l,{declaredClass:"esri.renderer.DotDensityRenderer",constructor:function(u){this.dotSize=u.dotSize||3;this.dotValue=u.dotValue;this.fields=u.fields;this.outline=u.outline;this.backgroundColor=u.backgroundColor;this.exactCount=u.exactCount||!0;this.dotShape=u.dotShape||"square";this.legendOptions=u.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=
null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1},getSymbol:function(u){this._currentGraphic=u;if(!this._supportsCanvas)return null;this._map||(this._map=u.getLayer()._map,this._objectIdField=u.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",y.hitch(this,function(x){this._currentMapScale=this._map.getScale();this._currentResolution=x.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]=
{}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][u.attributes[this._objectIdField]]){var n=this._symbolMap[this._currentMapScale][u.attributes[this._objectIdField]];var t=this._getShapeProperties(u);n.setOffset(t.dx,t.dy);return n}n=this._generateFieldsCount(this.fields,u.attributes,this.dotValue);t=this._getShapeProperties(u);if(!t.width||!t.height)return null;n=new f(this._generateImageSrc(t.width,t.height,n,t.minXY,t.maxXY),this.outline,t.width,t.height);
n.setOffset(t.dx,t.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][u.attributes[this._objectIdField]]=n},_generateFieldsCount:function(u,n,t){var x;for(x=u.length-1;0<=x;x--){var A=n[u[x].name]/t;u[x].numPoints=Math.round(A)}return u},_getShapeProperties:function(u){var n=u.geometry.getExtent();n.contains(this._map.extent)&&(n=this._map.extent);var t=Math.ceil(n.getWidth()/this._currentResolution);var x=Math.ceil(n.getHeight()/
this._currentResolution);var A=this._map.toScreen(new d(n.xmin,n.ymin,n.spatialReference));n=this._map.toScreen(new d(n.xmax,n.ymax,n.spatialReference));u=u.getLayer().getNavigationTransform();return{minXY:A,maxXY:n,dx:(A.x-u.dx)%t,dy:(n.y-u.dy)%x,width:t,height:x}},_generateImageSrc:function(u,n,t,x,A,B){var F=this.dotSize,w;this._canvas?(this._canvas.width=u,this._canvas.height=n):this._canvas=this._initCanvas(u,n);var D=this._canvas.getContext("2d");if(B=B||this.backgroundColor)D.fillStyle=B.toCss(!0),
D.fillRect(0,0,u,n),D.fill();for(B=t.length-1;0<=B;B--)for(D.fillStyle=t[B].color.toCss(!0),w=t[B].numPoints-1;0<=w;w--){var q=this._getRandomPoint(u,n,x,A);"square"===this.dotShape?D.fillRect(q.x,q.y,F,F):"circle"===this.dotShape&&(D.beginPath(),D.arc(q.x,q.y,F/2,0,2*Math.PI,!0));D.fill()}return this._canvas.toDataURL()},_initCanvas:function(u,n){u=a.create("canvas",{id:"canvas",width:u+"px",height:n+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(u);return u},
_getRandomInt:function(u,n){return Math.floor(Math.random()*(n-u+1)+u)},_getRandomPoint:function(u,n,t,x){var A={},B=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&u*n>this._exactCountMinArea){u=!1;do A.x=this._getRandomInt(t.x,x.x),A.y=this._getRandomInt(x.y,t.y),u=new c(A.x,A.y),u=this._checkPointShapeBounds(u,this.dotSize+B,this._currentGraphic.geometry),!0===u&&(A.x-=t.x,A.y-=x.y);while(!1===u)}else A.x=this._getRandomInt(0,u),A.y=this._getRandomInt(0,n);return A},
_checkPointShapeBounds:function(u,n,t){var x=null;x=!1;var A=!0,B=0;do{switch(B){case 1:u.x+=n;break;case 2:u.y+=n;break;case 3:u.x-=n}x=this._map.toMap(u);x=t.contains(x);!1===x&&(A=!1);B+=1}while(3>=B&&!0===A);return x},setDotSize:function(u){0<u&&(this.dotSize=u)},setDotValue:function(u){0<u&&(this.dotValue=u)},setOutline:function(u){this.outline=u},setBackgroundColor:function(u){this.backgroundColor=u},toJson:function(){var u=y.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:m.toJsonColor(this.backgroundColor),
dotShape:this.dotShape,dotSize:0<this.dotSize?e.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:r.map(this.fields,function(n){return h.fixJson({color:m.toJsonColor(n.color),name:n.name})}),legendOptions:this.legendOptions&&h.fixJson({backgroundColor:m.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});
return h.fixJson(u)}});y.setObject("renderer.DotDensityRenderer",b,g);return b})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(b,y,r,a,k){b=b(k,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});y.setObject("geometry.ScreenPoint",b,a);return b})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),
function(b,y,r,a,k,e,g){b=b(g,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(h){this.setRendererInfos(h&&h.rendererInfos||[])},setRendererInfos:function(h){this.rendererInfos=h;this._setRangeType();return this},getSymbol:function(h){var m=this.getRendererInfo(h);return m&&m.renderer&&m.renderer.getSymbol(h)},getRendererInfo:function(h){h=h.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(h.getZoom()):this.getRendererInfoByScale(h.getScale())},
getRendererInfoByZoom:function(h){var m=this.rendererInfos,l,f=0;do{var c=m[f];h>=c.minZoom&&h<=c.maxZoom&&(l=c);f++}while(!l&&f<m.length);return l},getRendererInfoByScale:function(h){var m=this.rendererInfos,l,f=0;do{var c=m[f];var d=c.minScale;var u=c.maxScale;var n=!d;var t=!u;!n&&h<=d&&(n=!0);!t&&h>=u&&(t=!0);n&&t&&(l=c);f++}while(!l&&f<m.length);return l},addRendererInfo:function(h){var m=0,l=this.rendererInfos,f=h.hasOwnProperty("minZoom")?"minZoom":"minScale",c=l.length;do{var d=l[m];if(c===
m||h[f]<d[f]){l.splice(m,0,h);this._setRangeType();var u=!0}m++}while(!u&&m<c);return this},_setRangeType:function(){var h=this.rendererInfos;if(h=h&&h[0])this.rangeType=h.hasOwnProperty("minZoom")?"zoom":h.hasOwnProperty("minScale")?"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var h=this.rendererInfos||[],m=h[0]&&h[0].minScale;h=r.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<m?m:0,rendererInfos:y.map(h,function(l){return e.fixJson({maxScale:0<l.maxScale?
l.maxScale:0,renderer:l.renderer&&l.renderer.toJson()})})});return e.fixJson(h)}});r.setObject("renderer.ScaleDependentRenderer",b,k);return b})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(b,y,r,a,k,e,g,h,m,l){var f=b(l,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(c,d){this.infos=c;this.timeUnits=d||"day";c.sort(function(u,
n){return u.minAge<n.minAge?-1:u.minAge>n.minAge?1:0})},getAgedSymbol:function(c,d){var u=d.getLayer();d=d.attributes;var n=g.isDefined;c=h.fromJson(c.toJson());var t=u._map.timeExtent.endTime;if(!t)return c;var x=k.difference(new Date(d[u._startTimeField]),t,this.timeUnits);y.some(this.infos,function(A){if(x>=A.minAge&&x<=A.maxAge){var B=A.color,F=A.size;A=A.alpha;B&&c.setColor(B);n(F)&&this._setSymbolSize(c,F);n(A)&&c.color&&(c.color.a=A);return!0}},this);return c},toJson:function(){var c={agerClassBreakInfos:[]},
d;c.timeUnits=this._getRestUnits(this.timeUnits);for(d=0;d<this.infos.length;d+=1){var u=this.infos[d];var n={};n.oldestAge=Infinity===u.maxAge?null:u.maxAge;n.size=u.size;u.color&&(n.color=m.toJsonColor(u.color));u.alpha&&(n.alpha=Math.round(255*u.alpha));c.agerClassBreakInfos[d]=n}return c},_getRestUnits:function(c){var d="esriTimeUnitsDays";switch(c){case f.UNIT_SECONDS:d="esriTimeUnitsSeconds";break;case f.UNIT_MILLISECONDS:d="esriTimeUnitsMilliseconds";break;case f.UNIT_HOURS:d="esriTimeUnitsHours";
break;case f.UNIT_MINUTES:d="esriTimeUnitsMinutes";break;case f.UNIT_MONTHS:d="esriTimeUnitsMonths";break;case f.UNIT_WEEKS:d="esriTimeUnitsWeeks";break;case f.UNIT_YEARS:d="esriTimeUnitsYears"}return d}});r.mixin(f,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});r.setObject("renderer.TimeClassBreaksAger",f,e);return f})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(k,e){},_setSymbolSize:function(k,e){switch(k.type){case "simplemarkersymbol":k.setSize(e);break;case "picturemarkersymbol":k.setWidth(e);k.setHeight(e);break;case "simplelinesymbol":case "cartographiclinesymbol":k.setWidth(e);break;case "simplefillsymbol":case "picturefillsymbol":k.outline&&k.outline.setWidth(e)}}});y.setObject("renderer.SymbolAger",b,a);return b})},
"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(b,y,r,a,k,e,g,h){b=b(h,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(m,l,f){this.colorRange=m;this.sizeRange=l;this.alphaRange=f},getAgedSymbol:function(m,l){var f=l.getLayer(),c=l.attributes;m=e.fromJson(m.toJson());var d=f._map.timeExtent;l=d.startTime;d=d.endTime;if(!l||!d)return m;l=l.getTime();
d=d.getTime();f=new Date(c[f._startTimeField]);f=f.getTime();f<l&&(f=l);f=d===l?1:(f-l)/(d-l);if(l=this.sizeRange)c=l[0],d=l[1],l=Math.abs(d-c)*f,this._setSymbolSize(m,c<d?c+l:c-l);if(l=this.colorRange){d=l[0];var u=l[1],n=Math.round;c=new r;var t=d.r,x=u.r;l=Math.abs(x-t)*f;c.r=n(t<x?t+l:t-l);t=d.g;x=u.g;l=Math.abs(x-t)*f;c.g=n(t<x?t+l:t-l);t=d.b;x=u.b;l=Math.abs(x-t)*f;c.b=n(t<x?t+l:t-l);d=d.a;u=u.a;l=Math.abs(u-d)*f;c.a=d<u?d+l:d-l;m.setColor(c)}c=m.color;(l=this.alphaRange)&&c&&(d=l[0],u=l[1],
l=Math.abs(u-d)*f,c.a=d<u?d+l:d-l);return m},toJson:function(){var m={};this.sizeRange&&(m.sizeRange=this.sizeRange);this.colorRange&&(m.colorRange=[g.toJsonColor(this.colorRange[0]),g.toJsonColor(this.colorRange[1])]);this.alphaRange&&(m.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return m}});y.setObject("renderer.TimeRampAger",b,k);return b})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel",
"./Renderer"],function(b,y,r,a,k){b=b(k,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(e,g,h,m){this.observationRenderer=e;this.latestObservationRenderer=g;this.trackRenderer=h;this.observationAger=m},getSymbol:function(e){var g=e.getLayer(),h=this.getObservationRenderer(e),m=h&&h.getSymbol(e),l=this.observationAger;g.timeInfo&&g._map.timeExtent&&h===this.observationRenderer&&l&&m&&(m=l.getAgedSymbol(m,e));return m},getObservationRenderer:function(e){return 0===e.getLayer()._getKind(e)?
this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var e={type:"temporal"};e.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(e.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(e.trackRenderer=this.trackRenderer.toJson());this.observationAger&&(e.observationAger=this.observationAger.toJson());return e}});y.setObject("renderer.TemporalRenderer",b,a);return b})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),
function(b,y,r,a,k,e,g,h,m,l){b=b([l],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,colorStops:null,constructor:function(f){if(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)"string"==typeof f&&(f=JSON.parse(f)),y.mixin(this,f),this._canvas=null,this.colors||this.colorStops||(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:.75,color:"rgba(255, 140, 0, 1)"},{ratio:.9,color:"rgba(255, 0,   0, 1)"}]),
this.gradient=this._generateGradient(this.colorStops||this.colors)},getSymbol:function(f){if(!this._supportsCanvas)return!1;var c=f.attributes.imageData;f=f.attributes.size;if(!f)return null;var d=this._getContext(f[0],f[1]),u=d.getImageData(0,0,f[0],f[1]);window.ArrayBuffer&&c instanceof ArrayBuffer?c=window.Uint8ClampedArray?new Uint8ClampedArray(c):new Uint8Array(c):c.BYTES_PER_ELEMENT&&1!==c.BYTES_PER_ELEMENT&&(c=window.Uint8ClampedArray?new Uint8ClampedArray(c.buffer):new Uint8Array(c.buffer));
if(window.CanvasPixelArray&&u.data instanceof window.CanvasPixelArray)for(var n=u.data,t=n.length;t--;)n[t]=c[t];else u.data.set(c);d.putImageData(u,0,0);return new h(d.canvas.toDataURL(),f[0],f[1])},setColors:function(f){f&&(f instanceof Array||f.colors)&&(this.gradient=this._generateGradient(f.colors||f),this.colors=f);return this},setColorStops:function(f){f&&(f instanceof Array||f.colorStops)&&(this.gradient=this._generateGradient(f.colorStops||f),this.colorStops=f);return this},setMaxPixelIntensity:function(f){this.maxPixelIntensity=
f;return this},setMinPixelIntensity:function(f){this.minPixelIntensity=f;return this},setField:function(f){this.field=f;return this},setFieldOffset:function(f){this.fieldOffset=f;return this},setBlurRadius:function(f){this.blurRadius=f;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var f=y.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,
minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(f.fieldOffset=this.fieldOffset);r.forEach(f.colorStops,function(c){c.color=m.toJsonColor(c.color)});return g.fixJson(f)},_getContext:function(f,c){this._canvas?(this._canvas.width=f,this._canvas.height=c):this._canvas=this._initCanvas(f,c);return this._canvas.getContext("2d")},_initCanvas:function(f,c){var d=a.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: 0px; top: -10000px;"},
null);d.width=f;d.height=c;document.body.appendChild(d);return d},_generateGradient:function(f,c){c||(c=512);f=this._colorsToStops(f);for(var d=this._getContext(1,c||512),u=d.createLinearGradient(0,0,0,c),n=0,t;n<f.length;n++)t=f[n],u.addColorStop(t.ratio,t.color.toCss(!0));d.fillStyle=u;d.fillRect(0,0,1,c);return d.getImageData(0,0,1,c).data},_colorsToStops:function(f){var c=[];if(!f[0])return c;if(null!=f[0].ratio)c=r.map(f,function(A){return{ratio:A.ratio,color:this._toColor(A.color)}},this);else if(null!=
f[0].value){var d=Infinity;c=-Infinity;var u=0,n;for(n=0;n<f.length;n++){var t=f[n].value;t<d&&(d=t);t>c&&(c=t)}u=c-d;this.maxPixelIntensity=c;this.minPixelIntensity=d;c=r.map(f,function(A){var B=A.value;A=this._toColor(A.color);return{value:B,ratio:(B-d)/u,color:A}},this)}else{var x=f.length-1;c=r.map(f,function(A,B){return{color:this._toColor(A),ratio:B/x}},this)}return c},_toColor:function(f){f.toRgba||f.declaredClass||(f=new m(f));return f}});y.setObject("renderer.HeatmapRenderer",b,e);return b})},
"esri/renderers/StretchRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(b,y,r,a,k,e,g,h){var m={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};b=b(null,{declaredClass:"esri.renderer.StretchRenderer",constructor:function(l){l=l||{};this.stretchType=
m.TYPE_NONE;this.dra=!0;this.statistics=[];this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=this.min=this.max=null;r.mixin(this,l);this.colorRamp=h.fromJson(l.colorRamp)},toJson:function(){var l={type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:r.clone(this.statistics),
dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:r.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};return e.fixJson(l)},toRenderingRule:function(l){l=l||{};var f=new g;f.functionName="Stretch";var c=this._convertStretchTypeEnumToIndex(this.stretchType),d={StretchType:c,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};e.isDefined(this.min)&&
(d.Min=this.min);e.isDefined(this.min)&&(d.Max=this.max);3===c?(d.NumberOfStandardDeviations=this.numberOfStandardDeviations,f.outputPixelType="U8"):6===c?(d.MinPercent=parseFloat(this.minPercent),d.MaxPercent=parseFloat(this.maxPercent),f.outputPixelType="U8"):5===c?f.outputPixelType="U8":9===c&&(d.SigmoidStrengthLevel=this.sigmoidStrengthLevel);f.functionArguments=d;f.variableName="Raster";return this.colorRamp?(c=new g,c.functionArguments=l.convertToColormap?{Colormap:h.convertColorRampToColormap(this.colorRamp,
256)}:{colorRamp:this.colorRamp.toJson()},c.variableName="Raster",c.functionName="Colormap",c.functionArguments.Raster=f,c):f},_convertStretchTypeEnumToIndex:function(l){var f=0;l===m.TYPE_STANDARDDEVIATION?f=3:l===m.TYPE_HISTOGRAMEQUALIZATION?f=4:l===m.TYPE_MINMAX?f=5:l===m.TYPE_PERCENTCLIP?f=6:l===m.TYPE_SIGMOID&&(f=9);return f},_convertStretchTypeIndexToEnum:function(l){var f=m.TYPE_NONE;3===l?f=m.TYPE_STANDARDDEVIATION:4===l?f=m.TYPE_HISTOGRAMEQUALIZATION:5===l?f=m.TYPE_MINMAX:6===l?f=m.TYPE_PERCENTCLIP:
9===l&&(f=m.TYPE_SIGMOID);return f}});r.mixin(b,m);r.setObject("renderer.StretchRenderer",b,k);return b})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(b,y,r,a,k){var e=b(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(g){if(y.isObject(g)){this._isRFTJson(g)&&(this._isTemplate=
!0,this._templateJson=g);var h=0;this.functionName=g.rasterFunction||g.name;this.functionArguments=y.clone(g.rasterFunctionArguments||g.arguments);y.mixin(this,g);if(g=this.functionArguments)if(g.Raster=this._toRasterFunction(g.Raster),g.Raster2=this._toRasterFunction(g.Raster2),g.DEM=this._toRasterFunction(g.DEM),g.FillRaster=this._toRasterFunction(g.FillRaster),g.Rasters&&g.Rasters.length)for(h=0;h<g.Rasters.length;h++)g.Rasters[h]=this._toRasterFunction(g.Rasters[h])}},_isRFTJson:function(g){return g.name&&
g.arguments&&g.function&&g.hasOwnProperty("functionType")},_toRasterFunction:function(g){return g&&(g.rasterFunction||g.functionName)?new e(g):g},_rfToJson:function(g){g&&"esri.layers.RasterFunction"===g.declaredClass&&(g=g.toJson());return g},toJson:function(){if(this._isTemplate)return this._templateJson;var g=y.clone(this.functionArguments||this.arguments);if(g&&(g.Raster=this._rfToJson(g.Raster),g.Raster2=this._rfToJson(g.Raster2),g.DEM=this._rfToJson(g.DEM),g.FillRaster=this._rfToJson(g.FillRaster),
g.Rasters&&g.Rasters.length)){var h,m=[];for(h=0;h<g.Rasters.length;h++)m.push(this._rfToJson(g.Rasters[h]));g.Rasters=m}return k.filter({rasterFunction:this.functionName,rasterFunctionArguments:g,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(l){if(null!==l&&void 0!==l)return!0})}});y.setObject("layers.RasterFunction",e,a);return e})},"esri/renderers/colorRampUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),
function(b,y,r,a,k,e,g){function h(t,x,A){if(t){x=x||d;A=A||u;var B=null,F=t.declaredClass,w,D;if((w="string"===typeof t?t:t.name)&&y.some(A,function(q){if(q.name===w)return B=q.id,!0})&&B)return B;"esri.tasks.AlgorithmicColorRamp"===F?y.some(x,function(q){if(l(t.fromColor.toRgb(),q.fromColor)&&l(t.toColor.toRgb(),q.toColor))return B=q.id,!0},this):"esri.tasks.MultipartColorRamp"===F&&y.some(x,function(q){if(t.colorRamps&&q.colorRamps&&t.colorRamps.length===q.colorRamps.length&&(D=t.colorRamps,!y.some(q.colorRamps,
function(v,z){if(!l(D[z].fromColor.toRgb(),v.fromColor)||!l(D[z].toColor.toRgb(),v.toColor))return!0},this))){if(B)return!0;B=q.id}},this);return B}}function m(t){var x=new a,A=t.algorithm;x.fromColor=e.toDojoColor(t.fromColor);x.toColor=e.toDojoColor(t.toColor);A?"esriCIELabAlgorithm"===A?x.algorithm="cie-lab":"esriHSVAlgorithm"===A?x.algorithm="hsv":"esriLabLChAlgorithm"===A&&(x.algorithm="lab-lch"):x.algorithm="hsv";return x}function l(t,x){return t&&x&&t.length&&x.length&&t.length===x.length?
!y.some(t,function(A,B){if(A>x[B]+2||A<x[B]-2)return!0}):!1}function f(t,x,A){t=g.toLAB(t);x=g.toLAB(x);return g.toRGB({l:t.l*(1-A)+A*x.l,a:t.a*(1-A)+A*x.a,b:t.b*(1-A)+A*x.b})}var c={},d=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,
253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",
fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,
214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",
type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,
171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,
10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,
233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],
toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",
colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,
250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,
12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],
toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],
toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,
128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,
245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],u=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},
{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",id:"brownToBlueGreenDivergingDark_predefined"},{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",
id:"cyanLightToBlueDark_predefined"},{name:"Distance",id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Orange Bright",id:"orangeBright_predefined"},{name:"Orange Light to Dark",
id:"orangeLightToDark_predefined"},{id:"partialSpectrum_predefined",name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},
{id:"prediction_predefined",name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},
{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},
{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},{name:"Yellow to Red",id:"yellowToRed_predefined"},
{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],n=new r({data:u});b.mixin(c,{predefinedColorRamps:d,predefinedColorRampNameMap:u,getColorRampName:function(t){return(t=h(t))?(t=n.query({id:t}),t[0]?t[0].name:null):null},fromJson:function(t){var x=null;if(!t)return x;"multipart"===t.type?(x=new k,x.colorRamps=y.map(t.colorRamps,function(A){return m(A)},this)):"algorithmic"===t.type&&(x=m(t));return x},colorsEqual:l,
getColorRampId:h,convertColorRampToColormap:function(t,x){if(t&&x){var A=t.colorRamps?t.colorRamps.length:1,B=[],F=[],w,D,q,v,z=0,C=0;for(z=0;z<A;z++)B[z]={},B[z].start=C,B[z].end=C+1/A,C=B[z].end;for(z=0;z<x;z++){var E=(z+.5)/x;y.forEach(B,function(G,H){E>=G.start&&E<G.end&&(v=(E-G.start)/(G.end-G.start),1<B.length?(w=g.getDojoColor(t.colorRamps[H].fromColor),D=g.getDojoColor(t.colorRamps[H].toColor)):(w=g.getDojoColor(t.fromColor),D=g.getDojoColor(t.toColor)),q=f(w,D,v),F.push([z,q.r,q.g,q.b]))},
this)}return F}},interpolateLabColor:f});return c})},"esri/tasks/AlgorithmicColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),function(b,y,r,a,k,e){b=b(e,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,algorithm:null,toJson:function(){switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":var g="esriCIELabAlgorithm";break;case "hsv":g="esriHSVAlgorithm";break;case "lab-lch":g=
"esriLabLChAlgorithm"}g={type:"algorithmic",algorithm:g};g.fromColor=k.toJsonColor(this.fromColor);g.toColor=k.toJsonColor(this.toColor);return g}});y.setObject("tasks.AlgorithmicColorRamp",b,a);return b})},"esri/tasks/ColorRamp":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.tasks.ColorRamp",type:null});y.setObject("tasks.ColorRamp",b,a);return b})},"esri/tasks/MultipartColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),
function(b,y,r,a,k,e){b=b(e,{declaredClass:"esri.tasks.MultipartColorRamp",type:"multipart",constructor:function(){this.colorRamps=[]},addColorRamp:function(g){this.colorRamps.push(g)},toJson:function(){return{type:"multipart",colorRamps:r.map(this.colorRamps,function(g){return g.toJson()})}}});y.setObject("tasks.MultipartColorRamp",b,k);return b})},"esri/renderers/colorUtils":function(){define(["dojo/_base/Color","dojo/_base/array"],function(b,y){var r={COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,
.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],matrixProduct:function(k,e){var g=[],h,m;if(k[0].length!==e.length)throw"dimensions do not match";var l=k.length,f=k[0].length,c=0;for(h=0;h<l;h++){for(m=c=0;m<f;m++)c+=k[h][m]*e[m];g.push(c)}return g},rgb2xyz:function(k){k=[k.r/255,k.g/255,k.b/255].map(function(e){return.04045>=e?e/12.92:Math.pow((e+.055)/1.055,2.4)});k=this.matrixProduct(this.COEF_RGB2XYZ,k);return{x:100*k[0],y:100*k[1],
z:100*k[2]}},xyz2rgb:function(k){k=this.matrixProduct(this.COEF_XYZ2RGB,[k.x/100,k.y/100,k.z/100]).map(function(e){return Math.min(1,Math.max(.0031308>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055,0))});return{r:Math.round(255*k[0]),g:Math.round(255*k[1]),b:Math.round(255*k[2])}},xyz2lab:function(k){k=[k.x/95.047,k.y/100,k.z/108.883].map(function(e){return e>Math.pow(6/29,3)?Math.pow(e,1/3):1/3*Math.pow(29/6,2)*e+4/29});return{l:116*k[1]-16,a:500*(k[0]-k[1]),b:200*(k[1]-k[2])}},lab2xyz:function(k){var e=
k.l;k=[(e+16)/116+k.a/500,(e+16)/116,(e+16)/116-k.b/200].map(function(g){return g>6/29?Math.pow(g,3):3*Math.pow(6/29,2)*(g-4/29)});return{x:95.047*k[0],y:100*k[1],z:108.883*k[2]}},lab2lch:function(k){var e=k.l,g=k.a,h=k.b;k=Math.sqrt(g*g+h*h);g=Math.atan2(h,g);g=0<g?g:g+2*Math.PI;return{l:e,c:k,h:g}},lch2lab:function(k){var e=k.c,g=k.h;return{l:k.l,a:e*Math.cos(g),b:e*Math.sin(g)}},rgb2lab:function(k){return this.xyz2lab(this.rgb2xyz(k))},lab2rgb:function(k){return this.xyz2rgb(this.lab2xyz(k))},
rgb2lch:function(k){return this.lab2lch(this.xyz2lab(this.rgb2xyz(k)))},lch2rgb:function(k){return this.xyz2rgb(this.lab2xyz(this.lch2lab(k)))}},a={rgb2hsv:function(k){var e=k.r,g=k.g;k=k.b;var h=Math.max(e,g,k),m=h-Math.min(e,g,k),l;0===m?l=0:h===e?l=(g-k)/m%6:h===g?l=(k-e)/m+2:h===k&&(l=(e-g)/m+4);0>l&&(l+=6);return{h:60*l,s:100*(0===m?0:m/h),v:100/255*h}},hsv2rgb:function(k){var e=(k.h+360)%360/60,g=k.v/100*255;k=k.s/100*g;var h=k*(1-Math.abs(e%2-1));switch(Math.floor(e)){case 0:e={r:k,g:h,b:0};
break;case 1:e={r:h,g:k,b:0};break;case 2:e={r:0,g:k,b:h};break;case 3:e={r:0,g:h,b:k};break;case 4:e={r:h,g:0,b:k};break;case 5:case 6:e={r:k,g:0,b:h};break;default:e={r:0,g:0,b:0}}e.r=Math.round(e.r+g-k);e.g=Math.round(e.g+g-k);e.b=Math.round(e.b+g-k);return e}};return{toRGB:function(k){var e;void 0!==k.r&&void 0!==k.g&&void 0!==k.b?e=k:void 0!==k.l&&void 0!==k.c&&void 0!==k.h?e=r.lch2rgb(k):void 0!==k.l&&void 0!==k.a&&void 0!==k.b?e=r.lab2rgb(k):void 0!==k.x&&void 0!==k.y&&void 0!==k.z?e=r.xyz2rgb(k):
void 0!==k.h&&void 0!==k.s&&void 0!==k.v&&(e=a.hsv2rgb(k));return e},toHSV:function(k){if(void 0!==k.h&&void 0!==k.s&&void 0!==k.v)return k;k=this.toRGB(k);return a.rgb2hsv(k)},toLAB:function(k){return void 0!==k.l&&void 0!==k.a&&void 0!==k.b?k:r.rgb2lab(this.toRGB(k))},toLCH:function(k){return void 0!==k.l&&void 0!==k.c&&void 0!==k.h?k:r.rgb2lch(this.toRGB(k))},toXYZ:function(k){return void 0!==k.x&&void 0!==k.y&&void 0!==k.z?k:r.rgb2xyz(this.toRGB(k))},getDojoColor:function(k){if(k){if(Array.isArray(k))return b.fromArray(k);
if(void 0!==k.r&&void 0!==k.g&&void 0!==k.b)return k}},correctRGBLimits:function(k){var e=[k.r,k.g,k.b];y.forEach(e,function(g,h){0>e[h]?e[h]=0:255<e[h]&&(e[h]=255);e[h]=Math.floor(e[h])});return{r:e[0],g:e[1],b:e[2],a:1}}}})},"esri/renderers/ShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(b,y,r,a,k,e,g,h){b=b(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",
constructor:function(m){m=m||{};this.hillshadeType=m.hillshadeType||"traditional";this.azimuth=null!=m.azimuth?m.azimuth:315;this.altitude=null!=m.altitude?m.altitude:45;this.zFactor=m.zFactor||1;this.scalingType=m.scalingType||"none";this.pixelSizePower=null!=m.pixelSizePower?m.pixelSizePower:.664;this.pixelSizeFactor=null!=m.pixelSizeFactor?m.pixelSizeFactor:.024;this.removeEdgeEffect=m.removeEdgeEffect||!1;this.colorRamp=h.fromJson(m.colorRamp)},toJson:function(){var m={type:"rasterShadedRelief",
hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&this.colorRamp.toJson()};return e.fixJson(m)},toRenderingRule:function(m){}});r.setObject("renderer.ShadedReliefRenderer",b,k);return b})},"esri/renderers/ColormapRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),
function(b,y,r,a,k,e,g,h,m){b=b(h,{declaredClass:"esri.renderer.ColormapRenderer",constructor:function(l){this.colormapInfos=l&&l.colormapInfos},toJson:function(){var l=e.fixJson;var f={type:"rasterColormap",colormapInfos:y.map(this.colormapInfos||[],function(c,d){var u={};c.color&&null!==c.color&&3<=c.color.length&&(u.color=c.color,u.value=c.value||d,u.label=(c.label||d)+"");return l(u)})};f=r.mixin(this.inherited(arguments),f);return l(f)}});r.setObject("renderer.ColormapRenderer",b,k);return b})},
"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(b,y,r,a){b.setObject("renderer.arcadeUtils",a,r);return a})},"esri/arcadeProfiles/labelingProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(b,y,r,a,k,e,g,h){b=new (b(null,{declaredClass:"esri.arcadeProfiles.LabelingProfile",defaults:{context:{vars:{$feature:"any"}}},
initialize:function(m){var l=[];h.hasGeometryOperations(m)&&l.push(g.enableGeometryOperations());return k(l)},isAsync:function(m){return!1},parse:function(m){return g.createSyntaxTree(m.expression)},compile:function(m){var l=y.clone(this.defaults.context);return m.syntaxTree?g.createFunction(m.syntaxTree,l):null},getEvalOptions:function(m){var l=m.feature;return{context:{vars:{$feature:l&&m.expression.hasVariable("$feature")?e.createFromGraphicLikeObject(l.geometry,l.attributes,m.layer):null},spatialReference:m.spatialReference}}}}));
y.setObject("arcadeProfiles.labelingProfile",b,a);return b})},"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n){var t=m("esri-pbf"),x=y(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,
_result:null,constructor:function(B){this._handleSuccess=r.hitch(this,this._handleSuccess);this._handleError=r.hitch(this,this._handleError);r.mixin(this,B);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var B=new k(this._canceler);this._fetchDfd=B;this._result=null;this._sendRequest();return B.promise},_canceler:function(B){var F=B._pendingRequest;if(!B.isFulfilled()&&F&&!F.isFulfilled()){F.cancel();var w=F.results&&F.results[1]}B._pendingRequest=
null;return w},_sendRequest:function(B){var F=this.query;this.pagination&&(this._startPage=F.resultOffset=null==B?0:B,F.resultRecordCount=this.pageSize);B=this.requestOptions;this._fetchDfd._pendingRequest=l({url:this.url,content:F,handleAs:"pbf"===F.f?"arraybuffer":"json",callbackParamName:"callback",timeout:B&&B.timeout},B);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},_handleSuccess:function(B){this.pagination?(B.exceededTransferLimit&&this._sendRequest(this._startPage+
this.pageSize),this._result?this._result.features=this._result.features.concat(B.features):this._result=B,this._fetchDfd.progress(B),B.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(B),this._fetchDfd.resolve(B))},_handleError:function(B){this._fetchDfd.reject(B)}}),A=y(u,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},
constructor:function(B,F){this._handler=r.hitch(this,this._handler);this._relationshipQueryHandler=r.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=r.hitch(this,this._executeForIdsHandler);this._countHandler=r.hitch(this,this._countHandler);this._extentHandler=r.hitch(this,this._extentHandler);this.source=F&&F.source;this.gdbVersion=F&&F.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],
e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(B,F,w,D,q){var v=q.assembly;B=this._encode(r.mixin({},this._url.query,{f:D&&D.format||"json"},
B.toJson(v&&v[0])));var z=this._handler,C=this._errorHandler;this.source&&(D={source:this.source.toJson()},B.layer=e.toJson(D));this.gdbVersion&&(B.gdbVersion=this.gdbVersion);var E="pbf"===B.f;if(E){var G;t||(G="QueryTask.execute: 'pbf' format is not supported in your browser.");if(G)return B=new k,B.addErrback(function(H){C(H,w,q.dfd)}),B.reject(Error(G)),B}G=this.requestOptions;G=l({url:this._url.path+"/query",content:B,callbackParamName:"callback",handleAs:E?"arraybuffer":"json",timeout:G&&G.timeout},
G);B=[G];E&&B.push(A.loadPBFReader());(new g(B)).then(function(H){q.dfd.isFulfilled()||(H=H[0],H[0]?z(H[1],E,F,w,q.dfd):C(H[1],w,q.dfd))});return G},rawExecute:function(B,F,w){F=F||{};B=this._encode(r.mixin({},this._url.query,{f:F.format||"json"},B.toJson(w.assembly&&w.assembly[0])));this.source&&(B.layer=e.toJson({source:this.source.toJson()}));this.gdbVersion&&(B.gdbVersion=this.gdbVersion);return(new x({url:this._url.path+"/query",query:B,requestOptions:this.requestOptions,pagination:F.pagination,
pageSize:F.pageSize})).execute().then(null,null,function(D){w.dfd.progress(D)}).then(r.hitch(this,function(D){this._successHandler([D],"onRawExecuteComplete",null,w.dfd)})).otherwise(r.hitch(this,function(D){this._errorHandler(D,null,w.dfd)}))},executeRelationshipQuery:function(B,F,w){B=this._encode(r.mixin({},this._url.query,{f:"json"},B.toJson()));var D=this._relationshipQueryHandler,q=this._errorHandler;this.gdbVersion&&(B.gdbVersion=this.gdbVersion);var v=new k(f._dfdCanceller),z=this.requestOptions,
C=this._url.path;this.source&&void 0!==this.source.mapLayerId&&null!==this.source.mapLayerId&&C.endsWith("/dynamicLayer")&&(C=C.slice(0,-13),C=C+"/"+this.source.mapLayerId);v._pendingDfd=l({url:C+"/queryRelatedRecords",content:B,callbackParamName:"callback",timeout:z&&z.timeout,load:function(E,G){D(E,G,F,w,v)},error:function(E){q(E,w,v)}},z);return v},executeForIds:function(B,F,w,D){var q=D.assembly;B=this._encode(r.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},B.toJson(q&&q[0])));var v=this._executeForIdsHandler,
z=this._errorHandler;this.source&&(q={source:this.source.toJson()},B.layer=e.toJson(q));this.gdbVersion&&(B.gdbVersion=this.gdbVersion);q=this.requestOptions;return l({url:this._url.path+"/query",content:B,callbackParamName:"callback",timeout:q&&q.timeout,load:function(C,E){v(C,E,F,w,D.dfd)},error:function(C){z(C,w,D.dfd)}},q)},executeForCount:function(B,F,w,D){var q=D.assembly;B=this._encode(r.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},B.toJson(q&&q[0])));var v=this._countHandler,
z=this._errorHandler;this.source&&(q={source:this.source.toJson()},B.layer=e.toJson(q));this.gdbVersion&&(B.gdbVersion=this.gdbVersion);q=this.requestOptions;return l({url:this._url.path+"/query",content:B,callbackParamName:"callback",timeout:q&&q.timeout,load:function(C,E){v(C,E,F,w,D.dfd)},error:function(C){z(C,w,D.dfd)}},q)},executeForExtent:function(B,F,w,D){var q=D.assembly;B=this._encode(r.mixin({},this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},B.toJson(q&&q[0])));var v=this._extentHandler,
z=this._errorHandler;this.source&&(q={source:this.source.toJson()},B.layer=e.toJson(q));this.gdbVersion&&(B.gdbVersion=this.gdbVersion);q=this.requestOptions;return l({url:this._url.path+"/query",content:B,callbackParamName:"callback",timeout:q&&q.timeout,load:function(C,E){v(C,E,F,w,D.dfd)},error:function(C){z(C,w,D.dfd)}},q)},_handler:function(B,F,w,D,q){try{B&&F&&(B=A.pbfDeps.optimizedFeatures.convertToFeatureSet(A.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(B)));var v=new n(B);this._successHandler([v],
"onComplete",w,q)}catch(z){this._errorHandler(z,D,q)}},_relationshipQueryHandler:function(B,F,w,D,q){try{var v=B.geometryType,z=B.spatialReference,C={};a.forEach(B.relatedRecordGroups,function(E){var G={};G.geometryType=v;G.spatialReference=z;G.features=E.relatedRecords;G=new n(G);if(null!=E.objectId)C[E.objectId]=G;else for(var H in E)E.hasOwnProperty(H)&&"relatedRecords"!==H&&(C[E[H]]=G)});this._successHandler([C],"onExecuteRelationshipQueryComplete",w,q)}catch(E){this._errorHandler(E,D,q)}},_executeForIdsHandler:function(B,
F,w,D,q){try{this._successHandler([B.objectIds],"onExecuteForIdsComplete",w,q)}catch(v){this._errorHandler(v,D,q)}},_countHandler:function(B,F,w,D,q){try{var v=B.features,z=B.objectIds;if(z)var C=z.length;else{if(v)throw Error("Unable to perform query. Please check your parameters.");C=B.count}this._successHandler([C],"onExecuteForCountComplete",w,q)}catch(E){this._errorHandler(E,D,q)}},_extentHandler:function(B,F,w,D,q){try{B.extent&&(B.extent=new c(B.extent)),this._successHandler([B],"onExecuteForExtentComplete",
w,q)}catch(v){this._errorHandler(v,D,q)}}});A.loadPBFReader=function(){var B=new k;A.pbfDeps?B.resolve():b(["./support/pbfDeps"],function(F){A.pbfDeps=F;B.isFulfilled()||B.resolve()});return B.promise};d._createWrappers(A);r.setObject("tasks.QueryTask",A,h);return A})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship ./QueryTask ./RelationshipQuery ./StatisticDefinition".split(" "),
function(b,y,r,a,k,e,g,h){var m=b(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=m.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,
resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(l){var f={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},c=l&&l.geometry||this.geometry,d=this.objectIds,u=this.outFields,n=this.outSpatialReference,t=this.groupByFieldsForStatistics,x=this.orderByFields,A=this.outStatistics;l=this.distance;c&&(f.geometry=c,f.geometryType=g.getJsonType(c),f.inSR=c.spatialReference.wkid||a.toJson(c.spatialReference.toJson()));d&&(f.objectIds=d.join(","));u&&(f.outFields=u.join(","));null!=this.returnCentroid&&(f.returnCentroid=this.returnCentroid);this.returnDistinctValues&&
(f.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(f.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(f.maxRecordCountFactor=this.maxRecordCountFactor);t&&(f.groupByFieldsForStatistics=t.join(","));x&&(f.orderByFields=x.join(","));if(A){var B=[];r.forEach(A,function(F){B.push(F.toJson())});f.outStatistics=a.toJson(B)}n?f.outSR=n.wkid||a.toJson(n.toJson()):c&&(f.outSR=c.spatialReference.wkid||a.toJson(c.spatialReference.toJson()));c=
this.timeExtent;f.time=c?c.toJson().join(","):null;(c=this.relationParam)&&this.spatialRelationship===m.SPATIAL_REL_RELATION&&(f.relationParam=c);l&&(f.distance=this.distance,this.hasOwnProperty("units")?f.units=this._units[this.units]||this._units.meters:f.units=this._units.meters);this.hasOwnProperty("start")&&(f.resultOffset=this.start,f.resultRecordCount=10,""===f.where&&(f.where="1\x3d1"));this.hasOwnProperty("num")&&(f.resultRecordCount=this.num);f.resultType=this.resultType;null!=this.cacheHint&&
(f.cacheHint=this.cacheHint);f.pixelSize=this.pixelSize?a.toJson(this.pixelSize.toJson()):null;f.multipatchOption=this.multipatchOption;this.quantizationParameters&&(f.quantizationParameters=a.toJson(this.quantizationParameters));f._ts=this._ts;return f}});y.mixin(m,h);y.setObject("tasks.Query",m,e);return m})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(b,y,r){y={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",
SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};b.setObject("tasks._SpatialRelationship",y,r);return y})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json",
"dojo/has","../kernel"],function(b,y,r,a,k){b=b(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var e={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},g=this.objectIds,h=this.outFields,m=this.outSpatialReference,
l=this.orderByFields;g&&(e.objectIds=g.join(","));h&&(e.outFields=h.join(","));m&&(e.outSR=m.wkid||r.toJson(m.toJson()));l&&(e.orderByFields=l.join(","));e._ts=this._ts;return e}});y.setObject("tasks.RelationshipQuery",b,k);return b})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,
outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});y.setObject("tasks.StatisticDefinition",b,a);return b})},"esri/layers/GraphicsLayer":function(){define("require dojo/_base/declare dojo/_base/Deferred dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ./support/webglUtils ./support/WebGLSurface ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/utils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v,z,C,E,G,H,K,I){var J=-1!==c.renderer.toLowerCase().indexOf("svg"),Q=-1!==c.renderer.toLowerCase().indexOf("canvas"),V=Q?"canvas-2d":c.renderer,O=9>F("ie");g=10===F("ie");var S=void 0===F("ie")&&7==F("trident"),L=g||S,Y=F("esri-touch"),ca=!!F("chrome"),U=t.isWebGLEnabled(),X=J&&F("esri-will-change"),Z=U||Q;t=y(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(N,aa){var ka=this._connects=[];this._map=N;this._useWillChange=
this._useGlobalTransform="css-transforms"===N.navigationMode&&X;if(Z){var pa=m.create("div",{style:{position:"absolute",overflow:"visible"}},aa);this._surface={getEventSource:function(){return pa}};Q&&(ka.push(a.connect(pa,"onmousedown",this,this._canvasDownHandler)),ka.push(a.connect(pa,"onmouseup",this,this._canvasUpHandler)),ka.push(a.connect(pa,"onclick",this,this._canvasClickHandler)));U&&(this._webglSurface=new x({map:N,node:pa}))}else pa=(this._surface=c.createSurface(aa,N.width,N.height)).getEventSource(),
this._useWillChange&&l.set(pa,"will-change","transform"),l.set(pa=O?pa.parentNode:pa,{overflow:"visible",position:"absolute"});ka.push(a.connect(N,"onResize",this,"_onResizeHandler"));this._useGlobalTransform&&(ka.push(a.connect(N,"onPan",this,"_onPanHandler")),ka.push(a.connect(N,"onPanEnd",this,"_onPanEndHandler")),ka.push(a.connect(N,"onExtentChange",this,"_onExtentChangeHandler")));return pa},_reorderLayer:function(N,aa,ka){aa=aa.getEventSource();Z&&"svg"===N.surfaceType&&(aa=aa.parentNode);m.place(aa,
this._surface.getEventSource(),ka)},_onPanHandler:function(N,aa){var ka=this._map.__visibleRect;N=ka.x+aa.x;aa=ka.y+aa.y;this._panDx=N;this._panDy=aa;Z||l.set(this._surface.getEventSource(),A._css.names.transform,A._css.translate(N,aa))},_onPanEndHandler:function(N,aa){aa=this._map.__visibleRect;N=aa.x;aa=aa.y;this._panDx=N;this._panDy=aa;Z||l.set(this._surface.getEventSource(),A._css.names.transform,A._css.translate(N,aa))},_onExtentChangeHandler:function(N,aa,ka,pa){ka&&(this._panDy=this._panDx=
0,Z||l.set(this._surface.getEventSource(),A._css.names.transform,A._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(N,aa,ka){N=this._surface.getEventSource();var pa=this._map,ta;O&&l.set(N=N.parentNode,{width:aa+"px",height:ka+"px",clip:"rect(0px "+aa+"px "+ka+"px 0px)"});h.set(N,"width",aa);h.set(N,"height",ka);this._surface.declaredClass||e.forEach(N.childNodes,function(Ba){h.set(Ba,"width",aa);h.set(Ba,"height",ka)});pa.loaded&&
(pa.graphics.suspended||(pa.graphics._resized=!0),e.forEach(pa.graphicsLayerIds,function(Ba){ta=pa.getLayer(Ba);ta.suspended||(ta._resized=!0,ta._childLayer&&(ta._childLayer._resized=!0));ta._updateSVGFilters(null,null,aa,ka)}),pa.graphics._updateSVGFilters(null,null,aa,ka),pa._labels&&pa._labels._updateSVGFilters(null,null,aa,ka))},_cleanUp:function(){e.forEach(this._connects,a.disconnect,a);this._map=this._surface=null},_processEvent:function(N){var aa=this._map;N.screenPoint=new E(N.pageX-aa.position.x,
N.pageY-aa.position.y);N.mapPoint=aa.toMap(N.screenPoint)},_canvasDownHandler:function(N){this._processEvent(N);this._downPt=N.screenPoint.x+","+N.screenPoint.y},_canvasUpHandler:function(N){this._processEvent(N);this._upPt=N.screenPoint.x+","+N.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(N,aa,ka,pa){if(!N.visible||!aa)return!1;var ta=aa.getTransformedBoundingBox();if(ta){var Ba=new G(ta[0].x,ta[0].y,ta[2].x,ta[2].y);delete Ba.spatialReference;return Y?Ba.intersects(ka):Ba.contains(pa)}return e.some(aa.children||
[],function(Da){ta=Da.getTransformedBoundingBox();Ba=new G(ta[0].x,ta[0].y,ta[2].x,ta[2].y);delete Ba.spatialReference;return Y?Ba.intersects(ka):Ba.contains(pa)})},_canvasClickHandler:function(N){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(N);var aa=this._map,ka=e.map(aa.graphicsLayerIds,function(la){return aa.getLayer(la)});ka.push(aa.graphics);ka.reverse();ka=e.filter(ka,function(la){return la.loaded&&!la.hasWebGLSurface()&&la._mouseEvents&&!la.suspended&&(!B.isDefined(la.opacity)||
0<la.opacity)});var pa=N.screenPoint,ta=this._tolerance,Ba=pa.x-ta,Da=pa.y+ta,oa=pa.x+ta;ta=pa.y-ta;var ra=new G(Ba,ta,oa,Da);Ba=aa.toMap(new E(Ba,Da));oa=aa.toMap(new E(oa,ta));Da=Ba.spatialReference._getInfo();var ya=new G(G.prototype._normalizeX(Ba.x,Da).x,Ba.y,G.prototype._normalizeX(oa.x,Da).x,oa.y,Ba.spatialReference),wa;delete ra.spatialReference;e.some(ka,function(la){la=e.filter(la.graphics,function(da){return this._isPrimaryMatch(da,da.getDojoShape(),ra,pa)||!(!da._bgShape||!this._isPrimaryMatch(da,
da._bgShape,ra,pa))},this);la.reverse();if(0<la.length){var Aa;e.some(la,function(da){return da.geometry&&ya.intersects(da.geometry)?(Aa=da,!0):!1});if(Aa)return wa=Aa,!0}return!1},this);wa&&(ka=wa.getLayer())&&(N.graphic=wa,ka.onClick(N))}}});n=y(n,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:V,webglEnabled:U,renderer:null,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},_suspendGraphics:!1,constructor:function(N,aa){N=
N||{};if(k.isString(N)||k.isObject(N)&&(N.layerDefinition||N.query))N=aa;this._params=k.mixin({displayOnPan:!0,drawMode:!0,styling:!0},N);aa=this._params.dataAttributes;"string"===typeof aa&&(aa=[aa]);this.styling=J?this._params.styling:!0;this.dataAttributes=aa;this.infoTemplate=N&&N.infoTemplate;this.graphics=[];this._draw=k.hitch(this,this._draw);this._refresh=k.hitch(this,this._refresh);this._acquireSVGMarker=k.hitch(this,this._acquireSVGMarker);this._evalSurfaceType=k.hitch(this,this._evalSurfaceType);
this._setSurfaceType=k.hitch(this,this._setSurfaceType);this.setWebGLEnabled(null!=this._params.webglEnabled?this._params.webglEnabled:this.webglEnabled);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(N){this._params.drawMode=N},suspendGraphics:function(N){this._suspendGraphics=N;e.forEach(this.graphics,function(aa){aa._suspended=N})},setWebGLEnabled:function(N){var aa=this.webglEnabled;this.webglEnabled=(N||!1)&&U;aa!==this.webglEnabled&&
(this._evalSurfaceType(),this.onWebGLEnabledChange())},hasWebGLSurface:function(){return"webgl"===this.surfaceType},_getSurfaceType:function(N){return N&&"webgl"===N.surfaceType?"webgl":V},_evalSurfaceType:function(N){U&&(N?this._setSurfaceType():null==this._evalSurfaceTimerHandle&&(this._evalSurfaceTimerHandle=setTimeout(this._setSurfaceType,0)))},_hasPendingSurfaceEval:function(){return!!this._evalSurfaceTimerHandle},_setSurfaceType:function(){clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=
null;var N=this._canUseWebGLSurface()?"webgl":V;this.surfaceType!==N?(this.surfaceType=N,this._handleSurfaceChange(),this.onSurfaceChange()):this._pendingRedraw&&this._redraw()},_handleSurfaceChange:function(){this._cancelWebGLDepsLoad();this._webglDepsPromise=this._prepareToAttach(this._map);this._webglDepsPromise.always(k.hitch(this,function(N){this._webglDepsPromise=null;N&&"cancel"===N.dojoType||this._evalSurface()}))},_cancelWebGLDepsLoad:function(){this._webglDepsPromise&&!this._webglDepsPromise.isFulfilled()&&
this._webglDepsPromise.cancel();this._webglDepsPromise=null},_evalSurface:function(){var N=this._map,aa=this._div;N&&aa&&this._getSurfaceType(aa)!==this.surfaceType&&(N._detachGraphicsLayer(this),N._attachGraphicsLayer(this))},_canUseWebGLSurface:function(N){N=N||this._map;return this.webglEnabled&&(!N||N.webglEnabled&&(N.ownsWebGLContext(this)||N.isWebGLContextAvailable()))&&this._params.drawMode&&this._isWebGLCompatible()},_isWebGLCompatible:function(){return!1},_prepareToAttach:function(N){var aa=
new r;!this.webglDeps&&this._canUseWebGLSurface(N)?b(["./support/webglDeps"],k.hitch(this,function(ka){this.webglDeps=ka;aa.isFulfilled()||aa.resolve()})):aa.resolve();return aa.promise},_setMap:function(N,aa){this.inherited(arguments);this._map=N;this._evalSurfaceType(!0);this._webglChangeMapHandle=N.on("webgl-enabled-change",k.hitch(this,function(){this._evalSurfaceType()}));this._wrap=N.wrapAround180;this._srInfo=N.spatialReference._getInfo();this._svgFilters={};this._lineMarkers={};if(this.hasWebGLSurface())N.acquireWebGLContext(this),
this._div=N._gc._webglSurface.createRenderer(this.webglDeps.WebGLRenderer,N.width,N.height,this);else{if("svg"===this.surfaceType)if(Z){aa=c.createSurface(aa.getEventSource(),N.width,N.height);var ka=aa.getEventSource();l.set(ka,{position:"absolute",overflow:"visible",pointerEvents:"none"});N._gc._useWillChange&&l.set(ka,"will-change","transform");this._div=aa.createGroup();l.set(this._div.getEventSource(),"pointer-events","auto")}else this._div=aa.createGroup();else aa=c.createSurface(aa.getEventSource(),
N.width,N.height),l.set(aa.rawNode,"position","absolute"),this._div=aa.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=k.hitch(this,this._canvasRender);this._bgGroup=this._div.createGroup()}this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(N,aa){N.releaseWebGLContext(this);"webgl"===this._div.surfaceType?N._gc._webglSurface.destroyRenderer(this._div):(e.forEach(this.graphics,function(ka){ka._shape=null}),
"svg"===this.surfaceType?Z?(aa=this._div.parent,this._div.clear(),aa.remove(this._div),m.destroy(this._div.getEventSource()),m.destroy(aa.getEventSource())):(this._div.clear(),aa.remove(this._div),m.destroy(this._div.getEventSource())):(aa=this._div.getParent(),aa._parent={},m.destroy(aa.rawNode),aa.destroy()));this._map=this._div=this._svgFilters=this._lineMarkers=null;this._pendingRedraw=!1;clearTimeout(this._wakeTimer);this._wakeTimer=null;clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=
null;this._webglChangeMapHandle&&this._webglChangeMapHandle.remove();this._cancelWebGLDepsLoad();this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var N=this.opacity;B.isDefined(N)&&1>N&&this.setOpacity(N,!0)},_onZoomStartHandler:function(){this.hasWebGLSurface()||D.hide(this._div.getEventSource())},_onExtentChangeHandler:function(N,aa,ka,pa){clearTimeout(this._wakeTimer);this._wakeTimer=null;ka?(N=this._map.__visibleRect,aa=this._div,this._evalSDRenderer(),this._refresh(!0),
this._params._child||this._updateTransform(aa,N.x,N.y,!0),this._renderProto&&aa.surface.pendingRender?this._dirty=!0:this.suspended||D.show(aa.getEventSource())):this._resized&&(this._resized=!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var N=this._div;this._dirty&&(delete this._dirty,this.suspended||D.show(N.getEventSource()));return this._renderProto.apply(N,arguments)},_refresh:function(N){if(!this.hasWebGLSurface()){var aa=this.graphics,ka=aa.length,
pa,ta=this._draw;for(pa=0;pa<ka;pa++)ta(aa[pa],N)}},refresh:function(){this._refresh(!0)},_redraw:function(){this._pendingRedraw=!1;this.hasWebGLSurface()?this._div&&this._div.redraw():this._refresh(!0)},redraw:function(){this._hasPendingSurfaceEval()?this._pendingRedraw=!0:this._redraw()},hasLocalNavigationTransform:function(){return!(this._map&&this._map._gc._useGlobalTransform)},getNavigationTransform:function(){var N={dx:0,dy:0};this._map&&(this.hasLocalNavigationTransform()?this._div&&!this.hasWebGLSurface()&&
(N=this._div.getTransform()):N=this._map._gc._getTransform());return N},_onPanHandler:function(N,aa){this._panDx=aa.x;this._panDy=aa.y;N=this._map.__visibleRect;this._updateTransform(this._div,N.x+aa.x,N.y+aa.y);S&&this._updateSVGMarkers()},_onPanEndUpdateHandler:function(N,aa){N=this._map.__visibleRect;this._params._child||aa.x===this._panDx&&aa.y===this._panDy?(this._updateSVGFilters(-N.x,-N.y),this._updateSVGMarkers()):this._updateTransform(this._div,N.x,N.y,!0);this._refresh(!1);if(this.graphics.length)this.onUpdate()},
_onPanStartHandler:function(){D.hide(this._div.getEventSource())},_onPanEndHandler:function(){var N=this._map.__visibleRect,aa=this._div;this._updateTransform(aa,N.x,N.y,!0);this._refresh(!1);this._renderProto&&aa.surface.pendingRender?this._dirty=!0:D.show(aa.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(N,aa,ka,pa){this.hasWebGLSurface()||(this.hasLocalNavigationTransform()?N.setTransform(d.translate({x:aa,y:ka})):Z&&l.set(this._div.parent.getEventSource(),
A._css.names.transform,A._css.translate(aa,ka)),pa&&(this._updateSVGFilters(-aa,-ka),this._updateSVGMarkers()))},onSuspend:function(){this.inherited(arguments);D.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(N){this.inherited(arguments);N.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(k.hitch(this,function(){this.suspended||this._map.__zooming||this._onExtentChangeHandler(null,
null,!0)}),0)},_enableDrawConnectors:function(){var N=this._map,aa=a.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=aa(N,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=aa(N,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=aa(N,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=aa(N,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=aa(N,"onZoomStart",this,
"_onZoomStartHandler");this._onExtentChangeHandler_connect=aa(N,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var N=a.disconnect;N(this._onExtentChangeHandler_connect);N(this._onZoomStartHandler_connect);N(this._onPanHandler_connect);N(this._onPanStartHandler_connect);N(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},
_updateExtent:function(N){var aa=N.geometry;if(!aa)N._extent=null;else if(!(N._extent=aa.getExtent())){if("esri.geometry.Point"===aa.declaredClass){var ka=aa.x;var pa=aa.y}else if("esri.geometry.Multipoint"===aa.declaredClass)ka=aa.points[0][0],pa=aa.points[0][1];else{N._extent=null;return}N._extent=new G(ka,pa,ka,pa,aa.spatialReference)}},_intersects:function(N,aa,ka){var pa=N.spatialReference,ta=aa.spatialReference,Ba=pa&&ta&&!pa.equals(ta)&&pa._canProject(ta)&&4326===ta.wkid;if(this._wrap&&!ka){ka=
[];pa=N._getFrameWidth();var Da=this._srInfo,oa=N._clip?N._getAvailExtent():N.extent,ra,ya=[];var wa=aa._partwise;Ba&&(oa=N.geographicExtent,Da=ta._getInfo());N=oa._getParts(Da);if(wa&&wa.length)for(aa=[],ta=0,Ba=wa.length;ta<Ba;ta++)aa=aa.concat(wa[ta]._getParts(Da));else aa=aa._getParts(Da);ta=0;for(Ba=aa.length;ta<Ba;ta++){var la=aa[ta];Da=0;for(oa=N.length;Da<oa;Da++){var Aa=N[Da];if(Aa.extent.intersects(la.extent))for(wa=0,ra=la.frameIds.length;wa<ra;wa++)ka.push((Aa.frameIds[0]-la.frameIds[wa])*
pa)}}ta=0;for(Ba=ka.length;ta<Ba;ta++)wa=ka[ta],e.indexOf(ka,wa)===ta&&ya.push(wa);return ya.length?ya:null}return(Ba?N.geographicExtent:N.extent).intersects(aa)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(N,aa){if(!this.hasWebGLSurface()&&this._params.drawMode&&this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var ka=N._extent,pa,ta,Ba=!J||this.styling,Da=J&&this.dataAttributes,oa=N.getDojoShape(),ra;if(!N._suspended&&
N.visible&&ka&&(pa=this._intersects(this._map,ka,N.geometry._originOnly))&&(ta=Ba?this._getSymbol(N):this._defaultMarker)){if(N._offsets&&N._offsets.join(",")===pa.join(",")?ra=!0:N._offsets=pa,!oa||aa||!ra){var ya=N.geometry.type;aa={graphic:N};var wa=N._bgShape,la=Ba&&!N.symbol?this._getRenderer(N):null,Aa=la&&la.backgroundFillSymbol;if("point"===ya)this._isInvalidShape(ta,oa)&&this._removeShape(N),N._shape=this._drawPoint(this._div,N.geometry,ta,N.getDojoShape(),pa,la,N),Ba&&this._symbolizePoint(N.getDojoShape(),
ta,la,N);else if("multipoint"===ya)this._drawMarkers(N,ta,pa,la),Ba&&this._symbolizeMarkers(N,ta,la);else{var da;ya=ta;var fa;Ba&&(ya=(da="simplemarkersymbol"===ta.type||"picturemarkersymbol"===ta.type||"textsymbol"===ta.type?ta:null)?Aa:ta);if(Ba&&ya&&-1<ya.type.indexOf("fillsymbol")){var P=this._bgGroup;var xa=!(!P||!da)}wa&&!xa&&this._removeBgShape(N);if(ya){!xa&&(this._isInvalidShape(ya,N._shape)||N._shape&&N._shape._isCentroidMarker)&&this._removeShape(N,!1);if(fa=this._drawShape(N,pa,P||this._div,
xa?wa:N.getDojoShape()))fa._isCentroidMarker=!1;Ba&&this._symbolizeShape(fa,ya,la,ya===Aa,N);N[xa?"_bgShape":"_shape"]=fa}if(da){(this._isInvalidShape(da,N._shape)||N._shape&&!N._shape._isCentroidMarker)&&this._removeShape(N,!1);var Fa=N.geometry.getCentroid();if(fa=Fa&&this._drawPoint(this._div,Fa,da,N._shape,pa,la,N))fa._isCentroidMarker=!0,this._symbolizePoint(fa,da,la,N);N._shape=fa}}Q||(N._bgShape&&this._initNode(N,N._bgShape,N._bgShape!==wa,aa,Da),N._shape&&this._initNode(N,N._shape,N._shape!==
oa,aa,Da));N._applyDataAttrs();aa.node=N.getNode();this.onGraphicDraw(aa)}}else oa&&this._removeShape(N)}catch(ba){this._errorHandler(ba,N)}},_initNode:function(N,aa,ka,pa,ta){if(aa=aa&&aa.getNode())aa.e_graphic=N,this._addDataAttrs(N,ta,aa),ka&&(pa.node=aa,this.onGraphicNodeAdd(pa))},_removeShape:function(N,aa,ka){var pa=N.getDojoShape(),ta=pa&&pa.getNode();pa&&!ka&&(pa.removeShape(),pa.destroy());N._shape=N._offsets=null;!1!==aa&&this._removeBgShape(N,ka);if(ta&&(ta.e_graphic=null,!Q))this.onGraphicNodeRemove({graphic:N,
node:ta})},_removeBgShape:function(N,aa){var ka=N._bgShape,pa=ka&&ka.getNode();ka&&!aa&&(ka.removeShape(),ka.destroy());N._bgShape=null;if(pa&&(pa.e_graphic=null,!Q))this.onGraphicNodeRemove({graphic:N,node:pa})},_addDataAttrs:function(N,aa,ka){var pa=N.attributes,ta,Ba=aa?aa.length:0,Da=this._getRenderer(N);if(ka&&pa){for(ta=0;ta<Ba;ta++)(ka=aa[ta])&&N.attr("data-"+ka,pa[ka]);!this.styling&&Da&&(Da.getBreakIndex?(aa=Da.getBreakIndex(N),N.attr("data-class-break",-1!==aa?aa:null)):Da.getUniqueValueInfo&&
(aa=Da.getUniqueValueInfo(N),N.attr("data-unique-value",aa?aa.value:null)))}},_drawShape:function(N,aa,ka,pa){N=N.geometry;var ta=N.type,Ba=this._map,Da=Ba.extent,oa=Ba.width,ra=Ba.height;Ba=Ba.__visibleRect;var ya=[],wa;var la="extent"===ta;if("rect"===ta||la)ya={x:0,y:0,spatialReference:N.spatialReference},ya.x=la?N.xmin:N.x,ya.y=la?N.ymax:N.y,ta=K.toScreenPoint(Da,oa,ra,ya),ya.x=la?N.xmax:N.x+N.width,ya.y=la?N.ymin:N.y+N.height,N=K.toScreenPoint(Da,oa,ra,ya),aa={x:ta.x-Ba.x+aa[0],y:ta.y-Ba.y,width:Math.abs(N.x-
ta.x),height:Math.abs(N.y-ta.y)},0===aa.width&&(aa.width=1),0===aa.height&&(aa.height=1),pa=this._drawRect(ka,pa,aa);else if("polyline"===ta||"polygon"===ta){la=0;for(wa=aa.length;la<wa;la++)ya=ya.concat(K._toScreenPath(Da,oa,ra,N,-Ba.x+aa[la],-Ba.y));pa=this._drawPath(ka,pa,ya);this._rendererLimits&&("polyline"===ta?this._clipPolyline(pa,N):this._clipPolygon(pa,N))}return pa},_drawRect:function(N,aa,ka){return aa?aa.setShape(ka):N.createRect(ka)},_drawImage:function(N,aa,ka){return aa?aa.setShape(ka):
N.createImage(ka)},_drawCircle:function(N,aa,ka){return aa?aa.setShape(ka):N.createCircle(ka)},_drawPath:function(){return O?function(N,aa,ka,pa){ka=pa?ka:ka.join(" ");if(aa)return aa.setShape(ka);aa=N.createObject(pa?c.Path:c.EsriPath,ka);N._overrideSize(aa.getEventSource());return aa}:function(N,aa,ka,pa){ka=pa?ka:ka.join(" ");return aa?aa.setShape(ka):N.createPath(ka)}}(),_drawText:function(N,aa,ka){return aa?aa.setShape(ka):N.createText(ka)},_evalSDRenderer:function(N){var aa=this._map,ka=this.renderer,
pa,ta=this._rndForScale;aa&&aa.loaded&&ka&&ka.getRendererInfo&&(pa="zoom"===ka.rangeType?ka.getRendererInfoByZoom(aa.getZoom()):ka.getRendererInfoByScale(aa.getScale()));this._rndForScale=pa&&pa.renderer;N||this._rndForScale==ta||this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(N){var aa=this._rndForScale||this.renderer;N&&aa&&aa.getObservationRenderer&&(aa=aa.getObservationRenderer(N));return aa},_getSymbol:function(N){var aa=this._getRenderer();return N.symbol||aa&&
aa.getSymbol(N)},_getVariable:function(N,aa,ka){if(N)var pa=(N=N.getVisualVariablesForType(aa,ka))&&N[0];return pa},_applyOpacity:function(N,aa,ka,pa){aa=aa.getOpacity(pa,{opacityInfo:ka});null!=aa&&(N=new w(N),N.a=aa);return N},_symbolizeShape:function(N,aa,ka,pa,ta){var Ba=aa.getStroke(),Da=aa.getFill(),oa=aa.type,ra=-1!==oa.indexOf("linesymbol"),ya=-1!==oa.indexOf("fillsymbol")?null:this._getVariable(ka,"sizeInfo",!1),wa=this._getVariable(ka,"colorInfo",!1),la=this._getVariable(ka,"opacityInfo",
!1),Aa=ra?"none"!==aa.style:aa.outline&&"none"!==aa.outline.style,da=ra?null:this._getVariable(ka,"sizeInfo","outline");ya=(ya=pa?da:da||ya)?ka.getSize(ta,{sizeInfo:ya,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null;pa&&(wa=la=null);if((wa||la)&&"picturefillsymbol"!==oa)if(ra){var fa=Ba&&Ba.color;wa&&(fa=ka.getColor(ta,{colorInfo:wa})||fa);fa&&la&&(fa=this._applyOpacity(fa,ka,la,ta))}else if(Da&&Da.toCss){var P=Da;wa&&(P=ka.getColor(ta,{colorInfo:wa})||P);P&&la&&(P=
this._applyOpacity(P,ka,la,ta))}N.setStroke(!Aa||null==ya&&!fa?Ba:k.mixin({},Ba,null!=ya?{width:ya}:null,fa&&{color:fa})).setFill(P||Da);ra&&z.applyLineMarker(N,aa,fa,this._acquireSVGMarker)},_smsToPath:function(){return O?function(N,aa,ka,pa,ta,Ba,Da,oa,ra){switch(aa){case N.STYLE_SQUARE:return["M",ta+","+Da,"L",Ba+","+Da,Ba+","+oa,ta+","+oa,"X","E"];case N.STYLE_CROSS:return["M",ka+","+Da,"L",ka+","+oa,"M",ta+","+pa,"L",Ba+","+pa,"E"];case N.STYLE_X:return["M",ta+","+Da,"L",Ba+","+oa,"M",ta+","+
oa,"L",Ba+","+Da,"E"];case N.STYLE_DIAMOND:return["M",ka+","+Da,"L",Ba+","+pa,ka+","+oa,ta+","+pa,"X","E"];case N.STYLE_TARGET:return["M",ta+","+Da,"L",Ba+","+Da,Ba+","+oa,ta+","+oa,ta+","+Da,"M",ta-ra+","+pa,"L",ta+","+pa,"M",ka+","+(Da-ra),"L",ka+","+Da,"M",Ba+ra+","+pa,"L",Ba+","+pa,"M",ka+","+(oa+ra),"L",ka+","+oa,"E"]}}:function(N,aa,ka,pa,ta,Ba,Da,oa,ra){switch(aa){case N.STYLE_SQUARE:return["M",ta+","+Da,Ba+","+Da,Ba+","+oa,ta+","+oa,"Z"];case N.STYLE_TRIANGLE:return["M",ka+","+Da,Ba+","+oa,
ta+","+oa,"Z"];case N.STYLE_CROSS:return["M",ka+","+Da,ka+","+oa,"M",ta+","+pa,Ba+","+pa];case N.STYLE_X:return["M",ta+","+Da,Ba+","+oa,"M",ta+","+oa,Ba+","+Da];case N.STYLE_DIAMOND:return["M",ka+","+Da,Ba+","+pa,ka+","+oa,ta+","+pa,"Z"];case N.STYLE_TARGET:return N=["M",ta+","+Da,Ba+","+Da,Ba+","+oa,ta+","+oa,ta+","+Da],ra&&N.push("M",ta-ra+","+pa,ta+","+pa,"M",ka+","+(Da-ra),ka+","+Da,"M",Ba+ra+","+pa,Ba+","+pa,"M",ka+","+(oa+ra),ka+","+oa),N}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},
_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(N,aa){aa=aa&&aa.shape&&aa.shape.type;var ka=N&&N.type;N=N&&N.style;"rect"===aa&&(aa="path");ka&&(N=this._typeMaps[ka]||N);this._pathStyles[N]&&(N="path");return"shieldlabelsymbol"===ka?!0:!(!aa||!N||aa===N)},_reArialFont:/\s*(^|,)\s*arial\s*(,|$)\s*/i,_fallbackFont:"Arial",_drawPoint:function(N,aa,ka,pa,ta,Ba,Da){var oa=
ka.type,ra=this._map,ya=ra.__visibleRect,wa=K.toScreenPoint(ra.extent,ra.width,ra.height,aa).offset(-ya.x+ta[0],-ya.y);ya=wa.x;var la=wa.y;aa=[];var Aa=this._getVariable(Ba,"rotationInfo",!1);Aa=Aa?Ba.getRotationAngle(Da,{rotationInfo:Aa}):null;var da=this._getVariable(Ba,"sizeInfo",!1);ra=null!=Da.size?Da.size:da&&Ba.getSize(Da,{sizeInfo:da,shape:ka.style,resolution:ra.getResolutionInMeters(),scale:ra.getScale()});Aa&&aa.push(d.rotategAt(Aa,wa));if(0!==ka.xoffset||0!==ka.yoffset){var fa=d.translate(ka.xoffset,
-ka.yoffset);aa.push(fa)}0!==ka.angle&&aa.push(d.rotategAt(ka.angle,wa));if("simplemarkersymbol"===oa){var P=ka.style;Ba=Math.round;null!=ra?fa&&(null!=fa.dx&&(fa.dx=fa.dx/ka.size*ra),null!=fa.dy&&(fa.dy=fa.dy/ka.size*ra)):ra=ka.size;switch(P){case v.STYLE_SQUARE:case v.STYLE_TRIANGLE:case v.STYLE_CROSS:case v.STYLE_X:case v.STYLE_DIAMOND:ka=isNaN(ra)?16:ra/2;P=this._drawPath(N,pa,this._smsToPath(v,P,ya,la,Ba(ya-ka),Ba(ya+ka),Ba(la-ka),Ba(la+ka)));break;case v.STYLE_TARGET:Da=ka._targetWidth/2;fa=
ka._targetHeight/2;P=this._drawPath(N,pa,this._smsToPath(v,P,ya,la,Ba(ya-Da),Ba(ya+Da),Ba(la-fa),Ba(la+fa),ka._spikeSize));break;case v.STYLE_PATH:P=this._drawPath(N,pa,ka.path,!0);ka=P.getBoundingBox();N=this._getScaleMatrix(ka,ra);1===N.xx&&1===N.yy||aa.push(d.scaleAt(N.xx,N.yy,wa));aa.push(d.translate(-(ka.x+ka.width/2)+ya,-(ka.y+ka.height/2)+la));break;default:ka=isNaN(ra)?16:ra/2,P=this._drawCircle(N,pa,{cx:ya,cy:la,r:ka})}}else if("shieldlabelsymbol"===oa)P=ka.width,wa=ka.height,pa=N.createGroup(),
P=N.createImage({x:ya-P/2,y:la-wa/2,width:P,height:wa,src:ka.url}),pa.add(P),null!=ka.font&&(la+=.2*ka.getHeight(),N=N.createText({type:"text",text:ka.text,x:ya,y:la,align:"middle",decoration:ka.decoration,rotated:ka.rotated,kerning:ka.kerning}),N.setFont(ka.font),N.setFill(ka.color),pa.add(N)),P=pa;else if("picturemarkersymbol"===oa){if(null==ra?(P=ka.width,wa=ka.height):(wa=ra,P=ka.width/ka.height*wa,fa&&(null!=fa.dx&&(fa.dx=fa.dx/ka.width*P),null!=fa.dy&&(fa.dy=fa.dy/ka.height*wa))),P=this._drawImage(N,
pa,{x:ya-P/2,y:la-wa/2,width:P,height:wa,src:ka.url}),J&&(N=P.getNode()))ka=(ka=this._getVariable(Ba,"opacityInfo",!1))?Ba.getOpacity(Da,{opacityInfo:ka}):null,null!=ka?N.setAttribute("opacity",ka):N.setAttribute("opacity",1)}else if("textsymbol"===oa){if(Ba=ka.font){P=null!=ra;Da=Ba.family&&!this._reArialFont.test(Ba.family);if(P||Da||Q)Ba=new Ba.constructor(Ba.toJson());P&&Ba.setSize(ra);Q&&(Ba.size+="px");Da&&Ba.setFamily(Ba.family+","+this._fallbackFont)}P=this._drawText(N,pa,{type:"text",text:ka.text,
x:ya,y:la,align:ka.getSVGAlign(),decoration:ka.decoration||Ba&&Ba.decoration,rotated:ka.rotated,kerning:ka.kerning});Ba&&P.setFont(Ba);J&&(N=P.getNode(),ya=ka.getSVGBaseline(),la=ka.getSVGBaselineShift(),N&&(N.setAttribute("dominant-baseline",ya),la&&N.setAttribute("baseline-shift",la),this._applyHalo(P,ka.haloColor,ka.haloSize)))}P.setTransform(d.multiply(aa));P._wrapOffsets=ta;return P},_acquireSVGMarker:function(N,aa,ka,pa){N=this._getSVGMarkerId(aa,pa);var ta=this._getSVGMarker(N);ta||(ta=z.createSVGMarker(aa,
N,ka,pa),this._div.getParent().defNode.appendChild(ta),this._lineMarkers[N]=ta);return ta},_getSVGMarkerId:function(N,aa){return"marker_"+this._map.id+"_"+N.r+"_"+N.g+"_"+N.b+"_"+aa},_getSVGMarker:function(N){return this._lineMarkers[N]},_updateSVGMarkers:function(){if(J&&L){var N=this._lineMarkers,aa;for(aa in N){var ka=N[aa];ka.setAttribute("id",aa+"_temp");ka.setAttribute("id",aa)}}},_applyHalo:function(N,aa,ka){var pa=aa&&ka?this._getHaloId(aa,ka):null;N.setFilter(aa&&ka?F("webkit")||F("ff")?
this._getDilateFilter(aa,ka,pa):this._getOffsetFilter(aa,ka,pa):null)},_getDilateFilter:function(N,aa,ka){var pa=this._getSVGFilter(ka);pa||(pa=this._createSVGFilter({id:ka},[u.feMorphology({operator:"dilate",radius:aa,result:"dilated"}),u.feFlood({"flood-color":N.toCss(!0)}),u.feComposite({in2:"dilated",operator:"in",result:"composite"}),u.feMerge("composite","SourceGraphic")]));return pa},_getOffsetFilter:function(N,aa,ka){var pa=this._getSVGFilter(ka);if(!pa){N=N.toCss(!0);pa=this._offsetPrimitives;
var ta,Ba=pa.length,Da=[],oa=[];for(ta=0;ta<Ba;ta++){var ra=pa[ta],ya="offset"+ra.dir,wa="composite"+ra.dir;oa.push(wa);Da.push(u.feOffset({dx:ra.dx*aa,dy:ra.dy*aa,"in":"SourceAlpha",result:ya}),u.feFlood({"flood-color":N}),u.feComposite({in2:ya,operator:"in",result:wa}))}oa.push("SourceGraphic");Da.push(u.feMerge.apply(u.feMerge,oa));pa=this._createSVGFilter({id:ka},Da)}return pa},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,
dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(N,aa){return"halo_"+this._map.id+"_"+this.id+"_"+N.r+"_"+N.g+"_"+N.b+"_"+N.a+"_"+aa},_getSVGFilter:function(N){return this._svgFilters[N]},_createSVGFilter:function(N,aa){aa=u.createFilter(N,aa);var ka=this._map,pa=ka.__visibleRect;aa.x=-pa.x;aa.y=-pa.y;aa.width=ka.width;aa.height=ka.height;return this._svgFilters[N.id]=aa},_updateSVGFilters:function(N,aa,ka,pa){var ta=this._svgFilters,Ba,Da,oa;for(Da in ta)if(Ba=
ta[Da]){if(oa=f.byId(Da))null!=N&&oa.setAttribute("x",N),null!=aa&&oa.setAttribute("y",aa),null!=ka&&oa.setAttribute("width",ka),null!=pa&&oa.setAttribute("height",pa);null!=N&&(Ba.x=N);null!=aa&&(Ba.y=aa);null!=ka&&(Ba.width=ka);null!=pa&&(Ba.height=pa)}},_getScaleMatrix:function(N,aa){var ka=N.width/N.height,pa=1,ta=1;isNaN(aa)||(1<ka?(pa=aa/N.width,ta=aa/ka/N.height):(ta=aa/N.height,pa=aa*ka/N.width));return{xx:pa,yy:ta}},_symbolizePoint:function(N,aa,ka,pa){var ta=aa.type,Ba=aa.style;if("shieldlabelsymbol"!==
ta&&"picturemarkersymbol"!==ta){var Da=aa.getStroke();aa=aa.getFill();Ba=Ba===v.STYLE_X||Ba===v.STYLE_CROSS;var oa=Da&&Da.color,ra=Ba?oa:aa;if(ka){var ya=this._getVariable(ka,"colorInfo",!1),wa=this._getVariable(ka,"opacityInfo",!1);ya&&(ra=ka.getColor(pa,{colorInfo:ya})||ra);ra&&wa&&(ra=this._applyOpacity(ra,ka,wa,pa));ra&&(Ba?ra!==oa&&(Da=Da?k.mixin({},Da):{},Da.color=ra):ra!==aa&&(aa=ra))}"textsymbol"===ta?N.setFill(aa):"simplemarkersymbol"===ta&&N.setFill(aa).setStroke(Da)}},_drawMarkers:function(N,
aa,ka,pa){var ta=N.geometry,Ba=ta.points,Da=N.getDojoShape()||this._div.createGroup(),oa,ra=Ba.length,ya=[],wa=0,la,Aa=ka?ka.length:0;Da.children[0]&&this._isInvalidShape(aa,Da.children[0])&&Da.clear();for(oa=0;oa<ra;oa++){var da=Ba[oa];for(la=0;la<Aa;la++)ya[0]=ka[la],this._drawPoint(Da,{x:da[0],y:da[1],spatialReference:ta.spatialReference},aa,Da.children[wa++],ya,pa,N)}aa=Da.children.length;if(ra*ka.length<aa)for(oa=aa-1;oa>=ra*ka.length;oa--)Da.children[oa].removeShape();N._shape=Da},_symbolizeMarkers:function(N,
aa,ka){var pa=N.getDojoShape().children,ta,Ba=pa.length;for(ta=0;ta<Ba;ta++)this._symbolizePoint(pa[ta],aa,ka,N)},_errorHandler:function(N,aa){aa&&(N.message="Unable to draw graphic (geometry:"+(aa.geometry?aa.geometry.declaredClass:null)+", symbol:"+(aa.symbol?aa.symbol.declaredClass:null)+"): "+N.message);this.inherited(arguments)},_rendererLimits:function(){if(O){var N=1E5;var aa=-1E5;var ka=1E5}else F("chrome")&&6>F("chrome")&&(N=8150,aa=-1E4,ka=1E4);if(N)return{clipLimit:N,rangeMin:aa,rangeMax:ka,
clipBBox:[-N,-N,N,N],clipSegments:[[[-N,-N],[N,-N]],[[N,-N],[N,N]],[[N,N],[-N,N]],[[-N,N],[-N,-N]]]}}(),_clipPolyline:function(N,aa){aa=this._getCorners(N,aa);var ka=aa.br,pa=this._rendererLimits,ta=pa.rangeMin,Ba=pa.rangeMax,Da=pa.clipBBox,oa=pa.clipSegments;pa=this._isPointWithinRange;var ra=this._isPointWithinBBox,ya=this._getClipperIntersection,wa=this._getPlaneIndex;if(!pa(aa.tl,ta,Ba)||!pa(ka,ta,Ba)){O&&this._createSegments(N);var la=[];e.forEach(N.segments,function(Aa){Aa=Aa.args;var da=Aa.length,
fa=[],P;for(P=0;P<da;P+=2){var xa=[Aa[P],Aa[P+1]],Fa=[Aa[P+2],Aa[P+3]],ba=ra(xa,Da),Sa=ra(Fa,Da);if(ba^Sa){if(Sa=ya([xa,Fa],oa))ba?(P?fa.push(Sa[1]):fa.push(xa,Sa[1]),la.push(fa),fa=[]):fa.push(Sa[1],Fa)}else ba?P?fa.push(Fa):fa.push(xa,Fa):(Sa=wa(xa,Da),ba=wa(Fa,Da),-1!==Sa&&-1!==ba&&Sa!==ba&&(xa=ya([xa,Fa],oa,!0),0<xa.length&&(xa[Sa]||(Sa=xa[Sa[0]]?Sa[0]:Sa[1]),xa[ba]||(ba=xa[ba[0]]?ba[0]:ba[1]),Fa=xa[Sa],xa=xa[ba],Fa&&fa.push(Fa),xa&&(fa.push(xa),la.push(fa),fa=[]))))}la.push(fa)});N.setShape(this._getPathStringFromPaths(la))}},
_clipPolygon:function(N,aa){aa=this._getCorners(N,aa);var ka=aa.br,pa=this._rendererLimits,ta=pa.clipLimit,Ba=pa.rangeMin,Da=pa.rangeMax,oa=pa.clipBBox,ra=pa.clipSegments;pa=this._isPointWithinRange;var ya=this._isPointWithinBBox,wa=this._getClipperIntersection,la=this._getPlaneIndex,Aa=H._pointLineDistance;pa(aa.tl,Ba,Da)&&pa(ka,Ba,Da)||(O&&this._createSegments(N),aa=e.filter(N.segments,function(da){return da.args&&da.args.length}),aa=e.map(aa,function(da){var fa=da.args,P=fa.length,xa=[];da=[];
var Fa;for(Fa=0;Fa<P;Fa+=2){var ba=[fa[Fa],fa[Fa+1]],Sa=[fa[Fa+2],fa[Fa+3]];if(Fa===P-2){xa.push(ba);break}var Qa=ya(ba,oa),va=ya(Sa,oa);xa.push(ba);if(Qa^va){if(va=wa([ba,Sa],ra))ba=va[1],ba[Qa?"inOut":"outIn"]=!0,xa.push(ba),da.push([Qa?"INOUT":"OUTIN",xa.length-1,va[0]])}else if(!Qa){Qa=la(ba,oa);var R=la(Sa,oa);-1!==Qa&&-1!==R&&Qa!==R&&(va=wa([ba,Sa],ra,!0),0<va.length?(va[Qa]||(Qa=va[Qa[0]]?Qa[0]:Qa[1]),va[R]||(R=va[R[0]]?R[0]:R[1]),ba=va[Qa],Sa=va[R],ba&&(ba.outIn=!0,xa.push(ba),da.push(["OUTIN",
xa.length-1,Qa])),Sa&&(Sa.inOut=!0,xa.push(Sa),da.push(["INOUT",xa.length-1,R]))):k.isArray(Qa)&&k.isArray(R)&&(va=Qa.concat(R),va.sort(),"0123"===va.join("")&&(va=[],3===Qa[0]+Qa[1]?va.push([ta,-ta],[-ta,ta]):va.push([-ta,-ta],[ta,ta]),Qa=Aa(va[0],[ba,Sa]),ba=Aa(va[1],[ba,Sa]),xa.push(Qa<ba?va[0]:va[1]))))}}var ia=oa[0],ja=oa[1],T=oa[2],ha=oa[3];e.forEach(xa,function(ua){ua[0]<ia&&(ua[1]>=ja&&ua[1]<=ha?ua[0]=ia:(ua[0]=ia,ua[1]=ua[1]<ja?ja:ha))});e.forEach(xa,function(ua){ua[1]<ja&&(ua[0]>=ia&&ua[0]<=
T?ua[1]=ja:(ua[1]=ja,ua[0]=ua[0]<ia?ia:T))});e.forEach(xa,function(ua){ua[0]>T&&(ua[1]>=ja&&ua[1]<=ha?ua[0]=T:(ua[0]=T,ua[1]=ua[1]<ja?ja:ha))});e.forEach(xa,function(ua){ua[1]>ha&&(ua[0]>=ia&&ua[0]<=T?ua[1]=ha:(ua[1]=ha,ua[0]=ua[0]<ia?ia:T))});fa=0;P=da.length;if(0<P){do{Sa=da[fa];Fa=da[(fa+1)%P];if(Sa[2]===Fa[2]&&"INOUT"===Sa[0]&&"OUTIN"===Fa[0])if(ba=Sa[1],Fa=Fa[1],ba<Fa)for(ba+=1;ba<Fa;ba++)xa[ba][2]=!0;else if(ba>Fa){for(ba+=1;ba<xa.length;ba++)xa[ba][2]=!0;for(ba=0;ba<Fa;ba++)xa[ba][2]=!0}fa=
(fa+1)%P}while(0!==fa)}P=xa[0];fa=xa[xa.length-1];P[2]&&(fa[2]=!0,e.some(da,function(ua){return 1===ua[1]?(xa.splice(xa.length-1,0,k.clone(xa[1])),!0):!1}));xa=e.filter(xa,function(ua){return ua[2]?!1:!0});for(fa=0;fa<xa.length-1;fa++)P=xa[fa],(Fa=xa[fa+1])&&P[0]===Fa[0]&&P[1]===Fa[1]&&(Fa.outIn?P.outIn=!0:Fa.inOut&&(P.inOut=!0),xa.splice(fa+1,1));P=Math.abs;da=[];for(fa=0;fa<xa.length-1;fa++){Sa=xa[fa];ba=Sa[0];Sa=Sa[1];Qa=P(ba)===ta;va=P(Sa)===ta;Fa=xa[fa+1];R=Fa[0];Fa=Fa[1];var na=P(R)===ta,qa=
P(Fa)===ta;Qa&&qa?da.push([fa+1,[ba,Fa]]):va&&na&&da.push([fa+1,[R,Sa]])}for(fa=da.length-1;0<=fa;fa--)Fa=da[fa],ba=xa[Fa[0]-1],P=xa[Fa[0]],ba.outIn||ba.inOut||P.outIn||P.inOut||xa.splice(Fa[0],0,Fa[1]);P=xa[0];fa=xa[xa.length-1];P[0]===fa[0]&&P[1]===fa[1]||xa.push(P);return xa}),N.setShape(this._getPathStringFromPaths(aa)))},_getCorners:function(N,aa){if(O){N=this._map;var ka=aa.getExtent(),pa=ka.spatialReference;aa=N.toScreen(new C(ka.xmin,ka.ymax,pa));N=N.toScreen(new C(ka.xmax,ka.ymin,pa));return{tl:aa,
br:N}}N=N.getTransformedBoundingBox();return{tl:N[0],br:N[2]}},_createSegments:function(N){N.shape.path=N.vmlPath;N.segmented=!1;N._confirmSegmented();var aa=N.segments;1<aa.length&&(N.segments=e.filter(aa,function(ka,pa,ta){pa=ta[pa+1];return"M"===ka.action&&pa&&"L"===pa.action?(ka.args=ka.args.concat(pa.args),!0):!1}))},_getPathStringFromPaths:function(N){O?(N=e.map(N,function(aa){return"m "+e.map(aa,function(ka,pa){return(1===pa?"l ":"")+ka.join(",")}).join(" ")}),N.push("e")):N=e.map(N,function(aa){return"M "+
e.map(aa,function(ka){return ka.join(",")}).join(" ")});return N.join(" ")},_isPointWithinBBox:function(N,aa){var ka=aa[1],pa=aa[2],ta=aa[3],Ba=N[0];N=N[1];return Ba>aa[0]&&Ba<pa&&N>ka&&N<ta?!0:!1},_isPointWithinRange:function(N,aa,ka){var pa=N.x;N=N.y;return pa<aa||N<aa||pa>ka||N>ka?!1:!0},_getClipperIntersection:function(N,aa,ka){var pa,ta=H._getLineIntersection2,Ba=Math.round,Da={length:0};for(pa=0;4>pa;pa++){var oa=ta(N,aa[pa]);if(oa)if(oa[0]=Ba(oa[0]),oa[1]=Ba(oa[1]),ka)Da[pa]=oa,Da.length++;
else return[pa,oa]}return ka?Da:null},_getPlaneIndex:function(N,aa){var ka=N[0];N=N[1];var pa=aa[0],ta=aa[1],Ba=aa[2];aa=aa[3];return ka<=pa?N>=ta&&N<=aa?3:N<ta?[0,3]:[2,3]:N<=ta?ka>=pa&&ka<=Ba?0:ka<pa?[3,0]:[1,0]:ka>=Ba?N>=ta&&N<=aa?1:N<ta?[0,1]:[2,1]:N>=aa?ka>=pa&&ka<=Ba?2:ka<pa?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},
onOpacityChange:function(){},onInfoTemplateChange:function(){},onSurfaceChange:function(){},onWebGLEnabledChange:function(){},setInfoTemplate:function(N){this.infoTemplate=N;this._evalSurfaceType();this.onInfoTemplateChange()},add:function(N,aa){if(N._graphicsLayer===this)return N;N._suspended=this._suspendGraphics;aa||this.graphics.push(N);N._graphicsLayer=this;N._sourceLayer||(N._layer&&"esri.layers.GraphicsLayer"!==N._layer.declaredClass?N._sourceLayer=N._layer:"esri.layers.GraphicsLayer"!==this.declaredClass&&
(N._sourceLayer=this));N._layer=this;this.hasWebGLSurface()||(this._updateExtent(N),this._draw(N));if(!aa)this.onGraphicAdd(N);return N},remove:function(N,aa,ka){if(!aa&&!ka){aa=this.graphics;var pa;if(-1===(pa=e.indexOf(aa,N)))return null;if(!ca||64<=ca)aa.splice(pa,1);else{var ta=aa.length;if(ta){for(;pa<ta;)aa[pa]=aa[pa+1],pa++;aa.length--}}}this.hasWebGLSurface()||N.getDojoShape()&&this._removeShape(N,null,ka);N._shape=N._graphicsLayer=null;this.onGraphicRemove(N);return N},clear:function(N,aa){N=
this.graphics;var ka,pa=!O;for(ka=N.length-1;0<=ka;ka--)this.remove(N[ka],null,pa);this.graphics=[];this.hasWebGLSurface()||this._destroyAllNodes();if(!aa)this.onGraphicsClear()},_destroyAllNodes:function(){if(!O&&this._div){var N;this._childLayer&&(N=this._childLayer.getNode())&&N.parentNode&&N.parentNode.removeChild(N);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();N&&this._div.getEventSource().appendChild(N);this._initOpacity()}},clearNodes:function(){if(!this.hasWebGLSurface()){var N=
this.graphics,aa=N.length,ka;for(ka=0;ka<aa;ka++)this._removeShape(N[ka],!0,!0);this._destroyAllNodes()}},_graphicVisibilityChanged:function(N){},_setIEOpacity:function(N,aa){var ka=N&&N.getNode();if(ka){var pa=N.strokeStyle,ta=ka.stroke;pa&&ta&&(ta.opacity=pa.color.a*aa);N=N.fillStyle;pa=ka.fill;N&&pa&&("tile"===pa.type?l.set(ka,"opacity",aa):pa.opacity=N.a*aa)}},setOpacity:function(N,aa){if(aa||this.opacity!=N){var ka=this._div;ka&&!this.hasWebGLSurface()&&(O?(e.forEach(this.graphics,function(pa){this._setIEOpacity(pa._shape,
N);this._setIEOpacity(pa._bgShape,N)},this),ka._esriIeOpacity=N,this._bgGroup._esriIeOpacity=N):"canvas-2d"===this.surfaceType?l.set(ka.getEventSource(),"opacity",N):ka.getEventSource().setAttribute("opacity",N));this.opacity=N;if(!aa)this.onOpacityChange(N)}},setRenderer:function(N){this.renderer=N;this._evalSDRenderer(!0);this._evalSurfaceType();this.emit("renderer-change",{renderer:this._rndForScale||N})}});y=y([n,I],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this._processEvent=
k.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var N=this.inherited("_setMap",arguments);this.enableMouseEvents();return N},_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(N){var aa=this._map,ka=N.target,pa;N.screenPoint=new E(N.pageX-aa.position.x,N.pageY-aa.position.y);for(N.mapPoint=aa.toMap(N.screenPoint);ka&&!(pa=ka.e_graphic);)ka=ka.parentNode;if(pa)return N.graphic=
pa,N},_onMouseOverHandler:function(N){if(this._processEvent(N))this.onMouseOver(N)},_onMouseMoveHandler:function(N){if(this._processEvent(N))this.onMouseMove(N)},_onMouseDragHandler:function(N){if(this._processEvent(N))this.onMouseDrag(N)},_onMouseOutHandler:function(N){if(this._processEvent(N))this.onMouseOut(N)},_onMouseDownHandler:function(N){this._downGr=this._downPt=null;this._processEvent(N)&&(a.disconnect(this._onmousemove_connect),a.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=
a.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=N.graphic,this._downPt=N.screenPoint.x+","+N.screenPoint.y,this.onMouseDown(N))},_onMouseUpHandler:function(N){this._upGr=this._upPt=null;this._processEvent(N)&&(a.disconnect(this._onmousedrag_connect),a.disconnect(this._onmousemove_connect),this._onmousemove_connect=a.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=N.graphic,this._upPt=N.screenPoint.x+","+N.screenPoint.y,
this.onMouseUp(N))},_onClickHandler:function(N){if(this._processEvent(N)){var aa=this._downGr,ka=this._upGr;aa&&ka&&aa===ka&&this._downPt===this._upPt&&(O&&(A._ieGraphic=N.graphic),this.onClick(N))}},_onDblClickHandler:function(N){if(this._processEvent(N))this.onDblClick(N)},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var N=
a.connect,aa=this._div.getEventSource();Q||(this._onmouseover_connect=N(aa,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=N(aa,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=N(aa,"onmouseout",this,"_onMouseOutHandler"),this._onmousedown_connect=N(aa,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=N(aa,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=N(aa,"onclick",this,"_onClickHandler"),this._ondblclick_connect=N(aa,"ondblclick",
this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var N=a.disconnect;N(this._onmouseover_connect);N(this._onmousemove_connect);N(this._onmousedrag_connect);N(this._onmouseout_connect);N(this._onmousedown_connect);N(this._onmouseup_connect);N(this._onclick_connect);N(this._ondblclick_connect);this._mouseEvents=!1}}});y._GraphicsContainer=t;y._GraphicsLayer=n;k.setObject("layers.GraphicsLayer",y,A);k.setObject("layers._GraphicsContainer",t,A);k.setObject("layers._GraphicsLayer",
n,A);return y})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(b,y){b.add("esri-svg",function(){return-1!==y.renderer.toLowerCase().indexOf("svg")});return b})},"esri/layers/support/webglUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(b,y,r,a){var k=!1,e=r("esri-webgl-max-contexts");e=null!=e?e:r("esri-mobile")?8:16;var g={isWebGLSupported:function(){return!!k},isWebGLEnabled:function(){return this.isWebGLSupported()&&
!!r("esri-featurelayer-webgl")},createCanvas:function(h,m){var l=document.createElement("canvas");l.style.width=h+"px";l.style.height=m+"px";return l},createWebGLContext:function(h){var m;y.some(["webgl","experimental-webgl","webkit-3d","moz-webgl"],function(l){try{m=h.getContext?h.getContext(l):null}catch(f){m=null}return!!m});return m},_contextOwners:[],isContextAvailable:function(){return-1===e||0<e&&g._contextOwners.length<e},acquireContext:function(h){return-1!==y.indexOf(g._contextOwners,h)?
!0:g.isContextAvailable()?(g._contextOwners.push(h),!0):!1},releaseContext:function(h){h=y.indexOf(g._contextOwners,h);-1!==h&&g._contextOwners.splice(h,1)}};k=g.createWebGLContext(g.createCanvas());b.setObject("layers.support.webglUtils",g,a);return g})},"esri/layers/support/WebGLSurface":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(b,y,r,a,k){b=b(null,{map:null,node:null,renderers:null,constructor:function(e){y.mixin(this,e);this.renderers=
[]},destroy:function(){r.forEach(this.renderers,function(e){e.destroy()});this.renderers=null},getEventSource:function(){return this.node},createRenderer:function(e,g,h,m){e=new e({surface:this,width:g,height:h,map:this.map,layer:m});this.renderers.push(e);return e},destroyRenderer:function(e){var g=r.indexOf(this.renderers,e);-1<g&&(e.destroy(),this.renderers.splice(g,1))},_createNode:function(){var e=document.createElement("div");e.style.pointerEvents="auto";e.style.position="absolute";return e}});
y.setObject("layers.support.WebGLSurface",b,k);return b})},"esri/symbols/utils":function(){define("dojo/_base/lang dojo/_base/window dojo/has dojox/gfx ../kernel ../Color".split(" "),function(b,y,r,a,k,e){function g(d){d.removeAttribute("marker-start");d.removeAttribute("marker-end");d.removeAttribute("opacity")}function h(d,u){for(var n in u)d.setAttribute(n,u[n])}function m(d,u,n){u="url(#"+u.getAttribute("id")+")";d.rawNode.setAttribute("marker-"+n,u)}var l=-1!==a.renderer.toLowerCase().indexOf("svg"),
f=9===r("ie"),c={marker:{markerWidth:"6",markerHeight:"6",markerUnits:"strokeWidth",orient:"auto"},spear:{marker:{end:{viewBox:"0 0 25.4 23.43",refX:"20",refY:"12.76"},start:{viewBox:"-25.4 0 25.4 23.43",refX:"-20",refY:"12.76"}},path:{common:{d:"M1.63 23.43 L5.37 16.6 L5.37 8.93 L1.63 2.09 L25.4 12.76 L1.63 23.43 Z","stroke-width":"0","fill-opacity":"1"},start:{transform:"matrix(-1, 0, 0, 1, 0, 0)"}}}};r={applyLineMarker:function(d,u,n,t){if(l&&!f){var x=d&&d.rawNode,A=u.marker;n=n||u.color;x&&"none"!==
u.style&&n&&A&&"arrow"===A.style&&A.placement?x.getTotalLength&&0===x.getTotalLength()?g(x):(u=-1!==A.placement.indexOf("begin"),A=-1!==A.placement.indexOf("end"),u||A?(x.removeAttribute("stroke-opacity"),x.setAttribute("opacity",n.a),u?(u=t(d,n,"spear","start"),m(d,u,"start")):x.removeAttribute("marker-start"),A?(n=t(d,n,"spear","end"),m(d,n,"end")):x.removeAttribute("marker-end")):g(x)):x&&g(x)}},createSVGMarker:function(d,u,n,t){n=c[n];var x=y.doc.createElementNS("http://www.w3.org/2000/svg","marker");
x.setAttribute("id",u);h(x,c.marker);h(x,n.marker[t]);u=y.doc.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("fill",d.toCss());h(u,n.path.common);h(u,n.path[t]);x.appendChild(u);return x},create2DColorRamp:function(d){var u=d.surface.createGroup(),n=d.colors,t=d.numClasses;d=(d.size||75)/t;for(var x=0;x<t;x++)for(var A=x*d,B=0;B<t;B++){var F=n[x][B];u.createRect({x:B*d,y:A,width:d,height:d}).setFill(F).setStroke(null)}return u},setSymbolFillColor:function(d,u){if(d)switch(u=u?
new e(u):null,d.type){case "simplemarkersymbol":"cross"===d.style||"x"===d.style?d.outline&&d.outline.setColor(u):d.setColor(u);break;case "simplelinesymbol":case "cartographiclinesymbol":case "simplefillsymbol":case "shieldlabelsymbol":case "textsymbol":d.setColor(u)}}};b.setObject("renderer.utils",r,k);return r})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(b,
y,r,a,k,e,g,h,m,l){var f=function(){return 9>r("ie")?function(d,u,n,t,x,A,B,F,w){var D=[],q=Math.round,v,z=B.length,C;for(v=0;v<z;v++){var E=B[v];var G=F?F(E[0][0],E[0][1],w):E[0];if(1<(C=E.length)){var H=q((G[0]-d)*n+x);var K=q((u-G[1])*t+A);G=F?F(E[1][0],E[1][1],w):E[1];var I=q((G[0]-d)*n+x);G=q((u-G[1])*t+A);D.push("M",H+","+K,"L",I+","+G);for(I=2;I<C;I++)G=F?F(E[I][0],E[I][1],w):E[I],H=q((G[0]-d)*n+x),K=q((u-G[1])*t+A),D.push(H+","+K)}else H=q((G[0]-d)*n+x),K=q((u-G[1])*t+A),D.push("M",H+","+
K)}return D}:function(d,u,n,t,x,A,B,F,w,D){var q=[],v,z,C=Math.round;var E=0;for(v=B?B.length:0;E<v;E++){var G=B[E];q.push("M");var H=0;for(z=G?G.length:0;H<z;H++){var K=F?F(G[H][0],G[H][1],w):G[H];q.push(C((K[0]-d)*n+x)+","+C((u-K[1])*t+A))}D||q.push("Z")}return q}}(),c={toScreenPoint:function(d,u,n,t,x){var A=d.spatialReference,B=t.spatialReference,F=t.x;t=t.y;A&&B&&!A.equals(B)&&A._canProject(B)&&(A=A.isWebMercator()?k.lngLatToXY(F,t):k.xyToLngLat(F,t,!0),F=A[0],t=A[1]);F=(F-d.xmin)*(u/d.getWidth());
t=(d.ymax-t)*(n/d.getHeight());x||(F=Math.round(F),t=Math.round(t));return new e(F,t)},toScreenGeometry:function(d,u,n,t){var x=d.xmin,A=d.ymax,B=u/d.getWidth(),F=n/d.getHeight(),w=b.forEach,D=Math.round;if(t instanceof k)return new k(D((t.x-x)*B),D((A-t.y)*F));if(t instanceof m){d=new m;var q=d.points;w(t.points,function(G,H){q[H]=[D((G[0]-x)*B),D((A-G[1])*F)]});return d}if(t instanceof l)return new l(D((t.xmin-x)*B),D((A-t.ymin)*F),D((t.xmax-x)*B),D((A-t.ymax)*B));if(t instanceof g){d=new g;var v=
d.paths,z;w(t.paths,function(G,H){z=v[H]=[];w(G,function(K,I){z[I]=[D((K[0]-x)*B),D((A-K[1])*F)]})});return d}if(t instanceof h){d=new h;var C=d.rings,E;w(t.rings,function(G,H){E=C[H]=[];w(G,function(K,I){E[I]=[D((K[0]-x)*B),D((A-K[1])*F)]})});return d}},_toScreenPath:function(d,u,n,t,x,A){var B=t instanceof g,F=d.spatialReference,w=t.spatialReference;if(F&&w&&!F.equals(w)&&F._canProject(w))if(F.isWebMercator())var D=k.lngLatToXY;else{D=k.xyToLngLat;var q=!0}return f(d.xmin,d.ymax,u/d.getWidth(),
n/d.getHeight(),x,A,B?t.paths:t.rings,D,q,B)},toMapPoint:function(d,u,n,t){return new k(d.xmin+t.x/(u/d.getWidth()),d.ymax-t.y/(n/d.getHeight()),d.spatialReference)},toMapGeometry:function(d,u,n,t){var x=d.xmin,A=d.ymax,B=d.spatialReference,F=u/d.getWidth(),w=n/d.getHeight(),D=b.forEach;if(t instanceof k)return new k(x+t.x/F,A-t.y/w,B);if(t instanceof m){d=new m(B);var q=d.points;D(t.points,function(G,H){q[H]=[x+G[0]/F,A-G[1]/w]});return d}if(t instanceof l)return new l(x+t.xmin/F,A-t.ymin/w,x+t.xmax/
F,A-t.ymax/w,B);if(t instanceof g){d=new g(B);var v=d.paths,z;D(t.paths,function(G,H){z=v[H]=[];D(G,function(K,I){z[I]=[x+K[0]/F,A-K[1]/w]})});return d}if(t instanceof h){d=new h(B);var C=d.rings,E;D(t.rings,function(G,H){E=C[H]=[];D(G,function(K,I){E[I]=[x+K[0]/F,A-K[1]/w]})});return d}}};y.mixin(y.getObject("geometry",!0,a),c);return c})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(b,y,r,a,k,e){function g(){y.after(this.constructor._meta,
"ctor",this._pluginsHandler,!0);this._plugins={}}g.prototype={addPlugin:function(h,m){var l=this,f=this._plugins,c=new k;try{b([h],function(d){h in f?c.resolve({id:f[h].declaredId||h.replace(/\//g,".")}):(f[h]=d,e(d.add(l,m),function(){var u={id:d.declaredId||h.replace(/\//g,".")};l.emit("plugin-add",u);c.resolve(u)},function(u){c.reject(u)}))})}catch(d){c.reject(d)}return c.promise},removePlugin:function(h){if(h in this._plugins){var m=this._plugins[h];m.remove(this);delete this._plugins[h];this.emit("plugin-remove",
{id:m.declaredId||h.replace(/\//g,".")})}},_pluginsHandler:function(){var h=this;r.some(arguments,function(m){if(m&&m.plugins&&m.plugins instanceof Array){m=m.plugins;var l;for(l=0;l<m.length;l++){var f=m[l];var c=f instanceof Object?f.id:f;h.addPlugin(c,f.options)}return!0}})}};return g})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./FeatureTemplate ./support/domainUtils".split(" "),function(b,y,
r,a,k,e,g,h,m){b=b(null,{declaredClass:"esri.layers.FeatureType",constructor:function(l){if(l&&y.isObject(l)){this.id=l.id;this.name=l.name;var f=l.symbol;f&&(this.symbol=g.fromJson(f));f=l.domains;var c=this.domains={};for(d in f)f.hasOwnProperty(d)&&(c[d]=m.fromJson(f[d]));if(l=l.templates){var d=this.templates=[];for(f=0;f<l.length;f++)d.push(new h(l[f]))}}},toJson:function(){var l={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},f,c=this.domains,d=this.templates,u=e.fixJson;
if(c){var n=l.domains={};for(f in c)c.hasOwnProperty(f)&&(n[f]=c[f]&&c[f].toJson());u(n)}d&&(l.templates=r.map(d,function(t){return t.toJson()}));return u(l)}});y.setObject("layers.FeatureType",b,k);return b})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),function(b,y,r,a,k,e){b=b(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(g){g&&y.isObject(g)&&(this.name=g.name,this.description=g.description,
this.drawingTool=g.drawingTool,this.thumbnail=g.thumbnail,g=g.prototype,this.prototype=new e(g.geometry,null,g.attributes))},toJson:function(){return k.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,thumbnail:k.fixJson(y.clone(this.thumbnail)),prototype:this.prototype&&this.prototype.toJson()})}});y.mixin(b,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",
TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});y.setObject("layers.FeatureTemplate",
b,a);return b})},"esri/layers/support/domainUtils":function(){define("dojo/_base/lang dojo/has ../../kernel ../RangeDomain ../CodedValueDomain ../InheritedDomain".split(" "),function(b,y,r,a,k,e){y={fromJson:function(g){if(g)switch(g.type){case "range":var h=new a(g);break;case "codedValue":h=new k(g);break;case "inherited":h=new e(g)}return h}};b.setObject("layers.support.domainUtils",y,r);return y})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has",
"../kernel","./Domain"],function(b,y,r,a,k){b=b([k],{declaredClass:"esri.layers.InheritedDomain"});y.setObject("layers.InheritedDomain",b,a);return b})},"esri/layers/FeatureSubtype":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./support/domainUtils".split(" "),function(b,y,r,a,k,e){b=b(null,{declaredClass:"esri.layers.FeatureSubtype",constructor:function(g){if(g&&y.isObject(g)){this.code=g.code;this.name=g.name;this.defaultValues=g.defaultValues;g=g.domains;var h=
this.domains={},m;for(m in g)g.hasOwnProperty(m)&&(h[m]=e.fromJson(g[m]))}},toJson:function(){var g=k.fixJson,h={code:this.code,name:this.name,defaultValues:g(y.clone(this.defaultValues))},m=this.domains;if(m){var l=h.domains={},f;for(f in m)m.hasOwnProperty(f)&&(l[f]=m[f]&&m[f].toJson());g(l)}return g(h)}});y.setObject("layers.FeatureSubtype",b,a);return b})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,
{declaredClass:"esri.layers.FeatureEditResult",constructor:function(k){k&&y.isObject(k)&&(this.objectId=k.objectId,this.globalId=k.globalId,this.success=k.success,k.success||(k=k.error,this.error=Error(),this.error.code=k.code,this.error.message=k.description))}});y.setObject("layers.FeatureEditResult",b,a);return b})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),
function(b,y,r,a,k,e,g,h){var m=/__begin__/ig,l=/__end__/ig,f=/^__begin__/i,c=/__end__$/i;b=b(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter",
"below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd",
"below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd",
"always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(d){d&&(y.mixin(this,d),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=e.valueOf(this._labelPlacementLookup,d.labelPlacement)),d.format&&(this.format=d.format),d.fieldInfos&&(this.fieldInfos=d.fieldInfos),d.symbol&&(this.symbol="esriSHD"===d.symbol.type?new h(d.symbol):new g(d.symbol)),d=this.sizeInfo)&&(d.minSize&&(d.minSize=a.pt2px(d.minSize)),d.maxSize&&(d.maxSize=a.pt2px(d.maxSize)))},
getSymbol:function(){return this.symbol},toJson:function(){var d=this.sizeInfo;d&&(d=y.mixin({},d),d.minSize&&(d.minSize=a.px2pt(d.minSize)),d.maxSize&&(d.maxSize=a.px2pt(d.maxSize)));var u=e.fixJson(this.labelExpressionInfo&&y.clone(this.labelExpressionInfo));this._processLabelExpressionInfo(u);d={name:this.name,labelExpression:this.labelExpression,labelExpressionInfo:u,format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,
where:this.where,sizeInfo:d||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return e.fixJson(d)},_processLabelExpressionInfo:function(d){d&&d.value&&(d.expression=this._convertTemplatedStringToArcade(d.value))},_convertTemplatedStringToArcade:function(d){if(d){var u=y.replace(d,function(n,t){return'__begin__$feature["'+t+'"]__end__'});u=f.test(u)?u.replace(f,
""):'"'+u;u=c.test(u)?u.replace(c,""):u+'"';u=u.replace(m,'" + ').replace(l,' + "')}return u}});y.setObject("layers.LabelClass",b,k);return b})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(b,y,r,a,k,e,g,h,m){var l={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};b=b(h,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,
255,255,1],width:32,height:32,font:a.defaultFont,constructor:function(f,c,d,u,n){f?y.isString(f)?(this.url=f,c&&(this.color=c),d&&(this.width=d),u&&(this.height=u),void 0!==n&&(this.font=n)):(this.width=a.pt2px(f.width),this.height=a.pt2px(f.height),c=f.imageData,9>r("ie")||!c||(d=this.url,this.url="data:"+(f.contentType||"image")+";base64,"+c,this.imageData=d)):y.mixin(this,l)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(f){this.width=f;return this},
setHeight:function(f){this.height=f;return this},setUrl:function(f){f!==this.url&&(delete this.imageData,delete this.contentType);this.url=f;return this},setFont:function(f){this.font=f;return this},setText:function(f){this.text=f;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,
stroke:null}},toJson:function(){var f=this.url,c=this.imageData;if(0===f.indexOf("data:")){var d=f;f=c;c=d.indexOf(";base64,")+8;c=d.substr(c)}f=g.getAbsoluteUrl(f);d=a.px2pt(this.width);d=isNaN(d)?void 0:d;var u=a.px2pt(this.height);u=isNaN(u)?void 0:u;f=e.fixJson(y.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:f,imageData:c,contentType:this.contentType,width:d,height:u}));this.font?(c=new m(this.font),f.font=c.toJson()):f.font=null;delete f.size;f.imageData||delete f.imageData;return f}});
b.defaultProps=l;y.setObject("symbol.ShieldLabelSymbol",b,k);k.symbol.defaultShieldLabelSymbol=l;return b})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../srUtils ../tasks/query ./RenderMode ./support/ParallelSnapshot".split(" "),function(b,y,r,a,k,e,g,h,m){b=b([h],{declaredClass:"esri.layers._SnapshotMode",maxFeatures:5E4,maxRecordCountFactor:1,scaleToTileFactor:1,_isSuspendedAtStartup:!1,_pendingRefresh:!1,constructor:function(l){this.featureLayer=
l;this._featureMap={};this._hasUpdateError=this._hasPartialFeatures=!1;this._drawFeatures=y.hitch(this,this._drawFeatures);this._queryErrorHandler=y.hitch(this,this._queryErrorHandler);this._handleSuccess=y.hitch(this,this._handleSuccess);this._handleError=y.hitch(this,this._handleError);this._handleProgress=y.hitch(this,this._handleProgress)},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var l=this.featureLayer,f=l.reHostedFS.test(l.url);this.pagination=
l.queryPagination&&null!=l.maxRecordCount;this._cacheHintSupported=l._isCacheHintSupported();this.scaleToTileFactor=this._getScaleToTileFactor();f&&this.pagination&&(this._parallelSnapshot=new m({layer:l,mode:this,queryTask:l._task}));this._isSuspendedAtStartup=l.suspended;this._startup()}},propertyChangeHandler:function(l){this._init&&(l?this.featureLayer._collection||this._fetchAll():this._applyTimeFilter())},destroy:function(){this._isSuspendedAtStartup=this._pendingRefresh=!1;this._cancelPendingRequest(this._pendingRequest);
this._parallelSnapshot&&this._parallelSnapshot.destroy();this.inherited(arguments)},drawFeature:function(l){var f=l.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(f,l);this._incRefCount(f)},resume:function(){this._isSuspendedAtStartup||this._pendingRefresh?(this._isSuspendedAtStartup=!1,this._startup()):this.propertyChangeHandler(0)},refresh:function(){var l=this.featureLayer;l._collection?(l._fireUpdateStart(),l._refresh(!0),l._fireUpdateEnd()):this._fetchAll()},hasAllFeatures:function(){return!this._hasPartialFeatures},
hasUpdateError:function(){return this._hasUpdateError},canFetchPBF:function(l){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(l)},_startup:function(){this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},_fetchAll:function(){var l=this.featureLayer;l._collection||l.suspended||!l.isQueryable()?this._pendingRefresh=l.suspended:(this._pendingRefresh=!1,l._fireUpdateStart(),this._clearIIf(),this._hasUpdateError=this._hasPartialFeatures=!1,this._parallelSnapshot?
this._parallelSnapshot.fetch().then(this._handleSuccess,this._handleError,this._handleProgress):this._sendRequest())},_handleSuccess:function(l){this._hasPartialFeatures=l.hasPartialFeatures;this._hasUpdateError=l.hasUpdateError;this.featureLayer._fireUpdateEnd(null)},_handleError:function(l){this._queryErrorHandler(l)},_handleProgress:function(l){l.isError?this.featureLayer._errorHandler(l.error):this._addFeatures(l.features)},_getScaleToTileFactor:function(){var l=this.featureLayer.tileMaxRecordCount,
f=this.featureLayer.maxRecordCount,c=1;null!=l&&null!=f&&(c=Number((l/f).toFixed(2)));return c},_getPageSize:function(l){var f=this.featureLayer.tileMaxRecordCount;f="tile"===l.resultType&&f?f:this.featureLayer.maxRecordCount;l.maxRecordCountFactor&&(f=Math.floor(f*l.maxRecordCountFactor));return f},_sendRequest:function(l){var f=this.featureLayer,c=this._createQueryInfo(),d=c.query;this.pagination&&(this._pageSize=this._getPageSize(d),this._start=d.start=null==l?0:l,d.num=this._pageSize);this._pendingRequest&&
this._cancelPendingRequest(this._pendingRequest);this._pendingRequest=f._task.execute(d,this._drawFeatures,this._queryErrorHandler,c.pbf?{format:"pbf"}:null)},_drawFeatures:function(l){this._pendingRequest=null;this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===l.exceededTransferLimit&&(l.exceededTransferLimit=l.features.length===this.featureLayer.maxRecordCount);var f=this.featureLayer,c=l.exceededTransferLimit,d=c&&!f._collection;l=this._checkMaxLimit(l.features);var u=
l.maxLimitReached;this._addFeatures(l.features);this.pagination&&d&&!u||(this._hasPartialFeatures=!!c,f._fireUpdateEnd(null,c?{queryLimitExceeded:!0}:null));d&&(this.pagination&&!u&&this._sendRequest(this._start+this._pageSize),f.onQueryLimitExceeded())},_queryErrorHandler:function(l){this._pendingRequest=null;this._hasUpdateError=this._hasPartialFeatures=!0;var f=this.featureLayer;f._errorHandler(l);f._fireUpdateEnd(l)},_checkMaxLimit:function(l){var f=l?l.length:0,c=this.featureLayer.graphics.length+
f,d=c>=this.maxFeatures;if(d){var u=c-this.maxFeatures;u&&l.splice(f-u,u)}return{maxLimitReached:d,featuresDiscarded:c>this.maxFeatures,features:l}},_createQueryInfo:function(){var l=this.featureLayer,f=new g;f.outFields=l.getOutFields();f.where=l.getDefinitionExpression()||"1\x3d1";f.returnGeometry=!0;f.outSpatialReference=e.createSpatialReference(this.map.spatialReference.toJson());f.timeExtent=l.getTimeDefinition();f.maxAllowableOffset=l._maxOffset;f.quantizationParameters=l._quantizationParameters;
f.orderByFields=l.supportsAdvancedQueries?l.getOrderByFields():null;f.multipatchOption=l.multipatchOption;l._ts&&(f._ts=(new Date).getTime());this._cacheHintSupported&&l._enableCacheHint(f);var c=this.canFetchPBF(f);l._enableEditModeQuantization(f,c);this._applyMaxRecordCountFactor(f,c);return{query:f,pbf:c}},_applyMaxRecordCountFactor:function(l,f){var c=this.featureLayer.advancedQueryCapabilities;this.featureLayer._isCacheHintEnabled(l)&&c&&c.supportsMaxRecordCountFactor&&("tile"!==l.resultType&&
1<this.scaleToTileFactor&&(l.maxRecordCountFactor=this.scaleToTileFactor),f&&1<this.maxRecordCountFactor&&(l.maxRecordCountFactor=this.maxRecordCountFactor),5<l.maxRecordCountFactor&&(l.maxRecordCountFactor=5))},_addFeatures:function(l){var f=this.featureLayer,c=f.objectIdField,d=l.length,u=f._selectedFeatures,n=f.mode===f.constructor.MODE_AUTO;f._fireUpdateStart();f._sortFeatures(l);for(f=0;f<d;f++){var t=l[f];var x=t.attributes[c];var A=this._addFeatureIIf(x,t);this._incRefCount(x);n&&A!==t&&u[x]&&
(A.setGeometry(t.geometry),A.setAttributes(t.attributes))}this._applyTimeFilter(!0)}});y.setObject("layers._SnapshotMode",b,a);return b})},"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(b,y,r,a,k){var e=!!a("esri-pbf");a=!!a("esri-featurelayer-pbf");b=b(null,{declaredClass:"esri.layers._RenderMode",enablePBFQuery:e&&a,initialize:function(g){this.map=g;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(g){},
destroy:function(){this._init=this._started=!1},drawFeature:function(g){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(g){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(g){(g=this._featureMap[g])&&g._count++},_decRefCount:function(g){(g=this._featureMap[g])&&g._count--},_getFeature:function(g){return this._featureMap[g]},_addFeatureIIf:function(g,h){var m=
this._featureMap,l=m[g],f=this.featureLayer;l||(m[g]=h,f._add(h),h._count=0);return l||h},_removeFeatureIIf:function(g){var h=this._featureMap[g],m=this.featureLayer;if(h){if(h._count)return;delete this._featureMap[g];m._remove(h)}return h},_registerFeature:function(g,h){var m=this._featureMap,l=m[g];l?(l.attributes=h.attributes,l.geometry=h.geometry):(m[g]=h,h._count=0,h._layer=h._graphicsLayer=h._sourceLayer=this.featureLayer);return l||h},_unregisterFeature:function(g){var h=this._featureMap,m=
h[g];m&&!m._count&&(delete h[g],m._graphicsLayer=null)},_clearIIf:function(){var g=this.featureLayer;var h=g.graphics,m=g._selectedFeatures,l=g.getSelectedFeatures().length,f=g.objectIdField;if(l)for(g=h.length-1;0<=g;g--){l=h[g];var c=l.attributes[f];c in m?l._count=1:(l._count=0,this._removeFeatureIIf(c))}else g.clear(),this._featureMap={}},_cancelPendingRequest:function(g){if(g)try{g.cancel()}catch(h){}},_toggleVisibility:function(g){var h=this.featureLayer,m=h.graphics,l=g?"show":"hide",f,c=m.length;
g=g&&h._ager;for(f=0;f<c;f++){var d=m[f];d[l]();g&&h._repaint(d)}},_applyTimeFilter:function(g){var h=this.featureLayer;if(h.timeInfo&&!h.suspended){g||h._fireUpdateStart();var m=h._trackManager;m&&m.clearTracks();var l=h.getTimeDefinition(),f=h._getOffsettedTE(h._mapTimeExtent);f?(f=h._getTimeOverlap(l,f))?(l=h._filterByTime(h.graphics,f.startTime,f.endTime),m&&m.addFeatures(l.match),r.forEach(l.match,function(c){var d=c._shape;c.visible||(c.show(),(d=c._shape)&&d._moveToFront());h._ager&&d&&h._repaint(c)}),
r.forEach(l.noMatch,function(c){c.visible&&c.hide()})):this._toggleVisibility(!1):(m&&m.addFeatures(h.graphics),this._toggleVisibility(!0));m&&(m.moveLatestToFront(),m.drawTracks());g||h._fireUpdateEnd()}}});y.setObject("layers._RenderMode",b,k);return b})},"esri/layers/support/ParallelSnapshot":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../../kernel".split(" "),function(b,y,r,a,k,e){b=b(null,{declaredClass:"esri.layers.support.ParallelSnapshot",
layer:null,mode:null,queryTask:null,batchSize:5,_queryInfo:null,_fetchDfd:null,_startPage:null,_lastPage:null,_pageSize:null,_maxPages:null,_requests:null,constructor:function(g){y.mixin(this,g);this._requests={}},destroy:function(){this.cancel()},fetch:function(){var g=new k;this.cancel(!0);this._queryInfo=this.mode._createQueryInfo();this._pageSize=this.mode._getPageSize(this._queryInfo.query);this._maxPages=Math.ceil(this._getFeatureCount()/this._pageSize);this._fetchDfd=g;this._sendRequests();
return g.promise},cancel:function(g){this._cancelPendingRequests(g);this._reset()},_reset:function(){this._startPage=this._lastPage=null;this._requests={}},_getFeatureCount:function(){return this.layer.mode===this.layer.constructor.MODE_AUTO&&0===this.layer.getLastExceedsLimitResult()?this.layer._getMaxFeaturesForAutoSnapshotMode():this.mode.maxFeatures},_sendRequests:function(g){var h=this._queryInfo.query,m=this.queryTask,l=this._requests;g=null==g?1:g;var f=g+this.batchSize-1;f>this._maxPages&&
(f=this._maxPages);if(!(g>f))for(this._startPage=g,this._lastPage=f;g<=f;g++)h.start=(g-1)*this._pageSize,h.num=this._pageSize,l[g]=m.execute(h,null,null,this._queryInfo.pbf?{format:"pbf"}:null),l[g].then(y.hitch(this,this._handleSuccess,g)).otherwise(y.hitch(this,this._handleError,g))},_evalNextBatch:function(g){g===this._lastPage&&this._sendRequests(this._lastPage+1)},_handleSuccess:function(g,h){h.exceededTransferLimit||this._cancelLaterRequests(g,!0);var m=this.mode._checkMaxLimit(h.features);
this._fetchDfd.progress({features:m.features,isError:!1});m.maxLimitReached?((g=m.featuresDiscarded||this._hasRejectedRequests())||(g=!!this._getResult(this._getLastSuccessfulRequest()).exceededTransferLimit),this._resolveFetch(g)):(h.exceededTransferLimit&&this._evalNextBatch(g),this._evalResolution())},_handleError:function(g,h){var m=this._requests;m&&m[g]&&(1===g?this._rejectFetch(h):(this._evalNextBatch(g),this._fetchDfd.progress({error:h,isError:!0}),this._evalResolution()))},_evalResolution:function(){this._hasPendingRequests()||
this._resolveFetch(this._hasRejectedRequests())},_resolveFetch:function(g){var h=this._hasRejectedRequests();this.cancel(!0);this._fetchDfd.resolve({hasPartialFeatures:g,hasUpdateError:h})},_rejectFetch:function(g){this.cancel(!0);this._fetchDfd.reject(g)},_getResult:function(g){return g&&g.dfd.results[0]},_hasPendingRequests:function(){return!!this._getPendingRequests().length},_getPendingRequests:function(){var g=this._requests,h,m=[];for(h in g){var l=g[h];l.isFulfilled()||m.push({pageId:Number(h),
dfd:l})}return m},_getLastSuccessfulRequest:function(){var g=this._getResolvedRequests(),h=-Infinity,m;g=r.filter(g,function(l){return!!this._getResult(l).features.length||1===l.pageId},this);r.forEach(g,function(l){l.pageId>h&&(h=l.pageId,m=l)});return m},_getResolvedRequests:function(){var g=this._requests,h,m=[];for(h in g){var l=g[h];l.isResolved()&&m.push({pageId:Number(h),dfd:l})}return m},_hasRejectedRequests:function(){var g=this._getRejectedRequests(),h=this._getLastSuccessfulRequest(),m=
this._getResult(h);m&&!m.exceededTransferLimit&&(g=r.filter(g,function(l){return l.pageId<=h.pageId}));return!!g.length},_getRejectedRequests:function(){var g=this._requests,h,m=[];for(h in g){var l=g[h];l.isRejected()&&m.push({pageId:Number(h),dfd:l})}return m},_cancelPendingRequests:function(g){this._cancelRequests(this._getPendingRequests(),g)},_cancelLaterRequests:function(g,h){var m=r.filter(this._getPendingRequests(),function(l){return l.pageId>g});this._cancelRequests(m,h)},_cancelRequests:function(g,
h){var m=this.mode,l=this._requests;r.forEach(g,function(f){h&&delete l[f.pageId];m._cancelPendingRequest(f.dfd)})}});y.setObject("layers.support.ParallelSnapshot",b,e);return b})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),function(b,y,r,a,k,e,g,h,m,l){b=b([m],{declaredClass:"esri.layers._OnDemandMode",constructor:function(f){this.featureLayer=
f;this._featureMap={}},initialize:function(f){this.inherited(arguments);this._cellMap={};this._gridLayer=l.createFromFeatureLayer({layer:this.featureLayer,map:f})},startup:function(){if(!this._started||this._isSuspendedAtStartup)this.inherited(arguments),this._ioQueue=[],this._isSuspendedAtStartup=this.featureLayer.suspended,this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(f){this._init&&2>f&&this._zoomHandler()},destroy:function(){this._disableConnectors();
this._processIOQueue(!0);this.inherited(arguments)},drawFeature:function(f){var c=f.geometry,d=[];if(c){d=this._gridLayer.getCellsInExtent("point"===c.type?{xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y}:c.getExtent(),!1).cells;c=this._cellMap;var u,n=f.attributes[this.featureLayer.objectIdField];for(u=0;u<d.length;u++){var t=d[u];var x=t.latticeID;var A=t.row;var B=t.col;x?t=c[x]=c[x]||t:(c[A]=c[A]||{},t=c[A][B]=c[A][B]||t);t.features=t.features||[];t.features.push(f);this._addFeatureIIf(n,f);this._incRefCount(n)}}},
suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},hasAllFeatures:function(){var f=!1,c=this._getCurrentCells(),d;for(d=0;d<c.length;d++)if(c[d].hasPartialFeatures){f=!0;break}return!f},hasUpdateError:function(){var f=!1,c=this._getCurrentCells(),d;for(d=0;d<c.length;d++)if(c[d].hasUpdateError){f=!0;break}return f},canFetchPBF:function(f){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(f)},
_enableConnectors:function(){var f=this.map;this._zoomConnect=y.connect(f,"onZoomEnd",this,this._zoomHandler);this._panConnect=y.connect(f,"onPanEnd",this,this._panHandler);this._resizeConnect=y.connect(f,"onResize",this,this._panHandler)},_disableConnectors:function(){y.disconnect(this._zoomConnect);y.disconnect(this._panConnect);y.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var f=this.featureLayer,c=this.map;!f.suspended&&f.isQueryable()&&(f._fireUpdateStart(),
this._clearIIf(),(f=f._trackManager)&&f.clearTracks(),this._cellMap={},this._gridLayer.setResolution(c.extent),this._sendRequest())},_panHandler:function(f){if(this.featureLayer.isQueryable()){this.featureLayer._fireUpdateStart();var c=this.featureLayer._resized;f=c?f:null;c&&this._gridLayer.setMapState(f,this.map.width,this.map.height);this._sendRequest(f)}},_sendRequest:function(f){this._exceeds=!1;var c=this.featureLayer,d=this.map;f=f||d.extent;d=this._gridLayer.getCellsInExtent(f,c.latticeTiling).cells;
if(!c.isEditable()){var u=this._cellMap;d=a.filter(d,function(A){if(A.lattice){if(u[A.latticeID])return!1}else if(u[A.row]&&u[A.row][A.col])return!1;return!0})}this._pending=this._pending||0;var n;for(n=0;n<d.length;n++){var t=d[n],x=this._createQueryInfo(t);this._pending++;this._ioQueue.push(c._task.execute(x.query,r.hitch(this,this._drawFeatures,t),r.hitch(this,this._queryErrorHandler,t),x.pbf?{format:"pbf"}:null))}this._removeOldCells(f);this._endCheck()},_drawFeatures:function(f,c){this.featureLayer._isImageService&&
10.7>this.featureLayer.version&&void 0===c.exceededTransferLimit&&(c.exceededTransferLimit=c.features.length===this.featureLayer.maxRecordCount);f.hasPartialFeatures=!!c.exceededTransferLimit;f.hasUpdateError=!1;this._exceeds=this._exceeds||c.exceededTransferLimit;this._finalizeIO();var d=this.featureLayer,u=this.map.extent,n=f.extent,t=f.row,x=f.col,A=d.objectIdField;c=c.features;var B=this._gridLayer,F=this._cellMap,w=f.latticeID;F=w?F[w]:F[t]&&F[t][x];if(f.resolution==B.resolution&&(w?w===B.getLatticeID(u):
B.intersects(n,u)))if(F)d._sortFeatures(c),this._updateCell(F,c);else for(d._sortFeatures(c),f.features=c,this._addCellToCellMap(f),d=c.length,f=0;f<d;f++)u=c[f],n=u.attributes[A],this._addFeatureIIf(n,u),this._incRefCount(n);else F&&this._removeCell(t,x,w);this._endCheck()},_queryErrorHandler:function(f,c){this._finalizeIO();f.hasPartialFeatures=!0;f.hasUpdateError=!0;this._addCellToCellMap(f);this.featureLayer._errorHandler(c);this._endCheck(c)},_finalizeIO:function(){this._pending--},_endCheck:function(f){if(0===
this._pending){this._processIOQueue();var c=this.featureLayer,d=c._trackManager;d&&(d.clearTracks(),d.addFeatures(c.graphics),c._ager&&a.forEach(c.graphics,function(u){u._shape&&c._repaint(u)}),d.moveLatestToFront(),d.drawTracks());this.featureLayer._fireUpdateEnd(!!f&&Error("FeatureLayer: "+(f.message||"an error occurred while updating the layer.")),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)c.onQueryLimitExceeded()}},_processIOQueue:function(f){this._ioQueue=a.filter(this._ioQueue,
function(c){return-1<c.fired?!1:!0});f&&a.forEach(this._ioQueue,this._cancelPendingRequest)},_createQueryInfo:function(f){var c=this.featureLayer,d=new h;d.outFields=c.getOutFields();d.where=c.getDefinitionExpression();d.returnGeometry=!0;d.geometry=f.extent||f.lattice;c.latticeTiling&&f.extent&&(d.spatialRelationship=h.SPATIAL_REL_CONTAINS);d.timeExtent=c._getOffsettedTE(c._mapTimeExtent);d.maxAllowableOffset=c._maxOffset;d.quantizationParameters=c._quantizationParameters;d.orderByFields=c.supportsAdvancedQueries?
c.getOrderByFields():null;d.multipatchOption=c.multipatchOption;c._ts&&(d._ts=(new Date).getTime());(f=c.advancedQueryCapabilities)&&f.supportsQueryWithResultType&&(d.resultType="tile");f=this.canFetchPBF(d);c._enableEditModeQuantization(d,f);return{query:d,pbf:f}},_getCurrentCells:function(f){var c=[];f=f||this._cellMap;for(var d in f)if(f.hasOwnProperty(d)){var u=f[d];u&&(u.hasOwnProperty("row")||u.hasOwnProperty("latticeID")?c.push(u):"object"===typeof u&&c.push.apply(c,this._getCurrentCells(u)))}return c},
_addCellToCellMap:function(f){var c=this._cellMap;if(f.latticeID)c[f.latticeID]=f;else{var d=f.row,u=f.col;c[d]=c[d]||{};c[d][u]=f}},_removeOldCells:function(f){var c=this._cellMap,d=this._gridLayer,u,n;for(u in c)if(c[u]){var t=c[u],x=t.latticeID,A=0,B=0;if(x)A++,x!==d.getLatticeID(f)&&(this._removeCell(null,null,x),B++);else for(n in t)t[n]&&(A++,d.intersects(t[n].extent,f)||(this._removeCell(u,n),B++));B===A&&delete c[u]}},_updateCell:function(f,c){var d=this.featureLayer,u=d.objectIdField;d=d._selectedFeatures;
var n,t=c.length;f.features=f.features||[];for(n=0;n<t;n++){var x=c[n],A=x.attributes[u],B=this._addFeatureIIf(A,x);B===x?(this._incRefCount(A),f.features.push(B)):A in d||(B.setGeometry(x.geometry),B.setAttributes(x.attributes))}},_removeCell:function(f,c,d){var u=this._cellMap,n=this.featureLayer,t=n.objectIdField,x=d?u[d]:u[f]&&u[f][c];if(x&&(d?delete u[d]:delete u[f][c],f=x.features))for(c=0;c<f.length;c++)d=f[c].attributes[t],this._decRefCount(d),d in n._selectedFeatures||this._removeFeatureIIf(d)}});
r.setObject("layers._OnDemandMode",b,e);return b})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../srUtils".split(" "),function(b,y,r,a,k,e,g,h,m,l,f){var c=b(null,{declaredClass:"esri.layers._GridLayout",constructor:function(d,u,n,t){this.origin=d;this.cellWidth=u.width;this.cellHeight=u.height;this.mapWidth=n.width;this.mapHeight=
n.height;this.srInfo=t},setResolution:function(d){this.resolution=(d.xmax-d.xmin)/this.mapWidth;this.srInfo&&(d=Math.round(Math.round(2*this.srInfo.valid[1]/this.resolution)/this.cellWidth),this._frameStats=[d,0,d-1])},setMapState:function(d,u,n){this.mapWidth=u;this.mapHeight=n;this.setResolution(d)},getCellCoordinates:function(d){var u=this.resolution,n=this.origin;return{row:Math.floor((n.y-d.y)/(this.cellHeight*u)),col:Math.floor((d.x-n.x)/(this.cellWidth*u))}},normalize:function(d){var u=this._frameStats;
if(u){var n=u[0],t=u[1];u=u[2];d<t?(d%=n,d=d<t?d+n:d):d>u&&(d%=n)}return d},intersects:function(d,u){var n=this.srInfo;return n?r.some(u._getParts(n),function(t){return d.intersects(t.extent)}):d.intersects(u)},getCellExtent:function(d,u){var n=this.resolution,t=this.origin,x=this.cellWidth,A=this.cellHeight;return new g(u*x*n+t.x,t.y-(d+1)*A*n,(u+1)*x*n+t.x,t.y-d*A*n,f.createSpatialReference(t.spatialReference.toJson()))},getLatticeID:function(d){var u=this.getCellCoordinates({x:d.xmin,y:d.ymax}),
n=this.getCellCoordinates({x:d.xmax,y:d.ymin});d=u.row;var t=n.row;u=this.normalize(u.col);n=this.normalize(n.col);return d+"_"+t+"_"+u+"_"+n},sorter:function(d,u){return d<u?-1:1},getCellsInExtent:function(d,u){var n=this.getCellCoordinates({x:d.xmin,y:d.ymax}),t=this.getCellCoordinates({x:d.xmax,y:d.ymin}),x=n.row,A=t.row;n=n.col;t=t.col;var B=[],F,w,D=[],q=[],v=[];for(F=x;F<=A;F++)for(w=n;w<=t;w++){var z=this.normalize(w);d=this.getCellExtent(F,z);r.some(B,function(G){return G.row===F&&G.col===
z})||B.push({row:F,col:z,extent:d,resolution:this.resolution});u&&(D.push(d.xmin,d.xmax),q.push(d.ymin,d.ymax))}n=this.normalize(n);t=this.normalize(t);D.sort(this.sorter);q.sort(this.sorter);u=D.length;for(F=u-1;0<=F;F--)F<u-1&&D[F]===D[F+1]&&D.splice(F,1);u=q.length;for(F=u-1;0<=F;F--)F<u-1&&q[F]===q[F+1]&&q.splice(F,1);if(D.length&&q.length){d=D[0];w=D[D.length-1];var C=q[0];var E=q[q.length-1];u=D.length;for(F=0;F<u;F++)v.push([[D[F],E],[D[F],C]]);u=q.length;for(F=0;F<u;F++)v.push([[d,q[F]],[w,
q[F]]]);D=new h({paths:v,spatialReference:this.origin.spatialReference.toJson()});B.push({latticeID:x+"_"+A+"_"+n+"_"+t,lattice:D,resolution:this.resolution})}return{minRow:x,maxRow:A,minCol:n,maxCol:t,topRow:x,bottomRow:A,leftCol:n,rightCol:t,cells:B}},_findCell:function(d,u,n){var t;r.some(d,function(x){x.row===u&&x.col===n&&(t=x);return!!t});return t},getExtentOfIntersectingCells:function(d){var u=this.getCellsInExtent(d),n=u&&u.cells;if(n&&n.length){var t=u.topRow,x=u.leftCol,A=0;r.forEach(n,
function(D){D.row===t&&A++});var B=this._findCell(n,t,x).extent,F=this.srInfo;if(!F||A!==this._frameStats[0]&&x!==u.rightCol){var w=B.xmin;F=w+A*B.getWidth()}else w=F.valid[0],F=F.valid[1];u=this._findCell(n,u.bottomRow,x).extent.ymin;(d=(new g(w,u,F,B.ymax,d.spatialReference))._normalize(!1,!1))&&d.rings&&(d=new m(d),d=l.getDenormalizedExtent(d));return d}}});c.createFromFeatureLayer=function(d){var u=d.layer;d=u.getMap()||d.map;var n=u._srInfo;(u=d&&d.loaded?new c(new e(n?n.valid[0]:d.extent.xmin,
n?n.valid[1]:d.extent.ymax,d.spatialReference),{width:u._tileWidth,height:u._tileHeight},{width:d.width,height:d.height},n):null)&&u.setResolution(d.extent);return u};y.setObject("layers._GridLayout",c,k);return c})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(b,y,r,a,k){b=b([k],{declaredClass:"esri.layers._SelectionMode",constructor:function(e){this.featureLayer=e;this._featureMap={}},propertyChangeHandler:function(e){this._init&&
0===e&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)},hasAllFeatures:function(){return!this.featureLayer._hasPartialSelectedFeatures},hasUpdateError:function(){return this.featureLayer._hasSelectionError}});y.setObject("layers._SelectionMode",b,a);return b})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f){b=b([f],{declaredClass:"esri.layers._StreamMode",constructor:function(c,d){this.featureLayer=c;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=y.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;c.purgeOptions&&c.purgeOptions.age&&"number"===typeof c.purgeOptions.age&&(this._maxFeatureAge=1E3*Math.ceil(60*c.purgeOptions.age));this._drawFeatures=
y.hitch(this,this._drawFeatures);this._queryErrorHandler=y.hitch(this,this._queryErrorHandler)},startup:function(){this._started||this.inherited(arguments)},propertyChangeHandler:function(c){this._init&&(0===c?this._applyTimeFilter():3===c&&this._redrawAllTracks())},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=this._featureMap=null},drawFeature:function(c){var d=this.featureLayer,u=d.objectIdField;this._timeoutId||(this._timeoutId=
setTimeout(this._flushDrawBuffer,this._refreshRate));d._joinField&&this._getFeature(c.attributes[u])?this._drawBuffer.updates.push({oid:c.attributes[u],updates:c}):this._drawBuffer.adds.push(c)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);var c=this.featureLayer;c&&(c._relatedUrl||c._keepLatestUrl?(c._fireUpdateStart(),c._refreshing=!0,c.disconnect(),c.clear(),c._relatedQueried=!1,c._keepLatestQueried=!1,
c.connect()):(c._fireUpdateStart(),c.clear(),c._fireUpdateEnd()))},_drawFeatures:function(c,d){var u=this.featureLayer;u._create(c.features||[]);u._fireUpdateEnd(null,d)},_applyTimeFilter:function(c){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(c){var d=this.featureLayer,u=d.objectIdField;c&&r.forEach(c,function(n){n=n.attributes[u];d._unSelectFeatureIIf(n,this);this._decRefCount(n);this._removeFeatureIIf(n)},this)},_addFeatures:function(c){var d=this.featureLayer,u=
d._endTimeField,n=d._startTimeField,t,x=[],A=[],B=[];var F=d._trackManager;var w=d.objectIdField;if(F)for(t in c=F.addFeatures(c),c)c.hasOwnProperty(t)&&(x.push(t),c[t].adds&&(A=A.concat(c[t].adds)),c[t].deletes&&(B=B.concat(c[t].deletes)));else A=c;r.forEach(A,function(D){var q=D.attributes[w];var v=u&&D.attributes[u];!v&&this._maxFeatureAge&&(v=n&&D.attributes[n]?D.attributes[n]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);v&&(v=1E3*Math.ceil(v/1E3),this._featuresByTime[v]?this._featuresByTime[v].push(q):
this._featuresByTime[v]=[q]);this._addFeatureIIf(q,D);this._incRefCount(q)},this);B.length&&this._removeFeatures(B);F&&F.refreshTracks(x)},_updateFeatures:function(c){var d=this.featureLayer,u=[];var n=d._trackManager;var t=d._trackIdField;r.forEach(c,function(x){var A=x.updates;x=this._getFeature(x.oid);var B;if(x){A.geometry&&x.setGeometry(A.geometry);A=A.attributes||{};for(B in A)A.hasOwnProperty(B)&&(x.attributes[B]=A[B]);x.setAttributes(x.attributes);x.visible=this._checkFeatureTimeIntersects(x);
n&&x.attributes[t]?u.push(x.attributes[t]):d._repaint(x,null,!0)}},this);u.length&&n.refreshTracks(u)},_redrawAllTracks:function(){var c=this.featureLayer._trackManager,d;c&&(d=c.trimTracks())&&0<d.length&&(this._removeFeatures(d),c.refreshTracks())},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var c=this._drawBuffer,d=c.adds.splice(0,c.adds.length),u=c.updates.splice(0,c.updates.length);c=this.featureLayer;if(!c)return!1;c.updating||c._fireUpdateStart();this._addFeatures(d);this._updateFeatures(u);
(d=this._getExpiredFeatures())&&d.length&&(this._removeFeatures(d),c._trackManager&&c._trackManager.removeFeatures(d));c._purge();c._fireUpdateEnd();this._timeoutId=null},_clearDrawBuffer:function(){var c=this._timeoutId,d=this._drawBuffer,u=d.adds;d=d.updates;c&&clearTimeout(c);u.splice(0,u.length);d.splice(0,d.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(c){c=
c||0===c?c:200;0>c&&(c=200);this._refreshRate=c},_checkFeatureTimeIntersects:function(c){var d=this.featureLayer,u=d.getMap();return(u=u?u.timeExtent:null)&&d.timeInfo&&(d.timeInfo.startTimeField||d.timeInfo.endTimeField)?0<d._filterByTime([c],u.startTime,u.endTime).match.length:!0},_fetchArchive:function(c){var d=new a,u=this.featureLayer;this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);u._fireUpdateStart();if(c&&this.map){c=new m(c);var n=new h;var t=this.map;var x=u.getFilter()||
{};var A=x.where||"1\x3d1";var B=x.geometry?l.fromJson(x.geometry):null;x=x.outFields?x.outFields.split(","):["*"];n.geometry=B;n.where=A;n.outFields=x;n.returnGeometry=!0;n.outSpatialReference=new g(t.spatialReference.toJson());this._pendingRequest=c.execute(n).then(function(F){this._pendingRequest=null;var w=this._fixFieldNameCasing(u,F);F.features=w;this._drawFeatures(F);u._fireUpdateEnd();d.resolve()}.bind(this)).otherwise(function(F){this._pendingRequest=null;u._errorHandler(F);u._fireUpdateEnd(F);
d.reject(F)}.bind(this))}else d.resolve();return d.promise},_queryErrorHandler:function(c){var d=this.featureLayer;d._errorHandler(c);d._fireUpdateEnd(c)},_fixFieldNameCasing:function(c,d){var u=d.features||[],n=d.fields;if(!n||!u.length)return u;c=this._mapFieldNameDifferences(c.fields,n);n=[];for(var t,x=0,A=d.features.length;x<A;x++)d=u[x],t=this._swizzleResponseAttributes(d.attributes,c),n.push({geometry:d.geometry,attributes:t});return n},_mapFieldNameDifferences:function(c,d){var u=[],n={},
t;var x=0;for(t=d.length;x<t;x++)u.push(d[x].name);x=0;for(t=c.length;x<t;x++){d=c[x].name;var A=this._checkForStreamFieldName(d,u);A&&(n[A]=d)}return n},_checkForStreamFieldName:function(c,d){c=c.toLowerCase();for(var u,n=0,t=d.length;n<t;n++)if(d[n].toLowerCase()===c){u=d[n];break}return u},_swizzleResponseAttributes:function(c,d){var u={},n;for(n in c)if(c.hasOwnProperty(n)){var t=c[n];d.hasOwnProperty(n)?u[d[n]]=t:u[n]=t}return u},_getExpiredFeatures:function(){var c,d,u=[],n=[];if(!this.featureLayer._endTimeField&&
!this._maxFeatureAge)return n;var t=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=c=1E3*Math.ceil(Date.now()/1E3);if(t&&t!==c)for(d=this._featuresByTime;t<=c;t+=1E3)d[t]&&(u=u.concat(d[t]),delete d[t]);r.forEach(u,function(x){(x=this._getFeature(x))&&n.push(x)},this);return n}});y.setObject("layers._StreamMode",b,e);return b})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-construct dojox/gfx ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),
function(b,y,r,a,k,e,g,h,m,l){var f=-1!==e.renderer.toLowerCase().indexOf("canvas");b=b(null,{declaredClass:"esri.layers._TrackManager",constructor:function(c){this.layer=c;this.trackMap={};this.trackLineMap={}},initialize:function(c){this.map=c;c=this.layer;this.createTracklineContainer()&&(this._handles=[c.on("visibility-change",y.hitch(this,function(d){this.container.setVisibility(d.visible);this.container.evaluateSuspension()})),c.on("scale-range-change",y.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,
this.layer.maxScale)}))])},createTracklineContainer:function(){var c=this.layer;if("esriGeometryPoint"!==c.geometryType)return null;var d=this.map,u=c._getRenderer();u=u&&u.trackRenderer;var n=this.container=new l._GraphicsLayer({id:c.id+"_tracks",_child:!0,visible:c.visible,minScale:c.minScale,maxScale:c.maxScale});n.loaded=!0;n.onLoad(n);n._setMap(d,c._div);f||(d=n._div.getNode(),c=c._div.getNode(),d&&c&&k.place(d,c,"first"));n.setRenderer(u);return n},addFeatures:function(c){var d=this.trackMap,
u=this.layer,n=u._trackIdField,t=[];r.forEach(c,function(F){var w=F.attributes[n];(d[w]=d[w]||[]).push(F);-1===r.indexOf(t,w)&&t.push(w)});var x=u._startTimeField,A=u.objectIdField,B=function(F,w){var D=F.attributes[x],q=w.attributes[x];return D===q?F.attributes[A]<w.attributes[A]?-1:1:D<q?-1:1};r.forEach(t,function(F){d[F].sort(B)})},trimTracks:function(c){function d(A){for(A=u[A]||[];A.length>n;)t.push(A.shift())}var u=this.trackMap,n=this.layer.maximumTrackPoints||0,t=[],x;if(!n)return t;if(c)r.forEach(c,
function(A){d(A)});else for(x in u)u.hasOwnProperty(x)&&d(x);return t},drawTracks:function(c){function d(F){var w=x[F],D,q;var v=u.trackLineMap[F];n.remove(v);delete u.trackLineMap[F];v=null;if(!w||2>w.length)return!1;v=[];for(D=w.length-1;0<=D;D--)(q=w[D].geometry)&&v.push([q.x,q.y]);w={};w[B]=F;1<v.length&&(v=new h(new m({paths:[v],spatialReference:A}),null,w),n.add(v),u.trackLineMap[F]=v)}var u=this,n=this.container,t;if(n){var x=this.trackMap;var A=this.map.spatialReference;var B=this.layer._trackIdField;
if(c)r.forEach(c,function(F){d(F)});else for(t in x)x.hasOwnProperty(t)&&d(t)}},refreshTracks:function(c){function d(B){var F;u.drawTracks([B]);if(x&&x.latestObservationRenderer){B=n[B]||[];var w=B.length;for(F=0;F<w;F++)t._repaint(B[F],null,!0)}}var u=this,n=this.trackMap,t=this.layer,x=t._getRenderer(),A;if(c)r.forEach(c,function(B){d(B)});else for(A in n)n.hasOwnProperty(A)&&d(A);this.moveLatestToFront()},moveLatestToFront:function(c){r.forEach(this.getLatestObservations(c),function(d){var u=d._shape;
u&&u._moveToFront();this._repaint(d,null,!0)},this.layer)},getLatestObservations:function(c){function d(A){A=t[A];return A[A.length-1]}var u=[],n=this.layer._getRenderer(),t=this.trackMap,x;if(!n.latestObservationRenderer)return u;if(c)r.forEach(c,function(A){u.push(d(A))});else for(x in t)t.hasOwnProperty(x)&&u.push(d(x));return u},clearTracks:function(c){var d=this.getLatestObservations(c),u=this.container,n=this.trackMap,t;if(c)r.forEach(c,function(A){delete this.trackMap[A];u&&(x=this.trackLineMap[A],
u.remove(x),delete this.trackLineMap[A])},this);else{if(u)for(t in n){var x=this.trackLineMap[t];u.remove(x)}this.trackMap={};this.trackLineMap={}}r.forEach(d,function(A){this._repaint(A,null,!0)},this.layer)},isLatestObservation:function(c){var d=this.trackMap[c.attributes[this.layer._trackIdField]];return d?d[d.length-1]===c:!1},destroy:function(){r.forEach(this._handles,function(d){d.remove()});var c=this.container;c&&(c.clear(),c._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=
this.container=null}});y.setObject("layers._TrackManager",b,g);return b})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d){function u(){}function n(t){var x=t.layer;return{geometry:t.geometry,attributes:t.attributes,getLayer:function(){return x}}}
b=b(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(t){this.sourceLayer=t;this._hndls=[]},initialize:function(t){this.map=t;var x=this.sourceLayer,A=x.renderer;x.setDrawMode(!1);this.imageLayer=t._getMapImageLyr();var B=this;this.heatmapRenderer=A instanceof f?A:(A.getRendererInfoByZoom(t.getZoom())||A.getRendererInfoByScale(t.getScale())).renderer;this.redraw=this.redraw.bind(this);this.recalculateHeatmap=
this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);k(["../workers/heatmapCalculator"],function(F){B._calculator=new F(y.mixin({width:B.map.width,height:B.map.height},B._getOptions()));B._setupRenderer();
B.heatmapRenderer.getStats=F.calculateStats;B.heatmapRenderer.getHistogramData=F.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(t){var x=t.renderer,A=x instanceof f;this.heatmapRenderer?A?this.heatmapRenderer=x:this._removeRenderer(t):A&&(this.heatmapRenderer=x,this.sourceLayer&&this.map&&
this._setupRenderer())},_handleOpacityChange:function(t){t=t.opacity;var x=this._getImageBySourceId(this.sourceLayer.id);x&&x.setOpacity(t)},_setupRenderer:function(){var t=this._hndls,x=this.sourceLayer,A=this.map,B=this;x._originalDraw=x._draw;x._draw=u;x._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),250);t.push(x.on("update-end",this.redraw));t.push(x.on("suspend",function(F){(F=B._getImageBySourceId(B.sourceLayer.id))&&F.hide()}));t.push(x.on("resume",
function(F){(F=B._getImageBySourceId(B.sourceLayer.id))&&F.show()}));t.push(r.after(x,"redraw",this.redraw));t.push(A.on("layer-remove",function(F){F.layer==x&&((F=B._getImageBySourceId(B.sourceLayer.id))&&B.imageLayer.removeImage(F),B._removeRenderer({target:x}))}));x._collection&&t.push(x.on("graphic-add",function(F){B._reprojectFeature(F.graphic);B.redraw()}));1!==x.mode&&(t.push(A.on("resize, pan-end",this.redraw)),t.push(A.on("zoom-end",this.redraw)));t.push(x.on("opacity-change",this._handleOpacityChange));
this.imageLayer.suspended&&this.imageLayer.resume();x.graphics&&x.graphics.length&&(x.graphics[0].geometry&&!A.spatialReference.equals(x.graphics[0].geometry.spatialReference)&&a.forEach(x.graphics,function(F){this._reprojectFeature(F)}.bind(this)),this.redraw())},redraw:function(){if(!this._drawTimer){var t=this;this._drawTimer=setTimeout(function(){clearTimeout(t._drawTimer);t._drawTimer=null;t.sourceLayer._getRenderer().isInstanceOf(f)&&t.recalculateHeatmap()},16)}},_removeRenderer:function(t){var x=
t.target;x._draw=x._originalDraw;delete x._originalDraw;x.setDrawMode(!0);this._removeHandlers();this._hndls=[];var A=this._getImageBySourceId(this.sourceLayer.id);A&&this.imageLayer.removeImage(A);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;x.renderer!=t.renderer&&x.renderer.getRendererInfo?this.heatmapRenderer=null:(this.destroy(),x.renderer&&x.renderer.getRendererInfo&&x.redraw())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():
this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(t){if(t&&t.geometry){var x=t.geometry,A=this.map.spatialReference;A.equals(x.spatialReference)||(x=m.project(x,A),null!=x&&(t.geometry=x))}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var t=this.sourceLayer,x=this.map,A=this.heatmapRenderer,B=this.map.extent,F=this.map.width,w=this.map.height,D=this._calculator,q=this,v=function(C){C=q._getScreenPoints(C.features,x,t);C=D.calculateImageData(y.mixin({screenPoints:C,
mapinfo:{extent:[B.xmin,B.ymin,B.xmax,B.ymax],resolution:x.getResolution()},width:F,height:w},q._getOptions()));C=A.getSymbol(n({geometry:x.extent,attributes:{size:[F,w],imageData:C},layer:t}));C=new l({extent:x.extent,href:C.url,opacity:0,sourceId:t.id});q._swapMapImages(C,q._getImageBySourceId(t.id));t.suspended&&C.hide()},z={geometry:x.extent,timeExtent:t.useMapTime?x.timeExtent:void 0,spatialRelationship:c.SPATIAL_REL_INTERSECTS};null!=t._canDoClientSideQuery(z)?t.queryFeatures(z,v):v({features:t.graphics})},
_getScreenPoints:function(t,x,A){var B=[],F=t.length,w=0,D=0,q=new h(x.extent.xmin,x.extent.ymax,x.spatialReference),v=x.toScreen(q),z=v.x;v=v.y;var C=x.getResolution(),E;for((D=x.extent.getCacheValue("_parts"))&&(E=a.map(D,function(H){return A._intersects(x,H.extent)[0]}));F--;)if(D=t[F],D.geometry&&D.visible){var G={x:Math.ceil((D.geometry.x-q.x)/C+z),y:Math.floor((q.y-D.geometry.y)/C-v),attributes:D.attributes};E&&(D=1<E.length&&G.x<-E[0]?E[1]:E[0],G.x+=D);B[w++]=G}return B},_getImageBySourceId:function(t){var x=
this.imageLayer.getImages();x=a.filter(x,function(A){return A.sourceId==t});if(x.length)return x[x.length-1]},_swapMapImages:function(t,x){function A(){B.removeImage(x)}var B=this.imageLayer,F=this.sourceLayer.opacity;B.addImage(t);d.anim(t._node,{opacity:F},null,null,function(){t.opacity=F});null!=x&&d.anim(x._node,{opacity:0},null,null,A)},_removeHandlers:function(){if(null!=this._hndls)for(var t=this._hndls.length;t--;)this._hndls[t].remove()},_getOptions:function(){var t=this.heatmapRenderer;
return{blurRadius:t.blurRadius,gradient:t.gradient,maxPixelIntensity:t.maxPixelIntensity,minPixelIntensity:t.minPixelIntensity,field:t.field,fieldOffset:t.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var t=this.sourceLayer.graphics,x=t.length,A;x--;)A=t[x],A._shape=A._offsets=void 0}});y.setObject("layers.HeatmapManager",b,e);return b})},"esri/layers/clustering/ClusterManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../kernel ../../Evented ../../graphic ../../lang ../../Color ../../graphicsUtils ../../dijit/PopupTemplate ../../dijit/Legend/utils ../../renderers/ClassBreaksRenderer ../../symbols/SimpleMarkerSymbol ../support/attributeUtils ../GraphicsLayer ../Field ./GeohashAggregation ./statUtils dojo/i18n!../../nls/jsapi".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F){var w=F.layers.clusters,D=F.widgets.popup,q=w.numFeatures,v=Math.pow(2,53)-1;b=b(e,{declaredClass:"esri.layers.clustering.ClusterManager",layer:null,aggregationInfo:null,container:null,defaults:{clusterRadius:80,markerSymbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}},_initialized:!1,_map:null,_eventHandles:null,_clusterRadius:null,
_renderer:null,_statisticInfos:null,_fields:null,_infoTemplate:null,_clusterGenerator:null,_singleGraphics:null,constructor:function(z){this._eventHandles=[];this.layer=z.layer;this.setAggregationInfo(z.aggregationInfo)},initialize:function(z){this._initialized=!0;this._map=z;this._removeFromPopup(this.layer);this.container=this._createContainer();this._clusterGenerator=this._createClusterGenerator();this._initClusterGenerator();this._createLayerEventListeners();this._createMapEventListeners();this._createPopupEventListeners()},
destroy:function(z){this._clearSingleGraphics();this._removeClusterBoundary();this._destroyEventListeners();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this._destroyClusterGenerator(z);this._destroyContainer();this.layer=this.aggregationInfo=this._map=null},setAggregationInfo:function(z){this.aggregationInfo=z?y.mixin({},z):null;this._applyAggregationInfo()},getClusterRenderer:function(){return this._renderer},getClusterFields:function(){return this._fields||
[]},getFeaturesInCluster:function(z){z=z&&z.getAggregationInfo();return this._clusterGenerator?this._clusterGenerator.getFeaturesInCluster(z):[]},getAggregateGraphics:function(){return this.container?this.container.graphics.slice(0):[]},getSingleGraphics:function(){return this._singleGraphics?this._singleGraphics.slice(0):[]},redraw:function(){this.container&&this.container.redraw()},isClusteringEnabled:function(){return!(!this._clusterGenerator||!this._clusterGenerator.clustersEnabled)},isClusteringActive:function(){return!!(this._clusterGenerator&&
0<this._clusterGenerator.getNumFeatures())},toggleFeatureVisibility:function(z){this._clusterGenerator&&this._clusterGenerator.toggleFeatureVisibility(z)},_createContainer:function(){var z=this.layer,C=new t._GraphicsLayer({_child:!0,id:z.id+"_clusters",visible:z.visible,minScale:z.minScale,maxScale:z.maxScale,infoTemplate:this._infoTemplate});C.fields=this._fields;C.setRenderer(this._renderer);C.loaded=!0;C.onLoad(C);C._setMap(this._map,z._div);return z._childLayer=C},_destroyContainer:function(){var z=
this.container;z&&(z.clear(),z._unsetMap(this._map,this.layer._div),this.layer._childLayer=null);this.container=null},_createClusterGenerator:function(){return new A({map:this._map,layer:this.layer,clusterRadius:this._clusterRadius,statisticInfos:this._statisticInfos})},_initClusterGenerator:function(){var z=this._clusterGenerator;z.loaded?this._awaitClusterGenerator():this._eventHandles.push(z.on("load",y.hitch(this,function(){this._awaitClusterGenerator()})),z.on("load-error",y.hitch(this,function(C){})))},
_destroyClusterGenerator:function(z){this._clusterGenerator&&this._clusterGenerator.destroy(z);this._clusterGenerator=null},_awaitClusterGenerator:function(){var z=this._clusterGenerator;z.started?(this._applyRenderer(),this._initClusterUpdates()):this._eventHandles.push(z.on("start",y.hitch(this,function(){this._applyRenderer();this._initClusterUpdates()})))},_applyAggregationInfo:function(){this._applyClusterRadius();this._applyRenderer();this._clusterGenerator&&!this._clusterGenerator.isUpdateScheduled()&&
this.redraw()},_applyClusterRadius:function(){var z=this.aggregationInfo;this._clusterRadius=z&&z.clusterRadius||this.defaults.clusterRadius;this._clusterGenerator&&this._clusterGenerator.setClusterRadius(this._clusterRadius);this._computeClusterRadius()},_computeClusterRadius:function(){var z=this.aggregationInfo||{};z.clusterRadius=this._clusterRadius;this.aggregationInfo=z},_applyRenderer:function(){var z=this.container,C=this._getClusterRendererInfo(),E=this._compareStatInfos(this._statisticInfos,
C.statisticInfos);E&&(this._statisticInfos=C.statisticInfos,this._clusterGenerator&&(this._clusterGenerator.setStatisticInfos(r.map(this._statisticInfos,function(G){return{attributeInfo:G.attributeInfo,statisticType:G.statisticType}})),z&&r.forEach(z.graphics,function(G){this._applyClusterAttributes(G,G.getAggregationInfo())},this)));this._renderer=C.renderer;this._applyFields();this._applyInfoTemplate(!!E&&this._initialized);z&&(z.setRenderer(this._renderer),this.emit("renderer-change"))},_applyFields:function(){this._fields=
this._getFields(this._statisticInfos);this.container&&(this.container.fields=this._fields)},_applyInfoTemplate:function(z){var C=this.aggregationInfo,E=C&&C.disablePopup;this.layer.infoTemplate&&!E?(C=C&&C.infoTemplate||this._infoTemplate,z=z||!C?this._createInfoTemplate():this._updateInfoTemplate(C)):z=null;this._infoTemplate=z;this.container&&this.container.setInfoTemplate(this._infoTemplate);this._computeInfoTemplate()},_computeInfoTemplate:function(){var z=this.aggregationInfo||{};z.infoTemplate=
this._infoTemplate;this.aggregationInfo=z},_getClusterRendererInfo:function(){var z=this.layer&&this.layer.renderer;return z?this._createClusterRenderer(z):this._getDefaultClusterRenderer()},_getDefaultClusterRenderer:function(){var z=this._createContinuousCountRenderer();this._addSizeByCountVariable(z);return{renderer:z,statisticInfos:[]}},_createContinuousCountRenderer:function(z){var C=new d(null,"cluster_count");C.addBreak({minValue:-v,maxValue:v,symbol:z?new z.constructor(z.toJson()):new u(y.clone(this.defaults.markerSymbol))});
return C},_createClusterRenderer:function(z){if(!this._isSupportedRenderer(z))return this._getDefaultClusterRenderer();var C=[];if(this._isSimpleRenderer(z))var E=this._createContinuousCountRenderer(z.symbol);else{E=new z.constructor(z.toJson());var G=this._getRendererAttributeInfo(z);if(this._isCBRenderer(E)){var H=B.getClusterField(G,"avg");C.push(this._getStatInfo(G,"avg"));E.normalizationType=null;E.normalizationField=null;E.normalizationTotal=null}else this._isUVRenderer(E)&&(H=B.getClusterField(G,
"type"),C.push(this._getStatInfo(G,"type")));E.attributeField=H;E.setValueExpression(null);E.valueExpressionTitle=null;E.setVisualVariables(null);this._setRendererTitle(E,z)}z=this._getSupportedVariables(z);G=this._createClusterVariables(z.allVars,C);E.setVisualVariables(G);z.sizeVars.length||this._isCBSizeRenderer(E)||this._addSizeByCountVariable(E);return{renderer:E,statisticInfos:C}},_isSupportedRenderer:function(z){if(this._isSimpleRenderer(z))return!0;if(this._isCBRenderer(z)){var C=z.normalizationType;
return"function"===typeof z.attributeField||C&&"field"!==C?!1:!0}return this._isUVRenderer(z)?"function"===typeof z.attributeField||z.attributeField2?!1:!0:!1},_isSimpleRenderer:function(z){return-1<z.declaredClass.toLowerCase().indexOf("simplerenderer")},_isCBRenderer:function(z){return-1<z.declaredClass.toLowerCase().indexOf("classbreaksrenderer")},_isUVRenderer:function(z){return-1<z.declaredClass.toLowerCase().indexOf("uniquevaluerenderer")},_isCBSizeRenderer:function(z){var C=z.infos;if(!this._isCBRenderer(z)||
!C||2>C.length)return!1;var E=Infinity,G=-Infinity;r.forEach(C,function(H){if(H=H.symbol){var K=0;switch(H.type){case "simplemarkersymbol":K=H.size;break;case "picturemarkersymbol":K=(H.width+H.height)/2}E=Math.min(E,K);G=Math.max(G,K)}});return Infinity!==E&&-Infinity!==G&&E!==G},_getRendererAttributeInfo:function(z){var C=z.attributeField,E=C?this.layer.getField(C):null;return{field:C,attributeType:E&&"esriFieldTypeDate"===E.type?"date":null,rotationType:null,valueExpression:z.valueExpression,valueExpressionTitle:z.valueExpressionTitle,
normalizationField:z.normalizationField}},_setRendererTitle:function(z,C){z.legendOptions=y.clone(C.legendOptions);z.legendOptions&&z.legendOptions.title||(z.legendOptions=z.legendOptions||{},z.legendOptions.title=c.getRendererTitle(C,this.layer))},_getSupportedVariables:function(z){var C=z.getVisualVariablesForType("colorInfo",!1)||[],E=z.getVisualVariablesForType("sizeInfo",!1)||[],G=z.getVisualVariablesForType("opacityInfo",!1)||[];z=z.getVisualVariablesForType("rotationInfo",!1)||[];C=r.filter(C,
this._variableFilter);E=r.filter(E,this._variableFilter);G=r.filter(G,this._variableFilter);z=r.filter(z,this._variableFilter);return{sizeVars:E,allVars:C.concat(E).concat(G).concat(z)}},_variableFilter:function(z){return"function"!==typeof z.field&&!n.viewScaleRE.test(z.valueExpression)},_createClusterVariables:function(z,C){return r.map(z,function(E){return this._createVarForAvg(E,C)},this)},_createVarForAvg:function(z,C){var E=y.clone(z),G=this._getVariableAttributeInfo(z);E.field=B.getClusterField(G,
"avg");E.normalizationField=null;E.valueExpression=null;E.valueExpressionTitle=null;G=this._getStatInfo(G,"avg");this._addStatInfo(C,G);this._setVariableTitle(E,z);return E},_getVariableAttributeInfo:function(z){var C="rotationInfo"===z.type,E=C?"angle":null;C=C?z.rotationType:null;var G=z.legendOptions&&z.legendOptions.title,H=z.field,K=H?this.layer.getField(H):null;K&&"esriFieldTypeDate"===K.type&&(E="date");return{field:H,attributeType:E,rotationType:C,valueExpression:z.valueExpression,valueExpressionTitle:z.valueExpressionTitle||
z.valueExpression&&G,normalizationField:z.normalizationField}},_setVariableTitle:function(z,C){z.legendOptions&&z.legendOptions.title||(z.legendOptions=z.legendOptions||{},z.legendOptions.title=c.getVisualVariableTitle(C,this.layer))},_getStatInfo:function(z,C){return{statisticHash:B.getStatisticHash(z,C),attributeInfo:z,statisticType:C}},_addStatInfo:function(z,C){var E=this._findStatInfo(z,C);E?E.attributeInfo.valueExpressionTitle||(E.attributeInfo.valueExpressionTitle=C.attributeInfo.valueExpressionTitle):
z.push(C)},_findStatInfo:function(z,C){var E;r.some(z,function(G){G.statisticHash===C.statisticHash&&(E=G);return!!E});return E},_compareStatInfos:function(z,C){var E=r.filter(z,function(H){return!this._findStatInfo(C,H)},this),G=r.filter(C,function(H){return!this._findStatInfo(z,H)},this);return G.length||E.length?{added:G,removed:E}:null},_addSizeByCountVariable:function(z){var C=this._createSizeByCountVariable();C&&this._addVariable(z,C)},_getSizeByCountVariable:function(z){z=z.getVisualVariablesForType("sizeInfo",
!1)||[];return r.filter(z,function(C){return"cluster_count"===C.field})[0]},_updateSizeByCountVariable:function(){var z=this._renderer,C=this._getSizeByCountVariable(z);if(C){var E=this._createSizeByCountVariable();E&&this._replaceVariable(z,C,E)}},_createSizeByCountVariable:function(){var z=this._clusterGenerator;if(z){var C=z.getCurrentLodStats();if(C){var E=z.getNumFeatures();z=z.clusters;var G=C.min,H=C.max;1===C.count&&G===E||1===z.length&&z[0].count===E?(G=1,H=E):G&&G===H&&(H=2*G);E={type:"sizeInfo",
field:"cluster_count",valueUnit:"unknown",minSize:12,maxSize:50,minDataValue:G,maxDataValue:H,legendOptions:{title:q}}}}return E},_addVariable:function(z,C){var E=z.visualVariables||[];E.push(C);z.setVisualVariables(E)},_replaceVariable:function(z,C,E){var G=z.visualVariables;C=r.indexOf(G,C);-1<C&&G.splice(C,1);G.push(E);z.setVisualVariables(G)},_getFields:function(z){var C=[new x({name:"cluster_count",type:"esriFieldTypeInteger"})];r.forEach(z,function(E){var G=E.statisticType;E=E.attributeInfo;
var H;"avg"===G?H="date"===E.attributeType?"esriFieldTypeDate":"esriFieldTypeDouble":"type"===G&&(H=E.field?this.layer.getField(E.field).type:"esriFieldTypeString");C.push(new x({name:B.getClusterField(E,G),type:H}))},this);return C},_createInfoTemplate:function(){var z=this._statisticInfos,C=this._renderer,E=[{fieldName:"cluster_count",label:q,visible:!0,format:{digitSeparator:!0,places:0}}],G=[],H=[h.substitute({count:"{cluster_count}"},w.countSummary)],K=this._isUVRenderer(C)?C.infos:[];r.forEach(z,
function(I){var J=I.statisticType,Q=I.attributeInfo,V=B.getClusterField(Q,J),O=this._getFieldLabel(I);if("avg"===J){var S={fieldName:V,label:O,visible:!0,format:"date"===Q.attributeType?{dateFormat:"shortDateShortTime"}:{digitSeparator:!0,places:1}};var L=this._getFieldSummary(I,V)}else"type"===J&&(L="expression/"+V,S={fieldName:L,visible:!0},G.push({name:V,title:O,returnType:"string",expression:this._getExpression(K,V)}),L=this._getFieldSummary(I,L));S&&E.push(S);L&&H.push(L)},this);return new f({fieldInfos:E,
expressionInfos:G,description:H.join("\x3cbr/\x3e\x3cbr/\x3e")})},_updateInfoTemplate:function(z){var C=z.toJson(),E=this._isUVRenderer(this._renderer)?this._renderer.infos:[];r.forEach(this._statisticInfos,function(G){var H=G.statisticType;G=B.getClusterField(G.attributeInfo,H);"type"===H&&(H=this._findExpressionInfo(G,C))&&(H.expression=this._getExpression(E,G))},this);return new f(C)},_findExpressionInfo:function(z,C){var E;r.some(C.expressionInfos,function(G){G.name===z&&(E=G);return!!E});return E},
_escapeDoubleQuotes:function(z){return z?z.replace(/"/g,'\\"'):""},_getExpression:function(z,C){return["var uvInfos \x3d ["+this._getObjects(z).join(", ")+"];",'var predominantType \x3d Text($feature["'+C+'"]);','var label \x3d "'+this._escapeDoubleQuotes(w.predominantNoneValue)+'";',"for (var i \x3d 0; i \x3c Count(uvInfos); i++) {\nif (uvInfos[i].value \x3d\x3d predominantType) {\nlabel \x3d uvInfos[i].label;\nbreak;\n}\n}\nreturn label;"].join("\n")},_getObjects:function(z){return r.map(z,function(C){return'{"value": "'+
String(C.value)+'","label": "'+this._escapeDoubleQuotes(String(C.label))+'"}'},this)},_getFieldLabel:function(z){var C=z.statisticType,E=z.attributeInfo,G=E.field;z=E.normalizationField;var H="";if("avg"===C)var K=z?w.avgNormFieldLabel:w.avgFieldLabel;else"type"===C&&(K=w.predominantFieldLabel);K&&(C=E.valueExpression?E.valueExpressionTitle:this.layer.getFieldLabel(G),z=z&&this.layer.getFieldLabel(z),H=h.substitute({fieldLabel:C||"",normFieldLabel:z||""},K));return H},_getFieldSummary:function(z,
C){var E=z.statisticType,G=z.attributeInfo,H=G.field;z=G.normalizationField;var K="";if("avg"===E)var I=z?w.avgNormFieldSummary:w.avgFieldSummary;else"type"===E&&(I=w.predominantFieldSummary);I&&(E=G.valueExpression?G.valueExpressionTitle:this.layer.getFieldLabel(H),z=z&&this.layer.getFieldLabel(z),K=h.substitute({fieldLabel:E||"",normFieldLabel:z||"",fieldValue:"{"+C+"}"},I));return K},_removeFromPopup:function(z){var C=this._map.infoWindow,E=C.features;if(E&&E.length){var G=r.filter(E,function(H){return H.getLayer()!==
z});G.length<E.length&&(G.length?C.setFeatures(G):(C.clearFeatures(),C.hide()))}},_resetClusterNav:function(){this._resetClusterNavPartial();this._popupClusterGraphic=null},_resetClusterNavPartial:function(){this._map.infoWindow.removeActions(this._popupActions);this._hideSingleGraphic(this._popupSingleGraphic);this._popupSingleGraphic=null},_addClusterBoundary:function(z,C){(C=C.clusterFillSymbol)&&(C=new C.constructor(C.toJson()));z=new g(z,C);this._map.graphics.add(z);this._clusterBoundary=z},
_removeClusterBoundary:function(){this._map.graphics.remove(this._clusterBoundary);this._clusterBoundary=null},_createBrowseFeaturesAction:function(){return this._map.infoWindow.addActions([{title:D.NLS_browseFeatures,className:"browseFeatures",callback:y.hitch(this,function(z){z.preventDefault();z=this._map.infoWindow;var C=z.getSelectedFeature(),E=C.getChildGraphics(),G=z.getCurrentAnchor();z.setFeatures(E,{anchor:G});if(E=l.graphicsExtent(E))this._addClusterBoundary(E,z),z.show(this._getPopupLocation(E,
G));this._popupClusterGraphic=C})}])[0]},_getPopupLocation:function(z,C){var E=z.getCenter();C=C.toLowerCase();-1<C.indexOf("top")?E.update(E.x,z.ymax):-1<C.indexOf("bottom")?E.update(E.x,z.ymin):-1<C.indexOf("left")?E.update(z.xmin,E.y):E.update(z.xmax,E.y);return E},_createViewSummaryAction:function(){return this._map.infoWindow.addActions([{title:D.NLS_viewSummary,className:"viewSummary",callback:y.hitch(this,function(z){z.preventDefault();z=this._popupClusterGraphic;var C=this._map.infoWindow;
C.setFeatures([z]);C.show(z.geometry);this._popupClusterGraphic=null})}])[0]},_initClusterUpdates:function(){this._updateSizeVariable();this._updateClusterGraphics();this._eventHandles.push(this._clusterGenerator.on("update-end",y.hitch(this,function(z){(z.mapLevelChange||z.indexChange)&&this._updateSizeVariable();this._updateClusterGraphics()})),this._clusterGenerator.on("index-complete",y.hitch(this,function(){this._updateSizeVariable()})))},_updateClusterGraphics:function(){this._hideSingleGraphics();
var z=[],C=[];r.forEach(this._clusterGenerator.clusters,function(E){var G=new g(E.centroid);G.setAggregationSourceLayer(this.layer);G.setAggregationInfo(E);this._applyClusterAttributes(G,E);1===E.count?(E=this._getSingleGraphic(G),C.push(E)):z.push(G)},this);this._showSingleGraphics(C);this._addGraphics(z)},_addGraphics:function(z){var C=this.container;C.clear();r.forEach(z,function(E){C.add(E)})},_getSingleGraphic:function(z){var C=this._clusterGenerator.getCell(z.getAggregationInfo().primary).features[0],
E=this.layer.renderer;E=E&&E.getSymbol(C);var G=this._getSizeByCountVariable(this._renderer);E&&G&&(z=G?this._renderer.getSize(z,{sizeInfo:G,shape:E.style,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null,C.setSize(z));return C},_showSingleGraphics:function(z){r.forEach(z,this._showSingleGraphic);this._singleGraphics=z},_hideSingleGraphics:function(){r.forEach(this._singleGraphics,function(z){z.setSize(null);this._hideSingleGraphic(z)},this);this._singleGraphics=null},
_clearSingleGraphics:function(){r.forEach(this._singleGraphics,function(z){z.setSize(null)});this._singleGraphics=null},_showSingleGraphic:function(z){z&&z._resume()},_hideSingleGraphic:function(z){z&&z._suspend()},_updateSizeVariable:function(){this.isClusteringEnabled()&&(this._updateSizeByCountVariable(),this.emit("renderer-change"))},_applyClusterAttributes:function(z,C){z.setAttributes(C.attributes)},_createLayerEventListeners:function(){var z=this.layer;this._eventHandles.push(z.on("visibility-change",
y.hitch(this,function(C){this.container.setVisibility(C.visible)})),z.on("scale-range-change",y.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)})),z.on("renderer-change",y.hitch(this,function(){this._applyRenderer()})),z.on("info-template-change",y.hitch(this,function(){this._applyInfoTemplate()})))},_createMapEventListeners:function(){this._eventHandles.push(this._map.on("zoom-start",y.hitch(this,function(){this._removeClusterBoundary();this._removeFromPopup(this.container);
this._removeFromPopup(this.layer);this._resetClusterNav();this.container.clear();this._hideSingleGraphics()})))},_createPopupEventListeners:function(){var z=this._map.infoWindow;this._eventHandles.push(z.on("selection-change",y.hitch(this,function(){this._resetClusterNavPartial();var C=this._map.infoWindow.getSelectedFeature(),E=C&&C.getLayer();if(E){if(E===this.container){this._removeClusterBoundary();var G=this._createBrowseFeaturesAction()}else E===this.layer&&C._isSuspended()?(G=this._createViewSummaryAction(),
this._popupSingleGraphic=C,this._showSingleGraphic(this._popupSingleGraphic)):this._removeClusterBoundary();this._popupActions=G?[G]:null}})),z.on("clear-features",y.hitch(this,function(C){this._resetClusterNav();C.isIntermediate||this._removeClusterBoundary()})),z.on("hide",y.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._suspend();this._clusterBoundary&&this._clusterBoundary.hide()})),z.on("show",y.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._resume();
this._clusterBoundary&&this._clusterBoundary.show()})))},_destroyEventListeners:function(){r.forEach(this._eventHandles,function(z){z.remove()})}});y.setObject("layers.clustering.ClusterManager",b,k);return b})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(b,y,r,a,k,e,g,h){b=b([e,g],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,
constructor:function(m,l){y.mixin(this,l);this.initialize(m,l)},getTitle:function(m){var l;this.info&&(l=this.titleHasRelatedFields||this.titleHasAsyncExpressions?"":this._getPopupValues(m,this._fetchAttributes(m,null,this.getExpressionFieldsInTitle()),!0).title);return l||""},getContent:function(m){return this.info?(new h({template:this,graphic:m,chartTheme:this.chartTheme},a.create("div"))).domNode:""}});y.setObject("dijit.PopupTemplate",b,k);return b})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D){b=b(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",initialize:function(q,v){if(q){y.mixin(this,v);this.info=q;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var z=this._fieldLabels={},C=this._fieldsMap={};this.info.fieldInfos&&
r.forEach(this.info.fieldInfos,function(E){var G=E.fieldName.toLowerCase(),H=this._isExpressionField(G)?this.getExpressionInfo(G):null;z[G]=H?H.title:E.label;C[G]=E},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions();this.contentHasAsyncExpressions=this._contentHasAyncExpressions()}},toJson:function(){return a.fromJson(a.toJson(this.info))},getTitle:function(){},getContent:function(){},
getFieldInfo:function(q){var v;r.some(this.info&&this.info.fieldInfos,function(z){z.fieldName===q&&(v=z);return!!v});return v},getExpressionInfo:function(q){if(q=this._getExprField(q)){q=q.toLowerCase();var v;r.some(this.info.expressionInfos,function(z){z.name.toLowerCase()===q&&(v=z);return!!v});return v}},getExpressionFieldsInTitle:function(){return this._getExprFieldsFromTemplatedString(this.info.title)},getExpressionFieldsInContent:function(){var q=this._collectExprFieldsFromTemplatedString(this.info.description,
[]);this.info.description||r.forEach(this.info.fieldInfos,function(v){v.visible&&this._collectExprField(v.fieldName,q)},this);r.forEach(this.info.mediaInfos,function(v){this._collectExprFieldsFromTemplatedString(v.title,q);this._collectExprFieldsFromTemplatedString(v.caption,q);if(v=v.value)this._collectExprFieldsFromTemplatedString(v.linkURL,q),this._collectExprFieldsFromTemplatedString(v.sourceURL,q),r.forEach(v.fields,function(z){this._collectExprField(z,q)},this),this._collectExprField(v.normalizeField,
q),this._collectExprField(v.tooltipField,q)},this);return q},getRequiredExpressionFields:function(){return this.getExpressionFieldsInTitle().concat(this.getExpressionFieldsInContent())},hasGeometryOperations:function(){return r.some(this._getArcadeExpressions(),function(q){return q.hasGeometryOperations()})},hasAsyncExpressions:function(){return r.some(this._getArcadeExpressions(),function(q){return q.async})},initializeArcadeEngine:function(){return F.initialize(this._getArcadeExpressions())},getComponents:function(q,
v){var z=this.info,C={initArcadeEngine:this.initializeArcadeEngine()};z.fieldInfos&&(z=r.filter(z.fieldInfos,function(E){return-1!==E.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<z.length&&(C.relatedInfo=this._getRelatedRecords({graphic:q,fieldsInfo:z}));this._needFullResolutionFeature(q)&&(C.fullResolutionFeature=this._getFullResolutionFeature(q));return u(C).then(y.hitch(this,function(E){E=E.fullResolutionFeature;var G=v&&v.evaluateAllExpressions,H=G?null:this.getRequiredExpressionFields();
E=(G?this.hasAsyncExpressions():this._hasAsyncExpressions(H))?this._fetchAttributesAsync(q,E,H):this._fetchAttributes(q,E,H);return u([E]).then(y.hitch(this,function(K){return this._getPopupValues(q,K[0])}))}))},getAttachments:function(q){var v=q.getSourceLayer();q=q.attributes;if(this.info.showAttachments&&v&&v.hasAttachments&&v.objectIdField&&(q=q&&q[v.objectIdField]))return v.queryAttachmentInfos(q)},_needFullResolutionFeature:function(q){return(q=q.getSourceLayer())?"function"===typeof q.getMaxAllowableOffset&&
0<q.getMaxAllowableOffset()&&this.hasGeometryOperations():!1},_getFullResolutionFeature:function(q){var v=q.getSourceLayer(),z=v.objectIdField;q=(q=q.attributes)&&z&&q[z];if(null==q)return null;var C=new t;C.where=z+"\x3d"+q;C.maxAllowableOffset=0;C.outFields=[z];v._enableCacheHint(C);return v.queryFeatures(C).then(function(E){return E.features&&E.features[0]})},_isExpressionField:function(q){return this._reExprField.test(q)},_getExprField:function(q){return this._isExpressionField(q)?q.replace(this._reExprField,
""):null},_collectExprField:function(q,v){(q=this._getExprField(q))&&v.push(q);return v},_collectExprFieldsFromTemplatedString:function(q,v){q=this._getExprFieldsFromTemplatedString(q);q.length&&Array.prototype.push.apply(v,q);return v},_getExprFieldsFromTemplatedString:function(q){q=q?q.match(this._reExprFieldPattern):null;return r.map(q,function(v){return v.replace(this._reExprFieldPattern,"$1")},this)},_titleHasAsyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInTitle())},
_contentHasAyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInContent())},_hasAsyncExpressions:function(q){return r.some(q,function(v){v=this._exprCache[v];return!(!v||!v.async)},this)},_compileExpressions:function(q){var v={};r.forEach(q,function(z){var C=z.returnType&&z.returnType.toLowerCase();v[z.name]=new n({expression:z.expression,returnType:"number"===C?"number":"string",profile:F})});return v},_getArcadeExpressions:function(){var q=[],v;for(v in this._exprCache)q.push(this._exprCache[v]);
return q},_fetchAttributesAsync:function(q,v,z){var C=this._fetchAttributes(q,v,z);q={};for(var E in C)(v=C[E])&&v.then&&(q[E]=v);return u(q).then(y.hitch(this,function(G){for(var H in G){var K=G[H];C[H]=K instanceof Error?null:this._processArcadeResult(K)}return C}))},_processArcadeResult:function(q){"string"===typeof q&&(q=l.encode(q));return q},_fetchAttributes:function(q,v,z){var C=y.clone(q.attributes)||{},E=v&&v.geometry,G=this._exprPrefix,H=this._exprCache;z=z||r.map(this.info.expressionInfos,
function(K){return K.name});r.forEach(z,function(K){var I=G+K;K=(K=H[K])?q.evaluateExpression(K,this._getEvalOptions(K,q,E)):null;C[I]=this._processArcadeResult(K)},this);return C},_getEvalOptions:function(q,v,z){var C=q.hasGeometryOperations(),E=v.getSourceLayer(),G=E&&(E.getMap()||E.parentLayer&&E.parentLayer.getMap());q=F.getEvalOptions({expression:q,feature:v,layer:E,map:G,spatialReference:G&&G.spatialReference});v=q.context.vars.$feature;C=!(!C||!z);v&&C&&(v._geometry=z);q.skipCache=C;return q},
_getPopupValues:function(q,v,z){v=v||this._fetchAttributes(q);var C=this.info,E=q.getSourceLayer(),G=y.clone(v),H="",K="",I,J,Q=E&&E._getDateOpts&&E._getDateOpts().properties;Q=Q&&Q.slice(0);var V={dateFormat:{properties:Q,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)},format:null};if(this._relatedInfo)for(L in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(L)){var O=this._relatedInfo[L],S=this._relatedLayersInfo[L];O&&(r.forEach(O.relatedFeatures,function(Z){for(J in Z.attributes)if(Z.attributes.hasOwnProperty(J)&&
"esriRelCardinalityOneToOne"===S.relation.cardinality){var N=this._toRelatedFieldName([S.relation.id,J]);v[N]=G[N]=Z.attributes[J]}},this),r.forEach(O.relatedStatsFeatures,function(Z){for(J in Z.attributes)if(Z.attributes.hasOwnProperty(J)){var N=this._toRelatedFieldName([S.relation.id,J]);v[N]=G[N]=Z.attributes[J]}},this))}for(I in G){var L=this._fieldsMap[I.toLowerCase()];O=this._getLayerFieldInfo(E,I);L&&O&&(L.fieldName=O.name);G[I]=this._formatValue(G[I],I,V);Q&&L&&L.format&&L.format.dateFormat&&
(L=r.indexOf(Q,I),-1<L&&Q.splice(L,1))}if(E)for(I in Q=E.typeIdField,v)if(v.hasOwnProperty(I)&&-1===I.indexOf(this._relatedFieldPrefix)){var Y=v[I];f.isDefined(Y)&&(L=this._getDomainName(E,q,I,Y),f.isDefined(L)?G[I]=L:I===Q&&(L=this._getTypeName(E,q,Y),f.isDefined(L)&&(G[I]=L)))}C.title&&(H=this._processFieldsInLinks(this._fixTokens(C.title,E),v),H=y.trim(this._removeEmptyHref(f.substitute(G,H,V)||"")));if(z)return{title:H};C.description&&(K=this._processFieldsInLinks(this._fixTokens(C.description,
E),v),K=y.trim(this._removeEmptyHref(f.substitute(G,K,V)||"")));if(C.fieldInfos){var ca=[];r.forEach(C.fieldInfos,function(Z){(I=Z.fieldName)&&Z.visible&&ca.push([this._fieldLabels[I.toLowerCase()]||I,f.substitute(G,"${"+I+"}",V)||""])},this)}var U;if(C.mediaInfos){var X=[];r.forEach(C.mediaInfos,function(Z){U=0;Y=Z.value;switch(Z.type){case "image":var N=Y.sourceURL;N=N&&y.trim(this._removeEmptyHref(f.substitute(v,this._fixTokens(N,E))));U=!!N;break;case "piechart":case "linechart":case "columnchart":case "barchart":N=
Y.normalizeField;Y.fields=r.map(Y.fields,function(Ba){return(aa=this._getLayerFieldInfo(E,Ba))?aa.name:Ba},this);if(N){var aa=this._getLayerFieldInfo(E,N);Y.normalizeField=aa?aa.name:N}U=r.some(Y.fields,function(Ba){return f.isDefined(v[Ba])||-1!==Ba.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(U){Z=y.clone(Z);Y=Z.value;N=Z.title?this._processFieldsInLinks(this._fixTokens(Z.title,E),v):"";var ka=Z.caption?this._processFieldsInLinks(this._fixTokens(Z.caption,
E),v):"";Z.title=N?y.trim(this._removeEmptyHref(f.substitute(G,N,V)||"")):"";Z.caption=ka?y.trim(this._removeEmptyHref(f.substitute(G,ka,V)||"")):"";if("image"===Z.type)Y.sourceURL=f.substitute(v,this._fixTokens(Y.sourceURL,E)),Y.linkURL&&(Y.linkURL=y.trim(f.substitute(v,this._fixTokens(Y.linkURL,E))||""));else{var pa,ta;r.forEach(Y.fields,function(Ba,Da){if(-1!==Ba.indexOf(this._relatedFieldPrefix))ta=this._getRelatedChartInfos(Ba,Y,v,V),ta instanceof Array?Y.fields=ta:Y.fields[Da]=ta;else{var oa=
v[Ba];oa=void 0===oa?null:oa;pa=v[Y.normalizeField]||0;oa&&pa&&(oa/=pa);Y.fields[Da]={y:oa,tooltip:(this._fieldLabels[Ba.toLowerCase()]||Ba)+":\x3cbr/\x3e"+this._formatValue(oa,Ba,V,!!pa)}}},this)}X.push(Z)}},this)}return{title:H,description:K,hasDescription:!!C.description,fields:ca&&ca.length?ca:null,mediaInfos:X&&X.length?X:null,formatted:G,editSummary:!1!==C.showLastEditInfo&&E&&E.getEditSummary?E.getEditSummary(q):""}},_getRelatedChartInfos:function(q,v,z,C){var E,G;var H=[];var K=this._fromRelatedFieldName(q);
var I=K[0];var J=this._relatedInfo[I];I=this._relatedLayersInfo[I];J&&r.forEach(J.relatedFeatures,function(Q){Q=Q.attributes;var V;for(V in Q)if(Q.hasOwnProperty(V)&&V===K[1]){var O={};G=Q[V];v.normalizeField&&(E=-1!==v.normalizeField.indexOf(this._relatedFieldPrefix)?Q[this._fromRelatedFieldName(v.normalizeField)[1]]:z[v.normalizeField]);G&&E&&(G/=E);if(v.tooltipField)if(-1!==v.tooltipField.indexOf(this._relatedFieldPrefix)){var S=this._fromRelatedFieldName(v.tooltipField)[1],L=f.isDefined(Q[S])?
this._formatValue(Q[S],v.tooltipField,C,!!E):S;O.tooltip=L+":\x3cbr/\x3e"+this._formatValue(G,S,C,!!E)}else O.tooltip=(this._fieldLabels[q.toLowerCase()]||q)+":\x3cbr/\x3e"+this._formatValue(G,v.tooltipField,C,!!E);else O.tooltip=G;O.y=G;H.push(O)}},this);return"esriRelCardinalityOneToMany"===I.relation.cardinality||"esriRelCardinalityManyToMany"===I.relation.cardinality?H:H[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",longMonthDayYearShortTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longMonthDayYearShortTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longMonthDayYearLongTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
longMonthDayYearLongTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",dayShortMonthYearShortTime:"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')",dayShortMonthYearShortTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",dayShortMonthYearLongTime:"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",dayShortMonthYearLongTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')",
longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",longDateShortTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longDateShortTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longDateLongTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longDateLongTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",
shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_dateFormatsJson:{shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},
shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",
timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",
timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",
timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},_reHref:/href\s*=\s*(")([^"]+)"/ig,_reHrefApos:/href\s*=\s*(')([^']+)'/ig,_fixTokens:function(q,v){var z=this;return q.replace(/(\{([^\{\r\n]+)\})/g,function(C,E,G){C=z._getLayerFieldInfo(v,G);return"$"+(C?"{"+
C.name+"}":E)})},_encodeAttributes:function(q,v){q=y.clone(q)||{};var z,C;for(z in q)(C=q[z])&&"string"===typeof C&&(C=v?C:encodeURIComponent(C),C=C.replace(/'/g,"\x26apos;"),q[z]=C);return q},_processFieldsInLinks:function(q,v){var z=this._encodeAttributes(v),C=this._encodeAttributes(v,!0);v=y.hitch(this,this._addValuesToHref,v,z,C);q&&(q=q.replace(this._reHref,v).replace(this._reHrefApos,v));return q},_addValuesToHref:function(q,v,z,C,E,G){G=G&&y.trim(G);return C=f.substitute(G&&0===G.indexOf("${")?
"'"===E?z:q:v,C)},_getLayerFieldInfo:function(q,v){return q&&q.getField?q.getField(v):null},_formatValue:function(q,v,z,C){var E=this._fieldsMap[v.toLowerCase()],G=E&&E.format;v=-1!==r.indexOf(z.dateFormat.properties,v);var H="number"===typeof q&&!v&&(!G||!G.dateFormat);if(!f.isDefined(q)||!E||!f.isDefined(G))return this._applyFormatting(q,H);E=G.hasOwnProperty("places")||G.hasOwnProperty("digitSeparator");var K=G.hasOwnProperty("digitSeparator")?G.digitSeparator:!0;if(E&&!v)var I={formatType:"NumberFormat",
places:f.isDefined(G.places)&&(!C||0<G.places)?Number(G.places):Infinity};else if(G.dateFormat)I=y.mixin({formatType:"DateFormat",utcOffset:this.utcOffset},this._dateFormatsJson[G.dateFormat]||this._dateFormatsJson.shortDateShortTime);else return this._applyFormatting(q,H);var J=this._applyFormatFunctions(q,I,z);E&&-1<q.constructor.toString().indexOf("Array")&&(J="",r.forEach(q,y.hitch(this,function(Q,V){V&&(J+=" ");J+=this._applyFormatFunctions(Q,I,z)})));E&&!K&&D.group&&(J=J.replace(new RegExp("\\"+
D.group,"g"),""));v&&(J='\x3cspan class\x3d"esriDateValue"\x3e'+J+"\x3c/span\x3e");return this._applyFormatting(J,H)},_applyFormatFunctions:function(q,v,z){v&&z&&(z.format={myKey:v});q=f.substitute({myKey:q},"${myKey}",z)||"";v&&z&&(z.format=null);return q},_applyFormatting:function(q,v){return v?this._forceLTR(q):this._applyPreWrap(q)},_forceLTR:function(q){var v=h("ie");return v&&10>=v?q:"\x3cspan class\x3d'esriNumericValue'\x3e"+q+"\x3c/span\x3e"},_applyPreWrap:function(q){return"string"===typeof q?
q.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):q},_insertOffset:function(q){q&&(q=f.isDefined(this.utcOffset)?q.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):q);return q},_getDomainName:function(q,v,z,C){return(q=q.getDomain&&q.getDomain(z,{feature:v}))&&q.codedValues?q.getName(C):null},_getTypeName:function(q,v,z){return(q=q.getType&&q.getType(v))&&q.name},_getRelatedRecords:function(q){var v=q.graphic,z;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=
this._getRelatedLayersInfo(q).then(y.hitch(this,function(C){for(z in C)C.hasOwnProperty(z)&&C[z]&&(this._relatedLayersInfo[z].relatedLayerInfo=C[z])})));return this._relatedLayersInfoPromise.then(y.hitch(this,function(){return this._queryRelatedLayers(v)})).then(y.hitch(this,function(C){this._setRelatedRecords(v,C);return C}))},_getRelatedLayersInfo:function(q){var v=q.fieldsInfo,z,C={};var E=q.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});r.forEach(v,function(G){var H;
var K=this._fromRelatedFieldName(G.fieldName);var I=K[0];K=K[1];if(I&&(!this._relatedLayersInfo[I]&&E&&E.relationships&&(r.some(E.relationships,function(Q){if(Q.id==I)return H=Q,!0}),H&&(this._relatedLayersInfo[I]={relation:H,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[I]&&(this._relatedLayersInfo[I].relatedFields.push(K),G.statisticType))){var J=new B;J.statisticType=G.statisticType;J.onStatisticField=K;J.outStatisticFieldName=K;this._relatedLayersInfo[I].outStatistics.push(J)}},
this);for(z in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(z)&&this._relatedLayersInfo[z]&&(q=this._relatedLayersInfo[z].relation,q=E.url.replace(/[0-9]+$/,q.relatedTableId),this._relatedLayersInfo[z].relatedLayerUrl=q,C[z]=d({url:q,content:{f:"json"},callbackParamName:"callback"}));return m(C)},_queryRelatedLayers:function(q){var v={},z;for(z in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(z)&&(v[z]=this._queryRelatedLayer({graphic:q,relatedInfo:this._relatedLayersInfo[z]}));
return m(v)},_queryRelatedLayer:function(q){var v,z;var C=q.graphic;var E=C.getSourceLayer();var G=E.url.match(/[0-9]+$/g)[0];var H=q.relatedInfo;var K=H.relatedLayerInfo;var I=H.relatedLayerUrl;var J=H.relation;q=r.filter(K.relationships,function(Y){return Y.relatedTableId===parseInt(G,10)});1===q.length?v=q[0]:1<q.length&&r.some(q,function(Y){Y.id===J.id&&(v=Y);return!!v});if(v){var Q=new t;r.some(K.fields,function(Y){if(Y.name===v.keyField)return z=-1!==r.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger",
"esriFieldTypeSingle","esriFieldTypeDouble"],Y.type)?"number":"string",!0});if(v.relationshipTableId&&v.keyFieldInRelationshipTable){var V=new g;this._queryRelatedRecords(C,v).then(y.hitch(this,function(Y){var ca;(ca=Y[C.attributes[E.objectIdField]])?(Y=r.map(ca.features,function(U){return U.attributes[K.objectIdField]},this),H.outStatistics&&0<H.outStatistics.length&&K.supportsStatistics&&(S=new t,S.where=this._chunkWhereInClause(K.objectIdField,Y,1E3),S.outFields=Q.outFields,S.outStatistics=H.outStatistics),
S&&(L=new x(I),L.execute(S).then(y.hitch(this,function(U){var X=[];X.push(ca);X.push(U);V.resolve(X)})))):V.resolve()}))}else{var O="string"===z?v.keyField+"\x3d'"+C.attributes[J.keyField]+"'":v.keyField+"\x3d"+C.attributes[J.keyField];Q.where=O;Q.outFields=H.relatedFields;if(H.outStatistics&&0<H.outStatistics.length&&K.supportsStatistics){var S=new t;S.where=Q.where;S.outFields=Q.outFields;S.outStatistics=H.outStatistics}var L=new x(I);O=[];O.push(L.execute(Q));S&&O.push(L.execute(S))}}return O?
m(O):V?V.promise:void 0},_setRelatedRecords:function(q,v){this._relatedInfo=[];for(var z in v)v.hasOwnProperty(z)&&v[z]&&(q=v[z],this._relatedInfo[z]={},this._relatedInfo[z].relatedFeatures=q[0].features,f.isDefined(q[1])&&(this._relatedInfo[z].relatedStatsFeatures=q[1].features))},_handlerErrorResponse:function(q,v){q.reject(v)},_fromRelatedFieldName:function(q){var v=[];-1!==q.indexOf(this._relatedFieldPrefix)&&(q=q.split("/"),v=q.slice(1));return v},_toRelatedFieldName:function(q){var v="";q&&
0<q.length&&(v=this._relatedFieldPrefix+q[0]+"/"+q[1]);return v},_queryRelatedRecords:function(q,v){var z=q.getSourceLayer(),C=new A;C.outFields=["*"];C.relationshipId=v.id;C.objectIds=[q.attributes[z.objectIdField]];return z.queryRelatedFeatures(C)},_removeEmptyHref:function(q){return q.replace(/href=(""|'')/gi,"")},_chunkWhereInClause:function(q,v,z){for(var C=0,E=[];C<v.length;)E.push(q+" IN ("+v.slice(C,z+C)+")"),C+=z;return E.join(" OR ")}});return c.PopupInfo=c.PopupInfoTemplate=b})},"dojox/html/entities":function(){define(["dojo/_base/lang"],
function(b){var y=b.getObject("dojox.html.entities",!0),r=function(k,e){if(e._encCache&&e._encCache.regexp&&e._encCache.mapper&&e.length==e._encCache.length){var g=e._encCache.mapper;var h=e._encCache.regexp}else{g={};h=["["];var m;for(m=0;m<e.length;m++)g[e[m][0]]="\x26"+e[m][1]+";",h.push(e[m][0]);h.push("]");h=new RegExp(h.join(""),"g");e._encCache={mapper:g,regexp:h,length:e.length}}return k=k.replace(h,function(l){return g[l]})},a=function(k,e){if(e._decCache&&e._decCache.regexp&&e._decCache.mapper&&
e.length==e._decCache.length){var g=e._decCache.mapper;var h=e._decCache.regexp}else{g={};h=["("];var m;for(m=0;m<e.length;m++){var l="\x26"+e[m][1]+";";m&&h.push("|");g[l]=e[m][0];h.push(l)}h.push(")");h=new RegExp(h.join(""),"g");e._decCache={mapper:g,regexp:h,length:e.length}}return k=k.replace(h,function(f){return g[f]})};y.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];y.latin=[["\u00a1","iexcl"],["\u00a2","cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4",
"curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],
["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],
["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1","ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],
["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],
["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],
["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],
["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],["\u222b","int"],["\u2234","there4"],["\u223c","sim"],
["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665","hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153",
"oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039","lsaquo"],["\u203a","rsaquo"]];y.encode=function(k,
e){k&&(e?k=r(k,e):(k=r(k,y.html),k=r(k,y.latin)));return k};y.decode=function(k,e){k&&(e?k=a(k,e):(k=a(k,y.html),k=a(k,y.latin)));return k};return y})},"esri/ArcadeExpression":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(b,y,r,a,k,e){b=b(null,{declaredClass:"esri.ArcadeExpression",expression:null,profile:null,returnType:null,async:null,id:null,syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,
_compiled:!1,constructor:function(g){y.mixin(this,g);this.returnType=this.returnType||"string";this.id=k.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var g=this._traits.geometryOperations;void 0===g&&(g=this._traits.geometryOperations=e.hasGeometryOperations(this.syntaxTree));return g},hasFeatureSetOperations:function(){var g=this._traits.featureSetOperations;void 0===g&&(g=this._traits.featureSetOperations=
e.hasFeatureSetOperations(this.syntaxTree));return g},hasVariable:function(g){var h=this._traits.variables;void 0===h[g]&&(h[g]=e.hasVariable(this.syntaxTree,g));return h[g]},hasFunction:function(g){var h=this._traits.functions;void 0===h[g]&&(h[g]=e.hasFunction(this.syntaxTree,g));return h[g]},evaluate:function(g){this._compile();var h=this._attributeCache.compiledFunc;return this.async?e.executeAsyncFunction(h,g):e.executeFunction(h,g)},_setSyntaxTree:function(g){this.syntaxTree=g;this._compiled=
!1;this._traits={variables:{},functions:{}};this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef={valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),dependsOnGeometry:this.hasGeometryOperations(),isJSFunc:!1}},_compile:function(){this._compiled||
(this._attributeCache.compiledFunc=this.profile.compile(this),this._compiled=!0)}});return a.ArcadeExpression=b})},"esri/arcadeProfiles/popupProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(b,y,r,a,k,e,g,h){b=new (b(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map"],async:["$layer","$datastore","$map"]},context:{vars:{$feature:"any",
$layer:"any",$datastore:"any",$map:"any"}}},initialize:function(m){var l=[];h.hasGeometryOperations(m)&&l.push(g.enableGeometryOperations());(h.hasFeatureSetOperations(m)||h.hasVariables(m,this.defaults.globals.featureSet))&&l.push(g.enableFeatureSetOperations());h.isAsync(m)&&l.push(g.enableAsyncOperations());return k(l)},isAsync:function(m){m=[m];return h.hasFeatureSetOperations(m)||h.hasVariables(m,this.defaults.globals.async)},parse:function(m){return g.createSyntaxTree(m.expression)},compile:function(m){var l=
y.clone(this.defaults.context);l.useAsync=m.async;return m.syntaxTree?g.createFunction(m.syntaxTree,l):null},getEvalOptions:function(m){var l=m.expression,f=m.feature,c=m.layer,d=m.map;m=m.spatialReference;f=f&&l.hasVariable("$feature")?e.createFromGraphicLikeObject(f.geometry,f.attributes,c):null;var u;if(c){var n={spatialReference:m};l.hasVariable("$layer")&&(u=c.getMap()?g.createFeatureSetFromLayer(c,n):g.createFeatureSetFromLayerUrl(c.url,n));if(l.hasVariable("$datastore"))var t=(t=h.getServiceUrl(c.url))?
g.createFeatureSetCollectionFromServiceUrl(t,n):null}l=d&&l.hasVariable("$map")?g.createFeatureSetCollectionFromMap(d):null;return{context:{vars:{$feature:f,$layer:u,$datastore:t,$map:l},spatialReference:m}}}}));y.setObject("arcadeProfiles.popupProfile",b,a);return b})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w){var D=0,q=w.widgets.popup,v=w.widgets.templatePicker;y=y([F,n,t],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=a.mixin({},q)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(v.loading);this._contentDfd=this.template.getComponents(this.graphic).then(a.hitch(this,this._handleComponentsSuccess)).otherwise(a.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var z=this._mediaInfos,C=z.length,E=this.domNode,G=this._prevMedia,H=this._nextMedia;if(1<C){var K=0,I=0;k.forEach(z,function(J){"image"===J.type?K++:-1!==J.type.indexOf("chart")&&I++});K&&(l.set(this._imageCount,"innerHTML",K),e.query(".summary .image",
E).removeClass("hidden"));I&&(l.set(this._chartCount,"innerHTML",I),e.query(".summary .chart",E).removeClass("hidden"))}else e.query(".summary",E).addClass("hidden"),f.add(G,"hidden"),f.add(H,"hidden");z=this._mediaPtr;0===z?f.add(G,"hidden"):f.remove(G,"hidden");z===C-1?f.add(H,"hidden"):f.remove(H,"hidden");this._destroyFrame()},_displayMedia:function(){var z=this._mediaInfos[this._mediaPtr],C=z.title,E=z.caption,G=e.query(".mediaSection .hzLine",this.domNode)[0];l.set(this._mediaTitle,"innerHTML",
C);f[C?"remove":"add"](this._mediaTitle,"hidden");l.set(this._mediaCaption,"innerHTML",E);f[E?"remove":"add"](this._mediaCaption,"hidden");f[C&&E?"remove":"add"](G,"hidden");this._rid=null;if("image"===z.type)this._showImage(z);else{var H=this;C=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"];E=z.value.theme||this.chartTheme;a.isString(E)&&(E=E.replace(/\./gi,"/"),-1===E.indexOf("/")&&(E="dojox/charting/themes/"+E));E||(E="./Rainbow");C.push(E);try{var K=this._rid=D++;b(C,function(I,
J,Q){K===H._rid&&(H._rid=null,H._showChart(z.type,z.value,I,J,Q))})}catch(I){}}},_preventNewTab:function(z){return(z=z&&a.trim(z).toLowerCase())&&(0===z.indexOf("mailto:")||0===z.indexOf("tel:"))},_showImage:function(z){f.add(this._mediaFrame,"image");var C=d.get(this._gallery,"height"),E=z.value,G=u.decode(E.linkURL);E=u.decode(E.sourceURL);var H;G&&(H=c.create("a",{href:G,target:this._preventNewTab(G)?"":"_blank"},this._mediaFrame));G=z.refreshInterval?this._addURLParameter(E,"timestamp",Date.now()):
E;c.create("img",{className:"esriPopupMediaImage",src:G},H||this._mediaFrame);var K=e.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=r.connect(K,"onload",this,function(){this._clearImageHandles();this._imageLoaded(K,C);this._initImageRefresh(z)})},_addURLParameter:function(z,C,E){var G=-1===z.indexOf("?")?"?":"\x26";return z+G+C+"\x3d"+E},_initImageRefresh:function(z){if(z.refreshInterval){var C=6E4*z.refreshInterval;this._imageRefreshHandle=setTimeout(a.hitch(this,function(){this._destroyFrame();
this._showImage(z)}),C)}},_clearImageHandles:function(){r.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(z,C,E,G,H){f.remove(this._mediaFrame,"image");E=this._chart=new E(c.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});H&&E.setTheme(H);switch(z){case "piechart":E.addPlot("default",{type:"Pie",labels:!1});E.addSeries("Series A",C.fields);break;case "linechart":E.addPlot("default",
{type:"Markers"});E.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});E.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});k.forEach(C.fields,function(K,I){K.x=I+1});E.addSeries("Series A",C.fields);break;case "columnchart":E.addPlot("default",{type:"Columns",gap:3});E.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});E.addSeries("Series A",C.fields);break;case "barchart":E.addPlot("default",{type:"Bars",gap:3}),E.addAxis("x",{includeZero:!0,fixUpper:"minor",
minorLabels:!1}),E.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),E.addSeries("Series A",C.fields)}this._action=new G(E);E.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);l.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(z,C){var E=z.height;E<C&&d.set(z,"marginTop",Math.round((C-E)/2)+"px")},_attListHandler:function(z,
C){if(z===this._attachmentsDfd){this._attachmentsDfd=null;var E="";C instanceof Error||!C||!C.length||k.forEach(C,function(G){E+="\x3cli\x3e";E+="\x3ca href\x3d'"+B.addProxy(G.url)+"' target\x3d'_blank'\x3e"+(G.name||"[No name]")+"\x3c/a\x3e";E+="\x3c/li\x3e"});l.set(this._attachmentsList,"innerHTML",E||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_createLinkIfURI:function(z,C){var E=B.getURIInfo(z);if(E){var G=z.match(E.pattern);z=G&&G[2];G=u.decode(G[1]);c.create("a",{target:"_blank",href:G,
title:G,innerHTML:A.substitute({appName:E.appName,hierPart:z},E.label)},C)}else l.set(C,"innerHTML",z)},_showStatus:function(z){l.set(this._status,"innerHTML",z);f.remove(this._status,"hidden");e.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){l.set(this._status,"innerHTML","");f.add(this._status,"hidden");e.query(".mainSection",this.domNode).removeClass("hidden")},_handleComponentsSuccess:function(z){if(z){this._hideStatus();var C=this.showTitle?z.title:"",E=z.description,
G=z.fields,H=z.mediaInfos,K=this.domNode,I=this._nls,J=this,Q=this.template,V=this.graphic;this._prevMedia.title=I.NLS_prevMedia;this._nextMedia.title=I.NLS_nextMedia;l.set(this._title,"innerHTML",C);C||f.add(this._title,"hidden");if(!z.hasDescription&&G&&(E="",G=k.map(G,function(S){var L=c.create("tr",{vAlign:"top"});c.create("td",{className:"attrName",innerHTML:u.encode(S[0])},L);var Y=c.create("td",{className:"attrValue"},L);this._createLinkIfURI(S[1],Y);return L},this),G.length)){var O=c.create("table",
{className:"attrTable",cellPadding:"0px",cellSpacing:"0px"});k.forEach(G,function(S){O.appendChild(S)})}O?(this._description.appendChild(O),E=!0):l.set(this._description,"innerHTML",E);E||f.add(this._description,"hidden");e.query("a",this._description).forEach(function(S){J._preventNewTab(S.href)?"_blank"===S.target&&l.remove(S,"target"):l.set(S,"target","_blank")});C&&E?e.query(".mainSection .hzLine",K).removeClass("hidden"):C||E?e.query(".mainSection .hzLine",K).addClass("hidden"):e.query(".mainSection",
K).addClass("hidden");if(C=this._attachmentsDfd=Q.getAttachments(V))C.addBoth(a.hitch(this,this._attListHandler,C)),l.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+I.NLS_searching+"...\x3c/li\x3e"),e.query(".attachmentsSection",K).removeClass("hidden");H&&H.length&&(e.query(".mediaSection",K).removeClass("hidden"),m.setSelectable(this._mediaFrame,!1),this._mediaInfos=H,this._mediaPtr=0,this._updateUI(),this._displayMedia());z.editSummary&&(l.set(this._editSummary,"innerHTML",z.editSummary),H&&
H.length&&f.remove(this._mediaBreak,"hidden"),f.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(q.NLS_noInfo)},_handleComponentsError:function(z){z&&"cancel"===z.dojoType||this._showStatus(q.NLS_noInfo)}});a.setObject("dijit._PopupRenderer",y,x);return y})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),function(b,y,r,a,k,e){return b([e,k],{_onMap:function(g){var h=
this.constructor._onMap;h&&h.FINAL||(delete this.constructor._onMap,h=this.registerConnectEvents(),h.FINAL=!0);g=g.toLowerCase();if(h[g])var m=this[h[g].method];else g=this._onCamelCase(g),this[g]&&(m=g);return m},on:function(g,h){var m=this._onMap(g),l=g.replace(/\-/g,""),f="on"+l in this.domNode;return m||!f?this.inherited(arguments):this.own(a(this.domNode,l,h))[0]},emit:function(g,h,m){var l,f=g.toLowerCase(),c=this.constructor._onMap||this.registerConnectEvents();var d=this[this._onMap(f)];h=
h||{};h.target||(h.target=this);if(d&&c&&c[f]){this._onObj2Arr(function(){l=Array.prototype.slice.call(arguments)},c[f].argKeys)(h);var u=y.mixin({},arguments);u[2]=l;u[0]=c[f].name.replace(/^on/,"")}return this.inherited(u||arguments)}})})},"esri/dijit/Legend/utils":function(){define(["dojo/_base/lang","../../lang","dojo/i18n!../../nls/jsapi"],function(b,y,r){var a=r.widgets.legend;return{getVisualVariableTitle:function(k,e){var g=k.field,h=k.normalizationField,m=!1,l=!1,f=!1;g=b.isFunction(g)?null:
g;h=b.isFunction(h)?null:h;if(k.legendOptions&&k.legendOptions.title)var c=k.legendOptions.title;else if(k.valueExpressionTitle)c=k.valueExpressionTitle;else{if(e.renderer&&e.renderer.authoringInfo&&e.renderer.authoringInfo.visualVariables){var d=e.renderer.authoringInfo.visualVariables;for(k=0;k<d.length;k++){var u=d[k];if("colorInfo"===u.type&&"ratio"===u.style){m=!0;break}else if("colorInfo"===u.type&&"percent"===u.style){l=!0;break}else if("colorInfo"===u.type&&"percentTotal"===u.style){f=!0;
break}}}(m=f&&"showRatioPercentTotal"||l&&"showRatioPercent"||m&&"showRatio"||h&&"showNormField"||g&&"showField"||null)&&(c=y.substitute({field:g&&e.getFieldLabel(g),normField:h&&e.getFieldLabel(h)},"showField"===m?"${field}":a[m]))}return c},getRendererTitle:function(k,e){if(k){if("esri.renderer.ClassBreaksRenderer"===k.declaredClass){var g=k.attributeField;var h=k.normalizationField;var m="percent-of-total"===k.normalizationType}g=b.isFunction(g)?null:g;h=b.isFunction(h)?null:h;if(k.legendOptions&&
k.legendOptions.title)var l=k.legendOptions.title;else k.valueExpressionTitle?l=k.valueExpressionTitle:(k=h&&"showNormField"||(m?"showNormPct":null)||g&&"showField"||null)&&(l=y.substitute({field:g&&e.getFieldLabel(g),normField:h&&e.getFieldLabel(h)},"showField"===k?"${field}":a[k]))}return l}}})},"esri/layers/clustering/GeohashAggregation":function(){define("dojo/has dojo/_base/declare dojo/_base/lang dojo/_base/array ../../kernel ../../Evented ../../geometry/Point ../../geometry/Extent ../../geometry/mathUtils ../../support/expressionUtils ../../core/timerUtils ../support/attributeUtils ./geohashUtils ./statUtils".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u){b=y(e,{loaded:!1,started:!1,map:null,layer:null,lod:null,tolerance:null,clusterMode:null,clusterRadius:null,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0,clusters:null,clustersEnabled:!0,statisticInfos:null,defaults:{lod:1,tolerance:0,clusterMode:"auto",clusterRadius:80,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0},_eventHandles:null,_updateHandle:null,_indexHandle:null,_cellIndex:null,_globalIndex:null,_perfProfile:null,
_indexUpdated:!1,_cellSizeScaleFactor:1.5,_extentScaleFactor:1.25,_maxGeohashLength:12,_minClusterRadius:15,_levelChange:!0,_clusterFieldPrefix:"cluster_",_mapLevelChange:!1,constructor:function(n){this._update=r.hitch(this,this._update);this._indexFeatures=r.hitch(this,this._indexFeatures);this._eventHandles=[];this._globalIndex={numFeatures:null,fullExtent:null,lodStats:null};this._perfProfile={lastIndex:{total:null,numFeatures:0},lastUpdate:{cells:null,clusters:null,total:null}};this.clusters=
[];this.map=n.map;this.layer=n.layer;this.setLod(n.lod);this.setTolerance(n.tolerance);this.setClusterMode(n.clusterMode);this.setClusterRadius(n.clusterRadius);this.setSortEnabled(n.sortEnabled);this.setFilterEnabled(n.filterEnabled);this.setBufferEnabled(n.bufferEnabled);this.setUpdateEnabled(n.updateEnabled);this.setStatisticInfos(n.statisticInfos);this._load();this.loaded?this._startup():this._eventHandles.push(this.on("load",r.hitch(this,this._startup)))},destroy:function(n){this._displayFeatures(!0,
n);a.forEach(this._eventHandles,function(t){t.remove()});f.clearTimeout(this._updateHandle);f.clearTimeout(this._indexHandle);this._cellIndex=this._globalIndex=this._eventHandles=this._updateHandle=this._indexHandle=this.map=this.layer=this.clusters=null},setLod:function(n){var t=this.lod;this.lod=n||this.defaults.lod;t!==this.lod&&this.update()},setTolerance:function(n){var t=this.tolerance;this.tolerance=n||this.defaults.tolerance;t!==this.tolerance&&this.update()},setClusterMode:function(n){var t=
this.clusterMode;this.clusterMode=n||this.defaults.clusterMode;this._evalClusterParams();t!==this.clusterMode&&this.update()},setClusterRadius:function(n){var t=this.clusterRadius;this.clusterRadius=null!=n?n:this.defaults.clusterRadius;this._evalClusterParams();t!==this.clusterRadius&&this.update()},setSortEnabled:function(n){var t=this.sortEnabled;this.sortEnabled=null!=n?!!n:this.defaults.sortEnabled;t!==this.sortEnabled&&this.update()},setFilterEnabled:function(n){var t=this.filterEnabled;this.filterEnabled=
null!=n?!!n:this.defaults.filterEnabled;t!==this.filterEnabled&&this.update()},setBufferEnabled:function(n){var t=this.bufferEnabled;this.bufferEnabled=null!=n?!!n:this.defaults.bufferEnabled;t!==this.bufferEnabled&&this.update()},setUpdateEnabled:function(n){var t=this.updateEnabled;(this.updateEnabled=null!=n?!!n:this.defaults.updateEnabled)&&t!==this.updateEnabled&&(this._mapLevelChange=!0,this.update())},setStatisticInfos:function(n){this.statisticInfos=n||[];this.loaded&&this._applyStatInfos(this.statisticInfos)},
update:function(){this.loaded&&null==this._updateHandle&&(this._updateHandle=f.setTimeout(this._update,f.priority.HIGH))},isUpdateScheduled:function(){return null!=this._updateHandle},index:function(){this.loaded&&null==this._indexHandle&&(this._indexHandle=f.setTimeout(this._indexFeatures,f.priority.HIGH))},getCell:function(n){return this._cellIndex[n.length][n]},getCluster:function(n){var t;a.some(this.clusters,function(x){-1<a.indexOf(x.geohashes,n)&&(t=x);return!!t});return t},getCellsInCluster:function(n){var t=
[];a.forEach(n&&n.geohashes,function(x){(x=this.getCell(x))&&t.push(x)},this);return t},getFeaturesInCluster:function(n){var t=[];n=this.getCellsInCluster(n);a.forEach(n,function(x){Array.prototype.push.apply(t,x.features)});return t},toggleFeatureVisibility:function(n){this.index()},getCurrentLodStats:function(){var n=this._globalIndex.lodStats;return n&&n[this.lod]},getNumFeatures:function(){return this._globalIndex.numFeatures},getFullExtent:function(){var n=this._globalIndex.fullExtent;return n&&
Infinity!==n.xmin?new h(n):null},_load:function(){this._displayFeatures(!1);this._checkLoadStatus();this.map.loaded||this._eventHandles.push(this.map.on("load",r.hitch(this,this._checkLoadStatus)));this.layer.loaded||this._eventHandles.push(this.layer.on("load",r.hitch(this,this._checkLoadStatus)))},_checkLoadStatus:function(){if(this.map.loaded&&this.layer.loaded){if("esriGeometryPoint"!==this.layer.geometryType)var n=Error("GeohashAggregation is supported only for points");else{var t=this.map.spatialReference;
t.isWebMercator()||4326===t.wkid||(n=Error("GeohashAggregation is supported only when map spatial reference is WGS84 or WebMercator"))}n?(this.loadError=n,this.emit("load-error",{error:n})):(this.loaded=!0,this.emit("load"))}},_startup:function(){this._evalUpdateStatus();this.index();this._processExtentChange();this._eventHandles.push(this.layer.on("update-end",r.hitch(this,this.index)),this.layer.on("edits-complete",r.hitch(this,this.index)),this.layer.on("graphics-clear",r.hitch(this,this.index)),
this.layer.on("suspend",r.hitch(this,this._evalUpdateStatus)),this.layer.on("resume",r.hitch(this,this._evalUpdateStatus)),this.map.on("extent-change",r.hitch(this,this._processExtentChange)))},_evalUpdateStatus:function(){this.setUpdateEnabled(!this.layer.suspended)},_processExtentChange:function(n){this._mapLevelChange=!(!n||!n.levelChange);this._evalClusterParams();this.update()},_update:function(){this._updateHandle=null;if(this.updateEnabled){this.emit("update-start");if(this.clustersEnabled){var n=
this.map.geographicExtent;if(n){var t=this._getIntersectingCells(n);n=this._getClusters(t.cells,n);this.clusters=n.clusters;this._applyStatInfosToClusters();t=t.profile;n=n.profile;var x=t.total+n.total;t.total=this._getElapsedTime(t.total);n.total=this._getElapsedTime(n.total);var A=this._perfProfile.lastUpdate={};A.cells=t;A.clusters=n;A.total=this._getElapsedTime(x)}}else this.clusters=[],this._perfProfile.lastUpdate=null;t=this._indexUpdated;this._indexUpdated=!1;n=this._mapLevelChange;this._mapLevelChange=
!1;this.emit("update-end",{levelChange:this._levelChange,mapLevelChange:n,indexChange:t})}},_displayFeatures:function(n,t){var x=this.layer;n=!n;x.suspendGraphics(n);!1!==t&&(n?x.clearNodes():x.redraw())},_indexFeatures:function(){this._indexHandle=null;var n=this._getTime();this._initializeIndexing();var t=0,x=this._globalIndex.fullExtent;a.forEach(this.layer.graphics,function(F){if(F.visible){var w=F.geometry,D=this._getLngLat(w);if(D){var q=w.getCacheValue("_geohash");void 0===q&&(q=d.pointToGeohash(D),
w.setCacheValue("_geohash",q||null))}q&&(this._addGeohashToIndex(q,F,D),t++,this._updateExtent(x,D))}},this);this._applyStatInfosToIndex();this._globalIndex.numFeatures=t;for(var A=this._globalIndex.lodStats,B=1;B<=this._maxGeohashLength;B++)A[B]=this._getLODStats(B,t);this._perfProfile.lastIndex.total=this._getElapsedTime(n,this._getTime());this._perfProfile.lastIndex.numFeatures=t;this._indexUpdated=!0;this.emit("index-complete");this.started||(this.started=!0,this.emit("start"));this.update()},
_initializeIndexing:function(){this._globalIndex={numFeatures:0,fullExtent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},lodStats:{}};for(var n=this._cellIndex=[],t=1;t<=this._maxGeohashLength;t++)n[t]={}},_getLngLat:function(n){if(n){var t=n.getLongitude();n=n.getLatitude();n=null!=t&&null!=n?{x:t,y:n}:null}return n},_addGeohashToIndex:function(n,t,x){for(var A=this._cellIndex,B="",F=0;F<this._maxGeohashLength;F++){B+=n[F];var w=A[B.length],D=w[B];D||(D=w[B]={count:0,centroid:{x:null,
y:null},extent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},features:[],geohash:B,statistics:null});this._updateItem(D,1,x,!0);D.features.push(t)}},_getLODStats:function(n,t){var x=this._cellIndex[n],A=0,B=Infinity,F=-Infinity,w=null,D;for(D in x){var q=x[D];A++;q.count<B&&(B=q.count);q.count>F&&(F=q.count)}0<A&&(w=Number((t/A).toFixed(2)));return{lod:n,count:A,min:Infinity===B?null:B,max:-Infinity===F?null:F,avg:w}},_evalClusterParams:function(){if(this.loaded&&"auto"===this.clusterMode){var n=
this._getClusterParams(this.map.getResolutionInMeters(),this.clusterRadius,this._minClusterRadius);this._levelChange=this.lod!==n.lod;this.lod=n.lod;this.tolerance=n.tolerance}},_getClusterParams:function(n,t,x){t<x&&(t=x);n=Math.ceil(n*t);t=this._getClosestLODRange(n).max;do x=this._getCellSize(t),(x=n>=this._cellSizeScaleFactor*x||1===x)||(t+=1);while(!x);x=n/this._getCellSize(t);return{lod:t,tolerance:n,multiplier:Number(x.toFixed(2))}},_getClosestLODRange:function(n){for(var t,x=this._maxGeohashLength;1<=
x;x--)if(this._getCellSize(x)>=n){t=x;break}null==t&&(t=1);n=t+1;n>this._maxGeohashLength&&(n=this._maxGeohashLength);return{min:t,max:n}},_getCellSize:function(n){n=d.getCellSizeInMeters(n);return Math.ceil(Math.min(n.width,n.height))},_sorter:function(n,t){var x=n.centroid,A=t.centroid;return n.count>t.count?-1:n.count<t.count?1:x.x>A.x?-1:x.x<A.x?1:0},_getIntersectingCells:function(n){var t=this._getTime();this.bufferEnabled&&(n=n.expand(this._extentScaleFactor));var x=d.getIntersecting(n,this.lod,
this.bufferEnabled?this.tolerance:0);n=this._getTime();var A=[],B=this.tolerance,F=this.sortEnabled;a.forEach(x,function(w){(w=this.getCell(w))&&A.push(w)},this);B&&F&&A.sort(this._sorter);x=this._getTime();return{cells:A,profile:{findCells:this._getElapsedTime(t,n),scanAndSortCells:this._getElapsedTime(n,x),total:x-t}}},_getClusters:function(n,t){var x=this._getTime(),A=[],B={},F={findCells:0};a.forEach(n,function(w,D){(w=this._createCluster(w,B,F))&&A.push(w)},this);this._markIntersecting(A,t);
this.filterEnabled&&(A=this._getIntersectingClusters(A));n=this._getTime();return{clusters:A,profile:{findCellsInCluster:this._getElapsedTime(F.findCells),total:n-x}}},_markIntersecting:function(n,t){var x=t.normalize();a.forEach(n,function(A){var B=A.centroid.x,F=A.centroid.y;A.isIntersecting=a.some(x,function(w){return B>=w.xmin&&B<=w.xmax&&F>=w.ymin&&F<=w.ymax})})},_getIntersectingClusters:function(n){return a.filter(n,function(t){return t.isIntersecting})},_createCluster:function(n,t,x){if(!t[n.geohash]){var A=
[{cell:n,distance:0}];if(this.tolerance){var B=this._getTime(),F=d.getNeighborsWithinDistance(n.centroid,this.lod,this.tolerance);x.findCells+=this._getTime()-B;a.forEach(F,function(w){if(w!==n.geohash&&(w=this.getCell(w))){var D=this._calculateDistance(n.centroid,w.centroid);D<=this.tolerance&&A.push({cell:w,distance:D})}},this)}return this._mergeCells(A,t)}},_calculateDistance:function(n,t){return m.getLength(d.geographicToWebMercator(n),d.geographicToWebMercator(t))},_mergeCells:function(n,t){var x=
this._initializeCluster({},n[0].cell.geohash);a.forEach(n,function(A){var B=A.cell,F=B.geohash;A=A.distance;var w=t[F];if(w)if(A<w.distance)this._removeCellFromCluster(F,t);else return;t[F]={cluster:x,distance:A};this._updateItem(x,B.count,B.centroid);x.geohashes.push(F)},this);return x},_removeCellFromCluster:function(n,t){var x=t[n].cluster;delete t[n];n=a.indexOf(x.geohashes,n);-1<n&&x.geohashes.splice(n,1);this._reevaluateCluster(x)},_reevaluateCluster:function(n){var t=n.geohashes;n=this._initializeCluster(n,
n.primary);a.forEach(t,function(x){var A=this.getCell(x);A&&(this._updateItem(n,A.count,A.centroid),n.geohashes.push(x))},this)},_initializeCluster:function(n,t){n.count=0;n.centroid=new g(null,null);n.geohashes=[];n.primary=t;n.statistics=null;return n},_applyStatInfos:function(n){n=this._getValidStatInfos(n);this._applyStatInfosToIndex(n);this._applyStatInfosToClusters(n)},_getValidStatInfos:function(n){var t=[];a.forEach(n,function(x){var A=x.attributeInfo;x=x.statisticType;var B="angle"===A.attributeType;
if(u.isSupportedStatisticType(x)&&(!B||"avg"===x)){var F="arithmetic"===A.rotationType;t.push({attributeCache:c.createAttributeCache(A,"type"===x),identifier:u.getStatisticId(A,x),statFunctions:u.getStatisticFunctions(x),isAngular:B,isDate:"date"===A.attributeType,isArithmetic:F})}});return t},_applyStatInfosToIndex:function(n){n=n||this._getValidStatInfos(this.statisticInfos);var t=this._cellIndex;if(t)for(var x=1;x<=this._maxGeohashLength;x++){var A=t[x],B;for(B in A)this._applyStatInfosToCell(A[B],
n)}},_applyStatInfosToCell:function(n,t){var x=this._initializeStats(n,t);a.forEach(n.features,function(A){this._calcFeatureStats(A,t,x)},this);this._summarizeStats(n,x,t)},_calcFeatureStats:function(n,t,x){n.attributes&&a.forEach(t,function(A){var B=x[A.identifier],F=A.attributeCache;F=F?n._getDataValue(F.attributeInfo,F,l):null;A.statFunctions.updateCellStat(B,F,A)})},_applyStatInfosToClusters:function(n){n=n||this._getValidStatInfos(this.statisticInfos);var t=this._clusterFieldPrefix;a.forEach(this.clusters,
function(x){var A=this._initializeStats(x,n);a.forEach(this.getCellsInCluster(x),function(B){this._calcCellStats(B,n,A)},this);this._summarizeStats(x,A,n,t);x.attributes[t+"id"]=x.primary},this)},_calcCellStats:function(n,t,x){var A=n.statistics;a.forEach(t,function(B){var F=B.identifier;B.statFunctions.updateClusterStat(x[F],A[F],B)})},_initializeStats:function(n,t){var x=n.statistics={};a.forEach(t,function(A){x[A.identifier]=A.statFunctions.initialize(A)});return x},_summarizeStats:function(n,
t,x,A){var B=n.attributes={};A=A||"";B[A+"count"]=n.count;a.forEach(x,function(F){var w=this._getStatFieldName(F,A);B[w]=F.statFunctions.summarize(t[F.identifier],F)},this)},_getStatFieldName:function(n,t){return(t||"")+n.identifier},_updateItem:function(n,t,x,A){var B=x.y,F=n.centroid,w=n.count;F.x=(w*F.x+t*x.x)/(w+t);F.y=(w*F.y+t*B)/(w+t);n.count+=t;A&&this._updateExtent(n.extent,x)},_updateExtent:function(n,t){var x=t.x;t=t.y;x<n.xmin&&(n.xmin=x);x>n.xmax&&(n.xmax=x);t<n.ymin&&(n.ymin=t);t>n.ymax&&
(n.ymax=t)},_getTime:function(){return window.performance?window.performance.now():(new Date).getTime()},_getElapsedTime:function(n,t){n=null!=n&&null!=t?t-n:n;if(null!=n){var x="millisecond";1E3<=n&&(n/=1E3,x="second",60<=n&&(n/=60,x="minute"));x={value:Number(n.toFixed(2)),unit:x}}return x}});r.setObject("layers.clustering.GeohashAggregation",b,k);return b})},"esri/core/timerUtils":function(){define([],function(){function b(e){var g,h=e.length;for(g=0;g<h;g++)e[g]()}var y={LOW:1,HIGH:2},r,a={};
a[y.LOW]=[];a[y.HIGH]=[];var k=function(){clearTimeout(r);r=null;var e=a[y.HIGH];a[y.HIGH]=[];b(e);e=a[y.LOW];a[y.LOW]=[];b(e)};return{priority:y,callbackQueue:a,setTimeout:function(e,g){e=[g,a[g].push(e)-1];r||(r=setTimeout(k,0));return e},clearTimeout:function(e){e&&a[e[0]].splice(e[1],1)}}})},"esri/layers/clustering/geohashUtils":function(){define("dojo/has dojo/string dojo/_base/lang dojo/_base/array ../../kernel ../../geometry/Point ../../geometry/Extent ../../SpatialReference ../../geometry/webMercatorUtils".split(" "),
function(b,y,r,a,k,e,g,h,m){function l(K){var I=K.spatialReference;if(!I)return{x:K.x,y:K.y};var J=I.isWebMercator(),Q;4326===I.wkid?Q={x:K.x,y:K.y}:J&&(Q={x:K.getLongitude(),y:K.getLatitude()});return Q}function f(K){var I=K.spatialReference,J=!(!I||!I.isWebMercator()),Q;I&&4326===I.wkid?Q=new g(K.toJson()):J&&(Q=m.webMercatorToGeographic(K,!0));return Q}function c(K,I){I.x=e.prototype._normalizeX(K.x,h.prototype._info[4326]);I.y=K.y;return I}function d(K){K=G.decimals[K].toString(2);return y.pad(K,
G.bitsPerBase32Char,"0")}function u(K,I){I=I.slice();I.splice(1,0,0);for(var J=I[0],Q=I[2],V=0;V<K.length;V++){Number(K[V])?I[0]=I[1]:I[2]=I[1];var O=I[1]=(I[0]+I[2])/2;J=I[0];Q=I[2]}return{value:O,min:J,max:Q}}function n(K,I,J){var Q=[];I=I.slice();I.splice(1,0,0);for(var V=I[0],O=I[2],S=0;S<J;S++)K>=I[1]?(I[0]=I[1],V=1):(I[2]=I[1],V=0),I[1]=(I[0]+I[2])/2,Q.push(V),V=I[0],O=I[2];return{value:Q.join(""),min:V,max:O}}function t(K){var I=K*G.bitsPerBase32Char;0===I%2?K=I/=2:(K=(I+1)/2,I-=K);return{lon:K,
lat:I}}function x(K){var I=0;K=K.split("").reverse().join("");for(var J=0;J<K.length;J++)I+=Number(K[J])*Math.pow(2,J);return G.base32[I]}function A(K,I){var J={x:K.xmin,y:K.ymax},Q={x:K.xmax,y:K.ymin},V={x:K.xmax,y:K.ymax};return{sw:H.pointToGeohash({x:K.xmin,y:K.ymin},I),nw:H.pointToGeohash(J,I),se:H.pointToGeohash(Q,I),ne:H.pointToGeohash(V,I)}}function B(K,I,J,Q,V){var O=K;do V[O]||(V[O]=!0,Q.push(O)),(K=O===I)||(O=E(O,J));while(!K)}function F(K,I,J,Q){var V=A(K,I);K=[];B(V.sw,V.nw,"n",K,{});
I=[];B(V.se,V.ne,"n",I,{});for(V=0;V<K.length;V++)B(K[V],I[V],"e",J,Q)}function w(K){return a.filter(K,function(I){return 180===I.xmax?!0:!1})[0]}function D(K){return a.filter(K,function(I){return-180===I.xmin?!0:!1})[0]}function q(K,I,J,Q){var V=H.geographicToWebMercator(K);K={x:V.x-I,y:V.y-I};I=H.webMercatorToGeographic({x:V.x+I,y:V.y+I},!0);K=H.webMercatorToGeographic(K,!0);return new g(null!=J?J:K.x,K.y,null!=Q?Q:I.x,I.y)}function v(K,I,J,Q){K=A(K,I);var V,O;"min"===Q?O=180:"max"===Q&&(V=-180);
var S=V;Q=O;var L=H.geohashToCell(K.sw).extent;I=H.geohashToCell(K.ne).extent;K=null!=S?S:L.xmin;L=L.ymin;Q=null!=Q?Q:I.xmax;I=I.ymax;K=q({x:K,y:L},J,V,O);J=q({x:Q,y:I},J,V,O);return new g(K.xmin,K.ymin,J.xmax,J.ymax)}function z(K,I,J){var Q=K,V=0;do V++,(K=Q===I)||(Q=E(Q,J));while(!K);return V}function C(K,I){K=A(K,I);I=z(K.nw,K.ne,"e");return{rows:z(K.nw,K.sw,"s"),cols:I}}function E(K,I){var J=K.length%2,Q=K.slice(-1),V=G.decimals[Q];K=K.slice(0,-1);-1!=G.borders[I][J].indexOf(Q)&&K&&(K=E(K,I));
return K+G.neighbors[I][J][V]}var G={base32:"0123456789bcdefghjkmnpqrstuvwxyz",decimals:function(){for(var K={},I=0;32>I;I++)K["0123456789bcdefghjkmnpqrstuvwxyz"[I]]=I;return K}(),neighbors:{n:[null,"238967debc01fg45kmstqrwxuvhjyznp"],s:[null,"bc01fg45238967deuvhjyznpkmstqrwx"],e:[null,"14365h7k9dcfesgujnmqp0r2twvyx8zb"],w:[null,"p0r21436x8zb9dcf5h7kjnmqesgutwvy"]},borders:{n:[null,"bcfguvyz"],s:[null,"0145hjnp"],e:[null,"prxz"],w:[null,"028b"]},bitsPerBase32Char:5,maxGeohashLength:12,longitudeRange:[-180,
180],latitudeRange:[-90,90]};G.neighbors.n[0]="14365h7k9dcfesgujnmqp0r2twvyx8zb";G.neighbors.s[0]="p0r21436x8zb9dcf5h7kjnmqesgutwvy";G.neighbors.e[0]="238967debc01fg45kmstqrwxuvhjyznp";G.neighbors.w[0]="bc01fg45238967deuvhjyznpkmstqrwx";G.borders.n[0]="prxz";G.borders.s[0]="028b";G.borders.e[0]="bcfguvyz";G.borders.w[0]="0145hjnp";var H={geographicToWebMercator:function(K){K=e.lngLatToXY(K.x,K.y);return{x:K[0],y:K[1]}},webMercatorToGeographic:function(K,I){K=e.xyToLngLat(K.x,K.y,I);return{x:K[0],
y:K[1]}},geohashToCell:function(K){var I;var J=[];for(I=0;I<K.length;I++)J.push(d(K[I]));J=J.join("");I=[];for(var Q=[],V=0;V<J.length;V++)0===V%2?I.push(J[V]):Q.push(J[V]);I=I.join("");Q=Q.join("");I=[I,Q];J=u(I[0],G.longitudeRange);Q=u(I[1],G.latitudeRange);I=J.value;return{point:{x:I,y:Q.value},extent:{xmin:J.min,xmax:J.max,ymin:Q.min,ymax:Q.max},geohash:K}},pointToCell:function(K,I){I=I||G.maxGeohashLength;if(K=l(K)){K=c(K,K);var J=t(I);I=n(K.x,G.longitudeRange,J.lon);var Q=n(K.y,G.latitudeRange,
J.lat);J=I.value;var V=Q.value;I={xmin:I.min,xmax:I.max,ymin:Q.min,ymax:Q.max};Q=[];for(var O=Math.ceil((J.length+V.length)/G.bitsPerBase32Char),S=0,L=0,Y=0;Y<O*G.bitsPerBase32Char;Y++){var ca=0===Y%2?J[S++]:V[L++];null==ca&&(ca=0);Q.push(ca)}J=Q.join("");V=G.bitsPerBase32Char;Q=J.length/V;O=[];for(S=0;S<Q;S++)L=J.substr(S*V,V),O.push(x(L));J=O.join("");return{point:K,extent:I,geohash:J}}},geohashToPoint:function(K){return H.geohashToCell(K).point},pointToGeohash:function(K,I){return(K=H.pointToCell(K,
I))&&K.geohash},getCells:function(K){return a.map(K,function(I){return H.geohashToCell(I)})},getCellSize:function(K){var I=G.longitudeRange,J=G.latitudeRange;I=Math.abs(I[1]-I[0]);J=Math.abs(J[1]-J[0]);K=t(K||1);return{width:I/Math.pow(2,K.lon),height:J/Math.pow(2,K.lat)}},getCellSizeInMeters:function(K){K=H.getCellSize(K);var I=m.metersPerDegree;K.width*=I;K.height*=I;return K},getIntersecting:function(K,I,J){I=I||1;J=J||0;var Q=[],V=f(K);if(V){J&&(V=H.expandExtent(K,I,J));K=V.normalize();var O=
{};a.forEach(K,function(S){F(S,I,Q,O)})}return Q},countIntersecting:function(K,I,J){I=I||1;J=J||0;var Q=0,V=f(K);if(V){J&&(V=H.expandExtent(K,I,J));K=V.normalize();if(2===K.length){Q=w(K);V=D(K);J=C(Q,I);var O=C(V,I);K=J.rows;J=J.cols+O.cols;Q={x:Q.xmin,y:Q.ymax};V={x:V.xmax,y:V.ymax};Q=c(Q,{});V=c(V,{});Q=H.pointToGeohash(Q,I);I=H.pointToGeohash(V,I);Q===I&&J--;I={rows:K,cols:J}}else I=C(K[0],I);Q=I.cols*I.rows}return Q},getChildren:function(K){K=K||"";var I=[],J;for(J in G.decimals)I.push(K+J);
return I},getNeighbors:function(K){var I=E(K,"n"),J=E(K,"s");return[I,E(I,"e"),E(I,"w"),J,E(J,"e"),E(J,"w"),E(K,"e"),E(K,"w")]},getExtentFromDistance:function(K,I){I=I||1E3;var J;(K=l(K))&&(J=q(K,I));return J},expandExtent:function(K,I,J){I=I||1;J=J||0;if(K=f(K)){if(J){K=K.normalize();if(2===K.length){var Q=J;J=w(K);K=D(K);J=v(J,I,Q,"min");K=v(K,I,Q,"max");360<=J.getWidth()+K.getWidth()?(I=-180,K=180):(I=J.xmin,K=K.xmax);return new g(I,J.ymin,K,J.ymax)}return v(K[0],I,J)}return K}},getNeighborsWithinDistance:function(K,
I,J){J=J||1E3;I=I||1;var Q=[];if(K=l(K)){J=q(K,J).normalize();var V={};a.forEach(J,function(O){F(O,I,Q,V)})}return Q}};r.setObject("layers.clustering.geohashUtils",H,k);return H})},"esri/layers/clustering/statUtils":function(){define(["dojo/_base/lang","../support/attributeUtils"],function(b,y){function r(e){return"number"===typeof e&&!isNaN(e)&&Infinity!==e&&-Infinity!==e}var a={sum:{initialize:function(){return{count:0,sum:null}},updateCellStat:function(e,g){r(g)&&(e.count++,e.sum+=g)},updateClusterStat:function(e,
g){g.count&&(e.count+=g.count,e.sum+=g.sum)},summarize:function(e){return e.sum}},avg:{initialize:function(e){return{count:0,sum:null,avg:null,sum_cosine:null,sum_sine:null}},updateCellStat:function(e,g,h){r(g)&&(e.count++,h.isAngular?(h.isArithmetic||(g=-1*g+90),e.sum_cosine+=Math.cos(g*Math.PI/180),e.sum_sine+=Math.sin(g*Math.PI/180)):e.sum+=g)},updateClusterStat:function(e,g,h){g.count&&(e.count+=g.count,h.isAngular?(e.sum_cosine+=g.sum_cosine,e.sum_sine+=g.sum_sine):e.sum+=g.sum)},summarize:function(e,
g){if(0<e.count){var h=e.count;g.isAngular?(h=180*Math.atan2(e.sum_sine/h,e.sum_cosine/h)/Math.PI,g.isArithmetic||(h=-1*(h-90)),e.avg=0>h?h+360:h):(e.avg=e.sum/h,g.isDate&&(e.avg=Math.ceil(e.avg)))}return e.avg}},type:{initialize:function(){return{uvInfos:{}}},updateCellStat:function(e,g){if(null==g||""===g||"string"===typeof g&&""===b.trim(g))g=null;e=e.uvInfos;null==e[g]?e[g]={count:1,value:g}:e[g].count++},updateClusterStat:function(e,g){e=e.uvInfos;g=g.uvInfos;for(var h in g){var m=g[h];null==
e[h]?e[h]={count:m.count,value:m.value}:e[h].count+=m.count}},summarize:function(e){e=e.uvInfos;var g,h=-Infinity;for(g in e){var m=e[g];if(m.count>h){h=m.count;var l=m.value}else m.count===h&&(l=null)}return l}}},k={isSupportedStatisticType:function(e){return a.hasOwnProperty(e)},getStatisticFunctions:function(e){return a[e]},getStatisticId:function(e,g){var h=y.getAttributeIdSource(e);e=h&&y.getAttributeId(h)||e.field;return g+"_"+e},getClusterField:function(e,g){return"cluster_"+k.getStatisticId(e,
g)},getStatisticHash:function(e,g){g=[k.getStatisticId(e,g)];e.attributeType&&g.push(e.attributeType.toLowerCase());e.rotationType&&g.push(e.rotationType.toLowerCase());return g.join("_")}};return k})},"esri/layers/agscommon":function(){define("./ArcGISMapServiceLayer ./LayerInfo ./TimeInfo ./LayerTimeOptions ./TimeReference ./Field ./Domain ./RangeDomain ./CodedValueDomain ./InheritedDomain ./LayerSource ./LayerMapSource ./LayerDataSource ./DataSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource ./DynamicLayerInfo ./LayerDrawingOptions ../geometry ../utils".split(" "),
function(){return{}})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "),function(b,y,r,a,k,e,g,h){b=b(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(m){if(m&&(y.mixin(this,m),m.renderer&&(this.renderer=g.fromJson(m.renderer)),m.labelingInfo&&0<m.labelingInfo.length)){this.labelingInfo=[];var l;r.forEach(m.labelingInfo,function(f){l=new h(f);
this.labelingInfo.push(l)},this)}},toJson:function(){var m={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};this.labelingInfo&&0<this.labelingInfo.length&&(m.labelingInfo=[],r.forEach(this.labelingInfo,function(l){m.labelingInfo.push(l.toJson())}));return e.fixJson(m)}});y.setObject("layers.LayerDrawingOptions",b,k);return b})},"esri/geometry":function(){define("./units ./SpatialReference ./geometry/Geometry ./geometry/Point ./geometry/ScreenPoint ./geometry/Multipoint ./geometry/Polyline ./geometry/Polygon ./geometry/Extent ./geometry/Rect ./geometry/geodesicUtils ./geometry/jsonUtils ./geometry/mathUtils ./geometry/normalizeUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x){return{units:b,SpatialReference:y,Geometry:r,Point:a,ScreenPoint:k,Multipoint:e,Polyline:g,Polygon:h,Extent:m,Rect:l,geodesicUtils:f,jsonUtils:c,mathUtils:d,normalizeUtils:u,scaleUtils:n,screenUtils:t,webMercatorUtils:x}})},"esri/units":function(){define(["dojo/has","./kernel"],function(b,y){b={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",FEET_US:"esriFeetUS",
INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILES_US:"esriMilesUS",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",YARDS_US:"esriYardsUS",ACRES:"esriAcres",ACRES_US:"esriAcresUS",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_MILES_US:"esriSquareMilesUS",SQUARE_FEET:"esriSquareFeet",SQUARE_FEET_US:"esriSquareFeetUS",SQUARE_METERS:"esriSquareMeters",
HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_YARDS_US:"esriSquareYardsUS",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",RADIANS:"esriDURadians"};return y.Units=
b})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Geometry ./Point ./Extent ../srUtils".split(" "),function(b,y,r,a,k,e,g,h,m){function l(c){return new h(parseFloat(c.x),parseFloat(c.y)-parseFloat(c.height),parseFloat(c.x)+parseFloat(c.width),parseFloat(c.y),c.spatialReference)}var f=b(e,{declaredClass:"esri.geometry.Rect",type:"rect",x:0,y:0,width:100,height:100,constructor:function(c,d,u,n,t){k.isObject(c)&&"extent"===c.type&&(d=c.ymax,
u=c.getWidth(),n=c.getHeight(),t=c.spatialReference,c=c.xmin);k.isObject(c)?(k.mixin(this,c),this.spatialReference&&(this.spatialReference=m.createSpatialReference(this.spatialReference))):(this.x=c,this.y=d,this.width=u,this.height=n,this.spatialReference=t);this.verifySR()},getCenter:function(){return new g(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(c,d){return new f(this.x+c,this.y+d,this.width,this.height,this.spatialReference)},intersects:function(c){return c.x+
c.width<=this.x||c.y+c.height<=this.y||c.y>=this.y+this.height||c.x>=this.x+this.width?!1:!0},getExtent:function(){return l(this)},update:function(c,d,u,n,t){this.x=c;this.y=d;this.width=u;this.height=n;this.spatialReference=t;this.clearCache();return this}});y.setObject("geometry.Rect",f,a);a.geometry._rectToExtent=l;a.geometry._extentToRect=function(c){return new f(c)};return f})},"esri/geometry/geodesicUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),
function(b,y,r,a,k,e,g,h){function m(A){return!!(A&&A.wkid&&x[A.wkid])}function l(A){return m(A)?x[A.wkid]:x[4326]}function f(A){var B=A.spatialReference,F=l(B),w=F.a;F=F.eSq;var D=Math.sqrt(F),q=Math.sin(A.y*t);return new e(w*A.x*t,0<F?w*(1-F)*(q/(1-F*q*q)-1/(2*D)*Math.log((1-D*q)/(1+D*q)))*.5:w*q,B)}function c(A,B,F,w,D){var q=l(D),v=q.a,z=q.b;q=q.f;var C=Math.sin(F);F=Math.cos(F);var E=(1-q)*Math.tan(A);A=1/Math.sqrt(1+E*E);var G=E*A,H=Math.atan2(E,F);E=A*C;var K=E*E,I=1-K;v=I*(v*v-z*z)/(z*z);
var J=1+v/16384*(4096+v*(-768+v*(320-175*v))),Q=v/1024*(256+v*(-128+v*(74-47*v)));v=w/(z*J);for(var V=2*Math.PI,O,S,L,Y;1E-12<Math.abs(v-V);)L=Math.cos(2*H+v),O=Math.sin(v),S=Math.cos(v),Y=Q*O*(L+Q/4*(S*(-1+2*L*L)-Q/6*L*(-3+4*O*O)*(-3+4*L*L))),V=v,v=w/(z*J)+Y;w=G*O-A*S*F;z=q/16*I*(4+q*(4-3*I));return new e((B+(Math.atan2(O*C,A*S-G*O*F)-(1-z)*q*E*(v+z*O*(L+z*S*(-1+2*L*L)))))/t,Math.atan2(G*S+A*O*F,(1-q)*Math.sqrt(K+w*w))/t,D)}function d(A,B,F,w,D){var q=l(D),v=q.a;D=q.b;var z=q.f,C=w-B,E=Math.atan((1-
z)*Math.tan(A)),G=Math.atan((1-z)*Math.tan(F)),H=Math.sin(E);E=Math.cos(E);var K=Math.sin(G);G=Math.cos(G);var I=C,J=1E3;do{var Q=Math.sin(I);var V=Math.cos(I);var O=Math.sqrt(G*Q*G*Q+(E*K-H*G*V)*(E*K-H*G*V));if(0===O)return 0;V=H*K+E*G*V;var S=Math.atan2(O,V);var L=E*G*Q/O;var Y=1-L*L;Q=V-2*H*K/Y;isNaN(Q)&&(Q=0);var ca=z/16*Y*(4+z*(4-3*Y));var U=I;I=C+(1-ca)*z*L*(S+ca*O*(Q+ca*V*(-1+2*Q*Q)))}while(1E-12<Math.abs(I-U)&&0<--J);if(0===J)return D=w-B,{azimuth:Math.atan2(Math.sin(D)*Math.cos(F),Math.cos(A)*
Math.sin(F)-Math.sin(A)*Math.cos(F)*Math.cos(D)),geodesicDistance:Math.acos(Math.sin(A)*Math.sin(F)+Math.cos(A)*Math.cos(F)*Math.cos(w-B))*q.radius};A=Y*(v*v-D*D)/(D*D);B=A/1024*(256+A*(-128+A*(74-47*A)));return{azimuth:Math.atan2(G*Math.sin(I),E*K-H*G*Math.cos(I)),geodesicDistance:D*(1+A/16384*(4096+A*(-768+A*(320-175*A))))*(S-B*O*(Q+B/4*(V*(-1+2*Q*Q)-B/6*Q*(-3+4*O*O)*(-3+4*Q*Q)))),reverseAzimuth:Math.atan2(E*Math.sin(I),E*K*Math.cos(I)-H*G)}}function u(A,B){if(!(A instanceof g||A instanceof h))throw Error("_geodesicDensify: the input geometry is neither polyline nor polygon");
var F=A.spatialReference,w=l(F).radius/1E4;B<w&&(B=w);w=A instanceof g;var D=[],q;b.forEach(w?A.paths:A.rings,function(v){D.push(q=[]);q.push([v[0][0],v[0][1]]);var z,C;var E=v[0][0]*t;var G=v[0][1]*t;for(z=0;z<v.length-1;z++){var H=v[z+1][0]*t;var K=v[z+1][1]*t;if(E!==H||G!==K){K=d(G,E,K,H,F);H=K.azimuth;K=K.geodesicDistance;var I=K/B;if(1<I){for(C=1;C<=I-1;C++){var J=c(G,E,H,C*B,F);q.push([J.x,J.y])}C=c(G,E,H,(K+Math.floor(I-1)*B)/2,F);q.push([C.x,C.y])}G=c(G,E,H,K,F);q.push([G.x,G.y]);E=G.x*t;
G=G.y*t}}});return w?new g({paths:D,spatialReference:F}):new h({rings:D,spatialReference:F})}var n={esriMeters:1,esriKilometers:1E3,esriYards:.9144,esriFeet:.3048,esriMiles:1609.344,esriNauticalMiles:1852,esriInches:.0254,esriDecimeters:.1,esriCentimeters:.01,esriMillimeters:.001,esriSquareMeters:1,esriSquareKilometers:1E6,esriSquareYards:.83612736,esriSquareFeet:.09290304,esriSquareMiles:2589988.110336,esriAcres:4046.8564224,esriHectares:1E4,esriAres:100,esriSquareInches:6.4516E-4,esriSquareMillimeters:1E-6,
esriSquareCentimeters:1E-4,esriSquareDecimeters:.01},t=Math.PI/180,x={4326:{a:6378137,b:6356752.31424518,f:1/298.257223563,eSq:.006694379990197414,radius:6371008.771415059},104900:{a:2439700,b:2439700,f:0,eSq:0,radius:2439700},104901:{a:6051E3,b:6051E3,f:0,eSq:0,radius:6051E3},104902:{a:6051800,b:6051800,f:0,eSq:0,radius:6051800},104903:{a:1737400,b:1737400,f:0,eSq:0,radius:1737400},104904:{a:3393400,b:3375730,f:1/192.04301075,eSq:.01038722,radius:3387510},104905:{a:3396190,b:3376200,f:1/169.89444722,
eSq:.01173737,radius:3389526.6666666665},104906:{a:6200,b:6200,f:0,eSq:0,radius:6200},104907:{a:11100,b:11100,f:0,eSq:0,radius:11100},104912:{a:2409300,b:2409300,f:0,eSq:0,radius:2409300},104915:{a:1562090,b:1562090,f:0,eSq:0,radius:1562090},104916:{a:2632345,b:2632345,f:0,eSq:0,radius:2632345},104918:{a:1821460,b:1821460,f:0,eSq:0,radius:1821460},104929:{a:249400,b:249400,f:0,eSq:0,radius:249400},104943:{a:2575E3,b:2575E3,f:0,eSq:0,radius:2575E3},104971:{a:3396190,b:3396190,f:0,eSq:0,radius:3396190},
104972:{a:47E4,b:47E4,f:0,eSq:0,radius:47E4},104973:{a:255E3,b:255E3,f:0,eSq:0,radius:255E3},104974:{a:2439400,b:2439400,f:0,eSq:0,radius:2439400}};r={isSupported:m,getSpheroidInfo:l,geodesicDensify:u,geodesicLengths:function(A,B){var F=[];b.forEach(A,function(w,D){var q=0,v=w.spatialReference;b.forEach(w.paths,function(z,C){C=0;var E;for(E=1;E<z.length;E++){var G=z[E-1][0]*t;var H=z[E][0]*t;var K=z[E-1][1]*t;var I=z[E][1]*t;if(K!==I||G!==H)G=d(K,G,I,H,v),C+=G.geodesicDistance}q+=C});q/=n[B];F.push(q)});
return F},geodesicAreas:function(A,B){var F=[],w=[];b.forEach(A,function(D,q){q=.0015696101447650193*l(D.spatialReference).radius;F.push(u(D,q))});b.forEach(F,function(D,q){var v=0,z=D.spatialReference;b.forEach(D.rings,function(C,E){E=f(new e(C[0][0],C[0][1],z));var G=f(new e(C[C.length-1][0],C[C.length-1][1],z)),H=G.x*E.y-E.x*G.y,K;for(K=0;K<C.length-1;K++)E=f(new e(C[K+1][0],C[K+1][1],z)),G=f(new e(C[K][0],C[K][1],z)),H+=G.x*E.y-E.x*G.y;v+=H});v/=n[B];w.push(v/-2)});return w},_unitsDictionary:n,
_toEqualAreaPoint:f,_directGeodeticSolver:c,_inverseGeodeticSolver:d};y.mixin(y.getObject("geometry",!0,a),r);return r})},"arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array esri/arcgis/utils arcgisonline/map/thumbnail/createThumbnailImage arcgisonline/map/thumbnail/createHiddenMap".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c){return function(d,u,n,t){var x=
function(A,B){n(B);A.destroy();y.byId("hiddenMapDiv").removeChild(y.byId("hiddenMap"))};c(d,u,h.hitch(this,function(A){f(A,h.hitch(this,x,A),t)}),t)}})},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff dojox/gfx/_base ../kernel ../config ../Color ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v,z,C,E,G,H,K,I,J,Q){function V(ea){return!(!ea||"BingMapsAerial"!==ea.layerType&&"BingMapsAerial"!==ea.type)}function O(ea){return!(!ea||"BingMapsRoad"!==ea.layerType&&"BingMapsRoad"!==ea.type)}function S(ea){return V(ea)||O(ea)||!(!ea||"BingMapsHybrid"!==ea.layerType&&"BingMapsHybrid"!==ea.type)}function L(ea){return!(!ea||"OpenStreetMap"!==ea.layerType&&"OpenStreetMap"!==ea.type)}function Y(ea){return!!(ea&&ea.url&&(-1<"ArcGISFeatureLayer ArcGISImageServiceLayer ArcGISImageServiceVectorLayer ArcGISMapServiceLayer ArcGISStreamLayer ArcGISTiledImageServiceLayer ArcGISTiledMapServiceLayer".split(" ").indexOf(ea.layerType)||
!ea.layerType&&!ea.type))}function ca(ea){return x({url:Ab.arcgisUrl+"/"+ea.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function U(ea,Ja){var Ia={f:"json"};Ja&&(Ia.token=Ja);return x({url:ea,content:Ia,callbackParamName:"callback"},{disableIdentityLookup:!0})}function X(ea){!ea.layerDefinition||ea.layerDefinition.drawingInfo&&ea.layerDefinition.drawingInfo.labelingInfo||(ea.showLabels=!1);ea.itemProperties.layerDefinition&&(ea.layerDefinition?
(ea.layerDefinition.drawingInfo||(ea.layerDefinition.drawingInfo=ea.itemProperties.layerDefinition.drawingInfo),t.isDefined(ea.layerDefinition.definitionExpression)||(ea.layerDefinition.definitionExpression=ea.itemProperties.layerDefinition.definitionExpression),t.isDefined(ea.layerDefinition.minScale)||(ea.layerDefinition.minScale=ea.itemProperties.layerDefinition.minScale),t.isDefined(ea.layerDefinition.maxScale)||(ea.layerDefinition.maxScale=ea.itemProperties.layerDefinition.maxScale)):ea.layerDefinition=
ea.itemProperties.layerDefinition);!ea.itemProperties.popupInfo||ea.popupInfo||ea.disablePopup||(ea.popupInfo=ea.itemProperties.popupInfo);t.isDefined(ea.itemProperties.showLabels)&&!t.isDefined(ea.showLabels)&&(ea.showLabels=ea.itemProperties.showLabels);t.isDefined(ea.itemProperties.showLegend)&&!t.isDefined(ea.showLegend)&&(ea.showLegend=ea.itemProperties.showLegend);t.isDefined(ea.itemProperties.refreshInterval)&&!t.isDefined(ea.refreshInterval)&&(ea.refreshInterval=ea.itemProperties.refreshInterval)}
function Z(ea){X(ea);ea.itemProperties.layerDefinition&&ea.layerDefinition&&(!t.isDefined(ea.layerDefinition.maximumTrackPoints)&&t.isDefined(ea.itemProperties.layerDefinition.maximumTrackPoints)&&(ea.layerDefinition.maximumTrackPoints=ea.itemProperties.layerDefinition.maximumTrackPoints),!ea.layerDefinition.definitionGeometry&&ea.itemProperties.layerDefinition.definitionGeometry&&(ea.layerDefinition.definitionGeometry=ea.itemProperties.layerDefinition.definitionGeometry));ea.itemProperties.purgeOptions&&
!ea.purgeOptions&&(ea.purgeOptions=ea.itemProperties.purgeOptions)}function N(ea,Ja){var Ia=new k;Ja=ea.itemData;var Ca=[],Ga=[];r.forEach(Ja.operationalLayers,function(Ma){if(Ma.itemId&&Y(Ma)){var Ka=Ma.url.toLowerCase();-1<Ka.indexOf("/featureserver")||-1<Ka.indexOf("/mapserver/")?(Ga.push(Ma),Ca.push(ca(Ma))):-1<Ka.indexOf("/mapserver")&&-1===Ka.indexOf("/mapserver/")&&(!Ma.layers||!t.isDefined(Ma.minScale)&&!t.isDefined(Ma.maxScale))?(Ga.push(Ma),Ca.push(ca(Ma))):-1<Ka.indexOf("/imageserver")&&
!t.isDefined(Ma.minScale)&&!t.isDefined(Ma.maxScale)?(Ga.push(Ma),Ca.push(ca(Ma))):-1<Ka.indexOf("/streamserver")&&(Ga.push(Ma),Ca.push(ca(Ma)))}});Ja.baseMap&&Ja.baseMap.baseMapLayers&&r.forEach(Ja.baseMap.baseMapLayers,function(Ma){Ma.itemId&&"VectorTileLayer"!==Ma.layerType&&(Ga.push(Ma),Ca.push(ca(Ma)))});if(0<Ca.length){var Na={};(new m(Ca)).addCallback(function(Ma){r.forEach(Ga,function(Ka,Ra){if((Ra=Ma[Ra][1])&&!(Ra instanceof Error)&&(Na[Ka.itemId]=Ra,Y(Ka))){var Wa=Ka.url.toLowerCase();(-1<
Wa.indexOf("/featureserver")||-1<Wa.indexOf("/mapserver/"))&&Ra.layers?r.forEach(Ra.layers,function(Ya){var cb="/featureserver/"+Ya.id;(cb=Wa.match(cb+"$")==cb)||(cb="/mapserver/"+Ya.id,cb=Wa.match(cb+"$")==cb);cb&&(Ka.itemProperties=Ya,X(Ka))}):-1<Wa.indexOf("/streamserver")?(Ka.itemProperties=Ra,Z(Ka)):-1<Wa.indexOf("/mapserver")?(Ra.layers&&!Ka.layers&&(Ka.layers=Ra.layers),t.isDefined(Ra.minScale)&&!t.isDefined(Ka.minScale)&&(Ka.minScale=Ra.minScale),t.isDefined(Ra.maxScale)&&!t.isDefined(Ka.maxScale)&&
(Ka.maxScale=Ra.maxScale),t.isDefined(Ra.refreshInterval)&&!t.isDefined(Ka.refreshInterval)&&(Ka.refreshInterval=Ra.refreshInterval),Ra.visibleLayers&&!Ka.visibleLayers&&(Ka.visibleLayers=Ra.visibleLayers)):-1<Wa.indexOf("/imageserver")&&(t.isDefined(Ra.minScale)&&!t.isDefined(Ka.minScale)&&(Ka.minScale=Ra.minScale),t.isDefined(Ra.maxScale)&&!t.isDefined(Ka.maxScale)&&(Ka.maxScale=Ra.maxScale),t.isDefined(Ra.refreshInterval)&&!t.isDefined(Ka.refreshInterval)&&(Ka.refreshInterval=Ra.refreshInterval),
!Ra.popupInfo||Ka.popupInfo||Ka.disablePopup||(Ka.popupInfo=Ra.popupInfo),Ra.renderingRule&&!Ka.renderingRule&&(Ka.renderingRule=Ra.renderingRule,Ra.renderingRule.functionName&&(Ka.renderingRule.rasterFunction=Ra.renderingRule.functionName)),Ra.bandIds&&!Ka.bandIds&&(Ka.bandIds=Ra.bandIds),Ra.mosaicRule&&!Ka.mosaicRule&&(Ka.mosaicRule=Ra.mosaicRule),Ra.format&&!Ka.format&&(Ka.format=Ra.format),t.isDefined(Ra.compressionQuality)&&!t.isDefined(Ka.compressionQuality)&&(Ka.compressionQuality=Ra.compressionQuality),
!Ra.layerDefinition||!Ra.layerDefinition.definitionExpression||t.isDefined(Ka.layerDefinition)&&t.isDefined(Ka.layerDefinition.definitionExpression)||(Ka.layerDefinition=Ka.layerDefinition||{},Ka.layerDefinition.definitionExpression=Ra.layerDefinition.definitionExpression))}});ea.relatedItemsData=Na;Ia.callback(ea)})}else Ia.callback(ea);return Ia}function aa(ea,Ja){var Ia=new k,Ca=ea.itemData,Ga=Ca.baseMap.baseMapLayers[0];if(S(Ga))if(Ga.portalUrl&&d.id)delete Ja.bingMapsKey,d.id.checkSignInStatus(F.urlToObject(Ab.arcgisUrl).path).then(y.hitch(null,
function(Ma,Ka,Ra,Wa,Ya){U(Ga.portalUrl,Ya.token).then(y.hitch(null,pa,Ma,Ka,Ra,Wa),y.hitch(null,ta,Ma,Ka,Ra,Wa))},ea,Ja,Ca,Ia),y.hitch(null,function(Ma,Ka,Ra,Wa,Ya){U(Ga.portalUrl).then(y.hitch(null,pa,Ma,Ka,Ra,Wa),y.hitch(null,ta,Ma,Ka,Ra,Wa))},ea,Ja,Ca,Ia));else if(Ja.bingMapsKey){var Na=new Eb({bingMapsKey:Ja.bingMapsKey,mapStyle:Eb.MAP_STYLE_AERIAL});a.connect(Na,"onLoad",y.hitch(this,function(){Ia.callback([ea,Ja])}));a.connect(Na,"onError",function(Ma){delete Ja.bingMapsKey;ea.itemData=Ba(Ca);
Ga=ea.itemData.baseMap.baseMapLayers[0];Ga.errors=[];Ga.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Ia.callback([ea,Ja])})}else ea.itemData=Ba(Ca),Ga=ea.itemData.baseMap.baseMapLayers[0],Ga.errors=[],Ga.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),Ia.callback([ea,Ja]);else Ia.callback([ea,Ja]);return Ia}function ka(ea){var Ja=
new k;ea=ea.itemData;var Ia=ea.baseMap&&ea.baseMap.baseMapLayers;if(Yb&&!Yb.supported())for(ea=0;ea<Ia.length;ea++){var Ca=Ia[ea];if(!Ca.isReference){if("VectorTileLayer"===Ca.layerType){var Ga=Ca.itemId;var Na=ea}break}}Ga?eb(Ga,!1).addBoth(function(Ma){var Ka=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;Ma&&Ma.item&&Ka.test(Ma.item.url)&&(Ia[Na]={id:"FB_"+Ca.id,layerType:"ArcGISTiledMapServiceLayer",opacity:"opacity"in Ca?Ca.opacity:1,visibility:"visibility"in
Ca?Ca.visibility:!0,url:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});Ja.resolve()}):Ja.resolve();return Ja}function pa(ea,Ja,Ia,Ca,Ga){Ga.bingKey?(Ja.bingMapsKey=Ga.bingKey,Ga=new Eb({bingMapsKey:Ja.bingMapsKey,mapStyle:Eb.MAP_STYLE_AERIAL}),a.connect(Ga,"onLoad",y.hitch(this,function(){Ca.callback([ea,Ja])})),a.connect(Ga,"onError",function(Na){delete Ja.bingMapsKey;ea.itemData=Ba(Ia);Na=ea.itemData.baseMap.baseMapLayers[0];Na.errors=[];Na.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});
Ca.callback([ea,Ja])})):ta(ea,Ja,Ia,Ca)}function ta(ea,Ja,Ia,Ca){delete Ja.bingMapsKey;ea.itemData=Ba(Ia);Ia=ea.itemData.baseMap.baseMapLayers[0];Ia.errors=[];Ia.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});Ca.callback([ea,Ja])}function Ba(ea){V(ea.baseMap.baseMapLayers[0])?ea.baseMap={title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:
O(ea.baseMap.baseMapLayers[0])?ea.baseMap={title:"Streets",baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:ea.baseMap={title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};
return ea}function Da(ea,Ja,Ia,Ca){var Ga=ea.dynamicLayerInfos||ea.layerInfos,Na=Ja.layers;if(Na&&Ga)if(Ca.usePopupManager){var Ma;r.forEach(Ga,function(db){var $a=db.id;if(!db.subLayerIds)for(db=0;db<Na.length;db++){var ib=Na[db];if(ib.id===$a&&ib.popupInfo&&!ib.disablePopup){Ma||(Ma={});Ma[$a]={infoTemplate:new Ia(ib.popupInfo),layerUrl:ib.layerUrl};break}}});Ma&&ea.setInfoTemplates(Ma)}else{var Ka=[],Ra=[],Wa=[],Ya=[],cb=[],Ta=[];r.forEach(Ga,function(db){var $a=db.id;if(!db.subLayerIds&&-1!==
r.indexOf(ea.visibleLayers,$a))for(db=0;db<Na.length;db++){var ib=Na[db];if(ib.id===$a){Ra.push($a);Ka.push(ib.popupInfo);Wa.push(ib.layerUrl||"");ib.layerDefinition&&ib.layerDefinition.definitionExpression?Ya.push(ib.layerDefinition.definitionExpression):Ya.push("");cb.push(t.isDefined(ib.minScale)?ib.minScale:null);Ta.push(t.isDefined(ib.maxScale)?ib.maxScale:null);break}}});Ka.length&&(ea.__popups=Ka,ea.__popupIds=Ra,ea.__popupUrls=Wa,ea.__popupWhereClauses=Ya,ea.__popupMinScales=cb,ea.__popupMaxScales=
Ta,ea.__resourceInfo=Ja.resourceInfo)}}function oa(ea){if(!ea)return!1;var Ja=(new g(Ab.arcgisUrl)).authority;return-1!==ea.indexOf(".arcgis.com/")||-1!==ea.indexOf(Ja)}function ra(ea){return ea?-1!==ea.indexOf("/services.arcgisonline.com/")||-1!==ea.indexOf("/server.arcgisonline.com/"):!1}function ya(ea){"https:"===location.protocol&&(oa(ea)||ra(ea))&&(ea=ea.replace("http:","https:"));return ea}function wa(ea,Ja,Ia){var Ca=[];ea.displayLevels||(Ca=r.map(ea.resourceInfo.tileInfo.lods,function(Na){return Na.level}));
if(ea.exclusionAreas){var Ga=y.clone(ea.exclusionAreas);Ga=r.map(Ga,function(Na){Na.geometry=new q(Na.geometry);return Na})}ea.resourceInfo&&"Raster"===ea.resourceInfo.cacheType?(Ca=ea.layerDefinition&&ea.layerDefinition.drawingInfo&&ea.layerDefinition.drawingInfo.renderer,Ca=new Xb(ya(ea.url),{resourceInfo:ea.resourceInfo,opacity:ea.opacity,visible:ea.visibility,id:ea.id,minScale:ea.minScale,maxScale:ea.maxScale,refreshInterval:ea.refreshInterval,multidimensionalDefinition:ea.multidimensionalDefinition,
bandIds:ea.bandIds,renderer:Ca||null})):Ca=new I(ya(ea.url),{resourceInfo:ea.resourceInfo,opacity:ea.opacity,visible:ea.visibility,displayLevels:ea.displayLevels||Ca,id:ea.id,minScale:ea.minScale,maxScale:ea.maxScale,refreshInterval:ea.refreshInterval,exclusionAreas:Ga});Ia.ignorePopups||Da(Ca,ea,Ja,Ia);return Ca}function la(ea,Ja){if(!ea||!Ja||0===Ja.length)return[];Ja=","+Ja+",";var Ia=[],Ca,Ga=",";for(Ca=0;Ca<ea.length;Ca++)if(null!==ea[Ca].subLayerIds){if(-1===Ja.indexOf(","+ea[Ca].id+",")||-1<
Ga.indexOf(","+ea[Ca].id+","))Ga+=ea[Ca].subLayerIds.toString()+","}else-1<Ja.indexOf(","+ea[Ca].id+",")&&-1===Ga.indexOf(","+ea[Ca].id+",")&&Ia.push(ea[Ca].id);return Ia}function Aa(ea,Ja,Ia){var Ca=new vb;Ca.format="png24";ea.resourceInfo&&ea.resourceInfo.supportedImageFormatTypes&&-1<ea.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")&&(Ca.format="png32");Ca=new nb(ya(ea.url),{resourceInfo:ea.resourceInfo,opacity:ea.opacity,visible:ea.visibility,id:ea.id,imageParameters:Ca,minScale:ea.minScale,
maxScale:ea.maxScale,refreshInterval:ea.refreshInterval});var Ga=ea.visibleLayers;if(!ea.visibleLayers){var Na="";r.forEach(Ca.layerInfos,function(Ta){Ta.defaultVisibility&&(Na+=(0<Na.length?",":"")+Ta.id)});Ga=Na}if(ea.layers&&0<ea.layers.length){var Ma=[],Ka=[],Ra,Wa=[],Ya,cb;r.forEach(ea.layers,function(Ta){var db=Ta.layerDefinition;db&&db.definitionExpression&&(Ma[Ta.id]=db.definitionExpression);if(db&&db.source){Ra=null;cb=db.source;if("mapLayer"===cb.type){var $a=r.filter(ea.resourceInfo.layers,
function(ib){return ib.id===cb.mapLayerId});$a.length&&(Ra=y.mixin($a[0],Ta))}else Ra=y.mixin({},Ta);Ra&&(Ra.source=cb,delete Ra.popupInfo,Ra=new zb(Ra),ea.visibleLayers&&($a="string"==typeof ea.visibleLayers?ea.visibleLayers.split(","):ea.visibleLayers,-1<r.indexOf($a,Ta.id)?Ra.defaultVisibility=!0:Ra.defaultVisibility=!1),Ka.push(Ra))}db&&null!=db.transparency&&($a=db.drawingInfo||{},null==$a.transparency&&($a.transparency=db.transparency,db.drawingInfo=$a));db&&db.source&&db.drawingInfo&&(Ya=new Wb(db.drawingInfo),
Wa[Ta.id]=Ya)},this);0<Ma.length&&Ca.setLayerDefinitions(Ma);0<Ka.length?(Ca.setDynamicLayerInfos(Ka,!0),0<Wa.length&&Ca.setLayerDrawingOptions(Wa,!0)):(Ga=la(Ca.layerInfos,Ga),Ca.setVisibleLayers(Ga))}else Ga=la(Ca.layerInfos,Ga),Ca.setVisibleLayers(Ga);Ia.ignorePopups||Da(Ca,ea,Ja,Ia);return Ca}function da(ea,Ja,Ia){var Ca=new Hb;Ca.bandIds=ea.bandIds;null!=ea.format&&(Ca.format=ea.format,null!=ea.compressionQuality&&(Ca.compressionQuality=ea.compressionQuality));if(ea.renderingRule&&ea.renderingRule.rasterFunction){var Ga=
new cc(ea.renderingRule);Ca.renderingRule=Ga}ea.mosaicRule&&(Ga=new ac(ea.mosaicRule),Ca.mosaicRule=Ga);t.isDefined(ea.noData)&&(Ca.noData=ea.noData);t.isDefined(ea.noDataInterpretation)&&(Ca.noDataInterpretation=ea.noDataInterpretation);t.isDefined(ea.interpolation)&&(Ca.interpolation=ea.interpolation);Ga=ea.layerType?"ArcGISImageServiceVectorLayer"===ea.layerType:!1;t.isDefined(ea.layerType)||(Ga=ea.resourceInfo.hasMultidimensions&&("esriImageServiceDataTypeVector-UV"===ea.resourceInfo.serviceDataType||
"esriImageServiceDataTypeVector-MagDir"===ea.resourceInfo.serviceDataType));Ca={resourceInfo:ea.resourceInfo,opacity:ea.opacity,visible:ea.visibility,id:ea.id,imageServiceParameters:Ca,minScale:ea.minScale,maxScale:ea.maxScale,refreshInterval:ea.refreshInterval};Ca=Ga?new Lb(ya(ea.url),Ca):new rb(ya(ea.url),Ca);ea.layerDefinition&&(ea.layerDefinition.drawingInfo&&ea.layerDefinition.drawingInfo.renderer&&(Ga=C.fromJson(ea.layerDefinition.drawingInfo.renderer),Ca.setRenderer(Ga)),ea.layerDefinition.definitionExpression&&
Ca.setDefinitionExpression(ea.layerDefinition.definitionExpression,!0));Ia.ignorePopups||!ea.popupInfo||ea.disablePopup||Ca.setInfoTemplate(new Ja(ea.popupInfo));return Ca}function fa(ea,Ja,Ia){var Ca=[102113,102100,3857],Ga=Ia||new A(Ja[0].layerObject.fullExtent.spatialReference),Na=new A(ea.resourceInfo.fullExtent.spatialReference);return Ga.wkt==Na.wkt&&(Ga.wkid==Na.wkid||t.isDefined(Ga.latestWkid)&&Ga.latestWkid==Na.wkid||t.isDefined(Na.latestWkid)&&Ga.wkid==Na.latestWkid||t.isDefined(Ga.latestWkid)&&
Ga.latestWkid==Na.latestWkid)||Ga.wkid&&Na.wkid&&r.some(Ca,function(Ma){return Ma===Na.wkid})&&r.some(Ca,function(Ma){return Ma===Ga.wkid})?!0:!1}function P(ea,Ja,Ia){if(!Ja[0].layerObject.tileInfo)return!1;ea=ea.resourceInfo.tileInfo;Ja=Ja[0].layerObject.tileInfo;Ia=Ia.width>Ia.height?Ia.width:Ia.height;for(var Ca=!1,Ga=!1,Na=0;Na<ea.lods.length;Na++){for(var Ma=ea.lods[Na].scale/ea.dpi,Ka=0;Ka<Ja.lods.length;Ka++){var Ra=Ja.lods[Ka].scale/Ja.dpi;if(Math.abs(Ra-Ma)/Ra<1/Ia)if(Ca){Ga=!0;break}else Ca=
!0}if(Ga)break}return Ga||Ca&&(1===ea.lods.length||1===Ja.lods.length)?!0:!1}function xa(ea,Ja,Ia,Ca,Ga,Na){var Ma=Ia._clazz;if(L(ea))var Ka=new bc({id:ea.id,opacity:ea.opacity,visible:null!==ea.visibility&&void 0!==ea.visibility?ea.visibility:!0});else if(ea&&("WFS"===ea.layerType||"WFS"===ea.type)){var Ra={customParameters:ea.wfsInfo.customParameters,geometryType:ea.layerDefinition.geometryType,id:ea.id,labelingInfo:ea.layerDefinition.drawingInfo.labelingInfo,maxFeatures:ea.wfsInfo.maxFeatures,
mode:ea.mode,name:ea.wfsInfo.name,showLabels:!0,swapXY:ea.wfsInfo.swapXY,title:ea.title,url:ea.url,version:ea.wfsInfo.version,visible:ea.visibility,wkid:ea.layerDefinition.spatialReference.wkid};Ka=new dc;Ka.fromJson(Ra,function(){t.isDefined(ea.opacity)&&Ka.setOpacity(ea.opacity);t.isDefined(ea.visibility)&&Ka.setVisibility(ea.visibility);(ea.minScale||ea.maxScale)&&Ka.setScaleRange(ea.minScale,ea.maxScale);Ka.renderer=C.fromJson(ea.layerDefinition.drawingInfo.renderer,{geometryType:Ra.geometryType});
!Ia.ignorePopups&&ea.popupInfo&&Ka.setInfoTemplate(new Ma(ea.popupInfo));Ka.emit("fromJsonComplete")})}else if(ea&&("WMS"===ea.layerType||"WMS"===ea.type)){var Wa=[],Ya=[];r.forEach(ea.layers,function($a){Ya.push(new mc({name:$a.name,title:$a.title,legendURL:$a.legendURL||$a.legendUrl,queryable:$a.queryable,showPopup:$a.showPopup}));Wa.push($a.name)},this);ea.visibleLayers&&(Wa=ea.visibleLayers);Ca=new q(ea.extent[0][0],ea.extent[0][1],ea.extent[1][0],ea.extent[1][1],new A({wkid:4326}));Ca={customLayerParameters:ea.customLayerParameters,
customParameters:ea.customParameters,extent:Ca,layerInfos:Ya,version:ea.version,maxWidth:ea.maxWidth,maxHeight:ea.maxHeight,featureInfoFormat:ea.featureInfoFormat,getFeatureInfoURL:ea.featureInfoUrl,getMapURL:ea.mapUrl,spatialReferences:ea.spatialReferences,title:ea.title,copyright:ea.copyright,minScale:ea.minScale||0,maxScale:ea.maxScale||0,format:ea.format};Ka=new lc(ea.url,{id:ea.id,visibleLayers:Wa,format:"png",transparent:ea.firstLayer?!1:!0,opacity:ea.opacity,visible:null!==ea.visibility?ea.visibility:
!0,resourceInfo:Ca,refreshInterval:ea.refreshInterval});Ka.spatialReference.wkid=Ca.spatialReferences[0]}else if(ea&&("KML"===ea.layerType||"KML"===ea.type)){var cb=ea.url;if(d.id){var Ta=d.id.findCredential(F.urlToObject(Ab.arcgisUrl).path);Ta&&(Ja=Ab.arcgisUrl.substring(Ab.arcgisUrl.indexOf("//")+2,Ab.arcgisUrl.indexOf("/",Ab.arcgisUrl.indexOf("//")+3)),Ga=Ja.split("."),Ga=Ga[Ga.length-2]+"."+Ga[Ga.length-1],Na=cb.indexOf(Ga),-1<Na&&(cb="https://"+Ja+cb.substring(Na+Ga.length),cb+="?token\x3d"+
Ta.token))}Ka=new Mb(cb,{id:ea.id,visible:null!==ea.visibility?ea.visibility:!0,outSR:Ca,refreshInterval:ea.refreshInterval});a.connect(Ka,"onLoad",function(){(ea.opacity||0===ea.opacity)&&Ka.setOpacity(ea.opacity);t.isDefined(ea.minScale)&&t.isDefined(ea.maxScale)&&Ka.setScaleRange(ea.minScale,ea.maxScale);ea.visibleFolders&&r.forEach(Ka.folders,function($a){-1<r.indexOf(ea.visibleFolders,$a.id)?Ka.setFolderVisibility($a,!0):Ka.setFolderVisibility($a,!1)},this)})}else if(!ea||"WebTiledLayer"!==ea.layerType&&
"WebTiledLayer"!==ea.type)if(!ea||"GeoRSS"!==ea.layerType&&"GeoRSS"!==ea.type)if(ea&&("CSV"===ea.layerType||"CSV"===ea.type)&&ea.url)Ca={layerDefinition:ea.layerDefinition,columnDelimiter:ea.columnDelimiter,id:ea.id?ea.id:null,visible:null!==ea.visibility?ea.visibility:!0,opacity:ea.opacity,refreshInterval:ea.refreshInterval},ea.locationInfo&&(Ca.latitudeFieldName=ea.locationInfo.latitudeFieldName,Ca.longitudeFieldName=ea.locationInfo.longitudeFieldName),!Ia.ignorePopups&&ea.popupInfo&&(Ca.infoTemplate=
new Ma(ea.popupInfo)),Ka=new Bb(ea.url,Ca);else if("VectorTileLayer"===ea.layerType&&ea.styleUrl)Ka=new Yb(ea.styleUrl,{id:ea.id,minScale:ea.minScale,maxScale:ea.maxScale,opacity:ea.opacity,visible:ea.visibility});else if(ea.layerDefinition&&!ea.url)Ca=e.fromJson(e.toJson(ea)),delete Ca.id,delete Ca.opacity,delete Ca.visibility,Ka=new J(Ca,{id:ea.id,opacity:ea.opacity,visible:ea.visibility,outFields:["*"],autoGeneralize:!0}),Ia.ignorePopups||!Ca.popupInfo||Ca.disablePopup||Ka.setInfoTemplate(new Ma(Ca.popupInfo)),
Qa(Ka);else if(S(ea))Ia.bingMapsKey?(Ca=Eb.MAP_STYLE_AERIAL_WITH_LABELS,V(ea)?Ca=Eb.MAP_STYLE_AERIAL:O(ea)&&(Ca=Eb.MAP_STYLE_ROAD),Ka=new Eb({bingMapsKey:Ia.bingMapsKey,mapStyle:Ca,opacity:ea.opacity,id:ea.id}),a.connect(Ka,"onError",y.hitch(this,function($a){$a.errors=$a.errors||[];$a.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+($a?$a.layerType||$a.type:"")+"]"})},ea))):(ea.errors=ea.errors||[],ea.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+
(ea?ea.layerType||ea.type:"")+"]"}));else if(ea.resourceInfo&&(ea.resourceInfo.mapName||""===ea.resourceInfo.mapName))Ka=!0===ea.resourceInfo.singleFusedMapCache&&(ea.baseMapLayer||fa(ea,Ja,Ca)&&P(ea,Ga,Na))?wa(ea,Ma,Ia):Aa(ea,Ma,Ia);else if(ea.resourceInfo&&ea.resourceInfo.pixelSizeX)Ka=!0===ea.resourceInfo.singleFusedMapCache&&"ArcGISImageServiceLayer"!==ea.layerType&&(ea.baseMapLayer||"Raster"===ea.resourceInfo.cacheType||fa(ea,Ja,Ca)&&P(ea,Ga,Na))?wa(ea,Ma,Ia):da(ea,Ma,Ia);else if(ea.resourceInfo&&
"Feature Layer"===ea.resourceInfo.type){ea.capabilities&&(ea.resourceInfo.capabilities=ea.capabilities);var db;!1===Ia.editable?db=!1:Ia.privileges&&-1===r.indexOf(Ia.privileges,"features:user:edit")&&d.id&&d.id.findCredential(ea.url)&&(db=!1);Ka=new J(ya(ea.url),{resourceInfo:ea.resourceInfo,opacity:ea.opacity,visible:ea.visibility,id:ea.id,mode:ea.mode===J.MODE_SELECTION?J.MODE_SELECTION:J.MODE_AUTO,editable:db,outFields:["*"],autoGeneralize:!0,refreshInterval:ea.refreshInterval});Ia.ignorePopups||
!ea.popupInfo||ea.disablePopup||Ka.setInfoTemplate(new Ma(ea.popupInfo));ea.layerDefinition&&(ea.layerDefinition.drawingInfo&&ea.layerDefinition.drawingInfo.renderer&&(Ca=C.fromJson(ea.layerDefinition.drawingInfo.renderer,{geometryType:Ka.geometryType}),Ca.isMaxInclusive=!0,Ka.setRenderer(Ca)),ea.layerDefinition.drawingInfo&&ea.layerDefinition.drawingInfo.labelingInfo&&(Ca=r.map(ea.layerDefinition.drawingInfo.labelingInfo,function($a){return new Fb($a)}),Ka.setLabelingInfo(Ca)),ea.layerDefinition.definitionExpression&&
Ka.setDefinitionExpression(ea.layerDefinition.definitionExpression),t.isDefined(ea.layerDefinition.minScale)&&Ka.setMinScale(ea.layerDefinition.minScale),t.isDefined(ea.layerDefinition.maxScale)&&Ka.setMaxScale(ea.layerDefinition.maxScale));Qa(Ka)}else ea.resourceInfo&&ea.resourceInfo.streamUrls&&(Ca={resourceInfo:ea.resourceInfo,opacity:ea.opacity,visible:ea.visibility,id:ea.id},ea.layerDefinition&&(cb=ea.layerDefinition.drawingInfo,ea.layerDefinition.definitionGeometry&&(Ta=Ta||{},Ta.geometry=ea.layerDefinition.definitionGeometry),
t.isDefined(ea.layerDefinition.definitionExpression)&&(Ta=Ta||{},Ta.where=ea.layerDefinition.definitionExpression),t.isDefined(ea.layerDefinition.maximumTrackPoints)&&(Ca.maximumTrackPoints=ea.layerDefinition.maximumTrackPoints)),Ta&&(Ca.filter=Ta),ea.purgeOptions&&(Ca.purgeOptions=ea.purgeOptions),Ka=new jc(ya(ea.url),Ca),cb&&cb.renderer&&(Ca=cb.renderer,Ka.setRenderer(C.fromJson(Ca,{geometryType:ea.resourceInfo.geometryType}))),cb&&cb.labelingInfo&&(Ca=r.map(cb.labelingInfo,function($a){return new Fb($a)}),
Ka.setLabelingInfo(Ca)),Ia.ignorePopups||!ea.popupInfo||ea.disablePopup||Ka.setInfoTemplate(new Ma(ea.popupInfo)),ea.layerDefinition&&(t.isDefined(ea.layerDefinition.minScale)&&Ka.setMinScale(ea.layerDefinition.minScale),t.isDefined(ea.layerDefinition.maxScale)&&Ka.setMaxScale(ea.layerDefinition.maxScale)),h.once(Ka,"error",function($a){ea.errors.push({message:"Error loading stream layer. Check websocket url"})}));else Ka=new $b(ea.url,{id:ea.id,opacity:ea.opacity,outSpatialReference:Ca,refreshInterval:ea.refreshInterval}),
a.connect(Ka,"onLoad",function(){!1===ea.visibility&&Ka.hide();t.isDefined(ea.minScale)&&t.isDefined(ea.maxScale)&&Ka.setScaleRange(ea.minScale,ea.maxScale);var $a=Ka.getFeatureLayers();r.forEach($a,function(ib){ea.pointSymbol&&"esriGeometryPoint"===ib.geometryType?(ib.renderer.symbol=z.fromJson(ea.pointSymbol),1===$a.length&&(Ka.pointSymbol=z.fromJson(ea.pointSymbol))):ea.lineSymbol&&"esriGeometryPolyline"===ib.geometryType?(ib.renderer.symbol=z.fromJson(ea.lineSymbol),1===$a.length&&(Ka.polylineSymbol=
z.fromJson(ea.lineSymbol))):ea.polygonSymbol&&"esriGeometryPolygon"===ib.geometryType&&(ib.renderer.symbol=z.fromJson(ea.polygonSymbol),1===$a.length&&(Ka.polygonSymbol=z.fromJson(ea.polygonSymbol)))})});else if(Ka=new kc(ea.templateUrl,{id:ea.id,visible:null!==ea.visibility?ea.visibility:!0,opacity:ea.opacity,copyright:ea.copyright,fullExtent:ea.fullExtent&&new q(ea.fullExtent),initialExtent:ea.fullExtent&&new q(ea.fullExtent),subDomains:ea.subDomains,tileInfo:ea.tileInfo?new qc(ea.tileInfo):null,
refreshInterval:ea.refreshInterval,wmtsInfo:ea.wmtsInfo}),t.isDefined(ea.minScale)||t.isDefined(ea.maxScale))Ka.loaded?Ka.setScaleRange(ea.minScale,ea.maxScale):a.connect(Ka,"onLoad",function(){Ka.setScaleRange(ea.minScale,ea.maxScale)});Ka&&(Ka.arcgisProps={title:ea.title},ea.baseMapLayer&&(ea.isReference?(Ka.attr("data-reference",!0),Ka._basemapGalleryLayerType="reference"):Ka._basemapGalleryLayerType="basemap"),Ka instanceof J&&ea.layerDefinition&&ea.layerDefinition.featureReduction&&"cluster"===
ea.layerDefinition.featureReduction.type&&(Ca=ea.layerDefinition.featureReduction,Ca.clusterSize&&(Ca.clusterSize=c.pt2px(Ca.clusterSize)),Ca.clusterRadius&&(Ca.clusterRadius=c.pt2px(Ca.clusterRadius)),Ca.popupInfo&&(Ca.infoTemplate=new E(Ca.popupInfo),delete Ca.popupInfo),Ka.setFeatureReduction(Ca)));return Ka}function Fa(ea,Ja,Ia,Ca,Ga){r.forEach(ea,function(Ka){Ka.layerObject=xa(Ka,ea,Ja,Ia,Ca,Ga)});var Na=r.filter(ea,function(Ka){return!Ka.isReference}),Ma=r.filter(ea,function(Ka){return!!Ka.isReference});
return ea=Na.concat(Ma)}function ba(ea){var Ja=null;ea=ea[0];ea.url&&Y(ea)&&ea.resourceInfo.spatialReference&&(Ja=new A,ea.resourceInfo.spatialReference.wkid&&(Ja.wkid=ea.resourceInfo.spatialReference.wkid),ea.resourceInfo.spatialReference.wkt&&(Ja.wkt=ea.resourceInfo.spatialReference.wkt));S(ea)||L(ea)?Ja=new A({wkid:102100}):ea&&("WMS"===ea.layerType||"WMS"===ea.type)&&(Ja=new A({wkid:ea.spatialReferences[0]}));return Ja}function Sa(ea,Ja,Ia,Ca,Ga,Na,Ma,Ka){r.forEach(Ja,function(Ra){Ra.url&&Y(Ra)&&
(Ra.resourceInfo=ea[Ra.deferredsPos][1],delete Ra.deferredsPos)});Na=Na||ba(Ja);Ja=Fa(Ja,Ia,Na,Ma,Ka);Ga.callback(Ja);return Ga}function Qa(ea){!window.CanvasRenderingContext2D&&ea.renderer&&"esri.renderer.HeatmapRenderer"===ea.renderer.declaredClass&&ea.setRenderer(C.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}}))}function va(ea,Ja){var Ia=
ya(ea);return x({url:Ia,content:{f:"json"},callbackParamName:"callback",error:function(Ca,Ga){Ca.message=Ca.message?Ca.message+(" [url:"+Ia+"]"):"[url:"+Ia+"]";Ja.push(Ca);u.defaults.io.errorHandler(Ca,Ga)}})}function R(ea){var Ja=Ab.arcgisUrl+"/"+ea.itemId+"/data";return x({url:Ja,content:{f:"json"},callbackParamName:"callback",error:function(Ia,Ca){Ia.message=Ia.message?Ia.message+(" [url:"+Ja+"]"):"[url:"+Ja+"]";ea.errors=ea.errors||[];ea.errors.push(Ia);u.defaults.io.errorHandler(Ia,Ca)}})}function ia(ea,
Ja,Ia){var Ca=new k;if(!(Ia.featureCollection&&Ia.featureCollection.layers||Ia.layers))return ea.errors=ea.errors||[],ea.errors.push({message:"Invalid Feature Collection item data. [item id: "+ea.itemId+"]"}),Ca.errback(),Ca;Ia.layers&&(Ia.featureCollection={layers:Ia.layers},delete Ia.layers,t.isDefined(Ia.showLegend)&&(Ia.featureCollection.showLegend=Ia.showLegend,delete Ia.showLegend));ja(ea,Ia.featureCollection,Ja).then(function(Ga){Ia.featureCollection=Ga;ea.featureCollection&&ea.featureCollection.layers?
r.forEach(Ia.featureCollection.layers,function(Na,Ma){Ma=ea.featureCollection.layers[Ma];Ma.popupInfo||Ma.layerDefinition?Ma.layerDefinition?(t.isDefined(Ma.layerDefinition.minScale)&&t.isDefined(Ma.layerDefinition.maxScale)&&(Ma.layerDefinition.minScale!==Na.layerDefinition.minScale||Ma.layerDefinition.maxScale!==Na.layerDefinition.maxScale)&&(delete Na.layerDefinition.minScale,delete Na.layerDefinition.maxScale),Ma.layerDefinition.drawingInfo&&e.toJson(Ma.layerDefinition.drawingInfo)!==e.toJson(Na.layerDefinition.drawingInfo)&&
delete Na.layerDefinition.drawingInfo,Ma.layerDefinition.showLegend!==Na.layerDefinition.showLegend&&delete Na.layerDefinition.showLegend,Ma.layerDefinition=y.mixin(Ma.layerDefinition,Na.layerDefinition)):Ma.layerDefinition=Na.layerDefinition:(Ma.popupInfo=Na.popupInfo,Ma.layerDefinition=Na.layerDefinition);Ma.featureSet=Na.featureSet;Ma.nextObjectId=Na.nextObjectId}):(ea.featureCollection=ea.featureCollection||{},ea.featureCollection=y.mixin(ea.featureCollection,Ia.featureCollection));Ca.callback(ea)});
return Ca}function ja(ea,Ja,Ia){var Ca=new k;b(["./csv"],function(Ga){var Na=[];r.forEach(Ja.layers,function(Ma){Ma.featureSet&&Ma.featureSet.features&&Ma.featureSet.features.length&&Ma.featureSet.features[0].geometry&&Ma.featureSet.features[0].geometry.spatialReference&&(Ma.deferredsPos=Na.length,Na.push(Ga.projectFeatureCollection(Ma,Ia,Ma.featureSet.features[0].geometry.spatialReference)))});(new m(Na)).addCallback(function(){r.forEach(Ja.layers,function(Ma){t.isDefined(Ma.deferredsPos)&&(Na[Ma.deferredsPos].results&&
Na[Ma.deferredsPos].results.length?Ma=Na[Ma.deferredsPos].results[0]:(Ma.errors=Ma.errors||[],Ma.errors.push({message:"Errors projecting feature collection. ["+ea.title+" - "+Ma.layerDefinition.name+"]"})),delete Ma.deferredsPos)});Ca.callback(Ja)})});return Ca}function T(ea,Ja,Ia,Ca,Ga){var Na=new k,Ma=new k,Ka=[];r.forEach(ea.operationalLayers,function(Wa){Wa.itemId&&"Feature Collection"==Wa.type&&Ka.push(R(Wa).then(y.hitch(null,ia,Wa,Ia)))});if(0===Ka.length)ha(ea,Ja,Ia,Ca,Ma,Ga);else{var Ra=new m(Ka);
Ra.addCallback(function(Wa){ha(ea,Ja,Ia,Ca,Ma,Ga)})}Ma.then(function(Wa){Ka=[];r.forEach(Wa,function(cb){cb=cb.layerObject;if(cb instanceof J&&!cb.loaded&&!cb.loadError){var Ta=new k;h.once(cb,"load, error",function(){Ta.callback(cb)});Ka.push(Ta)}else cb&&"esri.layers.WFSLayer"===cb.declaredClass&&!cb.loadError&&(Ta=new k,h.once(cb,"fromJsonComplete, error",function(db){Ta.callback(cb)}),Ka.push(Ta))});if(Ka.length){var Ya=new k;Ra=new m(Ka);Ra.addCallback(function(){Ya.callback(Wa)});return Ya.promise}return Wa}).then(function(Wa){var Ya=
[];r.forEach(Wa,function(cb){var Ta=cb.layerObject;Ta&&(Ta instanceof J||"esri.layers.StreamLayer"===Ta.declaredClass)?Ta.loaded&&Ta.labelingInfo&&(cb.showLabels||Ta._collection?Ya.push(Ta):Ta.setShowLabels&&Ta.setShowLabels(!1)):Ta&&"esri.layers.WFSLayer"===Ta.declaredClass&&Ta.loaded&&Ta.labelingInfo&&Ya.push(Ta)});Ya.length?b(["../layers/LabelLayer"],function(cb){var Ta=new cb;r.forEach(Ya,function(db){Ta.addFeatureLayer(db)});Wa.push({layerObject:Ta});Na.callback(Wa)}):Na.callback(Wa)});return Na}
function ha(ea,Ja,Ia,Ca,Ga,Na){var Ma=[],Ka=[],Ra=[];r.forEach(ea.operationalLayers,function(Wa,Ya){if(Wa.featureCollection&&Wa.featureCollection.layers){var cb=Wa.featureCollection.layers.length;r.forEach(Wa.featureCollection.layers,function(Ta,db){var $a=!0;Wa.visibleLayers&&-1==r.indexOf(Wa.visibleLayers,db)&&($a=!1);Ta.visibility=(null!=Wa.visibility?!!Wa.visibility:!0)&&$a;Ta.opacity=Wa.opacity;Ta.id=(Wa.id||"operational"+Ya)+"_"+db;Wa.title&&(Ta.title=1!==cb&&Ta.layerDefinition.name&&Wa.title!==
Ta.layerDefinition.name?Wa.title+" - "+Ta.layerDefinition.name:Wa.title);null==Ta.disablePopup&&(Ta.disablePopup=Wa.disablePopup);Ra.push(Ta)},this)}else Ra.push(Wa)});r.forEach(ea.baseMap.baseMapLayers,function(Wa,Ya){Wa.baseMapLayer=!0;Wa.id=Wa.id||"base"+Ya;Ma.push(Wa)});r.forEach(Ra,function(Wa,Ya){Wa.id=Wa.id||"operational"+Ya;Ma.push(Wa)});r.forEach(Ma,function(Wa){Wa.url&&Y(Wa)&&(Wa.deferredsPos=Ka.length,Wa.errors=Wa.errors||[],Ka.push(va(Wa.url,Wa.errors)))});0===Ka.length?(Ia=Ia||ba(Ma),
Ma=Fa(Ma,Ja,Ia,Ca,Na),Ga.callback(Ma)):(new m(Ka)).addCallback(function(Wa){Sa(Wa,Ma,Ja,Ka,Ga,Ia,Ca,Na)});return Ga}function na(ea,Ja,Ia,Ca){var Ga=ea.minScale,Na=ea.maxScale;if(10.1>=Ia.version&&Ja)for(ea=Ja.length-1;0<=ea;ea--){if(Ja[ea].id==Ca)if(0==Ga&&0<Ja[ea].minScale?Ga=Ja[ea].minScale:0<Ga&&0==Ja[ea].minScale?Ga=Ia.minScale:0<Ga&&0<Ja[ea].minScale&&(Ga=Math.min(Ga,Ja[ea].minScale)),Na=Math.max(Ia.maxScale||0,Ja[ea].maxScale||0),Ia.setScaleRange(Ga,Na),-1<Ja[ea].parentLayerId)Ca=Ja[ea].parentLayerId;
else break}else 10.1<Ia.version&&(r.forEach(ea.layerInfos,function(Ma){Ma.id==Ca&&(0==Ga&&0<Ma.minScale?Ga=Ma.minScale:0<Ga&&0==Ma.minScale||0<Ga&&0<Ma.minScale&&(Ga=Math.min(Ga,Ma.minScale)),Na=Math.max(Na||0,Ma.maxScale||0))}),Ia.setScaleRange(Ga,Na))}function qa(ea,Ja,Ia,Ca){var Ga=ea.url,Na=ea.__popupIds,Ma=ea.__popupUrls,Ka=ea.__popupWhereClauses,Ra=ea.__popupMinScales,Wa=ea.__popupMaxScales,Ya=ea.__resourceInfo,cb=[];r.forEach(ea.__popups,function(Ta,db){if(Ta){var $a=[];r.forEach(Ta.fieldInfos,
function(tb){"shape"!==tb.fieldName.toLowerCase()&&$a.push(tb.fieldName)});if(ea.dynamicLayerInfos&&0<ea.dynamicLayerInfos.length){var ib=r.filter(ea.dynamicLayerInfos,function(tb){return Na[db]==tb.id})[0].source;var Cb=new J(Ga+"/dynamicLayer",{parentLayer:ea,id:ea.id+"_"+Na[db],source:ib,outFields:$a,mode:J.MODE_SELECTION,infoTemplate:Ta&&new Ia(Ta),drawMode:!1,visible:ea.visible,autoGeneralize:!0});var Zb=function(tb,Qb){0<Ka[tb].length&&Qb.setDefinitionExpression(Ka[tb]);if(t.isDefined(Ra[tb])||
t.isDefined(Wa[tb]))if(t.isDefined(ea.minScale)||t.isDefined(ea.maxScale)){var Jb=ea.minScale,Tb=ea.maxScale;0==Jb&&0<Ra[tb]?Jb=Ra[tb]:0<Jb&&0==Ra[tb]||0<Jb&&0<Ra[tb]&&(Jb=Math.min(Jb,Ra[tb]));Tb=Math.max(Tb||0,Wa[tb]||0);Qb.setScaleRange(Jb,Tb)}else Qb.setScaleRange(Ra[tb],Wa[tb]);else na(ea,Ja||Ya.layers,Qb,Na[tb])};Cb.loaded?Zb(db,Cb):a.connect(Cb,"onLoad",function(tb){Zb(db,Cb)})}else{var qb=null,nc=Ga+"/"+Na[db];if(Ma[db].length)nc=Ma[db];else if(Ja)for(ib=0;ib<Ja.length;ib++)if(Ja[ib].id===
Na[db]){qb=Ja[ib];break}Cb=new J(ya(nc),{parentLayer:ea,id:ea.id+"_"+Na[db],outFields:$a,mode:J.MODE_SELECTION,infoTemplate:Ta&&new Ia(Ta),drawMode:!1,visible:ea.visible,resourceInfo:qb,autoGeneralize:!0});Cb.loaded?(0<Ka[db].length&&Cb.setDefinitionExpression(Ka[db]),na(ea,Ja||Ya.layers,Cb,Na[db])):a.connect(Cb,"onLoad",function(tb){0<Ka[db].length&&Cb.setDefinitionExpression(Ka[db]);na(ea,Ja||Ya.layers,tb,Na[db])})}cb.push(Cb)}});0<cb.length&&(a.connect(ea,"onVisibilityChange",y.hitch(this,function(Ta,
db){r.forEach(Ta,function($a){db?$a.show():$a.hide()})},cb)),a.connect(Ca,"onLayerRemove",y.hitch(this,function(Ta,db,$a){Ta.id===$a.id&&r.forEach(db,function(ib){Ca.removeLayer(ib)})},ea,cb)));delete ea.__popups;delete ea.__popupIds;delete ea.__popupUrls;delete ea.__popupWhereClauses;delete ea.__popupMinScales;delete ea.__popupMaxScales;delete ea.__resourceInfo;return cb}function ua(ea){return x({url:ya(ea.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function za(ea,
Ja,Ia){var Ca=[];r.forEach(ea,function(Na){var Ma=Na.__popups;Ma&&1<Ma.length&&10<=Na.version&&(Na.__deferredsPos=Ca.length,Ca.push(ua(Na)))});var Ga=[];0<Ca.length?(new m(Ca)).addCallback(function(Na){r.forEach(ea,function(Ma){Ma.__popups&&0<Ma.__popups.length&&(Ma.__deferredsPos||0===Ma.__deferredsPos?(Ga=Ga.concat(qa(Ma,Na[Ma.__deferredsPos][1].layers,Ia,Ja)),delete Ma.__deferredsPos):Ga=Ga.concat(qa(Ma,null,Ia,Ja)))});Ja.addLayers(Ga)}):(r.forEach(ea,function(Na){Na.__popups&&0<Na.__popups.length&&
(Ga=Ga.concat(qa(Na,null,Ia,Ja)))}),Ja.addLayers(Ga))}function Ea(ea){r.forEach(ea,function(Ja){var Ia=Ja.layer;Ia.toJson&&(Ja=Ia.toJson(),Ja.featureSet&&Ia.name&&-1<Ia.name.indexOf("Text")&&r.forEach(Ja.featureSet.features,function(Ca,Ga){Ca.attributes.TEXT&&(Ga=Ia.graphics[Ga],Ga.symbol.setText(Ca.attributes.TEXT),Ca.symbol.horizontalAlignment&&(Ga.symbol.align=Ca.symbol.horizontalAlignment),Ga.setSymbol(Ga.symbol),Ga.setAttributes(Ca.attributes))},this))})}function Pa(ea){var Ja=6;r.forEach(ea,
function(Ia){if(Ia=Ia.renderer)"esri.renderer.SimpleRenderer"===Ia.declaredClass?((Ia=Ia.symbol)&&Ia.xoffset&&(Ja=Math.max(Ja,Math.abs(Ia.xoffset))),Ia&&Ia.yoffset&&(Ja=Math.max(Ja,Math.abs(Ia.yoffset)))):"esri.renderer.UniqueValueRenderer"!==Ia.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==Ia.declaredClass||r.forEach(Ia.infos,function(Ca){(Ca=Ca.symbol)&&Ca.xoffset&&(Ja=Math.max(Ja,Math.abs(Ca.xoffset)));Ca&&Ca.yoffset&&(Ja=Math.max(Ja,Math.abs(Ca.yoffset)))})});return Ja}function Oa(ea){var Ja=
this,Ia=Ja.infoWindow,Ca=ea.graphic;if(Ja.loaded){Ia.hide();Ia.clearFeatures();var Ga=[];r.forEach(Ja.graphicsLayerIds,function(Ta){(Ta=Ja.getLayer(Ta))&&Ta instanceof J&&Ta.loaded&&Ta.visible&&(Ta.clearSelection(),Ta.infoTemplate&&!Ta.suspended&&Ga.push(Ta))});r.forEach(Ja.layerIds,function(Ta){(Ta=Ja.getLayer(Ta))&&-1!==Ta.declaredClass.indexOf("ArcGISImageServiceLayer")&&Ta.loaded&&Ta.visible&&Ta.infoTemplate&&Ga.push(Ta)});Ca=Ca&&Ca.getInfoTemplate()?Ca:null;if(Ga.length||Ca){var Na=Pa(Ga),Ma=
ea.screenPoint,Ka=Ja.toMap(new D(Ma.x-Na,Ma.y+Na));Na=Ja.toMap(new D(Ma.x+Na,Ma.y-Na));var Ra=new q(Ka.x,Ka.y,Na.x,Na.y,Ja.spatialReference),Wa=new H;Wa.geometry=Ra;Wa.timeExtent=Ja.timeExtent;var Ya=!0;Ka=r.map(Ga,function(Ta){Ta=Ta&&Ta.isFeatureReductionActive&&Ta.isFeatureReductionActive()?Ta.getFeatureReductionLayer():Ta;if(-1!==Ta.declaredClass.indexOf("ArcGISImageServiceLayer")){Wa.geometry=ea.mapPoint;Ya=!1;var db=Ta.queryVisibleRasters(Wa,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0});
db.addCallback(function(){return Ta.getVisibleRasters()})}else if("function"===typeof Ta.selectFeatures)db=Ta.selectFeatures(Wa),db.addCallback(function(){return Ta.getSelectedFeatures()});else{db=new k;var $a=r.filter(Ta.graphics,function(ib){return ib&&ib.visible&&Ra.intersects(ib.geometry)});db.resolve($a)}return db});Ca&&(Na=new k,Na.callback([Ca]),Ka.splice(0,0,Na));if(!r.some(Ka,function(Ta){return-1===Ta.fired})){var cb=Ca?1:0;r.forEach(Ga,function(Ta){cb=-1!==Ta.declaredClass.indexOf("ArcGISImageServiceLayer")?
cb+Ta.getVisibleRasters().length:cb+Ta.getSelectedFeatures().length});if(!cb)return}Ia.setFeatures(Ka);Ia.show(ea.mapPoint,{closestFirst:Ya})}}}function Ha(ea,Ja){var Ia=Ja.mapOptions||{};if(!Ia.infoWindow){var Ca=new G({visibleWhenEmpty:!1},l.create("div"));Ia.infoWindow=Ca}t.isDefined(Ia.showInfoWindowOnClick)||Ja.usePopupManager||(Ia.showInfoWindowOnClick=!1);ea=new B(ea,Ia);a.connect(ea,"onLayersAddResult",Ea);return ea}function Ua(ea,Ja,Ia,Ca,Ga,Na){if(Ca.map){var Ma=Ca.map;var Ka=Ca.clickEventHandle;
var Ra=Ca.clickEventListener;var Wa=Ca.errors}else{var Ya=Ia.itemData;!Ga.mapOptions.backgroundColor&&Ya.background&&Ya.background.color&&null!=Ya.background.color[0]&&(Ga.mapOptions.backgroundColor=n.toDojoColor(Ya.background.color));Ma=Ha(Ca,Ga);Ga.ignorePopups||Ga.disableClickBehavior||Ga.usePopupManager||(Ka=a.connect(Ma,"onClick",Oa),Ra=Oa)}Ma.addLayers(ea);Ga.ignorePopups||Ga.usePopupManager||za(ea,Ma,Ga._clazz);var cb=Wa||[];r.forEach(Ja,function(Ta){Ta.errors&&(cb=cb.concat(Ta.errors))},this);
Ma.loaded?Na.callback({map:Ma,itemInfo:Ia,errors:cb,clickEventHandle:Ka,clickEventListener:Ra}):a.connect(Ma,"onLoad",function(){Na.callback({map:Ma,itemInfo:Ia,errors:cb,clickEventHandle:Ka,clickEventListener:Ra})})}function bb(ea,Ja,Ia,Ca,Ga){var Na=[];r.forEach(Ga,function(Ra){y.isArray(Ra.layerObject)?r.forEach(Ra.layerObject,function(Wa){Na.push(Wa)}):Na.push(Ra.layerObject)});if(S(Ga[0]))var Ma=setInterval(function(){if(Ga[0].layerObject&&Ga[0].layerObject.loaded)clearInterval(Ma),ab(ea,Ja,
Ia,Ca,Ga,Na);else if(Ga[0].errors){clearInterval(Ma);var Ra="";Ga[0].errors&&Ga[0].errors.length&&(Ra=" ("+Ga[0].errors[0].message+")");Ca.errback(Error(Q.arcgis.utils.baseLayerError+Ra))}},10);else if(!Na[0]&&Ga[0].baseMapLayer){var Ka="";Ga[0].errors&&Ga[0].errors.length&&(Ka=" ("+Ga[0].errors[0].message+")");Ca.errback(Error(Q.arcgis.utils.baseLayerError+Ka))}else ab(ea,Ja,Ia,Ca,Ga,Na)}function ab(ea,Ja,Ia,Ca,Ga,Na){try{var Ma=Ia.mapOptions||{};Ia.mapOptions=Ma;Na=r.filter(Na,t.isDefined);if(Ja.map||
Ma.extent)Ua(Na,Ga,ea,Ja,Ia,Ca);else{var Ka=Na[0].spatialReference;if(Ma.center&&(null!=Ma.zoom||Ma.scale)&&(y.isArray(Ma.center)&&(Ma.center=new w(Ma.center)),v.canProject(Ma.center,Ka))){Ua(Na,Ga,ea,Ja,Ia,Ca);return}var Ra=ea.item;if(Ra&&Ra.extent&&Ra.extent.length){var Wa=new q(Ra.extent[0][0],Ra.extent[0][1],Ra.extent[1][0],Ra.extent[1][1],new A({wkid:4326}));4326===Ka.wkid?(Ma.extent=Wa,Ua(Na,Ga,ea,Ja,Ia,Ca)):900913===Ka.wkid||102100===Ka.wkid||102113===Ka.wkid||3857===Ka.wkid?(Wa.xmin=Math.max(Wa.xmin,
-180),Wa.xmax=Math.min(Wa.xmax,180),Wa.ymin=Math.max(Wa.ymin,-89.99),Wa.ymax=Math.min(Wa.ymax,89.99),Ma.extent=v.geographicToWebMercator(Wa),Ua(Na,Ga,ea,Ja,Ia,Ca)):Ia.geometryServiceURL||u.defaults.geometryService?(Ia.geometryServiceURL?new K(Ia.geometryServiceURL):u.defaults.geometryService).project([Wa],Ka,function(Ya){Ya=Ya[0];Ma.extent=Ma.extent||Ya;Ua(Na,Ga,ea,Ja,Ia,Ca)},function(){Ua(Na,Ga,ea,Ja,Ia,Ca)}):Ca.errback(Error(Q.arcgis.utils.geometryServiceError))}else Ua(Na,Ga,ea,Ja,Ia,Ca)}}catch(Ya){Ca.errback(Ya)}}
function gb(ea){var Ja=[];r.forEach(ea.operationalLayers,function(Ia){Ia.featureCollection?Ja.push({featureCollection:Ia.featureCollection,visibility:null!=Ia.visibility?!!Ia.visibility:!0,title:Ia.title}):Ia.layerObject&&Ja.push({layer:Ia.layerObject,visibility:null!=Ia.visibility?!!Ia.visibility:!0,title:Ia.title})});return Ja}function fb(ea){var Ja=[],Ia=ea.baseMap.baseMapLayers;ea.operationalLayers&&(Ia=Ia.concat(ea.operationalLayers));r.forEach(Ia,function(Ca){var Ga={};if(Ca.featureCollection&&
(!Ca||"CSV"!==Ca.layerType&&"CSV"!==Ca.type))!0===Ca.featureCollection.showLegend&&r.forEach(Ca.featureCollection.layers,function(Ka){if(!1!==Ka.showLegend){var Ra=Ka.layerObject.renderer;Ga={layer:Ka.layerObject,title:Ca.title,defaultSymbol:Ra&&Ra.defaultSymbol&&Ra.defaultLabel?!0:!1};1<Ca.featureCollection.layers.length&&(Ga.title+=" - "+Ka.layerDefinition.name);Ja.push(Ga)}});else if(Ca.baseMapLayer&&!0===Ca.showLegend&&Ca.layerObject||!Ca.baseMapLayer&&!1!==Ca.showLegend&&Ca.layerObject&&!(Ca.layerObject instanceof
J&&Ca.layerObject.mode===J.MODE_SELECTION)){var Na=Ca.layerObject.renderer,Ma=Ca.layerObject.declaredClass;Na=!Na||Na&&Na.defaultSymbol&&Na.defaultLabel?!0:!1;if(10.1>Ca.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===Ma||"esri.layers.ArcGISTiledMapServiceLayer"===Ma)||"esri.layers.ArcGISImageServiceLayer"===Ma)Na=!0;Ga={layer:Ca.layerObject,title:Ca.title,defaultSymbol:Na};Ca.layers&&(Ma=r.map(r.filter(Ca.layers,function(Ka){return!1===Ka.showLegend}),function(Ka){return Ka.id}),
Ma.length&&(Ga.hideLayers=Ma));Ja.push(Ga)}});return Ja}function kb(ea,Ja){function Ia(Ka,Ra){r.forEach(Ka,function(Wa,Ya){switch(Wa){case "../layers/ArcGISDynamicMapServiceLayer":nb=Ra[Ya];break;case "../layers/ArcGISImageServiceLayer":rb=Ra[Ya];break;case "../layers/ArcGISImageServiceVectorLayer":Lb=Ra[Ya];break;case "../layers/CSVLayer":Bb=Ra[Ya];break;case "../layers/DynamicLayerInfo":zb=Ra[Ya];break;case "../layers/GeoRSSLayer":$b=Ra[Ya];break;case "../layers/ImageParameters":vb=Ra[Ya];break;
case "../layers/ImageServiceParameters":Hb=Ra[Ya];break;case "../layers/KMLLayer":Mb=Ra[Ya];break;case "../layers/LabelClass":Fb=Ra[Ya];break;case "../layers/LayerDrawingOptions":Wb=Ra[Ya];break;case "../layers/MosaicRule":ac=Ra[Ya];break;case "../layers/OpenStreetMapLayer":bc=Ra[Ya];break;case "../layers/RasterFunction":cc=Ra[Ya];break;case "../layers/RasterXLayer":Xb=Ra[Ya];break;case "../layers/StreamLayer":jc=Ra[Ya];break;case "../layers/TileInfo":qc=Ra[Ya];break;case "../layers/VectorTileLayer":Yb=
Ra[Ya];break;case "../virtualearth/VETiledLayer":Eb=Ra[Ya];break;case "../layers/WebTiledLayer":kc=Ra[Ya];break;case "../layers/WFSLayer":dc=Ra[Ya];break;case "../layers/WMSLayer":lc=Ra[Ya];break;case "../layers/WMSLayerInfo":mc=Ra[Ya]}})}var Ca=new k;ea=ea.itemData;Ja=[];ea.baseMap&&ea.baseMap.baseMapLayers&&(Ja=Ja.concat(ea.baseMap.baseMapLayers));ea.operationalLayers&&(Ja=Ja.concat(ea.operationalLayers));ea=r.map(Ja,function(Ka){return Ka&&Ka.layerType});var Ga=[],Na=[];Ja=!1;for(var Ma=0;Ma<ea.length;Ma++){switch(ea[Ma]){case "ArcGISFeatureLayer":-1===
r.indexOf(Ga,"../layers/LabelClass")&&Ga.push("../layers/LabelClass");break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===r.indexOf(Ga,"../layers/ArcGISImageServiceLayer")&&(Ga.push("../layers/ArcGISImageServiceLayer"),Na.push("../layers/ImageServiceParameters"),Na.push("../layers/MosaicRule"),Na.push("../layers/RasterFunction"),Ga.push("../layers/RasterXLayer"));break;case "ArcGISImageServiceVectorLayer":-1===r.indexOf(Ga,"../layers/ArcGISImageServiceVectorLayer")&&(Ga.push("../layers/ArcGISImageServiceVectorLayer"),
Na.push("../layers/ImageServiceParameters"),Na.push("../layers/MosaicRule"),Na.push("../layers/RasterFunction"));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===r.indexOf(Ga,"../layers/ArcGISDynamicMapServiceLayer")&&(Ga.push("../layers/ArcGISDynamicMapServiceLayer"),Na.push("../layers/DynamicLayerInfo"),Na.push("../layers/ImageParameters"),Na.push("../layers/LayerDrawingOptions"));break;case "ArcGISStreamLayer":-1===r.indexOf(Ga,"../layers/StreamLayer")&&Ga.push("../layers/StreamLayer");
-1===r.indexOf(Ga,"../layers/LabelClass")&&Ga.push("../layers/LabelClass");break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===r.indexOf(Ga,"../virtualearth/VETiledLayer")&&Ga.push("../virtualearth/VETiledLayer");break;case "CSV":-1===r.indexOf(Ga,"../layers/CSVLayer")&&(Ga.push("../layers/CSVLayer"),Na.push("./csv"));break;case "GeoRSS":-1===r.indexOf(Ga,"../layers/GeoRSSLayer")&&Ga.push("../layers/GeoRSSLayer");break;case "KML":-1===r.indexOf(Ga,"../layers/KMLLayer")&&Ga.push("../layers/KMLLayer");
break;case "OpenStreetMap":-1===r.indexOf(Ga,"../layers/OpenStreetMapLayer")&&Ga.push("../layers/OpenStreetMapLayer");break;case "VectorTileLayer":-1===r.indexOf(Ga,"../layers/VectorTileLayer")&&Ga.push("../layers/VectorTileLayer");break;case "WebTiledLayer":-1===r.indexOf(Ga,"../layers/WebTiledLayer")&&(Ga.push("../layers/WebTiledLayer"),Na.push("../layers/TileInfo"));break;case "WFS":-1===r.indexOf(Ga,"../layers/WFSLayer")&&Ga.push("../layers/WFSLayer");break;case "WMS":-1===r.indexOf(Ga,"../layers/WMSLayer")&&
(Ga.push("../layers/WMSLayer"),Na.push("../layers/WMSLayerInfo"));break;default:Ja=!0}if(Ja)break}Ja&&(Ga=Ib,Na=Pb);Ga.length?b(Ga,function(){Ia(Ga,arguments);Na.length?b(Na,function(){Ia(Na,arguments);Ca.resolve()}):Ca.resolve()}):Ca.resolve();return Ca}function ub(ea){ea=ea.itemData;var Ja=function(Ca,Ga){"GroupLayer"===Ca.layerType?r.forEach(Ca.layers,function(Na){Na.visibility=!1===Ca.visibility?!1:Na.visibility;Na.opacity=t.isDefined(Ca.opacity)?t.isDefined(Na.opacity)?Na.opacity*Ca.opacity:
Ca.opacity:Na.opacity;Ja(Na,Ga)}):Ga.push(Ca)},Ia=[];r.forEach(ea.operationalLayers,function(Ca){Ja(Ca,Ia)});ea.operationalLayers=Ia}function pb(ea,Ja,Ia,Ca){ub(Ca);var Ga=Ca.itemData;Ga.baseMap&&Ga.baseMap.baseMapLayers&&Ga.baseMap.baseMapLayers.length&&(Ga.baseMap.baseMapLayers[0].firstLayer=!0);var Na=Ja.layerMixins,Ma=Na&&Na.length;if(Ma){var Ka=function(Ra){for(var Wa=0;Wa<Ma;Wa++){var Ya=Na[Wa];if(Ya.mixin)if(Ya.hasOwnProperty("id")){if(Ra.id===Ya.id){y.mixin(Ra,Ya.mixin);break}}else if(Ra.url===
Ya.url){y.mixin(Ra,Ya.mixin);break}}};r.forEach(Ga.baseMap&&Ga.baseMap.baseMapLayers,Ka);r.forEach(Ga.operationalLayers,Ka)}kb(Ca,Ja).then(function(){return ka(Ca,Ja)}).then(function(){return aa(Ca,Ja)}).then(function(Ra){var Wa=Ra[0],Ya=Ra[1];if(Wa.itemData.operationalLayers&&0!==Wa.itemData.operationalLayers.length){var cb=new k,Ta=Wa.itemData.baseMap.baseMapLayers.slice(),db=r.filter(Wa.itemData.baseMap.baseMapLayers,function($a){return!$a.isReference});Ra={item:Wa.item,itemData:{baseMap:{baseMapLayers:db},
background:y.clone(Wa.itemData.background)}};Wa.itemData.baseMap.baseMapLayers=r.filter(Wa.itemData.baseMap.baseMapLayers,function($a){return $a.isReference});N(Ra,Ya).addCallback(function($a){T($a.itemData,Ya).addCallback(y.hitch(null,bb,$a,ea,Ya,cb))});cb.then(function($a){N(Wa,Ya).addCallback(function(ib){T(ib.itemData,Ya,$a.map.spatialReference,db,$a.map).addCallback(function(Cb){ib.itemData.baseMap.baseMapLayers=Ta;bb(ib,$a,Ya,Ia,Cb)})})},y.hitch(Ia,Ia.errback))}else N(Wa,Ya).addCallback(function($a){T($a.itemData,
Ya).addCallback(y.hitch(null,bb,$a,ea,Ya,Ia))})})}function eb(ea,Ja){"undefined"===typeof Ja&&(Ja=!0);Ab._arcgisUrl&&0<Ab._arcgisUrl.length&&(Ab.arcgisUrl=Ab._arcgisUrl);var Ia={},Ca=new k;x({url:Ab.arcgisUrl+"/"+ea,content:{f:"json"},callbackParamName:"callback",load:function(Ga){Ia.item=Ga;Ja?x({url:Ab.arcgisUrl+"/"+ea+"/data",content:{f:"json"},callbackParamName:"callback",load:function(Na){Ia.itemData=Na;Ca.callback(Ia)},error:function(Na){Ca.errback(Na)}}):Ca.callback(Ia)},error:function(Ga){Ca.errback(Ga)}});
return Ca}var nb,rb,Lb,Bb,zb,$b,vb,Hb,Mb,Fb,Wb,ac,bc,cc,Xb,jc,qc,Yb,Eb,kc,dc,lc,mc,Ib="../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/ArcGISImageServiceVectorLayer ../layers/CSVLayer ../layers/GeoRSSLayer ../layers/KMLLayer ../layers/LabelClass ../layers/OpenStreetMapLayer ../layers/RasterXLayer ../layers/StreamLayer ../layers/VectorTileLayer ../virtualearth/VETiledLayer ../layers/WebTiledLayer ../layers/WFSLayer ../layers/WMSLayer".split(" "),Pb="./csv ../layers/DynamicLayerInfo ../layers/ImageParameters ../layers/ImageServiceParameters ../layers/LayerDrawingOptions ../layers/MosaicRule ../layers/RasterFunction ../layers/TileInfo ../layers/WMSLayerInfo".split(" ");
var Ab={arcgisUrl:F.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:eb,createMap:function(ea,Ja,Ia){var Ca=new k;Ia=Ia||{};var Ga=Ia.infoTemplateClass;Ia._clazz=Ga&&(y.isObject(Ga)?Ga:y.getObject(Ga))||E;y.isString(ea)?eb(ea).addCallback(y.hitch(null,pb,Ja,Ia,Ca)).addErrback(y.hitch(Ca,Ca.errback)):pb(Ja,Ia,Ca,ea);Ca.addCallback(function(Na){var Ma=Na.map;Ma&&(Ma.tables=y.getObject("itemInfo.itemData.tables",!1,Na)||[])});return Ca},getLayerList:function(ea){return ea&&
ea.itemInfo&&ea.itemInfo.itemData?gb(ea.itemInfo.itemData):[]},getLegendLayers:function(ea){return ea&&ea.itemInfo&&ea.itemInfo.itemData?fb(ea.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:N,_getItemData:ca,_getBingKey:U,_portalUrlResponse:pa,_portalUrlFailure:ta,_processFSItemProperties:X,_processSSItemProperties:Z,_getLayers:T,_preBuildLayerObjects:Sa,_buildLayerObjects:Fa,_preCreateMap:bb,_getMapSR:ba,_createMap:Ua,_addSelectionLayers:za,_createSelectionFeatureLayers:qa,_getServiceInfo:va,
_getFeatureCollectionItem:R,_mergeFeatureCollectionItem:ia,_projectFeatureCollection:ja,_getLayersInfo:ua,_initLayer:xa,_loadAsCached:wa,_loadAsDynamic:Aa,_processPopups:Da,_onLayersAddResult:Ea,_sameSpatialReferenceAsBasemap:fa,_sameTilingSchemeAsBasemap:P,_showPopup:Oa,_calculateClickTolerance:Pa,_getVisibleFeatureLayers:la,_updateLayerScaleInfo:na,_checkUrl:ya,_isHostedService:oa,_isAgolService:ra,_getLegendLayers:fb};y.setObject("arcgis.utils",Ab,d);return Ab})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v){var z={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},C={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},E=a.connect,G=a.disconnect,H=d.create,K=n.set,I=k.hitch,J=u.getMarginBox,Q=y.deprecated,V=k.mixin,O=0;y=r(D,{declaredClass:"esri.Map",constructor:function(S,L){L=L||{};V(this,{_slider:null,_navDiv:null,_mapParams:V({attributionWidth:.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",
sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},L)});V(this,{isMapNavigation:null!=L.isMapNavigation?L.isMapNavigation:!0,isDoubleClickZoom:null!=L.isDoubleClickZoom?L.isDoubleClickZoom:!0,isClickRecenter:null!=L.isClickRecenter?L.isClickRecenter:!0,isPan:null!=L.isPan?L.isPan:!0,isRubberBandZoom:null!=L.isRubberBandZoom?L.isRubberBandZoom:!0,isPinchZoom:null!=L.isPinchZoom?L.isPinchZoom:!0,isKeyboardNavigation:null!=L.isKeyboardNavigation?L.isKeyboardNavigation:!0,isScrollWheel:null!=
L.isScrollWheel?L.isScrollWheel:!0,isShiftDoubleClickZoom:!1,isScrollWheelZoom:!1,isPanArrows:!1,isZoomSlider:!1});k.isFunction(A._css)&&(A._css=A._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);S=F("esri-transforms")&&F("esri-transitions");this.navigationMode=this._mapParams.navigationMode||S&&"css-transforms"||"classic";"css-transforms"!==this.navigationMode||S||(this.navigationMode="classic");this.fadeOnZoom=w.isDefined(this._mapParams.fadeOnZoom)?
this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=L&&L.smartNavigation;if(!(w.isDefined(this.smartNavigation)||!F("mac")||F("esri-touch")||F("esri-pointer")||3.5>=F("ff"))){var Y=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|_)([\d]+)\D/i);Y&&w.isDefined(Y[1])&&w.isDefined(Y[3])&&(S=parseInt(Y[1],10),Y=parseInt(Y[3],10),this.smartNavigation=10<S||10===S&&6<=Y)}this.showAttribution=
w.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=E(this,"onLoad",this,"_onLoadInitNavsHandler");var ca=H("div",{class:"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(S=k.getObject("esri.dijit.Attribution",!1))this._initAttribution(S,ca);else{var U=O++,X=this;this._rids&&this._rids.push(U);b(["./dijit/Attribution"],function(Z){var N=X._rids?e.indexOf(X._rids,U):-1;-1!==N&&(X._rids.splice(N,
1),X._initAttribution(Z,ca))})}this._mapParams.logo&&(S={},6===F("ie")&&(S.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+b.toUrl("./images/map/logo-med.png")+"')"),this._ogol=H("div",{style:S,tabIndex:"0",title:"Esri"},ca),this._setLogoSize(),this._onMapResizeLogo_connect=E(this,"onResize",this,"_setLogoSize"),this._ogol_connect=E(this._ogol,t,this,"_openLogoLink"));this.navigationManager=new q(this);L&&L.basemap&&(this._onLoadFix=
!0,this.setBasemap(L.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)L=this._getEnclosingResizableWidget(this.container)||window,S=this.resize,this._rszSignal=h.pausable(L,"resize",S),this._oriSignal=h.pausable(window,"orientationchange",S),m.after(L,"resize",S,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(S){var L=
x.getEnclosingWidget(S);return L?L.resize?L:this._getEnclosingResizableWidget(S.parentNode):L},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(c.remove(this._ogol,"logo-med"),c.add(this._ogol,"logo-sm")):(c.remove(this._ogol,"logo-sm"),c.add(this._ogol,"logo-med")))},_initAttribution:function(S,L){L=H("span",{class:"esriAttribution"},L,"first");K(L,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(E(L,t,function(){c.contains(this,
"esriAttributionOpen")?c.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&c.add(this,"esriAttributionOpen")}));this.attribution=new S({map:this},L)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var S=this._slider;S&&S.destroy&&!S._destroyed&&S.destroy();S=this._navDiv;var L=this.attribution;S&&d.destroy(S);L&&L.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);e.forEach(this._connects,G);
clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(S){var L=this.getLevel();return!this.__tileInfo||!(L===this.getMinZoom()&&0>S||L===this.getMaxZoom()&&0<S)},_onLoadInitNavsHandler:function(){this._evalMapNavigation();this._createNav();
if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var S=-1!==this._getSliderClass(!0).indexOf("Horizontal");S=[S?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",S?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",S?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(e.some(S,function(ca){return!k.getObject(ca,!1)})){S=e.map(S,function(ca){return ca.replace(/\./g,"/")});var L=O++,Y=this;this._rids&&
this._rids.push(L);b(S,function(){var ca=Y._rids?e.indexOf(Y._rids,L):-1;-1!==ca&&(Y._rids.splice(ca,1),Y._createSlider.apply(Y,arguments))})}else S=e.map(S,function(ca){return k.getObject(ca,!1)}),this._createSlider.apply(this,S)}G(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var S,L=c.add,Y=this.id;this._navDiv=H("div",{id:Y+"_navdiv"},this.root);L(this._navDiv,"navDiv");var ca=this.width/2,U=this.height/2;for(S in z){var X=z[S];var Z=H("div",{id:Y+"_pan_"+S},this._navDiv);
L(Z,"fixedPan "+X);if("up"===S||"down"===S){var N=parseInt(J(Z).w,10)/2;K(Z,{left:ca-N+"px",zIndex:30})}else N=parseInt(J(Z).h,10)/2,K(Z,{top:U-N+"px",zIndex:30});this._connects.push(E(Z,"onclick",I(this,this[X])))}this._onMapResizeNavHandler_connect=E(this,"onResize",this,"_onMapResizeNavHandler");for(S in C)X=C[S],Z=H("div",{id:Y+"_pan_"+S,style:{zIndex:30}},this._navDiv),L(Z,"fixedPan "+X),this._connects.push(E(Z,"onclick",I(this,this[X])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(S,
L,Y){S=this.id;L/=2;Y/=2;var ca=l.byId,U;for(U in z){var X=ca(S+"_pan_"+U);if("up"===U||"down"===U){var Z=parseInt(J(X).w,10)/2;K(X,"left",L-Z+"px")}else Z=parseInt(J(X).h,10)/2,K(X,"top",Y-Z+"px")}},_createSimpleSlider:function(){if(this._mapParams.slider){var S=this._slider=H("div",{id:this.id+"_zoom_slider",class:this._getSliderClass(),style:{zIndex:30}}),L=H("div",{class:"esriSimpleSliderIncrementButton",tabIndex:"0",role:"button"},S),Y=H("div",{class:"esriSimpleSliderDecrementButton",tabIndex:"0",
role:"button"},S);this._addZoomButtonTooltips(L,Y);this._incButton=L;this._decButton=Y;this._simpleSliderZoomHandler(null,null,null,this.getLevel());var ca=v.widgets.zoomSlider;this._addZoomButtonIcon(L,"+",ca.zoomIn);this._addZoomButtonIcon(Y,"\x26minus;",ca.zoomOut);8>F("ie")&&c.add(Y,"dj_ie67Fix");this._connects.push(E(L,t,this,this._simpleSliderChangeHandler));this._connects.push(E(Y,t,this,this._simpleSliderChangeHandler));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(E(this,
"onZoomEnd",this,this._simpleSliderZoomHandler));10>F("ie")&&l.setSelectable(S,!1);this.root.appendChild(S);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(S){g.stop(S);S=-1!==S.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:S?1:-1})},_simpleSliderZoomHandler:function(S,L,Y,ca){var U;S=this._incButton;L=this._decButton;-1<ca&&ca===this.getMaxZoom()?U=S:-1<ca&&ca===this.getMinZoom()&&(U=L);U?(c.add(U,"esriSimpleSliderDisabledButton"),c.remove(U===S?
L:S,"esriSimpleSliderDisabledButton")):(c.remove(S,"esriSimpleSliderDisabledButton"),c.remove(L,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(S){S=S?"Large":"Simple";var L=this._mapParams.sliderOrientation,Y=this._mapParams.sliderPosition||"";L=L&&"horizontal"===L.toLowerCase()?"esri"+S+"SliderHorizontal":"esri"+S+"SliderVertical";if(Y)switch(Y.toLowerCase()){case "top-left":Y="esri"+S+"SliderTL";break;case "top-right":Y="esri"+S+"SliderTR";break;case "bottom-left":Y="esri"+S+"SliderBL";
break;case "bottom-right":Y="esri"+S+"SliderBR"}return"esri"+S+"Slider "+L+" "+Y},_addZoomButtonIcon:function(S,L,Y){d.create("span",{"aria-hidden":"true",role:"presentation",innerHTML:L},S);d.create("span",{class:"esriIconFallbackText",innerHTML:Y},S)},_addZoomButtonTooltips:function(S,L){var Y=v.widgets.zoomSlider;f.set(S,"title",Y.zoomIn);f.set(L,"title",Y.zoomOut)},_createSlider:function(S,L,Y){if(this._mapParams.slider){var ca=H("div",{id:this.id+"_zoom_slider"},this.root),U=B.defaults.map,X=
this._getSliderClass(!0),Z=-1!==X.indexOf("Horizontal"),N=this.getNumLevels();if(0<N){var aa,ka,pa=this._mapParams.sliderLabels,ta=!!pa,Ba=!1!==pa;if(Ba){var Da=Z?"bottomDecoration":"rightDecoration";if(!pa)for(pa=[],U=0;U<N;U++)pa[U]="";e.forEach([{class:"esriLargeSliderTicks",container:Da,count:N,dijitClass:L},{class:ta&&"esriLargeSliderLabels",container:Da,count:N,labels:pa,dijitClass:Y}],function(ra){var ya=H("div"),wa=ra.dijitClass;delete ra.dijitClass;ca.appendChild(ya);wa===L?aa=new wa(ra,
ya):ka=new wa(ra,ya)})}S=this._slider=new S({id:ca.id,class:X,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:N,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},ca);S.startup();Ba&&(aa.startup(),ka.startup());this._slider_connect=E(S,"onChange",this,"_onSliderChangeHandler");this._connects.push(E(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(E(S._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{S=this._slider=
new S({id:ca.id,class:X,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:U.sliderChangeImmediate,style:"height:50px; z-index:30;"},ca);Y=S.domNode.firstChild.childNodes;for(U=1;3>=U;U++)K(Y[U],"visibility","hidden");S.startup();this._slider_connect=E(S,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(E(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}U=S.incrementButton;Y=S.decrementButton;Z?this._addZoomButtonTooltips(U,Y):this._addZoomButtonTooltips(Y,
U);U.style.outline="none";Y.style.outline="none";S.sliderHandle.style.outline="none";S._onKeyPress=function(){};if(Z=S._movable){var oa=Z.onMouseDown;Z.onMouseDown=function(ra){9>F("ie")&&1!==ra.button||oa.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){G(this._slider_connect);G(this._slidermovestop_connect);this._slider_connect=E(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=E(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler")},
_onSliderChangeDragHandler:function(S){this._extentUtil({targetLevel:S})},_onSliderMoveEndHandler:function(){G(this._slider_connect);G(this._slidermovestop_connect)},_onSliderChangeHandler:function(S){this.setLevel(S)},_updateSliderValue:function(S,L){G(this._slider_connect);var Y=this._slider,ca=Y._onChangeActive;Y._onChangeActive=!1;Y.set("value",S);Y._onChangeActive=ca;this._slider_connect=E(Y,"onChange",this,L)},_onExtentChangeSliderHandler:function(S,L,Y,ca){G(this._slidermovestop_connect);this._updateSliderValue(ca.level,
"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(S){this._extentUtil({numLevels:0<S?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(S){window.open(B.defaults.map.logoLink,"_blank");g.stop(S)},enableMapNavigation:function(){this.isMapNavigation||(this.isMapNavigation=!0,this._evalMapNavigation())},disableMapNavigation:function(){this.isMapNavigation&&(this.isMapNavigation=!1,this._evalMapNavigation())},_evalMapNavigation:function(){this.isMapNavigation?
this.navigationManager.enableNavigation():this.navigationManager.disableNavigation()},_evalNavigationFeature:function(S){if(this.isMapNavigation&&this["is"+S])this.navigationManager["enable"+S]();else this.navigationManager["disable"+S]()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.isDoubleClickZoom=!0,this._evalNavigationFeature("DoubleClickZoom"))},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&(this.isDoubleClickZoom=!1,this._evalNavigationFeature("DoubleClickZoom"))},
enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(Q(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(Q(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",
null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.isClickRecenter=!0,this._evalNavigationFeature("ClickRecenter"))},disableClickRecenter:function(){this.isClickRecenter&&(this.isClickRecenter=!1,this._evalNavigationFeature("ClickRecenter"))},enablePan:function(){this.isPan||(this.isPan=!0,this._evalNavigationFeature("Pan"))},disablePan:function(){this.isPan&&(this.isPan=!1,this._evalNavigationFeature("Pan"))},
enableRubberBandZoom:function(){this.isRubberBandZoom||(this.isRubberBandZoom=!0,this._evalNavigationFeature("RubberBandZoom"))},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.isRubberBandZoom=!1,this._evalNavigationFeature("RubberBandZoom"))},enablePinchZoom:function(){this.isPinchZoom||(this.isPinchZoom=!0,this._evalNavigationFeature("PinchZoom"))},disablePinchZoom:function(){this.isPinchZoom&&(this.isPinchZoom=!1,this._evalNavigationFeature("PinchZoom"))},enableKeyboardNavigation:function(){this.isKeyboardNavigation||
(this.isKeyboardNavigation=!0,this._evalNavigationFeature("KeyboardNavigation"))},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.isKeyboardNavigation=!1,this._evalNavigationFeature("KeyboardNavigation"))},enableScrollWheel:function(){this.isScrollWheel||(this.isScrollWheel=!0,this._evalNavigationFeature("ScrollWheel"))},disableScrollWheel:function(){this.isScrollWheel&&(this.isScrollWheel=!1,this._evalNavigationFeature("ScrollWheel"))},enableScrollWheelZoom:function(){this.isScrollWheelZoom||
(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},enableScrollWheelPan:function(){this.isScrollWheelPan||this.navigationManager.enableScrollWheelPan()},disableScrollWheelPan:function(){this.isScrollWheelPan&&this.navigationManager.disableScrollWheelPan()},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=
!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(K(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(K(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)},onClick:function(S){S.graphic||(S.graphic=this.syncHitTestForWebGL(S))}});return A.Map=y})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./Color ./promiseList ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/support/webglUtils ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v,z,C,E,G,H,K,I,J,Q,V,O,S,L,Y,ca,U,X,Z,N,aa,ka,pa,ta,Ba){function Da(T,ha){var na=T.lods;na.sort(function(Ea,Pa){return Ea.scale>Pa.scale?-1:Ea.scale<Pa.scale?1:0});var qa=[];na=h.filter(na,function(Ea){if(-1===fa(qa,Ea.scale))return qa.push(Ea.scale),!0});var ua=ha.lods=[],za;h.forEach(na,function(Ea,Pa){za=ua[Pa]=new N(Ea);za.level=Pa});ha.tileInfo=new Z(P(T,{lods:ua}))}var oa,ra=ca.toMapPoint,ya=ca.toScreenPoint,wa=k.connect,la=k.disconnect,
Aa=g.hitch,da=t.set,fa=h.indexOf,P=g.mixin,xa=0,Fa=w.defaults.map,ba=Fa.layerNamePrefix,Sa=Fa.graphicsLayerNamePrefix,Qa=new RegExp("^"+ba+"(\\d+)$"),va=new RegExp("^"+Sa+"(\\d+)$"),R=function(){},ia=0,ja=ta.isWebGLEnabled();a=a([v,H],{declaredClass:"esri._CoreMap",tables:null,resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
invalidBasemap:'Unable to add basemap: "${basemapName}".',unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,webglEnabled:ja,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],
load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,
"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(T,ha){ha=ha||{};this.registerConnectEvents();P(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_basemapPending:!1,_connects:[],_layerAddPromises:{},
_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,_minResolution:0,_maxResolution:0,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[],_webglContextOwners:[]});var na=this.container=f.byId(T),qa=this.id=c.get(na,"id")||A.getUniqueId(this.declaredClass);d.add(na,"map");
var ua=n.getContentBox(na);T=d.add;var za=u.create;this.position=new V(0,0);this._reposition();var Ea=this.width=0<ua.w?ua.w:Fa.width,Pa=this.height=0<ua.h?ua.h:Fa.height,Oa=this.root=za("div",{id:qa+"_root",style:{width:Ea+"px",height:Pa+"px",direction:"ltr"}});T(Oa,"esriMapContainer");ua=this.__container=za("div",{id:qa+"_container"},Oa);da(ua,"position","absolute");T(ua,"esriMapContainer");na.appendChild(Oa);ha=this._params=P({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,
maxScale:0,showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},ha);this.setWebGLEnabled(null!=ha.webglEnabled?ha.webglEnabled:this.webglEnabled);this.maxWebGLContexts=null!=ha.maxWebGLContexts?ha.maxWebGLContexts:-1;this.wrapAround180=ha.wrapAround180;this.optimizePanAnimation=ha.optimizePanAnimation;this.setBackgroundColor(ha.backgroundColor);q.isDefined(ha.resizeDelay)&&(this.resizeDelay=ha.resizeDelay);ha.lods&&(Da({rows:512,cols:512,dpi:96,format:"JPEG",
compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:ha.lods},ha),this.__tileInfo=ha.tileInfo);this.extent=ha.extent;this._extentUtil({mapCenter:ha.center,targetLevel:ha.zoom,targetScale:ha.scale});this.__visibleRect=new S(0,0,Ea,Pa);this.__visibleDelta=new S(0,0,Ea,Pa);qa=this._layersDiv=za("div",{id:qa+"_layers"});T(qa,"esriMapLayers");ua.appendChild(qa);this._zoomAnimDiv=za("div",{style:{position:"absolute"}});ha.infoWindow?this.infoWindow=ha.infoWindow:(T=this.infoWindow=
new Ba(ha.popupOptions,za("div")),T.startup(),T._ootb=!0,da(T.domNode,"zIndex",40));if(ha.showLabels){var Ha=this;b(["./layers/LabelLayer"],function(Ua){oa=Ua;Ha._createLabelLayer()});this.on("load",function(){Ha._createLabelLayer()})}this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:ha.showInfoWindowOnClick});this._zoomStartHandler=Aa(this,this._zoomStartHandler);this._zoomingHandler=Aa(this,this._zoomingHandler);this._zoomEndHandler=Aa(this,this._zoomEndHandler);this._panningHandler=
Aa(this,this._panningHandler);this._panEndHandler=Aa(this,this._panEndHandler);this._endTranslate=Aa(this,this._endTranslate);this._timedResize=Aa(this,this._timedResize);this._execResize=Aa(this,this._execResize);this._processLabelLayers=Aa(this,this._processLabelLayers);this._updateLabelLayers=Aa(this,this._updateLabelLayers);this.resize=Aa(this,this.resize);l.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(T){return b.toAbsMid?b.toAbsMid(T):y.id.replace(/\/[^\/]*$/ig,"/")+T},_cleanUp:function(){var T=
this.infoWindow;T&&(T._ootb&&T.destroy?T.destroy():T.unsetMap(this),delete this.infoWindow);la(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");u.destroy(this.root);this.root=null},_addLayer:function(T,ha,na){if(T.id){var qa=T.id.match(T instanceof X?va:Qa);qa&&qa[1]&&(qa=Number(qa[1]),xa<=qa&&(xa=qa+1))}var ua=T.id||(T instanceof X?Sa:ba)+xa++;T.id=ua;this._layers[ua]=T;T._isRefLayer="top"===na;na=!q.isDefined(na)||0>na||na>ha.length||"top"===na?ha.length:na;var za;if(!T._isRefLayer)for(;(za=
this.getLayer(ha[na-1]))&&za._isRefLayer;)na--;if(qa=!this._firstLayerId&&!this.loaded&&!this._basemapPending&&0===na&&(ha===this.layerIds||ha===this.graphicsLayerIds))this._firstLayerId=ua;ha.splice(na,0,ua);var Ea=Aa(this,this._addLayerHandler),Pa=this;na=this._connects;za=function(){T.loaded?Pa._onLoadFix?(Pa._onLoadFix=!1,setTimeout(function(){Ea(T)},0)):Ea(T):(Pa["_"+ua+"_addtoken_load"]=wa(T,"onLoad",Pa,"_addLayerHandler"),Pa["_"+ua+"_addtoken_err"]=wa(T,"onError",Pa,function(Oa){Ea(T,Oa,ha)}))};
this.loaded||qa||T.loaded&&-1===fa(this.graphicsLayerIds,ua)?za():na.push(wa(this,"onLoad",za));return T},_forgetLayer:function(T){T=T.id;la(this["_"+T+"_addtoken_load"]);la(this["_"+T+"_addtoken_err"]);var ha=this._layerAddPromises[T];ha&&(delete this._layerAddPromises[T],ha.cancel())},_addLayerHandler:function(T,ha,na){ha?this._attachLayerToMap(T,ha,na):T._prepareToAttach?(this._layerAddPromises[T.id]=T._prepareToAttach(this)).always(g.hitch(this,function(qa){qa&&"cancel"===qa.dojoType||this._attachLayerToMap(T,
null,na)})):T.declaredClass&&-1<T.declaredClass.toLowerCase().indexOf("vectortilelayer")&&!this.isWebGLContextAvailable()?(ha=Error("Too many WebGL contexts. Unable to add the layer: ",T.url),this._attachLayerToMap(T,ha,this.layerIds)):this._attachLayerToMap(T,ha,na)},_attachLayerToMap:function(T,ha,na){var qa=this.id,ua=T.id,za=fa(T instanceof X?this.graphicsLayerIds:this.layerIds,ua),Ea=za,Pa=!1,Oa=this._params;this._forgetLayer(T);if(ha)delete this._layers[ua],-1!==za&&(na.splice(za,1),this.onLayerAddResult(T,
ha));else{-1===za&&(za=fa(this._internalLayerIds,ua),Ea=20+za,Pa=!0);if(ua===this._firstLayerId){ha=T.spatialReference;na=this.extent&&this.extent.spatialReference;!na||na.equals(ha)||!T.tileInfo&&T.url||(na=null);na=this.spatialReference=na||ha;this.wrapAround180=this.wrapAround180&&na&&na._isWrappable()?!0:!1;T.tileInfo&&(this.__tileInfo?(ha=this.__tileInfo.lods,this.__tileInfo=P({},T.tileInfo),this.__tileInfo.lods=ha):(Da(P({},T.tileInfo),Oa),this.__tileInfo=Oa.tileInfo));if(this.wrapAround180){ha=
this.__tileInfo;na=na._getInfo();if(!ha||Math.abs(na.origin[0]-ha.origin.x)>na.dx)this.wrapAround180=!1;this.wrapAround180&&ha&&E._addFrameInfo(ha,na)}Oa.units=T.units;if((ha=this.__tileInfo&&this.__tileInfo.lods)&&ha.length){na=Oa.minScale;za=Oa.maxScale;var Ha=-1,Ua=-1,bb=!1,ab=!1,gb;for(gb=0;gb<ha.length;gb++)0<na&&!bb&&na>=ha[gb].scale&&(Ha=ha[gb].level,bb=!0),0<za&&!ab&&za>=ha[gb].scale&&(Ua=0<gb?ha[gb-1].level:-1,ab=!0);-1===Oa.minZoom&&(Oa.minZoom=0===na?ha[0].level:Ha);-1===Oa.maxZoom&&(Oa.maxZoom=
0===za?ha[ha.length-1].level:Ua);for(gb=0;gb<ha.length;gb++)Oa.minZoom===ha[gb].level&&(Oa.minScale=ha[gb].scale,this._minResolution=ha[gb].resolution),Oa.maxZoom===ha[gb].level&&(Oa.maxScale=ha[gb].scale,this._maxResolution=ha[gb].resolution)}else Oa.minZoom=Oa.maxZoom=Oa.zoom=-1}T instanceof X?(this._gc||(this._gc=new X._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=qa+"_gc"),this._attachGraphicsLayer(T).id=qa+"_"+ua):(Ea=T._setMap(this,this._layersDiv,Ea,this.__LOD),Ea.id=qa+"_"+
ua,this._layerDivs[ua]=Ea,this._reorderLayers(this.layerIds),Pa||-1===T.declaredClass.indexOf("VETiledLayer")||this._onBingLayerAdd(T));ua===this._firstLayerId&&(this.graphics=new X({id:qa+"_graphics",displayOnPan:Oa.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(T===this.graphics){na=this._layers[this._firstLayerId];qa=Oa.zoom;Ea=Oa.scale;ha=Oa.center;na=na.initialExtent||na.fullExtent;this._firstLayerId=null;this.extent&&(this.extent=this._convertGeometry(this,
this.extent));!this.extent&&na&&(ha&&(ha=this._convertGeometry(na,ha)),ha&&(na=na.centerAt(ha),ha=null));if(ha=this.extent||na&&new O(na.toJson()))-1<qa?ha=this.__getExtentForLevel(qa,null,ha).extent:0<Ea&&(ha=Y.getExtentForScale(this,Ea,ha));if(!ha)return;Oa=this._fixExtent(ha,Oa.fitExtent);this.extent=Oa.extent;this.__LOD=Oa.lod;this.__setExtent(this.extent);this.loaded=!0;this.attr("data-loaded","");this.infoWindow.setMap(this);this.onLoad(this)}Pa||(this.onLayerAdd(T),this.onLayerAddResult(T));
la(this[ua+"_addLayerHandler_connect"])}},_convertGeometry:function(T,ha){T=T&&T.spatialReference;var na=ha&&ha.spatialReference;T&&na&&!T.equals(na)&&(T._canProject(na)?T.isWebMercator()?ha=U.geographicToWebMercator(ha):4326===T.wkid&&(ha=U.webMercatorToGeographic(ha,!0)):ha=null);return ha},_attachGraphicsLayer:function(T){var ha=T.id;T=T._setMap(this,this._gc._surface);this._layerDivs[ha]=T;this._reorderLayers(this.graphicsLayerIds);return T},_detachGraphicsLayer:function(T){T.loaded&&T.getMap()&&
T._unsetMap(this,this._gc._surface)},_reorderLayers:function(T){var ha=this.onLayerReorder,na=u.place,qa=this._layerDivs,ua=this._layers,za=this._gc?this._gc._surface.getEventSource():null;if(T===this.graphicsLayerIds)h.forEach(T,function(Ua,bb){var ab=qa[Ua];Ua=ua[Ua];ab&&(this._gc._reorderLayer(Ua,ab,bb),ha(Ua,bb))},this);else{var Ea=this.graphics,Pa=Ea?Ea.id:null,Oa=this._layersDiv,Ha;h.forEach(T,function(Ua,bb){Ha=qa[Ua];Ua!==Pa&&Ha&&(na(Ha,Oa,bb),ha(ua[Ua],bb))});this._mapImageLyr&&this._placeMapImageLyr();
za&&(za=9>x("ie")?za.parentNode:za,na(za,za.parentNode,"last"))}this.onLayersReordered([].concat(T))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(T){var ha=parseFloat(T.left),na=parseFloat(T.top);T=new O(ha,na-parseFloat(T.height),ha+parseFloat(T.width),na,this.spatialReference);ha=this.extent.getWidth()/T.getWidth();this.__zoom(T,ha,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var T=this._zoomAnimDiv,
ha=T.extent,na=this.extent.getWidth()/ha.getWidth(),qa=T.anchor,ua=T.newLod,za=T.levelChange;T.extent=T.anchor=T.levelChange=T.startingExtent=T.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(ha,na,qa,ua,za)},_panningHandler:function(T){if(isNaN(parseFloat(T.left))||isNaN(parseFloat(T.top))){var ha=Math.round,na=this._panAnim.node;T.left=-1*(this._delta.x-ha(this.width/2))+"px";T.top=-1*(this._delta.y-ha(this.height/2))+"px";t.set(na,"left",T.left);t.set(na,"top",T.top)}T=new V(parseFloat(T.left),
parseFloat(T.top));ha=this.toMap(T);this.onPan(this.extent.offset(this.extent.xmin-ha.x,this.extent.ymax-ha.y),T)},_panEndHandler:function(T){this.__panning=!1;var ha=Math.round;T=new V(-ha(parseFloat(T.style.left)),-ha(parseFloat(T.style.top)));ha=T.x;var na=T.y,qa=this.__visibleRect,ua=this.__visibleDelta;qa.x+=-ha;qa.y+=-na;ua.x+=-ha;ua.y+=-na;da(this._zoomAnimDiv,{left:"0px",top:"0px"});qa=this.extent;ua=this._ratioW;var za=this._ratioH;qa=new O(qa.xmin+ha/ua,qa.ymin-na/za,qa.xmax+ha/ua,qa.ymax-
na/za,this.spatialReference);T.setX(-T.x);T.setY(-T.y);this._delta=this._panAnim=null;this._updateExtent(qa);this.onPanEnd(qa,T);this._fireExtChg([qa,T,!1,this.__LOD])},_fixExtent:function(T,ha){for(var na=this._reshapeExtent(T),qa=1.25;!0===ha&&(na.extent.getWidth()<T.getWidth()||na.extent.getHeight()<T.getHeight())&&0<na.lod.level&&3>=qa;)na=this._reshapeExtent(T.expand(qa)),qa+=.25;return na},_getFrameWidth:function(){var T=-1,ha=this.spatialReference._getInfo();this.__LOD?(ha=this.__LOD._frameInfo)&&
(T=ha[3]):ha&&(T=Math.round(2*ha.valid[1]/(this.extent.getWidth()/this.width)));return T},_fixAspectRatio:function(T){var ha=T.getWidth(),na=T.getHeight(),qa=ha/na,ua=this.width/this.height,za=0,Ea=0;this.width>this.height?ha>na?ua>qa?za=na*ua-ha:Ea=ha/ua-na:za=na*ua-ha:this.width<this.height?ha<na?ua>qa?za=na*ua-ha:Ea=ha/ua-na:Ea=ha/ua-na:ha<na?za=na-ha:ha>na&&(Ea=ha/ua-na);za&&(T.xmin-=za/2,T.xmax+=za/2);Ea&&(T.ymin-=Ea/2,T.ymax+=Ea/2);return T},_reshapeExtent:function(T){T=this._fixAspectRatio(T);
return this._getAdjustedExtent(T)},_getAdjustedExtent:function(T){if(this.__tileInfo)return E.getCandidateTileInfo(this,this.__tileInfo,T);var ha=Y.getScale(this,T),na=this.getMinScale(),qa=this.getMaxScale();!na||ha<=na?!qa||ha>=qa||(T=Y.getExtentForScale(this,qa,T)):T=Y.getExtentForScale(this,na,T);return{extent:T}},_onBingLayerAdd:function(T){this["__"+T.id+"_vis_connect"]=k.connect(T,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(T.visible)},_onBingLayerRemove:function(T){k.disconnect(this["__"+
T.id+"_vis_connect"]);delete this["__"+T.id+"_vis_connect"];var ha=h.some(this.layerIds,function(na){return(T=this._layers[na])&&T.visible&&-1!==T.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(ha)},_toggleBingLogo:function(T){T&&!this._bingLogo?(T={left:this._mapParams&&this._mapParams.nav?"25px":""},6===x("ie")&&(T.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+b.toUrl("./images/map/bing-logo-lg.png")+"')"),T=this._bingLogo=
u.create("div",{style:T},this.root),d.add(T,"bingLogo-lg")):!T&&this._bingLogo&&(u.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(T,ha){var na=this._zoomAnim,qa=this._panAnim;if(na&&na._active)na.stop(),na._fire("onEnd",[na.node]);else if(qa&&qa._active){qa.stop();this._panAnim=null;ha=qa.curve.getValue(qa._getStep());T=Math.round(parseFloat(ha.left));ha=Math.round(parseFloat(ha.top));na=this.navigationManager._dragOrigin;this.__pan(T,ha);na&&(na.x-=T,na.y-=ha);return}this.__panning=
!0;this.onPanStart(this.extent,new V(T,ha))},__pan:function(T,ha){var na=this.extent,qa=this._ratioW,ua=this._ratioH;this.onPan(new O(na.xmin-T/qa,na.ymin+ha/ua,na.xmax-T/qa,na.ymax+ha/ua,this.spatialReference),new V(T,ha))},__panEnd:function(T,ha){var na=this.__visibleRect,qa=this.__visibleDelta;na.x+=T;na.y+=ha;qa.x+=T;qa.y+=ha;na=new V(T,ha);qa=this.extent;var ua=this._ratioW,za=this._ratioH;qa=new O(qa.xmin-T/ua,qa.ymin+ha/za,qa.xmax-T/ua,qa.ymax+ha/za,this.spatialReference);this.__panning=!1;
this._updateExtent(qa);this.onPanEnd(qa,na);this._fireExtChg([qa,na,!1,this.__LOD])},__zoomStart:function(T,ha){this.__zooming=!0;this.onZoomStart(T,1,ha,this.__LOD?this.__LOD.level:null)},__zoom:function(T,ha,na){this.onZoom(T,ha,na)},__zoomEnd:function(T,ha,na,qa,ua){da(this._layersDiv,{left:"0px",top:"0px"});this._delta=new V(0,0);this.__visibleRect.x=this.__visibleRect.y=0;T=new O(T);this.__LOD=qa;this._ratioW=this.width/T.getWidth();this._ratioH=this.height/T.getHeight();var za=this._delta;this._delta=
null;this.__zooming=!1;this._updateExtent(T,ua);this.onZoomEnd(T,ha,na,qa?qa.level:null);this._fireExtChg([T,za,ua,qa])},_extentUtil:function(T,ha,na,qa,ua){var za=new e,Ea=this.width,Pa=this.height;if(T){var Oa=T.numLevels;var Ha=T.targetLevel;var Ua=q.isDefined(Ha);var bb=T.factor;var ab=T.mapAnchor;var gb=T.screenAnchor;var fb=T.mapCenter;var kb=T.levelOrFactor;var ub=T.targetScale;var pb=q.isDefined(ub)&&0<ub}if(ha){var eb=ha.dx;var nb=ha.dy;fb=ha.mapCenter}g.isArray(fb)&&(fb=new Q(fb));var rb=
this._panAnim;ha=(T=this._stopAnim())?T.divExtent:this.extent;var Lb=this.__tileInfo,Bb=this._params;if(!this.loaded){if(na)ha&&(na=this._convertGeometry(ha,na)),na&&(this.extent=na,Bb.zoom=Bb.scale=-1,Bb.center=null);else if(fb||Ua||pb){if(fb)if(ha){if(fb=this._convertGeometry(ha,fb))this.extent=ha.centerAt(fb),Bb.center=null}else Bb.center=fb;Ua&&-1<Ha?(Bb.zoom=Ha,Bb.scale=-1):pb&&(Bb.scale=ub,Bb.zoom=-1)}za.resolve();return za}if(fb&&(fb=this._convertGeometry(this,fb),!fb)||ab&&(ab=this._convertGeometry(this,
ab),!ab)||na&&(na=this._convertGeometry(this,na),!na))return za.reject(),za;rb&&ab&&gb&&(ab=ra(this.extent,Ea,Pa,gb));T&&ab&&gb&&(ab=ra(T.divExtent,Ea,Pa,gb));if(Ua)if(Lb)Oa=this.getMinZoom(),Ua=this.getMaxZoom(),Ha<Oa?Ha=Oa:Ha>Ua&&(Ha=Ua),Oa=Ha-(T?T.level:this.getLevel());else{Oa=0<Ha?-1:1;var zb=kb?Ha:null}if(!na)if(q.isDefined(Oa))Lb?(Ea=T?T.level:this.getLevel(),Ea=this.__getExtentForLevel(Ea+Oa,fb,ha).extent):(Ea=(T?T.end:this.extent).expand(zb||(0<Oa?.5*Oa:2*-Oa)),zb&&fb&&(Ea=Ea.centerAt(fb))),
Ea&&(fb?na=Ea:(eb=ab||ha.getCenter(),Pa=Ea.getWidth(),nb=Ea.getHeight(),Ea=eb.x>=ha.xmin&&eb.x<=ha.xmax?(eb.x-ha.xmin)/ha.getWidth():.5,na=eb.y>=ha.ymin&&eb.y<=ha.ymax?(eb.y-ha.ymin)/ha.getHeight():.5,Ea=eb.x-Ea*Pa,eb=eb.y-na*nb,na=new O(Ea,eb,Ea+Pa,eb+nb,this.spatialReference)));else if(pb)na=Y.getExtentForScale(this,ub,ha);else if(q.isDefined(bb))na=ha.expand(bb);else if(eb||nb)T?(na=T.end,ab=na.getCenter(),zb=ya(na,Ea,Pa,ab),zb.x+=eb,zb.y+=nb,zb=ra(na,Ea,Pa,zb),na=na.offset(zb.x-ab.x,zb.y-ab.y)):
(eb=new V(Ea/2+eb,Pa/2+nb),eb=ra(ha,Ea,Pa,eb),Pa=ha.getWidth(),nb=ha.getHeight(),Ea=eb.x-Pa/2,eb=eb.y-nb/2,na=new O(Ea,eb,Ea+Pa,eb+nb,this.spatialReference));na||(fb?(ha=T?T.end:ha,Pa=ha.getWidth(),nb=ha.getHeight(),Ea=fb.x-Pa/2,eb=fb.y-nb/2,na=new O(Ea,eb,Ea+Pa,eb+nb,this.spatialReference)):T&&(na=T.end));na?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,R),this._extentDfd.reject()),this._extentDfd=za,this.__setExtent(na,null,gb,qa,T,ua)):za.reject();return za},__setExtent:function(T,
ha,na,qa,ua,za){try{if(this._firstLayerId)this.extent=T;else{var Ea=!0,Pa=this.spatialReference,Oa=ua?ua.divExtent:this.extent,Ha=this._fixExtent(T,qa||!1);T=Ha.extent;var Ua=T.getWidth(),bb=T.getHeight(),ab=Math.round;if(Oa){var gb=ab(1E6*Oa.getWidth()),fb=ab(1E6*Ua),kb=ab(1E6*Oa.getHeight()),ub=ab(1E6*bb);Ea=gb!==fb||kb!==ub}var pb,eb=ua&&ua.rect,nb=ua&&ua.divExtent;if(Fa.zoomDuration&&Ea&&Oa){nb=nb||new O(Oa);eb=eb||{left:Oa.xmin,top:Oa.ymax,width:Oa.getWidth(),height:Oa.getHeight()};var rb={left:T.xmin,
top:T.ymax,width:Ua,height:bb};var Lb=new Q(T.xmin,T.ymax,Pa),Bb=new Q(T.xmin,T.ymin,Pa),zb=new Q(this.extent.xmin,this.extent.ymax,Pa),$b=new Q(this.extent.xmin,this.extent.ymin,Pa);(pb=L.getLineIntersection(zb,Lb,$b,Bb,Pa))||ua||(Ea=!1)}this._ratioW=this.width/Ua;this._ratioH=this.height/bb;var vb=this._zoomAnimDiv;if(Ea)if(da(this._layersDiv,{left:"0px",top:"0px"}),ha=new V(0,0),this.__visibleRect.x=this.__visibleRect.y=0,eb&&rb){this._delta=ha;vb.id="_zAD";vb.startingExtent=nb;vb.extent=T;vb.levelChange=
Ea;vb.newLod=Ha.lod;vb.anchor=na?na:!pb&&ua?ua.anchor:ya(this.extent,this.width,this.height,pb);var Hb=this.extent.getWidth()/T.getWidth();Fa.zoomAnimationThrottled&&1024<(1>Hb?1/Hb:Hb)?(this.__zoomStart(nb,vb.anchor),this.__zoom(nb,1,vb.anchor),this._fireOnScale(1,vb.anchor,!0),this.__zoomEnd(T,Hb,vb.anchor,Ha.lod,Ea)):(this._zoomAnim=z.resize({node:vb,start:eb,end:rb,duration:Fa.zoomDuration,rate:Fa.zoomRate,beforeBegin:ua?null:this._zoomStartHandler,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),
this._fireOnScale(Hb,vb.anchor,za))}else this._updateExtent(T,Ea,za),this._fireExtChg([this.extent,ha,Ea,this.__LOD=Ha.lod]);else if(!this.__panning)if(!1===this.loaded||za)this._updateExtent(T,Ea,za),this._fireExtChg([this.extent,ha,Ea,this.__LOD=Ha.lod]);else{this.__panning=!0;eb=(new S(0,0,this.width,this.height,this.spatialReference)).getCenter();eb.x=ab(eb.x);eb.y=ab(eb.y);var Mb=this._delta=this.toScreen(T.getCenter()),Fb=Math.abs(eb.x-Mb.x),Wb=Math.abs(eb.y-Mb.y);this.optimizePanAnimation&&
(Fb>2*this.width||Wb>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(T,!1,za),this.onPanEnd(this.extent,new V(0,0)),this._fireExtChg([this.extent,new V(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new V(0,0)),this._panAnim=z.slideTo({node:vb,left:eb.x-Mb.x,top:eb.y-Mb.y,duration:Fa.panDuration,rate:Fa.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),
this._panAnim.play())}}}catch(ac){}},_fireOnScale:function(T,ha,na){if("css-transforms"===this.navigationMode){var qa=this.__visibleDelta;this.onScale(B.scaleAt(T,{x:-1*(this.width/2-(ha.x-qa.x)),y:-1*(this.height/2-(ha.y-qa.y))}),na)}},_stopAnim:function(){var T=this._zoomAnim,ha=this._panAnim;if(T&&T._active){T.stop();ha=T.curve.getValue(T._getStep());var na=parseFloat(ha.left),qa=parseFloat(ha.top);T=T.node;return{anchor:T.anchor,start:T.startingExtent,end:T.extent,level:T.newLod&&T.newLod.level,
rect:ha,divExtent:new O(na,qa-parseFloat(ha.height),na+parseFloat(ha.width),qa,this.spatialReference)}}ha&&ha._active&&(ha.stop(),ha._fire("onEnd",[ha.node]))},__getExtentForLevel:function(T,ha,na){var qa=this.__tileInfo;qa=qa&&qa.lods;T=q.isDefined(T)?T:0;na=na||this.extent;ha=ha||na&&na.getCenter();if(qa){if(ha){na=this.getMinZoom();var ua=this.getMaxZoom();T>ua&&(T=ua);T<na&&(T=na);T=qa[T];qa=this.width*T.resolution/2;na=this.height*T.resolution/2;return{extent:new O(ha.x-qa,ha.y-na,ha.x+qa,ha.y+
na,ha.spatialReference),lod:T}}}else return na?{extent:na.expand(!T||1>T?1:T).centerAt(ha)}:void 0},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var T=--this._jobs;T?0>T&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(T,ha){this[T]&&this[T].apply(this,ha)},_updateExtent:function(T,ha,na){this.extent=T;T=this.spatialReference;this._viewInfo={view:new J({viewingMode:"map",
scale:this.getScale()}),sr:T,version:ha?++ia:ia};(ha||na)&&this._setClipRect();this._calcGeographicExtent()},_calcGeographicExtent:function(){var T=this.spatialReference;T&&(T.isWebMercator()?this.geographicExtent=U.webMercatorToGeographic(this._getAvailExtent(),!0):4326===T.wkid&&(this.geographicExtent=new O(this._getAvailExtent().toJson())))},_fireExtChg:function(T){this.attr("data-zoom",this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",T);if(T=this._extentDfd)delete this._extentDfd,
T.resolve()},attr:function(T,ha){var na=this.container;na&&(null==ha?na.removeAttribute(T):na.setAttribute(T,ha));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();this._calcGeographicExtent()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(T,ha,na){},onTimeExtentChange:function(){},onWebGLEnabledChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},
onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.onBeforeUnload(this),this.removeAllLayers(),this.releaseAllWebGLContexts(),this._cleanUp(),clearTimeout(this._resizeTimerHandle),
this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(T){da(this.__container,"cursor",this.cursor=T)},setMapCursor:function(T){this.setCursor(this._cursor=T)},resetMapCursor:function(){this.setCursor(this._cursor)},setBackgroundColor:function(T){T&&!T.declaredClass&&(T=new K(T));this.backgroundColor=T||null;var ha="";T&&(ha=9>x("ie")?T.toHex():"rgba("+T.toRgba().join(",")+")");t.set(this.root,{backgroundColor:ha})},setInfoWindow:function(T){var ha=this.infoWindow;
ha&&ha.unsetMap(this);this.infoWindow=T;this.loaded&&T&&T.setMap(this)},setInfoWindowOnClick:function(T){this._params.showInfoWindowOnClick=T;this.popupManager&&this.popupManager.set("enabled",T)},getInfoWindowAnchor:function(T){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(T)||"upperright"},toScreen:function(T,ha){return ya(this.extent,this.width,this.height,T,ha)},toMap:function(T){return ra(this.extent,this.width,this.height,T)},addLayer:function(T,ha){T&&!this.getLayer(T.id)&&
this._addLayer(T,T instanceof X?this.graphicsLayerIds:this.layerIds,ha);return T},addLayers:function(T){var ha=[],na=T.length,qa,ua=T.length;var za=k.connect(this,"onLayerAddResult",function(Ea,Pa){-1!==h.indexOf(T,Ea)&&(na--,ha.push({layer:Ea,success:!Pa,error:Pa}),na||(k.disconnect(za),this.onLayersAddResult(ha)))});for(qa=0;qa<ua;qa++)this.addLayer(T[qa]);return this},removeLayer:function(T,ha){var na=T.id,qa=T instanceof X?this.graphicsLayerIds:this.layerIds,ua=fa(qa,na);0<=ua&&(this._forgetLayer(T),
qa.splice(ua,1),this.loaded||this._firstLayerId!==na||(this._firstLayerId=null),T instanceof X?this._detachGraphicsLayer(T):T.loaded&&(T.getMap()&&T._unsetMap(this,this._layersDiv),-1!==T.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(T)),delete this._layers[na],delete this._layerDivs[na],ha||this._reorderLayers(qa),this.onLayerRemove(T))},removeAllLayers:function(){var T=this.layerIds,ha;for(ha=T.length-1;0<=ha;ha--)this.removeLayer(this._layers[T[ha]],1);T=this.graphicsLayerIds;
for(ha=T.length-1;0<=ha;ha--)this.removeLayer(this._layers[T[ha]],1);this.onLayersRemoved()},reorderLayer:function(T,ha){g.isString(T)&&(r.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),T=this.getLayer(T));var na=T.id,qa=T instanceof X?this.graphicsLayerIds:this.layerIds;0>ha?ha=0:ha>=qa.length&&(ha=qa.length-1);T=fa(qa,na);-1!==T&&T!==ha&&(qa.splice(T,1),qa.splice(ha,0,na),this._reorderLayers(qa))},
getLayer:function(T){return this._layers[T]},setWebGLEnabled:function(T){var ha=this.webglEnabled;this.webglEnabled=(T||!1)&&ja;if(ha!==this.webglEnabled)this.onWebGLEnabledChange()},isWebGLContextAvailable:function(){return ta.isContextAvailable()&&(-1===this.maxWebGLContexts||0<this.maxWebGLContexts&&this._webglContextOwners.length<this.maxWebGLContexts)},ownsWebGLContext:function(T){return-1!==h.indexOf(this._webglContextOwners,T)},acquireWebGLContext:function(T){return-1!==h.indexOf(this._webglContextOwners,
T)?!0:this.isWebGLContextAvailable()?(ta.acquireContext(T),this._webglContextOwners.push(T),!0):!1},releaseWebGLContext:function(T){var ha=h.indexOf(this._webglContextOwners,T);-1!==ha&&this._webglContextOwners.splice(ha,1);ta.releaseContext(T)},releaseAllWebGLContexts:function(){var T=this._webglContextOwners.slice(0);h.forEach(T,function(ha){this.releaseWebGLContext(ha)},this)},syncHitTestForWebGL:function(T){var ha,na=T.screenPoint;T=this.graphicsLayerIds.slice(0).reverse();h.some(T,function(qa){qa=
this.getLayer(qa);qa.loaded&&!qa.suspended&&qa.hasWebGLSurface()&&(ha=qa._div.syncHitTest(na.x,na.y));return!!ha},this);return ha},setExtent:function(T,ha){T=new O(T.toJson());var na=T.getWidth(),qa=T.getHeight();return 0===na&&0===qa?this.centerAt(new Q({x:T.xmin,y:T.ymin,spatialReference:T.spatialReference&&T.spatialReference.toJson()})):this._extentUtil(null,null,T,ha)},getTargetExtent:function(T){if(T)return T=new O(T.toJson()),0!==T.getWidth()&&0!==T.getHeight()&&(T=(T=this._convertGeometry(this,
T))&&this._fixExtent(T).extent),T},centerAt:function(T){return this._extentUtil(null,{mapCenter:T})},centerAndZoom:function(T,ha){return this._extentUtil({targetLevel:ha,mapCenter:T,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:Y.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*Y.getUnitValueForSR(this.spatialReference)},getResolutionForPopup:function(){var T=
this.getResolution(),ha=this.getResolutionInMeters(),na=ha/16;return 10>=na?0:T/ha*na},getMinResolution:function(){return this._minResolution},getMaxResolution:function(){return this._maxResolution},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},getViewInfo:function(){return this._viewInfo},setScale:function(T){return this._extentUtil({targetScale:T})},getLayersVisibleAtScale:function(T){var ha=[];(T=T||this.getScale())&&h.forEach(this.layerIds.concat(this.graphicsLayerIds),
function(na){na=this.getLayer(na);na.isVisibleAtScale(T)&&ha.push(na)},this);return ha},getNumLevels:function(){var T=this.getMinZoom(),ha=this.getMaxZoom();return T===ha&&0>T?0:ha-T+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(T){if(-1<T)return this._extentUtil({targetLevel:T})},getZoom:function(){return this.getLevel()},setZoom:function(T){return this.setLevel(T)},getMinZoom:function(){return this._params.minZoom},getMaxZoom:function(){return this._params.maxZoom},
setBasemap:function(T){if(g.isObject(T)){var ha=T;T=ha.title}else ha=D&&D[T];if(ha){this._basemapDfd&&!this._basemapDfd.isFulfilled()&&this._basemapDfd.cancel();var na=[],qa=0;h.forEach(ha.baseMapLayers||ha.layers,function(za){var Ea={id:za.id,displayLevels:za.displayLevels,opacity:q.isDefined(za.opacity)?za.opacity:null,visible:q.isDefined(za.visibility)?za.visibility:null};if(Ea=this._createBaseLayerInstance(za,Ea,T))na.push(Ea),za.isReference||qa++},this);na.length&&qa&&(this._basemapDfd=I(na).otherwise(Aa(this,
function(za){this._basemapPending=!1;za&&"cancel"===za.dojoType&&h.forEach(na,function(Ea){Ea.cancel()});throw za;})).then(function(za){var Ea=[],Pa=[];h.forEach(za,function(Oa){Oa&&(Oa.layerInfo&&Ea.push(Oa.layerInfo),Oa.layer&&Pa.push(Oa.layer))});return{basemapName:T,infos:Ea,layers:Pa}}).then(Aa(this,this._waitForBaseLayers)).then(Aa(this,this._setBasemap)),this._basemapPending=!this.loaded&&!this._basemapDfd.isFulfilled())}else{ha=[];for(var ua in D)ha.push(ua)}},_createBaseLayerInstance:function(T,
ha,na){var qa=new e;if(T.type)switch(T.type){case "OpenStreetMap":qa.resolve({layerInfo:T,layer:new pa(ha)});break;case "VectorTile":b(["./layers/VectorTileLayer"],function(za){ua=G.normalize(T.url);qa.promise.isFulfilled()||qa.resolve({layerInfo:T,layer:new za(ua,ha)})});break;default:return null}else{var ua=G.normalize(T.url);qa.resolve({layerInfo:T,layer:new aa(ua,ha)})}return qa.promise},_waitForBaseLayers:function(T){var ha=new e(C._dfdCanceller);ha.promise.otherwise(function(qa){if(qa&&"cancel"===
qa.dojoType){for(var ua in ha._layerEvents)qa=ha._layerEvents[ua],k.disconnect(qa[0]),k.disconnect(qa[1]);delete ha._layerEvents}});if(!this.loaded)return ha.resolve(T),ha.promise;var na=function(qa){ha._pendingLayers--;qa=h.indexOf(T.layers,this);-1<qa&&(qa=ha._layerEvents[qa])&&(k.disconnect(qa[0]),k.disconnect(qa[1]));0>=ha._pendingLayers&&(delete ha._layerEvents,ha.isFulfilled()||ha.resolve(T))};ha._pendingLayers=0;ha._layerEvents={};h.forEach(T.layers,function(qa,ua){qa&&ha._pendingLayers++});
h.forEach(T.layers,function(qa,ua){qa&&(qa.loaded?na(qa):ha._layerEvents[ua]=[k.connect(qa,"onLoad",qa,na),k.connect(qa,"onError",qa,na)])});return ha.promise},_setBasemap:function(T){var ha=T.layers,na=T.infos,qa=0,ua=!0;this._basemapPending=!1;this.loaded&&(h.forEach(ha,function(Ea,Pa){Ea.loaded&&(na[Pa].isReference||qa++)}),ua=qa);if(ua){if(this.basemapLayerIds){var za={basemapName:this._basemap,infos:D&&D[this._basemap]&&D[this._basemap].baseMapLayers};za.basemapName||(h.forEach(this.basemapLayerIds,
function(Ea){if(this.getLayer(Ea)instanceof pa)return za.basemapName="osm",za.infos=D&&D.osm&&D.osm.baseMapLayers,!1},this),za.basemapName||(za=null))}this._removeBasemap();this._basemap=T.basemapName;this.basemapLayerIds=this._addBasemapLayers(ha,na);this.attr("data-basemap",this.getBasemap());this.emit("basemap-change",{current:T,previous:za})}},_addBasemapLayers:function(T,ha){var na=[],qa=[],ua=0;h.forEach(T,function(za,Ea){ha[Ea].isReference?na.push(za):(this.addLayer(za,ua++),qa.push(za.id))},
this);na.length&&h.forEach(na,function(za){za.attr("data-reference",!0);this.addLayer(za,"top");qa.push(za.id)},this);return qa},_removeBasemap:function(){var T=this.basemapLayerIds,ha;T&&T.length&&h.forEach(T,function(na){(ha=this.getLayer(na))&&this.removeLayer(ha)},this)},getBasemap:function(){return this._basemap||""},translate:function(T,ha){T=T||0;ha=ha||0;if(!this._txTimer){this._tx=this._ty=0;var na=this.toScreen(this.extent.getCenter());this.__panStart(na.x,na.y)}this._tx+=T;this._ty+=ha;
this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var T=this._tx,ha=this._ty;this._tx=this._ty=0;this.__panEnd(T,ha)},setTimeExtent:function(T){T=(this.timeExtent=T)?new T.constructor(T.toJson()):null;this.onTimeExtentChange(T)},setTimeSlider:function(T){this.timeSlider&&(la(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);T&&(this.timeSlider=
T,this.setTimeExtent(T.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=wa(T,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(T){if(this.visible!==T){this.visible=T;T||(this._display=this.container.style.display);this.container.style.display=T?this._display:"none";if(this.autoResize){var ha=T?"resume":"pause";this._rszSignal[ha]();this._oriSignal[ha]()}T&&this.resize()}return this},resize:function(T){clearTimeout(this._resizeTimerHandle);this._destroyed||(!0===T?this._execResize():
this._resizeTimerHandle=setTimeout(this._execResize,this.resizeDelay))},_timedResize:function(){this._resizeTimerHandle||this._execResize()},_execResize:function(){clearTimeout(this._resizeTimerHandle);this._resizeTimerHandle=null;this.reposition();this._resize();this.autoResize&&this._startResizeTimer()},_resize:function(){var T=this.width,ha=this.height,na=t.get(this.container,"display"),qa=n.getContentBox(this.container);if(!("none"===na||0>=qa.w||0>=qa.h||T===qa.w&&ha===qa.h)){if(na=this._zoomAnim||
this._panAnim)na.stop(),na._fire("onEnd",[na.node]);da(this.root,{width:(this.width=qa.w)+"px",height:(this.height=qa.h)+"px"});qa=this.width;na=this.height;this.attribution&&this.attribution.domNode&&t.set(this.attribution.domNode,"maxWidth",Math.floor(qa*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,qa,na);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,qa,na);var ua=new S(this.extent);T=(new S(ua.x,ua.y,qa/T*ua.width,
na/ha*ua.height,this.spatialReference)).getExtent();this.onResize(T,qa,na);this._extentUtil(null,null,T,null,!0)}},reposition:function(){var T=this.position,ha=T.x,na=T.y;this._reposition();T=this.position;if(ha!==T.x||na!==T.y)this.onReposition(T.x,T.y)},_reposition:function(){var T=n.position(this.container,!0),ha=n.getPadBorderExtents(this.container);this.position.update(T.x+ha.l,T.y+ha.t)},_setClipRect:function(){delete this._clip;var T=7>=x("ie")||void 0===x("ie")&&7<=x("trident")?"rect(auto,auto,auto,auto)":
"auto";if(this.wrapAround180){var ha=this.width,na=this.height,qa=this._getFrameWidth(),ua=ha-qa;0<ua&&(T=ua/2,T="rect(0px,"+(T+qa)+"px,"+na+"px,"+T+"px)",na=this.extent.getWidth(),ha=qa/ha*na,this._clip=[(na-ha)/2,ha])}da(this.__container,"clip",T)},_getAvailExtent:function(){var T=this.extent,ha=this._clip;if(ha){if(!T._clip){var na=new S(T);na.width=ha[1];na.x+=ha[0];T._clip=na.getExtent()}return T._clip}return T},_fixedPan:function(T,ha){return this._extentUtil(null,{dx:T,dy:ha})},panUp:function(){return this._fixedPan(0,
-.75*this.height)},panUpperRight:function(){return this._fixedPan(.75*this.width,-.75*this.height)},panRight:function(){return this._fixedPan(.75*this.width,0)},panLowerRight:function(){return this._fixedPan(.75*this.width,.75*this.height)},panDown:function(){return this._fixedPan(0,.75*this.height)},panLowerLeft:function(){return this._fixedPan(-.75*this.width,.75*this.height)},panLeft:function(){return this._fixedPan(-.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-.75*this.width,
-.75*this.height)},enableSnapping:function(T){T=T||{};if("esri.SnappingManager"===T.declaredClass)this.snappingManager=T;else{var ha=xa++,na=this;this._rids&&this._rids.push(ha);b(["./SnappingManager"],function(qa){var ua=na._rids?h.indexOf(na._rids,ha):-1;-1!==ua&&(na._rids.splice(ua,1),na.snappingManager=new qa(g.mixin({map:na},T)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&
oa&&this.loaded&&(this._labels=new oa({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==this._labelProcessor&&(this._labelProcessor=setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=null;this._labels&&(this._labels.removeAllFeatureLayers(),h.forEach(this.graphicsLayerIds,function(T){T=this.getLayer(T);"function"===typeof T.applyEdits?
this._labels.addFeatureLayer(T):"esri.layers.WFSLayer"===T.declaredClass&&this._labels.addFeatureLayer(T)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new ka,this._mapImageLyr._setMap(this,this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var T=this.layerIds,ha=this._layerDivs,na=!1,qa,ua,za=T.length-1;0<=za;za--)if(qa=T[za],ua=this.getLayer(qa),qa=ha[qa],ua&&qa&&!ua._isReference){u.place(this._mapImageLyr._div,
qa,"after");na=!0;break}na||u.place(this._mapImageLyr._div,this._layersDiv,"first")}});return F._CoreMap=a})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(b,y,r,a){b={streets:{title:a.basemaps.streets,thumbnailUrl:b.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:a.basemaps.satellite,thumbnailUrl:b.toUrl("./images/basemap/satellite.jpg"),
itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:a.basemaps.hybrid,thumbnailUrl:b.toUrl("./images/basemap/hybrid.jpg"),itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},
terrain:{title:a.basemaps.terrain,thumbnailUrl:b.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:a.basemaps.topo,thumbnailUrl:b.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},
gray:{title:a.basemaps.gray,thumbnailUrl:b.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},"dark-gray":{title:a.basemaps["dark-gray"],thumbnailUrl:b.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",
baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:a.basemaps.oceans,thumbnailUrl:b.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",
isReference:!0}]},"national-geographic":{title:a.basemaps["national-geographic"],thumbnailUrl:b.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},osm:{title:a.basemaps.osm,thumbnailUrl:b.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:a.basemaps["dark-gray"],
thumbnailUrl:b.toUrl("./images/basemap/dark-gray.jpg"),itemId:"c11ce4f7801740b2905eb03ddc963ac8",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",type:"VectorTile"}]},"gray-vector":{title:a.basemaps.gray,thumbnailUrl:b.toUrl("./images/basemap/gray.jpg"),itemId:"8a2cba3b0ebf4140b7c0dc5ee149549a",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",
type:"VectorTile"}]},"streets-vector":{title:a.basemaps.streets,thumbnailUrl:b.toUrl("./images/basemap/streets.jpg"),itemId:"de26a3cf4cc9451298ea173c4b324736",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",type:"VectorTile"}]},"topo-vector":{title:a.basemaps.topo,thumbnailUrl:b.toUrl("./images/basemap/topo.jpg"),itemId:"7dc6cea0b1764a1f9af2e679f642f0f5",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{url:"https://www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:a.basemaps["streets-night-vector"],thumbnailUrl:b.toUrl("./images/basemap/streets-night.jpg"),itemId:"86f556a2d1fd468181855a35e344567f",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",type:"VectorTile"}]},"streets-relief-vector":{title:a.basemaps["streets-relief-vector"],
thumbnailUrl:b.toUrl("./images/basemap/streets-relief.jpg"),itemId:"b266e6d17fc345b498345613930fbd76",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",type:"VectorTile"}]},"streets-navigation-vector":{title:a.basemaps["streets-navigation-vector"],thumbnailUrl:b.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"63c47b7177f946b49902c24129b87252",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",
type:"VectorTile"}]}};return r.basemaps=b})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),function(b,y,r,a,k,e,g,h,m){h={animateRange:function(l){var f=l.range;return new y.Animation(r.mixin({curve:new y._Line(f.start,f.end)},l))},resize:function(l){var f=l.node=a.byId(l.node),c=l.start,d=l.end;c||(c=k.getMarginBox(f),f=k.getPadBorderExtents(f),c=l.start={left:c.l+f.l,top:c.t+f.t,width:c.w-
f.w,height:c.h-f.h});d||(d=l.anchor?l.anchor:{x:c.left,y:c.top},f=l.size,d=l.end={left:c.left-(f.width-c.width)*(d.x-c.left)/c.width,top:c.top-(f.height-c.height)*(d.y-c.top)/c.height,width:f.width,height:f.height});return y.animateProperty(r.mixin({properties:{left:{start:c.left,end:d.left},top:{start:c.top,end:d.top},width:{start:c.width,end:d.width},height:{start:c.height,end:d.height}}},l))},slideTo:function(l){var f=l.node=a.byId(l.node),c=e.getComputedStyle,d=null,u=null,n=function(){return function(){var t=
"absolute"==f.style.position?"absolute":"relative";d="absolute"==t?f.offsetTop:parseInt(c(f).top)||0;u="absolute"==t?f.offsetLeft:parseInt(c(f).left)||0;"absolute"!=t&&"relative"!=t&&(t=k.position(f,!0),d=t.y,u=t.x,f.style.position="absolute",f.style.top=d+"px",f.style.left=u+"px")}}();n();l=y.animateProperty(r.mixin({properties:{top:{start:d,end:l.top||0},left:{start:u,end:l.left||0}}},l));b.connect(l,"beforeBegin",l,n);return l},flash:function(l){l=r.mixin({end:"#f00",duration:500,count:1},l);l.duration/=
2*l.count;var f=a.byId(l.node),c=l.start;c||(c=e.getComputedStyle(f).backgroundColor);var d=l.end,u=[],n=l.count;f={node:f,duration:l.duration};for(l=0;l<n;l++)u.push(y.animateProperty(r.mixin({properties:{backgroundColor:{start:c,end:d}}},f))),u.push(y.animateProperty(r.mixin({properties:{backgroundColor:{start:d,end:c}}},f)));return g.chain(u)}};r.mixin(r.getObject("fx",!0,m),h);return h})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f){r.isAsync||l(0,function(){f(["./fx/Toggler"])});r=r.fx={};l={_fire:function(u,n){this[u]&&this[u].apply(this,n||[]);return this}};var c=function(u){this._index=-1;this._animations=u||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;a.forEach(this._animations,function(n){n&&("undefined"!=typeof n.duration&&(this.duration+=n.duration),n.delay&&(this.duration+=n.delay))},this)};c.prototype=new y;b.extend(c,{_onAnimate:function(){this._fire("onAnimate",
arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=k.after(this._current,"onAnimate",b.hitch(this,"_onAnimate"),!0),this._onEndCtx=k.after(this._current,"onEnd",b.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(u,n){this._current||(this._current=this._animations[this._index=0]);if(!n&&"playing"==
this._current.status())return this;var t=k.after(this._current,"beforeBegin",b.hitch(this,function(){this._fire("beforeBegin")}),!0),x=k.after(this._current,"onBegin",b.hitch(this,function(B){this._fire("onBegin",arguments)}),!0),A=k.after(this._current,"onPlay",b.hitch(this,function(B){this._fire("onPlay",arguments);t.remove();x.remove();A.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=k.after(this._current,"onAnimate",b.hitch(this,"_onAnimate"),!0);this._onEndCtx&&
this._onEndCtx.remove();this._onEndCtx=k.after(this._current,"onEnd",b.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var u=k.after(this._current,"onPause",b.hitch(this,function(n){this._fire("onPause",arguments);u.remove()}),!0);this._current.pause()}return this},gotoPercent:function(u,n){this.pause();var t=this.duration*u;this._current=null;a.some(this._animations,function(x,A){if(t<=x.duration)return this._current=x,this._index=
A,!0;t-=x.duration;return!1},this);this._current&&this._current.gotoPercent(t/this._current.duration);n&&this.play();return this},stop:function(u){if(this._current){if(u){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var n=k.after(this._current,"onStop",b.hitch(this,function(t){this._fire("onStop",arguments);n.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():
"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});b.extend(c,l);r.chain=function(u){return new c(b.isArray(u)?u:Array.prototype.slice.call(u,0))};var d=function(u){this._animations=u||[];this._connects=[];this.duration=this._finished=0;a.forEach(u,function(t){var x=t.duration;t.delay&&(x+=t.delay);this.duration<x&&(this.duration=x);this._connects.push(k.after(t,"onEnd",b.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=
new e.Animation({curve:[0,1],duration:this.duration});var n=this;a.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(t){n._connects.push(k.after(n._pseudoAnimation,t,function(){n._fire(t,arguments)},!0))})};b.extend(d,{_doAction:function(u,n){a.forEach(this._animations,function(t){t[u].apply(t,n)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(u,n){var t=this._pseudoAnimation;t[u].apply(t,n)},play:function(u,
n){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(u,n){var t=this.duration*u;a.forEach(this._animations,function(x){x.gotoPercent(x.duration<t?1:t/x.duration,n)});this._call("gotoPercent",arguments);return this},stop:function(u){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},
destroy:function(){this.stop();a.forEach(this._connects,function(u){u.remove()})}});b.extend(d,l);r.combine=function(u){return new d(b.isArray(u)?u:Array.prototype.slice.call(u,0))};r.wipeIn=function(u){var n=u.node=g.byId(u.node),t=n.style,x;u=e.animateProperty(b.mixin({properties:{height:{start:function(){x=t.overflow;t.overflow="hidden";if("hidden"==t.visibility||"none"==t.display)return t.height="1px",t.display="",t.visibility="",1;var B=h.get(n,"height");return Math.max(B,1)},end:function(){return n.scrollHeight}}}},
u));var A=function(){t.height="auto";t.overflow=x};k.after(u,"onStop",A,!0);k.after(u,"onEnd",A,!0);return u};r.wipeOut=function(u){var n=(u.node=g.byId(u.node)).style,t;u=e.animateProperty(b.mixin({properties:{height:{end:1}}},u));k.after(u,"beforeBegin",function(){t=n.overflow;n.overflow="hidden";n.display=""},!0);var x=function(){n.overflow=t;n.height="auto";n.display="none"};k.after(u,"onStop",x,!0);k.after(u,"onEnd",x,!0);return u};r.slideTo=function(u){var n=null,t=null,x=function(A){return function(){var B=
h.getComputedStyle(A),F=B.position;n="absolute"==F?A.offsetTop:parseInt(B.top)||0;t="absolute"==F?A.offsetLeft:parseInt(B.left)||0;"absolute"!=F&&"relative"!=F&&(B=m.position(A,!0),n=B.y,t=B.x,A.style.position="absolute",A.style.top=n+"px",A.style.left=t+"px")}}(u.node=g.byId(u.node));x();u=e.animateProperty(b.mixin({properties:{top:u.top||0,left:u.left||0}},u));k.after(u,"beforeBegin",x,!0);return u};return r})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),
function(b,y,r,a,k,e,g,h,m){b=b(null,{declaredClass:"esri.layers.TileInfo",constructor:function(l){y.mixin(this,l);this.width=this.cols;this.height=this.rows;this._levelToLOD={};l=this.spatialReference;var f=this.origin;l&&(l=this.spatialReference=new g(l.toJson?l.toJson():l));f&&(this.origin=new h(f.toJson?f.toJson():f),!f.spatialReference&&l&&this.origin.setSpatialReference(new g(l.toJson())));this.lods=r.map(this.lods,function(u){return new m(u)});r.forEach(this.lods,function(u){this._levelToLOD[u.level]=
u},this);l=!1;f=this.spatialReference;var c=this.origin;if(f&&c){var d=f._getInfo();d&&(l=f._isWrappable()&&Math.abs(d.origin[0]-c.x)<=d.dx)}this.isWrappable=l;this._initializeUpsampleLevels()},toJson:function(){return e.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&r.map(this.lods,function(l){return l.toJson()})})},
lodAt:function(l){return this._levelToLOD&&this._levelToLOD[l]||null},updateTileInfo:function(l){var f=this.lodAt(l.level),c=f.resolution*this.width;f=f.resolution*this.height;l.id=l.level+"/"+l.row+"/"+l.col;l.extent||(l.extent=[0,0,0,0]);l.extent[0]=this.origin.x+l.col*c;l.extent[1]=this.origin.y-(l.row+1)*f;l.extent[2]=l.extent[0]+c;l.extent[3]=l.extent[1]+f},upsampleTile:function(l){var f=this._upsampleLevels[l.level];if(!f||-1===f.parentLevel)return!1;l.level=f.parentLevel;l.row=Math.floor(l.row/
f.factor+.001);l.col=Math.floor(l.col/f.factor+.001);this.updateTileInfo(l);return!0},_initializeUpsampleLevels:function(){var l=this.lods;this._upsampleLevels=[];for(var f=null,c=0;c<l.length;c++){var d=l[c];this._upsampleLevels[d.level]={parentLevel:f?f.level:-1,factor:f?f.resolution/d.resolution:0};f=d}}});y.setObject("layers.TileInfo",b,k);return b})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(b,y,r,a,k){b=b(null,{declaredClass:"esri.layers.LOD",
constructor:function(e){y.mixin(this,e)},toJson:function(){return k.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});y.setObject("layers.LOD",b,a);return b})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n){y=y([f,c],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(t,x){x&&(x.roundrobin&&(b.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),x.tileServers=x.roundrobin),this._setTileServers(x.tileServers),
this._loadCallback=x.loadCallback);this._params=r.mixin({},this._url.query);this._initLayer=r.hitch(this,this._initLayer);(t=x&&x.resourceInfo)?this._initLayer(t):(this._load=r.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(t){if(t&&0<t.length){this.tileServers=t;var x,A=t.length;for(x=0;x<A;x++)t[x]=m.urlToObject(t[x]).path}},_initLayer:function(t,x){this.inherited(arguments);this.resourceInfo=
k.toJson(t);this.tileInfo=new d(t.tileInfo);!1!==this.resampling&&(t.capabilities&&-1<t.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new n(this)):this.resampling=!!t.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new l(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;t.timeInfo&&(this.timeInfo=new u(t.timeInfo));t.mensurationCapabilities&&(this.mensurationCapabilities=
t.mensurationCapabilities);var A=this._url.path,B=this._loadCallback,F=m.getProtocolForWebResource(!0),w=A.match(/^https?:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);w=w&&w[2];if(!this.tileServers)if(t.tileServers)this._setTileServers(t.tileServers);else{var D=-1!==A.search(/^https?:\/\/server\.arcgisonline\.com/i),q=-1!==A.search(/^https?:\/\/services\.arcgisonline\.com/i);(D||q)&&this._setTileServers([A,A.replace(D?/server\.arcgisonline/i:
/services\.arcgisonline/i,D?"services.arcgisonline":"server.arcgisonline")])}if(w){w=w.toLowerCase();for(A=0;A<this._agolAttrs.length;A++)if(D=this._agolAttrs[A],D.toLowerCase()===w){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||F+"//static.arcgis.com/attribution/"+D;break}for(A=0;A<this._referenceLayers.length;A++)if(D=this._referenceLayers[A],D.toLowerCase()===w){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);B&&(delete this._loadCallback,B(this))},getTileUrl:function(t,
x,A){var B=this.tileServers,F=this._getToken(),w=this._url.query;t=(B?B[x%B.length]:this._url.path)+"/tile/"+t+"/"+x+"/"+A;t=m.upgradeToHTTPS(t);this.resampling&&!this.tileMap&&(t+="?blankTile\x3dfalse");w&&(t=this.resampling&&!this.tileMap?t+("\x26"+g.objectToQuery(w)):t+("?"+g.objectToQuery(w)));!F||w&&w.token||(t+=(-1===t.indexOf("?")?"?":"\x26")+"token\x3d"+F);t=this.addTimestampToURL(t);return m.addProxy(t)}});r.setObject("layers.ArcGISTiledMapServiceLayer",y,h);return y})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w){b=b(w,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(D,q){y.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=q?q.displayLevels:null)?this._displayLevels[0]:0;this.resampling=q?q.resampling:void 0;this._resamplingTolerance=q?q.resamplingTolerance:null;this.exclusionAreas=q?q.exclusionAreas:null;D=r.hitch;this._addImage=D(this,this._addImage);this._tileLoadHandler=D(this,this._tileLoadHandler);
this._tileErrorHandler=D(this,this._tileErrorHandler);this._popTile=D(this,this._popTile);this._cleanUpRemovedImages=D(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=D(this,this._fireOnUpdateEvent);this._transitionEnd=D(this,this._transitionEnd);this._tileMapCallback=D(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var D=this.tileInfo,q=D.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=D.width;this._tileH=
D.height;var v=this.scales=[],z=this._displayLevels,C=-Infinity,E=Infinity,G=this.fullExtent,H=new A(G.xmin,G.ymax);G=new A(G.xmax,G.ymin);var K=x.getContainingTileCoords,I,J=q.length;for(I=0;I<J;I++){var Q=q[I];var V=K(D,H,Q);Q.startTileRow=0>V.row?0:V.row;Q.startTileCol=0>V.col?0:V.col;V=K(D,G,Q);Q.endTileRow=V.row;Q.endTileCol=V.col;z&&-1===a.indexOf(z,Q.level)||(v[I]=Q.scale,C=Q.scale>C?Q.scale:C,E=Q.scale<E?Q.scale:E)}-Infinity===C||this._hasMin||this.setMinScale(C);Infinity===E||this._hasMax||
this.setMaxScale(E);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=n("ie")&&7>n("ie")&&(this.isPNG32||"Mixed"===D.format)},isVisibleAtScale:function(D){return D?w.prototype._isMapAtVisibleScale.call(this,D,!0):!1},_isMapAtVisibleScale:function(D){var q=this.inherited(arguments,[D,!0]);if(q){var v=this._map;q=this.scales;var z=v.getScale(),C=!1,E=v.width>v.height?v.width:v.height;for(v=0;v<q.length;v++)if(Math.abs(q[v]-z)/q[v]<1/E){C=!0;break}q=C}return q},_setMap:function(D,q,v,z){this.inherited(arguments);
this._map=D;var C=this._div=e.create("div",null,q),E=D.__visibleDelta,G=y.connect,H=d._css.names,K={position:"absolute",width:D.width+"px",height:D.height+"px",overflow:"visible"},I=u.defaults.map.zoomDuration;"css-transforms"===D.navigationMode?(K[H.transform]=d._css.translate(-E.x,-E.y),m.set(C,K),delete K[H.transform],K[H.transition]=H.transformName+" "+I+"ms ease",m.set(this._active=e.create("div",null,C),K),this._active._remove=0,this._passives=[]):(K.left=-E.x+"px",K.top=-E.y+"px",m.set(C,K));
this._onResizeHandler_connect=G(D,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=G(this,"onOpacityChange",this,"_opacityChangeHandler");E=this.tileInfo;G=E.spatialReference;H=G._getInfo();(this._wrap=D.wrapAround180&&G._isWrappable()&&Math.abs(H.origin[0]-E.origin.x)<=H.dx)&&x._addFrameInfo(E,H);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!D.loaded)var J=y.connect(D,"onLoad",this,function(){y.disconnect(J);J=null;this.setExclusionAreas(this.exclusionAreas);
this.evaluateSuspension()});return C},_unsetMap:function(D,q){this.suspended||this._suspendImpl();e.destroy(this._div);this._map=this._div=null;var v=y.disconnect;v(this._onResizeHandler_connect);v(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){t.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var D=this._tiles,q=this._tileIds,v=this._loadingList,
z,C,E=y.disconnect,G=e.destroy;v&&0<v.count&&(v.forEach(function(K){if(z=D[K])E(z._onload_connect),E(z._onerror_connect),E(z._onabort_connect),z._onload_connect=z._onerror_connect=z._onabort_connect=null}),v.clear(),this._fireUpdateEnd());this._removeList.clear();for(v=q.length-1;0<=v;v--)(z=(C=q[v])&&D[C])&&G(z);if("css-transforms"===this._map.navigationMode){q=this._active;C=this._passives;this._noDom=0;for(v=C.length-1;0<=v;v--){var H=C[v];H._endHandle&&E(H._endHandle);H._matrix=H._multiply=H._endHandle=
null;H._marked=H._remove=0;C.splice(v,1);G(H)}q._matrix=q._multiply=null;q._marked=q._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new f;this._loadingList=new f;t.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(r.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,
null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var D=this._map,q=y.connect;if("css-transforms"===D.navigationMode){if(this._onScaleHandler_connect=q(D,"onScale",this,this._onScaleHandler),n("esri-mobile")){this._standby=[];var v=this,z=function(){v._noDom=1};this._onPanStartHandler_connect=q(D,"onPanStart",z);this._onZoomStartHandler_connect=q(D,"onZoomStart",z)}}else this._onZoomHandler_connect=q(D,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=q(D,"onPan",this,"_onPanHandler");
this._onExtentChangeHandler_connect=q(D,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var D=y.disconnect;D(this._onPanHandler_connect);D(this._onZoomHandler_connect);D(this._onScaleHandler_connect);D(this._onExtentChangeHandler_connect);D(this._onPanStartHandler_connect);D(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=
null},_onResizeHandler:function(D,q,v){D={width:q+"px",height:v+"px"};q=m.set;q(this._div,D);if("css-transforms"===this._map.navigationMode)for(this._active&&q(this._active,D),v=this._passives.length-1;0<=v;v--)q(this._passives[v],D)},_onExtentChangeHandler:function(D,q,v,z){q=this._map;var C=this._standby;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!q._isPanningOrZooming()){if("css-transforms"===q.navigationMode){if(v)for(z=this._passives.length-1;0<=z;z--){var E=this._passives[z];m.set(E,
d._css.names.transition,"none");E._marked?(this._passives.splice(z,1),E.parentNode&&E.parentNode.removeChild(E),e.destroy(E)):0<E.childNodes.length&&(E._multiply=E._multiply?c.multiply(E._matrix,E._multiply):E._matrix)}this._noDom=0;if(C&&C.length)for(z=C.length-1;0<=z;z--)E=C[z],m.set(E,"visibility","inherit"),this._popTile(E),C.splice(z,1)}this._fireUpdateStart();this._rrIndex=0;z=x.getCandidateTileInfo(q,this.tileInfo,D);D=q.__visibleDelta;if(!this._ct||z.lod.level!==this._ct.lod.level||v){E=z&&
this._ct&&z.lod.level!==this._ct.lod.level;this._ct=z;var G=this._tiles,H=this._tileIds,K=this._tileBounds,I=this._removeList,J=H.length;this._cleanUpRemovedImages();for(z=0;z<J;z++){C=H[z];var Q=G[C];K[C]=H[z]=null;"css-transforms"===q.navigationMode&&E&&Q.parentNode&&q.fadeOnZoom&&(Q._fadeOut=E,Q.parentNode._remove++);I.add(Q)}v&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}z=D.x;v=D.y;"css-transforms"===q.navigationMode?(C={},C[d._css.names.transform]=d._css.translate(z,v),m.set(this._div,
C)):m.set(this._div,{left:z+"px",top:v+"px"});this.__coords_dx=z;this.__coords_dy=v;this._updateImages(new B(0,0,D.width,D.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;v=this._tileW;G=this._tileH;D=new B(-D.x,-D.y,D.width,D.height);for(z=this._tileIds.length-1;0<=z;z--)(C=this._tileIds[z])?(E=this._tiles[C],H=h.getMarginBox(E),H=new B(H.l,H.t,v,G),"css-transforms"===q.navigationMode&&(H.x=E._left,H.y=E._top),D.intersects(H)?
this._tileBounds[C]=H:(this._loadingList.contains(C)&&this._popTile(E),e.destroy(E),this._tileIds.splice(z,1),delete this._tileBounds[C],delete this._tiles[C])):(this._tileIds.splice(z,1),delete this._tileBounds[C],delete this._tiles[C])}},_onPanHandler:function(D,q){D=this._map;q=D.__visibleDelta.offset(q.x,q.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===D.navigationMode?(D={},D[d._css.names.transform]=d._css.translate(q.x,q.y),m.set(this._div,D),n("esri-mobile")||this._updateImages({x:-q.x,
y:-q.y,width:q.width,height:q.height})):(m.set(this._div,{left:q.x+"px",top:q.y+"px"}),this._updateImages({x:-q.x,y:-q.y,width:q.width,height:q.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(D,q){var v,z={},C=d._css.names,E=this._map,G=u.defaults.map.zoomDuration;for(v=this._passives.length-1;0<=v;v--){var H=this._passives[v];0===H.childNodes.length?(this._passives.splice(v,1),e.destroy(H)):("none"===H.style[C.transition]&&m.set(H,C.transition,
C.transformName+" "+G+"ms ease"),m.set(H,C.transition,q?"none":C.transformName+" "+G+"ms ease"),H._matrix=D,z[C.transform]=d._css.matrix(H._multiply?c.multiply(D,H._multiply):D),m.set(H,z))}this._active&&0===this._active.childNodes.length||(m.set(this._active,C.transition,q?"none":C.transformName+" "+G+"ms ease"),this._active._matrix=D,z[C.transform]=d._css.matrix(this._active._matrix),m.set(this._active,z),this._passives.push(this._active),z={position:"absolute",width:E.width+"px",height:E.height+
"px",overflow:"visible"},z[C.transition]=C.transformName+" "+G+"ms ease",m.set(this._active=e.create("div",null,this._div),z),this._active._remove=0,E.fadeOnZoom&&e.place(this._active,this._div,"first"))},_onZoomHandler:function(D,q,v){D=h.getMarginBox(this._div);v=v.offset(-D.l,-D.t);this._previousScale&&1!==q||(this._previousScale=1);var z,C=this._tileW*q,E=this._tileH*q,G=this._tileBounds,H=this._tiles,K=this._previousScale,I=this._multiple,J=m.set,Q,V;if((D=n("ie"))&&8>D)a.forEach(this._tileIds,
function(ca){V="";z=G[ca];Q=H[ca].style.margin.split(" ");a.forEach(Q,function(U){""!==V&&(V+=" ");U=parseFloat(U);V+=U/K*q+"px"});J(H[ca],{left:z.x-(C-z.width)*(v.x-z.x)/z.width+"px",top:z.y-(E-z.height)*(v.y-z.y)/z.height+"px",margin:1!==I&&-1===V.indexOf("NaN")?V:"",zoom:q})});else{var O=C*I,S=E*I,L,Y;a.forEach(this._tileIds,function(ca){V="";z=G[ca];L=z.x-(C-z.width)*(v.x-z.x)/z.width;Y=z.y-(E-z.height)*(v.y-z.y)/z.height;Q=H[ca].style.margin.split(" ");a.forEach(Q,function(U){""!==V&&(V+=" ");
U=parseFloat(U);V+=U/K*q+"px"});J(H[ca],{left:L+"px",top:Y+"px",margin:1!==I&&-1===V.indexOf("NaN")?V:"",width:O+"px",height:S+"px"})})}this._previousScale=q},_updateImages:function(D){if(this._ct){var q=this._tileW,v=this._tileH,z=this._ct;var C=z.lod;z=z.tile;var E=z.offsets,G=z.coords,H=G.row;G=G.col;var K=C.level,I=this.opacity,J=this._tileIds,Q=this._loadingList,V=this._addImage,O=this._map.id,S=this.id,L=D.x,Y=D.y,ca=C.startTileRow,U=C.endTileRow,X=C.startTileCol,Z=C.endTileCol,N=a.indexOf,
aa=E.x-this.__coords_dx,ka=E.y-this.__coords_dy;var pa=q-aa+-D.x;var ta=v-ka+-D.y;var Ba=Math.ceil;pa=0<pa?pa%q:q-Math.abs(pa)%q;ta=0<ta?ta%v:v-Math.abs(ta)%v;L=0<L?Math.floor((L+aa)/q):Ba((L-(q-aa))/q);Y=0<Y?Math.floor((Y+ka)/v):Ba((Y-(v-ka))/v);ka=L+Ba((D.width-pa)/q);D=Y+Ba((D.height-ta)/v);if(this._wrap){var Da=C._frameInfo;var oa=Da[0];var ra=Da[1];Da=Da[2]}for(ta=L;ta<=ka;ta++)for(L=Y;L<=D;L++)Ba=H+L,pa=G+ta,this._wrap&&(pa<ra?(pa%=oa,pa=pa<ra?pa+oa:pa):pa>Da&&(pa%=oa)),!this._isExcluded(K,
Ba,pa)&&Ba>=ca&&Ba<=U&&pa>=X&&pa<=Z&&(C=O+"_"+S+"_tile_"+K+"_"+L+"_"+ta,-1===N(J,C)&&(Q.add(C),J.push(C),V(K,L,Ba,ta,pa,C,q,v,I,z,E)))}},_cleanUpRemovedImages:function(){var D=this._removeList,q=e.destroy,v,z=d._css.names;D.forEach(function(E){E._fadeOut||(E.style.filter="",E.style.zoom=1,q(E))});if("css-transforms"===this._map.navigationMode)for(v=this._passives.length-1;0<=v;v--){var C=this._passives[v];0===C.childNodes.length?(this._passives.splice(v,1),q(C)):this._map.fadeOnZoom&&!C._marked&&
C._remove===C.childNodes.length&&(C._marked=1,2048>d._css.getScaleFromMatrix(m.get(C,z.transform))?(m.set(C,z.transition,"opacity 0.65s"),m.set(C,"opacity",0),y.disconnect(C._endHandle),C._endHandle=y.connect(C,z.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:C}))}D.clear()},_transitionEnd:function(D){var q=D.target;"opacity"===D.propertyName&&(y.disconnect(q._endHandle),q._endHandle=null,D=a.indexOf(this._passives,q),-1<D&&this._passives.splice(D,1),q.parentNode&&
q.parentNode.removeChild(q),e.destroy(q))},_addImage:function(D,q,v,z,C,E,G,H,K,I,J){if(this._patchIE)I=this._tiles[E]=e.create("div"),I.id=E,g.add(I,"layerTile"),m.set(I,{left:G*z-J.x+"px",top:H*q-J.y+"px",width:G+"px",height:H+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(D,v,C)+"', sizingMethod\x3d'scale')"}),1>K&&m.set(I,"opacity",K),D=I.appendChild(e.create("div")),m.set(D,{opacity:0,width:G+"px",height:H+"px"}),this._div.appendChild(I),I=null,this._loadingList.remove(E),
this._fireOnUpdateEvent();else{I=this._tiles[E]=e.create("img");var Q=y.connect;I.id=E;I._uid=D+"_"+v+"_"+C;I.alt="";g.add(I,"layerTile");z=G*z-J.x;J=H*q-J.y;q=this._map;var V=d._css.names;G={width:G+"px",height:H+"px",visibility:"hidden"};"css-transforms"===q.navigationMode?(G[V.transform]=d._css.translate(z,J),m.set(I,G),I._left=z,I._top=J):(G.left=z+"px",G.top=J+"px",m.set(I,G));1>K&&m.set(I,"opacity",K);I._onload_connect=Q(I,"onload",this,"_tileLoadHandler");I._onerror_connect=Q(I,"onerror",r.hitch(this,
"_tileErrorHandler",v,C));I._onabort_connect=Q(I,"onabort",this,"_tileAbortHandler");if(this.tileMap)this.tileMap.getTile(D,v,C,E,this._tileMapCallback);else if(E=this.getTileUrl(D,v,C,I))this._failedRequests&&this._failedRequests[E]?(m.set(I,this._failedRequests[E].css),I.src=this._failedRequests[E].src,this._multiple=parseInt(this._failedRequests[E].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,I.src=E);"css-transforms"===q.navigationMode?this._active.appendChild(I):
this._div.appendChild(I);I=null}},_tileMapCallback:function(D,q){if(!this.suspended){var v=this._tiles[q.id]||l.byId(q.id);var z=q.level+"_"+q.row+"_"+q.col;v&&v._uid===z?(this._multiple=2*(q.level-D.level)||1,this.isResampling=1!==this._multiple,q=this.tileMap.style(D,q),m.set(v,q),v.src=this.getTileUrl(D.level,D.row,D.col)):this._popTile(q)}},getTileUrl:function(D,q,v){},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},
_popTile:function(D){var q=y.disconnect;q(D._onload_connect);q(D._onerror_connect);q(D._onabort_connect);D._onload_connect=D._onerror_connect=D._onabort_connect=null;this._loadingList.remove(D.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(D){D=D.currentTarget;this._noDom?this._standby.push(D):(m.set(D,"visibility","inherit"),this._popTile(D))},_tileAbortHandler:function(D){D=D.currentTarget;this.onError(Error("Unable to load tile: "+D.src));m.set(D,"visibility","hidden");this._popTile(D)},
_tileErrorHandler:function(D,q,v){v=v.currentTarget;var z=!0;if(this.tileMap||!this.resampling)z=!1;else{var C=new k(v.src);C=C.path.split("/");C=parseInt(C[C.length-3]);var E=this._ct.lod.level-C+1;this._multiple=Math.pow(2,E);if(C===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)z=!1}z?(this.isResampling=!0,this._resample(v,D,q)):(this.onError(Error("Unable to load tile: "+v.src)),m.set(v,"visibility","hidden"),
this._popTile(v))},_resample:function(D,q,v){var z=(new k(D.src)).path.split("/"),C=this._multiple,E=parseInt(z[z.length-3])-1,G=parseInt(q/C),H=parseInt(v/C);z=v%C;var K=q%C;G=this.getTileUrl(E,G,H);q=this.getTileUrl(E+Math.log(C)/Math.LN2,q,v);C={width:this._tileW*C+"px",height:this._tileH*C+"px",margin:"-"+this._tileW*K+"px 0 0 -"+(this._tileH*z+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[q]={src:G,css:C};m.set(D,C);n("chrome")&&D.setAttribute("src",null);D.src=
G},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(D){if(this.opacity!=D)this.onOpacityChange(this.opacity=D)},onOpacityChange:function(){},_opacityChangeHandler:function(D){var q=m.set,v,z;if("css-transforms"===this._map.navigationMode){if(this._active){var C=this._active.childNodes;for(v=C.length-1;0<=v;v--)q(C[v],"opacity",D)}for(v=this._passives.length-
1;0<=v;v--)for(C=this._passives[v].childNodes,z=C.length-1;0<=z;z--)q(C[z],"opacity",D)}else for(C=this._div.childNodes,v=C.length-1;0<=v;v--)q(C[v],"opacity",D)},setExclusionAreas:function(D){this.exclusionAreas=D;if(this.loaded&&this._map&&this._map.loaded){var q=this._map.spatialReference,v=this.tileInfo,z=v.origin,C=v.lods,E=C[0].level,G=C[C.length-1].level,H,K,I;if(this.exclusionAreas&&this.exclusionAreas.length){this._exclusionsPerZoom=[];var J=0;for(H=D.length;J<H;J++){var Q=D[J];if((I=Q.geometry)&&
"extent"===I.type&&I.xmin<=I.xmax&&I.ymin<=I.ymax){if(!q.equals(I.spatialReference))if(q._canProject(I.spatialReference)){if(q.isWebMercator()){var V=A.lngLatToXY(I.xmin,I.ymin);I=A.lngLatToXY(I.xmax,I.ymax)}else V=A.xyToLngLat(I.xmin,I.ymin,!0),I=A.xyToLngLat(I.xmax,I.ymax,!0);I=new F(V[0],V[1],I[0],I[1],q)}else continue;var O=-1;if(Q.minZoom&&-1!==Q.minZoom)O=Q.minZoom;else if(Q.minScale&&-1!==Q.minScale){var S=0;for(K=C.length;S<K;S++)if(C[S].scale<=Q.minScale){O=C[S].level;break}}O=Math.max(O,
E);V=-1;if(Q.maxZoom&&-1!==Q.maxZoom)V=Q.maxZoom;else if(Q.maxScale&&-1!==Q.maxScale)for(S=0,K=C.length;S<K;S++)if(C[S].scale<Q.maxScale){V=C[S-1].level;break}else if(C[S].scale===Q.maxScale){V=C[S].level;break}V=-1===V?G:Math.min(V,G);for(Q=O;Q<=V;Q++){S=0;for(K=C.length;S<K;S++)if(C[S].level===Q){var L=C[S];break}L&&(this._exclusionsPerZoom[Q]||(this._exclusionsPerZoom[Q]=[]),S=1/L.resolution/v.rows,K=1/L.resolution/v.cols,this._exclusionsPerZoom[Q].push({rowFrom:Math.floor((z.y-I.ymax)*S),rowTo:Math.ceil((z.y-
I.ymin)*S),colFrom:Math.floor((I.xmin-z.x)*K),colTo:Math.ceil((I.xmax-z.x)*K)}))}}}}else this._exclusionsPerZoom=null;this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(D,q,v){var z;if(!this._exclusionsPerZoom)return!1;var C=this._exclusionsPerZoom[D];if(!C)return!1;var E=0;for(z=C.length;E<z;E++)if(D=C[E],q>=D.rowFrom&&q<D.rowTo&&v>=D.colFrom&&v<D.colTo)return!0;return!1}});r.setObject("layers.TiledMapServiceLayer",b,d);return b})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel",
"dojo/_base/array","./_base"],function(b,y,r){r.ArrayList=function(a){var k=[];a&&(k=k.concat(a));this.count=k.length;this.add=function(e){k.push(e);this.count=k.length};this.addRange=function(e){if(e.getIterator)for(e=e.getIterator();!e.atEnd();)this.add(e.get());else for(var g=0;g<e.length;g++)k.push(e[g]);this.count=k.length};this.clear=function(){k.splice(0,k.length);this.count=0};this.clone=function(){return new r.ArrayList(k)};this.contains=function(e){for(var g=0;g<k.length;g++)if(k[g]==e)return!0;
return!1};this.forEach=function(e,g){b.forEach(k,e,g)};this.getIterator=function(){return new r.Iterator(k)};this.indexOf=function(e){for(var g=0;g<k.length;g++)if(k[g]==e)return g;return-1};this.insert=function(e,g){k.splice(e,0,g);this.count=k.length};this.item=function(e){return k[e]};this.remove=function(e){e=this.indexOf(e);0<=e&&k.splice(e,1);this.count=k.length};this.removeAt=function(e){k.splice(e,1);this.count=k.length};this.reverse=function(){k.reverse()};this.sort=function(e){e?k.sort(e):
k.sort()};this.setByIndex=function(e,g){k[e]=g;this.count=k.length};this.toArray=function(){return[].concat(k)};this.toString=function(e){return k.join(e||",")}};return r.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(b,y,r){b=y.getObject("dojox.collections",!0);b.DictionaryEntry=function(a,k){this.key=a;this.value=k;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};b.Iterator=
function(a){var k=0;this.element=a[k]||null;this.atEnd=function(){return k>=a.length};this.get=function(){return this.atEnd()?null:this.element=a[k++]};this.map=function(e,g){return r.map(a,e,g)};this.reset=function(){k=0;this.element=a[k]}};b.DictionaryIterator=function(a){var k=[],e={},g;for(g in a)e[g]||k.push(a[g]);var h=0;this.element=k[h]||null;this.atEnd=function(){return h>=k.length};this.get=function(){return this.atEnd()?null:this.element=k[h++]};this.map=function(m,l){return r.map(k,m,
l)};this.reset=function(){h=0;this.element=k[h]}};return b})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),function(b,y,r,a,k,e,g){return b(null,{declaredClass:"esri.layers.TileMap",constructor:function(h){this.layer=h;this._tileMaps={}},getTile:function(h,m,l,f,c){h={id:f,level:h,row:m,col:l};m=this._getResamplingBudget();0<m?this._process({tile:h,requestedTile:h,callback:c,resamplingBudget:m}):
(c||this.callback).call(this,h,h)},statusOf:function(h,m,l){var f=this._getResamplingBudget();h={level:h,row:m,col:l};if(0===f)return 1;for(;0<=f;){m=this._tileToTileMap(h);if(!this._tileMaps[m.uid])return-1;m=this._tileMaps[m.uid];if(!m.promise.isFulfilled())return-1;if(this._isTileAvailable(h,m))return 1;h=this._parentTile(h);if(!h)break;f--}return 0},style:function(h,m){if(h.level!==m.level||h.row!==m.row||h.col!==m.col){var l=this.layer.tileInfo,f=l.lods,c=l.cols;l=l.rows;for(var d,u,n=f.length-
1;!d||!u;)d||f[n].level!==h.level||(d=f[n]),u||f[n].level!==m.level||(u=f[n]),n--;f=Math.round(d.resolution/u.resolution);h=m.col%f*-1*c;m=m.row%f*-1*l;f={width:c*f+"px",height:l*f+"px",margin:m+"px 0 0 "+h+"px","will-change":"transform"};h=0===h?0:-1*h;m=0===m?0:-1*m;f.clip="rect("+m+"px,"+(h+c)+"px,"+(m+l)+"px,"+h+"px)";return f}},_process:function(h){var m=h.tile,l=this._tileToTileMap(m),f=this._parentTile(m);this._getTileMap(l).then(y.hitch(this,function(c){l=c;this._isTileAvailable(m,l)?(h.callback||
this.callback).call(this,m,h.requestedTile):0<h.resamplingBudget&&f?(h.resamplingBudget--,h.tile=f,this._process(h)):(h.callback||this.callback).call(this,h.requestedTile,h.requestedTile)}),y.hitch(this,function(){(h.callback||this.callback).call(this,h.requestedTile,h.requestedTile)}))},_getTileMap:function(h){var m,l,f=null;if(this._tileMaps[h.uid]){h=this._tileMaps[h.uid];var c=h.promise}else{this._tileMaps[h.uid]=h;var d=new a;e({url:this._getTileMapUrl(h.level,h.row,h.col),handleAs:"json",content:{f:"json"},
callbackParamName:"callback",timeout:3E3,load:function(u){y.mixin(h,u);if(h.data&&0<h.data.length){l=h.data.length;if(1===l)f=h.data[0];else for(f=h.data[0],m=1;m<l;m++)if(h.data[m]!==f){f=null;break}null!==f&&(delete h.data,h.value=f);null==h.valid&&(h.valid=!0)}d.resolve(h)},error:function(u){u&&422===u.code?(y.mixin(h,{location:{top:h.row,left:h.col,width:8,height:8},valid:!0,value:0}),d.resolve(h)):d.reject()}});c=h.promise=d.promise}return c},_parentTile:function(h){var m=this.layer.tileInfo.lods,
l,f,c=null;r.some(m,function(d,u){return h.level===d.level?(l=d,f=u,!0):!1});0<f&&(m=m[f-1],c={id:h.id,level:m.level,row:Math.floor(h.row*l.resolution/m.resolution+.01),col:Math.floor(h.col*l.resolution/m.resolution+.01)});return c},_tileToTileMap:function(h){var m=8*Math.floor(h.row/8),l=8*Math.floor(h.col/8);return{uid:h.level+"_"+m+"_"+l,level:h.level,row:m,col:l}},_isTileAvailable:function(h,m){if(m.valid)if(void 0!==m.value)h=m.value;else{var l=m.location.left;var f=m.location.top;h=(h.row-f)*
m.location.width+(h.col-l);h=h<m.data.length?m.data[h]:0}else h=0;return h},_getTileMapUrl:function(h,m,l){var f=this.layer,c=f.tileServers,d=f._getToken(),u=f._url.query;h=(c?c[m%c.length]:f._url.path)+"/tilemap/"+h+"/"+m+"/"+l+"/8/8";u&&(h+="?"+k.objectToQuery(u));!d||u&&u.token||(h+=(-1===h.indexOf("?")?"?":"\x26")+"token\x3d"+d);return h=f.addTimestampToURL(h)},_getResamplingBudget:function(){var h=this.layer,m=0;h.resampling&&(m=h._resamplingTolerance,null===m||void 0===m)&&(m=h.tileInfo.lods.length);
return m}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d){var u=b([d],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(n){this.inherited(arguments,[null,n]);this._mapImages=[];var t=r.hitch;this._panStart=
t(this,this._panStart);this._pan=t(this,this._pan);this._extentChange=t(this,this._extentChange);this._zoom=t(this,this._zoom);this._zoomStart=t(this,this._zoomStart);this._scale=t(this,this._scale);this._resize=t(this,this._resize);y.connect(this,"onSuspend",this,this._onSuspend);y.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(n){var t=this._mapImages.push(n);--t;n._idx=t;n._layer=this;this._div&&this._createImage(n,t)},removeImage:function(n){if(n){var t=
n._idx,x=this._mapImages;if(x[t]===n){delete x[t];if(t=n._node)this._clearEvents(t),t.e_idx=t.e_bl=t.e_tr=t.e_l=t.e_t=t.e_w=t.e_h=null,t.parentNode&&(t.parentNode.removeChild(t),k.destroy(t));n._node=n._idx=n._layer=null}}},removeAllImages:function(){var n=this._mapImages,t,x=n.length;for(t=0;t<x;t++){var A=n[t];A&&this.removeImage(A)}this._mapImages=[]},getImages:function(){var n=this._mapImages,t=[],x,A=n.length;for(x=0;x<A;x++)n[x]&&t.push(n[x]);return t},setOpacity:function(n){this.opacity!=n&&
(this._opacityChanged(this.opacity=n),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(n){var t=this._div;if(t)if(!m("ie")||8<m("ie"))e.set(t,"opacity",n);else{var x=t.childNodes;var A=x.length;for(t=0;t<A;t++)e.set(x[t],"opacity",n)}},_createImage:function(n,t){var x=k.create("img");e.set(x,{position:"absolute"});1>n.opacity?e.set(x,"opacity",n.opacity):8>=m("ie")&&e.set(x,"opacity",this.opacity);!n.rotation||9>m("ie")||e.set(x,g._css.names.transform,g._css.rotate(360-
n.rotation));n._node=x;x.e_idx=t;x.e_layer=this;x.e_load=y.connect(x,"onload",u.prototype._imageLoaded);x.e_error=y.connect(x,"onerror",u.prototype._imageError);x.e_abort=y.connect(x,"onabort",u.prototype._imageError);x.src=n.href},_imageLoaded:function(n,t){n=t||n.target||n.currentTarget;t=n.e_layer;var x=t._mapImages[n.e_idx],A=t._map;A&&(A.__zooming||A.__panning||!t._sr)?t._standby.push(n):(t._clearEvents(n),x&&x._node===n&&A&&t._attach(x))},_imageError:function(n){n=n.target||n.currentTarget;
var t=n.e_layer,x=t._mapImages[n.e_idx];t._clearEvents(n);x&&(x._node=null)},_clearEvents:function(n){var t=y.disconnect;t(n.e_load);t(n.e_error);t(n.e_abort);n.e_load=n.e_error=n.e_abort=n.e_layer=null},_attach:function(n){var t=n.extent,x=t.spatialReference,A=this._sr,B=this._div,F=n._node,w=new f({x:t.xmin,y:t.ymin,spatialReference:x});t=new f({x:t.xmax,y:t.ymax,spatialReference:x});A.equals(x)||(A.isWebMercator()&&4326===x.wkid?(w=c.geographicToWebMercator(w),t=c.geographicToWebMercator(t)):x.isWebMercator()&&
4326===A.wkid&&(w=c.webMercatorToGeographic(w),t=c.webMercatorToGeographic(t)));F.e_bl=w;F.e_tr=t;n.visible&&(this._setPos(F,B._left,B._top),(this._active||B).appendChild(F))},_setPos:function(n,t,x){var A=n.e_bl,B=n.e_tr,F=this._map;A=F.toScreen(A);B=F.toScreen(B);t=A.x-t;x=B.y-x;var w=Math.abs(B.x-A.x);A=Math.abs(A.y-B.y);B={width:w+"px",height:A+"px"};var D=this._mapImages[n.e_idx];"css-transforms"===F.navigationMode?B[g._css.names.transform]=g._css.translate(t,x)+(D.rotation?" "+g._css.rotate(360-
D.rotation):""):(B.left=t+"px",B.top=x+"px");e.set(n,B);n.e_l=t;n.e_t=x;n.e_w=w;n.e_h=A},managedSuspension:!0,_setMap:function(n,t){this.inherited(arguments);var x=this._div=k.create("div",null,t),A=g._css.names,B={position:"absolute"},F=n.__visibleDelta;if(!m("ie")||8<m("ie"))B.opacity=this.opacity;"css-transforms"===n.navigationMode?(B[A.transform]=g._css.translate(F.x,F.y),e.set(x,B),x._left=F.x,x._top=F.y,B={position:"absolute",width:n.width+"px",height:n.height+"px",overflow:"visible"},this._active=
k.create("div",null,x),e.set(this._active,B),this._passive=k.create("div",null,x),e.set(this._passive,B)):(x._left=0,x._top=0,e.set(x,B));this._standby=[];A=this._mapImages;F=A.length;for(B=0;B<F;B++){var w=A[B];w._node||this._createImage(w,w._idx)}l.hide(x);return x},_unsetMap:function(n,t){this._disconnect();var x=this._div;if(x){var A=this._mapImages,B,F=A.length;for(B=0;B<F;B++){var w=A[B];if(w){var D=w._node;D&&(this._clearEvents(D),D.e_idx=D.e_bl=D.e_tr=D.e_l=D.e_t=D.e_w=D.e_h=null);w._node=
null}}t.removeChild(x);k.destroy(x)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();l.hide(this._div)},_onResume:function(n){n.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());n=this._map;var t=this._div,x=n.__visibleDelta;"css-transforms"===n.navigationMode&&(t._left=x.x,t._top=x.y,e.set(t,g._css.names.transform,g._css.translate(t._left,t._top)));this._redraw("css-transforms"===
n.navigationMode);this._connect(n);l.show(t)},_connect:function(n){if(!this._connections){var t=y.connect,x="css-transforms"===n.navigationMode;this._connections=[t(n,"onPanStart",this._panStart),t(n,"onPan",this._pan),t(n,"onExtentChange",this._extentChange),x&&t(n,"onZoomStart",this._zoomStart),x?t(n,"onScale",this._scale):t(n,"onZoom",this._zoom),x&&t(n,"onResize",this._resize)];x&&this._resize(n.extent,n.width,n.height)}},_disconnect:function(){this._connections&&(a.forEach(this._connections,
y.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(n,t){n=this._div;n._left=this._panL+t.x;n._top=this._panT+t.y;"css-transforms"===this._map.navigationMode?e.set(n,g._css.names.transform,g._css.translate(n._left,n._top)):e.set(n,{left:n._left+"px",top:n._top+"px"})},_extentChange:function(n,t,x){x?this._redraw("css-transforms"===this._map.navigationMode):t&&this._pan(n,t);this._processStandbyList()},_processStandbyList:function(){var n,
t=this._standby;if(t&&t.length)for(n=t.length-1;0<=n;n--)this._imageLoaded(null,t[n]),t.splice(n,1)},_redraw:function(n){if(n){n=this._passive;var t=g._css.names;e.set(n,t.transition,"none");this._moveImages(n,this._active);e.set(n,t.transform,"none")}n=this._active||this._div;t=this._div._left;var x=this._div._top,A,B=n.childNodes.length;for(A=0;A<B;A++){var F=n.childNodes[A];this._setPos(F,t,x)}},_zoom:function(n,t,x){n=this._div;var A=n._left,B=n._top,F,w=n.childNodes.length;for(F=0;F<w;F++){var D=
n.childNodes[F];var q=D.e_w*t,v=D.e_h*t,z=(x.x-A-D.e_l)*(q-D.e_w)/D.e_w,C=(x.y-B-D.e_t)*(v-D.e_h)/D.e_h;z=isNaN(z)?0:z;C=isNaN(C)?0:C;e.set(D,{left:D.e_l-z+"px",top:D.e_t-C+"px",width:q+"px",height:v+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(n,t){n=n.childNodes;var x=n.length;if(0<x)for(--x;0<=x;x--)t.appendChild(n[x])},_scale:function(n,t){var x=g._css.names,A=this._passive;e.set(A,x.transition,t?"none":x.transformName+" "+h.defaults.map.zoomDuration+
"ms ease");({})[x.transform]=g._css.matrix(n);e.set(A,x.transform,g._css.matrix(n))},_resize:function(n,t,x){e.set(this._active,{width:t+"px",height:x+"px"});e.set(this._passive,{width:t+"px",height:x+"px"})}});r.setObject("layers.MapImageLayer",u,g);return u})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),function(b,y,r,a,k,e,g,h,m){b=b(h,{declaredClass:"esri.layers.OpenStreetMapLayer",
constructor:function(l){this.spatialReference=new e({wkid:102100});this.tileInfo=new m({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,
resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},
{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:.597164283559817},{level:19,scale:1128.497176,resolution:.298582141647617}]});this.fullExtent=new g({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,
spatialReference:{wkid:102100}});this.initialExtent=new g({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=l&&l.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=l?l.displayLevels:null;this.copyright=l&&l.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";this.loaded=!0;this.onLoad(this);(l=
l&&l.loadCallback)&&l(this)},getTileUrl:function(l,f,c){l=this.tileServers[f%this.serversLength]+"/"+l+"/"+c+"/"+f+".png";l=k.normalize(l);l=this.addTimestampToURL(l);return k.addProxy(l)}});y.setObject("layers.OpenStreetMapLayer",b,a);return b})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom ./PopupTemplate ./PopupRenderer".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v,z,C){b=b([v,z,h],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(E,G){this.initialize();y.mixin(this,E);this.domNode=l.byId(G);G=this._nls=y.mixin({},C.widgets.popup);E=this.domNode;c.add(E,"esriPopup");(this._isRTL=!u.isBodyLtr())&&
n.set(E,"direction","rtl");f.set(E,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+G.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+G.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+G.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
G.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+G.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d'"+G.NLS_zoomTo+"' class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+G.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=k.query(".sizer",E);G=k.query(".titlePane",E)[0];this._title=k.query(".title",G)[0];this._prevFeatureButton=k.query(".prev",G)[0];this._nextFeatureButton=k.query(".next",G)[0];this._maxButton=k.query(".maximize",G)[0];this._spinner=k.query(".spinner",G)[0];this._contentPane=k.query(".contentPane",E)[0];this._positioner=k.query(".esriPopupWrapper",E)[0];this._pointer=k.query(".pointer",E)[0];this._outerPointer=k.query(".outerPointer",E)[0];this._actionList=k.query(".actionsPane .actionList",
E)[0];this._contentUpdateHandles={};this._eventConnections=[a.connect(k.query(".close",G)[0],"onclick",this,this.hide),a.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),a.connect(this._nextFeatureButton,"onclick",this,this.selectNext),a.connect(this._maxButton,"onclick",this,this._toggleSize),a.connect(k.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),a.connect(this,"onClearFeatures",this,this._featuresCleared),a.connect(this,"onSelectionChange",this,this._featureSelected),
a.connect(this,"onDfdComplete",this,this._updateUI)];e("esri-touch")&&(E=B.setScrollable(this._contentPane),this._eventConnections.push(E[0],E[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(E){this.inherited(arguments);d.place(this.domNode,E.root);this.highlight&&this.enableHighlight(E);this._maxHeight=n.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(E){this.popupWindow&&
(A.isDefined(E)&&""!==E||(E="\x26nbsp;"),this.destroyDijits(this._title),this.place(E,this._title),this.isShowing&&(this.startupDijits(this._title),this.reposition()))},setContent:function(E){this.popupWindow&&(A.isDefined(E)&&""!==E||(E="\x26nbsp;"),this._destroyContent(),this.place(E,this._contentPane),this.isShowing&&(this._startupContent(),this.reposition()))},show:function(E,G){if(this.popupWindow)if(this._delayHide=!1,E){var H=this.map;E.spatialReference?(this.location=E,E=H.toScreen(E)):this.location=
H.toMap(E);var K=H._getFrameWidth();if(-1!==K&&(E.x%=K,0>E.x&&(E.x+=K),H.width>K))for(H=(H.width-K)/2;E.x<H;)E.x+=K;this._maximized?this.restore():this._setPosition(E);G&&G.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this._startupContent(),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),
this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(E,G){this.popupWindow&&(this._sizers.style({width:E+"px"}),n.set(this._contentPane,"maxHeight",G+"px"),this._maxHeight=G,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this.location&&!this._maximized&&this.isShowing&&this._setPosition(this.map.toScreen(this.location))},addActions:function(E){return r.map(E,function(G){var H=d.create("a",{href:"javascript:void(0);",className:"action "+
G.className,title:G.title,innerHTML:G.title},this._actionList);a.connect(H,"onclick",G.callback);return{action:G,node:H}},this)},removeActions:function(E){r.forEach(E,function(G){d.destroy(G.node)})},getCurrentAnchor:function(){return this._anchor},maximize:function(){var E=this.map;if(E&&!this._maximized&&this.popupWindow){this._maximized=!0;var G=this._maxButton;c.remove(G,"maximize");c.add(G,"restore");f.set(G,"title",this._nls.NLS_restore);G=this.marginLeft;var H=this.marginTop,K=E.width-2*G;
E=E.height-2*H;n.set(this.domNode,{left:this._isRTL?null:G+"px",right:this._isRTL?G+"px":null,top:H+"px",bottom:null});n.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=n.get(this._sizers[0],"width");this._savedHeight=n.get(this._contentPane,"maxHeight");this._sizers.style({width:K+"px"});n.set(this._contentPane,{maxHeight:E-65+"px",height:E-65+"px"});this._showPointer("");this._unfollowMap();c.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&
this._maximized&&this.popupWindow){this._maximized=!1;var E=this._maxButton;c.remove(E,"restore");c.add(E,"maximize");f.set(E,"title",this._nls.NLS_maximize);n.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();c.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);
this._destroyContent();r.forEach(this._eventConnections,a.disconnect);d.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(E,G){this._transientAnchor=
G&&G.anchor;this.inherited(arguments);this._updateUI()},clearFeatures:function(E){E||(this._transientAnchor=null);this.inherited(arguments)},postscript:null,_highlightSetter:function(E){var G=this.highlight,H=this.map;this.highlight=E;if(H&&E!==G)if(E){if(this.enableHighlight(H),E=this.features&&this.features[this.selectedIndex])this.updateHighlight(H,E),this.showHighlight()}else this.disableHighlight(H)},_pagingControlsSetter:function(E){var G=this.pagingControls,H=this.map;this.pagingControls=E;
H&&E!==G&&this._updatePagingControls()},_pagingInfoSetter:function(E){var G=this.pagingInfo,H=this.map;this.pagingInfo=E;H&&E!==G&&this.features&&this.features.length&&this._updatePagingInfo()},_popupWindowSetter:function(E){var G=this.popupWindow,H=this.map;this.popupWindow=E;H&&E!==G&&(E?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(E){var G=this.anchor;this.anchor=E;this.map&&E!==G&&this.reposition()},_startupContent:function(){var E=this._contentPane;
this.startupDijits(E);r.forEach(this._getPopupRendererDijits(E),function(G){if(!this._contentUpdateHandles[G.id]){var H=G.on("content-update",y.hitch(this,function(){this.reposition()}));this._contentUpdateHandles[G.id]=H}},this)},_destroyContent:function(){var E=this._contentPane;r.forEach(this._getPopupRendererDijits(E),function(G){var H=this._contentUpdateHandles[G.id];H&&(H.remove(),delete this._contentUpdateHandles[G.id])},this);this.destroyDijits(E)},_getPopupRendererDijits:function(E){E=this.getDijits(E);
return E=r.filter(E,function(G){return G&&G.set&&/_PopupRenderer/.test(G.declaredClass)})},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var E=this.selectedIndex;if(0<=E){var G=this.features[E].getContent();if(!this.titleInBody&&G&&y.isString(G.id)){var H=t.byId(G.id);H&&H.set&&/_PopupRenderer/.test(H.declaredClass)&&
H.set("showTitle",!1)}this.setContent(G);this.updateHighlight(this.map,this.features[E]);this.showHighlight()}},_toggleVisibility:function(E){this._setVisibility(E);this.isShowing=E},_setVisibility:function(E){c.toggle(this.domNode,"esriPopupVisible",E);c.toggle(this.domNode,"esriPopupHidden",!E)},_waitAndHide:function(E){var G=this;this._delayHide=!0;setTimeout(function(){G._delayHide&&(G._delayHide=!1,G.hide())},E)},_followMap:function(){this._unfollowMap();var E=this.map;this._handles=[a.connect(E,
"onPanStart",this,this._onPanStart),a.connect(E,"onPan",this,this._onPan),a.connect(E,"onZoomStart",this,this._onZoomStart),a.connect(E,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var E=this._handles;E&&(r.forEach(E,a.disconnect),this._handles=null)},_onPanStart:function(){var E=this.domNode.style;this._panOrigin={left:E.left,top:E.top,right:E.right,bottom:E.bottom}},_onPan:function(E,G){var H=this._panOrigin;E=G.x;G=G.y;var K=H.left,I=H.top,J=H.right;H=H.bottom;K&&(K=parseFloat(K)+
E+"px");I&&(I=parseFloat(I)+G+"px");J&&(J=parseFloat(J)-E+"px");H&&(H=parseFloat(H)-G+"px");n.set(this.domNode,{left:K,top:I,right:J,bottom:H})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(E,G,H){H&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_getTargetAnchor:function(){return this._transientAnchor||this.anchor},_setPosition:function(E){var G=
E.x,H=E.y;E=this.offsetX||0;var K=this.offsetY||0,I=0,J=0,Q=this.map,V=Q.position.x,O=Q.position.y,S=Q.width,L=Q.height;Q="Left";var Y="bottom",ca="right",U="top",X=u.getContentBox(this._positioner),Z=X.w/2,N=X.h/2,aa=n.get(this._sizers[0],"height")+this._maxHeight+n.get(this._sizers[2],"height"),ka=aa/2,pa=0,ta=0,Ba=S,Da=L,oa=G,ra=H,ya=this._getTargetAnchor().toLowerCase();if("auto"===ya){if(ya=g.getBox)ya=ya(),pa=Math.max(ya.l,V),Ba=Math.min(ya.l+ya.w,V+S),ta=Math.max(ya.t,O),Da=Math.min(ya.t+ya.h,
O+L),oa+=V,ra+=O;V=ra-ta>=aa;O=Da-ra>=aa;S=Ba-oa>=X.w;X=oa-pa>=X.w;ra-ta>ka&&Da-ra>=ka&&(S?(Y="",Q="Left",U="",ca="right"):X&&(Y="",Q="Right",U="",ca="left"));Q&&Y&&oa-pa>Z&&Ba-oa>=Z&&(V?(Q="",Y="bottom",ca="",U="top"):O&&(Q="",Y="top",ca="",U="bottom"));Q&&Y&&(S&&V?(Q="Left",Y="bottom",ca="right",U="top"):S&&O?(Q="Left",Y="top",ca="right",U="bottom"):X&&O?(Q="Right",Y="top",ca="left",U="bottom"):X&&V&&(Q="Right",Y="bottom",ca="left",U="top"));this._anchor=U&&ca?U+"-"+ca:U||ca}else Y=Q="",-1!==ya.indexOf("top")?
Y="bottom":-1!==ya.indexOf("bottom")&&(Y="top"),-1!==ya.indexOf("left")?Q="Right":-1!==ya.indexOf("right")&&(Q="Left"),this._anchor=this._getTargetAnchor();ca=Y+Q;switch(ca){case "top":case "bottom":J=14;break;case "Left":case "Right":I=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":J=14,I=-16}n.set(this.domNode,{left:G+"px",top:H+"px",right:null,bottom:null});G={left:null,right:null,top:null,bottom:null};Q?G[Q.toLowerCase()]=I+E+"px":G.left=-Z+"px";Y?G[Y]=J+K+"px":G.top=
-N+"px";n.set(this._positioner,G);this._showPointer(ca)},_showPointer:function(E){c.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));c.remove(this._outerPointer,["right","left","hidden"]);"Right"===E||"Left"===E?(E=E.toLowerCase(),c.add(this._outerPointer,E)):c.add(this._pointer,E)},_setPagerCallbacks:function(E,G,H){if(this.pagingControls&&(E!==this||this._pagerScope&&this._pagerScope!==this)&&E!==this._pagerScope){this._pagerScope=E;E===this&&
(G=this.selectPrevious,H=this.selectNext);var K=this._eventConnections;a.disconnect(K[1]);a.disconnect(K[2]);G&&(K[1]=a.connect(this._prevFeatureButton,"onclick",E,G));H&&(K[2]=a.connect(this._nextFeatureButton,"onclick",E,H))}},_getLocation:function(E){var G=E&&E.geometry;if(G)switch(G.type){case "point":var H=G;if(E.isAggregate()){E=E.getChildGraphics();var K=E[0];E=(K=K.geometry&&K.geometry.spatialReference)&&new D({points:r.map(E,function(I){I=I.geometry;return[I.x,I.y]}),spatialReference:K.toJson()});
K=q.getDenormalizedExtent(E)}break;case "multipoint":H=G.getPoint(0);K=q.getDenormalizedExtent(G);break;case "polyline":case "polygon":H=G.getPoint(0,0),K=q.getDenormalizedExtent(G)}return[H,K]},_zoomToFeature:function(E){E.preventDefault();var G=this.features,H=this.selectedIndex;E=this.map;if(G)if(H=this._getLocation(G[H]),G=H[0],H=H[1],G||(G=this.location),H&&H.intersects(this.location)||(this.location=G),H&&H.getWidth()&&H.getHeight())E.setExtent(H,!0);else{var K=E.getNumLevels();H=E.getLevel();
var I=E.getMaxZoom(),J=this.zoomFactor||1;0<K?H!==I&&(K=H+J,K>I&&(K=I),E.navigationManager._wheelZoom({value:K-H,mapPoint:G},!0)):E.navigationManager._wheelZoom({value:1/Math.pow(2,J)*2,mapPoint:G},!0)}},_updatePagingControls:function(){var E=this._prevFeatureButton,G=this._nextFeatureButton,H=this.selectedIndex,K=this.features?this.features.length:0;this.pagingControls&&1<K?(0===H?c.add(E,"hidden"):c.remove(E,"hidden"),H===K-1?c.add(G,"hidden"):c.remove(G,"hidden")):(c.add(E,"hidden"),c.add(G,"hidden"))},
_updatePagingInfo:function(){var E=this.features?this.features.length:0,G=this._nls,H="\x26nbsp;";this.pagingInfo&&1<E&&G.NLS_pagingInfo&&(H=A.substitute({index:this.selectedIndex+1,total:E},G.NLS_pagingInfo));E&&(G=this.getSelectedFeature(),E=G.getInfoTemplate(),G=G.getTitle(),E&&!/esri\.InfoTemplate/.test(E.declaredClass)&&this.titleInBody||!G||(H=G+("\x26nbsp;"===H?"":" "+H)));this.setTitle(H)},_updateUI:function(){if(this.popupWindow){var E=this.features,G=this.deferreds,H=E?E.length:0,K=this._spinner,
I=this._actionList,J=this._nls;this._updatePagingControls();this._updatePagingInfo();H?c.remove(I,"hidden"):c.add(I,"hidden");G&&G.length?E?c.remove(K,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+J.NLS_searching+"...\x3c/div\x3e"):c.add(K,"hidden");H||G&&G.length?this._delayHide=!1:(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+J.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay))}}});y.setObject("dijit.Popup",b,x);return b})},
"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),function(b,y,r,a,k,e,g,h,m,l,f){b=b(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var c=y.hitch;this.__set_title=c(this,this.__set_title);this.__err_title=c(this,this.__err_title);this.__set_content=c(this,this.__set_content);this.__err_content=c(this,this.__err_content)},
setMap:function(c){this.map=c},unsetMap:function(c){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(c,d){l.isDefined(c)?y.isObject(c)?e.place(c,d,"only"):d.innerHTML=c:d.innerHTML=""},startupDijits:function(c){this._processDijits(c)},destroyDijits:function(c){this._processDijits(c,!0)},getDijits:function(c){var d=[];c&&1===c.children.length&&(c=c.children[0])&&(d=(d=h.byNode(c))?
[d]:h.findWidgets(c));return d},_processDijits:function(c,d){c=this.getDijits(c);r.forEach(c,function(u){if(d){if(u._started&&!u._destroyed)try{u.destroyRecursive?u.destroyRecursive():u.destroy&&u.destroy()}catch(n){}}else if(!u._started)try{u.startup()}catch(n){}})},__registerMapListeners:function(){this.__unregisterMapListeners();var c=this.map;this.__handles=[a.connect(c,"onPan",this,this.__onMapPan),a.connect(c,"onZoomStart",this,this.__onMapZmStart),a.connect(c,"onExtentChange",this,this.__onMapExtChg)]},
__unregisterMapListeners:function(){var c=this.__handles;c&&(r.forEach(c,a.disconnect,a),this.__handles=null)},__onMapPan:function(c,d){this.move(d,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new f(this.coords));this.hide(null,!0)},__onMapExtChg:function(c,d,u){c=this.map;var n=this.mapCoords;n?this.show(n,null,!0):(d=u?c.toScreen(this.__mcoords):this.coords.offset(d&&d.x||0,d&&d.y||0),this.show(d,null,!0))},__setValue:function(c,d){this[c].innerHTML="";var u="_dfd"+
c,n=this[u];n&&-1===n.fired&&(n.cancel(),this[u]=null);l.isDefined(d)&&(d instanceof k?(this[u]=d,d.addCallbacks(this["__set"+c],this["__err"+c])):this.__render(c,d))},__set_title:function(c){this._dfd_title=null;this.__render("_title",c)},__err_title:function(c){this._dfd_title=null},__set_content:function(c){this._dfd_content=null;this.__render("_content",c)},__err_content:function(c){this._dfd_content=null},__render:function(c,d){var u=this[c];this.place(d,u);this.isShowing&&(this.startupDijits(u),
"_title"===c&&this._adjustContentArea&&this._adjustContentArea())}});return m.InfoWindowBase=b})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented ./PopupInfo".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A){function B(F){return"sizeInfo"===F.type}b=b(A,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_mapLevelChangeHandle:null,_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",y.hitch(this,this._resetUpdateEndListeners));
this.on("dfd-complete",y.hitch(this,this._processFeatures));this.on("set-features",y.hitch(this,this._processFeatures));this.on("selection-change",y.hitch(this,this._checkFeatureResolution))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners();this._untrackMapLevelChange()},setFeatures:function(F){if(F&&F.length){this.clearFeatures(!0);var w,D;F[0]instanceof k?D=F:w=F;w?this._updateFeatures(null,w):(this.deferreds=D,D=D.slice(0),r.forEach(D,function(q){q.addBoth(y.hitch(this,
this._updateFeatures,q))},this))}},clearFeatures:function(F){this.features=this.deferreds=this._marked=null;this.count=0;var w=this.selectedIndex;this.selectedIndex=-1;if(-1<w)this.onSelectionChange();this.onClearFeatures({isIntermediate:!!F})},getSelectedFeature:function(){var F=this.features;if(F)return F[this.selectedIndex]},select:function(F){0>F||F>=this.count||(this.selectedIndex=F,this.onSelectionChange())},enableHighlight:function(F){this._highlighted=F.graphics.add(new h(new m(0,0,F.spatialReference)));
this._highlighted.attr("data-popup-highlight","");this._highlighted.hide();this._trackMapLevelChange(F);this.markerSymbol||(F=this.markerSymbol=new d,F.setStyle(d.STYLE_TARGET),F._setDim(16,16,0),F.setOutline(new n(u.STYLE_SOLID,new a([0,255,255]),2,n.CAP_ROUND,n.JOIN_ROUND)),F.setColor(new a([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new u(u.STYLE_SOLID,new a([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new t(t.STYLE_NULL,new u(u.STYLE_SOLID,new a([0,255,255]),2),new a([0,0,0,0])));this.clusterFillSymbol||
(this.clusterFillSymbol=new t(t.STYLE_SOLID,new u(u.STYLE_SOLID,new a([0,255,255]),1.33),null))},disableHighlight:function(F){var w=this._highlighted;w&&(w.hide(),F.graphics.remove(w),delete this._highlighted);this._untrackMapLevelChange();this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var F=this.features&&this.features[this.selectedIndex];this._highlighted&&F&&F.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},
updateHighlight:function(F,w){var D=w.geometry,q=this._highlighted;if(D&&q){q.hide();!q._graphicsLayer&&F&&F.graphics.add(q);q.setGeometry(l.fromJson(D.toJson()));switch(D.type){case "point":case "multipoint":var v=w.getLayer(),z=w.symbol||v&&v._getSymbol(w);if(v&&z){var C;D=z.xoffset||0;var E=z.yoffset||0,G=z.angle||0;switch(z.type){case "simplemarkersymbol":var H=C=z.size||0;break;case "picturemarkersymbol":H=z.width||0;C=z.height||0;break;case "textsymbol":H=C=z.font&&z.font.size||0}var K=w.symbol?
null:v._getRenderer(w);(v=this._getSizeInfo(K))?F=w=K.getSize(w,{sizeInfo:v,shape:z.style,resolution:F&&F.getResolutionInMeters&&F.getResolutionInMeters()}):null!=w.size?F=w=w.size:(F=H,w=C);K=this.markerSymbol;F&&w&&(D&&(D=D/H*F),E&&(E=E/C*w),K._setDim(F+4,w+4,0));K.setOffset(D,E);K.setAngle(G)}break;case "polyline":K=this.lineSymbol;break;case "polygon":K=this.fillSymbol}q.setSymbol(K)}else q&&q.hide()},showClosestFirst:function(F){var w=this.features;if(w&&w.length){if(1<w.length){var D,q=Infinity,
v=-1,z,C=f.getLength,E=F.spatialReference;F=F.normalize();for(D=w.length-1;0<=D;D--)if(z=w[D].geometry){var G=z.spatialReference;var H=0;try{var K="point"===z.type?z:z.getExtent().getCenter();K=K.normalize();E&&G&&!E.equals(G)&&E._canProject(G)&&(K=E.isWebMercator()?c.geographicToWebMercator(K):c.webMercatorToGeographic(K));H=C(F,K)}catch(I){}0<H&&H<q&&(q=H,v=D)}0<v&&(w.splice(0,0,w.splice(v,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=F)},_trackMapLevelChange:function(F){this._untrackMapLevelChange();
this._mapLevelChangeHandle=F.on("extent-change",y.hitch(this,function(w){w.levelChange&&this._checkFeatureResolution()}))},_untrackMapLevelChange:function(){this._mapLevelChangeHandle&&(this._mapLevelChangeHandle.remove(),this._mapLevelChangeHandle=null)},_unbind:function(F){F=r.indexOf(this.deferreds,F);if(-1!==F)return this.deferreds.splice(F,1),this.deferreds.length?1:(this.deferreds=null,2)},_fireComplete:function(F){var w=this._marked;w&&(this._marked=null,this.showClosestFirst(w));this.onDfdComplete(F)},
_updateFeatures:function(F,w){if(F){if(this.deferreds&&(F=this._unbind(F)))if(w&&w instanceof Error){if(this._fireComplete(w),2===F)this.onSetFeatures()}else if(w&&w.length)if(this.features){if(w=r.filter(w,function(D){return-1===r.indexOf(this.features,D)},this),this.features=this.features.concat(w),this.count=this.features.length,this._fireComplete(),2===F)this.onSetFeatures()}else{this.features=w;this.count=w.length;this.selectedIndex=0;this._fireComplete();if(2===F)this.onSetFeatures();this.select(0)}else if(this._fireComplete(),
2===F)this.onSetFeatures()}else this.features=w,this.count=w.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(F){return F?F.sizeInfo||r.filter(F.visualVariables,B)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};r.forEach(this._updateEndHandles,function(F){F.remove()});this._updateEndHandles=[]},_processFeatures:function(){r.forEach(this.features,function(F){(F=F.getLayer())&&!this._featureLayers[F.id]&&(1===F.currentMode||0===F.currentMode&&
6===F.mode)&&F.objectIdField&&F.hasXYFootprint&&F.queryFeatures&&(this._featureLayers[F.id]=F,F=F.on("update-end",y.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(F))},this)},_fLyrUpdateEndHandler:function(F){if(!F.error){var w=this,D=F.target,q=D.getSelectedFeatures(),v=0===D.currentMode&&6===D.mode,z={},C=[];r.forEach(this.features,function(E){if(E.getLayer()===D){var G=E.attributes[D.objectIdField];z[G]=E;C.push(G)}});C.length&&(F=new x,F.objectIds=C,D.queryFeatures(F,function(E){r.forEach(E.features,
function(G){var H=z[G.attributes[D.objectIdField]],K=!1;H.geometry!==G.geometry||D.hasWebGLSurface()?(H.setGeometry(G.geometry),K=!0):v&&q&&-1!==r.indexOf(q,G)&&(K=!0);K&&this._highlighted&&H===this.getSelectedFeature()&&this._highlighted.setGeometry(G.geometry)},w)}))}},_checkFeatureResolution:function(){var F=this.getSelectedFeature(),w=this.map;if(F&&w){var D=F.getLayer();if(D){var q=F.getResolution();2===D.currentMode&&F.geometry&&q&&q>w.getResolution()&&(w=w.getResolutionForPopup(),(D=this._refetchFeature(F,
w,D))&&D.then(y.hitch(this,this._updateFeatureResolution,F,w)))}}},_refetchFeature:function(F,w,D){if(F=this._createQueryForCustomResolution(F,w,D))return D.queryFeatures(F).then(function(q){return q&&q.features[0]})},_createQueryForCustomResolution:function(F,w,D){D=D.objectIdField;var q=F.attributes;q=q&&D&&q[D];if(null==q)return null;var v=new x;v.objectIds=[q];v.maxAllowableOffset=w;v.outFields=[D];v.outSpatialReference=F.geometry.spatialReference;return v},_updateFeatureResolution:function(F,
w,D){F.getResolution()!==w&&(F.setResolution(w),F.setGeometry(D.geometry),this._highlighted&&F===this.getSelectedFeature()&&this._highlighted.setGeometry(F.geometry))}});return g.PopupBase=b})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(b){return{add:function(y,r){y.popupManager||(y.popupManager=new b(r),y.popupManager.setMap(y))},remove:function(y){var r=y.popupManager;r&&(r.unsetMap(),y.popupManager=void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang esri/sniff dojo/on dojo/promise/all dojo/Stateful require".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n){var t;h=h(u,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(x){this._mapClickHandler=l.hitch(this,this._mapClickHandler)},setMap:function(x){if(this.map)if(x!==this.map)this.unsetMap();else return;this.map=x;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(x){var A;
if(x&&(A=x.getLayer())&&(x=A.id,this._featureLayersCache[x])){var B=x.lastIndexOf("_");-1<B&&(x=x.substring(0,B),A=this.map.getLayer(x))}return A},_enabledSetter:function(x){this.enabled=x;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(x){var A=this.map.infoWindow,B=x.graphic;A&&this.map.loaded&&
(A.clearFeatures&&A.setFeatures?this._showPopup(x):B&&B.getInfoTemplate()&&this._showInfoWindow(B,x.mapPoint))},_showPopup:function(x){var A=this.map,B=A.infoWindow,F=this,w=[],D=[A.graphics].concat(g.map(A.graphicsLayerIds,A.getLayer,A));g.forEach(D,function(z){var C=z.getFeatureReduction&&z.getFeatureReduction();z&&z.loaded&&z.infoTemplate&&!z.suspended&&(!C||!F._isReductionEnabled(z)||C.infoTemplate&&!C.disablePopup)&&w.push(z)});var q=[];g.forEach(A.layerIds,function(z){(z=A.getLayer(z))&&z.loaded&&
!z.suspended&&(F._isImageServiceLayer(z)&&z.infoTemplate?w.push(z):"esri.layers.WMSLayer"===z.declaredClass&&z.getFeatureInfoURL?w.push(z):"esri.layers.ArcGISDynamicMapServiceLayer"!==z.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==z.declaredClass||!z.infoTemplates||q.push(z))});var v=A.getResolutionForPopup();this._getSubLayerFeatureLayers(q,v).then(function(z){w=w.concat(z);z=x.graphic&&x.graphic.getParentGraphic()||x.graphic;var C=null;z&&z.getInfoTemplate()&&!F._isImageServiceLayer(z.getLayer())&&
(C=z);if(w.length||C){var E=F._calculateClickTolerance(w),G=x.screenPoint;z=A.toMap(new y(G.x-E,G.y+E));E=A.toMap(new y(G.x+E,G.y-E));var H=new b(z.x,z.y,E.x,E.y,A.spatialReference);if(H=H.intersects(A.extent)){var K=new k,I=!!C,J=!0;z=g.map(w,function(Q){K.timeExtent=Q.useMapTime?A.timeExtent:null;var V=F._isReductionEnabled(Q);Q=V?Q.getFeatureReductionLayer():Q;var O=F._featureLayersCache[Q.id];if(F._isImageServiceLayer(Q)){K.geometry=x.mapPoint;J=!1;var S={rasterAttributeTableFieldPrefix:"Raster.",
returnDomainValues:!0};F._isTiledImageServiceLayer(Q)?S=Q.fetchPopupFromTiles(K):(S=Q.queryVisibleRasters(K,S),S.addCallback(function(){var Y=Q.getVisibleRasters();I=I||0<Y.length;return Y}))}else if("esri.layers.WMSLayer"===Q.declaredClass){S=new m;var L=Q._getPopupGraphic(A,x.screenPoint);L?(S.resolve([L]),I=!0):S.resolve([])}else O||"function"===typeof Q.queryFeatures&&(0===Q.currentMode||1===Q.currentMode)?(K.geometry=H,S=Q.queryFeatures(K),S.addCallback(function(Y){var ca=[];g.forEach(Y.features,
function(U){U.visible&&(ca.push(U),O&&U.setResolution(v))});I=I||0<ca.length;return ca})):(S=new m,L=g.filter(Q.graphics,function(Y){return Y&&Y.visible&&H.intersects(Y.geometry)}),V&&F._isParentLayer(Q,C)&&(V=F._findGraphicById(L,C,"cluster_id"))&&(C=V),I=I||0<L.length,S.resolve(L));return S});C&&(E=new m,E.resolve([C]),z.unshift(E));g.some(z,function(Q){return!Q.isFulfilled()})||I?(B.setFeatures(z),B.show(x.mapPoint,{closestFirst:J})):(B.hide(),B.clearFeatures())}}})},_getSubLayerFeatureLayers:function(x,
A,B){A=A||null;var F=B||new m,w=[];B=x.length;var D=this.map.getScale(),q=!1,v=this,z=0;a:for(;z<B;z++){var C=x[z],E=C.dynamicLayerInfos||C.layerInfos;if(E){var G=null;C._params&&(C._params.layers||C._params.dynamicLayers)&&(G=C.visibleLayers);G=a._getVisibleLayers(E,G);for(var H=a._getLayersForScale(D,E),K=E.length,I=0;I<K;I++){var J=E[I],Q=J.id,V=C.infoTemplates[Q];if(!J.subLayerIds&&V&&V.infoTemplate&&-1<g.indexOf(G,Q)&&-1<g.indexOf(H,Q)){if(!t){q=!0;break a}var O=C.id+"_"+Q,S=this._featureLayersCache[O];
S&&S.loadError||(S||((S=V.layerUrl)||(S=J.source?this._getLayerUrl(C.url,"/dynamicLayer"):this._getLayerUrl(C.url,Q)),S=new t(S,{parentLayer:C,id:O,drawMode:!1,mode:t.MODE_SELECTION,outFields:this._getOutFields(V.infoTemplate),resourceInfo:V.resourceInfo,source:J.source}),this._featureLayersCache[O]=S),S.setDefinitionExpression(C.layerDefinitions&&C.layerDefinitions[Q]),S.setGDBVersion(C.gdbVersion),S.setInfoTemplate(V.infoTemplate),S.setMaxAllowableOffset(A),S.setUseMapTime(!!C.useMapTime),C.layerDrawingOptions&&
C.layerDrawingOptions[Q]&&C.layerDrawingOptions[Q].renderer&&S.setRenderer(C.layerDrawingOptions[Q].renderer),w.push(S))}}}}if(q){var L=new m;n(["./layers/FeatureLayer"],function(ca){t=ca;L.resolve()});L.then(function(){v._getSubLayerFeatureLayers(x,A,F)})}else{var Y=[];g.forEach(w,function(ca){if(!ca.loaded){var U=new m;c.once(ca,"load, error",function(){U.resolve()});Y.push(U.promise)}});Y.length?d(Y).then(function(){w=g.filter(w,function(ca){return!ca.loadError&&ca.isVisibleAtScale(D)});F.resolve(w)}):
(w=g.filter(w,function(ca){return ca.isVisibleAtScale(D)}),F.resolve(w))}return F.promise},_getLayerUrl:function(x,A){var B=x.indexOf("?");return-1===B?x+"/"+A:x.substring(0,B)+"/"+A+x.substring(B)},_getOutFields:function(x){var A=x.info&&x.info.fieldInfos;if(A&&A.length&&"esri.dijit.PopupTemplate"===x.declaredClass){var B=[];g.forEach(A,function(F){var w=F.fieldName&&F.fieldName.toLowerCase();w&&"shape"!==w&&0!==w.indexOf("relationships/")&&B.push(F.fieldName)})}else B=["*"];return B},_calculateClickTolerance:function(x){var A=
f("esri-touch")?9:6,B,F;g.forEach(x,function(w){if(B=w.renderer)"esri.renderer.SimpleRenderer"===B.declaredClass?((F=B.symbol)&&F.xoffset&&(A=Math.max(A,Math.abs(F.xoffset))),F&&F.yoffset&&(A=Math.max(A,Math.abs(F.yoffset)))):"esri.renderer.UniqueValueRenderer"!==B.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==B.declaredClass||g.forEach(B.infos,function(D){(F=D.symbol)&&F.xoffset&&(A=Math.max(A,Math.abs(F.xoffset)));F&&F.yoffset&&(A=Math.max(A,Math.abs(F.yoffset)))})});return A},_showInfoWindow:function(x,
A){var B=this.map.infoWindow,F=x.geometry;A=F&&"point"===F.type?F:A;F=x.getContent();B.setTitle(x.getTitle());F&&l.isString(F.id)&&(x=e.byId(F.id))&&x.set&&/_PopupRenderer/.test(x.declaredClass)&&x.set("showTitle",!1);B.setContent(F);B.show(A)},_findGraphicById:function(x,A,B){var F,w=(A=A.attributes)&&A[B];g.some(x,function(D){var q=D.attributes;q&&q[B]===w&&(F=D);return!!F});return F},_isParentLayer:function(x,A){A=A&&A.getLayer();return x&&A===x},_isReductionEnabled:function(x){return x&&x.isFeatureReductionActive&&
x.isFeatureReductionActive()},_isImageServiceLayer:function(x){return"esri.layers.ArcGISImageServiceLayer"===x.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===x.declaredClass||"esri.layers.RasterXLayer"===x.declaredClass},_isTiledImageServiceLayer:function(x){return"esri.layers.RasterXLayer"===x.declaredClass}});return r.PopupManager=h})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q){var v=a.connect,z=a.disconnect,C=u("chrome"),E=u("safari"),G=[g.NUMPAD_PLUS,61,187,g.NUMPAD_MINUS,173,189,g.UP_ARROW,g.NUMPAD_8,g.RIGHT_ARROW,g.NUMPAD_6,g.DOWN_ARROW,g.NUMPAD_2,g.LEFT_ARROW,g.NUMPAD_4,g.PAGE_UP,g.NUMPAD_9,g.PAGE_DOWN,g.NUMPAD_3,g.END,g.NUMPAD_1,g.HOME,g.NUMPAD_7];b=b(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(H,K){this.map=H;y.mixin(this,K);K=H.__container;u("esri-pointer")?(this.pointerEvents=
new c(K,{map:H}),this.eventModel="pointer"):u("esri-touch")?(u("ios")||(this.mouseEvents=new l(K,{map:H})),this.touchEvents=new f(K,{map:H,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new l(K,{map:H}),this.eventModel="mouse");this._zoomRect=new x(null,new q(d.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=y.hitch(this,this._adjustPinch);this._adjustPinchEnd=y.hitch(this,this._adjustPinchEnd)},_panInit:function(H){var K=this.mouseEvents;e.isLeft(H)&&
this.map.isPan&&!H.shiftKey&&(this._dragOrigin=new B(0,0),y.mixin(this._dragOrigin,H.screenPoint),z(this._panStartHandle),z(this._panHandle),z(this._panEndHandle),this._panStartHandle=v(K,"onMouseDragStart",this,this._panStart),this._panHandle=v(K,"onMouseDrag",this,this._pan),this._panEndHandle=v(K,"onMouseUp",this,this._panEnd),C||E)&&(H.preventDefault(),h.curNode&&h.curNode.blur())},_panStart:function(H){this.map.setCursor("move");this.map.__panStart(H.screenPoint.x,H.screenPoint.y)},_pan:function(H){this.map.__pan(H.screenPoint.x-
this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)},_panEnd:function(H){z(this._panStartHandle);z(this._panHandle);z(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var K=this.map;K.__panning&&(K.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y),K.resetMapCursor())},_zoomInit:function(H){var K=this.map,I=this.pointerEvents||this.mouseEvents;(e.isLeft(H)||H.pointerType)&&K.isRubberBandZoom&&H.shiftKey&&(K.setCursor("crosshair"),this._dragOrigin=
y.mixin({},H.screenPoint),this._zoomDir=H.ctrlKey||H.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=v(I,"onSwipeMove",this,this._zoom),this._zoomEndHandle=v(I,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=v(I,"onMouseDrag",this,this._zoom),this._zoomEndHandle=v(I,"onMouseUp",this,this._zoomEnd)),C&&H.preventDefault())},_zoom:function(H){var K=this.map,I=this._normalizeRect(H).offset(K.__visibleRect.x,K.__visibleRect.y);H=K.graphics;var J=this._zoomRect;J.geometry||K.setCursor("crosshair");
J.geometry&&H.remove(J,!0);var Q=K.toMap(new B(I.x,I.y));I=K.toMap(new B(I.x+I.width,I.y+I.height));I=new w(Q.x,Q.y,I.x-Q.x,Q.y-I.y,K.spatialReference);I._originOnly=!0;J.setGeometry(I);H.add(J,!0)},_zoomEnd:function(H){var K=this._zoomRect,I=this.map,J=I.extent,Q=I.spatialReference;z(this._zoomHandle);z(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(I._canZoom(this._zoomDir)&&K.getDojoShape()){I.graphics.remove(K);K.geometry=null;H=this._normalizeRect(H);H.x+=I.__visibleRect.x;
H.y+=I.__visibleRect.y;if(-1===this._zoomDir){var V=J.getWidth();H=(V*I.width/H.width-V)/2;Q=new F(J.xmin-H,J.ymin-H,J.xmax+H,J.ymax+H,Q)}else J=I.toMap({x:H.x,y:H.y+H.height}),H=I.toMap({x:H.x+H.width,y:H.y}),Q=new F(J.x,J.y,H.x,H.y,Q);I._extentUtil(null,null,Q)}K.getDojoShape()&&I.graphics.remove(K,!0);this._zoomDir=0;I.resetMapCursor()},_wheelZoom:function(H,K){var I=this.map;if(!K){if(I.smartNavigation&&!H.shiftKey&&!I._isPanningOrZooming()){I.disableScrollWheelZoom();this._setScrollWheelPan(!0);
this._wheelPan(H);return}K=H.timeStamp;if(!n.isDefined(K)||0>=K)K=(new Date).getTime();if(100>(this._mwts?K-this._mwts:K))return;this._mwts=K}I._canZoom(H.value)&&I._extentUtil({numLevels:H.value,mapAnchor:H.mapPoint,screenAnchor:H.screenPoint})},_wheelPan:function(H){var K=this.map;if(H.shiftKey&&!K._isPanningOrZooming())this._setScrollWheelPan(!1),K.enableScrollWheelZoom(),this._wheelZoom(H);else{var I=0,J=0;u("ff")?H.axis===H.HORIZONTAL_AXIS?I=-H.detail:J=-H.detail:(I=H.wheelDeltaX,J=H.wheelDeltaY);
K.translate(I,J)}},_setScrollWheelPan:function(H){this.map.isScrollWheelPan=H;this.mouseEvents&&this.mouseEvents.enableMouseWheel(H);z(this._mwMacHandle);this._mwMacHandle=null;H&&(this._mwMacHandle=v(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(H.mapPoint)},_recenterZoom:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&(H.value=H.ctrlKey||H.metaKey?-1:1,this._wheelZoom(H,!0))},
_dblClickZoom:function(H){this.map._isPanningOrZooming()||(H.value=1,this._wheelZoom(H,!0))},_twoFingerTap:function(H){this.map._isPanningOrZooming()||(H.value=-1,this._wheelZoom(H,!0))},_keyDown:function(H){var K=H.keyCode,I=this.map;if(-1!==r.indexOf(G,K)){if(K===g.NUMPAD_PLUS||61===K||187===K)I._extentUtil({numLevels:1});else if(K===g.NUMPAD_MINUS||173===K||189===K)I._extentUtil({numLevels:-1});else{I.__panning||I.__panStart(0,0);switch(K){case g.UP_ARROW:case g.NUMPAD_8:this._keyDy+=10;break;
case g.RIGHT_ARROW:case g.NUMPAD_6:this._keyDx-=10;break;case g.DOWN_ARROW:case g.NUMPAD_2:this._keyDy-=10;break;case g.LEFT_ARROW:case g.NUMPAD_4:this._keyDx+=10;break;case g.PAGE_UP:case g.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case g.PAGE_DOWN:case g.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case g.END:case g.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case g.HOME:case g.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}I.__pan(this._keyDx,this._keyDy)}k.stop(H)}},_keyEnd:function(H){var K=
this.map;K.__panning&&H.keyCode!==g.SHIFT&&(K.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(H){var K=this.map;K=K._zoomAnim||K._panAnim;if(H.shiftKey)return!1;K&&K._active&&(K.stop(),K._fire("onEnd",[K.node]));this._dragOrigin=new B(0,0);y.mixin(this._dragOrigin,H.screenPoint);z(this._swipeHandle);z(this._swipeEndHandle);this._swipeHandle=v(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=v(this.touchEvents||this.pointerEvents,
"onSwipeEnd",this,this._swipeEnd)},_swipe:function(H){var K=this.map;K.__panning?(this._panX=H.screenPoint.x,this._panY=H.screenPoint.y,K.__pan(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)):(K.setCursor("move"),K.__panStart(H.screenPoint.x,H.screenPoint.y))},_swipeEnd:function(H){z(this._swipeHandle);z(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var K=this.map;K.__panning&&(K.resetMapCursor(),K.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-
this._dragOrigin.y))},_pinchInit:function(H){var K=this.map,I=K._zoomAnim||K._panAnim;I&&I._active?(I.stop(),I._fire("onEnd",[I.node])):K.__panning&&(H.screenPoint=new B(this._panX,this._panY),H.mapPoint=K.toMap(H.screenPoint),this._swipeEnd(H));z(this._pinchHandle);z(this._pinchEndHandle);this._pinchHandle=v(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=v(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(H){var K=this.map;
if(H.screenPoints){this.currLength=D.getLength(H.screenPoints[0],H.screenPoints[1]);if(K.__zooming){var I=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(K.extent,I,this._dragOrigin);K.__zoom(this._zoomStartExtent,I,this._dragOrigin)}else this._dragOrigin=new B((H.screenPoints[0].x+H.screenPoints[1].x)/2,(H.screenPoints[0].y+H.screenPoints[1].y)/2),this._length=this.currLength,K.__zoomStart(K.extent,this._dragOrigin);this._pinchScale=I;K._fireOnScale(this.currLength/this._length,
this._dragOrigin,!0)}},_pinchEnd:function(H){H=this.map;z(this._pinchHandle);z(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;this._pinchScale=0;if(H.__zooming&&null===H._zoomAnim){var K=this.currLength/this._length,I=H.extent.getWidth();this._zoomAnimAnchor=H.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(H.extent,1/K,this._zoomAnimAnchor);if(H.__tileInfo){var J=A.getCandidateTileInfo(H,H.__tileInfo,this._zoomStartExtent),Q=H.__getExtentForLevel(J.lod.level,this._zoomAnimAnchor),
V=H.getMinZoom(),O=H.getMaxZoom(),S=Q.extent;Q=Q.lod;var L=I/S.getWidth(),Y=J.lod.level;1>K?L>K&&Y--:L<K&&Y++;Y<V?Y=V:Y>O&&(Y=O);Y!==J.lod.level&&(Q=H.__getExtentForLevel(Y,this._zoomAnimAnchor),S=Q.extent,Q=Q.lod);this._zoomEndExtent=S;this._zoomEndLod=Q;H._zoomAnim=t.animateRange({range:{start:I/this._zoomStartExtent.getWidth(),end:L},duration:d.defaults.map.zoomDuration,rate:d.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});H._zoomAnim.play();H._fireOnScale(H.extent.getWidth()/
this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,H._fireOnScale(H.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(H){var K=this.__scaleExtent(this.map.extent,H,this._zoomAnimAnchor);this.map.__zoom(K,H,this._dragOrigin)},_adjustPinchEnd:function(){var H=this.map,K=H.extent.getWidth()/this._zoomEndExtent.getWidth(),I=this.__scaleExtent(H.extent,1/K,this._zoomAnimAnchor),J=this._dragOrigin,
Q=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=H._zoomAnim=this._zoomAnimAnchor=null;H.__zoomEnd(I,K,J,Q,!0)},__scaleExtent:function(H,K,I){I=I||H.getCenter();K=H.expand(K);var J=H.xmin-(K.getWidth()-H.getWidth())*(I.x-H.xmin)/H.getWidth();I=H.ymax-(K.getHeight()-H.getHeight())*(I.y-H.ymax)/H.getHeight();return new F(J,I-K.getHeight(),J+K.getWidth(),I,H.spatialReference)},_normalizeRect:function(H){H=H.screenPoint;var K=this._dragOrigin.x,I=this._dragOrigin.y;
H=new w((H.x<K?H.x:K)-this.map.__visibleRect.x,(H.y<I?H.y:I)-this.map.__visibleRect.y,Math.abs(H.x-K),Math.abs(H.y-I));delete H.spatialReference;0===H.width&&(H.width=1);0===H.height&&(H.height=1);return H},setImmediateClick:function(H){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(H);break;case "touch":this.touchEvents.setImmediateTap(H);this.mouseEvents&&this.mouseEvents.setImmediateClick(H);break;case "pointer":this.pointerEvents.setImmediateTap(H)}},enablePan:function(){this.disablePan();
switch(this.eventModel){case "mouse":this._panInitHandle=v(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=v(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=v(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=v(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){z(this._panInitHandle);this._panInitHandle=null;z(this._swipeInitHandle);this._swipeInitHandle=null},
enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?v(this.pointerEvents,"onSwipeStart",this,this._zoomInit):v(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){z(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=v(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},
disablePinchZoom:function(){z(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=v(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){z(this._wheelHandle);this._wheelHandle=null},enableScrollWheelPan:function(){var H=this.map;H&&H.loaded&&H.smartNavigation&&(this.disableScrollWheelPan(),this._setScrollWheelPan(!0))},disableScrollWheelPan:function(){var H=this.map;
H&&H.loaded&&H.smartNavigation&&this._setScrollWheelPan(!1)},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=v(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=v(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=v(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=v(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=
v(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=v(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){z(this._dblClickHandle);z(this._zoomOutHandle);this._dblTapHandle&&z(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=v(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},
disableShiftDoubleClickZoom:function(){z(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=v(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){z(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=v(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=
v(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){z(this._keyHandle);z(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableScrollWheel:function(){var H=this.map;H&&(H.smartNavigation?this.enableScrollWheelPan():H.enableScrollWheelZoom())},disableScrollWheel:function(){var H=this.map;H&&(H.disableScrollWheelZoom(),H.smartNavigation&&this.disableScrollWheelPan())},enableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),
H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},disableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),
H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var H,K=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,
this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(H=0;H<K.length;H++)z(K[H]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=
this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}});return m.MapNavigationManager=b})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(b,
y,r,a,k,e,g,h,m,l){var f=k.connect,c=k.disconnect;b=b([h],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==a("mac")?1:3,wheelDivisor:2>a("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(d,u){this.node=d;r.mixin(this,u);u=function(n){e.stop(n);return!1};a("mozilla")&&y.style(d,"MozUserSelect","none");this._handles=[f(d,"onselectstart",u),f(d,"ondragstart",u),f(d,"onmouseenter",this,this._onMouseEnterHandler),f(d,"onmouseleave",
this,this._onMouseLeaveHandler),f(d,"onmousedown",this,this._onMouseDownHandler),f(d,"onclick",this,this._onClickHandler),f(d,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=f(d,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=f(d,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=r.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(d=this.map)?d.isScrollWheelZoom||d.isScrollWheelPan:
this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(d,u){if(!this._preventClick||"onClick"!==d&&"onDblClick"!==d){if(this[d])this[d](u);if(this.map&&this.map[d])this.map[d](u)}},_processEvent:function(d){d=e.fix(d,d.target);var u=this.map,n=u&&u.position;n&&("DOMMouseScroll"===d.type&&3>a("ff")?d.screenPoint=new l(window.scrollX+d.screenX-n.x,window.scrollY+d.screenY-n.y):d.screenPoint=new l(d.pageX-n.x,d.pageY-n.y),d.mapPoint=u.extent?u.toMap(d.screenPoint):new m);d.numPoints=0;return d},
_onMouseEnterHandler:function(d){c(this._onKeyDown_connect);c(this._onKeyUp_connect);this._onKeyDown_connect=f(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=f(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(d))},_onMouseLeaveHandler:function(d){c(this._onKeyDown_connect);c(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(d))},_onMouseMoveHandler:function(d){this._dragEnd?
this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(d))},_onMouseDownHandler:function(d){c(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);c(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=f(document,"onmousemove",this,this._onMouseDragHandler);this._startX=d.pageX;this._startY=d.pageY;this._fire("onMouseDown",this._processEvent(d))},_onMouseUpHandler:function(d){var u=this.node;u.releaseCapture&&u.releaseCapture();
c(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;c(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=f(u,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(d))},_onMouseDragHandler:function(d){c(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=f(document,"onmousemove",this,this._onMouseDraggingHandler);c(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=f(document,"onmouseup",this,this._onDragMouseUpHandler);
this._docLeaveConnect=f(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(d))},_onMouseDraggingHandler:function(d){e.stop(d);this._fire("onMouseDrag",this._processEvent(d))},_onDragMouseUpHandler:function(d){var u=this.node;u.releaseCapture&&u.releaseCapture();this._dragEnd=!0;c(this._docLeaveConnect);c(this._onMouseDragHandler_connect);c(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=
f(u,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=f(u,"onmouseup",this,this._onMouseUpHandler);d=this._processEvent(d);this._fire("onMouseDragEnd",d);this._fire("onMouseUp",d)},_onDocMouseOut:function(d){var u=9>a("ie")?d.toElement:d.relatedTarget,n=u&&u.nodeName.toLowerCase();(!u||(a("chrome")||a("safari"))&&"html"===n)&&this._onDragMouseUpHandler(d)},_onClickHandler:function(d){d=this._processEvent(d);if(d.pageX===this._startX&&d.pageY===this._startY){clearTimeout(this._clickTimer);
var u={},n="movementX"in d,t;for(t in d)"mozInputSource"===t||"mozPressure"===t||n&&("webkitMovementX"===t||"webkitMovementY"===t)||(u[t]=d[t]);this._clickEvent=u;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>a("ie")&&(this._clickEvent.graphic=g._ieGraphic,delete g._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(d){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(d))},
_onMouseWheelHandler:function(d){var u=this.map;(u?u.isScrollWheelZoom||u.isScrollWheelPan:this.preventPageScroll)&&e.stop(d);u=a("ff")||a("mozilla")?-d.detail/this.mozWheelDivisor:d.wheelDelta/this.wheelDivisor;var n=Math.abs(u);n=n<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;d.value=0>u?-n:n;this._fire("onMouseWheel",this._processEvent(d))},_onKeyDownHandler:function(d){this._fire("onKeyDown",d)},_onKeyUpHandler:function(d){this._fire("onKeyUp",d)},enableMouseWheel:function(d){c(this._scrollHandle);
this._scrollHandle=f(this.node,a("ff")||a("mozilla")?d?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(d){this.doubleClickDuration=d?0:this._initialDuration},preventClickEvents:function(d){this._preventClick=d},destroy:function(){var d=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),
u;for(u=0;u<d.length;u++)c(d[u]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}});return g.MouseEvents=b})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(b,y,r,a,k,e,g,h,m){b=b([g],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(l,f){this.node=l;r.mixin(this,f);y.setSelectable(l,!1);this._touchStart=r.hitch(this,this._touchStart);this._touchMove=r.hitch(this,this._touchMove);this._touchEnd=r.hitch(this,this._touchEnd);this._touchCancel=r.hitch(this,this._touchCancel);this._fireClickEvent=r.hitch(this,this._fireClickEvent);l.addEventListener("touchstart",
this._touchStart,!1);l.addEventListener("touchmove",this._touchMove,!1);l.addEventListener("touchend",this._touchEnd,!1);l.addEventListener("touchcancel",this._touchCancel,!1);this.map&&a("ios")&&(this._mouseOver=r.hitch(this,this._mouseOver),this._mouseOut=r.hitch(this,this._mouseOut),this._mouseDown=r.hitch(this,this._mouseDown),this._mouseUp=r.hitch(this,this._mouseUp),this._mouseClick=r.hitch(this,this._mouseClick),l.addEventListener("mouseover",this._mouseOver,!1),l.addEventListener("mouseout",
this._mouseOut,!1),l.addEventListener("mousedown",this._mouseDown,!1),l.addEventListener("mouseup",this._mouseUp,!1),l.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(l){var f=this._touches,c,d=l.changedTouches.length,u,n,t=(new Date).getTime();this._touchStartTS=t;if(!(a("android")&&a("safari")&&1===l.targetTouches.length&&l.touches.length===l.targetTouches.length&&l.targetTouches.length===
l.changedTouches.length&&0===l.changedTouches[0].identifier&&f[l.changedTouches[0].identifier])){this._addTouch(l);for(c=0;c<d;c++){var x=l.changedTouches[c];var A=f[x.identifier]={};A.startX=x.pageX;A.startY=x.pageY;A.startTS=t;-1===this._touchIds.indexOf(x.identifier)&&this._touchIds.push(x.identifier)}this._swipeActive&&(u=this._nodeTouches[0]);this._pinchActive&&(n=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(l,
u))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(l,[u,n]))):2===this._numTouches?this._swipeActive&&(u&&(A=f[this._touchIds[0]],A.startX=u.pageX,A.startY=u.pageY,A.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(l,u))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(l,u))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(l,[u,n])))}},_touchMove:function(l){l.preventDefault();
this._updateTouch(l);var f=this._touches,c,d=l.changedTouches.length,u;if(!(a("android")&&a("safari")&&1===l.targetTouches.length&&l.touches.length===l.targetTouches.length&&l.targetTouches.length===l.changedTouches.length&&0===l.changedTouches[0].identifier&&f[l.changedTouches[0].identifier]&&1<this._touchIds.length)){for(c=0;c<d;c++){var n=l.changedTouches[c];if(u=f[n.identifier]){var t=Math.abs(n.pageX-u.startX);n=Math.abs(n.pageY-u.startY);!u.moved&&(t>=this.tapRadius||n>=this.tapRadius)&&(u.moved=
u.absMoved=!0);var x=x?x:u.moved}}1===this._numTouches?(f=l.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(l,f)):x&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(l,f)))):2===this._numTouches&&(c=this._nodeTouches[0],d=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(l,[c,d])):x&&(x=f[c.identifier],u=f[d.identifier],f=Math.abs(x.startX-u.startX),x=Math.abs(x.startY-u.startY),u=Math.abs(c.pageX-d.pageX),
t=Math.abs(c.pageY-d.pageY),Math.abs(Math.sqrt(u*u+t*t)-Math.sqrt(f*f+x*x))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(l,[c,d])))))}},_touchEnd:function(l){this._removeTouch(l);var f=this._touches,c=l.changedTouches,d,u=c.length,n,t,x=(new Date).getTime(),A=this._touchIds;for(d=0;d<u;d++)if(t=f[c[d].identifier])t.absMoved&&(n=!0),t.pageX=c[d].pageX,t.pageY=c[d].pageY,t.endTS=x;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=
!1,this._fire("onSwipeEnd",this._processTouchEvent(l,c[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(l,c));else{if(!n){u=Infinity;n=-Infinity;x=Infinity;var B=-Infinity,F=this.tapStartTolerance,w=[],D=!0;for(d=0;d<A.length;d++)t=f[A[d]],w.push(t),t.startTS<u&&(u=t.startTS),t.startTS>n&&(n=t.startTS),t.endTS<x&&(x=t.endTS),t.endTS>B&&(B=t.endTS),delete f[A[d]];1===w.length&&c[0]&&(f=Math.abs(c[0].pageY-w[0].startY),Math.abs(c[0].pageX-w[0].startX)>=
this.tapRadius||f>=this.tapRadius)&&(D=!1);D&&Math.abs(n-u)<=F&&Math.abs(B-x)<=F&&this._basicTap(l,w)}}else 1===this._numTouches&&this._pinchActive&&(d=this._nodeTouches[0],t=f[d.identifier],t.startX=d.pageX,t.startY=d.pageY,this._pinchActive=t.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(l,[c[0],d])))},_touchCancel:function(l){this._numTouches&&this._touchEnd(l)},_basicTap:function(l,f){var c=(new Date).getTime(),d=this;l=this._processTouchEvent(l,f);this._taps.push({touchInfos:f,ts:c,
event:l});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",l);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var u=d;d=null;clearTimeout(u._tapTimer);u._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(l){var f=this._taps,c=f[0],d=f[1],u=c.touchInfos,n=d&&d.touchInfos;f.length&&(l||(this._taps=[]),c&&d?u.length===n.length?d.ts-c.ts<=this.doubleTapDuration?(1===u.length?
(l=Math.abs(u[0].startX-n[0].startX),u=Math.abs(u[0].startY-n[0].startY),u=l<=this.doubleTapRadius&&u<=this.doubleTapRadius):u=!0,u?this._processedDoubleTap(f):this._processedTap(d)):this._processedTap(d):this._processedTap(d):this._processedTap(c||d))},_processedTap:function(l){var f=l.event;this._fire("onProcessedTap",f);1===l.touchInfos.length?this._fire("onTap",this._fixEvent(f)):2===l.touchInfos.length&&this._fire("onTwoFingerTap",f)},_processedDoubleTap:function(l){var f=1===l[1].touchInfos.length;
if(f){var c=[this._fixEvent(l[0].event),this._fixEvent(l[1].event)];c[1].relatedEvents=c}l=[l[0].event,l[1].event];l[1].relatedEvents=l;this._fire("onProcessedDoubleTap",l[1]);f&&(this._fire("onDoubleTap",c[1]),this._fire("onDblClick",c[1]))},_addTouch:function(l){var f=l.changedTouches,c=this._nodeTouches,d;this._numTouches+=f.length;for(l=0;l<f.length;l++){var u=c.length;var n=!1;for(d=0;d<u&&!(n=c[d].identifier===f[l].identifier);d++);n?this._numTouches--:c.push(f[l])}for(l=c.length-1;0<=l;l--)k.isDescendant(c[l].target,
document.body)||(c.splice(l,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(l){var f=[],c=[],d=l.changedTouches,u=this._nodeTouches;this._numTouches-=d.length;0>this._numTouches&&(this._numTouches=0);for(l=0;l<d.length;l++)f.push(d[l].identifier);for(l=u.length-1;0<=l;l--)-1!==f.indexOf(u[l].identifier)&&c.push(u.splice(l,1)[0]);return c},_updateTouch:function(l){var f=[],c=l.changedTouches,d=this._nodeTouches;for(l=0;l<c.length;l++)f.push(c[l].identifier);for(l=
0;l<d.length;l++){var u=f.indexOf(d[l].identifier);-1!==u&&d.splice(l,1,c[u])}},_mouseOver:function(l){this._fire("onMouseOver",this._processMouseEvent(l))},_mouseOut:function(l){this._fire("onMouseOut",this._processMouseEvent(l))},_mouseDown:function(l){this._fire("onMouseDown",this._processMouseEvent(l))},_mouseUp:function(l){this._fire("onMouseUp",this._processMouseEvent(l))},_mouseClick:function(l){clearTimeout(this._clickTimer);300<(new Date).getTime()-this._touchStartTS?this._fire("onClick",
this._processMouseEvent(l)):(this._clickEvent=l,this._clickTimer=setTimeout(this._fireClickEvent,this.doubleTapDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer);this._fire("onClick",this._processMouseEvent(this._clickEvent))},_fire:function(l,f){"onDblClick"===l&&clearTimeout(this._clickTimer);if("onDblClick"===l&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var c=this;setTimeout(function(){c.mouseEvents.preventClickEvents(!1)},350)}if(this[l])this[l](f);if(this.map&&
this.map[l])this.map[l](f)},_fixEvent:function(l){var f={},c;for(c in l)f[c]=l[c];this.map&&(f.screenPoint=f.screenPoints[0],f.mapPoint=f.mapPoints[0]);return f},_processTouchEvent:function(l,f){var c=this.map,d=c&&c.position,u=0;if(d&&f)if(r.isArray(f)){var n;l.screenPoints=[];l.mapPoints=[];for(n=0;n<f.length;n++)if(f[n]){var t=new m(f[n].pageX-d.x,f[n].pageY-d.y);l.screenPoints.push(t);l.mapPoints.push(c.extent?c.toMap(t):new h)}else u++}else l.screenPoint=new m(f.pageX-d.x,f.pageY-d.y),l.mapPoint=
c.extent?c.toMap(l.screenPoint):new h;l.numPoints=f?r.isArray(f)?f.length-u:1:0;return l},_processMouseEvent:function(l){var f=this.map,c=f&&f.position;c&&(l.screenPoint=new m(l.pageX-c.x,l.pageY-c.y),l.mapPoint=f.extent?f.toMap(l.screenPoint):new h);return l},setImmediateTap:function(l){this._immediate=l},destroy:function(){var l=this.node;l.removeEventListener("touchstart",this._touchStart,!1);l.removeEventListener("touchmove",this._touchMove,!1);l.removeEventListener("touchend",this._touchEnd,
!1);l.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(l.removeEventListener("mouseover",this._mouseOver,!1),l.removeEventListener("mouseout",this._mouseOut,!1),l.removeEventListener("mousedown",this._mouseDown,!1),l.removeEventListener("mouseup",this._mouseUp,!1),l.removeEventListener("click",this._mouseClick,!1));y.setSelectable(l,!0);clearTimeout(this._tapTimer);clearTimeout(this._clickTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=
null}});return e.TouchEvents=b})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(b,y,r,a,k,e,g,h){b=b([e],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==a("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,constructor:function(m,
l){this.node=m;y.mixin(this,l);void 0!==m.style.msTouchAction?m.style.msTouchAction="none":void 0!==m.style.touchAction&&(m.style.touchAction="none");l=navigator.msPointerEnabled;var f=function(c){c.preventDefault()};m.addEventListener("selectstart",f,!1);m.addEventListener("dragstart",f,!1);this._pointerDown=y.hitch(this,this._pointerDown);this._pointerMove=y.hitch(this,this._pointerMove);this._pointerUp=y.hitch(this,this._pointerUp);this._pointerCancel=y.hitch(this,this._pointerCancel);m.addEventListener(l?
"MSPointerDown":"pointerdown",this._pointerDown,!1);m.addEventListener(l?"MSPointerMove":"pointermove",this._pointerMove,!1);m.addEventListener(l?"MSPointerUp":"pointerup",this._pointerUp,!1);m.addEventListener(l?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=y.hitch(this,this._mouseOver),this._mouseOut=y.hitch(this,this._mouseOut),this._mouseLeave=y.hitch(this,this._mouseLeave),this._mouseDown=y.hitch(this,this._mouseDown),this._mouseUp=y.hitch(this,this._mouseUp),
this._mouseClick=y.hitch(this,this._mouseClick),this._mouseWheel=y.hitch(this,this._mouseWheel),this._mouseMove=y.hitch(this,this._mouseMove),this._mouseEnter=y.hitch(this,this._mouseEnter),this._onKeyDown=y.hitch(this,this._onKeyDown),this._onKeyUp=y.hitch(this,this._onKeyUp),m.addEventListener("mouseover",this._mouseOver,!1),m.addEventListener("mouseout",this._mouseOut,!1),m.addEventListener("mouseleave",this._mouseLeave,!1),m.addEventListener("mousedown",this._mouseDown,!1),m.addEventListener("mouseup",
this._mouseUp,!1),m.addEventListener("click",this._mouseClick,!1),m.addEventListener("mousewheel",this._mouseWheel,!1),m.addEventListener("mousemove",this._mouseMove,!1),m.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(m){if(-1<r.indexOf(this._touchIds,m.pointerId))this._pointerUp(m);else{var l=this._touches,f=m.target,c=m.pointerId,d=this._touchIds,u=(new Date).getTime();var n=l[c]=
{};n.pointerId=c;n.startX=n.pageX=m.pageX;n.startY=n.pageY=m.pageY;n.startTS=u;d.push(c);this._numTouches++;f.setPointerCapture?f.setPointerCapture(c):f.msSetPointerCapture&&f.msSetPointerCapture(c);f=l[d[0]];l=l[d[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(f&&(f.startX=f.pageX,f.startY=f.pageY,f.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,f))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,f))):
this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,[f,l]))))}},_pointerMove:function(m){var l=this._touches,f=this._touchIds,c;if((c=l[m.pointerId])&&(c.pageX!==m.pageX||c.pageY!==m.pageY)){c.pageX=m.pageX;c.pageY=m.pageY;var d=Math.abs(c.pageX-c.startX);var u=Math.abs(c.pageY-c.startY);!c.moved&&(d>=this.tapRadius||u>=this.tapRadius)&&(c.moved=c.absMoved=!0);if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(m,m)):c.moved&&
(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(m,m)));else if(2===this._numTouches)if(c=l[f[0]],l=l[f[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(m,[c,l]));else if(c.moved||l.moved){f=Math.abs(c.startX-l.startX);d=Math.abs(c.startY-l.startY);u=Math.abs(c.pageX-l.pageX);var n=Math.abs(c.pageY-l.pageY);Math.abs(Math.sqrt(u*u+n*n)-Math.sqrt(f*f+d*d))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(m,[c,l])))}}},
_pointerUp:function(m){var l=this._touches,f,c=this.node,d=m.target,u=m.pointerId,n=this._touchIds,t=n.slice(0),x=r.map(t,function(w){return l[w]}),A=(new Date).getTime();if(f=l[u])if(f.pageX=m.pageX,f.pageY=m.pageY,f.endTS=A,this._numTouches--,d.releasePointerCapture?d.releasePointerCapture(u):d.msReleasePointerCapture&&d.msReleasePointerCapture(u),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(m,m));
else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,m));else{if(!f.absMoved){d=Infinity;u=-Infinity;n=Infinity;A=-Infinity;var B=this.tapStartTolerance,F;for(F=0;F<t.length;F++)f=x[F],f.startTS<d&&(d=f.startTS),f.startTS>u&&(u=f.startTS),f.endTS<n&&(n=f.endTS),f.endTS>A&&(A=f.endTS);Math.abs(u-d)<=B&&Math.abs(A-n)<=B&&this._basicTap(m,x)}}else 1===this._numTouches&&this._pinchActive&&(n.splice(r.indexOf(n,m.pointerId),1),delete l[m.pointerId],f=l[n[0]],
f.startX=f.pageX,f.startY=f.pageY,f.moved=!1,document.msElementsFromPoint&&(t=document.msElementsFromPoint(f.pageX,f.pageY),r.some(t,function(w){return w===c})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(m,[m,f])))},_pointerCancel:function(m){this._numTouches&&this._pointerUp(m)},_basicTap:function(m,l){var f=(new Date).getTime(),c=this,d=this._immediate;m=this._processTouchEvent(m,l);this._taps.push({touchInfos:l,
ts:f,event:m});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",m);clearTimeout(this._tapTimer);m=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var u=c;c=null;clearTimeout(u._tapTimer);u._analyzeTap(d)},d?0:m)},_analyzeTap:function(m){var l=this._taps,f=l[0],c=l[1],d=f.touchInfos,u=c&&c.touchInfos;l.length&&(m||(this._taps=[]),f&&c?d.length===u.length?c.ts-f.ts<=this.doubleTapDuration?(1===d.length?(m=Math.abs(d[0].startX-
u[0].startX),d=Math.abs(d[0].startY-u[0].startY),d=m<=this.doubleTapRadius&&d<=this.doubleTapRadius):d=!0,d?this._processedDoubleTap(l):this._processedTap(c)):this._processedTap(c):this._processedTap(c):this._processedTap(f||c))},_processedTap:function(m){var l=m.event;this._fire("onProcessedTap",l);1===m.touchInfos.length?this._fire("onTap",this._fixEvent(l)):2===m.touchInfos.length&&this._fire("onTwoFingerTap",l)},_processedDoubleTap:function(m){var l=1===m[1].touchInfos.length;if(l){var f=[this._fixEvent(m[0].event),
this._fixEvent(m[1].event)];f[1].relatedEvents=f}m=[m[0].event,m[1].event];m[1].relatedEvents=m;this._fire("onProcessedDoubleTap",m[1]);l&&(this._fire("onDoubleTap",f[1]),this._fire("onDblClick",f[1]))},_mouseOver:function(m){this._fire("onMouseOver",this._processMouseEvent(m))},_mouseMove:function(m){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(m)):this._fire("onMouseMove",this._processMouseEvent(m))},_mouseOut:function(m){this._fire("onMouseOut",this._processMouseEvent(m))},_mouseLeave:function(m){document.removeEventListener("keydown",
this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(m))},_mouseDown:function(m){this._downX=m.pageX;this._downY=m.pageY;this._fire("onMouseDown",this._processMouseEvent(m));0===m.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(m)))},_mouseUp:function(m){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(m)));this._fire("onMouseUp",this._processMouseEvent(m))},
_mouseClick:function(m){Math.abs(m.pageX-this._downX)<=this.clickRadius&&Math.abs(m.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(m))},_mouseWheel:function(m){var l=this.map;(l?l.isScrollWheelZoom||l.isScrollWheelPan:this.preventPageScroll)&&m.preventDefault();l=m.wheelDelta?m.wheelDelta/this.wheelDivisor:-m.detail/this.mozWheelDivisor;var f=Math.abs(l);f=f<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;m.value=0>l?-f:f;this._fire("onMouseWheel",this._processMouseEvent(m))},
_mouseEnter:function(m){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(m))},_onKeyDown:function(m){this._fire("onKeyDown",m)},_onKeyUp:function(m){this._fire("onKeyUp",m)},_fire:function(m,l){if(this[m])this[m](l);if(this.map&&this.map[m])this.map[m](l)},_fixEvent:function(m){var l=
{},f;for(f in m)l[f]=m[f];l.preventDefault=function(){m.preventDefault()};l.stopPropagation=function(){m.stopPropagation()};this.map&&(l.screenPoint=l.screenPoints[0],l.mapPoint=l.mapPoints[0]);return l},_processTouchEvent:function(m,l){var f=this.map,c=f&&f.position,d=0;if(c&&l)if(y.isArray(l)){var u;m.screenPoints=[];m.mapPoints=[];for(u=0;u<l.length;u++)if(l[u]){var n=new h(l[u].pageX-c.x,l[u].pageY-c.y);m.screenPoints.push(n);m.mapPoints.push(f.extent?f.toMap(n):new g)}else d++}else m.screenPoint=
new h(l.pageX-c.x,l.pageY-c.y),m.mapPoint=f.extent?f.toMap(m.screenPoint):new g;m.numPoints=l?y.isArray(l)?l.length-d:1:0;return m},_processMouseEvent:function(m){var l=this.map,f=l&&l.position;f&&(m.screenPoint=new h(m.pageX-f.x,m.pageY-f.y),m.mapPoint=l.extent?l.toMap(m.screenPoint):new g);return m},setImmediateTap:function(m){this._immediate=m},destroy:function(){var m=this.node;m.removeEventListener("MSPointerDown",this._pointerDown,!1);m.removeEventListener("MSPointerMove",this._pointerMove,
!1);m.removeEventListener("MSPointerUp",this._pointerUp,!1);m.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(m.removeEventListener("mouseover",this._mouseOver,!1),m.removeEventListener("mousemove",this._mouseMove,!1),m.removeEventListener("mouseout",this._mouseOut,!1),m.removeEventListener("mouseleave",this._mouseLeave,!1),m.removeEventListener("mousedown",this._mouseDown,!1),m.removeEventListener("mouseup",this._mouseUp,!1),m.removeEventListener("click",this._mouseClick,
!1),m.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}});return k.PointerEvents=b})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n){b=b(l,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(t){t=y.hitch;this._projectHandler=t(this,this._projectHandler);this._simplifyHandler=t(this,this._simplifyHandler);this._bufferHandler=t(this,this._bufferHandler);this._areasAndLengthsHandler=t(this,this._areasAndLengthsHandler);this._lengthsHandler=
t(this,this._lengthsHandler);this._labelPointsHandler=t(this,this._labelPointsHandler);this._relationHandler=t(this,this._relationHandler);this._convexHullHandler=t(this,this._convexHullHandler);this._unionHandler=t(this,this._unionHandler);this._autoCompleteHandler=t(this,this._autoCompleteHandler);this._reshapeHandler=t(this,this._reshapeHandler);this._cutHandler=t(this,this._cutHandler);this._intersectHandler=t(this,this._intersectHandler);this._differenceHandler=t(this,this._differenceHandler);
this._trimExtendHandler=t(this,this._trimExtendHandler);this._densifyHandler=t(this,this._densifyHandler);this._generalizeHandler=t(this,this._densifyHandler);this._offsetHandler=t(this,this._offsetHandler);this._distanceHandler=t(this,this._distanceHandler);this._toGeoCoordinateHandler=t(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=t(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(t){var x=[],A,B=t.length;for(A=0;A<B;A++)x.push(t[A].toJson());
return{geometryType:n.getJsonType(t[0]),geometries:x}},_decodeGeometries:function(t,x,A){var B=n.getGeometryType(x);t=t.geometries;var F=[],w={spatialReference:A.toJson()},D=y.mixin;r.forEach(t,function(q,v){F[v]=new B(D(q,w))});return F},_toProjectGeometry:function(t){var x=t.spatialReference.toJson();return t instanceof f?new d({rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],spatialReference:x}):new c({paths:[[].concat(t.points)],spatialReference:x})},
_fromProjectedGeometry:function(t,x,A){return"esriGeometryEnvelope"===x?(t=t.rings[0],new f(t[0][0],t[0][1],t[2][0],t[2][1],A)):new u({points:t.paths[0],spatialReference:A.toJson()})},project:function(t,x,A,B){var F=y.mixin({},this._url.query,{f:"json"});if(t.geometries){B=A;A=x;x=t.outSR;var w=t.geometries[0];F=y.mixin(F,t.toJson())}else w=t[0],F=y.mixin(F,{outSR:x.wkid||a.toJson(x.toJson()),inSR:w.spatialReference.wkid||a.toJson(w.spatialReference.toJson()),geometries:a.toJson(this._encodeGeometries(t))});
var D=n.getJsonType(w),q=this._projectHandler,v=this._errorHandler,z=new k(m._dfdCanceller);z._pendingDfd=h({url:this._url.path+"/project",content:F,callbackParamName:"callback",load:function(C,E){q(C,E,D,x,A,B,z)},error:function(C){v(C,B,z)}});return z},_projectHandler:function(t,x,A,B,F,w,D){try{var q=this._decodeGeometries(t,A,B);this._successHandler([q],"onProjectComplete",F,D)}catch(v){this._errorHandler(v,w,D)}},onProjectComplete:function(){},simplify:function(t,x,A){var B=t[0].spatialReference,
F=y.mixin({},this._url.query,{f:"json",sr:B.wkid?B.wkid:a.toJson(B.toJson()),geometries:a.toJson(this._encodeGeometries(t))}),w=n.getJsonType(t[0]),D=this._simplifyHandler,q=this._errorHandler,v=new k(m._dfdCanceller);v._pendingDfd=h({url:this._url.path+"/simplify",content:F,callbackParamName:"callback",load:function(z,C){D(z,C,w,B,x,A,v)},error:function(z){q(z,A,v)}});return v},_simplifyHandler:function(t,x,A,B,F,w,D){try{var q=this._decodeGeometries(t,A,B);this._successHandler([q],"onSimplifyComplete",
F,D)}catch(v){this._errorHandler(v,w,D)}},onSimplifyComplete:function(){},convexHull:function(t,x,A){var B=t[0].spatialReference;t=y.mixin({},this._url.query,{f:"json",sr:a.toJson(B.toJson()),geometries:a.toJson(this._encodeGeometries(t))});var F=this._convexHullHandler,w=this._errorHandler,D=new k(m._dfdCanceller);D._pendingDfd=h({url:this._url.path+"/convexHull",content:t,callbackParamName:"callback",load:function(q,v){F(q,v,B,x,A,D)},error:function(q){w(q,A,D)}});return D},_convexHullHandler:function(t,
x,A,B,F,w){try{var D=n.fromJson(t.geometry).setSpatialReference(A);this._successHandler([D],"onConvexHullComplete",B,w)}catch(q){this._errorHandler(q,F,w)}},onConvexHullComplete:function(){},union:function(t,x,A){var B=t[0].spatialReference;t=y.mixin({},this._url.query,{f:"json",sr:a.toJson(B.toJson()),geometries:a.toJson(this._encodeGeometries(t))});var F=this._unionHandler,w=this._errorHandler,D=new k(m._dfdCanceller);D._pendingDfd=h({url:this._url.path+"/union",content:t,callbackParamName:"callback",
load:function(q,v){F(q,v,B,x,A,D)},error:function(q){w(q,A,D)}});return D},_unionHandler:function(t,x,A,B,F,w){try{var D=n.fromJson(t.geometry).setSpatialReference(A);this._successHandler([D],"onUnionComplete",B,w)}catch(q){this._errorHandler(q,F,w)}},onUnionComplete:function(){},autoComplete:function(t,x,A,B){var F=t[0].spatialReference;t=y.mixin({},this._url.query,{f:"json",sr:a.toJson(F.toJson()),polygons:a.toJson(this._encodeGeometries(t).geometries),polylines:a.toJson(this._encodeGeometries(x).geometries)});
var w=this._autoCompleteHandler,D=this._errorHandler,q=new k(m._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/autoComplete",content:t,callbackParamName:"callback",load:function(v,z){w(v,z,F,A,B,q)},error:function(v){D(v,B,q)}});return q},_autoCompleteHandler:function(t,x,A,B,F,w){try{var D=t.geometries;t=[];var q,v=D.length;for(q=0;q<v;q++)t[q]=new d({spatialReference:A,rings:D[q].rings});this._successHandler([t],"onAutoCompleteComplete",B,w)}catch(z){this._errorHandler(z,F,w)}},onAutoCompleteComplete:function(){},
reshape:function(t,x,A,B){var F=t.spatialReference;t=y.mixin({},this._url.query,{f:"json",sr:a.toJson(F.toJson()),target:a.toJson({geometryType:n.getJsonType(t),geometry:t.toJson()}),reshaper:a.toJson(x.toJson())});var w=this._reshapeHandler,D=this._errorHandler,q=new k(m._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/reshape",content:t,callbackParamName:"callback",load:function(v,z){w(v,z,F,A,B,q)},error:function(v){D(v,B,q)}});return q},_reshapeHandler:function(t,x,A,B,F,w){try{var D=n.fromJson(t.geometry).setSpatialReference(A);
this._successHandler([D],"onReshapeComplete",B,w)}catch(q){this._errorHandler(q,F,w)}},onReshapeComplete:function(){},cut:function(t,x,A,B){var F=t[0].spatialReference,w=r.map(t,function(z){return z.toJson()});t=y.mixin({},this._url.query,{f:"json",sr:a.toJson(F.toJson()),target:a.toJson({geometryType:n.getJsonType(t[0]),geometries:w}),cutter:a.toJson(x.toJson())});var D=this._cutHandler,q=this._errorHandler,v=new k(m._dfdCanceller);v._pendingDfd=h({url:this._url.path+"/cut",content:t,callbackParamName:"callback",
load:function(z,C){D(z,C,F,A,B,v)},error:function(z){q(z,B,v)}});return v},_cutHandler:function(t,x,A,B,F,w){try{var D=t.geometries,q={};q.cutIndexes=t.cutIndexes;q.geometries=[];r.forEach(D,function(v){q.geometries.push(n.fromJson(v).setSpatialReference(A))});this._successHandler([q],"onCutComplete",B,w)}catch(v){this._errorHandler(v,F,w)}},onCutComplete:function(){},intersect:function(t,x,A,B){var F=t[0].spatialReference;t=y.mixin({},this._url.query,{f:"json",sr:a.toJson(F.toJson()),geometries:a.toJson(this._encodeGeometries(t)),
geometry:a.toJson({geometryType:n.getJsonType(x),geometry:x.toJson()})});var w=this._intersectHandler,D=this._errorHandler,q=new k(m._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/intersect",content:t,callbackParamName:"callback",load:function(v,z){w(v,z,F,A,B,q)},error:function(v){D(v,B,q)}});return q},_intersectHandler:function(t,x,A,B,F,w){try{var D=[];r.forEach(t.geometries,function(q){D.push(n.fromJson(q).setSpatialReference(A))});this._successHandler([D],"onIntersectComplete",B,w)}catch(q){this._errorHandler(q,
F,w)}},onIntersectComplete:function(){},difference:function(t,x,A,B){var F=t[0].spatialReference;t=y.mixin({},this._url.query,{f:"json",sr:a.toJson(F.toJson()),geometries:a.toJson(this._encodeGeometries(t)),geometry:a.toJson({geometryType:n.getJsonType(x),geometry:x.toJson()})});var w=this._differenceHandler,D=this._errorHandler,q=new k(m._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/difference",content:t,callbackParamName:"callback",load:function(v,z){w(v,z,F,A,B,q)},error:function(v){D(v,
B,q)}});return q},_differenceHandler:function(t,x,A,B,F,w){try{var D=[];r.forEach(t.geometries,function(q){D.push(n.fromJson(q).setSpatialReference(A))});this._successHandler([D],"onDifferenceComplete",B,w)}catch(q){this._errorHandler(q,F,w)}},onDifferenceComplete:function(){},buffer:function(t,x,A){var B=y.mixin({},this._url.query,{f:"json"},t.toJson()),F=t.outSpatialReference||t.geometries[0].spatialReference,w=this._bufferHandler,D=this._errorHandler,q=new k(m._dfdCanceller);q._pendingDfd=h({url:this._url.path+
"/buffer",content:B,callbackParamName:"callback",load:function(v,z){w(v,z,F,x,A,q)},error:function(v){D(v,A,q)}});return q},_bufferHandler:function(t,x,A,B,F,w){try{var D=t.geometries;t=[];var q,v=D.length;for(q=0;q<v;q++)t[q]=new d({spatialReference:A,rings:D[q].rings});this._successHandler([t],"onBufferComplete",B,w)}catch(z){this._errorHandler(z,F,w)}},onBufferComplete:function(){},areasAndLengths:function(t,x,A){t=y.mixin({},this._url.query,{f:"json"},t.toJson());var B=this._areasAndLengthsHandler,
F=this._errorHandler,w=new k(m._dfdCanceller);w._pendingDfd=h({url:this._url.path+"/areasAndLengths",content:t,callbackParamName:"callback",load:function(D,q){B(D,q,x,A,w)},error:function(D){F(D,A,w)}});return w},_areasAndLengthsHandler:function(t,x,A,B,F){try{this._successHandler([t],"onAreasAndLengthsComplete",A,F)}catch(w){this._errorHandler(w,B,F)}},onAreasAndLengthsComplete:function(){},lengths:function(t,x,A){t=y.mixin({},this._url.query,{f:"json"},t.toJson());var B=this._lengthsHandler,F=this._errorHandler,
w=new k(m._dfdCanceller);w._pendingDfd=h({url:this._url.path+"/lengths",content:t,callbackParamName:"callback",load:function(D,q){B(D,q,x,A,w)},error:function(D){F(D,A,w)}});return w},_lengthsHandler:function(t,x,A,B,F){try{this._successHandler([t],"onLengthsComplete",A,F)}catch(w){this._errorHandler(w,B,F)}},onLengthsComplete:function(){},labelPoints:function(t,x,A){var B=r.map(t,function(v){return v.toJson()}),F=t[0].spatialReference;B=y.mixin({},this._url.query,{f:"json",sr:F.wkid?F.wkid:a.toJson(F.toJson()),
polygons:a.toJson(B)});var w=this._labelPointsHandler,D=this._errorHandler,q=new k(m._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/labelPoints",content:B,callbackParamName:"callback",load:function(v,z){w(v,z,t,F,x,A,q)},error:function(v){D(v,A,q)}});return q},_labelPointsHandler:function(t,x,A,B,F,w,D){try{var q=[];r.forEach(t.labelPoints,function(v){q.push(n.fromJson(v).setSpatialReference(B))});this._successHandler([q],"onLabelPointsComplete",F,D)}catch(v){this._errorHandler(v,w,D)}},onLabelPointsComplete:function(){},
relation:function(t,x,A){t=y.mixin({},this._url.query,{f:"json"},t.toJson());var B=this._relationHandler,F=this._errorHandler,w=new k(m._dfdCanceller);w._pendingDfd=h({url:this._url.path+"/relation",content:t,callbackParamName:"callback",load:function(D,q){B(D,q,x,A,w)},error:function(D){F(D,A,w)}});return w},_relationHandler:function(t,x,A,B,F){try{this._successHandler([t.relations],"onRelationComplete",A,F)}catch(w){this._errorHandler(w,B,F)}},onRelationComplete:function(){},trimExtend:function(t,
x,A){var B=y.mixin({},this._url.query,{f:"json"},t.toJson()),F=t.sr,w=this._trimExtendHandler,D=this._errorHandler,q=new k(m._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/trimExtend",content:B,callbackParamName:"callback",load:function(v,z){w(v,z,F,x,A,q)},error:function(v){D(v,A,q)}});return q},_trimExtendHandler:function(t,x,A,B,F,w){try{var D=t.geometries;t=[];var q,v=D.length;for(q=0;q<v;q++)t[q]=new c({spatialReference:A,paths:D[q].paths});this._successHandler([t],"onTrimExtendComplete",
B,w)}catch(z){this._errorHandler(z,F,w)}},onTrimExtendComplete:function(){},densify:function(t,x,A){var B=y.mixin({},this._url.query,{f:"json"},t.toJson()),F=t.geometries[0].spatialReference,w=this._densifyHandler,D=this._errorHandler,q=new k(m._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/densify",content:B,callbackParamName:"callback",load:function(v,z){w(v,z,F,x,A,q)},error:function(v){D(v,A,q)}});return q},_densifyHandler:function(t,x,A,B,F,w){try{var D=[];r.forEach(t.geometries,function(q){D.push(n.fromJson(q).setSpatialReference(A))});
this._successHandler([D],"onDensifyComplete",B,w)}catch(q){this._errorHandler(q,F,w)}},onDensifyComplete:function(){},generalize:function(t,x,A){var B=y.mixin({},this._url.query,{f:"json"},t.toJson()),F=t.geometries[0].spatialReference,w=this._generalizeHandler,D=this._errorHandler,q=new k(m._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/generalize",content:B,callbackParamName:"callback",load:function(v,z){w(v,z,F,x,A,q)},error:function(v){D(v,A,q)}});return q},_generalizeHandler:function(t,
x,A,B,F,w){try{var D=[];r.forEach(t.geometries,function(q){D.push(n.fromJson(q).setSpatialReference(A))});this._successHandler([D],"onGeneralizeComplete",B,w)}catch(q){this._errorHandler(q,F,w)}},onGeneralizeComplete:function(){},offset:function(t,x,A){var B=y.mixin({},this._url.query,{f:"json"},t.toJson()),F=t.geometries[0].spatialReference,w=this._offsetHandler,D=this._errorHandler,q=new k(m._dfdCanceller);q._pendingDfd=h({url:this._url.path+"/offset",content:B,callbackParamName:"callback",load:function(v,
z){w(v,z,F,x,A,q)},error:function(v){D(v,A,q)}});return q},_offsetHandler:function(t,x,A,B,F,w){try{var D=[];r.forEach(t.geometries,function(q){D.push(n.fromJson(q).setSpatialReference(A))});this._successHandler([D],"onOffsetComplete",B,w)}catch(q){this._errorHandler(q,F,w)}},onOffsetComplete:function(){},distance:function(t,x,A){var B=y.mixin({},this._url.query,{f:"json"},t.toJson()),F=t.geometry1.spatialReference,w=this._distanceHandler,D=this._errorHandler,q=new k(m._dfdCanceller);q._pendingDfd=
h({url:this._url.path+"/distance",content:B,callbackParamName:"callback",load:function(v,z){w(v,z,F,x,A,q)},error:function(v){D(v,A,q)}});return q},_distanceHandler:function(t,x,A,B,F,w){try{t=t&&t.distance,this._successHandler([t],"onDistanceComplete",B,w)}catch(D){this._errorHandler(D,F,w)}},onDistanceComplete:function(){},toGeoCoordinateString:function(t,x,A){var B={};y.isObject(t.sr)?B.sr=t.sr.wkid||a.toJson(t.sr.toJson()):B.sr=t.sr;B.coordinates=a.toJson(t.coordinates);B.conversionType=t.conversionType||
"MGRS";B.conversionMode=t.conversionMode;B.numOfDigits=t.numOfDigits;B.rounding=t.rounding;B.addSpaces=t.addSpaces;t=y.mixin({},this._url.query,{f:"json"},B);var F=this._toGeoCoordinateHandler,w=this._errorHandler,D=new k(m._dfdCanceller);D._pendingDfd=h({url:this._url.path+"/toGeoCoordinateString",content:t,callbackParamName:"callback",load:function(q,v){F(q,v,x,A,D)},error:function(q){w(q,A,D)}});return D},_toGeoCoordinateHandler:function(t,x,A,B,F){try{this._successHandler([t.strings],"onToGeoCoordinateStringComplete",
A,F)}catch(w){this._errorHandler(w,B,F)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(t,x,A){var B={};y.isObject(t.sr)?B.sr=t.sr.wkid||a.toJson(t.sr.toJson()):B.sr=t.sr;B.strings=a.toJson(t.strings);B.conversionType=t.conversionType||"MGRS";B.conversionMode=t.conversionMode;t=y.mixin({},this._url.query,{f:"json"},B);var F=this._fromGeoCoordinateHandler,w=this._errorHandler,D=new k(m._dfdCanceller);D._pendingDfd=h({url:this._url.path+"/fromGeoCoordinateString",content:t,
callbackParamName:"callback",load:function(q,v){F(q,v,x,A,D)},error:function(q){w(q,A,D)}});return D},_fromGeoCoordinateHandler:function(t,x,A,B,F){try{this._successHandler([t.coordinates],"onToGeoCoordinateStringComplete",A,F)}catch(w){this._errorHandler(w,B,F)}},onFromGeoCoordinateStringComplete:function(){}});y.mixin(b,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});y.setObject("tasks.GeometryService",b,g);return b})},"arcgisonline/map/thumbnail/createThumbnailImage":function(){define("dojo/_base/lang arcgisonline/map/core/getScaleForExtent esri/kernel esri/tasks/PrintTemplate esri/tasks/PrintTask esri/tasks/PrintParameters".split(" "),
function(b,y,r,a,k,e){var g=window.esriGeowConfig;return function(h,m,l,f,c){for(var d=600,u=400,n=function(t){return f&&(t=y(h.extent,t),f[0].scale<t)?!1:!0};!n(d)&&!(d*=2,u*=2,1600<=d););n=new a;n.layout="MAP_ONLY";n.format="png32";n.preserveScale=!1;n.showAttribution=!1;n.showLabels=!1;n.exportOptions={width:d,height:u,dpi:96};c||(c=new k(g.self.helperServices.printTask.url,{}));d=new e;d.map=h;d.template=n;r.config.defaults.io.timeout=12E4;c.execute(d,b.hitch(this,function(t){r.config.defaults.io.timeout=
6E4;return m(t.url)}),b.hitch(this,function(t){r.config.defaults.io.timeout=6E4;if(l)return l(t)}))}})},"arcgisonline/map/core/getScaleForExtent":function(){define(["esri/config","esri/WKIDUnitConversion"],function(b,y){return function(r,a){var k=20015077/180,e=r.spatialReference;if(e){var g=e.wkid;var h=e.wkt}e=null;g?e=y.values[y[g]]:h&&-1!==h.search(/^PROJCS/i)&&(g=/UNIT\[([^\]]+)\]\]$/i.exec(h))&&g[1]&&(e=parseFloat(g[1].split(",")[1]));return r.getWidth()/a*(e||k)*39.37*b.defaults.screenDPI}})},
"esri/tasks/PrintTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.tasks.PrintTemplate",label:null,exportOptions:{width:800,height:1100,dpi:96},layoutOptions:null,format:"PNG32",layout:"MAP_ONLY",outScale:0,preserveScale:!0,forceFeatureAttributes:!1,showAttribution:null,showLabels:!0});y.setObject("tasks.PrintTemplate",b,a);return b})},"esri/tasks/PrintTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../lang ../layerUtils ../deferredUtils ../Color ../request ../urlUtils ../geometry/Polygon ../renderers/SimpleRenderer ../symbols/FillSymbol ./Geoprocessor ./PrintTemplate ./Task dojo/dom-attr dojo/dom-construct dojox/gfx/_base dojox/gfx/canvas dojox/json/query ./PrintParameters ./LegendLayer".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v){b=b(B,{declaredClass:"esri.tasks.PrintTask",constructor:function(z,C){this.url=z;this.printGp=new x(this.url);this._handler=y.hitch(this,this._handler);C&&C.async&&(this.async=!0);this._colorEvaluator=v("$..color")},async:!1,_vtlExtent:null,_cimVersion:null,_is11xService:!1,_loadGpServerMetadata:!0,execute:function(z,C,E){if(!this._loadGpServerMetadata)return this._execute(z,C,E);var G=new k(l._dfdCanceller),H=this._url.path,K=H.lastIndexOf("/GPServer/");
0<K&&(H=H.slice(0,K+9));G._pendingDfd=c({url:H,callbackParamName:"callback",content:y.mixin({},this._url.query,{f:"json"})}).then(y.hitch(this,function(I){this._loadGpServerMetadata=!1;this.async="esriExecutionTypeAsynchronous"===I.executionType;this._cimVersion=I.cimVersion;this._is11xService=!!this._cimVersion;G._pendingDfd=this._execute(z);return G._pendingDfd})).then(y.hitch(this,function(I){this._successHandler([I],null,C,G)})).otherwise(function(I){E&&E(I);G.errback(I)});return G},_handler:function(z,
C,E,G,H){try{if(this.async)"esriJobSucceeded"===z.jobStatus?this.printGp.getResultData(z.jobId,"Output_File",y.hitch(this,function(I){K=I.value;this._successHandler([K],"onComplete",E,H)})):this._errorHandler(Error(z.jobStatus),G,H);else{var K=z[0].value;this._successHandler([K],"onComplete",E,H)}}catch(I){this._errorHandler(I,G,H)}},_execute:function(z,C,E){var G=this._handler,H=this._errorHandler,K=z.template||new A;K.hasOwnProperty("showLabels")||(K.showLabels=!0);var I=K.exportOptions,J;I&&(J=
{outputSize:[I.width,I.height],dpi:I.dpi});I=K.layoutOptions;var Q=[];if(I){this.legendAll=!1;I.legendLayers?r.forEach(I.legendLayers,function(aa){var ka={};ka.id=aa.layerId;aa.subLayerIds&&(ka.subLayerIds=aa.subLayerIds);Q.push(ka)}):this.legendAll=!0;if("Miles"===I.scalebarUnit||"Kilometers"===I.scalebarUnit){var V="esriKilometers";var O="esriMiles"}else if("Meters"===I.scalebarUnit||"Feet"===I.scalebarUnit)V="esriMeters",O="esriFeet";var S={esriMiles:"mi",esriKilometers:"km",esriFeet:"ft",esriMeters:"m"};
S={titleText:I.titleText,authorText:I.authorText,copyrightText:I.copyrightText,customTextElements:I.customTextElements,scaleBarOptions:{metricUnit:V,metricLabel:S[V],nonMetricUnit:O,nonMetricLabel:S[O]},legendOptions:{operationalLayers:Q}}}V=this._getPrintDefinition(z.map,K);z.outSpatialReference&&(V.mapOptions.spatialReference=z.outSpatialReference.toJson());z.template&&h.isDefined(z.template.showAttribution)&&(V.mapOptions.showAttribution=z.template.showAttribution);y.mixin(V,{exportOptions:J,layoutOptions:S});
this.allLayerslegend&&y.mixin(V.layoutOptions,{legendOptions:{operationalLayers:this.allLayerslegend}});if(V.operationalLayers){J=V.operationalLayers;var L=function(aa){return h.fixJson(y.mixin(aa,{type:"esriSLS",cap:void 0,join:void 0,meterLimit:void 0}))},Y=/[\u4E00-\u9FFF\u0E00-\u0E7F\u0900-\u097F\u3040-\u309F\u30A0-\u30FF\u31F0-\u31FF]/,ca=/[\u0600-\u06FF]/,U=function(aa){var ka=aa.text,pa=(aa=aa.font)&&aa.family&&aa.family.toLowerCase();ka&&aa&&("arial"===pa||"arial unicode ms"===pa)&&(aa.family=
Y.test(ka)?"Arial Unicode MS":"Arial","normal"!==aa.style&&ca.test(ka)&&(aa.family="Arial Unicode MS"))};for(S=0;S<J.length;S++)if(J[S].featureCollection&&J[S].featureCollection.layers)for(O=0;O<J[S].featureCollection.layers.length;O++){var X=J[S].featureCollection.layers[O];if(X.layerDefinition&&X.layerDefinition.drawingInfo&&X.layerDefinition.drawingInfo.renderer&&X.layerDefinition.drawingInfo.renderer.symbol){var Z=X.layerDefinition.drawingInfo.renderer;"esriCLS"===Z.symbol.type?Z.symbol=L(Z.symbol):
"esriTS"===Z.symbol.type?U(Z.symbol):Z.symbol.outline&&"esriCLS"===Z.symbol.outline.type&&(Z.symbol.outline=L(Z.symbol.outline))}if(X.featureSet&&X.featureSet.features)for(I=0;I<X.featureSet.features.length;I++)Z=X.featureSet.features[I],Z.symbol&&("esriCLS"===Z.symbol.type?Z.symbol=L(Z.symbol):"esriTS"===Z.symbol.type?U(Z.symbol):Z.symbol.outline&&"esriCLS"===Z.symbol.outline.type&&(Z.symbol.outline=L(Z.symbol.outline)))}}K={Web_Map_as_JSON:a.toJson(h.fixJson(V)),Format:K.format,Layout_Template:K.layout};
z.extraParameters&&(K=y.mixin(K,z.extraParameters));var N=new k(l._dfdCanceller);z=function(aa,ka){G(aa,ka,C,E,N)};V=function(aa){H(aa,E,N)};N._pendingDfd=this.async?this.printGp.submitJob(K,z,null,V):this.printGp.execute(K,z,V);return N},onComplete:function(){},_createMultipointLayer:function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}},_createPolygonLayer:function(){return{layerDefinition:{name:"polygonLayer",
geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},_createPointLayer:function(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}},_createPolylineLayer:function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",
features:[]}}},_convertSvgSymbol:function(z){if(!(8>=e("ie")||!z.path&&"image/svg+xml"!==z.contentType)){var C=q.createSurface(w.create("div"),1024,1024);var E="image/svg+xml"===z.contentType?C.createObject(q.Image,{src:"data:image/svg+xml;base64,"+z.imageData,width:D.pt2px(z.width),height:D.pt2px(z.height),x:0,y:0}):C.createObject(q.Path,z.path).setFill(z.color).setStroke(z.outline);"pendingRender"in C&&C._render(!0);var G=C.rawNode.getContext("2d"),H=Math.ceil(E.getBoundingBox().width),K=Math.ceil(E.getBoundingBox().height);
E=G.getImageData(E.getBoundingBox().x,E.getBoundingBox().y,H,K);G.canvas.width=H;G.canvas.height=K;G.putImageData(E,0,0);G=G.canvas.toDataURL("image/png");z={type:"esriPMS",imageData:G.substr(22,G.length),angle:z.angle,contentType:"image/png",height:z.size?z.size:D.px2pt(K),width:z.size?H/K*z.size:D.px2pt(H),xoffset:z.xoffset,yoffset:z.yoffset};C.destroy();return z}},_convertSvgRenderer:function(z){"simple"===z.type&&z.symbol&&(z.symbol.path||"image/svg+xml"===z.symbol.contentType)?z.symbol=this._convertSvgSymbol(z.symbol):
"uniqueValue"===z.type?(z.defaultSymbol&&(z.defaultSymbol.path||"image/svg+xml"===z.defaultSymbol.contentType)&&(z.defaultSymbol=this._convertSvgSymbol(z.defaultSymbol)),z.uniqueValueInfos&&r.forEach(z.uniqueValueInfos,function(C){if(C.symbol.path||"image/svg+xml"===C.symbol.contentType)C.symbol=this._convertSvgSymbol(C.symbol)},this)):"classBreaks"===z.type&&(z.defaultSymbol&&(z.defaultSymbol.path||"image/svg+xml"===z.defaultSymbol.contentType)&&(z.defaultSymbol=this._convertSvgSymbol(z.defaultSymbol)),
z.classBreakInfos&&r.forEach(z.classBreakInfos,function(C){if(C.symbol.path||"image/svg+xml"===C.symbol.contentType)C.symbol=this._convertSvgSymbol(C.symbol)},this))},_createFeatureCollection:function(z,C,E,G){var H=this._createPolygonLayer(),K=this._createPolylineLayer(),I=this._createPointLayer(),J=this._createMultipointLayer(),Q=this._createPointLayer();Q.layerDefinition.name="textLayer";delete Q.layerDefinition.drawingInfo;if("esri.layers.FeatureLayer"===z.declaredClass||"esri.layers.StreamLayer"===
z.declaredClass)H.layerDefinition.name=K.layerDefinition.name=I.layerDefinition.name=J.layerDefinition.name=y.getObject("arcgisProps.title",!1,z)||z.name||z.id;var V=z.renderer&&"esri.renderer.SimpleRenderer"===z.renderer.declaredClass;if(!z.renderer||z.renderer.valueExpression||y.isFunction(z.renderer.attributeField))delete H.layerDefinition.drawingInfo,delete K.layerDefinition.drawingInfo,delete I.layerDefinition.drawingInfo,delete J.layerDefinition.drawingInfo;else{var O=z.renderer.toJson({useLegacyRotationProperties:!0});
if("temporal"===O.type){O={latestObservationRenderer:O.latestObservationRenderer,trackLinesRenderer:O.trackRenderer,observationAger:O.observationAger,renderer:O.observationRenderer};var S={};z._trackIdField&&(S.trackIdField=z._trackIdField);z._startTimeField&&(S.startTimeField=z._startTimeField);z._endTimeField&&(S.endTimeField=z._endTimeField);H.layerDefinition.drawingInfo=O;H.layerDefinition.timeInfo=S;K.layerDefinition.drawingInfo=O;K.layerDefinition.timeInfo=S;I.layerDefinition.drawingInfo=O;
I.layerDefinition.timeInfo=S;J.layerDefinition.drawingInfo=O;J.layerDefinition.timeInfo=S}else H.layerDefinition.drawingInfo.renderer=O,K.layerDefinition.drawingInfo.renderer=O,I.layerDefinition.drawingInfo.renderer=O,J.layerDefinition.drawingInfo.renderer=O}O=z.fields;O||!z.renderer||z.renderer.valueExpression||y.isFunction(z.renderer.attributeField)||("esri.renderer.ClassBreaksRenderer"===z.renderer.declaredClass?(O=[{name:z.renderer.attributeField,type:"esriFieldTypeDouble"}],z.renderer.normalizationField&&
O.push({name:z.renderer.normalizationField,type:"esriFieldTypeDouble"})):"esri.renderer.UniqueValueRenderer"===z.renderer.declaredClass&&(O=[{name:z.renderer.attributeField,type:"esriFieldTypeString"}],z.renderer.attributeField2&&O.push({name:z.renderer.attributeField2,type:"esriFieldTypeString"}),z.renderer.attributeField3&&O.push({name:z.renderer.attributeField3,type:"esriFieldTypeString"})));O&&(H.layerDefinition.fields=O,K.layerDefinition.fields=O,I.layerDefinition.fields=O,J.layerDefinition.fields=
O);O=z.graphics;z.isFeatureReductionActive&&z.isFeatureReductionActive()&&(O=z.getSingleGraphics());S=O.length;var L;for(L=0;L<S;L++){var Y=O[L];if(!1!==Y.visible&&Y.geometry){var ca=Y.toJson();ca.symbol&&ca.symbol.outline&&ca.symbol.outline.color&&ca.symbol.outline.color[3]&&!this._is11xService&&(ca.symbol.outline.color[3]=255);if(z.renderer&&!ca.symbol&&(y.isFunction(z.renderer.attributeField)||z.renderer.valueExpression||this._isFeatureCollectionRequired(z.renderer,z)||"esri.renderer.DotDensityRenderer"===
z.renderer.declaredClass||E)){E=E||z.renderer;var U=null;try{U=E.getSymbol(Y)}catch(X){}if(!U)continue;ca.symbol=U.toJson();this._isFeatureCollectionRequired(E,z)&&this._applyVisualVariables(ca.symbol,{renderer:E,graphic:Y,symbol:U,mapResolution:C&&C.getResolutionInMeters(),mapScale:C&&C.getScale()})}ca.symbol&&(ca.symbol.path||"image/svg+xml"===ca.symbol.contentType?ca.symbol=this._convertSvgSymbol(ca.symbol):ca.symbol.text&&delete ca.attributes);switch(Y.geometry.type){case "polygon":H.featureSet.features.push(ca);
break;case "polyline":K.featureSet.features.push(ca);break;case "point":ca.symbol&&ca.symbol.text?Q.featureSet.features.push(ca):I.featureSet.features.push(ca);break;case "multipoint":J.featureSet.features.push(ca);break;case "extent":ca.geometry=u.fromExtent(Y.geometry).toJson(),H.featureSet.features.push(ca)}}}C=[];0<H.featureSet.features.length&&C.push(H);0<K.featureSet.features.length&&C.push(K);0<J.featureSet.features.length&&C.push(J);0<I.featureSet.features.length&&C.push(I);0<Q.featureSet.features.length&&
C.push(Q);if(!C.length)return null;r.forEach(C,function(X){var Z=r.every(X.featureSet.features,function(N){return N.symbol});if(V||Z)G&&G.forceFeatureAttributes||r.forEach(X.featureSet.features,function(N){delete N.attributes}),G.forceFeatureAttributes||delete X.layerDefinition.fields;Z&&delete X.layerDefinition.drawingInfo});r.forEach(C,function(X){X.layerDefinition.drawingInfo&&X.layerDefinition.drawingInfo.renderer&&this._convertSvgRenderer(X.layerDefinition.drawingInfo.renderer)},this);return{id:z.id,
opacity:z.opacity,minScale:z.minScale||0,maxScale:z.maxScale||0,featureCollection:{layers:C}}},_getPrintDefinition:function(z,C){var E={operationalLayers:this._createOperationalLayers(z,C)},G=this._vtlExtent||z.extent,H=z.spatialReference;this._vtlExtent=null;z.spatialReference._isWrappable()&&(G=G._normalize(!0),H=G.spatialReference);G={mapOptions:{showAttribution:z.showAttribution,extent:G.toJson(),spatialReference:H.toJson()}};C.preserveScale&&y.mixin(G.mapOptions,{scale:C.outScale||z.getScale()});
z.timeExtent&&y.mixin(G.mapOptions,{time:[z.timeExtent.startTime.getTime(),z.timeExtent.endTime.getTime()]});z={};y.mixin(z,G,E);return z},_createOperationalLayers:function(z,C){var E,G=[],H=0;C.preserveScale&&(H=C.outScale||z.getScale());this.allLayerslegend=this.legendAll?[]:null;this._vtlExtent=null;var K=r.map(z.layerIds,z.getLayer,z);z._mapImageLyr&&K.push(z._mapImageLyr);for(E=0;E<K.length;E++){var I=K[E];if(I.loaded&&I.visible&&(!H||I.isVisibleAtScale(H))){var J=I.declaredClass;var Q={id:I.id,
title:y.getObject("arcgisProps.title",!1,I)||I.id,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||0};Q=y.mixin(Q,this._getUrlAndToken(I));I.getNode()&&F.get(I.getNode(),"data-reference")&&(Q._isRefLayer=!0);switch(J){case "esri.layers.ArcGISDynamicMapServiceLayer":var V=[];J=!!I._params.layers;if(I._params.dynamicLayers)J=C.outScale?I._getDynLayerObjs(C.outScale):a.fromJson(I._params.dynamicLayers),r.forEach(J,function(ca){V.push({id:ca.id,name:ca.name,layerDefinition:ca});delete ca.id;
delete ca.name;delete ca.maxScale;delete ca.minScale}),0===V.length&&(Q.visibleLayers=[-1]);else if(I.supportsDynamicLayers){if(J||I.layerDefinitions||I.layerTimeOptions){var O=I.createDynamicLayerInfosFromLayerInfos(),S=null;J&&(S=I.visibleLayers);S=m._getVisibleLayers(O,S);var L=m._getLayersForScale(C.outScale||z.getScale(),O);r.forEach(O,function(ca){if(!ca.subLayerIds){var U=ca.id;-1<r.indexOf(S,U)&&-1<r.indexOf(L,U)&&(ca={source:ca.source.toJson()},I.layerDefinitions&&I.layerDefinitions[U]&&
(ca.definitionExpression=I.layerDefinitions[U]),I.layerTimeOptions&&I.layerTimeOptions[U]&&(ca.layerTimeOptions=I.layerTimeOptions[U].toJson()),V.push({id:U,layerDefinition:ca}))}});0===V.length&&(Q.visibleLayers=[-1])}}else r.forEach(I.layerInfos,function(ca){var U={id:ca.id,layerDefinition:{}};I.layerDefinitions&&I.layerDefinitions[ca.id]&&(U.layerDefinition.definitionExpression=I.layerDefinitions[ca.id]);I.layerTimeOptions&&I.layerTimeOptions[ca.id]&&(U.layerDefinition.layerTimeOptions=I.layerTimeOptions[ca.id].toJson());
(U.layerDefinition.definitionExpression||U.layerDefinition.layerTimeOptions)&&V.push(U)}),J&&(Q.visibleLayers=I.visibleLayers.length?I.visibleLayers:[-1]);V.length&&(Q.layers=V);G.push(Q);this.allLayerslegend&&this.allLayerslegend.push({id:I.id,subLayerIds:I.visibleLayers});break;case "esri.layers.ArcGISImageServiceLayer":Q=y.mixin(Q,{url:I.url,bandIds:I.bandIds,compressionQuality:I.compressionQuality,format:I.format,interpolation:I.interpolation});I.mosaicRule&&y.mixin(Q,{mosaicRule:I.mosaicRule.toJson()});
if(I.renderingRule||I.renderer)this._is11xService?(I.renderingRule&&(Q.renderingRule=I.renderingRule.toJson()),I.renderer&&(Q.layerDefinition=Q.layerDefinition||{},Q.layerDefinition.drawingInfo=Q.layerDefinition.drawingInfo||{},Q.layerDefinition.drawingInfo.renderer=I.renderer.toJson())):(J=I.getExportImageRenderingRule())&&y.mixin(Q,{renderingRule:J.toJson()});G.push(Q);this.allLayerslegend&&this.allLayerslegend.push({id:I.id});break;case "esri.layers.RasterXLayer":this._is11xService&&(Q=y.mixin(Q,
{url:I.url,bandIds:I.bandIds,interpolation:I.interpolation}),I.renderer&&(Q.layerDefinition=Q.layerDefinition||{},Q.layerDefinition.drawingInfo=Q.layerDefinition.drawingInfo||{},Q.layerDefinition.drawingInfo.renderer=I.renderer.toJson()),G.push(Q),this.allLayerslegend&&this.allLayerslegend.push({id:I.id}));break;case "esri.layers.WMSLayer":Q=y.mixin(Q,{url:I.url,title:I.title,type:"wms",version:I.version,transparentBackground:I.imageTransparency,visibleLayers:I.visibleLayers});G.push(Q);this.allLayerslegend&&
this.allLayerslegend.push({id:I.id,subLayerIds:I.visibleLayers});break;case "esri.virtualearth.VETiledLayer":J=I.mapStyle;"roadOnDemand"===J?J="Road":"aerialWithLabelsOnDemand"===J&&(J="Hybrid");Q=y.mixin(Q,{visibility:I.visible,type:"BingMaps"+J,culture:I.culture,key:I.bingMapsKey});G.push(Q);break;case "esri.layers.OpenStreetMapLayer":Q=y.mixin(Q,{credits:I.copyright,type:"OpenStreetMap",url:d.getAbsoluteUrl(I.tileServers[0])});G.push(Q);break;case "esri.layers.WMTSLayer":Q=y.mixin(Q,{url:I.url,
type:"wmts",layer:I._identifier,style:I._style,format:I.format,tileMatrixSet:I._tileMatrixSetId});G.push(Q);break;case "esri.layers.MapImageLayer":J=I.getImages();r.forEach(J,function(ca,U){ca.visible&&ca.href&&(Q={id:I.id+"_image"+U,type:"image",title:I.id,minScale:I.minScale||0,maxScale:I.maxScale||0,opacity:I.opacity*ca.opacity,extent:ca.extent.toJson()},"data:image/png;base64,"===ca.href.substr(0,22)?Q.imageData=ca.href.substr(22):Q.url=ca.href,G.push(Q))});break;case "esri.layers.VectorTileLayer":delete Q.url;
delete Q.token;if(this._is11xService&&I.currentStyleInfo.serviceUrl&&I.currentStyleInfo.styleUrl&&(J=g.id&&g.id.findCredential(I.currentStyleInfo.styleUrl),O=g.id&&g.id.findCredential(I.currentStyleInfo.serviceUrl),!J&&!O||"2.1.0"!==this._cimVersion)){Q.type="VectorTileLayer";Q.styleUrl=I.currentStyleInfo.styleUrl;J&&(Q.token=J.token);O&&O.token!==Q.token&&(Q.additionalTokens=[{url:I.currentStyleInfo.serviceUrl,token:O.token}]);G.push(Q);break}Q.type="image";J=this._vtlExtent||z.extent.offset(0,0);
var Y=C.exportOptions&&C.exportOptions.dpi||96;O={format:"png",pixelRatio:Y/96};"MAP_ONLY"!==C.layout||!C.preserveScale||C.outScale&&C.outScale!==z.getScale()||96!==Y||!C.exportOptions||C.exportOptions.width%2===z.width%2&&C.exportOptions.height%2===z.height%2||(O.area={x:0,y:0,width:z.width,height:z.height},C.exportOptions.width%2!==z.width%2&&--O.area.width,C.exportOptions.height%2!==z.height%2&&--O.area.height,this._vtlExtent||(Y=z.toMap({x:O.area.width,y:O.area.height}),J.update(J.xmin,Y.y,Y.x,
J.ymax,J.spatialReference),this._vtlExtent=J));Q.extent=J._normalize(!0).toJson();J=I.takeScreenshot(O);J.isResolved()&&J.then(function(ca){"data:image/png;base64,"===ca.dataURL.substr(0,22)&&(Q.imageData=ca.dataURL.substr(22))});Q.imageData&&G.push(Q);break;case "esri.layers.WebTiledLayer":J=I.url.replace(/\$\{/g,"{");Q=y.mixin(Q,{type:"WebTiledLayer",urlTemplate:J,credits:I.copyright});I.subDomains&&0<I.subDomains.length&&(Q.subDomains=I.subDomains);I._wmtsInfo&&(Q.wmtsInfo=I._wmtsInfo);delete Q.url;
G.push(Q);break;default:if(I.getTileUrl||I.getImageUrl)Q=y.mixin(Q,{url:I.url}),G.push(Q)}}}K=r.map(z.graphicsLayerIds,z.getLayer,z);for(E=0;E<K.length;E++)I=K[E],I.isFeatureReductionActive&&I.isFeatureReductionActive()&&(I.getSingleGraphics().length?K.splice(++E,0,I.getFeatureReductionLayer()):K[E]=I.getFeatureReductionLayer());for(E=0;E<K.length;E++)if(I=K[E],I.loaded&&I.visible&&(!H||I.isVisibleAtScale(H)))switch(J=I.declaredClass,J){case "esri.layers.CSVLayer":if(this._is11xService){Q={id:I.id,
url:I.url,title:I.title,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||0,type:"CSV",locationInfo:{latitudeFieldName:I.latitudeFieldName,longitudeFieldName:I.longitudeFieldName},layerDefinition:{drawingInfo:{renderer:I.renderer&&I.renderer.toJson({useLegacyRotationProperties:!0})}}};G.push(Q);break}case "esri.layers.FeatureLayer":case "esri.layers.LabelLayer":case "esri.layers.StreamLayer":if("esri.layers.LabelLayer"===J&&!C.showLabels||I.renderer&&"esri.renderer.HeatmapRenderer"===
I.renderer.declaredClass)continue;J=null;I.url&&I.renderer&&("esri.renderer.ScaleDependentRenderer"===I.renderer.declaredClass?"scale"===I.renderer.rangeType?J=I.renderer.getRendererInfoByScale(z.getScale())&&I.renderer.getRendererInfoByScale(z.getScale()).renderer:"zoom"===I.renderer.rangeType&&(J=I.renderer.getRendererInfoByZoom(z.getZoom())&&I.renderer.getRendererInfoByZoom(z.getZoom()).renderer):J=I.renderer);O=J&&"esri.layers.CSVLayer"!==I.declaredClass&&!this._isFeatureCollectionRequired(J,
I)&&!J.valueExpression;Y=I.isFeatureReductionActive&&I.isFeatureReductionActive();if(J&&!Y&&"esri.renderer.DotDensityRenderer"!==J.declaredClass&&"esri.layers.StreamLayer"!==I.declaredClass&&(this._is11xService||O)&&("esri.renderer.SimpleRenderer"===J.declaredClass||"esri.renderer.TemporalRenderer"===J.declaredClass||null==J.attributeField||y.isString(J.attributeField)&&I._getField(J.attributeField,!0)))if(Q={id:I.id,title:y.getObject("arcgisProps.title",!1,I)||I.id,opacity:I.opacity,minScale:I.minScale||
0,maxScale:I.maxScale||0,layerDefinition:{drawingInfo:{renderer:J.toJson({useLegacyRotationProperties:!0})}}},Q=y.mixin(Q,this._getUrlAndToken(I)),"esri.renderer.TemporalRenderer"===J.declaredClass&&(O=Q.layerDefinition.drawingInfo,O.latestObservationRenderer=O.renderer.latestObservationRenderer,O.trackLinesRenderer=O.renderer.trackRenderer,O.observationAger=O.renderer.observationAger,O.renderer=O.renderer.observationRenderer,I._trackIdField&&(Q.layerDefinition.timeInfo={trackIdField:I._trackIdField})),
this._convertSvgRenderer(Q.layerDefinition.drawingInfo.renderer),this._is11xService||1>I.opacity||"esri.renderer.TemporalRenderer"===J.declaredClass||this._updateLayerOpacity(Q))if(I._params.source&&(J=I._params.source.toJson(),y.mixin(Q.layerDefinition,{source:J})),I.getDefinitionExpression()&&y.mixin(Q.layerDefinition,{definitionExpression:I.getDefinitionExpression()}),2!==I.mode)0<I.getSelectedFeatures().length&&(J=r.map(I.getSelectedFeatures(),function(ca){return ca.attributes[I.objectIdField]}),
0<J.length&&I.getSelectionSymbol()&&y.mixin(Q,{selectionObjectIds:J,selectionSymbol:I.getSelectionSymbol().toJson()}));else{J=r.map(I.getSelectedFeatures(),function(ca){return ca.attributes[I.objectIdField]});if(0===J.length||!I._params.drawMode)break;y.mixin(Q.layerDefinition,{objectIds:J});J=null;I.getSelectionSymbol()&&(J=new n(I.getSelectionSymbol()));y.mixin(Q.layerDefinition.drawingInfo,{renderer:J&&J.toJson()})}else Q=this._createFeatureCollection(I,z,null,C);else Q=J&&(J.valueExpression||
this._isFeatureCollectionRequired(J,I)||"esri.renderer.DotDensityRenderer"===J.declaredClass)?this._createFeatureCollection(I,z,J,C):this._createFeatureCollection(I,z,null,C);if(!Q)continue;G.push(Q);this.allLayerslegend&&this.allLayerslegend.push({id:I.id});break;case "esri.layers._GraphicsLayer":case "esri.layers.GraphicsLayer":case "esri.layers.WFSLayer":Q=this._createFeatureCollection(I,z,null,C);if(!Q)continue;G.push(Q);this.allLayerslegend&&this.allLayerslegend.push({id:I.id});break;case "esri.layers.ArcGISImageServiceVectorLayer":Q=
{id:I.id,title:y.getObject("arcgisProps.title",!1,I)||I.id,opacity:I.opacity,minScale:I.minScale||0,maxScale:I.maxScale||0,visibility:I.visible,symbolTileSize:I.symbolTileSize,layerDefinition:{drawingInfo:{renderer:I.renderer.toJson({useLegacyRotationProperties:!0})}}},Q=y.mixin(Q,this._getUrlAndToken(I)),I.mosaicRule&&y.mixin(Q,{mosaicRule:I.mosaicRule.toJson()}),G.push(Q),this.allLayerslegend&&this.allLayerslegend.push({id:I.id})}H&&r.forEach(G,function(ca){ca.minScale=0;ca.maxScale=0});z.graphics&&
0<z.graphics.graphics.length&&(Q=this._createFeatureCollection(z.graphics,z,null,C))&&G.push(Q);z._labels&&C.showLabels&&(Q=this._createFeatureCollection(z._labels,z,null,C))&&G.push(Q);r.forEach(G,function(ca,U,X){ca._isRefLayer&&(delete ca._isRefLayer,X.splice(U,1),X.push(ca))});return G},_getUrlAndToken:function(z){return{token:z._getToken(),url:z._url?z._url.path:null}},_updateLayerOpacity:function(z){var C=this._colorEvaluator(z);C=r.filter(C,function(K){return y.isArray(K)&&4===K.length});var E=
!0;if(C.length){var G=C[0][3],H;for(H=1;H<C.length;H++)if(G!==C[H][3]){E=!1;break}if(E)for(z.opacity=G/255,H=0;H<C.length;H++)C[H][3]=255}return E},_isFeatureCollectionRequired:function(z,C){if(C&&C.isFeatureReductionActive&&C.isFeatureReductionActive())return!0;var E=!1;if(C=this._getVariable(z,"rotationInfo",!1))E=(E=C.field)&&y.isFunction(E)||C.valueExpression;return z.hasVisualVariables("sizeInfo")||z.hasVisualVariables("colorInfo")||z.hasVisualVariables("opacityInfo")||E},_getVariable:function(z,
C,E){if(z)var G=(z=z.getVisualVariablesForType(C,E))&&z[0];return G},_applyVisualVariables:function(z,C){var E=C.renderer,G=C.graphic,H=C.symbol,K=C.mapResolution,I=C.mapScale,J=H.type;if("textsymbol"!==J&&"shieldlabelsymbol"!==J){var Q=this._getVariable(E,"sizeInfo",!1),V=this._getVariable(E,"colorInfo",!1),O=this._getVariable(E,"opacityInfo",!1);C=this._getVariable(E,"rotationInfo",!1);H instanceof t&&(Q=this._getVariable(E,"sizeInfo","outline")||Q);K=Q?E.getSize(G,{sizeInfo:Q,shape:"simplemarkersymbol"===
J?H.style:null,resolution:K,scale:I}):G.size;null!=K&&("simplemarkersymbol"===J?z.size=D.px2pt(K):"picturemarkersymbol"===J?(I=H.width/H.height*K,z.width=D.px2pt(I),z.height=D.px2pt(K),0!==H.xoffset&&(z.xoffset=D.px2pt(H.xoffset/H.width*I)),0!==H.yoffset&&(z.yoffset=D.px2pt(H.yoffset/H.height*K))):"simplelinesymbol"===J?z.width=D.px2pt(K):z.outline&&(z.outline.width=D.px2pt(K)));V&&(!(H=E.getColor(G,{colorInfo:V}))||"simplemarkersymbol"!==J&&"simplelinesymbol"!==J&&"simplefillsymbol"!==J||(z.color=
f.toJsonColor(H)));O&&(H=E.getOpacity(G,{opacityInfo:O}),null!=H&&z.color&&(z.color[3]=Math.round(255*H)));C&&(E=E.getRotationAngle(G,{rotationInfo:C}))&&(z.angle=-E)}}});y.setObject("tasks.PrintTask",b,g);return b})},"dojox/gfx/canvas":function(){define("./_base dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/window dojo/dom-geometry dojo/dom ./shape ./path ./arc ./matrix ./decompose ./bezierutils".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d){function u(V,O,S,L,Y,ca,U,X,Z,N){var aa=
O.length,ka=0;if(N){var pa=N.l/Y;ka=N.i}else pa=O[0]/Y;for(;ca<U;){if(ca+pa>U){var ta={l:(ca+pa-U)*Y,i:ka};pa=U-ca}ka%2||(V.beginPath(),V.arc(S,L,Y,ca,ca+pa,X),Z&&V.stroke());ca+=pa;++ka;pa=O[ka%aa]/Y}return ta}function n(V,O,S,L){var Y=0,ca=0,U=0;if(L){var X=L.l;U=L.i}else X=O[0];for(;1>ca;)ca=d.tAtLength(V,X),1==ca&&(Y=d.computeLength(V),Y={l:X-Y,i:U}),V=d.splitBezierAtT(V,ca),U%2||S.push(V[0]),V=V[1],++U,X=O[U%O.length];return Y}function t(V,O,S,L){var Y=[O.last.x,O.last.y].concat(S),ca=!(V instanceof
Array);S=4===S.length?"quadraticCurveTo":"bezierCurveTo";var U=[];O=n(Y,O.canvasDash,U,L);for(L=0;L<U.length;++L)Y=U[L],ca?(V.moveTo(Y[0],Y[1]),V[S].apply(V,Y.slice(2))):(V.push("moveTo",[Y[0],Y[1]]),V.push(S,Y.slice(2)));return O}function x(V,O,S,L,Y,ca,U){var X=0,Z=0,N=0,aa=d.distance(S,L,Y,ca),ka=0;O=O.canvasDash;var pa=S,ta=L,Ba=!(V instanceof Array);U?(N=U.l,ka=U.i):N+=O[0];for(;.01<Math.abs(1-Z);){N>aa&&(X={l:N-aa,i:ka},N=aa);Z=N/aa;U=S+(Y-S)*Z;var Da=L+(ca-L)*Z;ka++%2||(Ba?(V.moveTo(pa,ta),
V.lineTo(U,Da)):(V.push("moveTo",[pa,ta]),V.push("lineTo",[U,Da])));pa=U;ta=Da;N+=O[ka%O.length]}return X}var A=b.canvas={},B=null,F=f.multiplyPoint,w=Math.PI,D=2*w,q=w/2;c=y.extend;if(k.global.CanvasRenderingContext2D){k=k.doc.createElement("canvas").getContext("2d");var v="function"==typeof k.setLineDash,z="function"==typeof k.fillText}var C={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,
3,1,3],longdashdotdot:[8,3,1,3,1,3]};A.Shape=a("dojox.gfx.canvas.Shape",h.Shape,{_render:function(V){V.save();this._renderTransform(V);this._renderClip(V);this._renderShape(V);this._renderFill(V,!0);this._renderStroke(V,!0);V.restore()},_renderClip:function(V){this.canvasClip&&(this.canvasClip.render(V),V.clip())},_renderTransform:function(V){if("canvasTransform"in this){var O=this.canvasTransform;V.translate(O.dx,O.dy);V.rotate(O.angle2);V.scale(O.sx,O.sy);V.rotate(O.angle1)}},_renderShape:function(V){},
_renderFill:function(V,O){if("canvasFill"in this){var S=this.fillStyle;if("canvasFillImage"in this){var L=S.width,Y=S.height,ca=this.canvasFillImage.width,U=this.canvasFillImage.height,X=Math.min(L==ca?1:L/ca,Y==U?1:Y/U),Z=(L-X*ca)/2,N=(Y-X*U)/2;B.width=L;B.height=Y;var aa=B.getContext("2d");aa.clearRect(0,0,L,Y);aa.drawImage(this.canvasFillImage,0,0,ca,U,Z,N,X*ca,X*U);this.canvasFill=V.createPattern(B,"repeat");delete this.canvasFillImage}V.fillStyle=this.canvasFill;O&&("pattern"!==S.type||0===S.x&&
0===S.y||V.translate(S.x,S.y),V.fill())}else V.fillStyle="rgba(0,0,0,0.0)"},_renderStroke:function(V,O){var S=this.strokeStyle;S?(V.strokeStyle=S.color.toString(),V.lineWidth=S.width,V.lineCap=S.cap,"number"==typeof S.join?(V.lineJoin="miter",V.miterLimit=S.join):V.lineJoin=S.join,this.canvasDash?v?(V.setLineDash(this.canvasDash),O&&V.stroke()):this._renderDashedStroke(V,O):O&&V.stroke()):O||(V.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(V,O){},getEventSource:function(){return null},
on:function(){},connect:function(){},disconnect:function(){},canvasClip:null,setClip:function(V){this.inherited(arguments);var O=V?"width"in V?"rect":"cx"in V?"ellipse":"points"in V?"polyline":"d"in V?"path":null:null;if(V&&!O)return this;this.canvasClip=V?E(O,V):null;this.parent&&this.parent._makeDirty();return this}});var E=function(V,O){switch(V){case "ellipse":return{canvasEllipse:I({shape:O}),render:function(S){return A.Ellipse.prototype._renderShape.call(this,S)}};case "rect":return{shape:y.delegate(O,
{r:0}),render:function(S){return A.Rect.prototype._renderShape.call(this,S)}};case "path":return{canvasPath:G(O),render:function(S){this.canvasPath._renderShape(S)}};case "polyline":return{canvasPolyline:O.points,render:function(S){return A.Polyline.prototype._renderShape.call(this,S)}}}return null},G=function(V){var O=new dojox.gfx.canvas.Path;O.canvasPath=[];O._setPath(V.d);return O},H=function(V,O,S){var L=V.prototype[O];V.prototype[O]=S?function(){this.parent&&this.parent._makeDirty();L.apply(this,
arguments);S.call(this);return this}:function(){this.parent&&this.parent._makeDirty();return L.apply(this,arguments)}};H(A.Shape,"setTransform",function(){this.matrix?this.canvasTransform=b.decompose(this.matrix):delete this.canvasTransform});H(A.Shape,"setFill",function(){var V=this.fillStyle;if(V){if("object"==typeof V&&"type"in V){var O=this.surface.rawNode.getContext("2d");switch(V.type){case "linear":case "radial":var S="linear"==V.type?O.createLinearGradient(V.x1,V.y1,V.x2,V.y2):O.createRadialGradient(V.cx,
V.cy,0,V.cx,V.cy,V.r);r.forEach(V.colors,function(L){S.addColorStop(L.offset,b.normalizeColor(L.color).toString())});break;case "pattern":B||(B=document.createElement("canvas")),O=new Image,this.surface.downloadImage(O,V.src),this.canvasFillImage=O}}else S=V.toString();this.canvasFill=S}else delete this.canvasFill});H(A.Shape,"setStroke",function(){var V=this.strokeStyle;if(V){var O=this.strokeStyle.style.toLowerCase();O in C&&(O=C[O]);if(O instanceof Array){this.canvasDash=O=O.slice();var S;for(S=
0;S<O.length;++S)O[S]*=V.width;if("butt"!=V.cap){for(S=0;S<O.length;S+=2)O[S]-=V.width,1>O[S]&&(O[S]=1);for(S=1;S<O.length;S+=2)O[S]+=V.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!v&&!!this.canvasDash});H(A.Shape,"setShape");A.Group=a("dojox.gfx.canvas.Group",A.Shape,{constructor:function(){h.Container._init.call(this)},_render:function(V){V.save();this._renderTransform(V);this._renderClip(V);for(var O=0;O<this.children.length;++O)this.children[O]._render(V);V.restore()},
destroy:function(){h.Container.clear.call(this,!0);A.Shape.prototype.destroy.apply(this,arguments)}});A.Rect=a("dojox.gfx.canvas.Rect",[A.Shape,h.Rect],{_renderShape:function(V){var O=this.shape,S=Math.min(O.r,O.height/2,O.width/2),L=O.x,Y=L+O.width,ca=O.y;O=ca+O.height;var U=L+S,X=Y-S,Z=ca+S,N=O-S;V.beginPath();V.moveTo(U,ca);S?(V.arc(X,Z,S,-q,0,!1),V.arc(X,N,S,0,q,!1),V.arc(U,N,S,q,w,!1),V.arc(U,Z,S,w,w+q,!1)):(V.lineTo(X,ca),V.lineTo(Y,N),V.lineTo(U,O),V.lineTo(L,Z));V.closePath()},_renderDashedStroke:function(V,
O){var S=this.shape,L=Math.min(S.r,S.height/2,S.width/2),Y=S.x,ca=Y+S.width,U=S.y,X=U+S.height,Z=Y+L,N=ca-L,aa=U+L,ka=X-L;L?(V.beginPath(),S=x(V,this,Z,U,N,U),O&&V.stroke(),S=u(V,this.canvasDash,N,aa,L,-q,0,!1,O,S),V.beginPath(),S=x(V,this,ca,aa,ca,ka,S),O&&V.stroke(),S=u(V,this.canvasDash,N,ka,L,0,q,!1,O,S),V.beginPath(),S=x(V,this,N,X,Z,X,S),O&&V.stroke(),S=u(V,this.canvasDash,Z,ka,L,q,w,!1,O,S),V.beginPath(),S=x(V,this,Y,ka,Y,aa,S),O&&V.stroke(),u(V,this.canvasDash,Z,aa,L,w,w+q,!1,O,S)):(V.beginPath(),
S=x(V,this,Z,U,N,U),S=x(V,this,N,U,ca,ka,S),S=x(V,this,ca,ka,Z,X,S),x(V,this,Z,X,Y,aa,S),O&&V.stroke())}});var K=[];(function(){var V=l.curvePI4;K.push(V.s,V.c1,V.c2,V.e);for(var O=45;360>O;O+=45){var S=f.rotateg(O);K.push(F(S,V.c1),F(S,V.c2),F(S,V.e))}})();var I=function(V){var O=[],S=V.shape,L=f.normalize([f.translate(S.cx,S.cy),f.scale(S.rx,S.ry)]);var Y=F(L,K[0]);O.push([Y.x,Y.y]);for(S=1;S<K.length;S+=3){var ca=F(L,K[S]);var U=F(L,K[S+1]);Y=F(L,K[S+2]);O.push([ca.x,ca.y,U.x,U.y,Y.x,Y.y])}if(V._needsDash){Y=
[];ca=O[0];for(S=1;S<O.length;++S)U=[],n(ca.concat(O[S]),V.canvasDash,U),ca=[O[S][4],O[S][5]],Y.push(U);V._dashedPoints=Y}return O};A.Ellipse=a("dojox.gfx.canvas.Ellipse",[A.Shape,h.Ellipse],{setShape:function(){this.inherited(arguments);this.canvasEllipse=I(this);return this},setStroke:function(){this.inherited(arguments);v||(this.canvasEllipse=I(this));return this},_renderShape:function(V){var O=this.canvasEllipse,S;V.beginPath();V.moveTo.apply(V,O[0]);for(S=1;S<O.length;++S)V.bezierCurveTo.apply(V,
O[S]);V.closePath()},_renderDashedStroke:function(V,O){var S=this._dashedPoints;V.beginPath();for(var L=0;L<S.length;++L)for(var Y=S[L],ca=0;ca<Y.length;++ca){var U=Y[ca];V.moveTo(U[0],U[1]);V.bezierCurveTo(U[2],U[3],U[4],U[5],U[6],U[7])}O&&V.stroke()}});A.Circle=a("dojox.gfx.canvas.Circle",[A.Shape,h.Circle],{_renderShape:function(V){var O=this.shape;V.beginPath();V.arc(O.cx,O.cy,O.r,0,D,1)},_renderDashedStroke:function(V,O){var S=this.shape,L=0,Y=this.canvasDash.length;for(i=0;L<D;){var ca=this.canvasDash[i%
Y]/S.r;i%2||(V.beginPath(),V.arc(S.cx,S.cy,S.r,L,L+ca,0),O&&V.stroke());L+=ca;++i}}});A.Line=a("dojox.gfx.canvas.Line",[A.Shape,h.Line],{_renderShape:function(V){var O=this.shape;V.beginPath();V.moveTo(O.x1,O.y1);V.lineTo(O.x2,O.y2)},_renderDashedStroke:function(V,O){var S=this.shape;V.beginPath();x(V,this,S.x1,S.y1,S.x2,S.y2);O&&V.stroke()}});A.Polyline=a("dojox.gfx.canvas.Polyline",[A.Shape,h.Polyline],{setShape:function(){this.inherited(arguments);var V=this.shape.points,O=V[0],S;this.bbox=null;
this._normalizePoints();if(V.length)if("number"==typeof O)O=V;else for(O=[],S=0;S<V.length;++S){var L=V[S];O.push(L.x,L.y)}else O=[];this.canvasPolyline=O;return this},_renderShape:function(V){var O=this.canvasPolyline;if(O.length){V.beginPath();V.moveTo(O[0],O[1]);for(var S=2;S<O.length;S+=2)V.lineTo(O[S],O[S+1])}},_renderDashedStroke:function(V,O){var S=this.canvasPolyline,L=0;V.beginPath();for(var Y=0;Y<S.length;Y+=2)L=x(V,this,S[Y],S[Y+1],S[Y+2],S[Y+3],L);O&&V.stroke()}});A.Image=a("dojox.gfx.canvas.Image",
[A.Shape,h.Image],{setShape:function(){this.inherited(arguments);var V=new Image;this.surface.downloadImage(V,this.shape.src);this.canvasImage=V;return this},_renderShape:function(V){var O=this.shape;V.drawImage(this.canvasImage,O.x,O.y,O.width,O.height)}});A.Text=a("dojox.gfx.canvas.Text",[A.Shape,h.Text],{_setFont:function(){this.fontStyle?this.canvasFont=b.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var V=this.shape,O=0;if(V.text){var S=this.surface.rawNode.getContext("2d");
S.save();this._renderTransform(S);this._renderFill(S,!1);this._renderStroke(S,!1);this.canvasFont&&(S.font=this.canvasFont);O=S.measureText(V.text).width;S.restore()}return O},_render:function(V){V.save();this._renderTransform(V);this._renderFill(V,!1);this._renderStroke(V,!1);this._renderShape(V);V.restore()},_renderShape:function(V){var O=this.shape;O.text&&(V.textAlign="middle"===O.align?"center":O.align,this.canvasFont&&(V.font=this.canvasFont),this.canvasFill&&V.fillText(O.text,O.x,O.y),this.strokeStyle&&
(V.beginPath(),V.strokeText(O.text,O.x,O.y),V.closePath()))}});H(A.Text,"setFont");z||A.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var J={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};
A.Path=a("dojox.gfx.canvas.Path",[A.Shape,m.Path],{constructor:function(){this.lastControl={}},setShape:function(){this.canvasPath=[];this._dashedPath=[];return this.inherited(arguments)},setStroke:function(){this.inherited(arguments);v||(this.segmented=!1,this._confirmSegmented());return this},_setPath:function(){this._dashResidue=null;this.inherited(arguments)},_updateWithSegment:function(V){var O=y.clone(this.last);this[J[V.action]](this.canvasPath,V.action,V.args,this._needsDash?this._dashedPath:
null);this.last=O;this.inherited(arguments)},_renderShape:function(V){var O=this.canvasPath;V.beginPath();for(var S=0;S<O.length;S+=2)V[O[S]].apply(V,O[S+1])},_renderDashedStroke:v?function(){}:function(V,O){var S=this._dashedPath;V.beginPath();for(var L=0;L<S.length;L+=2)V[S[L]].apply(V,S[L+1]);O&&V.stroke()},_moveToA:function(V,O,S,L){V.push("moveTo",[S[0],S[1]]);L&&L.push("moveTo",[S[0],S[1]]);for(O=2;O<S.length;O+=2)V.push("lineTo",[S[O],S[O+1]]),L&&(this._dashResidue=x(L,this,S[O-2],S[O-1],S[O],
S[O+1],this._dashResidue));this.last.x=S[S.length-2];this.last.y=S[S.length-1];this.lastControl={}},_moveToR:function(V,O,S,L){O="x"in this.last?[this.last.x+=S[0],this.last.y+=S[1]]:[this.last.x=S[0],this.last.y=S[1]];V.push("moveTo",O);L&&L.push("moveTo",O);for(O=2;O<S.length;O+=2)V.push("lineTo",[this.last.x+=S[O],this.last.y+=S[O+1]]),L&&(this._dashResidue=x(L,this,L[L.length-1][0],L[L.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_lineToA:function(V,O,S,L){for(O=
0;O<S.length;O+=2)L&&(this._dashResidue=x(L,this,this.last.x,this.last.y,S[O],S[O+1],this._dashResidue)),V.push("lineTo",[S[O],S[O+1]]);this.last.x=S[S.length-2];this.last.y=S[S.length-1];this.lastControl={}},_lineToR:function(V,O,S,L){for(O=0;O<S.length;O+=2)V.push("lineTo",[this.last.x+=S[O],this.last.y+=S[O+1]]),L&&(this._dashResidue=x(L,this,L[L.length-1][0],L[L.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(V,O,S,L){for(O=0;O<S.length;++O)V.push("lineTo",
[S[O],this.last.y]),L&&(this._dashResidue=x(L,this,L[L.length-1][0],L[L.length-1][1],S[O],this.last.y,this._dashResidue));this.last.x=S[S.length-1];this.lastControl={}},_hLineToR:function(V,O,S,L){for(O=0;O<S.length;++O)V.push("lineTo",[this.last.x+=S[O],this.last.y]),L&&(this._dashResidue=x(L,this,L[L.length-1][0],L[L.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(V,O,S,L){for(O=0;O<S.length;++O)V.push("lineTo",[this.last.x,S[O]]),L&&(this._dashResidue=
x(L,this,L[L.length-1][0],L[L.length-1][1],this.last.x,S[O],this._dashResidue));this.last.y=S[S.length-1];this.lastControl={}},_vLineToR:function(V,O,S,L){for(O=0;O<S.length;++O)V.push("lineTo",[this.last.x,this.last.y+=S[O]]),L&&(this._dashResidue=x(L,this,L[L.length-1][0],L[L.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(V,O,S,L){for(O=0;O<S.length;O+=6)V.push("bezierCurveTo",S.slice(O,O+6)),L&&(this._dashResidue=t(L,this,V[V.length-1],this._dashResidue));
this.last.x=S[S.length-2];this.last.y=S[S.length-1];this.lastControl.x=S[S.length-4];this.lastControl.y=S[S.length-3];this.lastControl.type="C"},_curveToR:function(V,O,S,L){for(O=0;O<S.length;O+=6)V.push("bezierCurveTo",[this.last.x+S[O],this.last.y+S[O+1],this.lastControl.x=this.last.x+S[O+2],this.lastControl.y=this.last.y+S[O+3],this.last.x+S[O+4],this.last.y+S[O+5]]),L&&(this._dashResidue=t(L,this,V[V.length-1],this._dashResidue)),this.last.x+=S[O+4],this.last.y+=S[O+5];this.lastControl.type="C"},
_smoothCurveToA:function(V,O,S,L){for(O=0;O<S.length;O+=4){var Y="C"==this.lastControl.type;V.push("bezierCurveTo",[Y?2*this.last.x-this.lastControl.x:this.last.x,Y?2*this.last.y-this.lastControl.y:this.last.y,S[O],S[O+1],S[O+2],S[O+3]]);L&&(this._dashResidue=t(L,this,V[V.length-1],this._dashResidue));this.lastControl.x=S[O];this.lastControl.y=S[O+1];this.lastControl.type="C"}this.last.x=S[S.length-2];this.last.y=S[S.length-1]},_smoothCurveToR:function(V,O,S,L){for(O=0;O<S.length;O+=4){var Y="C"==
this.lastControl.type;V.push("bezierCurveTo",[Y?2*this.last.x-this.lastControl.x:this.last.x,Y?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+S[O],this.last.y+S[O+1],this.last.x+S[O+2],this.last.y+S[O+3]]);L&&(this._dashResidue=t(L,this,V[V.length-1],this._dashResidue));this.lastControl.x=this.last.x+S[O];this.lastControl.y=this.last.y+S[O+1];this.lastControl.type="C";this.last.x+=S[O+2];this.last.y+=S[O+3]}},_qCurveToA:function(V,O,S,L){for(O=0;O<S.length;O+=4)V.push("quadraticCurveTo",
S.slice(O,O+4));L&&(this._dashResidue=t(L,this,V[V.length-1],this._dashResidue));this.last.x=S[S.length-2];this.last.y=S[S.length-1];this.lastControl.x=S[S.length-4];this.lastControl.y=S[S.length-3];this.lastControl.type="Q"},_qCurveToR:function(V,O,S,L){for(O=0;O<S.length;O+=4)V.push("quadraticCurveTo",[this.lastControl.x=this.last.x+S[O],this.lastControl.y=this.last.y+S[O+1],this.last.x+S[O+2],this.last.y+S[O+3]]),L&&(this._dashResidue=t(L,this,V[V.length-1],this._dashResidue)),this.last.x+=S[O+
2],this.last.y+=S[O+3];this.lastControl.type="Q"},_qSmoothCurveToA:function(V,O,S,L){for(O=0;O<S.length;O+=2){var Y="Q"==this.lastControl.type;V.push("quadraticCurveTo",[this.lastControl.x=Y?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=Y?2*this.last.y-this.lastControl.y:this.last.y,S[O],S[O+1]]);L&&(this._dashResidue=t(L,this,V[V.length-1],this._dashResidue));this.lastControl.type="Q"}this.last.x=S[S.length-2];this.last.y=S[S.length-1]},_qSmoothCurveToR:function(V,O,S,L){for(O=
0;O<S.length;O+=2){var Y="Q"==this.lastControl.type;V.push("quadraticCurveTo",[this.lastControl.x=Y?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=Y?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+S[O],this.last.y+S[O+1]]);L&&(this._dashResidue=t(L,this,V[V.length-1],this._dashResidue));this.lastControl.type="Q";this.last.x+=S[O];this.last.y+=S[O+1]}},_arcTo:function(V,O,S,L){O="a"==O;for(var Y=0;Y<S.length;Y+=7){var ca=S[Y+5],U=S[Y+6];O&&(ca+=this.last.x,U+=this.last.y);
var X=l.arcAsBezier(this.last,S[Y],S[Y+1],S[Y+2],S[Y+3]?1:0,S[Y+4]?1:0,ca,U);r.forEach(X,function(Z){V.push("bezierCurveTo",Z)});L&&(this._dashResidue=t(L,this,p,this._dashResidue));this.last.x=ca;this.last.y=U}this.lastControl={}},_closePath:function(V,O,S,L){V.push("closePath",[]);L&&(this._dashResidue=x(L,this,this.last.x,this.last.y,L[1][0],L[1][1],this._dashResidue));this.lastControl={}}});r.forEach("moveTo lineTo hLineTo vLineTo curveTo smoothCurveTo qCurveTo qSmoothCurveTo arcTo closePath".split(" "),
function(V){H(A.Path,V)});A.TextPath=a("dojox.gfx.canvas.TextPath",[A.Shape,m.TextPath],{_renderShape:function(V){},_setText:function(){},_setFont:function(){}});A.Surface=a("dojox.gfx.canvas.Surface",h.Surface,{constructor:function(){h.Container._init.call(this);this.pendingImageCount=0;this.makeDirty()},destroy:function(){h.Container.clear.call(this,!0);this.inherited(arguments)},setDimensions:function(V,O){this.width=b.normalizedLength(V);this.height=b.normalizedLength(O);if(!this.rawNode)return this;
V=!1;this.rawNode.width!=this.width&&(this.rawNode.width=this.width,V=!0);this.rawNode.height!=this.height&&(this.rawNode.height=this.height,V=!0);V&&this.makeDirty();return this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(V){!this.rawNode||!V&&this.pendingImageCount||(V=this.rawNode.getContext("2d"),V.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(V),"pendingRender"in this&&(clearTimeout(this.pendingRender),
delete this.pendingRender))},render:function(V){V.save();for(var O=0;O<this.children.length;++O)this.children[O]._render(V);V.restore()},makeDirty:function(){this.pendingImagesCount||"pendingRender"in this||this._batch||(this.pendingRender=setTimeout(y.hitch(this,this._render),0))},downloadImage:function(V,O){var S=y.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender);V.onload=S;V.onerror=S;V.onabort=S;V.src=
O},onImageLoad:function(){--this.pendingImageCount||(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},disconnect:function(){},on:function(){}});A.createSurface=function(V,O,S){if(!O&&!S){var L=e.position(V);O=O||L.w;S=S||L.h}"number"==typeof O&&(O+="px");"number"==typeof S&&(S+="px");L=new A.Surface;V=g.byId(V);var Y=V.ownerDocument.createElement("canvas");Y.width=b.normalizedLength(O);Y.height=b.normalizedLength(S);V.appendChild(Y);
L.rawNode=Y;L._parent=V;return L.surface=L};var Q=h.Container;a={openBatch:function(){++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this._makeDirty();return this},_makeDirty:function(){this._batch||this.surface.makeDirty()},add:function(V){this._makeDirty();return Q.add.apply(this,arguments)},remove:function(V,O){this._makeDirty();return Q.remove.apply(this,arguments)},clear:function(){this._makeDirty();return Q.clear.apply(this,arguments)},getBoundingBox:Q.getBoundingBox,
_moveChildToFront:function(V){this._makeDirty();return Q._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(V){this._makeDirty();return Q._moveChildToBack.apply(this,arguments)}};m={createObject:function(V,O){V=new V;V.surface=this.surface;V.setShape(O);this.add(V);return V}};c(A.Group,a);c(A.Group,h.Creator);c(A.Group,m);c(A.Surface,a);c(A.Surface,h.Creator);c(A.Surface,m);A.fixTarget=function(V,O){return!0};return A})},"dojox/gfx/arc":function(){define(["./_base","dojo/_base/lang",
"./matrix"],function(b,y,r){function a(l){var f=Math.cos(l);l=Math.sin(l);var c={x:f+4/3*(1-f),y:l-4/3*f*(1-f)/l};return{s:{x:f,y:-l},c1:{x:c.x,y:-c.y},c2:c,e:{x:f,y:l}}}var k=2*Math.PI,e=Math.PI/4,g=Math.PI/8,h=e+g,m=a(g);return b.arc={unitArcAsBezier:a,curvePI4:m,arcAsBezier:function(l,f,c,d,u,n,t,x){u=!!u;n=!!n;var A=r._degToRad(d);d=f*f;var B=c*c,F=r.multiplyPoint(r.rotate(-A),{x:(l.x-t)/2,y:(l.y-x)/2}),w=F.x*F.x,D=F.y*F.y;d=Math.sqrt((d*B-d*D-B*w)/(d*D+B*w));isNaN(d)&&(d=0);d={x:d*f*F.y/c,y:-d*
c*F.x/f};u==n&&(d={x:-d.x,y:-d.y});d=r.multiplyPoint([r.translate((l.x+t)/2,(l.y+x)/2),r.rotate(A)],d);f=r.normalize([r.translate(d.x,d.y),r.rotate(A),r.scale(f,c)]);d=r.invert(f);l=r.multiplyPoint(d,l);x=r.multiplyPoint(d,t,x);t=Math.atan2(l.y,l.x);d=t-Math.atan2(x.y,x.x);n&&(d=-d);0>d?d+=k:d>k&&(d-=k);c=g;x=m;c=n?c:-c;l=[];for(u=d;0<u;u-=e)u<h&&(c=u/2,x=a(c),c=n?c:-c,u=0),F=r.normalize([f,r.rotate(t+c)]),n?(d=r.multiplyPoint(F,x.c1),A=r.multiplyPoint(F,x.c2),F=r.multiplyPoint(F,x.e)):(d=r.multiplyPoint(F,
x.c2),A=r.multiplyPoint(F,x.c1),F=r.multiplyPoint(F,x.s)),l.push([d.x,d.y,A.x,A.y,F.x,F.y]),t+=2*c;return l}}})},"dojox/gfx/decompose":function(){define(["./_base","dojo/_base/lang","./matrix"],function(b,y,r){function a(m,l){return Math.abs(m-l)<=1E-6*(Math.abs(m)+Math.abs(l))}function k(m,l,f,c){if(!isFinite(m))return f;if(!isFinite(f))return m;l=Math.abs(l);c=Math.abs(c);return(l*m+c*f)/(l+c)}function e(m){m=r.normalize(m);var l=-m.xx-m.yy,f=m.xx*m.yy-m.xy*m.yx,c=Math.sqrt(l*l-4*f);l=-(l+(0>l?
-c:c))/2;f/=l;c=m.xy/(l-m.xx);var d=1,u=m.xy/(f-m.xx),n=1;a(l,f)&&(c=1,u=d=0,n=1);isFinite(c)||(c=1,d=(l-m.xx)/m.xy,isFinite(d)||(c=(l-m.yy)/m.yx,d=1,isFinite(c)||(c=1,d=m.yx/(l-m.yy))));isFinite(u)||(u=1,n=(f-m.xx)/m.xy,isFinite(n)||(u=(f-m.yy)/m.yx,n=1,isFinite(u)||(u=1,n=m.yx/(f-m.yy))));m=Math.sqrt(c*c+d*d);var t=Math.sqrt(u*u+n*n);isFinite(c/=m)||(c=0);isFinite(d/=m)||(d=0);isFinite(u/=t)||(u=0);isFinite(n/=t)||(n=0);return{value1:l,value2:f,vector1:{x:c,y:d},vector2:{x:u,y:n}}}function g(m,
l){var f=0>m.xx*m.yy||0<m.xy*m.yx?-1:1,c=l.angle1=(Math.atan2(m.yx,m.yy)+Math.atan2(-f*m.xy,f*m.xx))/2;f=Math.cos(c);c=Math.sin(c);l.sx=k(m.xx/f,f,-m.xy/c,c);l.sy=k(m.yy/f,f,m.yx/c,c);return l}function h(m,l){var f=0>m.xx*m.yy||0<m.xy*m.yx?-1:1,c=l.angle2=(Math.atan2(f*m.yx,f*m.xx)+Math.atan2(-m.xy,m.yy))/2;f=Math.cos(c);c=Math.sin(c);l.sx=k(m.xx/f,f,m.yx/c,c);l.sy=k(m.yy/f,f,-m.xy/c,c);return l}return b.decompose=function(m){var l=r.normalize(m);m={dx:l.dx,dy:l.dy,sx:1,sy:1,angle1:0,angle2:0};if(a(l.xy,
0)&&a(l.yx,0))return y.mixin(m,{sx:l.xx,sy:l.yy});if(a(l.xx*l.yx,-l.xy*l.yy))return g(l,m);if(a(l.xx*l.xy,-l.yx*l.yy))return h(l,m);var f=new r.Matrix2D(l);var c=y.mixin(f,{dx:0,dy:0,xy:f.yx,yx:f.xy});f=e([l,c]);c=e([c,l]);f=new r.Matrix2D({xx:f.vector1.x,xy:f.vector2.x,yx:f.vector1.y,yy:f.vector2.y});c=new r.Matrix2D({xx:c.vector1.x,xy:c.vector1.y,yx:c.vector2.x,yy:c.vector2.y});l=new r.Matrix2D([r.invert(f),l,r.invert(c)]);g(c,m);l.xx*=m.sx;l.yy*=m.sy;h(f,m);l.xx*=m.sx;l.yy*=m.sy;return y.mixin(m,
{sx:l.xx,sy:l.yy})}})},"dojox/gfx/bezierutils":function(){define(["./_base"],function(b){b=b.bezierutils={};b.tAtLength=function(g,h){var m=0,l=6==g.length,f=0,c=0,d=l?a:e,u=function(n,t){for(var x=0,A=0;A<n.length-2;A+=2)x+=r(n[A],n[A+1],n[A+2],n[A+3]);A=l?r(g[0],g[1],g[4],g[5]):r(g[0],g[1],g[6],g[7]);x-A>t||f+x>h+t?(++c,n=d(n,.5),u(n[0],t),Math.abs(f-h)<=t||u(n[1],t)):(f+=x,m+=1/(1<<c))};h&&u(g,.5);return m};var y=b.computeLength=function(g){for(var h=6==g.length,m=0,l=0;l<g.length-2;l+=2)m+=r(g[l],
g[l+1],g[l+2],g[l+3]);l=h?r(g[0],g[1],g[4],g[5]):r(g[0],g[1],g[6],g[7]);return.1<m-l?(g=h?a(g,.5):k(g,.5),m=y(g[0],h),m+=y(g[1],h)):m},r=b.distance=function(g,h,m,l){return Math.sqrt((m-g)*(m-g)+(l-h)*(l-h))},a=function(g,h){var m=1-h,l=m*m,f=h*h,c=g[0],d=g[1],u=g[2],n=g[3],t=g[4];g=g[5];var x=l*c+2*m*h*u+f*t;l=l*d+2*m*h*n+f*g;return[[c,d,m*c+h*u,m*d+h*n,x,l],[x,l,m*u+h*t,m*n+h*g,t,g]]},k=function(g,h){var m=1-h,l=m*m,f=l*m,c=h*h,d=c*h,u=g[0],n=g[1],t=g[2],x=g[3],A=g[4],B=g[5],F=g[6];g=g[7];var w=
f*u+3*l*h*t+3*m*c*A+d*F;f=f*n+3*l*h*x+3*m*c*B+d*g;return[[u,n,m*u+h*t,m*n+h*x,l*u+2*m*h*t+c*A,l*n+2*m*h*x+c*B,w,f],[w,f,l*t+2*m*h*A+c*F,l*x+2*m*h*B+c*g,m*A+h*F,m*B+h*g,F,g]]},e=b.splitBezierAtT=function(g,h){return 6==g.length?a(g,h):k(g,h)};return b})},"dojox/json/query":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojox","dojo/_base/array"],function(b,y,r){y.getObject("json",!0,r);r.json._slice=function(a,k,e,g){var h=a.length,m=[];e=e||h;k=0>k?Math.max(0,k+h):Math.min(h,k);for(e=0>
e?Math.max(0,e+h):Math.min(h,e);k<e;k+=g)m.push(a[k]);return m};r.json._find=function(a,k){function e(m){k&&(!0!==k||m instanceof Array?m[k]&&g.push(m[k]):g.push(m));for(var l in m){var f=m[l];k?f&&"object"==typeof f&&e(f):g.push(f)}}var g=[];if(k instanceof Array){if(1==k.length)return a[k[0]];for(var h=0;h<k.length;h++)g.push(a[k[h]])}else e(a);return g};r.json._distinctFilter=function(a,k){for(var e=[],g={},h=0,m=a.length;h<m;++h){var l=a[h];k(l,h,a)&&("object"==typeof l&&l?l.__included||(l.__included=
!0,e.push(l)):g[l+typeof l]||(g[l+typeof l]=!0,e.push(l)))}h=0;for(m=e.length;h<m;++h)e[h]&&delete e[h].__included;return e};return r.json.query=function(a,k){function e(c,d,u,n,t,x,A,B){return h[B].match(/[\*\?]/)||"~"==A?"/^"+h[B].substring(1,h[B].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+("~"==A?"$/i":"$/")+".test("+d+")":c}var g=0,h=[];a=a.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(c){g+="["==c?1:"]"==c?-1:0;return"]"==c&&0<g?
"`]":'"'==c.charAt(0)||"'"==c.charAt(0)?"`"+(h.push(c)-1):c});var m="";a.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw Error("Unsafe function call");});a=a.replace(/([^<>=]=)([^=])/g,"$1\x3d$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(c){return"."==c.charAt(0)?c:"@"==c?"$obj":(c.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+c}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(c,d,u){return(d=c.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/))?
(u="",c.match(/^\./)&&(m="dojox.json._find("+m,u=",true)"),m=(d[1].match(/=/)?"dojo.map":d[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter")+"("+m,u+",function($obj){return "+d[2]+"})"):(d=c.match(/^\[\s*([\/\\].*)\]/))?".concat().sort(function(a,b){"+d[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(n,t,x){return"var av\x3d "+x.replace(/\$obj/,"a")+",bv\x3d "+x.replace(/\$obj/,"b")+";if(av\x3ebv||bv\x3d\x3dnull){return "+("/"==t?1:-1)+";}\nif(bv\x3eav||av\x3d\x3dnull){return "+("/"==
t?-1:1)+";}\n"})+"return 0;})":(d=c.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/))?(m="dojox.json._slice("+m,","+(d[1]||0)+","+(d[2]||0)+","+(d[3]||1)+")"):c.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)?(m="dojox.json._find("+m,("."==c.charAt(1)?",'"+u+"'":c.match(/,/)?","+c:"")+")"):c}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,e).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(c,d,u,n,t,x,A,B){return e(c,n,t,x,A,B,u,d)});
a=m+("$"==a.charAt(0)?"":"$")+a.replace(/`([0-9]+|\])/g,function(c,d){return"]"==d?"]":h[d]});for(var l=eval("1\x26\x26function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj\x3d$;return "+a+"}"),f=0;f<arguments.length-1;f++)arguments[f]=arguments[f+1];return k?l.apply(this,arguments):l}})},"esri/tasks/PrintParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.tasks.PrintParameters",map:null,template:null,outSpatialReference:null,
extraParameters:null});y.setObject("tasks.PrintParameters",b,a);return b})},"esri/tasks/LegendLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(b,y,r,a){b=b(null,{declaredClass:"esri.tasks.LegendLayer",layerId:null,subLayerIds:null});y.setObject("tasks.LegendLayer",b,a);return b})},"arcgisonline/map/thumbnail/createHiddenMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array ../../esriGeowConfig esri/arcgis/utils".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f){return function(c,d,u,n){var t=y.byId("hiddenMapDiv");y.byId("hiddenMapDiv")||(t=g.create("div",{id:"hiddenMapDiv",style:{position:"absolute",left:"-1000px",top:"-1000px",width:"200px",height:"130px"}},document.body));g.create("div",{id:"hiddenMap",style:{width:"200px",height:"130px"}},t);t={item:{}};t.item.extent=d;t.itemData=c;f.arcgisUrl=l.restBaseUrl+"content/items";f.createMap(t,"hiddenMap",{mapOptions:{nav:!1},bingMapsKey:window.esriGeowConfig.self.bingKey}).then(function(x){var A=
function(q){var v=new k;q._heatmapManager?a.after(q._heatmapManager,"recalculateHeatmap",function(){v.resolve()}):v.resolve();return v},B=function(q){var v=new k;if(q.updating){"esri.layers.VectorTileLayer"===q.declaredClass&&setTimeout(function(){z&&(z.remove(),v.resolve())},1E4);var z=b(q,"update-end",function(){z.remove();v.resolve()})}else v.resolve();return v},F=function(q){var v=new k;"esri.layers.VectorTileLayer"===q.declaredClass&&setTimeout(function(){z&&(z.remove(),v.resolve())},5E3);var z=
b(q,"update-start",function(){z.remove();B(q).then(function(){v.resolve()})});return v},w=function(q){var v=new k,z=setInterval(h.hitch(this,function(C,E){C.graphics&&C.graphics.length?(clearInterval(z),v.resolve()):10<E[0]?(clearInterval(z),v.resolve()):E[0]+=1},q,[0]),500);return v},D=[];m.forEach(x.map.graphicsLayerIds,function(q){q=x.map.getLayer(q);q.renderer&&"heatmap"===q.renderer.type?D.push(A(q)):"esri.layers.WFSLayer"===q.declaredClass?D.push(w(q)):q.updating&&D.push(B(q))});m.forEach(x.map.layerIds,
function(q){q=x.map.getLayer(q);q.updating?D.push(B(q)):"esri.layers.VectorTileLayer"===q.declaredClass&&D.push(F(q))});D.length?e(D).then(function(q){setTimeout(function(){u(x.map)},1E3)}):u(x.map)},function(x){n&&n(x)})}})},"arcgisonline/map/thumbnail/getExtentWithFeatures":function(){define("dojo/Deferred esri/layers/FeatureLayer esri/layers/StreamLayer esri/SpatialReference arcgisonline/map/core/projectExtent arcgisonline/map/core/getExtentFromCenter arcgisonline/map/core/getScaleForExtent".split(" "),
function(b,y,r,a,k,e,g){return function(h,m,l){function f(){c.resolve(m)}var c=new b;if(!(h.layer instanceof y)||h.layer instanceof r)return c.resolve(m),c;var d=h.layer;h.layers&&(d=h.layers[0]);d.addPlugin("esri/plugins/FeatureLayerStatistics").then(function(){d.statisticsPlugin.getSuggestedScaleRange().then(function(u){if(u.center){var n=e(u.center,1280,u.minScale);if(0<u.relaxedMinScale)for(var t=g(n,200),x=800;t>u.relaxedMinScale&&!(n=e(u.center,x,u.minScale),t=g(n,200),x-=200,0>=x););k(n,new a({wkid:4326}),
function(A){m=[[A[0].xmin,A[0].ymin],[A[0].xmax,A[0].ymax]];f()},f)}else f()},f)},f);return c}})},"esri/layers/StreamLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/_base/lang dojo/Deferred dojo/has dojo/io-query dojo/on dojo/aspect ../kernel ../request ../graphic ./FeatureLayer ./StreamMode ./StreamTrackManager ../geometry/jsonUtils ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../renderers/SimpleRenderer ./PurgeOptions".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D){b=b([u],{declaredClass:"esri.layers.StreamLayer",_preventInit:!0,constructor:function(q,v){v=v||{};v.mode&&v.mode!==u.MODE_STREAM||(this._isStream=!0,this.currentMode=this.mode=u.MODE_STREAM,this._mode=new n(this));this.purgeOptions=new D(this,v.purgeOptions||{});this.purgeInterval=v.purgeInterval||0;this._reconnectAttempts=0;this.maxReconnectAttempts=10;this.socket=this._reconnectTimeoutId=null;this._keepLatestQueried=!1;this._keepLatestUrl=null;
this._relatedQueried=!1;this._joinField=this._relatedUrl=null;this._refreshing=!1;this._attemptReconnect=k.hitch(this,this._attemptReconnect);this._purge=k.hitch(this,this._purge);this._processServiceJson=k.hitch(this,this._processServiceJson);if(k.isObject(q)&&q.layerDefinition)this._initFeatureLayer(q,v);else{var z=this;c({url:q,content:k.mixin({f:"json"}),callbackParamName:"callback"}).then(function(C){z._processServiceJson(C,v)},function(C){z._errorHandler(C)})}},_processServiceJson:function(q,
v){var z=this;q.relatedFeatures&&q.relatedFeatures.featuresUrl&&q.relatedFeatures.joinField?(this._relatedUrl=q.relatedFeatures.featuresUrl,this.objectIdField=this._joinField=q.relatedFeatures.joinField,c({url:this._relatedUrl,content:{f:"json"},callbackParamName:"callback"}).then(function(C){C=C.fields||[];var E=r.map(q.fields,function(G){return G.name.toLowerCase()});r.forEach(C,function(G){-1===r.indexOf(E,G.name.toLowerCase())&&q.fields.push(G)});v.resourceInfo=q;z._initFeatureLayer(z._url,v)},
function(C){z.onError({error:C})})):(v.resourceInfo=q,this._initFeatureLayer(this._url,v))},_initLayer:function(q,v){this.inherited(arguments);if(q){var z;if(q.layerDefinition)this.purgeOptions=new D(this,this._params.purgeOptions||{}),this.socketUrl=this._params.socketUrl||q.layerDefinition.socketUrl||void 0;else{if(this._params.socketUrl)this.socketUrl=this._params.socketUrl;else{var C=this._getWebsocketConnectionInfo(q),E=C.urls;E&&E.length?(this._socketUrls=E,this.socketUrl=E[0],this.socketDirection=
"broadcast"===this._params.socketDirection?"broadcast":"subscribe",this.socketUrl+="/"+this.socketDirection,this._websocketToken=C.token,E.length>this.maxReconnectAttempts&&(this.maxReconnectAttempts=E.length)):(this.socketUrl=void 0,C="No web socket urls were retrieved from the Stream Service. Layer will not attempt to connect.","https:"===location.protocol&&(C+=" An insecure web socket connection cannot be made from a secure web page."),this.onError(Error(C)))}if(this._params.filter)try{this._filter=
z=this._makeFilter(this._params.filter)}catch(G){this.onError(Error("Error trying to create filter object: "+G+". Layer will not have filter applied")),this._filter=null}if(this._params.geometryDefinition||this._outFields||this._defnExpr){z=z||{};z.geometry=this._params.geometryDefinition;z.outFields=this._outFields;z.where=this._defnExpr;try{this._filter=z=this._makeFilter(z)}catch(G){this.onError(Error("Error trying to create filter object: "+G+". Layer will not have filter applied")),this._filter=
null}}}this.maximumTrackPoints=this._params.maximumTrackPoints||0===this._params.maximumTrackPoints?this._params.maximumTrackPoints:1;(this._params.refreshRate||0===this._params.refreshRate)&&this._mode&&this._mode._setRefreshRate&&this._mode._setRefreshRate(this._params.refreshRate);this._keepLatestUrl=q.keepLatestArchive?q.keepLatestArchive.featuresUrl:null;q.relatedFeatures&&q.relatedFeatures.featuresUrl&&q.relatedFeatures.joinField&&(this._relatedUrl=q.relatedFeatures.featuresUrl,this.objectIdField=
this._joinField=q.relatedFeatures.joinField);this.objectIdField||this._makeObjectIdField();this._map&&this.socketUrl&&!this._connected&&this.connect()}},_isWebGLCompatible:function(){return!1},_setMap:function(q){var v=this.inherited(arguments),z=this._getRenderer();this.timeInfo&&(this._trackIdField||z&&(z.latestObservationRenderer||z.trackRenderer))&&(this._trackManager=new t(this),this._trackManager.initialize(q));this.socketUrl&&!this._connected&&this._map&&this.connect();return v},_unsetMap:function(q,
v){r.forEach(this._connects,y.disconnect);(this._connected||this._reconnecting||this.socket)&&this.disconnect();this._togglePurgeT();this.inherited(arguments);this._map=null},_suspend:function(){this._togglePurgeT();this.inherited(arguments)},_resume:function(){this.inherited(arguments);this._togglePurgeT(!0)},clear:function(){try{this._mode&&this._mode._clearDrawBuffer&&this._mode._clearDrawBuffer(),this._mode&&this._mode._clearTimeBin&&this._mode._clearTimeBin(),this._mode&&this._mode._clearFeatureMap&&
this._mode._clearFeatureMap(),this._trackManager&&this._trackManager.clearTracks()}catch(q){}this.inherited(arguments);this._trackManager&&this._trackManager.createTracklineContainer()},redraw:function(){this._mode&&this._mode._flushDrawBuffer&&this._mode._flushDrawBuffer();this.inherited(arguments)},setDefinitionExpression:function(q){this.setFilter({where:q})},getDefinitionExpression:function(){if(this._filter)var q=this._filter.where;return q},destroy:function(){this.disconnect();this.inherited(arguments)},
onResume:function(q){this.inherited(arguments)},setGeometryDefinition:function(q){this.setFilter({geometry:q})},getGeometryDefinition:function(){if(this._filter)var q=this._filter.geometry;return q},connect:function(q){var v=new e,z={},C=this._filter,E,G,H=this.socketUrl,K;try{this._connected||this._connecting?v.reject(Error("Cannot start new connection process. Layer is connecting.")):(this._connecting=!0,this._getRelatedFeatures().then(function(){return this._getKeepLatestFeatures()}.bind(this)).then(function(){this._websocketToken&&
(z.token=this._websocketToken);this._map&&this._map.spatialReference&&this.spatialReference&&this._map.spatialReference.wkid!==this.spatialReference.wkid&&(z.outSR=this._map.spatialReference.wkid);if(C)for(G in C)null!==C[G]&&(E="geometry"===G?JSON.stringify(C[G]):C[G],z[G]=E);H+="?"+h.objectToQuery(z);K=this._createConnection(H,q);v.resolve(K)}.bind(this)).otherwise(function(I){v.reject(I)}))}catch(I){q&&(q(I,!1),v.reject(I)),this.onConnectionError({error:I})}return v.promise},disconnect:function(q){var v=
this._refreshing?"Disconnecting as part of layer refresh cycle":"Connection closed from client",z=this._refreshing?!0:!1;this._reconnectTimeoutId&&clearTimeout(this._reconnectTimeoutId);this._refreshing=this._reconnecting=this._connecting=this._connected=!1;this.socket&&this.socket.close();this.onDisconnect({willReconnect:z,message:v});q&&q(null,!0)},setFilter:function(q){if(this._collection)return this.onError("Filter can only be set when the source of the layer is a Stream Service"),!1;try{if(void 0!==
q.outFields){var v=Error("Outfields property cannot be changed after layer is created");this.onFilterChange({filter:this.getFilter(),error:v});return!1}var z=this._makeFilter(q)}catch(C){return v=Error(C),this.onFilterChange({filter:this.getFilter(),error:v}),!1}if(this.socket)q={filter:z},this.socket.send(JSON.stringify(q));else m.once(this,"connect",function(C){this.setFilter(z)});return!0},getFilter:function(){var q=this._filter,v={},z=["geometry","outFields","where"];q&&r.forEach(z,function(C){var E=
q[C];E&&("geometry"===C?E=x.fromJson(E):"outFields"===C&&(E=E.split(",")),v[C]=E)});return v},setMaximumTrackPoints:function(q){if(!q&&0!==q)return!1;this.maximumTrackPoints=q;this._mode.propertyChangeHandler(3)},getUniqueValues:function(q){var v={},z=[];var C=this._getField(q,!0);if(!C)return z;q=C.name;r.forEach(this.graphics||[],function(E){E=(E.attributes||{})[q];void 0===E||v[E]||(v[E]=1,z.push(E))});z.sort(function(E,G){return E<G?-1:E>G?1:0});return z},getLatestObservations:function(){var q=
[];return q=this._trackManager?this._trackManager.getLatestObservations():this.graphics},setPurgeInterval:function(q){var v=this.purgeInterval;this.purgeInterval=q;this._togglePurgeT();q&&this._togglePurgeT(!0);if(v!==q)this.onPurgeIntervalChange();return this},_togglePurgeT:function(q){if(q&&this.purgeInterval){var v=this;clearTimeout(this._purgeT);this._mode&&this._mode._flushDrawBuffer&&(this._purgeT=setTimeout(function(){v.updating||v.suspended||(v._mode._flushDrawBuffer(),v._togglePurgeT(!0))},
6E4*this.purgeInterval))}else this._purgeT&&(clearTimeout(this._purgeT),this._purgeT=null)},onMessage:function(){},onConnect:function(){},onDisconnect:function(){},onFilterChange:function(){},onAttemptReconnect:function(){},onConnectionError:function(){},onPurgeIntervalChange:function(){},_createConnection:function(q,v){var z=this,C=new WebSocket(q);C.onopen=function(){z.socket=C;z._connected=!0;z._connecting=!1;z._reconnecting=!1;z._reconnectAttempts=0;z._bind();z.onConnect();v&&v(null,!0)};C.onclose=
function(E){var G=!0,H=z._connected,K=null;if(z._connected||z._reconnecting){if(E.code){var I="Connection failed: ";if(1001===E.code)I+=E.reason||"Service is going away.",G=!1;else if(4400===E.code)I+=E.reason||"Invalid url parameters. Check filter properties.",G=!1;else if(4404===E.code)I+="Service not found",G=!1;else if(4401===E.code||4403===E.code)I+="Not authorized",G=!1}G&&(z._reconnectAttempts+=1,z._reconnectAttempts>z.maxReconnectAttempts&&(I="Maximum reconnect attempts exceeded",G=!1,H=!0));
z._connected=!1;H&&(I&&(K=Error(I)),z.onDisconnect({error:K,willReconnect:G}));G?z._attemptReconnect():z.socket=null}else z.socket||(K=Error("Could not make connection to service"),z.onConnectionError({error:K})),z.socket=null,z._connected=!1};C.onerror=function(E){};return C},_getKeepLatestFeatures:function(){var q=new e;this._map&&this._keepLatestUrl&&!this._keepLatestQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._keepLatestUrl).then(function(){q.resolve()}.bind(this)).otherwise(function(v){q.reject(v)}).always(function(){this._keepLatestQueried=
!0}.bind(this)):q.resolve();return q.promise},_getRelatedFeatures:function(){var q=new e;this._map&&this._relatedUrl&&!this._relatedQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._relatedUrl).then(function(){q.resolve()}.bind(this)).otherwise(function(v){q.reject(v)}).always(function(){this._relatedQueried=!0}.bind(this)):q.resolve();return q.promise},_purge:function(){var q,v=[];if(this.purgeOptions.displayCount&&this.graphics.length>this.purgeOptions.displayCount)for(q=0;q<this.graphics.length-
this.purgeOptions.displayCount;q++){var z=this.graphics[q];v.push(z)}0<v.length&&(this._mode._removeFeatures(v),this._trackManager&&this._trackManager.removeFeatures(v))},_bind:function(){var q=this;this.socket.onmessage=function(v){q._onMessage(JSON.parse(v.data))}},_onMessage:function(q){var v=this;this.onMessage(q);var z={create:function(C){v._create(C)},update:function(C){v._update(C)},"delete":function(C){v._delete(C)}};if(q.type)z[q.type](q.feature);else q.hasOwnProperty("filter")?v._handleFilterMessage(q):
this._create(q)},_create:function(q){function v(E){if(!z._featureHasOID(E,C)){if(!E.geometry)return!1;E.attributes=E.attributes||{};E.attributes[C]=z._nextId++}E=E.declaredClass?E:new d(E);z._mode.drawFeature(E)}var z=this,C=z.objectIdField;q.length?q.forEach(function(E){E&&v(E)}):q&&v(q)},_delete:function(q){var v=this,z=q[v.objectIdField]||q.attributes[v.objectIdField],C=!1;this.graphics.forEach(function(E){E.attributes[v.objectIdField]==z&&(C=E)});C&&this.remove(C)},_update:function(q){var v=this,
z=!1;this.graphics.forEach(function(C){C.attributes[v.objectIdField]==q.attributes[v.objectIdField]&&(z=C)});z&&(q.attributes&&z.setAttributes(q.attributes),q.geometry&&z.setGeometry(x.fromJson(q.geometry)))},_makeFilter:function(q){var v=null;q=q||{};if(void 0!==q.geometry)if(v=v||{},null===q.geometry)v.geometry=null;else{var z="string"===typeof q.geometry?x.fromJson(JSON.parse(q.geometry)):q.geometry.declaredClass?q.geometry:x.fromJson(q.geometry);if(!z||"point"===z.type)throw"Query object contains invalid geometry";
"extent"!==z.type&&(z=z.getExtent());if(!z||0===z.getHeight()&&0===z.getWidth())throw"Invalid filter geometry: Extent cannot have a height and width of 0";v.spatialRel="esriSpatialRelIntersects";v.geometryType="esriGeometryEnvelope";v.geometry=z.toJson()}void 0!==q.where&&(v=v||{},v.where=q.where);if(void 0!==q.outFields&&(v=v||{},q="string"===typeof q.outFields?"*"===q.outFields?null:q.outFields.replace(/,\s+/g,",").split(","):null===q.outFields?null:q.outFields,q=this._makeOutFields(q))){if(q.errors&&
0<q.errors.length)throw"Invalid filter outFields. "+q.errors.join(",");v.outFields=q.fields?q.fields.join(","):null}return v},_makeOutFields:function(q){var v=this,z=[],C=[],E={fields:null};if(!q||0===q.length)return E;r.forEach(q,function(G){if("*"===G)return E;var H=v._getField(G,!0);H?z.push(H.name):C.push("Field named "+G+" not found in schema.")});q=v._getOutFields();r.forEach(q,function(G){v._getField(G)&&-1===r.indexOf(z,G)&&z.push(G)});E.fields=z;E.errors=C;return E},_handleFilterMessage:function(q){q.error?
(q=Error(q.error.join(",")),this.onFilterChange({filter:this.getFilter(),error:q})):(q=q.filter,q.geometry&&"string"===typeof q.geometry&&(q.geometry=JSON.parse(q.geometry)),this._filter=q,this.onFilterChange({filter:this.getFilter()}))},_getWebsocketConnectionInfo:function(q){var v={urls:[]},z,C=[],E=[],G;q.streamUrls&&r.forEach(q.streamUrls,function(I){"ws"===I.transport&&(z=I.urls,v.token=I.token)});if(!z)return v;r.forEach(z,function(I){0===I.lastIndexOf("wss",0)?E.push(I):C.push(I)});q="https:"===
location.protocol||0===this.url.lastIndexOf("https:",0)?E:0===C.length?E:C;if(1<q.length)for(G=0;G<q.length-1;G++){var H=G+Math.floor(Math.random()*(q.length-G));var K=q[H];q[H]=q[G];q[G]=K}v.urls=q;return v},_attemptReconnect:function(){var q=this;this._reconnectTimeoutId=null;q._connected=!1;if(!q._socketUrls)return!1;if(!q._collection&&!q._reconnecting&&q.socket&&q.credential)return q._reconnecting=!0,q._getServiceConnectionMetadata(q._attemptReconnect),!1;q._reconnecting=!0;q.socket=null;if(q._reconnectAttempts>
q.maxReconnectAttempts)return q._reconnecting=!1;q.socketUrl=q._socketUrls[q._reconnectAttempts>q._socketUrls.length-1?q._reconnectAttempts%q._socketUrls.length:q._reconnectAttempts];q.socketUrl+="/"+q.socketDirection;var v=q._randomIntFromInterval(0,1E3);this._reconnectTimeoutId=setTimeout(function(){q.onAttemptReconnect({count:q._reconnectAttempts,url:q.socketUrl});q.connect()},1E3*q._reconnectAttempts+v)},_getServiceConnectionMetadata:function(q){var v=this,z=v._url.path;q="function"===typeof q?
q:null;c({url:z,content:k.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(function(C){C=v._getWebsocketConnectionInfo(C);v._websocketToken=C.token;q&&q()},function(C){v.onError(Error(C))})},_setDefaultRenderer:function(){var q=this.geometryType,v=new a([5,112,176,.8]),z=new a([255,255,255]);z=new B(B.STYLE_SOLID,z,1);if("esriGeometryPoint"===q||"esriGeometryMultipoint"===q)var C=new F(F.STYLE_CIRCLE,10,z,v);else if("esriGeometryPolyline"===q)C=new B(B.STYLE_SOLID,v,2);else if("esriGeometryPolygon"===
q||"esriGeometryEnvelope"===q)v=new a([5,112,176,.2]),z=new a([5,112,176,.8]),z=new B(B.STYLE_SOLID,z,1),C=new A(A.STYLE_SOLID,z,v);C&&this.setRenderer(new w(C))},_makeObjectIdField:function(){var q=1,v,z=[];if(!this.objectIdField){var C=this.fields.length;for(v=0;v<C;v++)z.push(this.fields[v].name.toLowerCase());for(;-1!==r.indexOf(z,"objectid_"+q);)q+=1;this.objectIdField="objectid_"+q;this.fields.push({name:"objectid_"+q,type:"esriFieldTypeOID",alias:"objectid_"+q,nullable:!1})}},_featureHasOID:function(q,
v){return q.attributes&&(q.attributes[v]||0===q.attributes[v])},_randomIntFromInterval:function(q,v){return Math.floor(Math.random()*(v-q+1)+q)}});k.setObject("layers.StreamLayer",b,f);return b})},"esri/layers/StreamTrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Point ../geometry/Polyline ./TrackManager".split(" "),function(b,y,r,a,k,e,g,h,m){b=b([m],{declaredClass:"esri.layers._StreamTrackManager",constructor:function(l){this.inherited(arguments);
var f=l.getMap().spatialReference;this.isWebMercator=f.isWebMercator();this.canWrap=f._isWrappable();this.wrapThreshold=this.isWebMercator?2.0037508342788905E7:180},initialize:function(l){this.inherited(arguments)},addFeatures:function(l,f){function c(F,w){var D,q;t[F]||(t[F]=[]);F=t[F];if(0<B){w.length>B&&w.splice(0,w.length-B);var v=w.length+F.length;v>B&&(D=F.splice(0,v-B))}v=w.length;for(q=0;q<v;q+=1)F.push(w[q]);return{deletes:D,adds:w}}var d={},u={},n;if(f)return this.inherited(arguments),d;
var t=this.trackMap;var x=this.layer;var A=x._trackIdField;var B=x.maximumTrackPoints||0;r.forEach(l,function(F){var w=F.attributes[A];F.visible&&(u[w]||(u[w]=[]),u[w].push(F))});for(n in u)u.hasOwnProperty(n)&&(x=c(n,u[n]),d[n]=x);return d},removeFeatures:function(l){var f=[],c=this.layer.objectIdField,d=this.layer._trackIdField;l&&(r.forEach(l,function(u){var n;var t=u.attributes[d];var x=u.attributes[c];if(n=this.trackMap[t])for(u=0;u<n.length;u+=1){var A=n[u];if(A.attributes[c]===x){this.trackMap[t].splice(u,
1);-1===r.indexOf(t)&&f.push(t);break}}},this),0<l.length&&this.refreshTracks(f))},drawTracks:function(l){function f(A){var B=n[A],F=B&&1<B.length,w=c.trackLineMap[A];w&&!F&&(d.remove(w),delete c.trackLineMap[A],w=null);if(!F)return!1;F=[];for(var D=[],q,v=B.length,z=0;z<v;z++)if(q=B[z].geometry){q=q.normalize();var C=q.x,E=0,G=!1;H&&c.canWrap&&(E=C-H.x,Math.abs(E)>c.wrapThreshold&&(G=!0));G?(D.push([c.getWrappedX(C),q.y]),F.push(D.slice(0)),D=[[C,q.y]]):D.push([C,q.y]);var H=new g(C,q.y,t)}1<D.length&&
F.push(D);B={};B[x]=A;if(F.length)if(w){for(var K=w.geometry;K.paths.length;)K.removePath(K.paths.length-1);F.forEach(function(I){K.addPath(I)});w.setGeometry(K)}else w=new e(new h({paths:F,spatialReference:t}),null,B),d.add(w),c.trackLineMap[A]=w}var c=this,d=this.container,u;if(d){var n=this.trackMap;var t=this.map.spatialReference;var x=this.layer._trackIdField;if(l)r.forEach(l,function(A){f(A)});else for(u in n)n.hasOwnProperty(u)&&f(u)}},refreshTracks:function(l){function f(n){var t;n=c[n]||
[];var x=n.length;for(t=0;t<x;t++)d._repaint(n[t],null,!0)}var c=this.trackMap,d=this.layer,u;this.drawTracks(l);if(l)r.forEach(l,function(n){f(n)});else for(u in c)c.hasOwnProperty(u)&&f(u)},getLatestObservations:function(){var l,f=this.trackMap,c=[];for(l in f)if(f.hasOwnProperty(l)){var d=f[l];c.push(d[d.length-1])}return c},destroy:function(){this.inherited(arguments);this.trackLineMap=null},getWrappedX:function(l){var f=this.isWebMercator,c=f?2.0037508342788905E7:180;f=f?-2.0037508342788905E7:
-180;return(0<l?f:c)-((0<l?c:f)-l)}});y.setObject("layers._StreamTrackManager",b,k);return b})},"esri/layers/PurgeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Stateful","dojo/has","../kernel"],function(b,y,r,a,k){b=b([r],{declaredClass:"esri.layers.PurgeOptions",constructor:function(e,g){this.parent=e;for(var h in g)this[h]=g[h]},_displayCountSetter:function(e){this.displayCount=e;this.parent.refresh()}});y.setObject("layers.PurgeOptions",b,k);return b})},"arcgisonline/map/core/projectExtent":function(){define(["arcgisonline/map/utils/contains",
"esri/geometry/Extent","esri/geometry/webMercatorUtils","esri/geometry/Polygon","esri/tasks/GeometryService"],function(b,y,r,a,k){function e(g,h){if(g&&h.xmin>h.xmax){var m=g.valid[1]-h.xmin,l=h.xmax-g.valid[0];m>l?h.xmax=g.valid[1]+l:h.xmin=g.valid[0]-m}}return function(g,h,m,l,f,c){var d=[102113,102100,3857],u=g.spatialReference.wkid;if(u===h.wkid)return m([g],null);if(4326==u&&b(d,h.wkid))return g.ymin=Math.max(g.ymin,-89.99),g.ymax=Math.min(g.ymax,89.99),g=r.geographicToWebMercator(g),f=g.spatialReference._getInfo(),
e(f,g),g.spatialReference.wkid=h.wkid,m([g],null);if(b(d,u)&&4326==h.wkid)return g=r.webMercatorToGeographic(g),f=g.spatialReference._getInfo(),e(f,g),m([g],null);c||(c=new k(window.esriGeowConfig.self.helperServices.geometry.url));if(f&&f.wrapAround180&&"extent"===g.type){var n=g;g=a.fromExtent(g)}c.project([g],h,function(t,x){if(!(t&&0<t.length&&t[0]&&"extent"==t[0].type)||isNaN(t[0].xmin)||isNaN(t[0].ymin)||isNaN(t[0].xmax)||isNaN(t[0].ymax)){if(t&&0<t.length&&t[0]&&"point"==t[0].type&&!isNaN(t[0].x)&&
!isNaN(t[0].y))return m(t,x);if(n&&"polygon"===t[0].type){if(1===t[0].rings.length)t[0]=new y(t[0].getExtent());else{var A=(new a(t[0].spatialReference.toJson())).addRing(t[0].rings[0]).getExtent(),B=(new a(t[0].spatialReference.toJson())).addRing(t[0].rings[1]).getExtent();t[0]=B;t[0].xmin=B.xmin-A.getWidth();t[0].ymin=Math.min(B.ymin,A.ymin);t[0].ymax=Math.max(B.ymax,A.ymax)}return m(t,x)}if(l)return l()}else return m(t,x)},l)}})},"arcgisonline/map/utils/contains":function(){define([],function(){return function(b,
y){for(var r=b.length;r--;)if(b[r]===y)return!0;return!1}})},"arcgisonline/map/core/getExtentFromCenter":function(){define(["esri/geometry/Extent","arcgisonline/map/core/getExtentForScale"],function(b,y){return function(r,a,k){r=new b(r.x-1,r.y-.5,r.x+1,r.y+.5,r.spatialReference);return y(r,a,k)}})},"arcgisonline/map/core/getExtentForScale":function(){define(["esri/config","esri/WKIDUnitConversion"],function(b,y){return function(r,a,k){var e=20015077/180,g=r.spatialReference;if(g){var h=g.wkid;var m=
g.wkt}g=null;h?g=y.values[y[h]]:m&&-1!==m.search(/^PROJCS/i)&&(h=/UNIT\[([^\]]+)\]\]$/i.exec(m))&&h[1]&&(g=parseFloat(h[1].split(",")[1]));return r.expand(k*a/(39.37*(g||e)*b.defaults.screenDPI)/r.getWidth())}})},"arcgisonline/map/thumbnail/getItemData":function(){define(["dojo/Deferred","dojo/_base/lang","arcgisonline/sharing/util"],function(b,y,r){return function(a,k,e){r.request({url:window.esriGeowConfig.restBaseUrl+"content/items/"+a+"/data"},{disableIdentityLookup:!0}).then(y.hitch(this,function(g){if(g&&
(g.wfsInfo||g.wmtsInfo))var h=g;else if(g&&g.layers)h=g.layers;else if(e){e();return}k&&k(h)}),y.hitch(this,function(g){e&&e(g)}))}})},"arcgisonline/map/layer/getServiceInfo":function(){define("dojo/_base/lang dojo/_base/array dojo/topic dojo/Deferred esri/kernel esri/request esri/SpatialReference esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/core/projectExtent arcgisonline/sharing/dijit/dialog/GeneralDlg".split(" "),function(b,y,r,a,k,e,g,h,m,l,f){var c=window.esriGeowConfig;return function A(u,
n,t,x){var B=function(v,z){clearTimeout(D);r.publish("ServiceAnswerReceived",[]);var C=v.fullExtent;C||(C=v.extent);!C||C.spatialReference&&(C.spatialReference.wkid||C.spatialReference.wkt)||(v.fullExtent=null,C=v.extent=null);(c.allSSL||"https:"==location.protocol)&&v.tileServers&&v.tileServers.length&&y.forEach(v.tileServers,function(E,G){if(m.isHostedService(E)||m.supportsHttps(E))v.tileServers[G]=E.replace("http:","https:")});C?t&&t(v,u,z):v.spatialReference&&(v.spatialReference.wkid||v.spatialReference.wkt)?
(C=new h(-180,-90,180,90,new g({wkid:4326})),l(C,new g(v.spatialReference),b.hitch(this,function(E){v.fullExtent=E[0];v.extent=E[0];t&&t(v,u,z)}),b.hitch(this,function(E,G){x&&(E.details=[],E.details.push("Missing extent and could not project GCS into service spatial reference."),x(E,G))}))):t&&t(v,u,z)},F=function(v,z){clearTimeout(D);r.publish("ServiceAnswerReceived",[]);x&&x(v,z)},w=!1,D=setTimeout(function(){clearTimeout(D);D=null;var v=u.toLowerCase();if(-1===v.indexOf("/arcgis/rest/")&&-1<v.indexOf("/arcgis/"))return u=
u.replace("/arcgis/","/arcgis/rest/").replace("/ArcGIS/","/ArcGIS/rest/"),A(u,n,t,x);k.id.isBusy()?w=!0:n?(f.prototype.statics.getInstance().show({title:k.i18nBundle.generalDlg.waitDlgTitle,message:n}),D=setTimeout(function(){clearTimeout(D);D=null;k.id.isBusy()?w=!0:F("Request timed out.",{args:{url:u}})},45E3)):F("Request timed out.",{args:{url:u}})},1E4),q=u+(-1<u.indexOf("?")?"\x26f\x3djson":"?f\x3djson");e({url:q,callbackParamName:"callback",load:function(v,z){if(D||w)clearTimeout(D),v?v.error&&
""!==v.error?F(v.error,z):B(v,z):F("Request error.",{args:{url:u}})},error:function(v){if(D||w)clearTimeout(D),v&&v.message&&-1<v.message.indexOf("Aborted the Sign-In process")?r.publish("ServiceAnswerReceived",[]):F(v,{args:{url:u}})}})}})},"arcgisonline/pages/portal/CommentsUtil":function(){define("require exports tslib ./Comment ../../sharing/util dojo/promise/all dojo/Deferred dojo/_base/lang".split(" "),function(b,y,r,a,k,e,g,h){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);
g=r.__importDefault(g);h=r.__importDefault(h);return function(){function m(){}m.fetchComments=function(l,f,c){var d=this,u=new g.default,n=c.item,t=(null===n||void 0===n?void 0:n.itemUrl)+"/comments",x,A=(null===c||void 0===c?void 0:c.parentId)||"none";l=l||(null===c||void 0===c?void 0:c.nextStart)||c.start;var B=c.sortField,F=c.sortOrder;f=f||c.overrideNum||c.num;var w=c.comments;if(-1===l)u.resolve(w);else{var D={parentId:A,sortField:B,sortOrder:F,start:l,num:f};k.default.request({url:t,content:D}).then(function(q){return d._toPortalComments(n,
q)}).then(function(q){x=h.default.mixin(c,q,{num:c.num,comments:[].concat(c.comments||[]).concat(q.comments)});D=q;return D.comments}).then(function(q){return d._getOwnerProfiles(q)}).then(function(q){D.comments=D.comments.map(function(v,z){v.ownerProfile=q[z];return v});u.resolve({commentsInfo:x,comments:x.comments})})}return u};m._toPortalComments=function(l,f){var c=new g.default,d=l.portal;f.comments=f.comments.map(function(u){return new a.default(r.__assign(r.__assign({},u),{item:l,portal:d}))});
c.resolve(f);return c};m._getOwnerProfiles=function(l){l=l.map(function(f){return f.portal.getUserProfile(f.owner)});return e.default(l)};return m}()})},"arcgisonline/pages/portal/Comment":function(){define("require exports tslib ../pageUtil ../../tsutils/declareDecorator dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),function(b,y,r,a,k,e,g,h,m){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);
return function(){function l(f){this.owner=f.owner||"deletedUser";this.repliesInfo={parentId:this.id,sortField:"created",sortOrder:"desc",start:0,num:100,comments:[],item:this.item};this.comment=a.default.linkify(unescape(f.comment))}l.prototype.postscript=function(){};l.prototype.getReplies=function(f,c){var d=this,u=new e.default,n=window.require("arcgisonline/pages/portal/CommentsUtil");this.numReplies?n.fetchComments(f,c,this.repliesInfo).then(function(t){d.repliesInfo=g.default.mixin(d.repliesInfo,
t.commentsInfo);d.replies=d.repliesInfo.comments;u.resolve(d.replies)}):u.resolve([]);return u};return l=r.__decorate([k.default(m.default.PortalComment,h.default)],l)}()})},"arcgisonline/pages/item/_Info":function(){define("require exports tslib ../../sharing/util ../utils/arrays dojo/i18n!../../nls/arcgisonline ../utils/url".split(" "),function(b,y,r,a,k,e,g){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);return{Unknown:{privileges:[],openIn:[],types:[],attributes:[],classification:"file"},
"Feature Service":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:"is-layer is-2d is-scene-2 is-feature is-data is-desktopPro".split(" "),classification:"layer",hasServiceInfo:!0},"Map Service":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-tile","is-desktopPro"],classification:"layer",hasServiceInfo:!0},"Map Image Layer":{defaultOpenText:e.default.itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-desktopPro","is-service"],classification:"layer",hasServiceInfo:!0},"Image Service":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-service","is-scene-2","is-imageManagement"],classification:"layer",hasServiceInfo:!0},"Scene Service":{defaultOpenText:e.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",
openIn:["sceneViewer"],types:["is-3d","is-service","is-pro"],classification:"layer",hasServiceInfo:!0},Table:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-table","is-data","is-desktopPro"],classification:"layer",hasServiceInfo:!0},"Feature Collection":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-data","is-publish","is-views","is-pro"],classification:"layer"},
"Route Layer":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-publish","is-views"],classification:"layer"},"Geocoding Service":{types:["is-service"],classification:"layer"},"Geoenrichment Service":{types:["is-service"],classification:"layer"},"Network Analysis Service":{types:["is-service"],classification:"layer"},"Globe Service":{types:["is-desktop"],classification:"layer",openLyr:!0},"Geoprocessing Service":{types:["is-desktop",
"is-service"],classification:"layer"},Tool:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-desktop","is-service","is-tool"],classification:"layer",hasServiceInfo:!0},"Geodata Service":{types:["is-service"],classification:"layer"},"Geometry Service":{classification:"layer"},"Workflow Manager Service":{types:["is-service"],classification:"layer"},"Stream Service":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer"],types:["is-2d","is-service","is-streamLayer","is-pro"],classification:"layer",hasServiceInfo:!0},Feed:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","iotFeed"],types:["is-2d","is-service","is-feedLayer","is-pro"],classification:"layer",hasServiceInfo:!0},"Big Data Analytic":{defaultOpenText:e.default.itemLinks.openAnalyticsIoT,defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-bigDataAnalytic"],classification:"app"},"Real Time Analytic":{defaultOpenText:e.default.itemLinks.openAnalyticsIoT,
defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-realTimeAnalytic"],classification:"app"},WMS:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},WFS:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-desktopPro"],classification:"layer"},WMTS:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},KML:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-download","is-desktopPro"],classification:"layer"},"Elevation Layer":{defaultOpenText:e.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"layer",hasServiceInfo:!0},"Vector Tile Service":{defaultOpenText:e.default.itemLinks.openMapViewer,
defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer","viewStyle","downloadStyle"],types:["is-vectorTile","is-service","is-scene-2","is-pro"],classification:"layer",hasServiceInfo:!0,hasViewStyle:!0},"Relational Database Connection":{classification:"layer"},Markup:{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-views"],classification:"layer"},"Web Map":{defaultOpenText:e.default.itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer","createPresentation","openPresentation"],types:["is-map","is-desktopPro"],classification:"map",openPkg:!0},"Web Scene":{defaultOpenText:e.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d","is-scene","is-pro"],classification:"map"},"3D Web Scene":{defaultOpenText:e.default.itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"map"},"Web Mapping Application":{defaultOpenText:e.default.itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["appViewer","configureApp","downloadAttachment"],types:["is-app","is-web"],classification:"app",hasItemData:!0},"Hub Initiative":{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Initiative":{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Site Application":{defaultOpenText:e.default.itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Application":{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Page":{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Event":{defaultOpenText:e.default.itemLinks.viewInHub,
defaultOpenIcon:"launch",openIn:["hubEventViewer"],types:["is-hubEvent"],classification:"app"},"Site Page":{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},Application:{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer"],classification:"app",types:["is-app"]},"Mobile Application":{defaultOpenText:e.default.itemLinks.getApp,defaultOpenIcon:"launch",openIn:["appViewer",
"downloadAttachment"],types:["is-mobile-app","is-mobile"],classification:"app"},"Desktop Application":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",openIn:["downloadAttachment"],types:["is-file","is-update","is-platform"],classification:"app"},"Native Application":{classification:"app"},"Workforce Project":{defaultOpenText:e.default.itemLinks.openWorkforce,defaultOpenIcon:"launch",openIn:["workforceViewer"],types:["is-workforceProject"],classification:"app",hasItemData:!0},
Workflow:{defaultOpenText:e.default.itemLinks.openWorkflow,defaultOpenIcon:"launch",openIn:["workflowViewer"],types:["is-workflow","is-pro"],classification:"app",hasItemData:!0},Form:{defaultOpenText:e.default.itemLinks.openSurvey123,defaultOpenIcon:"launch",openIn:["surveyViewer"],classification:"app"},"Insights Workbook":{defaultOpenText:e.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights"],classification:"app"},"Insights Page":{defaultOpenText:e.default.itemLinks.openInsights,
defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsPage"],classification:"app"},"Insights Model":{defaultOpenText:e.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsModel"],classification:"app"},"Insights Theme":{defaultOpenText:e.default.itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsTheme"],classification:"app"},"Ortho Mapping Project":{defaultOpenText:e.default.itemLinks.openOrthoMaker,
defaultOpenIcon:"launch",openIn:["orthoMaker"],types:["is-orthoMaker"],classification:"app"},Mission:{defaultOpenText:e.default.itemLinks.openMission,defaultOpenIcon:"launch",openIn:["missionViewer"],types:["is-mission"],classification:"app"},"Hub Initiative Template":{defaultOpenText:e.default.itemLinks.openHubInitiative,defaultOpenIcon:"launch",openIn:["hubInitiative"],types:["is-hubInitiative"],classification:"app"},"QuickCapture Project":{types:["is-quickCaptureProject"],classification:"app"},
Solution:{classification:"solution",hasItemData:!0},"GeoAI Studio Project":{defaultOpenText:e.default.itemLinks.openGeoAIStudio,defaultOpenIcon:"launch",openIn:["geoAIStudioUrlViewer"],types:["is-geoAIStudioProject"],classification:"app"},StoryMap:{classification:"app",types:["is-storymap"]},Notebook:{defaultOpenText:e.default.itemLinks.openNotebook,defaultOpenIcon:"launch",openIn:["notebookViewer"],types:["is-notebook","is-download"],classification:"notebook"},"Data Store":{types:["is-data-store"],
classification:"data store"},"Excalibur Imagery Project":{defaultOpenText:e.default.itemLinks.openExcalibur,defaultOpenIcon:"launch",openIn:["excaliburViewer"],types:["is-excaliburProject"],classification:"app"},"Urban Model":{defaultOpenText:e.default.itemLinks.openUrbanModel,defaultOpenIcon:"launch",openIn:["urbanViewer"],types:["is-urbanModel"],classification:"app"},"Web Experience":{defaultOpenText:e.default.itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperience"],
classification:"app"},"Web Experience Template":{defaultOpenText:e.default.itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperienceTemplate"],classification:"app"},CSV:{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature","is-documentUrl"],classification:"file"},Shapefile:{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish",
"is-feature"],classification:"file"},"File Geodatabase":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},GeoJSON:{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},"Service Definition":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish",
"is-feature","is-tile"],classification:"file"},"Tile Package":{defaultOpenText:e.default.itemLinks.openArcMap,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-tile","is-desktopPro"],classification:"file",openPkg:!0},"Compact Tile Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-tile","is-compact"],classification:"file",openPkg:!0},"Scene Layer Package":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-scene-package"],classification:"file"},"Vector Tile Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-vector-tile","is-desktop"],classification:"file",openPkg:!0},"Deep Learning Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file",openPkg:!0},"Image Collection":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-image-collection"],classification:"file"},Layout:{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file",openData:!0},"Desktop Add In":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Add In":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GML:{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Explorer Add In":{types:["is-explorer","is-update"],classification:"file"},"Operations Dashboard Add In":{types:["is-views"],classification:"file",isRetired:!0},"Survey123 Add In":{types:["is-file","is-update"],classification:"file"},"Operations Dashboard Extension":{types:["is-views"],classification:"file",
isRetired:!0},"AppBuilder Extension":{types:["is-views"],classification:"file"},"AppBuilder Widget Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Viewer Add In":{types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Configuration":{types:["is-file","is-update"],classification:"file"},"Globe Document":{types:["is-desktop","is-update"],classification:"file",openData:!0},
"Map Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Pro Map":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Published Map":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Scene Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"CityEngine Web Scene":{defaultOpenText:e.default.itemLinks.viewApp,defaultOpenIcon:"launch",
openIn:["cityEngineViewer"],types:["is-city-engine","is-download","is-update"],classification:"file"},"Desktop Style":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Geoprocessing Sample":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Task File":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update",
"is-pro"],classification:"file"},Layer:{defaultOpenText:e.default.itemLinks.openArcMap,types:["is-update","is-desktopPro"],classification:"file",openData:!0},"Pro Layer":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Pro Report":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},Style:{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Operation View":{types:["is-operationView","is-views"],isRetired:!0,classification:"file"},Dashboard:{defaultOpenText:e.default.itemLinks.dashboardView,openIn:["dashboard"],types:["is-dashboard","is-views"],classification:"file"},"Geoprocessing Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Layer Package":{defaultOpenText:e.default.itemLinks.openArcMap,
defaultOpenIcon:"download-to",types:["is-file","is-desktopPro","is-update"],classification:"file",openData:!0},"Pro Layer Package":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-pro","is-update"],classification:"file"},"Locator Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Map Package":{defaultOpenText:e.default.itemLinks.openArcMap,defaultOpenIcon:"download-to",
types:["is-desktopPro","is-file","is-download","is-update"],classification:"file",openData:!0},"Pro Map Package":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Mobile Basemap Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Mobile Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update"],classification:"file"},"Toolbox Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"ArcPad Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Basemap Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},
"Mobile Map Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Mobile Scene Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Project Package":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Rule Package":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Window Mobile Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Workflow Manager Package":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GeoPackage:{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],
classification:"file"},"Desktop Application Template":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Native Application Template":{classification:"file"},"Native Application Installer":{types:["is-file","is-update"],classification:"file"},"Application Configuration":{classification:"file"},"Viewer Configuration":{classification:"file"},"Windows Viewer Configuration":{classification:"file"},"Map Template":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Project Template":{defaultOpenText:e.default.itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Raster function template":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-download"],classification:"file"},"Feature Collection Template":{classification:"file"},"Layer Template":{classification:"file"},"Administrative Report":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Report Template":{classification:"file"},"Color Set":{classification:"file"},"Explorer Layer":{types:["is-explorer","is-update","is-views"],classification:"file"},"Explorer Map":{types:["is-explorer","is-update","is-views"],classification:"file"},"Symbol Set":{classification:"file"},"Document Link":{defaultOpenText:e.default.itemLinks.open,defaultOpenIcon:"launch",openIn:["appViewer"],types:["is-link","is-documentUrl","is-views"],
classification:"file"},PDF:{defaultOpenText:e.default.itemLinks.open,defaultOpenIcon:"launch",types:["is-dataUrl","is-pdf","is-update","is-documentUrl"],classification:"file"},"CAD Drawing":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"CSV Collection":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},Image:{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"KML Collection":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Code Attachment":{types:["is-file","is-update"],classification:"file"},"Code Sample":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"iWork Keynote":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Numbers":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Pages":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Excel":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:"is-publish is-feature is-dataUrl is-file is-update is-documentUrl".split(" "),classification:"file"},"Microsoft Powerpoint":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Word":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Visio Document":{defaultOpenText:e.default.itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Statistical Data Collection":{types:[],classification:"file"},"360 VR Experience":{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},netCDF:{defaultOpenText:e.default.itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},getItemInfo:function(h){var m,l,f,c=this[h.displayName]?
h.displayName:h.type,d=this[h.type];"GeoJson"===h.type&&(h.type="GeoJSON");var u=null===(m=null===h||void 0===h?void 0:h.iconUrl)||void 0===m?void 0:m.split("/").pop();"featureshosted16.png"===u&&(u="features16.png");h.isUtilityNetwork&&(u="utilitynetwork16.png");"Data Store"===h.type&&(u="datastore16.png");h.svgIconUrl16=u?"js/arcgisonline/img/item-types/"+u.replace("16.png","16.svg"):h.iconUrl;h.svgIconUrl32=u?"js/arcgisonline/img/item-types/"+u.replace("16.png","32.svg"):h.iconUrl;this[h.displayName]&&
(d=this[h.displayName]);d=r.__assign({privileges:[],openIn:[],types:["is-views"],attributes:[],classification:"file"},d);"Feature Collection"===h.type&&k.default.includes(h.typeKeywords,"Table")&&(d.types=k.default.filterOut(d.types,["is-data"]));if("Feature Service"===h.type){m=["is-data","is-layer"];if(k.default.includes(h.typeKeywords,"Multipatch")||k.default.includes(h.typeKeywords,"HasOnlyMultipatchGeometries"))m=r.__spreadArrays(m,["is-scene-2"]);d.types=k.default.filterOut(d.types,m)}h.isUtilityNetwork&&
(d.displayName=h.displayName+" ("+e.default.itemProperties.utilityNetwork+((h.canUpdate||h.canDelete)&&h.isHostedService?", "+e.default.viewsWidget.hostedData:"")+")");"Application"!==h.type||h.url||(d.openIn=[],d.defaultOpenText=null);m="Desktop Add In;Globe Document;Map Document;Published Map;Scene Document;Geoprocessing Package;Geoprocessing Service;Globe Service;Locator Package".split(";");a.default.couldHaveArcGISDesktop()&&-1<m.indexOf(c)&&(d.defaultOpenText=k.default.includes(h.types,"is-desktopPro")?
e.default.itemLinks.openArcMap:e.default.itemLinks.openDesktop,d.defaultOpenIcon="launch");"Layer"===h.type&&k.default.includes(h.typeKeywords,"lyrx")&&(d=r.__assign(r.__assign({},d),this["Pro Layer"]));"Layer Package"===h.type&&k.default.includes(h.typeKeywords,"lpkx")&&(d=r.__assign(r.__assign({},d),this["Pro Layer Package"]));"Map Package"===h.type&&k.default.includes(h.typeKeywords,"mpkx")&&(d=r.__assign(r.__assign({},d),this["Pro Map Package"]));"Compact Tile Package"===h.type&&(h.type="Tile Package");
"Dashboard"===h.type&&a.default._isOperationsViewSupportedBrowser(!0)&&(d.types.push("is-browser"),h.isSupportedBrowser=!0);d.types=k.default.concatUnique(d.types,"public"===h.access?["is-public"]:["is-not-public"]);a.default.couldHaveArcGISDesktop()||(d.types=d.types.filter(function(n){return"is-desktop"!==n&&"is-desktopPro"!==n}));c=null===(f=null===(l=h.portalUser)||void 0===l?void 0:l.userRole)||void 0===f?void 0:f.canUpdateOrgItems();if("StoryMap"===h.type){if(k.default.includes(h.typeKeywords,
"smstatusunpublishedchanges")||k.default.includes(h.typeKeywords,"smstatuspublished"))d.types.push("is-published-storymap"),d.defaultOpenText=e.default.itemLinks.view,d.defaultOpenIcon="launch",d.openIn=["storyMapViewer"];if(h.isOwner||h.isAdmin||c)d.types.push("is-editable-storymap"),d.openIn=d.openIn||[],d.openIn.push("configureStoryMap"),d.defaultOpenText=d.defaultOpenText||e.default.configAGOLUtilServices.configure,d.defaultOpenIcon="launch"}"Web Experience"===h.type&&(k.default.includes(h.typeKeywords,
"status: Published")||k.default.includes(h.typeKeywords,"status: Changed"))&&d.types.push("is-published-webExperience");"Web Experience Template"===h.type&&(k.default.includes(h.typeKeywords,"status: Published")||k.default.includes(h.typeKeywords,"status: Changed"))&&d.types.push("is-published-webExperienceTemplate");"Web Mapping Application"===h.type&&(k.default.includes(h.typeKeywords,"configurableApp")&&(h.isOwner||h.isAdmin||c)&&d.types.push("can-configure"),h.url=g.redirectExternalAppURL(h,h.url));
"Image Service"!==h.type||k.default.includes(h.typeKeywords,"Managed Image Collection")||(d.types=d.types.filter(function(n){return"is-imageManagement"!==n}));return d}}})},"arcgisonline/pages/utils/url":function(){define(["require","exports","tslib","../utils/arrays"],function(b,y,r,a){Object.defineProperty(y,"__esModule",{value:!0});y.redirectExternalAppURL=y.sanitizeServerURL=void 0;a=r.__importDefault(a);y.sanitizeServerURL=function(k){k=k||"";var e=k.split("/"),g=e.indexOf("FeatureServer");0<
g&&(k=g-1,e.splice(k,1,e[k].replace(/:/g,"")),k=e.join("/"));return k};y.redirectExternalAppURL=function(k,e,g){var h=["Web Mapping Application","Dashboard"],m=a.default.find([{org:".mapsdevext.arcgis.com",www:"devext.arcgis.com"},{org:".maps.arcgis.com",www:"www.arcgis.com"},{org:".mapsqa.arcgis.com",www:"qaext.arcgis.com"}],function(l){return-1<(null===e||void 0===e?void 0:e.indexOf(l.org))});if(!k.portalUser&&"self"!==k.contentOrigin&&"public"===k.access&&(g||-1<h.indexOf(k.type))&&e){if(0===e.indexOf("/apps/"))return"https://"+
k.portal.portalHostname+e;if(m)return k=e.split(m.org),"https://"+m.www+k[k.length-1]}return e}})},"arcgisonline/pages/utils/item":function(){define("require exports tslib ../utils/arrays ../pageUtil ../../sharing/util ../../esriGeowConfig dojo/string dojo/Deferred dojo/promise/all dojo/i18n!../../nls/arcgisonline dojo/text!../dijit/Card/badges/authoritative.html dojo/text!../dijit/Card/badges/deprecated.html dojo/text!../dijit/Card/badges/living-atlas.html dojo/text!../dijit/Card/badges/marketplace.html dojo/text!../dijit/Card/badges/open-data.html dojo/text!../dijit/Card/badges/premium.html dojo/text!../dijit/Card/badges/retired.html dojo/text!../dijit/Card/badges/public-data-collection.html dojo/text!../dijit/Card/badges/subscriber.html dojo/text!../dijit/Card/badges/collaboration.html".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);u=r.__importDefault(u);n=r.__importDefault(n);t=r.__importDefault(t);x=r.__importDefault(x);A=r.__importDefault(A);B=r.__importDefault(B);F=r.__importDefault(F);w=r.__importDefault(w);return function(){function D(){}D.getBadges=
function(q,v,z){var C,E,G,H=[],K={i18n:f.default,hideText:v?"":"hide",tooltipClass:"tooltip tooltip-bottom-left tooltip-multiline"};v=v?"":"Labeled";var I=q.groupDesignations&&q.groupDesignations.split(", "),J=null===(C=q.portal)||void 0===C?void 0:C.isPortal;"org_authoritative"===q.contentStatus&&(K.tooltipLabel=f.default.badges["authoritativeTooltip"+v],H.push(h.default.substitute(c.default,K)));"public_authoritative"===q.contentStatus&&(q.verified||J)&&(K.tooltipLabel=h.default.substitute(f.default.badges["publicAuthoritativeTooltip"+
v],{name:J?q.portal.name:q.verified.name}),H.push(h.default.substitute(c.default,K)));"deprecated"===q.contentStatus&&(K.tooltipLabel=f.default.badges["deprecatedTooltip"+v],H.push(h.default.substitute(d.default,K)));-1<(null===(E=q.typeKeywords)||void 0===E?void 0:E.indexOf("Public Data Collection"))&&z&&(K.tooltipLabel=f.default.badges["publicDataCollectionTooltip"+v],H.push(h.default.substitute(B.default,K)));q.isRetired&&(K.tooltipLabel=f.default.badges["retiredTooltip"+v],H.push(h.default.substitute(A.default,
K)));I&&-1<I.indexOf("livingatlas")&&(K.tooltipLabel=f.default.badges["livingAtlasTooltip"+v],H.push(h.default.substitute(u.default,K)));I&&-1<I.indexOf("opendata")&&H.push(h.default.substitute(t.default,K));q.isPremium&&(z=(null===(G=q.portal)||void 0===G?0:G.user)?q.portal.user.orgId?"org":"public":"anon",K.tooltipLabel=f.default.badges[z+(q.requiresCredits?"PremiumTooltip":"SubscriberTooltip")+v],H.push(h.default.substitute(q.requiresCredits?x.default:F.default,K)));q.listed&&!J&&H.push(h.default.substitute(n.default,
K));q.origin&&H.push(h.default.substitute(w.default,K));return H.join("")};D.isItemAdmin=function(q,v){var z,C=!1;C=q.owner;v=null!==v&&void 0!==v?v:q.portal;var E=-1<(null===(z=q.itemControl)||void 0===z?void 0:z.indexOf("admin"));z=["esri_livingatlas","esri_demographics","esri_boundaries"];return C=v.isPortal&&!q.isOwner&&E&&-1<C.indexOf("esri_")&&!a.default.includes(z,C)?!1:!!E};D.canShareItem=function(q,v){var z,C,E=v||{},G=E.userRole,H=E.canShare,K=(null===G||void 0===G?void 0:G.canPurchaseMarketplace())||
(null===G||void 0===G?void 0:G.canTrialMarketplace()),I=q.access||"private",J=q.isAdmin||q.isOwner||E.isOrgAdmin&&q.isOwnedByMyOrg,Q="public"===I&&"AppBuilder Extension"!==q.type&&"AppBuilder Widget Package"!==q.type;v="org"===I&&(null===(z=q.ownerProfile)||void 0===z?void 0:z.orgId)===v.orgId;z="licenseByUser"===(null===(C=q.listingProperties)||void 0===C?void 0:C.licenseBy);C="Native Application Installer"!==q.type&&"API Key"!==q.type&&!e.default.isProApp(q)&&!z;return H&&C&&(J||K&&q.listed||((null===
G||void 0===G?0:G.canShareItemToGroup())||!E.isOrgUser)&&(Q||v))?!0:!1};D.canDeleteItem=function(q,v){var z=v||{};v=z.userRole;z=q.isAdmin||q.isOwner||z.isOrgAdmin&&q.isOwnedByMyOrg;v=(null===v||void 0===v?void 0:v.isCustom())&&v.canDeleteOrgItems();return!!(z||q.isOwnedByMyOrg&&v)};D.getProtectedItems=function(q){var v=new m.default,z=[],C=[],E=[];q.forEach(function(G){G.protected?z.push(G):G.portal.isPortal?E.push(G):C.push(G)});q=E.map(function(G){return G.canBeDeleted().then(function(H){(H&&!H.success?
z:C).push(G)})});l.default(q).then(function(){v.resolve({protectedItems:z,unprotectedItems:C})});return v};D.deleteItemsByOwner=function(q,v){var z=new m.default;q=g.default.restBaseUrl+"content/users/"+q;1===v.length?(v=v[0],q=""+q+(v.folderId&&"/"!==v.folderId?"/"+v.folderId:"")+"/items/"+v.id+"/delete",e.default.request({url:q,content:""},{usePost:!0}).then(function(C){return z.resolve([C])},function(C){return z.resolve([C])})):1<v.length&&(q+="/deleteItems",v={items:v.map(function(C){return C.id}).join(",")},
e.default.request({url:q,content:v},{usePost:!0}).then(function(C){return z.resolve(C.results)},function(C){return z.resolve([C])}));return z};D.deleteItems=function(q){var v=this,z=new m.default,C={},E=[],G=[],H=[];q.forEach(function(I){var J;"Deep Learning Package"===(null===I||void 0===I?void 0:I.type)?E.push(k.default.uninstallDeepLearningPackage(I).then(function(Q){var V;"uninstallFail"===(null===Q||void 0===Q?void 0:Q.messageCode)?G.push(Q):C[I.owner]=[I].concat(null!==(V=C[I.owner])&&void 0!==
V?V:[])})):C[I.owner]=[I].concat(null!==(J=C[I.owner])&&void 0!==J?J:[])});var K=Object.keys(C).map(function(I){return v.deleteItemsByOwner(I,C[I])});l.default(E).then(function(){return l.default(K)}).then(function(I){I.forEach(function(J){J.forEach(function(Q){Q.success?H.push(Q):G.push(Q)})});z.resolve({removed:H,errors:G})});return z};D.getContentStatus=function(q){if(q.contentStatus&&-1<q.contentStatus.indexOf("authoritative")){var v=q.portal;return"public"===q.access&&(null===v||void 0===v?0:
v.isVerified)?"public_authoritative":"org_authoritative"}return q.contentStatus};D.shouldOpenToItemURLInNewTab=function(q){return-1<"Web Mapping Application;Mobile Application;Document Link;Site Application;Hub Site Application;StoryMap".split(";").indexOf(q.type)};D.shouldOpenInNewTab=function(q){return-1<["CityEngine Web Scene","Dashboard","Operation View"].indexOf(q.type)};return D}()})},"arcgisonline/pages/utils/socialMedia":function(){define(["require","exports","tslib","../../esriGeowConfig",
"esri/lang"],function(b,y,r,a,k){a=r.__importDefault(a);k=r.__importDefault(k);return function(){function e(){}e.canShowSocialMediaLinks=function(g){var h=g.isPortal,m=k.default.isDefined(g.canSharePublic)?!!g.canSharePublic:!0,l=!!g.portalProperties&&k.default.isDefined(g.portalProperties.showSocialMediaLinks);g=l&&!0===g.portalProperties.showSocialMediaLinks;return a.default.showSocialMediaLinks&&!0===a.default.showSocialMediaLinks&&(h?m&&g:m&&(!l||g))};e.canShowSocialMediaLinksOnItems=function(g){var h=
g.portalUser,m=!!h&&!h.orgId,l=!!h&&!!h.orgId;h=!h||m||l&&(h.userRole.canShareItemToPublic()||h.userRole.canShareOthersItemsToPublic());return this.canShowSocialMediaLinks(g)&&h};e.canShowSocialMediaLinksOnGroups=function(g){var h=g.portalUser,m=!!h&&!h.orgId,l=!!h&&!!h.orgId;h=!h||m||l&&h.userRole.canShareGroupToPublic();return this.canShowSocialMediaLinks(g)&&h};return e}()})},"arcgisonline/pages/portal/PortalUser":function(){define("require exports tslib ./PortalGroup ./LicenseInfo ../utils/arrays ../../sharing/util ../../sharing/dijit/Role ../../tsutils/declareDecorator dojo/cookie dojo/_base/lang dojo/Deferred dojo/Stateful dojo/topic esri/arcgis/Portal esri/lang".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);u=r.__importDefault(u);n=r.__importDefault(n);t=r.__importDefault(t);return function(){function x(A){var B;A=this.portal||{};this.setRole(this.viewOnly);this.viewOnly&&this.copyViewOnlyRoleProperties();f.default.mixin(this,{thumbnailUrl:this.thumbnailUrl||
g.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),defaultThumbnailUrl:g.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")});f.default.mixin(this,k.default);this.token=null===(B=this.credential)||void 0===B?void 0:B.token;this.id=this.username;this.orgUrl=A.urlKey&&A.customBaseUrl?A.urlKey+"."+A.customBaseUrl:A.portalUrl;this.computeFlags()}x.prototype.postscript=function(){};x.prototype.setRole=function(A){return this.userRole=new h.default({portalUser:this,
viewOnly:A})};x.prototype.computeFlags=function(){var A,B=this.portal.supportsHostedServices||!1,F=(null===(A=this.portal.helperServices)||void 0===A?void 0:A.rasterAnalytics)&&t.default.isDefined(this.portal.helperServices.rasterAnalytics.url);this.isOrgUser=this.portal.urlKey&&this.portal.customBaseUrl||this.portal.isPortal?!0:!1;this.isOrgAdmin=this.userRole.isAdmin();this.canShare=!this.isOrgUser||this.userRole.canShareItemToGroup()||this.userRole.canShareItemToOrg()||this.portal.canSharePublic&&
this.userRole.canShareItemToPublic();this.canShareOthers=this.userRole.canShareOthersItemsToGroup()||this.userRole.canShareOthersItemsToOrg()||this.portal.canSharePublic&&this.userRole.canShareOthersItemsToPublic();this.canViewOthersOrgItems=!this.userRole.isCustom()||this.userRole.isCustom()&&this.userRole.canViewOrgItems();this.canReassignOrgItems=this.isOrgAdmin||this.userRole.canReassignOrgItems();this.canUseGeocode=(this.canCreateItems=!this.isOrgUser||this.userRole.canCreateItem())&&this.userRole.canUseGeocode();
this.canPublishTiles=this.userRole.canPublishTiles();this.canPublishFeatures=this.userRole.canPublishFeatures();this.canPublishScenes=this.userRole.canPublishScenes();this.canPublishVectorTiles=this.userRole.canPublishVectorTiles();this.canPublishImageCollection=F&&this.userRole.canPublishImageCollection()?!0:!1;this.canUserPublish=B&&this.canCreateItems&&(this.canPublishTiles||this.canPublishFeatures||this.canPublishScenes||this.canPublishVectorTiles||this.canPublishImageCollection);this.canManageLicenses=
this.isOrgAdmin||this.userRole.canManageLicenses();this.canManageWebsite=this.isOrgAdmin||this.userRole.canManageWebsite()};x.prototype.copyViewOnlyRoleProperties=function(){this.role=this.userRole.baseRole;this.roleId=this.userRole.id;this.privileges=this.userRole.privileges;this.level="1"};x.prototype.getTags=function(){var A=this,B=new c.default;this.tags&&this.tags.length?B.resolve(this.tags):this.inherited(arguments).then(function(F){A.set("tags",F);B.resolve(A.tags)},function(F){A.set("tags",
[]);B.resolve([])});return B};x.prototype.getContentTags=function(){var A=this,B,F=new c.default;(null===(B=this.contentTags)||void 0===B?0:B.length)?F.resolve(this.contentTags):g.default.loadUserTags(this.username).then(function(w){A.set("contentTags",w);F.resolve(A.contentTags)},function(w){A.set("contentTags",[]);F.resolve([])});return F};x.prototype.getCurrentFolder=function(){if(!t.default.isDefined(this.currentFolder)){var A=g.default.getCookie("ESRI_Content"),B=A&&"/"!==A.folderId?A.folderId:
this.username;this.set("currentFolder",{id:B,isAll:null===A||void 0===A?void 0:A.isAll,isHome:"/"!==B&&B&&B!==this.username?!1:!0})}return this.currentFolder};x.prototype.setCurrentFolder=function(A){var B=g.default.getCookie("ESRI_Content")||{},F=(null===A||void 0===A?void 0:A.id)||A||this.username,w="all"===F;A={folderId:F===this.username||w?"/":F,isAll:w,isHome:(null===A||void 0===A?0:A.isHome)||"/"===F||!F||F===this.username?!0:!1};f.default.mixin(B,A);l.default("ESRI_Content",JSON.stringify(B),
{path:"/"});this.set("currentFolder",f.default.mixin(A,{id:F}))};x.prototype.getFolders=function(){var A=this,B=new c.default;g.default.request({url:this.userContentUrl,content:{num:1}}).then(this._toFolders.bind(this)).then(function(F){A.set("folders",F);B.resolve(F.slice(0))});return B};x.prototype.createFolder=function(A){var B=this,F=new c.default,w=this.userContentUrl+"/createFolder";A={folderName:A.replace(/ /g,"_"),title:A};g.default.request({url:w,content:A},{usePost:!0}).then(function(D){B.folders.push(D.folder);
B.folders.shift();B.set("folders",B._toFolders({folders:B.folders}));u.default.publish("folders/refresh");F.resolve(D.folder)},function(D){F.reject(D)});return F};x.prototype.updateFolder=function(A,B){var F=this,w=new c.default;g.default.request({url:this.userContentUrl+"/"+A+"/updateFolder",content:{newTitle:B}},{usePost:!0}).then(function(){return F.getFolders()},function(D){w.reject(D)}).then(function(D){w.resolve(D);u.default.publish("folders/refresh")},function(D){w.reject(D)});return w};x.prototype.deleteFolder=
function(A){var B=this,F=new c.default;g.default.request({url:this.userContentUrl+"/"+A+"/delete"},{usePost:!0}).then(function(w){var D,q=null===(D=null===w||void 0===w?void 0:w.folder)||void 0===D?void 0:D.id;B.folders=B.folders.filter(function(v){return(null===v||void 0===v?void 0:v.id)!==q});B.folders.shift();B.set("folders",B._toFolders({folders:B.folders}));F.resolve(w.folder)},function(w){F.reject(w)});return F};x.prototype.deleteItems=function(A){var B=new c.default,F=this.userContentUrl+"/deleteItems";
A={items:A.map(function(w){return w.id})};g.default.request({url:F,content:A},{usePost:!0}).then(function(){B.resolve(!0)},function(w){B.reject(w)});return B};x.prototype._toFolders=function(A){var B=this;A=(null===A||void 0===A?void 0:A.folders)||[];A=A.sort(function(F,w){return F.title.localeCompare(w.title)});e.default.find(A,function(F){return F.id===B.username})||A.unshift({username:this.username,id:this.username,title:this.username,created:"now"});return A};x.prototype.getGroups=function(){var A=
this,B=this.portal.url+"community/users/"+this.username,F=new c.default;this.userGroups?F.resolve(this.adminGroups||this.userGroups):g.default.request({url:B}).then(function(w){A.userGroups=(null===w||void 0===w?0:w.groups)?A._toGroup(w.groups):[];F.resolve(A.userGroups)},function(w){F.reject(w)});return F};x.prototype.getSharedOwnershipGroups=function(){var A=this,B=new c.default;this.ownershipGroups&&B.resolve(0<this.ownershipGroups.length?this.ownershipGroups:null);this.getGroups().then(function(){B.resolve(0<
A.ownershipGroups.length?A.ownershipGroups:null)});return B};x.prototype._toGroup=function(A){var B=this;this.ownershipGroups=[];return(null!==A&&void 0!==A?A:[]).map(function(F){var w=new a.default(f.default.mixin(F,{portal:B.portal}));B._isSharedOwnershipGroup(F)&&B.ownershipGroups.push(F);return f.default.mixin(F,{portalGroup:w})})};x.prototype._isSharedOwnershipGroup=function(A){var B=A.capabilities&&A.capabilities.join(",")||"";return(A.owner===this.username||!A.isViewOnly||A.userMembership&&
"admin"===A.userMembership.memberType)&&-1<B.toLowerCase().indexOf("updateitemcontrol")};return x=r.__decorate([m.default(n.default.PortalUser,d.default)],x)}()})},"arcgisonline/pages/portal/PortalGroup":function(){define("require exports tslib ./PortalItem ../utils/arrays ../utils/getLivingAtlasCategorySet ../utils/resources ../utils/socialMedia ../utils/verified ../utils/itemsgroups ../../sharing/util ../../tsutils/declareDecorator dojo/promise/all dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);u=r.__importDefault(u);n=r.__importDefault(n);t=r.__importDefault(t);return function(){function A(B){var F,w,D,q,v,z,C;this.portalUser=null!==(w=null===(F=this.portal)||void 0===F?void 0:F.getPortalUser())&&void 0!==w?w:null;this.groupContentUrl=this.url.replace("/community/",
"/content/");this.searchContentUrl=this.portal.portalUrl+"search";this.canShowSocialMediaLinks=h.default.canShowSocialMediaLinksOnGroups(this.portal);this.isOwner="owner"===(null===(D=this.userMembership)||void 0===D?void 0:D.memberType);this.isManager="admin"===(null===(q=this.userMembership)||void 0===q?void 0:q.memberType);this.isMember="member"===(null===(v=this.userMembership)||void 0===v?void 0:v.memberType);this.isPublic="public"===this.access;this.belongsToGroup=this.userMembership&&k.default.includes(["owner",
"admin","member"],this.userMembership.memberType);this.isSharedOwnership=k.default.includes(this.capabilities,"updateitemcontrol");this.computeIsOpenDataEnabled();this.computeIsBackedByEnterpriseGroup();this.title=null!==(z=this.title)&&void 0!==z?z:"";this.snippet=null!==(C=this.snippet)&&void 0!==C?C:"";this.thumbnailUrl=this.thumbnail?this.url+"/info/"+this.thumbnail+"?token\x3d"+f.default.getToken():"./images/group-no-image.png"}A.prototype.postscript=function(){};A.prototype.getOwnerProfile=
function(B,F){var w=this,D=this.owner,q=new u.default;this.ownerProfile?q.resolve(this.ownerProfile):(this.isOwner?(D=new u.default,D.resolve(this.portalUser)):D=this.portal.getUserProfile(D),D.then(function(v){w.isAdmin=w.isOwner||w._isGroupAdmin(v);d.default({folders:w.isAdmin&&F?v.getFolders():null,tags:w.isAdmin&&B?v.getTags():null,contentTags:w.isAdmin&&B?v.getContentTags():null}).then(function(){w.set("ownerProfile",v);q.resolve(v)})}));return q};A.prototype._isOpenDataSetter=function(B){this.isOpenData=
B;this.computeIsOpenDataEnabled()};A.prototype._providerSetter=function(B){this.provider=B;this.computeIsBackedByEnterpriseGroup()};A.prototype._providerGroupNameSetter=function(B){this.providerGroupName=B;this.computeIsBackedByEnterpriseGroup()};A.prototype.leave=function(){var B=this,F=new u.default;f.default.request({url:this.url+"/leave"},{usePost:!0}).then(function(w){B.set("isMember",!1);F.resolve(w)});return F};A.prototype.join=function(){var B=this,F=new u.default;f.default.request({url:this.url+
"/join"},{usePost:!0}).then(function(w){B.autoJoin&&(B.set("belongsToGroup",!0),B.set("isMember",!0));F.resolve(w)},function(w){F.reject(w)});return F};A.prototype.getApplications=function(){var B=this,F=new u.default;f.default.request({url:this.url+"/applications"}).then(function(w){B.set("applications",w.applications);F.resolve(w.applications)},function(w){F.reject(w)});return F};A.prototype.groupContent=function(B,F){var w=this;void 0===B&&(B={});var D=B.q;D=void 0===D?"":D;var q=B.sortField;q=
void 0===q?"modified":q;var v=B.sortOrder;v=void 0===v?"desc":v;var z=B.num;z=void 0===z?12:z;var C=B.start;C=void 0===C?1:C;var E=this.portalUser,G=this.portal,H=new u.default;f.default.request({url:""+this.groupContentUrl+(F?"/search":"")+"?"+("string"===typeof B?B:"sortField\x3d"+q+"\x26sortOrder\x3d"+v+"\x26num\x3d"+z+"\x26start\x3d"+C+(D?"\x26q\x3d":"")+D)}).then(function(K){return l.getAllItemsGroups({response:K,portalUser:E,url:G.url})}).then(function(K){return w.toPortalItems(K)}).then(function(K){return H.resolve(K)},
function(K){H.reject(K)});return H};A.prototype.search=function(B){var F=this,w=new u.default,D=this.portal.portalUrl+"search";B=r.__assign({q:"group:"+this.id,sortField:"modified",sortOrder:"desc",num:12,start:1},B||{});f.default.request({url:D,content:B}).then(function(q){return F.toPortalItems(q)}).then(function(q){return w.resolve(q)},function(q){w.reject(q)});return w};A.prototype.toPortalItems=function(B){var F=this,w=new u.default;B.results&&(B.items=B.results,delete B.results);var D=B.items.map(function(q){return new a.default(r.__assign(r.__assign({},
q),{portal:F.portal}))}).map(function(q){return m.default.setVerifiedInfo(q)});d.default(D).then(function(q){B.items=q;w.resolve(B)},function(q){return 0});return w};A.prototype.groupMembers=function(B){var F=this;B=B||{};var w=new u.default,D=n.default.clone(B);B=this.url+"/userlist";D=r.__assign(r.__assign({},{sortField:"joined",sortOrder:"desc",num:25,start:1}),D);f.default.request({url:B,content:D}).then(function(q){return F.toMembers(q)}).then(function(q){return w.resolve(q)},function(q){w.reject(q)});
return w};A.prototype.toMembers=function(B){var F=this,w=new u.default,D=window.require("arcgisonline/pages/portal/PortalUser");B.users=B.users.map(function(q){return new D(r.__assign(r.__assign({},q),{portal:F.portal}))});w.resolve(B);return w};A.prototype.allGroupMembers=function(B){var F=this;B=B||{};var w=new u.default,D=n.default.clone(B);B=this.url+"/userlist";D=r.__assign(r.__assign({},{sortField:"joined",sortOrder:"desc",num:25,start:1}),D);g.default.fetchAllResources(B,D,"users").then(function(q){return F.toMembers({total:q.length,
users:q})}).then(function(q){return w.resolve(q)},function(q){w.reject(q)});return w};A.prototype.itemCount=function(){var B=new u.default;this.search({num:1}).then(function(F){return B.resolve(F&&F.total||0)});return B};A.prototype._isGroupAdmin=function(B){var F,w;B=B||this.portal.portalUser||{};var D=B.username,q=(null===(F=this.groupOwner)||void 0===F?void 0:F.orgId)||void 0;F=this._getAdmins();F=k.default.includes(F,D);D=B.orgId||q?B.orgId===q:!1;q=B.isOrgAdmin&&D;B=(null===(w=B.userRole)||void 0===
w?void 0:w.isCustom())&&D&&B.userRole.canUpdateOrgGroups();return F||q||B};A.prototype._getAdmins=function(){var B,F;return(null!==(F=null===(B=this.members)||void 0===B?void 0:B.users)&&void 0!==F?F:[]).filter(function(w){return"admin"===w.memberType}).map(function(w){return w.username})};A.prototype._canRemoveContent=function(B){var F,w=B||this.portal.portalUser||{},D=(null===(F=this.groupOwner)||void 0===F?void 0:F.username)||{};B=this._isGroupAdmin(B);w=w.username===D;return B||w};A.prototype._canAssignToThisGroup=
function(B){var F,w;B=B||this.portal.portalUser||{};var D=(null===(F=this.groupOwner)||void 0===F?void 0:F.orgId)||void 0;D=B.orgId||D?B.orgId===D:!1;F=B.isOrgAdmin&&D;B=(null===(w=B.userRole)||void 0===w?void 0:w.isCustom())&&D&&B.userRole.canAssignUsersToOrgGroups();return(F||B)&&!this.isOwner};A.prototype._canChangeOwner=function(B){var F,w;B=B||this.portal.portalUser||{};var D=(null===(F=this.groupOwner)||void 0===F?void 0:F.orgId)||{};D=B.orgId||D?B.orgId===D:!1;F=B.isOrgAdmin&&D;B=(null===(w=
B.userRole)||void 0===w?void 0:w.isCustom())&&D&&B.userRole.canReassignOrgGroups();return!(!F&&!B)};A.prototype._canManageMembershipRequests=function(B){var F;B=B||this.portal.portalUser||{};var w=B.username,D=(null===(F=this.groupOwner)||void 0===F?void 0:F.orgId)||{};F=this._getAdmins();D=B.orgId||D?B.orgId===D:!1;w=k.default.includes(F,w);B=B.isOrgAdmin&&D;return!!(this.isOwner||w||B)};A.prototype._canInviteOthers=function(B){var F,w,D=B||this.portal.portalUser||{};B=D.username;var q=(null===(F=
this.groupOwner)||void 0===F?void 0:F.orgId)||{};F=this._getAdmins();var v=D.orgId||q?D.orgId===q:!1;q=D.isOrgAdmin&&v;D=(null===(w=D.userRole)||void 0===w?void 0:w.isCustom())&&v&&D.userRole.canAssignUsersToOrgGroups();w=k.default.includes(F,B);return!!(this.isOwner||w||q||D)};A.prototype._canJoinGroup=function(B){var F,w,D;B=B||this.portal.portalUser||{};var q=(null===(F=this.groupOwner)||void 0===F?void 0:F.orgId)||{};F=B.orgId||q?B.orgId===q:!1;q=!this.isInvitationOnly;var v=!this.belongsToGroup,
z=null===(w=B.userRole)||void 0===w?void 0:w.canJoinOrgGroup();w=!B.orgId||(null===(D=B.userRole)||void 0===D?void 0:D.canJoinNonOrgGroup());return v&&q?F?z:z||w:!1};A.prototype._canDeleteGroup=function(B,F){var w,D;B=B||this.portal.portalUser||{};var q=B.username,v=(null===(w=this.groupOwner)||void 0===w?void 0:w.orgId)||{};w=this._getAdmins();w=k.default.includes(w,q);B=(B.orgId||v?B.orgId===v:!1)&&(null===(D=B.userRole)||void 0===D?void 0:D.canDeleteOrgGroups());return F&&F.isAdminView?F.canDelete:
!!(this.isOwner||w||B)};A.prototype.getCategories=function(){var B=this,F=new u.default,w,D,q,v;f.default.request({url:this.url+"/categorySchema"}).then(function(z){w=z.categorySchema||[];B.categorySchema=[];w.forEach(function(C){B._isReferencingCategorySet(C)?(D=-1<C.source.indexOf("portal.regions"),q=-1<C.source.indexOf("contentCategorySetsGroupQuery.LivingAtlas")):B.categorySchema.push(C)});D||q?e.default(B.portal,"LivingAtlas",D).then(function(C){v=(null===C||void 0===C?0:C.length)?C.shift():
{};B.categorySchema=n.default.mixin(v.categorySchema,{isLivingAtlas:!0});F.resolve(B.categorySchema)}):F.resolve(B.categorySchema)},function(z){F.reject(z)});return F};A.prototype._isReferencingCategorySet=function(B){var F,w;return-1<(null===(F=B.source)||void 0===F?void 0:F.indexOf("portal.regions"))||-1<(null===(w=B.source)||void 0===w?void 0:w.indexOf("contentCategorySetsGroupQuery.LivingAtlas"))};A.prototype.computeIsOpenDataEnabled=function(){this.isOpenDataEnabled=this.portal&&!this.portal.isPortal&&
!0===this.isOpenData};A.prototype.computeIsBackedByEnterpriseGroup=function(){this.isBackedByEnterpriseGroup="enterprise"===this.provider&&!!this.providerGroupName};return A=r.__decorate([c.default(x.PortalGroup,t.default)],A)}()})},"arcgisonline/pages/utils/getLivingAtlasCategorySet":function(){define("require exports tslib ../portal/PortalItem ../../sharing/util dojo/promise/all dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/kernel dojo/_base/lang".split(" "),function(b,y,r,a,k,e,g,h,
m,l){function f(B){var F=new g.default;k.default.request({url:B.portalUrl+"portals/self",content:{culture:m.default.locale,default:!0}}).then(function(w){F.resolve(null===w||void 0===w?void 0:w.contentCategorySetsGroupQuery)});return F}function c(B,F){var w=new g.default,D=window.require("arcgisonline/pages/portal/PortalGroup");F?B.queryGroups(F,!0).then(function(q){(q=q.total?q.results.shift():null)?w.resolve(new D(l.default.mixin(q,{portal:B}))):w.reject(!1)}):w.reject(!1);return w}function d(B,
F,w,D){var q=new g.default;D?F?u(B,D,F).then(function(v){return n(B,w,[v])}).then(function(v){return q.resolve(v)}):D.groupContent().then(function(v){return q.resolve(v.items)}).then(function(v){return n(B,w,v)}).then(function(v){return q.resolve(v)}):q.reject(!1);return q}function u(B,F,w){var D=new g.default,q;F.search({q:"group:"+F.id+' typekeywords:"'+w+'"',num:1}).then(function(v){q=v.total?v.items.shift():{};D.resolve(new a.default(l.default.mixin(q,{portal:B})))});return D}function n(B,F,w){var D=
new g.default;w=l.default.isArray(w)?w:[w];F=F&&!B.isPortal;w=w.map(function(q){return t(B,F,q)});e.default(w).then(function(q){D.resolve(q)});return D}function t(B,F,w){var D=new g.default,q=[A(w)];F&&q.push(x(B));e.default(q).then(function(v){w.set("categorySchema",v);D.resolve(w)});return D}function x(B){var F=new g.default,w={title:"Region",description:"Living Atlas Regions",displayName:h.default.common.regions};B.getRegions().then(function(D){D=(D||[]).map(function(q){return l.default.mixin(q,
{displayName:q.localizedName,name:q.region})});w=l.default.mixin(w,{categories:D});F.resolve(w)});return F}function A(B){var F=new g.default;B.getData().then(function(w){w=null===w||void 0===w?void 0:w.categorySchema;w=(null===w||void 0===w?0:w.length)?w.shift():{};F.resolve(l.default.mixin(w,{displayName:h.default.GroupWidget.categories}))});return F}a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);
return function(B,F,w){var D=new g.default;f(B).then(function(q){return c(B,q)}).then(function(q){return d(B,F,w,q)}).then(function(q){return D.resolve(q)},function(q){return D.resolve(null)});return D}})},"arcgisonline/pages/utils/resources":function(){define("require exports tslib ../../sharing/util dojo/promise/all dojo/Deferred dojo/_base/lang esri/lang".split(" "),function(b,y,r,a,k,e,g,h){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);
return function(){function m(){}m.sendAllResources=function(l,f,c,d,u,n){var t=new e.default;c=g.default.clone(c);var x=[],A=c.splice(0,f);for(h.default.isDefined(n)||(n=!0);0<(null===A||void 0===A?void 0:A.length);)x.push(a.default.request({url:l,content:d(A)},g.default.mixin({usePost:n},u||{}))),A=c.splice(0,f);k.default(x).then(function(B){t.resolve(B)},function(B){t.reject(B)});return t};m.sendAllResourcesWithDelay=function(l,f,c,d,u){function n(){setTimeout(function(){(F=A.splice(0,f))&&0<F.length&&
(a.default.request({url:l,content:d(F)},{usePost:!0}).then(function(q){w++;B.push(q);w>=x&&t.resolve(B)},function(q){w++;w>=x&&t.reject(q)}),D++,n())},0===D?0:u)}var t=new e.default,x=Math.ceil(c.length/f),A=g.default.clone(c),B=[],F,w=0,D=0;n();return t};m.sendAllResourcesSerially=function(l,f,c,d){function u(){B=x.splice(0,f);0<(null===B||void 0===B?void 0:B.length)&&a.default.request({url:l,content:d(B)},{usePost:!0}).then(function(w){F++;A.push(w);F>=t?n.resolve(A):u()},function(w){F++;F>=t?n.reject(w):
u()})}var n=new e.default,t=Math.ceil(c.length/f),x=g.default.clone(c),A=[],B,F=0;u();return n};m.fetchAllResources=function(l,f,c){void 0===f&&(f={});void 0===c&&(c="results");var d=new e.default,u=[],n=100,t=[],x=1,A,B,F;f.start=x;!f.num||f.num>n?f.num=n:n=f.num;a.default.request({url:l,content:f}).then(function(w){if(null===w||void 0===w?0:w[c]){t=t.concat(w[c]);x=w.nextStart;A=w.total-t.length;B=Math.ceil(A/n);for(F=0;F<B;F++)f.start=x+F*n,u.push(a.default.request({url:l,content:f}));k.default(u).then(function(D){D.forEach(function(q){t=
t.concat(q[c])});d.resolve(t)},function(D){d.reject(D)})}else d.resolve(t)},function(w){d.reject(w)});return d};return m}()})},"arcgisonline/pages/utils/verified":function(){define(["require","exports","tslib","../../sharing/util","dojo/Deferred"],function(b,y,r,a,k){a=r.__importDefault(a);k=r.__importDefault(k);return function(){function e(){}e.getVerifiedInfo=function(g){var h,m,l,f=new k.default,c=e.orgHash,d=null!==(h=g.orgId)&&void 0!==h?h:null===(m=g.portal)||void 0===m?void 0:m.id;h=null===
(l=g.portal)||void 0===l?void 0:l.isPortal;if(g.contentStatus&&"public_authoritative"===g.contentStatus&&d&&!h)if(c[d])f.resolve(e.orgHash[d]);else{var u=location.protocol+"//"+g.portal.portalHostname+"/sharing/rest/portals/"+d;a.default.request({url:u}).then(function(n){return e.getOrgProps(u).then(function(t){t&&(n.localizedOrgProperties=t);return n})}).then(function(n){var t,x,A=(n.allSSL?"https://":"http://")+(n.urlKey||"")+"."+n.customBaseUrl+"/",B=n.thumbnail?A+"sharing/rest/portals/self/resources/"+
n.thumbnail:"./images/group-no-image.png";c[n.id]={name:n.name,description:null===(x=null===(t=n.localizedOrgProperties)||void 0===t?void 0:t.default)||void 0===x?void 0:x.description,url:A+"home/",thumbnail:B};f.resolve(c[n.id])},function(n){return 0})}else f.resolve(!1);return f};e.getOrgProps=function(g){var h=new k.default;a.default.request({url:g+"/resources/localizedOrgProperties",content:{start:1,num:100}}).then(function(m){m&&!m.code?h.resolve(m):h.resolve(!1)},function(){h.resolve(!1)});
return h};e.setVerifiedInfo=function(g){var h=new k.default;e.getVerifiedInfo(g).then(function(m){g.verified=m;h.resolve(g)});return h};e.orgHash={};return e}()})},"arcgisonline/pages/utils/itemsgroups":function(){define("require exports tslib dojo/_base/Deferred ./arrays ./promises arcgisonline/sharing/util".split(" "),function(b,y,r,a,k,e,g){function h(c){var d=c.response,u=c.url,n=c.portalUser;c=c.contentUser;var t=[];n&&(t=t.concat(n.userGroups||[]));c&&(t=t.concat(c.groups||[]));if(d.results&&
0<(null===t||void 0===t?void 0:t.length)){var x=d.results.map(function(A){return A.id}).join(",");n=t.map(function(A){return A.id});n=k.default.batch(n,100).map(function(A){return m(u,A,x)});return e.default.eachAlwaysValues(n).then(function(A){A=l(A);return f(d,A)})}n=new a.default;n.resolve(d);return n}function m(c,d,u){if(!u||0===d.length)return u=new a.default,u.resolve({}),u;c+="content/itemsgroups";d=d.join(",");return g.default.request({url:c,content:{items:u,groups:d}})}function l(c){return c.reduce(function(d,
u){u&&Object.keys(u).forEach(function(n){n&&u[n]&&(d[n]=u[n])});return d},{})}function f(c,d){if(d){var u={};c.results.forEach(function(n){return u[n.id]=n});Object.keys(d).forEach(function(n){var t=d[n];if(t&&t.items){n=d[n];var x=n.groupId,A=n.groupTitle,B=n.groupThumbnail;n.items.forEach(function(F){F=u[F.itemId];F.groupData=F.groupData||[];F.sharedGroups=F.sharedGroups||0;0!==F.groupData.length&&k.default.find(F.groupData,function(w){return w.id===x})||(F.groupData.push({groupId:x,groupTitle:A,
groupThumbnail:B}),F.sharedGroups+=1)})}})}return c}Object.defineProperty(y,"__esModule",{value:!0});y.parseItemsGroups=y.collateItemsGroupsResponse=y.fetchItemsGroupsPage=y.getAllItemsGroups=y.getItemGroups=void 0;a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);y.getItemGroups=function(c){var d=c.url,u=c.portalUser,n=c.contentUser;c={results:[c.item]};var t=new a.default;h({response:c,url:d,portalUser:u,contentUser:n}).then(function(x){t.resolve(null===
x||void 0===x?void 0:x.results[0])});return t};y.getAllItemsGroups=h;y.fetchItemsGroupsPage=m;y.collateItemsGroupsResponse=l;y.parseItemsGroups=f})},"arcgisonline/pages/organization/widgets/GroupIcon":function(){define("require exports tslib dojo/text!./templates/_groupIcon.html dijit/_TemplatedMixin dijit/_WidgetBase ../../portal/PortalGroup ../../utils/dom ../../utils/formatters ../../utils/strings ../../../tsutils/declareDecorator".split(" "),function(b,y,r,a,k,e,g,h,m,l,f){a=r.__importDefault(a);
k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);return function(){function c(d,u){this.templateString=a.default;this.hide=m.default.hide;this.show=m.default.show;this.firstChar=m.default.firstChar;this.stripHTML=m.default.stripHTML;this.empty=m.default.empty;this.cssClasses="";this.size="50";this.letterSize="4";this.tooltipClass="tooltip";this._viewBoxSize="65"}c.prototype.postMixInProperties=
function(){var d;this.inherited(arguments);this._group=new g.default(r.__assign(r.__assign({},this.group),{portal:this.portal}));this._group.fillColor=this._group.id?"#"+this._group.id.substr(this._group.id.length-6):l.default.stringToHex(this._group.title);this._group.useLetter=!(null===(d=this._group.title.charAt(0))||void 0===d||!d.match(/^\w+$/));this._group.useLetter&&(this._viewBoxSize=this.size)};c.prototype.postCreate=function(){var d=this;this._img.addEventListener("error",function(){h.default.hideNode(d._img);
d._svg.classList.remove("hide")})};return c=r.__decorate([f.default(e.default,k.default)],c)}()})},"arcgisonline/sharing/dijit/SiteFooter":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/dom ../../pages/utils/organization ../util ../geow/Account ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/dom dojo/dom-construct dojo/i18n!../../nls/arcgisonline dojo/string dojo/topic dojo/text!./templates/SiteFooter.html dojo/_base/lang esri/lang".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);u=r.__importDefault(u);n=r.__importDefault(n);t=r.__importDefault(t);x=r.__importDefault(x);A=r.__importDefault(A);B=r.__importDefault(B);return function(){function F(w,D){this.templateString=x.default;this.isTroubleshootPage=
this.isSignInPage=!1}F.prototype.postMixInProperties=function(){this.i18n=A.default.mixin({},u.default.common);A.default.mixin(this.i18n,u.default.siteFooter);A.default.mixin(this.i18n,u.default.supportPage.helpLabel)};F.prototype.postCreate=function(){var w=window.location.pathname.toLowerCase();this.isSignInPage=-1!==w.indexOf(a.default.signin);this.isTroubleshootPage=-1!==w.indexOf("troubleshoot.html");this.addEventListeners()};F.prototype.startup=function(){this._loadLinks()};F.prototype.refresh=
function(){d.default.destroy(this.id+"_links");d.default.create("span",{id:this.id+"_links",className:"esriItemLinks"},this.domNode);this._loadLinks()};F.prototype.addEventListeners=function(){this.own(t.default.subscribe("contact-us-link/update",this.handleContactUsLinkUpdate.bind(this)))};F.prototype.handleContactUsLinkUpdate=function(w){var D=c.default.byId(this.id+"_links"),q=window.location.href,v=!1,z=null;-1<q.indexOf("viewer.html")&&!e.default.isMobile()&&-1===q.indexOf("returnUrl")&&(v=!0);
z=v?d.default.create("span",{innerHTML:"\x26nbsp;. "}):d.default.create("span",{innerHTML:""});B.default.isDefined(w)||(w={visible:!1,url:""});(q=c.default.byId(this.id+"_customContactUs"))?(k.default.showHide(q,w.visible),q.href=w.url):(q=d.default.create("a",{href:w.url,innerHTML:this.i18n.customContactUs,id:this.id+"_customContactUs",class:w.visible?"footer__contact-us":"footer__contact-us hide"}),w=c.default.byId(this.id+"_contactEsri"),B.default.isDefined(w)?(d.default.place(q,w,"after"),d.default.place(z,
w,"after")):(0<a.default.footerLinks.length&&d.default.place(z,D,"last"),d.default.place(q,D,"last")))};F.prototype._getTitle=function(w){return-1<(null===w||void 0===w?void 0:w.indexOf("${"))&&-1<w.indexOf("}")?n.default.substitute(w,{i18n:this.i18n}):w};F.prototype._loadLinks=function(){var w=this;h.default.getSelf(function(D){var q,v,z,C=g.default.getUser(),E=D.isPortal,G=c.default.byId(w.id+"_links"),H=window.location.href,K=!1,I=null;-1<H.indexOf("?useExisting\x3d1")&&(H=H.substring(0,H.length-
14));-1<H.indexOf("viewer.html")&&!e.default.isMobile()&&-1===H.indexOf("returnUrl")&&(K=!0);(a.default.footerLinks||[]).forEach(function(Q){var V="${i18n.legal}"===(null===Q||void 0===Q?void 0:Q.title),O=!!(V&&B.default.isDefined(C)&&B.default.isDefined(C.accountId)),S="${i18n.help}"===(null===Q||void 0===Q?void 0:Q.title)||"support.html"===(null===Q||void 0===Q?void 0:Q.url),L=!(S&&!B.default.isDefined(C)&&B.default.isDefined(D.access)&&"public"===D.access&&(E||!E&&B.default.isDefined(D.customBaseUrl)));
O=!V&&!S||V&&!O||S&&!L;I&&O&&d.default.place(I,G,"last");V=w._getTitle(Q.title);if(Q.url){-1===Q.url.indexOf("http")&&-1===Q.url.indexOf("mailto:")&&K&&(Q.url="support.html"===Q.url?D.helpBase||a.default.baseUrl+Q.url:a.default.baseUrl+Q.url);if("${i18n.help}"===Q.title||"support.html"===Q.url)Q.url=D.helpBase;Q=d.default.create("a",{href:Q.url,target:"_blank",innerHTML:V});O&&d.default.place(Q,G,"last")}else E&&"contactUs"===Q.type?(O=a.default.portalName||"ArcGIS.com",S=escape(H),Q="mailto:"+Q.email,
Q=d.default.create("a",{id:w.id+"_contactEsri",href:Q+('?subject\x3d"A comment about '+O+'"\x26body\x3d"I have the following comment about the ')+(O+" Web site. %0AReferring page: "+S+' %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)"'),innerHTML:V}),d.default.place(Q,G,"last")):"reportAbuse"===Q.type&&(S=escape(H),Q="mailto:"+Q.email+'?subject\x3d"Concerns about an item"',Q=d.default.create("a",{href:Q+
('\x26body\x3d"I have concerns about the following. %0AReferring page: '+S+" %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)\""),innerHTML:V}),d.default.place(Q,G,"last"));I=K?d.default.create("span",{innerHTML:"\x26nbsp;. "}):d.default.create("span",{innerHTML:""})});var J=null!==(z=null===(v=null===(q=D.portalProperties)||
void 0===q?void 0:q.links)||void 0===v?void 0:v.contactUs)&&void 0!==z?z:{visible:!1,url:""};(q=c.default.byId(w.id+"_customContactUs"))?(k.default.showHide(q,J.visible),q.href=J.url):(q=d.default.create("a",{href:J.url,innerHTML:w.i18n.customContactUs,id:w.id+"_customContactUs",class:J.visible?"footer__contact-us":"footer__contact-us hide"}),J=c.default.byId(w.id+"_contactEsri"),B.default.isDefined(J)?(d.default.place(q,J,"after"),d.default.place(I,J,"after")):(0<a.default.footerLinks.length&&d.default.place(I,
G,"last"),d.default.place(q,G,"last")))})};return F=r.__decorate([m.default(f.default,l.default)],F)}()})},"arcgisonline/sharing/dijit/SiteFooterMap":function(){define("require exports tslib ./SiteFooter ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/text!./templates/SiteFooterMap.html".split(" "),function(b,y,r,a,k,e,g,h){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);return function(){function m(){this.templateString=
h.default}return m=r.__decorate([k.default(g.default,e.default,a.default)],m)}()})},"arcgisonline/sharing/dijit/SignUp":function(){define(["dojo","dijit","dojox","dojo/require!dijit/_Widget,dijit/_Templated,dijit/form/Button,dijit/form/ValidationTextBox,arcgisonline/sharing/util,arcgisonline/sharing/geow/Geow,arcgisonline/sharing/geow/Account,arcgisonline/sharing/dijit/dialog/ChoiceDlg,arcgisonline/sharing/dijit/dialog/TermsOfUseDlg"],function(b,y,r){b.provide("arcgisonline.sharing.dijit.SignUp");
b.require("dijit._Widget");b.require("dijit._Templated");b.require("dijit.form.Button");b.require("dijit.form.ValidationTextBox");b.require("arcgisonline.sharing.util");b.require("arcgisonline.sharing.geow.Geow");b.require("arcgisonline.sharing.geow.Account");b.require("arcgisonline.sharing.dijit.dialog.ChoiceDlg");b.require("arcgisonline.sharing.dijit.dialog.TermsOfUseDlg");b.declare("arcgisonline.sharing.dijit.SignUp",[y._Widget,y._Templated],{util:arcgisonline.sharing.util,termsOfUseDlg:arcgisonline.sharing.dijit.dialog.TermsOfUseDlg,
geow:arcgisonline.sharing.geow.Geow,redirectUrl:esriGeowConfig.baseUrl+"index.html",orgRedirectUrl:esriGeowConfig.baseUrl+"organization.html",setupRedirectUrl:esriGeowConfig.baseUrl+"setup.html",widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv id\x3d"sign-up-form" class\x3d"grid_16"\x3e\r\n    \x3ch1 id\x3d"sign_up_title"\x3e\x3c/h1\x3e\r\n    \x3cdiv id\x3d"register-error"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv dojotype\x3d"dijit.form.Form" id\x3d"register-form" method\x3d"POST" action\x3d""\x3e\r\n      \x3cp class\x3d"register"\x3e\r\n        \x3cb id\x3d"sign-up-title"\x3e\x3c/b\x3e\r\n      \x3c/p\x3e\r\n      \x3cp class\x3d"freeTrial" style\x3d"display:none;"\x3e${i18n.activateTrialMsg}\x3c/p\x3e\r\n      \x3cp\x3e\r\n        \x3ctable\x3e\r\n          \x3ctbody\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"grid_2 alpha"\x3e\r\n                \x3clabel for\x3d"register_username" style\x3d"padding:0;margin:0;"\x3e\r\n                  ${i18n.userLabel}\r\n                \x3c/label\x3e\r\n              \x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cdiv id\x3d"register_username" name\x3d"register_username" class\x3d"grid_6 omega" style\x3d"padding:2px;margin:0;" dojotype\x3d"dijit.form.TextBox" trim\x3d"true"\x3e\r\n                \x3c/div\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr height\x3d"5"\x3e\r\n              \x3ctd colspan\x3d"2" height\x3d"5"\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd class\x3d"grid_2 alpha"\x3e\r\n                \x3clabel for\x3d"register_password" style\x3d"padding:0;margin:0;"\x3e\r\n                  ${i18n.passwordLabel}\r\n                \x3c/label\x3e\r\n              \x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cdiv id\x3d"register_password" name\x3d"register_password" class\x3d"grid_6 omega" style\x3d"padding:2px;margin:0;" type\x3d"password" dojotype\x3d"dijit.form.TextBox"trim\x3d"true"\x3e\r\n                \x3c/div\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd\x3e\x3c/td\x3e\r\n              \x3ctd\x3e\r\n                \x3cdiv class\x3d"freeTrial" style\x3d"display:none;"\x3e\r\n                  \x3ca dojoAttachPoint\x3d"_signInHelpLink" href\x3d"troubleshoot.html"\x3e${i18n.needHelpSign}\x3c/a\x3e\r\n                  \x3cdiv\x3e\r\n                    \x3cinput id\x3d"remember-me" value\x3d"off" dojotype\x3d"dijit.form.CheckBox" /\x3e\r\n                    \x3clabel for\x3d"remember-me"\x3e${i18n.rememberMe}\x3c/label\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"register"\x3e\r\n                  \x3cdiv id\x3d"forgotPasswordLinkDiv"\x3e\r\n                    \x3ca id\x3d"forgotPasswordLink"\x3e${i18n.forgotPassword}\x3c/a\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv style\x3d"margin-top:10px;"\x3e\r\n                  \x3cbutton id\x3d"button_sign_in" class\x3d"calcite blue" dojoAttachPoint\x3d\'_btnSignIn\' type\x3d"submit" label\x3d"${i18n.register}" dojotype\x3d"dijit.form.Button"\x3e\r\n\r\n                  \x3c/button\x3e\r\n                  \x3cimg dojoAttachPoint\x3d\'_keyImgicon\' style\x3d"display:none; position:absolute; padding-left:10px;"/\x3e\r\n                  \x3cbr/\x3e\r\n                  \x3cbr/\x3e\r\n                  \x3cdiv id\x3d"registerDiv"\x3e\r\n                  \x3cp\x3e\r\n                    \x3cb id\x3d"sign-up-no-account"\x3e\x3c/b\x3e\r\n                    \x3cbr/\x3e\r\n                    \x3cspan\x3e\x3ca id\x3d"registerLink"\x3e${i18n.createAccount}\x3c/a\x3e\x3c/span\x3e\r\n                  \x3c/p\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n          \x3c/tbody\x3e\r\n        \x3c/table\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"width:100%; clear:both;"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n',
i18n:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").signUpWidget);this.defaultOrgTitleText=this.i18n.myAccount},postCreate:function(){b.attr(this._keyImgicon,"src",this.util.relativeToExplicitUrl("images/goldKey.gif"));esriGeowConfig.portalName&&b.style(this._keyImgicon,"display","none")},startup:function(){this.inherited(arguments);b.mixin(this,
b.queryToObject(window.location.search.slice(1)));this.trial=this.type&&("trial"===this.type.toLowerCase()||"trial press"===this.type.toLowerCase());esri.config.defaults.io.proxyUrl=esriGeowConfig.proxyServer;this._svcUrl=esriGeowConfig.restBaseUrl+(esriGeowConfig.restBaseUrl.lastIndexOf("/")===esriGeowConfig.restBaseUrl.length-1?"":"/");this._communityUri=this._svcUrl+"community/";this._usersUri=this._communityUri+"users/";this._accountsUri=this._svcUrl+"portals/";this._requestParams={f:"json"};
this.loadConnections();esriGeowConfig.account_registration?b.byId("registerLink").href=esriGeowConfig.account_registration:b.style(b.byId("registerDiv"),"display","none");esriGeowConfig.forgotPwd?b.byId("forgotPasswordLink").href=esriGeowConfig.forgotPwd:b.style(b.byId("forgotPasswordLinkDiv"),"display","none");b.byId("sign-up-title").innerHTML=b.string.substitute(this.i18n.enterYourAccountInfo,{account:esriGeowConfig.esriGlobalAccount?esriGeowConfig.esriGlobalAccount:this.i18n.esriGlobalAccount});
b.byId("sign-up-no-account").innerHTML=b.string.substitute(this.i18n.dontHaveAccount,{account:esriGeowConfig.esriGlobalAccount?esriGeowConfig.esriGlobalAccount:this.i18n.esriGlobalAccount});this.trial?(b.attr("registerYour","innerHTML",this.i18n.activateTrial),this._btnSignIn.set("label",this.i18n.signIn),b.query(".registerYour").style("display","none"),b.query(".freeTrial").style("display","block")):esriGeowConfig.useDefaultIdentityStore?b.attr("registerYour","innerHTML",this.i18n.createAccount):
b.attr("registerYour","innerHTML",this.i18n.registerYour+(esriGeowConfig.esriGlobalAccount||this.i18n.esriGlobalAccount));setTimeout(function(){b.byId("register_username").focus()},350);b.subscribe("registerUser",this,"registerUser");b.subscribe("declineTermsOfUse",this,"declineTermsOfUse")},loadConnections:function(){b.connect(y.byId("button_register"),"onClick",this,"signUp");b.connect(y.byId("register-form"),"onSubmit",this,"signUp")},signIn:function(a){this.invitation?arcgisonline.sharing.geow.Account.getInvitation(this.invitation,
b.hitch(this,this.onInvitationInfo),b.hitch(this,this.onInvitationInfo)):this.activationcode?this._activateAccount(a).then(b.hitch(this,"routeUser")):this.routeUser()},onInvitationInfo:function(a,k){if(a&&a.code&&a.message&&403===a.code){var e="\x3cp\x3e"+this.i18n.emailInvitation+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkInstructions+"\x3c/p\x3e";k=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();k.onOkClick=b.hitch(this,function(h,m){h.hide();this.routeUser()},k);k.show({title:this.i18n.notice,
message:e})}else if(a&&a.code&&a.message&&400===a.code)e="\x3cp\x3e"+this.i18n.invitationUsedMsg+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkSignIn+"\x3c/p\x3e",k=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),k.onOkClick=b.hitch(this,function(h,m){h.hide();this.routeUser()},k),k.show({title:this.i18n.notice,message:e});else if(a&&a.id&&a.id===this.invitation){k=arcgisonline.sharing.util.getUser();var g="\x3cp\x3e"+b.string.substitute(this.i18n.membershipPending,{account:"\x3cstrong\x3e"+
a.account.name+"\x3c/strong\x3e"})+"\x3c/p\x3e";k="\x3cp\x3e\x3cstrong\x3e"+b.string.substitute(this.i18n.ByAcceptingInvite,{account:a.account.name,name:k.username})+"\x3c/strong\x3e\x3c/p\x3e\x3cp\x3e\x3cul\x3e\x3cli\x3e"+b.string.substitute(this.i18n.transferMsg,{account:a.account.name,name:k.username})+"\x3c/li\x3e\x3cli\x3e"+this.i18n.leaveOrganization+"\x3c/li\x3e\x3cli\x3e"+b.string.substitute(this.i18n.itemsMsg,{beginStrong:"\x3cstrong\x3e",endStrong:"\x3c/strong\x3e"})+"\x3c/li\x3e\x3cli\x3e"+
this.i18n.accountManagedMsg+"\x3c/li\x3e\x3c/ul\x3e\x3c/p\x3e\x3cp\x3e"+b.string.substitute(this.i18n.currentOrNewAccount,{account:a.account.name})+"\x3c/p\x3e";e={title:this.i18n.notice,message:k,choiceOneTitle:this.i18n.useCurrentAccount,choiceTwoTitle:this.i18n.createNewOne};e.choiceOneHandler=b.hitch(this,function(h){a.mustApprove&&!0===a.mustApprove?(h=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),h.onOkClick=b.hitch(this,function(m){m.hide();arcgisonline.sharing.geow.Account.acceptInvitation(this.invitation,
b.hitch(this,this.onInvitationAccepted),b.hitch(this,this.onInvitationAccepted))},h),h.show({title:this.i18n.notice,message:g})):arcgisonline.sharing.geow.Account.acceptInvitation(this.invitation,b.hitch(this,this.onInvitationAccepted),b.hitch(this,this.onInvitationAccepted))});e.choiceTwoHandler=b.hitch(this,function(h){this.routeUser()});k=arcgisonline.sharing.dijit.dialog.ChoiceDlg.prototype.statics.getInstance();k.show(e)}else this.routeUser()},onInvitationAccepted:function(a){if(a&&a.success&&
!0===a.success){var k={username:y.byId("register_username").getValue(),password:y.byId("register_password").getValue(),expiration:esriGeowConfig.tokenExpiration};this.geow.signin(k,b.hitch(this,this.routeUser),b.hitch(this,"signInError"))}else a&&a.code&&a.message&&500===a.code&&"Invitation has already been accepted."===b.trim(a.message)?(a="\x3cp\x3e"+this.i18n.acceptedInvite+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOk+"\x3c/p\x3e",k=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),
k.onOkClick=b.hitch(this,function(e,g){e.hide();this.routeUser()},k),k.show({title:this.i18n.notice,message:a})):(k=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),k.onOkClick=b.hitch(this,function(e,g){e.hide();window.location=esriGeowConfig.baseUrl.replace("http:","https:")+esriGeowConfig.signin+"?invitation\x3d"+this.invitation},k),a.code&&a.message?("User already member of an account."===a.message&&(a.message=this.i18n.userAnotheOrg),k.show({title:this.i18n.unableJoin,
message:a.message})):k.show({title:this.i18n.unableJoin,message:this.i18n.problemJoingOrg}))},routeUser:function(){var a=this.returnUrl,k=esriGeowConfig.baseUrl+esriGeowConfig.signin;a&&-1<a.indexOf(k)&&(a=null);(this._user=this.util.getUser()).accountId?this._fetchSelf().then(b.hitch(this,"routeOrg")):window.location=a?a:esriGeowConfig.baseUrl.replace("https:","http:")+"user.html?newUser\x3dtrue"},routeOrg:function(a,k){k=this._user;var e=this.returnUrl,g=esriGeowConfig.baseUrl+esriGeowConfig.signin;
e&&-1<e.indexOf(g)&&(e=null);var h=this._organization=a||{};a=h.allSSL;e?(h.urlKey&&h.customBaseUrl&&(k=this._util.parseUrl(e).host,-1===k.indexOf(h.urlKey+"."+h.customBaseUrl)&&(g=this.util.getCookie("esri_auth"),e=e.replace(k,h.urlKey+"."+h.customBaseUrl),e=this.util.getBridgeUrl(e,g))),window.location=a?e.replace("http:","https:"):e):h.urlKey&&h.customBaseUrl?(g=null,-1===window.location.host.indexOf(h.urlKey+"."+h.customBaseUrl)&&(g=this.util.getCookie("esri_auth")),e=(a?"https:":"http:")+"//"+
h.urlKey+"."+h.customBaseUrl,h=esriGeowConfig.baseUrl.indexOf(location.host),e=-1<h?e+(esriGeowConfig.baseUrl.substring(h+location.host.length)+("account_admin"===k.role?"organization.html":"index.html")):a?this.redirectUrl.replace("http:","https:"):this.redirectUrl.replace("https:","http:"),g&&(e=esriGeowConfig.bridgeUrl+"?url\x3d"+e+"\x26exp\x3d"+Math.ceil((new Date(g.expires)-new Date)/1E3)),window.location=e):window.location="account_admin"!==k.role||h.urlKey?"account_admin"===k.role&&this.activationcode?
a?this.orgRedirectUrl.replace("http:","https:"):this.orgRedirectUrl.replace("https:","http:"):a?this.redirectUrl.replace("http:","https:"):this.redirectUrl.replace("https:","http:"):a?this.setupRedirectUrl.replace("http:","https:"):this.setupRedirectUrl.replace("https:","http:")},signUp:function(a){a.preventDefault();b.query("#register-error")&&(b.byId("register-error").innerHTML="",b.removeClass("register-error","error"));!1!==this.validateForm()&&(y.byId("button_sign_in").set("disabled",!0),this.trial||
y.byId("button_sign_in").set("label",this.i18n.registering),esriGeowConfig.portalName?this.registerUser():this.trial&&this.activationcode?(this.signout(),this._signin(b.hitch(this,function(){this.termsOfUseDlg.prototype.statics.getInstance().show()})).then(b.hitch(this,function(){this._showAlreadyRegisteredDlg()}))):this.termsOfUseDlg.prototype.statics.getInstance().show())},_showAlreadyRegisteredDlg:function(){var a=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();a.show({title:this.i18n.alreadyRegisteredTitle,
message:this.i18n.alreadyRegistered});var k=b.connect(a,"onHide",b.hitch(this,function(){b.disconnect(k);y.byId("register_username").set("value","");y.byId("register_password").set("value","");y.byId("button_sign_in").set("disabled",!1);setTimeout(b.hitch(function(){y.byId("register_username").focus()}),300)}))},validateForm:function(){var a=y.byId("register_username").getValue(),k=y.byId("register_password").getValue(),e=null;if(!(null!=a&&""!==a||null!=k&&""!==k))e=this.i18n.error.userNamePassRqd;
else if(null==a||""===a)e=this.i18n.error.usernameRqd;else if(null==k||""===k)e=this.i18n.error.passRqd;if(null==e)return!0;this.showError({message:e});return!1},signout:function(){esriGeowConfig.userInfo=null;esriGeowConfig.userPreferences=null;b.cookie("esri_auth",null,{expires:-1,path:"/",domain:document.domain});b.cookie("ESRI_Webmap",null,{expires:-1,path:"/",domain:document.domain});b.publish("onSignOut",[])},registerUser:function(a){a=b.byId("register_username").value;var k=b.byId("register_password").value;
a={username:a,password:k};this.signout();this.geow.signup(a,b.hitch(this,function(e,g){if(null!=e.error&&""!==e.error)y.byId("button_sign_in").set("disabled",!1),y.byId("button_sign_in").set("label",this.trial?this.i18n.signIn:this.i18n.register),this.errorHandler(e,g);else return this._signin().then(b.hitch(this,"signIn"))}),b.hitch(this,"signInError"))},declineTermsOfUse:function(){y.byId("button_sign_in").set("disabled",!1)},signInError:function(a,k){y.byId("button_sign_in").set("disabled",!1);
y.byId("button_sign_in").set("label",this.trial?this.i18n.signIn:this.i18n.register);k="\x3cb style\x3d'font-size:1.2em;line-height:30px;'\x3e"+b.string.substitute(this.i18n.unableRegister,{portalName:esriGeowConfig.portalName?esriGeowConfig.portalName:this.i18n.arcgisOnline})+"\x3c/b\x3e\x3cbr/\x3e";k+="\x3cspan style\x3d'color:#000000;'\x3e";k=a.code&&500===a.code&&a.message&&"Unable to register user. Username contains unsupported characters."===a.message?k+this.i18n.invalidUsername:k+(this.i18n.usernameSpellCheck+
"\x3cbr/\x3e"+this.i18n.caseSensitive);this.showError({message:k+"\x3c/span\x3e\x3cbr/\x3e\x26nbsp;"})},_activateAccount:function(a){return this._request(this._accountsUri+"activate",{code:this.activationcode,token:a.token},{usePost:!0,errBack:b.hitch(this,"_activateError")}).then(b.hitch(this,"_signin"))},_activateError:function(a){a.details=a.details&&a.details.length?b.filter(a.details,"return item !\x3d\x3d null"):null;a.details&&a.details.length&&(a.details=a.details.join("\x3cbr /\x3e"),a.message=
a.message?a.message+"\x3cbr /\x3e"+a.details:a.details);a=b.mixin(b.mixin({},{title:"Error",message:"There was an error."}),a);var k=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();k.onOkClick=b.hitch(this,function(e){e.hide();this.routeUser()},k);k.show(a)},_signin:function(a){var k=new b.Deferred,e={username:y.byId("register_username").getValue(),password:y.byId("register_password").getValue(),expiration:b.byId("remember-me").checked?esriGeowConfig.longTokenExpiration:
esriGeowConfig.tokenExpiration};this.geow.signin(e,b.hitch(this,"_resolveDfd",k),a||b.hitch(this,"signInError"));return k},_resolveDfd:function(a,k){if(k.error)throw this.signInError(k.error),k.error;a.resolve(k)},_fetchSelf:function(){var a=this.util.getUser();esriGeowConfig.self=null;return this._request(this._accountsUri+"self",{token:a.token})},_request:function(a,k,e){k=b.mixin(k||{},this._requestParams);return this.util.request({url:a,content:k},e||{}).then(b.hitch(this,function(g){return g.error?
e.errBack?e.errBack(g.error):this._showError(g.error):g}),b.hitch(this,function(g){e.errBack?e.errBack(g):this._showError(g);throw g;}))},showError:function(a){a=a.error||a||{};a.code=a.code||0;a.details=a.details&&a.details.length?b.filter(a.details,"return item !\x3d\x3d null"):null;a.details&&a.details.length&&(a.details=a.details.join("\x3cbr /\x3e"),a.message=a.message?a.message+"\x3cbr /\x3e"+a.details:a.details);b.addClass("register-error","error");b.attr(b.byId("register-error"),"innerHTML",
a.message+"");return!0}})})},"arcgisonline/sharing/dijit/dialog/ChoiceDlg":function(){define("require dojo/_base/declare dojo/_base/lang dojo/dom dojo/dom-attr dojo/dom-construct dojo/on dojo/query dojo/aspect dijit/Dialog dijit/form/Button dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin esri/lang ../../../esriGeowConfig dojo/i18n!../../../nls/arcgisonline dojo/text!./templates/ChoiceDlg.html".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A){var B=y("arcgisonline.sharing.dijit.dialog.ChoiceDlg",
[c,d,u],{declaredClass:"arcgisonline.sharing.dijit.dialog.ChoiceDlg",widgetsInTemplate:!0,templateString:A,title:"",message:"",choiceOneButton:null,choiceOneTitle:"",choiceOneHandler:null,choiceTwoButton:null,choiceTwoTitle:"",choiceTwoHandler:null,choiceOneConn:null,choiceTwoConn:null,postCreate:function(){this.choiceOneHandler=g(this.choiceOneButton,"click",r.hitch(this,"onChoiceOneClick"));this.choiceTwoHandler=g(this.choiceTwoButton,"click",r.hitch(this,"onChoiceTwoClick"))},postMixInProperties:function(){this.inherited(arguments);
this.i18n=r.mixin({},x.common);r.mixin(this.i18n,x.choiceDlg);this.choiceOneTitle=this.i18n.ok;this.choiceTwoTitle=this.i18n.cancel},destroy:function(){this.inherited(arguments);n.isDefined(this.choiceOneConn)&&this.choiceOneConn.remove();n.isDefined(this.choiceTwoConn)&&this.choiceTwoConn.remove()},show:function(F){F.title&&""!==F.title&&(this.title=F.title);F.message&&""!==F.message&&(this.message=F.message);F.choiceOneTitle&&""!==F.choiceOneTitle&&(this.choiceOneTitle=F.choiceOneTitle);F.choiceTwoTitle&&
""!==F.choiceTwoTitle&&(this.choiceTwoTitle=F.choiceTwoTitle);F.choiceOneHandler&&(this.choiceOneHandler=F.choiceOneHandler,this.setChoiceOneHandler());F.choiceTwoHandler&&(this.choiceTwoHandler=F.choiceTwoHandler,this.setChoiceTwoHandler());F.closeHandler&&m.after(this._dialog,"onCancel",F.closeHandler);this._dialog.set("title",this.title);k.set(this.choiceContent,"innerHTML",this.message);this.choiceOneButton.set("label",this.choiceOneTitle);this.choiceTwoButton.set("label",this.choiceTwoTitle);
this._dialog.show()},setChoiceOneHandler:function(){n.isDefined(this.choiceOneConn)&&(this.choiceOneConn.remove(),this.choiceOneConn=void 0);this.choiceOneConn=g(this.choiceOneButton,"click",r.hitch(this,function(){this.hide();this.choiceOneHandler()}))},setChoiceTwoHandler:function(){n.isDefined(this.choiceTwoConn)&&(this.choiceTwoConn.remove(),this.choiceTwoConn=void 0);this.choiceTwoConn=g(this.choiceTwoButton,"click",r.hitch(this,function(){this.hide();this.choiceTwoHandler()}))},onChoiceOneClick:function(){this.hide()},
onChoiceTwoClick:function(){this.hide()},hide:function(){this._dialog.hide()}});B.prototype.statics={getInstance:function(){this._instance||(this._instance=new B);return this._instance}};return B})},"arcgisonline/sharing/dijit/dialog/TermsOfUseDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/_Widget,dijit/_Templated,arcgisonline/sharing/util,dijit/Dialog"],function(b,y,r){b.provide("arcgisonline.sharing.dijit.dialog.TermsOfUseDlg");b.require("dijit._Widget");b.require("dijit._Templated");
b.require("arcgisonline.sharing.util");b.require("dijit.Dialog");b.declare("arcgisonline.sharing.dijit.dialog.TermsOfUseDlg",[y._Widget,y._Templated],{util:arcgisonline.sharing.util,widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContainer"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" id\x3d"terms-of-use-dialog" data-dojo-attach-point\x3d"_dialog" title\x3d"${i18n.title}" execute\x3d"" style\x3d"overflow-y:auto;"\x3e\r\n    \x3cform id\x3d"terms-of-use-form" method\x3d"POST" action\x3d"" style\x3d"height:100%;overflow-y:auto;padding-left:10px;"\x3e\r\n      \x3cdiv style\x3d"height:30px; text-align:center;"\x3e\r\n        \x3cspan style\x3d"font-size:1.1em; font-weight:bold"\x3e${i18n.termsOfUseTitle}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" id\x3d"tos" style\x3d"background:#FFF;border:solid 1px #000;overflow-x:hidden;overflow-y:hidden;width:400px;height:250px;"\x3e\r\n        \x3ca href\x3d\'\'\x3e\x3c/a\x3e\r\n        \x3ciframe id\x3d"termsFrame" src\x3d"termsofuse.html" style\x3d"width:100%;height:250px;max-width:100%;max-height:250px;"\x3e\x3c/iframe\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"padding-top:10px;"\x3e\r\n        \x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"http://www.esri.com/legal/licensing-translations" target\x3d"_blank"\x3e${i18n.otherLanguages}\x3c/a\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv style\x3d"height:40px; padding-top:10px;"\x3e\r\n        \x3cbutton id\x3d"button_accept" type\x3d"submit" class\x3d"primary" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n            ${i18n.accept}\r\n        \x3c/button\x3e\r\n        \x3cbutton id\x3d"button_decline" class\x3d"jevent cancel" type\x3d"cancel" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n            ${i18n.noaccept}\r\n        \x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
_firstLoad:!0,statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.TermsOfUseDlg);return this._instance}},postMixInProperties:function(){this.inherited(arguments);this.i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").termsOfUseDlg)},postCreate:function(){this.loadConnections()},show:function(a){y.byId("terms-of-use-dialog").show();esri.isTouchEnabled?
(b.style(b.byId("terms-of-use-dialog"),"width","500px"),b.style(b.byId("tos"),"width","455px"),b.style(b.byId("tos"),"overflow-y","scroll")):this._firstLoad&&(b.style(b.byId("terms-of-use-dialog"),"width","455px"),b.isFF||10>b.isIE?(b.isFF&&b.style(b.byId("tos"),"height",parseInt(b.style(b.byId("terms-of-use-dialog"),"height"))-169+"px"),9>b.isIE&&b.style(b.byId("tos"),"height",parseInt(b.style(b.byId("terms-of-use-dialog"),"height"))-208+"px"),8>b.isIE&&b.style(b.byId("tos"),"height",parseInt(b.style(b.byId("terms-of-use-dialog"),
"height"))-133+"px")):b.style(b.byId("tos"),"height",parseInt(b.style(b.byId("terms-of-use-dialog"),"height"))-169+"px"),b.style(b.byId("terms-of-use-form"),"overflow-y","hidden"),this._firstLoad=!1)},loadConnections:function(){b.query(".jevent").connect("onclick",function(a){a.preventDefault()});b.connect(b.byId("button_decline"),"onclick",this,"declineTerms");b.connect(b.byId("terms-of-use-form"),"onsubmit",this,"registerUser")},hide:function(){y.byId("terms-of-use-dialog").hide()},registerUser:function(a){a.preventDefault();
this.hide();b.publish("registerUser",["true"])},declineTerms:function(a){a.preventDefault();this.hide();b.publish("declineTermsOfUse",["true"])}})})},"arcgisonline/sharing/dijit/SignUpInternal":function(){define("require exports tslib ../../esriGeowConfig ../../pages/pageUtil ../../pages/dijit/PasswordStrength ../../pages/portal/Portal ../../pages/utils/dom ../../pages/utils/validation ../geow/Account ./dialog/GeneralDlg ../geow/Geow ./Role ../util ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/dom-attr dojo/dom-construct dojo/_base/kernel dojo/string dojo/i18n!../../nls/arcgisonline dojo/io-query dojo/_base/lang dojo/on dojo/text!./templates/SignUpInternal.html dojo/topic esri/config esri/lang".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v,z,C,E,G,H,K){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);u=r.__importDefault(u);n=r.__importDefault(n);t=r.__importDefault(t);x=r.__importDefault(x);A=r.__importDefault(A);B=r.__importDefault(B);F=r.__importDefault(F);w=r.__importDefault(w);D=r.__importDefault(D);
q=r.__importDefault(q);v=r.__importDefault(v);z=r.__importDefault(z);C=r.__importDefault(C);E=r.__importDefault(E);G=r.__importDefault(G);H=r.__importDefault(H);K=r.__importDefault(K);return function(){function I(){this.templateString=E.default;this.widgetsInTemplate=!0;this.i18n=r.__assign(r.__assign(r.__assign({},q.default.common),q.default.signUpInternalWidget),{securityQuestions:q.default.securityQuestions,passwordTooWeak:q.default.myOrganization.inviteMembers.passwordTooWeak,usernameTooShort:q.default.organizationInvite.step2Create.invalid.usernameTooShort,
usernameTooLong:q.default.organizationInvite.step2Create.invalid.usernameTooLong,usernameInvalidChars:q.default.organizationInvite.step2Create.invalid.usernameInvalidChars,usernameStartEndChars:q.default.organizationInvite.step2Create.invalid.usernameStartEndChars});this.redirectUrl=a.default.baseUrl.replace("https:","http:")+"index.html";this.orgRedirectUrl=a.default.baseUrl.replace("https:","http:")+"organization.html";this.isValidUsername=!1;this.accountMode="arcgis"}I.prototype.postCreate=function(){this.inherited(arguments);
this._fetchPasswordPolicy()};I.prototype.startup=function(){var J=this;this.inherited(arguments);l.default.getSelf(function(Q){J._portal=new g.default({url:a.default.restBaseUrl,self:z.default.clone(Q)});J._portal.on("load",function(){J._setupPasswordStrength()});H.default.defaults.io.corsEnabledServers.push(a.default.DEPLOY_ROOT);H.default.defaults.io.corsEnabledServers.push("http://"+location.host);H.default.defaults.io.corsEnabledServers.push("https://"+location.host);H.default.defaults.io.proxyUrl=
a.default.proxyUrl;z.default.mixin(J,v.default.queryToObject(window.location.search.slice(1)));J._svcUrl=a.default.restBaseUrl+(a.default.restBaseUrl.lastIndexOf("/")===a.default.restBaseUrl.length-1?"":"/");J._communityUri=J._svcUrl+"community/";B.default.set("registerYour","innerHTML",J.i18n.signUpInternalTitle);J._setupQuestions();J._loadConnections();J._checkInvitation();setTimeout(function(){J._firstname.focus()},50);G.default.subscribe("registerUser",J._registerUser.bind(J));J._adjustNameRows()})};
I.prototype._loadConnections=function(){this.own(C.default(this._firstname,"change",this._validFirstName.bind(this)),C.default(this._lastname,"change",this._validLastName.bind(this)),C.default(this._email,"change",this._validEmail.bind(this)),C.default(this._confirmEmail,"change",this._validConfirmEmail.bind(this)),C.default(this._username,"change",this._usernameChange.bind(this)),C.default(this._pwd,"change",this._validPassword.bind(this)),C.default(this._pwd,"keyup",this._validPassword.bind(this)),
C.default(this._verifyPwd,"change",this._validVerifyPassword.bind(this)),C.default(this._identityQuestion,"change",this._identityQuestionChange.bind(this)),C.default(this._identityAnswer,"change",this._validIdentityAnswer.bind(this)),C.default(this._form,"submit",this._signUp.bind(this)),C.default(this._cancelBtn,"click",this._cancel.bind(this)))};I.prototype._adjustNameRows=function(){"ja"===w.default.locale&&F.default.place("first-name-block","last-name-block","after")};I.prototype._checkInvitation=
function(){var J=this;this.invitation&&this._fetchInvitation().then(function(Q){J.invitationOrgName=Q.account.name},this._fetchInvitationError.bind(this))};I.prototype._setupPasswordStrength=function(){this._strengthMeter=new e.default({baseClass:"leader-half",portal:this._portal},this.domNode.querySelector(".js-strength-meter"));this._strengthMeter.update(this._pwd.value)};I.prototype._setupQuestions=function(){var J=this;this.identityQuestions=[{id:0,name:this.i18n.securityQLabel},{id:1,name:this.i18n.securityQuestions[1]},
{id:2,name:this.i18n.securityQuestions[2]},{id:3,name:this.i18n.securityQuestions[3]},{id:4,name:this.i18n.securityQuestions[4]},{id:5,name:this.i18n.securityQuestions[5]},{id:6,name:this.i18n.securityQuestions[6]},{id:7,name:this.i18n.securityQuestions[7]},{id:8,name:this.i18n.securityQuestions[8]},{id:9,name:this.i18n.securityQuestions[9]},{id:10,name:this.i18n.securityQuestions[10]},{id:11,name:this.i18n.securityQuestions[11]},{id:12,name:this.i18n.securityQuestions[12]},{id:13,name:this.i18n.securityQuestions[13]},
{id:14,name:this.i18n.securityQuestions[14]}];this.identityQuestions.forEach(function(Q){F.default.create("option",{value:Q.id,innerHTML:Q.name},J._identityQuestion)})};I.prototype._fetchPasswordPolicy=function(){var J=this;u.default.request({url:u.default.getSecureUrl(a.default.restBaseUrl)+"portals/self/securityPolicy/passwordPolicy"}).then(function(Q){J._passwordPolicy=!Q||Q.code||Q.messageCode?null:Q})};I.prototype._registerUser=function(J){var Q=this;J=D.default.trim(this._firstname.value);var V=
D.default.trim(this._lastname.value),O=D.default.trim(this._email.value),S=u.default.stripHTML(D.default.trim(this._username.value)),L=D.default.trim(this._pwd.value),Y=D.default.trim(this._identityAnswer.value),ca={fullname:"ja"===w.default.locale?V+" "+J:J+" "+V,firstname:J,lastname:V,email:O,username:S,password:L,securityQuestionIdx:this._identityQuestionID,securityAnswer:Y,invitationId:void 0,provider:void 0};this.invitation&&(ca.invitationId=this.invitation,ca.provider=this.accountMode);c.default.signup(ca,
function(U,X){null!=U.error&&""!==U.error?(h.default.disableNode(Q._createAccountBtn,!1),B.default.set(Q._createAccountBtn,"innerHTML",Q.i18n.createAcc),U.error.messageCode&&"COM_1054"===U.error.messageCode?k.default.createSpecifiedDialog(f.default).show({title:Q.i18n.errorTitle,message:Q.i18n.error.maxUsers}):Q._handleError(U)):Q.invitation?c.default.signInHandler(ca.username,Q._acceptInvitation.bind(Q,ca),Q._signInError.bind(Q),U,X):c.default.signInHandler(ca.username,Q._signIn.bind(Q,S,L),Q._signInError.bind(Q),
U,X)}.bind(this),this._signUpError.bind(this))};I.prototype._signIn=function(J,Q){var V=this;c.default.signin({username:J,password:Q,expiration:a.default.tokenExpiration},function(){a.default.self=null;l.default.getSelf(V.routeUser.bind(V))},this._signInError.bind(this))};I.prototype.routeUser=function(J){var Q=u.default.getUser(),V=new d.default({portalUser:J.user||{}}),O=v.default.queryToObject(window.location.search.slice(1)).returnUrl;if(!J||J.code||J.message)null!==O?window.location=O:(Q=u.default.getHttpUrl()+
"user.html?newUser\x3dtrue",window.location=u.default.getSecureUrl(Q));else{J=J.allSSL;var S=u.default.usePortalSSL();this.redirectUrl=u.default.getHttpUrl()+"index.html";this.orgRedirectUrl=u.default.getHttpUrl()+"organization.html";O?(S=-1<O.indexOf("https:"),window.location=J||S?u.default.getSecureUrl(O):O):"account_admin"===Q.role&&(!a.default.self.restrictOrganizationPageToAdmin&&V.canViewOrgUsers()||a.default.self.restrictOrganizationPageToAdmin&&V.isAdmin())?window.location=J||S?u.default.getSecureUrl(this.orgRedirectUrl):
this.orgRedirectUrl:window.location=J||S?u.default.getSecureUrl(this.redirectUrl):this.redirectUrl}};I.prototype._acceptInvitation=function(J){var Q=this;l.default.acceptInvitation(this.invitation,function(){c.default.signin({username:J.username,password:J.password,expiration:a.default.tokenExpiration},Q._signIn.bind(Q),Q._signInError.bind(Q))},this._acceptFail.bind(this))};I.prototype._signUp=function(J){var Q=this;J&&J.preventDefault();this._validates().then(function(V){V&&(h.default.disableNode(Q._createAccountBtn,
!0),B.default.set(Q._createAccountBtn,"innerHTML",Q.i18n.creatingAcc),Q._registerUser(!0))})};I.prototype._cancel=function(){var J=a.default.baseUrl.replace("http:","https:")+a.default.signin;this.invitation&&(J+="?invitation\x3d"+this.invitation);window.location=J};I.prototype._fetchInvitationError=function(J){if(J&&J.code&&J.message&&403===J.code){J="\x3cp\x3e"+this.i18n.emailInvitation+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkSignIn+"\x3c/p\x3e";var Q=k.default.createSpecifiedDialog(f.default);Q.onOkClick=
function(){Q.hide();window.location=a.default.baseUrl.replace("http:","https:")+a.default.signin};Q.show({title:this.i18n.notice,message:J})}else J&&J.code&&J.message&&400===J.code?(J="\x3cp\x3e"+this.i18n.invitationUsedMsg+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkSignIn+"\x3c/p\x3e",Q=k.default.createSpecifiedDialog(f.default),Q.onOkClick=function(){Q.hide();window.location=u.default.getSecureUrl()+a.default.signin},Q.show({title:this.i18n.notice,message:J})):(null===J||void 0===J?void 0:J.id)===this.invitation?
this.invitationOrgName=J.account.name:this.invitation=null};I.prototype._acceptFail=function(){var J=this,Q=k.default.createSpecifiedDialog(f.default);Q.onOkClick=function(){Q.hide();h.default.disableNode(J._createAccountBtn,!1);B.default.set(J._createAccountBtn,"innerHTML",J.i18n.createAcc)};Q.show({title:this.i18n.unableToJoin,message:this.i18n.problemJoining})};I.prototype._usernameChange=function(){var J=u.default.stripHTML(D.default.trim(this._username.value)),Q=this._handleCheckUsername.bind(this);
l.default.checkUsernames([u.default.stripHTML(J)],Q,Q)};I.prototype._identityQuestionChange=function(){var J=this._identityQuestion.value;this._identityQuestionID=J?parseInt(J,10):void 0;this._validIdentityQuestion()};I.prototype._handleCheckUsername=function(J){this.isValidUsername=!1;var Q=u.default.stripHTML(D.default.trim(this._username.value));!J||J.code||J.message?J.messageCode&&"DB_0006"===J.messageCode?this._showErrorMessage(this.i18n.error.restrictedCharacters):Q?this._showErrorMessage(this.i18n.error.checkingUsername):
this.isValidUsername=!0:0<(null===J||void 0===J?void 0:J.usernames.length)&&Q===J.usernames[0].suggested&&(this.isValidUsername=!0);this._validUsername()};I.prototype._signUpError=function(J){h.default.disableNode(this._createAccountBtn,!1);B.default.set(this._createAccountBtn,"innerHTML",this.i18n.createAccount);var Q=this.i18n.unableCreateAccount,V=this.i18n.contactAdmin;-1<J.message.indexOf("already registered")&&(V=this.i18n.error.emailInUse);-1<J.message.indexOf("Username '")&&-1<J.message.indexOf("' not available.")&&
(V=this.i18n.error.usernameInValid);J='\x3cb style\x3d"font-size:1.2em;line-height:30px;"\x3e'+Q+'\x3c/b\x3e\x3cbr\x3e\x3cspan style\x3d"color:#000000;"\x3e'+V;J+="\x3c/span\x3e\x3cbr\x3e\x26nbsp;";this._showErrorMessage(J)};I.prototype._signInError=function(){h.default.disableNode(this._createAccountBtn,!1);B.default.set(this._createAccountBtn,"innerHTML",this.i18n.createAccount);var J="\x3cb style\x3d'font-size:1.2em;line-height:30px;'\x3e"+this.i18n.unableSignAuto+"\x3c/b\x3e\x3cbr\x3e";J=J+'\x3cspan style\x3d"color:#000000;"\x3e'+
this.i18n.pleaseTrySignManually;this._showErrorMessage(J+"\x3c/span\x3e\x3cbr\x3e\x26nbsp;")};I.prototype._showErrorMessage=function(J){k.default.createSpecifiedDialog(f.default).show({title:this.i18n.errorTitle,message:J})};I.prototype._usernameContainsAlphaNumeric=function(J){var Q=/^[a-zA-Z0-9@_\.]+$/g;return J&&!!Q.test(J)};I.prototype._usernameValidStartEnd=function(J){var Q=/^([a-zA-Z0-9_][a-zA-Z0-9@_\-\.]+[a-zA-Z0-9_])?$/g;return J&&Q.test(J)};I.prototype._validFirstName=function(){var J=D.default.trim(this._firstname.value);
m.default.clearState([this._firstname,this._firstnameError]);if(K.default.isDefined(J)&&""!==J)return m.default.setValidState(this._firstname),!0;m.default.setInvalidState(this._firstname,this._firstnameError,this.i18n.error.firstNameReqd);return!1};I.prototype._validLastName=function(){var J=D.default.trim(this._lastname.value);m.default.clearState([this._lastname,this._lastnameError]);if(K.default.isDefined(J)&&""!==J)return m.default.setValidState(this._lastname),!0;m.default.setInvalidState(this._lastname,
this._lastnameError,this.i18n.error.lastNameReqd);return!1};I.prototype._validEmail=function(){var J=D.default.trim(this._email.value);m.default.clearState([this._email,this._emailError]);if(K.default.isDefined(J)&&0!==J.length&&u.default.isValidEmailAddress(J))return m.default.setValidState(this._email),!0;m.default.setInvalidState(this._email,this._emailError,this.i18n.error.emailReqd);return!1};I.prototype._validConfirmEmail=function(){var J=D.default.trim(this._email.value),Q=D.default.trim(this._confirmEmail.value);
m.default.clearState([this._confirmEmail,this._confirmEmailError]);if(K.default.isDefined(Q)&&0!==Q.length&&u.default.isValidEmailAddress(Q)){if(J!==Q)return m.default.setInvalidState(this._confirmEmail,this._confirmEmailError,this.i18n.error.confirmEmailNoMatch),!1;m.default.setValidState(this._confirmEmail);return!0}m.default.setInvalidState(this._confirmEmail,this._confirmEmailError,this.i18n.error.confirmEmailReqd);return!1};I.prototype._validUsername=function(){var J=u.default.stripHTML(D.default.trim(this._username.value));
m.default.clearState([this._username,this._usernameError]);if(K.default.isDefined(J)&&""!==J){if(6>J.length)return m.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameTooShort),!1;if(128<J.length)return m.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameTooLong),!1;if(this._usernameContainsAlphaNumeric(J)){if(this._usernameValidStartEnd(J)){if(this.isValidUsername)return m.default.setValidState(this._username),!0;J=D.default.substitute(this.i18n.error.usernameInUse,
{username:J,linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'"+u.default.getSecureUrl(a.default.baseUrl)+a.default.signin+window.location.search+"'\x3e",linkEnd:"\x3c/a\x3e\x3c/span\x3e"});m.default.setInvalidState(this._username,this._usernameError,J);return!1}m.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameStartEndChars)}else return m.default.setInvalidState(this._username,this._usernameError,this.i18n.usernameInvalidChars),!1}else return m.default.setInvalidState(this._username,
this._usernameError,this.i18n.error.userReqd),!1};I.prototype._validPassword=function(){var J=this,Q=u.default.stripHTML(D.default.trim(this._username.value)),V=D.default.trim(this._pwd.value);m.default.clearState([this._pwd,this._pwdError]);return this._strengthMeter.update(V).then(function(O){if(K.default.isDefined(V)&&""!==V){if(J._passwordPolicy){if(!O.isValidStrength)return m.default.setInvalidState(J._pwd,J._pwdError,J.i18n.passwordTooWeak),!1;if(O.isValid){if(Q.toLowerCase()===V.toLowerCase())return m.default.setInvalidState(J._pwd,
J._pwdError,J.i18n.passwordNotToPolicy),!1;m.default.setValidState(J._pwd);return!0}if(!1===O.longEnough)return m.default.setInvalidState(J._pwd,J._pwdError,D.default.substitute(J.i18n.error.passwordLength,{num:J._passwordPolicy.minLength})),!1;if(!1===O.enoughLetter)return m.default.setInvalidState(J._pwd,J._pwdError,D.default.substitute(J.i18n.error.passwordLetter,{num:J._passwordPolicy.minLetter})),!1;if(!1===O.enoughUpper)return m.default.setInvalidState(J._pwd,J._pwdError,D.default.substitute(J.i18n.error.passwordUpper,
{num:J._passwordPolicy.minUpper})),!1;if(!1===O.enoughLower)return m.default.setInvalidState(J._pwd,J._pwdError,D.default.substitute(J.i18n.error.passwordLower,{num:J._passwordPolicy.minLower})),!1;if(!1===O.enoughDigit)return m.default.setInvalidState(J._pwd,J._pwdError,D.default.substitute(J.i18n.error.passwordDigit,{num:J._passwordPolicy.minDigit})),!1;if(!1===O.enoughOther)return m.default.setInvalidState(J._pwd,J._pwdError,D.default.substitute(J.i18n.error.passwordOther,{num:J._passwordPolicy.minOther})),
!1;m.default.setValidState(J._pwd);return!0}if(O.isValidStrength){if(8>V.length||28<V.length)return m.default.setInvalidState(J._pwd,J._pwdError,J.i18n.error.invalidPassword),!1;if(Q.toLowerCase()===V.toLowerCase())return m.default.setInvalidState(J._pwd,J._pwdError,J.i18n.passwordNotToPolicy),!1;m.default.setValidState(J._pwd);return!0}m.default.setInvalidState(J._pwd,J._pwdError,J.i18n.passwordTooWeak);return!1}m.default.setInvalidState(J._pwd,J._pwdError,J.i18n.error.passReqd);return!1})};I.prototype._validVerifyPassword=
function(){var J=D.default.trim(this._pwd.value),Q=D.default.trim(this._verifyPwd.value);m.default.clearState([this._verifyPwd,this._verifyPwdError]);if(J!==Q)return m.default.setInvalidState(this._verifyPwd,this._verifyPwdError,this.i18n.error.passwordsNotMatch),!1;m.default.setValidState(this._verifyPwd);return!0};I.prototype._validIdentityQuestion=function(){m.default.clearState([this._identityQuestion,this._identityQuestionError]);if(!this._identityQuestionID||1>this._identityQuestionID)return m.default.setInvalidState(this._identityQuestion,
this._identityQuestionError,this.i18n.error.questionSelection),!1;m.default.setValidState(this._identityQuestion);return!0};I.prototype._validIdentityAnswer=function(){var J=D.default.trim(this._identityAnswer.value);m.default.clearState([this._identityAnswer,this._identityAnswerError]);if(K.default.isDefined(J)&&""!==J){if(60<J.length)return m.default.setInvalidState(this._identityAnswer,this._identityAnswerError,this.i18n.error.answerTooLong),!1;m.default.setValidState(this._identityAnswer);return!0}m.default.setInvalidState(this._identityAnswer,
this._identityAnswerError,this.i18n.error.answerIsBlank);return!1};I.prototype._validates=function(){var J=this,Q=[this._validFirstName(),this._validLastName(),this._validEmail(),this._validConfirmEmail(),this._validUsername(),this._validVerifyPassword(),this._validIdentityQuestion(),this._validIdentityAnswer()].every(function(V){return!0===V});return this._validPassword().then(function(V){(Q=Q&&V)||m.default.focusFirstInvalidInput(J._form.domNode);return Q})};I.prototype._fetchInvitation=function(){return u.default.request({url:this._communityUri+
"invitations/"+this.invitation})};I.prototype._handleError=function(J){var Q,V;J=J.error||J||{};J.code=J.code||0;J=this.i18n.errors[J.code]||J;J.details=(null===(Q=J.details)||void 0===Q?0:Q.length)?J.details.filter(function(O){return null!==O}):null;if(null===(V=J.details)||void 0===V?0:V.length)J.details=J.details.join("\x3cbr /\x3e"),J.message=J.message?J.message+"\x3cbr /\x3e"+J.details:J.details;J=z.default.mixin(z.default.mixin({},this.i18n.errors.error),J);this._showErrorMessage(J.message);
return!0};return I=r.__decorate([n.default(x.default,t.default,A.default)],I)}()})},"arcgisonline/pages/dijit/PasswordStrength":function(){define("require exports tslib dojo/text!./PasswordStrength/templates/PasswordStrength.html dojo/i18n!../../nls/arcgisonline dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ../utils/icons ../utils/dom ../utils/organization ../../tsutils/declareDecorator".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);
g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);return function(){function d(u,n){this.templateString=a.default;this.i18n=k.default;this.icons=m.default}d.prototype.postCreate=function(){var u,n,t;this.inherited(arguments);var x=null!==(n=null===(u=this.portal.helpMap)||void 0===u?void 0:u.m)&&void 0!==n?n:{};u=this.portal.helpBase+(null!==(t=x["120001688"])&&void 0!==t?t:"");this._moreInfo.href=u};d.prototype.update=
function(u){var n=this,t,x=new e.default;(null===(t=this._previousResult)||void 0===t?void 0:t.password)===u?x.resolve(this._previousResult):u?f.default.checkPasswordStrength(u).then(function(A){var B=A.strength;n._strengthLabel.className="password-strength__label--"+B;n._strengthLabel.textContent=n.i18n.passwordStrengthMeter["score"+B];n._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--"+B;var F=Object.keys(A).every(function(w){var D=A[w];return"strength"===
w?1<D:!1!==D});F?l.default.hideNode(n._moreInfo):l.default.showNode(n._moreInfo);n._previousResult=r.__assign({password:u,isValidStrength:1<B,isValid:F},A);x.resolve(n._previousResult)}):(this._strengthLabel.className="",this._strengthLabel.textContent=this.i18n.passwordStrengthMeter.none,this._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--unknown",this._previousResult={password:u,isValid:!1,isValidStrength:!1},x.resolve(this._previousResult));return x};
return d=r.__decorate([c.default(h.default,g.default)],d)}()})},"arcgisonline/pages/portal/Portal":function(){define("require exports tslib ../../esriGeowConfig ./PortalItem ./UserProfiles ../utils/promises ../utils/verified ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/io-query dojo/Stateful dojo/_base/kernel dojo/_base/lang dojo/promise/all esri/arcgis/Portal esri/lang esri/request ../utils/itemsgroups".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F){a=r.__importDefault(a);
k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);u=r.__importDefault(u);n=r.__importDefault(n);t=r.__importDefault(t);x=r.__importDefault(x);A=r.__importDefault(A);B=r.__importDefault(B);return function(){function w(D){this.blockedApps=[];this.userProfiles=new e.default({portal:this})}w.prototype.postscript=function(){};w.prototype._getSelf=
function(D){var q=this,v=new f.default,z=D+"portals/helpmap";if(this._hasHelpMap)return this.inherited(arguments).then(function(C){a.default.self=n.default.mixin(a.default.self||{},n.default.clone(C));return C});g.default.eachAlways({selfResult:this.inherited(arguments),helpMapResult:x.default.PortalUtil.request(z,{culture:u.default.locale})}).then(function(C){if(C.selfResult&&C.selfResult.error)v.reject(C.selfResult.error);else{var E={};C.selfResult&&C.selfResult.value&&(E=n.default.mixin(E,C.selfResult.value),
C.helpMapResult&&C.helpMapResult.value&&(E=n.default.mixin(E,C.helpMapResult.value)));q._hasHelpMap=!0;a.default.self=n.default.clone(E);v.resolve(E)}});return v};w.prototype.getPortalUser=function(){return this.portalUser};w.prototype.getEnvironment=function(){var D=this.customBaseUrl;D=null===D||void 0===D?void 0:D.split(".")[0].replace("maps","");return-1<(null===D||void 0===D?void 0:D.indexOf("dev"))?"dev":-1<(null===D||void 0===D?void 0:D.indexOf("qa"))?"qa":""};w.prototype.queryItems=function(D,
q,v){var z=this,C,E=new f.default,G=null!==(C=null===D||void 0===D?void 0:D.q)&&void 0!==C?C:D;C=null===G||void 0===G?void 0:G.match(/ownerfolder:([^\s]+)/);var H=(null===C||void 0===C?0:C.length)?C[0].split(":")[1]:null,K=this.url,I=this.portalUser;C=K+"search";D?(D.categories&&(C=C+"?categories\x3d"+D.categories,delete D.categories),"object"===typeof D&&"bbox"in D&&(D.sortField="bbox",D.srSort="true",D.spatialFilter="true",G=c.default.queryToObject(document.URL.replace(/^[^\?]*\?/,"")),D.srsConfig=
"srsConfig"in G?G.srsConfig:"offset:.5,scale:2"),this._queryPortal(C,x.default.PortalUtil.formatQueryParams({},D,q),x.default.PortalItem).then(function(J){return F.getAllItemsGroups({response:J,contentUser:v,portalUser:I,url:K})}).then(function(J){return z.toPortalItems(H,z.isAdminView,J)}).then(function(J){return E.resolve(n.default.mixin(J,{total:J.total,nextStart:J.nextQueryParams.start,start:J.queryParams.start}))})):E.resolve({items:[],results:[],total:0,nextStart:-1,start:-1});return x.default.PortalResult(E)};
w.prototype.getUserProfile=function(D){var q=new f.default;this.userProfiles.find(D).then(function(v){return q.resolve(v)});return q};w.prototype.getFederatedServers=function(){var D=new f.default,q=this.getPortalUser(),v=this.url+"portals/self/servers/";q?m.default.request({url:v}).then(function(z){m.default.setFederatedServers((null===z||void 0===z?void 0:z.servers)||[]);D.resolve(z&&z.servers?z:null)}):D.resolve(null);return D};w.prototype.getHostedFederatedServers=function(){var D=new f.default,
q;this.getFederatedServers().then(function(v){var z;q=(null!==(z=null===v||void 0===v?void 0:v.servers)&&void 0!==z?z:[]).filter(function(C){return C.isHosted});D.resolve(q[0])});return D};w.prototype.getManagedServers=function(){var D=new f.default,q,v;this.getHostedFederatedServers().then(function(z){z?(q=z.adminUrl+"/admin/data/findItems",m.default.request({url:q,content:{managed:!0}},{useProxy:m.default.shouldUseProxy(q)}).then(function(C){var E;v=(null!==(E=null===C||void 0===C?void 0:C.items)&&
void 0!==E?E:C||[]).filter(function(G){var H;return"arcgis data store"===(null===(H=null===G||void 0===G?void 0:G.provider)||void 0===H?void 0:H.toLowerCase())});D.resolve(v)},function(){return D.resolve(null)})):D.resolve(null)});return D};w.prototype.getIsBackedBySDS=function(){var D,q,v,z,C,E,G,H=new f.default,K=this.getPortalUser(),I=null!==(D=null===K||void 0===K?void 0:K.userRole)&&void 0!==D?D:{},J;A.default.isDefined(this.isBackedBySDS)?H.resolve(this.isBackedBySDS):(D=(null===(q=I.isAdmin)||
void 0===q?void 0:q.call(I))||(null===(v=I.canManageSecurity)||void 0===v?void 0:v.call(I))||(null===(z=I.canManageServers)||void 0===z?void 0:z.call(I))||(null===(C=I.canUpdateOrgItems)||void 0===C?void 0:C.call(I))||(null===(E=I.canDeleteOrgItems)||void 0===E?void 0:E.call(I)),this.isPortal&&K&&(D||(null===(G=I.isBasedOnPublisher)||void 0===G?0:G.call(I)))?this.getManagedServers().then(function(Q){var V;J=null!==(V=null===Q||void 0===Q?void 0:Q[0])&&void 0!==V?V:null;H.resolve(J?!0:!1)}):(this.isBackedBySDS=
!0,H.resolve(!0)));return H};w.prototype.getOrgIsVerified=function(D){var q,v=new f.default;return!D&&A.default.isDefined(this.isVerified)?(v.resolve(this.isVerified),v):this.queryItems({q:"(orgid: "+(D||(null===(q=this.portalUser)||void 0===q?void 0:q.orgId))+" AND contentstatus: public_authoritative)",num:1}).then(function(z){return!!z.total})};w.prototype.getCategories=function(){var D=new f.default;m.default.request({url:this.url+"portals/"+this.id+"/categorySchema"}).then(function(q){return D.resolve(q.categorySchema)},
function(q){return D.reject(q)});return D};w.prototype.getRegions=function(){var D,q,v=new f.default,z=(null===(D=this.portalUser)||void 0===D?void 0:D.culture)||(null===(q=this.portal)||void 0===q?void 0:q.culture)||u.default.locale||"en",C;m.default.request({url:this.portalUrl+"portals/regions",content:{culture:z}}).then(function(E){E&&E.length&&(C=E.sort(function(G,H){return"WO"===G.region?-1:G.localizedName.localeCompare(H.localizedName)}));v.resolve(C)});return v};w.prototype.toPortalItems=function(D,
q,v){var z=this,C={},E=new f.default;D&&"root"!==D&&n.default.mixin(C,{folderId:D,ownerFolder:D});q&&(C.isAdminView=!0);this.getBlockedApps().then(function(){var G=v.results.map(function(H){var K=new k.default(n.default.mixin(H,C,{portal:z}));K.groupData=H.groupData;K.removeBlockedTypes(z.blockedApps);return h.default.setVerifiedInfo(K)});t.default(G).then(function(H){v.items=H;E.resolve(v)},function(H){return 0})});return E};w.prototype.formatThumbnailUrl=function(D){return x.default.PortalUtil.formatUrl(this.portalUrl+
"portals/self/resources/"+D)};w.prototype.getLocalizedOrgProperties=function(){var D=this,q,v,z=new f.default,C=a.default.restBaseUrl+"portals/self/resources",E=null===(v=null===(q=this.portalUser)||void 0===q?void 0:q.credential)||void 0===v?void 0:v.token;q={f:"json"};E&&(q.token=E);B.default({url:C+"/localizedOrgProperties",content:q},{disableIdentityLookup:!0}).then(function(G){G&&!G.code?(D.localizedOrgProperties=G,D.localizedOrgProperties.default||(D.localizedOrgProperties.default={name:D.name,
description:null})):D.createLocalizedOrgPropertiesDefault();z.resolve(D.localizedOrgProperties)},function(){D.createLocalizedOrgPropertiesDefault();z.resolve(D.localizedOrgProperties)});return z};w.prototype.isTrialOrg=function(){var D,q=null===(D=this.subscriptionInfo)||void 0===D?void 0:D.type;return"Trial"===q||"Trial Press"===q||"Trial Developer"===q||"Developer Subscription"===q};w.prototype.createLocalizedOrgPropertiesDefault=function(){this.localizedOrgProperties={default:{name:this.name,description:null}}};
w.prototype.getBlockedApps=function(){var D=this,q,v=new f.default;if(null===(q=this.portalUser)||void 0===q||!q.orgId)return v.resolve(),v;m.default.request({url:a.default.restBaseUrl+"portals/self/signinSettings"}).then(function(z){D.blockedApps=null===z||void 0===z?void 0:z.blockedApps;v.resolve()},function(){v.resolve()});return v};return w=r.__decorate([l.default(x.default.Portal,d.default)],w)}()})},"arcgisonline/pages/portal/UserProfiles":function(){define("require exports tslib ./PortalUser ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/Stateful".split(" "),
function(b,y,r,a,k,e,g,h,m,l){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);return function(){function f(c){this.NO_THUMBNAIL_PATH=k.default.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");this.users={}}f.prototype.find=function(c){var d=this,u=this.users,n="string"===typeof c?{username:c}:c,t=n&&n.username;n="deletedUser"===t;var x={username:n?h.default.common.deletedUser:
t,thumbnailUrl:this.NO_THUMBNAIL_PATH},A=new g.default;"fetching"===u[t]?setTimeout(function(){d.find(c).then(function(B){A.resolve(B)})},50):u[t]?A.resolve(u[t]):n?(u[t]=m.default.mixin({},{isDeleted:!0},x),A.resolve(u[t])):(u[t]="fetching",this.getUserProfile(t).then(function(B){u[t]=B;A.resolve(u[t])},function(){u[t]=m.default.mixin({},x);A.resolve(u[t])}));return A};f.prototype.getUserProfile=function(c){var d=this,u=new g.default,n;k.default.request({url:this.portal.portalUrl+"community/users/"+
c}).then(function(t){n=new a.default(m.default.mixin(t,{portal:d.portal}));u.resolve(n)});return u};return f=r.__decorate([e.default(l.default)],f)}()})},"arcgisonline/pages/utils/validation":function(){define(["require","exports"],function(b,y){return function(){function r(){}r.clearState=function(a){null===a||void 0===a?void 0:a.forEach(function(k){var e,g,h;null===k||void 0===k?void 0:k.removeAttribute("aria-live");null===(e=null===k||void 0===k?void 0:k.classList)||void 0===e?void 0:e.remove("input-success");
null===(g=null===k||void 0===k?void 0:k.classList)||void 0===g?void 0:g.remove("input-error");null===(h=null===k||void 0===k?void 0:k.classList)||void 0===h?void 0:h.remove("is-active")})};r.setValidState=function(a){var k;null===(k=null===a||void 0===a?void 0:a.classList)||void 0===k?void 0:k.add("input-success")};r.setInvalidState=function(a,k,e,g){var h,m,l;null===(h=null===a||void 0===a?void 0:a.classList)||void 0===h?void 0:h.add("input-error");null===(m=null===k||void 0===k?void 0:k.classList)||
void 0===m?void 0:m.add("is-active");k&&e&&(null===k||void 0===k?void 0:k.setAttribute("aria-live","polite"),k.innerHTML=e);g&&(null===(l=null===a||void 0===a?void 0:a.focus)||void 0===l?void 0:l.call(a))};r.focusFirstInvalidInput=function(a){var k;a=null!==(k=null===a||void 0===a?void 0:a.querySelector(".input-error"))&&void 0!==k?k:void 0;(null===a||void 0===a?0:a.focus)&&a.focus()};return r}()})},"arcgisonline/sharing/dijit/HelpManager":function(){define(["dojo/_base/declare","dijit/_WidgetBase",
"../util","../../esriGeowConfig"],function(b,y,r,a){var k=b([y],{helpBaseUrl:null,helpTopics:null,_isSingleTenant:!1,postCreate:function(){this._isSingleTenant=void 0!==a.isMultiTenant&&null!==a.isMultiTenant&&!1===a.isMultiTenant;this.helpBaseUrl=a.self.helpBase;this._load()},_load:function(){a.self.helpMap&&a.self.helpMap.m?(this.helpTopics=a.self.helpMap.m,this.onLoad(this.helpBaseUrl,this.helpTopics)):r.request({url:a.restBaseUrl+"portals/helpmap"}).then(function(e){!e||e.code||e.message||(this.helpBaseUrl=
e.helpBase,this.helpTopics=e.helpMap&&e.helpMap.m||{},this.onLoad(this.helpBaseUrl,this.helpTopics))}.bind(this))},onLoad:function(e,g){},isLoaded:function(){return this.helpBaseUrl&&this.helpTopics},getHelpUrl:function(e){return this.isLoaded()?this.helpBaseUrl+this.helpTopics[e]:"#"}});k.prototype.statics={_instance:null,getInstance:function(){null===this._instance&&(this._instance=new k);return this._instance}};return k})},"dojox/widget/Rotator":function(){define("dojo/aspect dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/topic dojo/on dojo/parser dojo/query dojo/fx/easing dojo/NodeList-dom".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n){y=y("dojox.widget.Rotator",null,{transition:"dojox.widget.rotator.swap",transitionParams:"duration:500",panes:null,constructor:function(t,x){a.mixin(this,t);var A=this;t=A.transition;var B=A._transitions={};A._idMap={};var F=A.transitionParams=eval("({ "+A.transitionParams+" })");x=A._domNode=g.byId(x);A._domNodeContentBox=l.getContentBox(x);A.id=x.id||(new Date).getTime();"static"==f.get(x,"position")&&f.set(x,"position","relative");B[t]=a.getObject(t);B[t]||
(this._transitionWarn(t,"dojox.widget.rotator.swap"),B[A.transition="dojox.widget.rotator.swap"]=a.getObject("dojox.widget.rotator.swap"));F.duration||(F.duration=500);k.forEach(A.panes,function(w){m.create("div",w,x)});A.panes=[];n("\x3e *",x).forEach(function(w,D){A._initializePane(w,D)});A._controlSub=c.subscribe(A.id+"/rotator/control",a.hitch(A,this.control))},insert:function(t,x){var A=this.panes;null==x&&(x=A.length);x<A.length?(A=A[x],m.place(t,A.node,"before")):m.place(t,this._domNode,"last");
this._initializePane(t,x)},remove:function(t){function x(D){var q=B.splice(D,1)[0];q&&(q.id&&(A._idMap[q.id]=void 0),A._domNode.removeChild(q.node));A.idx>D&&A.idx--}var A=this,B=this.panes;if("number"===typeof t)var F=t;else{for(var w=0;w<B.length;w++)if(B[w].node===t){F=w;break}if(null==F)return}if(F===this.idx&&(t=this.go(this.idx-1)))return t.then(function(){x(F)});x(F)},destroy:function(){k.forEach([this._controlSub,this.wfe],function(t){t&&t.remove()});m.destroy(this._domNode);this.panes=[]},
next:function(){return this.go(this.idx+1)},prev:function(){return this.go(this.idx-1)},go:function(t){var x=this,A=x.idx,B=x.panes,F=B.length,w=x._idMap[t];x._resetWaitForEvent();t=null!=w?w:t||0;t=t<F?0>t?F-1:t:0;if(t==A||x.anim)return null;var D=B[A],q=B[t];f.set(D.node,"zIndex",2);f.set(q.node,"zIndex",1);var v={current:D,next:q,rotator:x};if(A=x.anim=x._transitions[q.trans](a.mixin({rotatorBox:x._domNodeContentBox},v,q.params))){var z=new r,C=q.waitForEvent,E=b.after(A,"onEnd",function(){f.set(D.node,
{display:"none",left:0,opacity:1,top:0,zIndex:0});E.remove();x.anim=null;x.idx=t;if(D.onAfterOut)D.onAfterOut(v);if(q.onAfterIn)q.onAfterIn(v);x.onUpdate("onAfterTransition");C||(x._resetWaitForEvent(),z.callback())},!0);x.wfe=C?c.subscribe(C,function(){x._resetWaitForEvent();z.callback(!0)}):null;x.onUpdate("onBeforeTransition");if(D.onBeforeOut)D.onBeforeOut(v);if(q.onBeforeIn)q.onBeforeIn(v);A.play();return z}},onUpdate:function(t,x){c.publish(this.id+"/rotator/update",t,this,x||{})},_initializePane:function(t,
x){var A={node:t,idx:x,params:a.mixin({},this.transitionParams,eval("({ "+(h.get(t,"transitionParams")||"")+" })"))},B=A.trans=h.get(t,"transition")||this.transition,F=this._transitions,w=this.panes,D={left:0,top:0,position:"absolute",display:"none"};k.forEach(["id","title","duration","waitForEvent"],function(q){A[q]=h.get(t,q)});A.id&&(this._idMap[A.id]=x);F[B]||(F[B]=a.getObject(B))||this._transitionWarn(B,A.trans=this.transition);if(null==this.idx||h.get(t,"selected"))null!=this.idx&&f.set(w[this.idx].node,
"display","none"),this.idx=x,D.display="";f.set(t,D);n("\x3e script[type^\x3d'dojo/method']",t).orphan().forEach(function(q){var v=h.get(q,"event");v&&(A[v]=u._functionFromScript(q))});w.splice(x,0,A)},_resetWaitForEvent:function(){this.wfe&&(this.wfe.remove(),delete this.wfe)},control:function(t){var x=a._toArray(arguments),A=this;x.shift();A._resetWaitForEvent();A[t]&&((x=A[t].apply(A,x))&&x.addCallback(function(){A.onUpdate(t)}),A.onManualChange(t))},resize:function(t,x){var A=this._domNodeContentBox=
{w:t,h:x};l.setContentSize(this._domNode,A);k.forEach(this.panes,function(B){l.setContentSize(B.node,A)})},onManualChange:function(){},_transitionWarn:function(t,x){}});a.setObject("dojox.widget.rotator.swap",function(t){return new e.Animation({play:function(){f.set(t.current.node,"display","none");f.set(t.next.node,"display","");this._fire("onEnd")}})});return y})},"dojo/fx/easing":function(){define(["../_base/lang"],function(b){var y={linear:function(r){return r},quadIn:function(r){return Math.pow(r,
2)},quadOut:function(r){return r*(r-2)*-1},quadInOut:function(r){r*=2;return 1>r?Math.pow(r,2)/2:-1*(--r*(r-2)-1)/2},cubicIn:function(r){return Math.pow(r,3)},cubicOut:function(r){return Math.pow(r-1,3)+1},cubicInOut:function(r){r*=2;return 1>r?Math.pow(r,3)/2:(Math.pow(r-2,3)+2)/2},quartIn:function(r){return Math.pow(r,4)},quartOut:function(r){return-1*(Math.pow(r-1,4)-1)},quartInOut:function(r){r*=2;return 1>r?Math.pow(r,4)/2:-.5*(Math.pow(r-2,4)-2)},quintIn:function(r){return Math.pow(r,5)},quintOut:function(r){return Math.pow(r-
1,5)+1},quintInOut:function(r){r*=2;return 1>r?Math.pow(r,5)/2:(Math.pow(r-2,5)+2)/2},sineIn:function(r){return-1*Math.cos(Math.PI/2*r)+1},sineOut:function(r){return Math.sin(Math.PI/2*r)},sineInOut:function(r){return-1*(Math.cos(Math.PI*r)-1)/2},expoIn:function(r){return 0==r?0:Math.pow(2,10*(r-1))},expoOut:function(r){return 1==r?1:-1*Math.pow(2,-10*r)+1},expoInOut:function(r){if(0==r)return 0;if(1==r)return 1;r*=2;if(1>r)return Math.pow(2,10*(r-1))/2;--r;return(-1*Math.pow(2,-10*r)+2)/2},circIn:function(r){return-1*
(Math.sqrt(1-Math.pow(r,2))-1)},circOut:function(r){return Math.sqrt(1-Math.pow(r-1,2))},circInOut:function(r){r*=2;return 1>r?-.5*(Math.sqrt(1-Math.pow(r,2))-1):.5*(Math.sqrt(1-Math.pow(r-2,2))+1)},backIn:function(r){return Math.pow(r,2)*(2.70158*r-1.70158)},backOut:function(r){--r;return Math.pow(r,2)*(2.70158*r+1.70158)+1},backInOut:function(r){r*=2;if(1>r)return Math.pow(r,2)*(3.5949095*r-2.5949095)/2;r-=2;return(Math.pow(r,2)*(3.5949095*r+2.5949095)+2)/2},elasticIn:function(r){if(0==r||1==r)return r;
--r;return-1*Math.pow(2,10*r)*Math.sin(2*(r-.075)*Math.PI/.3)},elasticOut:function(r){return 0==r||1==r?r:Math.pow(2,-10*r)*Math.sin(2*(r-.075)*Math.PI/.3)+1},elasticInOut:function(r){if(0==r)return 0;r*=2;if(2==r)return 1;var a=.3*1.5,k=a/4;if(1>r)return--r,-.5*Math.pow(2,10*r)*Math.sin(2*(r-k)*Math.PI/a);--r;return.5*Math.pow(2,-10*r)*Math.sin(2*(r-k)*Math.PI/a)+1},bounceIn:function(r){return 1-y.bounceOut(1-r)},bounceOut:function(r){return r<1/2.75?7.5625*Math.pow(r,2):r<2/2.75?7.5625*Math.pow(r-
1.5/2.75,2)+.75:r<2.5/2.75?7.5625*Math.pow(r-2.25/2.75,2)+.9375:7.5625*Math.pow(r-2.625/2.75,2)+.984375},bounceInOut:function(r){return.5>r?y.bounceIn(2*r)/2:y.bounceOut(2*r-1)/2+.5}};b.setObject("dojo.fx.easing",y);return y})},"dojox/widget/AutoRotator":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/mouse dojox/widget/Rotator".split(" "),function(b,y,r,a,k,e){return b("dojox.widget.AutoRotator",e,{suspendOnHover:!1,duration:4E3,autoStart:!0,pauseOnManualChange:!1,
cycles:-1,random:!1,reverse:!1,constructor:function(){var g=this;g.cycles-0==g.cycles&&0<g.cycles?g.cycles++:g.cycles=g.cycles?-1:0;g._signals=[a(g._domNode,k.enter,function(){if(g.suspendOnHover&&!g.anim&&!g.wfe){var h=g._endTime,m=g._now();g._suspended=!0;g._resetTimer();g._resumeDuration=h>m?h-m:.01}}),a(g._domNode,k.leave,function(){g.suspendOnHover&&!g.anim&&(g._suspended=!1,g.playing&&!g.wfe&&g.play(!0))})];g.autoStart&&1<g.panes.length?g.play():g.pause()},destroy:function(){y.forEach(this._signals,
function(g){g.remove()});delete this._signals;dojo.forEach(this._connects,dojo.disconnect);this.inherited(arguments)},play:function(g,h){this.playing=!0;this._resetTimer();!0!==g&&0<this.cycles&&this.cycles--;0==this.cycles?this.pause():this._suspended||(this.onUpdate("play"),h?this._cycle():(g=(this._resumeDuration||0)-0,g=(0<g?g:this.panes[this.idx].duration||this.duration)-0,this._resumeDuration=0,this._endTime=this._now()+g,this._timer=setTimeout(r.hitch(this,"_cycle",!1),g)))},pause:function(){this.playing=
this._suspended=!1;this.cycles=-1;this._resetTimer();this.onUpdate("pause")},_now:function(){return(new Date).getTime()},_resetTimer:function(){clearTimeout(this._timer)},_cycle:function(g){var h=this;g=h.idx;if(h.random){do var m=Math.floor(Math.random()*h.panes.length+1);while(m==g)}else m=g+(h.reverse?-1:1);(g=h.go(m))&&g.addCallback(function(l){h.onUpdate("cycle");h.playing&&h.play(!1,l)})},onManualChange:function(g){this.cycles=-1;"play"!=g&&(this._resetTimer(),this.pauseOnManualChange&&this.pause());
this.playing&&this.play()}})})},"dojox/widget/rotator/Controller":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/event dojo/_base/array dojo/_base/connect dojo/query".split(" "),function(b,y,r,a,k,e,g){return b("dojox.widget.rotator.Controller",null,{rotator:null,commands:"prev,play/pause,info,next",constructor:function(h,m){y.mixin(this,h);var l=this.rotator;if(l){for(;m.firstChild;)m.removeChild(m.firstChild);var f=this._domNode=r.create("ul",null,m),c=function(d,
u,n){r.create("li",{className:u,innerHTML:'\x3ca href\x3d"#"\x3e\x3cspan\x3e'+d+"\x3c/span\x3e\x3c/a\x3e",onclick:function(t){a.stop(t);l&&l.control.apply(l,n)}},f)};k.forEach(this.commands.split(","),function(d,u){switch(d){case "prev":c("Prev","dojoxRotatorPrev dojoxRotatorIcon",["prev"]);break;case "play/pause":c("Play","dojoxRotatorPlay dojoxRotatorIcon",["play"]);c("Pause","dojoxRotatorPause dojoxRotatorIcon",["pause"]);break;case "info":this._info=r.create("li",{className:"dojoxRotatorInfo",
innerHTML:this._buildInfo(l)},f);break;case "next":c("Next","dojoxRotatorNext dojoxRotatorIcon",["next"]);break;case "#":case "titles":for(u=0;u<l.panes.length;u++)c("#"==d?u+1:l.panes[u].title||"Tab "+(u+1),("#"==d?"dojoxRotatorNumber":"dojoxRotatorTab")+" "+(u==l.idx?"dojoxRotatorSelected":"")+" dojoxRotatorPane"+u,["go",u])}},this);g("li:first-child",f).addClass("dojoxRotatorFirst");g("li:last-child",f).addClass("dojoxRotatorLast");this._togglePlay();this._con=e.connect(l,"onUpdate",this,"_onUpdate")}},
destroy:function(){e.disconnect(this._con);r.destroy(this._domNode)},_togglePlay:function(h){h=this.rotator.playing;g(".dojoxRotatorPlay",this._domNode).style("display",h?"none":"");g(".dojoxRotatorPause",this._domNode).style("display",h?"":"none")},_buildInfo:function(h){return"\x3cspan\x3e"+(h.idx+1)+" / "+h.panes.length+"\x3c/span\x3e"},_onUpdate:function(h){var m=this.rotator;switch(h){case "play":case "pause":this._togglePlay();break;case "onAfterTransition":this._info&&(this._info.innerHTML=
this._buildInfo(m)),h=function(l){m.idx<l.length&&r.addClass(l[m.idx],"dojoxRotatorSelected")},h(g(".dojoxRotatorNumber",this._domNode).removeClass("dojoxRotatorSelected")),h(g(".dojoxRotatorTab",this._domNode).removeClass("dojoxRotatorSelected"))}}})})},"dojox/widget/rotator/Fade":function(){define(["dojo/_base/lang","dojo/_base/fx","dojo/dom-style","dojo/fx"],function(b,y,r,a){function k(g,h){var m=g.next.node;r.set(m,{display:"",opacity:0});g.node=g.current.node;return a[h]([y.fadeOut(g),y.fadeIn(b.mixin(g,
{node:m}))])}var e={fade:function(g){return k(g,"chain")},crossFade:function(g){return k(g,"combine")}};b.mixin(b.getObject("dojox.widget.rotator"),e);return e})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),function(b,y,r,a,k,e,g,h,m,l,f,c,d,u){a=y("dijit.layout._StackButton",
u,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(n){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab")}});y=y("dijit.layout.StackController",[f,c,d],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:a,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(n){return l.byId(this.id+"_"+n)},postCreate:function(){this.inherited(arguments);
this.own(h.subscribe(this.containerId+"-startup",e.hitch(this,"onStartup")),h.subscribe(this.containerId+"-addChild",e.hitch(this,"onAddChild")),h.subscribe(this.containerId+"-removeChild",e.hitch(this,"onRemoveChild")),h.subscribe(this.containerId+"-selectChild",e.hitch(this,"onSelectChild")),h.subscribe(this.containerId+"-containerKeyDown",e.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(g(this.containerNode,"click",e.hitch(this,function(n){var t=l.getEnclosingWidget(n.target);
if(t!=this.containerNode&&!t.disabled&&t.page)for(n=n.target;n!==this.containerNode;n=n.parentNode)if(r.contains(n,this.buttonWidgetCloseClass)){this.onCloseButtonClick(t.page);break}else if(n==t.domNode){this.onButtonClick(t.page);break}})))},onStartup:function(n){this.textDir=n.textDir;b.forEach(n.children,this.onAddChild,this);if(n.selected)this.onSelectChild(n.selected);var t=l.byId(this.containerId).containerNode,x=e.hitch(this,"pane2button");n={title:"label",showtitle:"showLabel",iconclass:"iconClass",
closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var A=function(F,w){return g(t,"attrmodified-"+F,function(D){var q=x(D.detail&&D.detail.widget&&D.detail.widget.id);q&&q.set(w,D.detail.newValue)})},B;for(B in n)this.own(A(B,n[B]))},destroy:function(n){this.destroyDescendants(n);this.inherited(arguments)},onAddChild:function(n,t){var x=new (e.isString(this.buttonWidget)?e.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+"_"+n.id,name:this.id+"_"+n.id,label:n.title,
disabled:n.disabled,ownerDocument:this.ownerDocument,dir:n.dir,lang:n.lang,textDir:n.textDir||this.textDir,showLabel:n.showTitle,iconClass:n.iconClass,closeButton:n.closable,title:n.tooltip,page:n});this.addChild(x,t);n.controlButton=x;if(!this._currentChild)this.onSelectChild(n);t=n._wrapper.getAttribute("aria-labelledby")?n._wrapper.getAttribute("aria-labelledby")+" "+x.id:x.id;n._wrapper.removeAttribute("aria-label");n._wrapper.setAttribute("aria-labelledby",t)},onRemoveChild:function(n){this._currentChild===
n&&(this._currentChild=null);var t=this.pane2button(n.id);t&&(this.removeChild(t),t.destroy());delete n.controlButton},onSelectChild:function(n){if(n){if(this._currentChild){var t=this.pane2button(this._currentChild.id);t.set("checked",!1);t.focusNode.setAttribute("tabIndex","-1")}t=this.pane2button(n.id);t.set("checked",!0);this._currentChild=n;t.focusNode.setAttribute("tabIndex","0");l.byId(this.containerId)}},onButtonClick:function(n){var t=this.pane2button(n.id);m.focus(t.focusNode);this._currentChild&&
this._currentChild.id===n.id&&t.set("checked",!0);l.byId(this.containerId).selectChild(n)},onCloseButtonClick:function(n){l.byId(this.containerId).closeChild(n);this._currentChild&&(n=this.pane2button(this._currentChild.id))&&m.focus(n.focusNode||n.domNode)},adjacent:function(n){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(n=!n);var t=this.getChildren(),x=b.indexOf(t,this.pane2button(this._currentChild.id)),A=t[x];do{x=(x+(n?1:t.length-1))%t.length;var B=t[x]}while(B.disabled&&
B!=A);return B},onkeydown:function(n,t){if(!this.disabled&&!n.altKey&&(t=null,n.ctrlKey||!n._djpage)){switch(n.keyCode){case k.LEFT_ARROW:case k.UP_ARROW:n._djpage||(t=!1);break;case k.PAGE_UP:n.ctrlKey&&(t=!1);break;case k.RIGHT_ARROW:case k.DOWN_ARROW:n._djpage||(t=!0);break;case k.PAGE_DOWN:n.ctrlKey&&(t=!0);break;case k.HOME:for(var x=this.getChildren(),A=0;A<x.length;A++){var B=x[A];if(!B.disabled){this.onButtonClick(B.page);break}}n.stopPropagation();n.preventDefault();break;case k.END:x=this.getChildren();
for(A=x.length-1;0<=A;A--)if(B=x[A],!B.disabled){this.onButtonClick(B.page);break}n.stopPropagation();n.preventDefault();break;case k.DELETE:case 87:this._currentChild.closable&&(n.keyCode==k.DELETE||n.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),n.stopPropagation(),n.preventDefault());break;case k.TAB:n.ctrlKey&&(this.onButtonClick(this.adjacent(!n.shiftKey).page),n.stopPropagation(),n.preventDefault())}null!==t&&(this.onButtonClick(this.adjacent(t).page),n.stopPropagation(),n.preventDefault())}},
onContainerKeyDown:function(n){n.e._djpage=n.page;this.onkeydown(n.e)}});y.StackButton=a;return y})},"arcgisonline/sharing/dijit/TextMenu":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util"],function(b,y,r){b.provide("arcgisonline.sharing.dijit.TextMenu");b.require("arcgisonline.sharing.util");b.declare("arcgisonline.sharing.dijit.TextMenu",[y._Widget],{_util:arcgisonline.sharing.util,textMenuItems:[{label:"No menu items",href:"#",iconClass:null}],labelNode:null,triggerNode:null,
menu:null,handlers:[],constructor:function(a){b.mixin(this,a)},postCreate:function(){this.menu=(new y.Menu({})).placeAt(b.body());b.addClass(this.menu.domNode,"esriTextMenu");y.popup.moveOffScreen(this.menu.domNode);null!==this.textMenuItems&&this._renderItems(this.textMenuItems);b.style(this.triggerNode,"cursor","hand");b.style(this.triggerNode,"cursor","pointer");this.handlers.push(b.connect(this.triggerNode,"onclick",this,this.show));b.connect(this.menu,"onMouseLeave",b.hitch(this,function(){this.hide()}))},
show:function(a){a.preventDefault();y.popup.open({popup:this.menu,around:this.labelNode,orient:{BL:"TL",BR:"TR",TL:"BL",TR:"BR"},onExecute:b.hitch(this,this.hide),onCancel:b.hitch(this,this.hide)});this.menu.focus()},hide:function(){y.popup.close(this.menu)},destroy:function(){this.hide();b.forEach(this.handlers,function(a){b.disconnect(a)});b.forEach(b.query(".esriTextMenuItem"),function(a){y.byNode(a).destroy()},this);this.menu.destroy();this.inherited(arguments)},_renderItems:function(a){b.forEach(a,
function(k){k=new y.MenuItem(k);b.addClass(k.domNode,"esriTextMenuItem");this.menu.addChild(k)},this)}})})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),function(b){return b._base})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(b,y,r,a){var k=y("dijit.WidgetSet",null,
{constructor:function(){this._hash={};this.length=0},add:function(e){if(this._hash[e.id])throw Error("Tried to register widget with id\x3d\x3d"+e.id+" but that id is already registered");this._hash[e.id]=e;this.length++},remove:function(e){this._hash[e]&&(delete this._hash[e],this.length--)},forEach:function(e,g){g=g||r.global;var h=0,m;for(m in this._hash)e.call(g,this._hash[m],h++,this._hash);return this},filter:function(e,g){g=g||r.global;var h=new k,m=0,l;for(l in this._hash){var f=this._hash[l];
e.call(g,f,m++,this._hash)&&h.add(f)}return h},byId:function(e){return this._hash[e]},byClass:function(e){var g=new k,h;for(h in this._hash){var m=this._hash[h];m.declaredClass==e&&g.add(m)}return g},toArray:function(){var e=[],g;for(g in this._hash)e.push(this._hash[g]);return e},map:function(e,g){return b.map(this.toArray(),e,g)},every:function(e,g){g=g||r.global;var h=0,m;for(m in this._hash)if(!e.call(g,this._hash[m],h++,this._hash))return!1;return!0},some:function(e,g){g=g||r.global;var h=0,
m;for(m in this._hash)if(e.call(g,this._hash[m],h++,this._hash))return!0;return!1}});b.forEach("forEach filter byClass map every some".split(" "),function(e){a[e]=k.prototype[e]});return k})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),function(b,y,r,a,k,e,g,h){e.focus=function(m){if(m){var l="node"in m?m.node:m,f=m.bookmark;m=m.openedForWindow;var c=f?f.isCollapsed:!1;if(l){var d="iframe"==
l.tagName.toLowerCase()?l.contentWindow:l;if(d&&d.focus)try{d.focus()}catch(u){}e._onFocusNode(l)}if(f&&k.withGlobal(m||k.global,h.isCollapsed)&&!c){m&&m.focus();try{k.withGlobal(m||k.global,h.moveToBookmark,null,[f])}catch(u){}}}};e.watch("curNode",function(m,l,f){h._curFocus=f;h._prevFocus=l;f&&a.publish("focusNode",f)});e.watch("activeStack",function(m,l,f){h._activeStack=f});e.on("widget-blur",function(m,l){a.publish("widgetBlur",m,l)});e.on("widget-focus",function(m,l){a.publish("widgetFocus",
m,l)});r.mixin(h,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return h.getBookmark().isCollapsed},getBookmark:function(){return(k.global==window?g:new g.SelectionManager(k.global)).getBookmark()},moveToBookmark:function(m){return(k.global==window?g:new g.SelectionManager(k.global)).moveToBookmark(m)},getFocus:function(m,l){m=!e.curNode||m&&y.isDescendant(e.curNode,m.domNode)?h._prevFocus:e.curNode;return{node:m,bookmark:m&&m==e.curNode&&k.withGlobal(l||k.global,h.getBookmark),openedForWindow:l}},
_activeStack:[],registerIframe:function(m){return e.registerIframe(m)},unregisterIframe:function(m){m&&m.remove()},registerWin:function(m,l){return e.registerWin(m,l)},unregisterWin:function(m){m&&m.remove()}});return h})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(b,y,r,a,k){var e={getViewport:function(){return r.getBox()}};e.placeOnScreen=a.at;e.placeOnScreenAroundElement=function(g,h,m,l){if(y.isArray(m))var f=m;else{f=
[];for(var c in m)f.push({aroundCorner:c,corner:m[c]})}return a.around(g,h,f,!0,l)};e.placeOnScreenAroundNode=e.placeOnScreenAroundElement;e.placeOnScreenAroundRectangle=e.placeOnScreenAroundElement;e.getPopupAroundAlignment=function(g,h){var m={};b.forEach(g,function(l){var f=h;switch(l){case "after":m[h?"BR":"BL"]=h?"BL":"BR";break;case "before":m[h?"BL":"BR"]=h?"BR":"BL";break;case "below-alt":f=!f;case "below":m[f?"BL":"BR"]=f?"TL":"TR";m[f?"BR":"BL"]=f?"TR":"TL";break;case "above-alt":f=!f;default:m[f?
"TL":"TR"]=f?"BL":"BR",m[f?"TR":"TL"]=f?"BR":"BL"}});return m};y.mixin(k,e);return k})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(b,y,r){var a=r._createWrapper;r._createWrapper=function(e){e.declaredClass||(e={_popupWrapper:e.parentNode&&b.contains(e.parentNode,"dijitPopup")?e.parentNode:null,domNode:e,destroy:function(){},ownerDocument:e.ownerDocument,ownerDocumentBody:y.body(e.ownerDocument)});return a.call(this,e)};var k=
r.open;r.open=function(e){if(e.orient&&"string"!=typeof e.orient&&!("length"in e.orient)){var g=[],h;for(h in e.orient)g.push({aroundCorner:h,corner:e.orient[h]});e.orient=g}return k.call(this,e)};return r})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(b,y){y.scrollIntoView=function(r,a){b.scrollIntoView(r,a)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/_base/wai":function(){define(["dojo/dom-attr",
"dojo/_base/lang","../main","../hccss"],function(b,y,r){y.mixin(r,{hasWaiRole:function(a,k){a=this.getWaiRole(a);return k?-1<a.indexOf(k):0<a.length},getWaiRole:function(a){return y.trim((b.get(a,"role")||"").replace("wairole:",""))},setWaiRole:function(a,k){b.set(a,"role",k)},removeWaiRole:function(a,k){var e=b.get(a,"role");e&&(k?(k=y.trim((" "+e+" ").replace(" "+k+" "," ")),b.set(a,"role",k)):a.removeAttribute("role"))},hasWaiState:function(a,k){return a.hasAttribute?a.hasAttribute("aria-"+k):
!!a.getAttribute("aria-"+k)},getWaiState:function(a,k){return a.getAttribute("aria-"+k)||""},setWaiState:function(a,k,e){a.setAttribute("aria-"+k,e)},removeWaiState:function(a,k){a.removeAttribute("aria-"+k)}});return r})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(b,y){y.getDocumentWindow=function(r){return b.get(r)}})},"dijit/form/ComboButton":function(){define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "),
function(b,y,r,a,k){return b("dijit.form.ComboButton",a,{templateString:k,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(e){e.keyCode==y[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(r.focus(this._popupStateNode),e.stopPropagation(),e.preventDefault())},_onArrowKeyDown:function(e){e.keyCode==
y[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(r.focus(this.titleNode),e.stopPropagation(),e.preventDefault())},focus:function(e){this.disabled||r.focus("start"==e?this.titleNode:this._popupStateNode)}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(b,y,r){return b("dijit.form.RadioButton",[y,r],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),
function(b,y,r,a,k,e){return y("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var g=[];k("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(a.hitch(this,function(h){h.name==this.name&&h.form==this.focusNode.form&&(h=e.getEnclosingWidget(h))&&g.push(h)}));return g},_setCheckedAttr:function(g){this.inherited(arguments);this._created&&g&&b.forEach(this._getRelatedWidgets(),a.hitch(this,function(h){h!=this&&h.checked&&h.set("checked",!1)}))},_getSubmitValue:function(g){return null==
g?"on":g},_onClick:function(g){if(this.checked||this.disabled)return g.stopPropagation(),g.preventDefault(),!1;if(this.readOnly)return g.stopPropagation(),g.preventDefault(),b.forEach(this._getRelatedWidgets(),a.hitch(this,function(l){r.set(this.focusNode||this.domNode,"checked",l.checked)})),!1;var h=!1,m;b.some(this._getRelatedWidgets(),function(l){return l.checked?(m=l,!0):!1});this.checked=!0;m&&(m.checked=!1);if(!1===this.onClick(g)||g.defaultPrevented)h=!0;this.checked=!1;m&&(m.checked=!0);
h?g.preventDefault():this.set("checked",!0);return!h}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(b,y,r,a,k,e,g){return b("dijit.PopupMenuItem",g,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var h=a("*",this.srcNodeRef);this.inherited(arguments,[h[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(h,m){var l=this.popup;
k.open(r.delegate(h,{popup:this.popup,around:this.domNode}));m&&l.focus&&l.focus()},_closePopup:function(){k.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var h=a("[widgetId]",this.dropDownContainer)[0];this.popup=e.byNode(h)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&
y.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(h){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(h),delete this.popup);this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/Gallery":function(){define(["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!arcgisonline/sharing/dijit/views,dijit/_Widget,dijit/_Templated,dojo/NodeList-fx,dijit/layout/ContentPane,arcgisonline/sharing/util,dijit/form/Button,arcgisonline/sharing/geow/QueryReadStore"],
function(b,y,r){b.provide("arcgisonline.sharing.dijit.Gallery");b.require("arcgisonline.sharing.dijit.views");b.require("dijit._Widget");b.require("dijit._Templated");b.require("dojo.NodeList-fx");b.require("dijit.layout.ContentPane");b.require("arcgisonline.sharing.util");b.require("dijit.form.Button");b.requireLocalization("arcgisonline","arcgisonline");b.require("arcgisonline.sharing.geow.QueryReadStore");b.declare("arcgisonline.sharing.dijit.Gallery",[y._Widget,y._Templated],{widgetsInTemplate:!0,
templateString:'\x3cdiv dojoAttachPoint\x3d"containerNode"\x3e\r\n  \x3cdiv class\x3d"clearfix galleryBackground"\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"flowContainer" class\x3d"clearfix"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"pageControls" class\x3d"esriFloatLeading" style\x3d"maxheight: 3em; width: 100%; clear: both;"\x3e\r\n      \x3cp style\x3d"text-align: center;"\x3e\r\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_prev" style\x3d"display:none;"\x3e${i18n.previous}\x3c/span\x3e\r\n        \x3cspan dojoAttachPoint\x3d"_pages" dojoAttachEvent\x3d"onClick:goToPage" class\x3d"esriItemLinks esriPagingLinks"\x3e\x3c/span\x3e\r\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_next" style\x3d"display:none;"\x3e${i18n.next}\x3c/span\x3e\r\n      \x3c/p\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
tooltip:null,showToolTip:!0,showNodeLabels:!0,showThumbnailInDetails:!0,fadeOutOtherNodes:!0,animFadeOut:!0,unfocusedOpacity:.5,highlightFocusedNode:!0,largeNodes:0,maxNodes:0,flowContainer:null,showDelay:300,nodesPerPage:4,currentPage:1,pageCount:1,maxPages:null,showPageControls:!0,_prev:null,_next:null,_pages:null,nodeClass:"galleryNode",nodeHighlightClass:"highlight",thumbClass:"galleryThumbnail",labelClass:"label",labelBgClass:"galleryLabelContainer",detailsClass:"galleryDetail",detailsThumbClass:"galleryDetailThumb",
messageClass:"galleryMessage",_lastFocusedNode:null,_timer:null,_galleryFadeIn:null,_galleryFadeOut:null,_galleryFadeOutTotal:null,_suspendTooltip:!1,includeNode:null,_defaultNoResultsMessage:null,noResultsMessage:null,items:null,i18n:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this.i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").gallery);this._defaultNoResultsMessage=this.i18n.filterNoResults},
postCreate:function(){this._userToken=(this._user=arcgisonline.sharing.util.getUser())&&this._user.token;null===this.tooltip&&(this.tooltip=new arcgisonline.sharing.dijit._GalleryContentPane({_gallery:this},b.create("div",{id:this.id+"_popup"},b.body())),this._galleryFadeIn=b.animateProperty({node:this.flowContainer,properties:{opacity:1}}),this._galleryFadeOut=b.animateProperty({node:this.flowContainer,properties:{opacity:this.unfocusedOpacity}}),this._galleryFadeOutTotal=b.animateProperty({node:this.flowContainer,
properties:{opacity:0}}),b.connect(this.domNode,"scroll",this,function(){this.tooltip&&this.tooltip.isShowing&&this.tooltip.hide()}),this.showPageControls&&(b.connect(this,"onContentChange",this,this._layoutPageControls),b.connect(this,"onPageChange",this,this._layoutPageControls)))},_showTooltip:function(a,k){var e=this.tooltip.domNode,g;esriGeowConfig.isRightToLeft||(g=this.showThumbnailInDetails?{TL:"TL",TR:"TR"}:{TL:"TR",TR:"TL"});esriGeowConfig.isRightToLeft&&(g=this.showThumbnailInDetails?{BR:"BR"}:
{BR:"TR"});g=y.placeOnScreenAroundNode(e,a,g);this.tooltip.set("content",this._buildItemDetailsLayout(k,g,a));if(this.showThumbnailInDetails){(a="none"==b.style(e,"display"))&&b.style(e,{visibility:"hidden",display:"block"});var h=b.contentBox(e),m=b.coords(e);a&&b.style(e,{visibility:"",display:"none"});"TR"==g.aroundCorner?(b.style(e,"top",m.t-h.t+"px"),b.style(e,"left",m.l+h.l+"px")):"TL"==g.aroundCorner&&(b.style(e,"top",m.t-h.t+"px"),b.style(e,"left",m.l-h.l+"px"))}this._highlightNode(k);this.tooltip.show()},
node_onMouseEnter:function(a){var k=a.currentTarget,e=this._getItemByNode(k);this.onNodeMouseEnter(a,e);!this._suspendTooltip&&this.showToolTip&&(this.tooltip.isShowing&&this.tooltip.hide(),this._timer&&(clearTimeout(this._timer),this._timer=null),this._unhighlightNodes(),this._timer||(this._timer=setTimeout(b.hitch(this,function(){this._showTooltip(k,e)}),this.showDelay)))},node_onMouseLeave:function(a){this._timer&&(clearTimeout(this._timer),this._timer=null);var k=this._getItemByNode(a.currentTarget);
this.onNodeMouseLeave(a,k)},tooltip_onMouseLeave:function(a){this._unhighlightNodes();this.tooltip.hide()},_highlightNode:function(a){a=b.byId("galleryNode_"+a.id);this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeIn.stop(),this._galleryFadeOut.play()):b.style(this.flowContainer,"opacity",this.unfocusedOpacity));this.highlightFocusedNode&&b.addClass(a,this.nodeHighlightClass);this._lastFocusedNode=a},_unhighlightNodes:function(){this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeOut.stop(),
this._galleryFadeIn.play()):b.style(this.flowContainer,"opacity",1));null!==this._lastFocusedNode&&b.removeClass(this._lastFocusedNode,this.nodeHighlightClass);this._lastFocusedNode=null},_loadItems:function(a){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();this._galleryFadeOutTotal.onEnd=b.hitch(this,function(k){b.empty(this.flowContainer);0<k.length?(this.maxNodes&&(k=k.splice(0,this.maxNodes)),b.forEach(k,b.hitch(this,function(e,g){e.id||(e.id=g);this.flowContainer.appendChild(this._buildNodeLayout(e,
g<this.largeNodes))})),b.create("br",{style:{clear:"both"}},this.flowContainer),k=b.query("."+this.nodeClass,this.domNode),k.connect("onmouseenter",this,this.node_onMouseEnter),k.connect("onmouseleave",this,this.node_onMouseLeave),this.tooltip&&b.connect(this.tooltip.domNode,"onmouseleave",this,this.tooltip_onMouseLeave)):b.create("span",{innerHTML:this.noResultsMessage||this._defaultNoResultsMessage,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=
null;this._suspendTooltip=!1},a);this._galleryFadeOutTotal.play()},clear:function(a){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();b.empty(this.flowContainer);b.empty(this._pages);b.create("span",{innerHTML:a,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=null;this._suspendTooltip=!1},_buildNodeLayout:function(a,k){var e=b.create("div",{id:"galleryNode_"+a.id,"class":this.nodeClass});b.addClass(e,k?"large":
"small");var g=arcgisonline.sharing.util;k=g.relativeToExplicitUrl("images/transparent.gif");"Web Mapping Application"==a.type&&(k=g.getStaticImagesUrl()+"/webapp.png");k="Mobile Application"==a.type?g.getStaticImagesUrl()+"/mobileapp.png":"Web Scene"===a.type||"Scene Service"===a.type?g.getStaticImagesUrl()+"/desktopapp.png":"Workforce Project"===a.type?g.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===a.type?g.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===a.type?g.getStaticImagesUrl()+
"/hubpage.png":"Hub Site Application"===a.type?g.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===a.type?g.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===a.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?g.getStaticImagesUrl()+"/webtool.png":"Ortho Mapping Project"===a.type?g.getStaticImagesUrl()+"/orthomappingproject.png":"Ortho Mapping Template"===a.type?g.getStaticImagesUrl()+"/orthomappingtemplate.png":"Notebook"===a.type?g.relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png"):
g.getStaticImagesUrl()+"/desktopapp.png";g.getGalleryMainLinkInfo(a);g=b.create("a",{href:"#"},e);b.connect(g,"onclick",this,this.onNodeClick,a);b.create("img",{"class":this.thumbClass,alt:a.snippet||"",src:a.thumbnail?this._getThumbailUrl(a):k},g);this.showNodeLabels&&(k=b.create("div",{"class":"galleryLabelContainer"},e),a=a.title||"",b.create("span",{innerHTML:a,alt:a,title:a},k));return e},_buildItemDetailsLayout:function(a,k,e){return arcgisonline.sharing.dijit.views.item.medium(a,{showThumb:this.showThumbnailInDetails,
align:(esriGeowConfig.isRightToLeft?0:"TR"==k.aroundCorner)?"right":"left",hideOpenMenu:!0,showProfilePopup:!1})},_getItemByNode:function(a){for(;!b.hasClass(a,this.nodeClass);)a=a.parentNode;a=a.id.substr(a.id.indexOf("_")+1);for(var k=0;k<this.items.length;k++)if(this.items[k].id==a)return this.items[k];return null},_getThumbailUrl:function(a){var k=this._userToken;return esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/info/"+a.thumbnail+(k?"?token\x3d"+k:"")},_layoutPageControls:function(){b.empty(this._pages);
if(1!==this.pageCount){for(var a=1;a<=this.pageCount;a++){var k=b.create("span",{innerHTML:a},b.create("a",{onclick:b.hitch(this,this.goToPage,a)},this._pages));a==this.currentPage&&b.addClass(k,"currentPage")}1==this.currentPage?b.style(this._prev.domNode,"visibility","hidden"):b.style(this._prev.domNode,"visbility","");this.currentPage==this.pageCount?b.style(this._next.domNode,"visibility","hidden"):b.style(this._next.domNode,"visbility","")}},nextPage:function(a){this.currentPage<this.pageCount&&
(!a.keyCode||13===a.keyCode||32===a.keyCode)&&this.goToPage(this.currentPage+1)},prevPage:function(a){1<this.currentPage&&(!a.keyCode||13===a.keyCode||32===a.keyCode)&&this.goToPage(this.currentPage-1)},goToPage:function(a){0<this.pageCount&&!isNaN(a)&&0<a&&(this._suspendTooltip=!0,this._loadRange((a-1)*this.nodesPerPage,this.nodesPerPage),this.currentPage=a,this.onPageChange(this.currentPage,-1))},_loadRange:function(a,k){var e=b.clone(this.items);this._loadItems(e.splice(a,k))},_setItemsAttr:function(a){this.items=
this.includeNode?b.filter(a,this.includeNode):a;0==this.items.length?(this.pageCount=1,this.onContentChange(0)):(this.pageCount=Math.ceil(this.items.length/this.nodesPerPage),this.onContentChange(this.items.length));this.currentPage=1;this.goToPage(1)},onPageChange:function(a,k){},onContentChange:function(a){},onNodeClick:function(a,k){},onNodeMouseEnter:function(a,k){},onNodeMouseLeave:function(a,k){}});b.declare("arcgisonline.sharing.dijit._GalleryContentPane",y.layout.ContentPane,{_gallery:null,
animateShowHide:!0,"class":"galleryPopup",fadeDuration:300,isShowing:!1,postCreate:function(){this.inherited(arguments);b.style(this.domNode,{position:"absolute",top:"-1000px",opacity:0});b.style(this.domNode,esriGeowConfig.isRightToLeft||-1<b.indexOf(["ar","he"],b.locale)?"right":"left","-1000px");this.fadeIn=b.fadeIn({node:this.domNode,duration:this.fadeDuration});this.fadeOut=b.fadeOut({node:this.domNode,duration:this.fadeDuration,onEnd:b.hitch(this,"_afterFade")})},_afterFade:function(){b.style(this.domNode,
{top:"-1000px"});b.style(this.domNode,esriGeowConfig.isRightToLeft?"right":"left","-1000px")},show:function(a){this.isShowing=!0;this.animateShowHide?(this.fadeOut.stop(),this.fadeIn.play()):b.style(this.domNode,"display","block")},hide:function(){this.isShowing=!1;this.animateShowHide?(this.fadeIn.stop(),this.fadeOut.play()):b.style(this.domNode,"display","none")}})})},"arcgisonline/sharing/dijit/views":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,arcgisonline/pages/organization/widgets/ProfilePopup,arcgisonline/pages/portal/Portal,arcgisonline/pages/utils/arrays,arcgisonline/pages/item/_Info"],
function(b,y,r){b.provide("arcgisonline.sharing.dijit.views");b.require("arcgisonline.sharing.dijit.TextMenu");b.require("arcgisonline.sharing.util");b.require("arcgisonline.pages.organization.widgets.ProfilePopup");b.require("arcgisonline.pages.portal.Portal");b.require("arcgisonline.pages.utils.arrays");b.require("arcgisonline.pages.item._Info");arcgisonline.sharing.dijit.views.item={detailClass:"itemDetail",thumbClass:"itemThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this._i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);b.mixin(this._i18n,{source:b.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.source});b.mixin(this._i18n,{visitOrganization:b.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.visitOrganization});return this._i18n},_util:arcgisonline.sharing.util,
small:function(a,k,e){var g=b.create,h=g("div",{"class":this.detailClass+" small"}),m=this._util.getGalleryMainLinkInfo(a);k&&(k=g("div",{"class":this.thumbContainerClass},h),b.addClass(h,e),g("img",{src:this._getThumbnailUrl(a),"class":this.thumbClass},g("a",{href:m.href||"#",target:m.target,alt:m.tip,title:m.tip},k)));g("a",{href:"#",innerHTML:a.title},g("span",{"class":this.titleClass},h));e=this._util.getSnippet(a.snippet,a.description);g("span",{"class":this.snippetClass,innerHTML:e},h);a=arcgisonline.sharing.geow.Content.changeTypename(a)+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy+"\x3cspan class\x3d'esriItemOwner'\x3e"+a.owner+"\x3c/span\x3e ("+this._util.toFullDateString(a.modified)+")";g("span",{innerHTML:a},h);return h},mediumFormat:function(a,k){return this.medium(k,!0,"left")},itemLinkInfo:function(a){var k=this._util.getGalleryMainLinkInfo(a);a=this._util.getItemDetailsLinkInfo(a);return{openLink:k,detailLink:a}},medium:function(a,k){var e=b.create,g=e("div",{"class":this.detailClass+" medium"});if(k.unshareHandler){var h=
e("a",{href:"#",className:"unshare esriFloatTrailing",style:{display:"none"}},g);e("img",{src:arcgisonline.sharing.util.relativeToExplicitUrl("images/delete_20x20.png"),alt:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup,title:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup},h);b.connect(h,"onclick",b.partial(k.unshareHandler,a.id,g))}var m=this.itemLinkInfo(a);h=m.openLink;m=m.detailLink;if(k.showThumb){var l=e("div",{"class":this.thumbContainerClass},g);b.addClass(g,
k.align||"left");if(a.thumbnail&&0<a.thumbnail.length){var f=e("img",{src:this._getThumbnailUrl(a),"class":this.thumbClass},e("a",{href:h.href||"#",target:h.target,alt:h.tip,title:h.tip},l));h.onclick&&b.connect(f,"onclick",h.onclick)}else f=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png"),f="Web Mapping Application"==a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==
a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubpage.png":"Hub Site Application"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===a.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?
arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Image"===a.type?arcgisonline.sharing.util.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):"Web Scene"===a.type||"Scene Service"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":"Ortho Mapping Template"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingtemplate.png":"Ortho Mapping Project"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingproject.png":
arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png",f=e("img",{src:f,"class":this.thumbClass},e("a",{href:h.href||"#",target:h.target,alt:h.tip,title:h.tip},l)),h.onclick&&b.connect(f,"onclick",h.onclick);e("br",null,l);l=e("span",{"class":"esriItemLinks"},l);f=this._util.getItemOpenLinkObjects(a);if(0<f.length){var c=e("span",{innerHTML:h.label},e("a",{href:h.href||"#",target:h.target,alt:h.tip,title:h.tip,style:{marginRight:0}},l));h.onclick&&b.connect(c,"onclick",h.onclick);k.hideOpenMenu||
(e("span",{innerHTML:"\x26nbsp;"},l),h=e("div",{innerHTML:"","class":"dijitReset dijitInline esriArrows",title:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,alt:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,style:{height:"11px",cursor:"pointer"}},l),new arcgisonline.sharing.dijit.TextMenu({triggerNode:h,labelNode:c,textMenuItems:f}));e("span",{innerHTML:"\x26nbsp;\x26nbsp\x26nbsp;"},l)}null!==m&&e("span",{innerHTML:m.label},e("a",{href:m.link||"#",alt:m.tip,title:m.tip,target:m.target?
m.target:""},l))}h=e("div",{"class":"itemTextContainer"},g);e("a",{href:m.link,innerHTML:a.title,alt:m.tip,title:m.tip},e("span",{"class":this.titleClass},h));m=this._util.getSnippet(a.snippet,a.description);e("span",{"class":this.snippetClass,innerHTML:m||""},h);m=e("div",null,h);(l=this._getTypeIcon(a))&&e("span",{innerHTML:l},m);l="";l=arcgisonline.sharing.geow.Content.changeTypename(a)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;f=-1<b.indexOf(a.typeKeywords,"ArcGIS Server")||"Feature Collection"==
a.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"";c="GeoJson"===a.type?"GeoJSON":a.type;c=-1<c.toLowerCase().indexOf("add in")?c.replace(/(add in)/ig,"Add-In"):c;e("span",{title:f+c,innerHTML:l,"class":"dim"},m);l=e("span",{"class":"esriItemAuthor"},m);l=e("a",{innerHTML:a.owner,"class":"linkNoHref",owner:a.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},l);k.showProfilePopup?(this._bindProfilePopup(l),
b.attr(l,{"class":"linkNoHref",owner:a.owner})):b.attr(l,"href",esriGeowConfig.baseUrl+"user.html?user\x3d"+a.owner);e("div",{innerHTML:"\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(a.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},m);(k=arcgisonline.sharing.geow.Content._getPremiumItemNode(a))&&b.place(k,b.create("div",{className:"dim esriPremiumContent"},m,"last"));k=b.create("span",{"class":"dojoxRating dijitInline"});
9>b.isIE&&b.style(k,"zoom",0);m=b.create("ul",null,k);l=Math.round(a.avgRating);for(f=1;f<=l;f++)b.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},m);for(;5>l;l++)b.create("li",{"class":"dojoxRatingStar dijitInline Hover"},m);a=this._getMsgRatings(a);e=e("span",{innerHTML:a,"class":"dim"},h);b.place(k,e,"first");return g},map:function(a,k){var e=b.create;k=k||e("div",{"class":this.detailClass+" medium"});if("public_authoritative"===a.contentStatus&&!a.orgSelf)if(esriGeowConfig.self.id&&
a.orgId===esriGeowConfig.self.id)a.orgSelf=esriGeowConfig.self;else return esri.request({url:location.protocol+"//"+esriGeowConfig.self.portalHostname+"/sharing/rest/portals/"+a.orgId+"?f\x3djson",callbackParamName:"callback",load:function(c,d){a.orgSelf=c;arcgisonline.sharing.dijit.views.item.map(a,k)},error:function(c,d){a.orgSelf={};arcgisonline.sharing.dijit.views.item.map(a,k)}}),k;var g=e("div",{"class":"itemTextContainer"},k),h=this._util.getSnippet(a.snippet,a.description);e("span",{"class":this.snippetClass,
innerHTML:h?this._util.htmlEncode(h):""},g);h=e("span",null,g);var m=this._getTypeIcon(a,!0);m&&e("span",{innerHTML:m},h);m="";m=a.url&&-1<b.indexOf(a.typeKeywords,"Hosted Service")&&(arcgisonline.sharing.util.isHostedServiceItem(a)||arcgisonline.sharing.util.portalSupportsHostedServices())?arcgisonline.sharing.geow.Content.changeTypename(a,!0)+arcgisonline.sharing.dijit.views.item.i18n().startBracket+arcgisonline.sharing.dijit.views.item.i18n().hostedService+arcgisonline.sharing.dijit.views.item.i18n().endBracket+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy:arcgisonline.sharing.geow.Content.changeTypename(a,!1)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;var l=-1<b.indexOf(a.typeKeywords,"ArcGIS Server")||"Feature Collection"==a.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"",f="GeoJson"===a.type?"GeoJSON":a.type;f=-1<f.toLowerCase().indexOf("add in")?f.replace(/(add in)/ig,"Add-In"):f;e("span",{title:l+f,innerHTML:m,"class":"dim"},h);m=e("span",{"class":"esriItemAuthor"},
h);"public_authoritative"===a.contentStatus&&a.orgSelf&&a.orgSelf.name?(m=e("a",{innerHTML:a.orgSelf.name,"class":"linkNoHref",owner:a.orgSelf.name,alt:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization,title:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization},m),b.connect(m,"onclick",this,function(c){arcgisonline.map.storage.saveMapInCookie(null,!1);a.orgSelf.urlKey?c=location.protocol+"//"+a.orgSelf.urlKey+"."+a.orgSelf.customBaseUrl+"/home/index.html":(c=location.protocol+
"//"+a.orgSelf.portalHostname+"/home/index.html","7443"===location.port&&(c=arcgisonline.sharing.util.getSecureUrl(baseUrl)));window.open(c)})):(m=e("a",{innerHTML:a.owner,"class":"linkNoHref",owner:a.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},m),this._bindProfilePopup(m));b.attr(m,{"class":"linkNoHref",owner:a.owner});e("div",{innerHTML:"\x3cbr/\x3e\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+
"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(a.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},h);(m=arcgisonline.sharing.geow.Content._getPremiumItemNode(a))&&b.place(m,b.create("div",{className:"dim esriPremiumContent"},h,"last"));h=b.create("span",{"class":"dojoxRating dijitInline"});9>b.isIE&&b.style(h,"zoom",0);m=b.create("ul",null,h);l=Math.round(a.avgRating);for(f=1;f<=l;f++)b.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},m);for(;5>l;l++)b.create("li",
{"class":"dojoxRatingStar dijitInline Hover"},m);m=this._getMsgRatings(a);e=e("span",{innerHTML:m,"class":"dim"},g);b.place(h,e,"first");return k},_bindProfilePopup:function(a){this.popup&&this.popup.close();b.connect(a,"onclick",this,function(k){var e=b.attr(k.currentTarget,"owner");this.popup=new arcgisonline.pages.organization.widgets.ProfilePopup({username:e,opener:k.target,portal:new arcgisonline.pages.portal.Portal(esriGeowConfig.restBaseUrl)});this.popup.open()})},_getMsgRatings:function(a){var k=
"";k=1===a.numRatings?k+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingMsg,{ratingcount:b.number.format(a.numRatings,{pattern:"#,###,###,##0"})}):k+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingsMsg,{ratingcount:b.number.format(a.numRatings,{pattern:"#,###,###,##0"})});k=1===a.numComments?k+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentMsg,{commentcount:b.number.format(a.numComments,{pattern:"#,###,###,##0"})}):k+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentsMsg,
{commentcount:b.number.format(a.numComments,{pattern:"#,###,###,##0"})});var e=a.type;e=e?arcgisonline.pages.item._Info[e]||null:null;k=!e||"file"!==e.classification||arcgisonline.pages.utils.arrays.includes(e.types,"is-views")||arcgisonline.pages.utils.arrays.includes(e.types,"is-pdf")?1===a.numViews?k+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewMsg,{viewcount:b.number.format(a.numViews,{pattern:"#,###,###,##0"})}):k+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewsMsg,
{viewcount:b.number.format(a.numViews,{pattern:"#,###,###,##0"})}):1===a.numViews?k+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadMsg,{downloadcount:b.number.format(a.numViews,{pattern:"#,###,###,##0"})}):k+b.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadsMsg,{downloadcount:b.number.format(a.numViews,{pattern:"#,###,###,##0"})});return k=arcgisonline.sharing.dijit.views.item.i18n().startBracket+k+arcgisonline.sharing.dijit.views.item.i18n().endBracket},
_getThumbnailUrl:function(a){var k=this._util.getToken();k=k?"?token\x3d"+k:"";if(a.thumbnail)return esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/info/"+a.thumbnail+k;k=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png");return k="Web Mapping Application"==a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==a.type?arcgisonline.sharing.util.getStaticImagesUrl()+
"/workforceproject.png":"Geoprocessing Service"===a.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Web Scene"==a.type||"Scene Service"===a.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png"},_getTypeIcon:function(a,k){k=arcgisonline.sharing.geow.Content._getItemIconUrl(a,!0);var e=(-1<b.indexOf(a.typeKeywords,"ArcGIS Server")||"Feature Collection"==
a.type?this.i18n().source+" ":"")+("GeoJson"===a.type?"GeoJSON":a.type),g="";k&&("Web Scene"===e&&(e=-1<b.indexOf(a.typeKeywords,"ViewingMode-Local")?this.i18n().localWebScene:this.i18n().globalWebScene),g='\x3cimg src\x3d"'+k+'" alt\x3d"'+e+'" title\x3d"'+e+'" style\x3d"vertical-align:middle;"/\x3e\x26nbsp;');return g}};arcgisonline.sharing.dijit.views.group={_util:arcgisonline.sharing.util,detailClass:"itemDetail group",thumbClass:"groupThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this._i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(a){var k=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/groups/"+a.id+"/info/"+a.thumbnail+(k?"?token\x3d"+k:"")},small:function(a,k,e){var g=b.create,h=g("div",{"class":this.detailClass});b.addClass(h,
"small");var m={target:"",href:"#"};k&&(k=g("div",{"class":this.thumbContainerClass},h),b.addClass(h,e||"left"),a.thumbnail&&0<a.thumbnail.length?g("img",{src:this._getThumbnailUrl(a),"class":this.thumbClass},k):g("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},k));g("a",{href:m.href,target:m.target,innerHTML:a.title,alt:m.tip,title:m.tip},g("span",{"class":this.titleClass},h));e=this._util.getSnippet(a.snippet,a.description);g("span",{"class":this.snippetClass,
innerHTML:e},h);e=g("span",null,null);g("span",{innerHTML:"owned by ","class":"dim"},e);e=g("span",{"class":"esriItemAuthor"},e);g("a",{innerHTML:a.owner,href:""},e);return h},medium:function(a,k){var e=b.create,g=e("div",{"class":this.detailClass+" medium"}),h=esriGeowConfig.baseUrl+"group.html?id\x3d"+a.id;arcgisonline.sharing.dijit.views.group.i18n();arcgisonline.sharing.dijit.views.group.i18n();if(k.showThumb){var m=e("div",{"class":this.thumbContainerClass},g);b.addClass(g,k.align||"left");if(k.groupsUser){var l=
this._util.getUser();arcgisonline.sharing.geow.Community.getProfile(a.owner,b.hitch(this,function(d,u,n){u.code||u.message?e("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},e("a",{href:h||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)):"public"===d.access||u.orgId&&u.orgId===l.accountId?a.thumbnail&&0<a.thumbnail.length?e("img",{src:this._getThumbnailUrl(a),
"class":this.thumbClass},e("a",{href:h||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)):e("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},e("a",{href:h||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)):e("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},e("a",{href:h||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m))},a))}else a.thumbnail&&0<a.thumbnail.length?e("img",{src:this._getThumbnailUrl(a),"class":this.thumbClass},e("a",{href:h||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)):e("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},e("a",{href:h||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},m)),e("br",null,m),b.place(this._util.getGroupLinks(a),m)}var f=e("div",{"class":"itemTextContainer"},g);e("a",{href:h,innerHTML:a.title,alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},e("span",{"class":this.titleClass},f));var c=this._util.getSnippet(a.snippet,
a.description);e("span",{"class":this.snippetClass,innerHTML:c||""},f);f=e("span",null,f);e("span",{innerHTML:arcgisonline.sharing.dijit.views.group.i18n().createdBy,"class":"dim"},f);c=e("span",{"class":"esriItemAuthor"},f);c=e("a",{innerHTML:a.owner,alt:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile},c);k.showProfilePopup?(this._bindProfilePopup(c),b.attr(c,{"class":"linkNoHref",owner:a.owner})):b.attr(c,"href",esriGeowConfig.baseUrl+
"user.html?user\x3d"+a.owner);k=a.created;e("span",{innerHTML:"\x26nbsp;"+arcgisonline.sharing.dijit.views.group.i18n().createdOn+"\x26nbsp;"+this._util.toFullDateString(k),"class":"dim"},f);return g}};arcgisonline.sharing.dijit.views.profile={_util:arcgisonline.sharing.util,detailClass:"itemDetail",thumbClass:"profileThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle esriProfilePopupTitle",snippetClass:"esriItemSnippet",noDescriptionText:"",i18n:function(){if(this._i18n)return this._i18n;
this._i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this._i18n,b.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(a){var k=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/users/"+a.username+"/info/"+a.thumbnail+(k?"?token\x3d"+k:"")},medium:function(a,k){arcgisonline.sharing.dijit.views.profile.noDescriptionText=arcgisonline.sharing.dijit.views.profile.i18n().userPersonalInfoMsg;arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText=
arcgisonline.sharing.dijit.views.profile.i18n().memberPersonalInfoMsg;var e=arcgisonline.sharing.util.getUser(),g=b.create,h=g("div",{"class":this.detailClass});b.addClass(h,"medium");g("div",{"class":this.titleClass,innerHTML:a.fullName||a.username},h);if(e&&e.accountId&&a.accountId&&a.role&&e.accountId==a.accountId){var m="\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;";"account_publisher"===a.role?m+=arcgisonline.sharing.dijit.views.profile.i18n().publisher:"account_admin"===a.role?m+=arcgisonline.sharing.dijit.views.profile.i18n().administrator:
"account_user"===a.role&&(m+=arcgisonline.sharing.dijit.views.profile.i18n().user);g("span",{innerHTML:m},g("strong",{},h))}k.showThumb&&(m=g("div",{"class":this.thumbContainerClass},h),b.addClass(h,k.align||"left"),a.thumbnail&&0<a.thumbnail.length?g("img",{src:this._getThumbnailUrl(a),"class":this.thumbClass},m):g("img",{src:this._util.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),"class":this.thumbClass,style:"width:150px; height:150px;"},m));k=g("div",{"class":this.snippetClass},
g("span",{"class":"esriItemLinks"},h));m=this._util.removeHTMLTags(a.description);var l=e&&e.accountId&&a.orgId&&e.accountId===a.orgId?arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText:arcgisonline.sharing.dijit.views.profile.noDescriptionText;m=0<m.length?a.description:l;m=this._util.linkifyText(m);8>b.isIE&&(m="\x3cpre class\x3d'esriProfileDesc'\x3e"+m+"\x3c/pre\x3e");g("span",{innerHTML:m,style:"white-space:pre-wrap;"},k,"only");if("undefined"!==typeof isEmbedded&&isEmbedded)return h;
k=g("div",{style:{clear:"both"},"class":"profileLinks esriItemLinks esriFloatTrailing left"},h);m=g("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"user.html?user\x3d"+a.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().profile},k,"last");b.connect(m,"onclick",function(){-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map.main.map&&arcgisonline.map.main.mapInitialized?arcgisonline.map.storage.saveMapInCookie(null,!0,null,null,b.hitch(this,function(){window.location=
esriGeowConfig.baseUrl+"user.html?user\x3d"+a.username})):window.location=esriGeowConfig.baseUrl+"user.html?user\x3d"+a.username});this._util.relativeToExplicitUrl("js/arcgisonline/css/images/transparent.gif");-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&this._util.relativeToExplicitUrl("images/transparent.gif");m=esriGeowConfig.userRole&&esriGeowConfig.userRole.isAdmin();var f=(l=esriGeowConfig.userRole&&esriGeowConfig.userRole.isCustom())&&esriGeowConfig.userRole.canViewUsers()&&
esriGeowConfig.userRole.canViewOrgItems();e&&(e.username===a.username?g("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},k,"last"):e.accountId&&e.role&&a.orgId&&a.role&&(m||l&&f)&&e.accountId===a.orgId&&g("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html?user\x3d"+a.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},k,"last"));g("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?q\x3downer:%22"+
a.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().items},k,"last");g("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?t\x3dgroups\x26q\x3downer:%22"+a.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().groups},k,"last");g("div",{style:{clear:"both",width:"100%"}},h);return h}}})},"arcgisonline/pages/organization/widgets/ProfilePopup":function(){define("require exports tslib esri/Evented dojo/keys dojo/on dojo/text!./templates/ProfilePopup.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase dijit/popup dijit/TooltipDialog arcgisonline/pages/utils/icons arcgisonline/pages/utils/dom arcgisonline/pages/utils/strings arcgisonline/pages/utils/user arcgisonline/pages/utils/focus arcgisonline/pages/pageUtil arcgisonline/pages/dijit/MemberThumb arcgisonline/pages/organization/widgets/GroupIcon arcgisonline/pages/portal/PortalUser arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/sharing/dijit/_LevelAwareMixin arcgisonline/telemetry arcgisonline/tsutils/declareDecorator".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d,u,n,t,x,A,B,F,w,D,q,v,z,C){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);u=r.__importDefault(u);n=r.__importDefault(n);t=r.__importDefault(t);x=r.__importDefault(x);A=r.__importDefault(A);B=r.__importDefault(B);F=r.__importDefault(F);w=r.__importDefault(w);D=r.__importDefault(D);q=
r.__importDefault(q);v=r.__importDefault(v);z=r.__importDefault(z);C=r.__importDefault(C);return function(){function E(G,H){this.templateString=g.default;this.i18n=h.default;this.icons=d.default;this.isSelf=this.loaded=!1;this.itemTotal=0;this.canUpdateProfile=!1}E.prototype.postCreate=function(){var G;this.inherited(arguments);this.telemetry=z.default.init(this.portal,!0);this.dialog=new c.default({class:"profile-popup",title:"",content:this.domNode,_onKey:this.handleDialogKeydown.bind(this)});this.currentUser=
D.default.getUser();this.isSelf=(null===(G=this.currentUser)||void 0===G?void 0:G.username)===this.username;this.addEventListeners()};E.prototype.open=function(){this.logEvent("open");this.render()};E.prototype.close=function(){this.loaded&&(f.default.close(this.dialog),this.emit("close"),this.dialog.destroy(),this.destroy())};E.prototype.handleDialogKeydown=function(G){var H=this;if(G.keyCode===k.default.TAB)if(G.stopPropagation(),this.lastFocusItem!==G.target||G.shiftKey)G.shiftKey&&this.firstFocusItem===
G.target&&(G.preventDefault(),this.opener.focus(),this.close());else{G.preventDefault();var K=x.default.getFocusableElements(document.body);K.forEach(function(I,J){I===H.opener&&K[J+1].focus()});this.close()}};E.prototype.render=function(){var G=this;this.getUser(this.username).then(function(H){var K,I,J=null===(K=G.currentUser)||void 0===K?void 0:K.userRole;K=H.orgId&&H.orgId===(null===(I=G.currentUser)||void 0===I?void 0:I.orgId);I=(null===J||void 0===J?void 0:J.isAdmin())&&K;G.canUpdateProfile=
G.isSelf||I||(null===J||void 0===J?void 0:J.canUpdateUsers())&&K;H.fullName||(H.fullName=t.default.createFullName(H));J=H.username;I=H.fullName;K=H.groups;var Q=H.description;H.thumbnailUrl||(H.thumbnailUrl="");new B.default({member:new w.default(r.__assign(r.__assign({},H),{portal:G.portal})),cssClasses:"member-thumb--small margin-right-half flex-0"},G.domNode.querySelector(".js-member-thumb"));G.fullNameEl.textContent=I;G.usernameEl.textContent=J;Q&&(Q=n.default.escapeNewlines(n.default.addHyperlinks(n.default.restoreNewlines(Q))));
G.bioEl.innerHTML=n.default.insertHTMLLineBreaks(Q);Q||u.default.hideNode(G.bioContainer);K?G.renderGroups(K):G.getUserGroups(J).then(function(V){G.renderGroups(V.results)});G.user=H;G.getUserItems(J).then(function(V){V.total&&(G.itemCountEl.textContent=G.itemTotal=V.total,u.default.showNode(G.itemsSection));G.showContent();G.checkIfHideProfileLink()},function(){G.showContent();G.checkIfHideProfileLink()})})};E.prototype.checkIfHideProfileLink=function(){this.itemTotal||this.canUpdateProfile||u.default.hideNode(this.viewProfileBtn)};
E.prototype.renderGroups=function(G){var H=this;if(G&&G.length){if(G.slice(0,5).forEach(function(I){I=new F.default({group:I,portal:H.portal,size:"32",letterSize:"1",cssClasses:"org-member-card__group-tile"});H.groupIcons.appendChild(I.domNode)}),5<G.length){var K=document.createElement("div");K.className="org-member-card__more-tile link-darker-gray flex-center";K.textContent="+"+(G.length-5);this.groupIcons.appendChild(K)}}else u.default.hideNode(this.groupsSection)};E.prototype.getUserItems=function(G){var H;
return D.default.request({url:q.default.restBaseUrl+"search",content:{q:'owner:"'+G+'" '+((null===(H=null===q.default||void 0===q.default?void 0:q.default.viewQueries)||void 0===H?void 0:H.none)||""),sortField:"relevance",sortOrder:"desc",num:100}})};E.prototype.getUserGroups=function(G){return D.default.request({url:q.default.restBaseUrl+"community/groups",content:{q:'(owner:"'+G+'")'}})};E.prototype.showContent=function(){var G=this;this.groupsSection.classList.contains("hide")&&this.itemsSection.classList.contains("hide")&&
!this.bioEl.innerHTML&&u.default.hideNode(this.bottomSection);this.loader.classList.remove("is-active");u.default.showNode(this.content);this.loaded=!0;f.default.open({popup:this.dialog,orient:["below","above"],around:this.opener,onCancel:function(){G.opener.focus();G.close()}});var H=x.default.getFocusableElements(this.dialog.domNode);this.firstFocusItem=H[0];this.lastFocusItem=H[H.length-1];this.firstFocusItem.focus();this.dialog.domNode.parentElement.classList.add("profile-popup__container");this.dialogClass&&
this.dialog.domNode.parentElement.classList.add(this.dialogClass);setTimeout(function(){u.default.showHide(G.bioToggle,G.bioEl.scrollHeight>G.bioEl.clientHeight)},100)};E.prototype.getUser=function(G){return D.default.request({url:q.default.restBaseUrl+"community/users/"+G})};E.prototype.addEventListeners=function(){var G=this;this.own(e.default(this.closeIcon,"click",function(){f.default.close(G.dialog)}),e.default(this.domNode,"click",function(H){H.stopPropagation()}),e.default(document.body,"click",
function(){G.close()}),e.default(this.groupsSection,"click",function(){G.logEvent("view all groups");A.default.goToPage("groups",G.user)}),e.default(this.itemsSection,"click",function(){G.logEvent("view all content");A.default.goToPage("content",G.user)}),e.default(this.viewProfileBtn,"click",function(){G.logEvent("view profile");window.open(q.default.baseUrl+"user.html"+(G.isSelf?"":"?user\x3d"+G.username),"_blank")}),e.default(this.bioToggle,"click",function(){return G.handleBioToggleClick()}))};
E.prototype.handleBioToggleClick=function(){this.bioContainer.classList.toggle("profile-popup__bio-container--expanded")};E.prototype.logEvent=function(G){var H;null===(H=this.telemetry)||void 0===H?void 0:H.logEvent({category:"profile popup",action:G})};return E=r.__decorate([C.default(l.default,m.default,v.default,a.default)],E)}()})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d){b=b("dijit.TooltipDialog",[h,f,l,m],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:c,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(e(this.domNode,"keydown",k.hitch(this,"_onKey")))},orient:function(u,n,t){u={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[n+"-"+t];y.replace(this.domNode,u,this._currentOrientClass||"");this._currentOrientClass=u},focus:function(){this._getFocusItems();
g.focus(this._firstFocusItem)},onOpen:function(u){this.orient(this.domNode,u.aroundCorner,u.corner);var n=u.aroundNodePos;"M"==u.corner.charAt(0)&&"M"==u.aroundCorner.charAt(0)?(this.connectorNode.style.top=n.y+(n.h-this.connectorNode.offsetHeight>>1)-u.y+"px",this.connectorNode.style.left=""):"M"==u.corner.charAt(1)&&"M"==u.aroundCorner.charAt(1)&&(this.connectorNode.style.left=n.x+(n.w-this.connectorNode.offsetWidth>>1)-u.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(u){if(u.keyCode==
a.ESCAPE)this.defer("onCancel"),u.stopPropagation(),u.preventDefault();else if(u.keyCode==a.TAB){var n=u.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(u.stopPropagation(),u.preventDefault()):n==this._firstFocusItem&&u.shiftKey?(g.focus(this._lastFocusItem),u.stopPropagation(),u.preventDefault()):n!=this._lastFocusItem||u.shiftKey?u.stopPropagation():(g.focus(this._firstFocusItem),u.stopPropagation(),u.preventDefault())}}});r("dojo-bidi")&&b.extend({_setTitleAttr:function(u){this.containerNode.title=
this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,u):u;this._set("title",u)},_setTextDirAttr:function(u){this._created&&this.textDir==u||(this._set("textDir",u),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return b})},"arcgisonline/pages/utils/user":function(){define("require exports tslib ../../esriGeowConfig ./resources ./arrays dojo/Deferred dojo/_base/kernel esri/lang".split(" "),function(b,y,r,a,k,e,g,h,m){a=r.__importDefault(a);
k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);return function(){function l(){}l.createFullName=function(f){var c=null===f||void 0===f?void 0:f.fullName;m.default.isDefined(f.firstName)&&m.default.isDefined(f.lastName)&&(c="ja"===h.default.locale?f.lastName+" "+f.firstName:f.firstName+" "+f.lastName);return c};l.splitFullName=function(f){var c={first:void 0,last:void 0};f&&(f=f.split(" "),1===f.length?(c.first=f[0],c.last=""):1<f.length&&
(c.last=f.splice(f.length-1,1)[0],c.first=f.join(" ")));return c};l.checkUsernames=function(f){var c=new g.default,d={usernames:[]};k.default.sendAllResources(a.default.restBaseUrl+"community/checkUsernames",200,f,function(u){return{usernames:u.join(",")}}).then(function(u){u.forEach(function(n){return d.usernames=d.usernames.concat(n.usernames)});c.resolve(d)},function(u){c.resolve(u)});return c};l.checkForFavorites=function(f,c,d){var u=new g.default,n=(null===d||void 0===d?void 0:d.items)||[];
f=null===f||void 0===f?void 0:f.favGroupId;var t=n.map(function(x){return x.id});f&&(null===t||void 0===t?0:t.length)?(f='(group:"'+f+'" AND id:('+t.join(" OR ")+"))",c.queryItems({q:f,num:n.length||1},!0).then(function(x){var A=x.results||[];n.forEach(function(B){B.isFavorite=!!e.default.find(A,function(F){return B.id===F.id})});u.resolve(d)},function(x){u.resolve(d)})):u.resolve(d);return u};l.createValidOrgUsername=function(f,c,d,u){var n,t=null!==(n=(null===f||void 0===f?void 0:f.length)+(null===
c||void 0===c?void 0:c.length))&&void 0!==n?n:0;f=f.substring(0,f.length-(t>u?t%u:0))+c.replace(/-/g,"_");f.length<d&&(c=d-f.length,f&&0<c&&(d=""+(new Date).getTime(),f+=d.substring(d.length-c)));return f};l.stripOrgKeyFromUsername=function(f,c){if(f){var d=f.lastIndexOf(c);if(-1<d&&d<f.length-1&&d===f.length-c.length-1)return f.substring(0,d)}return f};l.cleanUsername=function(f,c){var d=/[^[a-zA-Z0-9@_\.]]*/g,u=/[^[a-zA-Z0-9@_\.\-]]*/g;return 0<(null===f||void 0===f?void 0:f.length)?c?f.replace(u,
"_"):f.replace(d,"_"):f};l.cleanUsernameDomain=function(f,c,d){return f&&(c||d)&&(c=f.indexOf("\\"),-1<c&&c<=f.length-2)?f.substring(c+1)+"@"+f.substring(0,c).toUpperCase():f};l.stripUsernameDomain=function(f,c,d){return f&&!c&&d?f.split("@").shift():f};l.removeSAMLSuffix=function(f,c){c="_"+c;return f.lastIndexOf(c)===f.length-c.length?f.substring(0,f.lastIndexOf(c)):f};l.addSAMLSuffix=function(f,c){var d=f&&c;c="_"+c;var u=d&&-1===f.indexOf(c);d=d&&f.lastIndexOf(c)===f.length-c.length;return u||
d?f+c:f};l.isStoryteller=function(f){var c;return"storytellerut"===(null===(c=f.userLicenseTypeId)||void 0===c?void 0:c.toLowerCase())};return l}()})},"arcgisonline/pages/utils/focus":function(){define(["require","exports","tslib","./dom"],function(b,y,r,a){a=r.__importDefault(a);return function(){function k(){}k.getFocusableElements=function(e){e=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex\x3d"-1"]), iframe');for(var g=[],h=0;h<e.length;h++){var m=e[h];null===
m.offsetParent||a.default.canBeDisabled(m)&&m.disabled||g.push(m)}return g};k.trapFocus=function(e){function g(m){var l=h(),f=l[0];l=l[l.length-1];if("Tab"===m.key||9===m.keyCode)m.shiftKey?document.activeElement===f&&(l.focus(),m.preventDefault()):document.activeElement===l&&(f.focus(),m.preventDefault())}var h=this.getFocusableElements.bind(this,e);e.addEventListener("keydown",g);return g};k.untrapFocus=function(e,g){e.removeEventListener("keydown",g)};return k}()})},"arcgisonline/pages/dijit/MemberThumb":function(){define("require exports tslib dojo/on dojo/text!./MemberThumb/templates/MemberThumb.html dijit/_TemplatedMixin dijit/_WidgetBase ../utils/formatters ../utils/strings ../utils/icons ../utils/dom ../../tsutils/declareDecorator arcgisonline/esriGeowConfig".split(" "),
function(b,y,r,a,k,e,g,h,m,l,f,c,d){a=r.__importDefault(a);k=r.__importDefault(k);e=r.__importDefault(e);g=r.__importDefault(g);h=r.__importDefault(h);m=r.__importDefault(m);l=r.__importDefault(l);f=r.__importDefault(f);c=r.__importDefault(c);d=r.__importDefault(d);return function(){function u(n,t){this.icons=l.default;this.templateString=k.default;this.hide=h.default.hide;this.show=h.default.show;this.cssClasses="";this.showTooltip=!1}u.prototype.postMixInProperties=function(){var n,t;this.inherited(arguments);
this.member.thumbnailUrl&&this.member.thumbnailUrl!==this.member.defaultThumbnailUrl?((null===(n=d.default.userInfo)||void 0===n?0:n.token)&&-1===this.member.thumbnailUrl.indexOf("token")&&(this.member.thumbnailUrl+=(-1<this.member.thumbnailUrl.indexOf("?")?"\x26":"?")+"token\x3d"+(null===(t=d.default.userInfo)||void 0===t?void 0:t.token)),this.member.initials="",this.member.backgroundColor="#FFFFFF"):this.showInitials()};u.prototype.postCreate=function(){var n=this;this.inherited(arguments);this.showTooltip&&
(this.domNode.setAttribute("aria-label",this.member.fullName),this.domNode.classList.add("tooltip"));this.own(a.default(this.img,"error",function(){return n.showInitials()}))};u.prototype.showInitials=function(){if(this.member.fullName.trim()){var n=this.member.fullName.split(" ");this.member.initials=n[0].substring(0,1)+(n[1]?n[1].substring(0,1):"")}else this.member.username&&(this.member.initials=this.member.username.substring(0,2));this.initials&&(this.initials.textContent=this.member.initials);
this.member.backgroundColor=this._getMemberFillColor(this.member);this.content&&(this.content.style.backgroundColor=this.member.backgroundColor);f.default.hideNode(this.img);f.default.showNode(this.initials)};u.prototype._getMemberFillColor=function(n){var t=n.id?n.id.substr(n.id.length-6):"";m.default.isValidHex(t)||(t=m.default.stringToHex(n.username));n=m.default.hexToRgb(t);return"rgba("+n.r+","+n.g+","+n.b+", 0.2)"};return u=r.__decorate([c.default(g.default,e.default)],u)}()})},"dojo/NodeList-fx":function(){define(["./query",
"./_base/lang","./aspect","./_base/fx","./fx"],function(b,y,r,a,k){b=b.NodeList;y.extend(b,{_anim:function(e,g,h){h=h||{};var m=k.combine(this.map(function(l){l={node:l};y.mixin(l,h);return e[g](l)}));return h.auto?m.play()&&this:m},wipeIn:function(e){return this._anim(k,"wipeIn",e)},wipeOut:function(e){return this._anim(k,"wipeOut",e)},slideTo:function(e){return this._anim(k,"slideTo",e)},fadeIn:function(e){return this._anim(a,"fadeIn",e)},fadeOut:function(e){return this._anim(a,"fadeOut",e)},animateProperty:function(e){return this._anim(a,
"animateProperty",e)},anim:function(e,g,h,m,l){var f=k.combine(this.map(function(c){return a.animateProperty({node:c,properties:e,duration:g||350,easing:h})}));m&&r.after(f,"onEnd",m,!0);return f.play(l||0)}});return b})},"arcgisonline/sharing/geow/QueryReadStore":function(){define(["dojo","dijit","dojox","dojo/require!dojox/data/QueryReadStore,arcgisonline/sharing/geow/Content"],function(b,y,r){b.provide("arcgisonline.sharing.geow.QueryReadStore");b.require("dojox.data.QueryReadStore");b.require("arcgisonline.sharing.geow.Content");
b.declare("arcgisonline.sharing.geow.QueryReadStore",r.data.QueryReadStore,{_fetchItems:function(a,k,e){var g=a.serverQuery||a.query||{};g.start=a.start||0;g.start++;a.count&&(g.num=a.count);arcgisonline.sharing.geow.Content.search(this.url,g,b.hitch(this,function(h){var m=h.total||-1;b.publish("gridCount",[h.total]);this.onResultCount(h.total);this._total=h.total;this._items=[];b.forEach(h.results,function(f,c){c=f.tags||f.keywords||[];var d=void 0==f.imageUrl?arcgisonline.sharing.geow.Content._getItemImageUrl(f):
f.imageUrl,u=f.uploaded||f.created,n=void 0==f.extent?arcgisonline.sharing.geow.Community._getGroupTitleLink(f):f.title,t=f.item||"",x="";f.snippet&&0<f.snippet.length&&"null"!=f.snippet?x=150<f.snippet.length?f.snippet.substring(0,150)+"...":f.snippet:f.description&&0<f.description.length&&"null"!=f.description&&(x=150<f.description.length?f.description.substring(0,150)+"...":f.description);f={id:f.id||"",owner:f.owner,title:n,description:f.description,snippet:x,snippetFull:f.snippet,tags:c.join?
c.join(","):c,imageUrl:d,thumbnail:f.thumbnail,isInvitationOnly:f.isInvitationOnly,created:u,modified:f.modified,itemType:f.itemType||"",typeKeywords:f.typeKeywords||"",type:f.type||"",extent:f.extent||"",item:t,numComments:f.numComments,numRatings:f.numRatings,avgRating:f.avgRating,numViews:f.numViews};this._items.push({i:f,r:this})},this);this._itemsByIdentity={};this._identifier="id";for(i=0;i<this._items.length;++i){h=this._items[i].i;var l=h.id;this._itemsByIdentity[l]||(this._itemsByIdentity[l]=
h)}m=-1===m?this._items.length:m;k(this._items,a,m);this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=b.mixin({},g)}))},onResultCount:function(a){}})})},"dojox/data/QueryReadStore":function(){define(["dojo","dojox","dojo/data/util/sorter","dojo/string"],function(b,y){return b.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,
doClientPaging:!1,doClientSorting:!1,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0},_labelAttr:"label",constructor:function(r){b.mixin(this,r)},getValue:function(r,a,k){this._assertIsItem(r);if(!b.isString(a))throw Error(this._className+".getValue(): Invalid attribute, string expected!");return!this.hasAttribute(r,a)&&k?k:r.i[a]},getValues:function(r,a){this._assertIsItem(r);var k=[];this.hasAttribute(r,a)&&k.push(r.i[a]);return k},getAttributes:function(r){this._assertIsItem(r);
var a=[],k;for(k in r.i)a.push(k);return a},hasAttribute:function(r,a){return this.isItem(r)&&"undefined"!=typeof r.i[a]},containsValue:function(r,a,k){r=this.getValues(r,a);a=r.length;for(var e=0;e<a;e++)if(r[e]==k)return!0;return!1},isItem:function(r){return r?"undefined"!=typeof r.r&&r.r==this:!1},isItemLoaded:function(r){return this.isItem(r)},loadItem:function(r){this.isItemLoaded(r.item)},fetch:function(r){r=r||{};r.store||(r.store=this);var a=this;this._fetchItems(r,function(k,e,g){var h=e.abort||
null,m=!1,l=e.start?e.start:0;0==a.doClientPaging&&(l=0);var f=e.count?l+e.count:k.length;e.abort=function(){m=!0;h&&h.call(e)};var c=e.scope||b.global;e.store||(e.store=a);e.onBegin&&e.onBegin.call(c,g,e);e.sort&&a.doClientSorting&&k.sort(b.data.util.sorter.createSortFunction(e.sort,a));if(e.onItem)for(g=l;g<k.length&&g<f;++g){var d=k[g];m||e.onItem.call(c,d,e)}e.onComplete&&!m&&(g=null,e.onItem||(g=k.slice(l,f)),e.onComplete.call(c,g,e))},function(k,e){e.onError&&e.onError.call(e.scope||b.global,
k,e)});return r},getFeatures:function(){return this._features},close:function(r){},getLabel:function(r){if(this._labelAttr&&this.isItem(r))return this.getValue(r,this._labelAttr)},getLabelAttributes:function(r){return this._labelAttr?[this._labelAttr]:null},_xhrFetchHandler:function(r,a,k,e){r=this._filterResponse(r);r.label&&(this._labelAttr=r.label);e=r.numRows||-1;this._items=[];b.forEach(r.items,function(l){this._items.push({i:l,r:this})},this);r=r.identifier;this._itemsByIdentity={};if(r){this._identifier=
r;var g;for(g=0;g<this._items.length;++g){var h=this._items[g].i,m=h[r];if(this._itemsByIdentity[m])throw Error(this._className+":  The json data as specified by: ["+this.url+"] is malformed.  Items within the list have identifier: ["+r+"].  Value collided: ["+m+"]");this._itemsByIdentity[m]=h}}else for(this._identifier=Number,g=0;g<this._items.length;++g)this._items[g].n=g;e=this._numRows=-1===e?this._items.length:e;k(this._items,a,e);this._numRows=e},_fetchItems:function(r,a,k){var e=r.serverQuery||
r.query||{};this.doClientPaging||(e.start=r.start||0,r.count&&(e.count=r.count));if(!this.doClientSorting&&r.sort){var g=[];b.forEach(r.sort,function(m){m&&m.attribute&&g.push((m.descending?"-":"")+m.attribute)});e.sort=g.join(",")}if(this.doClientPaging&&null!==this._lastServerQuery&&b.toJson(e)==b.toJson(this._lastServerQuery))this._numRows=-1===this._numRows?this._items.length:this._numRows,a(this._items,r,this._numRows);else{var h=("post"==this.requestMethod.toLowerCase()?b.xhrPost:b.xhrGet)({url:this.url,
handleAs:"json-comment-optional",content:e,failOk:!0});r.abort=function(){h.cancel()};h.addCallback(b.hitch(this,function(m){this._xhrFetchHandler(m,r,a,k)}));h.addErrback(function(m){k(m,r)});this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=b.mixin({},e)}},_filterResponse:function(r){return r},_assertIsItem:function(r){if(!this.isItem(r))throw Error(this._className+": Invalid item argument.");},_assertIsAttribute:function(r){if("string"!==typeof r)throw Error(this._className+
": Invalid attribute argument ('"+r+"').");},fetchItemByIdentity:function(r){if(this._itemsByIdentity){var a=this._itemsByIdentity[r.identity];if(void 0!==a){r.onItem&&r.onItem.call(r.scope?r.scope:b.global,{i:a,r:this});return}}this._fetchItems({serverQuery:{id:r.identity}},function(k,e){e=r.scope?r.scope:b.global;try{var g=null;k&&1==k.length&&(g=k[0]);r.onItem&&r.onItem.call(e,g)}catch(h){r.onError&&r.onError.call(e,h)}},function(k,e){e=r.scope?r.scope:b.global;r.onError&&r.onError.call(e,k)})},
getIdentity:function(r){var a=null;return a=this._identifier===Number?r.n:r.i[this._identifier]},getIdentityAttributes:function(r){return[this._identifier]}})})},"arcgisonline/sharing/geow/Content":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util,esri/arcgis/Portal"],function(b,y,r){b.provide("arcgisonline.sharing.geow.Content");b.require("arcgisonline.sharing.util");b.require("esri.arcgis.Portal");arcgisonline.sharing.geow.Content={util:arcgisonline.sharing.util,
i18n:function(){if(this._i18n)return this._i18n;this._i18n=b.i18n.getLocalization("arcgisonline","arcgisonline").common;b.mixin(this._i18n,{source:b.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.source});b.mixin(this._i18n,{viewsWidget:b.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget});return this._i18n},getUserInfo:function(a,k){var e=this.util.getUser();null!=e&&this.util.getJson(esriGeowConfig.restBaseUrl+"content/users/"+(e.username||e.email),a,k)},getUserItems:function(a,
k,e){var g=this.util.getUser();null!=g&&(g=esriGeowConfig.restBaseUrl+"content/users/"+(g.username||g.email),null!=a&&""!==a&&(g=g+"/"+a),this.util.getJson(g,k,e))},getUserItemsByUser:function(a,k,e,g){null!=this.util.getUser()&&(a=esriGeowConfig.restBaseUrl+"content/users/"+a,null!=k&&""!==k&&(a=a+"/"+k),this.util.getJson(a,e,g))},getUserServers:function(a){void 0!==this._userServers&&a(this._userServers);this.util.getJson(esriGeowConfig.serversRestBaseUrl,function(k){a(this._userServers=k.servers)},
function(k){a(null)})},addItem:function(a,k,e,g){var h=this.util.getUser();if(null!=h){h=esriGeowConfig.restBaseUrl+"content/users/"+(h.username||h.email);null!=a&&(h=h+"/"+a);h+="/addItem";a=!1;for(var m=0;m<k.childNodes.length;m++){var l=k.childNodes[m];if("async"===l.name&&"true"===l.value){a=!0;break}}a?this.util.postForm(k,h,b.hitch(arcgisonline.sharing.geow.Content,"addItemAsyncHandler",e,g),g):this.util.postForm(k,h,e,g)}},addItemByUser:function(a,k,e,g,h){if(null!=this.util.getUser()){a=esriGeowConfig.restBaseUrl+
"content/users/"+a;null!=k&&(a=a+"/"+k);a+="/addItem";k=!1;for(var m=0;m<e.childNodes.length;m++){var l=e.childNodes[m];if("async"===l.name&&"true"===l.value){k=!0;break}}k?this.util.postForm(e,a,b.hitch(arcgisonline.sharing.geow.Content,"addItemByUserAsyncHandler",g,h),h):this.util.postForm(e,a,g,h)}},addItemAsyncHandler:function(a,k,e,g){e&&e.success&&!0===e.success?arcgisonline.sharing.geow.Content.itemStatus(e,b.hitch(arcgisonline.sharing.geow.Content,"itemStatusHandler",0,e,a,k),k):k(e,g)},addItemByUserAsyncHandler:function(a,
k,e,g){e&&e.success&&!0===e.success?arcgisonline.sharing.geow.Content.itemStatus(e,b.hitch(arcgisonline.sharing.geow.Content,"itemStatusByUserHandler",0,e,a,k),k):k(e,g)},deleteService:function(a,k){this.getUserServers(b.hitch(this,function(e){if(e&&e.length&&-1<a.indexOf(esriGeowConfig.featuresRestBaseUrl+e[0].id+"/")){e=esriGeowConfig.serversRestBaseUrl+e[0].id+"/arcgis/admin/services/";e+=a.substr(a.indexOf(k)).replace("/",".")+"/delete";esri.config.defaults.io.proxyUrl=esriGeowConfig.proxyServer;
var g=b.hitch(this,function(h){esri.config.defaults.io.proxyUrl=null});this.util.postJson("",e,g,g)}}))},publishService:function(a,k,e,g){a=this.util.getUser();if(null!=a){a=esriGeowConfig.restBaseUrl+"content/users/"+(a.username||a.email)+"/publish";k=k.params;var h=b.hitch(this,function(m){e(m)});this.util.postJson(k,a,b.hitch(this,function(m){m=m.services[0];m.success=m.success||m.serviceurl&&0<m.serviceurl.length;m.success?(m.id=m.serviceItemId,e(m)):h(m)}),b.hitch(this,function(m){h({success:!1})}))}},
itemStatus:function(a,k,e){var g=this.util.getUser();if(null!=g){var h=g.username||g.email;g=a.folder;h=esriGeowConfig.restBaseUrl+"content/users/"+(a.overrideUser||h);g&&0<g.length&&"/"!=g&&(h+="/"+g);h=h+"/items/"+a.id+"/status";a.jobid&&(h+="?jobid\x3d"+a.jobid);a.type&&"image service"===a.type.toLowerCase()&&(h+="\x26jobType\x3dPublishImageService");this.util.getJson(h,k,e)}},itemStatusByUser:function(a,k,e){if(null!=this.util.getUser()){var g=a.folder,h=esriGeowConfig.restBaseUrl+"content/users/"+
a.owner;g&&0<g.length&&"/"!=g&&(h+="/"+g);h=h+"/items/"+a.id+"/status";this.util.getJson(h,k,e)}},itemStatusHandler:function(a,k,e,g,h,m){h&&h.status&&"processing"===h.status?(a++,setTimeout(b.hitch(this,function(){arcgisonline.sharing.geow.Content.itemStatus(k,b.hitch(arcgisonline.sharing.geow.Content,"itemStatusHandler",a,k,e,g),g)}),Math.min(1E3*Math.pow(2,a),6E4))):(b.mixin(h,k),e(h,m))},itemStatusByUserHandler:function(a,k,e,g,h,m){h&&h.status&&"processing"===h.status?(a++,setTimeout(b.hitch(this,
function(){arcgisonline.sharing.geow.Content.itemStatusByUser(k,b.hitch(arcgisonline.sharing.geow.Content,"itemStatusByUserHandler",a,k,e,g),g)}),Math.min(1E3*Math.pow(2,a),6E4))):(b.mixin(h,k),e(h,m))},deleteItems:function(a,k,e){var g=this.util.getUser();if(null!=g){g=g.username||g.email;if(1==a.length)return a=a[0],g=esriGeowConfig.restBaseUrl+"content/users/"+g,null!=a.folderId&&""!==a.folderId&&"/"!=a.folderId&&(g+="/"+a.folderId),g=g+"/items/"+a.id+"/delete",this.util.postJson("",g,k,e);if(1<
a.length){var h="",m="";b.forEach(a,function(l){h+=m+l.id;m=","},this);a={items:h};g=esriGeowConfig.restBaseUrl+"content/users/"+g+"/deleteItems";return this.util.postJson(a,g,k,e)}}},deleteItemsByUser:function(a,k,e,g){if(null!=this.util.getUser()){if(1==k.length)return k=k[0],a=esriGeowConfig.restBaseUrl+"content/users/"+a,null!=k.folderId&&""!==k.folderId&&"/"!=k.folderId&&(a+="/"+k.folderId),a=a+"/items/"+k.id+"/delete",this.util.postJson("",a,e,g);if(1<k.length){var h="",m="";b.forEach(k,function(l){h+=
m+l.id;m=","},this);k={items:h};a=esriGeowConfig.restBaseUrl+"content/users/"+a+"/deleteItems";return this.util.postJson(k,a,e,g)}}},getApplicationCode:function(a,k,e){var g=null,h="WMA2Code";b.isObject(a)?(g=a.id,"Mobile Application"===a.type&&(h="MobileApp2Code")):g=a;this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+g+"/relatedItems?relationshipType\x3d"+h,k,e)},addApplicationCodeRelate:function(a,k,e,g){var h=this.util.getUser();if(null==h)b.publish("globalMessage",[{message:this.i18n().mustLogIn,
type:"error",duration:0}]);else{var m=null,l="WMA2Code";b.isObject(a)?(m=a.id,"Mobile Application"===a.type&&(l="MobileApp2Code")):m=a;this.util.postJson({relationshipType:l,originItemId:m,desinationItemId:k},esriGeowConfig.restBaseUrl+"content/users/"+(h.username||h.email)+"/addRelationship?relationshipType\x3d"+l+"\x26originItem\x3d"+m+"\x26destinationItemId\x3d"+k,e,g)}},getComments:function(a,k,e,g){this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+a+"/comments",e,g)},addComment:function(a,
k,e,g){null==this.util.getUser()?b.publish("globalMessage",[{message:this.i18n().mustLogIn,type:"error",duration:0}]):this.util.postJson({comment:k},esriGeowConfig.restBaseUrl+"content/items/"+a+"/addComment",e,g)},deleteComment:function(a,k,e,g){null==this.util.getUser()?b.publish("globalMessage",[{message:this.i18n().mustLogIn,type:"error",duration:0}]):this.util.postJson({},esriGeowConfig.restBaseUrl+"content/items/"+a+"/comments/"+k+"/delete",e,g)},addRating:function(a,k,e,g){null==this.util.getUser()?
b.publish("globalMessage",[{message:this.i18n().mustLogIn,type:"error",duration:0}]):this.util.postJson({rating:k},esriGeowConfig.restBaseUrl+"content/items/"+a+"/addRating",e,g)},getRating:function(a,k,e){null!=this.util.getUser()&&this.util.postJson({},esriGeowConfig.restBaseUrl+"content/items/"+a+"/rating",k,e)},deleteItem:function(a,k,e){var g=this.util.getUser();if(null!=g){g=g.username||g.email;g=esriGeowConfig.restBaseUrl+"content/users/"+(a.owner||g);var h=a.ownerFolder||a.folderId;h&&"/"!==
h&&(g=g+"/"+h);g=g+"/items/"+a.id+"/delete";this.util.postJson("",g,k,e)}},deleteItemByUser:function(a,k,e){if(null!=this.util.getUser()){var g=esriGeowConfig.restBaseUrl+"content/users/"+a.owner;null!=a.folderId&&(g=g+"/"+a.folderId);g=g+"/items/"+a.id+"/delete";this.util.postJson("",g,k,e)}},updateItem:function(a,k,e,g){var h=this.util.getUser();null!=h&&(h=h.username||h.email,h=esriGeowConfig.restBaseUrl+"content/users/"+(a.owner||h),null!=a.folderId&&(h=h+"/"+a.folderId),h=h+"/items/"+a.id+"/update",
this.util.postForm(k,h,e,g))},updateItemByUser:function(a,k,e,g){if(null!=this.util.getUser()){var h=esriGeowConfig.restBaseUrl+"content/users/"+a.owner;null!=a.folderId&&(h=h+"/"+a.folderId);h=h+"/items/"+a.id+"/update";this.util.postForm(k,h,e,g)}},updateItemJson:function(a,k,e,g){var h=this.util.getUser();null!=h&&(h=h.username||h.email,h=esriGeowConfig.restBaseUrl+"content/users/"+(a.overrideUser||h),null!=a.folderId&&(h=h+"/"+a.folderId),h=h+"/items/"+a.id+"/update",this.util.postJson(k,h,e,
g))},updateItemJsonByUser:function(a,k,e,g){null!=this.util.getUser()&&(a=esriGeowConfig.restBaseUrl+"content/users/"+a,null!=k.folderId&&(a=a+"/"+k.folderId),a=a+"/items/"+k.id+"/update",this.util.postJson(e,a,g))},filterErrors:function(a){return(a=a&&a.results)&&a.length&&(a=b.filter(a,"return item.error"))&&a.length?(this.util.checkError(a[0].error),a):!1},shareItems:function(a,k,e){var g=this.util.getUser();g&&(g=g.username||g.email,this.util.postJson(a,esriGeowConfig.restBaseUrl+"content/users/"+
(a.owner||g)+"/shareItems",b.hitch(this,function(h){var m=this.filterErrors(h);m?e(m):k(h)}),e))},shareItemsByUser:function(a,k,e,g){null!=this.util.getUser()&&this.util.postJson(k,esriGeowConfig.restBaseUrl+"content/users/"+a+"/shareItems",e,g)},shareItem:function(a,k,e,g){var h=this.util.getUser();null!=h&&(h=esriGeowConfig.restBaseUrl+"content/users/"+(h.username||h.email),null!=a.folderId&&(h=h+"/"+a.folderId),h=h+"/items/"+a.id+"/share",this.util.postJson(k,h,e,g))},shareItemByID:function(a,
k,e,g){null!=this.util.getUser()&&this.util.postJson(k,esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/share",e,g)},unshareItems:function(a,k,e){var g=this.util.getUser();null!=g&&(g=g.username||g.email,this.util.postJson(a,esriGeowConfig.restBaseUrl+"content/users/"+(a.owner||g)+"/unshareItems",b.hitch(this,function(h){var m=this.filterErrors(h);m?e(m):k(h)}),e))},unshareItemsByUser:function(a,k,e,g){null!=this.util.getUser()&&this.util.postJson(k,esriGeowConfig.restBaseUrl+"content/users/"+a+
"/unshareItems",e,g)},unshareItem:function(a,k,e,g){var h=this.util.getUser();null!=h&&(h=esriGeowConfig.restBaseUrl+"content/users/"+(h.username||h.email),null!=a.folderId&&(h=h+"/"+a.folderId),h=h+"/items/"+a.id+"/unshare",this.util.postJson(k,h,e,g))},unshareItemByID:function(a,k,e,g){null!=this.util.getUser()&&this.util.postJson(k,esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/unshare",e,g)},moveItems:function(a,k,e,g){var h=this.util.getUser();if(null!=h){var m="",l="";b.forEach(a,function(f){m+=
l+f.id;l=","},this);k.items=m;this.util.postJson(k,esriGeowConfig.restBaseUrl+"content/users/"+(h.username||h.email)+"/moveItems",e,g)}},moveItemsByUser:function(a,k,e,g,h){if(null!=this.util.getUser()){var m="",l="";b.forEach(k,function(f){m+=l+f.id;l=","},this);e.items=m;this.util.postJson(e,esriGeowConfig.restBaseUrl+"content/users/"+a+"/moveItems",g,h)}},reassignItem:function(a,k,e,g,h){if(null!=this.util.getUser()){var m=esriGeowConfig.restBaseUrl+"content/users/"+a.owner;null!==a.folderId&&
(m=m+"/"+a.folderId);m=m+"/items/"+a.id+"/reassign";this.util.postJson({targetUsername:k,targetFolderName:e},m,g,h)}},moveItem:function(a,k,e,g){var h=this.util.getUser();null!=h&&(h=esriGeowConfig.restBaseUrl+"content/users/"+(h.username||h.email),null!=a.folderId&&(h=h+"/"+a.folderId),h=h+"/items/"+a.id+"/move",this.util.postJson(k,h,e,g))},moveItemByUser:function(a,k,e,g){if(null!=this.util.getUser()){var h=esriGeowConfig.restBaseUrl+"content/users/"+a.owner;null!=a.folderId&&(h=h+"/"+a.folderId);
h=h+"/items/"+a.id+"/move";this.util.postJson(k,h,e,g)}},search:function(a,k,e,g){if(a){g="";if(0>a.indexOf("community/groups")){var h=this.util.userPreferences(null,"contentModePrefs"),m=b.queryToObject(window.location.search.slice(1));m.content&&"all"===m.content.toLowerCase()?h.contentMode="GIS":m.content&&"web"===m.content.toLowerCase()&&(h.contentMode="Web");g=h&&h.contentMode&&"GIS"===h.contentMode?esriGeowConfig.viewQueries.gis:g+esriGeowConfig.viewQueries.web;g+=esriGeowConfig.viewQueries.none}k.q+=
g;this.util.getJsonWithContent(a,k,e)}},getFeaturedItems:function(a,k,e){this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+a+"/relatedItems?relationshipType\x3dFeaturedItems2Item\x26direction\x3dforward",k)},getUserItem:function(a,k,e){e=this.util.getUser();null!=e&&(e=esriGeowConfig.restBaseUrl+"content/users/"+(e.username||e.email),null!=a.folderId&&(e=e+"/"+a.folderId),e=e+"/items/"+a.id,this.util.getJson(e,k))},getItem:function(a,k,e){this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+
a,k,e)},getItemData:function(a,k,e){this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+a+"/data",k,e)},getItemFolder:function(a,k){var e=this.util.getUser();if(null!=e){var g=e.username||e.email;this.util.getJson(esriGeowConfig.restBaseUrl+"content/users/"+g,b.hitch(this,function(h,m){var l=null;for(m=0;m<h.items.length;m++)if(h.items[m].id==a){l="";break}if(null!=l)k(l);else{var f=function(c,d){d=c.currentFolder.id;for(var u=0;u<c.items.length;u++)if(c.items[u].id==a){l=d;k(l);break}};
b.forEach(h.folders,function(c,d){this.util.getJson(esriGeowConfig.restBaseUrl+"content/users/"+g+"/"+c.folderName,b.hitch(this,f))},this)}}))}},itemsToStore:function(a){var k=a.currentFolder?a.currentFolder.id:"",e=[];b.forEach(a.items,function(g,h){g.folderId=k;g.imageUrl=this._getItemIconUrl(g);g.selected=!1;g.item=g.name||g.url||g.title;if(g.snippet&&0<g.snippet.length&&"null"!=g.snippet)g.snippet=g.snippet;else if(g.description&&0<g.description.length&&"null"!=g.description){var m=arcgisonline.sharing.util.removeHTMLTags(g.description);
g.snippet=150<m.length?m.substring(0,150)+"...":m}else g.snippet="";delete g.listingProperties;delete g.properties;e[h]=g},this);return new b.data.ItemFileWriteStore({data:{identifier:"id",label:"item",items:e}})},searchToStore:function(a){var k=[];b.forEach(a.items?a.items:a.results,function(e,g){e={id:e.id,owner:e.owner,title:e.title,description:e.description,tags:e.tags?e.tags.join(","):[],imageUrl:this._getItemImageUrl(e),created:e.created,modified:e.modified};k[g]=e},this);return new b.data.ItemFileReadStore({data:{identifier:"id",
label:"item",items:k}})},_getPremiumItemNode:function(a){var k=(new esri.arcgis.PortalItem(b.mixin(a,{portal:{isPortal:esriGeowConfig.self&&esriGeowConfig.self.isPortal}}))).getTypeInfo(),e=esriGeowConfig.self&&esriGeowConfig.self.isPortal?"portal":"";a=-1<b.indexOf(a.typeKeywords,"Requires Credits");return k.isPremiumContent?(e=b.create("div",{className:"esri-premium-content",title:a?this.i18n()["premiumcontentcreditstitle"+e]:this.i18n()["premiumcontenttitle"+e],innerHTML:a?this.i18n().premiumcontent:
this.i18n().subscriptioncontent}),b.create("img",{className:"esri-premium-icon",src:k.premiumIconUrl},e,"first"),e):!1},_getItemIconUrl:function(a){return(new esri.arcgis.PortalItem(b.mixin(a,{portal:{isPortal:esriGeowConfig.self&&esriGeowConfig.self.isPortal}}))).iconUrl},_getItemImageUrl:function(a,k){a=a.type?a.type.toLowerCase():"";return this.util.relativeToExplicitUrl("geocoding service"==a||"network analysis service"==a||"geoprocessing service"==a||"geodata service"==a||"geometry service"==
a||"workflow manager service"==a?k?"images/tool_16x16.png":"images/tool_32x32.png":"wms"==a||"kml"==a||"globe service"==a||"map service"==a||"image service"==a||"feature service"==a||"scene service"===a||"stream service"===a?k?"images/layer_16x16.png":"images/layer_32x32.png":"web mapping application"==a||"mobile application"==a||"web map"==a?k?"images/map_16x16.png":"images/map_32x32.png":"layer"==a||"layer package"==a||"tile package"===a||"vector tile package"===a||"scene package"===a||"image collection"===
a||"explorer layer"==a||"cad drawing"===a?k?"images/layer-download_16x16.png":"images/layer-download_32x32.png":"explorer add in"==a||"desktop add in"==a||"geoprocessing package"==a||"locator package"==a?k?"images/tool-download_16x16.png":"images/tool-download_32x32.png":k?"images/map-download_16x16.png":"images/map-download_32x32.png")},changeTypename:function(a,k,e){var g=new esri.arcgis.PortalItem(b.mixin(a,{portal:{isPortal:esriGeowConfig.self&&esriGeowConfig.self.isPortal}})),h=g.getTypeInfo();
g=a.type&&-1<a.type.toLowerCase().indexOf("add in")?g.displayName:g.type;var m=-1<b.indexOf(a.typeKeywords,"Hosted Service"),l=-1<b.indexOf(a.typeKeywords,"View Service"),f="Feature Service"===a.type;h=h.displayName;e&&(h=m?h+(" ("+(l?this.i18n().viewsWidget.hostedView:f?this.i18n().viewsWidget.hostedData:this.i18n().viewsWidget.hostedService)+")"):h+(" ("+this.i18n().viewsWidget.locatorView+")"));a=-1<b.indexOf(a.typeKeywords,"ArcGIS Server")||"Feature Collection"==a.type?this.i18n().source+" ":
"";return k?"\x3cspan title\x3d'"+a+g+"'\x3e"+h+"\x3c/span\x3e":h},getFavorites:function(){var a,k={};return this.util.request({url:esriGeowConfig.restBaseUrl+"content/groups/"+esriGeowConfig.self.user.favGroupId}).then(b.hitch(this,function(e){a=e.items||[];b.forEach(a,b.hitch(this,function(g){k[g.id]=!0}));return k}))},addToFavorites:function(a){var k=this.util.getUser().favGroupId;return this.util.request({url:esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/share",content:{f:"json",everyone:a.access&&
"public"===a.access||a.sharing&&a.sharing.access&&"public"===a.sharing.access||!1,org:a.access&&"org"===a.access||a.sharing&&a.sharing.access&&"org"===a.sharing.access||!1,groups:[k],items:[a.id]}},{usePost:!0})},removeFromFavorites:function(a){var k=this.util.getUser().favGroupId;return this.util.request({url:esriGeowConfig.restBaseUrl+"content/items/"+a.id+"/unshare",content:{f:"json",everyone:!1,org:!1,groups:[k],items:[a.id]}},{usePost:!0})}}})},"dojo/dnd/AutoSource":function(){define(["../_base/declare",
"./Source"],function(b,y){return b("dojo.dnd.AutoSource",y,{constructor:function(){this.autoSync=!0}})})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(b,y,r){return b("dojo.dnd.Target",r,{constructor:function(){this.isSource=!1;y.remove(this.node,"dojoDndSource")}})})},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(b,y,r,a){return y("dojo.fx.Toggler",null,{node:null,showFunc:r.fadeIn,hideFunc:r.fadeOut,
showDuration:200,hideDuration:200,constructor:function(k){b.mixin(this,k);this.node=k.node;this._showArgs=b.mixin({},k);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=b.mixin({},k);this._hideArgs.node=this.node;this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);a.after(this.showAnim,"beforeBegin",b.hitch(this.hideAnim,"stop",!0),!0);a.after(this.hideAnim,"beforeBegin",b.hitch(this.showAnim,
"stop",!0),!0)},show:function(k){return this.showAnim.play(k||0)},hide:function(k){return this.hideAnim.play(k||0)}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(b,y,r,a,k,e){return b("dijit.MenuSeparator",[r,a,k],{templateString:e,buildRendering:function(){this.inherited(arguments);y.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"xstyle/core/load-css":function(){define([],
function(){function b(e){if(a.createStyleSheet){var g=a.createStyleSheet();g.cssText=e;return g.owningElement}g=a.createElement("style");g.setAttribute("type","text/css");g.appendChild(a.createTextNode(e));k.appendChild(g);return g}function y(e,g,h){var m=r[e];if(m)return l=b(m),g(l);var l=a.createElement("link");l.type="text/css";l.rel="stylesheet";l.href=e;var f=!h||!1!==h.wait;e=(e=navigator.userAgent.match(/AppleWebKit\/(\d+\.?\d*)/))&&+e[1];if(null===l.onload&&!(536>e))l.onload=function(){l.onload=
null;l.onerror=null;f&&g(l)},l.onerror=function(){f&&g(l)};else if(f)var c=setInterval(function(){l.style&&(clearInterval(c),g(l))},15);(k||a.getElementsByTagName("head")[0]).appendChild(l);f||g(l)}var r="undefined"==typeof _css_cache?{}:_css_cache,a=document,k=a.head;y.insertCss=b;return y})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/_Empty.html":'\x3cdiv class\x3d"text-center trailer-half"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 256 256" width\x3d"${width}"\x3e\x3cpath fill\x3d"#ccc" d\x3d"M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"/\x3e\x3c/svg\x3e\r\n  \x3cp class\x3d"leader-0 font-size-1 avenir-regular"\x3e\r\n    \x3cspan\x3e${message}\x3c/span\x3e\r\n  \x3c/p\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/dijit/Alert/Alert.html":'\x3cdiv class\x3d"alert alert-${modifier} alert-fixed alert-fade-in-down leader-1 trailer-1 ${cssClasses}"\x3e\r\n  \x3cdiv class\x3d"flex"\x3e\r\n    \x3cdiv class\x3d"flex-0 margin-right-half margin-left-0 text-${modifier}" aria-label\x3d"${iconAltText}"\x3e\r\n      ${!icon}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex-1 flex-center-self margin-right-half margin-left-0 alert__text-container"\x3e\r\n      ${!text}\r\n      \x3cdiv data-dojo-attach-point\x3d"_listContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton class\x3d"alert-close btn-link btn-link-black js-alert-close" aria-label\x3d"${i18n.common.close}"\x3e\r\n      ${!icons.x.32}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" id\x3d"general-dialog-${id}" class\x3d"general-dialog" title\x3d"${i18n.notificationDlgTitle}" role\x3d"alertdialog"\x3e\r\n    \x3cdiv id\x3d"general-dialog-content" class\x3d"general-dialog-content"\x3e\x3c/div\x3e\r\n    \x3cbr\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing clearfix right"\x3e\r\n      \x3cbutton id\x3d"button_general-close" data-dojo-attach-point\x3d"_okBtn" data-dojo-attach-event\x3d"onClick:onOkClick" class\x3d"jevent primary right" data-dojo-type\x3d"dijit/form/Button"\x3e${i18n.ok}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n      \x3cbr style\x3d"clear:both;"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/actionBar.html":'\x3cdiv class\x3d"dijitDialogPaneActionBar esriAlignTrailing right clearfix" data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n  \x3cspan class\x3d"busyMessage hide inline-block padding-leader-quarter padding-right-1 left" data-dojo-attach-point\x3d"busyMessageSpan"\x3e\x3c/span\x3e\r\n  \x3cbutton class\x3d"calcite cancel right" data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"click:onCancel"\x3e\x3c/button\x3e\r\n  \x3cbutton class\x3d"calcite primary right js-submit-button" data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"okButton"\x3e\x3c/button\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/DownloadImageDlg.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"dialog" title\x3d"${_i18nStrings.downloadImageDlg.title}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"message"\x3e\x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing" style\x3d"margin-top: 1em;"\x3e\r\n        \x3cbutton class\x3d"jevent cancel" data-dojo-attach-point\x3d"_cancelBtn" disabled data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:_handleCancelButtonClick"\x3e${_i18nStrings.common.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/_Owner.html":'\x3cbutton class\x3d"js-card-item-owner btn-link btn-link--inherit text-left text-ellipsis flex-1 js-action-profilePopup js-owner-section" data-action\x3d"profilePopup" data-owner\x3d"${item.owner}" title\x3d"${i18n.itemProperties.viewProfile}"\x3e${item.owner}\x3c/button\x3e\r\n',"url:arcgisonline/pages/dijit/Card/_OwnerVerified.html":'\x3cbutton class\x3d"flex-1 btn-link btn-link--inherit text-left text-ellipsis flex-1 js-owner-section js-verified-owner-link max-full-width" title\x3d"${i18n.itemProperties.viewOrg}"\x3e${item.verified.name}\x3c/button\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/authoritative.html":'\x3cspan class\x3d"badge badge--authoritative ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#2B622B"\x3e\x3cpath d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zm0 15a7 7 0 1 1 7-7 7.008 7.008 0 0 1-7 7z"/\x3e\x3cpath d\x3d"M11.834 5.146l-5.646 5.647-2.334-2.334a.5.5 0 0 0-.708.707l3.042 3.041 6.353-6.353a.5.5 0 1 0-.707-.707z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.authoritative}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/deprecated.html":'\x3cspan class\x3d"badge badge--deprecated ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"#8C2907" d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zM1 8a6.99 6.99 0 0 1 11.577-5.284l-9.861 9.861A6.964 6.964 0 0 1 1 8zm7 7a6.964 6.964 0 0 1-4.577-1.716l9.861-9.861A6.99 6.99 0 0 1 8 15z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.deprecated}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/living-atlas.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M14.753 4.57a.5.5 0 0 0-.842-.539 5.86 5.86 0 0 1-1.046 1.13A27.861 27.861 0 0 1 8.5 8.199a27.487 27.487 0 0 1-4.814 2.262 5.906 5.906 0 0 1-1.5.34.5.5 0 0 0 .021 1h.023a6.513 6.513 0 0 0 1.46-.304 5.98 5.98 0 0 0 3.81 1.81V15H5a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H8.5v-1.699A5.953 5.953 0 0 0 13.753 5.7a6.385 6.385 0 0 0 1-1.13zM10.5 11.664a4.999 4.999 0 0 1-5.742-.535A30.772 30.772 0 0 0 9 9.065a30.801 30.801 0 0 0 3.908-2.642 5 5 0 0 1-2.408 5.24zM7.068 2.42a5.007 5.007 0 0 1 4.71 1.638.5.5 0 1 0 .758-.654 6.01 6.01 0 0 0-5.654-1.967.5.5 0 0 0 .186.982zM2.802 9.633a.5.5 0 0 0 .472-.664 4.99 4.99 0 0 1 1.815-5.677l.228.394a.5.5 0 0 0 .866-.5l-1-1.732a.5.5 0 0 0-.866.5l.272.472a5.988 5.988 0 0 0-2.26 6.87.5.5 0 0 0 .473.337z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.livingAtlas}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/marketplace.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.marketplaceTooltip}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#196FA6" d\x3d"M15.939 13L12.832 3h-3.65L8.033 6.68 6.811 3H3.16L.054 13H4.13l.96-3.21L6.192 13h3.594l1.104-3.17.993 3.17h4.056zM3.386 12H1.41l2.486-8h1.881l-2.391 8zm2.196-3.856l.893-2.983 1.048 3.156-.895 2.871-1.046-3.044zM9.075 12H7.422l2.496-8h1.943l-2.786 8zm3.409-6.749L14.583 12h-1.966l-1.176-3.755 1.043-2.994z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.marketplace}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/open-data.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.openDataTooltip}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M8 1C4.58 1 2 2.29 2 4s2.58 3 6 3a8.628 8.628 0 0 0 5-1.297v5.334a.5.5 0 0 0 1 0V4c0-1.71-2.58-3-6-3zm0 5C5.138 6 3 4.944 3 4s2.138-2 5-2 5 1.056 5 2-2.138 2-5 2zM13.5 12.5a.5.5 0 0 0-.5.5v.064C13 13.96 10.816 15 8 15s-5-1.04-5-1.936V8.85a11.968 11.968 0 0 0 5 .984.5.5 0 0 0 0-1A10.146 10.146 0 0 1 2.815 7.62a.484.484 0 0 0-.799.3c-.002.013-.006.025-.007.037C2.007 7.972 2 7.985 2 8v5.064C2 14.902 5.05 16 8 16s6-1.098 6-2.936V13a.5.5 0 0 0-.5-.5z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.openData}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/premium.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath d\x3d"M8.05 15.5a.497.497 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.5.5 0 0 1 .64.006c1.817 1.54 3.601 1.844 5.457.932a.5.5 0 0 1 .718.394 16.944 16.944 0 0 1-.344 4.965.5.5 0 1 1-.978-.211 16.952 16.952 0 0 0 .367-3.962 5.57 5.57 0 0 1-5.55-1.098A6.178 6.178 0 0 1 2.51 2.706c-.057 2.086.231 8.651 5.79 11.86a.5.5 0 0 1-.25.934z" fill\x3d"#196fa6"/\x3e\x3cpath d\x3d"M12 15.5a4 4 0 1 1 4-4 4.005 4.005 0 0 1-4 4zm0-7a3 3 0 1 0 3 3 3.003 3.003 0 0 0-3-3z" fill\x3d"#196fa6"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.premium}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/retired.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.retired}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/public-data-collection.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M15.721 4.007a.965.965 0 0 0-.03-1.385l-1.413-1.414a.965.965 0 0 0-1.385-.03L2.841 11.23l-1.756 4.097a.371.371 0 0 0 .488.487L5.67 14.06l8.607-8.609zM2.624 14.276l.554-1.294.74.74zm2.338-.924L3.55 11.937l8.007-8.008 1.414 1.415zm8.716-8.716l-1.414-1.414 1.09-1.09a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .434z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.publicDataCollection}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/subscriber.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\r\n    \x3cpath d\x3d"M8.054 15.5H8.05a.5.5 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.518.518 0 0 1 .638 0 5.146 5.146 0 0 0 5.458.94.507.507 0 0 1 .463.009.5.5 0 0 1 .26.382c.01.094.952 9.331-6.248 13.49a.5.5 0 0 1-.25.066zm0-.5zM2.51 2.706c-.056 2.054.222 8.455 5.542 11.713 5.32-3.258 5.598-9.66 5.542-11.713a6.177 6.177 0 0 1-5.542-1.074A6.183 6.183 0 0 1 2.51 2.706z" fill\x3d"#196fa6"/\x3e\r\n  \x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.subscriber}\x3c/span\x3e\r\n\x3c/span\x3e\r\n\r\n',
"url:arcgisonline/pages/dijit/Card/badges/collaboration.html":'\x3cspan class\x3d"badge badge--collaboration ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.collaborationTooltip}"\x3e\r\n    \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cg fill\x3d"#196FA6"\x3e\x3cpath d\x3d"M13.88629,9.14893a5.97307,5.97307,0,0,0-2.90655-6.34937,2.997,2.997,0,0,0-5.98188.01465A5.97011,5.97011,0,0,0,2.11322,9.14905h.00006a2.9911,2.9911,0,1,0,3.475,4.34076,5.95467,5.95467,0,0,0,4.8233-.00006l-.00012-.00025a2.9906,2.9906,0,1,0,3.47479-4.34057ZM8,1A2,2,0,1,1,6,3,2.00217,2.00217,0,0,1,8,1ZM3,14a2,2,0,1,1,2-2A2.00222,2.00222,0,0,1,3,14Zm7-2a2.99442,2.99442,0,0,0,.06683.62256A5.02712,5.02712,0,0,1,8,13.07306a5.08328,5.08328,0,0,1-2.07391-.45422A2.83729,2.83729,0,0,0,6,12,3.00142,3.00142,0,0,0,3.02832,9.00287,5.05156,5.05156,0,0,1,5.12952,3.824a2.98132,2.98132,0,0,0,5.7409.00024,5.05175,5.05175,0,0,1,2.10077,5.17865A3.00139,3.00139,0,0,0,10,12Zm3,2a2,2,0,1,1,2-2A2.00222,2.00222,0,0,1,13,14Z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n    \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.collaboration}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/organization/widgets/templates/_groupIcon.html":'\x3cdiv class\x3d"${cssClasses:empty} ${tooltipClass:empty}" aria-label\x3d"${_group.title}"\x3e\r\n  \x3cimg src\x3d"${_group.thumbnailUrl}" alt\x3d"" class\x3d"${_group.thumbnail:hide}" data-dojo-attach-point\x3d"_img"\x3e\r\n  \x3csvg data-dojo-attach-point\x3d"_svg" xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 ${_viewBoxSize} ${_viewBoxSize}" class\x3d"${_group.thumbnail:show}" \x3e\r\n    \x3cpath fill\x3d"${_group.fillColor}" d\x3d"M0 0h65v65H0z" /\x3e\r\n    \x3cpath fill\x3d"#ccc" d\x3d"M0 0h65v65H0z" fill-opacity\x3d"0.8" /\x3e\r\n    \x3cpath class\x3d"${_group.useLetter:show}" fill\x3d"#FFF" d\x3d"M24.25 15.625a6.875 6.875 0 1 0-.008 13.75 6.875 6.875 0 0 0 .008-13.75zm0 11c-2.272 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125c2.279 0 4.125 1.846 4.125 4.125s-1.846 4.125-4.125 4.125zm3.118 16.5H14.774c.596-4.641 4.647-8.25 9.473-8.25 2.855 0 5.426 1.283 7.188 3.316a15.168 15.168 0 0 1 2.311-1.518 12.22 12.22 0 0 0-9.496-4.549c-6.369 0-11.551 4.82-12.238 11l-.137 2.75h14.424a15.49 15.49 0 0 1 1.066-2.75h.003zm25.62 5.5c-.693-6.18-5.873-11-12.238-11s-11.545 4.82-12.238 11l-.137 2.75h24.75l-.137-2.75zm-21.711 0c.596-4.641 4.647-8.25 9.473-8.25a9.578 9.578 0 0 1 9.464 8.25H31.277zm9.473-27.5a6.875 6.875 0 1 0-.008 13.75c3.797.003 6.877-3.072 6.88-6.87s-3.072-6.877-6.869-6.88h-.003zm0 11c-2.271 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125a4.125 4.125 0 0 1 0 8.25z"\r\n    /\x3e\r\n    \x3ctext class\x3d"${_group.useLetter:hide} font-size-${letterSize}" x\x3d"50%" y\x3d"50%" fill\x3d"white" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e\r\n      \x3ctspan class\x3d"group-thumbnail-default-text" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e${_group.title:firstChar}\x3c/tspan\x3e\r\n      \x3ctspan class\x3d"group-thumbnail-ie-text" y\x3d"70%" x\x3d"55%" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e${_group.title:firstChar}\x3c/tspan\x3e\r\n    \x3c/text\x3e\r\n  \x3c/svg\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SiteFooter.html":'\x3cdiv dojoAttachPoint\x3d"containerNode" class\x3d"padding-leader-2 footer text-center padding-trailer-1 font-size--2 text-light-gray" role\x3d"contentinfo"\x3e\r\n\x3c!-- style\x3d"padding-top: 0.5em; margin-bottom: 1em; white-space: nowrap; text-align: center;"\x3e--\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks"\x3e\x3c/span\x3e\r\n  \x3cdiv class\x3d"esri-footer-barrier"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/templates/SiteFooterMap.html":'\x3cdiv style\x3d"border-top:1px solid #ccc; padding-top: 0.5em; padding-left:2px; margin-bottom: 3em; white-space: nowrap; text-align: center;"\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks esriFloatLeading esriAlignLeading" style\x3d"color:#777; line-height:14px"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/ChoiceDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" id\x3d"choice-dialog" class\x3d"general-dialog" title\x3d"${i18n.notice}"\x3e\r\n    \x3cdiv style\x3d"margin-top:1em;" data-dojo-attach-point\x3d"choiceContent"\x3e\x3c/div\x3e\r\n    \x3cdiv style\x3d"clear: both; margin-top: 2em;" class\x3d"esriAlignTrailing right"\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"choiceOneButton" class\x3d"primary trailer-quarter" type\x3d"button" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n        ${i18n.ok}\r\n      \x3c/button\x3e\r\n      \x3cbutton data-dojo-attach-point\x3d"choiceTwoButton" class\x3d"cancel btn-two trailer-quarter" type\x3d"button" data-dojo-type\x3d"dijit/form/Button"\x3e\r\n        ${i18n.cancel}\r\n      \x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"clear:both; float:none; height: 0;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/PasswordStrength/templates/PasswordStrength.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"password-strength-meter"\x3e\r\n        \x3cdiv class\x3d"password-strength-meter__fill" data-dojo-attach-point\x3d"_strengthMeterFill"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half password-strength-description"\x3e\r\n        ${i18n.passwordStrengthMeter.passwordStrength}: \x3cspan data-dojo-attach-point\x3d"_strengthLabel"\x3e\x3c/span\x3e \x3ca class\x3d"tooltip" target\x3d"_blank" data-dojo-attach-point\x3d"_moreInfo" aria-label\x3d"${i18n.passwordStrengthMeter.learnMore}"\x3e${!icons.inline-end.question.16}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SignUpInternal.html":'\x3cdiv class\x3d"widgetContent grid-container"\x3e\r\n  \x3cdiv id\x3d"sign-up-form" class\x3d"leader-1 column-12 tablet-column-12 phone-column-6"\x3e\r\n    \x3cform data-dojo-type\x3d"dijit/form/Form" id\x3d"signup-form" data-dojo-attach-point\x3d"_form" method\x3d"POST" action\x3d""\x3e\r\n      \x3cp\x3e${i18n.enterAccountInfo}\x3c/p\x3e\r\n      \x3cdiv class\x3d"formBlock" id\x3d"first-name-block"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_firstname"\x3e\r\n          ${i18n.firstNameLabel}\r\n          \x3cinput id\x3d"register_firstname" name\x3d"register_firstname" data-dojo-attach-point\x3d"_firstname"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_firstnameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock" id\x3d"last-name-block"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_lastname"\x3e\r\n          ${i18n.lastNameLabel}\r\n          \x3cinput id\x3d"register_lastname" name\x3d"register_lastname" data-dojo-attach-point\x3d"_lastname"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_lastnameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_email"\x3e\r\n          ${i18n.currentEmailAdr}\r\n          \x3cinput id\x3d"register_email" name\x3d"register_email" data-dojo-attach-point\x3d"_email"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_emailError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"confirm_register_email"\x3e\r\n          ${i18n.confirmEmailAdr}\r\n          \x3cinput id\x3d"confirm_register_email" name\x3d"confirm_register_email" data-dojo-attach-point\x3d"_confirmEmail"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_confirmEmailError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_username"\x3e\r\n          ${i18n.yourUserName}\r\n          \x3cinput id\x3d"register_username" name\x3d"register_username" data-dojo-attach-point\x3d"_username"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_usernameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password"\x3e\r\n          ${i18n.choosePwd}\r\n          \x3cinput id\x3d"register_password" name\x3d"register_password" data-dojo-attach-point\x3d"_pwd" type\x3d"password"/\x3e\r\n          \x3cdiv class\x3d"invite-members__form-password" data-dojo-attach-point\x3d"_pwdStrengthError"\x3e\r\n              \x3cdiv class\x3d"js-strength-meter"\x3e\x3c/div\x3e\r\n              \x3cdiv class\x3d"font-size-0 input-error-message" data-dojo-attach-point\x3d"_pwdError"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password2"\x3e\r\n          ${i18n.renterPwd}\r\n          \x3cinput id\x3d"register_password2" name\x3d"register_password2" data-dojo-attach-point\x3d"_verifyPwd" type\x3d"password"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_verifyPwdError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_question"\x3e\r\n          ${i18n.identityQLabel}\x3cbr\x3e\r\n          \x3cselect id\x3d"identity_question" data-dojo-attach-point\x3d"_identityQuestion"\x3e\x3c/select\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityQuestionError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_answer"\x3e\r\n          ${i18n.identityALabel}\r\n          \x3cinput id\x3d"identity_answer" data-dojo-attach-point\x3d"_identityAnswer" type\x3d"text"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityAnswerError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-1 right"\x3e\r\n        \x3cbutton id\x3d"button_create_account" class\x3d"btn btn-blue" type\x3d"submit" data-dojo-attach-point\x3d"_createAccountBtn"\x3e${i18n.createAcc}\x3c/button\x3e\r\n        \x3cbutton id\x3d"button_cancel" class\x3d"btn btn-clear" type\x3d"button" data-dojo-attach-point\x3d"_cancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/ProfilePopup.html":'\x3cdiv\x3e\r\n  \x3cspan tabindex\x3d"0" data-dojo-attach-point\x3d"closeIcon" class\x3d"hide popover-close icon-ui-close" tab-index\x3d"0" aria-label\x3d"${i18n.common.close}"\x3e\x3c/span\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"loader" class\x3d"profile-popup__loader loader is-active"\x3e\r\n    \x3cdiv class\x3d"profile-popup__loader-bars loader-bars"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hide text-left" data-dojo-attach-point\x3d"content"\x3e\r\n    \x3cdiv class\x3d"profile-popup__top-section flex flex-align-center"\x3e\r\n      \x3cdiv class\x3d"js-member-thumb"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex-1 margin-right-1"\x3e\r\n        \x3cdiv class\x3d"avenir-bold font-size-1 profile-popup__full-name" data-dojo-attach-point\x3d"fullNameEl"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-size--1" data-dojo-attach-point\x3d"usernameEl"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"viewProfileBtn" class\x3d"btn-link profile-popup__link font-size--1 flex-0"\x3e${i18n.myOrganization.formatters.viewProfile} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"profile-popup__bottom-section" data-dojo-attach-point\x3d"bottomSection"\x3e\r\n      \x3cdiv class\x3d"profile-popup__bio-container" data-dojo-attach-point\x3d"bioContainer"\x3e\r\n        \x3cp class\x3d"profile-popup__bio-section trailer-half" data-dojo-attach-point\x3d"bioEl"\x3e\x3c/p\x3e\r\n        \x3cbutton class\x3d"hide btn-link btn-link-darker-gray profile-popup__more-toggle" data-dojo-attach-point\x3d"bioToggle"\x3e${!icons.chevron-down.24}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.groups}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex" data-dojo-attach-point\x3d"groupIcons"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__items-section hide" data-dojo-attach-point\x3d"itemsSection"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.items}\x3c/div\x3e\r\n          \x3cdiv class\x3d"font-size-4 profile-popup__item-count" data-dojo-attach-point\x3d"itemCountEl"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/MemberThumb/templates/MemberThumb.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"content" class\x3d"member-thumb ${cssClasses}" style\x3d"background:${member.backgroundColor};"\x3e\r\n    \x3cimg src\x3d"${member.thumbnailUrl}" alt\x3d"" class\x3d"margin-left-0 ${member.thumbnail:hide}" data-dojo-attach-point\x3d"img"\x3e\r\n    \x3cdiv class\x3d"member-thumb__initials ${member.thumbnail:show}" data-dojo-attach-point\x3d"initials"\x3e\r\n      ${member.initials}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"member-thumb__edit-mask"\x3e\r\n      ${!icons.plus-circle.32}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"*now":function(b){b(['dojo/i18n!*preload*arcgisonline/nls/base*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("arcgisonline/base",["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!esri/main,esri/utils,arcgisonline/init,arcgisonline/sharing/dijit/SiteHeader,arcgisonline/sharing/dijit/SiteFooter,arcgisonline/sharing/dijit/SiteFooterMap,arcgisonline/sharing/dijit/SignUp,arcgisonline/sharing/dijit/SignUpInternal,dijit/form/Form,arcgisonline/sharing/geow/Account,arcgisonline/sharing/dijit/HelpManager,dojo/date/locale,dojox/widget/Rotator,dojox/widget/AutoRotator,dojox/widget/rotator/Controller,dojox/widget/rotator/Fade,dijit/layout/StackController,dojo/cookie,dojo/json,arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,dojo/topic,dijit/_base,dijit/form/DropDownButton,dijit/form/ComboButton,dijit/form/ToggleButton,dijit/form/RadioButton,dijit/PopupMenuItem,dijit/_Contained,dijit/_Container,dijit/_WidgetBase,dijit/main,dojo/Stateful,dojo/date/locale,esri/utils,arcgisonline/sharing/dijit/Gallery,arcgisonline/sharing/util,arcgisonline/sharing/dijit/views,dojo/parser,dijit/_base,dojo/dnd/AutoSource,dojo/dnd/Target,dojo/fx/Toggler,dijit/TooltipDialog,dijit/MenuSeparator"],function(b,
y,r){b.provide("arcgisonline.base");b.require("esri.main");b.require("esri.utils");b.require("arcgisonline.init");b.require("arcgisonline.sharing.dijit.SiteHeader");b.require("arcgisonline.sharing.dijit.SiteFooter");b.require("arcgisonline.sharing.dijit.SiteFooterMap");b.require("arcgisonline.sharing.dijit.SignUp");b.require("arcgisonline.sharing.dijit.SignUpInternal");b.require("dijit.form.Form");b.require("arcgisonline.sharing.geow.Account");b.require("arcgisonline.sharing.dijit.HelpManager");b.require("dojo.date.locale");
b.require("dojox.widget.Rotator");b.require("dojox.widget.AutoRotator");b.require("dojox.widget.rotator.Controller");b.require("dojox.widget.rotator.Fade");b.require("dijit.layout.StackController");b.require("dojo.cookie");b.require("dojo.json");b.require("arcgisonline.sharing.dijit.TextMenu");b.require("arcgisonline.sharing.util");b.require("dojo.topic");b.require("dijit._base");b.require("dijit.form.DropDownButton");b.require("dijit.form.ComboButton");b.require("dijit.form.ToggleButton");b.require("dijit.form.RadioButton");
b.require("dijit.PopupMenuItem");b.require("dijit._Contained");b.require("dijit._Container");b.require("dijit._WidgetBase");b.require("dijit.main");b.require("dojo.Stateful");b.require("dojo.date.locale");b.require("esri.utils");b.require("arcgisonline.sharing.dijit.Gallery");b.require("arcgisonline.sharing.util");b.require("arcgisonline.sharing.dijit.views");b.require("dojo.parser");b.require("dijit._base");b.require("dojo.dnd.AutoSource");b.require("dojo.dnd.Target");b.require("dojo.fx.Toggler");
b.require("dijit.TooltipDialog");b.require("dijit.MenuSeparator");b.requireLocalization("arcgisonline","arcgisonline")});